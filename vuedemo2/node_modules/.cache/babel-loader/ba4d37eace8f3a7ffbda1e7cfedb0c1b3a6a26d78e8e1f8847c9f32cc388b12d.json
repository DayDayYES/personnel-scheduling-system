{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport * as interactionMutex from './interactionMutex.js';\nimport { isString, bind, defaults, extend, retrieve2 } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nimport { retrieveZInfo } from '../../util/graphic.js';\nimport { onIrrelevantElement } from './cursorHelper.js';\n;\n/**\n * An manager of zoom and pan(darg) hehavior.\n * But it is not responsible for updating the view, since view updates vary and can\n * not be handled in a uniform way.\n *\n * Note: regarding view updates:\n *  - Transformabe views typically use `coord/View` (e.g., geo and series.graph roaming).\n *    Some commonly used view update logic has been organized into `roamHelper.ts`.\n *  - Non-transformable views handle updates themselves, possibly involving re-layout,\n *    (e.g., treemap).\n *  - Some scenarios do not require transformation (e.g., dataZoom roaming for cartesian,\n *    brush component).\n */\nvar RoamController = /** @class */function (_super) {\n  __extends(RoamController, _super);\n  function RoamController(zr) {\n    var _this = _super.call(this) || this;\n    _this._zr = zr;\n    // Avoid two roamController bind the same handler\n    var mousedownHandler = bind(_this._mousedownHandler, _this);\n    var mousemoveHandler = bind(_this._mousemoveHandler, _this);\n    var mouseupHandler = bind(_this._mouseupHandler, _this);\n    var mousewheelHandler = bind(_this._mousewheelHandler, _this);\n    var pinchHandler = bind(_this._pinchHandler, _this);\n    /**\n     * Notice:\n     *  - only enable needed types. For example, if 'zoom'\n     *    is not needed, 'zoom' should not be enabled, otherwise\n     *    default mousewheel behaviour (scroll page) will be disabled.\n     *  - This method is idempotent.\n     */\n    _this.enable = function (controlType, rawOpt) {\n      var zInfo = rawOpt.zInfo;\n      var _a = retrieveZInfo(zInfo.component),\n        z = _a.z,\n        zlevel = _a.zlevel;\n      var zInfoParsed = {\n        component: zInfo.component,\n        z: z,\n        zlevel: zlevel,\n        // By default roam controller is the lowest z2 comparing to other elememts in a component.\n        z2: retrieve2(zInfo.z2, -Infinity)\n      };\n      var triggerInfo = extend({}, rawOpt.triggerInfo);\n      this._opt = defaults(extend({}, rawOpt), {\n        zoomOnMouseWheel: true,\n        moveOnMouseMove: true,\n        // By default, wheel do not trigger move.\n        moveOnMouseWheel: false,\n        preventDefaultMouseMove: true,\n        zInfoParsed: zInfoParsed,\n        triggerInfo: triggerInfo\n      });\n      if (controlType == null) {\n        controlType = true;\n      }\n      // A handy optimization for repeatedly calling `enable` during roaming.\n      // Assert `disable` is only affected by `controlType`.\n      if (!this._enabled || this._controlType !== controlType) {\n        this._enabled = true;\n        // Disable previous first\n        this.disable();\n        if (controlType === true || controlType === 'move' || controlType === 'pan') {\n          addRoamZrListener(zr, 'mousedown', mousedownHandler, zInfoParsed);\n          addRoamZrListener(zr, 'mousemove', mousemoveHandler, zInfoParsed);\n          addRoamZrListener(zr, 'mouseup', mouseupHandler, zInfoParsed);\n        }\n        if (controlType === true || controlType === 'scale' || controlType === 'zoom') {\n          addRoamZrListener(zr, 'mousewheel', mousewheelHandler, zInfoParsed);\n          addRoamZrListener(zr, 'pinch', pinchHandler, zInfoParsed);\n        }\n      }\n    };\n    _this.disable = function () {\n      this._enabled = false;\n      removeRoamZrListener(zr, 'mousedown', mousedownHandler);\n      removeRoamZrListener(zr, 'mousemove', mousemoveHandler);\n      removeRoamZrListener(zr, 'mouseup', mouseupHandler);\n      removeRoamZrListener(zr, 'mousewheel', mousewheelHandler);\n      removeRoamZrListener(zr, 'pinch', pinchHandler);\n    };\n    return _this;\n  }\n  RoamController.prototype.isDragging = function () {\n    return this._dragging;\n  };\n  RoamController.prototype.isPinching = function () {\n    return this._pinching;\n  };\n  RoamController.prototype._checkPointer = function (e, x, y) {\n    var opt = this._opt;\n    var zInfoParsed = opt.zInfoParsed;\n    if (onIrrelevantElement(e, opt.api, zInfoParsed.component)) {\n      return false;\n    }\n    ;\n    var triggerInfo = opt.triggerInfo;\n    var roamTrigger = triggerInfo.roamTrigger;\n    var inArea = false;\n    if (roamTrigger === 'global') {\n      inArea = true;\n    }\n    if (!inArea) {\n      inArea = triggerInfo.isInSelf(e, x, y);\n    }\n    if (inArea && triggerInfo.isInClip && !triggerInfo.isInClip(e, x, y)) {\n      inArea = false;\n    }\n    return inArea;\n  };\n  RoamController.prototype._decideCursorStyle = function (e, x, y, forReverse) {\n    // If this cursor style decision is not strictly consistent with zrender,\n    // it's fine - zr will set the cursor on the next mousemove.\n    // This `grab` cursor style should take the lowest precedence. If the hovring element already\n    // have a cursor, zrender will set it to be non-'default' before entering this handler.\n    // (note, e.target is never silent, e.topTarget can be silent be irrelevant.)\n    var target = e.target;\n    if (!target && this._checkPointer(e, x, y)) {\n      // To indicate users that this area is draggable, otherwise users probably cannot kwown\n      // that when hovering out of the shape but still inside the bounding rect.\n      return 'grab';\n    }\n    if (forReverse) {\n      return target && target.cursor || 'default';\n    }\n  };\n  RoamController.prototype.dispose = function () {\n    this.disable();\n  };\n  RoamController.prototype._mousedownHandler = function (e) {\n    if (eventTool.isMiddleOrRightButtonOnMouseUpDown(e) || eventConsumed(e)) {\n      return;\n    }\n    var el = e.target;\n    while (el) {\n      if (el.draggable) {\n        return;\n      }\n      // check if host is draggable\n      el = el.__hostTarget || el.parent;\n    }\n    var x = e.offsetX;\n    var y = e.offsetY;\n    // To determine dragging start, only by checking on mosedown, but not mousemove.\n    // Mouse can be out of target when mouse moving.\n    if (this._checkPointer(e, x, y)) {\n      this._x = x;\n      this._y = y;\n      this._dragging = true;\n    }\n  };\n  RoamController.prototype._mousemoveHandler = function (e) {\n    var zr = this._zr;\n    if (e.gestureEvent === 'pinch' || interactionMutex.isTaken(zr, 'globalPan') || eventConsumed(e)) {\n      return;\n    }\n    var x = e.offsetX;\n    var y = e.offsetY;\n    if (!this._dragging || !isAvailableBehavior('moveOnMouseMove', e, this._opt)) {\n      var cursorStyle = this._decideCursorStyle(e, x, y, false);\n      if (cursorStyle) {\n        zr.setCursorStyle(cursorStyle);\n      }\n      return;\n    }\n    zr.setCursorStyle('grabbing');\n    var oldX = this._x;\n    var oldY = this._y;\n    var dx = x - oldX;\n    var dy = y - oldY;\n    this._x = x;\n    this._y = y;\n    if (this._opt.preventDefaultMouseMove) {\n      eventTool.stop(e.event);\n    }\n    e.__ecRoamConsumed = true;\n    trigger(this, 'pan', 'moveOnMouseMove', e, {\n      dx: dx,\n      dy: dy,\n      oldX: oldX,\n      oldY: oldY,\n      newX: x,\n      newY: y,\n      isAvailableBehavior: null\n    });\n  };\n  RoamController.prototype._mouseupHandler = function (e) {\n    if (eventConsumed(e)) {\n      return;\n    }\n    var zr = this._zr;\n    if (!eventTool.isMiddleOrRightButtonOnMouseUpDown(e)) {\n      this._dragging = false;\n      var cursorStyle = this._decideCursorStyle(e, e.offsetX, e.offsetY, true);\n      if (cursorStyle) {\n        zr.setCursorStyle(cursorStyle);\n      }\n    }\n  };\n  RoamController.prototype._mousewheelHandler = function (e) {\n    if (eventConsumed(e)) {\n      return;\n    }\n    var shouldZoom = isAvailableBehavior('zoomOnMouseWheel', e, this._opt);\n    var shouldMove = isAvailableBehavior('moveOnMouseWheel', e, this._opt);\n    var wheelDelta = e.wheelDelta;\n    var absWheelDeltaDelta = Math.abs(wheelDelta);\n    var originX = e.offsetX;\n    var originY = e.offsetY;\n    // wheelDelta maybe -0 in chrome mac.\n    if (wheelDelta === 0 || !shouldZoom && !shouldMove) {\n      return;\n    }\n    // If both `shouldZoom` and `shouldMove` is true, trigger\n    // their event both, and the final behavior is determined\n    // by event listener themselves.\n    if (shouldZoom) {\n      // Convenience:\n      // Mac and VM Windows on Mac: scroll up: zoom out.\n      // Windows: scroll up: zoom in.\n      // FIXME: Should do more test in different environment.\n      // wheelDelta is too complicated in difference nvironment\n      // (https://developer.mozilla.org/en-US/docs/Web/Events/mousewheel),\n      // although it has been normallized by zrender.\n      // wheelDelta of mouse wheel is bigger than touch pad.\n      var factor = absWheelDeltaDelta > 3 ? 1.4 : absWheelDeltaDelta > 1 ? 1.2 : 1.1;\n      var scale = wheelDelta > 0 ? factor : 1 / factor;\n      this._checkTriggerMoveZoom(this, 'zoom', 'zoomOnMouseWheel', e, {\n        scale: scale,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n    if (shouldMove) {\n      // FIXME: Should do more test in different environment.\n      var absDelta = Math.abs(wheelDelta);\n      // wheelDelta of mouse wheel is bigger than touch pad.\n      var scrollDelta = (wheelDelta > 0 ? 1 : -1) * (absDelta > 3 ? 0.4 : absDelta > 1 ? 0.15 : 0.05);\n      this._checkTriggerMoveZoom(this, 'scrollMove', 'moveOnMouseWheel', e, {\n        scrollDelta: scrollDelta,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n  };\n  RoamController.prototype._pinchHandler = function (e) {\n    if (interactionMutex.isTaken(this._zr, 'globalPan') || eventConsumed(e)) {\n      return;\n    }\n    var scale = e.pinchScale > 1 ? 1.1 : 1 / 1.1;\n    this._checkTriggerMoveZoom(this, 'zoom', null, e, {\n      scale: scale,\n      originX: e.pinchX,\n      originY: e.pinchY,\n      isAvailableBehavior: null\n    });\n  };\n  RoamController.prototype._checkTriggerMoveZoom = function (controller, eventName, behaviorToCheck, e, contollerEvent) {\n    if (controller._checkPointer(e, contollerEvent.originX, contollerEvent.originY)) {\n      // When mouse is out of roamController rect,\n      // default befavoius should not be be disabled, otherwise\n      // page sliding is disabled, contrary to expectation.\n      eventTool.stop(e.event);\n      e.__ecRoamConsumed = true;\n      trigger(controller, eventName, behaviorToCheck, e, contollerEvent);\n    }\n  };\n  return RoamController;\n}(Eventful);\nfunction eventConsumed(e) {\n  return e.__ecRoamConsumed;\n}\nvar innerZrStore = makeInner();\nfunction ensureZrStore(zr) {\n  var store = innerZrStore(zr);\n  store.roam = store.roam || {};\n  store.uniform = store.uniform || {};\n  return store;\n}\n/**\n * Listeners are sorted by z2/z/zlevel in descending order.\n * This decides the precedence between different roam controllers if they are overlapped.\n *\n * [MEMO]: It's not easy to perfectly reconcile the conflicts caused by overlap.\n *  - Consider cases:\n *    - Multiple roam controllers overlapped.\n *      - Usually only the topmost can trigger roam.\n *    - Roam controllers overlap with other zr elements:\n *      - zr elements are relevant or irrelevent to the host of the roam controller. e.g., axis split line\n *        or series elements is relevant to a cartesian and should trigger roam.\n *      - zr elements is above or below the roam controller host, which affects the precedence of interaction.\n *      - zr elements may not silent only for triggering tooltip by hovering, which is available to roam;\n *        or may not silent for click, where roam is not preferable.\n *  - Approach - `addRoamZrListener+pointerChecker+onIrrelevantElement` (currently used):\n *    - Resolve the precedence between different roam controllers\n *    - But cannot prevent the handling on other zr elements that under the roam controller in z-order.\n *  - Approach - \"use an invisible zr elements to receive the zr events to trigger roam\":\n *    - More complicated in impl.\n *    - May cause bad cases where zr event cannot be receive due to other non-silient zr elements covering it.\n */\nfunction addRoamZrListener(zr, eventType, listener, zInfoParsed) {\n  var store = ensureZrStore(zr);\n  var roam = store.roam;\n  var listenerList = roam[eventType] = roam[eventType] || [];\n  var idx = 0;\n  for (; idx < listenerList.length; idx++) {\n    var currZInfo = listenerList[idx].zInfoParsed;\n    if ((currZInfo.zlevel - zInfoParsed.zlevel || currZInfo.z - zInfoParsed.z || currZInfo.z2 - zInfoParsed.z2\n    // If all equals, the latter added one has a higher precedence.\n    ) <= 0) {\n      break;\n    }\n  }\n  listenerList.splice(idx, 0, {\n    listener: listener,\n    zInfoParsed: zInfoParsed\n  });\n  ensureUniformListener(zr, eventType);\n}\nfunction removeRoamZrListener(zr, eventType, listener) {\n  var store = ensureZrStore(zr);\n  var listenerList = store.roam[eventType] || [];\n  for (var idx = 0; idx < listenerList.length; idx++) {\n    if (listenerList[idx].listener === listener) {\n      listenerList.splice(idx, 1);\n      if (!listenerList.length) {\n        removeUniformListener(zr, eventType);\n      }\n      return;\n    }\n  }\n}\nfunction ensureUniformListener(zr, eventType) {\n  var store = ensureZrStore(zr);\n  if (!store.uniform[eventType]) {\n    zr.on(eventType, store.uniform[eventType] = function (event) {\n      var listenerList = store.roam[eventType];\n      if (listenerList) {\n        for (var i = 0; i < listenerList.length; i++) {\n          listenerList[i].listener(event);\n        }\n      }\n    });\n  }\n}\nfunction removeUniformListener(zr, eventType) {\n  var store = ensureZrStore(zr);\n  var uniform = store.uniform;\n  if (uniform[eventType]) {\n    zr.off(eventType, uniform[eventType]);\n    uniform[eventType] = null;\n  }\n}\nfunction trigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  // Also provide behavior checker for event listener, for some case that\n  // multiple components share one listener.\n  contollerEvent.isAvailableBehavior = bind(isAvailableBehavior, null, behaviorToCheck, e);\n  // TODO should not have type issue.\n  controller.trigger(eventName, contollerEvent);\n}\n// settings: {\n//     zoomOnMouseWheel\n//     moveOnMouseMove\n//     moveOnMouseWheel\n// }\n// The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\nfunction isAvailableBehavior(behaviorToCheck, e, settings) {\n  var setting = settings[behaviorToCheck];\n  return !behaviorToCheck || setting && (!isString(setting) || e.event[setting + 'Key']);\n}\nexport default RoamController;","map":{"version":3,"names":["__extends","Eventful","eventTool","interactionMutex","isString","bind","defaults","extend","retrieve2","makeInner","retrieveZInfo","onIrrelevantElement","RoamController","_super","zr","_this","call","_zr","mousedownHandler","_mousedownHandler","mousemoveHandler","_mousemoveHandler","mouseupHandler","_mouseupHandler","mousewheelHandler","_mousewheelHandler","pinchHandler","_pinchHandler","enable","controlType","rawOpt","zInfo","_a","component","z","zlevel","zInfoParsed","z2","Infinity","triggerInfo","_opt","zoomOnMouseWheel","moveOnMouseMove","moveOnMouseWheel","preventDefaultMouseMove","_enabled","_controlType","disable","addRoamZrListener","removeRoamZrListener","prototype","isDragging","_dragging","isPinching","_pinching","_checkPointer","e","x","y","opt","api","roamTrigger","inArea","isInSelf","isInClip","_decideCursorStyle","forReverse","target","cursor","dispose","isMiddleOrRightButtonOnMouseUpDown","eventConsumed","el","draggable","__hostTarget","parent","offsetX","offsetY","_x","_y","gestureEvent","isTaken","isAvailableBehavior","cursorStyle","setCursorStyle","oldX","oldY","dx","dy","stop","event","__ecRoamConsumed","trigger","newX","newY","shouldZoom","shouldMove","wheelDelta","absWheelDeltaDelta","Math","abs","originX","originY","factor","scale","_checkTriggerMoveZoom","absDelta","scrollDelta","pinchScale","pinchX","pinchY","controller","eventName","behaviorToCheck","contollerEvent","innerZrStore","ensureZrStore","store","roam","uniform","eventType","listener","listenerList","idx","length","currZInfo","splice","ensureUniformListener","removeUniformListener","on","i","off","settings","setting"],"sources":["D:/Program Files/JetBrains/IDEAProject/springboot-vue-wms_test/vuedemo2/node_modules/echarts/lib/component/helper/RoamController.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport * as interactionMutex from './interactionMutex.js';\nimport { isString, bind, defaults, extend, retrieve2 } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nimport { retrieveZInfo } from '../../util/graphic.js';\nimport { onIrrelevantElement } from './cursorHelper.js';\n;\n/**\n * An manager of zoom and pan(darg) hehavior.\n * But it is not responsible for updating the view, since view updates vary and can\n * not be handled in a uniform way.\n *\n * Note: regarding view updates:\n *  - Transformabe views typically use `coord/View` (e.g., geo and series.graph roaming).\n *    Some commonly used view update logic has been organized into `roamHelper.ts`.\n *  - Non-transformable views handle updates themselves, possibly involving re-layout,\n *    (e.g., treemap).\n *  - Some scenarios do not require transformation (e.g., dataZoom roaming for cartesian,\n *    brush component).\n */\nvar RoamController = /** @class */function (_super) {\n  __extends(RoamController, _super);\n  function RoamController(zr) {\n    var _this = _super.call(this) || this;\n    _this._zr = zr;\n    // Avoid two roamController bind the same handler\n    var mousedownHandler = bind(_this._mousedownHandler, _this);\n    var mousemoveHandler = bind(_this._mousemoveHandler, _this);\n    var mouseupHandler = bind(_this._mouseupHandler, _this);\n    var mousewheelHandler = bind(_this._mousewheelHandler, _this);\n    var pinchHandler = bind(_this._pinchHandler, _this);\n    /**\n     * Notice:\n     *  - only enable needed types. For example, if 'zoom'\n     *    is not needed, 'zoom' should not be enabled, otherwise\n     *    default mousewheel behaviour (scroll page) will be disabled.\n     *  - This method is idempotent.\n     */\n    _this.enable = function (controlType, rawOpt) {\n      var zInfo = rawOpt.zInfo;\n      var _a = retrieveZInfo(zInfo.component),\n        z = _a.z,\n        zlevel = _a.zlevel;\n      var zInfoParsed = {\n        component: zInfo.component,\n        z: z,\n        zlevel: zlevel,\n        // By default roam controller is the lowest z2 comparing to other elememts in a component.\n        z2: retrieve2(zInfo.z2, -Infinity)\n      };\n      var triggerInfo = extend({}, rawOpt.triggerInfo);\n      this._opt = defaults(extend({}, rawOpt), {\n        zoomOnMouseWheel: true,\n        moveOnMouseMove: true,\n        // By default, wheel do not trigger move.\n        moveOnMouseWheel: false,\n        preventDefaultMouseMove: true,\n        zInfoParsed: zInfoParsed,\n        triggerInfo: triggerInfo\n      });\n      if (controlType == null) {\n        controlType = true;\n      }\n      // A handy optimization for repeatedly calling `enable` during roaming.\n      // Assert `disable` is only affected by `controlType`.\n      if (!this._enabled || this._controlType !== controlType) {\n        this._enabled = true;\n        // Disable previous first\n        this.disable();\n        if (controlType === true || controlType === 'move' || controlType === 'pan') {\n          addRoamZrListener(zr, 'mousedown', mousedownHandler, zInfoParsed);\n          addRoamZrListener(zr, 'mousemove', mousemoveHandler, zInfoParsed);\n          addRoamZrListener(zr, 'mouseup', mouseupHandler, zInfoParsed);\n        }\n        if (controlType === true || controlType === 'scale' || controlType === 'zoom') {\n          addRoamZrListener(zr, 'mousewheel', mousewheelHandler, zInfoParsed);\n          addRoamZrListener(zr, 'pinch', pinchHandler, zInfoParsed);\n        }\n      }\n    };\n    _this.disable = function () {\n      this._enabled = false;\n      removeRoamZrListener(zr, 'mousedown', mousedownHandler);\n      removeRoamZrListener(zr, 'mousemove', mousemoveHandler);\n      removeRoamZrListener(zr, 'mouseup', mouseupHandler);\n      removeRoamZrListener(zr, 'mousewheel', mousewheelHandler);\n      removeRoamZrListener(zr, 'pinch', pinchHandler);\n    };\n    return _this;\n  }\n  RoamController.prototype.isDragging = function () {\n    return this._dragging;\n  };\n  RoamController.prototype.isPinching = function () {\n    return this._pinching;\n  };\n  RoamController.prototype._checkPointer = function (e, x, y) {\n    var opt = this._opt;\n    var zInfoParsed = opt.zInfoParsed;\n    if (onIrrelevantElement(e, opt.api, zInfoParsed.component)) {\n      return false;\n    }\n    ;\n    var triggerInfo = opt.triggerInfo;\n    var roamTrigger = triggerInfo.roamTrigger;\n    var inArea = false;\n    if (roamTrigger === 'global') {\n      inArea = true;\n    }\n    if (!inArea) {\n      inArea = triggerInfo.isInSelf(e, x, y);\n    }\n    if (inArea && triggerInfo.isInClip && !triggerInfo.isInClip(e, x, y)) {\n      inArea = false;\n    }\n    return inArea;\n  };\n  RoamController.prototype._decideCursorStyle = function (e, x, y, forReverse) {\n    // If this cursor style decision is not strictly consistent with zrender,\n    // it's fine - zr will set the cursor on the next mousemove.\n    // This `grab` cursor style should take the lowest precedence. If the hovring element already\n    // have a cursor, zrender will set it to be non-'default' before entering this handler.\n    // (note, e.target is never silent, e.topTarget can be silent be irrelevant.)\n    var target = e.target;\n    if (!target && this._checkPointer(e, x, y)) {\n      // To indicate users that this area is draggable, otherwise users probably cannot kwown\n      // that when hovering out of the shape but still inside the bounding rect.\n      return 'grab';\n    }\n    if (forReverse) {\n      return target && target.cursor || 'default';\n    }\n  };\n  RoamController.prototype.dispose = function () {\n    this.disable();\n  };\n  RoamController.prototype._mousedownHandler = function (e) {\n    if (eventTool.isMiddleOrRightButtonOnMouseUpDown(e) || eventConsumed(e)) {\n      return;\n    }\n    var el = e.target;\n    while (el) {\n      if (el.draggable) {\n        return;\n      }\n      // check if host is draggable\n      el = el.__hostTarget || el.parent;\n    }\n    var x = e.offsetX;\n    var y = e.offsetY;\n    // To determine dragging start, only by checking on mosedown, but not mousemove.\n    // Mouse can be out of target when mouse moving.\n    if (this._checkPointer(e, x, y)) {\n      this._x = x;\n      this._y = y;\n      this._dragging = true;\n    }\n  };\n  RoamController.prototype._mousemoveHandler = function (e) {\n    var zr = this._zr;\n    if (e.gestureEvent === 'pinch' || interactionMutex.isTaken(zr, 'globalPan') || eventConsumed(e)) {\n      return;\n    }\n    var x = e.offsetX;\n    var y = e.offsetY;\n    if (!this._dragging || !isAvailableBehavior('moveOnMouseMove', e, this._opt)) {\n      var cursorStyle = this._decideCursorStyle(e, x, y, false);\n      if (cursorStyle) {\n        zr.setCursorStyle(cursorStyle);\n      }\n      return;\n    }\n    zr.setCursorStyle('grabbing');\n    var oldX = this._x;\n    var oldY = this._y;\n    var dx = x - oldX;\n    var dy = y - oldY;\n    this._x = x;\n    this._y = y;\n    if (this._opt.preventDefaultMouseMove) {\n      eventTool.stop(e.event);\n    }\n    e.__ecRoamConsumed = true;\n    trigger(this, 'pan', 'moveOnMouseMove', e, {\n      dx: dx,\n      dy: dy,\n      oldX: oldX,\n      oldY: oldY,\n      newX: x,\n      newY: y,\n      isAvailableBehavior: null\n    });\n  };\n  RoamController.prototype._mouseupHandler = function (e) {\n    if (eventConsumed(e)) {\n      return;\n    }\n    var zr = this._zr;\n    if (!eventTool.isMiddleOrRightButtonOnMouseUpDown(e)) {\n      this._dragging = false;\n      var cursorStyle = this._decideCursorStyle(e, e.offsetX, e.offsetY, true);\n      if (cursorStyle) {\n        zr.setCursorStyle(cursorStyle);\n      }\n    }\n  };\n  RoamController.prototype._mousewheelHandler = function (e) {\n    if (eventConsumed(e)) {\n      return;\n    }\n    var shouldZoom = isAvailableBehavior('zoomOnMouseWheel', e, this._opt);\n    var shouldMove = isAvailableBehavior('moveOnMouseWheel', e, this._opt);\n    var wheelDelta = e.wheelDelta;\n    var absWheelDeltaDelta = Math.abs(wheelDelta);\n    var originX = e.offsetX;\n    var originY = e.offsetY;\n    // wheelDelta maybe -0 in chrome mac.\n    if (wheelDelta === 0 || !shouldZoom && !shouldMove) {\n      return;\n    }\n    // If both `shouldZoom` and `shouldMove` is true, trigger\n    // their event both, and the final behavior is determined\n    // by event listener themselves.\n    if (shouldZoom) {\n      // Convenience:\n      // Mac and VM Windows on Mac: scroll up: zoom out.\n      // Windows: scroll up: zoom in.\n      // FIXME: Should do more test in different environment.\n      // wheelDelta is too complicated in difference nvironment\n      // (https://developer.mozilla.org/en-US/docs/Web/Events/mousewheel),\n      // although it has been normallized by zrender.\n      // wheelDelta of mouse wheel is bigger than touch pad.\n      var factor = absWheelDeltaDelta > 3 ? 1.4 : absWheelDeltaDelta > 1 ? 1.2 : 1.1;\n      var scale = wheelDelta > 0 ? factor : 1 / factor;\n      this._checkTriggerMoveZoom(this, 'zoom', 'zoomOnMouseWheel', e, {\n        scale: scale,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n    if (shouldMove) {\n      // FIXME: Should do more test in different environment.\n      var absDelta = Math.abs(wheelDelta);\n      // wheelDelta of mouse wheel is bigger than touch pad.\n      var scrollDelta = (wheelDelta > 0 ? 1 : -1) * (absDelta > 3 ? 0.4 : absDelta > 1 ? 0.15 : 0.05);\n      this._checkTriggerMoveZoom(this, 'scrollMove', 'moveOnMouseWheel', e, {\n        scrollDelta: scrollDelta,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n  };\n  RoamController.prototype._pinchHandler = function (e) {\n    if (interactionMutex.isTaken(this._zr, 'globalPan') || eventConsumed(e)) {\n      return;\n    }\n    var scale = e.pinchScale > 1 ? 1.1 : 1 / 1.1;\n    this._checkTriggerMoveZoom(this, 'zoom', null, e, {\n      scale: scale,\n      originX: e.pinchX,\n      originY: e.pinchY,\n      isAvailableBehavior: null\n    });\n  };\n  RoamController.prototype._checkTriggerMoveZoom = function (controller, eventName, behaviorToCheck, e, contollerEvent) {\n    if (controller._checkPointer(e, contollerEvent.originX, contollerEvent.originY)) {\n      // When mouse is out of roamController rect,\n      // default befavoius should not be be disabled, otherwise\n      // page sliding is disabled, contrary to expectation.\n      eventTool.stop(e.event);\n      e.__ecRoamConsumed = true;\n      trigger(controller, eventName, behaviorToCheck, e, contollerEvent);\n    }\n  };\n  return RoamController;\n}(Eventful);\nfunction eventConsumed(e) {\n  return e.__ecRoamConsumed;\n}\nvar innerZrStore = makeInner();\nfunction ensureZrStore(zr) {\n  var store = innerZrStore(zr);\n  store.roam = store.roam || {};\n  store.uniform = store.uniform || {};\n  return store;\n}\n/**\n * Listeners are sorted by z2/z/zlevel in descending order.\n * This decides the precedence between different roam controllers if they are overlapped.\n *\n * [MEMO]: It's not easy to perfectly reconcile the conflicts caused by overlap.\n *  - Consider cases:\n *    - Multiple roam controllers overlapped.\n *      - Usually only the topmost can trigger roam.\n *    - Roam controllers overlap with other zr elements:\n *      - zr elements are relevant or irrelevent to the host of the roam controller. e.g., axis split line\n *        or series elements is relevant to a cartesian and should trigger roam.\n *      - zr elements is above or below the roam controller host, which affects the precedence of interaction.\n *      - zr elements may not silent only for triggering tooltip by hovering, which is available to roam;\n *        or may not silent for click, where roam is not preferable.\n *  - Approach - `addRoamZrListener+pointerChecker+onIrrelevantElement` (currently used):\n *    - Resolve the precedence between different roam controllers\n *    - But cannot prevent the handling on other zr elements that under the roam controller in z-order.\n *  - Approach - \"use an invisible zr elements to receive the zr events to trigger roam\":\n *    - More complicated in impl.\n *    - May cause bad cases where zr event cannot be receive due to other non-silient zr elements covering it.\n */\nfunction addRoamZrListener(zr, eventType, listener, zInfoParsed) {\n  var store = ensureZrStore(zr);\n  var roam = store.roam;\n  var listenerList = roam[eventType] = roam[eventType] || [];\n  var idx = 0;\n  for (; idx < listenerList.length; idx++) {\n    var currZInfo = listenerList[idx].zInfoParsed;\n    if ((currZInfo.zlevel - zInfoParsed.zlevel || currZInfo.z - zInfoParsed.z || currZInfo.z2 - zInfoParsed.z2\n    // If all equals, the latter added one has a higher precedence.\n    ) <= 0) {\n      break;\n    }\n  }\n  listenerList.splice(idx, 0, {\n    listener: listener,\n    zInfoParsed: zInfoParsed\n  });\n  ensureUniformListener(zr, eventType);\n}\nfunction removeRoamZrListener(zr, eventType, listener) {\n  var store = ensureZrStore(zr);\n  var listenerList = store.roam[eventType] || [];\n  for (var idx = 0; idx < listenerList.length; idx++) {\n    if (listenerList[idx].listener === listener) {\n      listenerList.splice(idx, 1);\n      if (!listenerList.length) {\n        removeUniformListener(zr, eventType);\n      }\n      return;\n    }\n  }\n}\nfunction ensureUniformListener(zr, eventType) {\n  var store = ensureZrStore(zr);\n  if (!store.uniform[eventType]) {\n    zr.on(eventType, store.uniform[eventType] = function (event) {\n      var listenerList = store.roam[eventType];\n      if (listenerList) {\n        for (var i = 0; i < listenerList.length; i++) {\n          listenerList[i].listener(event);\n        }\n      }\n    });\n  }\n}\nfunction removeUniformListener(zr, eventType) {\n  var store = ensureZrStore(zr);\n  var uniform = store.uniform;\n  if (uniform[eventType]) {\n    zr.off(eventType, uniform[eventType]);\n    uniform[eventType] = null;\n  }\n}\nfunction trigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  // Also provide behavior checker for event listener, for some case that\n  // multiple components share one listener.\n  contollerEvent.isAvailableBehavior = bind(isAvailableBehavior, null, behaviorToCheck, e);\n  // TODO should not have type issue.\n  controller.trigger(eventName, contollerEvent);\n}\n// settings: {\n//     zoomOnMouseWheel\n//     moveOnMouseMove\n//     moveOnMouseWheel\n// }\n// The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\nfunction isAvailableBehavior(behaviorToCheck, e, settings) {\n  var setting = settings[behaviorToCheck];\n  return !behaviorToCheck || setting && (!isString(setting) || e.event[setting + 'Key']);\n}\nexport default RoamController;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}