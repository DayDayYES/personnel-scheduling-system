{"ast":null,"code":"import\"core-js/modules/es.array.push.js\";import\"core-js/modules/es.set.difference.v2.js\";import\"core-js/modules/es.set.intersection.v2.js\";import\"core-js/modules/es.set.is-disjoint-from.v2.js\";import\"core-js/modules/es.set.is-subset-of.v2.js\";import\"core-js/modules/es.set.is-superset-of.v2.js\";import\"core-js/modules/es.set.symmetric-difference.v2.js\";import\"core-js/modules/es.set.union.v2.js\";import\"core-js/modules/esnext.iterator.constructor.js\";import\"core-js/modules/esnext.iterator.every.js\";import\"core-js/modules/esnext.iterator.filter.js\";import\"core-js/modules/esnext.iterator.find.js\";import\"core-js/modules/esnext.iterator.for-each.js\";import\"core-js/modules/esnext.iterator.map.js\";import\"core-js/modules/esnext.iterator.reduce.js\";/** @license\n\ndhtmlxGantt v.9.0.15 Standard\n\nThis version of dhtmlxGantt is distributed under GPL 2.0 license and can be legally used in GPL projects.\n\nTo use dhtmlxGantt in non-GPL projects (and get Pro version of the product), please obtain Individual, Commercial, Enterprise or Ultimate license on our site https://dhtmlx.com/docs/products/dhtmlxGantt/#licensing or contact us at info@dhtmlx.com\n\n(c) XB Software\n\n*/function V(t){var e=0,n=0,i=0,a=0;if(t.getBoundingClientRect){var r=t.getBoundingClientRect(),s=document.body,o=document.documentElement||document.body.parentNode||document.body,l=window.pageYOffset||o.scrollTop||s.scrollTop,c=window.pageXOffset||o.scrollLeft||s.scrollLeft,d=o.clientTop||s.clientTop||0,u=o.clientLeft||s.clientLeft||0;e=r.top+l-d,n=r.left+c-u,i=document.body.offsetWidth-r.right,a=document.body.offsetHeight-r.bottom;}else{for(;t;)e+=parseInt(t.offsetTop,10),n+=parseInt(t.offsetLeft,10),t=t.offsetParent;i=document.body.offsetWidth-t.offsetWidth-n,a=document.body.offsetHeight-t.offsetHeight-e;}return{y:Math.round(e),x:Math.round(n),width:t.offsetWidth,height:t.offsetHeight,right:Math.round(i),bottom:Math.round(a)};}function Dn(t){var e=!1,n=!1;if(window.getComputedStyle){var i=window.getComputedStyle(t,null);e=i.display,n=i.visibility;}else t.currentStyle&&(e=t.currentStyle.display,n=t.currentStyle.visibility);return e!=\"none\"&&n!=\"hidden\";}function An(t){return!isNaN(t.getAttribute(\"tabindex\"))&&1*t.getAttribute(\"tabindex\")>=0;}function In(t){return!{a:!0,area:!0}[t.nodeName.loLowerCase()]||!!t.getAttribute(\"href\");}function Mn(t){return!{input:!0,select:!0,textarea:!0,button:!0,object:!0}[t.nodeName.toLowerCase()]||!t.hasAttribute(\"disabled\");}function Lt(t){for(var e=t.querySelectorAll([\"a[href]\",\"area[href]\",\"input\",\"select\",\"textarea\",\"button\",\"iframe\",\"object\",\"embed\",\"[tabindex]\",\"[contenteditable]\"].join(\", \")),n=Array.prototype.slice.call(e,0),i=0;i<n.length;i++)n[i].$position=i;for(n.sort(function(r,s){return r.tabIndex===0&&s.tabIndex!==0?1:r.tabIndex!==0&&s.tabIndex===0?-1:r.tabIndex===s.tabIndex?r.$position-s.$position:r.tabIndex<s.tabIndex?-1:1;}),i=0;i<n.length;i++){var a=n[i];(An(a)||Mn(a)||In(a))&&Dn(a)||(n.splice(i,1),i--);}return n;}function Xe(){var t=document.createElement(\"div\");t.style.cssText=\"visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;\",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),Math.max(e,15);}function X(t){if(!t)return\"\";var e=t.className||\"\";return e.baseVal&&(e=e.baseVal),e.indexOf||(e=\"\"),_e(e);}function wt(t,e){e&&t.className.indexOf(e)===-1&&(t.className+=\" \"+e);}function Gt(t,e){e=e.split(\" \");for(var n=0;n<e.length;n++){var i=new RegExp(\"\\\\s?\\\\b\"+e[n]+\"\\\\b(?![-_.])\",\"\");t.className=t.className.replace(i,\"\");}}function we(t){return typeof t==\"string\"?document.getElementById(t)||document.querySelector(t)||document.body:t||document.body;}var Bt;function Ze(t,e){Bt||(Bt=document.createElement(\"div\")),Bt.innerHTML=e;var n=Bt.firstChild;return t.appendChild(n),n;}function Qe(t){t&&t.parentNode&&t.parentNode.removeChild(t);}function tn(t,e){for(var n=t.childNodes,i=n.length,a=[],r=0;r<i;r++){var s=n[r];s.className&&s.className.indexOf(e)!==-1&&a.push(s);}return a;}function yt(t){var e;return t.tagName?e=t:(e=(t=t||window.event).target||t.srcElement).shadowRoot&&t.composedPath&&(e=t.composedPath()[0]),e;}function nt(t,e){if(e){for(var n=yt(t);n;){if(n.getAttribute&&n.getAttribute(e))return n;n=n.parentNode||n.host;}return null;}}function _e(t){return(String.prototype.trim||function(){return this.replace(/^\\s+|\\s+$/g,\"\");}).apply(t);}function pt(t,e,n){var i=yt(t),a=\"\";for(n===void 0&&(n=!0);i;){if(a=X(i)){var r=a.indexOf(e);if(r>=0){if(!n)return i;var s=r===0||!_e(a.charAt(r-1)),o=r+e.length>=a.length||!_e(a.charAt(r+e.length));if(s&&o)return i;}}i=i.parentNode;}return null;}function rt(t,e){var s;const n=document.documentElement,i=V(e),{clientX:a,clientY:r}=((s=t.touches)==null?void 0:s[0])??t;return{x:a+n.scrollLeft-n.clientLeft-i.x+e.scrollLeft,y:r+n.scrollTop-n.clientTop-i.y+e.scrollTop};}function en(t,e){const n=V(t),i=V(e);return{x:n.x-i.x,y:n.y-i.y};}function Y(t,e){if(!t||!e)return!1;for(;t&&t!=e;)t=t.parentNode;return t===e;}function dt(t,e){if(t.closest)return t.closest(e);if(t.matches||t.msMatchesSelector||t.webkitMatchesSelector){var n=t;if(!document.documentElement.contains(n))return null;do{if((n.matches||n.msMatchesSelector||n.webkitMatchesSelector).call(n,e))return n;n=n.parentElement||n.parentNode;}while(n!==null&&n.nodeType===1);return null;}return console.error(\"Your browser is not supported\"),null;}function nn(t){for(;t;){if(t.offsetWidth>0&&t.offsetHeight>0)return t;t=t.parentElement;}return null;}function an(){return document.head.createShadowRoot||document.head.attachShadow;}function ge(){var t=document.activeElement;return t.shadowRoot&&(t=t.shadowRoot.activeElement),t===document.body&&document.getSelection&&(t=document.getSelection().focusNode||document.body),t;}function vt(t){if(!t||!an())return document.body;for(;t.parentNode&&(t=t.parentNode);)if(t instanceof ShadowRoot)return t.host;return document.body;}const rn=Object.freeze(Object.defineProperty({__proto__:null,addClassName:wt,closest:dt,getActiveElement:ge,getChildNodes:tn,getClassName:X,getClosestSizedElement:nn,getFocusableNodes:Lt,getNodePosition:V,getRelativeEventPosition:rt,getRelativeNodePosition:en,getRootNode:vt,getScrollSize:Xe,getTargetNode:yt,hasClass:function(t,e){return\"classList\"in t?t.classList.contains(e):new RegExp(\"\\\\b\"+e+\"\\\\b\").test(t.className);},hasShadowParent:function(t){return!!vt(t);},insertNode:Ze,isChildOf:Y,isShadowDomSupported:an,locateAttribute:nt,locateClassName:pt,removeClassName:Gt,removeNode:Qe,toNode:we},Symbol.toStringTag,{value:\"Module\"})),Z=typeof window<\"u\"?window:global;let Nn=class{constructor(t){this._mouseDown=!1,this._touchStarts=!1,this._touchActive=!1,this._longTapTimer=!1,this._gantt=t,this._domEvents=t._createDomEventScope();}attach(t,e,n){const i=this._gantt,a=t.getViewPort();this._originPosition=Z.getComputedStyle(a).display,this._restoreOriginPosition=()=>{a.style.position=this._originPosition;},this._originPosition===\"static\"&&(a.style.position=\"relative\");const r=i.$services.getService(\"state\");r.registerProvider(\"clickDrag\",()=>({autoscroll:!1}));let s=null;const o=()=>{s&&(this._mouseDown=!0,t.setStart(i.copy(s)),t.setPosition(i.copy(s)),t.setEnd(i.copy(s)),s=null);};this._domEvents.attach(a,\"mousedown\",p=>{u(p);});const l=vt(i.$root)||document.body;function c(p){return p.changedTouches&&p.changedTouches[0]||p;}this._domEvents.attach(l,\"mouseup\",p=>{h(p);}),this._domEvents.attach(a,\"mousemove\",p=>{_(p);}),this._domEvents.attach(a,\"touchstart\",p=>{this._touchStarts=!0,this._longTapTimer=setTimeout(()=>{this._touchStarts&&(u(c(p)),this._touchStarts=!1,this._touchActive=!0);},this._gantt.config.touch_drag);}),this._domEvents.attach(l,\"touchend\",p=>{this._touchStarts=!1,this._touchActive=!1,clearTimeout(this._longTapTimer),h(c(p));}),this._domEvents.attach(a,\"touchmove\",p=>{if(this._touchActive){let y=d();if(y&&i.utils.dom.closest(p.target,y))return;_(c(p)),p.preventDefault();}else this._touchStarts=!1,clearTimeout(this._longTapTimer);});const d=()=>{let p=\".gantt_task_line, .gantt_task_link\";return n!==void 0&&(p=n instanceof Array?n.join(\", \"):n),p;},u=p=>{s=null;let y=d();y&&i.utils.dom.closest(p.target,y)||(r.registerProvider(\"clickDrag\",()=>({autoscroll:this._mouseDown})),e&&p[e]!==!0||(s=this._getCoordinates(p,t)));},h=p=>{if(s=null,(!e||p[e]===!0)&&this._mouseDown===!0){this._mouseDown=!1;const y=this._getCoordinates(p,t);t.dragEnd(y);}},_=p=>{if(e&&p[e]!==!0)return;const y=this._gantt.ext.clickDrag,k=(this._gantt.config.drag_timeline||{}).useKey;if(y&&k&&!e&&p[k])return;let b=null;if(!this._mouseDown&&s)return b=this._getCoordinates(p,t),void(Math.abs(s.relative.left-b.relative.left)>5&&o());this._mouseDown===!0&&(b=this._getCoordinates(p,t),t.setEnd(b),t.render());};}detach(){const t=this._gantt;this._domEvents.detachAll(),this._restoreOriginPosition&&this._restoreOriginPosition(),t.$services.getService(\"state\").unregisterProvider(\"clickDrag\");}destructor(){this.detach();}_getCoordinates(t,e){const n=e.getViewPort(),i=n.getBoundingClientRect(),{clientX:a,clientY:r}=t;return{absolute:{left:a,top:r},relative:{left:a-i.left+n.scrollLeft,top:r-i.top+n.scrollTop}};}};var sn=function(){this._silent_mode=!1,this.listeners={};};sn.prototype={_silentStart:function(){this._silent_mode=!0;},_silentEnd:function(){this._silent_mode=!1;}};function ot(t){var e=new sn();t.attachEvent=function(n,i,a){n=\"ev_\"+n.toLowerCase(),e.listeners[n]||(e.listeners[n]=function(s){var o={},l=0,c=function(){var d=!0;for(var u in o){var h=o[u].apply(s,arguments);d=d&&h;}return d;};return c.addEvent=function(d,u){if(typeof d==\"function\"){var h;if(u&&u.id?h=u.id:(h=l,l++),u&&u.once){var _=d;d=function(){_(),c.removeEvent(h);};}return o[h]=d,h;}return!1;},c.removeEvent=function(d){delete o[d];},c.clear=function(){o={};},c;}(this)),a&&a.thisObject&&(i=i.bind(a.thisObject));var r=n+\":\"+e.listeners[n].addEvent(i,a);return a&&a.id&&(r=a.id),r;},t.attachAll=function(n){this.attachEvent(\"listen_all\",n);},t.callEvent=function(n,i){if(e._silent_mode)return!0;var a=\"ev_\"+n.toLowerCase(),r=e.listeners;return r.ev_listen_all&&r.ev_listen_all.apply(this,[n].concat(i)),!r[a]||r[a].apply(this,i);},t.checkEvent=function(n){return!!e.listeners[\"ev_\"+n.toLowerCase()];},t.detachEvent=function(n){if(n){var i=e.listeners;for(var a in i)i[a].removeEvent(n);var r=n.split(\":\");if(i=e.listeners,r.length===2){var s=r[0],o=r[1];i[s]&&i[s].removeEvent(o);}}},t.detachAllEvents=function(){for(var n in e.listeners)e.listeners[n].clear();};}var Ce={second:1,minute:60,hour:3600,day:86400,week:604800,month:2592e3,quarter:7776e3,year:31536e3};function Vt(t){return Ce[t]||Ce.hour;}function kt(t,e){if(t.forEach)t.forEach(e);else for(var n=t.slice(),i=0;i<n.length;i++)e(n[i],i);}function Ln(t,e){if(t.find)return t.find(e);for(var n=0;n<t.length;n++)if(e(t[n],n))return t[n];}function zt(t,e){if(t.includes)return t.includes(e);for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1;}function fe(t){return Array.isArray?Array.isArray(t):t&&t.length!==void 0&&t.pop&&t.push;}function Q(t){return!(!t||typeof t!=\"object\")&&!!(t.getFullYear&&t.getMonth&&t.getDate);}function bt(t){return Q(t)&&!isNaN(t.getTime());}function De(t,e){var n,i=function(){i.$cancelTimeout(),i.$pending=!0;var a=Array.prototype.slice.call(arguments);n=setTimeout(function(){t.apply(this,a),i.$pending=!1;},e);};return i.$pending=!1,i.$cancelTimeout=function(){clearTimeout(n),i.$pending=!1;},i.$execute=function(){var a=Array.prototype.slice.call(arguments);t.apply(this,a),i.$cancelTimeout();},i;}function at(t,e){return Ae(t)&&!Ae(e)&&(t=\"0\"),t;}function Ae(t){return t===0;}function At(t,e){for(var n,i,a,r=0,s=t.length-1;r<=s;)if(i=+t[n=Math.floor((r+s)/2)],a=+t[n-1],i<e)r=n+1;else{if(!(i>e)){for(;+t[n]==+t[n+1];)n++;return n;}if(!isNaN(a)&&a<e)return n-1;s=n-1;}return t.length-1;}class Pn{constructor(e,n,i){var a;this._el=document.createElement(\"div\"),this.defaultRender=(r,s)=>{this._el||(this._el=document.createElement(\"div\"));const o=this._el,l=Math.min(r.relative.top,s.relative.top),c=Math.max(r.relative.top,s.relative.top),d=Math.min(r.relative.left,s.relative.left),u=Math.max(r.relative.left,s.relative.left);if(this._singleRow){const h=this._getTaskPositionByTop(this._startPoint.relative.top);o.style.height=h.height+\"px\",o.style.top=h.top+\"px\";}else o.style.height=Math.abs(c-l)+\"px\",o.style.top=l+\"px\";return o.style.width=Math.abs(u-d)+\"px\",o.style.left=d+\"px\",o;},this._gantt=n,this._view=i,this._viewPort=e.viewPort,this._el.classList.add(e.className),typeof e.callback==\"function\"&&(this._callback=e.callback),this.render=()=>{let r;r=e.render?e.render(this._startPoint,this._endPoint):this.defaultRender(this._startPoint,this._endPoint),r!==this._el&&(this._el&&this._el.parentNode&&this._el.parentNode.removeChild(this._el),this._el=r),e.className!==\"\"&&this._el.classList.add(e.className),this.draw();},(a=this._viewPort).attachEvent&&a.detachEvent||ot(this._viewPort),this._singleRow=e.singleRow,this._useRequestAnimationFrame=e.useRequestAnimationFrame;}draw(){if(this._useRequestAnimationFrame)return requestAnimationFrame(()=>{this._viewPort.appendChild(this.getElement());});this._viewPort.appendChild(this.getElement());}clear(){if(this._useRequestAnimationFrame)return requestAnimationFrame(()=>{this._el.parentNode&&this._viewPort.removeChild(this._el);});this._el.parentNode&&this._viewPort.removeChild(this._el);}getElement(){return this._el;}getViewPort(){return this._viewPort;}setStart(e){const n=this._gantt;this._startPoint=e,this._startDate=n.dateFromPos(this._startPoint.relative.left),this._viewPort.callEvent(\"onBeforeDrag\",[this._startPoint]);}setEnd(e){const n=this._gantt;if(this._endPoint=e,this._singleRow){const i=this._getTaskPositionByTop(this._startPoint.relative.top);this._endPoint.relative.top=i.top;}this._endDate=n.dateFromPos(this._endPoint.relative.left),this._startPoint.relative.left>this._endPoint.relative.left&&(this._positionPoint={relative:{left:this._endPoint.relative.left,top:this._positionPoint.relative.top},absolute:{left:this._endPoint.absolute.left,top:this._positionPoint.absolute.top}}),this._startPoint.relative.top>this._endPoint.relative.top&&(this._positionPoint={relative:{left:this._positionPoint.relative.left,top:this._endPoint.relative.top},absolute:{left:this._positionPoint.absolute.left,top:this._endPoint.absolute.top}}),this._viewPort.callEvent(\"onDrag\",[this._startPoint,this._endPoint]);}setPosition(e){this._positionPoint=e;}dragEnd(e){const n=this._gantt;e.relative.left<0&&(e.relative.left=0),this._viewPort.callEvent(\"onBeforeDragEnd\",[this._startPoint,e]),this.setEnd(e),this._endDate=this._endDate||n.getState().max_date,this._startDate.valueOf()>this._endDate.valueOf()&&([this._startDate,this._endDate]=[this._endDate,this._startDate]),this.clear();const i=n.getTaskByTime(this._startDate,this._endDate),a=this._getTasksByTop(this._startPoint.relative.top,this._endPoint.relative.top);this._viewPort.callEvent(\"onDragEnd\",[this._startPoint,this._endPoint]),this._callback&&this._callback(this._startPoint,this._endPoint,this._startDate,this._endDate,i,a);}getInBounds(){return this._singleRow;}_getTasksByTop(e,n){const i=this._gantt;let a=e,r=n;e>n&&(a=n,r=e);const s=this._getTaskPositionByTop(a).index,o=this._getTaskPositionByTop(r).index,l=[];for(let c=s;c<=o;c++)i.getTaskByIndex(c)&&l.push(i.getTaskByIndex(c));return l;}_getTaskPositionByTop(e){const n=this._gantt,i=this._view,a=i.getItemIndexByTopPosition(e),r=n.getTaskByIndex(a);if(r){const s=i.getItemHeight(r.id);return{top:i.getItemTop(r.id)||0,height:s||0,index:a};}{const s=i.getTotalHeight();return{top:e>s?s:0,height:n.config.row_height,index:e>s?n.getTaskCount():0};}}}let te=!1;class Yt{constructor(e){this._mouseDown=!1,this._calculateDirectionVector=()=>{if(this._trace.length>=10){const n=this._trace.slice(this._trace.length-10),i=[];for(let r=1;r<n.length;r++)i.push({x:n[r].x-n[r-1].x,y:n[r].y-n[r-1].y});const a={x:0,y:0};return i.forEach(r=>{a.x+=r.x,a.y+=r.y;}),{magnitude:Math.sqrt(a.x*a.x+a.y*a.y),angleDegrees:180*Math.atan2(Math.abs(a.y),Math.abs(a.x))/Math.PI};}return null;},this._applyDndReadyStyles=()=>{this._timeline.$task.classList.add(\"gantt_timeline_move_available\");},this._clearDndReadyStyles=()=>{this._timeline.$task.classList.remove(\"gantt_timeline_move_available\");},this._getScrollPosition=n=>{const i=this._gantt;return{x:i.$ui.getView(n.$config.scrollX).getScrollState().position,y:i.$ui.getView(n.$config.scrollY).getScrollState().position};},this._countNewScrollPosition=n=>{const i=this._calculateDirectionVector();let a=this._startPoint.x-n.x,r=this._startPoint.y-n.y;return i&&(i.angleDegrees<15?r=0:i.angleDegrees>75&&(a=0)),{x:this._scrollState.x+a,y:this._scrollState.y+r};},this._setScrollPosition=(n,i)=>{const a=this._gantt;requestAnimationFrame(()=>{a.scrollLayoutCell(n.$id,i.x,i.y);});},this._stopDrag=n=>{const i=this._gantt;if(this._trace=[],i.$root.classList.remove(\"gantt_noselect\"),this._originalReadonly!==void 0&&this._mouseDown&&(i.config.readonly=this._originalReadonly,i.config.drag_timeline&&i.config.drag_timeline.render&&i.render()),this._originAutoscroll!==void 0&&(i.config.autoscroll=this._originAutoscroll),i.config.drag_timeline){const{useKey:a}=i.config.drag_timeline;if(a&&n[a]!==!0)return;}this._mouseDown=!1,te=!1;},this._startDrag=n=>{const i=this._gantt;this._originAutoscroll=i.config.autoscroll,i.config.autoscroll=!1,te=!0,i.$root.classList.add(\"gantt_noselect\"),this._originalReadonly=i.config.readonly,i.config.readonly=!0,i.config.drag_timeline&&i.config.drag_timeline.render&&i.render(),this._trace=[],this._mouseDown=!0;const{x:a,y:r}=this._getScrollPosition(this._timeline);this._scrollState={x:a,y:r},this._startPoint={x:n.clientX,y:n.clientY},this._trace.push(this._startPoint);},this._gantt=e,this._domEvents=e._createDomEventScope(),this._trace=[];}static create(e){return new Yt(e);}static _isDragInProgress(){return te;}destructor(){this._domEvents.detachAll();}attach(e){this._timeline=e;const n=this._gantt;this._domEvents.attach(e.$task,\"mousedown\",i=>{if(!n.config.drag_timeline)return;const{useKey:a,ignore:r,enabled:s}=n.config.drag_timeline;if(s===!1)return;let o=\".gantt_task_line, .gantt_task_link\";r!==void 0&&(o=r instanceof Array?r.join(\", \"):r),o&&n.utils.dom.closest(i.target,o)||a&&i[a]!==!0||this._startDrag(i);}),this._domEvents.attach(document,\"keydown\",i=>{if(!n.config.drag_timeline)return;const{useKey:a}=n.config.drag_timeline;a&&i[a]===!0&&this._applyDndReadyStyles();}),this._domEvents.attach(document,\"keyup\",i=>{if(!n.config.drag_timeline)return;const{useKey:a}=n.config.drag_timeline;a&&i[a]===!1&&(this._clearDndReadyStyles(),this._stopDrag(i));}),this._domEvents.attach(document,\"mouseup\",i=>{this._stopDrag(i);}),this._domEvents.attach(n.$root,\"mouseup\",i=>{this._stopDrag(i);}),this._domEvents.attach(document,\"mouseleave\",i=>{this._stopDrag(i);}),this._domEvents.attach(n.$root,\"mouseleave\",i=>{this._stopDrag(i);}),this._domEvents.attach(n.$root,\"mousemove\",i=>{if(!n.config.drag_timeline)return;const{useKey:a}=n.config.drag_timeline;if(a&&i[a]!==!0)return;const r=this._gantt.ext.clickDrag,s=(this._gantt.config.click_drag||{}).useKey;if((!r||!s||a||!i[s])&&this._mouseDown===!0){this._trace.push({x:i.clientX,y:i.clientY});const o=this._countNewScrollPosition({x:i.clientX,y:i.clientY});this._setScrollPosition(e,o),this._scrollState=o,this._startPoint={x:i.clientX,y:i.clientY};}});}}function Rn(t){(function(){var e=[];function n(){return!!e.length;}function i(c){setTimeout(function(){n()||t.$destroyed||t.focus();},1);}function a(c){t.eventRemove(c,\"keydown\",s),t.event(c,\"keydown\",s),e.push(c);}function r(){var c=e.pop();c&&t.eventRemove(c,\"keydown\",s),i();}function s(c){var d=c.currentTarget;d==e[e.length-1]&&t.$keyboardNavigation.trapFocus(d,c);}function o(){a(t.getLightbox());}t.attachEvent(\"onLightbox\",o),t.attachEvent(\"onAfterLightbox\",r),t.attachEvent(\"onLightboxChange\",function(){r(),o();}),t.attachEvent(\"onAfterQuickInfo\",function(){i();}),t.attachEvent(\"onMessagePopup\",function(c){l=t.utils.dom.getActiveElement(),a(c);}),t.attachEvent(\"onAfterMessagePopup\",function(){r(),setTimeout(function(){l&&l.focus&&(l.focus(),l=null);},1);});var l=null;t.$keyboardNavigation.isModal=n;})();}class Hn{constructor(e){this.show=(n,i)=>{i===void 0?this._showForTask(n):this._showAtCoordinates(n,i);},this.hide=n=>{const i=this._gantt,a=this._quickInfoBox;this._quickInfoBoxId=0;const r=this._quickInfoTask;if(this._quickInfoTask=null,a&&a.parentNode){if(i.config.quick_info_detached)return i.callEvent(\"onAfterQuickInfo\",[r]),a.parentNode.removeChild(a);a.className+=\" gantt_qi_hidden\",a.style.right===\"auto\"?a.style.left=\"-350px\":a.style.right=\"-350px\",n&&(a.style.left=a.style.right=\"\",a.parentNode.removeChild(a)),i.callEvent(\"onAfterQuickInfo\",[r]);}},this.getNode=()=>this._quickInfoBox?this._quickInfoBox:null,this.setContainer=n=>{n&&(this._container=typeof n==\"string\"?document.getElementById(n):n);},this.setContent=n=>{const i=this._gantt,a={taskId:null,header:{title:\"\",date:\"\"},content:\"\",buttons:i.config.quickinfo_buttons};n||(n=a),n.taskId||(n.taskId=a.taskId),n.header||(n.header=a.header),n.header.title||(n.header.title=a.header.title),n.header.date||(n.header.date=a.header.date),n.content||(n.content=a.content),n.buttons||(n.buttons=a.buttons);let r=this.getNode();r||(r=this._createQuickInfoElement()),n.taskId&&(this._quickInfoBoxId=n.taskId);const s=r.querySelector(\".gantt_cal_qi_title\"),o=s.querySelector(\".gantt_cal_qi_tcontent\"),l=s.querySelector(\".gantt_cal_qi_tdate\"),c=r.querySelector(\".gantt_cal_qi_content\"),d=r.querySelector(\".gantt_cal_qi_controls\");i._waiAria.quickInfoHeader(r,[n.header.title,n.header.date].join(\" \")),o.innerHTML=n.header.title,l.innerHTML=n.header.date,n.header.title||n.header.date?s.style.display=\"\":s.style.display=\"none\",c.innerHTML=n.content;const u=n.buttons;u.length?d.style.display=\"\":d.style.display=\"none\";let h=\"\";for(let _=0;_<u.length;_++){const p=i._waiAria.quickInfoButtonAttrString(i.locale.labels[u[_]]);h+=`<div class=\"gantt_qi_big_icon ${u[_]} dhx_gantt_${u[_]}\" title=\"${i.locale.labels[u[_]]}\" ${p}>\n            <div class='dhx_menu_icon dhx_gantt_icon ${u[_]} gantt_menu_icon dhx_gantt_${u[_]}'></div>\n            <div>${i.locale.labels[u[_]]}</div>\n         </div>`;}d.innerHTML=h,i.eventRemove(r,\"click\",this._qiButtonClickHandler),i.eventRemove(r,\"keypress\",this._qiKeyPressHandler),i.event(r,\"click\",this._qiButtonClickHandler),i.event(r,\"keypress\",this._qiKeyPressHandler);},this._qiButtonClickHandler=n=>{this._qi_button_click(n.target);},this._qiKeyPressHandler=n=>{const i=n.which;i!==13&&i!==32||setTimeout(()=>{this._qi_button_click(n.target);},1);},this._gantt=e;}_showAtCoordinates(e,n){this.hide(!0),this._quickInfoBoxId=0,this._quickInfoTask=null,this._quickInfoBox||(this._createQuickInfoElement(),this.setContent()),this._appendAtCoordinates(e,n),this._gantt.callEvent(\"onQuickInfo\",[null]);}_showForTask(e){const n=this._gantt;if(e===this._quickInfoBoxId&&n.utils.dom.isChildOf(this._quickInfoBox,document.body)||!n.config.show_quick_info)return;this.hide(!0);const i=this._getContainer(),a=this._get_event_counter_part(e,6,i.xViewport,i.yViewport);a&&(this._quickInfoBox=this._init_quick_info(e),this._quickInfoTask=e,this._quickInfoBox.className=this._prepare_quick_info_classname(e),this._fill_quick_data(e),this._show_quick_info(a,6),n.callEvent(\"onQuickInfo\",[e]));}_get_event_counter_part(e,n,i,a){const r=this._gantt;let s=r.getTaskNode(e);if(!s&&(s=r.getTaskRowNode(e),!s))return null;let o=0;const l=n+s.offsetTop+s.offsetHeight;let c=s;if(r.utils.dom.isChildOf(c,i))for(;c&&c!==i;)o+=c.offsetLeft,c=c.offsetParent;const d=r.getScrollState();return c?{left:o,top:l,dx:o+s.offsetWidth/2-d.x>i.offsetWidth/2?1:0,dy:l+s.offsetHeight/2-d.y>a.offsetHeight/2?1:0,width:s.offsetWidth,height:s.offsetHeight}:null;}_createQuickInfoElement(){const e=this._gantt,n=document.createElement(\"div\");n.className+=\"gantt_cal_quick_info\",e._waiAria.quickInfoAttr(n);var i=`\n\t\t<div class=\"gantt_cal_qi_tcontrols\">\n\t\t\t<a class=\"gantt_cal_qi_close_btn dhx_gantt_icon dhx_gantt_icon_close\"></a>\n\t\t</div>\n\t\t<div class=\"gantt_cal_qi_title\" ${e._waiAria.quickInfoHeaderAttrString()}>\n\t\t\t\t\n\t\t\t\t<div class=\"gantt_cal_qi_tcontent\"></div>\n\t\t\t\t<div class=\"gantt_cal_qi_tdate\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"gantt_cal_qi_content\"></div>`;if(i+='<div class=\"gantt_cal_qi_controls\">',i+=\"</div>\",n.innerHTML=i,e.config.quick_info_detached){const a=this._getContainer();e.event(a.parent,\"scroll\",()=>{this.hide();});}return this._quickInfoBox=n,n;}_init_quick_info(e){const n=this._gantt,i=n.getTask(e);return typeof this._quickInfoReadonly==\"boolean\"&&n.isReadonly(i)!==this._quickInfoReadonly&&(this.hide(!0),this._quickInfoBox=null),this._quickInfoReadonly=n.isReadonly(i),this._quickInfoBox||(this._quickInfoBox=this._createQuickInfoElement()),this._quickInfoBox;}_prepare_quick_info_classname(e){const n=this._gantt,i=n.getTask(e);let a=`gantt_cal_quick_info gantt_${n.getTaskType(i)}`;const r=n.templates.quick_info_class(i.start_date,i.end_date,i);return r&&(a+=\" \"+r),a;}_fill_quick_data(e){const n=this._gantt,i=n.getTask(e);this._quickInfoBoxId=e;let a=[];if(this._quickInfoReadonly){const r=n.config.quickinfo_buttons,s={icon_delete:!0,icon_edit:!0};for(let o=0;o<r.length;o++)this._quickInfoReadonly&&s[r[o]]||a.push(r[o]);}else a=n.config.quickinfo_buttons;this.setContent({header:{title:n.templates.quick_info_title(i.start_date,i.end_date,i),date:n.templates.quick_info_date(i.start_date,i.end_date,i)},content:n.templates.quick_info_content(i.start_date,i.end_date,i),buttons:a});}_appendAtCoordinates(e,n){const i=this._quickInfoBox,a=this._getContainer();i.parentNode&&i.parentNode.nodeName.toLowerCase()!==\"#document-fragment\"||a.parent.appendChild(i),i.style.left=e+\"px\",i.style.top=n+\"px\";}_show_quick_info(e,n){const i=this._gantt,a=this._quickInfoBox;if(i.config.quick_info_detached){const r=this._getContainer();a.parentNode&&a.parentNode.nodeName.toLowerCase()!==\"#document-fragment\"||r.parent.appendChild(a);const s=a.offsetWidth,o=a.offsetHeight,l=i.getScrollState(),c=r.xViewport,d=r.yViewport,u=c.offsetWidth+l.x-s,h=e.top-l.y+o;let _=e.top;h>d.offsetHeight/2&&(_=e.top-(o+e.height+2*n),_<l.y&&h<=d.offsetHeight&&(_=e.top)),_<l.y&&(_=l.y);const p=Math.min(Math.max(l.x,e.left-e.dx*(s-e.width)),u),y=_;this._appendAtCoordinates(p,y);}else a.style.top=\"20px\",e.dx===1?(a.style.right=\"auto\",a.style.left=\"-300px\",setTimeout(()=>{a.style.left=\"10px\";},1)):(a.style.left=\"auto\",a.style.right=\"-300px\",setTimeout(()=>{a.style.right=\"10px\";},1)),a.className+=\" gantt_qi_\"+(e.dx===1?\"left\":\"right\"),i.$root.appendChild(a);}_qi_button_click(e){const n=this._gantt,i=this._quickInfoBox;if(!e||e===i)return;if(e.closest(\".gantt_cal_qi_close_btn\"))return void this.hide();const a=e.className;if(a.indexOf(\"_icon\")!==-1){const r=this._quickInfoBoxId;n.$click.buttons[a.split(\" \")[1].replace(\"icon_\",\"\")](r);}else this._qi_button_click(e.parentNode);}_getContainer(){const e=this._gantt;let n=this._container?this._container:e.$task_data;return n&&n.offsetHeight&&n.offsetWidth?{parent:n,xViewport:e.$task,yViewport:e.$task_data}:(n=this._container?this._container:e.$grid_data,n&&n.offsetHeight&&n.offsetWidth?{parent:n,xViewport:e.$grid,yViewport:e.$grid_data}:{parent:this._container?this._container:e.$layout,xViewport:e.$layout,yViewport:e.$layout});}}var ee,On={}.constructor.toString();function q(t){var e,n;if(t&&typeof t==\"object\")switch(!0){case Q(t):n=new Date(t);break;case fe(t):for(n=new Array(t.length),e=0;e<t.length;e++)n[e]=q(t[e]);break;default:if(function(i){return i.constructor.toString()!==On;}(t))n=Object.create(t);else{if(function(i){return i.$$typeof&&i.$$typeof.toString().includes(\"react.\");}(t))return n=t;n={};}for(e in t)Object.prototype.hasOwnProperty.apply(t,[e])&&(n[e]=q(t[e]));}return n||t;}function P(t,e,n){for(var i in e)(t[i]===void 0||n)&&(t[i]=e[i]);return t;}function W(t){return t!==void 0;}function st(){return ee||(ee=(/* @__PURE__ */new Date()).valueOf()),++ee;}function R(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments);};}function on(t,e,n,i){t.addEventListener?t.addEventListener(e,n,i!==void 0&&i):t.attachEvent&&t.attachEvent(\"on\"+e,n);}function ln(t,e,n,i){t.removeEventListener?t.removeEventListener(e,n,i!==void 0&&i):t.detachEvent&&t.detachEvent(\"on\"+e,n);}const Bn=Object.freeze(Object.defineProperty({__proto__:null,bind:R,copy:q,defined:W,event:on,eventRemove:ln,mixin:P,uid:st},Symbol.toStringTag,{value:\"Module\"}));function Se(t,e){t=t||on,e=e||ln;var n=[],i={attach:function(a,r,s,o){n.push({element:a,event:r,callback:s,capture:o}),t(a,r,s,o);},detach:function(a,r,s,o){e(a,r,s,o);for(var l=0;l<n.length;l++){var c=n[l];c.element===a&&c.event===r&&c.callback===s&&c.capture===o&&(n.splice(l,1),l--);}},detachAll:function(){for(var a=n.slice(),r=0;r<a.length;r++){var s=a[r];i.detach(s.element,s.event,s.callback,s.capture),i.detach(s.element,s.event,s.callback,void 0),i.detach(s.element,s.event,s.callback,!1),i.detach(s.element,s.event,s.callback,!0);}n.splice(0,n.length);},extend:function(){return Se(this.event,this.eventRemove);}};return i;}class zn{constructor(e){this._gantt=e;}getNode(){const e=this._gantt;return this._tooltipNode||(this._tooltipNode=document.createElement(\"div\"),this._tooltipNode.className=\"gantt_tooltip\",e._waiAria.tooltipAttr(this._tooltipNode)),this._tooltipNode;}setViewport(e){return this._root=e,this;}show(e,n){const i=this._gantt,a=document.body,r=this.getNode();if(Y(r,a)||(this.hide(),r.style.top=r.style.top||\"0px\",r.style.left=r.style.left||\"0px\",a.appendChild(r)),this._isLikeMouseEvent(e)){const s=this._calculateTooltipPosition(e);n=s.top,e=s.left;}return r.style.top=n+\"px\",r.style.left=e+\"px\",i._waiAria.tooltipVisibleAttr(r),this;}hide(){const e=this._gantt,n=this.getNode();return n&&n.parentNode&&n.parentNode.removeChild(n),e._waiAria.tooltipHiddenAttr(n),this;}setContent(e){return this.getNode().innerHTML=e,this;}_isLikeMouseEvent(e){return!(!e||typeof e!=\"object\")&&\"clientX\"in e&&\"clientY\"in e;}_getViewPort(){return this._root||document.body;}_calculateTooltipPosition(e){const n=this._gantt,i=this._getViewPortSize(),a=this.getNode(),r={top:0,left:0,width:a.offsetWidth,height:a.offsetHeight,bottom:0,right:0},s=n.config.tooltip_offset_x,o=n.config.tooltip_offset_y,l=document.body,c=rt(e,l),d=V(l);c.y+=d.y,r.top=c.y,r.left=c.x,r.top+=o,r.left+=s,r.bottom=r.top+r.height,r.right=r.left+r.width;const u=window.scrollY+l.scrollTop;return r.top<i.top-u?(r.top=i.top,r.bottom=r.top+r.height):r.bottom>i.bottom&&(r.bottom=i.bottom,r.top=r.bottom-r.height),r.left<i.left?(r.left=i.left,r.right=i.left+r.width):r.right>i.right&&(r.right=i.right,r.left=r.right-r.width),c.x>=r.left&&c.x<=r.right&&(r.left=c.x-r.width-s,r.right=r.left+r.width),c.y>=r.top&&c.y<=r.bottom&&(r.top=c.y-r.height-o,r.bottom=r.top+r.height),r.left<0&&(r.left=0),r.right<0&&(r.right=0),r;}_getViewPortSize(){const e=this._gantt,n=this._getViewPort();let i,a=n,r=window.scrollY+document.body.scrollTop,s=window.scrollX+document.body.scrollLeft;return n===e.$task_data?(a=e.$task,r=0,s=0,i=V(e.$task)):i=V(a),{left:i.x+s,top:i.y+r,width:i.width,height:i.height,bottom:i.y+i.height+r,right:i.x+i.width+s};}}class Wn{constructor(e){this._listeners={},this.tooltip=new zn(e),this._gantt=e,this._domEvents=Se(),this._initDelayedFunctions();}destructor(){this.tooltip.hide(),this._domEvents.detachAll();}hideTooltip(){this.delayHide();}attach(e){let n=document.body;const i=this._gantt;e.global||(n=i.$root);let a=null;const r=s=>{const o=yt(s),l=dt(o,e.selector);if(Y(o,this.tooltip.getNode()))return;const c=()=>{a=l,e.onmouseenter(s,l);};a?l&&l===a?e.onmousemove(s,l):(e.onmouseleave(s,a),a=null,l&&l!==a&&c()):l&&c();};this.detach(e.selector),this._domEvents.attach(n,\"mousemove\",r),this._listeners[e.selector]={node:n,handler:r};}detach(e){const n=this._listeners[e];n&&this._domEvents.detach(n.node,\"mousemove\",n.handler);}tooltipFor(e){const n=i=>{let a=i;return document.createEventObject&&!document.createEvent&&(a=document.createEventObject(i)),a;};this._initDelayedFunctions(),this.attach({selector:e.selector,global:e.global,onmouseenter:(i,a)=>{const r=e.html(i,a);r&&this.delayShow(n(i),r);},onmousemove:(i,a)=>{const r=e.html(i,a);r?this.delayShow(n(i),r):(this.delayShow.$cancelTimeout(),this.delayHide());},onmouseleave:()=>{this.delayShow.$cancelTimeout(),this.delayHide();}});}_initDelayedFunctions(){const e=this._gantt;this.delayShow&&this.delayShow.$cancelTimeout(),this.delayHide&&this.delayHide.$cancelTimeout(),this.tooltip.hide(),this.delayShow=De((n,i)=>{e.callEvent(\"onBeforeTooltip\",[n])===!1?this.tooltip.hide():(this.tooltip.setContent(i),this.tooltip.show(n));},e.config.tooltip_timeout||1),this.delayHide=De(()=>{this.delayShow.$cancelTimeout(),this.tooltip.hide();},e.config.tooltip_hide_timeout||1);}}const Ie={onBeforeUndo:\"onAfterUndo\",onBeforeRedo:\"onAfterRedo\"},Me=[\"onTaskDragStart\",\"onAfterTaskUpdate\",\"onAfterParentExpand\",\"onAfterTaskDelete\",\"onBeforeBatchUpdate\"];class jn{constructor(e,n){this._batchAction=null,this._batchMode=!1,this._ignore=!1,this._ignoreMoveEvents=!1,this._initialTasks={},this._initialLinks={},this._nestedTasks={},this._nestedLinks={},this._undo=e,this._gantt=n,this._attachEvents();}store(e,n,i=!1){return n===this._gantt.config.undo_types.task?this._storeTask(e,i):n===this._gantt.config.undo_types.link&&this._storeLink(e,i);}isMoveEventsIgnored(){return this._ignoreMoveEvents;}toggleIgnoreMoveEvents(e){this._ignoreMoveEvents=e||!1;}startIgnore(){this._ignore=!0;}stopIgnore(){this._ignore=!1;}startBatchAction(){this._timeout||(this._timeout=setTimeout(()=>{this.stopBatchAction(),this._timeout=null;},10)),this._ignore||this._batchMode||(this._batchMode=!0,this._batchAction=this._undo.action.create());}stopBatchAction(){if(this._ignore)return;const e=this._undo;this._batchAction&&e.logAction(this._batchAction),this._batchMode=!1,this._batchAction=null;}onTaskAdded(e){this._ignore||this._storeTaskCommand(e,this._undo.command.type.add);}onTaskUpdated(e){this._ignore||this._storeTaskCommand(e,this._undo.command.type.update);}onTaskMoved(e){this._ignore||(e.$local_index=this._gantt.getTaskIndex(e.id),this._storeEntityCommand(e,this.getInitialTask(e.id),this._undo.command.type.move,this._undo.command.entity.task));}onTaskDeleted(e){if(!this._ignore){if(this._storeTaskCommand(e,this._undo.command.type.remove),this._nestedTasks[e.id]){const n=this._nestedTasks[e.id];for(let i=0;i<n.length;i++)this._storeTaskCommand(n[i],this._undo.command.type.remove);}if(this._nestedLinks[e.id]){const n=this._nestedLinks[e.id];for(let i=0;i<n.length;i++)this._storeLinkCommand(n[i],this._undo.command.type.remove);}}}onLinkAdded(e){this._ignore||this._storeLinkCommand(e,this._undo.command.type.add);}onLinkUpdated(e){this._ignore||this._storeLinkCommand(e,this._undo.command.type.update);}onLinkDeleted(e){this._ignore||this._storeLinkCommand(e,this._undo.command.type.remove);}setNestedTasks(e,n){const i=this._gantt;let a=null;const r=[];let s=this._getLinks(i.getTask(e));for(let c=0;c<n.length;c++)a=this.setInitialTask(n[c]),s=s.concat(this._getLinks(a)),r.push(a);const o={};for(let c=0;c<s.length;c++)o[s[c]]=!0;const l=[];for(const c in o)l.push(this.setInitialLink(c));this._nestedTasks[e]=r,this._nestedLinks[e]=l;}setInitialTask(e,n){const i=this._gantt;if(n||!this._initialTasks[e]||!this._batchMode){const a=i.copy(i.getTask(e));a.$index=i.getGlobalTaskIndex(e),a.$local_index=i.getTaskIndex(e),this.setInitialTaskObject(e,a);}return this._initialTasks[e];}getInitialTask(e){return this._initialTasks[e];}clearInitialTasks(){this._initialTasks={};}setInitialTaskObject(e,n){this._initialTasks[e]=n;}setInitialLink(e,n){return this._initialLinks[e]&&this._batchMode||(this._initialLinks[e]=this._gantt.copy(this._gantt.getLink(e))),this._initialLinks[e];}getInitialLink(e){return this._initialLinks[e];}clearInitialLinks(){this._initialLinks={};}_attachEvents(){let e=null;const n=this._gantt,i=()=>{e||(e=setTimeout(()=>{e=null;}),this.clearInitialTasks(),n.eachTask(l=>{this.setInitialTask(l.id);}),this.clearInitialLinks(),n.getLinks().forEach(l=>{this.setInitialLink(l.id);}));},a=l=>n.copy(n.getTask(l));for(const l in Ie)n.attachEvent(l,()=>(this.startIgnore(),!0)),n.attachEvent(Ie[l],()=>(this.stopIgnore(),!0));for(let l=0;l<Me.length;l++)n.attachEvent(Me[l],()=>(this.startBatchAction(),!0));n.attachEvent(\"onParse\",()=>{this._undo.clearUndoStack(),this._undo.clearRedoStack(),i();}),n.attachEvent(\"onAfterTaskAdd\",(l,c)=>{this.setInitialTask(l,!0),this.onTaskAdded(c);}),n.attachEvent(\"onAfterTaskUpdate\",(l,c)=>{this.onTaskUpdated(c);}),n.attachEvent(\"onAfterParentExpand\",(l,c)=>{this.onTaskUpdated(c);}),n.attachEvent(\"onAfterTaskDelete\",(l,c)=>{this.onTaskDeleted(c);}),n.attachEvent(\"onAfterLinkAdd\",(l,c)=>{this.setInitialLink(l,!0),this.onLinkAdded(c);}),n.attachEvent(\"onAfterLinkUpdate\",(l,c)=>{this.onLinkUpdated(c);}),n.attachEvent(\"onAfterLinkDelete\",(l,c)=>{this.onLinkDeleted(c);}),n.attachEvent(\"onRowDragEnd\",(l,c)=>(this.onTaskMoved(a(l)),this.toggleIgnoreMoveEvents(),!0)),n.attachEvent(\"onBeforeTaskDelete\",l=>{this.store(l,n.config.undo_types.task);const c=[];return i(),n.eachTask(d=>{c.push(d.id);},l),this.setNestedTasks(l,c),!0;});const r=n.getDatastore(\"task\");r.attachEvent(\"onBeforeItemMove\",(l,c,d)=>(this.isMoveEventsIgnored()||i(),!0)),r.attachEvent(\"onAfterItemMove\",(l,c,d)=>(this.isMoveEventsIgnored()||this.onTaskMoved(a(l)),!0)),n.attachEvent(\"onRowDragStart\",(l,c,d)=>(this.toggleIgnoreMoveEvents(!0),i(),!0));let s=null,o=!1;if(n.attachEvent(\"onBeforeTaskDrag\",l=>{if(s=n.getState().drag_id,s===l){const c=n.getTask(l);n.isSummaryTask(c)&&n.config.drag_project&&(o=!0);}if(n.plugins().multiselect){const c=n.getSelectedTasks();c.length>1&&c.forEach(d=>{this.store(d,n.config.undo_types.task,!0);});}return this.store(l,n.config.undo_types.task);}),n.attachEvent(\"onAfterTaskDrag\",l=>{(o||n.plugins().multiselect&&n.getSelectedTasks().length>1)&&s===l&&(o=!1,s=null,this.stopBatchAction()),this.store(l,n.config.undo_types.task,!0);}),n.attachEvent(\"onLightbox\",l=>this.store(l,n.config.undo_types.task)),n.attachEvent(\"onBeforeTaskAutoSchedule\",l=>(this.store(l.id,n.config.undo_types.task,!0),!0)),n.ext.inlineEditors){let l=null,c=null;n.attachEvent(\"onGanttLayoutReady\",()=>{l&&n.ext.inlineEditors.detachEvent(l),c&&n.ext.inlineEditors.detachEvent(c),c=n.ext.inlineEditors.attachEvent(\"onEditStart\",d=>{this.store(d.id,n.config.undo_types.task);}),l=n.ext.inlineEditors.attachEvent(\"onBeforeEditStart\",d=>(this.stopBatchAction(),!0));});}}_storeCommand(e){const n=this._undo;if(n.updateConfigs(),n.undoEnabled)if(this._batchMode)this._batchAction.commands.push(e);else{const i=n.action.create([e]);n.logAction(i);}}_storeEntityCommand(e,n,i,a){const r=this._undo.command.create(e,n,i,a);this._storeCommand(r);}_storeTaskCommand(e,n){this._gantt.isTaskExists(e.id)&&(e.$local_index=this._gantt.getTaskIndex(e.id)),this._storeEntityCommand(e,this.getInitialTask(e.id),n,this._undo.command.entity.task);}_storeLinkCommand(e,n){this._storeEntityCommand(e,this.getInitialLink(e.id),n,this._undo.command.entity.link);}_getLinks(e){return e.$source.concat(e.$target);}_storeTask(e,n=!1){const i=this._gantt;return this.setInitialTask(e,n),i.eachTask(a=>{this.setInitialTask(a.id);},e),!0;}_storeLink(e,n=!1){return this.setInitialLink(e,n),!0;}}class Fn{constructor(e){this.maxSteps=100,this.undoEnabled=!0,this.redoEnabled=!0,this.action={create:n=>({commands:n?n.slice():[]}),invert:n=>{const i=this._gantt.copy(n),a=this.command;for(let r=0;r<n.commands.length;r++){const s=i.commands[r]=a.invert(i.commands[r]);s.type!==a.type.update&&s.type!==a.type.move||([s.value,s.oldValue]=[s.oldValue,s.value]);}return i;}},this.command={entity:null,type:null,create:(n,i,a,r)=>{const s=this._gantt;return{entity:r,type:a,value:s.copy(n),oldValue:s.copy(i||n)};},invert:n=>{const i=this._gantt.copy(n);return i.type=this.command.inverseCommands(n.type),i;},inverseCommands:n=>{const i=this._gantt,a=this.command.type;switch(n){case a.update:return a.update;case a.remove:return a.add;case a.add:return a.remove;case a.move:return a.move;default:return i.assert(!1,\"Invalid command \"+n),null;}}},this._undoStack=[],this._redoStack=[],this._gantt=e;}getUndoStack(){return this._undoStack;}setUndoStack(e){this._undoStack=e;}getRedoStack(){return this._redoStack;}setRedoStack(e){this._redoStack=e;}clearUndoStack(){this._undoStack=[];}clearRedoStack(){this._redoStack=[];}updateConfigs(){const e=this._gantt;this.maxSteps=e.config.undo_steps||100,this.command.entity=e.config.undo_types,this.command.type=e.config.undo_actions,this.undoEnabled=!!e.config.undo,this.redoEnabled=!!e.config.redo;}undo(){const e=this._gantt;if(this.updateConfigs(),!this.undoEnabled)return;const n=this._pop(this._undoStack);if(n&&this._reorderCommands(n),e.callEvent(\"onBeforeUndo\",[n])!==!1&&n)return this._applyAction(this.action.invert(n)),this._push(this._redoStack,e.copy(n)),void e.callEvent(\"onAfterUndo\",[n]);e.callEvent(\"onAfterUndo\",[null]);}redo(){const e=this._gantt;if(this.updateConfigs(),!this.redoEnabled)return;const n=this._pop(this._redoStack);if(n&&this._reorderCommands(n),e.callEvent(\"onBeforeRedo\",[n])!==!1&&n)return this._applyAction(n),this._push(this._undoStack,e.copy(n)),void e.callEvent(\"onAfterRedo\",[n]);e.callEvent(\"onAfterRedo\",[null]);}logAction(e){this._push(this._undoStack,e),this._redoStack=[];}_push(e,n){const i=this._gantt;if(!n.commands.length)return;const a=e===this._undoStack?\"onBeforeUndoStack\":\"onBeforeRedoStack\";if(i.callEvent(a,[n])!==!1&&n.commands.length){for(e.push(n);e.length>this.maxSteps;)e.shift();return n;}}_pop(e){return e.pop();}_reorderCommands(e){const n={any:0,link:1,task:2},i={move:1,any:0};e.commands.sort(function(a,r){if(a.entity===\"task\"&&r.entity===\"task\")return a.type!==r.type?(i[r.type]||0)-(i[a.type]||0):a.type===\"move\"&&a.oldValue&&r.oldValue&&r.oldValue.parent===a.oldValue.parent?a.oldValue.$index-r.oldValue.$index:0;{const s=n[a.entity]||n.any;return(n[r.entity]||n.any)-s;}});}_applyAction(e){let n=null;const i=this.command.entity,a=this.command.type,r=this._gantt,s={};s[i.task]={add:\"addTask\",get:\"getTask\",update:\"updateTask\",remove:\"deleteTask\",move:\"moveTask\",isExists:\"isTaskExists\"},s[i.link]={add:\"addLink\",get:\"getLink\",update:\"updateLink\",remove:\"deleteLink\",isExists:\"isLinkExists\"},r.batchUpdate(function(){for(let o=0;o<e.commands.length;o++){n=e.commands[o];const l=s[n.entity][n.type],c=s[n.entity].get,d=s[n.entity].isExists;if(n.type===a.add)r[l](n.oldValue,n.oldValue.parent,n.oldValue.$local_index);else if(n.type===a.remove)r[d](n.value.id)&&r[l](n.value.id);else if(n.type===a.update){const u=r[c](n.value.id);for(const h in n.value){let _=!(h.startsWith(\"$\")||h.startsWith(\"_\"));[\"$open\"].indexOf(h)>-1&&(_=!0),_&&(u[h]=n.value[h]);}r[l](n.value.id);}else n.type===a.move&&(r[l](n.value.id,n.value.$local_index,n.value.parent),r.callEvent(\"onRowDragEnd\",[n.value.id]));}});}}const Vn={click_drag:function(t){t.ext||(t.ext={});const e={className:\"gantt_click_drag_rect\",useRequestAnimationFrame:!0,callback:void 0,singleRow:!1};function n(){const i={viewPort:t.$task_data,...e};t.ext.clickDrag&&t.ext.clickDrag.destructor(),t.ext.clickDrag=new Nn(t);const a=t.config.click_drag;i.render=a.render||e.render,i.className=a.className||e.className,i.callback=a.callback||e.callback,i.viewPort=a.viewPort||t.$task_data,i.useRequestAnimationFrame=a.useRequestAnimationFrame===void 0?e.useRequestAnimationFrame:a.useRequestAnimationFrame,i.singleRow=a.singleRow===void 0?e.singleRow:a.singleRow;const r=t.$ui.getView(\"timeline\"),s=new Pn(i,t,r);t.ext.clickDrag.attach(s,a.useKey,a.ignore);}t.attachEvent(\"onGanttReady\",()=>{t.config.click_drag&&n();}),t.attachEvent(\"onGanttLayoutReady\",function(){t.$container&&t.config.click_drag&&t.attachEvent(\"onGanttRender\",function(){n();},{once:!0});}),t.attachEvent(\"onDestroy\",()=>{t.ext.clickDrag&&t.ext.clickDrag.destructor();});},drag_timeline:function(t){t.ext||(t.ext={}),t.ext.dragTimeline={create:()=>Yt.create(t),_isDragInProgress:()=>Yt._isDragInProgress},t.config.drag_timeline={enabled:!0,render:!1};},fullscreen:function(t){function e(){const d=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;return!(!d||d!==document.body);}function n(){try{return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled;}catch(d){console.error(\"Fullscreen is not available:\",d);}}t.$services.getService(\"state\").registerProvider(\"fullscreen\",()=>n()?{fullscreen:e()}:void 0);let i={overflow:null,padding:null,paddingTop:null,paddingRight:null,paddingBottom:null,paddingLeft:null};const a={width:null,height:null,top:null,left:null,position:null,zIndex:null,modified:!1};let r=null;function s(d,u){u.width=d.width,u.height=d.height,u.top=d.top,u.left=d.left,u.position=d.position,u.zIndex=d.zIndex;}let o=!1;function l(){if(!t.$container)return;let d;e()?o&&(d=\"onExpand\",function(){const u=t.ext.fullscreen.getFullscreenElement(),h=document.body;s(u.style,a),i={overflow:h.style.overflow,padding:h.style.padding?h.style.padding:null,paddingTop:h.style.paddingTop?h.style.paddingTop:null,paddingRight:h.style.paddingRight?h.style.paddingRight:null,paddingBottom:h.style.paddingBottom?h.style.paddingBottom:null,paddingLeft:h.style.paddingLeft?h.style.paddingLeft:null},h.style.padding&&(h.style.padding=\"0\"),h.style.paddingTop&&(h.style.paddingTop=\"0\"),h.style.paddingRight&&(h.style.paddingRight=\"0\"),h.style.paddingBottom&&(h.style.paddingBottom=\"0\"),h.style.paddingLeft&&(h.style.paddingLeft=\"0\"),h.style.overflow=\"hidden\",u.style.width=\"100vw\",u.style.height=\"100vh\",u.style.top=\"0px\",u.style.left=\"0px\",u.style.position=\"absolute\",u.style.zIndex=1,a.modified=!0,r=function(_){let p=_.parentNode;const y=[];for(;p&&p.style;)y.push({element:p,originalPositioning:p.style.position}),p.style.position=\"static\",p=p.parentNode;return y;}(u);}()):o&&(o=!1,d=\"onCollapse\",function(){const u=t.ext.fullscreen.getFullscreenElement(),h=document.body;a.modified&&(i.padding&&(h.style.padding=i.padding),i.paddingTop&&(h.style.paddingTop=i.paddingTop),i.paddingRight&&(h.style.paddingRight=i.paddingRight),i.paddingBottom&&(h.style.paddingBottom=i.paddingBottom),i.paddingLeft&&(h.style.paddingLeft=i.paddingLeft),h.style.overflow=i.overflow,i={overflow:null,padding:null,paddingTop:null,paddingRight:null,paddingBottom:null,paddingLeft:null},s(a,u.style),a.modified=!1),r.forEach(_=>{_.element.style.position=_.originalPositioning;}),r=null;}()),setTimeout(()=>{t.render();}),setTimeout(()=>{t.callEvent(d,[t.ext.fullscreen.getFullscreenElement()]);});}function c(){return!t.$container||!t.ext.fullscreen.getFullscreenElement()?!0:n()?!1:((console.warning||console.log)(\"The `fullscreen` feature not being allowed, or full-screen mode not being supported\"),!0);}t.ext.fullscreen={expand(){if(c()||e()||!t.callEvent(\"onBeforeExpand\",[this.getFullscreenElement()]))return;o=!0;const d=document.body,u=d.webkitRequestFullscreen?[Element.ALLOW_KEYBOARD_INPUT]:[],h=d.msRequestFullscreen||d.mozRequestFullScreen||d.webkitRequestFullscreen||d.requestFullscreen;h&&h.apply(d,u);},collapse(){if(c()||!e()||!t.callEvent(\"onBeforeCollapse\",[this.getFullscreenElement()]))return;const d=document.msExitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.exitFullscreen;d&&d.apply(document);},toggle(){c()||(e()?this.collapse():this.expand());},getFullscreenElement:()=>t.$root},t.expand=function(){t.ext.fullscreen.expand();},t.collapse=function(){t.ext.fullscreen.collapse();},t.attachEvent(\"onGanttReady\",function(){t.event(document,\"webkitfullscreenchange\",l),t.event(document,\"mozfullscreenchange\",l),t.event(document,\"MSFullscreenChange\",l),t.event(document,\"fullscreenChange\",l),t.event(document,\"fullscreenchange\",l);});},keyboard_navigation:function(t){(function(e){e.config.keyboard_navigation=!0,e.config.keyboard_navigation_cells=!1,e.$keyboardNavigation={},e._compose=function(){for(var n=Array.prototype.slice.call(arguments,0),i={},a=0;a<n.length;a++){var r=n[a];for(var s in typeof r==\"function\"&&(r=new r()),r)i[s]=r[s];}return i;},function(n){n.$keyboardNavigation.shortcuts={createCommand:function(){return{modifiers:{shift:!1,alt:!1,ctrl:!1,meta:!1},keyCode:null};},parse:function(i){for(var a=[],r=this.getExpressions(this.trim(i)),s=0;s<r.length;s++){for(var o=this.getWords(r[s]),l=this.createCommand(),c=0;c<o.length;c++)this.commandKeys[o[c]]?l.modifiers[o[c]]=!0:this.specialKeys[o[c]]?l.keyCode=this.specialKeys[o[c]]:l.keyCode=o[c].charCodeAt(0);a.push(l);}return a;},getCommandFromEvent:function(i){var a=this.createCommand();a.modifiers.shift=!!i.shiftKey,a.modifiers.alt=!!i.altKey,a.modifiers.ctrl=!!i.ctrlKey,a.modifiers.meta=!!i.metaKey,a.keyCode=i.which||i.keyCode,a.keyCode>=96&&a.keyCode<=105&&(a.keyCode-=48);var r=String.fromCharCode(a.keyCode);return r&&(a.keyCode=r.toLowerCase().charCodeAt(0)),a;},getHashFromEvent:function(i){return this.getHash(this.getCommandFromEvent(i));},getHash:function(i){var a=[];for(var r in i.modifiers)i.modifiers[r]&&a.push(r);return a.push(i.keyCode),a.join(this.junctionChar);},getExpressions:function(i){return i.split(this.junctionChar);},getWords:function(i){return i.split(this.combinationChar);},trim:function(i){return i.replace(/\\s/g,\"\");},junctionChar:\",\",combinationChar:\"+\",commandKeys:{shift:16,alt:18,ctrl:17,meta:!0},specialKeys:{backspace:8,tab:9,enter:13,esc:27,space:32,up:38,down:40,left:37,right:39,home:36,end:35,pageup:33,pagedown:34,delete:46,insert:45,plus:107,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123}};}(e),function(n){n.$keyboardNavigation.EventHandler={_handlers:null,findHandler:function(i){this._handlers||(this._handlers={});var a=n.$keyboardNavigation.shortcuts.getHash(i);return this._handlers[a];},doAction:function(i,a){var r=this.findHandler(i);if(r){if(n.$keyboardNavigation.facade.callEvent(\"onBeforeAction\",[i,a])===!1)return;r.call(this,a),a.preventDefault?a.preventDefault():a.returnValue=!1;}},bind:function(i,a){this._handlers||(this._handlers={});for(var r=n.$keyboardNavigation.shortcuts,s=r.parse(i),o=0;o<s.length;o++)this._handlers[r.getHash(s[o])]=a;},unbind:function(i){for(var a=n.$keyboardNavigation.shortcuts,r=a.parse(i),s=0;s<r.length;s++)this._handlers[a.getHash(r[s])]&&delete this._handlers[a.getHash(r[s])];},bindAll:function(i){for(var a in i)this.bind(a,i[a]);},initKeys:function(){this._handlers||(this._handlers={}),this.keys&&this.bindAll(this.keys);}};}(e),function(n){n.$keyboardNavigation.getFocusableNodes=Lt,n.$keyboardNavigation.trapFocus=function(i,a){if(a.keyCode!=9)return!1;for(var r=n.$keyboardNavigation.getFocusableNodes(i),s=ge(),o=-1,l=0;l<r.length;l++)if(r[l]==s){o=l;break;}if(a.shiftKey){if(o<=0){var c=r[r.length-1];if(c)return c.focus(),a.preventDefault(),!0;}}else if(o>=r.length-1){var d=r[0];if(d)return d.focus(),a.preventDefault(),!0;}return!1;};}(e),function(n){n.$keyboardNavigation.GanttNode=function(){},n.$keyboardNavigation.GanttNode.prototype=n._compose(n.$keyboardNavigation.EventHandler,{focus:function(){n.focus();},blur:function(){},isEnabled:function(){return n.$container.hasAttribute(\"tabindex\");},scrollHorizontal:function(i){var a=n.dateFromPos(n.getScrollState().x),r=n.getScale(),s=i<0?-r.step:r.step;a=n.date.add(a,s,r.unit),n.scrollTo(n.posFromDate(a));},scrollVertical:function(i){var a=n.getScrollState().y,r=n.config.row_height;n.scrollTo(null,a+(i<0?-1:1)*r);},keys:{\"alt+left\":function(i){this.scrollHorizontal(-1);},\"alt+right\":function(i){this.scrollHorizontal(1);},\"alt+up\":function(i){this.scrollVertical(-1);},\"alt+down\":function(i){this.scrollVertical(1);},\"ctrl+z\":function(){n.undo&&n.undo();},\"ctrl+r\":function(){n.redo&&n.redo();}}}),n.$keyboardNavigation.GanttNode.prototype.bindAll(n.$keyboardNavigation.GanttNode.prototype.keys);}(e),function(n){n.$keyboardNavigation.KeyNavNode=function(){},n.$keyboardNavigation.KeyNavNode.prototype=n._compose(n.$keyboardNavigation.EventHandler,{isValid:function(){return!0;},fallback:function(){return null;},moveTo:function(i){n.$keyboardNavigation.dispatcher.setActiveNode(i);},compareTo:function(i){if(!i)return!1;for(var a in this){if(!!this[a]!=!!i[a])return!1;var r=!(!this[a]||!this[a].toString),s=!(!i[a]||!i[a].toString);if(s!=r)return!1;if(s&&r){if(i[a].toString()!=this[a].toString())return!1;}else if(i[a]!=this[a])return!1;}return!0;},getNode:function(){},focus:function(){var i=this.getNode();if(i){var a=n.$keyboardNavigation.facade;a.callEvent(\"onBeforeFocus\",[i])!==!1&&i&&(i.setAttribute(\"tabindex\",\"-1\"),i.$eventAttached||(i.$eventAttached=!0,n.event(i,\"focus\",function(r){return r.preventDefault(),!1;},!1)),n.utils.dom.isChildOf(document.activeElement,i)&&(i=document.activeElement),i.focus&&i.focus(),a.callEvent(\"onFocus\",[this.getNode()]));}},blur:function(){var i=this.getNode();i&&(n.$keyboardNavigation.facade.callEvent(\"onBlur\",[i]),i.setAttribute(\"tabindex\",\"-1\"));}});}(e),function(n){n.$keyboardNavigation.HeaderCell=function(i){this.index=i||0;},n.$keyboardNavigation.HeaderCell.prototype=n._compose(n.$keyboardNavigation.KeyNavNode,{_handlers:null,isValid:function(){return!(!n.config.show_grid&&n.getVisibleTaskCount()||!n.getGridColumns()[this.index]&&n.getVisibleTaskCount());},fallback:function(){if(!n.config.show_grid)return n.getVisibleTaskCount()?new n.$keyboardNavigation.TaskRow():null;for(var i=n.getGridColumns(),a=this.index;a>=0&&!i[a];)a--;return i[a]?new n.$keyboardNavigation.HeaderCell(a):null;},fromDomElement:function(i){var a=pt(i,\"gantt_grid_head_cell\");if(a){for(var r=0;a&&a.previousSibling;)a=a.previousSibling,r+=1;return new n.$keyboardNavigation.HeaderCell(r);}return null;},getNode:function(){const i=n.$grid_scale;return i?i.childNodes[this.index]:null;},keys:{left:function(){this.index>0&&this.moveTo(new n.$keyboardNavigation.HeaderCell(this.index-1));},right:function(){var i=n.getGridColumns();this.index<i.length-1&&this.moveTo(new n.$keyboardNavigation.HeaderCell(this.index+1));},down:function(){var i,a=n.getChildren(n.config.root_id);n.isTaskExists(a[0])&&(i=a[0]),i&&(n.config.keyboard_navigation_cells?this.moveTo(new n.$keyboardNavigation.TaskCell(i,this.index)):this.moveTo(new n.$keyboardNavigation.TaskRow(i)));},end:function(){var i=n.getGridColumns();this.moveTo(new n.$keyboardNavigation.HeaderCell(i.length-1));},home:function(){this.moveTo(new n.$keyboardNavigation.HeaderCell(0));},\"enter, space\":function(){ge().click();},\"ctrl+enter\":function(){n.isReadonly(this)||n.createTask({},this.taskId);}}}),n.$keyboardNavigation.HeaderCell.prototype.bindAll(n.$keyboardNavigation.HeaderCell.prototype.keys);}(e),function(n){n.$keyboardNavigation.TaskRow=function(i){if(!i){var a=n.getChildren(n.config.root_id);a[0]&&(i=a[0]);}this.taskId=i,n.isTaskExists(this.taskId)&&(this.index=n.getTaskIndex(this.taskId),this.globalIndex=n.getGlobalTaskIndex(this.taskId),this.splitItem=!!n.getTask(this.taskId).$split_subtask,this.parentId=n.getParent(this.taskId));},n.$keyboardNavigation.TaskRow.prototype=n._compose(n.$keyboardNavigation.KeyNavNode,{_handlers:null,isValid:function(){return n.isTaskExists(this.taskId)&&n.getTaskIndex(this.taskId)>-1;},fallback:function(){if(!n.getVisibleTaskCount()){var i=new n.$keyboardNavigation.HeaderCell();return i.isValid()?i:null;}if(this.splitItem)return new n.$keyboardNavigation.TaskRow(this.parentId);var a=-1;if(n.getTaskByIndex(this.globalIndex-1))a=this.globalIndex-1;else if(n.getTaskByIndex(this.globalIndex+1))a=this.globalIndex+1;else for(var r=this.globalIndex;r>=0;){if(n.getTaskByIndex(r)){a=r;break;}r--;}return a>-1?new n.$keyboardNavigation.TaskRow(n.getTaskByIndex(a).id):void 0;},fromDomElement:function(i){if(n.config.keyboard_navigation_cells)return null;var a=n.locate(i);return n.isTaskExists(a)?new n.$keyboardNavigation.TaskRow(a):null;},getNode:function(){if(n.isTaskExists(this.taskId)&&n.isTaskVisible(this.taskId))return n.config.show_grid?n.$grid.querySelector(`.gantt_row[${n.config.task_attribute}=\"${String(this.taskId).replaceAll('\"','\\\\\"')}\"]`):n.getTaskNode(this.taskId);},focus:function(i){if(!i){const a=n.getTaskPosition(n.getTask(this.taskId)),r=n.getTaskHeight(this.taskId),s=n.getScrollState();let o,l;o=n.$task?n.$task.offsetWidth:s.inner_width,l=n.$grid_data||n.$task_data?(n.$grid_data||n.$task_data).offsetHeight:s.inner_height;const c=n.config.show_chart&&n.$ui.getView(\"timeline\");a.top<s.y||a.top+r>s.y+l?n.scrollTo(null,a.top-20):n.config.scroll_on_click&&c&&(a.left>s.x+o?n.scrollTo(a.left-n.config.task_scroll_offset):a.left+a.width<s.x&&n.scrollTo(a.left+a.width-n.config.task_scroll_offset));}n.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this,[i]),function(){var a=n.$ui.getView(\"grid\");if(a&&a.$grid_data){var r=parseInt(a.$grid.scrollLeft),s=parseInt(a.$grid_data.scrollTop),o=a.$config.scrollX;if(o&&a.$config.scrollable){var l=n.$ui.getView(o);l&&l.scrollTo(r,s);}var c=a.$config.scrollY;if(c){var d=n.$ui.getView(c);d&&d.scrollTo(r,s);}}}();},keys:{pagedown:function(){n.getVisibleTaskCount()&&this.moveTo(new n.$keyboardNavigation.TaskRow(n.getTaskByIndex(n.getVisibleTaskCount()-1).id));},pageup:function(){n.getVisibleTaskCount()&&this.moveTo(new n.$keyboardNavigation.TaskRow(n.getTaskByIndex(0).id));},up:function(){var i=null,a=n.getPrev(this.taskId);i=n.isTaskExists(a)?new n.$keyboardNavigation.TaskRow(a):new n.$keyboardNavigation.HeaderCell(),this.moveTo(i);},down:function(){var i=n.getNext(this.taskId);n.isTaskExists(i)&&this.moveTo(new n.$keyboardNavigation.TaskRow(i));},\"shift+down\":function(){n.hasChild(this.taskId)&&!n.getTask(this.taskId).$open&&n.open(this.taskId);},\"shift+up\":function(){n.hasChild(this.taskId)&&n.getTask(this.taskId).$open&&n.close(this.taskId);},\"shift+right\":function(){if(!n.isReadonly(this)){var i=n.getPrevSibling(this.taskId);n.isTaskExists(i)&&!n.isChildOf(this.taskId,i)&&(n.getTask(i).$open=!0,n.moveTask(this.taskId,-1,i)!==!1&&n.updateTask(this.taskId));}},\"shift+left\":function(){if(!n.isReadonly(this)){var i=n.getParent(this.taskId);n.isTaskExists(i)&&n.moveTask(this.taskId,n.getTaskIndex(i)+1,n.getParent(i))!==!1&&n.updateTask(this.taskId);}},space:function(i){n.isSelectedTask(this.taskId)?n.unselectTask(this.taskId):n.selectTask(this.taskId);},\"ctrl+left\":function(i){n.close(this.taskId);},\"ctrl+right\":function(i){n.open(this.taskId);},delete:function(i){n.isReadonly(this)||n.$click.buttons.delete(this.taskId);},enter:function(){n.isReadonly(this)||n.showLightbox(this.taskId);},\"ctrl+enter\":function(){n.isReadonly(this)||n.createTask({},this.taskId);}}}),n.$keyboardNavigation.TaskRow.prototype.bindAll(n.$keyboardNavigation.TaskRow.prototype.keys);}(e),function(n){n.$keyboardNavigation.TaskCell=function(i,a){if(!(i=at(i,n.config.root_id))){var r=n.getChildren(n.config.root_id);r[0]&&(i=r[0]);}this.taskId=i,this.columnIndex=a||0,n.isTaskExists(this.taskId)&&(this.index=n.getTaskIndex(this.taskId),this.globalIndex=n.getGlobalTaskIndex(this.taskId));},n.$keyboardNavigation.TaskCell.prototype=n._compose(n.$keyboardNavigation.TaskRow,{_handlers:null,isValid:function(){return n.$keyboardNavigation.TaskRow.prototype.isValid.call(this)&&!!n.getGridColumns()[this.columnIndex];},fallback:function(){var i=n.$keyboardNavigation.TaskRow.prototype.fallback.call(this),a=i;if(i instanceof n.$keyboardNavigation.TaskRow){for(var r=n.getGridColumns(),s=this.columnIndex;s>=0&&!r[s];)s--;r[s]&&(a=new n.$keyboardNavigation.TaskCell(i.taskId,s));}return a;},fromDomElement:function(i){if(!n.config.keyboard_navigation_cells)return null;var a=n.locate(i);if(n.isTaskExists(a)){var r=0,s=nt(i,\"data-column-index\");return s&&(r=1*s.getAttribute(\"data-column-index\")),new n.$keyboardNavigation.TaskCell(a,r);}return null;},getNode:function(){if(n.isTaskExists(this.taskId)&&(n.isTaskVisible(this.taskId)||n.config.show_tasks_outside_timescale)){if(n.config.show_grid&&n.$grid){var i=n.$grid.querySelector(\".gantt_row[\"+n.config.task_attribute+\"='\"+this.taskId+\"']\");return i?i.querySelector(\"[data-column-index='\"+this.columnIndex+\"']\"):null;}return n.getTaskNode(this.taskId);}},keys:{up:function(){var i=null,a=n.getPrev(this.taskId);i=n.isTaskExists(a)?new n.$keyboardNavigation.TaskCell(a,this.columnIndex):new n.$keyboardNavigation.HeaderCell(this.columnIndex),this.moveTo(i);},down:function(){var i=n.getNext(this.taskId);n.isTaskExists(i)&&this.moveTo(new n.$keyboardNavigation.TaskCell(i,this.columnIndex));},left:function(){this.columnIndex>0&&this.moveTo(new n.$keyboardNavigation.TaskCell(this.taskId,this.columnIndex-1));},right:function(){var i=n.getGridColumns();this.columnIndex<i.length-1&&this.moveTo(new n.$keyboardNavigation.TaskCell(this.taskId,this.columnIndex+1));},end:function(){var i=n.getGridColumns();this.moveTo(new n.$keyboardNavigation.TaskCell(this.taskId,i.length-1));},home:function(){this.moveTo(new n.$keyboardNavigation.TaskCell(this.taskId,0));},pagedown:function(){n.getVisibleTaskCount()&&this.moveTo(new n.$keyboardNavigation.TaskCell(n.getTaskByIndex(n.getVisibleTaskCount()-1).id,this.columnIndex));},pageup:function(){n.getVisibleTaskCount()&&this.moveTo(new n.$keyboardNavigation.TaskCell(n.getTaskByIndex(0).id,this.columnIndex));}}}),n.$keyboardNavigation.TaskCell.prototype.bindAll(n.$keyboardNavigation.TaskRow.prototype.keys),n.$keyboardNavigation.TaskCell.prototype.bindAll(n.$keyboardNavigation.TaskCell.prototype.keys);}(e),Rn(e),function(n){n.$keyboardNavigation.dispatcher={isActive:!1,activeNode:null,globalNode:new n.$keyboardNavigation.GanttNode(),enable:function(){this.isActive=!0,this.setActiveNode(this.getActiveNode());},disable:function(){this.isActive=!1;},isEnabled:function(){return!!this.isActive;},getDefaultNode:function(){var i;return(i=n.config.keyboard_navigation_cells?new n.$keyboardNavigation.TaskCell():new n.$keyboardNavigation.TaskRow()).isValid()||(i=i.fallback()),i;},setDefaultNode:function(){this.setActiveNode(this.getDefaultNode());},getActiveNode:function(){var i=this.activeNode;return i&&!i.isValid()&&(i=i.fallback()),i;},fromDomElement:function(i){for(var a=[n.$keyboardNavigation.TaskRow,n.$keyboardNavigation.TaskCell,n.$keyboardNavigation.HeaderCell],r=0;r<a.length;r++)if(a[r].prototype.fromDomElement){var s=a[r].prototype.fromDomElement(i);if(s)return s;}return null;},focusGlobalNode:function(){this.blurNode(this.globalNode),this.focusNode(this.globalNode);},setActiveNode:function(i){var a=!0;this.activeNode&&this.activeNode.compareTo(i)&&(a=!1),this.isEnabled()&&(a&&this.blurNode(this.activeNode),this.activeNode=i,this.focusNode(this.activeNode,!a));},focusNode:function(i,a){i&&i.focus&&i.focus(a);},blurNode:function(i){i&&i.blur&&i.blur();},keyDownHandler:function(i){if(!n.$keyboardNavigation.isModal()&&this.isEnabled()&&!i.defaultPrevented){var a=this.globalNode,r=n.$keyboardNavigation.shortcuts.getCommandFromEvent(i),s=this.getActiveNode();n.$keyboardNavigation.facade.callEvent(\"onKeyDown\",[r,i])!==!1&&(s?s.findHandler(r)?s.doAction(r,i):a.findHandler(r)&&a.doAction(r,i):this.setDefaultNode());}},_timeout:null,awaitsFocus:function(){return this._timeout!==null;},delay:function(i,a){clearTimeout(this._timeout),this._timeout=setTimeout(n.bind(function(){this._timeout=null,i();},this),a||1);},clearDelay:function(){clearTimeout(this._timeout);}};}(e),function(){var n=e.$keyboardNavigation.dispatcher;n.isTaskFocused=function(k){var b=n.activeNode;return(b instanceof e.$keyboardNavigation.TaskRow||b instanceof e.$keyboardNavigation.TaskCell)&&b.taskId==k;};var i=function(k){if(e.config.keyboard_navigation&&(e.config.keyboard_navigation_cells||!s(k))&&!o(k)&&!function(b){return!!dt(b.target,\".gantt_cal_light\");}(k))return n.keyDownHandler(k);},a=function(k){if(n.$preventDefault)return k.preventDefault(),e.$container.blur(),!1;n.awaitsFocus()||n.focusGlobalNode();},r=function(){if(!n.isEnabled())return;const k=!Y(document.activeElement,e.$container)&&document.activeElement.localName!=\"body\";var b=n.getActiveNode();if(b&&!k){var g,m,f=b.getNode();f&&f.parentNode&&(g=f.parentNode.scrollTop,m=f.parentNode.scrollLeft),b.focus(!0),f&&f.parentNode&&(f.parentNode.scrollTop=g,f.parentNode.scrollLeft=m);}};function s(k){return!!dt(k.target,\".gantt_grid_editor_placeholder\");}function o(k){return!!dt(k.target,\".no_keyboard_navigation\");}function l(k){if(!e.config.keyboard_navigation||!e.config.keyboard_navigation_cells&&s(k))return!0;if(!o(k)){var b,g=n.fromDomElement(k);if(g&&(n.activeNode instanceof e.$keyboardNavigation.TaskCell&&Y(k.target,e.$task)&&(g=new e.$keyboardNavigation.TaskCell(g.taskId,n.activeNode.columnIndex)),b=g,e.config.show_grid&&e.$ui.getView(\"grid\")&&e.config.keyboard_navigation_cells)){const m=k.target.classList.contains(\"gantt_row\"),f=k.target.closest(\".gantt_task_line\"),v=e.utils.dom.getNodePosition(e.$grid).x,x=v+e.$grid.offsetWidth,$=e.utils.dom.getNodePosition(document.activeElement).x;if(m||f&&($<v||x<$)){let w=e.$grid.scrollLeft;const S=w+e.$grid.offsetWidth;let T=0;m&&(w=e.utils.dom.getRelativeEventPosition(k,e.$grid).x);for(let E=0;E<e.config.columns.length;E++){const C=e.config.columns[E];if(!C.hide&&(T+=C.width,w<T)){S<T&&(T-=C.width),b.columnIndex=E;break;}}}}b?n.isEnabled()?n.delay(function(){n.setActiveNode(b);}):n.activeNode=b:(n.$preventDefault=!0,setTimeout(function(){n.$preventDefault=!1;},300));}}e.attachEvent(\"onDataRender\",function(){e.config.keyboard_navigation&&r();}),e.attachEvent(\"onGanttRender\",function(){e.$root&&(e.eventRemove(e.$root,\"keydown\",i),e.eventRemove(e.$container,\"focus\",a),e.eventRemove(e.$container,\"mousedown\",l),e.config.keyboard_navigation?(e.event(e.$root,\"keydown\",i),e.event(e.$container,\"focus\",a),e.event(e.$container,\"mousedown\",l),e.$container.setAttribute(\"tabindex\",\"0\")):e.$container.removeAttribute(\"tabindex\"));});var c=e.attachEvent(\"onGanttReady\",function(){if(e.detachEvent(c),e.$data.tasksStore.attachEvent(\"onStoreUpdated\",function(b){if(e.config.keyboard_navigation&&n.isEnabled()){const g=n.getActiveNode(),m=e.$ui.getView(\"grid\");if(!m||!m.$grid_data)return;const f=m.getItemTop(b),v=m.$grid_data.scrollTop,x=v+m.$grid_data.getBoundingClientRect().height;g&&g.taskId==b&&v<=f&&x>=f&&r();}}),e._smart_render){var k=e._smart_render._redrawTasks;e._smart_render._redrawTasks=function(b,g){if(e.config.keyboard_navigation&&n.isEnabled()){var m=n.getActiveNode();if(m&&m.taskId!==void 0){for(var f=!1,v=0;v<g.length;v++)if(g[v].id==m.taskId&&g[v].start_date){f=!0;break;}f||g.push(e.getTask(m.taskId));}}return k.apply(this,arguments);};}});let d=null,u=!1;e.attachEvent(\"onTaskCreated\",function(k){return d=k.id,!0;}),e.attachEvent(\"onAfterTaskAdd\",function(k,b){if(!e.config.keyboard_navigation)return!0;if(n.isEnabled()){if(k==d&&(u=!0,setTimeout(()=>{u=!1,d=null;})),u&&b.type==e.config.types.placeholder)return;var g=0,m=n.activeNode;m instanceof e.$keyboardNavigation.TaskCell&&(g=m.columnIndex);var f=e.config.keyboard_navigation_cells?e.$keyboardNavigation.TaskCell:e.$keyboardNavigation.TaskRow;b.type==e.config.types.placeholder&&e.config.placeholder_task.focusOnCreate===!1||n.setActiveNode(new f(k,g));}}),e.attachEvent(\"onTaskIdChange\",function(k,b){if(!e.config.keyboard_navigation)return!0;var g=n.activeNode;return n.isTaskFocused(k)&&(g.taskId=b),!0;});var h=setInterval(function(){e.config.keyboard_navigation&&(n.isEnabled()||n.enable());},500);function _(k){var b={gantt:e.$keyboardNavigation.GanttNode,headerCell:e.$keyboardNavigation.HeaderCell,taskRow:e.$keyboardNavigation.TaskRow,taskCell:e.$keyboardNavigation.TaskCell};return b[k]||b.gantt;}function p(k){for(var b=e.getGridColumns(),g=0;g<b.length;g++)if(b[g].name==k)return g;return 0;}e.attachEvent(\"onDestroy\",function(){clearInterval(h);});var y={};ot(y),e.mixin(y,{addShortcut:function(k,b,g){var m=_(g);m&&m.prototype.bind(k,b);},getShortcutHandler:function(k,b){var g=e.$keyboardNavigation.shortcuts.parse(k);if(g.length)return y.getCommandHandler(g[0],b);},getCommandHandler:function(k,b){var g=_(b);if(g&&k)return g.prototype.findHandler(k);},removeShortcut:function(k,b){var g=_(b);g&&g.prototype.unbind(k);},focus:function(k){var b,g=k?k.type:null,m=_(g);switch(g){case\"taskCell\":b=new m(k.id,p(k.column));break;case\"taskRow\":b=new m(k.id);break;case\"headerCell\":b=new m(p(k.column));}n.delay(function(){b?n.setActiveNode(b):(n.enable(),n.getActiveNode()?n.awaitsFocus()||n.enable():n.setDefaultNode());});},getActiveNode:function(){if(n.isEnabled()){var k=n.getActiveNode(),b=(m=k)instanceof e.$keyboardNavigation.GanttNode?\"gantt\":m instanceof e.$keyboardNavigation.HeaderCell?\"headerCell\":m instanceof e.$keyboardNavigation.TaskRow?\"taskRow\":m instanceof e.$keyboardNavigation.TaskCell?\"taskCell\":null,g=e.getGridColumns();switch(b){case\"taskCell\":return{type:\"taskCell\",id:k.taskId,column:g[k.columnIndex].name};case\"taskRow\":return{type:\"taskRow\",id:k.taskId};case\"headerCell\":return{type:\"headerCell\",column:g[k.index].name};}}var m;return null;}}),e.$keyboardNavigation.facade=y,e.ext.keyboardNavigation=y,e.focus=function(){y.focus();},e.addShortcut=y.addShortcut,e.getShortcutHandler=y.getShortcutHandler,e.removeShortcut=y.removeShortcut;}();})(t);},quick_info:function(t){t.ext||(t.ext={}),t.ext.quickInfo=new Hn(t),t.config.quickinfo_buttons=[\"icon_edit\",\"icon_delete\"],t.config.quick_info_detached=!0,t.config.show_quick_info=!0,t.templates.quick_info_title=function(a,r,s){return s.text.substr(0,50);},t.templates.quick_info_content=function(a,r,s){return s.details||s.text;},t.templates.quick_info_date=function(a,r,s){return t.templates.task_time(a,r,s);},t.templates.quick_info_class=function(a,r,s){return\"\";},t.attachEvent(\"onTaskClick\",function(a,r){const s=t.utils.dom.closest(r.target,\".gantt_add\"),o=t.utils.dom.closest(r.target,\".gantt_close\"),l=t.utils.dom.closest(r.target,\".gantt_open\");return!s&&!o&&!l&&setTimeout(function(){t.ext.quickInfo.show(a);},0),!0;});const e=[\"onViewChange\",\"onLightbox\",\"onBeforeTaskDelete\",\"onBeforeDrag\"],n=function(){return t.ext.quickInfo.hide(),!0;};for(let a=0;a<e.length;a++)t.attachEvent(e[a],n);function i(){return t.ext.quickInfo.hide(),t.ext.quickInfo._quickInfoBox=null,!0;}t.attachEvent(\"onEmptyClick\",function(a){let r=!0;const s=document.querySelector(\".gantt_cal_quick_info\");s&&t.utils.dom.isChildOf(a.target,s)&&(r=!1),r&&n();}),t.attachEvent(\"onGanttReady\",i),t.attachEvent(\"onDestroy\",i),t.event(window,\"keydown\",function(a){a.keyCode===27&&t.ext.quickInfo.hide();}),t.showQuickInfo=function(){t.ext.quickInfo.show.apply(t.ext.quickInfo,arguments);},t.hideQuickInfo=function(){t.ext.quickInfo.hide.apply(t.ext.quickInfo,arguments);};},tooltip:function(t){t.config.tooltip_timeout=30,t.config.tooltip_offset_y=20,t.config.tooltip_offset_x=10,t.config.tooltip_hide_timeout=30;const e=new Wn(t);t.ext.tooltips=e,t.attachEvent(\"onGanttReady\",function(){t.$root&&e.tooltipFor({selector:\"[\"+t.config.task_attribute+\"]:not(.gantt_task_row)\",html:n=>{if(t.config.touch&&!t.config.touch_tooltip)return;const i=t.locate(n);if(t.isTaskExists(i)){const a=t.getTask(i);return t.templates.tooltip_text(a.start_date,a.end_date,a);}return null;},global:!1});}),t.attachEvent(\"onDestroy\",function(){e.destructor();}),t.attachEvent(\"onLightbox\",function(){e.hideTooltip();}),t.attachEvent(\"onBeforeTooltip\",function(){if(t.getState().link_source_id)return!1;}),t.attachEvent(\"onGanttScroll\",function(){e.hideTooltip();});},undo:function(t){const e=new Fn(t),n=new jn(e,t);function i(d,u){return String(d)===String(u);}function a(d,u,h){d&&(i(d.id,u)&&(d.id=h),i(d.parent,u)&&(d.parent=h));}function r(d,u,h){a(d.value,u,h),a(d.oldValue,u,h);}function s(d,u,h){d&&(i(d.source,u)&&(d.source=h),i(d.target,u)&&(d.target=h));}function o(d,u,h){s(d.value,u,h),s(d.oldValue,u,h);}function l(d,u,h){const _=e;for(let p=0;p<d.length;p++){const y=d[p];for(let k=0;k<y.commands.length;k++)y.commands[k].entity===_.command.entity.task?r(y.commands[k],u,h):y.commands[k].entity===_.command.entity.link&&o(y.commands[k],u,h);}}function c(d,u,h){const _=e;for(let p=0;p<d.length;p++){const y=d[p];for(let k=0;k<y.commands.length;k++){const b=y.commands[k];b.entity===_.command.entity.link&&(b.value&&b.value.id===u&&(b.value.id=h),b.oldValue&&b.oldValue.id===u&&(b.oldValue.id=h));}}}t.config.undo=!0,t.config.redo=!0,t.config.undo_types={link:\"link\",task:\"task\"},t.config.undo_actions={update:\"update\",remove:\"remove\",add:\"add\",move:\"move\"},t.ext||(t.ext={}),t.ext.undo={undo:()=>e.undo(),redo:()=>e.redo(),getUndoStack:()=>e.getUndoStack(),setUndoStack:d=>e.setUndoStack(d),getRedoStack:()=>e.getRedoStack(),setRedoStack:d=>e.setRedoStack(d),clearUndoStack:()=>e.clearUndoStack(),clearRedoStack:()=>e.clearRedoStack(),saveState:(d,u)=>n.store(d,u,!0),getInitialState:(d,u)=>u===t.config.undo_types.link?n.getInitialLink(d):n.getInitialTask(d)},t.undo=t.ext.undo.undo,t.redo=t.ext.undo.redo,t.getUndoStack=t.ext.undo.getUndoStack,t.getRedoStack=t.ext.undo.getRedoStack,t.clearUndoStack=t.ext.undo.clearUndoStack,t.clearRedoStack=t.ext.undo.clearRedoStack,t.attachEvent(\"onTaskIdChange\",(d,u)=>{const h=e;l(h.getUndoStack(),d,u),l(h.getRedoStack(),d,u);}),t.attachEvent(\"onLinkIdChange\",(d,u)=>{const h=e;c(h.getUndoStack(),d,u),c(h.getRedoStack(),d,u);}),t.attachEvent(\"onGanttReady\",()=>{e.updateConfigs();});},marker:function(t){function e(i){if(!t.config.show_markers||!i.start_date)return!1;var a=t.getState();if(+i.start_date>+a.max_date||(!i.end_date||+i.end_date<+a.min_date)&&+i.start_date<+a.min_date)return;var r=document.createElement(\"div\");r.setAttribute(\"data-marker-id\",i.id);var s=\"gantt_marker\";t.templates.marker_class&&(s+=\" \"+t.templates.marker_class(i)),i.css&&(s+=\" \"+i.css),t.templates.marker_class&&(s+=\" \"+t.templates.marker_class(i)),i.title&&(r.title=i.title),r.className=s;var o=t.posFromDate(i.start_date);r.style.left=o+\"px\";let l=Math.max(t.getRowTop(t.getVisibleTaskCount()),0)+\"px\";if(t.config.timeline_placeholder&&t.$task_data&&(l=t.$task_data.scrollHeight+\"px\"),r.style.height=l,i.end_date){var c=t.posFromDate(i.end_date);r.style.width=Math.max(c-o,0)+\"px\";}if(i.text){let d=null;d=typeof i.text==\"function\"?i.text(i):i.text,d&&(t.config.external_render&&t.config.external_render.isElement(d)?(r.innerHTML=\"<div class='gantt_marker_content' ></div>\",t.config.external_render.renderElement(d,r.querySelector(\".gantt_marker_content\"))):r.innerHTML=\"<div class='gantt_marker_content' >\"+i.text+\"</div>\");}return r;}function n(){if(t.$task_data&&t.$root.contains(t.$task_data)){if(!t.$marker_area||!t.$task_data.contains(t.$marker_area)){var i=document.createElement(\"div\");i.className=\"gantt_marker_area\",t.$task_data.appendChild(i),t.$marker_area=i;}}else t.$marker_area=null;}t._markers||(t._markers=t.createDatastore({name:\"marker\",initItem:function(i){return i.id=i.id||t.uid(),i;}})),t.config.show_markers=!0,t.attachEvent(\"onBeforeGanttRender\",function(){t.$marker_area||n();}),t.attachEvent(\"onDataRender\",function(){t.$marker_area||(n(),t.renderMarkers());}),t.attachEvent(\"onGanttLayoutReady\",function(){t.attachEvent(\"onBeforeGanttRender\",function(){t.$marker_area&&(t.$marker_area.innerHTML=\"\"),n(),t.$services.getService(\"layers\").createDataRender({name:\"marker\",defaultContainer:function(){return t.$marker_area;}}).addLayer(e);},{once:!0});}),t.getMarker=function(i){return this._markers?this._markers.getItem(i):null;},t.addMarker=function(i){return this._markers.addItem(i);},t.deleteMarker=function(i){return!!this._markers.exists(i)&&(this._markers.removeItem(i),!0);},t.updateMarker=function(i){this._markers.refresh(i);},t._getMarkers=function(){return this._markers.getItems();},t.renderMarkers=function(){this._markers.refresh();};},multiselect:function(t){t.config.multiselect=!0,t.config.multiselect_one_level=!1,t._multiselect={_selected:{},_one_level:!1,_active:!0,_first_selected_when_shift:null,getDefaultSelected:function(){var e=this.getSelected();return e.length?e[e.length-1]:null;},setFirstSelected:function(e){this._first_selected_when_shift=e;},getFirstSelected:function(){return this._first_selected_when_shift;},isActive:function(){return this.updateState(),this._active;},updateState:function(){this._one_level=t.config.multiselect_one_level;var e=this._active;this._active=t.config.select_task,this._active!=e&&this.reset();},reset:function(){this._selected={};},setLastSelected:function(e){t.$data.tasksStore.silent(function(){var n=t.$data.tasksStore;e?n.select(e+\"\"):n.unselect(null);});},getLastSelected:function(){var e=t.$data.tasksStore.getSelectedId();return e&&t.isTaskExists(e)?e:null;},select:function(e,n){return!!(e&&t.callEvent(\"onBeforeTaskMultiSelect\",[e,!0,n])&&t.callEvent(\"onBeforeTaskSelected\",[e]))&&(this._selected[e]=!0,this.setLastSelected(e),this.afterSelect(e),t.callEvent(\"onTaskMultiSelect\",[e,!0,n]),t.callEvent(\"onTaskSelected\",[e]),!0);},toggle:function(e,n){this._selected[e]?this.unselect(e,n):this.select(e,n);},unselect:function(e,n){e&&t.callEvent(\"onBeforeTaskMultiSelect\",[e,!1,n])&&(this._selected[e]=!1,this.getLastSelected()==e&&this.setLastSelected(this.getDefaultSelected()),this.afterSelect(e),t.callEvent(\"onTaskMultiSelect\",[e,!1,n]),t.callEvent(\"onTaskUnselected\",[e]));},isSelected:function(e){return!(!t.isTaskExists(e)||!this._selected[e]);},getSelected:function(){var e=[];for(var n in this._selected)this._selected[n]&&t.isTaskExists(n)?e.push(n):this._selected[n]=!1;return e.sort(function(i,a){return t.getGlobalTaskIndex(i)>t.getGlobalTaskIndex(a)?1:-1;}),e;},forSelected:function(e){for(var n=this.getSelected(),i=0;i<n.length;i++)e(n[i]);},isSameLevel:function(e){if(!this._one_level)return!0;var n=this.getLastSelected();return!n||!t.isTaskExists(n)||!t.isTaskExists(e)||t.calculateTaskLevel(t.getTask(n))==t.calculateTaskLevel(t.getTask(e));},afterSelect:function(e){t.isTaskExists(e)&&t._quickRefresh(function(){t.refreshTask(e);});},doSelection:function(e){if(!this.isActive()||t._is_icon_open_click(e))return!1;var n=t.locate(e);if(!n||!t.callEvent(\"onBeforeMultiSelect\",[e]))return!1;var i=this.getSelected(),a=this.getFirstSelected(),r=!1,s=this.getLastSelected(),o=t.config.multiselect,l=function(){const d=t.ext.inlineEditors;if(d&&d.getState){const h=d.getState(),_=d.locateCell(e.target);t.config.inline_editors_multiselect_open&&_&&d.getEditorConfig(_.columnName)&&(d.isVisible()&&h.id==_.id&&h.columnName==_.columnName||d.startEdit(_.id,_.columnName));}this.setFirstSelected(n),this.isSelected(n)||this.select(n,e),i=this.getSelected();for(var u=0;u<i.length;u++)i[u]!==n&&this.unselect(i[u],e);}.bind(this),c=function(){if(s){if(n){var d=t.getGlobalTaskIndex(this.getFirstSelected()),u=t.getGlobalTaskIndex(n),h=t.getGlobalTaskIndex(s);d!=-1&&h!=-1||(d=u,this.reset());for(var _=s;t.getGlobalTaskIndex(_)!==d;)this.unselect(_,e),_=d>h?t.getNext(_):t.getPrev(_);for(_=n;t.getGlobalTaskIndex(_)!==d;)this.select(_,e)&&!r&&(r=!0,a=_),_=d>u?t.getNext(_):t.getPrev(_);}}else s=n;}.bind(this);return o&&(e.ctrlKey||e.metaKey)?(this.isSelected(n)||this.setFirstSelected(n),n&&this.toggle(n,e)):o&&e.shiftKey?(t.isTaskExists(this.getFirstSelected())&&this.getFirstSelected()!==null||this.setFirstSelected(n),i.length?c():l()):l(),this.isSelected(n)?this.setLastSelected(n):a?n==s&&this.setLastSelected(e.shiftKey?a:this.getDefaultSelected()):this.setLastSelected(null),this.getSelected().length||this.setLastSelected(null),this.getLastSelected()&&this.isSelected(this.getFirstSelected())||this.setFirstSelected(this.getLastSelected()),!0;}},function(){var e=t.selectTask;t.selectTask=function(i){if(!(i=at(i,this.config.root_id)))return!1;var a=t._multiselect,r=i;return a.isActive()?(a.select(i,null)&&a.setLastSelected(i),a.setFirstSelected(a.getLastSelected())):r=e.call(this,i),r;};var n=t.unselectTask;t.unselectTask=function(i){var a=t._multiselect,r=a.isActive();(i=i||a.getLastSelected())&&r&&(a.unselect(i,null),i==a.getLastSelected()&&a.setLastSelected(null),t.refreshTask(i),a.setFirstSelected(a.getLastSelected()));var s=i;return r||(s=n.call(this,i)),s;},t.toggleTaskSelection=function(i){var a=t._multiselect;i&&a.isActive()&&(a.toggle(i),a.setFirstSelected(a.getLastSelected()));},t.getSelectedTasks=function(){var i=t._multiselect;return i.isActive(),i.getSelected();},t.eachSelectedTask=function(i){return this._multiselect.forSelected(i);},t.isSelectedTask=function(i){return this._multiselect.isSelected(i);},t.getLastSelectedTask=function(){return this._multiselect.getLastSelected();},t.attachEvent(\"onGanttReady\",function(){var i=t.$data.tasksStore.isSelected;t.$data.tasksStore.isSelected=function(a){return t._multiselect.isActive()?t._multiselect.isSelected(a):i.call(this,a);};});}(),t.attachEvent(\"onTaskIdChange\",function(e,n){var i=t._multiselect;if(!i.isActive())return!0;t.isSelectedTask(e)&&(i.unselect(e,null),i.select(n,null));}),t.attachEvent(\"onAfterTaskDelete\",function(e,n){var i=t._multiselect;if(!i.isActive())return!0;i._selected[e]&&(i._selected[e]=!1,i.setLastSelected(i.getDefaultSelected())),i.forSelected(function(a){t.isTaskExists(a)||i.unselect(a,null);});}),t.attachEvent(\"onBeforeTaskMultiSelect\",function(e,n,i){const a=t._multiselect;if(n&&a.isActive()){let r=t.getSelectedId(),s=null;r&&(s=t.getTask(r));let o=t.getTask(e),l=!1;if(s&&s.$level!=o.$level&&(l=!0),t.config.multiselect_one_level&&l&&!i.ctrlKey&&!i.shiftKey)return!0;if(a._one_level)return a.isSameLevel(e);}return!0;}),t.attachEvent(\"onTaskClick\",function(e,n){return t._multiselect.doSelection(n)&&t.callEvent(\"onMultiSelect\",[n]),!0;});},export_api:function(t){return t.ext=t.ext||{},t.ext.export_api=t.ext.export_api||{_apiUrl:\"https://export.dhtmlx.com/gantt\",_preparePDFConfigRaw(e,n){let i=null;e.start&&e.end&&(i={start_date:t.config.start_date,end_date:t.config.end_date},t.config.start_date=t.date.str_to_date(t.config.date_format)(e.start),t.config.end_date=t.date.str_to_date(t.config.date_format)(e.end)),e=t.mixin(e,{name:\"gantt.\"+n,data:t.ext.export_api._serializeHtml()}),i&&(t.config.start_date=i.start_date,t.config.end_date=i.end_date);},_prepareConfigPDF:(e,n)=>(e=t.mixin(e||{},{name:\"gantt.\"+n,data:t.ext.export_api._serializeAll(),config:t.config}),t.ext.export_api._fixColumns(e.config.columns),e),_pdfExportRouter(e,n){e&&e.raw?t.ext.export_api._preparePDFConfigRaw(e,n):e=t.ext.export_api._prepareConfigPDF(e,n),e.version=t.version,t.ext.export_api._sendToExport(e,n);},exportToPDF(e){t.ext.export_api._pdfExportRouter(e,\"pdf\");},exportToPNG(e){t.ext.export_api._pdfExportRouter(e,\"png\");},exportToICal(e){e=t.mixin(e||{},{name:\"gantt.ical\",data:t.ext.export_api._serializePlain().data,version:t.version}),t.ext.export_api._sendToExport(e,\"ical\");},exportToExcel(e){let n,i,a,r;e=e||{};const s=t.config.smart_rendering;if(e.visual===\"base-colors\"&&(t.config.smart_rendering=!1),e.start||e.end){a=t.getState(),i=[t.config.start_date,t.config.end_date],r=t.getScrollState();const o=t.date.str_to_date(t.config.date_format);n=t.eachTask,e.start&&(t.config.start_date=o(e.start)),e.end&&(t.config.end_date=o(e.end)),t.render(),t.config.smart_rendering=s,t.eachTask=t.ext.export_api._eachTaskTimed(t.config.start_date,t.config.end_date);}else e.visual===\"base-colors\"&&(t.render(),t.config.smart_rendering=s);t._no_progress_colors=e.visual===\"base-colors\",(e=t.mixin(e,{name:\"gantt.xlsx\",title:\"Tasks\",data:t.ext.export_api._serializeTimeline(e).data,columns:t.ext.export_api._serializeGrid({rawDates:!0}),version:t.version})).visual&&(e.scales=t.ext.export_api._serializeScales(e)),t.ext.export_api._sendToExport(e,\"excel\"),(e.start||e.end)&&(t.config.start_date=a.min_date,t.config.end_date=a.max_date,t.eachTask=n,t.render(),t.scrollTo(r.x,r.y),t.config.start_date=i[0],t.config.end_date=i[1]);},exportToJSON(e){e=t.mixin(e||{},{name:\"gantt.json\",data:t.ext.export_api._serializeAll(),config:t.config,columns:t.ext.export_api._serializeGrid(),worktime:t.ext.export_api._getWorktimeSettings(),version:t.version}),t.ext.export_api._sendToExport(e,\"json\");},importFromExcel(e){try{const n=e.data;if(n instanceof File){const i=new FormData();i.append(\"file\",n),e.data=i;}}catch{}t.ext.export_api._sendImportAjaxExcel(e);},importFromMSProject(e){const n=e.data;try{if(n instanceof File){const i=new FormData();i.append(\"file\",n),e.data=i;}}catch{}t.ext.export_api._sendImportAjaxMSP(e);},importFromPrimaveraP6:e=>(e.type=\"primaveraP6-parse\",t.importFromMSProject(e)),exportToMSProject(e){(e=e||{}).skip_circular_links=e.skip_circular_links===void 0||!!e.skip_circular_links;const n=t.templates.xml_format,i=t.templates.format_date,a=t.config.xml_date,r=t.config.date_format,s=\"%d-%m-%Y %H:%i:%s\";t.config.xml_date=s,t.config.date_format=s,t.templates.xml_format=t.date.date_to_str(s),t.templates.format_date=t.date.date_to_str(s);const o=t.ext.export_api._serializeAll();t.ext.export_api._customProjectProperties(o,e),t.ext.export_api._customTaskProperties(o,e),e.skip_circular_links&&t.ext.export_api._clearRecLinks(o),e=t.ext.export_api._exportConfig(o,e),t.ext.export_api._sendToExport(e,e.type||\"msproject\"),t.config.xml_date=a,t.config.date_format=r,t.templates.xml_format=n,t.templates.format_date=i,t.config.$custom_data=null,t.config.custom=null;},exportToPrimaveraP6:e=>((e=e||{}).type=\"primaveraP6\",t.exportToMSProject(e)),_fixColumns(e){for(let n=0;n<e.length;n++)e[n].label=e[n].label||t.locale.labels[\"column_\"+e[n].name],typeof e[n].width==\"string\"&&(e[n].width=1*e[n].width);},_xdr(e,n,i){t.ajax.post(e,n,i);},_markColumns(e){const n=e.config.columns;if(n)for(let i=0;i<n.length;i++)n[i].template&&(n[i].$template=!0);},_sendImportAjaxExcel(e){const n=e.server||t.ext.export_api._apiUrl,i=e.store||0,a=e.data,r=e.callback;a.append(\"type\",\"excel-parse\"),a.append(\"data\",JSON.stringify({sheet:e.sheet||0})),i&&a.append(\"store\",i);const s=new XMLHttpRequest();s.onreadystatechange=function(o){s.readyState===4&&s.status===0&&r&&r(null);},s.onload=function(){let o=null;if(!(s.status>400))try{o=JSON.parse(s.responseText);}catch{}r&&r(o);},s.open(\"POST\",n,!0),s.setRequestHeader(\"X-Requested-With\",\"XMLHttpRequest\"),s.send(a);},_ajaxToExport(e,n,i){delete e.callback;const a=e.server||t.ext.export_api._apiUrl,r=\"type=\"+n+\"&store=1&data=\"+encodeURIComponent(JSON.stringify(e));t.ext.export_api._xdr(a,r,function(s){const o=s.xmlDoc||s;let l=null;if(!(o.status>400))try{l=JSON.parse(o.responseText);}catch{}i(l);});},_serializableGanttConfig(e){const n=t.mixin({},e);return n.columns&&(n.columns=n.columns.map(function(i){const a=t.mixin({},i);return delete a.editor,a;})),delete n.editor_types,n;},_sendToExport(e,n){const i=t.date.date_to_str(t.config.date_format||t.config.xml_date);if(e.skin||(e.skin=t.skin),e.config&&(e.config=t.copy(t.ext.export_api._serializableGanttConfig(e.config)),t.ext.export_api._markColumns(e,n),e.config.start_date&&e.config.end_date&&(e.config.start_date instanceof Date&&(e.config.start_date=i(e.config.start_date)),e.config.end_date instanceof Date&&(e.config.end_date=i(e.config.end_date)))),e.callback)return t.ext.export_api._ajaxToExport(e,n,e.callback);const a=t.ext.export_api._createHiddenForm();a.firstChild.action=e.server||t.ext.export_api._apiUrl,a.firstChild.childNodes[0].value=JSON.stringify(e),a.firstChild.childNodes[1].value=n,a.firstChild.submit();},_createHiddenForm(){if(!t.ext.export_api._hidden_export_form){const e=t.ext.export_api._hidden_export_form=document.createElement(\"div\");e.style.display=\"none\",e.innerHTML=\"<form method='POST' target='_blank'><textarea name='data' style='width:0px; height:0px;' readonly='true'></textarea><input type='hidden' name='type' value=''></form>\",document.body.appendChild(e);}return t.ext.export_api._hidden_export_form;},_copyObjectBase(e){const n={start_date:void 0,end_date:void 0,constraint_date:void 0,deadline:void 0};for(const a in e)a.charAt(0)!==\"$\"&&a!==\"baselines\"&&(n[a]=e[a]);const i=t.templates.xml_format||t.templates.format_date;return n.start_date=i(n.start_date),n.end_date&&(n.end_date=i(n.end_date)),n.constraint_date&&(n.constraint_date=i(n.constraint_date)),n.deadline&&(n.deadline=i(n.deadline)),n;},_color_box:null,_color_hash:{},_getStyles(e){if(t.ext.export_api._color_box||(t.ext.export_api._color_box=document.createElement(\"DIV\"),t.ext.export_api._color_box.style.cssText=\"position:absolute; display:none;\",document.body.appendChild(t.ext.export_api._color_box)),t.ext.export_api._color_hash[e])return t.ext.export_api._color_hash[e];t.ext.export_api._color_box.className=e;const n=t.ext.export_api._getColor(t.ext.export_api._color_box,\"color\"),i=t.ext.export_api._getColor(t.ext.export_api._color_box,\"backgroundColor\");return t.ext.export_api._color_hash[e]=n+\";\"+i;},_getMinutesWorktimeSettings(e){const n=[];return e.forEach(function(i){n.push(i.startMinute),n.push(i.endMinute);}),n;},_getWorktimeSettings(){const e={hours:[0,24],minutes:null,dates:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0}};let n;if(t.config.work_time){const i=t._working_time_helper;if(i&&i.get_calendar)n=i.get_calendar();else if(i)n={hours:i.hours,minutes:null,dates:i.dates};else if(t.config.worktimes&&t.config.worktimes.global){const a=t.config.worktimes.global;if(a.parsed){n={hours:null,minutes:t.ext.export_api._getMinutesWorktimeSettings(a.parsed.hours),dates:{}};for(const r in a.parsed.dates)Array.isArray(a.parsed.dates[r])?n.dates[r]=t.ext.export_api._getMinutesWorktimeSettings(a.parsed.dates[r]):n.dates[r]=a.parsed.dates[r];}else n={hours:a.hours,minutes:null,dates:a.dates};}else n=e;}else n=e;return n;},_eachTaskTimed:(e,n)=>function(i,a,r){a=a||t.config.root_id,r=r||t;const s=t.getChildren(a);if(s)for(let o=0;o<s.length;o++){const l=t._pull[s[o]];(!e||l.end_date>e)&&(!n||l.start_date<n)&&i.call(r,l),t.hasChild(l.id)&&t.eachTask(i,l.id,r);}},_originalCopyObject:t.json._copyObject,_copyObjectPlain(e){const n=t.templates.task_text(e.start_date,e.end_date,e),i=t.ext.export_api._copyObjectBase(e);return i.text=n||i.text,i;},_getColor(e,n){const i=e.currentStyle?e.currentStyle[n]:getComputedStyle(e,null)[n],a=i.replace(/\\s/g,\"\").match(/^rgba?\\((\\d+),(\\d+),(\\d+)/i);return(a&&a.length===4?(\"0\"+parseInt(a[1],10).toString(16)).slice(-2)+(\"0\"+parseInt(a[2],10).toString(16)).slice(-2)+(\"0\"+parseInt(a[3],10).toString(16)).slice(-2):i).replace(\"#\",\"\");},_copyObjectTable(e){const n=t.date.date_to_str(\"%Y-%m-%dT%H:%i:%s.000Z\"),i=t.ext.export_api._copyObjectColumns(e,t.ext.export_api._copyObjectPlain(e));i.start_date&&(i.start_date=n(e.start_date)),i.end_date&&(i.end_date=n(e.end_date));const a=t._day_index_by_date?t._day_index_by_date:t.columnIndexByDate;i.$start=a.call(t,e.start_date),i.$end=a.call(t,e.end_date);let r=0;const s=t.getScale().width;if(s.indexOf(0)>-1){let l=0;for(;l<i.$start;l++)s[l]||r++;for(i.$start-=r;l<i.$end;l++)s[l]||r++;i.$end-=r;}i.$level=e.$level,i.$type=e.$rendered_type;const o=t.templates;return i.$text=o.task_text(e.start,e.end_date,e),i.$left=o.leftside_text?o.leftside_text(e.start,e.end_date,e):\"\",i.$right=o.rightside_text?o.rightside_text(e.start,e.end_date,e):\"\",i;},_copyObjectColors(e){const n=t.ext.export_api._copyObjectTable(e),i=t.getTaskNode(e.id);if(i&&i.firstChild){let a=t.ext.export_api._getColor(t._no_progress_colors?i:i.firstChild,\"backgroundColor\");a===\"363636\"&&(a=t.ext.export_api._getColor(i,\"backgroundColor\")),n.$color=a;}else e.color&&(n.$color=e.color);return n;},_copyObjectColumns(e,n){for(let i=0;i<t.config.columns.length;i++){const a=t.config.columns[i].template;if(a){let r=a(e);r instanceof Date&&(r=t.templates.date_grid(r,e)),n[\"_\"+i]=r;}}return n;},_copyObjectAll(e){const n=t.ext.export_api._copyObjectBase(e),i=[\"leftside_text\",\"rightside_text\",\"task_text\",\"progress_text\",\"task_class\"];for(let a=0;a<i.length;a++){const r=t.templates[i[a]];r&&(n[\"$\"+a]=r(e.start_date,e.end_date,e));}return t.ext.export_api._copyObjectColumns(e,n),n.open=e.$open,n;},_serializeHtml(){const e=t.config.smart_scales,n=t.config.smart_rendering;(e||n)&&(t.config.smart_rendering=!1,t.config.smart_scales=!1,t.render());const i=t.$container.parentNode.innerHTML;return(e||n)&&(t.config.smart_scales=e,t.config.smart_rendering=n,t.render()),i;},_serializeAll(){t.json._copyObject=t.ext.export_api._copyObjectAll;const e=t.ext.export_api._exportSerialize();return t.json._copyObject=t.ext.export_api._originalCopyObject,e;},_serializePlain(){const e=t.templates.xml_format,n=t.templates.format_date;t.templates.xml_format=t.date.date_to_str(\"%Y%m%dT%H%i%s\",!0),t.templates.format_date=t.date.date_to_str(\"%Y%m%dT%H%i%s\",!0),t.json._copyObject=t.ext.export_api._copyObjectPlain;const i=t.ext.export_api._exportSerialize();return t.templates.xml_format=e,t.templates.format_date=n,t.json._copyObject=t.ext.export_api._originalCopyObject,delete i.links,i;},_getRaw(){if(t._scale_helpers){const e=t._get_scales(),n=t.config.min_column_width,i=t._get_resize_options().x?Math.max(t.config.autosize_min_width,0):t.config.$task.offsetWidth,a=t.config.config.scale_height-1;return t._scale_helpers.prepareConfigs(e,n,i,a);}{const e=t.$ui.getView(\"timeline\");if(e){let n=e.$config.width;t.config.autosize!==\"x\"&&t.config.autosize!==\"xy\"||(n=Math.max(t.config.autosize_min_width,0));const i=t.getState(),a=e._getScales(),r=t.config.min_column_width,s=t.config.scale_height-1,o=t.config.rtl;return e.$scaleHelper.prepareConfigs(a,r,n,s,i.min_date,i.max_date,o);}}},_serializeTimeline(e){t.json._copyObject=e.visual?t.ext.export_api._copyObjectColors:t.ext.export_api._copyObjectTable;const n=t.ext.export_api._exportSerialize();if(t.json._copyObject=t.ext.export_api._originalCopyObject,delete n.links,e.cellColors){const i=t.templates.timeline_cell_class||t.templates.task_cell_class;if(i){const a=t.ext.export_api._getRaw();let r=a[0].trace_x;for(let s=1;s<a.length;s++)a[s].trace_x.length>r.length&&(r=a[s].trace_x);for(let s=0;s<n.data.length;s++){n.data[s].styles=[];const o=t.getTask(n.data[s].id);for(let l=0;l<r.length;l++){const c=i(o,r[l]);c&&n.data[s].styles.push({index:l,styles:t.ext.export_api._getStyles(c)});}}}}return n;},_serializeScales(e){const n=[],i=t.ext.export_api._getRaw();let a=1/0,r=0;for(let s=0;s<i.length;s++)a=Math.min(a,i[s].col_width);for(let s=0;s<i.length;s++){let o=0,l=0;const c=[];n.push(c);const d=i[s];r=Math.max(r,d.trace_x.length);const u=d.format||d.template||(d.date?t.date.date_to_str(d.date):t.config.date_scale);for(let h=0;h<d.trace_x.length;h++){const _=d.trace_x[h];l=o+Math.round(d.width[h]/a);const p={text:u(_),start:o,end:l,styles:\"\"};if(e.cellColors){const y=d.css||t.templates.scaleCell_class;if(y){const k=y(_);k&&(p.styles=t.ext.export_api._getStyles(k));}}c.push(p),o=l;}}return{width:r,height:n.length,data:n};},_serializeGrid(e){t.exportMode=!0;const n=[],i=t.config.columns;let a=0;for(let r=0;r<i.length;r++)i[r].name!==\"add\"&&i[r].name!==\"buttons\"&&(n[a]={id:i[r].template?\"_\"+r:i[r].name,header:i[r].label||t.locale.labels[\"column_\"+i[r].name],width:i[r].width?Math.floor(i[r].width/4):\"\",tree:i[r].tree||!1},i[r].name===\"duration\"&&(n[a].type=\"number\"),i[r].name!==\"start_date\"&&i[r].name!==\"end_date\"||(n[a].type=\"date\",e&&e.rawDates&&(n[a].id=i[r].name)),a++);return t.exportMode=!1,n;},_exportSerialize(){t.exportMode=!0;const e=t.templates.xml_format,n=t.templates.format_date;t.templates.xml_format=t.templates.format_date=t.date.date_to_str(t.config.date_format||t.config.xml_date);const i=t.serialize();return t.templates.xml_format=e,t.templates.format_date=n,t.exportMode=!1,i;},_setLevel(e){for(let n=0;n<e.length;n++){e[n].parent==0&&(e[n]._lvl=1);for(let i=n+1;i<e.length;i++)e[n].id==e[i].parent&&(e[i]._lvl=e[n]._lvl+1);}},_clearLevel(e){for(let n=0;n<e.length;n++)delete e[n]._lvl;},_clearRecLinks(e){t.ext.export_api._setLevel(e.data);const n={};for(let r=0;r<e.data.length;r++)n[e.data[r].id]=e.data[r];const i={};for(let r=0;r<e.links.length;r++){const s=e.links[r];t.isTaskExists(s.source)&&t.isTaskExists(s.target)&&n[s.source]&&n[s.target]&&(i[s.id]=s);}for(const r in i)t.ext.export_api._makeLinksSameLevel(i[r],n);const a={};for(const r in n)t.ext.export_api._clearCircDependencies(n[r],i,n,{},a,null);Object.keys(i)&&t.ext.export_api._clearLinksSameLevel(i,n);for(let r=0;r<e.links.length;r++)i[e.links[r].id]||(e.links.splice(r,1),r--);t.ext.export_api._clearLevel(e.data);},_clearCircDependencies(e,n,i,a,r,s){const o=e.$_source;if(!o)return;a[e.id]&&t.ext.export_api._onCircDependencyFind(s,n,a,r),a[e.id]=!0;const l={};for(let c=0;c<o.length;c++){if(r[o[c]])continue;const d=n[o[c]],u=i[d._target];l[u.id]&&t.ext.export_api._onCircDependencyFind(d,n,a,r),l[u.id]=!0,t.ext.export_api._clearCircDependencies(u,n,i,a,r,d);}a[e.id]=!1;},_onCircDependencyFind(e,n,i,a){e&&(t.callEvent(\"onExportCircularDependency\",[e.id,e])&&delete n[e.id],delete i[e._source],delete i[e._target],a[e.id]=!0);},_makeLinksSameLevel(e,n){let i,a;const r={target:n[e.target],source:n[e.source]};if(r.target._lvl!=r.source._lvl){r.target._lvl<r.source._lvl?(i=\"source\",a=r.target._lvl):(i=\"target\",a=r.source._lvl);do{const l=n[r[i].parent];if(!l)break;r[i]=l;}while(r[i]._lvl<a);let s=n[r.source.parent],o=n[r.target.parent];for(;s&&o&&s.id!=o.id;)r.source=s,r.target=o,s=n[r.source.parent],o=n[r.target.parent];}e._target=r.target.id,e._source=r.source.id,r.target.$_target||(r.target.$_target=[]),r.target.$_target.push(e.id),r.source.$_source||(r.source.$_source=[]),r.source.$_source.push(e.id);},_clearLinksSameLevel(e,n){for(const i in e)delete e[i]._target,delete e[i]._source;for(const i in n)delete n[i].$_source,delete n[i].$_target;},_customProjectProperties(e,n){if(n&&n.project){for(const i in n.project)t.config.$custom_data||(t.config.$custom_data={}),t.config.$custom_data[i]=typeof n.project[i]==\"function\"?n.project[i](t.config):n.project[i];delete n.project;}},_customTaskProperties(e,n){n&&n.tasks&&(e.data.forEach(function(i){for(const a in n.tasks)i.$custom_data||(i.$custom_data={}),i.$custom_data[a]=typeof n.tasks[a]==\"function\"?n.tasks[a](i,t.config):n.tasks[a];}),delete n.tasks);},_exportConfig(e,n){const i=n.name||\"gantt.xml\";delete n.name,t.config.custom=n;const a=t.ext.export_api._getWorktimeSettings(),r=t.getSubtaskDates();if(r.start_date&&r.end_date){const l=t.templates.format_date||t.templates.xml_format;t.config.start_end={start_date:l(r.start_date),end_date:l(r.end_date)};}const s=n.auto_scheduling!==void 0&&!!n.auto_scheduling,o={callback:n.callback||null,config:t.config,data:e,manual:s,name:i,worktime:a};for(const l in n)o[l]=n[l];return o;},_sendImportAjaxMSP(e){const n=e.server||t.ext.export_api._apiUrl,i=e.store||0,a=e.data,r=e.callback,s={durationUnit:e.durationUnit||void 0,projectProperties:e.projectProperties||void 0,taskProperties:e.taskProperties||void 0};a.append(\"type\",e.type||\"msproject-parse\"),a.append(\"data\",JSON.stringify(s)),i&&a.append(\"store\",i);const o=new XMLHttpRequest();o.onreadystatechange=function(l){o.readyState===4&&o.status===0&&r&&r(null);},o.onload=function(){let l=null;if(!(o.status>400))try{l=JSON.parse(o.responseText);}catch{}r&&r(l);},o.open(\"POST\",n,!0),o.setRequestHeader(\"X-Requested-With\",\"XMLHttpRequest\"),o.send(a);}},t.exportToPDF=t.ext.export_api.exportToPDF,t.exportToPNG=t.ext.export_api.exportToPNG,t.exportToICal=t.ext.export_api.exportToICal,t.exportToExcel=t.ext.export_api.exportToExcel,t.exportToJSON=t.ext.export_api.exportToJSON,t.importFromExcel=t.ext.export_api.importFromExcel,t.importFromMSProject=t.ext.export_api.importFromMSProject,t.exportToMSProject=t.ext.export_api.exportToMSProject,t.importFromPrimaveraP6=t.ext.export_api.importFromPrimaveraP6,t.exportToPrimaveraP6=t.ext.export_api.exportToPrimaveraP6,t.ext.export_api;}},Un={KEY_CODES:{UP:38,DOWN:40,LEFT:37,RIGHT:39,SPACE:32,ENTER:13,DELETE:46,ESC:27,TAB:9}};class qn{constructor(e){this.addExtension=(n,i)=>{this._extensions[n]=i;},this.getExtension=n=>this._extensions[n],this._extensions={};for(const n in e)this._extensions[n]=e[n];}}var ut=typeof window<\"u\";const mt={isIE:ut&&(navigator.userAgent.indexOf(\"MSIE\")>=0||navigator.userAgent.indexOf(\"Trident\")>=0),isOpera:ut&&(navigator.userAgent.indexOf(\"Opera\")>=0||navigator.userAgent.indexOf(\"OPR\")>=0),isChrome:ut&&navigator.userAgent.indexOf(\"Chrome\")>=0,isSafari:ut&&(navigator.userAgent.indexOf(\"Safari\")>=0||navigator.userAgent.indexOf(\"Konqueror\")>=0),isFF:ut&&navigator.userAgent.indexOf(\"Firefox\")>=0,isIPad:ut&&navigator.userAgent.search(/iPad/gi)>=0,isEdge:ut&&navigator.userAgent.indexOf(\"Edge\")!=-1,isNode:!ut||typeof navigator>\"u\"||!1,isSalesforce:ut&&(!!Z.Sfdc||!!Z.$A||Z.Aura)};function Ne(t){if(typeof t==\"string\"||typeof t==\"number\")return t;let e=\"\";for(const n in t){let i=\"\";t.hasOwnProperty(n)&&(i=typeof t[n]==\"string\"?encodeURIComponent(t[n]):typeof t[n]==\"number\"?String(t[n]):encodeURIComponent(JSON.stringify(t[n])),i=n+\"=\"+i,e.length&&(i=\"&\"+i),e+=i);}return e;}function xt(t,e){var n={method:t};if(e.length===0)throw new Error(\"Arguments list of query is wrong.\");if(e.length===1)return typeof e[0]==\"string\"?(n.url=e[0],n.async=!0):(n.url=e[0].url,n.async=e[0].async||!0,n.callback=e[0].callback,n.headers=e[0].headers),e[0].data?typeof e[0].data!=\"string\"?n.data=Ne(e[0].data):n.data=e[0].data:n.data=\"\",n;switch(n.url=e[0],t){case\"GET\":case\"DELETE\":n.callback=e[1],n.headers=e[2];break;case\"POST\":case\"PUT\":e[1]?typeof e[1]!=\"string\"?n.data=Ne(e[1]):n.data=e[1]:n.data=\"\",n.callback=e[2],n.headers=e[3];}return n;}const Le={date_to_str:(t,e,n)=>{t=t.replace(/%[a-zA-Z]/g,a=>{switch(a){case\"%d\":return`\"+to_fixed(date.get${e?\"UTC\":\"\"}Date())+\"`;case\"%m\":return`\"+to_fixed((date.get${e?\"UTC\":\"\"}Month()+1))+\"`;case\"%j\":return`\"+date.get${e?\"UTC\":\"\"}Date()+\"`;case\"%n\":return`\"+(date.get${e?\"UTC\":\"\"}Month()+1)+\"`;case\"%y\":return`\"+to_fixed(date.get${e?\"UTC\":\"\"}FullYear()%100)+\"`;case\"%Y\":return`\"+date.get${e?\"UTC\":\"\"}FullYear()+\"`;case\"%D\":return`\"+locale.date.day_short[date.get${e?\"UTC\":\"\"}Day()]+\"`;case\"%l\":return`\"+locale.date.day_full[date.get${e?\"UTC\":\"\"}Day()]+\"`;case\"%M\":return`\"+locale.date.month_short[date.get${e?\"UTC\":\"\"}Month()]+\"`;case\"%F\":return`\"+locale.date.month_full[date.get${e?\"UTC\":\"\"}Month()]+\"`;case\"%h\":return`\"+to_fixed((date.get${e?\"UTC\":\"\"}Hours()+11)%12+1)+\"`;case\"%g\":return`\"+((date.get${e?\"UTC\":\"\"}Hours()+11)%12+1)+\"`;case\"%G\":return`\"+date.get${e?\"UTC\":\"\"}Hours()+\"`;case\"%H\":return`\"+to_fixed(date.get${e?\"UTC\":\"\"}Hours())+\"`;case\"%i\":return`\"+to_fixed(date.get${e?\"UTC\":\"\"}Minutes())+\"`;case\"%a\":return`\"+(date.get${e?\"UTC\":\"\"}Hours()>11?\"pm\":\"am\")+\"`;case\"%A\":return`\"+(date.get${e?\"UTC\":\"\"}Hours()>11?\"PM\":\"AM\")+\"`;case\"%s\":return`\"+to_fixed(date.get${e?\"UTC\":\"\"}Seconds())+\"`;case\"%W\":return'\"+to_fixed(getISOWeek(date))+\"';case\"%w\":return'\"+to_fixed(getWeek(date))+\"';default:return a;}});const i=new Function(\"date\",\"to_fixed\",\"locale\",\"getISOWeek\",\"getWeek\",`return \"${t}\";`);return a=>i(a,n.date.to_fixed,n.locale,n.date.getISOWeek,n.date.getWeek);},str_to_date:(t,e,n)=>{let i=\"var temp=date.match(/[a-zA-Z]+|[0-9]+/g);\";const a=t.match(/%[a-zA-Z]/g);for(let o=0;o<a.length;o++)switch(a[o]){case\"%j\":case\"%d\":i+=`set[2]=temp[${o}]||1;`;break;case\"%n\":case\"%m\":i+=`set[1]=(temp[${o}]||1)-1;`;break;case\"%y\":i+=`set[0]=temp[${o}]*1+(temp[${o}]>50?1900:2000);`;break;case\"%g\":case\"%G\":case\"%h\":case\"%H\":i+=`set[3]=temp[${o}]||0;`;break;case\"%i\":i+=`set[4]=temp[${o}]||0;`;break;case\"%Y\":i+=`set[0]=temp[${o}]||0;`;break;case\"%a\":case\"%A\":i+=`set[3]=set[3]%12+((temp[${o}]||'').toLowerCase()=='am'?0:12);`;break;case\"%s\":i+=`set[5]=temp[${o}]||0;`;break;case\"%M\":i+=`set[1]=locale.date.month_short_hash[temp[${o}]]||0;`;break;case\"%F\":i+=`set[1]=locale.date.month_full_hash[temp[${o}]]||0;`;}let r=\"set[0],set[1],set[2],set[3],set[4],set[5]\";e&&(r=` Date.UTC(${r})`);const s=new Function(\"date\",\"locale\",`var set=[0,0,1,0,0,0]; ${i} return new Date(${r});`);return o=>s(o,n.locale);}},Pe={date_to_str:(t,e,n)=>i=>t.replace(/%[a-zA-Z]/g,a=>{switch(a){case\"%d\":return e?n.date.to_fixed(i.getUTCDate()):n.date.to_fixed(i.getDate());case\"%m\":return e?n.date.to_fixed(i.getUTCMonth()+1):n.date.to_fixed(i.getMonth()+1);case\"%j\":return e?i.getUTCDate():i.getDate();case\"%n\":return e?i.getUTCMonth()+1:i.getMonth()+1;case\"%y\":return e?n.date.to_fixed(i.getUTCFullYear()%100):n.date.to_fixed(i.getFullYear()%100);case\"%Y\":return e?i.getUTCFullYear():i.getFullYear();case\"%D\":return e?n.locale.date.day_short[i.getUTCDay()]:n.locale.date.day_short[i.getDay()];case\"%l\":return e?n.locale.date.day_full[i.getUTCDay()]:n.locale.date.day_full[i.getDay()];case\"%M\":return e?n.locale.date.month_short[i.getUTCMonth()]:n.locale.date.month_short[i.getMonth()];case\"%F\":return e?n.locale.date.month_full[i.getUTCMonth()]:n.locale.date.month_full[i.getMonth()];case\"%h\":return e?n.date.to_fixed((i.getUTCHours()+11)%12+1):n.date.to_fixed((i.getHours()+11)%12+1);case\"%g\":return e?(i.getUTCHours()+11)%12+1:(i.getHours()+11)%12+1;case\"%G\":return e?i.getUTCHours():i.getHours();case\"%H\":return e?n.date.to_fixed(i.getUTCHours()):n.date.to_fixed(i.getHours());case\"%i\":return e?n.date.to_fixed(i.getUTCMinutes()):n.date.to_fixed(i.getMinutes());case\"%a\":return e?i.getUTCHours()>11?\"pm\":\"am\":i.getHours()>11?\"pm\":\"am\";case\"%A\":return e?i.getUTCHours()>11?\"PM\":\"AM\":i.getHours()>11?\"PM\":\"AM\";case\"%s\":return e?n.date.to_fixed(i.getUTCSeconds()):n.date.to_fixed(i.getSeconds());case\"%W\":return e?n.date.to_fixed(n.date.getUTCISOWeek(i)):n.date.to_fixed(n.date.getISOWeek(i));default:return a;}}),str_to_date:(t,e,n)=>i=>{const a=[0,0,1,0,0,0],r=i.match(/[a-zA-Z]+|[0-9]+/g),s=t.match(/%[a-zA-Z]/g);for(let o=0;o<s.length;o++)switch(s[o]){case\"%j\":case\"%d\":a[2]=r[o]||1;break;case\"%n\":case\"%m\":a[1]=(r[o]||1)-1;break;case\"%y\":a[0]=1*r[o]+(r[o]>50?1900:2e3);break;case\"%g\":case\"%G\":case\"%h\":case\"%H\":a[3]=r[o]||0;break;case\"%i\":a[4]=r[o]||0;break;case\"%Y\":a[0]=r[o]||0;break;case\"%a\":case\"%A\":a[3]=a[3]%12+((r[o]||\"\").toLowerCase()===\"am\"?0:12);break;case\"%s\":a[5]=r[o]||0;break;case\"%M\":a[1]=n.locale.date.month_short_hash[r[o]]||0;break;case\"%F\":a[1]=n.locale.date.month_full_hash[r[o]]||0;}return e?new Date(Date.UTC(a[0],a[1],a[2],a[3],a[4],a[5])):new Date(a[0],a[1],a[2],a[3],a[4],a[5]);}};function Gn(t){var e=null;function n(){var a=!1;return t.config.csp===\"auto\"?(e===null&&function(){try{new Function(\"canUseCsp = false;\");}catch{e=!0;}}(),a=e):a=t.config.csp,a;}var i={init:function(){for(var a=t.locale,r=a.date.month_short,s=a.date.month_short_hash={},o=0;o<r.length;o++)s[r[o]]=o;for(r=a.date.month_full,s=a.date.month_full_hash={},o=0;o<r.length;o++)s[r[o]]=o;},date_part:function(a){var r=new Date(a);return a.setHours(0),this.hour_start(a),a.getHours()&&(a.getDate()<r.getDate()||a.getMonth()<r.getMonth()||a.getFullYear()<r.getFullYear())&&a.setTime(a.getTime()+36e5*(24-a.getHours())),a;},time_part:function(a){return(a.valueOf()/1e3-60*a.getTimezoneOffset())%86400;},week_start:function(a){var r=a.getDay();return t.config.start_on_monday&&(r===0?r=6:r--),this.date_part(this.add(a,-1*r,\"day\"));},month_start:function(a){return a.setDate(1),this.date_part(a);},quarter_start:function(a){this.month_start(a);var r,s=a.getMonth();return r=s>=9?9:s>=6?6:s>=3?3:0,a.setMonth(r),a;},year_start:function(a){return a.setMonth(0),this.month_start(a);},day_start:function(a){return this.date_part(a);},hour_start:function(a){return a.getMinutes()&&a.setMinutes(0),this.minute_start(a),a;},minute_start:function(a){return a.getSeconds()&&a.setSeconds(0),a.getMilliseconds()&&a.setMilliseconds(0),a;},_add_days:function(a,r,s){a.setDate(a.getDate()+r);var o=r>=0,l=!s.getHours()&&a.getHours(),c=a.getDate()<=s.getDate()||a.getMonth()<s.getMonth()||a.getFullYear()<s.getFullYear();return o&&l&&c&&a.setTime(a.getTime()+36e5*(24-a.getHours())),r>1&&l&&a.setHours(0),a;},add:function(a,r,s){var o=new Date(a.valueOf());switch(s){case\"day\":o=this._add_days(o,r,a);break;case\"week\":o=this._add_days(o,7*r,a);break;case\"month\":o.setMonth(o.getMonth()+r);break;case\"year\":o.setYear(o.getFullYear()+r);break;case\"hour\":o.setTime(o.getTime()+60*r*60*1e3);break;case\"minute\":o.setTime(o.getTime()+60*r*1e3);break;default:return this[\"add_\"+s](a,r,s);}return o;},add_quarter:function(a,r){return this.add(a,3*r,\"month\");},to_fixed:function(a){return a<10?\"0\"+a:a;},copy:function(a){return new Date(a.valueOf());},date_to_str:function(a,r){var s=Le;return n()&&(s=Pe),s.date_to_str(a,r,t);},str_to_date:function(a,r){var s=Le;return n()&&(s=Pe),s.str_to_date(a,r,t);},getISOWeek:function(a){return t.date._getWeekNumber(a,!0);},_getWeekNumber:function(a,r){if(!a)return!1;var s=a.getDay();r&&s===0&&(s=7);var o=new Date(a.valueOf());o.setDate(a.getDate()+(4-s));var l=o.getFullYear(),c=Math.round((o.getTime()-new Date(l,0,1).getTime())/864e5);return 1+Math.floor(c/7);},getWeek:function(a){return t.date._getWeekNumber(a,t.config.start_on_monday);},getUTCISOWeek:function(a){return t.date.getISOWeek(a);},convert_to_utc:function(a){return new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds());},parseDate:function(a,r){return a&&!a.getFullYear&&(typeof r!=\"function\"&&(r=typeof r==\"string\"?r===\"parse_date\"||r===\"xml_date\"?t.defined(t.templates.xml_date)?t.templates.xml_date:t.templates.parse_date:t.defined(t.templates[r])?t.templates[r]:t.date.str_to_date(r):t.defined(t.templates.xml_date)?t.templates.xml_date:t.templates.parse_date),a=a?r(a):null),a;}};return i;}class Yn{constructor(e){const{url:n,token:i}=e;this._url=n,this._token=i,this._mode=1,this._seed=1,this._queue=[],this.data={},this.api={},this._events={};}headers(){return{Accept:\"application/json\",\"Content-Type\":\"application/json\",\"Remote-Token\":this._token};}fetch(e,n){const i={credentials:\"include\",headers:this.headers()};return n&&(i.method=\"POST\",i.body=n),fetch(e,i).then(a=>a.json());}load(e){return e&&(this._url=e),this.fetch(this._url).then(n=>this.parse(n));}parse(e){const{key:n,websocket:i}=e;n&&(this._token=e.key);for(const a in e.data)this.data[a]=e.data[a];for(const a in e.api){const r=this.api[a]={},s=e.api[a];for(const o in s)r[o]=this._wrapper(a+\".\"+o);}return i&&this.connect(),this;}connect(){const e=this._socket;e&&(this._socket=null,e.onclose=function(){},e.close()),this._mode=2,this._socket=function(n,i,a,r){let s=i;s[0]===\"/\"&&(s=document.location.protocol+\"//\"+document.location.host+i),s=s.replace(/^http(s|):/,\"ws$1:\");const o=s.indexOf(\"?\")!=-1?\"&\":\"?\";s=`${s}${o}token=${a}&ws=1`;const l=new WebSocket(s);return l.onclose=()=>setTimeout(()=>n.connect(),2e3),l.onmessage=c=>{const d=JSON.parse(c.data);switch(d.action){case\"result\":n.result(d.body,[]);break;case\"event\":n.fire(d.body.name,d.body.value);break;case\"start\":r();break;default:n.onError(d.data);}},l;}(this,this._url,this._token,()=>(this._mode=3,this._send(),this._resubscribe(),this));}_wrapper(e){return function(){const n=[].slice.call(arguments);let i=null;const a=new Promise((r,s)=>{i={data:{id:this._uid(),name:e,args:n},status:1,resolve:r,reject:s},this._queue.push(i);});return this.onCall(i,a),this._mode===3?this._send(i):setTimeout(()=>this._send(),1),a;}.bind(this);}_uid(){return(this._seed++).toString();}_send(e){if(this._mode==2)return void setTimeout(()=>this._send(),100);const n=e?[e]:this._queue.filter(a=>a.status===1);if(!n.length)return;const i=n.map(a=>(a.status=2,a.data));this._mode!==3?this.fetch(this._url,JSON.stringify(i)).catch(a=>this.onError(a)).then(a=>this.result(a,i)):this._socket.send(JSON.stringify({action:\"call\",body:i}));}result(e,n){const i={};if(e)for(let a=0;a<e.length;a++)i[e[a].id]=e[a];else for(let a=0;a<n.length;a++)i[n[a].id]={id:n[a].id,error:\"Network Error\",data:null};for(let a=this._queue.length-1;a>=0;a--){const r=this._queue[a],s=i[r.data.id];s&&(this.onResponse(r,s),s.error?r.reject(s.error):r.resolve(s.data),this._queue.splice(a,1));}}on(e,n){const i=this._uid();let a=this._events[e];const r=!!a;return r||(a=this._events[e]=[]),a.push({id:i,handler:n}),r||this._mode!=3||this._socket.send(JSON.stringify({action:\"subscribe\",name:e})),{name:e,id:i};}_resubscribe(){if(this._mode==3)for(const e in this._events)this._socket.send(JSON.stringify({action:\"subscribe\",name:e}));}detach(e){if(!e){if(this._mode==3)for(const r in this._events)this._socket.send(JSON.stringify({action:\"unsubscribe\",key:r}));return void(this._events={});}const{id:n,name:i}=e,a=this._events[i];if(a){const r=a.filter(s=>s.id!=n);r.length?this._events[i]=r:(delete this._events[i],this._mode==3&&this._socket.send(JSON.stringify({action:\"unsubscribe\",name:i})));}}fire(e,n){const i=this._events[e];if(i)for(let a=0;a<i.length;a++)i[a].handler(n);}onError(e){return null;}onCall(e,n){}onResponse(e,n){}}const Jn=function(t,e){const n=new Yn({url:t,token:e});n.fetch=function(i,a){const r={headers:this.headers()};return a&&(r.method=\"POST\",r.body=a),fetch(i,r).then(s=>s.json());},this._ready=n.load().then(i=>this._remote=i),this.ready=function(){return this._ready;},this.on=function(i,a){this.ready().then(r=>{if(typeof i==\"string\")r.on(i,a);else for(const s in i)r.on(s,i[s]);});};};function dn(t,e){if(!e)return!0;if(t._on_timeout)return!1;var n=Math.ceil(1e3/e);return n<2||(setTimeout(function(){delete t._on_timeout;},n),t._on_timeout=!0),!0;}var Kn=function(){var t={};return{getState:function(e){if(t[e])return t[e].method();var n={};for(var i in t)t[i].internal||P(n,t[i].method(),!0);return n;},registerProvider:function(e,n,i){t[e]={method:n,internal:i};},unregisterProvider:function(e){delete t[e];}};};const Xn=Promise;var et={$create:function(t){return P(t||[],this);},$removeAt:function(t,e){t>=0&&this.splice(t,e||1);},$remove:function(t){this.$removeAt(this.$find(t));},$insertAt:function(t,e){if(e||e===0){var n=this.splice(e,this.length-e);this[e]=t,this.push.apply(this,n);}else this.push(t);},$find:function(t){for(var e=0;e<this.length;e++)if(t==this[e])return e;return-1;},$each:function(t,e){for(var n=0;n<this.length;n++)t.call(e||this,this[n]);},$map:function(t,e){for(var n=0;n<this.length;n++)this[n]=t.call(e||this,this[n]);return this;},$filter:function(t,e){for(var n=0;n<this.length;n++)t.call(e||this,this[n])||(this.splice(n,1),n--);return this;}};function Rt(t,e,n,i){return(i=e?e.config:i)&&i.placeholder_task&&n.exists(t)?n.getItem(t).type===i.types.placeholder:!1;}var it=function(t){return this.pull={},this.$initItem=t.initItem,this.visibleOrder=et.$create(),this.fullOrder=et.$create(),this._skip_refresh=!1,this._filterRule=null,this._searchVisibleOrder={},this._indexRangeCache={},this._getItemsCache=null,this.$config=t,ot(this),this._attachDataChange(function(){return this._indexRangeCache={},this._getItemsCache=null,!0;}),this;};it.prototype={_attachDataChange:function(t){this.attachEvent(\"onClearAll\",t),this.attachEvent(\"onBeforeParse\",t),this.attachEvent(\"onBeforeUpdate\",t),this.attachEvent(\"onBeforeDelete\",t),this.attachEvent(\"onBeforeAdd\",t),this.attachEvent(\"onParse\",t),this.attachEvent(\"onBeforeFilter\",t);},_parseInner:function(t){for(var e=null,n=[],i=0,a=t.length;i<a;i++)e=t[i],this.$initItem&&(this.$config.copyOnParse()&&(e=q(e)),e=this.$initItem(e)),this.callEvent(\"onItemLoading\",[e])&&(this.pull.hasOwnProperty(e.id)||this.fullOrder.push(e.id),n.push(e),this.pull[e.id]=e);return n;},parse:function(t){this.isSilent()||this.callEvent(\"onBeforeParse\",[t]);var e=this._parseInner(t);this.isSilent()||(this.refresh(),this.callEvent(\"onParse\",[e]));},getItem:function(t){return this.pull[t];},_updateOrder:function(t){t.call(this.visibleOrder),t.call(this.fullOrder);},updateItem:function(t,e){if(W(e)||(e=this.getItem(t)),!this.isSilent()&&this.callEvent(\"onBeforeUpdate\",[e.id,e])===!1)return!1;P(this.pull[t],e,!0),this.isSilent()||(this.callEvent(\"onAfterUpdate\",[e.id,e]),this.callEvent(\"onStoreUpdated\",[e.id,e,\"update\"]));},_removeItemInner:function(t){this._updateOrder(function(){this.$remove(t);}),delete this.pull[t];},removeItem:function(t){var e=this.getItem(t);if(!this.isSilent()&&this.callEvent(\"onBeforeDelete\",[e.id,e])===!1)return!1;this.callEvent(\"onAfterDeleteConfirmed\",[e.id,e]),this._removeItemInner(t),this.isSilent()&&this.callEvent(\"onAfterSilentDelete\",[e.id,e]),this.isSilent()||(this.filter(),this.callEvent(\"onAfterDelete\",[e.id,e]),this.callEvent(\"onStoreUpdated\",[e.id,e,\"delete\"]));},_addItemInner:function(t,e){if(this.exists(t.id))this.silent(function(){this.updateItem(t.id,t);});else{var n=this.visibleOrder,i=n.length;(!W(e)||e<0)&&(e=i),e>i&&(e=Math.min(n.length,e));}this.pull[t.id]=t,this._updateOrder(function(){this.$find(t.id)===-1&&this.$insertAt(t.id,e);}),this.filter();},isVisible:function(t){return this.visibleOrder.$find(t)>-1;},getVisibleItems:function(){return this.getIndexRange();},addItem:function(t,e){return W(t.id)||(t.id=st()),this.$initItem&&(t=this.$initItem(t)),!(!this.isSilent()&&this.callEvent(\"onBeforeAdd\",[t.id,t])===!1)&&(this._addItemInner(t,e),this.isSilent()||(this.callEvent(\"onAfterAdd\",[t.id,t]),this.callEvent(\"onStoreUpdated\",[t.id,t,\"add\"])),t.id);},_changeIdInner:function(t,e){this.pull[t]&&(this.pull[e]=this.pull[t]);var n=this._searchVisibleOrder[t];this.pull[e].id=e,this._updateOrder(function(){this[this.$find(t)]=e;}),this._searchVisibleOrder[e]=n,delete this._searchVisibleOrder[t],delete this.pull[t];},changeId:function(t,e){this._changeIdInner(t,e),this.callEvent(\"onIdChange\",[t,e]);},exists:function(t){return!!this.pull[t];},_moveInner:function(t,e){var n=this.getIdByIndex(t);this._updateOrder(function(){this.$removeAt(t),this.$insertAt(n,Math.min(this.length,e));});},move:function(t,e){var n=this.getIdByIndex(t),i=this.getItem(n);this._moveInner(t,e),this.isSilent()||this.callEvent(\"onStoreUpdated\",[i.id,i,\"move\"]);},clearAll:function(){this.$destroyed||(this.silent(function(){this.unselect();}),this.pull={},this.visibleOrder=et.$create(),this.fullOrder=et.$create(),this.isSilent()||(this.callEvent(\"onClearAll\",[]),this.refresh()));},silent:function(t,e){var n=!1;this.isSilent()&&(n=!0),this._skip_refresh=!0,t.call(e||this),n||(this._skip_refresh=!1);},isSilent:function(){return!!this._skip_refresh;},arraysEqual:function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0;},refresh:function(t,e){var n,i;if(!this.$destroyed&&!this.isSilent()&&(t&&(n=this.getItem(t)),i=t?[t,n,\"paint\"]:[null,null,null],this.callEvent(\"onBeforeStoreUpdate\",i)!==!1)){var a=this._quick_refresh&&!this._mark_recompute;if(this._mark_recompute=!1,t){if(!e&&!a){var r=this.visibleOrder;this.filter(),this.arraysEqual(r,this.visibleOrder)||(t=void 0);}}else a||this.filter();i=t?[t,n,\"paint\"]:[null,null,null],this.callEvent(\"onStoreUpdated\",i);}},count:function(){return this.fullOrder.length;},countVisible:function(){return this.visibleOrder.length;},sort:function(t){},serialize:function(){},eachItem:function(t){for(var e=0;e<this.fullOrder.length;e++){var n=this.getItem(this.fullOrder[e]);t.call(this,n);}},find:function(t){var e=[];return this.eachItem(function(n){t(n)&&e.push(n);}),e;},filter:function(t){this.isSilent()||this.callEvent(\"onBeforeFilter\",[]),this.callEvent(\"onPreFilter\",[]);var e=et.$create(),n=[];this.eachItem(function(a){this.callEvent(\"onFilterItem\",[a.id,a])&&(Rt(a.id,null,this,this._ganttConfig)?n.push(a.id):e.push(a.id));});for(var i=0;i<n.length;i++)e.push(n[i]);for(this.visibleOrder=e,this._searchVisibleOrder={},i=0;i<this.visibleOrder.length;i++)this._searchVisibleOrder[this.visibleOrder[i]]=i;this.isSilent()||this.callEvent(\"onFilter\",[]);},getIndexRange:function(t,e){var n=Math.min(e||1/0,this.countVisible()-1),i=t||0,a=i+\"-\"+n;if(this._indexRangeCache[a])return this._indexRangeCache[a].slice();for(var r=[],s=i;s<=n;s++)r.push(this.getItem(this.visibleOrder[s]));return this._indexRangeCache[a]=r.slice(),r;},getItems:function(){if(this._getItemsCache)return this._getItemsCache.slice();var t=[];for(var e in this.pull)t.push(this.pull[e]);return this._getItemsCache=t.slice(),t;},getIdByIndex:function(t){return this.visibleOrder[t];},getIndexById:function(t){var e=this._searchVisibleOrder[t];return e===void 0&&(e=-1),e;},_getNullIfUndefined:function(t){return t===void 0?null:t;},getFirst:function(){return this._getNullIfUndefined(this.visibleOrder[0]);},getLast:function(){return this._getNullIfUndefined(this.visibleOrder[this.visibleOrder.length-1]);},getNext:function(t){return this._getNullIfUndefined(this.visibleOrder[this.getIndexById(t)+1]);},getPrev:function(t){return this._getNullIfUndefined(this.visibleOrder[this.getIndexById(t)-1]);},destructor:function(){this.callEvent(\"onDestroy\",[]),this.detachAllEvents(),this.$destroyed=!0,this.pull=null,this.$initItem=null,this.visibleOrder=null,this.fullOrder=null,this._skip_refresh=null,this._filterRule=null,this._searchVisibleOrder=null,this._indexRangeCache={};}};var cn=function(t){var e;it.apply(this,[t]),this._branches={},this.pull={},this.$initItem=function(o){var l=o;t.initItem&&(l=t.initItem(l));var c=this.getItem(o.id);return c&&!lt(c.parent,l.parent)&&this.move(l.id,l.$index||-1,l.parent||this._ganttConfig.root_id),l;},this.$parentProperty=t.parentProperty||\"parent\",typeof t.rootId!=\"function\"?this.$getRootId=(e=t.rootId||0,function(){return e;}):this.$getRootId=t.rootId,this.$openInitially=t.openInitially,this.visibleOrder=et.$create(),this.fullOrder=et.$create(),this._searchVisibleOrder={},this._indexRangeCache={},this._eachItemMainRangeCache=null,this._getItemsCache=null,this._skip_refresh=!1,this._ganttConfig=null,t.getConfig&&(this._ganttConfig=t.getConfig());var n={},i={},a={},r={},s=!1;return this._attachDataChange(function(){return this._indexRangeCache={},this._eachItemMainRangeCache=null,this._getItemsCache=null,!0;}),this.attachEvent(\"onPreFilter\",function(){this._indexRangeCache={},this._eachItemMainRangeCache=null,n={},i={},a={},r={},s=!1,this.eachItem(function(o){var l=this.getParent(o.id);o.$open&&a[l]!==!1?a[o.id]=!0:a[o.id]=!1,this._isSplitItem(o)&&(s=!0,n[o.id]=!0,i[o.id]=!0),s&&i[l]&&(i[o.id]=!0),a[l]||a[l]===void 0?r[o.id]=!0:r[o.id]=!1;});}),this.attachEvent(\"onFilterItem\",function(o,l){var c=!1;this._ganttConfig&&(c=this._ganttConfig.open_split_tasks);var d=r[l.id];return s&&(d&&i[l.id]&&!n[l.id]&&(d=!!c),i[l.id]&&!n[l.id]&&(l.$split_subtask=!0)),l.$expanded_branch=!!r[l.id],!!d;}),this.attachEvent(\"onFilter\",function(){n={},i={},a={},r={};}),this;};function lt(t,e){return String(t)===String(e);}function F(t){return mt.isNode||!t.$root;}cn.prototype=P({_buildTree:function(t){for(var e=null,n=this.$getRootId(),i=0,a=t.length;i<a;i++)e=t[i],this.setParent(e,at(this.getParent(e),n)||n);for(i=0,a=t.length;i<a;i++)e=t[i],this._add_branch(e),e.$level=this.calculateItemLevel(e),e.$local_index=this.getBranchIndex(e.id),W(e.$open)||(e.$open=W(e.open)?e.open:this.$openInitially());this._updateOrder();},_isSplitItem:function(t){return t.render==\"split\"&&this.hasChild(t.id);},parse:function(t){this._skip_refresh||this.callEvent(\"onBeforeParse\",[t]);var e=this._parseInner(t);this._buildTree(e),this.filter(),this._skip_refresh||this.callEvent(\"onParse\",[e]);},_addItemInner:function(t,e){var n=this.getParent(t);W(n)||(n=this.$getRootId(),this.setParent(t,n));var i=this.getIndexById(n)+Math.min(Math.max(e,0),this.visibleOrder.length);1*i!==i&&(i=void 0),it.prototype._addItemInner.call(this,t,i),this.setParent(t,n),t.hasOwnProperty(\"$rendered_parent\")&&this._move_branch(t,t.$rendered_parent),this._add_branch(t,e);},_changeIdInner:function(t,e){var n=this.getChildren(t),i=this._searchVisibleOrder[t];it.prototype._changeIdInner.call(this,t,e);var a=this.getParent(e);this._replace_branch_child(a,t,e),this._branches[t]&&(this._branches[e]=this._branches[t]);for(var r=0;r<n.length;r++){var s=this.getItem(n[r]);s[this.$parentProperty]=e,s.$rendered_parent=e;}this._searchVisibleOrder[e]=i,delete this._branches[t];},_traverseBranches:function(t,e){W(e)||(e=this.$getRootId());var n=this._branches[e];if(n)for(var i=0;i<n.length;i++){var a=n[i];t.call(this,a),this._branches[a]&&this._traverseBranches(t,a);}},_updateOrder:function(t){this.fullOrder=et.$create(),this._traverseBranches(function(e){this.fullOrder.push(e);}),t&&it.prototype._updateOrder.call(this,t);},_removeItemInner:function(t){var e=[];this.eachItem(function(i){e.push(i);},t),e.push(this.getItem(t));for(var n=0;n<e.length;n++)this._move_branch(e[n],this.getParent(e[n]),null),it.prototype._removeItemInner.call(this,e[n].id),this._move_branch(e[n],this.getParent(e[n]),null);},move:function(t,e,n){var i=arguments[3],a=(this._ganttConfig||{}).root_id||0;if(i=at(i,a)){if(i===t)return;n=this.getParent(i),e=this.getBranchIndex(i);}if(!lt(t,n)){W(n)||(n=this.$getRootId());var r=this.getItem(t),s=this.getParent(r.id),o=this.getChildren(n);if(e==-1&&(e=o.length+1),lt(s,n)&&this.getBranchIndex(t)==e)return;if(this.callEvent(\"onBeforeItemMove\",[t,n,e])===!1)return!1;for(var l=[],c=0;c<o.length;c++)Rt(o[c],null,this,this._ganttConfig)&&(l.push(o[c]),o.splice(c,1),c--);this._replace_branch_child(s,t);var d=(o=this.getChildren(n))[e];(d=at(d,a))?o=o.slice(0,e).concat([t]).concat(o.slice(e)):o.push(t),l.length&&(o=o.concat(l)),lt(r.$rendered_parent,s)||lt(s,n)||(r.$rendered_parent=s),this.setParent(r,n),this._branches[n]=o;var u=this.calculateItemLevel(r)-r.$level;r.$level+=u,this.eachItem(function(h){h.$level+=u;},r.id,this),this._moveInner(this.getIndexById(t),this.getIndexById(n)+e),this.callEvent(\"onAfterItemMove\",[t,n,e]),this.refresh();}},getBranchIndex:function(t){var e=this.getChildren(this.getParent(t));let n=e.indexOf(t+\"\");return n==-1&&(n=e.indexOf(+t)),n;},hasChild:function(t){var e=this._branches[t];return e&&e.length;},getChildren:function(t){var e=this._branches[t];return e||et.$create();},isChildOf:function(t,e){if(!this.exists(t))return!1;if(e===this.$getRootId())return!0;if(!this.hasChild(e))return!1;var n=this.getItem(t),i=this.getParent(t);if(this.getItem(e).$level>=n.$level)return!1;for(;n&&this.exists(i);){if((n=this.getItem(i))&&lt(n.id,e))return!0;i=this.getParent(n);}return!1;},getSiblings:function(t){if(!this.exists(t))return et.$create();var e=this.getParent(t);return this.getChildren(e);},getNextSibling:function(t){for(var e=this.getSiblings(t),n=0,i=e.length;n<i;n++)if(lt(e[n],t)){var a=e[n+1];return a===0&&n>0&&(a=\"0\"),a||null;}return null;},getPrevSibling:function(t){for(var e=this.getSiblings(t),n=0,i=e.length;n<i;n++)if(lt(e[n],t)){var a=e[n-1];return a===0&&n>0&&(a=\"0\"),a||null;}return null;},getParent:function(t){var e=null;return(e=t.id!==void 0?t:this.getItem(t))?e[this.$parentProperty]:this.$getRootId();},clearAll:function(){this._branches={},it.prototype.clearAll.call(this);},calculateItemLevel:function(t){var e=0;return this.eachParent(function(){e++;},t),e;},_setParentInner:function(t,e,n){n||(t.hasOwnProperty(\"$rendered_parent\")?this._move_branch(t,t.$rendered_parent,e):this._move_branch(t,t[this.$parentProperty],e));},setParent:function(t,e,n){this._setParentInner(t,e,n),t[this.$parentProperty]=e;},_eachItemCached:function(t,e){for(var n=0,i=e.length;n<i;n++)t.call(this,e[n]);},_eachItemIterate:function(t,e,n){var i=this.getChildren(e);for(i.length&&(i=i.slice().reverse());i.length;){var a=i.pop(),r=this.getItem(a);if(t.call(this,r),n&&n.push(r),this.hasChild(r.id))for(var s=this.getChildren(r.id),o=s.length-1;o>=0;o--)i.push(s[o]);}},eachItem:function(t,e){var n=this.$getRootId();W(e)||(e=n);var i=at(e,n)||n,a=!1,r=!1,s=null;i===n&&(this._eachItemMainRangeCache?(a=!0,s=this._eachItemMainRangeCache):(r=!0,s=this._eachItemMainRangeCache=[])),a?this._eachItemCached(t,s):this._eachItemIterate(t,i,r?s:null);},eachParent:function(t,e){for(var n={},i=e,a=this.getParent(i);this.exists(a);){if(n[a])throw new Error(\"Invalid tasks tree. Cyclic reference has been detected on task \"+a);n[a]=!0,i=this.getItem(a),t.call(this,i),a=this.getParent(i);}},_add_branch:function(t,e,n){var i=n===void 0?this.getParent(t):n;this.hasChild(i)||(this._branches[i]=et.$create());var a=this.getChildren(i);a.indexOf(t.id+\"\")>-1||a.indexOf(+t.id)>-1||(1*e==e?a.splice(e,0,t.id):a.push(t.id),t.$rendered_parent=i);},_move_branch:function(t,e,n){this._eachItemMainRangeCache=null,this._replace_branch_child(e,t.id),this.exists(n)||lt(n,this.$getRootId())?this._add_branch(t,void 0,n):delete this._branches[t.id],t.$level=this.calculateItemLevel(t),this.eachItem(function(i){i.$level=this.calculateItemLevel(i);},t.id);},_replace_branch_child:function(t,e,n){var i=this.getChildren(t);if(i&&t!==void 0){var a=et.$create();let r=i.indexOf(e+\"\");r!=-1||isNaN(+e)||(r=i.indexOf(+e)),r>-1&&(n?i.splice(r,1,n):i.splice(r,1)),a=i,this._branches[t]=a;}},sort:function(t,e,n){this.exists(n)||(n=this.$getRootId()),t||(t=\"order\");var i=typeof t==\"string\"?function(l,c){return l[t]==c[t]||Q(l[t])&&Q(c[t])&&l[t].valueOf()==c[t].valueOf()?0:l[t]>c[t]?1:-1;}:t;if(e){var a=i;i=function(l,c){return a(c,l);};}var r=this.getChildren(n);if(r){for(var s=[],o=r.length-1;o>=0;o--)s[o]=this.getItem(r[o]);for(s.sort(i),o=0;o<s.length;o++)r[o]=s[o].id,this.sort(t,e,r[o]);}},filter:function(t){for(let e in this.pull){const n=this.pull[e].$rendered_parent,i=this.getParent(this.pull[e]);lt(n,i)||this._move_branch(this.pull[e],n,i);}return it.prototype.filter.apply(this,arguments);},open:function(t){this.exists(t)&&(this.getItem(t).$open=!0,this._skipTaskRecalculation=!0,this.callEvent(\"onItemOpen\",[t]));},close:function(t){this.exists(t)&&(this.getItem(t).$open=!1,this._skipTaskRecalculation=!0,this.callEvent(\"onItemClose\",[t]));},destructor:function(){it.prototype.destructor.call(this),this._branches=null,this._indexRangeCache={},this._eachItemMainRangeCache=null;}},it.prototype);const Zn=function(t,e){const n=e.getDatastore(t),i=function(o,l){const c=l.getLayers(),d=n.getItem(o);if(d&&n.isVisible(o))for(let u=0;u<c.length;u++)c[u].render_item(d);},a=function(o){const l=o.getLayers();for(let _=0;_<l.length;_++)l[_].clear();let c=null;const d={};for(let _=0;_<l.length;_++){const p=l[_];let y;if(p.get_visible_range){var u=p.get_visible_range(n);if(u.start!==void 0&&u.end!==void 0){var h=u.start+\" - \"+u.end;d[h]?y=d[h]:(y=n.getIndexRange(u.start,u.end),d[h]=y);}else{if(u.ids===void 0)throw new Error(\"Invalid range returned from 'getVisibleRange' of the layer\");y=u.ids.map(function(k){return n.getItem(k);});}}else c||(c=n.getVisibleItems()),y=c;p.prepare_data&&p.prepare_data(y),l[_].render_items(y);}},r=function(o){if(o.update_items){let c=[];if(o.get_visible_range){var l=o.get_visible_range(n);if(l.start!==void 0&&l.end!==void 0&&(c=n.getIndexRange(l.start,l.end)),l.ids!==void 0){let d=l.ids.map(function(u){return n.getItem(u);});d.length>0&&(d=d.filter(u=>u!==void 0),c=c.concat(d));}if((l.start==null||l.end==null)&&l.ids==null)throw new Error(\"Invalid range returned from 'getVisibleRange' of the layer\");}else c=n.getVisibleItems();o.prepare_data&&o.prepare_data(c,o),o.update_items(c);}};function s(o){return!!o.$services.getService(\"state\").getState(\"batchUpdate\").batch_update;}n.attachEvent(\"onStoreUpdated\",function(o,l,c){if(F(e))return!0;const d=e.$services.getService(\"layers\").getDataRender(t);d&&(d.onUpdateRequest=function(u){r(u);});}),n.attachEvent(\"onStoreUpdated\",function(o,l,c){s(e)||(o&&c!=\"move\"&&c!=\"delete\"?(n.callEvent(\"onBeforeRefreshItem\",[l.id]),n.callEvent(\"onAfterRefreshItem\",[l.id])):(n.callEvent(\"onBeforeRefreshAll\",[]),n.callEvent(\"onAfterRefreshAll\",[])));}),n.attachEvent(\"onAfterRefreshAll\",function(){if(F(e))return!0;const o=e.$services.getService(\"layers\").getDataRender(t);o&&!s(e)&&a(o);}),n.attachEvent(\"onAfterRefreshItem\",function(o){if(F(e))return!0;const l=e.$services.getService(\"layers\").getDataRender(t);l&&i(o,l);}),n.attachEvent(\"onItemOpen\",function(){if(F(e)||n.isSilent())return!0;e.render();}),n.attachEvent(\"onItemClose\",function(){if(F(e)||n.isSilent())return!0;e.render();}),n.attachEvent(\"onIdChange\",function(o,l){if(F(e))return!0;if(n.callEvent(\"onBeforeIdChange\",[o,l]),!s(e)&&!n.isSilent()){const c=e.$services.getService(\"layers\").getDataRender(t);c?(function(d,u,h){for(let _=0;_<d.length;_++)d[_].change_id(u,h);}(c.getLayers(),o,l,n.getItem(l)),i(l,c)):e.render();}});};function ne(){for(var t=this.$services.getService(\"datastores\"),e=[],n=0;n<t.length;n++){var i=this.getDatastore(t[n]);i.$destroyed||e.push(i);}return e;}const Qn={create:function(){var t=P({},{createDatastore:function(e){var n=(e.type||\"\").toLowerCase()==\"treedatastore\"?cn:it;if(e){var i=this;e.openInitially=function(){return i.config.open_tree_initially;},e.copyOnParse=function(){return i.config.deepcopy_on_parse;};}var a=new n(e);if(this.mixin(a,function(o){var l=null,c=o._removeItemInner;function d(u){l=null,this.callEvent(\"onAfterUnselect\",[u]);}return o._removeItemInner=function(u){return l==u&&d.call(this,u),l&&this.eachItem&&this.eachItem(function(h){h.id==l&&d.call(this,h.id);},u),c.apply(this,arguments);},o.attachEvent(\"onIdChange\",function(u,h){o.getSelectedId()==u&&o.silent(function(){o.unselect(u),o.select(h);});}),{select:function(u){if(u){if(l==u)return l;if(!this._skip_refresh&&!this.callEvent(\"onBeforeSelect\",[u]))return!1;this.unselect(),l=u,this._skip_refresh||(this.refresh(u),this.callEvent(\"onAfterSelect\",[u]));}return l;},getSelectedId:function(){return l;},isSelected:function(u){return u==l;},unselect:function(u){(u=u||l)&&(l=null,this._skip_refresh||(this.refresh(u),d.call(this,u)));}};}(a)),e.name){var r=\"datastore:\"+e.name;a.attachEvent(\"onDestroy\",function(){this.$services.dropService(r);for(var o=this.$services.getService(\"datastores\"),l=0;l<o.length;l++)if(o[l]===e.name){o.splice(l,1);break;}}.bind(this)),this.$services.dropService(r),this.$services.setService(r,function(){return a;});var s=this.$services.getService(\"datastores\");s?s.indexOf(e.name)<0&&s.push(e.name):(s=[],this.$services.setService(\"datastores\",function(){return s;}),s.push(e.name)),Zn(e.name,this);}return a;},getDatastore:function(e){return this.$services.getService(\"datastore:\"+e);},_getDatastores:ne,refreshData:function(){var e;F(this)||(e=this.getScrollState()),this.callEvent(\"onBeforeDataRender\",[]);for(var n=ne.call(this),i=0;i<n.length;i++)n[i].refresh();this.config.preserve_scroll&&!F(this)&&(e.x||e.y)&&this.scrollTo(e.x,e.y),this.callEvent(\"onDataRender\",[]);},isChildOf:function(e,n){return this.$data.tasksStore.isChildOf(e,n);},refreshTask:function(e,n){var i=this.getTask(e),a=this;function r(){if(n===void 0||n){for(var o=0;o<i.$source.length;o++)a.refreshLink(i.$source[o]);for(o=0;o<i.$target.length;o++)a.refreshLink(i.$target[o]);}}if(i&&this.isTaskVisible(e))this.$data.tasksStore.refresh(e,!!this.getState(\"tasksDnd\").drag_id||n===!1),r();else if(this.isTaskExists(e)&&this.isTaskExists(this.getParent(e))&&!this._bulk_dnd){this.refreshTask(this.getParent(e));var s=!1;this.eachParent(function(o){(s||this.isSplitTask(o))&&(s=!0);},e),s&&r();}},refreshLink:function(e){this.$data.linksStore.refresh(e,!!this.getState(\"tasksDnd\").drag_id);},silent:function(e){var n=this;n.$data.tasksStore.silent(function(){n.$data.linksStore.silent(function(){e();});});},clearAll:function(){for(var e=ne.call(this),n=0;n<e.length;n++)e[n].silent(function(){e[n].clearAll();});for(n=0;n<e.length;n++)e[n].clearAll();this._update_flags(),this.userdata={},this.callEvent(\"onClear\",[]),this.render();},_clear_data:function(){this.$data.tasksStore.clearAll(),this.$data.linksStore.clearAll(),this._update_flags(),this.userdata={};},selectTask:function(e){var n=this.$data.tasksStore;if(!this.config.select_task)return!1;if(e=at(e,this.config.root_id)){let i=this.getSelectedId();n._skipResourceRepaint=!0,n.select(e),n._skipResourceRepaint=!1,i&&n.pull[i].$split_subtask&&i!=e&&this.refreshTask(i),n.pull[e].$split_subtask&&i!=e&&this.refreshTask(e);}return n.getSelectedId();},unselectTask:function(e){var n=this.$data.tasksStore;n.unselect(e),e&&n.pull[e].$split_subtask&&this.refreshTask(e);},isSelectedTask:function(e){return this.$data.tasksStore.isSelected(e);},getSelectedId:function(){return this.$data.tasksStore.getSelectedId();}});return P(t,{getTask:function(e){e=at(e,this.config.root_id),this.assert(e,\"Invalid argument for gantt.getTask\");var n=this.$data.tasksStore.getItem(e);return this.assert(n,\"Task not found id=\"+e),n;},getTaskByTime:function(e,n){var i=this.$data.tasksStore.getItems(),a=[];if(e||n){e=+e||-1/0,n=+n||1/0;for(var r=0;r<i.length;r++){var s=i[r];+s.start_date<n&&+s.end_date>e&&a.push(s);}}else a=i;return a;},isTaskExists:function(e){return!(!this.$data||!this.$data.tasksStore)&&this.$data.tasksStore.exists(e);},updateTask:function(e,n){W(n)||(n=this.getTask(e)),this.$data.tasksStore.updateItem(e,n),this.isTaskExists(e)&&this.refreshTask(e);},addTask:function(e,n,i){if(W(e.id)||(e.id=st()),this.isTaskExists(e.id)&&this.getTask(e.id).$index!=e.$index)return e.start_date&&typeof e.start_date==\"string\"&&(e.start_date=this.date.parseDate(e.start_date,\"parse_date\")),e.end_date&&typeof e.end_date==\"string\"&&(e.end_date=this.date.parseDate(e.end_date,\"parse_date\")),this.$data.tasksStore.updateItem(e.id,e);if(W(n)||(n=this.getParent(e)||0),this.isTaskExists(n)||(n=this.config.root_id),this.setParent(e,n),this.getState().lightbox&&this.isTaskExists(n)){var a=this.getTask(n);this.callEvent(\"onAfterParentExpand\",[n,a]);}return this.$data.tasksStore.addItem(e,i,n);},deleteTask:function(e){return e=at(e,this.config.root_id),this.$data.tasksStore.removeItem(e);},getTaskCount:function(){return this.$data.tasksStore.count();},getVisibleTaskCount:function(){return this.$data.tasksStore.countVisible();},getTaskIndex:function(e){return this.$data.tasksStore.getBranchIndex(e);},getGlobalTaskIndex:function(e){return e=at(e,this.config.root_id),this.assert(e,\"Invalid argument\"),this.$data.tasksStore.getIndexById(e);},eachTask:function(e,n,i){return this.$data.tasksStore.eachItem(R(e,i||this),n);},eachParent:function(e,n,i){return this.$data.tasksStore.eachParent(R(e,i||this),n);},changeTaskId:function(e,n){this.$data.tasksStore.changeId(e,n);var i=this.$data.tasksStore.getItem(n),a=[];i.$source&&(a=a.concat(i.$source)),i.$target&&(a=a.concat(i.$target));for(var r=0;r<a.length;r++){var s=this.getLink(a[r]);s.source==e&&(s.source=n),s.target==e&&(s.target=n);}},calculateTaskLevel:function(e){return this.$data.tasksStore.calculateItemLevel(e);},getNext:function(e){return this.$data.tasksStore.getNext(e);},getPrev:function(e){return this.$data.tasksStore.getPrev(e);},getParent:function(e){return this.$data.tasksStore.getParent(e);},setParent:function(e,n,i){return this.$data.tasksStore.setParent(e,n,i);},getSiblings:function(e){return this.$data.tasksStore.getSiblings(e).slice();},getNextSibling:function(e){return this.$data.tasksStore.getNextSibling(e);},getPrevSibling:function(e){return this.$data.tasksStore.getPrevSibling(e);},getTaskByIndex:function(e){var n=this.$data.tasksStore.getIdByIndex(e);return this.isTaskExists(n)?this.getTask(n):null;},getChildren:function(e){return this.hasChild(e)?this.$data.tasksStore.getChildren(e).slice():[];},hasChild:function(e){return this.$data.tasksStore.hasChild(e);},open:function(e){this.$data.tasksStore.open(e);},close:function(e){this.$data.tasksStore.close(e);},moveTask:function(e,n,i){return i=at(i,this.config.root_id),this.$data.tasksStore.move.apply(this.$data.tasksStore,arguments);},sort:function(e,n,i,a){var r=!a;this.$data.tasksStore.sort(e,n,i),this.callEvent(\"onAfterSort\",[e,n,i]),r&&this.render();}}),P(t,{getLinkCount:function(){return this.$data.linksStore.count();},getLink:function(e){return this.$data.linksStore.getItem(e);},getLinks:function(){return this.$data.linksStore.getItems();},isLinkExists:function(e){return this.$data.linksStore.exists(e);},addLink:function(e){return this.$data.linksStore.addItem(e);},updateLink:function(e,n){W(n)||(n=this.getLink(e)),this.$data.linksStore.updateItem(e,n);},deleteLink:function(e){return this.$data.linksStore.removeItem(e);},changeLinkId:function(e,n){return this.$data.linksStore.changeId(e,n);}}),t;}};function pe(t){var e=t.date,n=t.$services;return{getSum:function(i,a,r){r===void 0&&(r=i.length-1),a===void 0&&(a=0);for(var s=0,o=a;o<=r;o++)s+=i[o];return s;},setSumWidth:function(i,a,r,s){var o=a.width;s===void 0&&(s=o.length-1),r===void 0&&(r=0);var l=s-r+1;if(!(r>o.length-1||l<=0||s>o.length-1)){var c=i-this.getSum(o,r,s);this.adjustSize(c,o,r,s),this.adjustSize(-c,o,s+1),a.full_width=this.getSum(o);}},splitSize:function(i,a){for(var r=[],s=0;s<a;s++)r[s]=0;return this.adjustSize(i,r),r;},adjustSize:function(i,a,r,s){r||(r=0),s===void 0&&(s=a.length-1);for(var o=s-r+1,l=this.getSum(a,r,s),c=r;c<=s;c++){var d=Math.floor(i*(l?a[c]/l:1/o));l-=a[c],i-=d,o--,a[c]+=d;}a[a.length-1]+=i;},sortScales:function(i){function a(s,o){var l=new Date(1970,0,1);return e.add(l,o,s)-l;}i.sort(function(s,o){return a(s.unit,s.step)<a(o.unit,o.step)?1:a(s.unit,s.step)>a(o.unit,o.step)?-1:0;});for(var r=0;r<i.length;r++)i[r].index=r;},_isLegacyMode:function(i){var a=i||t.config;return a.scale_unit||a.date_scale||a.subscales;},_prepareScaleObject:function(i){var a=i.format;return a||(a=i.template||i.date||\"%d %M\"),typeof a==\"string\"&&(a=t.date.date_to_str(a)),{unit:i.unit||\"day\",step:i.step||1,format:a,css:i.css};},primaryScale:function(i){var a,r=n.getService(\"templateLoader\"),s=this._isLegacyMode(i),o=i||t.config;if(s)r.initTemplate(\"date_scale\",void 0,void 0,o,t.config.templates),a={unit:t.config.scale_unit,step:t.config.step,template:t.templates.date_scale,date:t.config.date_scale,css:t.templates.scale_cell_class};else{var l=o.scales[0];a={unit:l.unit,step:l.step,template:l.template,format:l.format,date:l.date,css:l.css||t.templates.scale_cell_class};}return this._prepareScaleObject(a);},getSubScales:function(i){var a,r=this._isLegacyMode(i),s=i||t.config;if(r){let o=\"https://docs.dhtmlx.com/gantt/migrating.html#:~:text=%3D%20false%3B-,Time%20scale%20settings,-Configuration%20of%20time\";t.env.isFF&&(o=\"https://docs.dhtmlx.com/gantt/migrating.html#6162\"),console.warn(`You are using the obsolete scale configuration.\nIt will stop working in the future versions.\nPlease migrate the configuration to the newer version:\n${o}`),a=s.subscales||[];}else a=s.scales.slice(1);return a.map(function(o){return this._prepareScaleObject(o);}.bind(this));},prepareConfigs:function(i,a,r,s,o,l,c){for(var d=this.splitSize(s,i.length),u=r,h=[],_=i.length-1;_>=0;_--){var p=_==i.length-1,y=this.initScaleConfig(i[_],o,l);p&&this.processIgnores(y),this.initColSizes(y,a,u,d[_]),this.limitVisibleRange(y),p&&(u=y.full_width),h.unshift(y);}for(_=0;_<h.length-1;_++)this.alineScaleColumns(h[h.length-1],h[_]);for(_=0;_<h.length;_++)c&&this.reverseScale(h[_]),this.setPosSettings(h[_]);return h;},reverseScale:function(i){i.width=i.width.reverse(),i.trace_x=i.trace_x.reverse();var a=i.trace_indexes;i.trace_indexes={},i.trace_index_transition={},i.rtl=!0;for(var r=0;r<i.trace_x.length;r++)i.trace_indexes[i.trace_x[r].valueOf()]=r,i.trace_index_transition[a[i.trace_x[r].valueOf()]]=r;return i;},setPosSettings:function(i){for(var a=0,r=i.trace_x.length;a<r;a++)i.left.push((i.width[a-1]||0)+(i.left[a-1]||0));},_ignore_time_config:function(i,a){if(t.config.skip_off_time){for(var r=!0,s=i,o=0;o<a.step;o++)o&&(s=e.add(i,o,a.unit)),r=r&&!this.isWorkTime(s,a.unit);return r;}return!1;},processIgnores:function(i){i.ignore_x={},i.display_count=i.count;},initColSizes:function(i,a,r,s){var o=r;i.height=s;var l=i.display_count===void 0?i.count:i.display_count;l||(l=1),i.col_width=Math.floor(o/l),a&&i.col_width<a&&(i.col_width=a,o=i.col_width*l),i.width=[];for(var c=i.ignore_x||{},d=0;d<i.trace_x.length;d++)if(c[i.trace_x[d].valueOf()]||i.display_count==i.count)i.width[d]=0;else{var u=1;i.unit==\"month\"&&(u=Math.round((e.add(i.trace_x[d],i.step,i.unit)-i.trace_x[d])/864e5)),i.width[d]=u;}this.adjustSize(o-this.getSum(i.width),i.width),i.full_width=this.getSum(i.width);},initScaleConfig:function(i,a,r){var s=P({count:0,col_width:0,full_width:0,height:0,width:[],left:[],trace_x:[],trace_indexes:{},min_date:new Date(a),max_date:new Date(r)},i);return this.eachColumn(i.unit,i.step,a,r,function(o){s.count++,s.trace_x.push(new Date(o)),s.trace_indexes[o.valueOf()]=s.trace_x.length-1;}),s.trace_x_ascending=s.trace_x.slice(),s;},iterateScales:function(i,a,r,s,o){for(var l=a.trace_x,c=i.trace_x,d=r||0,u=s||c.length-1,h=0,_=1;_<l.length;_++){var p=i.trace_indexes[+l[_]];p!==void 0&&p<=u&&(o&&o.apply(this,[h,_,d,p]),d=p,h=_);}},alineScaleColumns:function(i,a,r,s){this.iterateScales(i,a,r,s,function(o,l,c,d){var u=this.getSum(i.width,c,d-1);this.getSum(a.width,o,l-1)!=u&&this.setSumWidth(u,a,o,l-1);});},eachColumn:function(i,a,r,s,o){var l=new Date(r),c=new Date(s);e[i+\"_start\"]&&(l=e[i+\"_start\"](l));var d=new Date(l);for(+d>=+c&&(c=e.add(d,a,i));+d<+c;){o.call(this,new Date(d));var u=d.getTimezoneOffset();d=e.add(d,a,i),d=t._correct_dst_change(d,u,a,i),e[i+\"_start\"]&&(d=e[i+\"_start\"](d));}},limitVisibleRange:function(i){var a=i.trace_x,r=i.width.length-1,s=0;if(+a[0]<+i.min_date&&r!=0){var o=Math.floor(i.width[0]*((a[1]-i.min_date)/(a[1]-a[0])));s+=i.width[0]-o,i.width[0]=o,a[0]=new Date(i.min_date);}var l=a.length-1,c=a[l],d=e.add(c,i.step,i.unit);if(+d>+i.max_date&&l>0&&(o=i.width[l]-Math.floor(i.width[l]*((d-i.max_date)/(d-c))),s+=i.width[l]-o,i.width[l]=o),s){for(var u=this.getSum(i.width),h=0,_=0;_<i.width.length;_++){var p=Math.floor(s*(i.width[_]/u));i.width[_]+=p,h+=p;}this.adjustSize(s-h,i.width);}}};}function ti(t){var e=function(d){var u=new pe(d).primaryScale(),h=u.unit,_=u.step;if(d.config.scale_offset_minimal){var p=new pe(d),y=[p.primaryScale()].concat(p.getSubScales());p.sortScales(y),h=y[y.length-1].unit,_=y[y.length-1].step||1;}return{unit:h,step:_};}(t),n=e.unit,i=e.step,a=function(d,u){var h={start_date:null,end_date:null};if(u.config.start_date&&u.config.end_date){h.start_date=u.date[d+\"_start\"](new Date(u.config.start_date));var _=new Date(u.config.end_date),p=u.date[d+\"_start\"](new Date(_));_=+_!=+p?u.date.add(p,1,d):p,h.end_date=_;}return h;}(n,t);if(!a.start_date||!a.end_date){for(var r=!0,s=t.getTaskByTime(),o=0;o<s.length;o++)if(s[o].type!==t.config.types.project){r=!1;break;}if(s.length&&r){var l=s[0].start_date,c=t.date.add(l,1,t.config.duration_unit);a={start_date:new Date(l),end_date:new Date(c)};}else a=t.getSubtaskDates();a.start_date&&a.end_date||(a={start_date:/* @__PURE__ */new Date(),end_date:/* @__PURE__ */new Date()}),t.eachTask(function(d){t.config.deadlines&&d.deadline&&ie(a,d.deadline,d.deadline),d.constraint_date&&d.constraint_type&&t.config.constraint_types&&d.constraint_type!==t.config.constraint_types.ASAP&&d.constraint_type!==t.config.constraint_types.ALAP&&ie(a,d.constraint_date,d.constraint_date),t.config.baselines&&d.baselines&&d.baselines.forEach(function(u){ie(a,u.start_date,u.end_date);});}),a.start_date=t.date[n+\"_start\"](a.start_date),a.start_date=t.calculateEndDate({start_date:t.date[n+\"_start\"](a.start_date),duration:-1,unit:n,step:i}),a.end_date=t.date[n+\"_start\"](a.end_date),a.end_date=t.calculateEndDate({start_date:a.end_date,duration:2,unit:n,step:i});}t._min_date=a.start_date,t._max_date=a.end_date;}function ie(t,e,n){e<t.start_date&&(t.start_date=new Date(e)),n>t.end_date&&(t.end_date=new Date(n));}function me(t){ti(t),function(e){if(e.config.fit_tasks){var n=+e._min_date,i=+e._max_date;if(+e._min_date!=n||+e._max_date!=i)return e.render(),e.callEvent(\"onScaleAdjusted\",[]),!0;}}(t);}function Re(t,e,n){for(var i=0;i<e.length;i++)t.isLinkExists(e[i])&&(n[e[i]]=t.getLink(e[i]));}function He(t,e,n){Re(t,e.$source,n),Re(t,e.$target,n);}const ve={getSubtreeLinks:function(t,e){var n={};return t.isTaskExists(e)&&He(t,t.getTask(e),n),t.eachTask(function(i){He(t,i,n);},e),n;},getSubtreeTasks:function(t,e){var n={};return t.eachTask(function(i){n[i.id]=i;},e),n;}};class ei{constructor(e,n){this.$gantt=e,this.$dp=n,this._dataProcessorHandlers=[];}attach(){const e=this.$dp,n=this.$gantt,i={},a=o=>this.clientSideDelete(o,e,n);this._dataProcessorHandlers.push(n.attachEvent(\"onAfterTaskAdd\",function(o,l){n.isTaskExists(o)&&(e.setGanttMode(\"tasks\"),e.setUpdated(o,!0,\"inserted\"));})),this._dataProcessorHandlers.push(n.attachEvent(\"onAfterTaskUpdate\",function(o,l){n.isTaskExists(o)&&(e.setGanttMode(\"tasks\"),e.setUpdated(o,!0),n._sendTaskOrder&&n._sendTaskOrder(o,l));})),this._dataProcessorHandlers.push(n.attachEvent(\"onBeforeTaskDelete\",function(o,l){return n.config.cascade_delete&&(i[o]={tasks:ve.getSubtreeTasks(n,o),links:ve.getSubtreeLinks(n,o)}),!e.deleteAfterConfirmation||(e.setGanttMode(\"tasks\"),e.setUpdated(o,!0,\"deleted\"),!1);})),this._dataProcessorHandlers.push(n.attachEvent(\"onAfterTaskDelete\",function(o,l){e.setGanttMode(\"tasks\");const c=!a(o),d=n.config.cascade_delete&&i[o];if(c||d){if(d){const u=e.updateMode;e.setUpdateMode(\"off\");const h=i[o];for(const _ in h.tasks)a(_)||(e.storeItem(h.tasks[_]),e.setUpdated(_,!0,\"deleted\"));e.setGanttMode(\"links\");for(const _ in h.links)a(_)||(e.storeItem(h.links[_]),e.setUpdated(_,!0,\"deleted\"));i[o]=null,u!==\"off\"&&e.sendAllData(),e.setGanttMode(\"tasks\"),e.setUpdateMode(u);}c&&(e.storeItem(l),e.deleteAfterConfirmation||e.setUpdated(o,!0,\"deleted\")),e.updateMode===\"off\"||e._tSend||e.sendAllData();}})),this._dataProcessorHandlers.push(n.attachEvent(\"onAfterLinkUpdate\",function(o,l){n.isLinkExists(o)&&(e.setGanttMode(\"links\"),e.setUpdated(o,!0));})),this._dataProcessorHandlers.push(n.attachEvent(\"onAfterLinkAdd\",function(o,l){n.isLinkExists(o)&&(e.setGanttMode(\"links\"),e.setUpdated(o,!0,\"inserted\"));})),this._dataProcessorHandlers.push(n.attachEvent(\"onAfterLinkDelete\",function(o,l){e.setGanttMode(\"links\"),!a(o)&&(e.storeItem(l),e.setUpdated(o,!0,\"deleted\"));})),this._dataProcessorHandlers.push(n.attachEvent(\"onRowDragEnd\",function(o,l){n._sendTaskOrder(o,n.getTask(o));}));let r=null,s=null;this._dataProcessorHandlers.push(n.attachEvent(\"onTaskIdChange\",function(o,l){if(!e._waitMode)return;const c=n.getChildren(l);if(c.length){r=r||{};for(let u=0;u<c.length;u++){const h=this.getTask(c[u]);r[h.id]=h;}}const d=function(u){let h=[];return u.$source&&(h=h.concat(u.$source)),u.$target&&(h=h.concat(u.$target)),h;}(this.getTask(l));if(d.length){s=s||{};for(let u=0;u<d.length;u++){const h=this.getLink(d[u]);s[h.id]=h;}}})),e.attachEvent(\"onAfterUpdateFinish\",function(){(r||s)&&(n.batchUpdate(function(){for(const o in r)n.updateTask(r[o].id);for(const o in s)n.updateLink(s[o].id);r=null,s=null;}),r?n._dp.setGanttMode(\"tasks\"):n._dp.setGanttMode(\"links\"));}),e.attachEvent(\"onBeforeDataSending\",function(){if(this._tMode===\"CUSTOM\")return!0;let o=this._serverProcessor;if(this._tMode===\"REST-JSON\"||this._tMode===\"REST\"){const l=this._ganttMode;o=o.substring(0,o.indexOf(\"?\")>-1?o.indexOf(\"?\"):o.length),this.serverProcessor=o+(o.slice(-1)===\"/\"?\"\":\"/\")+l;}else{const l=this._ganttMode+\"s\";this.serverProcessor=o+n.ajax.urlSeparator(o)+\"gantt_mode=\"+l;}return!0;}),e.attachEvent(\"insertCallback\",function(o,l,c,d){const u=o.data||n.xml._xmlNodeToJSON(o.firstChild),h={add:n.addTask,isExist:n.isTaskExists};d===\"links\"&&(h.add=n.addLink,h.isExist=n.isLinkExists),h.isExist.call(n,l)||(u.id=l,h.add.call(n,u));}),e.attachEvent(\"updateCallback\",function(o,l){const c=o.data||n.xml._xmlNodeToJSON(o.firstChild);if(!n.isTaskExists(l))return;const d=n.getTask(l);for(const u in c){let h=c[u];switch(u){case\"id\":continue;case\"start_date\":case\"end_date\":h=n.defined(n.templates.xml_date)?n.templates.xml_date(h):n.templates.parse_date(h);break;case\"duration\":d.end_date=n.calculateEndDate({start_date:d.start_date,duration:h,task:d});}d[u]=h;}n.updateTask(l),n.refreshData();}),e.attachEvent(\"deleteCallback\",function(o,l,c,d){const u={delete:n.deleteTask,isExist:n.isTaskExists};d===\"links\"?(u.delete=n.deleteLink,u.isExist=n.isLinkExists):d===\"assignment\"&&(u.delete=function(h){n.$data.assignmentsStore.remove(h);},u.isExist=function(h){return n.$data.assignmentsStore.exists(h);}),u.isExist.call(n,l)&&u.delete.call(n,l);}),this.handleResourceCRUD(e,n),this.handleResourceAssignmentCRUD(e,n),this.handleBaselineCRUD(e,n);}clientSideDelete(e,n,i){const a=n.updatedRows.slice();let r=!1;i.getUserData(e,\"!nativeeditor_status\",n._ganttMode)===\"true_deleted\"&&(r=!0,n.setUpdated(e,!1));for(let s=0;s<a.length&&!n._in_progress[e];s++)a[s]===e&&(i.getUserData(e,\"!nativeeditor_status\",n._ganttMode)===\"inserted\"&&(r=!0),n.setUpdated(e,!1));return r;}handleResourceAssignmentCRUD(e,n){if(!n.config.resources||n.config.resources.dataprocessor_assignments!==!0)return;const i=n.getDatastore(n.config.resource_assignment_store),a={},r={};function s(o){const l=o.id;i.exists(l)&&(e.setGanttMode(\"assignment\"),e.setUpdated(l,!0,\"inserted\")),delete r[l];}n.attachEvent(\"onBeforeTaskAdd\",function(o,l){return a[o]=!0,!0;}),n.attachEvent(\"onTaskIdChange\",function(o,l){delete a[o];}),i.attachEvent(\"onAfterAdd\",(o,l)=>{a[l.task_id]?function(c){r[c.id]=c,a[c.task_id]=!0;}(l):s(l);}),i.attachEvent(\"onAfterUpdate\",(o,l)=>{i.exists(o)&&(r[o]?s(l):(e.setGanttMode(\"assignment\"),e.setUpdated(o,!0)));}),i.attachEvent(\"onAfterDelete\",(o,l)=>{e.setGanttMode(\"assignment\"),!this.clientSideDelete(o,e,n)&&(e.storeItem(l),e.setUpdated(o,!0,\"deleted\"));});}handleResourceCRUD(e,n){if(!n.config.resources||n.config.resources.dataprocessor_resources!==!0)return;const i=n.getDatastore(n.config.resource_store);i.attachEvent(\"onAfterAdd\",(a,r)=>{(function(s){const o=s.id;i.exists(o)&&(e.setGanttMode(\"resource\"),e.setUpdated(o,!0,\"inserted\"));})(r);}),i.attachEvent(\"onAfterUpdate\",(a,r)=>{i.exists(a)&&(e.setGanttMode(\"resource\"),e.setUpdated(a,!0));}),i.attachEvent(\"onAfterDelete\",(a,r)=>{e.setGanttMode(\"resource\"),!this.clientSideDelete(a,e,n)&&(e.storeItem(r),e.setUpdated(a,!0,\"deleted\"));});}handleBaselineCRUD(e,n){if(!n.config.baselines||n.config.baselines.dataprocessor_baselines!==!0)return;const i=n.getDatastore(n.config.baselines.datastore);i.attachEvent(\"onAfterAdd\",(a,r)=>{(function(s){const o=s.id;i.exists(o)&&(e.setGanttMode(\"baseline\"),e.setUpdated(o,!0,\"inserted\"));})(r);}),i.attachEvent(\"onAfterUpdate\",(a,r)=>{i.exists(a)&&(e.setGanttMode(\"baseline\"),e.setUpdated(a,!0));}),i.attachEvent(\"onAfterDelete\",(a,r)=>{e.setGanttMode(\"baseline\"),!this.clientSideDelete(a,e,n)&&(e.storeItem(r),e.setUpdated(a,!0,\"deleted\"));});}detach(){kt(this._dataProcessorHandlers,e=>{this.$gantt.detachEvent(e);}),this._dataProcessorHandlers=[];}}const Xt=class Xt{constructor(){this.clear=()=>{this._storage={};},this.storeItem=e=>{this._storage[e.id]=q(e);},this.getStoredItem=e=>this._storage[e]||null,this._storage={};}};Xt.create=()=>new Xt();let Jt=Xt,un=class{constructor(t){this.serverProcessor=t,this.action_param=\"!nativeeditor_status\",this.updatedRows=[],this.autoUpdate=!0,this.updateMode=\"cell\",this._headers=null,this._payload=null,this._postDelim=\"_\",this._routerParametersFormat=\"parameters\",this._waitMode=0,this._in_progress={},this._storage=Jt.create(),this._invalid={},this.messages=[],this.styles={updated:\"font-weight:bold;\",inserted:\"font-weight:bold;\",deleted:\"text-decoration : line-through;\",invalid:\"background-color:FFE0E0;\",invalid_cell:\"border-bottom:2px solid red;\",error:\"color:red;\",clear:\"font-weight:normal;text-decoration:none;\"},this.enableUTFencoding(!0),ot(this);}setTransactionMode(t,e){typeof t==\"object\"?(this._tMode=t.mode||this._tMode,W(t.headers)&&(this._headers=t.headers),W(t.payload)&&(this._payload=t.payload),this._tSend=!!e):(this._tMode=t,this._tSend=e),this._tMode===\"REST\"&&(this._tSend=!1),this._tMode===\"JSON\"||this._tMode===\"REST-JSON\"?(this._tSend=!1,this._serializeAsJson=!0,this._headers=this._headers||{},this._headers[\"Content-Type\"]=\"application/json\"):this._headers&&!this._headers[\"Content-Type\"]&&(this._headers[\"Content-Type\"]=\"application/x-www-form-urlencoded\"),this._tMode===\"CUSTOM\"&&(this._tSend=!1,this._router=t.router);}escape(t){return this._utf?encodeURIComponent(t):escape(t);}enableUTFencoding(t){this._utf=!!t;}getSyncState(){return!this.updatedRows.length;}setUpdateMode(t,e){this.autoUpdate=t===\"cell\",this.updateMode=t,this.dnd=e;}ignore(t,e){this._silent_mode=!0,t.call(e||Z),this._silent_mode=!1;}setUpdated(t,e,n){if(this._silent_mode)return;const i=this.findRow(t);n=n||\"updated\";const a=this.$gantt.getUserData(t,this.action_param,this._ganttMode);a&&n===\"updated\"&&(n=a),e?(this.set_invalid(t,!1),this.updatedRows[i]=t,this.$gantt.setUserData(t,this.action_param,n,this._ganttMode),this._in_progress[t]&&(this._in_progress[t]=\"wait\")):this.is_invalid(t)||(this.updatedRows.splice(i,1),this.$gantt.setUserData(t,this.action_param,\"\",this._ganttMode)),this.markRow(t,e,n),e&&this.autoUpdate&&this.sendData(t);}markRow(t,e,n){let i=\"\";const a=this.is_invalid(t);if(a&&(i=this.styles[a],e=!0),this.callEvent(\"onRowMark\",[t,e,n,a])&&(i=this.styles[e?n:\"clear\"]+\" \"+i,this.$gantt[this._methods[0]](t,i),a&&a.details)){i+=this.styles[a+\"_cell\"];for(let r=0;r<a.details.length;r++)a.details[r]&&this.$gantt[this._methods[1]](t,r,i);}}getActionByState(t){return t===\"inserted\"?\"create\":t===\"updated\"?\"update\":t===\"deleted\"?\"delete\":\"update\";}getState(t){return this.$gantt.getUserData(t,this.action_param,this._ganttMode);}is_invalid(t){return this._invalid[t];}set_invalid(t,e,n){n&&(e={value:e,details:n,toString:function(){return this.value.toString();}}),this._invalid[t]=e;}checkBeforeUpdate(t){return!0;}sendData(t){if(this.$gantt.editStop&&this.$gantt.editStop(),t===void 0||this._tSend){const e=[];if(this.modes&&[\"task\",\"link\",\"assignment\",\"baseline\"].forEach(n=>{this.modes[n]&&this.modes[n].updatedRows.length&&e.push(n);}),e.length){for(let n=0;n<e.length;n++)this.setGanttMode(e[n]),this.sendAllData();return;}return this.sendAllData();}return!this._in_progress[t]&&(this.messages=[],!(!this.checkBeforeUpdate(t)&&this.callEvent(\"onValidationError\",[t,this.messages]))&&void this._beforeSendData(this._getRowData(t),t));}serialize(t,e){if(this._serializeAsJson)return this._serializeAsJSON(t);if(typeof t==\"string\")return t;if(e!==void 0)return this.serialize_one(t,\"\");{const n=[],i=[];for(const a in t)t.hasOwnProperty(a)&&(n.push(this.serialize_one(t[a],a+this._postDelim)),i.push(a));return n.push(\"ids=\"+this.escape(i.join(\",\"))),this.$gantt.security_key&&n.push(\"dhx_security=\"+this.$gantt.security_key),n.join(\"&\");}}serialize_one(t,e){if(typeof t==\"string\")return t;const n=[];let i=\"\";for(const a in t)if(t.hasOwnProperty(a)){if((a===\"id\"||a==this.action_param)&&this._tMode===\"REST\")continue;i=typeof t[a]==\"string\"||typeof t[a]==\"number\"?String(t[a]):JSON.stringify(t[a]),n.push(this.escape((e||\"\")+a)+\"=\"+this.escape(i));}return n.join(\"&\");}sendAllData(){if(!this.updatedRows.length)return;this.messages=[];let t=!0;if(this._forEachUpdatedRow(function(e){t=t&&this.checkBeforeUpdate(e);}),!t&&!this.callEvent(\"onValidationError\",[\"\",this.messages]))return!1;this._tSend?this._sendData(this._getAllData()):this._forEachUpdatedRow(function(e){if(!this._in_progress[e]){if(this.is_invalid(e))return;this._beforeSendData(this._getRowData(e),e);}});}findRow(t){let e=0;for(e=0;e<this.updatedRows.length&&t!=this.updatedRows[e];e++);return e;}defineAction(t,e){this._uActions||(this._uActions={}),this._uActions[t]=e;}afterUpdateCallback(t,e,n,i,a){if(!this.$gantt)return;this.setGanttMode(a);const r=t,s=n!==\"error\"&&n!==\"invalid\";if(s||this.set_invalid(t,n),this._uActions&&this._uActions[n]&&!this._uActions[n](i))return delete this._in_progress[r];this._in_progress[r]!==\"wait\"&&this.setUpdated(t,!1);const o=t;switch(n){case\"inserted\":case\"insert\":e!=t&&(this.setUpdated(t,!1),this.$gantt[this._methods[2]](t,e),t=e);break;case\"delete\":case\"deleted\":if(this.deleteAfterConfirmation&&this._ganttMode===\"task\"){if(this._ganttMode===\"task\"&&this.$gantt.isTaskExists(t)){this.$gantt.setUserData(t,this.action_param,\"true_deleted\",this._ganttMode);const l=this.$gantt.getTask(t);this.$gantt.silent(()=>{this.$gantt.deleteTask(t);}),this.$gantt.callEvent(\"onAfterTaskDelete\",[t,l]),this.$gantt.render(),delete this._in_progress[r];}return this.callEvent(\"onAfterUpdate\",[t,n,e,i]);}return this.$gantt.setUserData(t,this.action_param,\"true_deleted\",this._ganttMode),this.$gantt[this._methods[3]](t),delete this._in_progress[r],this.callEvent(\"onAfterUpdate\",[t,n,e,i]);}this._in_progress[r]!==\"wait\"?(s&&this.$gantt.setUserData(t,this.action_param,\"\",this._ganttMode),delete this._in_progress[r]):(delete this._in_progress[r],this.setUpdated(e,!0,this.$gantt.getUserData(t,this.action_param,this._ganttMode))),this.callEvent(\"onAfterUpdate\",[o,n,e,i]);}afterUpdate(t,e,n){let i;i=arguments.length===3?arguments[1]:arguments[4];let a=this.getGanttMode();const r=i.filePath||i.url;a=this._tMode!==\"REST\"&&this._tMode!==\"REST-JSON\"?r.indexOf(\"gantt_mode=links\")!==-1?\"link\":r.indexOf(\"gantt_mode=assignments\")!==-1?\"assignment\":r.indexOf(\"gantt_mode=baselines\")!==-1?\"baseline\":\"task\":r.indexOf(\"/link\")>=0?\"link\":r.indexOf(\"/assignment\")>=0?\"assignment\":r.indexOf(\"/baseline\")>=0?\"baseline\":\"task\",this.setGanttMode(a);const s=this.$gantt.ajax;let o;try{o=JSON.parse(e.xmlDoc.responseText);}catch{e.xmlDoc.responseText.length||(o={});}const l=u=>{const h=o.action||this.getState(u)||\"updated\",_=o.sid||u[0],p=o.tid||u[0];t.afterUpdateCallback(_,p,h,o,a);};if(o)return Array.isArray(n)&&n.length>1?n.forEach(u=>l(u)):l(n),t.finalizeUpdate(),void this.setGanttMode(a);const c=s.xmltop(\"data\",e.xmlDoc);if(!c)return this.cleanUpdate(n);const d=s.xpath(\"//data/action\",c);if(!d.length)return this.cleanUpdate(n);for(let u=0;u<d.length;u++){const h=d[u],_=h.getAttribute(\"type\"),p=h.getAttribute(\"sid\"),y=h.getAttribute(\"tid\");t.afterUpdateCallback(p,y,_,h,a);}t.finalizeUpdate();}cleanUpdate(t){if(t)for(let e=0;e<t.length;e++)delete this._in_progress[t[e]];}finalizeUpdate(){this._waitMode&&this._waitMode--,this.callEvent(\"onAfterUpdateFinish\",[]),this.updatedRows.length||this.callEvent(\"onFullSync\",[]);}init(t){if(this._initialized)return;this.$gantt=t,this.$gantt._dp_init&&this.$gantt._dp_init(this),this._setDefaultTransactionMode(),this.styles={updated:\"gantt_updated\",order:\"gantt_updated\",inserted:\"gantt_inserted\",deleted:\"gantt_deleted\",delete_confirmation:\"gantt_deleted\",invalid:\"gantt_invalid\",error:\"gantt_error\",clear:\"\"},this._methods=[\"_row_style\",\"setCellTextStyle\",\"_change_id\",\"_delete_task\"],function(n,i){n.getUserData=function(a,r,s){return this.userdata||(this.userdata={}),this.userdata[s]=this.userdata[s]||{},this.userdata[s][a]&&this.userdata[s][a][r]?this.userdata[s][a][r]:\"\";},n.setUserData=function(a,r,s,o){this.userdata||(this.userdata={}),this.userdata[o]=this.userdata[o]||{},this.userdata[o][a]=this.userdata[o][a]||{},this.userdata[o][a][r]=s;},n._change_id=function(a,r){switch(this._dp._ganttMode){case\"task\":this.changeTaskId(a,r);break;case\"link\":this.changeLinkId(a,r);break;case\"assignment\":this.$data.assignmentsStore.changeId(a,r);break;case\"resource\":this.$data.resourcesStore.changeId(a,r);break;case\"baseline\":this.$data.baselineStore.changeId(a,r);break;default:throw new Error(`Invalid mode of the dataProcessor after database id is received: ${this._dp._ganttMode}, new id: ${r}`);}},n._row_style=function(a,r){this._dp._ganttMode===\"task\"&&n.isTaskExists(a)&&(n.getTask(a).$dataprocessor_class=r,n.refreshTask(a));},n._delete_task=function(a,r){},n._sendTaskOrder=function(a,r){r.$drop_target&&(this._dp.setGanttMode(\"task\"),this.getTask(a).target=r.$drop_target,this._dp.setUpdated(a,!0,\"order\"),delete this.getTask(a).$drop_target);},n.setDp=function(){this._dp=i;},n.setDp();}(this.$gantt,this);const e=new ei(this.$gantt,this);e.attach(),this.attachEvent(\"onDestroy\",function(){delete this.setGanttMode,delete this._getRowData,delete this.$gantt._dp,delete this.$gantt._change_id,delete this.$gantt._row_style,delete this.$gantt._delete_task,delete this.$gantt._sendTaskOrder,delete this.$gantt,e.detach();}),this.$gantt.callEvent(\"onDataProcessorReady\",[this]),this._initialized=!0;}setOnAfterUpdate(t){this.attachEvent(\"onAfterUpdate\",t);}setOnBeforeUpdateHandler(t){this.attachEvent(\"onBeforeDataSending\",t);}setAutoUpdate(t,e){t=t||2e3,this._user=e||(/* @__PURE__ */new Date()).valueOf(),this._needUpdate=!1,this._updateBusy=!1,this.attachEvent(\"onAfterUpdate\",this.afterAutoUpdate),this.attachEvent(\"onFullSync\",this.fullSync),setInterval(()=>{this.loadUpdate();},t);}afterAutoUpdate(t,e,n,i){return e!==\"collision\"||(this._needUpdate=!0,!1);}fullSync(){return this._needUpdate&&(this._needUpdate=!1,this.loadUpdate()),!0;}getUpdates(t,e){const n=this.$gantt.ajax;if(this._updateBusy)return!1;this._updateBusy=!0,n.get(t,e);}loadUpdate(){const t=this.$gantt.ajax,e=this.$gantt.getUserData(0,\"version\",this._ganttMode);let n=this.serverProcessor+t.urlSeparator(this.serverProcessor)+[\"dhx_user=\"+this._user,\"dhx_version=\"+e].join(\"&\");n=n.replace(\"editing=true&\",\"\"),this.getUpdates(n,i=>{const a=t.xpath(\"//userdata\",i);this.$gantt.setUserData(0,\"version\",this._getXmlNodeValue(a[0]),this._ganttMode);const r=t.xpath(\"//update\",i);if(r.length){this._silent_mode=!0;for(let s=0;s<r.length;s++){const o=r[s].getAttribute(\"status\"),l=r[s].getAttribute(\"id\"),c=r[s].getAttribute(\"parent\");switch(o){case\"inserted\":this.callEvent(\"insertCallback\",[r[s],l,c]);break;case\"updated\":this.callEvent(\"updateCallback\",[r[s],l,c]);break;case\"deleted\":this.callEvent(\"deleteCallback\",[r[s],l,c]);}}this._silent_mode=!1;}this._updateBusy=!1;});}destructor(){this.callEvent(\"onDestroy\",[]),this.detachAllEvents(),this.updatedRows=[],this._in_progress={},this._invalid={},this._storage.clear(),this._storage=null,this._headers=null,this._payload=null,delete this._initialized;}setGanttMode(t){t===\"tasks\"?t=\"task\":t===\"links\"&&(t=\"link\");const e=this.modes||{},n=this.getGanttMode();n&&(e[n]={_in_progress:this._in_progress,_invalid:this._invalid,_storage:this._storage,updatedRows:this.updatedRows});let i=e[t];i||(i=e[t]={_in_progress:{},_invalid:{},_storage:Jt.create(),updatedRows:[]}),this._in_progress=i._in_progress,this._invalid=i._invalid,this._storage=i._storage,this.updatedRows=i.updatedRows,this.modes=e,this._ganttMode=t;}getGanttMode(){return this._ganttMode;}storeItem(t){this._storage.storeItem(t);}url(t){this.serverProcessor=this._serverProcessor=t;}_beforeSendData(t,e){if(!this.callEvent(\"onBeforeUpdate\",[e,this.getState(e),t]))return!1;this._sendData(t,e);}_serializeAsJSON(t){if(typeof t==\"string\")return t;const e=q(t);return this._tMode===\"REST-JSON\"&&(delete e.id,delete e[this.action_param]),JSON.stringify(e);}_applyPayload(t){const e=this.$gantt.ajax;if(this._payload)for(const n in this._payload)t=t+e.urlSeparator(t)+this.escape(n)+\"=\"+this.escape(this._payload[n]);return t;}_cleanupArgumentsBeforeSend(t){let e;if(t[this.action_param]===void 0){e={};for(const n in t)e[n]=this._cleanupArgumentsBeforeSend(t[n]);}else e=this._cleanupItemBeforeSend(t);return e;}_cleanupItemBeforeSend(t){let e=null;return t&&(t[this.action_param]===\"deleted\"?(e={},e.id=t.id,e[this.action_param]=t[this.action_param]):e=t),e;}_sendData(t,e){if(!t)return;if(!this.callEvent(\"onBeforeDataSending\",e?[e,this.getState(e),t]:[null,null,t]))return!1;e&&(this._in_progress[e]=(/* @__PURE__ */new Date()).valueOf());const n=this.$gantt.ajax;if(this._tMode===\"CUSTOM\"){const l=this.getState(e),c=this.getActionByState(l);delete t[this.action_param];const d=this.getGanttMode(),u=_=>{let p=l||\"updated\",y=e,k=e;_&&(p=_.action||l,y=_.sid||y,k=_.id||_.tid||k),this.afterUpdateCallback(y,k,p,_,d);};let h;if(this._router instanceof Function){if(this._routerParametersFormat===\"object\"){const _={entity:d,action:c,data:t,id:e};h=this._router(_);}else h=this._router(d,c,t,e);}else if(this._router[d]instanceof Function)h=this._router[d](c,t,e);else{const _=\"Incorrect configuration of gantt.createDataProcessor\",p=`\nYou need to either add missing properties to the dataProcessor router object or to use a router function.\nSee https://docs.dhtmlx.com/gantt/desktop__server_side.html#customrouting and https://docs.dhtmlx.com/gantt/api__gantt_createdataprocessor.html for details.`;if(!this._router[d])throw new Error(`${_}: router for the **${d}** entity is not defined. ${p}`);switch(l){case\"inserted\":if(!this._router[d].create)throw new Error(`${_}: **create** action for the **${d}** entity is not defined. ${p}`);h=this._router[d].create(t);break;case\"deleted\":if(!this._router[d].delete)throw new Error(`${_}: **delete** action for the **${d}** entity is not defined. ${p}`);h=this._router[d].delete(e);break;default:if(!this._router[d].update)throw new Error(`${_}: **update**\" action for the **${d}** entity is not defined. ${p}`);h=this._router[d].update(t,e);}}if(h){if(!h.then&&h.id===void 0&&h.tid===void 0&&h.action===void 0)throw new Error(\"Incorrect router return value. A Promise or a response object is expected\");h.then?h.then(u).catch(_=>{_&&_.action?u(_):u({action:\"error\",value:_});}):u(h);}else u(null);return;}let i;i={callback:l=>{const c=[];if(e)c.push(e);else if(t)for(const d in t)c.push(d);return this.afterUpdate(this,l,c);},headers:this._headers};const a=\"dhx_version=\"+this.$gantt.getUserData(0,\"version\",this._ganttMode),r=this.serverProcessor+(this._user?n.urlSeparator(this.serverProcessor)+[\"dhx_user=\"+this._user,a].join(\"&\"):\"\");let s,o=this._applyPayload(r);switch(this._tMode){case\"GET\":s=this._cleanupArgumentsBeforeSend(t),i.url=o+n.urlSeparator(o)+this.serialize(s,e),i.method=\"GET\";break;case\"POST\":s=this._cleanupArgumentsBeforeSend(t),i.url=o,i.method=\"POST\",i.data=this.serialize(s,e);break;case\"JSON\":s={};const l=this._cleanupItemBeforeSend(t);for(const c in l)c!==this.action_param&&c!==\"id\"&&c!==\"gr_id\"&&(s[c]=l[c]);i.url=o,i.method=\"POST\",i.data=JSON.stringify({id:e,action:t[this.action_param],data:s});break;case\"REST\":case\"REST-JSON\":switch(o=r.replace(/(&|\\?)editing=true/,\"\"),s=\"\",this.getState(e)){case\"inserted\":i.method=\"POST\",i.data=this.serialize(t,e);break;case\"deleted\":i.method=\"DELETE\",o=o+(o.slice(-1)===\"/\"?\"\":\"/\")+e;break;default:i.method=\"PUT\",i.data=this.serialize(t,e),o=o+(o.slice(-1)===\"/\"?\"\":\"/\")+e;}i.url=this._applyPayload(o);}return this._waitMode++,n.query(i);}_forEachUpdatedRow(t){const e=this.updatedRows.slice();for(let n=0;n<e.length;n++){const i=e[n];this.$gantt.getUserData(i,this.action_param,this._ganttMode)&&t.call(this,i);}}_setDefaultTransactionMode(){this.serverProcessor&&(this.setTransactionMode(\"POST\",!0),this.serverProcessor+=(this.serverProcessor.indexOf(\"?\")!==-1?\"&\":\"?\")+\"editing=true\",this._serverProcessor=this.serverProcessor);}_getXmlNodeValue(t){return t.firstChild?t.firstChild.nodeValue:\"\";}_getAllData(){const t={};let e=!1;return this._forEachUpdatedRow(function(n){if(this._in_progress[n]||this.is_invalid(n))return;const i=this._getRowData(n);this.callEvent(\"onBeforeUpdate\",[n,this.getState(n),i])&&(t[n]=i,e=!0,this._in_progress[n]=(/* @__PURE__ */new Date()).valueOf());}),e?t:null;}_prepareDate(t){return this.$gantt.defined(this.$gantt.templates.xml_format)?this.$gantt.templates.xml_format(t):this.$gantt.templates.format_date(t);}_prepareArray(t,e){return e.push(t),t.map(n=>Q(n)?this._prepareDate(n):Array.isArray(n)&&!zt(e,n)?this._prepareArray(n,e):n&&typeof n==\"object\"&&!zt(e,n)?this._prepareObject(n,e):n);}_prepareObject(t,e){const n={};e.push(t);for(const i in t){if(i.substr(0,1)===\"$\")continue;const a=t[i];Q(a)?n[i]=this._prepareDate(a):a===null?n[i]=\"\":Array.isArray(a)&&!zt(e,a)?n[i]=this._prepareArray(a,e):a&&typeof a==\"object\"&&!zt(e,a)?n[i]=this._prepareObject(a,e):n[i]=a;}return n;}_prepareDataItem(t){const e=this._prepareObject(t,[]);return e[this.action_param]=this.$gantt.getUserData(t.id,this.action_param,this._ganttMode),e;}getStoredItem(t){return this._storage.getStoredItem(t);}_getRowData(t){let e;const n=this.$gantt;return this.getGanttMode()===\"task\"?n.isTaskExists(t)&&(e=this.$gantt.getTask(t)):this.getGanttMode()===\"assignment\"?this.$gantt.$data.assignmentsStore.exists(t)&&(e=this.$gantt.$data.assignmentsStore.getItem(t)):this.getGanttMode()===\"baseline\"?this.$gantt.$data.baselineStore.exists(t)&&(e=this.$gantt.$data.baselineStore.getItem(t)):n.isLinkExists(t)&&(e=this.$gantt.getLink(t)),e||(e=this.getStoredItem(t)),e||(e={id:t}),this._prepareDataItem(e);}};const ni=function(t){return new un(t);},ii=function(t){let e,n,i;t instanceof Function?e=t:t.hasOwnProperty(\"router\")?e=t.router:t.hasOwnProperty(\"assignment\")||t.hasOwnProperty(\"baseline\")||t.hasOwnProperty(\"link\")||t.hasOwnProperty(\"task\")?e=t:t.hasOwnProperty(\"headers\")&&(i=t.headers),n=e?\"CUSTOM\":t.mode||\"REST-JSON\";const a=new un(t.url);return a.init(this),a.setTransactionMode({mode:n,router:e,headers:i},t.batchUpdate),t.deleteAfterConfirmation&&(a.deleteAfterConfirmation=t.deleteAfterConfirmation),a;};function ai(t){var e={},n=!1;function i(l,c){c=typeof c==\"function\"?c:function(){},e[l]||(e[l]=this[l],this[l]=c);}function a(l){e[l]&&(this[l]=e[l],e[l]=null);}function r(l){for(var c in l)i.call(this,c,l[c]);}function s(){for(var l in e)a.call(this,l);}function o(l){try{l();}catch(c){Z.console.error(c);}}return t.$services.getService(\"state\").registerProvider(\"batchUpdate\",function(){return{batch_update:n};},!1),function(l,c){if(n)o(l);else{var d,u=this._dp&&this._dp.updateMode!=\"off\";u&&(d=this._dp.updateMode,this._dp.setUpdateMode(\"off\"));var h={},_={render:!0,refreshData:!0,refreshTask:!0,refreshLink:!0,resetProjectDates:function(y){h[y.id]=y;}};for(var p in r.call(this,_),n=!0,this.callEvent(\"onBeforeBatchUpdate\",[]),o(l),this.callEvent(\"onAfterBatchUpdate\",[]),s.call(this),h)this.resetProjectDates(h[p]);n=!1,c||this.render(),u&&(this._dp.setUpdateMode(d),this._dp.setGanttMode(\"task\"),this._dp.sendData(),this._dp.setGanttMode(\"link\"),this._dp.sendData());}};}function ri(t){t.batchUpdate=ai(t);}function si(t){const e=/* @__PURE__ */function(i){return{_needRecalc:!0,reset:function(){this._needRecalc=!0;},_isRecalcNeeded:function(){return!this._isGroupSort()&&this._needRecalc;},_isGroupSort:function(){return!!i.getState().group_mode;},_getWBSCode:function(a){return a?(this._isRecalcNeeded()&&this._calcWBS(),a.$virtual?\"\":this._isGroupSort()?a.$wbs||\"\":(a.$wbs||(this.reset(),this._calcWBS()),a.$wbs)):\"\";},_setWBSCode:function(a,r){a.$wbs=r;},getWBSCode:function(a){return this._getWBSCode(a);},getByWBSCode:function(a){let r=a.split(\".\"),s=i.config.root_id;for(let o=0;o<r.length;o++){const l=i.getChildren(s);let c=1*r[o]-1;if(!i.isTaskExists(l[c]))return null;s=l[c];}return i.isTaskExists(s)?i.getTask(s):null;},_calcWBS:function(){if(!this._isRecalcNeeded())return;let a=!0;i.eachTask(function(r){if(r.type==i.config.types.placeholder)return;if(a)return a=!1,void this._setWBSCode(r,\"1\");const s=this._getPrevNonPlaceholderSibling(r.id);if(s!==null)this._increaseWBS(r,s);else{let o=i.getParent(r.id);this._setWBSCode(r,i.getTask(o).$wbs+\".1\");}},i.config.root_id,this),this._needRecalc=!1;},_increaseWBS:function(a,r){let s=i.getTask(r).$wbs;s&&(s=s.split(\".\"),s[s.length-1]++,this._setWBSCode(a,s.join(\".\")));},_getPrevNonPlaceholderSibling:function(a){let r,s=a;do r=i.getPrevSibling(s),s=r;while(r!==null&&i.getTask(r).type==i.config.types.placeholder);return r;}};}(t);function n(){return e.reset(),!0;}t.getWBSCode=function(i){return e.getWBSCode(i);},t.getTaskByWBSCode=function(i){return e.getByWBSCode(i);},t.attachEvent(\"onAfterTaskMove\",n),t.attachEvent(\"onBeforeParse\",n),t.attachEvent(\"onAfterTaskDelete\",n),t.attachEvent(\"onAfterTaskAdd\",n),t.attachEvent(\"onAfterSort\",n);}function oi(t){var e={},n=!1;t.$data.tasksStore.attachEvent(\"onStoreUpdated\",function(){e={},n=!1;}),t.attachEvent(\"onBeforeGanttRender\",function(){e={};});var i=String(Math.random());function a(l){return l===null?i+String(l):String(l);}function r(l,c,d){return Array.isArray(l)?l.map(function(u){return a(u);}).join(\"_\")+`_${c}_${d}`:a(l)+`_${c}_${d}`;}function s(l,c,d){var u,h=r(c,l,JSON.stringify(d)),_={};return kt(c,function(p){_[a(p)]=!0;}),e[h]?u=e[h]:(u=e[h]=[],t.eachTask(function(p){if(d){if(!d[t.getTaskType(p)])return;}else if(p.type==t.config.types.project)return;l in p&&kt(fe(p[l])?p[l]:[p[l]],function(y){var k=y&&y.resource_id?y.resource_id:y;if(_[a(k)])u.push(p);else if(!n){var b=r(y,l);e[b]||(e[b]=[]),e[b].push(p);}});}),n=!0),u;}function o(l,c,d){var u=t.config.resource_property,h=[];if(t.getDatastore(\"task\").exists(c)){var _=t.getTask(c);h=_[u]||[];}Array.isArray(h)||(h=[h]);for(var p=0;p<h.length;p++)h[p].resource_id==l&&d.push({task_id:_.id,resource_id:h[p].resource_id,value:h[p].value});}return{getTaskBy:function(l,c,d){return typeof l==\"function\"?(u=l,h=[],t.eachTask(function(_){u(_)&&h.push(_);}),h):fe(c)?s(l,c,d):s(l,[c],d);var u,h;},getResourceAssignments:function(l,c){var d=[],u=t.config.resource_property;return c!==void 0?o(l,c,d):t.getTaskBy(u,l).forEach(function(h){o(l,h.id,d);}),d;}};}function li(t){var e=oi(t);t.ext.resources=/* @__PURE__ */function(a){const r={renderEditableLabel:function(s,o,l,c,d){const u=a.config.readonly?\"\":\"contenteditable\";if(s<l.end_date&&o>l.start_date){for(let h=0;h<d.length;h++){const _=d[h];return\"<div \"+u+\" data-assignment-cell data-assignment-id='\"+_.id+\"' data-row-id='\"+l.id+\"' data-task='\"+l.$task_id+\"' data-start-date='\"+a.templates.format_date(s)+\"' data-end-date='\"+a.templates.format_date(o)+\"'>\"+_.value+\"</div>\";}return\"<div \"+u+\" data-assignment-cell data-empty  data-row-id='\"+l.id+\"' data-resource-id='\"+l.$resource_id+\"' data-task='\"+l.$task_id+\"' data-start-date='\"+a.templates.format_date(s)+\"''  data-end-date='\"+a.templates.format_date(o)+\"'>-</div>\";}return\"\";},renderSummaryLabel:function(s,o,l,c,d){let u=d.reduce(function(h,_){return h+Number(_.value);},0);return u%1&&(u=Math.round(10*u)/10),u?\"<div>\"+u+\"</div>\":\"\";},editableResourceCellTemplate:function(s,o,l,c,d){return l.$role===\"task\"?r.renderEditableLabel(s,o,l,c,d):r.renderSummaryLabel(s,o,l,c,d);},editableResourceCellClass:function(s,o,l,c,d){const u=[];u.push(\"resource_marker\"),l.$role===\"task\"?u.push(\"task_cell\"):u.push(\"resource_cell\");const h=d.reduce(function(p,y){return p+Number(y.value);},0);let _=Number(l.capacity);return isNaN(_)&&(_=8),h<=_?u.push(\"workday_ok\"):u.push(\"workday_over\"),u.join(\" \");},getSummaryResourceAssignments:function(s){let o;const l=a.getDatastore(a.config.resource_store),c=l.getItem(s);return c.$role===\"task\"?o=a.getResourceAssignments(c.$resource_id,c.$task_id):(o=a.getResourceAssignments(s),l.eachItem&&l.eachItem(function(d){d.$role!==\"task\"&&(o=o.concat(a.getResourceAssignments(d.id)));},s)),o;},initEditableDiagram:function(){a.config.resource_render_empty_cells=!0,function(){let l=null;function c(){return l&&cancelAnimationFrame(l),l=requestAnimationFrame(function(){a.$container&&Array.prototype.slice.call(a.$container.querySelectorAll(\".resourceTimeline_cell [data-assignment-cell]\")).forEach(function(d){d.contentEditable=!0;});}),!0;}a.attachEvent(\"onGanttReady\",function(){a.getDatastore(a.config.resource_assignment_store).attachEvent(\"onStoreUpdated\",c),a.getDatastore(a.config.resource_store).attachEvent(\"onStoreUpdated\",c);},{once:!0}),a.attachEvent(\"onGanttLayoutReady\",function(){a.$layout.getCellsByType(\"viewCell\").forEach(function(d){d.$config&&d.$config.view===\"resourceTimeline\"&&d.$content&&d.$content.attachEvent(\"onScroll\",c);});});}();let s=null;function o(){setTimeout(function(){const l=Lt(a.$container);s>-1&&l[s+1].focus();},300);}a.attachEvent(\"onGanttReady\",function(){let l=!1;a.event(a.$container,\"keypress\",function(c){var d=c.target.closest(\".resourceTimeline_cell [data-assignment-cell]\");d&&(c.keyCode!==13&&c.keyCode!==27||d.blur());}),a.event(a.$container,\"keydown\",function(c){c.key===\"Tab\"&&(s=Lt(a.$container).indexOf(document.activeElement));}),a.event(a.$container,\"focusout\",function(c){if(!l){l=!0,setTimeout(function(){l=!1;},300);var d=c.target.closest(\".resourceTimeline_cell [data-assignment-cell]\");if(d){var u=(d.innerText||\"\").trim();u==\"-\"&&(u=\"0\");var h=Number(u),_=d.getAttribute(\"data-row-id\"),p=d.getAttribute(\"data-assignment-id\"),y=d.getAttribute(\"data-task\"),k=d.getAttribute(\"data-resource-id\"),b=a.templates.parse_date(d.getAttribute(\"data-start-date\")),g=a.templates.parse_date(d.getAttribute(\"data-end-date\")),m=a.getDatastore(a.config.resource_assignment_store);if(isNaN(h))a.getDatastore(a.config.resource_store).refresh(_);else{var f=a.getTask(y);if(a.plugins().undo&&a.ext.undo.saveState(y,\"task\"),p){if(h===(x=m.getItem(p)).value)return;if(x.start_date.valueOf()===b.valueOf()&&x.end_date.valueOf()===g.valueOf())x.value=h,h?m.updateItem(x.id):m.removeItem(x.id);else{if(x.end_date.valueOf()>g.valueOf()){var v=a.copy(x);v.id=a.uid(),v.start_date=g,v.duration=a.calculateDuration({start_date:v.start_date,end_date:v.end_date,task:f}),v.delay=a.calculateDuration({start_date:f.start_date,end_date:v.start_date,task:f}),v.mode=x.mode||\"default\",v.duration!==0&&m.addItem(v);}x.start_date.valueOf()<b.valueOf()?(x.end_date=b,x.duration=a.calculateDuration({start_date:x.start_date,end_date:x.end_date,task:f}),x.mode=\"fixedDuration\",x.duration===0?m.removeItem(x.id):m.updateItem(x.id)):m.removeItem(x.id),h&&m.addItem({task_id:x.task_id,resource_id:x.resource_id,value:h,start_date:b,end_date:g,duration:a.calculateDuration({start_date:b,end_date:g,task:f}),delay:a.calculateDuration({start_date:f.start_date,end_date:b,task:f}),mode:\"fixedDuration\"});}a.updateTaskAssignments(f.id),a.updateTask(f.id),o();}else if(h){var x={task_id:y,resource_id:k,value:h,start_date:b,end_date:g,duration:a.calculateDuration({start_date:b,end_date:g,task:f}),delay:a.calculateDuration({start_date:f.start_date,end_date:b,task:f}),mode:\"fixedDuration\"};m.addItem(x),a.updateTaskAssignments(f.id),a.updateTask(f.id),o();}}}}});},{once:!0});}};return r;}(t),t.config.resources={dataprocessor_assignments:!1,dataprocessor_resources:!1,editable_resource_diagram:!1,resource_store:{type:\"treeDataStore\",fetchTasks:!1,initItem:function(a){return a.parent=a.parent||t.config.root_id,a[t.config.resource_property]=a.parent,a.open=!0,a;}},lightbox_resources:function(a){const r=[],s=t.getDatastore(t.config.resource_store);return a.forEach(function(o){if(!s.hasChild(o.id)){const l=t.copy(o);l.key=o.id,l.label=o.text,r.push(l);}}),r;}},t.attachEvent(\"onBeforeGanttReady\",function(){if(t.getDatastore(t.config.resource_store))return;const a=t.config.resources?t.config.resources.resource_store:void 0;let r=a?a.fetchTasks:void 0;t.config.resources&&t.config.resources.editable_resource_diagram&&(r=!0);let s=function(l){return l.parent=l.parent||t.config.root_id,l[t.config.resource_property]=l.parent,l.open=!0,l;};a&&a.initItem&&(s=a.initItem);const o=a&&a.type?a.type:\"treeDatastore\";t.$resourcesStore=t.createDatastore({name:t.config.resource_store,type:o,fetchTasks:r!==void 0&&r,initItem:s}),t.$data.resourcesStore=t.$resourcesStore,t.$resourcesStore.attachEvent(\"onParse\",function(){let l,c=function(d){const u=[];return d.forEach(function(h){const _=t.copy(h);_.key=h.id,_.label=h.text,u.push(_);}),u;};t.config.resources&&t.config.resources.lightbox_resources&&(c=t.config.resources.lightbox_resources),t.config.resources&&t.config.resources.editable_resource_diagram?l=c(t.$resourcesStore.getItems().filter(d=>{let u=t.getResourceAssignments(d.id);if(!t.$resourcesStore.hasChild(d.id)||u&&u.length)return!d.$resource_id||!d.$task_id;})):l=c(t.$resourcesStore.getItems()),t.updateCollection(\"resourceOptions\",l);});}),t.getTaskBy=e.getTaskBy,t.getResourceAssignments=e.getResourceAssignments,t.config.resource_property=\"owner_id\",t.config.resource_store=\"resource\",t.config.resource_render_empty_cells=!1,t.templates.histogram_cell_class=function(a,r,s,o,l){},t.templates.histogram_cell_label=function(a,r,s,o,l){return o.length+\"/3\";},t.templates.histogram_cell_allocated=function(a,r,s,o,l){return o.length/3;},t.templates.histogram_cell_capacity=function(a,r,s,o,l){return 0;};const n=function(a,r,s,o,l){return o.length<=1?\"gantt_resource_marker_ok\":\"gantt_resource_marker_overtime\";},i=function(a,r,s,o,l){return 8*o.length;};t.templates.resource_cell_value=i,t.templates.resource_cell_class=n,t.attachEvent(\"onBeforeGanttReady\",function(){t.config.resources&&t.config.resources.editable_resource_diagram&&(t.config.resource_render_empty_cells=!0,t.templates.resource_cell_value===i&&(t.templates.resource_cell_value=t.ext.resources.editableResourceCellTemplate),t.templates.resource_cell_class===n&&(t.templates.resource_cell_class=t.ext.resources.editableResourceCellClass),t.ext.resources.initEditableDiagram(t));});}function di(t){var e=\"$resourceAssignments\";t.config.resource_assignment_store=\"resourceAssignments\",t.config.process_resource_assignments=!0;var n=\"auto\",i=\"singleValue\",a=\"valueArray\",r=\"resourceValueArray\",s=\"assignmentsArray\",o=n,l=\"fixedDates\",c=\"fixedDuration\",d=\"default\";function u(f,v){f.start_date?f.start_date=t.date.parseDate(f.start_date,\"parse_date\"):f.start_date=null,f.end_date?f.end_date=t.date.parseDate(f.end_date,\"parse_date\"):f.end_date=null;var x=Number(f.delay),$=!1;if(isNaN(x)?(f.delay=0,$=!0):f.delay=x,t.defined(f.value)||(f.value=null),!f.task_id||!f.resource_id)return!1;if(f.mode=f.mode||d,f.mode===c&&(isNaN(Number(f.duration))&&(v=v||t.getTask(f.task_id),f.duration=t.calculateDuration({start_date:f.start_date,end_date:f.end_date,id:v})),$&&(v=v||t.getTask(f.task_id),f.delay=t.calculateDuration({start_date:v.start_date,end_date:f.start_date,id:v}))),f.mode!==l&&(v||t.isTaskExists(f.task_id))){var w=_(f,v=v||t.getTask(f.task_id));f.start_date=w.start_date,f.end_date=w.end_date,f.duration=w.duration;}}var h=t.createDatastore({name:t.config.resource_assignment_store,initItem:function(f){return f.id||(f.id=t.uid()),u(f),f;}});function _(f,v){if(f.mode===l)return{start_date:f.start_date,end_date:f.end_date,duration:f.duration};var x,$,w=f.delay?t.calculateEndDate({start_date:v.start_date,duration:f.delay,task:v}):new Date(v.start_date);return f.mode===c?(x=t.calculateEndDate({start_date:w,duration:f.duration,task:v}),$=f.duration):(x=new Date(v.end_date),$=v.duration-f.delay),{start_date:w,end_date:x,duration:$};}function p(f){const v=t.config.resource_property;let x=f[v];const $=[];let w=o===n;if(t.defined(x)&&x){Array.isArray(x)||(x=[x],w&&(o=i,w=!1));const S={};x.forEach(function(T){T.resource_id||(T={resource_id:T},w&&(o=a,w=!1)),w&&(T.id&&T.resource_id?(o=s,w=!1):(o=r,w=!1));let E,C=d;T.mode||(T.start_date&&T.end_date||T.start_date&&T.duration)&&(C=c),E=T.id||!T.$id||S[T.$id]?T.id&&!S[T.id]?T.id:t.uid():T.$id,S[E]=!0;const D={id:E,start_date:T.start_date,duration:T.duration,end_date:T.end_date,delay:T.delay,task_id:f.id,resource_id:T.resource_id,value:T.value,mode:T.mode||C};Object.keys(T).forEach(M=>{M!=\"$id\"&&(D[M]=T[M]);}),D.start_date&&D.start_date.getMonth&&D.end_date&&D.end_date.getMonth&&typeof D.duration==\"number\"||u(D,f),$.push(D);});}return $;}function y(f){if(t.isTaskExists(f)){var v=t.getTask(f);k(v,t.getTaskAssignments(v.id));}}function k(f,v){v.sort(function(x,$){return x.start_date&&$.start_date&&x.start_date.valueOf()!=$.start_date.valueOf()?x.start_date-$.start_date:0;}),o==s?f[t.config.resource_property]=v:o==r&&(f[t.config.resource_property]=v.map(function(x){return{$id:x.id,start_date:x.start_date,duration:x.duration,end_date:x.end_date,delay:x.delay,resource_id:x.resource_id,value:x.value,mode:x.mode};})),f[e]=v;}function b(f){var v=p(f);return v.forEach(function(x){x.id=x.id||t.uid();}),v;}function g(f,v){var x=function($,w){var S={inBoth:[],inTaskNotInStore:[],inStoreNotInTask:[]};if(o==i){var T=$[0],E=T?T.resource_id:null,C=!1;w.forEach(function(A){A.resource_id!=E?S.inStoreNotInTask.push(A):A.resource_id==E&&(S.inBoth.push({store:A,task:T}),C=!0);}),!C&&T&&S.inTaskNotInStore.push(T);}else if(o==a){var D={},M={},I={};$.forEach(function(A){D[A.resource_id]=A;}),w.forEach(function(A){M[A.resource_id]=A;}),$.concat(w).forEach(function(A){if(!I[A.resource_id]){I[A.resource_id]=!0;var N=D[A.resource_id],L=M[A.resource_id];N&&L?S.inBoth.push({store:L,task:N}):N&&!L?S.inTaskNotInStore.push(N):!N&&L&&S.inStoreNotInTask.push(L);}});}else o!=s&&o!=r||(D={},M={},I={},$.forEach(function(A){D[A.id||A.$id]=A;}),w.forEach(function(A){M[A.id]=A;}),$.concat(w).forEach(function(A){var N=A.id||A.$id;if(!I[N]){I[N]=!0;var L=D[N],O=M[N];L&&O?S.inBoth.push({store:O,task:L}):L&&!O?S.inTaskNotInStore.push(L):!L&&O&&S.inStoreNotInTask.push(O);}}));return S;}(p(f),v);x.inStoreNotInTask.forEach(function($){h.removeItem($.id);}),x.inTaskNotInStore.forEach(function($){h.addItem($);}),x.inBoth.forEach(function($){if(function(S,T){var E={id:!0};for(var C in S)if(!E[C]&&String(S[C])!==String(T[C]))return!0;return!1;}($.task,$.store))(function(S,T){var E={id:!0};for(var C in S)E[C]||(T[C]=S[C]);})($.task,$.store),h.updateItem($.store.id);else if($.task.start_date&&$.task.end_date&&$.task.mode!==l){var w=_($.store,f);$.store.start_date.valueOf()==w.start_date.valueOf()&&$.store.end_date.valueOf()==w.end_date.valueOf()||($.store.start_date=w.start_date,$.store.end_date=w.end_date,$.store.duration=w.duration,h.updateItem($.store.id));}}),y(f.id);}function m(f){var v=f[e]||h.find(function(x){return x.task_id==f.id;});g(f,v);}t.$data.assignmentsStore=h,t.attachEvent(\"onGanttReady\",function(){if(t.config.process_resource_assignments){t.attachEvent(\"onParse\",function(){t.silent(function(){h.clearAll();var E=[];t.eachTask(function(C){if(C.type!==t.config.types.project){var D=b(C);k(C,D),D.forEach(function(M){E.push(M);});}}),h.parse(E);});});var f=!1,v=!1,x={},$=!1;t.attachEvent(\"onBeforeBatchUpdate\",function(){f=!0;}),t.attachEvent(\"onAfterBatchUpdate\",function(){if(v){var E={};for(var C in x)E[C]=t.getTaskAssignments(x[C].id);for(var C in t.config.process_resource_assignments&&o===\"resourceValueArray\"&&(T=null),x)g(x[C],E[C]);}v=!1,f=!1,x={};}),t.attachEvent(\"onTaskCreated\",function(E){var C=b(E);return h.parse(C),k(E,C),!0;}),t.attachEvent(\"onAfterTaskUpdate\",function(E,C){f?(v=!0,x[E]=C):C.unscheduled||m(C);}),t.attachEvent(\"onAfterTaskAdd\",function(E,C){f?(v=!0,x[E]=C):m(C);}),t.attachEvent(\"onRowDragEnd\",function(E){m(t.getTask(E));}),t.$data.tasksStore.attachEvent(\"onAfterDeleteConfirmed\",function(E,C){var D,M=[E];t.eachTask(function(I){M.push(I.id);},E),D={},M.forEach(function(I){D[I]=!0;}),h.find(function(I){return D[I.task_id];}).forEach(function(I){h.removeItem(I.id);});}),t.$data.tasksStore.attachEvent(\"onClearAll\",function(){return w=null,S=null,T=null,h.clearAll(),!0;}),t.attachEvent(\"onTaskIdChange\",function(E,C){h.find(function(D){return D.task_id==E;}).forEach(function(D){D.task_id=C,h.updateItem(D.id);}),y(C);}),t.attachEvent(\"onBeforeUndo\",function(E){return $=!0,!0;}),t.attachEvent(\"onAfterUndo\",function(E){$=!0;});var w=null,S=null,T=null;h.attachEvent(\"onStoreUpdated\",function(){return f&&!$||(w=null,S=null,T=null),!0;}),t.getResourceAssignments=function(E,C){var D=t.defined(C)&&C!==null;return w===null&&(w={},S={},h.eachItem(function(M){w[M.resource_id]||(w[M.resource_id]=[]),w[M.resource_id].push(M);var I=M.resource_id+\"-\"+M.task_id;S[I]||(S[I]=[]),S[I].push(M);})),D?(S[E+\"-\"+C]||[]).slice():(w[E]||[]).slice();},t.getTaskAssignments=function(E){if(T===null){var C=[];T={},h.eachItem(function(D){T[D.task_id]||(T[D.task_id]=[]),T[D.task_id].push(D),D.task_id==E&&C.push(D);});}return(T[E]||[]).slice();},t.getTaskResources=function(E){const C=t.getDatastore(\"resource\"),D=t.getTaskAssignments(E),M={};D.forEach(function(A){M[A.resource_id]||(M[A.resource_id]=A.resource_id);});const I=[];for(const A in M){const N=C.getItem(M[A]);N&&I.push(N);}return I;},t.updateTaskAssignments=y;}},{once:!0});}function ci(t){function e(o){return function(){return!t.config.placeholder_task||o.apply(this,arguments);};}function n(){var o=t.getTaskBy(\"type\",t.config.types.placeholder);if(!o.length||!t.isTaskExists(o[0].id)){var l={unscheduled:!0,type:t.config.types.placeholder,duration:0,text:t.locale.labels.new_task};if(t.callEvent(\"onTaskCreated\",[l])===!1)return;t.addTask(l);}}function i(o){var l=t.getTask(o);l.type==t.config.types.placeholder&&(l.start_date&&l.end_date&&l.unscheduled&&(l.unscheduled=!1),t.batchUpdate(function(){var c=t.copy(l);t.silent(function(){t.deleteTask(l.id);}),delete c[\"!nativeeditor_status\"],c.type=t.config.types.task,c.id=t.uid(),t.addTask(c);}));}t.config.types.placeholder=\"placeholder\",t.attachEvent(\"onDataProcessorReady\",e(function(o){o&&!o._silencedPlaceholder&&(o._silencedPlaceholder=!0,o.attachEvent(\"onBeforeUpdate\",e(function(l,c,d){return d.type!=t.config.types.placeholder||(o.setUpdated(l,!1),!1);})));}));var a=!1;function r(o){return!!(t.config.types.placeholder&&t.isTaskExists(o)&&t.getTask(o).type==t.config.types.placeholder);}function s(o){return!(!r(o.source)&&!r(o.target));}t.attachEvent(\"onGanttReady\",function(){a||(a=!0,t.attachEvent(\"onAfterTaskUpdate\",e(i)),t.attachEvent(\"onAfterTaskAdd\",e(function(o,l){l.type!=t.config.types.placeholder&&(t.getTaskBy(\"type\",t.config.types.placeholder).forEach(function(c){t.silent(function(){t.isTaskExists(c.id)&&t.deleteTask(c.id);});}),n());})),t.attachEvent(\"onParse\",e(n)));}),t.attachEvent(\"onLinkValidation\",function(o){return!s(o);}),t.attachEvent(\"onBeforeLinkAdd\",function(o,l){return!s(l);}),t.attachEvent(\"onBeforeUndoStack\",function(o){for(var l=0;l<o.commands.length;l++){var c=o.commands[l];c.entity===\"task\"&&c.value.type===t.config.types.placeholder&&(o.commands.splice(l,1),l--);}return!0;});}function ui(t){function e(d){return function(){return!t.config.auto_types||t.getTaskType(t.config.types.project)!=t.config.types.project||d.apply(this,arguments);};}function n(d,u){var h=t.getTask(d),_=r(h);_!==!1&&t.getTaskType(h)!==_&&(u.$needsUpdate=!0,u[h.id]={task:h,type:_});}function i(d){if(!t.getState().group_mode){var u=function(h,_){return n(h,_=_||{}),t.eachParent(function(p){n(p.id,_);},h),_;}(d);u.$needsUpdate&&t.batchUpdate(function(){(function(h){for(var _ in h)if(h[_]&&h[_].task){var p=h[_].task;p.type=h[_].type,t.updateTask(p.id);}})(u);});}}var a;function r(d){var u=t.config.types,h=t.hasChild(d.id),_=t.getTaskType(d.type);return h&&_===u.task?u.project:!h&&_===u.project&&u.task;}var s,o,l=!0;function c(d){d!=t.config.root_id&&t.isTaskExists(d)&&i(d);}t.attachEvent(\"onParse\",e(function(){l=!1,t.getState().group_mode||(t.batchUpdate(function(){t.eachTask(function(d){var u=r(d);u!==!1&&function(h,_){t.getState().group_mode||(h.type=_,t.updateTask(h.id));}(d,u);});}),l=!0);})),t.attachEvent(\"onAfterTaskAdd\",e(function(d){l&&i(d);})),t.attachEvent(\"onAfterTaskUpdate\",e(function(d){l&&i(d);})),t.attachEvent(\"onBeforeTaskDelete\",e(function(d,u){return a=t.getParent(d),!0;})),t.attachEvent(\"onAfterTaskDelete\",e(function(d,u){c(a);})),t.attachEvent(\"onRowDragStart\",e(function(d,u,h){return s=t.getParent(d),!0;})),t.attachEvent(\"onRowDragEnd\",e(function(d,u){c(s),i(d);})),t.attachEvent(\"onBeforeTaskMove\",e(function(d,u,h){return o=t.getParent(d),!0;})),t.attachEvent(\"onAfterTaskMove\",e(function(d,u,h){document.querySelector(\".gantt_drag_marker\")||(c(o),i(d));}));}const Zt=class Zt{constructor(){this.canParse=e=>!isNaN(this.parse(e)),this.format=e=>String(e),this.parse=e=>parseInt(e,10);}};Zt.create=(e=null)=>new Zt();let Pt=Zt;const Qt=class Qt{constructor(e){this.format=n=>this._getWBSCode(n.source),this.canParse=n=>this._linkReg.test(n),this.parse=n=>{if(!this.canParse(n))return null;const i=this._linkReg.exec(n)[0].trim();return{id:void 0,source:this._findSource(i)||null,target:null,type:this._gantt.config.links.finish_to_start,lag:0};},this._getWBSCode=n=>{const i=this._gantt.getTask(n);return this._gantt.getWBSCode(i);},this._findSource=n=>{const i=new RegExp(\"^[0-9.]+\",\"i\");if(i.exec(n)){const a=i.exec(n)[0],r=this._gantt.getTaskByWBSCode(a);if(r)return r.id;}return null;},this._linkReg=/^[0-9\\.]+/,this._gantt=e;}};Qt.create=(e=null,n)=>new Qt(n);let ke=Qt;function hi(t){t.ext.formatters={durationFormatter:function(e){return e||(e={}),e.store||(e.store=t.config.duration_unit),e.enter||(e.enter=t.config.duration_unit),Pt.create(e,t);},linkFormatter:function(e){return ke.create(e,t);}};}function _i(t){t.ext=t.ext||{},t.config.show_empty_state=!1,t.ext.emptyStateElement=t.ext.emptyStateElement||{isEnabled:()=>t.config.show_empty_state===!0,isGanttEmpty:()=>!t.getTaskByTime().length,renderContent(e){const n=`<div class='gantt_empty_state'><div class='gantt_empty_state_image'></div>${`<div class='gantt_empty_state_text'>\n    <div class='gantt_empty_state_text_link' data-empty-state-create-task>${t.locale.labels.empty_state_text_link}</div>\n    <div class='gantt_empty_state_text_description'>${t.locale.labels.empty_state_text_description}</div>\n    </div>`}</div>`;e.innerHTML=n;},clickEvents:[],attachAddTaskEvent(){const e=t.attachEvent(\"onEmptyClick\",function(n){t.utils.dom.closest(n.target,\"[data-empty-state-create-task]\")&&t.createTask({id:t.uid(),text:\"New Task\"});});this.clickEvents.push(e);},detachAddTaskEvents(){this.clickEvents.forEach(function(e){t.detachEvent(e);}),this.clickEvents=[];},getContainer(){if(t.$container){const e=t.utils.dom;if(t.$container.contains(t.$grid_data))return e.closest(t.$grid_data,\".gantt_layout_content\");if(t.$container.contains(t.$task_data))return e.closest(t.$task_data,\".gantt_layout_content\");}return null;},getNode(){const e=this.getContainer();return e?e.querySelector(\".gantt_empty_state_wrapper\"):null;},show(){const e=this.getContainer();if(!e&&this.isGanttEmpty())return null;const n=document.createElement(\"div\");n.className=\"gantt_empty_state_wrapper\",n.style.marginTop=t.config.scale_height-e.offsetHeight+\"px\";const i=t.$container.querySelectorAll(\".gantt_empty_state_wrapper\");Array.prototype.forEach.call(i,function(a){a.parentNode.removeChild(a);}),this.detachAddTaskEvents(),this.attachAddTaskEvent(),e.appendChild(n),this.renderContent(n);},hide(){const e=this.getNode();if(!e)return!1;e.parentNode.removeChild(e);},init(){}},t.attachEvent(\"onDataRender\",function(){const e=t.ext.emptyStateElement;e.isEnabled()&&e.isGanttEmpty()?e.show():e.hide();});}const hn=function(t,e){const n=e.baselines&&e.baselines.length,i=t.config.baselines.render_mode==\"separateRow\"||t.config.baselines.render_mode==\"individualRow\";if(n&&i)return!0;},$t=function(t){return t.render&&t.render==\"split\"&&!t.$open;};function gi(t){t.config.baselines={datastore:\"baselines\",render_mode:!1,dataprocessor_baselines:!1,row_height:16,bar_height:8};const e=t.createDatastore({name:t.config.baselines.datastore,initItem:function(a){return a.id||(a.id=t.uid()),function(r){if(!r.task_id||!r.start_date&&!r.end_date)return!1;r.start_date?r.start_date=t.date.parseDate(r.start_date,\"parse_date\"):r.start_date=null,r.end_date?r.end_date=t.date.parseDate(r.end_date,\"parse_date\"):r.end_date=null,r.duration=r.duration||1,r.start_date&&!r.end_date?r.end_date=t.calculateEndDate(r.start_date,r.duration):r.end_date&&!r.start_date&&(r.start_date=t.calculateEndDate(r.end_date,-r.duration));}(a),a;}});function n(a){let r=0;t.adjustTaskHeightForBaselines(a),t.eachTask(function(s){let o=s.row_height||t.config.row_height;r=r||o,o>r&&(r=o);},a.id),a.row_height<r&&(a.row_height=r);}function i(a){t.eachParent(function(r){if($t(r)){const s=r.row_height||t.getLayoutView(\"timeline\").getBarHeight(r.id);let o=a.row_height;t.getChildren(r.id).forEach(function(l){const c=t.getTask(l);if(c.id==a.id)return;const d=c.row_height||t.getLayoutView(\"timeline\").getBarHeight(c.id);o=o||d,d>o&&(o=d);}),r.row_height=o,r.bar_height=r.bar_height||s;}},a.id);}t.$data.baselineStore=e,t.adjustTaskHeightForBaselines=function(a){let r,s,o=a.baselines&&a.baselines.length||0;const l=t.config.baselines.row_height,c=t.getLayoutView(\"timeline\");if(c&&t.config.show_chart)switch(t.config.baselines.render_mode){case\"taskRow\":default:a.row_height=a.bar_height+8;break;case\"separateRow\":r=c.getBarHeight(a.id),o?(a.bar_height=a.bar_height||r,a.bar_height>r&&(r=a.bar_height),a.row_height=r+l):a.bar_height&&(a.row_height=a.bar_height+4),i(a);break;case\"individualRow\":r=c.getBarHeight(a.id),o?(a.bar_height=a.bar_height||r,a.bar_height>r&&(r=a.bar_height),s=l*o,a.row_height=r+s+2):a.bar_height&&(a.row_height=a.bar_height+4),i(a);}},t.attachEvent(\"onGanttReady\",function(){t.config.baselines&&(t.attachEvent(\"onParse\",function(){e.eachItem(function(a){const r=a.task_id;if(t.isTaskExists(r)){const s=t.getTask(r);s.baselines=s.baselines||[];let o=!0;for(let l=0;l<s.baselines.length;l++){let c=s.baselines[l];if(c.id==a.id){o=!1,t.mixin(c,a,!0);break;}}o&&s.baselines.push(a),F(t)||($t(s)?n(s):t.adjustTaskHeightForBaselines(s));}});}),t.attachEvent(\"onBeforeTaskUpdate\",function(a,r){return function(s){let o=!1;const l={},c=s.baselines||[],d=t.getTaskBaselines(s.id);c.length!=d.length&&(o=!0),c.forEach(function(u){l[u.id]=!0;const h=e.getItem(u.id);if(h){const _=+h.start_date!=+u.start_date,p=+h.end_date!=+u.end_date;(_||p)&&e.updateItem(u.id,u);}else e.addItem(u);}),d.forEach(function(u){l[u.id]||e.removeItem(u.id);}),o&&($t(s)?n(s):t.adjustTaskHeightForBaselines(s),t.render());}(r),!0;}),t.attachEvent(\"onAfterUndo\",function(a){if((t.config.baselines.render_mode==\"separateRow\"||t.config.baselines.render_mode==\"individualRow\")&&a){let r=!1;a.commands.forEach(function(s){if(s.entity==\"task\"){const o=s.value.id;if(t.isTaskExists(o)){const l=t.getTask(o);if(l.parent&&t.isTaskExists(l.parent)){const c=t.getTask(l.parent);$t(c)&&(n(c),r=!0);}}}}),r&&t.render();}}),t.attachEvent(\"onAfterTaskDelete\",function(a,r){if(hn&&r.parent&&t.isTaskExists(r.parent)){const s=t.getTask(r.parent);$t(s)&&n(s);}e.eachItem(function(s){t.isTaskExists(s.task_id)||e.removeItem(s.id);});}),t.getTaskBaselines=function(a){const r=[];return e.eachItem(function(s){s.task_id==a&&r.push(s);}),r;},t.$data.baselineStore.attachEvent(\"onClearAll\",function(){return t.eachTask(function(a){a.baselines&&delete a.baselines;}),!0;}),t.$data.tasksStore.attachEvent(\"onClearAll\",function(){return e.clearAll(),!0;}),t.attachEvent(\"onTaskIdChange\",function(a,r){e.find(function(s){return s.task_id==a;}).forEach(function(s){s.task_id=r,e.updateItem(s.id);});}));},{once:!0});}function fi(t){function e(n){throw t.assert(!1,\"Can't parse data: incorrect value of gantt.parse or gantt.load method. Actual argument value: \"+JSON.stringify(n)),new Error(\"Invalid argument for gantt.parse or gantt.load. An object or a JSON string of format https://docs.dhtmlx.com/gantt/desktop__supported_data_formats.html#json is expected. Actual argument value: \"+JSON.stringify(n));}t.load=function(){throw new Error(\"gantt.load() method is not available in the node.js, use gantt.parse() instead\");},t.parse=function(n,i){this.on_load({xmlDoc:{responseText:n}},i);},t.serialize=function(n){return this[n=n||\"json\"].serialize();},t.on_load=function(n,i){if(n.xmlDoc&&n.xmlDoc.status===404)this.assert(!1,\"Failed to load the data from <a href='\"+n.xmlDoc.responseURL+\"' target='_blank'>\"+n.xmlDoc.responseURL+\"</a>, server returns 404\");else if(!t.$destroyed){this.callEvent(\"onBeforeParse\",[]),i||(i=\"json\"),this.assert(this[i],\"Invalid data type:'\"+i+\"'\");var a=n.xmlDoc.responseText,r=this[i].parse(a,n);this._process_loading(r);}},t._process_loading=function(n){n.collections&&this._load_collections(n.collections),n.resources&&this.$data.resourcesStore&&this.$data.resourcesStore.parse(n.resources),t.config.baselines&&n.baselines&&this.$data.baselineStore&&this.$data.baselineStore.parse(n.baselines);const i=n.data||n.tasks;n.assignments&&function(r,s){const o={};s.forEach(l=>{o[l.task_id]||(o[l.task_id]=[]),o[l.task_id].push(l);}),r.forEach(l=>{l[t.config.resource_property]=o[l.id]||[];});}(i,n.assignments),this.$data.tasksStore.parse(i);var a=n.links||(n.collections&&n.collections.links?n.collections.links:[]);this.$data.linksStore.parse(a),this.callEvent(\"onParse\",[]),this.render();},t._load_collections=function(n){var i=!1;for(var a in n)if(n.hasOwnProperty(a)){i=!0;var r=n[a];this.serverList[a]=this.serverList[a]||[];var s=this.serverList[a];if(!s)continue;s.splice(0,s.length);for(var o=0;o<r.length;o++){var l=r[o],c=this.copy(l);for(var d in c.key=c.value,l)if(l.hasOwnProperty(d)){if(d==\"value\"||d==\"label\")continue;c[d]=l[d];}s.push(c);}}i&&this.callEvent(\"onOptionsLoad\",[]);},t.attachEvent(\"onBeforeTaskDisplay\",function(n,i){return!i.$ignore;}),t.json={parse:function(n){if(n||e(n),typeof n==\"string\")if(typeof JSON!=null)try{n=JSON.parse(n);}catch{e(n);}else t.assert(!1,\"JSON is not supported\");return n.data||n.tasks||e(n),n.dhx_security&&(t.security_key=n.dhx_security),n;},serializeTask:function(n){return this._copyObject(n);},serializeLink:function(n){return this._copyLink(n);},_copyLink:function(n){var i={};for(var a in n)i[a]=n[a];return i;},_copyObject:function(n){var i={};for(var a in n)a.charAt(0)!=\"$\"&&(i[a]=n[a],Q(i[a])&&(i[a]=t.defined(t.templates.xml_format)?t.templates.xml_format(i[a]):t.templates.format_date(i[a])));return i;},serialize:function(){var n=[],i=[];let a=[];t.eachTask(function(o){t.resetProjectDates(o),n.push(this.serializeTask(o));},t.config.root_id,this);for(var r=t.getLinks(),s=0;s<r.length;s++)i.push(this.serializeLink(r[s]));return t.getDatastore(\"baselines\").eachItem(function(o){const l=t.json.serializeTask(o);a.push(l);}),{data:n,links:i,baselines:a};}},t.xml={_xmlNodeToJSON:function(n,i){for(var a={},r=0;r<n.attributes.length;r++)a[n.attributes[r].name]=n.attributes[r].value;if(!i){for(r=0;r<n.childNodes.length;r++){var s=n.childNodes[r];s.nodeType==1&&(a[s.tagName]=s.firstChild?s.firstChild.nodeValue:\"\");}a.text||(a.text=n.firstChild?n.firstChild.nodeValue:\"\");}return a;},_getCollections:function(n){for(var i={},a=t.ajax.xpath(\"//coll_options\",n),r=0;r<a.length;r++)for(var s=i[a[r].getAttribute(\"for\")]=[],o=t.ajax.xpath(\".//item\",a[r]),l=0;l<o.length;l++){for(var c=o[l].attributes,d={key:o[l].getAttribute(\"value\"),label:o[l].getAttribute(\"label\")},u=0;u<c.length;u++){var h=c[u];h.nodeName!=\"value\"&&h.nodeName!=\"label\"&&(d[h.nodeName]=h.nodeValue);}s.push(d);}return i;},_getXML:function(n,i,a){a=a||\"data\",i.getXMLTopNode||(i=t.ajax.parse(i));var r=t.ajax.xmltop(a,i.xmlDoc);r&&r.tagName==a||function(o){throw t.assert(!1,\"Can't parse data: incorrect value of gantt.parse or gantt.load method. Actual argument value: \"+JSON.stringify(o)),new Error(\"Invalid argument for gantt.parse or gantt.load. An XML of format https://docs.dhtmlx.com/gantt/desktop__supported_data_formats.html#xmldhtmlxgantt20 is expected. Actual argument value: \"+JSON.stringify(o));}(n);var s=r.getAttribute(\"dhx_security\");return s&&(t.security_key=s),r;},parse:function(n,i){i=this._getXML(n,i);for(var a={},r=a.data=[],s=t.ajax.xpath(\"//task\",i),o=0;o<s.length;o++)r[o]=this._xmlNodeToJSON(s[o]);return a.collections=this._getCollections(i),a;},_copyLink:function(n){return\"<item id='\"+n.id+\"' source='\"+n.source+\"' target='\"+n.target+\"' type='\"+n.type+\"' />\";},_copyObject:function(n){return\"<task id='\"+n.id+\"' parent='\"+(n.parent||\"\")+\"' start_date='\"+n.start_date+\"' duration='\"+n.duration+\"' open='\"+!!n.open+\"' progress='\"+n.progress+\"' end_date='\"+n.end_date+\"'><![CDATA[\"+n.text+\"]]></task>\";},serialize:function(){for(var n=[],i=[],a=t.json.serialize(),r=0,s=a.data.length;r<s;r++)n.push(this._copyObject(a.data[r]));for(r=0,s=a.links.length;r<s;r++)i.push(this._copyLink(a.links[r]));return\"<data>\"+n.join(\"\")+\"<coll_options for='links'>\"+i.join(\"\")+\"</coll_options></data>\";}},t.oldxml={parse:function(n,i){i=t.xml._getXML(n,i,\"projects\");for(var a={collections:{links:[]}},r=a.data=[],s=t.ajax.xpath(\"//task\",i),o=0;o<s.length;o++){r[o]=t.xml._xmlNodeToJSON(s[o]);var l=s[o].parentNode;l.tagName==\"project\"?r[o].parent=\"project-\"+l.getAttribute(\"id\"):r[o].parent=l.parentNode.getAttribute(\"id\");}for(s=t.ajax.xpath(\"//project\",i),o=0;o<s.length;o++)(c=t.xml._xmlNodeToJSON(s[o],!0)).id=\"project-\"+c.id,r.push(c);for(o=0;o<r.length;o++){var c;(c=r[o]).start_date=c.startdate||c.est,c.end_date=c.enddate,c.text=c.name,c.duration=c.duration/8,c.open=1,c.duration||c.end_date||(c.duration=1),c.predecessortasks&&a.collections.links.push({target:c.id,source:c.predecessortasks,type:t.config.links.finish_to_start});}return a;},serialize:function(){t.message(\"Serialization to 'old XML' is not implemented\");}},t.serverList=function(n,i){return i?this.serverList[n]=i.slice(0):this.serverList[n]||(this.serverList[n]=[]),this.serverList[n];};}function ae(t,e,n,i,a){return this.date=t,this.unit=e,this.task=n,this.id=i,this.calendar=a,this;}function re(t,e,n,i,a,r){return this.date=t,this.dir=e,this.unit=n,this.task=i,this.id=a,this.calendar=r,this;}function se(t,e,n,i,a,r,s){return this.start_date=t,this.duration=e,this.unit=n,this.step=i,this.task=a,this.id=r,this.calendar=s,this;}function pi(t,e,n,i){return this.start_date=t,this.end_date=e,this.task=n,this.calendar=i,this.unit=null,this.step=null,this;}var _n=function(t){return{getWorkHoursArguments:function(){var e=arguments[0];if(!bt((e=Q(e)?{date:e}:P({},e)).date))throw t.assert(!1,\"Invalid date argument for getWorkHours method\"),new Error(\"Invalid date argument for getWorkHours method\");return e;},setWorkTimeArguments:function(){return arguments[0];},unsetWorkTimeArguments:function(){return arguments[0];},isWorkTimeArguments:function(){var e,n=arguments[0];if(n instanceof ae)return n;if((e=n.date?new ae(n.date,n.unit,n.task,null,n.calendar):new ae(arguments[0],arguments[1],arguments[2],null,arguments[3])).unit=e.unit||t.config.duration_unit,!bt(e.date))throw t.assert(!1,\"Invalid date argument for isWorkTime method\"),new Error(\"Invalid date argument for isWorkTime method\");return e;},getClosestWorkTimeArguments:function(e){var n,i=arguments[0];if(i instanceof re)return i;if(n=Q(i)?new re(i):new re(i.date,i.dir,i.unit,i.task,null,i.calendar),i.id&&(n.task=i),n.dir=i.dir||\"any\",n.unit=i.unit||t.config.duration_unit,!bt(n.date))throw t.assert(!1,\"Invalid date argument for getClosestWorkTime method\"),new Error(\"Invalid date argument for getClosestWorkTime method\");return n;},_getStartEndConfig:function(e){var n,i=pi;if(e instanceof i)return e;if(Q(e)?n=new i(arguments[0],arguments[1],arguments[2],arguments[3]):(n=new i(e.start_date,e.end_date,e.task),e.id!==null&&e.id!==void 0&&(n.task=e)),n.unit=n.unit||t.config.duration_unit,n.step=n.step||t.config.duration_step,n.start_date=n.start_date||n.start||n.date,!bt(n.start_date))throw t.assert(!1,\"Invalid start_date argument for getDuration method\"),new Error(\"Invalid start_date argument for getDuration method\");if(!bt(n.end_date))throw t.assert(!1,\"Invalid end_date argument for getDuration method\"),new Error(\"Invalid end_date argument for getDuration method\");return n;},getDurationArguments:function(e,n,i,a){return this._getStartEndConfig.apply(this,arguments);},hasDurationArguments:function(e,n,i,a){return this._getStartEndConfig.apply(this,arguments);},calculateEndDateArguments:function(e,n,i,a){var r,s=arguments[0];if(s instanceof se)return s;if(r=Q(s)?new se(arguments[0],arguments[1],arguments[2],void 0,arguments[3],void 0,arguments[4]):new se(s.start_date,s.duration,s.unit,s.step,s.task,null,s.calendar),s.id!==null&&s.id!==void 0&&(r.task=s,r.unit=null,r.step=null),r.unit=r.unit||t.config.duration_unit,r.step=r.step||t.config.duration_step,!bt(r.start_date))throw t.assert(!1,\"Invalid start_date argument for calculateEndDate method\"),new Error(\"Invalid start_date argument for calculateEndDate method\");return r;}};};function gn(){}gn.prototype={_getIntervals:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push({start:t[n],end:t[n+1]});return e;},_toHoursArray:function(t){var e=[];function n(a){var r,s=Math.floor(a/3600),o=a-60*s*60,l=Math.floor(o/60);return s+\":\"+((r=String(l)).length<2&&(r=\"0\"+r),r);}for(var i=0;i<t.length;i++)e.push(n(t[i].start)+\"-\"+n(t[i].end));return e;},_intersectHourRanges:function(t,e){var n=[],i=t.length>e.length?t:e,a=t===i?e:t;i=i.slice(),a=a.slice(),n=[];for(var r=0;r<i.length;r++)for(var s=i[r],o=0;o<a.length;o++){var l=a[o];l.start<s.end&&l.end>s.start&&(n.push({start:Math.max(s.start,l.start),end:Math.min(s.end,l.end)}),s.end>l.end&&(a.splice(o,1),o--,r--));}return n;},_mergeAdjacentIntervals:function(t){var e=t.slice();e.sort(function(r,s){return r.start-s.start;});for(var n=e[0],i=1;i<e.length;i++){var a=e[i];a.start<=n.end?(a.end>n.end&&(n.end=a.end),e.splice(i,1),i--):n=a;}return e;},_mergeHoursConfig:function(t,e){return this._mergeAdjacentIntervals(this._intersectHourRanges(t,e));},merge:function(t,e){const n=q(t.getConfig()),i=q(e.getConfig()),a=n.parsed,r=i.parsed;a.customWeeks=n.customWeeks,r.customWeeks=i.customWeeks;var s={hours:this._toHoursArray(this._mergeHoursConfig(a.hours,r.hours)),dates:{},customWeeks:{}};const o=(c,d)=>{for(let u in c.dates){const h=c.dates[u];+u>1e3&&(s.dates[u]=!1);for(const _ in d.dates){const p=d.dates[_];if(_==u&&(s.dates[u]=!(!h||!p)),Array.isArray(h)){const y=Array.isArray(p)?p:d.hours;s.dates[u]=this._toHoursArray(this._mergeHoursConfig(h,y));}}}};if(o(a,r),o(r,a),a.customWeeks)for(var l in a.customWeeks)s.customWeeks[l]=a.customWeeks[l];if(r.customWeeks)for(var l in r.customWeeks)s.customWeeks[l]?s.customWeeks[l+\"_second\"]=r.customWeeks[l]:s.customWeeks[l]=r.customWeeks[l];return s;}};class mi{constructor(){this.clear();}getItem(e,n,i){if(this._cache.has(e)){const a=this._cache.get(e)[i.getFullYear()];if(a&&a.has(n))return a.get(n);}return-1;}setItem(e,n,i,a){if(!e||!n)return;const r=this._cache,s=a.getFullYear();let o;r.has(e)?o=r.get(e):(o=[],r.set(e,o));let l=o[s];l||(l=o[s]=/* @__PURE__ */new Map()),l.set(n,i);}clear(){this._cache=/* @__PURE__ */new Map();}}class vi{constructor(){this.clear();}getItem(e,n,i){const a=this._cache;if(a&&a[e]){const r=a[e];if(r===void 0)return-1;const s=r[i.getFullYear()];if(s&&s[n]!==void 0)return s[n];}return-1;}setItem(e,n,i,a){if(!e||!n)return;const r=this._cache;if(!r)return;r[e]||(r[e]=[]);const s=r[e],o=a.getFullYear();let l=s[o];l||(l=s[o]={}),l[n]=i;}clear(){this._cache={};}}class ki{constructor(e){this.getMinutesPerWeek=n=>{const i=n.valueOf();if(this._weekCache.has(i))return this._weekCache.get(i);const a=this._calendar,r=this._calendar.$gantt;let s=0,o=r.date.week_start(new Date(n));for(let l=0;l<7;l++)s+=60*a.getHoursPerDay(o),o=r.date.add(o,1,\"day\");return this._weekCache.set(i,s),s;},this.getMinutesPerMonth=n=>{const i=n.valueOf();if(this._monthCache.has(i))return this._monthCache.get(i);const a=this._calendar,r=this._calendar.$gantt;let s=0,o=r.date.week_start(new Date(n));const l=r.date.add(o,1,\"month\").valueOf();for(;o.valueOf()<l;)s+=60*a.getHoursPerDay(o),o=r.date.add(o,1,\"day\");return this._monthCache.set(i,s),s;},this.clear=()=>{this._weekCache=/* @__PURE__ */new Map(),this._monthCache=/* @__PURE__ */new Map();},this.clear(),this._calendar=e;}}class yi{constructor(){this.clear();}_getCacheObject(e,n,i){const a=this._cache;a[n]||(a[n]=[]);let r=a[n];r||(r=a[n]={});let s=r[i];s||(s=r[i]={});const o=e.getFullYear();let l=s[o];return l||(l=s[o]={durations:{},endDates:{}}),l;}_endDateCacheKey(e,n){return String(e)+\"-\"+String(n);}_durationCacheKey(e,n){return String(e)+\"-\"+String(n);}getEndDate(e,n,i,a,r){const s=this._getCacheObject(e,i,a),o=e.valueOf(),l=this._endDateCacheKey(o,n);let c;if(s.endDates[l]===void 0){const d=r(),u=d.valueOf();s.endDates[l]=u,s.durations[this._durationCacheKey(o,u)]=n,c=d;}else c=new Date(s.endDates[l]);return c;}getDuration(e,n,i,a,r){const s=this._getCacheObject(e,i,a),o=e.valueOf(),l=n.valueOf(),c=this._durationCacheKey(o,l);let d;if(s.durations[c]===void 0){const u=r();s.durations[c]=u.valueOf(),d=u;}else d=s.durations[c];return d;}clear(){this._cache={};}}function ye(t,e){this.argumentsHelper=e,this.$gantt=t,this._workingUnitsCache=typeof Map<\"u\"?new mi():new vi(),this._largeUnitsCache=new ki(this),this._dateDurationCache=new yi(),this._worktime=null,this._cached_timestamps={},this._cached_timestamps_count=0;}ye.prototype={units:[\"year\",\"month\",\"week\",\"day\",\"hour\",\"minute\"],_clearCaches:function(){this._workingUnitsCache.clear(),this._largeUnitsCache.clear(),this._dateDurationCache.clear();},_getUnitOrder:function(t){for(var e=0,n=this.units.length;e<n;e++)if(this.units[e]==t)return e;},_resetTimestampCache:function(){this._cached_timestamps={},this._cached_timestamps_count=0;},_timestamp:function(t){this._cached_timestamps_count>1e6&&this._resetTimestampCache();var e=null;if(t.day||t.day===0)e=t.day;else if(t.date){var n=String(t.date.valueOf());this._cached_timestamps[n]?e=this._cached_timestamps[n]:(e=Date.UTC(t.date.getFullYear(),t.date.getMonth(),t.date.getDate()),this._cached_timestamps[n]=e,this._cached_timestamps_count++);}return e;},_checkIfWorkingUnit:function(t,e){if(!this[\"_is_work_\"+e]){const n=this.$gantt.date[`${e}_start`](new Date(t)),i=this.$gantt.date.add(n,1,e);return this.hasDuration(n,i);}return this[\"_is_work_\"+e](t);},_is_work_day:function(t){var e=this._getWorkHours(t);return!!Array.isArray(e)&&e.length>0;},_is_work_hour:function(t){for(var e=this._getWorkHours(t),n=t.getHours(),i=0;i<e.length;i++)if(n>=e[i].startHour&&n<e[i].endHour)return!0;return!1;},_getTimeOfDayStamp:function(t,e){var n=t.getHours();return t.getHours()||t.getMinutes()||!e||(n=24),60*n*60+60*t.getMinutes();},_is_work_minute:function(t){for(var e=this._getWorkHours(t),n=this._getTimeOfDayStamp(t),i=0;i<e.length;i++)if(n>=e[i].start&&n<e[i].end)return!0;return!1;},_nextDate:function(t,e,n){return this.$gantt.date.add(t,n,e);},_getWorkUnitsBetweenGeneric:function(t,e,n,i){var a=this.$gantt.date,r=new Date(t),s=new Date(e);i=i||1;var o,l,c=0,d=null,u=!1;(o=a[n+\"_start\"](new Date(r))).valueOf()!=r.valueOf()&&(u=!0);var h=!1;(l=a[n+\"_start\"](new Date(e))).valueOf()!=e.valueOf()&&(h=!0);for(var _=!1;r.valueOf()<s.valueOf();){if(_=(d=this._nextDate(r,n,i)).valueOf()>s.valueOf(),this._isWorkTime(r,n))(u||h&&_)&&(o=a[n+\"_start\"](new Date(r)),l=a.add(o,i,n)),u?(u=!1,d=this._nextDate(o,n,i),c+=(l.valueOf()-r.valueOf())/(l.valueOf()-o.valueOf())):h&&_?(h=!1,c+=(s.valueOf()-r.valueOf())/(l.valueOf()-o.valueOf())):c++;else{var p=this._getUnitOrder(n),y=this.units[p-1];y&&!this._isWorkTime(r,y)&&(d=this._getClosestWorkTimeFuture(r,y));}r=d;}return c;},_getMinutesPerHour:function(t){var e=this._getTimeOfDayStamp(t),n=this._getTimeOfDayStamp(this._nextDate(t,\"hour\",1));n===0&&(n=86400);for(var i=this._getWorkHours(t),a=0;a<i.length;a++){var r=i[a];if(e>=r.start&&n<=r.end)return 60;if(e<r.end&&n>r.start)return(Math.min(n,r.end)-Math.max(e,r.start))/60;}return 0;},_getMinutesPerDay:function(t){var e=this._getWorkHours(t),n=0;return e.forEach(function(i){n+=i.durationMinutes;}),n;},getHoursPerDay:function(t){var e=this._getWorkHours(t),n=0;return e.forEach(function(i){n+=i.durationHours;}),n;},_getWorkUnitsForRange:function(t,e,n,i){var a,r=0,s=new Date(t),o=new Date(e);for(a=R(n==\"minute\"?this._getMinutesPerDay:this.getHoursPerDay,this);s.valueOf()<o.valueOf();)if(o-s>27648e5&&s.getDate()===0){var l=this._largeUnitsCache.getMinutesPerMonth(s);n==\"hour\"&&(l/=60),r+=l,s=this.$gantt.date.add(s,1,\"month\");}else{if(o-s>13824e5){var c=this.$gantt.date.week_start(new Date(s));if(s.valueOf()===c.valueOf()){l=this._largeUnitsCache.getMinutesPerWeek(s),n==\"hour\"&&(l/=60),r+=l,s=this.$gantt.date.add(s,7,\"day\");continue;}}r+=a(s),s=this._nextDate(s,\"day\",1);}return r/i;},_getMinutesBetweenSingleDay:function(t,e){for(var n=this._getIntervalTimestamp(t,e),i=this._getWorkHours(t),a=0,r=0;r<i.length;r++){var s=i[r];if(n.end>=s.start&&n.start<=s.end){var o=Math.max(s.start,n.start),l=Math.min(s.end,n.end);a+=(l-o)/60,n.start=l;}}return Math.floor(a);},_getMinutesBetween:function(t,e,n,i){var a=new Date(t),r=new Date(e);i=i||1;var s=new Date(a),o=this.$gantt.date.add(this.$gantt.date.day_start(new Date(a)),1,\"day\");if(r.valueOf()<=o.valueOf())return this._getMinutesBetweenSingleDay(t,e);var l=this.$gantt.date.day_start(new Date(r)),c=r,d=this._getMinutesBetweenSingleDay(s,o),u=this._getMinutesBetweenSingleDay(l,c);return d+this._getWorkUnitsForRange(o,l,n,i)+u;},_getHoursBetween:function(t,e,n,i){var a=new Date(t),r=new Date(e);i=i||1;var s=new Date(a),o=this.$gantt.date.add(this.$gantt.date.day_start(new Date(a)),1,\"day\");if(r.valueOf()<=o.valueOf())return Math.round(this._getMinutesBetweenSingleDay(t,e)/60);var l=this.$gantt.date.day_start(new Date(r)),c=r,d=this._getMinutesBetweenSingleDay(s,o,n,i)/60,u=this._getMinutesBetweenSingleDay(l,c,n,i)/60,h=d+this._getWorkUnitsForRange(o,l,n,i)+u;return Math.round(h);},getConfig:function(){return this._worktime;},_setConfig:function(t){this._worktime=t,this._parseSettings(),this._clearCaches();},_parseSettings:function(){var t=this.getConfig();for(var e in t.parsed={dates:{},hours:null,haveCustomWeeks:!1,customWeeks:{},customWeeksRangeStart:null,customWeeksRangeEnd:null,customWeeksBoundaries:[]},t.parsed.hours=this._parseHours(t.hours),t.dates)t.parsed.dates[e]=this._parseHours(t.dates[e]);if(t.customWeeks){var n=null,i=null;for(var e in t.customWeeks){var a=t.customWeeks[e];if(a.from&&a.to){var r=a.from,s=a.to;(!n||n>r.valueOf())&&(n=r.valueOf()),(!i||i<s.valueOf())&&(i=s.valueOf()),t.parsed.customWeeksBoundaries.push({from:r.valueOf(),fromReadable:new Date(r),to:s.valueOf(),toReadable:new Date(s),name:e}),t.parsed.haveCustomWeeks=!0;var o=t.parsed.customWeeks[e]={from:a.from,to:a.to,hours:this._parseHours(a.hours),dates:{}};if(a.days&&!a.dates){for(a.dates=a.dates||{},e=0;e<a.days.length;e++)a.dates[e]=a.days[e],a.days[e]instanceof Array||(a.dates[e]=!!a.days[e]);delete a.days;}for(var l in a.dates)o.dates[l]=this._parseHours(a.dates[l]);}}t.parsed.customWeeksRangeStart=n,t.parsed.customWeeksRangeEnd=i;}},_tryChangeCalendarSettings:function(t){var e=JSON.stringify(this.getConfig());return t(),!!this.hasWorkTime()||(this._setConfig(JSON.parse(e)),this._clearCaches(),!1);},_arraysEqual:function(t,e){if(t===e)return!0;if(!t||!e||t.length!=e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0;},_compareSettings:function(t,e){if(!this._arraysEqual(t.hours,e.hours))return!1;var n=Object.keys(t.dates),i=Object.keys(e.dates);if(n.sort(),i.sort(),!this._arraysEqual(n,i))return!1;for(var a=0;a<n.length;a++){var r=n[a],s=t.dates[r],o=t.dates[r];if(s!==o&&!(Array.isArray(s)&&Array.isArray(o)&&this._arraysEqual(s,o)))return!1;}return!0;},equals:function(t){if(!(t instanceof ye))return!1;var e=this.getConfig(),n=t.getConfig();if(!this._compareSettings(e,n))return!1;if(e.parsed.haveCustomWeeks&&n.parsed.haveCustomWeeks){if(e.parsed.customWeeksBoundaries.length!=n.parsed.customWeeksBoundaries.length)return!1;for(var i in e.parsed.customWeeks){var a=e.parsed.customWeeks[i],r=n.parsed.customWeeks[i];if(!r||!this._compareSettings(a,r))return!1;}}else if(e.parse.haveCustomWeeks!==n.parsed.haveCustomWeeks)return!1;return!0;},getWorkHours:function(){var t=this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper,arguments);return this._getWorkHours(t.date,!1);},_getWorkHours:function(t,e){var n=this.getConfig();if(e!==!1&&(n=n.parsed),!t)return n.hours;var i=this._timestamp({date:t});if(n.haveCustomWeeks&&n.customWeeksRangeStart<=i&&n.customWeeksRangeEnd>i){for(var a=0;a<n.customWeeksBoundaries.length;a++)if(n.customWeeksBoundaries[a].from<=i&&n.customWeeksBoundaries[a].to>i){n=n.customWeeks[n.customWeeksBoundaries[a].name];break;}}var r=!0;return n.dates[i]!==void 0?r=n.dates[i]:n.dates[t.getDay()]!==void 0&&(r=n.dates[t.getDay()]),r===!0?n.hours:r||[];},_getIntervalTimestamp:function(t,e){var n={start:0,end:0};n.start=60*t.getHours()*60+60*t.getMinutes()+t.getSeconds();var i=e.getHours();return!i&&!e.getMinutes()&&!e.getSeconds()&&t.valueOf()<e.valueOf()&&(i=24),n.end=60*i*60+60*e.getMinutes()+e.getSeconds(),n;},_parseHours:function(t){if(Array.isArray(t)){var e=[];t.forEach(function(o){typeof o==\"number\"?e.push(60*o*60):typeof o==\"string\"&&o.split(\"-\").map(function(l){return l.trim();}).forEach(function(l){var c=l.split(\":\").map(function(u){return u.trim();}),d=parseInt(60*c[0]*60);c[1]&&(d+=parseInt(60*c[1])),c[2]&&(d+=parseInt(c[2])),e.push(d);});});for(var n=[],i=0;i<e.length;i+=2){var a=e[i],r=e[i+1],s=r-a;n.push({start:a,end:r,startHour:Math.floor(a/3600),startMinute:Math.floor(a/60),endHour:Math.ceil(r/3600),endMinute:Math.ceil(r/60),durationSeconds:s,durationMinutes:s/60,durationHours:s/3600});}return n;}return t;},setWorkTime:function(t){return this._tryChangeCalendarSettings(R(function(){var e=t.hours===void 0||t.hours,n=this._timestamp(t),i=this.getConfig();if(n!==null?i.dates[n]=e:t.customWeeks||(i.hours=e),t.customWeeks){if(i.customWeeks||(i.customWeeks={}),typeof t.customWeeks==\"string\")n!==null?i.customWeeks[t.customWeeks].dates[n]=e:t.customWeeks||(i.customWeeks[t.customWeeks].hours=e);else if(typeof t.customWeeks==\"object\"&&t.customWeeks.constructor===Object)for(var a in t.customWeeks)i.customWeeks[a]=t.customWeeks[a];}this._parseSettings(),this._clearCaches();},this));},unsetWorkTime:function(t){return this._tryChangeCalendarSettings(R(function(){if(t){var e=this._timestamp(t);e!==null&&delete this.getConfig().dates[e];}else this.reset_calendar();this._parseSettings(),this._clearCaches();},this));},_isWorkTime:function(t,e){var n,i=-1;return n=String(t.valueOf()),(i=this._workingUnitsCache.getItem(e,n,t))==-1&&(i=this._checkIfWorkingUnit(t,e),this._workingUnitsCache.setItem(e,n,i,t)),i;},isWorkTime:function(){var t=this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper,arguments);return this._isWorkTime(t.date,t.unit);},calculateDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments);if(!t.unit)return!1;var e=this;return this._dateDurationCache.getDuration(t.start_date,t.end_date,t.unit,t.step,function(){return e._calculateDuration(t.start_date,t.end_date,t.unit,t.step);});},_calculateDuration:function(t,e,n,i){var a=0,r=1;if(t.valueOf()>e.valueOf()){var s=e;e=t,t=s,r=-1;}return a=n==\"hour\"&&i==1?this._getHoursBetween(t,e,n,i):n==\"minute\"&&i==1?this._getMinutesBetween(t,e,n,i):this._getWorkUnitsBetweenGeneric(t,e,n,i),r*Math.round(a);},hasDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments),e=t.start_date,n=t.end_date,i=t.unit,a=t.step;if(!i)return!1;var r=new Date(e),s=new Date(n);for(a=a||1;r.valueOf()<s.valueOf();){if(this._isWorkTime(r,i))return!0;r=this._nextDate(r,i,a);}return!1;},calculateEndDate:function(){var t=this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper,arguments),e=t.start_date,n=t.duration,i=t.unit,a=t.step;if(!i)return!1;var r=t.duration>=0?1:-1;n=Math.abs(1*n);var s=this;return this._dateDurationCache.getEndDate(e,n,i,a*r,function(){return s._calculateEndDate(e,n,i,a*r);});},_calculateEndDate:function(t,e,n,i){return!!n&&(i==1&&n==\"minute\"?this._calculateMinuteEndDate(t,e,i):i==-1&&n==\"minute\"?this._subtractMinuteDate(t,e,i):i==1&&n==\"hour\"?this._calculateHourEndDate(t,e,i):this._addInterval(t,e,n,i,null).end);},_addInterval:function(t,e,n,i,a){for(var r=0,s=t,o=!1;r<e&&(!a||!a(s));){var l=this._nextDate(s,n,i);n==\"day\"&&(o=o||!s.getHours()&&l.getHours())&&(l.setHours(0),l.getHours()||(o=!1));var c=new Date(l.valueOf()+1);i>0&&(c=new Date(l.valueOf()-1)),this._isWorkTime(c,n)&&!o&&r++,s=l;}return{end:s,start:t,added:r};},_addHoursUntilDayEnd:function(t,e){for(var n=this.$gantt.date.add(this.$gantt.date.day_start(new Date(t)),1,\"day\"),i=0,a=e,r=this._getIntervalTimestamp(t,n),s=this._getWorkHours(t),o=0;o<s.length&&i<e;o++){var l=s[o];if(r.end>=l.start&&r.start<=l.end){var c=Math.max(l.start,r.start),d=Math.min(l.end,r.end),u=(d-c)/3600;u>a&&(u=a,d=c+60*a*60);var h=Math.round((d-c)/3600);i+=h,a-=h,r.start=d;}}var _=n;return i===e&&(_=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,r.start)),{added:i,end:_};},_calculateHourEndDate:function(t,e,n){var i=new Date(t),a=0;n=n||1,e=Math.abs(1*e);var r=this._addHoursUntilDayEnd(i,e);if(a=r.added,i=r.end,c=e-a){for(var s=i;a<e;){var o=this._nextDate(s,\"day\",n);o.setHours(0),o.setMinutes(0),o.setSeconds(0);var l=0;if(a+(l=n>0?this.getHoursPerDay(new Date(o.valueOf()-1)):this.getHoursPerDay(new Date(o.valueOf()+1)))>=e)break;a+=l,s=o;}i=s;}if(a<e){var c=e-a;i=(r=this._addHoursUntilDayEnd(i,c)).end;}return i;},_addMinutesUntilHourEnd:function(t,e){if(t.getMinutes()===0)return{added:0,end:new Date(t)};for(var n=this.$gantt.date.add(this.$gantt.date.hour_start(new Date(t)),1,\"hour\"),i=0,a=e,r=this._getIntervalTimestamp(t,n),s=this._getWorkHours(t),o=0;o<s.length&&i<e;o++){var l=s[o];if(r.end>=l.start&&r.start<=l.end){var c=Math.max(l.start,r.start),d=Math.min(l.end,r.end),u=(d-c)/60;u>a&&(u=a,d=c+60*a);var h=Math.round((d-c)/60);a-=h,i+=h,r.start=d;}}var _=n;return i===e&&(_=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,r.start)),{added:i,end:_};},_subtractMinutesUntilHourStart:function(t,e){for(var n=this.$gantt.date.hour_start(new Date(t)),i=0,a=e,r=60*n.getHours()*60+60*n.getMinutes()+n.getSeconds(),s=60*t.getHours()*60+60*t.getMinutes()+t.getSeconds(),o=this._getWorkHours(t),l=o.length-1;l>=0&&i<e;l--){var c=o[l];if(s>c.start&&r<=c.end){var d=Math.min(s,c.end),u=Math.max(r,c.start),h=(d-u)/60;h>a&&(h=a,u=d-60*a);var _=Math.abs(Math.round((d-u)/60));a-=_,i+=_,s=u;}}var p=n;return i===e&&(p=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,s)),{added:i,end:p};},_subtractMinuteDate:function(t,e,n){var i=this.getClosestWorkTime({date:t,dir:\"past\",unit:\"minute\"}),a=0;n=n||-1,e=Math.abs(1*e),e=Math.round(e);const r=this._isMinutePrecision(i);let s=this._subtractMinutesUntilHourStart(i,e);a+=s.added,i=s.end;for(var o=0,l=[],c=0;a<e;){var d=this.$gantt.date.day_start(new Date(i)),u=!1;i.valueOf()===d.valueOf()&&(d=this.$gantt.date.add(d,-1,\"day\"),u=!0);var h=new Date(d.getFullYear(),d.getMonth(),d.getDate(),23,59,59,999).valueOf();h!==o&&(l=this._getWorkHours(d),c=this._getMinutesPerDay(d),o=h);var _=e-a,p=this._getTimeOfDayStamp(i,u);if(l.length&&c){if(l[l.length-1].end<=p&&_>c)a+=c,i=this.$gantt.date.add(i,-1,\"day\");else{for(var y=!1,k=null,b=null,g=l.length-1;g>=0;g--)if(l[g].start<p-1&&l[g].end>=p-1){y=!0,k=l[g],b=l[g-1];break;}if(y){if(p===k.end&&_>=k.durationMinutes)a+=k.durationMinutes,i=this.$gantt.date.add(i,-k.durationMinutes,\"minute\");else if(!r&&_<=p/60-k.startMinute)a+=_,i=this.$gantt.date.add(i,-_,\"minute\");else if(r)_<=p/60-k.startMinute?(a+=_,i=this.$gantt.date.add(i,-_,\"minute\")):(a+=p/60-k.startMinute,i=b?new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,b.end):this.$gantt.date.day_start(i));else{var m=this._getMinutesPerHour(i);m<=_?(a+=m,i=this._nextDate(i,\"hour\",n)):(s=this._subtractMinutesUntilHourStart(i,_),a+=s.added,i=s.end);}}else if(i.getHours()===0&&i.getMinutes()===0&&i.getSeconds()===0){if((f=this._getClosestWorkTimePast(i,\"hour\")).valueOf()===i.valueOf()){var f=this.$gantt.date.add(i,-1,\"day\"),v=this._getWorkHours(f);if(v.length){var x=v[v.length-1];f.setSeconds(x.durationSeconds);}}i=f;}else i=this._getClosestWorkTimePast(new Date(i-1),\"hour\");}}else i=this.$gantt.date.add(i,-1,\"day\");}if(a<e){var $=e-a;s=this._subtractMinutesUntilHourStart(i,$),a+=s.added,i=s.end;}return i;},_calculateMinuteEndDate:function(t,e,n){var i=new Date(t),a=0;n=n||1,e=Math.abs(1*e),e=Math.round(e);var r=this._addMinutesUntilHourEnd(i,e);a+=r.added,i=r.end;for(var s=0,o=[],l=0,c=this._isMinutePrecision(i);a<e;){var d=this.$gantt.date.day_start(new Date(i)).valueOf();d!==s&&(o=this._getWorkHours(i),l=this._getMinutesPerDay(i),s=d);var u=e-a,h=this._getTimeOfDayStamp(i);if(o.length&&l){if(o[0].start>=h&&u>=l){if(a+=l,u==l){i=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,o[o.length-1].end);break;}i=this.$gantt.date.add(i,1,\"day\"),i=this.$gantt.date.day_start(i);}else{for(var _=!1,p=null,y=0;y<o.length;y++)if(o[y].start<=h&&o[y].end>h){_=!0,p=o[y];break;}if(_){if(h===p.start&&u>=p.durationMinutes)a+=p.durationMinutes,i=this.$gantt.date.add(i,p.durationMinutes,\"minute\");else if(u<=p.endMinute-h/60)a+=u,i=this.$gantt.date.add(i,u,\"minute\");else{var k=this._getMinutesPerHour(i);k<=u?(a+=k,i=c?this.$gantt.date.add(i,k,\"minute\"):this._nextDate(i,\"hour\",n)):(a+=(r=this._addMinutesUntilHourEnd(i,u)).added,i=r.end);}}else i=this._getClosestWorkTimeFuture(i,\"hour\");}}else i=this.$gantt.date.add(this.$gantt.date.day_start(i),1,\"day\");}if(a<e){var b=e-a;a+=(r=this._addMinutesUntilHourEnd(i,b)).added,i=r.end;}return i;},getClosestWorkTime:function(){var t=this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper,arguments);return this._getClosestWorkTime(t.date,t.unit,t.dir);},_getClosestWorkTime:function(t,e,n){var i=new Date(t);if(this._isWorkTime(i,e))return i;if(i=this.$gantt.date[e+\"_start\"](i),n!=\"any\"&&n)i=n==\"past\"?this._getClosestWorkTimePast(i,e):this._getClosestWorkTimeFuture(i,e);else{var a=this._getClosestWorkTimeFuture(i,e),r=this._getClosestWorkTimePast(i,e);i=Math.abs(a-t)<=Math.abs(t-r)?a:r;}return i;},_getClosestWorkTimeFuture:function(t,e){return this._getClosestWorkTimeGeneric(t,e,1);},_getClosestWorkTimePast:function(t,e){var n=this._getClosestWorkTimeGeneric(t,e,-1);return this.$gantt.date.add(n,1,e);},_findClosestTimeInDay:function(t,e,n){var i=new Date(t),a=null,r=!1;this._getWorkHours(i).length||(i=this._getClosestWorkTime(i,\"day\",e<0?\"past\":\"future\"),e<0&&(i=new Date(i.valueOf()-1),r=!0),n=this._getWorkHours(i));var s=this._getTimeOfDayStamp(i);if(r&&(s=this._getTimeOfDayStamp(new Date(i.valueOf()+1),r)),e>0){for(var o=0;o<n.length;o++)if(n[o].start>=s){a=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,n[o].start);break;}}else for(o=n.length-1;o>=0;o--){if(n[o].end<=s){a=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,n[o].end);break;}if(n[o].end>s&&n[o].start<=s){a=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,s);break;}}return a;},_getClosestWorkMinute:function(t,e,n){var i=new Date(t),a=this._getWorkHours(i),r=this._findClosestTimeInDay(i,n,a);return r||(n>0?(i=this.calculateEndDate(i,n,e),i=this.$gantt.date.day_start(i)):(i=this.calculateEndDate(i,n,\"day\"),i=this.$gantt.date.day_start(i),i=this.$gantt.date.add(i,1,\"day\"),i=new Date(i.valueOf()-1)),a=this._getWorkHours(i),r=this._findClosestTimeInDay(i,n,a)),n<0&&(r=this.$gantt.date.add(r,-1,e)),r;},_getClosestWorkTimeGeneric:function(t,e,n){if(e===\"hour\"||e===\"minute\")return this._getClosestWorkMinute(t,e,n);for(var i=this._getUnitOrder(e),a=this.units[i-1],r=t,s=0;!this._isWorkTime(r,e)&&(!a||this._isWorkTime(r,a)||(r=n>0?this._getClosestWorkTimeFuture(r,a):this._getClosestWorkTimePast(r,a),!this._isWorkTime(r,e)));){if(++s>3e3)return this.$gantt.assert(!1,\"Invalid working time check\"),!1;var o=r.getTimezoneOffset();r=this.$gantt.date.add(r,n,e),r=this.$gantt._correct_dst_change(r,o,n,e),this.$gantt.date[e+\"_start\"]&&(r=this.$gantt.date[e+\"_start\"](r));}return r;},hasWorkTime:function(){var t=this.getConfig(),e=t.dates;for(var n in t.dates);var i=this._checkWorkHours(t.hours),a=!1;return[0,1,2,3,4,5,6].forEach(function(r){if(!a){var s=e[r];s===!0?a=i:Array.isArray(s)&&(a=this._checkWorkHours(s));}}.bind(this)),a;},_checkWorkHours:function(t){if(t.length===0)return!1;for(var e=!1,n=0;n<t.length;n+=2)t[n]!==t[n+1]&&(e=!0);return e;},_isMinutePrecision:function(t){let e=!1;return this._getWorkHours(t).forEach(function(n){(n.startMinute%60||n.endMinute%60)&&(e=!0);}),e;}};const It={isLegacyResourceCalendarFormat:function(t){if(!t)return!1;for(var e in t)if(t[e]&&typeof t[e]==\"object\")return!0;return!1;},getResourceProperty:function(t){var e=t.resource_calendars,n=t.resource_property;if(this.isLegacyResourceCalendarFormat(e))for(var i in t){n=i;break;}return n;},getCalendarIdFromLegacyConfig:function(t,e){if(e)for(var n in e){var i=e[n];if(t[n]){var a=i[t[n]];if(a)return a;}}return null;}},bi=(Wt={},{getCalendarIdFromMultipleResources:function(t,e){var n=function(a){return a.map(function(r){return r&&r.resource_id?r.resource_id:r;}).sort().join(\"-\");}(t);if(t.length){if(t.length===1)return e.getResourceCalendar(n).id;if(Wt[n])return Wt[n].id;var i=function(a,r){return r.mergeCalendars(a.map(function(s){var o=s&&s.resource_id?s.resource_id:s;return r.getResourceCalendar(o);}));}(t,e);return Wt[n]=i,e.addCalendar(i);}return null;}});var Wt;function fn(t){this.$gantt=t,this._calendars={},this._legacyConfig=void 0,this.$gantt.attachEvent(\"onGanttReady\",function(){this.$gantt.config.resource_calendars&&(this._isLegacyConfig=It.isLegacyResourceCalendarFormat(this.$gantt.config.resource_calendars));}.bind(this)),this.$gantt.attachEvent(\"onBeforeGanttReady\",function(){this.createDefaultCalendars();}.bind(this)),this.$gantt.attachEvent(\"onBeforeGanttRender\",function(){this.createDefaultCalendars();}.bind(this));}function be(t,e){this.argumentsHelper=e,this.$gantt=t;}function pn(t){this.$gantt=t.$gantt,this.argumentsHelper=_n(this.$gantt),this.calendarManager=t,this.$disabledCalendar=new be(this.$gantt,this.argumentsHelper);}fn.prototype={_calendars:{},_convertWorkTimeSettings:function(t){var e=t.days;if(e&&!t.dates){t.dates=t.dates||{};for(var n=0;n<e.length;n++)t.dates[n]=e[n],e[n]instanceof Array||(t.dates[n]=!!e[n]);}return delete t.days,t;},mergeCalendars:function(){var t=[],e=arguments;if(Array.isArray(e[0]))t=e[0].slice();else for(var n=0;n<arguments.length;n++)t.push(arguments[n]);var i,a=new gn();return t.forEach(function(r){i=i?this._createCalendarFromConfig(a.merge(i,r)):r;}.bind(this)),this.createCalendar(i);},_createCalendarFromConfig:function(t){var e=new ye(this.$gantt,_n(this.$gantt));e.id=String(st());var n=this._convertWorkTimeSettings(t);if(n.customWeeks)for(var i in n.customWeeks)n.customWeeks[i]=this._convertWorkTimeSettings(n.customWeeks[i]);return e._setConfig(n),e;},createCalendar:function(t){var e;return t||(t={}),P(e=t.getConfig?q(t.getConfig()):t.worktime?q(t.worktime):q(t),q(this.defaults.fulltime.worktime)),this._createCalendarFromConfig(e);},getCalendar:function(t){t=t||\"global\";var e=this._calendars[t];return e||(this.createDefaultCalendars(),e=this._calendars[t]),e;},getCalendars:function(){var t=[];for(var e in this._calendars)t.push(this.getCalendar(e));return t;},_getOwnCalendar:function(t){var e=this.$gantt.config;if(t[e.calendar_property])return this.getCalendar(t[e.calendar_property]);if(e.resource_calendars){var n;if(n=this._legacyConfig===!1?e.resource_property:It.getResourceProperty(e),Array.isArray(t[n])&&t[n].length)e.dynamic_resource_calendars?i=bi.getCalendarIdFromMultipleResources(t[n],this):a=this.getResourceCalendar(t[n]);else if(this._legacyConfig===void 0&&(this._legacyConfig=It.isLegacyResourceCalendarFormat(e.resource_calendars)),this._legacyConfig)var i=It.getCalendarIdFromLegacyConfig(t,e.resource_calendars);else if(n&&t[n]&&e.resource_calendars[t[n]])var a=this.getResourceCalendar(t[n]);if(i&&(a=this.getCalendar(i)),a)return a;}return null;},getResourceCalendar:function(t){if(t==null)return this.getCalendar();var e=null;e=typeof t==\"number\"||typeof t==\"string\"?t:t.id||t.key;var n=this.$gantt.config,i=n.resource_calendars,a=null;if(Array.isArray(t)&&t.length===1&&(e=typeof t[0]==\"object\"?t[0].resource_id:t[0]),i){if(this._legacyConfig===void 0&&(this._legacyConfig=It.isLegacyResourceCalendarFormat(n.resource_calendars)),this._legacyConfig){for(var r in i)if(i[r][e]){a=i[r][e];break;}}else a=i[e];if(a)return this.getCalendar(a);}return this.getCalendar();},getTaskCalendar:function(t){var e,n=this.$gantt;if(t==null)return this.getCalendar();if(!(e=typeof t!=\"number\"&&typeof t!=\"string\"||!n.isTaskExists(t)?t:n.getTask(t)))return this.getCalendar();var i=this._getOwnCalendar(e),a=!!n.getState().group_mode;if(!i&&n.config.inherit_calendar&&n.isTaskExists(e.parent)){for(var r=e;n.isTaskExists(r.parent)&&(r=n.getTask(r.parent),!n.isSummaryTask(r)||!(i=this._getOwnCalendar(r))););a&&!i&&t.$effective_calendar&&(i=this.getCalendar(t.$effective_calendar));}return i||this.getCalendar();},addCalendar:function(t){if(!this.isCalendar(t)){var e=t.id;(t=this.createCalendar(t)).id=e;}if(t._tryChangeCalendarSettings(function(){})){var n=this.$gantt.config;return t.id=t.id||st(),this._calendars[t.id]=t,n.worktimes||(n.worktimes={}),n.worktimes[t.id]=t.getConfig(),t.id;}return this.$gantt.callEvent(\"onCalendarError\",[{message:\"Invalid calendar settings, no worktime available\"},t]),null;},deleteCalendar:function(t){var e=this.$gantt.config;return!!t&&!!this._calendars[t]&&(delete this._calendars[t],e.worktimes&&e.worktimes[t]&&delete e.worktimes[t],!0);},restoreConfigCalendars:function(t){for(var e in t)if(!this._calendars[e]){var n=t[e],i=this.createCalendar(n);i.id=e,this.addCalendar(i);}},defaults:{global:{id:\"global\",worktime:{hours:[8,12,13,17],days:[0,1,1,1,1,1,0]}},fulltime:{id:\"fulltime\",worktime:{hours:[0,24],days:[1,1,1,1,1,1,1]}}},createDefaultCalendars:function(){var t=this.$gantt.config;this.restoreConfigCalendars(this.defaults),this.restoreConfigCalendars(t.worktimes);},isCalendar:function(t){return[t.isWorkTime,t.setWorkTime,t.getWorkHours,t.unsetWorkTime,t.getClosestWorkTime,t.calculateDuration,t.hasDuration,t.calculateEndDate].every(function(e){return e instanceof Function;});}},be.prototype={getWorkHours:function(){return[0,24];},setWorkTime:function(){return!0;},unsetWorkTime:function(){return!0;},isWorkTime:function(){return!0;},getClosestWorkTime:function(t){return this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper,arguments).date;},calculateDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments),e=t.start_date,n=t.end_date,i=t.unit,a=t.step;return this._calculateDuration(e,n,i,a);},_calculateDuration:function(t,e,n,i){var a=this.$gantt.date,r={week:6048e5,day:864e5,hour:36e5,minute:6e4},s=0;if(r[n])s=Math.round((e-t)/(i*r[n]));else{for(var o=new Date(t),l=new Date(e);o.valueOf()<l.valueOf();)s+=1,o=a.add(o,i,n);o.valueOf()!=e.valueOf()&&(s+=(l-o)/(a.add(o,i,n)-o));}return Math.round(s);},hasDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments),e=t.start_date,n=t.end_date;return!!t.unit&&(e=new Date(e),n=new Date(n),e.valueOf()<n.valueOf());},hasWorkTime:function(){return!0;},equals:function(t){return t instanceof be;},calculateEndDate:function(){var t=this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper,arguments),e=t.start_date,n=t.duration,i=t.unit,a=t.step;return this.$gantt.date.add(e,a*n,i);}},pn.prototype={_getCalendar:function(t){var e;if(this.$gantt.config.work_time){var n=this.calendarManager;t.task?e=n.getTaskCalendar(t.task):t.id?e=n.getTaskCalendar(t):t.calendar&&(e=t.calendar),e||(e=n.getTaskCalendar());}else e=this.$disabledCalendar;return e;},getWorkHours:function(t){return t=this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper,arguments),this._getCalendar(t).getWorkHours(t.date);},setWorkTime:function(t,e){return t=this.argumentsHelper.setWorkTimeArguments.apply(this.argumentsHelper,arguments),e||(e=this.calendarManager.getCalendar()),e.setWorkTime(t);},unsetWorkTime:function(t,e){return t=this.argumentsHelper.unsetWorkTimeArguments.apply(this.argumentsHelper,arguments),e||(e=this.calendarManager.getCalendar()),e.unsetWorkTime(t);},isWorkTime:function(t,e,n,i){var a=this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper,arguments);return(i=this._getCalendar(a)).isWorkTime(a);},getClosestWorkTime:function(t){return t=this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper,arguments),this._getCalendar(t).getClosestWorkTime(t);},calculateDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments);return this._getCalendar(t).calculateDuration(t);},hasDuration:function(){var t=this.argumentsHelper.hasDurationArguments.apply(this.argumentsHelper,arguments);return this._getCalendar(t).hasDuration(t);},calculateEndDate:function(t){return t=this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper,arguments),this._getCalendar(t).calculateEndDate(t);}};const xi=function(t,e){return{getWorkHours:function(n){return e.getWorkHours(n);},setWorkTime:function(n){return e.setWorkTime(n);},unsetWorkTime:function(n){e.unsetWorkTime(n);},isWorkTime:function(n,i,a){return e.isWorkTime(n,i,a);},getClosestWorkTime:function(n){return e.getClosestWorkTime(n);},calculateDuration:function(n,i,a){return e.calculateDuration(n,i,a);},_hasDuration:function(n,i,a){return e.hasDuration(n,i,a);},calculateEndDate:function(n,i,a,r){return e.calculateEndDate(n,i,a,r);},mergeCalendars:R(t.mergeCalendars,t),createCalendar:R(t.createCalendar,t),addCalendar:R(t.addCalendar,t),getCalendar:R(t.getCalendar,t),getCalendars:R(t.getCalendars,t),getResourceCalendar:R(t.getResourceCalendar,t),getTaskCalendar:R(t.getTaskCalendar,t),deleteCalendar:R(t.deleteCalendar,t)};};function $i(t){t.isUnscheduledTask=function(s){return t.assert(s&&s instanceof Object,\"Invalid argument <b>task</b>=\"+s+\" of gantt.isUnscheduledTask. Task object was expected\"),!!s.unscheduled||!s.start_date;},t._isAllowedUnscheduledTask=function(s){return!(!s.unscheduled||!t.config.show_unscheduled);},t._isTaskInTimelineLimits=function(s){var o=s.start_date?s.start_date.valueOf():null,l=s.end_date?s.end_date.valueOf():null;return!!(o&&l&&o<=this._max_date.valueOf()&&l>=this._min_date.valueOf());},t.isTaskVisible=function(s){if(!this.isTaskExists(s))return!1;var o=this.getTask(s);return!(!this._isAllowedUnscheduledTask(o)&&!this._isTaskInTimelineLimits(o))&&this.getGlobalTaskIndex(s)>=0;},t._getProjectEnd=function(){if(t.config.project_end)return t.config.project_end;var s=t.getTaskByTime();return(s=s.sort(function(o,l){return+o.end_date>+l.end_date?1:-1;})).length?s[s.length-1].end_date:null;},t._getProjectStart=function(){if(t.config.project_start)return t.config.project_start;if(t.config.start_date)return t.config.start_date;if(t.getState().min_date)return t.getState().min_date;var s=t.getTaskByTime();return(s=s.sort(function(o,l){return+o.start_date>+l.start_date?1:-1;})).length?s[0].start_date:null;};var e=function(s,o){var l=!!(o&&o!=t.config.root_id&&t.isTaskExists(o))&&t.getTask(o),c=null;if(l){if(t.config.schedule_from_end)c=t.calculateEndDate({start_date:l.end_date,duration:-t.config.duration_step,task:s});else{if(!l.start_date)return e(l,t.getParent(l));c=l.start_date;}}else if(t.config.schedule_from_end)c=t.calculateEndDate({start_date:t._getProjectEnd(),duration:-t.config.duration_step,task:s});else{const d=t.getTaskByIndex(0),u=t.config.start_date||t.getState().min_date;c=d?d.start_date?d.start_date:d.end_date?t.calculateEndDate({start_date:d.end_date,duration:-t.config.duration_step,task:s}):u:u;}return t.assert(c,\"Invalid dates\"),new Date(c);};t._set_default_task_timing=function(s){s.start_date=s.start_date||e(s,t.getParent(s)),s.duration=s.duration||t.config.duration_step,s.end_date=s.end_date||t.calculateEndDate(s);},t.createTask=function(s,o,l){if(s=s||{},t.defined(s.id)||(s.id=t.uid()),s.start_date||(s.start_date=e(s,o)),s.text===void 0&&(s.text=t.locale.labels.new_task),s.duration===void 0&&(s.duration=1),this.isTaskExists(o)){this.setParent(s,o,!0);var c=this.getTask(o);c.$open=!0,this.config.details_on_create||this.callEvent(\"onAfterParentExpand\",[o,c]);}return this.callEvent(\"onTaskCreated\",[s])?(this.config.details_on_create?(t.isTaskExists(s.id)?t.getTask(s.id).$index!=s.$index&&(s.start_date&&typeof s.start_date==\"string\"&&(s.start_date=this.date.parseDate(s.start_date,\"parse_date\")),s.end_date&&typeof s.end_date==\"string\"&&(s.end_date=this.date.parseDate(s.end_date,\"parse_date\")),this.$data.tasksStore.updateItem(s.id,s)):(s.$new=!0,this.silent(function(){t.$data.tasksStore.addItem(s,l);})),this.selectTask(s.id),this.refreshData(),this.showLightbox(s.id)):this.addTask(s,o,l)&&(this.showTask(s.id),this.selectTask(s.id)),s.id):null;},t._update_flags=function(s,o){var l=t.$data.tasksStore;s===void 0?(this._lightbox_id=null,l.silent(function(){l.unselect();}),this.getSelectedTasks&&this._multiselect.reset(),this._tasks_dnd&&this._tasks_dnd.drag&&(this._tasks_dnd.drag.id=null)):(this._lightbox_id==s&&(this._lightbox_id=o),l.getSelectedId()==s&&l.silent(function(){l.unselect(s),l.select(o);}),this._tasks_dnd&&this._tasks_dnd.drag&&this._tasks_dnd.drag.id==s&&(this._tasks_dnd.drag.id=o));};var n=function(s,o){var l=t.getTaskType(s.type),c={type:l,$no_start:!1,$no_end:!1,scheduled_summary:!1};return l===t.config.types.project&&s.auto_scheduling===!1&&(c.scheduled_summary=!0),o||l!=s.$rendered_type?(l==t.config.types.project?c.$no_end=c.$no_start=!0:l!=t.config.types.milestone&&(c.$no_end=!(s.end_date||s.duration),c.$no_start=!s.start_date,t._isAllowedUnscheduledTask(s)&&(c.$no_end=c.$no_start=!1)),c):(c.$no_start=s.$no_start,c.$no_end=s.$no_end,c);};function i(s){s.$effective_calendar=t.getTaskCalendar(s).id,s.start_date=t.getClosestWorkTime({dir:\"future\",date:s.start_date,unit:t.config.duration_unit,task:s}),s.end_date=t.calculateEndDate(s);}function a(s,o,l,c){const d={start:\"start_date\",end:\"end_date\"},u={start:\"$auto_start_date\",end:\"$auto_end_date\"};let h;h=s.type===t.config.types.project&&s.auto_scheduling===!1?u:d,o.$no_start&&(s[h.start]=l?new Date(l):e(s,this.getParent(s))),o.$no_end&&(s[h.end]=c?new Date(c):this.calculateEndDate({start_date:s[h.start],duration:this.config.duration_step,task:s})),(o.$no_start||o.$no_end)&&this._init_task_timing(s);}function r(s){var o=null,l=null,c=s!==void 0?s:t.config.root_id,d=[];return t.eachTask(function(u){const h=t.getTaskType(u.type)==t.config.types.project&&u.auto_scheduling===!1;t.getTaskType(u.type)==t.config.types.project&&!h||t.isUnscheduledTask(u)||(u.rollup&&d.push(u.id),!u.start_date||u.$no_start&&!h||o&&!(o>u.start_date.valueOf())||(o=u.start_date.valueOf()),!u.end_date||u.$no_end&&!h||l&&!(l<u.end_date.valueOf())||(l=u.end_date.valueOf()));},c),{start_date:o?new Date(o):null,end_date:l?new Date(l):null,rollup:d};}t._init_task_timing=function(s){var o=n(s,!0),l=s.$rendered_type!=o.type,c=o.type;l&&(s.$no_start=o.$no_start,s.$no_end=o.$no_end,s.$rendered_type=o.type),l&&c!=this.config.types.milestone&&c==this.config.types.project&&(this._set_default_task_timing(s),s.$calculate_duration=!1),c==this.config.types.milestone&&(s.end_date=s.start_date),s.start_date&&s.end_date&&s.$calculate_duration!==!1&&(s.duration=this.calculateDuration(s)),s.$calculate_duration||(s.$calculate_duration=!0),s.end_date||(s.end_date=s.start_date),s.duration=s.duration||0,this.config.min_duration===0&&s.duration===0&&(s.$no_end=!1,s.type===t.config.types.project&&t.hasChild(s.id)&&(s.$no_end=!0));var d=this.getTaskCalendar(s);s.$effective_calendar&&s.$effective_calendar!==d.id&&(i(s),this.config.inherit_calendar&&this.isSummaryTask(s)&&this.eachTask(function(u){i(u);},s.id)),s.$effective_calendar=d.id;},t.isSummaryTask=function(s){t.assert(s&&s instanceof Object,\"Invalid argument <b>task</b>=\"+s+\" of gantt.isSummaryTask. Task object was expected\");var o=n(s);return!(!o.$no_end&&!o.$no_start);},t.resetProjectDates=function(s){var o=n(s);if(o.$no_end||o.$no_start){var l=r(s.id);a.call(this,s,o,l.start_date,l.end_date),s.$rollup=l.rollup;}},t.getSubtaskDuration=function(s){var o=0,l=s!==void 0?s:t.config.root_id;return this.eachTask(function(c){this.getTaskType(c.type)==t.config.types.project||this.isUnscheduledTask(c)||(o+=c.duration);},l),o;},t.getSubtaskDates=function(s){var o=r(s);return{start_date:o.start_date,end_date:o.end_date};},t._update_parents=function(s,o,l){if(s){var c=this.getTask(s);c.rollup&&(l=!0);var d=this.getParent(c),u=n(c),h=!0;if(l||c.start_date&&c.end_date&&(u.$no_start||u.$no_end)){const y=c.$auto_start_date?\"$auto_start_date\":\"start_date\",k=c.$auto_end_date?\"$auto_end_date\":\"end_date\";var _=c[y].valueOf(),p=c[k].valueOf();t.resetProjectDates(c),l||_!=c[y].valueOf()||p!=c[k].valueOf()||(h=!1),h&&!o&&this.refreshTask(c.id,!0),u.scheduled_summary&&(h=!0);}h&&d&&this.isTaskExists(d)&&this._update_parents(d,o,l);}},t.roundDate=function(s){var o=t.getScale();Q(s)&&(s={date:s,unit:o?o.unit:t.config.duration_unit,step:o?o.step:t.config.duration_step});var l,c,d,u=s.date,h=s.step,_=s.unit;if(!o)return u;if(_==o.unit&&h==o.step&&+u>=+o.min_date&&+u<=+o.max_date)d=Math.floor(t.columnIndexByDate(u)),o.trace_x[d]||(d-=1,o.rtl&&(d=0)),c=new Date(o.trace_x[d]),l=t.date.add(c,h,_);else{for(d=Math.floor(t.columnIndexByDate(u)),l=t.date[_+\"_start\"](new Date(o.min_date)),o.trace_x[d]&&(l=t.date[_+\"_start\"](o.trace_x[d]));+l<+u;){var p=(l=t.date[_+\"_start\"](t.date.add(l,h,_))).getTimezoneOffset();l=t._correct_dst_change(l,p,l,_),t.date[_+\"_start\"]&&(l=t.date[_+\"_start\"](l));}c=t.date.add(l,-1*h,_);}return s.dir&&s.dir==\"future\"?l:s.dir&&s.dir==\"past\"||Math.abs(u-c)<Math.abs(l-u)?c:l;},t.correctTaskWorkTime=function(s){t.config.work_time&&t.config.correct_work_time&&(this.isWorkTime(s.start_date,void 0,s)?this.isWorkTime(new Date(+s.end_date-1),void 0,s)||(s.end_date=this.calculateEndDate(s)):(s.start_date=this.getClosestWorkTime({date:s.start_date,dir:\"future\",task:s}),s.end_date=this.calculateEndDate(s)));},t.attachEvent(\"onBeforeTaskUpdate\",function(s,o){return t._init_task_timing(o),!0;}),t.attachEvent(\"onBeforeTaskAdd\",function(s,o){return t._init_task_timing(o),!0;}),t.attachEvent(\"onAfterTaskMove\",function(s,o,l){return t._init_task_timing(t.getTask(s)),!0;});}function Oe(t,e){var n,i=t.config.container_resize_timeout||20;let a=Be(t);if(t.config.container_resize_method==\"timeout\")l();else try{t.event(e,\"resize\",function(){if(t.$scrollbarRepaint)t.$scrollbarRepaint=null;else{let c=Be(t);if(a.x==c.x&&a.y==c.y)return;a=c,r();}});}catch{l();}function r(){clearTimeout(n),n=setTimeout(function(){t.$destroyed||t.render();},i);}var s=t.$root.offsetHeight,o=t.$root.offsetWidth;function l(){t.$root.offsetHeight==s&&t.$root.offsetWidth==o||r(),s=t.$root.offsetHeight,o=t.$root.offsetWidth,setTimeout(l,i);}}function Be(t){return{x:t.$root.offsetWidth,y:t.$root.offsetHeight};}function wi(t){t.assert=/* @__PURE__ */function(r){return function(s,o){s||r.config.show_errors&&r.callEvent(\"onError\",[o])!==!1&&(r.message?r.message({type:\"error\",text:o,expire:-1}):console.log(o));};}(t);var e=\"Invalid value of the first argument of `gantt.init`. Supported values: HTMLElement, String (element id).This error means that either invalid object is passed into `gantt.init` or that the element with the specified ID doesn't exist on the page when `gantt.init` is called.\";function n(r){if(!r||typeof r==\"string\"&&document.getElementById(r)||function(s){try{s.cloneNode(!1);}catch{return!1;}return!0;}(r))return!0;throw t.assert(!1,e),new Error(e);}t.init=function(r,s,o){t.env.isNode?r=null:n(r),s&&o&&(this.config.start_date=this._min_date=new Date(s),this.config.end_date=this._max_date=new Date(o)),this.date.init(),this.init=function(l){t.env.isNode?l=null:n(l),this.$container&&this.$container.parentNode&&(this.$container.parentNode.removeChild(this.$container),this.$container=null),this.$layout&&this.$layout.clear(),this._reinit(l);},this._reinit(r);},t._quickRefresh=function(r){for(var s=this._getDatastores.call(this),o=0;o<s.length;o++)s[o]._quick_refresh=!0;for(r(),o=0;o<s.length;o++)s[o]._quick_refresh=!1;};var i=function(){this._clearTaskLayers&&this._clearTaskLayers(),this._clearLinkLayers&&this._clearLinkLayers(),this.$layout&&(this.$layout.destructor(),this.$layout=null,this.$ui.reset());}.bind(t),a=function(){F(t)||(this.$root.innerHTML=\"\",this.$root.gantt=this,me(this),this.config.layout.id=\"main\",this.$layout=this.$ui.createView(\"layout\",this.$root,this.config.layout),this.$layout.attachEvent(\"onBeforeResize\",function(){for(var r=t.$services.getService(\"datastores\"),s=0;s<r.length;s++)t.getDatastore(r[s]).filter(),t.$data.tasksStore._skipTaskRecalculation?t.$data.tasksStore._skipTaskRecalculation!=\"lightbox\"&&(t.$data.tasksStore._skipTaskRecalculation=!1):t.getDatastore(r[s]).callEvent(\"onBeforeRefreshAll\",[]);}),this.$layout.attachEvent(\"onResize\",function(){t._quickRefresh(function(){t.refreshData();});}),this.callEvent(\"onGanttLayoutReady\",[]),this.$layout.render(),this.$container=this.$layout.$container.firstChild,function(r){window.getComputedStyle(r.$root).getPropertyValue(\"position\")==\"static\"&&(r.$root.style.position=\"relative\");var s=document.createElement(\"iframe\");s.className=\"gantt_container_resize_watcher\",s.tabIndex=-1,r.config.wai_aria_attributes&&(s.setAttribute(\"role\",\"none\"),s.setAttribute(\"aria-hidden\",!0)),r.env.isSalesforce&&(r.config.container_resize_method=\"timeout\"),r.$root.appendChild(s),s.contentWindow?Oe(r,s.contentWindow):(r.$root.removeChild(s),Oe(r,window));}(this));}.bind(t);t.resetLayout=function(){i(),a(),this.render();},t._reinit=function(r){this.callEvent(\"onBeforeGanttReady\",[]),this._update_flags(),this.$services.getService(\"templateLoader\").initTemplates(this),i(),this.$root=null,r&&(this.$root=we(r),a(),this.$mouseEvents.reset(this.$root),function(s){s.$container&&!s.config.autosize&&s.$root.offsetHeight<50&&console.warn(`The Gantt container has a small height, so you cannot see its content. If it is not intended, you need to set the 'height' style rule to the container:\nhttps://docs.dhtmlx.com/gantt/faq.html#theganttchartisntrenderedcorrectly`);}(t)),this.callEvent(\"onTemplatesReady\",[]),this.callEvent(\"onGanttReady\",[]),this.render();},t.$click={buttons:{edit:function(r){t.isReadonly(t.getTask(r))||t.showLightbox(r);},delete:function(r){var s=t.getTask(r);if(!t.isReadonly(s)){var o=t.locale.labels.confirm_deleting,l=t.locale.labels.confirm_deleting_title;t._delete_task_confirm({task:s,message:o,title:l,callback:function(){t.isTaskExists(r)&&(s.$new?(t.$data.tasksStore._skipTaskRecalculation=\"lightbox\",t.silent(function(){t.deleteTask(r,!0);}),t.$data.tasksStore._skipTaskRecalculation=!1,t.refreshData()):(t.$data.tasksStore._skipTaskRecalculation=!0,t.deleteTask(r))),t.hideLightbox();}});}}}},t.render=function(){var r;if(this.callEvent(\"onBeforeGanttRender\",[]),!F(t)){!this.config.sort&&this._sort&&(this._sort=void 0),this.$root&&(this.config.rtl?(this.$root.classList.add(\"gantt_rtl\"),this.$root.firstChild.classList.add(\"gantt_rtl\")):(this.$root.classList.remove(\"gantt_rtl\"),this.$root.firstChild.classList.remove(\"gantt_rtl\")));var s=this.getScrollState(),o=s?s.x:0;this._getHorizontalScrollbar()&&(o=this._getHorizontalScrollbar().$config.codeScrollLeft||o||0),r=null,o&&(r=t.dateFromPos(o+this.config.task_scroll_offset));}if(me(this),F(t))t.refreshData();else{this.$layout.$config.autosize=this.config.autosize;var l=this.config.preserve_scroll;if(this.config.preserve_scroll=!1,this.$layout.resize(),this.config.preserve_scroll=l,this.config.preserve_scroll&&s){if(o||s.y){var c=t.getScrollState();if(+r!=+t.dateFromPos(c.x)||c.y!=s.y){o=null;var d=null;r&&(o=Math.max(t.posFromDate(r)-t.config.task_scroll_offset,0)),s.y&&(d=s.y),t.scrollTo(o,d);}}this.$layout.getScrollbarsInfo().forEach(u=>{const h=t.$ui.getView(u.id),_=t.utils.dom.isChildOf(h.$view,t.$container);u.boundViews.forEach(p=>{const y=t.$ui.getView(p);u.y&&u.y!=s.y&&y&&!_&&y.scrollTo(void 0,0),u.x_pos&&u.x_pos!=s.x&&y&&_&&y.scrollTo(u.x_pos,void 0);});});}}this.callEvent(\"onGanttRender\",[]);},t.setSizes=t.render,t.getTaskRowNode=function(r){for(var s=this.$grid_data.childNodes,o=this.config.task_attribute,l=0;l<s.length;l++)if(s[l].getAttribute&&s[l].getAttribute(o)==r)return s[l];return null;},t.changeLightboxType=function(r){if(this.getLightboxType()==r)return!0;t._silent_redraw_lightbox(r);},t._get_link_type=function(r,s){var o=null;return r&&s?o=t.config.links.start_to_start:!r&&s?o=t.config.links.finish_to_start:r||s?r&&!s&&(o=t.config.links.start_to_finish):o=t.config.links.finish_to_finish,o;},t.isLinkAllowed=function(r,s,o,l){var c=null;if(!(c=typeof r==\"object\"?r:{source:r,target:s,type:this._get_link_type(o,l)})||!(c.source&&c.target&&c.type)||c.source==c.target)return!1;var d=!0;return this.checkEvent(\"onLinkValidation\")&&(d=this.callEvent(\"onLinkValidation\",[c])),d;},t._correct_dst_change=function(r,s,o,l){var c=Vt(l)*o;if(c>3600&&c<86400){var d=r.getTimezoneOffset()-s;d&&(r=t.date.add(r,d,\"minute\"));}return r;},t.isSplitTask=function(r){return t.assert(r&&r instanceof Object,\"Invalid argument <b>task</b>=\"+r+\" of gantt.isSplitTask. Task object was expected\"),this.$data.tasksStore._isSplitItem(r);},t._is_icon_open_click=function(r){if(!r)return!1;var s=r.target||r.srcElement;if(!s||!s.className)return!1;var o=X(s);return o.indexOf(\"gantt_tree_icon\")!==-1&&(o.indexOf(\"gantt_close\")!==-1||o.indexOf(\"gantt_open\")!==-1);};}const Si={date:{month_full:[\"كانون الثاني\",\"شباط\",\"آذار\",\"نيسان\",\"أيار\",\"حزيران\",\"تموز\",\"آب\",\"أيلول\",\"تشرين الأول\",\"تشرين الثاني\",\"كانون الأول\"],month_short:[\"يناير\",\"فبراير\",\"مارس\",\"أبريل\",\"مايو\",\"يونيو\",\"يوليو\",\"أغسطس\",\"سبتمبر\",\"أكتوبر\",\"نوفمبر\",\"ديسمبر\"],day_full:[\"الأحد\",\"الأثنين\",\"ألثلاثاء\",\"الأربعاء\",\"ألحميس\",\"ألجمعة\",\"السبت\"],day_short:[\"احد\",\"اثنين\",\"ثلاثاء\",\"اربعاء\",\"خميس\",\"جمعة\",\"سبت\"]},labels:{new_task:\"مهمة جديد\",icon_save:\"اخزن\",icon_cancel:\"الغاء\",icon_details:\"تفاصيل\",icon_edit:\"تحرير\",icon_delete:\"حذف\",confirm_closing:\"التغييرات سوف تضيع, هل انت متأكد؟\",confirm_deleting:\"الحدث سيتم حذفها نهائيا ، هل أنت متأكد؟\",section_description:\"الوصف\",section_time:\"الفترة الزمنية\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"الغاء\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Ti={date:{month_full:[\"Студзень\",\"Люты\",\"Сакавік\",\"Красавік\",\"Maй\",\"Чэрвень\",\"Ліпень\",\"Жнівень\",\"Верасень\",\"Кастрычнік\",\"Лістапад\",\"Снежань\"],month_short:[\"Студз\",\"Лют\",\"Сак\",\"Крас\",\"Maй\",\"Чэр\",\"Ліп\",\"Жнів\",\"Вер\",\"Каст\",\"Ліст\",\"Снеж\"],day_full:[\"Нядзеля\",\"Панядзелак\",\"Аўторак\",\"Серада\",\"Чацвер\",\"Пятніца\",\"Субота\"],day_short:[\"Нд\",\"Пн\",\"Аўт\",\"Ср\",\"Чцв\",\"Пт\",\"Сб\"]},labels:{new_task:\"Новае заданне\",icon_save:\"Захаваць\",icon_cancel:\"Адмяніць\",icon_details:\"Дэталі\",icon_edit:\"Змяніць\",icon_delete:\"Выдаліць\",confirm_closing:\"\",confirm_deleting:\"Падзея будзе выдалена незваротна, працягнуць?\",section_description:\"Апісанне\",section_time:\"Перыяд часу\",section_type:\"Тып\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"ІСР\",column_text:\"Задача\",column_start_date:\"Пачатак\",column_duration:\"Працяг\",column_add:\"\",link:\"Сувязь\",confirm_link_deleting:\"будзе выдалена\",link_start:\"(пачатак)\",link_end:\"(канец)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Хвiлiна\",hours:\"Гадзiна\",days:\"Дзень\",weeks:\"Тыдзень\",months:\"Месяц\",years:\"Год\",message_ok:\"OK\",message_cancel:\"Адмяніць\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Ei={date:{month_full:[\"Gener\",\"Febrer\",\"Març\",\"Abril\",\"Maig\",\"Juny\",\"Juliol\",\"Agost\",\"Setembre\",\"Octubre\",\"Novembre\",\"Desembre\"],month_short:[\"Gen\",\"Feb\",\"Mar\",\"Abr\",\"Mai\",\"Jun\",\"Jul\",\"Ago\",\"Set\",\"Oct\",\"Nov\",\"Des\"],day_full:[\"Diumenge\",\"Dilluns\",\"Dimarts\",\"Dimecres\",\"Dijous\",\"Divendres\",\"Dissabte\"],day_short:[\"Dg\",\"Dl\",\"Dm\",\"Dc\",\"Dj\",\"Dv\",\"Ds\"]},labels:{new_task:\"Nova tasca\",icon_save:\"Guardar\",icon_cancel:\"Cancel·lar\",icon_details:\"Detalls\",icon_edit:\"Editar\",icon_delete:\"Esborrar\",confirm_closing:\"\",confirm_deleting:\"L'esdeveniment s'esborrarà definitivament, continuar ?\",section_description:\"Descripció\",section_time:\"Periode de temps\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Cancel·lar\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Ci={date:{month_full:[\"一月\",\"二月\",\"三月\",\"四月\",\"五月\",\"六月\",\"七月\",\"八月\",\"九月\",\"十月\",\"十一月\",\"十二月\"],month_short:[\"1月\",\"2月\",\"3月\",\"4月\",\"5月\",\"6月\",\"7月\",\"8月\",\"9月\",\"10月\",\"11月\",\"12月\"],day_full:[\"星期日\",\"星期一\",\"星期二\",\"星期三\",\"星期四\",\"星期五\",\"星期六\"],day_short:[\"日\",\"一\",\"二\",\"三\",\"四\",\"五\",\"六\"]},labels:{new_task:\"新任務\",icon_save:\"保存\",icon_cancel:\"关闭\",icon_details:\"详细\",icon_edit:\"编辑\",icon_delete:\"删除\",confirm_closing:\"请确认是否撤销修改!\",confirm_deleting:\"是否删除日程?\",section_description:\"描述\",section_time:\"时间范围\",section_type:\"类型\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"工作分解结构\",column_text:\"任务名\",column_start_date:\"开始时间\",column_duration:\"持续时间\",column_add:\"\",link:\"关联\",confirm_link_deleting:\"将被删除\",link_start:\" (开始)\",link_end:\" (结束)\",type_task:\"任务\",type_project:\"项目\",type_milestone:\"里程碑\",minutes:\"分钟\",hours:\"小时\",days:\"天\",weeks:\"周\",months:\"月\",years:\"年\",message_ok:\"OK\",message_cancel:\"关闭\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Di={date:{month_full:[\"Leden\",\"Únor\",\"Březen\",\"Duben\",\"Květen\",\"Červen\",\"Červenec\",\"Srpen\",\"Září\",\"Říjen\",\"Listopad\",\"Prosinec\"],month_short:[\"Led\",\"Ún\",\"Bře\",\"Dub\",\"Kvě\",\"Čer\",\"Čec\",\"Srp\",\"Září\",\"Říj\",\"List\",\"Pro\"],day_full:[\"Neděle\",\"Pondělí\",\"Úterý\",\"Středa\",\"Čtvrtek\",\"Pátek\",\"Sobota\"],day_short:[\"Ne\",\"Po\",\"Út\",\"St\",\"Čt\",\"Pá\",\"So\"]},labels:{new_task:\"Nová práce\",icon_save:\"Uložit\",icon_cancel:\"Zpět\",icon_details:\"Detail\",icon_edit:\"Edituj\",icon_delete:\"Smazat\",confirm_closing:\"\",confirm_deleting:\"Událost bude trvale smazána, opravdu?\",section_description:\"Poznámky\",section_time:\"Doba platnosti\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Zpět\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Ai={date:{month_full:[\"Januar\",\"Februar\",\"Marts\",\"April\",\"Maj\",\"Juni\",\"Juli\",\"August\",\"September\",\"Oktober\",\"November\",\"December\"],month_short:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"Maj\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Dec\"],day_full:[\"Søndag\",\"Mandag\",\"Tirsdag\",\"Onsdag\",\"Torsdag\",\"Fredag\",\"Lørdag\"],day_short:[\"Søn\",\"Man\",\"Tir\",\"Ons\",\"Tor\",\"Fre\",\"Lør\"]},labels:{new_task:\"Ny opgave\",icon_save:\"Gem\",icon_cancel:\"Fortryd\",icon_details:\"Detaljer\",icon_edit:\"Tilret\",icon_delete:\"Slet\",confirm_closing:\"Dine rettelser vil gå tabt.. Er dy sikker?\",confirm_deleting:\"Bigivenheden vil blive slettet permanent. Er du sikker?\",section_description:\"Beskrivelse\",section_time:\"Tidsperiode\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Fortryd\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Ii={date:{month_full:[\" Januar\",\" Februar\",\" März \",\" April\",\" Mai\",\" Juni\",\" Juli\",\" August\",\" September \",\" Oktober\",\" November \",\" Dezember\"],month_short:[\"Jan\",\"Feb\",\"Mär\",\"Apr\",\"Mai\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Dez\"],day_full:[\"Sonntag\",\"Montag\",\"Dienstag\",\" Mittwoch\",\" Donnerstag\",\"Freitag\",\"Samstag\"],day_short:[\"So\",\"Mo\",\"Di\",\"Mi\",\"Do\",\"Fr\",\"Sa\"]},labels:{new_task:\"Neue Aufgabe\",icon_save:\"Speichern\",icon_cancel:\"Abbrechen\",icon_details:\"Details\",icon_edit:\"Ändern\",icon_delete:\"Löschen\",confirm_closing:\"\",confirm_deleting:\"Der Eintrag wird gelöscht\",section_description:\"Beschreibung\",section_time:\"Zeitspanne\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"PSP\",column_text:\"Task-Namen\",column_start_date:\"Startzeit\",column_duration:\"Dauer\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"werden gelöscht\",link_start:\"(starten)\",link_end:\"(ende)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minuten\",hours:\"Stunden\",days:\"Tage\",weeks:\"Wochen\",months:\"Monate\",years:\"Jahre\",message_ok:\"OK\",message_cancel:\"Abbrechen\",section_constraint:\"Regel\",constraint_type:\"Regel\",constraint_date:\"Regel - Datum\",asap:\"So bald wie möglich\",alap:\"So spät wie möglich\",snet:\"Beginn nicht vor\",snlt:\"Beginn nicht später als\",fnet:\"Fertigstellung nicht vor\",fnlt:\"Fertigstellung nicht später als\",mso:\"Muss beginnen am\",mfo:\"Muss fertig sein am\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Mi={date:{month_full:[\"Ιανουάριος\",\"Φεβρουάριος\",\"Μάρτιος\",\"Απρίλιος\",\"Μάϊος\",\"Ιούνιος\",\"Ιούλιος\",\"Αύγουστος\",\"Σεπτέμβριος\",\"Οκτώβριος\",\"Νοέμβριος\",\"Δεκέμβριος\"],month_short:[\"ΙΑΝ\",\"ΦΕΒ\",\"ΜΑΡ\",\"ΑΠΡ\",\"ΜΑΙ\",\"ΙΟΥΝ\",\"ΙΟΥΛ\",\"ΑΥΓ\",\"ΣΕΠ\",\"ΟΚΤ\",\"ΝΟΕ\",\"ΔΕΚ\"],day_full:[\"Κυριακή\",\"Δευτέρα\",\"Τρίτη\",\"Τετάρτη\",\"Πέμπτη\",\"Παρασκευή\",\"Κυριακή\"],day_short:[\"ΚΥ\",\"ΔΕ\",\"ΤΡ\",\"ΤΕ\",\"ΠΕ\",\"ΠΑ\",\"ΣΑ\"]},labels:{new_task:\"Νέα εργασία\",icon_save:\"Αποθήκευση\",icon_cancel:\"Άκυρο\",icon_details:\"Λεπτομέρειες\",icon_edit:\"Επεξεργασία\",icon_delete:\"Διαγραφή\",confirm_closing:\"\",confirm_deleting:\"Το έργο θα διαγραφεί οριστικά. Θέλετε να συνεχίσετε;\",section_description:\"Περιγραφή\",section_time:\"Χρονική περίοδος\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Άκυρο\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Ni={date:{month_full:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],month_short:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],day_full:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],day_short:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"]},labels:{new_task:\"New task\",icon_save:\"Save\",icon_cancel:\"Cancel\",icon_details:\"Details\",icon_edit:\"Edit\",icon_delete:\"Delete\",confirm_closing:\"\",confirm_deleting:\"Task will be deleted permanently, are you sure?\",section_description:\"Description\",section_time:\"Time period\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Cancel\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Li={date:{month_full:[\"Enero\",\"Febrero\",\"Marzo\",\"Abril\",\"Mayo\",\"Junio\",\"Julio\",\"Agosto\",\"Septiembre\",\"Octubre\",\"Noviembre\",\"Diciembre\"],month_short:[\"Ene\",\"Feb\",\"Mar\",\"Abr\",\"May\",\"Jun\",\"Jul\",\"Ago\",\"Sep\",\"Oct\",\"Nov\",\"Dic\"],day_full:[\"Domingo\",\"Lunes\",\"Martes\",\"Miércoles\",\"Jueves\",\"Viernes\",\"Sábado\"],day_short:[\"Dom\",\"Lun\",\"Mar\",\"Mié\",\"Jue\",\"Vie\",\"Sáb\"]},labels:{new_task:\"Nueva tarea\",icon_save:\"Guardar\",icon_cancel:\"Cancelar\",icon_details:\"Detalles\",icon_edit:\"Editar\",icon_delete:\"Eliminar\",confirm_closing:\"\",confirm_deleting:\"El evento se borrará definitivamente, ¿continuar?\",section_description:\"Descripción\",section_time:\"Período\",section_type:\"Tipo\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"EDT\",column_text:\"Tarea\",column_start_date:\"Inicio\",column_duration:\"Duración\",column_add:\"\",link:\"Enlace\",confirm_link_deleting:\"será borrada\",link_start:\" (inicio)\",link_end:\" (fin)\",type_task:\"Tarea\",type_project:\"Proyecto\",type_milestone:\"Hito\",minutes:\"Minutos\",hours:\"Horas\",days:\"Días\",weeks:\"Semanas\",months:\"Meses\",years:\"Años\",message_ok:\"OK\",message_cancel:\"Cancelar\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Pi={date:{month_full:[\"ژانویه\",\"فوریه\",\"مارس\",\"آوریل\",\"مه\",\"ژوئن\",\"ژوئیه\",\"اوت\",\"سپتامبر\",\"اکتبر\",\"نوامبر\",\"دسامبر\"],month_short:[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\"],day_full:[\"يکشنبه\",\"دوشنبه\",\"سه‌شنبه\",\"چهارشنبه\",\"پنجشنبه\",\"جمعه\",\"شنبه\"],day_short:[\"ی\",\"د\",\"س\",\"چ\",\"پ\",\"ج\",\"ش\"]},labels:{new_task:\"وظیفه جدید\",icon_save:\"ذخیره\",icon_cancel:\"لغو\",icon_details:\"جزییات\",icon_edit:\"ویرایش\",icon_delete:\"حذف\",confirm_closing:\"تغییرات شما ازدست خواهد رفت، آیا مطمئن هستید؟\",confirm_deleting:\"این مورد برای همیشه حذف خواهد شد، آیا مطمئن هستید؟\",section_description:\"توضیحات\",section_time:\"مدت زمان\",section_type:\"نوع\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"عنوان\",column_start_date:\"زمان شروع\",column_duration:\"مدت\",column_add:\"\",link:\"ارتباط\",confirm_link_deleting:\"حذف خواهد شد\",link_start:\" (آغاز)\",link_end:\" (پایان)\",type_task:\"وظیفه\",type_project:\"پروژه\",type_milestone:\"نگارش\",minutes:\"دقایق\",hours:\"ساعات\",days:\"روزها\",weeks:\"هفته\",months:\"ماه‌ها\",years:\"سال‌ها\",message_ok:\"تایید\",message_cancel:\"لغو\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Ri={date:{month_full:[\"Tammikuu\",\"Helmikuu\",\"Maaliskuu\",\"Huhtikuu\",\"Toukokuu\",\"Kes&auml;kuu\",\"Hein&auml;kuu\",\"Elokuu\",\"Syyskuu\",\"Lokakuu\",\"Marraskuu\",\"Joulukuu\"],month_short:[\"Tam\",\"Hel\",\"Maa\",\"Huh\",\"Tou\",\"Kes\",\"Hei\",\"Elo\",\"Syy\",\"Lok\",\"Mar\",\"Jou\"],day_full:[\"Sunnuntai\",\"Maanantai\",\"Tiistai\",\"Keskiviikko\",\"Torstai\",\"Perjantai\",\"Lauantai\"],day_short:[\"Su\",\"Ma\",\"Ti\",\"Ke\",\"To\",\"Pe\",\"La\"]},labels:{new_task:\"Uusi tehtävä\",icon_save:\"Tallenna\",icon_cancel:\"Peru\",icon_details:\"Tiedot\",icon_edit:\"Muokkaa\",icon_delete:\"Poista\",confirm_closing:\"\",confirm_deleting:\"Haluatko varmasti poistaa tapahtuman?\",section_description:\"Kuvaus\",section_time:\"Aikajakso\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Peru\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Hi={date:{month_full:[\"Janvier\",\"Février\",\"Mars\",\"Avril\",\"Mai\",\"Juin\",\"Juillet\",\"Août\",\"Septembre\",\"Octobre\",\"Novembre\",\"Décembre\"],month_short:[\"Jan\",\"Fév\",\"Mar\",\"Avr\",\"Mai\",\"Juin\",\"Juil\",\"Aoû\",\"Sep\",\"Oct\",\"Nov\",\"Déc\"],day_full:[\"Dimanche\",\"Lundi\",\"Mardi\",\"Mercredi\",\"Jeudi\",\"Vendredi\",\"Samedi\"],day_short:[\"Dim\",\"Lun\",\"Mar\",\"Mer\",\"Jeu\",\"Ven\",\"Sam\"]},labels:{new_task:\"Nouvelle tâche\",icon_save:\"Enregistrer\",icon_cancel:\"Annuler\",icon_details:\"Détails\",icon_edit:\"Modifier\",icon_delete:\"Effacer\",confirm_closing:\"\",confirm_deleting:\"L'événement sera effacé sans appel, êtes-vous sûr ?\",section_description:\"Description\",section_time:\"Période\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"OTP\",column_text:\"Nom de la tâche\",column_start_date:\"Date initiale\",column_duration:\"Durée\",column_add:\"\",link:\"Le lien\",confirm_link_deleting:\"sera supprimé\",link_start:\"(début)\",link_end:\"(fin)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Heures\",days:\"Jours\",weeks:\"Semaines\",months:\"Mois\",years:\"Années\",message_ok:\"OK\",message_cancel:\"Annuler\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Oi={date:{month_full:[\"ינואר\",\"פברואר\",\"מרץ\",\"אפריל\",\"מאי\",\"יוני\",\"יולי\",\"אוגוסט\",\"ספטמבר\",\"אוקטובר\",\"נובמבר\",\"דצמבר\"],month_short:[\"ינו\",\"פבר\",\"מרץ\",\"אפר\",\"מאי\",\"יונ\",\"יול\",\"אוג\",\"ספט\",\"אוק\",\"נוב\",\"דצמ\"],day_full:[\"ראשון\",\"שני\",\"שלישי\",\"רביעי\",\"חמישי\",\"שישי\",\"שבת\"],day_short:[\"א\",\"ב\",\"ג\",\"ד\",\"ה\",\"ו\",\"ש\"]},labels:{new_task:\"משימה חדש\",icon_save:\"שמור\",icon_cancel:\"בטל\",icon_details:\"פרטים\",icon_edit:\"ערוך\",icon_delete:\"מחק\",confirm_closing:\"\",confirm_deleting:\"ארוע ימחק סופית.להמשיך?\",section_description:\"הסבר\",section_time:\"תקופה\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"בטל\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Bi={date:{month_full:[\"Siječanj\",\"Veljača\",\"Ožujak\",\"Travanj\",\"Svibanj\",\"Lipanj\",\"Srpanj\",\"Kolovoz\",\"Rujan\",\"Listopad\",\"Studeni\",\"Prosinac\"],month_short:[\"Sij\",\"Velj\",\"Ožu\",\"Tra\",\"Svi\",\"Lip\",\"Srp\",\"Kol\",\"Ruj\",\"Lis\",\"Stu\",\"Pro\"],day_full:[\"Nedjelja\",\"Ponedjeljak\",\"Utorak\",\"Srijeda\",\"Četvrtak\",\"Petak\",\"Subota\"],day_short:[\"Ned\",\"Pon\",\"Uto\",\"Sri\",\"Čet\",\"Pet\",\"Sub\"]},labels:{new_task:\"Novi Zadatak\",icon_save:\"Spremi\",icon_cancel:\"Odustani\",icon_details:\"Detalji\",icon_edit:\"Izmjeni\",icon_delete:\"Obriši\",confirm_closing:\"\",confirm_deleting:\"Zadatak će biti trajno izbrisan, jeste li sigurni?\",section_description:\"Opis\",section_time:\"Vremenski Period\",section_type:\"Tip\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"Naziv Zadatka\",column_start_date:\"Početno Vrijeme\",column_duration:\"Trajanje\",column_add:\"\",link:\"Poveznica\",confirm_link_deleting:\"će biti izbrisan\",link_start:\" (početak)\",link_end:\" (kraj)\",type_task:\"Zadatak\",type_project:\"Projekt\",type_milestone:\"Milestone\",minutes:\"Minute\",hours:\"Sati\",days:\"Dani\",weeks:\"Tjedni\",months:\"Mjeseci\",years:\"Godine\",message_ok:\"OK\",message_cancel:\"Odustani\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},zi={date:{month_full:[\"Január\",\"Február\",\"Március\",\"Április\",\"Május\",\"Június\",\"Július\",\"Augusztus\",\"Szeptember\",\"Október\",\"November\",\"December\"],month_short:[\"Jan\",\"Feb\",\"Már\",\"Ápr\",\"Máj\",\"Jún\",\"Júl\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Dec\"],day_full:[\"Vasárnap\",\"Hétfõ\",\"Kedd\",\"Szerda\",\"Csütörtök\",\"Péntek\",\"szombat\"],day_short:[\"Va\",\"Hé\",\"Ke\",\"Sze\",\"Csü\",\"Pé\",\"Szo\"]},labels:{new_task:\"Új feladat\",icon_save:\"Mentés\",icon_cancel:\"Mégse\",icon_details:\"Részletek\",icon_edit:\"Szerkesztés\",icon_delete:\"Törlés\",confirm_closing:\"\",confirm_deleting:\"Az esemény törölve lesz, biztosan folytatja?\",section_description:\"Leírás\",section_time:\"Idõszak\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Mégse\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Wi={date:{month_full:[\"Januari\",\"Februari\",\"Maret\",\"April\",\"Mei\",\"Juni\",\"Juli\",\"Agustus\",\"September\",\"Oktober\",\"November\",\"Desember\"],month_short:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"Mei\",\"Jun\",\"Jul\",\"Ags\",\"Sep\",\"Okt\",\"Nov\",\"Des\"],day_full:[\"Minggu\",\"Senin\",\"Selasa\",\"Rabu\",\"Kamis\",\"Jumat\",\"Sabtu\"],day_short:[\"Ming\",\"Sen\",\"Sel\",\"Rab\",\"Kam\",\"Jum\",\"Sab\"]},labels:{new_task:\"Tugas baru\",icon_save:\"Simpan\",icon_cancel:\"Batal\",icon_details:\"Detail\",icon_edit:\"Edit\",icon_delete:\"Hapus\",confirm_closing:\"\",confirm_deleting:\"Acara akan dihapus\",section_description:\"Keterangan\",section_time:\"Periode\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Batal\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},ji={date:{month_full:[\"Gennaio\",\"Febbraio\",\"Marzo\",\"Aprile\",\"Maggio\",\"Giugno\",\"Luglio\",\"Agosto\",\"Settembre\",\"Ottobre\",\"Novembre\",\"Dicembre\"],month_short:[\"Gen\",\"Feb\",\"Mar\",\"Apr\",\"Mag\",\"Giu\",\"Lug\",\"Ago\",\"Set\",\"Ott\",\"Nov\",\"Dic\"],day_full:[\"Domenica\",\"Lunedì\",\"Martedì\",\"Mercoledì\",\"Giovedì\",\"Venerdì\",\"Sabato\"],day_short:[\"Dom\",\"Lun\",\"Mar\",\"Mer\",\"Gio\",\"Ven\",\"Sab\"]},labels:{new_task:\"Nuovo compito\",icon_save:\"Salva\",icon_cancel:\"Chiudi\",icon_details:\"Dettagli\",icon_edit:\"Modifica\",icon_delete:\"Elimina\",confirm_closing:\"\",confirm_deleting:\"Sei sicuro di confermare l'eliminazione?\",section_description:\"Descrizione\",section_time:\"Periodo di tempo\",section_type:\"Tipo\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"Nome Attività\",column_start_date:\"Inizio\",column_duration:\"Durata\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"sarà eliminato\",link_start:\" (inizio)\",link_end:\" (fine)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minuti\",hours:\"Ore\",days:\"Giorni\",weeks:\"Settimane\",months:\"Mesi\",years:\"Anni\",message_ok:\"OK\",message_cancel:\"Chiudi\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Fi={date:{month_full:[\"1月\",\"2月\",\"3月\",\"4月\",\"5月\",\"6月\",\"7月\",\"8月\",\"9月\",\"10月\",\"11月\",\"12月\"],month_short:[\"1月\",\"2月\",\"3月\",\"4月\",\"5月\",\"6月\",\"7月\",\"8月\",\"9月\",\"10月\",\"11月\",\"12月\"],day_full:[\"日曜日\",\"月曜日\",\"火曜日\",\"水曜日\",\"木曜日\",\"金曜日\",\"土曜日\"],day_short:[\"日\",\"月\",\"火\",\"水\",\"木\",\"金\",\"土\"]},labels:{new_task:\"新しい仕事\",icon_save:\"保存\",icon_cancel:\"キャンセル\",icon_details:\"詳細\",icon_edit:\"編集\",icon_delete:\"削除\",confirm_closing:\"\",confirm_deleting:\"イベント完全に削除されます、宜しいですか？\",section_description:\"デスクリプション\",section_time:\"期間\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"キャンセル\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Vi={date:{month_full:[\"1월\",\"2월\",\"3월\",\"4월\",\"5월\",\"6월\",\"7월\",\"8월\",\"9월\",\"10월\",\"11월\",\"12월\"],month_short:[\"1월\",\"2월\",\"3월\",\"4월\",\"5월\",\"6월\",\"7월\",\"8월\",\"9월\",\"10월\",\"11월\",\"12월\"],day_full:[\"일요일\",\"월요일\",\"화요일\",\"수요일\",\"목요일\",\"금요일\",\"토요일\"],day_short:[\"일\",\"월\",\"화\",\"수\",\"목\",\"금\",\"토\"]},labels:{new_task:\"이름없는 작업\",icon_save:\"저장\",icon_cancel:\"취소\",icon_details:\"세부 사항\",icon_edit:\"수정\",icon_delete:\"삭제\",confirm_closing:\"\",confirm_deleting:\"작업을 삭제하시겠습니까?\",section_description:\"설명\",section_time:\"기간\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"작업명\",column_start_date:\"시작일\",column_duration:\"기간\",column_add:\"\",link:\"전제\",confirm_link_deleting:\"삭제 하시겠습니까?\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"작업\",type_project:\"프로젝트\",type_milestone:\"마일스톤\",minutes:\"분\",hours:\"시간\",days:\"일\",weeks:\"주\",months:\"달\",years:\"년\",message_ok:\"OK\",message_cancel:\"취소\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}};class Ui{constructor(e){this.addLocale=(n,i)=>{this._locales[n]=i;},this.getLocale=n=>this._locales[n],this._locales={};for(const n in e)this._locales[n]=e[n];}}const qi={date:{month_full:[\"Januar\",\"Februar\",\"Mars\",\"April\",\"Mai\",\"Juni\",\"Juli\",\"August\",\"September\",\"Oktober\",\"November\",\"Desember\"],month_short:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"Mai\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Des\"],day_full:[\"Søndag\",\"Mandag\",\"Tirsdag\",\"Onsdag\",\"Torsdag\",\"Fredag\",\"Lørdag\"],day_short:[\"Søn\",\"Mon\",\"Tir\",\"Ons\",\"Tor\",\"Fre\",\"Lør\"]},labels:{new_task:\"Ny oppgave\",icon_save:\"Lagre\",icon_cancel:\"Avbryt\",icon_details:\"Detaljer\",icon_edit:\"Rediger\",icon_delete:\"Slett\",confirm_closing:\"\",confirm_deleting:\"Hendelsen vil bli slettet permanent. Er du sikker?\",section_description:\"Beskrivelse\",section_time:\"Tidsperiode\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Avbryt\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Gi={date:{month_full:[\"Januari\",\"Februari\",\"Maart\",\"April\",\"Mei\",\"Juni\",\"Juli\",\"Augustus\",\"September\",\"Oktober\",\"November\",\"December\"],month_short:[\"Jan\",\"Feb\",\"mrt\",\"Apr\",\"Mei\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Dec\"],day_full:[\"Zondag\",\"Maandag\",\"Dinsdag\",\"Woensdag\",\"Donderdag\",\"Vrijdag\",\"Zaterdag\"],day_short:[\"Zo\",\"Ma\",\"Di\",\"Wo\",\"Do\",\"Vr\",\"Za\"]},labels:{new_task:\"Nieuwe taak\",icon_save:\"Opslaan\",icon_cancel:\"Annuleren\",icon_details:\"Details\",icon_edit:\"Bewerken\",icon_delete:\"Verwijderen\",confirm_closing:\"\",confirm_deleting:\"Item zal permanent worden verwijderd, doorgaan?\",section_description:\"Beschrijving\",section_time:\"Tijd periode\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"Taak omschrijving\",column_start_date:\"Startdatum\",column_duration:\"Duur\",column_add:\"\",link:\"Koppeling\",confirm_link_deleting:\"zal worden verwijderd\",link_start:\" (start)\",link_end:\" (eind)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"minuten\",hours:\"uren\",days:\"dagen\",weeks:\"weken\",months:\"maanden\",years:\"jaren\",message_ok:\"OK\",message_cancel:\"Annuleren\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Yi={date:{month_full:[\"Januar\",\"Februar\",\"Mars\",\"April\",\"Mai\",\"Juni\",\"Juli\",\"August\",\"September\",\"Oktober\",\"November\",\"Desember\"],month_short:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"Mai\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Des\"],day_full:[\"Søndag\",\"Mandag\",\"Tirsdag\",\"Onsdag\",\"Torsdag\",\"Fredag\",\"Lørdag\"],day_short:[\"Søn\",\"Man\",\"Tir\",\"Ons\",\"Tor\",\"Fre\",\"Lør\"]},labels:{new_task:\"Ny oppgave\",icon_save:\"Lagre\",icon_cancel:\"Avbryt\",icon_details:\"Detaljer\",icon_edit:\"Endre\",icon_delete:\"Slett\",confirm_closing:\"Endringer blir ikke lagret, er du sikker?\",confirm_deleting:\"Oppføringen vil bli slettet, er du sikker?\",section_description:\"Beskrivelse\",section_time:\"Tidsperiode\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Avbryt\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Ji={date:{month_full:[\"Styczeń\",\"Luty\",\"Marzec\",\"Kwiecień\",\"Maj\",\"Czerwiec\",\"Lipiec\",\"Sierpień\",\"Wrzesień\",\"Październik\",\"Listopad\",\"Grudzień\"],month_short:[\"Sty\",\"Lut\",\"Mar\",\"Kwi\",\"Maj\",\"Cze\",\"Lip\",\"Sie\",\"Wrz\",\"Paź\",\"Lis\",\"Gru\"],day_full:[\"Niedziela\",\"Poniedziałek\",\"Wtorek\",\"Środa\",\"Czwartek\",\"Piątek\",\"Sobota\"],day_short:[\"Nie\",\"Pon\",\"Wto\",\"Śro\",\"Czw\",\"Pią\",\"Sob\"]},labels:{new_task:\"Nowe zadanie\",icon_save:\"Zapisz\",icon_cancel:\"Anuluj\",icon_details:\"Szczegóły\",icon_edit:\"Edytuj\",icon_delete:\"Usuń\",confirm_closing:\"\",confirm_deleting:\"Zdarzenie zostanie usunięte na zawsze, kontynuować?\",section_description:\"Opis\",section_time:\"Okres czasu\",section_type:\"Typ\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"Nazwa zadania\",column_start_date:\"Początek\",column_duration:\"Czas trwania\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"zostanie usunięty\",link_start:\" (początek)\",link_end:\" (koniec)\",type_task:\"Zadanie\",type_project:\"Projekt\",type_milestone:\"Milestone\",minutes:\"Minuty\",hours:\"Godziny\",days:\"Dni\",weeks:\"Tydzień\",months:\"Miesiące\",years:\"Lata\",message_ok:\"OK\",message_cancel:\"Anuluj\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Ki={date:{month_full:[\"Janeiro\",\"Fevereiro\",\"Março\",\"Abril\",\"Maio\",\"Junho\",\"Julho\",\"Agosto\",\"Setembro\",\"Outubro\",\"Novembro\",\"Dezembro\"],month_short:[\"Jan\",\"Fev\",\"Mar\",\"Abr\",\"Mai\",\"Jun\",\"Jul\",\"Ago\",\"Set\",\"Out\",\"Nov\",\"Dez\"],day_full:[\"Domingo\",\"Segunda\",\"Terça\",\"Quarta\",\"Quinta\",\"Sexta\",\"Sábado\"],day_short:[\"Dom\",\"Seg\",\"Ter\",\"Qua\",\"Qui\",\"Sex\",\"Sab\"]},labels:{new_task:\"Nova tarefa\",icon_save:\"Salvar\",icon_cancel:\"Cancelar\",icon_details:\"Detalhes\",icon_edit:\"Editar\",icon_delete:\"Excluir\",confirm_closing:\"\",confirm_deleting:\"As tarefas serão excluidas permanentemente, confirme?\",section_description:\"Descrição\",section_time:\"Período\",section_type:\"Tipo\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"EAP\",column_text:\"Nome tarefa\",column_start_date:\"Data início\",column_duration:\"Duração\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"Será excluído!\",link_start:\" (início)\",link_end:\" (fim)\",type_task:\"Task\",type_project:\"Projeto\",type_milestone:\"Marco\",minutes:\"Minutos\",hours:\"Horas\",days:\"Dias\",weeks:\"Semanas\",months:\"Meses\",years:\"Anos\",message_ok:\"OK\",message_cancel:\"Cancelar\",section_constraint:\"Restrição\",constraint_type:\"Tipo Restrição\",constraint_date:\"Data restrição\",asap:\"Mais breve possível\",alap:\"Mais tarde possível\",snet:\"Não começar antes de\",snlt:\"Não começar depois de\",fnet:\"Não terminar antes de\",fnlt:\"Não terminar depois de\",mso:\"Precisa começar em\",mfo:\"Precisa terminar em\",resources_filter_placeholder:\"Tipo de filtros\",resources_filter_label:\"Ocultar vazios\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Xi={date:{month_full:[\"Ianuarie\",\"Februarie\",\"Martie\",\"Aprilie\",\"Mai\",\"Iunie\",\"Iulie\",\"August\",\"Septembrie\",\"Octombrie\",\"November\",\"December\"],month_short:[\"Ian\",\"Feb\",\"Mar\",\"Apr\",\"Mai\",\"Iun\",\"Iul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],day_full:[\"Duminica\",\"Luni\",\"Marti\",\"Miercuri\",\"Joi\",\"Vineri\",\"Sambata\"],day_short:[\"Du\",\"Lu\",\"Ma\",\"Mi\",\"Jo\",\"Vi\",\"Sa\"]},labels:{new_task:\"Sarcina noua\",icon_save:\"Salveaza\",icon_cancel:\"Anuleaza\",icon_details:\"Detalii\",icon_edit:\"Editeaza\",icon_delete:\"Sterge\",confirm_closing:\"Schimbarile nu vor fi salvate, esti sigur?\",confirm_deleting:\"Evenimentul va fi sters permanent, esti sigur?\",section_description:\"Descriere\",section_time:\"Interval\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Anuleaza\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Zi={date:{month_full:[\"Январь\",\"Февраль\",\"Март\",\"Апрель\",\"Maй\",\"Июнь\",\"Июль\",\"Август\",\"Сентябрь\",\"Oктябрь\",\"Ноябрь\",\"Декабрь\"],month_short:[\"Янв\",\"Фев\",\"Maр\",\"Aпр\",\"Maй\",\"Июн\",\"Июл\",\"Aвг\",\"Сен\",\"Окт\",\"Ноя\",\"Дек\"],day_full:[\"Воскресенье\",\"Понедельник\",\"Вторник\",\"Среда\",\"Четверг\",\"Пятница\",\"Суббота\"],day_short:[\"Вс\",\"Пн\",\"Вт\",\"Ср\",\"Чт\",\"Пт\",\"Сб\"]},labels:{new_task:\"Новое задание\",icon_save:\"Сохранить\",icon_cancel:\"Отменить\",icon_details:\"Детали\",icon_edit:\"Изменить\",icon_delete:\"Удалить\",confirm_closing:\"\",confirm_deleting:\"Событие будет удалено безвозвратно, продолжить?\",section_description:\"Описание\",section_time:\"Период времени\",section_type:\"Тип\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"ИСР\",column_text:\"Задача\",column_start_date:\"Начало\",column_duration:\"Длительность\",column_add:\"\",link:\"Связь\",confirm_link_deleting:\"будет удалена\",link_start:\" (начало)\",link_end:\" (конец)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Минута\",hours:\"Час\",days:\"День\",weeks:\"Неделя\",months:\"Месяц\",years:\"Год\",message_ok:\"OK\",message_cancel:\"Отменить\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"начните вводить слово для фильтрации\",resources_filter_label:\"спрятать не установленные\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Qi={date:{month_full:[\"Januar\",\"Februar\",\"Marec\",\"April\",\"Maj\",\"Junij\",\"Julij\",\"Avgust\",\"September\",\"Oktober\",\"November\",\"December\"],month_short:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"Maj\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Dec\"],day_full:[\"Nedelja\",\"Ponedeljek\",\"Torek\",\"Sreda\",\"Četrtek\",\"Petek\",\"Sobota\"],day_short:[\"Ned\",\"Pon\",\"Tor\",\"Sre\",\"Čet\",\"Pet\",\"Sob\"]},labels:{new_task:\"Nova naloga\",icon_save:\"Shrani\",icon_cancel:\"Prekliči\",icon_details:\"Podrobnosti\",icon_edit:\"Uredi\",icon_delete:\"Izbriši\",confirm_closing:\"\",confirm_deleting:\"Dogodek bo izbrisan. Želite nadaljevati?\",section_description:\"Opis\",section_time:\"Časovni okvir\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Prekliči\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},ta={date:{month_full:[\"Január\",\"Február\",\"Marec\",\"Apríl\",\"Máj\",\"Jún\",\"Júl\",\"August\",\"September\",\"Október\",\"November\",\"December\"],month_short:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"Máj\",\"Jún\",\"Júl\",\"Aug\",\"Sept\",\"Okt\",\"Nov\",\"Dec\"],day_full:[\"Nedeľa\",\"Pondelok\",\"Utorok\",\"Streda\",\"Štvrtok\",\"Piatok\",\"Sobota\"],day_short:[\"Ne\",\"Po\",\"Ut\",\"St\",\"Št\",\"Pi\",\"So\"]},labels:{new_task:\"Nová úloha\",icon_save:\"Uložiť\",icon_cancel:\"Späť\",icon_details:\"Detail\",icon_edit:\"Edituj\",icon_delete:\"Zmazať\",confirm_closing:\"Vaše zmeny nebudú uložené. Skutočne?\",confirm_deleting:\"Udalosť bude natrvalo vymazaná. Skutočne?\",section_description:\"Poznámky\",section_time:\"Doba platnosti\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Späť\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},ea={date:{month_full:[\"Januari\",\"Februari\",\"Mars\",\"April\",\"Maj\",\"Juni\",\"Juli\",\"Augusti\",\"September\",\"Oktober\",\"November\",\"December\"],month_short:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"Maj\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Dec\"],day_full:[\"Söndag\",\"Måndag\",\"Tisdag\",\"Onsdag\",\"Torsdag\",\"Fredag\",\"Lördag\"],day_short:[\"Sön\",\"Mån\",\"Tis\",\"Ons\",\"Tor\",\"Fre\",\"Lör\"]},labels:{new_task:\"Ny uppgift\",icon_save:\"Spara\",icon_cancel:\"Avbryt\",icon_details:\"Detajer\",icon_edit:\"Ändra\",icon_delete:\"Ta bort\",confirm_closing:\"\",confirm_deleting:\"Är du säker på att du vill ta bort händelsen permanent?\",section_description:\"Beskrivning\",section_time:\"Tid\",section_type:\"Typ\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"Uppgiftsnamn\",column_start_date:\"Starttid\",column_duration:\"Varaktighet\",column_add:\"\",link:\"Länk\",confirm_link_deleting:\"kommer tas bort\",link_start:\" (start)\",link_end:\" (slut)\",type_task:\"Uppgift\",type_project:\"Projekt\",type_milestone:\"Milstolpe\",minutes:\"Minuter\",hours:\"Timmar\",days:\"Dagar\",weeks:\"Veckor\",months:\"Månader\",years:\"År\",message_ok:\"OK\",message_cancel:\"Avbryt\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},na={date:{month_full:[\"Ocak\",\"Şubat\",\"Mart\",\"Nisan\",\"Mayıs\",\"Haziran\",\"Temmuz\",\"Ağustos\",\"Eylül\",\"Ekim\",\"Kasım\",\"Aralık\"],month_short:[\"Oca\",\"Şub\",\"Mar\",\"Nis\",\"May\",\"Haz\",\"Tem\",\"Ağu\",\"Eyl\",\"Eki\",\"Kas\",\"Ara\"],day_full:[\"Pazar\",\"Pazartesi\",\"Salı\",\"Çarşamba\",\"Perşembe\",\"Cuma\",\"Cumartesi\"],day_short:[\"Paz\",\"Pzt\",\"Sal\",\"Çar\",\"Per\",\"Cum\",\"Cmt\"]},labels:{new_task:\"Yeni görev\",icon_save:\"Kaydet\",icon_cancel:\"İptal\",icon_details:\"Detaylar\",icon_edit:\"Düzenle\",icon_delete:\"Sil\",confirm_closing:\"\",confirm_deleting:\"Görev silinecek, emin misiniz?\",section_description:\"Açıklama\",section_time:\"Zaman Aralığı\",section_type:\"Tip\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"Görev Adı\",column_start_date:\"Başlangıç\",column_duration:\"Süre\",column_add:\"\",link:\"Bağlantı\",confirm_link_deleting:\"silinecek\",link_start:\" (başlangıç)\",link_end:\" (bitiş)\",type_task:\"Görev\",type_project:\"Proje\",type_milestone:\"Kilometretaşı\",minutes:\"Dakika\",hours:\"Saat\",days:\"Gün\",weeks:\"Hafta\",months:\"Ay\",years:\"Yıl\",message_ok:\"OK\",message_cancel:\"Ýptal\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},ia={date:{month_full:[\"Січень\",\"Лютий\",\"Березень\",\"Квітень\",\"Травень\",\"Червень\",\"Липень\",\"Серпень\",\"Вересень\",\"Жовтень\",\"Листопад\",\"Грудень\"],month_short:[\"Січ\",\"Лют\",\"Бер\",\"Кві\",\"Тра\",\"Чер\",\"Лип\",\"Сер\",\"Вер\",\"Жов\",\"Лис\",\"Гру\"],day_full:[\"Неділя\",\"Понеділок\",\"Вівторок\",\"Середа\",\"Четвер\",\"П'ятниця\",\"Субота\"],day_short:[\"Нед\",\"Пон\",\"Вів\",\"Сер\",\"Чет\",\"Птн\",\"Суб\"]},labels:{new_task:\"Нове завдання\",icon_save:\"Зберегти\",icon_cancel:\"Відміна\",icon_details:\"Деталі\",icon_edit:\"Редагувати\",icon_delete:\"Вилучити\",confirm_closing:\"\",confirm_deleting:\"Подія вилучиться назавжди. Ви впевнені?\",section_description:\"Опис\",section_time:\"Часовий проміжок\",section_type:\"Тип\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Відміна\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_filter_placeholder:\"type to filter\",resources_filter_label:\"hide empty\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}};function aa(){this.constants=Un,this.version=\"9.0.15\",this.license=\"gpl\",this.templates={},this.ext={},this.keys={edit_save:this.constants.KEY_CODES.ENTER,edit_cancel:this.constants.KEY_CODES.ESC};}function ra(t){var e=new aa(),n=new qn(t),i={};e.plugins=function(l){for(var c in l)if(l[c]&&!i[c]){var d=n.getExtension(c);d&&(d(e),i[c]=!0);}return i;},e.$services=/* @__PURE__ */function(){var l={};return{services:{},setService:function(c,d){l[c]=d;},getService:function(c){return l[c]?l[c]():null;},dropService:function(c){l[c]&&delete l[c];},destructor:function(){for(var c in l)if(l[c]){var d=l[c];d&&d.destructor&&d.destructor();}l=null;}};}(),e.config={layout:{css:\"gantt_container\",rows:[{cols:[{view:\"grid\",scrollX:\"scrollHor\",scrollY:\"scrollVer\"},{resizer:!0,width:1},{view:\"timeline\",scrollX:\"scrollHor\",scrollY:\"scrollVer\"},{view:\"scrollbar\",id:\"scrollVer\"}]},{view:\"scrollbar\",id:\"scrollHor\",height:20}]},links:{finish_to_start:\"0\",start_to_start:\"1\",finish_to_finish:\"2\",start_to_finish:\"3\"},types:{task:\"task\",project:\"project\",milestone:\"milestone\"},auto_types:!1,duration_unit:\"day\",work_time:!1,correct_work_time:!1,skip_off_time:!1,cascade_delete:!0,autosize:!1,autosize_min_width:0,autoscroll:!0,autoscroll_speed:30,deepcopy_on_parse:!1,show_links:!0,show_task_cells:!0,static_background:!1,static_background_cells:!0,branch_loading:!1,branch_loading_property:\"$has_child\",show_loading:!1,show_chart:!0,show_grid:!0,min_duration:36e5,date_format:\"%d-%m-%Y %H:%i\",xml_date:void 0,start_on_monday:!0,server_utc:!1,show_progress:!0,fit_tasks:!1,select_task:!0,scroll_on_click:!0,smart_rendering:!0,preserve_scroll:!0,readonly:!1,container_resize_timeout:20,deadlines:!0,date_grid:\"%Y-%m-%d\",drag_links:!0,drag_progress:!0,drag_resize:!0,drag_project:!1,drag_move:!0,drag_mode:{resize:\"resize\",progress:\"progress\",move:\"move\",ignore:\"ignore\"},round_dnd_dates:!0,link_wrapper_width:20,link_arrow_size:12,root_id:0,autofit:!1,columns:[{name:\"text\",tree:!0,width:\"*\",resize:!0},{name:\"start_date\",align:\"center\",resize:!0},{name:\"duration\",align:\"center\"},{name:\"add\",width:44}],scale_offset_minimal:!0,inherit_scale_class:!1,scales:[{unit:\"day\",step:1,date:\"%d %M\"}],time_step:60,duration_step:1,task_date:\"%d %F %Y\",time_picker:\"%H:%i\",task_attribute:\"data-task-id\",link_attribute:\"data-link-id\",layer_attribute:\"data-layer\",buttons_left:[\"gantt_save_btn\",\"gantt_cancel_btn\"],_migrate_buttons:{dhx_save_btn:\"gantt_save_btn\",dhx_cancel_btn:\"gantt_cancel_btn\",dhx_delete_btn:\"gantt_delete_btn\"},buttons_right:[\"gantt_delete_btn\"],lightbox:{sections:[{name:\"description\",height:70,map_to:\"text\",type:\"textarea\",focus:!0},{name:\"time\",type:\"duration\",map_to:\"auto\"}],project_sections:[{name:\"description\",height:70,map_to:\"text\",type:\"textarea\",focus:!0},{name:\"type\",type:\"typeselect\",map_to:\"type\"},{name:\"time\",type:\"duration\",readonly:!0,map_to:\"auto\"}],milestone_sections:[{name:\"description\",height:70,map_to:\"text\",type:\"textarea\",focus:!0},{name:\"type\",type:\"typeselect\",map_to:\"type\"},{name:\"time\",type:\"duration\",single_date:!0,map_to:\"auto\"}]},drag_lightbox:!0,sort:!1,details_on_create:!0,details_on_dblclick:!0,initial_scroll:!0,task_scroll_offset:100,order_branch:!1,order_branch_free:!1,task_height:void 0,bar_height:\"full\",bar_height_padding:9,min_column_width:70,min_grid_column_width:70,grid_resizer_column_attribute:\"data-column-index\",keep_grid_width:!1,grid_resize:!1,grid_elastic_columns:!1,show_tasks_outside_timescale:!1,show_unscheduled:!0,resize_rows:!1,task_grid_row_resizer_attribute:\"data-row-index\",min_task_grid_row_height:30,row_height:36,readonly_property:\"readonly\",editable_property:\"editable\",calendar_property:\"calendar_id\",resource_calendars:{},dynamic_resource_calendars:!1,inherit_calendar:!1,type_renderers:{},open_tree_initially:!1,optimize_render:!0,prevent_default_scroll:!1,show_errors:!0,wai_aria_attributes:!0,smart_scales:!0,rtl:!1,placeholder_task:!1,horizontal_scroll_key:\"shiftKey\",drag_timeline:{useKey:void 0,ignore:\".gantt_task_line, .gantt_task_link\",render:!1},drag_multiple:!0,csp:\"auto\"},e.ajax=/* @__PURE__ */function(l){return{cache:!0,method:\"get\",parse:function(c){return typeof c!=\"string\"?c:(c=c.replace(/^[\\s]+/,\"\"),typeof DOMParser>\"u\"||mt.isIE?Z.ActiveXObject!==void 0&&((d=new Z.ActiveXObject(\"Microsoft.XMLDOM\")).async=\"false\",d.loadXML(c)):d=new DOMParser().parseFromString(c,\"text/xml\"),d);var d;},xmltop:function(c,d,u){if(d.status===void 0||d.status<400){var h=d.responseXML?d.responseXML||d:this.parse(d.responseText||d);if(h&&h.documentElement!==null&&!h.getElementsByTagName(\"parsererror\").length)return h.getElementsByTagName(c)[0];}return u!==-1&&l.callEvent(\"onLoadXMLError\",[\"Incorrect XML\",arguments[1],u]),document.createElement(\"DIV\");},xpath:function(c,d){if(d.nodeName||(d=d.responseXML||d),mt.isIE)return d.selectNodes(c)||[];for(var u,h=[],_=(d.ownerDocument||d).evaluate(c,d,null,XPathResult.ANY_TYPE,null);u=_.iterateNext();)h.push(u);return h;},query:function(c){return this._call(c.method||\"GET\",c.url,c.data||\"\",c.async||!0,c.callback,c.headers);},get:function(c,d,u){var h=xt(\"GET\",arguments);return this.query(h);},getSync:function(c,d){var u=xt(\"GET\",arguments);return u.async=!1,this.query(u);},put:function(c,d,u,h){var _=xt(\"PUT\",arguments);return this.query(_);},del:function(c,d,u){var h=xt(\"DELETE\",arguments);return this.query(h);},post:function(c,d,u,h){arguments.length==1?d=\"\":arguments.length==2&&typeof d==\"function\"&&(u=d,d=\"\");var _=xt(\"POST\",arguments);return this.query(_);},postSync:function(c,d,u){d=d===null?\"\":String(d);var h=xt(\"POST\",arguments);return h.async=!1,this.query(h);},_call:function(c,d,u,h,_,p){return new l.Promise(function(y,k){var b=typeof XMLHttpRequest!==void 0?new XMLHttpRequest():new Z.ActiveXObject(\"Microsoft.XMLHTTP\"),g=navigator.userAgent.match(/AppleWebKit/)!==null&&navigator.userAgent.match(/Qt/)!==null&&navigator.userAgent.match(/Safari/)!==null;h&&(b.onreadystatechange=function(){if(b.readyState==4||g&&b.readyState==3){if((b.status<200||b.status>299||b.responseText===\"\")&&!l.callEvent(\"onAjaxError\",[b]))return;setTimeout(function(){typeof _==\"function\"&&_.apply(Z,[{xmlDoc:b,filePath:d}]),y(b),typeof _==\"function\"&&(_=null,b=null);},0);}});var m=!this||!this.cache;if(c==\"GET\"&&m&&(d+=(d.indexOf(\"?\")>=0?\"&\":\"?\")+\"dhxr\"+(/* @__PURE__ */new Date()).getTime()+\"=1\"),b.open(c,d,h),p)for(var f in p)b.setRequestHeader(f,p[f]);else c.toUpperCase()==\"POST\"||c==\"PUT\"||c==\"DELETE\"?b.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded\"):c==\"GET\"&&(u=null);if(b.setRequestHeader(\"X-Requested-With\",\"XMLHttpRequest\"),b.send(u),!h)return{xmlDoc:b,filePath:d};});},urlSeparator:function(c){return c.indexOf(\"?\")!=-1?\"&\":\"?\";}};}(e),e.date=Gn(e),e.RemoteEvents=Jn;var a=function(l){function c(u){return{target:u.target||u.srcElement,pageX:u.pageX,pageY:u.pageY,clientX:u.clientX,clientY:u.clientY,metaKey:u.metaKey,shiftKey:u.shiftKey,ctrlKey:u.ctrlKey,altKey:u.altKey};}function d(u,h){this._obj=u,this._settings=h||{},ot(this);var _=this.getInputMethods();this._drag_start_timer=null,l.attachEvent(\"onGanttScroll\",R(function(k,b){this.clearDragTimer();},this));for(var p={passive:!1},y=0;y<_.length;y++)R(function(k){l.event(u,k.down,R(function(g){k.accessor(g)&&(g.button!==void 0&&g.button!==0||(h.preventDefault&&h.selector&&dt(g.target,h.selector)&&g.preventDefault(),l.config.touch&&g.timeStamp&&g.timeStamp-0<300||(this._settings.original_target=c(g),this._settings.original_element_sizes={...rt(g,nn(u)),width:g.target.offsetWidth,height:g.target.offsetHeight},l.config.touch?(this.clearDragTimer(),this._drag_start_timer=setTimeout(R(function(){l.getState().lightbox||this.dragStart(u,g,k);},this),l.config.touch_drag)):this.dragStart(u,g,k))));},this),p);var b=document.body;l.event(b,k.up,R(function(g){k.accessor(g)&&this.clearDragTimer();},this),p);},this)(_[y]);}return d.prototype={traceDragEvents:function(u,h){var _=R(function(m){return this.dragMove(u,m,h.accessor);},this);R(function(m){return this.dragScroll(u,m);},this);var p=R(function(m){if(!this.config.started||!W(this.config.updates_per_second)||dn(this,this.config.updates_per_second)){var f=_(m);if(f)try{m&&m.preventDefault&&m.cancelable&&m.preventDefault();}catch{}return f;}},this),y=vt(l.$root),k=this.config.mousemoveContainer||vt(l.$root),b={passive:!1},g=R(function(m){return l.eventRemove(k,h.move,p),l.eventRemove(y,h.up,g,b),this.dragEnd(u);},this);l.event(k,h.move,p,b),l.event(y,h.up,g,b);},checkPositionChange:function(u){var h=u.x-this.config.pos.x,_=u.y-this.config.pos.y;return Math.sqrt(Math.pow(Math.abs(h),2)+Math.pow(Math.abs(_),2))>this.config.sensitivity;},initDnDMarker:function(){var u=this.config.marker=document.createElement(\"div\");u.className=\"gantt_drag_marker\",u.innerHTML=\"\",document.body.appendChild(u);},backupEventTarget:function(u,h){if(l.config.touch){var _=h(u),p=_.target||_.srcElement,y=p.cloneNode(!0);this.config.original_target=c(_),this.config.original_target.target=y,this.config.backup_element=p,p.parentNode.appendChild(y),p.style.display=\"none\",(this.config.mousemoveContainer||document.body).appendChild(p);}},getInputMethods:function(){var u=[];if(u.push({move:\"mousemove\",down:\"mousedown\",up:\"mouseup\",accessor:function(_){return _;}}),l.config.touch){var h=!0;try{document.createEvent(\"TouchEvent\");}catch{h=!1;}h?u.push({move:\"touchmove\",down:\"touchstart\",up:\"touchend\",accessor:function(_){return _.touches&&_.touches.length>1?null:_.touches[0]?{target:document.elementFromPoint(_.touches[0].clientX,_.touches[0].clientY),pageX:_.touches[0].pageX,pageY:_.touches[0].pageY,clientX:_.touches[0].clientX,clientY:_.touches[0].clientY}:_;}}):Z.navigator.pointerEnabled?u.push({move:\"pointermove\",down:\"pointerdown\",up:\"pointerup\",accessor:function(_){return _.pointerType==\"mouse\"?null:_;}}):Z.navigator.msPointerEnabled&&u.push({move:\"MSPointerMove\",down:\"MSPointerDown\",up:\"MSPointerUp\",accessor:function(_){return _.pointerType==_.MSPOINTER_TYPE_MOUSE?null:_;}});}return u;},clearDragTimer:function(){this._drag_start_timer&&(clearTimeout(this._drag_start_timer),this._drag_start_timer=null);},dragStart:function(u,h,_){this.config&&this.config.started||(this.config={obj:u,marker:null,started:!1,pos:this.getPosition(h),sensitivity:4},this._settings&&P(this.config,this._settings,!0),this.traceDragEvents(u,_),l._prevent_touch_scroll=!0,h.target.closest(\".gantt_row\")&&!l.config.order_branch&&(l._prevent_touch_scroll=!1),document.body.classList.add(\"gantt_noselect\"),l.config.touch&&this.dragMove(u,h,_.accessor));},dragMove:function(u,h,_){var p=_(h);if(!p)return!1;if(!this.config.marker&&!this.config.started){var y=this.getPosition(p);if(l.config.touch||this.checkPositionChange(y)){if(this.config.started=!0,this.config.ignore=!1,l._touch_drag=!0,this.callEvent(\"onBeforeDragStart\",[u,this.config.original_target])===!1)return this.config.ignore=!0,!1;this.backupEventTarget(h,_),this.initDnDMarker(),l._touch_feedback(),this.callEvent(\"onAfterDragStart\",[u,this.config.original_target]);}else this.config.ignore=!0;}return this.config.ignore?!1:h.targetTouches&&!p.target?void 0:(p.pos=this.getPosition(p),this.config.marker.style.left=p.pos.x+\"px\",this.config.marker.style.top=p.pos.y+\"px\",this.callEvent(\"onDragMove\",[u,p]),!0);},dragEnd:function(u){var h=this.config.backup_element;h&&h.parentNode&&h.parentNode.removeChild(h),l._prevent_touch_scroll=!1,this.config.marker&&(this.config.marker.parentNode.removeChild(this.config.marker),this.config.marker=null,this.callEvent(\"onDragEnd\",[])),this.config.started=!1,l._touch_drag=!1,document.body.classList.remove(\"gantt_noselect\");},getPosition:function(u){var h=0,_=0;return u.pageX||u.pageY?(h=u.pageX,_=u.pageY):(u.clientX||u.clientY)&&(h=u.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,_=u.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:h,y:_};}},d;}(e);e.$services.setService(\"dnd\",function(){return a;});var r=/* @__PURE__ */function(l){var c={};function d(u,h,_){_=_||u;var p=l.config,y=l.templates;l.config[u]&&c[_]!=p[u]&&(h&&y[_]||(y[_]=l.date.date_to_str(p[u]),c[_]=p[u]));}return{initTemplates:function(){var u=l.date,h=u.date_to_str,_=l.config,p=h(_.xml_date||_.date_format,_.server_utc),y=u.str_to_date(_.xml_date||_.date_format,_.server_utc);d(\"date_scale\",!0,void 0,l.config,l.templates),d(\"date_grid\",!0,\"grid_date_format\",l.config,l.templates),d(\"task_date\",!0,void 0,l.config,l.templates),l.mixin(l.templates,{xml_format:void 0,format_date:p,xml_date:void 0,parse_date:y,progress_text:function(k,b,g){return\"\";},grid_header_class:function(k,b){return\"\";},task_text:function(k,b,g){return g.text;},task_class:function(k,b,g){return\"\";},task_end_date:function(k){return l.templates.task_date(k);},grid_row_class:function(k,b,g){return\"\";},task_row_class:function(k,b,g){return\"\";},timeline_cell_class:function(k,b){return\"\";},timeline_cell_content:function(k,b){return\"\";},scale_cell_class:function(k){return\"\";},scale_row_class:function(k){return\"\";},grid_indent:function(k){return\"<div class='gantt_tree_indent'></div>\";},grid_folder:function(k){return\"<div class='gantt_tree_icon gantt_folder_\"+(k.$open?\"open\":\"closed\")+\"'></div>\";},grid_file:function(k){return\"<div class='gantt_tree_icon gantt_file'></div>\";},grid_open:function(k){return\"<div class='gantt_tree_icon gantt_\"+(k.$open?\"close\":\"open\")+\"'></div>\";},grid_blank:function(k){return\"<div class='gantt_tree_icon gantt_blank'></div>\";},date_grid:function(k,b,g){return b&&l.isUnscheduledTask(b)&&l.config.show_unscheduled?l.templates.task_unscheduled_time(b):l.templates.grid_date_format(k,g);},task_time:function(k,b,g){return l.isUnscheduledTask(g)&&l.config.show_unscheduled?l.templates.task_unscheduled_time(g):l.templates.task_date(k)+\" - \"+l.templates.task_end_date(b);},task_unscheduled_time:function(k){return\"\";},time_picker:h(_.time_picker),link_class:function(k){return\"\";},link_description:function(k){var b=l.getTask(k.source),g=l.getTask(k.target);return\"<b>\"+b.text+\"</b> &ndash;  <b>\"+g.text+\"</b>\";},drag_link:function(k,b,g,m){k=l.getTask(k);var f=l.locale.labels,v=\"<b>\"+k.text+\"</b> \"+(b?f.link_start:f.link_end)+\"<br/>\";return g&&(v+=\"<b> \"+(g=l.getTask(g)).text+\"</b> \"+(m?f.link_start:f.link_end)+\"<br/>\"),v;},drag_link_class:function(k,b,g,m){var f=\"\";return k&&g&&(f=\" \"+(l.isLinkAllowed(k,g,b,m)?\"gantt_link_allow\":\"gantt_link_deny\")),\"gantt_link_tooltip\"+f;},tooltip_date_format:u.date_to_str(\"%Y-%m-%d\"),tooltip_text:function(k,b,g){return`<div>Task: ${g.text}</div>\n\t\t\t\t<div>Start date: ${l.templates.tooltip_date_format(k)}</div>\n\t\t\t\t<div>End date: ${l.templates.tooltip_date_format(b)}</div>`;},baseline_text:function(k,b,g){return\"\";}});},initTemplate:d};}(e);e.$services.setService(\"templateLoader\",function(){return r;}),ot(e);var s=new Kn();s.registerProvider(\"global\",function(){var l={min_date:e._min_date,max_date:e._max_date,selected_task:null};return e.$data&&e.$data.tasksStore&&(l.selected_task=e.$data.tasksStore.getSelectedId()),l;}),e.getState=s.getState,e.$services.setService(\"state\",function(){return s;}),P(e,Bn),e.Promise=Xn,e.env=mt,function(l){var c=Qn.create();P(l,c);var d,u=l.createDatastore({name:\"task\",type:\"treeDatastore\",rootId:function(){return l.config.root_id;},initItem:R(function(m){this.defined(m.id)||(m.id=this.uid()),m.start_date&&(m.start_date=l.date.parseDate(m.start_date,\"parse_date\")),m.end_date&&(m.end_date=l.date.parseDate(m.end_date,\"parse_date\"));var f=null;(m.duration||m.duration===0)&&(m.duration=f=1*m.duration),f&&(m.start_date&&!m.end_date?m.end_date=this.calculateEndDate(m):!m.start_date&&m.end_date&&(m.start_date=this.calculateEndDate({start_date:m.end_date,duration:-m.duration,task:m}))),l.config.deadlines!==!1&&m.deadline&&(m.deadline=l.date.parseDate(m.deadline,\"parse_date\")),m.progress=Number(m.progress)||0,this._isAllowedUnscheduledTask(m)&&this._set_default_task_timing(m),this._init_task_timing(m),m.start_date&&m.end_date&&this.correctTaskWorkTime(m),m.$source=[],m.$target=[];var v=this.$data.tasksStore.getItem(m.id);return v&&!W(m.open)&&(m.$open=v.$open),m.parent===void 0&&(m.parent=this.config.root_id),m.open&&(m.$open=!0),m;},l),getConfig:function(){return l.config;}}),h=l.createDatastore({name:\"link\",initItem:R(function(m){return this.defined(m.id)||(m.id=this.uid()),m;},l)});function _(m){var f=l.isTaskVisible(m);if(!f&&l.isTaskExists(m)){var v=l.getParent(m);l.isTaskExists(v)&&l.isTaskVisible(v)&&(v=l.getTask(v),l.isSplitTask(v)&&(f=!0));}return f;}function p(m){if(l.isTaskExists(m.source)){var f=l.getTask(m.source);f.$source=f.$source||[],y(m.id,f.$source)&&f.$source.push(m.id);}if(l.isTaskExists(m.target)){var v=l.getTask(m.target);v.$target=v.$target||[],y(m.id,v.$target)&&v.$target.push(m.id);}}function y(m,f){return f.indexOf(String(m))===-1&&f.indexOf(Number(m))===-1;}function k(m){if(l.isTaskExists(m.source)){for(var f=l.getTask(m.source),v=0;v<f.$source.length;v++)if(f.$source[v]==m.id){f.$source.splice(v,1);break;}}if(l.isTaskExists(m.target)){var x=l.getTask(m.target);for(v=0;v<x.$target.length;v++)if(x.$target[v]==m.id){x.$target.splice(v,1);break;}}}function b(){for(var m=null,f=l.$data.tasksStore.getItems(),v=0,x=f.length;v<x;v++)(m=f[v]).$source=[],m.$target=[];var $=l.$data.linksStore.getItems();for(v=0,x=$.length;v<x;v++)p($[v]);}function g(m){var f=m.source,v=m.target;for(var x in m.events)(function($,w){f.attachEvent($,function(){return v.callEvent(w,Array.prototype.slice.call(arguments));},w);})(x,m.events[x]);}l.attachEvent(\"onDestroy\",function(){u.destructor(),h.destructor();}),l.attachEvent(\"onLinkValidation\",function(m){if(l.isLinkExists(m.id)||m.id===\"predecessor_generated\")return!0;for(var f=l.getTask(m.source).$source,v=0;v<f.length;v++){var x=l.getLink(f[v]),$=m.source==x.source,w=m.target==x.target,S=m.type==x.type;if($&&w&&S)return!1;}return!0;}),u.attachEvent(\"onBeforeRefreshAll\",function(){if(!u._skipTaskRecalculation)for(var m=u.getVisibleItems(),f=0;f<m.length;f++){var v=m[f];v.$index=f,v.$local_index=l.getTaskIndex(v.id),l.resetProjectDates(v);}}),u.attachEvent(\"onFilterItem\",function(m,f){if(l.config.show_tasks_outside_timescale)return!0;var v=null,x=null;if(l.config.start_date&&l.config.end_date){if(l._isAllowedUnscheduledTask(f))return!0;if(v=l.config.start_date.valueOf(),x=l.config.end_date.valueOf(),+f.start_date>x||+f.end_date<+v)return!1;}return!0;}),u.attachEvent(\"onIdChange\",function(m,f){l._update_flags(m,f);var v=l.getTask(f);u.isSilent()||(v.$split_subtask||v.rollup)&&l.eachParent(function(x){l.refreshTask(x.id);},f);}),u.attachEvent(\"onAfterUpdate\",function(m){if(l._update_parents(m),l.getState(\"batchUpdate\").batch_update)return!0;var f=u.getItem(m);f.$source||(f.$source=[]);for(var v=0;v<f.$source.length;v++)h.refresh(f.$source[v]);for(f.$target||(f.$target=[]),v=0;v<f.$target.length;v++)h.refresh(f.$target[v]);}),u.attachEvent(\"onBeforeItemMove\",function(m,f,v){return!Rt(m,l,u)||(console.log(\"The placeholder task cannot be moved to another position.\"),!1);}),u.attachEvent(\"onAfterItemMove\",function(m,f,v){var x=l.getTask(m);this.getNextSibling(m)!==null?x.$drop_target=this.getNextSibling(m):this.getPrevSibling(m)!==null?x.$drop_target=\"next:\"+this.getPrevSibling(m):x.$drop_target=\"next:null\";}),u.attachEvent(\"onStoreUpdated\",function(m,f,v){if(v==\"delete\"&&l._update_flags(m,null),!l.$services.getService(\"state\").getState(\"batchUpdate\").batch_update){if(l.config.fit_tasks&&v!==\"paint\"){var x=l.getState();me(l);var $=l.getState();if(+x.min_date!=+$.min_date||+x.max_date!=+$.max_date)return l.render(),l.callEvent(\"onScaleAdjusted\",[]),!0;}v==\"add\"||v==\"move\"||v==\"delete\"?l.$layout&&(this.$config.name!=\"task\"||v!=\"add\"&&v!=\"delete\"||this._skipTaskRecalculation!=\"lightbox\"&&(this._skipTaskRecalculation=!0),l.$layout.resize()):m||h.refresh();}}),h.attachEvent(\"onAfterAdd\",function(m,f){p(f);}),h.attachEvent(\"onAfterUpdate\",function(m,f){b();}),h.attachEvent(\"onAfterDelete\",function(m,f){k(f);}),h.attachEvent(\"onAfterSilentDelete\",function(m,f){k(f);}),h.attachEvent(\"onBeforeIdChange\",function(m,f){k(l.mixin({id:m},l.$data.linksStore.getItem(f))),p(l.$data.linksStore.getItem(f));}),h.attachEvent(\"onFilterItem\",function(m,f){if(!l.config.show_links)return!1;var v=_(f.source),x=_(f.target);return!(!v||!x||l._isAllowedUnscheduledTask(l.getTask(f.source))||l._isAllowedUnscheduledTask(l.getTask(f.target)))&&l.callEvent(\"onBeforeLinkDisplay\",[m,f]);}),d={},l.attachEvent(\"onBeforeTaskDelete\",function(m,f){return d[m]=ve.getSubtreeLinks(l,m),!0;}),l.attachEvent(\"onAfterTaskDelete\",function(m,f){d[m]&&l.$data.linksStore.silent(function(){for(var v in d[m])l.isLinkExists(v)&&l.$data.linksStore.removeItem(v),k(d[m][v]);d[m]=null;});}),l.attachEvent(\"onAfterLinkDelete\",function(m,f){l.isTaskExists(f.source)&&l.refreshTask(f.source),l.isTaskExists(f.target)&&l.refreshTask(f.target);}),l.attachEvent(\"onParse\",b),g({source:h,target:l,events:{onItemLoading:\"onLinkLoading\",onBeforeAdd:\"onBeforeLinkAdd\",onAfterAdd:\"onAfterLinkAdd\",onBeforeUpdate:\"onBeforeLinkUpdate\",onAfterUpdate:\"onAfterLinkUpdate\",onBeforeDelete:\"onBeforeLinkDelete\",onAfterDelete:\"onAfterLinkDelete\",onIdChange:\"onLinkIdChange\"}}),g({source:u,target:l,events:{onItemLoading:\"onTaskLoading\",onBeforeAdd:\"onBeforeTaskAdd\",onAfterAdd:\"onAfterTaskAdd\",onBeforeUpdate:\"onBeforeTaskUpdate\",onAfterUpdate:\"onAfterTaskUpdate\",onBeforeDelete:\"onBeforeTaskDelete\",onAfterDelete:\"onAfterTaskDelete\",onIdChange:\"onTaskIdChange\",onBeforeItemMove:\"onBeforeTaskMove\",onAfterItemMove:\"onAfterTaskMove\",onFilterItem:\"onBeforeTaskDisplay\",onItemOpen:\"onTaskOpened\",onItemClose:\"onTaskClosed\",onBeforeSelect:\"onBeforeTaskSelected\",onAfterSelect:\"onTaskSelected\",onAfterUnselect:\"onTaskUnselected\"}}),l.$data={tasksStore:u,linksStore:h};}(e),e.dataProcessor=ni,e.createDataProcessor=ii,function(l){l.ext||(l.ext={});for(var c=[ri,si,li,di,ci,ui,hi,_i,gi],d=0;d<c.length;d++)c[d]&&c[d](l);}(e),function(l){l.getGridColumn=function(c){for(var d=l.config.columns,u=0;u<d.length;u++)if(d[u].name==c)return d[u];return null;},l.getGridColumns=function(){return l.config.columns.slice();};}(e),function(l){l.isReadonly=function(c){return typeof c!=\"number\"&&typeof c!=\"string\"||!l.isTaskExists(c)||(c=l.getTask(c)),(!c||!c[this.config.editable_property])&&(c&&c[this.config.readonly_property]||this.config.readonly);};}(e),fi(e),function(l){var c=new fn(l),d=new pn(c);P(l,xi(c,d));}(e),$i(e),function(l){l.getTaskType=function(c){return\"task\";};}(e),function(l){function c(){return l._cached_functions.update_if_changed(l),l._cached_functions.active||l._cached_functions.activate(),!0;}l._cached_functions={cache:{},mode:!1,critical_path_mode:!1,wrap_methods:function(u,h){if(h._prefetch_originals)for(var _ in h._prefetch_originals)h[_]=h._prefetch_originals[_];for(h._prefetch_originals={},_=0;_<u.length;_++)this.prefetch(u[_],h);},prefetch:function(u,h){var _=h[u];if(_){var p=this;h._prefetch_originals[u]=_,h[u]=function(){for(var y=new Array(arguments.length),k=0,b=arguments.length;k<b;k++)y[k]=arguments[k];if(p.active){var g=p.get_arguments_hash(Array.prototype.slice.call(y));p.cache[u]||(p.cache[u]={});var m=p.cache[u];if(p.has_cached_value(m,g))return p.get_cached_value(m,g);var f=_.apply(this,y);return p.cache_value(m,g,f),f;}return _.apply(this,y);};}return _;},cache_value:function(u,h,_){this.is_date(_)&&(_=new Date(_)),u[h]=_;},has_cached_value:function(u,h){return u.hasOwnProperty(h);},get_cached_value:function(u,h){var _=u[h];return this.is_date(_)&&(_=new Date(_)),_;},is_date:function(u){return u&&u.getUTCDate;},get_arguments_hash:function(u){for(var h=[],_=0;_<u.length;_++)h.push(this.stringify_argument(u[_]));return\"(\"+h.join(\";\")+\")\";},stringify_argument:function(u){return(u.id?u.id:this.is_date(u)?u.valueOf():u)+\"\";},activate:function(){this.clear(),this.active=!0;},deactivate:function(){this.clear(),this.active=!1;},clear:function(){this.cache={};},setup:function(u){var h=[],_=[\"_isProjectEnd\",\"_getProjectEnd\",\"_getSlack\"];this.mode==\"auto\"?u.config.highlight_critical_path&&(h=_):this.mode===!0&&(h=_),this.wrap_methods(h,u);},update_if_changed:function(u){(this.critical_path_mode!=u.config.highlight_critical_path||this.mode!==u.config.optimize_render)&&(this.critical_path_mode=u.config.highlight_critical_path,this.mode=u.config.optimize_render,this.setup(u));}},l.attachEvent(\"onBeforeGanttRender\",c),l.attachEvent(\"onBeforeDataRender\",c),l.attachEvent(\"onBeforeSmartRender\",function(){c();}),l.attachEvent(\"onBeforeParse\",c),l.attachEvent(\"onDataRender\",function(){l._cached_functions.deactivate();});var d=null;l.attachEvent(\"onSmartRender\",function(){d&&clearTimeout(d),d=setTimeout(function(){l._cached_functions.deactivate();},1e3);}),l.attachEvent(\"onBeforeGanttReady\",function(){return l._cached_functions.update_if_changed(l),!0;});}(e),wi(e),function(l){l.destructor=function(){for(var c in this.clearAll(),this.callEvent(\"onDestroy\",[]),this._getDatastores().forEach(function(d){d.destructor();}),this.$root&&delete this.$root.gantt,this._eventRemoveAll&&this._eventRemoveAll(),this.$layout&&this.$layout.destructor(),this.resetLightbox&&this.resetLightbox(),this.ext.inlineEditors&&this.ext.inlineEditors.destructor&&this.ext.inlineEditors.destructor(),this._dp&&this._dp.destructor&&this._dp.destructor(),this.$services.destructor(),this.detachAllEvents(),this)c.indexOf(\"$\")===0&&delete this[c];this.$destroyed=!0;};}(e);var o=new Ui({en:Ni,ar:Si,be:Ti,ca:Ei,cn:Ci,cs:Di,da:Ai,de:Ii,el:Mi,es:Li,fa:Pi,fi:Ri,fr:Hi,he:Oi,hr:Bi,hu:zi,id:Wi,it:ji,jp:Fi,kr:Vi,nb:qi,nl:Gi,no:Yi,pl:Ji,pt:Ki,ro:Xi,ru:Zi,si:Qi,sk:ta,sv:ea,tr:na,ua:ia});return e.i18n={addLocale:o.addLocale,setLocale:function(l){if(typeof l==\"string\"){var c=o.getLocale(l);c||(c=o.getLocale(\"en\")),e.locale=c;}else if(l)if(e.locale)for(var d in l)l[d]&&typeof l[d]==\"object\"?(e.locale[d]||(e.locale[d]={}),e.mixin(e.locale[d],l[d],!0)):e.locale[d]=l[d];else e.locale=l;const u=e.locale.labels;u.gantt_save_btn=u.gantt_save_btn||u.icon_save,u.gantt_cancel_btn=u.gantt_cancel_btn||u.icon_cancel,u.gantt_delete_btn=u.gantt_delete_btn||u.icon_delete;},getLocale:o.getLocale},e.i18n.setLocale(\"en\"),e;}function sa(t){var e=\"data-dhxbox\",n=null;function i(g,m){var f=g.callback;y.hide(g.box),n=g.box=null,f&&f(m);}function a(g){if(n){var m=g.which||g.keyCode,f=!1;if(k.keyboard){if(m==13||m==32){var v=g.target||g.srcElement;X(v).indexOf(\"gantt_popup_button\")>-1&&v.click?v.click():(i(n,!0),f=!0);}m==27&&(i(n,!1),f=!0);}return f?(g.preventDefault&&g.preventDefault(),!(g.cancelBubble=!0)):void 0;}}var r=vt(t.$root)||document;function s(g){s.cover||(s.cover=document.createElement(\"div\"),s.cover.onkeydown=a,s.cover.className=\"dhx_modal_cover\",document.body.appendChild(s.cover)),s.cover.style.display=g?\"inline-block\":\"none\";}function o(g,m,f){return\"<div \"+t._waiAria.messageButtonAttrString(g)+\" class='gantt_popup_button \"+(\"gantt_\"+m.toLowerCase().replace(/ /g,\"_\")+\"_button\")+\"' data-result='\"+f+\"' result='\"+f+\"' ><div>\"+g+\"</div></div>\";}function l(){for(var g=[].slice.apply(arguments,[0]),m=0;m<g.length;m++)if(g[m])return g[m];}function c(g,m,f){var v=g.tagName?g:function(w,S,T){var E=document.createElement(\"div\"),C=st();t._waiAria.messageModalAttr(E,C),E.className=\" gantt_modal_box gantt-\"+w.type,E.setAttribute(e,1);var D=\"\";if(w.width&&(E.style.width=w.width),w.height&&(E.style.height=w.height),w.title&&(D+='<div class=\"gantt_popup_title\">'+w.title+\"</div>\"),D+='<div class=\"gantt_popup_text\" id=\"'+C+'\"><span>'+(w.content?\"\":w.text)+'</span></div><div  class=\"gantt_popup_controls\">',S&&(D+=o(l(w.ok,t.locale.labels.message_ok,\"OK\"),\"ok\",!0)),T&&(D+=o(l(w.cancel,t.locale.labels.message_cancel,\"Cancel\"),\"cancel\",!1)),w.buttons)for(var M=0;M<w.buttons.length;M++){var I=w.buttons[M];D+=typeof I==\"object\"?o(I.label,I.css||\"gantt_\"+I.label.toLowerCase()+\"_button\",I.value||M):o(I,I,M);}if(D+=\"</div>\",E.innerHTML=D,w.content){var A=w.content;typeof A==\"string\"&&(A=document.getElementById(A)),A.style.display==\"none\"&&(A.style.display=\"\"),E.childNodes[w.title?1:0].appendChild(A);}return E.onclick=function(N){var L=N.target||N.srcElement;if(L.className||(L=L.parentNode),dt(L,\".gantt_popup_button\")){var O=L.getAttribute(\"data-result\");i(w,O=O==\"true\"||O!=\"false\"&&O);}},w.box=E,(S||T)&&(n=w),E;}(g,m,f);g.hidden||s(!0),document.body.appendChild(v);var x=Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-v.offsetWidth)/2)),$=Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-v.offsetHeight)/2));return g.position==\"top\"?v.style.top=\"-3px\":v.style.top=$+\"px\",v.style.left=x+\"px\",v.onkeydown=a,y.focus(v),g.hidden&&y.hide(v),t.callEvent(\"onMessagePopup\",[v]),v;}function d(g){return c(g,!0,!1);}function u(g){return c(g,!0,!0);}function h(g){return c(g);}function _(g,m,f){return typeof g!=\"object\"&&(typeof m==\"function\"&&(f=m,m=\"\"),g={text:g,type:m,callback:f}),g;}function p(g,m,f,v){return typeof g!=\"object\"&&(g={text:g,type:m,expire:f,id:v}),g.id=g.id||st(),g.expire=g.expire||k.expire,g;}t.event(r,\"keydown\",a,!0);var y=function(){var g=_.apply(this,arguments);return g.type=g.type||\"alert\",h(g);};y.hide=function(g){for(;g&&g.getAttribute&&!g.getAttribute(e);)g=g.parentNode;g&&(g.parentNode.removeChild(g),s(!1),t.callEvent(\"onAfterMessagePopup\",[g]));},y.focus=function(g){setTimeout(function(){var m=Lt(g);m.length&&m[0].focus&&m[0].focus();},1);};var k=function(g,m,f,v){switch((g=p.apply(this,arguments)).type=g.type||\"info\",g.type.split(\"-\")[0]){case\"alert\":return d(g);case\"confirm\":return u(g);case\"modalbox\":return h(g);default:return function(x){k.area||(k.area=document.createElement(\"div\"),k.area.className=\"gantt_message_area\",k.area.style[k.position]=\"5px\"),Y(k.area,document.body)||document.body.appendChild(k.area),k.hide(x.id);var $=document.createElement(\"div\");return $.innerHTML=\"<div>\"+x.text+\"</div>\",$.className=\"gantt-info gantt-\"+x.type,$.onclick=function(){k.hide(x.id),x=null;},t._waiAria.messageInfoAttr($),k.position==\"bottom\"&&k.area.firstChild?k.area.insertBefore($,k.area.firstChild):k.area.appendChild($),x.expire>0&&(k.timers[x.id]=window.setTimeout(function(){k&&k.hide(x.id);},x.expire)),k.pull[x.id]=$,$=null,x.id;}(g);}};k.seed=(/* @__PURE__ */new Date()).valueOf(),k.uid=st,k.expire=4e3,k.keyboard=!0,k.position=\"top\",k.pull={},k.timers={},k.hideAll=function(){for(var g in k.pull)k.hide(g);},k.hide=function(g){var m=k.pull[g];m&&m.parentNode&&(window.setTimeout(function(){m.parentNode.removeChild(m),m=null;},2e3),m.className+=\" hidden\",k.timers[g]&&window.clearTimeout(k.timers[g]),delete k.pull[g]);};var b=[];return t.attachEvent(\"onMessagePopup\",function(g){b.push(g);}),t.attachEvent(\"onAfterMessagePopup\",function(g){for(var m=0;m<b.length;m++)b[m]===g&&(b.splice(m,1),m--);}),t.attachEvent(\"onDestroy\",function(){s.cover&&s.cover.parentNode&&s.cover.parentNode.removeChild(s.cover);for(var g=0;g<b.length;g++)b[g].parentNode&&b[g].parentNode.removeChild(b[g]);b=null,k.area&&k.area.parentNode&&k.area.parentNode.removeChild(k.area),k=null;}),{alert:function(){var g=_.apply(this,arguments);return g.type=g.type||\"confirm\",d(g);},confirm:function(){var g=_.apply(this,arguments);return g.type=g.type||\"alert\",u(g);},message:k,modalbox:y};}function ze(t,e){var n=this.$config[t];return n?(n.$extendedConfig||(n.$extendedConfig=!0,Object.setPrototypeOf(n,e)),n):e;}function oa(t,e){var n,i,a;P(t,(n=e,{$getConfig:function(){return i||(i=n?n.$getConfig():this.$gantt.config),this.$config.config?ze.call(this,\"config\",i):i;},$getTemplates:function(){return a||(a=n?n.$getTemplates():this.$gantt.templates),this.$config.templates?ze.call(this,\"templates\",a):a;}}));}const la=function(t){var e={},n={};function i(a,r,s,o){var l=e[a];if(!l||!l.create)return!1;a!=\"resizer\"||s.mode||(o.$config.cols?s.mode=\"x\":s.mode=\"y\"),a!=\"viewcell\"||s.view!=\"scrollbar\"||s.scroll||(o.$config.cols?s.scroll=\"y\":s.scroll=\"x\"),(s=q(s)).id||n[s.view]||(s.id=s.view),s.id&&!s.css&&(s.css=s.id+\"_cell\");var c=new l.create(r,s,this,t);return l.configure&&l.configure(c),oa(c,o),c.$id||(c.$id=s.id||t.uid()),c.$parent||typeof r!=\"object\"||(c.$parent=r),c.$config||(c.$config=s),n[c.$id]&&(c.$id=t.uid()),n[c.$id]=c,c;}return{initUI:function(a,r){var s=\"cell\";return a.view?s=\"viewcell\":a.resizer?s=\"resizer\":a.rows||a.cols?s=\"layout\":a.views&&(s=\"multiview\"),i.call(this,s,null,a,r);},reset:function(){n={};},registerView:function(a,r,s){e[a]={create:r,configure:s};},createView:i,getView:function(a){return n[a];}};};var da=/* @__PURE__ */function(t){return function(e){var n={click:{},doubleclick:{},contextMenu:{}};function i(h,_,p,y){n[h][_]||(n[h][_]=[]),n[h][_].push({handler:p,root:y});}function a(h){h=h||window.event;var _=e.locate(h),p=s(h,n.click),y=!0;if(_!==null?y=!e.checkEvent(\"onTaskClick\")||e.callEvent(\"onTaskClick\",[_,h]):e.callEvent(\"onEmptyClick\",[h]),y){if(!o(p,h,_))return;switch(h.target.nodeName){case\"SELECT\":case\"INPUT\":return;}_&&e.getTask(_)&&!e._multiselect&&e.config.select_task&&e.selectTask(_);}}function r(h){var _=(h=h||window.event).target||h.srcElement,p=e.locate(_),y=e.locate(_,e.config.link_attribute),k=!e.checkEvent(\"onContextMenu\")||e.callEvent(\"onContextMenu\",[p,y,h]);return k||(h.preventDefault?h.preventDefault():h.returnValue=!1),k;}function s(h,_){for(var p=h.target||h.srcElement,y=[];p;){var k=t.getClassName(p);if(k){k=k.split(\" \");for(var b=0;b<k.length;b++)if(k[b]&&_[k[b]])for(var g=_[k[b]],m=0;m<g.length;m++)g[m].root&&!t.isChildOf(p,g[m].root)||y.push(g[m].handler);}p=p.parentNode;}return y;}function o(h,_,p){for(var y=!0,k=0;k<h.length;k++){var b=h[k].call(e,_,p,_.target||_.srcElement);y=y&&!(b!==void 0&&b!==!0);}return y;}function l(h){h=h||window.event;var _=e.locate(h),p=s(h,n.doubleclick),y=!e.checkEvent(\"onTaskDblClick\")||_===null||e.callEvent(\"onTaskDblClick\",[_,h]);if(y){if(!o(p,h,_))return;_!==null&&e.getTask(_)&&y&&e.config.details_on_dblclick&&!e.isReadonly(_)&&e.showLightbox(_);}}function c(h){if(e.checkEvent(\"onMouseMove\")){var _=e.locate(h);e._last_move_event=h,e.callEvent(\"onMouseMove\",[_,h]);}}var d=e._createDomEventScope();function u(h){d.detachAll(),h&&(d.attach(h,\"click\",a),d.attach(h,\"dblclick\",l),d.attach(h,\"mousemove\",c),d.attach(h,\"contextmenu\",r));}return{reset:u,global:function(h,_,p){i(h,_,p,null);},delegate:i,detach:function(h,_,p,y){if(n[h]&&n[h][_]){for(var k=n[h],b=k[_],g=0;g<b.length;g++)b[g].root==y&&(b.splice(g,1),g--);b.length||delete k[_];}},callHandler:function(h,_,p,y){var k=n[h][_];if(k)for(var b=0;b<k.length;b++)(p||k[b].root)&&k[b].root!==p||k[b].handler.apply(this,y);},onDoubleClick:l,onMouseMove:c,onContextMenu:r,onClick:a,destructor:function(){u(),n=null,d=null;}};};}(rn);const ca={init:da};function We(t,e,n){return!!e&&!(e.left>t.x_end||e.left+e.width<t.x)&&!(e.top>t.y_end||e.top+e.height<t.y);}function Nt(t){return t.config.smart_rendering&&t._smart_render;}function Kt(t,e,n){return{top:e.getItemTop(t.id),height:e.getItemHeight(t.id),left:0,right:1/0};}function ft(t,e,n,i,a){var r=e.getItemIndexByTopPosition(a.y)||0,s=e.getItemIndexByTopPosition(a.y_end)||i.count(),o=Math.max(0,r-1),l=Math.min(i.count(),s+1);const c=[];if(t.config.keyboard_navigation&&t.getSelectedId()){let d=t.getTask(t.getSelectedId());d.$expanded_branch&&!d.$split_subtask&&c.push(t.getSelectedId());}if(t.$ui.getView(\"grid\")&&t.ext.inlineEditors&&t.ext.inlineEditors.getState().id){let d=t.ext.inlineEditors.getState().id;i.exists(d)&&c.push(d);}return{start:o,end:l,ids:c};}var ua=function(t){var e=/* @__PURE__ */function(n){var i={},a={};function r(o){var l=null;return typeof o.view==\"string\"?l=n.$ui.getView(o.view):o.view&&(l=o.view),l;}function s(o,l,c){if(a[o])return a[o];l.renderer||n.assert(!1,\"Invalid renderer call\");var d=null,u=null,h=null,_=null,p=null;typeof l.renderer==\"function\"?(d=l.renderer,h=Kt):(d=l.renderer.render,u=l.renderer.update,_=l.renderer.onrender,l.renderer.isInViewPort?p=l.renderer.isInViewPort:h=l.renderer.getRectangle,h||h===null||(h=Kt));var y=l.filter;return c&&c.setAttribute(n.config.layer_attribute,!0),a[o]={render_item:function(k,b,g,m,f){if(b=b||c,!y||y(k)){var v=m||r(l),x=f||(v?v.$getConfig():null),$=g;!$&&x&&x.smart_rendering&&($=v.getViewPort());var w=null;!Nt(n)&&(h||p)&&$?(p?p(k,$,v,x,n):We($,h(k,v,x,n)))&&(w=d.call(n,k,v,x,$)):w=d.call(n,k,v,x,$),this.append(k,w,b);var S=b.nodeType==11;_&&!S&&w&&_.call(n,k,w,v);}else this.remove_item(k.id);},clear:function(k){this.rendered=i[o]={},l.append||this.clear_container(k);},clear_container:function(k){(k=k||c)&&(k.innerHTML=\"\");},get_visible_range:function(k){var b,g,m=r(l),f=m?m.$getConfig():null;return f&&f.smart_rendering&&(b=m.getViewPort()),m&&b&&(typeof l.renderer==\"function\"?g=ft(n,m,0,k,b):l.renderer&&l.renderer.getVisibleRange&&(g=l.renderer.getVisibleRange(n,m,f,k,b))),g||(g={start:0,end:k.count()}),g;},prepare_data:function(k){if(l.renderer&&l.renderer.prepareData)return l.renderer.prepareData(k,n,l);},render_items:function(k,b){b=b||c;var g=document.createDocumentFragment();this.clear(b);var m=null,f=r(l),v=f?f.$getConfig():null;v&&v.smart_rendering&&(m=f.getViewPort());for(var x=0,$=k.length;x<$;x++)this.render_item(k[x],g,m,f,v);b.appendChild(g,b);var w={};k.forEach(function(E){w[E.id]=E;});var S={};if(_){var T={};for(var x in this.rendered)S[x]||(T[x]=this.rendered[x],_.call(n,w[x],this.rendered[x],f));}},update_items:function(k,b){var g=r(l),m=g?g.$getConfig():null;if(g&&g.$getConfig().smart_rendering&&!Nt(n)&&this.rendered&&(h||p)){b=b||c;var f=document.createDocumentFragment(),v=null;g&&(v=g.getViewPort());var x={};k.forEach(function(I){x[I.id]=I;});var $={},w={};for(var S in this.rendered)w[S]=!0,$[S]=!0;for(var T={},E=(S=0,k.length);S<E;S++){var C=k[S],D=this.rendered[C.id];w[C.id]=!1,D&&D.parentNode?(p?p(C,v,g,m,n):We(v,h(C,g,m,n)))?(u&&u.call(n,C,D,g,m,v),this.restore(C,f)):w[C.id]=!0:(T[k[S].id]=!0,this.render_item(k[S],f,v,g,m));}for(var S in w)w[S]&&this.hide(S);if(f.childNodes.length&&b.appendChild(f,b),_){var M={};for(var S in this.rendered)$[S]&&!T[S]||(M[S]=this.rendered[S],_.call(n,x[S],this.rendered[S],g));}}},append:function(k,b,g){this.rendered&&(b?(this.rendered[k.id]&&this.rendered[k.id].parentNode?this.replace_item(k.id,b):g.appendChild(b),this.rendered[k.id]=b):this.rendered[k.id]&&this.remove_item(k.id));},replace_item:function(k,b){var g=this.rendered[k];g&&g.parentNode&&g.parentNode.replaceChild(b,g),this.rendered[k]=b;},remove_item:function(k){this.hide(k),delete this.rendered[k];},hide:function(k){var b=this.rendered[k];b&&b.parentNode&&b.parentNode.removeChild(b),delete this.rendered[k];},restore:function(k,b){var g=this.rendered[k.id];g?g.parentNode||this.append(k,g,b||c):this.render_item(k,b||c);},change_id:function(k,b){this.rendered[b]=this.rendered[k],delete this.rendered[k];},rendered:i[o],node:c,destructor:function(){this.clear(),delete a[o],delete i[o];}},a[o];}return{getRenderer:s,clearRenderers:function(){for(var o in a)s(o).destructor();}};}(t);return{createGroup:function(n,i,a,r){var s={tempCollection:[],renderers:{},container:n,filters:[],getLayers:function(){this._add();var o=[];for(var l in this.renderers)o.push(this.renderers[l]);return o;},getLayer:function(o){return this.renderers[o];},_add:function(o){o&&(o.id=o.id||st(),this.tempCollection.push(o));const l=this.container(),c=this.tempCollection;for(let d=0;d<c.length;d++){if(o=c[d],!(this.container()||o&&o.container&&o.container.isConnected))continue;let u=o.container,h=o.id,_=o.topmost;if(!u.parentNode)if(_)l.appendChild(u);else{let p=i?i():l.firstChild;p&&p.parentNode==l?l.insertBefore(u,p):l.appendChild(u);}this.renderers[h]=e.getRenderer(h,o,u),r&&r(o,t),this.tempCollection.splice(d,1),d--;}},addLayer:function(o){if(o){typeof o==\"function\"&&(o={renderer:o}),o.filter===void 0?o.filter=je(a||[]):o.filter instanceof Array&&(o.filter.push(a),o.filter=je(o.filter)),o.container||(o.container=document.createElement(\"div\"));var l=this;o.requestUpdate=function(){t.config.smart_rendering&&!Nt(t)&&l.renderers[o.id]&&l.onUpdateRequest(l.renderers[o.id]);};}return this._add(o),o?o.id:void 0;},onUpdateRequest:function(o){},eachLayer:function(o){for(var l in this.renderers)o(this.renderers[l]);},removeLayer:function(o){this.renderers[o]&&(this.renderers[o].destructor(),delete this.renderers[o]);},clear:function(){for(var o in this.renderers)this.renderers[o].destructor();this.renderers={};}};return t.attachEvent(\"onDestroy\",function(){s.clear(),s=null;}),s;}};};function je(t){return t instanceof Array||(t=Array.prototype.slice.call(arguments,0)),function(e){for(var n=!0,i=0,a=t.length;i<a;i++){var r=t[i];r&&(n=n&&r(e.id,e)!==!1);}return n;};}function Fe(t,e,n){if(!t.start_date||!t.end_date)return null;var i=e.posFromDate(t.start_date),a=e.posFromDate(t.end_date),r=Math.min(i,a)-200,s=Math.max(i,a)+200;return{top:e.getItemTop(t.id),height:e.getItemHeight(t.id),left:r,width:s-r};}function mn(){var t=[],e=!1;function n(){t=[],e=!1;}function i(r,s,o){s.$getConfig(),r.getVisibleItems().forEach(function(l){var c=function(d,u,h,_){if(!_.isTaskExists(d.source)||!_.isTaskExists(d.target))return null;var p=Fe(_.getTask(d.source),u),y=Fe(_.getTask(d.target),u);if(!p||!y)return null;var k=100,b=Math.min(p.left,y.left)-k,g=Math.max(p.left+p.width,y.left+y.width)+k,m=Math.min(p.top,y.top)-k,f=Math.max(p.top+p.height,y.top+y.height)+k;return{top:m,height:f-m,bottom:f,left:b,width:g-b,right:g};}(l,s,0,o);c&&t.push({id:l.id,rec:c});}),t.sort(function(l,c){return l.rec.right<c.rec.right?-1:1;}),e=!0;}var a=!1;return function(r,s,o,l,c){(function(p){a||(a=!0,p.attachEvent(\"onPreFilter\",n),p.attachEvent(\"onStoreUpdated\",n),p.attachEvent(\"onClearAll\",n),p.attachEvent(\"onBeforeStoreUpdate\",n));})(l),e||i(l,s,r);for(var d=[],u=0;u<t.length;u++){var h=t[u],_=h.rec;_.right<c.x||_.left<c.x_end&&_.right>c.x&&_.top<c.y_end&&_.bottom>c.y&&d.push(h.id);}return{ids:d};};}function vn(t,e,n,i,a){var r=n.$gantt.getTask(t.source),s=n.$gantt.getTask(t.target),o=n.getItemTop(r.id),l=n.getItemHeight(r.id),c=n.getItemTop(s.id),d=n.getItemHeight(s.id);if(e.y>o+l&&e.y>c+d||e.y_end<c&&e.y_end<o)return!1;var u=n.posFromDate(r.start_date),h=n.posFromDate(r.end_date),_=n.posFromDate(s.start_date),p=n.posFromDate(s.end_date);if(u>h){var y=h;h=u,u=y;}return _>p&&(y=p,p=_,_=y),u+=-100,h+=100,_+=-100,p+=100,!(e.x>h&&e.x>p)&&!(e.x_end<u&&e.x_end<_);}function ha(t,e){if(t.view){var n=t.view;typeof n==\"string\"&&(n=e.$ui.getView(n)),n&&n.attachEvent&&n.attachEvent(\"onScroll\",function(){e.$services.getService(\"state\").getState(\"batchUpdate\").batch_update||n.$config.$skipSmartRenderOnScroll||t.requestUpdate&&t.requestUpdate();});}}var Ht=function(){function t(e,n,i,a){e&&(this.$container=we(e),this.$parent=e),this.$config=P(n,{headerHeight:33}),this.$gantt=a,this.$domEvents=a._createDomEventScope(),this.$id=n.id||\"c\"+st(),this.$name=\"cell\",this.$factory=i,this.$externalComponent=null,ot(this);}return t.prototype.destructor=function(){this.$parent=this.$container=this.$view=null,this.$gantt.$services.getService(\"mouseEvents\").detach(\"click\",\"gantt_header_arrow\",this._headerClickHandler),this.$domEvents.detachAll(),this.callEvent(\"onDestroy\",[]),this.detachAllEvents();},t.prototype.cell=function(e){return null;},t.prototype.scrollTo=function(e,n){var i=this.$view;this.$config.html&&(i=this.$view.firstChild),1*e==e&&(i.scrollLeft=e),1*n==n&&(i.scrollTop=n);},t.prototype.clear=function(){this.getNode().innerHTML=\"\",this.getNode().className=\"gantt_layout_content\",this.getNode().style.padding=\"0\";},t.prototype.resize=function(e){if(this.$parent)return this.$parent.resize(e);e===!1&&(this.$preResize=!0);var n=this.$container,i=n.offsetWidth,a=n.offsetHeight,r=this.getSize();n===document.body&&(i=document.body.offsetWidth,a=document.body.offsetHeight),i<r.minWidth&&(i=r.minWidth),i>r.maxWidth&&(i=r.maxWidth),a<r.minHeight&&(a=r.minHeight),a>r.maxHeight&&(a=r.maxHeight),this.setSize(i,a),this.$preResize,this.$preResize=!1;},t.prototype.hide=function(){this._hide(!0),this.resize();},t.prototype.show=function(e){this._hide(!1),e&&this.$parent&&this.$parent.show(),this.resize();},t.prototype._hide=function(e){if(e===!0&&this.$view.parentNode)this.$view.parentNode.removeChild(this.$view);else if(e===!1&&!this.$view.parentNode){var n=this.$parent.cellIndex(this.$id);this.$parent.moveView(this,n);}this.$config.hidden=e;},t.prototype.$toHTML=function(e,n){e===void 0&&(e=\"\"),n=[n||\"\",this.$config.css||\"\"].join(\" \");var i=this.$config,a=\"\";if(i.raw)e=typeof i.raw==\"string\"?i.raw:\"\";else{if(!e){let r=null;r=typeof i.html==\"function\"?i.html():i.html,this.$gantt.config.external_render&&this.$gantt.config.external_render.isElement(r)&&(this.$externalComponent=r,r=null),e=\"<div class='gantt_layout_content' \"+(n?\" class='\"+n+\"' \":\"\")+\" >\"+(r||\"\")+\"</div>\";}i.header&&(a=\"<div class='gantt_layout_header'>\"+(i.canCollapse?\"<div class='gantt_layout_header_arrow'></div>\":\"\")+\"<div class='gantt_layout_header_content'>\"+i.header+\"</div></div>\");}return\"<div class='gantt_layout_cell \"+n+\"' data-cell-id='\"+this.$id+\"'>\"+a+e+\"</div>\";},t.prototype.$fill=function(e,n){this.$view=e,this.$parent=n,this.init();},t.prototype.getNode=function(){return this.$view.querySelector(\"gantt_layout_cell\")||this.$view;},t.prototype.init=function(){var e=this;this._headerClickHandler=function(n){nt(n,\"data-cell-id\")==e.$id&&e.toggle();},this.$gantt.$services.getService(\"mouseEvents\").delegate(\"click\",\"gantt_header_arrow\",this._headerClickHandler),this.callEvent(\"onReady\",[]);},t.prototype.toggle=function(){this.$config.collapsed=!this.$config.collapsed,this.resize();},t.prototype.getSize=function(){var e={height:this.$config.height||0,width:this.$config.width||0,gravity:this.$config.gravity||1,minHeight:this.$config.minHeight||0,minWidth:this.$config.minWidth||0,maxHeight:this.$config.maxHeight||1e11,maxWidth:this.$config.maxWidth||1e11};if(this.$config.collapsed){var n=this.$config.mode===\"x\";e[n?\"width\":\"height\"]=e[n?\"maxWidth\":\"maxHeight\"]=this.$config.headerHeight;}return e;},t.prototype.getContentSize=function(){var e=this.$lastSize.contentX;e!==1*e&&(e=this.$lastSize.width);var n=this.$lastSize.contentY;return n!==1*n&&(n=this.$lastSize.height),{width:e,height:n};},t.prototype._getBorderSizes=function(){var e={top:0,right:0,bottom:0,left:0,horizontal:0,vertical:0};return this._currentBorders&&(this._currentBorders[this._borders.left]&&(e.left=1,e.horizontal++),this._currentBorders[this._borders.right]&&(e.right=1,e.horizontal++),this._currentBorders[this._borders.top]&&(e.top=1,e.vertical++),this._currentBorders[this._borders.bottom]&&(e.bottom=1,e.vertical++)),e;},t.prototype.setSize=function(e,n){this.$view.style.width=e+\"px\",this.$view.style.height=n+\"px\";var i=this._getBorderSizes(),a=n-i.vertical,r=e-i.horizontal;this.$lastSize={x:e,y:n,contentX:r,contentY:a},this.$config.header?this._sizeHeader():this._sizeContent();},t.prototype._borders={left:\"gantt_layout_cell_border_left\",right:\"gantt_layout_cell_border_right\",top:\"gantt_layout_cell_border_top\",bottom:\"gantt_layout_cell_border_bottom\"},t.prototype._setBorders=function(e,n){n||(n=this);var i=n.$view;for(var a in this._borders)Gt(i,this._borders[a]);typeof e==\"string\"&&(e=[e]);var r={};for(a=0;a<e.length;a++)wt(i,e[a]),r[e[a]]=!0;n._currentBorders=r;},t.prototype._sizeContent=function(){var e=this.$view.childNodes[0];e&&e.className==\"gantt_layout_content\"&&(e.style.height=this.$lastSize.contentY+\"px\");},t.prototype._sizeHeader=function(){var e=this.$lastSize;e.contentY-=this.$config.headerHeight;var n=this.$view.childNodes[0],i=this.$view.childNodes[1],a=this.$config.mode===\"x\";if(this.$config.collapsed){if(i.style.display=\"none\",a){n.className=\"gantt_layout_header collapsed_x\",n.style.width=e.y+\"px\";var r=Math.floor(e.y/2-e.x/2);n.style.transform=\"rotate(90deg) translate(\"+r+\"px, \"+r+\"px)\",i.style.display=\"none\";}else n.className=\"gantt_layout_header collapsed_y\";}else n.className=a?\"gantt_layout_header\":\"gantt_layout_header vertical\",n.style.width=\"auto\",n.style.transform=\"\",i.style.display=\"\",i.style.height=e.contentY+\"px\";n.style.height=this.$config.headerHeight+\"px\";},t;}();function z(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t;}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i());}var kn=function(t){function e(n,i,a){var r=t.apply(this,arguments)||this;return n&&(r.$root=!0),r._parseConfig(i),r.$name=\"layout\",r;}return z(e,t),e.prototype.destructor=function(){this.$container&&this.$view&&Qe(this.$view);for(var n=0;n<this.$cells.length;n++)this.$cells[n].destructor();this.$cells=[],t.prototype.destructor.call(this);},e.prototype._resizeScrollbars=function(n,i){var a=!1,r=[],s=[];const o=[];function l(p){p.$parent.show(),a=!0,r.push(p);}function c(p){p.$parent.hide(),a=!0,s.push(p);}for(var d,u=0;u<i.length;u++)n[(d=i[u]).$config.scroll]?c(d):d.shouldHide()?o.push(d):d.shouldShow()?l(d):d.isVisible()?r.push(d):s.push(d);var h={};for(u=0;u<r.length;u++)r[u].$config.group&&(h[r[u].$config.group]=!0);for(o.forEach(function(p){p.$config.group&&h[p.$config.group]||c(p);}),u=0;u<s.length;u++)if((d=s[u]).$config.group&&h[d.$config.group]){l(d);for(var _=0;_<r.length;_++)if(r[_]==d){this.$gantt.$scrollbarRepaint=!0;break;}}return a;},e.prototype.getScrollbarsInfo=function(){const n=this.getCellsByType(\"scroller\"),i=[];return n.forEach(a=>{let r={};const{visible:s,direction:o,size:l,scrollSize:c,position:d}=a.getScrollState();let u=a._getLinkedViews().map(h=>h.$config.id);r.id=a.$id,r.visible=s,r.boundViews=u,o===\"x\"?(r.x=l,r.x_inner=c,r.x_pos=d||0):(r.y=l,r.y_inner=c,r.y_pos=d||0),i.push(r);}),i;},e.prototype._syncCellSizes=function(n,i){if(n){var a={};return this._eachChild(function(r){r.$config.group&&r.$name!=\"scrollbar\"&&r.$name!=\"resizer\"&&(a[r.$config.group]||(a[r.$config.group]=[]),a[r.$config.group].push(r));}),a[n]&&this._syncGroupSize(a[n],i),a[n];}},e.prototype._syncGroupSize=function(n,i){if(n.length)for(var a=n[0].$parent._xLayout?\"width\":\"height\",r=n[0].$parent.getNextSibling(n[0].$id)?1:-1,s=i.value,o=i.isGravity,l=0;l<n.length;l++){var c=n[l].getSize(),d=r>0?n[l].$parent.getNextSibling(n[l].$id):n[l].$parent.getPrevSibling(n[l].$id);d.$name==\"resizer\"&&(d=r>0?d.$parent.getNextSibling(d.$id):d.$parent.getPrevSibling(d.$id));var u=d.getSize();if(o)n[l].$config.gravity=s;else if(d[a]){var h=c.gravity+u.gravity,_=c[a]+u[a],p=h/_;n[l].$config.gravity=p*s,d.$config[a]=_-s,d.$config.gravity=h-p*s;}else n[l].$config[a]=s;var y=this.$gantt.$ui.getView(\"grid\");!y||n[l].$content!==y||y.$config.scrollable||o||(this.$gantt.config.grid_width=s);}},e.prototype.resize=function(n){var i=!1;if(this.$root&&!this._resizeInProgress&&(this.callEvent(\"onBeforeResize\",[]),i=!0,this._resizeInProgress=!0),t.prototype.resize.call(this,!0),t.prototype.resize.call(this,!1),i){var a=[];a=(a=(a=a.concat(this.getCellsByType(\"viewCell\"))).concat(this.getCellsByType(\"viewLayout\"))).concat(this.getCellsByType(\"hostCell\"));for(var r=this.getCellsByType(\"scroller\"),s=0;s<a.length;s++)a[s].$config.hidden||a[s].setContentSize();var o=this._getAutosizeMode(this.$config.autosize),l=this._resizeScrollbars(o,r);if(this.$config.autosize&&(this.autosize(this.$config.autosize),a.forEach(function(c){const d=c.$parent,u=d.getContentSize(o);o.x&&(d.$config.$originalWidthStored||(d.$config.$originalWidthStored=!0,d.$config.$originalWidth=d.$config.width),d.$config.width=u.width),o.y&&(d.$config.$originalHeightStored||(d.$config.$originalHeightStored=!0,d.$config.$originalHeight=d.$config.height),d.$config.height=u.height);}),l=!0),l)for(this.resize(),s=0;s<a.length;s++)a[s].$config.hidden||a[s].setContentSize();this.callEvent(\"onResize\",[]);}i&&(this._resizeInProgress=!1);},e.prototype._eachChild=function(n,i){if(n(i=i||this),i.$cells)for(var a=0;a<i.$cells.length;a++)this._eachChild(n,i.$cells[a]);},e.prototype.isChild=function(n){var i=!1;return this._eachChild(function(a){a!==n&&a.$content!==n||(i=!0);}),i;},e.prototype.getCellsByType=function(n){var i=[];if(n===this.$name&&i.push(this),this.$content&&this.$content.$name==n&&i.push(this.$content),this.$cells)for(var a=0;a<this.$cells.length;a++){var r=e.prototype.getCellsByType.call(this.$cells[a],n);r.length&&i.push.apply(i,r);}return i;},e.prototype.getNextSibling=function(n){var i=this.cellIndex(n);return i>=0&&this.$cells[i+1]?this.$cells[i+1]:null;},e.prototype.getPrevSibling=function(n){var i=this.cellIndex(n);return i>=0&&this.$cells[i-1]?this.$cells[i-1]:null;},e.prototype.cell=function(n){for(var i=0;i<this.$cells.length;i++){var a=this.$cells[i];if(a.$id===n)return a;var r=a.cell(n);if(r)return r;}},e.prototype.cellIndex=function(n){for(var i=0;i<this.$cells.length;i++)if(this.$cells[i].$id===n)return i;return-1;},e.prototype.moveView=function(n,i){if(this.$cells[i]!==n)return window.alert(\"Not implemented\");i+=this.$config.header?1:0;var a=this.$view;i>=a.childNodes.length?a.appendChild(n.$view):a.insertBefore(n.$view,a.childNodes[i]);},e.prototype._parseConfig=function(n){this.$cells=[],this._xLayout=!n.rows;for(var i=n.rows||n.cols||n.views,a=0;a<i.length;a++){var r=i[a];r.mode=this._xLayout?\"x\":\"y\";var s=this.$factory.initUI(r,this);s?(s.$parent=this,this.$cells.push(s)):(i.splice(a,1),a--);}},e.prototype.getCells=function(){return this.$cells;},e.prototype.render=function(){var n=Ze(this.$container,this.$toHTML());this.$fill(n,null);const i=this.$gantt;this._eachChild(a=>{a.$externalComponent&&(i.config.external_render.renderElement(a.$externalComponent,a.$view.querySelector(\".gantt_layout_content\")),a.$externalComponent=null);}),this.callEvent(\"onReady\",[]),this.resize(),this.render=this.resize;},e.prototype.$fill=function(n,i){this.$view=n,this.$parent=i;for(var a=tn(n,\"gantt_layout_cell\"),r=a.length-1;r>=0;r--){var s=this.$cells[r];s.$fill(a[r],this),s.$config.hidden&&s.$view.parentNode.removeChild(s.$view);}},e.prototype.$toHTML=function(){for(var n=this._xLayout?\"x\":\"y\",i=[],a=0;a<this.$cells.length;a++)i.push(this.$cells[a].$toHTML());return t.prototype.$toHTML.call(this,i.join(\"\"),(this.$root?\"gantt_layout_root \":\"\")+\"gantt_layout gantt_layout_\"+n);},e.prototype.getContentSize=function(n){for(var i,a,r,s=0,o=0,l=0;l<this.$cells.length;l++)(a=this.$cells[l]).$config.hidden||(i=a.getContentSize(n),a.$config.view===\"scrollbar\"&&n[a.$config.scroll]&&(i.height=0,i.width=0),a.$config.resizer&&(this._xLayout?i.height=0:i.width=0),r=a._getBorderSizes(),this._xLayout?(s+=i.width+r.horizontal,o=Math.max(o,i.height+r.vertical)):(s=Math.max(s,i.width+r.horizontal),o+=i.height+r.vertical));return{width:s+=(r=this._getBorderSizes()).horizontal,height:o+=r.vertical};},e.prototype._cleanElSize=function(n){return 1*(n||\"\").toString().replace(\"px\",\"\")||0;},e.prototype._getBoxStyles=function(n){var i=null,a=[\"width\",\"height\",\"paddingTop\",\"paddingBottom\",\"paddingLeft\",\"paddingRight\",\"borderLeftWidth\",\"borderRightWidth\",\"borderTopWidth\",\"borderBottomWidth\"],r={boxSizing:(i=window.getComputedStyle?window.getComputedStyle(n,null):{width:n.clientWidth,height:n.clientHeight}).boxSizing==\"border-box\"};i.MozBoxSizing&&(r.boxSizing=i.MozBoxSizing==\"border-box\");for(var s=0;s<a.length;s++)r[a[s]]=i[a[s]]?this._cleanElSize(i[a[s]]):0;var o={horPaddings:r.paddingLeft+r.paddingRight+r.borderLeftWidth+r.borderRightWidth,vertPaddings:r.paddingTop+r.paddingBottom+r.borderTopWidth+r.borderBottomWidth,borderBox:r.boxSizing,innerWidth:r.width,innerHeight:r.height,outerWidth:r.width,outerHeight:r.height};return o.borderBox?(o.innerWidth-=o.horPaddings,o.innerHeight-=o.vertPaddings):(o.outerWidth+=o.horPaddings,o.outerHeight+=o.vertPaddings),o;},e.prototype._getAutosizeMode=function(n){var i={x:!1,y:!1};return n===\"xy\"?i.x=i.y=!0:n===\"y\"||n===!0?i.y=!0:n===\"x\"&&(i.x=!0),i;},e.prototype.autosize=function(n){var i=this._getAutosizeMode(n),a=this._getBoxStyles(this.$container),r=this.getContentSize(n),s=this.$container;i.x&&(a.borderBox&&(r.width+=a.horPaddings),s.style.width=r.width+\"px\"),i.y&&(a.borderBox&&(r.height+=a.vertPaddings),s.style.height=r.height+\"px\");},e.prototype.getSize=function(){this._sizes=[];for(var n=0,i=0,a=1e11,r=0,s=1e11,o=0,l=0;l<this.$cells.length;l++){var c=this._sizes[l]=this.$cells[l].getSize();this.$cells[l].$config.hidden||(this._xLayout?(!c.width&&c.minWidth?n+=c.minWidth:n+=c.width,a+=c.maxWidth,i+=c.minWidth,r=Math.max(r,c.height),s=Math.min(s,c.maxHeight),o=Math.max(o,c.minHeight)):(!c.height&&c.minHeight?r+=c.minHeight:r+=c.height,s+=c.maxHeight,o+=c.minHeight,n=Math.max(n,c.width),a=Math.min(a,c.maxWidth),i=Math.max(i,c.minWidth)));}var d=t.prototype.getSize.call(this);return d.maxWidth>=1e5&&(d.maxWidth=a),d.maxHeight>=1e5&&(d.maxHeight=s),d.minWidth=d.minWidth!=d.minWidth?0:d.minWidth,d.minHeight=d.minHeight!=d.minHeight?0:d.minHeight,this._xLayout?(d.minWidth+=this.$config.margin*this.$cells.length||0,d.minWidth+=2*this.$config.padding||0,d.minHeight+=2*this.$config.padding||0):(d.minHeight+=this.$config.margin*this.$cells.length||0,d.minHeight+=2*this.$config.padding||0),d;},e.prototype._calcFreeSpace=function(n,i,a){var r=a?i.minWidth:i.minHeight,s=i.maxWidth,o=n;return o?(o>s&&(o=s),o<r&&(o=r),this._free-=o):((o=Math.floor(this._free/this._gravity*i.gravity))>s&&(o=s,this._free-=o,this._gravity-=i.gravity),o<r&&(o=r,this._free-=o,this._gravity-=i.gravity)),o;},e.prototype._calcSize=function(n,i,a){var r=n,s=a?i.minWidth:i.minHeight,o=a?i.maxWidth:i.maxHeight;return r||(r=Math.floor(this._free/this._gravity*i.gravity)),r>o&&(r=o),r<s&&(r=s),r;},e.prototype._configureBorders=function(){this.$root&&this._setBorders([this._borders.left,this._borders.top,this._borders.right,this._borders.bottom],this);for(var n=this._xLayout?this._borders.right:this._borders.bottom,i=this.$cells,a=i.length-1,r=a;r>=0;r--)if(!i[r].$config.hidden){a=r;break;}for(r=0;r<i.length;r++)if(!i[r].$config.hidden){var s=r>=a,o=\"\";!s&&i[r+1]&&i[r+1].$config.view==\"scrollbar\"&&(this._xLayout?s=!0:o=\"gantt_layout_cell_border_transparent\"),this._setBorders(s?[]:[n,o],i[r]);}},e.prototype._updateCellVisibility=function(){for(var n=this._visibleCells||{},i=!this._visibleCells,a={},r=null,s=[],o=0;o<this._sizes.length;o++)(r=this.$cells[o]).$config.hide_empty&&s.push(r),!i&&r.$config.hidden&&n[r.$id]?r._hide(!0):r.$config.hidden||n[r.$id]||r._hide(!1),r.$config.hidden||(a[r.$id]=!0);for(this._visibleCells=a,o=0;o<s.length;o++){var l=(r=s[o]).$cells,c=!0;l.forEach(function(d){d.$config.hidden||d.$config.resizer||(c=!1);}),r.$config.hidden=c;}},e.prototype.setSize=function(n,i){this._configureBorders(),t.prototype.setSize.call(this,n,i),i=this.$lastSize.contentY,n=this.$lastSize.contentX;var a,r,s=this.$config.padding||0;this.$view.style.padding=s+\"px\",this._gravity=0,this._free=this._xLayout?n:i,this._free-=2*s,this._updateCellVisibility();for(var o=0;o<this._sizes.length;o++)if(!(a=this.$cells[o]).$config.hidden){var l=this.$config.margin||0;a.$name!=\"resizer\"||l||(l=-1);var c=a.$view,d=this._xLayout?\"marginRight\":\"marginBottom\";o!==this.$cells.length-1&&(c.style[d]=l+\"px\",this._free-=l),r=this._sizes[o],this._xLayout?r.width||(this._gravity+=r.gravity):r.height||(this._gravity+=r.gravity);}for(o=0;o<this._sizes.length;o++)if(!(a=this.$cells[o]).$config.hidden){var u=(r=this._sizes[o]).width,h=r.height;this._xLayout?this._calcFreeSpace(u,r,!0):this._calcFreeSpace(h,r,!1);}for(o=0;o<this.$cells.length;o++)if(!(a=this.$cells[o]).$config.hidden){r=this._sizes[o];var _=void 0,p=void 0;this._xLayout?(_=this._calcSize(r.width,r,!0),p=i-2*s):(_=n-2*s,p=this._calcSize(r.height,r,!1)),a.setSize(_,p);}},e;}(Ht),_a=function(t){function e(n,i,a){for(var r=t.apply(this,arguments)||this,s=0;s<r.$cells.length;s++)r.$cells[s].$config.hidden=s!==0;return r.$cell=r.$cells[0],r.$name=\"viewLayout\",r;}return z(e,t),e.prototype.cell=function(n){var i=t.prototype.cell.call(this,n);return i.$view||this.$fill(null,this),i;},e.prototype.moveView=function(n){var i=this.$view;this.$cell&&(this.$cell.$config.hidden=!0,i.removeChild(this.$cell.$view)),this.$cell=n,i.appendChild(n.$view);},e.prototype.setSize=function(n,i){Ht.prototype.setSize.call(this,n,i);},e.prototype.setContentSize=function(){var n=this.$lastSize;this.$cell.setSize(n.contentX,n.contentY);},e.prototype.getSize=function(){var n=t.prototype.getSize.call(this);if(this.$cell){var i=this.$cell.getSize();if(this.$config.byMaxSize)for(var a=0;a<this.$cells.length;a++){var r=this.$cells[a].getSize();for(var s in i)i[s]=Math.max(i[s],r[s]);}for(var o in n)n[o]=n[o]||i[o];n.gravity=Math.max(n.gravity,i.gravity);}return n;},e;}(kn),ga=function(t){function e(n,i,a){var r=t.apply(this,arguments)||this;if(i.view){i.id&&(this.$id=st());var s=q(i);if(delete s.config,delete s.templates,this.$content=this.$factory.createView(i.view,this,s,this),!this.$content)return!1;}return r.$name=\"viewCell\",r;}return z(e,t),e.prototype.destructor=function(){this.clear(),t.prototype.destructor.call(this);},e.prototype.clear=function(){if(this.$initialized=!1,this.$content){var n=this.$content.unload||this.$content.destructor;n&&n.call(this.$content);}t.prototype.clear.call(this);},e.prototype.scrollTo=function(n,i){this.$content&&this.$content.scrollTo?this.$content.scrollTo(n,i):t.prototype.scrollTo.call(this,n,i);},e.prototype._setContentSize=function(n,i){var a=this._getBorderSizes();if(typeof n==\"number\"){var r=n+a.horizontal;this.$config.width=r;}if(typeof i==\"number\"){var s=i+a.vertical;this.$config.height=s;}},e.prototype.setSize=function(n,i){if(t.prototype.setSize.call(this,n,i),!this.$preResize&&this.$content&&!this.$initialized){this.$initialized=!0;var a=this.$view.childNodes[0],r=this.$view.childNodes[1];r||(r=a),this.$content.init(r);}},e.prototype.setContentSize=function(){!this.$preResize&&this.$content&&this.$initialized&&this.$content.setSize(this.$lastSize.contentX,this.$lastSize.contentY);},e.prototype.getContentSize=function(){var n=t.prototype.getContentSize.call(this);if(this.$content&&this.$initialized){var i=this.$content.getSize();n.width=i.contentX===void 0?i.width:i.contentX,n.height=i.contentY===void 0?i.height:i.contentY;}var a=this._getBorderSizes();return n.width+=a.horizontal,n.height+=a.vertical,n;},e;}(Ht),fa=function(t){var e=[\"altKey\",\"shiftKey\",\"metaKey\"];function n(a,r,s,o){var l=t.apply(this,arguments)||this;this.$config=P(r,{scroll:\"x\"}),l._scrollHorizontalHandler=R(l._scrollHorizontalHandler,l),l._scrollVerticalHandler=R(l._scrollVerticalHandler,l),l._outerScrollVerticalHandler=R(l._outerScrollVerticalHandler,l),l._outerScrollHorizontalHandler=R(l._outerScrollHorizontalHandler,l),l._mouseWheelHandler=R(l._mouseWheelHandler,l),this.$config.hidden=!0;var c=o.config.scroll_size;return o.env.isIE&&(c+=1),this._isHorizontal()?(l.$config.height=c,l.$parent.$config.height=c):(l.$config.width=c,l.$parent.$config.width=c),this.$config.scrollPosition=0,l.$name=\"scroller\",l;}function i(a,r){if(r.push(a),a.$cells)for(var s=0;s<a.$cells.length;s++)i(a.$cells[s],r);}return z(n,t),n.prototype.init=function(a){a.innerHTML=this.$toHTML(),this.$view=a.firstChild,this.$view||this.init(),this._isVertical()?this._initVertical():this._initHorizontal(),this._initMouseWheel(),this._initLinkedViews();},n.prototype.$toHTML=function(){return\"<div class='gantt_layout_cell \"+(this._isHorizontal()?\"gantt_hor_scroll\":\"gantt_ver_scroll\")+\"'><div style='\"+(this._isHorizontal()?\"width:2000px\":\"height:2000px\")+\"'></div></div>\";},n.prototype._getRootParent=function(){for(var a=this.$parent;a&&a.$parent;)a=a.$parent;if(a)return a;},n.prototype._eachView=function(){var a=[];return i(this._getRootParent(),a),a;},n.prototype._getLinkedViews=function(){for(var a=this._eachView(),r=[],s=0;s<a.length;s++)a[s].$config&&(this._isVertical()&&a[s].$config.scrollY==this.$id||this._isHorizontal()&&a[s].$config.scrollX==this.$id)&&r.push(a[s]);return r;},n.prototype._initHorizontal=function(){this.$scroll_hor=this.$view,this.$domEvents.attach(this.$view,\"scroll\",this._scrollHorizontalHandler);},n.prototype._initLinkedViews=function(){for(var a=this._getLinkedViews(),r=this._isVertical()?\"gantt_layout_outer_scroll gantt_layout_outer_scroll_vertical\":\"gantt_layout_outer_scroll gantt_layout_outer_scroll_horizontal\",s=0;s<a.length;s++)wt(a[s].$view||a[s].getNode(),r);},n.prototype._initVertical=function(){this.$scroll_ver=this.$view,this.$domEvents.attach(this.$view,\"scroll\",this._scrollVerticalHandler);},n.prototype._updateLinkedViews=function(){},n.prototype._initMouseWheel=function(){mt.isFF?this.$domEvents.attach(this._getRootParent().$view,\"wheel\",this._mouseWheelHandler,{passive:!1}):this.$domEvents.attach(this._getRootParent().$view,\"mousewheel\",this._mouseWheelHandler,{passive:!1});},n.prototype.scrollHorizontally=function(a){if(!this._scrolling){this._scrolling=!0,this.$scroll_hor.scrollLeft=a,this.$config.codeScrollLeft=a,a=this.$scroll_hor.scrollLeft;for(var r=this._getLinkedViews(),s=0;s<r.length;s++)r[s].scrollTo&&r[s].scrollTo(a,void 0);var o=this.$config.scrollPosition;this.$config.scrollPosition=a,this.callEvent(\"onScroll\",[o,a,this.$config.scroll]),this._scrolling=!1;}},n.prototype.scrollVertically=function(a){if(!this._scrolling){this._scrolling=!0,this.$scroll_ver.scrollTop=a,a=this.$scroll_ver.scrollTop;for(var r=this._getLinkedViews(),s=0;s<r.length;s++)r[s].scrollTo&&r[s].scrollTo(void 0,a);var o=this.$config.scrollPosition;this.$config.scrollPosition=a,this.callEvent(\"onScroll\",[o,a,this.$config.scroll]),this._scrolling=!1;}},n.prototype._isVertical=function(){return this.$config.scroll==\"y\";},n.prototype._isHorizontal=function(){return this.$config.scroll==\"x\";},n.prototype._scrollHorizontalHandler=function(a){if(!this._isVertical()&&!this._scrolling){if(/* @__PURE__ */new Date()-(this._wheel_time||0)<100)return!0;var r=this.$scroll_hor.scrollLeft;this.scrollHorizontally(r),this._oldLeft=this.$scroll_hor.scrollLeft;}},n.prototype._outerScrollHorizontalHandler=function(a){this._isVertical();},n.prototype.show=function(){this.$parent.show();},n.prototype.hide=function(){this.$parent.hide();},n.prototype._getScrollSize=function(){for(var a,r=0,s=0,o=this._isHorizontal(),l=this._getLinkedViews(),c=o?\"scrollWidth\":\"scrollHeight\",d=o?\"contentX\":\"contentY\",u=o?\"x\":\"y\",h=this._getScrollOffset(),_=0;_<l.length;_++)if((a=l[_])&&a.$content&&a.$content.getSize&&!a.$config.hidden){var p,y=a.$content.getSize();if(p=y.hasOwnProperty(c)?y[c]:y[d],h)y[d]>y[u]&&y[d]>r&&p>y[u]-h+2&&(r=p+(o?0:2),s=y[u]);else{var k=Math.max(y[d]-p,0);(p+=k)>Math.max(y[u]-k,0)&&p>r&&(r=p,s=y[u]);}}return{outerScroll:s,innerScroll:r};},n.prototype.scroll=function(a){this._isHorizontal()?this.scrollHorizontally(a):this.scrollVertically(a);},n.prototype.getScrollState=function(){return{visible:this.isVisible(),direction:this.$config.scroll,size:this.$config.outerSize,scrollSize:this.$config.scrollSize||0,position:this.$config.scrollPosition||0};},n.prototype.setSize=function(a,r){t.prototype.setSize.apply(this,arguments);var s=this._getScrollSize(),o=(this._isVertical()?r:a)-this._getScrollOffset()+(this._isHorizontal()?1:0);s.innerScroll&&o>s.outerScroll&&(s.innerScroll+=o-s.outerScroll),this.$config.scrollSize=s.innerScroll,this.$config.width=a,this.$config.height=r,this._setScrollSize(s.innerScroll);},n.prototype.isVisible=function(){return!(!this.$parent||!this.$parent.$view.parentNode);},n.prototype.shouldShow=function(){var a=this._getScrollSize();return!(!a.innerScroll&&this.$parent&&this.$parent.$view.parentNode)&&!(!a.innerScroll||this.$parent&&this.$parent.$view.parentNode);},n.prototype.shouldHide=function(){return!(this._getScrollSize().innerScroll||!this.$parent||!this.$parent.$view.parentNode);},n.prototype.toggleVisibility=function(){this.shouldHide()?this.hide():this.shouldShow()&&this.show();},n.prototype._getScaleOffset=function(a){var r=0;return!a||a.$config.view!=\"timeline\"&&a.$config.view!=\"grid\"||(r=a.$content.$getConfig().scale_height),r;},n.prototype._getScrollOffset=function(){var a=0;if(this._isVertical()){var r=this.$parent.$parent;a=Math.max(this._getScaleOffset(r.getPrevSibling(this.$parent.$id)),this._getScaleOffset(r.getNextSibling(this.$parent.$id)));}else for(var s=this._getLinkedViews(),o=0;o<s.length;o++){var l=s[o].$parent.$cells,c=l[l.length-1];if(c&&c.$config.view==\"scrollbar\"&&c.$config.hidden===!1){a=c.$config.width;break;}}return a||0;},n.prototype._setScrollSize=function(a){var r=this._isHorizontal()?\"width\":\"height\",s=this._isHorizontal()?this.$scroll_hor:this.$scroll_ver,o=this._getScrollOffset(),l=s.firstChild;o?this._isVertical()?(this.$config.outerSize=this.$config.height-o+3,s.style.height=this.$config.outerSize+\"px\",s.style.top=o-1+\"px\",wt(s,this.$parent._borders.top),wt(s.parentNode,\"gantt_task_vscroll\")):(this.$config.outerSize=this.$config.width-o+1,s.style.width=this.$config.outerSize+\"px\"):(s.style.top=\"auto\",Gt(s,this.$parent._borders.top),Gt(s.parentNode,\"gantt_task_vscroll\"),this.$config.outerSize=this.$config.height),l.style[r]=a+\"px\";},n.prototype._scrollVerticalHandler=function(a){if(!this._scrollHorizontalHandler()&&!this._scrolling){var r=this.$scroll_ver.scrollTop;r!=this._oldTop&&(this.scrollVertically(r),this._oldTop=this.$scroll_ver.scrollTop);}},n.prototype._outerScrollVerticalHandler=function(a){this._scrollHorizontalHandler();},n.prototype._checkWheelTarget=function(a){for(var r=this._getLinkedViews().concat(this),s=0;s<r.length;s++)if(Y(a,r[s].$view))return!0;return!1;},n.prototype._mouseWheelHandler=function(a){var r=a.target||a.srcElement;if(this._checkWheelTarget(r)){this._wheel_time=/* @__PURE__ */new Date();var s={},o={x:1,y:1},l=this.$gantt.config.wheel_scroll_sensitivity;typeof l==\"number\"&&l?o={x:l,y:l}:{}.toString.apply(l)==\"[object Object]\"&&(o={x:l.x,y:l.y});var c=mt.isFF,d=c?a.deltaX:a.wheelDeltaX,u=c?a.deltaY:a.wheelDelta,h=-20;if(c){const v=parseInt(navigator.userAgent.split(\"Firefox/\")[1]);h=v<=87?a.deltaMode!==0?-40:-10:v<=90?-3:v<=96?-1.5:-1;}var _=c?d*h*o.x:2*d*o.x,p=c?u*h*o.y:u*o.y,y=this.$gantt.config.horizontal_scroll_key;if(y!==!1&&e.indexOf(y)>=0&&(!a[y]||a.deltaX||a.wheelDeltaX||(_=2*p,p=0)),_&&Math.abs(_)>Math.abs(p)){if(this._isVertical())return;if(s.x||!this.$scroll_hor||!this.$scroll_hor.offsetWidth)return!0;var k=_/-40,b=this._oldLeft,g=b+30*k;if(this.scrollHorizontally(g),this.$scroll_hor.scrollLeft=g,b==this.$scroll_hor.scrollLeft)return!0;this._oldLeft=this.$scroll_hor.scrollLeft;}else{if(this._isHorizontal())return;if(s.y||!this.$scroll_ver||!this.$scroll_ver.offsetHeight)return!0;k=p/-40,p===void 0&&(k=a.detail);var m=this._oldTop,f=this.$scroll_ver.scrollTop+30*k;if(this.scrollVertically(f),this.$scroll_ver.scrollTop=f,m==this.$scroll_ver.scrollTop)return!0;this._oldTop=this.$scroll_ver.scrollTop;}return a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,!1;}},n;}(Ht);function yn(t){var e={},n={},i=null,a=-1,r=null,s=/* @__PURE__ */function(o){var l=-1,c=-1;return{resetCache:function(){l=-1,c=-1;},_getRowHeight:function(){return l===-1&&(l=o.$getConfig().row_height),l;},_refreshState:function(){this.resetCache(),c=!0;var d=o.$config.rowStore;if(d)for(var u=this._getRowHeight(),h=0;h<d.fullOrder.length;h++){var _=d.getItem(d.fullOrder[h]);if(_&&_.row_height&&_.row_height!==u){c=!1;break;}}},canUseSimpleCalculation:function(){return c===-1&&this._refreshState(),c;},getRowTop:function(d){return o.$config.rowStore?d*this._getRowHeight():0;},getItemHeight:function(d){return this._getRowHeight();},getTotalHeight:function(){return o.$config.rowStore?o.$config.rowStore.countVisible()*this._getRowHeight():0;},getItemIndexByTopPosition:function(d){return o.$config.rowStore?Math.floor(d/this._getRowHeight()):0;}};}(t);return{_resetTopPositionHeight:function(){e={},n={},s.resetCache();},_resetHeight:function(){var o=this.$config.rowStore,l=this.getCacheStateTotalHeight(o);r?this.shouldClearHeightCache(r,l)&&(r=l,i=null):r=l,a=-1,s.resetCache();},getRowTop:function(o){if(s.canUseSimpleCalculation())return s.getRowTop(o);var l=this.$config.rowStore;if(!l)return 0;if(n[o]!==void 0)return n[o];for(var c=l.getIndexRange(),d=0,u=0,h=0;h<c.length;h++)n[h]=d,d+=this.getItemHeight(c[h].id),h<o&&(u=d);return u;},getItemTop:function(o){if(this.$config.rowStore){if(e[o]!==void 0)return e[o];var l=this.$config.rowStore;if(!l)return 0;var c=l.getIndexById(o);if(c===-1&&l.getParent&&l.exists(o)){var d=l.getParent(o);if(l.exists(d)){var u=l.getItem(d);if(this.$gantt.isSplitTask(u))return this.getItemTop(d);}}return e[o]=this.getRowTop(c),e[o];}return 0;},getItemHeight:function(o){if(s.canUseSimpleCalculation())return s.getItemHeight(o);if(!i&&this.$config.rowStore&&this._fillHeightCache(this.$config.rowStore),i[o]!==void 0)return i[o];var l=this.$getConfig().row_height;if(this.$config.rowStore){var c=this.$config.rowStore;if(!c)return l;var d=c.getItem(o);return i[o]=d&&d.row_height||l;}return l;},_fillHeightCache:function(o){if(o){i={};var l=this.$getConfig().row_height;o.eachItem(function(c){return i[c.id]=c&&c.row_height||l;});}},getCacheStateTotalHeight:function(o){var l=this.$getConfig().row_height,c={},d=[],u=0;return o&&o.eachItem(function(h){d.push(h),c[h.id]=h.row_height,u+=h.row_height||l;}),{globalHeight:l,items:d,count:d.length,sumHeight:u};},shouldClearHeightCache:function(o,l){if(o.count!=l.count||o.globalHeight!=l.globalHeight||o.sumHeight!=l.sumHeight)return!0;for(var c in o.items){var d=l.items[c];if(d!==void 0&&d!=o.items[c])return!0;}return!1;},getTotalHeight:function(){if(s.canUseSimpleCalculation())return s.getTotalHeight();if(a!=-1)return a;if(this.$config.rowStore){var o=this.$config.rowStore;this._fillHeightCache(o);var l=this.getItemHeight.bind(this),c=o.getVisibleItems(),d=0;return c.forEach(function(u){d+=l(u.id);}),a=d,d;}return 0;},getItemIndexByTopPosition:function(o){if(this.$config.rowStore){if(s.canUseSimpleCalculation())return s.getItemIndexByTopPosition(o);for(var l=this.$config.rowStore,c=0;c<l.countVisible();c++){var d=this.getRowTop(c),u=this.getRowTop(c+1);if(!u){var h=l.getIdByIndex(c);u=d+this.getItemHeight(h);}if(o>=d&&o<u)return c;}return l.countVisible()+2;}return 0;}};}const pa=function(){return{render:function(){},destroy:function(){}};};var Ut=function(t,e,n,i){this.$config=P({},e||{}),this.$scaleHelper=new pe(i),this.$gantt=i,this._posFromDateCache={},this._timelineDragScroll=null,P(this,yn(this)),ot(this);};Ut.prototype={init:function(t){t.innerHTML+=\"<div class='gantt_task' style='width:inherit;height:inherit;'></div>\",this.$task=t.childNodes[0],this.$task.innerHTML=\"<div class='gantt_task_scale'></div><div class='gantt_data_area'></div>\",this.$task_scale=this.$task.childNodes[0],this.$task_data=this.$task.childNodes[1],this.$task_data.innerHTML=\"<div class='gantt_task_bg'></div><div class='gantt_task_baselines'></div><div class='gantt_links_area'></div><div class='gantt_bars_area'></div><div class='gantt_task_constraints'></div><div class='gantt_task_deadlines'></div>\",this.$task_bg=this.$task_data.childNodes[0],this.$task_baselines=this.$task_data.childNodes[1],this.$task_links=this.$task_data.childNodes[2],this.$task_bars=this.$task_data.childNodes[3],this.$task_constraints=this.$task_data.childNodes[4],this.$task_deadlines=this.$task_data.childNodes[5],this._tasks={col_width:0,width:[],full_width:0,trace_x:[],rendered:{}};var e=this.$getConfig(),n=e[this.$config.bind+\"_attribute\"],i=e[this.$config.bindLinks+\"_attribute\"];!n&&this.$config.bind&&(n=\"data-\"+this.$config.bind+\"-id\"),!i&&this.$config.bindLinks&&(i=\"data-\"+this.$config.bindLinks+\"-id\"),this.$config.item_attribute=n||null,this.$config.link_attribute=i||null;var a=this._createLayerConfig();this.$config.layers||(this.$config.layers=a.tasks),this.$config.linkLayers||(this.$config.linkLayers=a.links),this._attachLayers(this.$gantt),this.callEvent(\"onReady\",[]),this.$gantt.ext.dragTimeline&&(this._timelineDragScroll=this.$gantt.ext.dragTimeline.create(),this._timelineDragScroll.attach(this));},setSize:function(t,e){var n=this.$getConfig();if(1*t===t&&(this.$config.width=t),1*e===e){this.$config.height=e;var i=Math.max(this.$config.height-n.scale_height);this.$task_data.style.height=i+\"px\";}this.refresh(),this.$task_bg.style.backgroundImage=\"\",n.smart_rendering&&this.$config.rowStore?this.$task_bg.style.height=this.getTotalHeight()+\"px\":this.$task_bg.style.height=\"\";for(var a=this._tasks,r=this.$task_data.childNodes,s=0,o=r.length;s<o;s++){var l=r[s];l.hasAttribute(\"data-layer\")&&l.style&&(l.style.width=a.full_width+\"px\");}},isVisible:function(){return this.$parent&&this.$parent.$config?!this.$parent.$config.hidden:this.$task.offsetWidth;},getSize:function(){var t=this.$getConfig(),e=this.$config.rowStore?this.getTotalHeight():0,n=this.isVisible()?this._tasks.full_width:0;return{x:this.isVisible()?this.$config.width:0,y:this.isVisible()?this.$config.height:0,contentX:this.isVisible()?n:0,contentY:this.isVisible()?t.scale_height+e:0,scrollHeight:this.isVisible()?e:0,scrollWidth:this.isVisible()?n:0};},scrollTo:function(t,e){if(this.isVisible()){var n=!1;this.$config.scrollTop=this.$config.scrollTop||0,this.$config.scrollLeft=this.$config.scrollLeft||0,1*e===e&&(this.$config.scrollTop=e,this.$task_data.scrollTop=this.$config.scrollTop,n=!0),1*t===t&&(this.$task.scrollLeft=t,this.$config.scrollLeft=this.$task.scrollLeft,this._refreshScales(),n=!0),n&&this.callEvent(\"onScroll\",[this.$config.scrollLeft,this.$config.scrollTop]);}},_refreshScales:function(){if(this.isVisible()&&this.$getConfig().smart_scales){var t=this.getViewPort(),e=this._scales;this.$task_scale.innerHTML=this._getScaleChunkHtml(e,t.x,t.x_end);}},getViewPort:function(){var t=this.$config.scrollLeft||0,e=this.$config.scrollTop||0,n=this.$config.height||0,i=this.$config.width||0;return{y:e,y_end:e+n,x:t,x_end:t+i,height:n,width:i};},_createLayerConfig:function(){var t=this,e=function(){return t.isVisible();};this.$gantt;var n=[{expose:!0,renderer:this.$gantt.$ui.layers.taskBar(),container:this.$task_bars,filter:[e,function(i,a){return!a.hide_bar;}]}];return n.push({renderer:this.$gantt.$ui.layers.taskBg(),container:this.$task_bg,filter:[e]}),{tasks:n,links:[{expose:!0,renderer:this.$gantt.$ui.layers.link(),container:this.$task_links,filter:[e]}]};},_attachLayers:function(t){this._taskLayers=[],this._linkLayers=[];var e=this,n=this.$gantt.$services.getService(\"layers\");if(this.$config.bind){this._bindStore();var i=n.getDataRender(this.$config.bind);i||(i=n.createDataRender({name:this.$config.bind,defaultContainer:function(){return e.$task_data;}})),i.container=function(){return e.$task_data;};for(var a=this.$config.layers,r=0;a&&r<a.length;r++){typeof(c=a[r])==\"string\"&&(c=this.$gantt.$ui.layers[c]()),(typeof c==\"function\"||c&&c.render&&c.update)&&(c={renderer:c}),c.view=this;var s=i.addLayer(c);this._taskLayers.push(s),c.expose&&(this._taskRenderer=i.getLayer(s));}this._initStaticBackgroundRender();}if(this.$config.bindLinks){e.$config.linkStore=e.$gantt.getDatastore(e.$config.bindLinks);var o=n.getDataRender(this.$config.bindLinks);o||(o=n.createDataRender({name:this.$config.bindLinks,defaultContainer:function(){return e.$task_data;}}));var l=this.$config.linkLayers;for(r=0;l&&r<l.length;r++){var c;typeof c==\"string\"&&(c=this.$gantt.$ui.layers[c]()),(c=l[r]).view=this;var d=o.addLayer(c);this._taskLayers.push(d),l[r].expose&&(this._linkRenderer=o.getLayer(d));}}},_initStaticBackgroundRender:function(){var t=this,e=pa(),n=t.$config.rowStore;n&&(this._staticBgHandler=n.attachEvent(\"onStoreUpdated\",function(i,a,r){if(i===null&&t.isVisible()){var s=t.$getConfig();if(s.static_background||s.timeline_placeholder){var o=t.$gantt.getDatastore(t.$config.bind),l=t.$task_bg_static;if(l||((l=document.createElement(\"div\")).className=\"gantt_task_bg\",t.$task_bg_static=l,t.$task_bg.nextSibling?t.$task_data.insertBefore(l,t.$task_bg.nextSibling):t.$task_data.appendChild(l)),o){var c=t.getTotalHeight();s.timeline_placeholder&&(c=s.timeline_placeholder.height||t.$task_data.offsetHeight||99999),e.render(l,s,t.getScale(),c,t.getItemHeight(a?a.id:null));}}else s.static_background&&t.$task_bg_static&&t.$task_bg_static.parentNode&&t.$task_bg_static.parentNode.removeChild(t.$task_bg_static);}}),this.attachEvent(\"onDestroy\",function(){}),this._initStaticBackgroundRender=function(){});},_clearLayers:function(t){var e=this.$gantt.$services.getService(\"layers\"),n=e.getDataRender(this.$config.bind),i=e.getDataRender(this.$config.bindLinks);if(this._taskLayers)for(var a=0;a<this._taskLayers.length;a++)n.removeLayer(this._taskLayers[a]);if(this._linkLayers)for(a=0;a<this._linkLayers.length;a++)i.removeLayer(this._linkLayers[a]);this._linkLayers=[],this._taskLayers=[];},_render_tasks_scales:function(){var t=this.$getConfig(),e=\"\",n=0,i=0,a=this.$gantt.getState();if(this.isVisible()){var r=this.$scaleHelper,s=this._getScales();i=t.scale_height;var o=this.$config.width;t.autosize!=\"x\"&&t.autosize!=\"xy\"||(o=Math.max(t.autosize_min_width,0));var l=r.prepareConfigs(s,t.min_column_width,o,i-1,a.min_date,a.max_date,t.rtl),c=this._tasks=l[l.length-1];this._scales=l,this._posFromDateCache={},e=this._getScaleChunkHtml(l,0,this.$config.width),n=c.full_width+\"px\",i+=\"px\";}this.$task_scale.style.height=i,this.$task_data.style.width=this.$task_scale.style.width=n,this.$task_scale.innerHTML=e;},_getScaleChunkHtml:function(t,e,n){for(var i=[],a=this.$gantt.templates.scale_row_class,r=0;r<t.length;r++){var s=\"gantt_scale_line\",o=a(t[r]);o&&(s+=\" \"+o),i.push('<div class=\"'+s+'\" style=\"height:'+t[r].height+\"px;position:relative;line-height:\"+t[r].height+'px\">'+this._prepareScaleHtml(t[r],e,n,r)+\"</div>\");}return i.join(\"\");},_prepareScaleHtml:function(t,e,n,i){var a=this.$getConfig(),r=this.$gantt.templates,s=[],o=null,l=null,c=t.format||t.template||t.date;typeof c==\"string\"&&(c=this.$gantt.date.date_to_str(c));var d=0,u=t.count;!a.smart_scales||isNaN(e)||isNaN(n)||(d=At(t.left,e),u=At(t.left,n)+1),l=t.css||function(){},!t.css&&a.inherit_scale_class&&(l=r.scale_cell_class);for(var h=d;h<u&&t.trace_x[h];h++){o=new Date(t.trace_x[h]);var _=c.call(this,o),p=t.width[h];t.height;var y=t.left[h],k=\"\",b=\"\",g=\"\";if(p){k=\"width:\"+p+\"px;\"+(a.smart_scales?\"position:absolute;left:\"+y+\"px\":\"\");const f=this.getViewPort(),v=(a.scales[i]||{}).sticky;let x=\"\";const $=70;if(v!==!1&&p>$||v===!0){if(y<f.x&&y+p/2-$/2<f.x)x=` style='position:absolute;left: ${f.x-y+10}px;' `;else if(y+p/2+$/2>f.x_end&&p>$){let w=f.x_end-y-10,S=\"-100%\";w<$&&(w=$,S=`-${w}px`),x=` style='position:absolute;left: ${w}px;transform: translate(${S},0);' `;}}g=\"gantt_scale_cell\"+(h==t.count-1?\" gantt_last_cell\":\"\"),(b=l.call(this,o))&&(g+=\" \"+b);var m=`<div class='${g}' ${this.$gantt._waiAria.getTimelineCellAttr(_)} style='${k}'><span ${x}>${_}</span></div>`;s.push(m);}}return s.join(\"\");},dateFromPos:function(t){var e=this._tasks;if(t<0||t>e.full_width||!e.full_width)return null;var n=At(this._tasks.left,t),i=this._tasks.left[n],a=e.width[n]||e.col_width,r=0;a&&(r=(t-i)/a,e.rtl&&(r=1-r));var s=0;return r&&(s=this._getColumnDuration(e,e.trace_x[n])),new Date(e.trace_x[n].valueOf()+Math.round(r*s));},posFromDate:function(t){if(!this.isVisible()||!t)return 0;var e=String(t.valueOf());if(this._posFromDateCache[e]!==void 0)return this._posFromDateCache[e];var n=this.columnIndexByDate(t);this.$gantt.assert(n>=0,\"Invalid day index\");var i=Math.floor(n),a=n%1,r=this._tasks.left[Math.min(i,this._tasks.width.length-1)];i==this._tasks.width.length&&(r+=this._tasks.width[this._tasks.width.length-1]),a&&(i<this._tasks.width.length?r+=this._tasks.width[i]*(a%1):r+=1);var s=Math.round(r);return this._posFromDateCache[e]=s,Math.round(s);},_getNextVisibleColumn:function(t,e,n){for(var i=+e[t],a=t;n[i];)i=+e[++a];return a;},_getPrevVisibleColumn:function(t,e,n){for(var i=+e[t],a=t;n[i];)i=+e[--a];return a;},_getClosestVisibleColumn:function(t,e,n){var i=this._getNextVisibleColumn(t,e,n);return e[i]||(i=this._getPrevVisibleColumn(t,e,n)),i;},columnIndexByDate:function(t){var e=new Date(t).valueOf(),n=this._tasks.trace_x_ascending,i=this._tasks.ignore_x,a=this.$gantt.getState();if(e<=a.min_date)return this._tasks.rtl?n.length:0;if(e>=a.max_date)return this._tasks.rtl?0:n.length;var r=At(n,e),s=this._getClosestVisibleColumn(r,n,i),o=n[s],l=this._tasks.trace_index_transition;if(!o)return l?l[0]:0;var c=(t-n[s])/this._getColumnDuration(this._tasks,n[s]);return l?l[s]+(1-c):s+c;},getItemPosition:function(t,e,n){var i,a,r;let s=e||t.start_date||t.$auto_start_date,o=n||t.end_date||t.$auto_end_date;return this._tasks.rtl?(a=this.posFromDate(s),i=this.posFromDate(o)):(i=this.posFromDate(s),a=this.posFromDate(o)),r=Math.max(a-i,0),{left:i,top:this.getItemTop(t.id),height:this.getBarHeight(t.id),width:r,rowHeight:this.getItemHeight(t.id)};},getBarHeight:function(t,e){var n=this.$getConfig(),i=this.$config.rowStore.getItem(t),a=i.task_height||i.bar_height||n.bar_height||n.task_height,r=this.getItemHeight(t);return a==\"full\"&&(a=r-(n.bar_height_padding||3)),a=Math.min(a,r),e&&(a=Math.round(a/Math.sqrt(2))),Math.max(a,0);},getScale:function(){return this._tasks;},_getScales:function(){var t=this.$getConfig(),e=this.$scaleHelper,n=[e.primaryScale(t)].concat(e.getSubScales(t));return e.sortScales(n),n;},_getColumnDuration:function(t,e){return this.$gantt.date.add(e,t.step,t.unit)-e;},_bindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);if(this.$config.rowStore=t,t&&!t._timelineCacheAttached){var e=this;t._timelineCacheAttached=t.attachEvent(\"onBeforeFilter\",function(){e._resetTopPositionHeight();});}}},_unbindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);t&&t._timelineCacheAttached&&(t.detachEvent(t._timelineCacheAttached),t._timelineCacheAttached=!1);}},refresh:function(){this._bindStore(),this.$config.bindLinks&&(this.$config.linkStore=this.$gantt.getDatastore(this.$config.bindLinks)),this._resetTopPositionHeight(),this._resetHeight(),this._initStaticBackgroundRender(),this._render_tasks_scales();},destructor:function(){var t=this.$gantt;this._clearLayers(t),this._unbindStore(),this.$task=null,this.$task_scale=null,this.$task_data=null,this.$task_bg=null,this.$task_links=null,this.$task_bars=null,this.$gantt=null,this.$config.rowStore&&(this.$config.rowStore.detachEvent(this._staticBgHandler),this.$config.rowStore=null),this.$config.linkStore&&(this.$config.linkStore=null),this._timelineDragScroll&&(this._timelineDragScroll.destructor(),this._timelineDragScroll=null),this.callEvent(\"onDestroy\",[]),this.detachAllEvents();}};class ma{constructor(e){this._scrollOrder=0;const{gantt:n,grid:i,dnd:a,getCurrentX:r}=e;this.$gantt=n,this.$grid=i,this._dnd=a,this.getCurrentX=r,this._scrollView=this.$gantt.$ui.getView(this.$grid.$config.scrollX),this.attachEvents();}attachEvents(){this.isScrollable()&&(this._dnd.attachEvent(\"onDragMove\",(e,n)=>{const i=this.$grid.$grid.getBoundingClientRect(),a=i.right,r=i.left,s=this.getCurrentX(n.clientX);return s>=a-20&&(this.autoscrollRight(),this.autoscrollStart()),s<=r+20&&(this.autoscrollLeft(),this.autoscrollStart()),s<a-20&&s>r+20&&this.autoscrollStop(),!0;}),this._dnd.attachEvent(\"onDragEnd\",()=>{this.autoscrollStop();}));}autoscrollStart(){if(this._scrollOrder===0)return;const e=10*this._scrollOrder,n=this._scrollView.getScrollState();this._scrollView.scrollTo(n.position+e),setTimeout(()=>{this.autoscrollStart();},50);}autoscrollRight(){this._scrollOrder=1;}autoscrollLeft(){this._scrollOrder=-1;}autoscrollStop(){this._scrollOrder=0;}getCorrection(){return this.isScrollable()?this._scrollView.getScrollState().position:0;}isScrollable(){return!!this.$grid.$config.scrollable;}}const Ve=\"data-column-id\";class va{constructor(e,n){this._targetMarker=null,this.calculateCurrentPosition=i=>{const a=this.$grid.$grid.getBoundingClientRect(),r=a.right,s=a.left;let o=i;return o>r&&(o=r),o<s&&(o=s),o;},this.$gantt=e,this.$grid=n;}init(){const e=this.$gantt.$services.getService(\"dnd\");this._dnd=new e(this.$grid.$grid_scale,{updates_per_second:60}),this._scrollableGrid=new ma({gantt:this.$gantt,grid:this.$grid,dnd:this._dnd,getCurrentX:this.calculateCurrentPosition}),this.attachEvents();}attachEvents(){this._dnd.attachEvent(\"onBeforeDragStart\",(e,n)=>{if(this._draggedCell=this.$gantt.utils.dom.closest(n.target,\".gantt_grid_head_cell\"),!this._draggedCell)return;const i=this.$grid.$getConfig().columns,a=this._draggedCell.getAttribute(Ve);let r,s;return i.map(function(o,l){o.name===a&&(r=o,s=l);}),this.$grid.callEvent(\"onBeforeColumnDragStart\",[{draggedColumn:r,draggedIndex:s}])!==!1&&!(!this._draggedCell||!r)&&(this._gridConfig=this.$grid.$getConfig(),this._originAutoscroll=this.$gantt.config.autoscroll,this.$gantt.config.autoscroll=!1,!0);}),this._dnd.attachEvent(\"onAfterDragStart\",(e,n)=>{this._draggedCell&&(this._dnd.config.column=this._draggedCell.getAttribute(Ve),this._dnd.config.marker.innerHTML=this._draggedCell.outerHTML,this._dnd.config.marker.classList.add(\"gantt_column_drag_marker\"),this._dnd.config.marker.style.height=this._gridConfig.scale_height+\"px\",this._dnd.config.marker.style.lineHeight=this._gridConfig.scale_height+\"px\",this._draggedCell.classList.add(\"gantt_grid_head_cell_dragged\"));}),this._dnd.attachEvent(\"onDragMove\",(e,n)=>{if(!this._draggedCell)return;this._dragX=n.clientX;const i=this.calculateCurrentPosition(n.clientX),a=this.findColumnsIndexes();return this.setMarkerPosition(i),this.drawTargetMarker(a),!0;}),this._dnd.attachEvent(\"onDragEnd\",()=>{if(!this._draggedCell)return;const e=this.findColumnsIndexes(),n=e.targetIndex,i=e.draggedIndex,a=this.$grid.$getConfig().columns,r=a[i],s=a[n];if(this.$grid.callEvent(\"onColumnDragMove\",[{draggedColumn:r,targetColumn:s,draggedIndex:i,targetIndex:n}])===!1)return this.cleanTargetMarker(),void this.$gantt.render();this.$gantt.config.autoscroll=this._originAutoscroll,this._draggedCell.classList.remove(\"gantt_grid_head_cell_dragged\"),this.cleanTargetMarker(),this.reorderColumns();});}reorderColumns(){const{targetIndex:e,draggedIndex:n}=this.findColumnsIndexes(),i=this.$grid.$getConfig().columns,a=i[n],r=i[e];this.$grid.callEvent(\"onBeforeColumnReorder\",[{draggedColumn:a,targetColumn:r,draggedIndex:n,targetIndex:e}])!==!1&&e!==n&&(i.splice(n,1),i.splice(e,0,a),this.$gantt.render(),this.$grid.callEvent(\"onAfterColumnReorder\",[{draggedColumn:a,targetColumn:r,draggedIndex:n,targetIndex:e}]));}findColumnsIndexes(){const e=this._dnd.config.column,n=this.$grid.$getConfig().columns;let i,a,r,s;const o={startX:0,endX:0};let l,c=0,d=n.length-1,u=(p,y)=>p<=y,h=p=>++p;this.$gantt.config.rtl&&(c=n.length-1,d=0,u=(p,y)=>p>=y,h=p=>--p);const _=this._dragX-this.$grid.$grid.getBoundingClientRect().left+this._scrollableGrid.getCorrection();for(let p=c;u(p,d)&&(i===void 0||a===void 0);p=h(p))n[p].hide||(o.startX=o.endX,o.endX+=n[p].width,_>=o.startX&&(_<=o.endX||!u(h(p),d))&&(i=p,r=o.startX,s=o.endX,l=(_-o.startX)/(o.endX-o.startX)),e===n[p].name&&(a=p));return{targetIndex:i,draggedIndex:a,xBefore:r,xAfter:s,columnRelativePos:l};}setMarkerPosition(e,n=10){const{marker:i}=this._dnd.config,a=this._dnd._obj.getBoundingClientRect();i.style.top=`${a.y+n}px`,i.style.left=`${e}px`;}drawTargetMarker({targetIndex:e,draggedIndex:n,xBefore:i,xAfter:a,columnRelativePos:r}){let s;this._targetMarker||(this._targetMarker=document.createElement(\"div\"),wt(this._targetMarker,\"gantt_grid_target_marker\"),this._targetMarker.style.display=\"none\",this._targetMarker.style.height=`${this._gridConfig.scale_height}px`),this._targetMarker.parentNode||this.$grid.$grid_scale.appendChild(this._targetMarker),s=e>n?a:e<n?i:r>0.5?a:i,this._targetMarker.style.left=`${s}px`,this._targetMarker.style.display=\"block\";}cleanTargetMarker(){this._targetMarker&&this._targetMarker.parentNode&&this.$grid.$grid_scale.removeChild(this._targetMarker),this._targetMarker=null;}}function Te(t){var e=[];return{delegate:function(n,i,a,r){e.push([n,i,a,r]),t.$services.getService(\"mouseEvents\").delegate(n,i,a,r);},destructor:function(){for(var n=t.$services.getService(\"mouseEvents\"),i=0;i<e.length;i++){var a=e[i];n.detach(a[0],a[1],a[2],a[3]);}e=[];}};}var xe=function(t,e,n,i){this.$config=P({},e||{}),this.$gantt=i,this.$parent=t,ot(this),this.$state={},P(this,yn(this));};xe.prototype={init:function(t){var e=this.$gantt,n=e._waiAria.gridAttrString(),i=e._waiAria.gridDataAttrString(),a=this.$getConfig(),r=a.reorder_grid_columns||!1;this.$config.reorder_grid_columns!==void 0&&(r=this.$config.reorder_grid_columns),t.innerHTML=\"<div class='gantt_grid' style='height:inherit;width:inherit;' \"+n+\"></div>\",this.$grid=t.childNodes[0],this.$grid.innerHTML=\"<div class='gantt_grid_scale' \"+e._waiAria.gridScaleRowAttrString()+\"></div><div class='gantt_grid_data' \"+i+\"></div>\",this.$grid_scale=this.$grid.childNodes[0],this.$grid_data=this.$grid.childNodes[1];var s=a[this.$config.bind+\"_attribute\"];if(!s&&this.$config.bind&&(s=\"data-\"+this.$config.bind+\"-id\"),this.$config.item_attribute=s||null,!this.$config.layers){var o=this._createLayerConfig();this.$config.layers=o;}var l={init:function(){},doOnRender:function(){}};this._renderHeaderResizers=l.doOnRender,this._mouseDelegates=Te(e);var c=function(d,u){var h={row_before_start:d.bind(function(_,p,y){var k=u.$getConfig(),b=u.$config.rowStore;if(!nt(y,k.task_grid_row_resizer_attribute))return!1;var g=this.locate(y,k.task_grid_row_resizer_attribute),m=b.getItem(g);return u.callEvent(\"onBeforeRowResize\",[m])!==!1&&void 0;},d),row_after_start:d.bind(function(_,p,y){var k=u.$getConfig(),b=this.locate(y,k.task_grid_row_resizer_attribute);_.config.marker.innerHTML=\"\",_.config.marker.className+=\" gantt_row_grid_resize_area\",_.config.marker.style.width=u.$grid.offsetWidth+\"px\",_.config.drag_id=b;},d),row_drag_move:d.bind(function(_,p,y){var k=u.$config.rowStore,b=u.$getConfig(),g=_.config,m=g.drag_id,f=u.getItemHeight(m),v=u.getItemTop(m)-p.scrollTop,x=V(u.$grid_data),$=parseInt(g.marker.style.top,10),w=v+x.y,S=0,T=b.min_task_grid_row_height;return(S=$-w)<T&&(S=T),g.marker.style.left=x.x+\"px\",g.marker.style.top=w-1+\"px\",g.marker.style.height=Math.abs(S)+1+\"px\",g.marker_height=S,u.callEvent(\"onRowResize\",[m,k.getItem(m),S+f]),!0;},d),row_drag_end:d.bind(function(_,p,y){var k=u.$config.rowStore,b=_.config,g=b.drag_id,m=k.getItem(g),f=u.getItemHeight(g),v=b.marker_height;u.callEvent(\"onBeforeRowResizeEnd\",[g,m,v])!==!1&&m.row_height!=v&&(m.row_height=v,k.updateItem(g),u.callEvent(\"onAfterRowResize\",[g,m,f,v]),this.render());},d)};return{init:function(){var _=d.$services.getService(\"dnd\"),p=u.$getConfig(),y=new _(u.$grid_data,{updates_per_second:60});d.defined(p.dnd_sensitivity)&&(y.config.sensitivity=p.dnd_sensitivity),y.attachEvent(\"onBeforeDragStart\",function(k,b){return h.row_before_start(y,k,b);}),y.attachEvent(\"onAfterDragStart\",function(k,b){return h.row_after_start(y,k,b);}),y.attachEvent(\"onDragMove\",function(k,b){return h.row_drag_move(y,k,b);}),y.attachEvent(\"onDragEnd\",function(k,b){return h.row_drag_end(y,k,b);});}};}(e,this);c.init(),this._addLayers(this.$gantt),this._initEvents(),r&&(this._columnDND=new va(e,this),this._columnDND.init()),this.callEvent(\"onReady\",[]);},_validateColumnWidth:function(t,e){var n=t[e];if(n&&n!=\"*\"){var i=this.$gantt,a=1*n;isNaN(a)?i.assert(!1,\"Wrong \"+e+\" value of column \"+t.name):t[e]=a;}},setSize:function(t,e){this.$config.width=this.$state.width=t,this.$config.height=this.$state.height=e;for(var n,i=this.getGridColumns(),a=0,r=(c=this.$getConfig()).grid_elastic_columns,s=0,o=i.length;s<o;s++)this._validateColumnWidth(i[s],\"min_width\"),this._validateColumnWidth(i[s],\"max_width\"),this._validateColumnWidth(i[s],\"width\"),a+=1*i[s].width;if(!isNaN(a)&&this.$config.scrollable||(a=n=this._setColumnsWidth(t+1)),this.$config.scrollable&&r&&!isNaN(a)){let u=\"width\";r==\"min_width\"&&(u=\"min_width\");let h=0;i.forEach(function(_){h+=_[u]||c.min_grid_column_width;});var l=Math.max(h,t);a=this._setColumnsWidth(l),n=t;}this.$config.scrollable?(this.$grid_scale.style.width=a+\"px\",this.$grid_data.style.width=a+\"px\"):(this.$grid_scale.style.width=\"inherit\",this.$grid_data.style.width=\"inherit\"),this.$config.width-=1;var c=this.$getConfig();n!==t&&(n!==void 0?(c.grid_width=n,this.$config.width=n-1):isNaN(a)||(this._setColumnsWidth(a),c.grid_width=a,this.$config.width=a-1));var d=Math.max(this.$state.height-c.scale_height,0);this.$grid_data.style.height=d+\"px\",this.refresh();},getSize:function(){var t=this.$getConfig(),e=this.$config.rowStore?this.getTotalHeight():0,n=this._getGridWidth();return{x:this.$state.width,y:this.$state.height,contentX:this.isVisible()?n:0,contentY:this.isVisible()?t.scale_height+e:0,scrollHeight:this.isVisible()?e:0,scrollWidth:this.isVisible()?n:0};},_bindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);if(this.$config.rowStore=t,t&&!t._gridCacheAttached){var e=this;t._gridCacheAttached=t.attachEvent(\"onBeforeFilter\",function(){e._resetTopPositionHeight();});}}},_unbindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);t&&t._gridCacheAttached&&(t.detachEvent(t._gridCacheAttached),t._gridCacheAttached=!1);}},refresh:function(){this._bindStore(),this._resetTopPositionHeight(),this._resetHeight(),this._initSmartRenderingPlaceholder(),this._calculateGridWidth(),this._renderGridHeader();},getViewPort:function(){var t=this.$config.scrollLeft||0,e=this.$config.scrollTop||0,n=this.$config.height||0,i=this.$config.width||0;return{y:e,y_end:e+n,x:t,x_end:t+i,height:n,width:i};},scrollTo:function(t,e){if(this.isVisible()){var n=!1;this.$config.scrollTop=this.$config.scrollTop||0,this.$config.scrollLeft=this.$config.scrollLeft||0,1*t==t&&(this.$config.scrollLeft=this.$state.scrollLeft=this.$grid.scrollLeft=t,n=!0),1*e==e&&(this.$config.scrollTop=this.$state.scrollTop=this.$grid_data.scrollTop=e,n=!0),n&&this.callEvent(\"onScroll\",[this.$config.scrollLeft,this.$config.scrollTop]);}},getColumnIndex:function(t,e){for(var n=this.$getConfig().columns,i=0,a=0;a<n.length;a++)if(e&&n[a].hide&&i++,n[a].name==t)return a-i;return null;},getColumn:function(t){var e=this.getColumnIndex(t);return e===null?null:this.$getConfig().columns[e];},getGridColumns:function(){return this.$getConfig().columns.slice();},isVisible:function(){return this.$parent&&this.$parent.$config?!this.$parent.$config.hidden:this.$grid.offsetWidth;},_createLayerConfig:function(){var t=this.$gantt,e=this;return[{renderer:t.$ui.layers.gridLine(),container:this.$grid_data,filter:[function(){return e.isVisible();}]},{renderer:t.$ui.layers.gridTaskRowResizer(),container:this.$grid_data,append:!0,filter:[function(){return t.config.resize_rows;}]}];},_addLayers:function(t){if(this.$config.bind){this._taskLayers=[];var e=this,n=this.$gantt.$services.getService(\"layers\"),i=n.getDataRender(this.$config.bind);i||(i=n.createDataRender({name:this.$config.bind,defaultContainer:function(){return e.$grid_data;}}));for(var a=this.$config.layers,r=0;a&&r<a.length;r++){var s=a[r];s.view=this;var o=i.addLayer(s);this._taskLayers.push(o);}this._bindStore(),this._initSmartRenderingPlaceholder();}},_refreshPlaceholderOnStoreUpdate:function(t){var e=this.$getConfig(),n=this.$config.rowStore;if(n&&t===null&&this.isVisible()&&e.smart_rendering){var i;if(this.$config.scrollY){var a=this.$gantt.$ui.getView(this.$config.scrollY);a&&(i=a.getScrollState().scrollSize);}if(i||(i=n?this.getTotalHeight():0),i){this.$rowsPlaceholder&&this.$rowsPlaceholder.parentNode&&this.$rowsPlaceholder.parentNode.removeChild(this.$rowsPlaceholder);var r=this.$rowsPlaceholder=document.createElement(\"div\");r.style.visibility=\"hidden\",r.style.height=i+\"px\",r.style.width=\"1px\",this.$grid_data.appendChild(r);}}},_initSmartRenderingPlaceholder:function(){var t=this.$config.rowStore;t&&(this._initSmartRenderingPlaceholder=function(){},this._staticBgHandler=t.attachEvent(\"onStoreUpdated\",R(this._refreshPlaceholderOnStoreUpdate,this)));},_initEvents:function(){var t=this.$gantt;this._mouseDelegates.delegate(\"click\",\"gantt_close\",t.bind(function(e,n,i){var a=this.$config.rowStore;if(!a)return!0;var r=nt(e,this.$config.item_attribute);return r&&a.close(r.getAttribute(this.$config.item_attribute)),!1;},this),this.$grid),this._mouseDelegates.delegate(\"click\",\"gantt_open\",t.bind(function(e,n,i){var a=this.$config.rowStore;if(!a)return!0;var r=nt(e,this.$config.item_attribute);return r&&a.open(r.getAttribute(this.$config.item_attribute)),!1;},this),this.$grid);},_clearLayers:function(t){var e=this.$gantt.$services.getService(\"layers\").getDataRender(this.$config.bind);if(this._taskLayers)for(var n=0;n<this._taskLayers.length;n++)e.removeLayer(this._taskLayers[n]);this._taskLayers=[];},_getColumnWidth:function(t,e,n){var i=t.min_width||e.min_grid_column_width,a=Math.max(n,i||10);return t.max_width&&(a=Math.min(a,t.max_width)),a;},_checkGridColumnMinWidthLimits:function(t,e){for(var n=0,i=t.length;n<i;n++){var a=1*t[n].width;!t[n].min_width&&a<e.min_grid_column_width&&(t[n].min_width=a);}},_getGridWidthLimits:function(){for(var t=this.$getConfig(),e=this.getGridColumns(),n=0,i=0,a=0;a<e.length;a++)n+=e[a].min_width?e[a].min_width:t.min_grid_column_width,i!==void 0&&(i=e[a].max_width?i+e[a].max_width:void 0);return this._checkGridColumnMinWidthLimits(e,t),[n,i];},_setColumnsWidth:function(t,e){var n=this.$getConfig(),i=this.getGridColumns(),a=0,r=t;e=window.isNaN(e)?-1:e;for(var s=0,o=i.length;s<o;s++)a+=1*i[s].width;if(window.isNaN(a))for(this._calculateGridWidth(),a=0,s=0,o=i.length;s<o;s++)a+=1*i[s].width;var l=r-a,c=0;for(s=0;s<e+1;s++)c+=i[s].width;for(a-=c,s=e+1;s<i.length;s++){var d=i[s],u=Math.round(l*(d.width/a));l<0?d.min_width&&d.width+u<d.min_width?u=d.min_width-d.width:!d.min_width&&n.min_grid_column_width&&d.width+u<n.min_grid_column_width&&(u=n.min_grid_column_width-d.width):d.max_width&&d.width+u>d.max_width&&(u=d.max_width-d.width),a-=d.width,d.width+=u,l-=u;}for(var h=l>0?1:-1;l>0&&h===1||l<0&&h===-1;){var _=l;for(s=e+1;s<i.length;s++){var p;if((p=i[s].width+h)==this._getColumnWidth(i[s],n,p)&&(l-=h,i[s].width=p),!l)break;}if(_==l)break;}return l&&e>-1&&(p=i[e].width+l)==this._getColumnWidth(i[e],n,p)&&(i[e].width=p),this._getColsTotalWidth();},_getColsTotalWidth:function(){for(var t=this.getGridColumns(),e=0,n=0;n<t.length;n++){var i=parseFloat(t[n].width);if(window.isNaN(i))return!1;e+=i;}return e;},_calculateGridWidth:function(){for(var t=this.$getConfig(),e=this.getGridColumns(),n=0,i=[],a=[],r=0;r<e.length;r++){var s=parseFloat(e[r].width);window.isNaN(s)&&(s=t.min_grid_column_width||10,i.push(r)),a[r]=s,n+=s;}var o=this._getGridWidth()+1;if(t.autofit||i.length){var l=o-n;if(t.autofit&&!t.grid_elastic_columns)for(r=0;r<a.length;r++){var c=Math.round(l/(a.length-r));a[r]+=c,(d=this._getColumnWidth(e[r],t,a[r]))!=a[r]&&(c=d-a[r],a[r]=d),l-=c;}else if(i.length)for(r=0;r<i.length;r++){c=Math.round(l/(i.length-r));var d,u=i[r];a[u]+=c,(d=this._getColumnWidth(e[u],t,a[u]))!=a[u]&&(c=d-a[u],a[u]=d),l-=c;}for(r=0;r<a.length;r++)e[r].width=a[r];}else{var h=o!=n;this.$config.width=n-1,t.grid_width=n,h&&this.$parent._setContentSize(this.$config.width,null);}},_renderGridHeader:function(){var t=this.$gantt,e=this.$getConfig(),n=this.$gantt.locale,i=this.$gantt.templates,a=this.getGridColumns();e.rtl&&(a=a.reverse());var r=[],s=0,o=n.labels,l=e.scale_height-1;const c={};for(var d=0;d<a.length;d++){var u=d==a.length-1,h=a[d];h.name||(h.name=t.uid()+\"\");var _=1*h.width,p=this._getGridWidth();u&&p>s+_&&(h.width=_=p-s),s+=_;var y=t._sort&&h.name==t._sort.name?`<div data-column-id=\"${h.name}\" class=\"gantt_sort gantt_${t._sort.direction}\"></div>`:\"\",k=[\"gantt_grid_head_cell\",\"gantt_grid_head_\"+h.name,u?\"gantt_last_cell\":\"\",i.grid_header_class(h.name,h)].join(\" \"),b=\"width:\"+(_-(u?1:0))+\"px;\",g=h.label||o[\"column_\"+h.name]||o[h.name];typeof g==\"function\"&&(g=g.call(t,h.name,h)),g=g||\"\";let f=!1;t.config.external_render&&t.config.external_render.isElement(g)&&(f=!0,c[h.name]=g);var m=\"<div class='\"+k+\"' style='\"+b+\"' \"+t._waiAria.gridScaleCellAttrString(h,g)+\" data-column-id='\"+h.name+\"' column_id='\"+h.name+\"' data-column-name='\"+h.name+\"' data-column-index='\"+d+\"'>\"+(f?\"<div data-component-container></div>\":g)+y+\"</div>\";r.push(m);}this.$grid_scale.style.height=e.scale_height+\"px\",this.$grid_scale.style.lineHeight=l+\"px\",this.$grid_scale.innerHTML=r.join(\"\");for(let f in c)t.config.external_render.renderElement(c[f],this.$grid_scale.querySelector(\"[data-column-id='\"+f+\"'] [data-component-container]\"));this._renderHeaderResizers&&this._renderHeaderResizers();},_getGridWidth:function(){return this.$config.width;},destructor:function(){this._clearLayers(this.$gantt),this._mouseDelegates&&(this._mouseDelegates.destructor(),this._mouseDelegates=null),this._unbindStore(),this.$grid=null,this.$grid_scale=null,this.$grid_data=null,this.$gantt=null,this.$config.rowStore&&(this.$config.rowStore.detachEvent(this._staticBgHandler),this.$config.rowStore=null),this.callEvent(\"onDestroy\",[]),this.detachAllEvents();}};const ka={init:function(t,e){var n=e.$gantt;n.attachEvent(\"onTaskClick\",function(i,a){if(n._is_icon_open_click(a))return!0;var r=t.getState(),s=t.locateCell(a.target);return!s||!t.getEditorConfig(s.columnName)||(t.isVisible()&&r.id==s.id&&r.columnName==s.columnName||t.startEdit(s.id,s.columnName),!1);}),n.attachEvent(\"onEmptyClick\",function(){return t.isVisible()&&t.isChanged()?t.save():t.hide(),!0;}),n.attachEvent(\"onTaskDblClick\",function(i,a){var r=t.getState(),s=t.locateCell(a.target);return!s||!t.isVisible()||s.columnName!=r.columnName;});},onShow:function(t,e,n){var i=n.$gantt;i.ext&&i.ext.keyboardNavigation&&i.ext.keyboardNavigation.attachEvent(\"onKeyDown\",function(a,r){var s=i.constants.KEY_CODES,o=!1;return r.keyCode===s.SPACE&&t.isVisible()&&(o=!0),!o;}),e.onkeydown=function(a){a=a||window.event;var r=i.constants.KEY_CODES;if(!(a.defaultPrevented||a.shiftKey&&a.keyCode!=r.TAB)){var s=!0;switch(a.keyCode){case i.keys.edit_save:t.save();break;case i.keys.edit_cancel:t.hide();break;case r.UP:case r.DOWN:t.isVisible()&&(t.hide(),s=!1);break;case r.TAB:a.shiftKey?t.editPrevCell(!0):t.editNextCell(!0);break;default:s=!1;}s&&a.preventDefault();}};},onHide:function(){},destroy:function(){}},ya={init:function(t,e){var n=t,i=e.$gantt,a=null,r=i.ext.keyboardNavigation;r.attachEvent(\"onBeforeFocus\",function(s){var o=t.locateCell(s);if(clearTimeout(a),o){var l=o.columnName,c=o.id,d=n.getState();if(n.isVisible()&&d.id==c&&d.columnName===l)return!1;}return!0;}),r.attachEvent(\"onFocus\",function(s){var o=t.locateCell(s),l=t.getState();return clearTimeout(a),!o||o.id==l.id&&o.columnName==l.columnName||n.isVisible()&&n.save(),!0;}),t.attachEvent(\"onHide\",function(){clearTimeout(a);}),r.attachEvent(\"onBlur\",function(){return a=setTimeout(function(){n.save();}),!0;}),i.attachEvent(\"onTaskDblClick\",function(s,o){var l=t.getState(),c=t.locateCell(o.target);return!c||!t.isVisible()||c.columnName!=l.columnName;}),i.attachEvent(\"onTaskClick\",function(s,o){if(i._is_icon_open_click(o))return!0;var l=t.getState(),c=t.locateCell(o.target);return!c||!t.getEditorConfig(c.columnName)||(t.isVisible()&&l.id==c.id&&l.columnName==c.columnName||t.startEdit(c.id,c.columnName),!1);}),i.attachEvent(\"onEmptyClick\",function(){return n.save(),!0;}),r.attachEvent(\"onKeyDown\",function(s,o){var l=t.locateCell(o.target),c=!!l&&t.getEditorConfig(l.columnName),d=t.getState(),u=i.constants.KEY_CODES,h=o.keyCode,_=!1;switch(h){case u.ENTER:t.isVisible()?(t.save(),o.preventDefault(),_=!0):c&&!(o.ctrlKey||o.metaKey||o.shiftKey)&&(n.startEdit(l.id,l.columnName),o.preventDefault(),_=!0);break;case u.ESC:t.isVisible()&&(t.hide(),o.preventDefault(),_=!0);break;case u.UP:case u.DOWN:break;case u.LEFT:case u.RIGHT:(c&&t.isVisible()||d.editorType===\"date\")&&(_=!0);break;case u.SPACE:t.isVisible()&&(_=!0),c&&!t.isVisible()&&(n.startEdit(l.id,l.columnName),o.preventDefault(),_=!0);break;case u.DELETE:c&&!t.isVisible()?(n.startEdit(l.id,l.columnName),_=!0):c&&t.isVisible()&&(_=!0);break;case u.TAB:if(t.isVisible()){o.shiftKey?t.editPrevCell(!0):t.editNextCell(!0);var p=t.getState();p.id&&r.focus({type:\"taskCell\",id:p.id,column:p.columnName}),o.preventDefault(),_=!0;}break;default:if(t.isVisible())_=!0;else if(h>=48&&h<=57||h>95&&h<112||h>=64&&h<=91||h>185&&h<193||h>218&&h<223){var y=s.modifiers,k=y.alt||y.ctrl||y.meta||y.shift;y.alt||k&&r.getCommandHandler(s,\"taskCell\")||c&&!t.isVisible()&&(n.startEdit(l.id,l.columnName),_=!0);}}return!_;});},onShow:function(t,e,n){},onHide:function(t,e,n){const i=n.$gantt;i&&i.focus();},destroy:function(){}};function St(t){var e=function(){};return e.prototype={show:function(n,i,a,r){},hide:function(){},set_value:function(n,i,a,r){this.get_input(r).value=n;},get_value:function(n,i,a){return this.get_input(a).value||\"\";},is_changed:function(n,i,a,r){var s=this.get_value(i,a,r);return s&&n&&s.valueOf&&n.valueOf?s.valueOf()!=n.valueOf():s!=n;},is_valid:function(n,i,a,r){return!0;},save:function(n,i,a){},get_input:function(n){return n.querySelector(\"input\");},focus:function(n){var i=this.get_input(n);i&&(i.focus&&i.focus(),i.select&&i.select());}},e;}function ba(t){var e=St();function n(){return e.apply(this,arguments)||this;}return z(n,e),P(n.prototype,{show:function(i,a,r,s){var o=`<div role='cell'><input type='text' name='${a.name}' title='${a.name}'></div>`;s.innerHTML=o;}},!0),n;}function xa(t){var e=St();function n(){return e.apply(this,arguments)||this;}return z(n,e),P(n.prototype,{show:function(i,a,r,s){var o=r.min||0,l=r.max||100,c=`<div role='cell'><input type='number' min='${o}' max='${l}' name='${a.name}' title='${a.name}'></div>`;s.innerHTML=c,s.oninput=function(d){+d.target.value<o&&(d.target.value=o),+d.target.value>l&&(d.target.value=l);};},get_value:function(i,a,r){return this.get_input(r).value||\"\";},is_valid:function(i,a,r,s){return!isNaN(parseInt(i,10));}},!0),n;}function $a(t){var e=St();function n(){return e.apply(this,arguments)||this;}return z(n,e),P(n.prototype,{show:function(i,a,r,s){for(var o=`<div role='cell'><select name='${a.name}' title='${a.name}'>`,l=[],c=r.options||[],d=0;d<c.length;d++)l.push(\"<option value='\"+r.options[d].key+\"'>\"+c[d].label+\"</option>\");o+=l.join(\"\")+\"</select></div>\",s.innerHTML=o;},get_input:function(i){return i.querySelector(\"select\");}},!0),n;}function wa(t){var e=St(),n=\"%Y-%m-%d\",i=null,a=null;function r(){return e.apply(this,arguments)||this;}return z(r,e),P(r.prototype,{show:function(s,o,l,c){i||(i=t.date.date_to_str(n)),a||(a=t.date.str_to_date(n));var d=null,u=null;d=typeof l.min==\"function\"?l.min(s,o):l.min,u=typeof l.max==\"function\"?l.max(s,o):l.max;var h=`<div style='width:140px' role='cell'><input type='date' ${d?\" min='\"+i(d)+\"' \":\"\"} ${u?\" max='\"+i(u)+\"' \":\"\"} name='${o.name}' title='${o.name}'></div>`;c.innerHTML=h,c.oninput=function(_){_.target.value&&(d||u)&&(+t.date.str_to_date(\"%Y-%m-%d\")(_.target.value)<+d&&(_.target.value=t.date.date_to_str(\"%Y-%m-%d\")(d)),+t.date.str_to_date(\"%Y-%m-%d\")(_.target.value)>+u&&(_.target.value=t.date.date_to_str(\"%Y-%m-%d\")(u)));};},set_value:function(s,o,l,c){s&&s.getFullYear?this.get_input(c).value=i(s):this.get_input(c).value=s;},is_valid:function(s,o,l,c){return!(!s||isNaN(s.getTime()));},get_value:function(s,o,l){var c;try{c=a(this.get_input(l).value||\"\");}catch{c=null;}return c;}},!0),r;}function Sa(t){var e=St();function n(){return e.apply(this,arguments)||this;}function i(l){return l.formatter||t.ext.formatters.linkFormatter();}function a(l,c){for(var d=(l||\"\").split(c.delimiter||\",\"),u=0;u<d.length;u++){var h=d[u].trim();h?d[u]=h:(d.splice(u,1),u--);}return d.sort(),d;}function r(l,c,d){for(var u=l.$target,h=[],_=0;_<u.length;_++){var p=d.getLink(u[_]);h.push(i(c).format(p));}return h.join((c.delimiter||\",\")+\" \");}function s(l){return l.source+\"_\"+l.target+\"_\"+l.type+\"_\"+(l.lag||0);}function o(l,c,d){var u=function(k,b,g){var m=[];return[...new Set(b)].forEach(function(f){var v=i(g).parse(f);v&&(v.target=k,v.id=\"predecessor_generated\",t.isLinkAllowed(v)&&(v.id=void 0,m.push(v)));}),m;}(l.id,c,d),h={};l.$target.forEach(function(k){var b=t.getLink(k);h[s(b)]=b.id;});var _=[];u.forEach(function(k){var b=s(k);h[b]?delete h[b]:_.push(k);});var p=[];for(var y in h)p.push(h[y]);return{add:_,remove:p};}return z(n,e),P(n.prototype,{show:function(l,c,d,u){var h=`<div role='cell'><input type='text' name='${c.name}' title='${c.name}'></div>`;u.innerHTML=h;},hide:function(){},set_value:function(l,c,d,u){this.get_input(u).value=r(l,d.editor,t);},get_value:function(l,c,d){return a(this.get_input(d).value||\"\",c.editor);},save:function(l,c,d){var u=o(t.getTask(l),this.get_value(l,c,d),c.editor);(u.add.length||u.remove.length)&&t.batchUpdate(function(){u.add.forEach(function(h){t.addLink(h);}),u.remove.forEach(function(h){t.deleteLink(h);}),t.autoSchedule&&t.autoSchedule();});},is_changed:function(l,c,d,u){var h=this.get_value(c,d,u),_=a(r(l,d.editor,t),d.editor);return h.join()!==_.join();}},!0),n;}function Ta(t){var e=St();function n(){return e.apply(this,arguments)||this;}function i(a){return a.formatter||t.ext.formatters.durationFormatter();}return z(n,e),P(n.prototype,{show:function(a,r,s,o){var l=`<div role='cell'><input type='text' name='${r.name}' title='${r.name}'></div>`;o.innerHTML=l;},set_value:function(a,r,s,o){this.get_input(o).value=i(s.editor).format(a);},get_value:function(a,r,s){return i(r.editor).parse(this.get_input(s).value||\"\");}},!0),n;}function Ea(t){return function(n,i,a){a==\"keepDates\"?function(r,s){s==\"duration\"?r.end_date=t.calculateEndDate(r):s!=\"end_date\"&&s!=\"start_date\"||(r.duration=t.calculateDuration(r));}(n,i):a==\"keepDuration\"?function(r,s){s==\"end_date\"?r.start_date=e(r):s!=\"start_date\"&&s!=\"duration\"||(r.end_date=t.calculateEndDate(r));}(n,i):function(r,s){t.config.schedule_from_end?s==\"end_date\"||s==\"duration\"?r.start_date=e(r):s==\"start_date\"&&(r.duration=t.calculateDuration(r)):s==\"start_date\"||s==\"duration\"?r.end_date=t.calculateEndDate(r):s==\"end_date\"&&(r.duration=t.calculateDuration(r));}(n,i);};function e(n){return t.calculateEndDate({start_date:n.end_date,duration:-n.duration,task:n});}}function Ca(t){t.config.editor_types={text:new(ba())(),number:new(xa())(),select:new($a())(),date:new(wa(t))(),predecessor:new(Sa(t))(),duration:new(Ta(t))()};}function Da(t){var e=/* @__PURE__ */function(a){var r=null;return{setMapping:function(s){r=s;},getMapping:function(){return r||(a.config.keyboard_navigation_cells&&a.ext.keyboardNavigation?ya:ka);}};}(t),n={};ot(n);var i={init:Ca,createEditors:function(a){function r(u,h){var _=a.$getConfig(),p=function(b,g){for(var m=a.$getConfig(),f=a.getItemTop(b),v=a.getItemHeight(b),x=a.getGridColumns(),$=0,w=0,S=0,T=0;T<x.length;T++){if(x[T].name==g){S=x[T].width;break;}m.rtl?w+=x[T].width:$+=x[T].width;}return m.rtl?{top:f,right:w,height:v,width:S}:{top:f,left:$,height:v,width:S};}(u,h),y=document.createElement(\"div\");y.className=\"gantt_grid_editor_placeholder\",y.setAttribute(a.$config.item_attribute,u),y.setAttribute(a.$config.bind+\"_id\",u),y.setAttribute(\"data-column-name\",h);var k=function(b,g){for(var m=b.getGridColumns(),f=0;f<m.length;f++)if(m[f].name==g)return f;return 0;}(a,h);return y.setAttribute(\"data-column-index\",k),t._waiAria.inlineEditorAttr(y),_.rtl?y.style.cssText=[\"top:\"+p.top+\"px\",\"right:\"+p.right+\"px\",\"width:\"+p.width+\"px\",\"height:\"+p.height+\"px\"].join(\";\"):y.style.cssText=[\"top:\"+p.top+\"px\",\"left:\"+p.left+\"px\",\"width:\"+p.width+\"px\",\"height:\"+p.height+\"px\"].join(\";\"),y;}var s=Ea(t),o=[],l=[],c=null,d={_itemId:null,_columnName:null,_editor:null,_editorType:null,_placeholder:null,locateCell:function(u){if(!Y(u,a.$grid))return null;var h=nt(u,a.$config.item_attribute),_=nt(u,\"data-column-name\");if(h&&_){var p=_.getAttribute(\"data-column-name\");return{id:h.getAttribute(a.$config.item_attribute),columnName:p};}return null;},getEditorConfig:function(u){return a.getColumn(u).editor;},init:function(){var u=e.getMapping();u.init&&u.init(this,a),c=a.$gantt.getDatastore(a.$config.bind);var h=this;o.push(c.attachEvent(\"onIdChange\",function(_,p){h._itemId==_&&(h._itemId=p);})),o.push(c.attachEvent(\"onStoreUpdated\",function(){a.$gantt.getState(\"batchUpdate\").batch_update||h.isVisible()&&!c.isVisible(h._itemId)&&h.hide();})),l.push(t.attachEvent(\"onDataRender\",function(){h._editor&&h._placeholder&&!Y(h._placeholder,t.$root)&&a.$grid_data.appendChild(h._placeholder);})),this.init=function(){};},getState:function(){return{editor:this._editor,editorType:this._editorType,placeholder:this._placeholder,id:this._itemId,columnName:this._columnName};},startEdit:function(u,h){if(this.isVisible()&&this.save(),!c.exists(u))return;var _={id:u,columnName:h};if(t.isReadonly(c.getItem(u)))return void this.callEvent(\"onEditPrevent\",[_]);if(this.callEvent(\"onBeforeEditStart\",[_])===!1)return void this.callEvent(\"onEditPrevent\",[_]);const p=this.show(_.id,_.columnName);p&&p.then?p.then(function(){this.setValue(),this.callEvent(\"onEditStart\",[_]);}.bind(this)):(this.setValue(),this.callEvent(\"onEditStart\",[_]));},isVisible:function(){return!(!this._editor||!Y(this._placeholder,t.$root));},show:function(u,h){this.isVisible()&&this.save();var _={id:u,columnName:h},p=a.getColumn(_.columnName),y=this.getEditorConfig(p.name);if(!y)return;var k=a.$getConfig().editor_types[y.type],b=r(_.id,_.columnName);a.$grid_data.appendChild(b);const g=function(){this._editor=k,this._placeholder=b,this._itemId=_.id,this._columnName=_.columnName,this._editorType=y.type;var f=e.getMapping();f.onShow&&f.onShow(this,b,a),b._onReMount=function(){this.setValue();}.bind(this);}.bind(this),m=k.show(_.id,p,y,b);if(m&&m.then)return m.then(()=>{g();});g();},setValue:function(){var u=this.getState(),h=u.id,_=u.columnName,p=a.getColumn(_),y=c.getItem(h),k=this.getEditorConfig(_);if(k){var b=y[k.map_to];k.map_to==\"auto\"&&(b=c.getItem(h)),this._editor.set_value(b,h,p,this._placeholder),this.focus();}},focus:function(){this._editor.focus(this._placeholder);},getValue:function(){var u=a.getColumn(this._columnName);return this._editor.get_value(this._itemId,u,this._placeholder);},_getItemValue:function(){var u=this.getEditorConfig(this._columnName);if(u){var h=t.getTask(this._itemId)[u.map_to];return u.map_to==\"auto\"&&(h=c.getItem(this._itemId)),h;}},isChanged:function(){var u=a.getColumn(this._columnName),h=this._getItemValue();return this._editor.is_changed(h,this._itemId,u,this._placeholder);},hide:function(){if(this._itemId){var u=this._itemId,h=this._columnName,_=e.getMapping();_.onHide&&_.onHide(this,this._placeholder,a),this._itemId=null,this._columnName=null,this._editorType=null,this._placeholder&&(this._editor&&this._editor.hide&&this._editor.hide(this._placeholder),this._editor=null,this._placeholder.parentNode&&this._placeholder.parentNode.removeChild(this._placeholder),this._placeholder=null,this.callEvent(\"onEditEnd\",[{id:u,columnName:h}]));}},save:function(){if(this.isVisible()&&c.exists(this._itemId)&&this.isChanged()){var u=this._itemId,h=this._columnName;if(c.exists(u)){var _=c.getItem(u),p=this.getEditorConfig(h),y={id:u,columnName:h,newValue:this.getValue(),oldValue:this._getItemValue()};if(this.callEvent(\"onBeforeSave\",[y])!==!1&&(!this._editor.is_valid||this._editor.is_valid(y.newValue,y.id,a.getColumn(h),this._placeholder))){var k=p.map_to,b=y.newValue;k!=\"auto\"?(_[k]=b,s(_,k,t.config.inline_editors_date_processing),c.updateItem(u)):this._editor.save(u,a.getColumn(h),this._placeholder),this.callEvent(\"onSave\",[y]);}this.hide();}}else this.hide();},_findEditableCell:function(u,h){var _=u,p=a.getGridColumns()[_],y=p?p.name:null;if(y){for(;y&&!this.getEditorConfig(y);)y=this._findEditableCell(u+h,h);return y;}return null;},getNextCell:function(u){return this._findEditableCell(a.getColumnIndex(this._columnName,!0)+u,u);},getFirstCell:function(){return this._findEditableCell(0,1);},getLastCell:function(){return this._findEditableCell(a.getGridColumns().length-1,-1);},editNextCell:function(u){var h=this.getNextCell(1);if(h){var _=this.getNextCell(1);_&&this.getEditorConfig(_)&&this.startEdit(this._itemId,_);}else if(u&&this.moveRow(1)){var p=this.moveRow(1);(h=this.getFirstCell())&&this.getEditorConfig(h)&&this.startEdit(p,h);}},editPrevCell:function(u){var h=this.getNextCell(-1);if(h){var _=this.getNextCell(-1);_&&this.getEditorConfig(_)&&this.startEdit(this._itemId,_);}else if(u&&this.moveRow(-1)){var p=this.moveRow(-1);(h=this.getLastCell())&&this.getEditorConfig(h)&&this.startEdit(p,h);}},moveRow:function(u){for(var h=u>0?t.getNext:t.getPrev,_=(h=t.bind(h,t))(this._itemId);t.isTaskExists(_)&&t.isReadonly(t.getTask(_));)_=h(_);return _;},editNextRow:function(u){var h=this.getState().id;if(t.isTaskExists(h)){var _=null;_=u?this.moveRow(1):t.getNext(h),t.isTaskExists(_)&&this.startEdit(_,this._columnName);}},editPrevRow:function(u){var h=this.getState().id;if(t.isTaskExists(h)){var _=null;_=u?this.moveRow(-1):t.getPrev(h),t.isTaskExists(_)&&this.startEdit(_,this._columnName);}},detachStore:function(){o.forEach(function(u){c.detachEvent(u);}),l.forEach(function(u){t.detachEvent(u);}),o=[],l=[],c=null,this.hide();},destructor:function(){this.detachStore(),this.detachAllEvents();}};return P(d,e),P(d,n),d;}};return P(i,e),P(i,n),i;}function $e(t,e,n,i,a){if(!t.start_date||!t.end_date)return null;var r=n.getItemTop(t.id),s=n.getItemHeight(t.id);if(r>e.y_end||r+s<e.y)return!1;var o=n.posFromDate(t.start_date),l=n.posFromDate(t.end_date),c=Math.min(o,l)-200,d=Math.max(o,l)+200;return!(c>e.x_end||d<e.x);}function bn(t){function e(r,s,o){if(t._isAllowedUnscheduledTask(r)||!t._isTaskInTimelineLimits(r))return;var l=s.getItemPosition(r),c=o,d=s.$getTemplates(),u=t.getTaskType(r.type),h=s.getBarHeight(r.id,u==c.types.milestone),_=0;u==c.types.milestone&&(_=(h-l.height)/2);var p=Math.floor((s.getItemHeight(r.id)-h)/2);const y=t.config.baselines&&r.baselines&&r.baselines.length,k=t.config.baselines&&(t.config.baselines.render_mode==\"separateRow\"||t.config.baselines.render_mode==\"individualRow\");if(y&&k&&r.bar_height!==\"full\"&&r.bar_height<r.row_height)if(u===c.types.milestone){let T=s.getBarHeight(r.id,!0),E=Math.sqrt(2*T*T);p=Math.floor((E-h)/2)+2;}else p=2;u==c.types.milestone&&(l.left-=Math.round(h/2),l.width=h);var b=document.createElement(\"div\"),g=Math.round(l.width);s.$config.item_attribute&&(b.setAttribute(s.$config.item_attribute,r.id),b.setAttribute(s.$config.bind+\"_id\",r.id)),c.show_progress&&u!=c.types.milestone&&function(T,E,C,D,M){var I=1*T.progress||0;C=Math.max(C,0);var A=document.createElement(\"div\"),N=Math.round(C*I);N=Math.min(C,N),A.style.width=N+\"px\",A.className=\"gantt_task_progress\",A.innerHTML=M.progress_text(T.start_date,T.end_date,T),D.rtl&&(A.style.position=\"absolute\",A.style.right=\"0px\");var L=document.createElement(\"div\");L.className=\"gantt_task_progress_wrapper\",L.appendChild(A),E.appendChild(L);const O=!t.isReadonly(T),G=t.ext.dragTimeline&&t.ext.dragTimeline._isDragInProgress();if(t.config.drag_progress&&(O||G)){var j=document.createElement(\"div\"),H=N;D.rtl&&(H=C-N),j.style.left=H+\"px\",j.className=\"gantt_task_progress_drag\",j.innerHTML=`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"9\" viewBox=\"0 0 12 9\" fill=\"none\">\n<path d=\"M5.58397 1.52543C5.78189 1.22856 6.21811 1.22856 6.41602 1.52543L10.5475 7.72265C10.769 8.05493 10.5308 8.5 10.1315 8.5L1.86852 8.5C1.46917 8.5 1.23097 8.05493 1.45249 7.72265L5.58397 1.52543Z\" fill=\"var(--dhx-gantt-progress-handle-background)\" stroke=\"var(--dhx-gantt-progress-handle-border)\"/>\n</svg>`,A.appendChild(j),E.appendChild(j);}}(r,b,g,c,d);var m=function(T,E,C){var D=document.createElement(\"div\");return t.getTaskType(T.type)!=t.config.types.milestone?D.innerHTML=C.task_text(T.start_date,T.end_date,T):t.getTaskType(T.type)==t.config.types.milestone&&E&&(D.style.height=D.style.width=E+\"px\"),D.className=\"gantt_task_content\",D;}(r,g,d);b.appendChild(m);var f=function(T,E,C,D){var M=D.$getConfig(),I=[T];E&&I.push(E);var A=t.getState(),N=t.getTask(C);if(t.getTaskType(N.type)==M.types.milestone?I.push(\"gantt_milestone\"):t.getTaskType(N.type)==M.types.project&&I.push(\"gantt_project\"),I.push(\"gantt_bar_\"+t.getTaskType(N.type)),t.isSummaryTask(N)&&I.push(\"gantt_dependent_task\"),t.isSplitTask(N)&&(M.open_split_tasks&&!N.$open||!M.open_split_tasks)&&I.push(\"gantt_split_parent\"),M.select_task&&t.isSelectedTask(C)&&I.push(\"gantt_selected\"),C==A.drag_id&&(I.push(\"gantt_drag_\"+A.drag_mode),A.touch_drag&&I.push(\"gantt_touch_\"+A.drag_mode)),A.link_source_id==C&&(I.push(\"gantt_link_source\"),A.link_from_start?I.push(\"gantt_link_from_start\"):I.push(\"gantt_link_from_end\")),A.link_target_id==C&&I.push(\"gantt_link_target\"),M.highlight_critical_path&&t.isCriticalTask&&t.isCriticalTask(N)&&I.push(\"gantt_critical_task\"),A.link_landing_area&&A.link_target_id&&A.link_source_id&&A.link_target_id!=A.link_source_id&&(A.link_target_id==C||A.link_source_id==C)){var L=A.link_source_id,O=A.link_from_start,G=A.link_to_start,j=\"\";j=t.isLinkAllowed(L,C,O,G)?G?\"link_start_allow\":\"link_finish_allow\":G?\"link_start_deny\":\"link_finish_deny\",I.push(j);}return I.join(\" \");}(\"gantt_task_line\",d.task_class(r.start_date,r.end_date,r),r.id,s);(r.color||r.progressColor||r.textColor)&&(f+=\" gantt_task_inline_color\"),l.width<20&&(f+=\" gantt_thin_task\"),b.className=f;var v=[\"left:\"+l.left+\"px\",\"top:\"+(p+l.top)+\"px\",\"height:\"+h+\"px\",\"line-height:\"+Math.max(h<30?h-2:h,0)+\"px\",\"width:\"+g+\"px\"];b.style.cssText=v.join(\";\"),r.color&&b.style.setProperty(\"--dhx-gantt-task-background\",r.color),r.textColor&&b.style.setProperty(\"--dhx-gantt-task-color\",r.textColor),r.progressColor&&b.style.setProperty(\"--dhx-gantt-task-progress-color\",r.progressColor);var x=function(T,E,C,D){var M=\"gantt_left \"+i(!E.rtl,T),I=null;return D&&(I={type:\"marginRight\",value:D}),n(T,C.leftside_text,M,I);}(r,c,d,_);x&&b.appendChild(x),x=function(T,E,C,D){var M=\"gantt_right \"+i(!!E.rtl,T),I=null;return D&&(I={type:\"marginLeft\",value:D}),n(T,C.rightside_text,M,I);}(r,c,d,_),x&&b.appendChild(x),t._waiAria.setTaskBarAttr(r,b);var $=t.getState();const w=!t.isReadonly(r),S=t.ext.dragTimeline&&t.ext.dragTimeline._isDragInProgress();return(w||S)&&(c.drag_resize&&!t.isSummaryTask(r)&&u!=c.types.milestone&&a(b,\"gantt_task_drag\",r,function(T){var E=document.createElement(\"div\");return E.className=T,E;},c),c.drag_links&&c.show_links&&a(b,\"gantt_link_control\",r,function(T){var E=document.createElement(\"div\");E.className=T,E.style.cssText=[\"height:\"+h+\"px\",\"line-height:\"+h+\"px\"].join(\";\");var C=document.createElement(\"div\");C.className=\"gantt_link_point\";var D=!1;return $.link_source_id&&c.touch&&(D=!0),C.style.display=D?\"block\":\"\",E.appendChild(C),E;},c,_)),b;}function n(r,s,o,l){if(!s)return null;var c=s(r.start_date,r.end_date,r);if(!c)return null;var d=document.createElement(\"div\");return d.className=\"gantt_side_content \"+o,d.innerHTML=c,l&&(d.style[l.type]=Math.abs(l.value)+\"px\"),d;}function i(r,s){var o=r?{$source:[t.config.links.start_to_start],$target:[t.config.links.start_to_start,t.config.links.finish_to_start]}:{$source:[t.config.links.finish_to_start,t.config.links.finish_to_finish],$target:[t.config.links.finish_to_finish]};for(var l in o)for(var c=s[l],d=0;d<c.length;d++)for(var u=t.getLink(c[d]),h=0;h<o[l].length;h++)if(u.type==o[l][h])return\"gantt_link_crossing\";return\"\";}function a(r,s,o,l,c,d){var u,h=t.getState();+o.start_date>=+h.min_date&&((u=l([s,c.rtl?\"task_right\":\"task_left\",\"task_start_date\"].join(\" \"))).setAttribute(\"data-bind-property\",\"start_date\"),d&&(u.style.marginLeft=d+\"px\"),r.appendChild(u)),+o.end_date<=+h.max_date&&((u=l([s,c.rtl?\"task_left\":\"task_right\",\"task_end_date\"].join(\" \"))).setAttribute(\"data-bind-property\",\"end_date\"),d&&(u.style.marginRight=d+\"px\"),r.appendChild(u));}return function(r,s,o){var l=(o=s.$getConfig()).type_renderers[t.getTaskType(r.type)],c=e;return l?l.call(t,r,function(d){return c.call(t,d,s,o);},s):c.call(t,r,s,o);};}function Ue(t){return{render:bn(t),update:null,isInViewPort:$e,getVisibleRange:ft};}function Ct(){return console.error(\"You are trying to use a Pro feature that is not available in the GPL version.\"),{render:function(){},isInViewPort:function(){},getVisibleRange:function(){}};}function qe(t,e,n){return{top:e.getItemTop(t.id),height:e.getItemHeight(t.id),left:0,right:1/0};}function jt(t,e){var n=0,i=t.left.length-1;if(e)for(var a=0;a<t.left.length;a++){var r=t.left[a];if(r<e.x&&(n=a),r>e.x_end){i=a;break;}}return{start:n,end:i};}function oe(t,e,n,i){var a=e.width[t];if(a<=0)return!1;if(!i.config.smart_rendering||Nt(i))return!0;var r=e.left[t]-a,s=e.left[t]+a;return r<=n.x_end&&s>=n.x;}function Aa(t,e){var n=e.config.timeline_placeholder;if(t=t||[],n&&t.filter(l=>l.id===\"timeline_placeholder_task\").length===0){var i=e.getState(),a=null,r=i.min_date,s=i.max_date;t.length&&(a=t[t.length-1].id);var o={start_date:r,end_date:s,row_height:n.height||0,id:\"timeline_placeholder_task\",unscheduled:!0,lastTaskId:a,calendar_id:n.calendar||\"global\",$source:[],$target:[]};t.push(o);}}function Ia(t){var e={current_pos:null,dirs:{left:\"left\",right:\"right\",up:\"up\",down:\"down\"},path:[],clear:function(){this.current_pos=null,this.path=[];},point:function(a){this.current_pos=t.copy(a);},get_lines:function(a){this.clear(),this.point(a[0]);for(var r=1;r<a.length;r++)this.line_to(a[r]);return this.get_path();},line_to:function(a){var r=t.copy(a),s=this.current_pos,o=this._get_line(s,r);this.path.push(o),this.current_pos=r;},get_path:function(){return this.path;},get_wrapper_sizes:function(a,r,s){var o,l=r.$getConfig().link_wrapper_width,c=a.y-l/2;switch(a.direction){case this.dirs.left:o={top:c,height:l,lineHeight:l,left:a.x-a.size-l/2,width:a.size+l};break;case this.dirs.right:o={top:c,lineHeight:l,height:l,left:a.x-l/2,width:a.size+l};break;case this.dirs.up:o={top:c-a.size,lineHeight:a.size+l,height:a.size+l,left:a.x-l/2,width:l};break;case this.dirs.down:o={top:c,lineHeight:a.size+l,height:a.size+l,left:a.x-l/2,width:l};}return o;},get_line_sizes:function(a,r){var s,o=r.$getConfig(),l=o.link_line_width,c=o.link_wrapper_width,d=a.size+l;switch(a.direction){case this.dirs.left:case this.dirs.right:s={height:l,width:d,marginTop:(c-l)/2,marginLeft:(c-l)/2};break;case this.dirs.up:case this.dirs.down:s={height:d,width:l,marginTop:(c-l)/2,marginLeft:(c-l)/2};}return s;},render_line:function(a,r,s,o){var l=this.get_wrapper_sizes(a,s,o),c=document.createElement(\"div\");c.style.cssText=[\"top:\"+l.top+\"px\",\"left:\"+l.left+\"px\",\"height:\"+l.height+\"px\",\"width:\"+l.width+\"px\"].join(\";\"),c.className=\"gantt_line_wrapper\";var d=this.get_line_sizes(a,s),u=document.createElement(\"div\");return u.style.cssText=[\"height:\"+d.height+\"px\",\"width:\"+d.width+\"px\",\"margin-top:\"+d.marginTop+\"px\",\"margin-left:\"+d.marginLeft+\"px\"].join(\";\"),u.className=\"gantt_link_line_\"+a.direction,c.appendChild(u),c;},render_corner:function(a,r){const s=a.radius,o=r.$getConfig(),l=o.link_line_width||2,c=document.createElement(\"div\");let d,u;return c.classList.add(\"gantt_link_corner\"),c.classList.add(`gantt_link_corner_${a.direction.from}_${a.direction.to}`),c.style.width=`${s}px`,c.style.height=`${s}px`,a.direction.from===\"right\"&&a.direction.to===\"down\"?(d=\"Right\",u=\"Top\",c.style.left=a.x-o.link_line_width/2+\"px\",c.style.top=`${a.y}px`):a.direction.from===\"down\"&&a.direction.to===\"right\"?(d=\"Left\",u=\"Bottom\",c.style.left=a.x-o.link_line_width/2+\"px\",c.style.top=`${a.y}px`):a.direction.from===\"right\"&&a.direction.to===\"up\"?(d=\"Right\",u=\"Bottom\",c.style.left=a.x-o.link_line_width/2+\"px\",c.style.top=a.y-s+\"px\"):a.direction.from===\"up\"&&a.direction.to===\"right\"?(d=\"Left\",u=\"Top\",c.style.left=a.x-o.link_line_width/2+\"px\",c.style.top=a.y-s+\"px\"):a.direction.from===\"left\"&&a.direction.to===\"down\"?(d=\"Left\",u=\"Top\",c.style.left=a.x-s-o.link_line_width/2+\"px\",c.style.top=`${a.y}px`):a.direction.from===\"down\"&&a.direction.to===\"left\"?(d=\"Right\",u=\"Bottom\",c.style.left=a.x-s-o.link_line_width/2+\"px\",c.style.top=`${a.y}px`):a.direction.from===\"left\"&&a.direction.to===\"up\"?(d=\"Left\",u=\"Bottom\",c.style.left=a.x-s-o.link_line_width/2+\"px\",c.style.top=a.y-s+\"px\"):a.direction.from===\"up\"&&a.direction.to===\"left\"&&(d=\"Right\",u=\"Top\",c.style.left=a.x-s-o.link_line_width/2+\"px\",c.style.top=a.y-s+\"px\"),c.style[`border${u}Width`]=`${l}px`,c.style[`border${d}Width`]=`${l}px`,c.style[`border${d}Style`]=\"solid\",c.style[`border${u}Style`]=\"solid\",c.style[`border${u}${d}Radius`]=`${s}px`,c;},render_arrow(a,r){var s=document.createElement(\"div\"),o=a.y,l=a.x,c=r.link_arrow_size;s.style.setProperty(\"--dhx-gantt-icon-size\",`${c}px`);var d=\"gantt_link_arrow gantt_link_arrow_\"+a.direction;return s.style.top=o+\"px\",s.style.left=l+\"px\",s.className=d,s;},_get_line:function(a,r){var s=this.get_direction(a,r),o={x:a.x,y:a.y,direction:this.get_direction(a,r)};return s==this.dirs.left||s==this.dirs.right?o.size=Math.abs(a.x-r.x):o.size=Math.abs(a.y-r.y),o;},get_direction:function(a,r){return r.x<a.x?this.dirs.left:r.x>a.x?this.dirs.right:r.y>a.y?this.dirs.down:this.dirs.up;}},n={path:[],clear:function(){this.path=[];},current:function(){return this.path[this.path.length-1];},point:function(a){return a?(this.path.push(t.copy(a)),a):this.current();},point_to:function(a,r,s){s=s?{x:s.x,y:s.y}:t.copy(this.point());var o=e.dirs;switch(a){case o.left:s.x-=r;break;case o.right:s.x+=r;break;case o.up:s.y-=r;break;case o.down:s.y+=r;}return this.point(s);},get_points:function(a,r,s,o){var l=this.get_endpoint(a,r,s,o),c=t.config,d=l.e_y-l.y,u=l.e_x-l.x,h=e.dirs,_=r.getItemHeight(a.source);this.clear(),this.point({x:l.x,y:l.y});var p=2*c.link_arrow_size,y=this.get_line_type(a,r.$getConfig()),k=l.e_x>l.x;if(y.from_start&&y.to_start)this.point_to(h.left,p),k?(this.point_to(h.down,d),this.point_to(h.right,u)):(this.point_to(h.right,u),this.point_to(h.down,d)),this.point_to(h.right,p);else if(!y.from_start&&y.to_start){if(d!==0&&(k=l.e_x>l.x+2*p),this.point_to(h.right,p),k)u-=p,this.point_to(h.down,d),this.point_to(h.right,u);else{u-=2*p;var b=d>0?1:-1;this.point_to(h.down,b*(_/2)),this.point_to(h.right,u),this.point_to(h.down,b*(Math.abs(d)-_/2)),this.point_to(h.right,p);}}else y.from_start||y.to_start?y.from_start&&!y.to_start&&(d!==0&&(k=l.e_x>l.x-2*p),this.point_to(h.left,p),k?(u+=2*p,b=d>0?1:-1,this.point_to(h.down,b*(_/2)),this.point_to(h.right,u),this.point_to(h.down,b*(Math.abs(d)-_/2)),this.point_to(h.left,p)):(u+=p,this.point_to(h.down,d),this.point_to(h.right,u))):(this.point_to(h.right,p),k?(this.point_to(h.right,u),this.point_to(h.down,d)):(this.point_to(h.down,d),this.point_to(h.right,u)),this.point_to(h.left,p));return this.path;},get_line_type:function(a,r){var s=r.links,o=!1,l=!1;return a.type==s.start_to_start?o=l=!0:a.type==s.finish_to_finish?o=l=!1:a.type==s.finish_to_start?(o=!1,l=!0):a.type==s.start_to_finish?(o=!0,l=!1):t.assert(!1,\"Invalid link type\"),r.rtl&&(o=!o,l=!l),{from_start:o,to_start:l};},get_endpoint:function(a,r,s,o){var l=r.$getConfig(),c=this.get_line_type(a,l),d=c.from_start,u=c.to_start,h=i(s,r,l),_=i(o,r,l);return{x:d?h.left:h.left+h.width,e_x:u?_.left:_.left+_.width,y:h.top+h.rowHeight/2-1,e_y:_.top+_.rowHeight/2-1};}};function i(a,r,s){var o=r.getItemPosition(a);let l=function(p,y,k,b){let g=b||y.$task_data.scrollHeight,m=!1,f=!1;return p.eachParent(function(v){if($t(v)){f=!0;const x=y.getItemPosition(v).rowHeight;x<g&&(g=x,m=!0);}},k.id),{maxHeight:g,shrinkHeight:m,splitChild:f};}(t,r,a),c=l.maxHeight,d=l.splitChild;const u=t.config.baselines&&(t.config.baselines.render_mode==\"separateRow\"||t.config.baselines.render_mode==\"individualRow\")&&a.baselines&&a.baselines.length;let h;l.shrinkHeight&&(o.rowHeight=c);let _=t.getTaskType(a.type)==s.types.milestone;if(_){let p=r.getBarHeight(a.id,!0);h=Math.sqrt(2*p*p),l.shrinkHeight&&c<p&&(p=c,h=c),o.left-=h/2,o.width=h;}if(d){if(c>=o.height){const p=function(y,k){let b=!1;return y.eachTask(function(g){b||(b=hn(y,g));},k),b;}(t,a.parent);u||p?_?(o.rowHeight=o.height+4,o.left+=(o.width-o.rowHeight+4)/2,o.width=o.rowHeight-3):o.rowHeight=o.height+6:_&&(o.left+=(h-o.height)/2);}else o.rowHeight=c+2,_&&(o.left+=(o.width-o.rowHeight+4)/2,o.width=o.rowHeight-3);}else u&&(o.rowHeight=o.height+4);return o;}return{render:function(a,r,s){var o=t.getTask(a.source);if(o.hide_bar)return;var l=t.getTask(a.target);if(l.hide_bar)return;var c=n.get_endpoint(a,r,o,l),d=c.e_y-c.y;if(!(c.e_x-c.x)&&!d)return null;var u=n.get_points(a,r,o,l);const h=function(k,b){const g=b.link_radius||4,m=b.link_arrow_size||6,f=[];for(let x=0;x<k.length;x++){const $=k[x],w=k[x+1];if(!w||b.link_radius<=1)f.push({type:\"line\",data:$});else if($.direction!==w.direction){if($.size<g||w.size<g){f.push({type:\"line\",data:$});continue;}$.size-=g,f.push({type:\"line\",data:$});let S=$.x,T=$.y-b.link_line_width/2;switch($.direction){case\"right\":S+=$.size;break;case\"left\":S-=$.size;break;case\"down\":T+=$.size;break;case\"up\":T-=$.size;}const E={x:S,y:T,direction:{from:$.direction,to:w.direction},radius:g};switch(f.push({type:\"corner\",data:E}),w.direction){case\"right\":w.x+=g,w.size-=g;break;case\"left\":w.x-=g,w.size-=g;break;case\"down\":w.y+=g,w.size-=g;break;case\"up\":w.y-=g,w.size-=g;}}else f.push({type:\"line\",data:$});}const v=k[k.length-1];if(v.direction===\"right\"||v.direction===\"left\"){v.size-=3*m/4;let x=v.direction===\"right\"?v.x+v.size:v.x-v.size-m/2,$=v.y-b.link_line_width/2-m/2+1;v.direction===\"left\"?($-=1,x-=2):x-=1;const w={x,y:$,size:m,direction:v.direction};f.push({type:\"line\",data:v}),f.push({type:\"arrow\",data:w});}else f.push({type:\"line\",data:v});return f;}(e.get_lines(u,r).filter(k=>k.size>0),s),_=function(k,b,g,m){const f=document.createElement(\"div\");return k.forEach(v=>{let x;v.type===\"line\"?x=e.render_line(v.data,null,b,g.source):v.type===\"corner\"?x=e.render_corner(v.data,b):v.type===\"arrow\"&&(x=e.render_arrow(v.data,m)),f.appendChild(x);}),f;}(h,r,a,s);var p=\"gantt_task_link\";a.color&&(p+=\" gantt_link_inline_color\");var y=t.templates.link_class?t.templates.link_class(a):\"\";return y&&(p+=\" \"+y),s.highlight_critical_path&&t.isCriticalLink&&t.isCriticalLink(a)&&(p+=\" gantt_critical_link\"),_.className=p,r.$config.link_attribute&&(_.setAttribute(r.$config.link_attribute,a.id),_.setAttribute(\"link_id\",a.id)),a.color&&_.style.setProperty(\"--dhx-gantt-link-background\",a.color),t._waiAria.linkAttr(a,_),_;},update:null,isInViewPort:vn,getVisibleRange:mn()};}function Ma(t,e,n,i,a){if(a.$ui.getView(\"grid\")&&(a.config.keyboard_navigation&&a.getSelectedId()||a.ext.inlineEditors&&a.ext.inlineEditors.getState().id))return!!t.$expanded_branch;var r=n.getItemTop(t.id),s=n.getItemHeight(t.id);return!(r>e.y_end||r+s<e.y);}function Na(t){let e={};return t.$data.tasksStore.attachEvent(\"onStoreUpdated\",function(){e={};}),function(n,i,a,r){const s=n.id+\"_\"+i+\"_\"+a.unit+\"_\"+a.step;let o;return o=e[s]?e[s]:e[s]=function(l,c,d,u){let h,_=!1,p={};t.config.process_resource_assignments&&c===t.config.resource_property?(h=l.$role==\"task\"?t.getResourceAssignments(l.$resource_id,l.$task_id):t.getResourceAssignments(l.id),_=!0):h=l.$role==\"task\"?[]:t.getTaskBy(c,l.id),p=function(w,S,T){const E=S.unit,C=S.step,D={},M={};for(let I=0;I<w.length;I++){const A=w[I];let N=A;if(T&&(N=t.getTask(A.task_id)),N.unscheduled)continue;let L=A.start_date||N.start_date,O=A.end_date||N.end_date;T&&(A.start_date&&(L=new Date(Math.max(A.start_date.valueOf(),N.start_date.valueOf()))),A.end_date&&(O=new Date(Math.min(A.end_date.valueOf(),N.end_date.valueOf()))),A.mode&&A.mode==\"fixedDates\"&&(L=A.start_date,O=A.end_date));let G=At(S.trace_x,L.valueOf()),j=new Date(S.trace_x[G]||t.date[E+\"_start\"](new Date(L))),H=new Date(Math.min(L.valueOf(),j.valueOf())),tt=t.config.work_time?t.getTaskCalendar(N):t;for(M[tt.id]={};H<O;){const J=M[tt.id],B=H.valueOf();H=t.date.add(H,C,E),J[B]!==!1&&(D[B]||(D[B]={tasks:[],assignments:[]}),D[B].tasks.push(N),T&&D[B].assignments.push(A));}}return D;}(h,d,_);const y=d.unit,k=d.step,b=[];let g,m,f,v,x;const $=u.$getConfig();for(let w=0;w<d.trace_x.length;w++)g=new Date(d.trace_x[w]),m=t.date.add(g,k,y),x=p[g.valueOf()]||{},f=x.tasks||[],v=x.assignments||[],f.length||$.resource_render_empty_cells?b.push({start_date:g,end_date:m,tasks:f,assignments:v}):b.push(null);return b;}(n,i,a,r),o;};}const La={init:function(t,e){var n=t.$services.getService(\"dnd\");if(e.$config.bind&&t.getDatastore(e.$config.bind)){var i=new n(e.$grid_data,{updates_per_second:60});t.defined(e.$getConfig().dnd_sensitivity)&&(i.config.sensitivity=e.$getConfig().dnd_sensitivity),i.attachEvent(\"onBeforeDragStart\",t.bind(function(o,l){var c=a(l);if(!c||(t.hideQuickInfo&&t.hideQuickInfo(),dt(l.target,\".gantt_grid_editor_placeholder\")))return!1;var d=c.getAttribute(e.$config.item_attribute);if(s(d))return!1;var u=r().getItem(d);return!t.isReadonly(u)&&(i.config.initial_open_state=u.$open,!!t.callEvent(\"onRowDragStart\",[d,l.target||l.srcElement,l])&&void 0);},t)),i.attachEvent(\"onAfterDragStart\",t.bind(function(o,l){var c=a(l);i.config.marker.innerHTML=c.outerHTML;var d=i.config.marker.firstChild;d&&(d.style.position=\"static\"),i.config.id=c.getAttribute(e.$config.item_attribute);var u=r(),h=u.getItem(i.config.id);i.config.index=u.getBranchIndex(i.config.id),i.config.parent=h.parent,h.$open=!1,h.$transparent=!0,this.refreshData();},t)),i.lastTaskOfLevel=function(o){for(var l=null,c=r().getItems(),d=0,u=c.length;d<u;d++)c[d].$level==o&&(l=c[d]);return l?l.id:null;},i._getGridPos=t.bind(function(o){var l=V(e.$grid_data),c=l.x+e.$grid.scrollLeft,d=o.pos.y-10,u=e.getItemHeight(i.config.id);d<l.y&&(d=l.y);var h=e.getTotalHeight();d>l.y+h-u&&(d=l.y+h-u);const _=l.y+l.height;return d>_-u&&(d=_-u),l.x=c,l.y=d,l;},t),i._getTargetY=t.bind(function(o){var l=V(e.$grid_data),c=e.$state.scrollTop||0,d=t.$grid_data.getBoundingClientRect().height+c,u=o.pageY-l.y+c;return u>d?u=d:u<c&&(u=c),u;},t),i._getTaskByY=t.bind(function(o,l){var c=r();o=o||0;var d=e.getItemIndexByTopPosition(o);return(d=l<d?d-1:d)>c.countVisible()-1?null:c.getIdByIndex(d);},t),i.attachEvent(\"onDragMove\",t.bind(function(o,l){var c=t.$grid_data.getBoundingClientRect(),d=c.height+c.y+(e.$state.scrollTop||0)+window.scrollY,u=i.config,h=i._getGridPos(l);t._waiAria.reorderMarkerAttr(u.marker);var _=e.$getConfig(),p=r();h.y<d?u.marker.style.top=h.y+\"px\":u.marker.style.top=d+\"px\",u.marker.style.left=h.x+10+\"px\";const y=V(t.$root);h.width>y.width&&(u.marker.style.width=y.width-10-2+\"px\",u.marker.style.overflow=\"hidden\");var k=p.getItem(i.config.id),b=i._getTargetY(l),g=i._getTaskByY(b,p.getIndexById(k.id));function m(D,M){return!p.isChildOf(f.id,M.id)&&(D.$level==M.$level||_.order_branch_free);}if(p.exists(g)||(g=i.lastTaskOfLevel(_.order_branch_free?k.$level:0))==i.config.id&&(g=null),p.exists(g)){var f=p.getItem(g),v=e.getItemTop(f.id),x=e.getItemHeight(f.id);if(v+x/2<b){var $=p.getIndexById(f.id),w=p.getNext(f.id),S=p.getItem(w);if(s(w)){var T=p.getPrev(S.id);S=p.getItem(T);}if(S){if(S.id==k.id)return _.order_branch_free&&p.isChildOf(k.id,f.id)&&p.getChildren(f.id).length==1?void p.move(k.id,p.getBranchIndex(f.id)+1,p.getParent(f.id)):void 0;f=S;}else if(w=p.getIdByIndex($),S=p.getItem(w),s(w)&&(T=p.getPrev(S.id),S=p.getItem(T)),m(S,k)&&S.id!=k.id)return void p.move(k.id,-1,p.getParent(S.id));}else if(_.order_branch_free&&f.id!=k.id&&m(f,k)&&!s(f.id)){if(!p.hasChild(f.id))return f.$open=!0,void p.move(k.id,-1,f.id);if(p.getIndexById(f.id)||x/3<b)return;}$=p.getIndexById(f.id),T=p.getIdByIndex($-1);for(var E=p.getItem(T),C=1;(!E||E.id==f.id)&&$-C>=0;)T=p.getIdByIndex($-C),E=p.getItem(T),C++;if(k.id==f.id||s(f.id))return;m(f,k)&&k.id!=f.id?p.move(k.id,0,0,f.id):f.$level!=k.$level-1||p.getChildren(f.id).length?E&&m(E,k)&&k.id!=E.id&&p.move(k.id,-1,p.getParent(E.id)):p.move(k.id,0,f.id);}return!0;},t)),i.attachEvent(\"onDragEnd\",t.bind(function(){var o=r(),l=o.getItem(i.config.id);l.$transparent=!1,l.$open=i.config.initial_open_state,this.callEvent(\"onBeforeRowDragEnd\",[i.config.id,i.config.parent,i.config.index])===!1?(o.move(i.config.id,i.config.index,i.config.parent),l.$drop_target=null):this.callEvent(\"onRowDragEnd\",[i.config.id,l.$drop_target]),t.render(),this.refreshData();},t));}function a(o){return nt(o,e.$config.item_attribute);}function r(){return t.getDatastore(e.$config.bind);}function s(o){return Rt(o,t,r());}}},K={createDropTargetObject:function(t){var e={targetParent:null,targetIndex:0,targetId:null,child:!1,nextSibling:!1,prevSibling:!1};return t&&P(e,t,!0),e;},nextSiblingTarget:function(t,e,n){var i=this.createDropTargetObject();return i.targetId=e,i.nextSibling=!0,i.targetParent=n.getParent(i.targetId),i.targetIndex=n.getBranchIndex(i.targetId),(n.getParent(t)!=i.targetParent||i.targetIndex<n.getBranchIndex(t))&&(i.targetIndex+=1),i;},prevSiblingTarget:function(t,e,n){var i=this.createDropTargetObject();return i.targetId=e,i.prevSibling=!0,i.targetParent=n.getParent(i.targetId),i.targetIndex=n.getBranchIndex(i.targetId),n.getParent(t)==i.targetParent&&i.targetIndex>n.getBranchIndex(t)&&(i.targetIndex-=1),i;},firstChildTarget:function(t,e,n){var i=this.createDropTargetObject();return i.targetId=e,i.targetParent=i.targetId,i.targetIndex=0,i.child=!0,i;},lastChildTarget:function(t,e,n){var i=n.getChildren(e),a=this.createDropTargetObject();return a.targetId=i[i.length-1],a.targetParent=e,a.targetIndex=i.length,a.nextSibling=!0,a;}};function xn(t,e,n,i,a){for(var r=e;i.exists(r);){var s=i.calculateItemLevel(i.getItem(r));if((s===n||s===n-1)&&i.getBranchIndex(r)>-1)break;r=a?i.getPrev(r):i.getNext(r);}return i.exists(r)?i.calculateItemLevel(i.getItem(r))===n?a?K.nextSiblingTarget(t,r,i):K.prevSiblingTarget(t,r,i):K.firstChildTarget(t,r,i):null;}function le(t,e,n,i){return xn(t,e,n,i,!0);}function Ge(t,e,n,i){return xn(t,e,n,i,!1);}function Ye(t,e,n,i,a,r){var s;if(e!==a.$getRootId()){var o=a.getItem(e),l=a.calculateItemLevel(o);if(l===r){var c=a.getPrevSibling(e);n<0.5&&!c?s=K.prevSiblingTarget(t,e,a):(n<0.5&&(e=c),s=K.nextSiblingTarget(t,e,a));}else if(l>r)a.eachParent(function(p){a.calculateItemLevel(p)===r&&(e=p.id);},o),s=le(t,e,r,a);else{var d=le(t,e,r,a),u=Ge(t,e,r,a);s=n<0.5?d:u;}}else{var h=a.$getRootId(),_=a.getChildren(h);s=K.createDropTargetObject(),s=_.length&&i>=0?le(t,function(p){for(var y=p.getNext();p.exists(y);){var k=p.getNext(y);if(!p.exists(k))return y;y=k;}return null;}(a),r,a):Ge(t,h,r,a);}return s;}function Je(t,e){var n=V(e.$grid_data);return t.x+=n.x+e.$grid.scrollLeft,t.y+=n.y-e.$grid_data.scrollTop,t;}function de(t,e,n=0){const i=V(t.$root);return e>i.width&&(e=i.width-n-2),e;}const Ke={removeLineHighlight:function(t){t.markerLine&&t.markerLine.parentNode&&t.markerLine.parentNode.removeChild(t.markerLine),t.markerLine=null;},highlightPosition:function(t,e,n){var i=function(r,s){var o=V(s.$grid_data),l=rt(r,s.$grid_data),c=o.x+s.$grid.scrollLeft,d=l.y-10,u=s.getItemHeight(r.targetId);d<o.y&&(d=o.y);var h=s.getTotalHeight();return d>o.y+h-u&&(d=o.y+h-u),o.x=c,o.y=d,o.width=de(s.$gantt,o.width,9),o;}(t,n);e.marker.style.left=i.x+9+\"px\",e.marker.style.width=i.width+\"px\",e.marker.style.overflow=\"hidden\";var a=e.markerLine;a||((a=document.createElement(\"div\")).className=\"gantt_drag_marker gantt_grid_dnd_marker\",a.innerHTML=\"<div class='gantt_grid_dnd_marker_line'></div>\",a.style.pointerEvents=\"none\"),t.child?function(r,s,o){var l=r.targetParent,c=Je({x:0,y:o.getItemTop(l)},o),d=o.$grid_data.getBoundingClientRect().bottom+window.scrollY;let u=de(o.$gantt,o.$grid_data.offsetWidth);s.innerHTML=\"<div class='gantt_grid_dnd_marker_folder'></div>\",s.style.width=u+\"px\",s.style.top=c.y+\"px\",s.style.left=c.x+\"px\",s.style.height=o.getItemHeight(l)+\"px\",c.y>d&&(s.style.top=d+\"px\");}(t,a,n):function(r,s,o){var l=function(u,h){var _=h.$config.rowStore,p={x:0,y:0},y=h.$grid_data.querySelector(\".gantt_tree_indent\"),k=15,b=0;y&&(k=y.offsetWidth);var g=40;if(u.targetId!==_.$getRootId()){var m=h.getItemTop(u.targetId),f=h.getItemHeight(u.targetId);if(b=_.exists(u.targetId)?_.calculateItemLevel(_.getItem(u.targetId)):0,u.prevSibling)p.y=m;else if(u.nextSibling){var v=0;_.eachItem(function(x){_.getIndexById(x.id)!==-1&&v++;},u.targetId),p.y=m+f+v*f;}else p.y=m+f,b+=1;}return p.x=g+b*k,p.width=de(h.$gantt,Math.max(h.$grid_data.offsetWidth-p.x,0),p.x),Je(p,h);}(r,o),c=o.$grid_data.getBoundingClientRect().bottom+window.scrollY;s.innerHTML=\"<div class='gantt_grid_dnd_marker_line'></div>\",s.style.left=l.x+\"px\",s.style.height=\"4px\";var d=l.y-2;s.style.top=d+\"px\",s.style.width=l.width+\"px\",d>c&&(s.style.top=c+\"px\");}(t,a,n),e.markerLine||(document.body.appendChild(a),e.markerLine=a);}},Pa={init:function(t,e){var n=t.$services.getService(\"dnd\");if(e.$config.bind&&t.getDatastore(e.$config.bind)){var i=new n(e.$grid_data,{updates_per_second:60});t.defined(e.$getConfig().dnd_sensitivity)&&(i.config.sensitivity=e.$getConfig().dnd_sensitivity),i.attachEvent(\"onBeforeDragStart\",t.bind(function(o,l){var c=a(l);if(!c||(t.hideQuickInfo&&t.hideQuickInfo(),dt(l.target,\".gantt_grid_editor_placeholder\")))return!1;var d=c.getAttribute(e.$config.item_attribute),u=e.$config.rowStore.getItem(d);return!t.isReadonly(u)&&!r(d)&&(i.config.initial_open_state=u.$open,!!t.callEvent(\"onRowDragStart\",[d,l.target||l.srcElement,l])&&void 0);},t)),i.attachEvent(\"onAfterDragStart\",t.bind(function(o,l){var c=a(l);i.config.marker.innerHTML=c.outerHTML;var d=i.config.marker.firstChild;d&&(i.config.marker.style.opacity=0.4,d.style.position=\"static\",d.style.pointerEvents=\"none\"),i.config.id=c.getAttribute(e.$config.item_attribute);var u=e.$config.rowStore,h=u.getItem(i.config.id);i.config.level=u.calculateItemLevel(h),i.config.drop_target=K.createDropTargetObject({targetParent:u.getParent(h.id),targetIndex:u.getBranchIndex(h.id),targetId:h.id,nextSibling:!0}),h.$open=!1,h.$transparent=!0,this.refreshData();},t)),i.attachEvent(\"onDragMove\",t.bind(function(o,l){var c=s(l);return c&&t.callEvent(\"onBeforeRowDragMove\",[i.config.id,c.targetParent,c.targetIndex])!==!1||(c=K.createDropTargetObject(i.config.drop_target)),Ke.highlightPosition(c,i.config,e),i.config.drop_target=c,t._waiAria.reorderMarkerAttr(i.config.marker),this.callEvent(\"onRowDragMove\",[i.config.id,c.targetParent,c.targetIndex]),!0;},t)),i.attachEvent(\"onDragEnd\",t.bind(function(){var o=e.$config.rowStore,l=o.getItem(i.config.id);Ke.removeLineHighlight(i.config),l.$transparent=!1,l.$open=i.config.initial_open_state;var c=i.config.drop_target;this.callEvent(\"onBeforeRowDragEnd\",[i.config.id,c.targetParent,c.targetIndex])===!1?l.$drop_target=null:(o.move(i.config.id,c.targetIndex,c.targetParent),t.render(),this.callEvent(\"onRowDragEnd\",[i.config.id,c.targetParent,c.targetIndex])),o.refresh(l.id);},t));}function a(o){return nt(o,e.$config.item_attribute);}function r(o){return Rt(o,t,t.getDatastore(e.$config.bind));}function s(o){var l,c=function(p){var y=rt(p,e.$grid_data).y,k=e.$config.rowStore;document.doctype||(y+=window.scrollY),y=y||0;var b=e.$state.scrollTop||0,g=t.$grid_data.getBoundingClientRect().height+b+window.scrollY,m=b,f=e.getItemIndexByTopPosition(e.$state.scrollTop);if(k.exists(f)||(f=k.countVisible()-1),f<0)return k.$getRootId();var v=k.getIdByIndex(f),x=e.$state.scrollTop/e.getItemHeight(v),$=x-Math.floor(x);$>0.1&&$<0.9&&(g-=e.getItemHeight(v)*$,m+=e.getItemHeight(v)*(1-$));const w=V(e.$grid_data),S=w.y+w.height,T=i.config.marker.offsetHeight;y+T+window.scrollY>=g&&(i.config.marker.style.top=S-T+\"px\"),y>=g?y=g:y<=m&&(y=m,i.config.marker.style.top=w.y+\"px\");var E=e.getItemIndexByTopPosition(y);if(E>k.countVisible()-1||E<0)return k.$getRootId();var C=k.getIdByIndex(E);return r(C)?k.getPrevSibling(C):k.getIdByIndex(E);}(o),d=null,u=e.$config.rowStore,h=!e.$getConfig().order_branch_free,_=rt(o,e.$grid_data).y;return document.doctype||(_+=window.scrollY),c!==u.$getRootId()&&(d=(_-e.getItemTop(c))/e.getItemHeight(c)),h?(l=Ye(i.config.id,c,d,_,u,i.config.level))&&l.targetParent&&r(l.targetParent)&&(c=u.getPrevSibling(l.targetParent),l=Ye(i.config.id,c,d,_,u,i.config.level)):l=function(p,y,k,b,g){var m;if(y!==g.$getRootId())m=k<0.25?K.prevSiblingTarget(p,y,g):!(k>0.6)||g.hasChild(y)&&g.getItem(y).$open?K.firstChildTarget(p,y,g):K.nextSiblingTarget(p,y,g);else{var f=g.$getRootId();m=g.hasChild(f)&&b>=0?K.lastChildTarget(p,f,g):K.firstChildTarget(p,f,g);}return m;}(i.config.id,c,d,_,u),l;}}};var Ra=function(t){return{onCreated:function(e){e.$config=P(e.$config,{bind:\"task\"}),e.$config.id==\"grid\"&&(this.extendGantt(e),t.ext.inlineEditors=t.ext._inlineEditors.createEditors(e),t.ext.inlineEditors.init()),this._mouseDelegates=Te(t);},onInitialized:function(e){var n=e.$getConfig();n.order_branch&&(n.order_branch==\"marker\"?Pa.init(e.$gantt,e):La.init(e.$gantt,e)),this.initEvents(e,t),e.$config.id==\"grid\"&&this.extendDom(e);},onDestroyed:function(e){e.$config.id==\"grid\"&&t.ext.inlineEditors.detachStore(),this.clearEvents(e,t);},initEvents:function(e,n){this._mouseDelegates.delegate(\"click\",\"gantt_row\",n.bind(function(i,a,r){const s=e.$getConfig();if(a!==null){const o=this.getTask(a);if(s.scroll_on_click){const l=!n._is_icon_open_click(i),c=n.$ui.getView(\"timeline\");l&&c&&this.showDate(o.start_date);}n.callEvent(\"onTaskRowClick\",[a,r]);}},n),e.$grid),this._mouseDelegates.delegate(\"click\",\"gantt_grid_head_cell\",n.bind(function(i,a,r){var s=r.getAttribute(\"data-column-id\");if(n.callEvent(\"onGridHeaderClick\",[s,i])){var o=e.$getConfig();if(s!=\"add\"){if(o.sort&&s){for(var l,c=s,d=0;d<o.columns.length;d++)if(o.columns[d].name==s){l=o.columns[d];break;}if(l&&l.sort!==void 0&&l.sort!==!0&&!(c=l.sort))return;var u=this._sort&&this._sort.direction&&this._sort.name==s?this._sort.direction:\"desc\";u=u==\"desc\"?\"asc\":\"desc\",this._sort={name:s,direction:u},this.sort(c,u==\"desc\");}}else n.$services.getService(\"mouseEvents\").callHandler(\"click\",\"gantt_add\",e.$grid,[i,o.root_id]);}},n),e.$grid),this._mouseDelegates.delegate(\"click\",\"gantt_add\",n.bind(function(i,a,r){if(!e.$getConfig().readonly)return this.createTask({},a||n.config.root_id),!1;},n),e.$grid);},clearEvents:function(e,n){this._mouseDelegates.destructor(),this._mouseDelegates=null;},extendDom:function(e){t.$grid=e.$grid,t.$grid_scale=e.$grid_scale,t.$grid_data=e.$grid_data;},extendGantt:function(e){t.getGridColumns=t.bind(e.getGridColumns,e),e.attachEvent(\"onColumnResizeStart\",function(){return t.callEvent(\"onColumnResizeStart\",arguments);}),e.attachEvent(\"onColumnResize\",function(){return t.callEvent(\"onColumnResize\",arguments);}),e.attachEvent(\"onColumnResizeEnd\",function(){return t.callEvent(\"onColumnResizeEnd\",arguments);}),e.attachEvent(\"onColumnResizeComplete\",function(n,i){t.config.grid_width=i;}),e.attachEvent(\"onBeforeRowResize\",function(){return t.callEvent(\"onBeforeRowResize\",arguments);}),e.attachEvent(\"onRowResize\",function(){return t.callEvent(\"onRowResize\",arguments);}),e.attachEvent(\"onBeforeRowResizeEnd\",function(){return t.callEvent(\"onBeforeRowResizeEnd\",arguments);}),e.attachEvent(\"onAfterRowResize\",function(){return t.callEvent(\"onAfterRowResize\",arguments);});}};};const Ha={createTaskDND:function(){var t;return{extend:function(e){e.roundTaskDates=function(n){t.round_task_dates(n);};},init:function(e,n){return t=function(i,a){var r=a.$services;return{drag:null,dragMultiple:{},_events:{before_start:{},before_finish:{},after_finish:{}},_handlers:{},init:function(){this._domEvents=a._createDomEventScope(),this.clear_drag_state();var s=a.config.drag_mode;this.set_actions(),r.getService(\"state\").registerProvider(\"tasksDnd\",R(function(){return{drag_id:this.drag?this.drag.id:void 0,drag_mode:this.drag?this.drag.mode:void 0,drag_from_start:this.drag?this.drag.left:void 0};},this));var o={before_start:\"onBeforeTaskDrag\",before_finish:\"onBeforeTaskChanged\",after_finish:\"onAfterTaskDrag\"};for(var l in this._events)for(var c in s)this._events[l][c]=o[l];this._handlers[s.move]=this._move,this._handlers[s.resize]=this._resize,this._handlers[s.progress]=this._resize_progress;},set_actions:function(){var s=i.$task_data;this._domEvents.attach(s,\"mousemove\",a.bind(function(o){this.on_mouse_move(o);},this)),this._domEvents.attach(s,\"mousedown\",a.bind(function(o){this.on_mouse_down(o);},this)),this._domEvents.attach(document.body,\"mouseup\",a.bind(function(o){this.on_mouse_up(o);},this));},clear_drag_state:function(){this.drag={id:null,mode:null,pos:null,start_x:null,start_y:null,obj:null,left:null},this.dragMultiple={};},_resize:function(s,o,l){var c=i.$getConfig(),d=this._drag_task_coords(s,l);l.left?(s.start_date=a.dateFromPos(d.start+o),s.start_date||(s.start_date=new Date(a.getState().min_date))):(s.end_date=a.dateFromPos(d.end+o),s.end_date||(s.end_date=new Date(a.getState().max_date)));var u=this._calculateMinDuration(c.min_duration,c.duration_unit);s.end_date-s.start_date<c.min_duration&&(l.left?s.start_date=a.calculateEndDate(s.end_date,-u,c.duration_unit,s):s.end_date=a.calculateEndDate(s.start_date,u,c.duration_unit,s)),a._init_task_timing(s);},_calculateMinDuration:function(s,o){return Math.ceil(s/{minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:31356e6}[o]);},_resize_progress:function(s,o,l){var c=this._drag_task_coords(s,l),d=i.$getConfig().rtl?c.start-l.pos.x:l.pos.x-c.start,u=Math.max(0,d);s.progress=Math.min(1,u/Math.abs(c.end-c.start));},_find_max_shift:function(s,o){var l;for(var c in s){var d=s[c],u=a.getTask(d.id);if(!u.unscheduled){var h=this._drag_task_coords(u,d),_=a.posFromDate(new Date(a.getState().min_date)),p=a.posFromDate(new Date(a.getState().max_date));if(h.end+o>p){var y=p-h.end;(y<l||l===void 0)&&(l=y);}else if(h.start+o<_){var k=_-h.start;(k>l||l===void 0)&&(l=k);}}}return l;},_move:function(s,o,l,c){var d=this._drag_task_coords(s,l),u=null,h=null;c?(u=new Date(+l.obj.start_date+c),h=new Date(+l.obj.end_date+c)):(u=a.dateFromPos(d.start+o),h=a.dateFromPos(d.end+o)),u?h?(s.start_date=u,s.end_date=h):(s.end_date=new Date(a.getState().max_date),s.start_date=a.dateFromPos(a.posFromDate(s.end_date)-(d.end-d.start))):(s.start_date=new Date(a.getState().min_date),s.end_date=a.dateFromPos(a.posFromDate(s.start_date)+(d.end-d.start)));},_drag_task_coords:function(s,o){return{start:o.obj_s_x=o.obj_s_x||a.posFromDate(s.start_date),end:o.obj_e_x=o.obj_e_x||a.posFromDate(s.end_date)};},_mouse_position_change:function(s,o){var l=s.x-o.x,c=s.y-o.y;return Math.sqrt(l*l+c*c);},_is_number:function(s){return!isNaN(parseFloat(s))&&isFinite(s);},on_mouse_move:function(s){if(this.drag.start_drag){var o=rt(s,a.$task_data),l=this.drag.start_drag.start_x,c=this.drag.start_drag.start_y;(Date.now()-this.drag.timestamp>50||this._is_number(l)&&this._is_number(c)&&this._mouse_position_change({x:l,y:c},o)>20)&&this._start_dnd(s);}if(this.drag.mode){if(!dn(this,40))return;this._update_on_move(s);}},_update_item_on_move:function(s,o,l,c,d,u){var h=a.getTask(o),_=a.mixin({},h),p=a.mixin({},h);this._handlers[l].apply(this,[p,s,c,u]),a.mixin(h,p,!0),a.callEvent(\"onTaskDrag\",[h.id,l,p,_,d]),a.mixin(h,p,!0),a.refreshTask(o);},_update_on_move:function(s){var o=this.drag,l=i.$getConfig();if(o.mode){var c=rt(s,i.$task_data);if(o.pos&&o.pos.x==c.x)return;o.pos=c;var d=a.dateFromPos(c.x);if(!d||isNaN(d.getTime()))return;var u=c.x-o.start_x,h=a.getTask(o.id);if(this._handlers[o.mode]){if(o.mode===l.drag_mode.move){var _={};this._isMultiselect()&&a.getSelectedTasks().indexOf(o.id)>=0&&(_=this.dragMultiple);var p=!1;if(a.isSummaryTask(h)&&a.config.drag_project){var y={};y[o.id]=q(o),p=!0,_=P(y,this.dragMultiple);}var k=this._find_max_shift(_,u);let m;if(k!==void 0&&(u=k),this._update_item_on_move(u,o.id,o.mode,o,s),k===void 0){const f=a.posFromDate(o.obj.start_date),v=a.posFromDate(o.obj.end_date);if(o.handle_offset===void 0){const $=v-f,w=o.start_x-f;o.handle_offset=w/$;}let x=f+Math.abs(v-f)*o.handle_offset;m=d-a.dateFromPos(x);}for(var b in _){var g=_[b];p&&g.id!=o.id&&(a._bulk_dnd=!0),this._update_item_on_move(u,g.id,g.mode,g,s,m);}a._bulk_dnd=!1;}else this._update_item_on_move(u,o.id,o.mode,o,s);a._update_parents(o.id);}}},on_mouse_down:function(s,o){if(s.button!=2||s.button===void 0){var l=i.$getConfig(),c=a.locate(s),d=null;if(a.isTaskExists(c)&&(d=a.getTask(c)),!a.isReadonly(d)&&!this.drag.mode){this.clear_drag_state();var u=X(o=o||s.target||s.srcElement),h=this._get_drag_mode(u,o);if(!u||!h)return o.parentNode?this.on_mouse_down(s,o.parentNode):void 0;if(h){if(h.mode&&h.mode!=l.drag_mode.ignore&&l[\"drag_\"+h.mode]){if(c=a.locate(o),d=a.copy(a.getTask(c)||{}),a.isReadonly(d))return this.clear_drag_state(),!1;if(a.isSummaryTask(d)&&d.auto_scheduling!==!1&&!l.drag_project&&h.mode!=l.drag_mode.progress)return void this.clear_drag_state();h.id=c;var _=rt(s,a.$task_data);h.start_x=_.x,h.start_y=_.y,h.obj=d,this.drag.start_drag=h,this.drag.timestamp=Date.now();}else this.clear_drag_state();}else if(a.checkEvent(\"onMouseDown\")&&a.callEvent(\"onMouseDown\",[u.split(\" \")[0]])&&o.parentNode)return this.on_mouse_down(s,o.parentNode);}}},_fix_dnd_scale_time:function(s,o){var l=i.$getConfig(),c=a.getScale().unit,d=a.getScale().step;function u(h){if(a.config.correct_work_time){var _=i.$getConfig();a.isWorkTime(h.start_date,void 0,h)||(h.start_date=a.calculateEndDate({start_date:h.start_date,duration:-1,unit:_.duration_unit,task:h}));}}l.round_dnd_dates||(c=\"minute\",d=l.time_step),o.mode==l.drag_mode.resize?o.left?(s.start_date=a.roundDate({date:s.start_date,unit:c,step:d}),u(s)):(s.end_date=a.roundDate({date:s.end_date,unit:c,step:d}),function(h){if(a.config.correct_work_time){var _=i.$getConfig();a.isWorkTime(new Date(h.end_date-1),void 0,h)||(h.end_date=a.calculateEndDate({start_date:h.end_date,duration:1,unit:_.duration_unit,task:h}));}}(s)):o.mode==l.drag_mode.move&&(s.start_date=a.roundDate({date:s.start_date,unit:c,step:d}),u(s),s.end_date=a.calculateEndDate(s));},_fix_working_times:function(s,o){var l=i.$getConfig();(o=o||{mode:l.drag_mode.move}).mode==l.drag_mode.resize?o.left?s.start_date=a.getClosestWorkTime({date:s.start_date,dir:\"future\",task:s}):s.end_date=a.getClosestWorkTime({date:s.end_date,dir:\"past\",task:s}):o.mode==l.drag_mode.move&&a.correctTaskWorkTime(s);},_finalize_mouse_up:function(s,o,l,c){var d=a.getTask(s);if(o.work_time&&o.correct_work_time&&this._fix_working_times(d,l),this._fix_dnd_scale_time(d,l),this._fireEvent(\"before_finish\",l.mode,[s,l.mode,a.copy(l.obj),c])){var u=s;a._init_task_timing(d),this.clear_drag_state(),a.updateTask(d.id),this._fireEvent(\"after_finish\",l.mode,[u,l.mode,c]);}else if(this.clear_drag_state(),s==l.id&&(l.obj._dhx_changed=!1,a.mixin(d,l.obj,!0)),a.refreshTask(d.id),d.$level>100){let h=!1;a.eachParent(function(_){if(!h&&_.type===a.config.types.project){const p={start_date:_.start_date,end_date:_.end_date};a.resetProjectDates(_),+p.start_date==+_.start_date&&+p.end_date==+_.end_date||(h=!0);}},d.id),h&&a.refreshData();}else a.eachParent(function(h){if(h.type===a.config.types.project){const _={start_date:h.start_date,end_date:h.end_date};a.resetProjectDates(h),+_.start_date==+h.start_date&&+_.end_date==+h.end_date||a.refreshTask(h.id);}},d.id);},on_mouse_up:function(s){var o=this.drag;if(o.mode&&o.id){var l=i.$getConfig(),c=a.getTask(o.id),d=this.dragMultiple,u=!1,h=0;o.mode===l.drag_mode.move&&(a.isSummaryTask(c)&&l.drag_project||this._isMultiselect())&&(u=!0,h=Object.keys(d).length);var _=function(){if(u)for(var p in d)d[p].id!=o.id&&this._finalize_mouse_up(d[p].id,l,d[p],s);this._finalize_mouse_up(o.id,l,o,s);};u&&h>10?a.batchUpdate(function(){_.call(this);}.bind(this)):_.call(this);}this.clear_drag_state();},_get_drag_mode:function(s,o){var l=i.$getConfig().drag_mode,c={mode:null,left:null};switch((s||\"\").split(\" \")[0]){case\"gantt_task_line\":case\"gantt_task_content\":c.mode=l.move;break;case\"gantt_task_drag\":c.mode=l.resize;var d=o.getAttribute(\"data-bind-property\");c.left=d==\"start_date\";break;case\"gantt_task_progress_drag\":c.mode=l.progress;break;case\"gantt_link_control\":case\"gantt_link_point\":c.mode=l.ignore;break;default:c=null;}return c;},_start_dnd:function(s){var o=this.drag=this.drag.start_drag;delete o.start_drag;var l=i.$getConfig(),c=o.id;if(l[\"drag_\"+o.mode]&&a.callEvent(\"onBeforeDrag\",[c,o.mode,s])&&this._fireEvent(\"before_start\",o.mode,[c,o.mode,s])){delete o.start_drag;var d=a.getTask(c);if(a.isReadonly(d))return void this.clear_drag_state();if(this._isMultiselect()){var u=a.getSelectedTasks();u.indexOf(o.id)>=0&&kt(u,a.bind(function(h){var _=a.getTask(h);a.isSummaryTask(_)&&a.config.drag_project&&o.mode==l.drag_mode.move&&this._addSubtasksToDragMultiple(_.id),this.dragMultiple[h]=a.mixin({id:_.id,obj:a.copy(_)},this.drag);},this));}a.isSummaryTask(d)&&a.config.drag_project&&o.mode==l.drag_mode.move&&this._addSubtasksToDragMultiple(d.id),a.callEvent(\"onTaskDragStart\",[]);}else this.clear_drag_state();},_fireEvent:function(s,o,l){a.assert(this._events[s],\"Invalid stage:{\"+s+\"}\");var c=this._events[s][o];return a.assert(c,\"Unknown after drop mode:{\"+o+\"}\"),a.assert(l,\"Invalid event arguments\"),!a.checkEvent(c)||a.callEvent(c,l);},round_task_dates:function(s){var o=this.drag,l=i.$getConfig();o||(o={mode:l.drag_mode.move}),this._fix_dnd_scale_time(s,o);},destructor:function(){this._domEvents.detachAll();},_isMultiselect:function(){return a.config.drag_multiple&&!!(a.getSelectedTasks&&a.getSelectedTasks().length>0);},_addSubtasksToDragMultiple:function(s){a.eachTask(function(o){this.dragMultiple[o.id]=a.mixin({id:o.id,obj:a.copy(o)},this.drag);},s,this);}};}(e,n),e._tasks_dnd=t,t.init(n);},destructor:function(){t&&(t.destructor(),t=null);}};}};var Oa=function(t,e){var n,i,a,r,s;function o(){return{link_source_id:r,link_target_id:i,link_from_start:s,link_to_start:a,link_landing_area:n};}var l=e.$services,c=l.getService(\"state\"),d=l.getService(\"dnd\");c.registerProvider(\"linksDnD\",o);var u=\"gantt_link_point\",h=\"gantt_link_control\",_=new d(t.$task_bars,{sensitivity:0,updates_per_second:60,mousemoveContainer:e.$root,selector:\".\"+u,preventDefault:!0});function p(m,f){var v,x=_.getPosition(m),$=function(M){var I=0,A=0;return M&&(I=M.offsetWidth||0,A=M.offsetHeight||0),{width:I,height:A};}(f),w={right:(v=e.$root).offsetWidth,bottom:v.offsetHeight},S=e.config.tooltip_offset_x||10,T=e.config.tooltip_offset_y||10,E=e.config.scroll_size||18,C=e.$container.getBoundingClientRect().y+window.scrollY,D={y:x.y+T,x:x.x+S,bottom:x.y+$.height+T+E,right:x.x+$.width+S+E};return D.bottom>w.bottom+C&&(D.y=w.bottom+C-$.height-T),D.right>w.right&&(D.x=w.right-$.width-S),D;}function y(m){var f=o();f.link_source_id&&f.link_target_id&&e.isLinkAllowed(f.link_source_id,f.link_target_id,f.link_from_start,f.link_to_start);var v=\"<div class='\"+e.templates.drag_link_class(f.link_source_id,f.link_from_start,f.link_target_id,f.link_to_start)+\"'>\"+e.templates.drag_link(f.link_source_id,f.link_from_start,f.link_target_id,f.link_to_start)+\"</div>\";m.innerHTML=v;}function k(){r=s=i=null,a=!0;}function b(m,f,v,x){var $=function(){return _._direction&&_._direction.parentNode||(_._direction=document.createElement(\"div\"),t.$task_links.appendChild(_._direction)),_._direction;}(),w=o(),S=[\"gantt_link_direction\"];e.templates.link_direction_class&&S.push(e.templates.link_direction_class(w.link_source_id,w.link_from_start,w.link_target_id,w.link_to_start));var T=Math.sqrt(Math.pow(v-m,2)+Math.pow(x-f,2));if(T=Math.max(0,T-3)){$.className=S.join(\" \");var E=(x-f)/(v-m),C=Math.atan(E);g(m,v,f,x)==2?C+=Math.PI:g(m,v,f,x)==3&&(C-=Math.PI);var D=Math.sin(C),M=Math.cos(C),I=Math.round(f),A=Math.round(m),N=[\"-webkit-transform: rotate(\"+C+\"rad)\",\"-moz-transform: rotate(\"+C+\"rad)\",\"-ms-transform: rotate(\"+C+\"rad)\",\"-o-transform: rotate(\"+C+\"rad)\",\"transform: rotate(\"+C+\"rad)\",\"width:\"+Math.round(T)+\"px\"];if(window.navigator.userAgent.indexOf(\"MSIE 8.0\")!=-1){N.push('-ms-filter: \"'+function(G,j){return\"progid:DXImageTransform.Microsoft.Matrix(M11 = \"+j+\",M12 = -\"+G+\",M21 = \"+G+\",M22 = \"+j+\",SizingMethod = 'auto expand')\";}(D,M)+'\"');var L=Math.abs(Math.round(m-v)),O=Math.abs(Math.round(x-f));switch(g(m,v,f,x)){case 1:I-=O;break;case 2:A-=L,I-=O;break;case 3:A-=L;}}N.push(\"top:\"+I+\"px\"),N.push(\"left:\"+A+\"px\"),$.style.cssText=N.join(\";\");}}function g(m,f,v,x){return f>=m?x<=v?1:4:x<=v?2:3;}_.attachEvent(\"onBeforeDragStart\",e.bind(function(m,f){var v=f.target||f.srcElement;if(k(),e.getState(\"tasksDnd\").drag_id)return!1;if(pt(v,u)){pt(v,\"task_start_date\")&&(s=!0);var x=e.locate(f);r=x;var $=e.getTask(x);return e.isReadonly($)?(k(),!1):(this._dir_start={x:_.config.original_element_sizes.x+_.config.original_element_sizes.width/2,y:_.config.original_element_sizes.y+_.config.original_element_sizes.height/2},!0);}return!1;},this)),_.attachEvent(\"onAfterDragStart\",e.bind(function(m,f){e.config.touch&&e.refreshData(),y(_.config.marker);},this)),_.attachEvent(\"onDragMove\",e.bind(function(m,f){var v=_.config,x=p(f,v.marker);(function(M,I){M.style.left=I.x+\"px\",M.style.top=I.y+\"px\";})(v.marker,x);var $=!!pt(f,h),w=i,S=n,T=a,E=e.locate(f),C=!0;if(Y(yt(f),e.$root)||($=!1,E=null),$&&(C=!pt(f,\"task_end_date\"),$=!!E),i=E,n=$,a=C,$){const M=pt(f,h).querySelector(`.${u}`);if(M){const I=en(M,t.$task_bg);this._dir_end={x:I.x+M.offsetWidth/2,y:I.y+M.offsetHeight/2};}}else this._dir_end=rt(f,t.$task_data),e.env.isEdge&&(this._dir_end.y+=window.scrollY);var D=!(S==$&&w==E&&T==C);return D&&(w&&e.refreshTask(w,!1),E&&e.refreshTask(E,!1)),D&&y(v.marker),b(this._dir_start.x,this._dir_start.y,this._dir_end.x,this._dir_end.y),!0;},this)),_.attachEvent(\"onDragEnd\",e.bind(function(){var m=o();if(m.link_source_id&&m.link_target_id&&m.link_source_id!=m.link_target_id){var f=e._get_link_type(m.link_from_start,m.link_to_start),v={source:m.link_source_id,target:m.link_target_id,type:f};v.type&&e.isLinkAllowed(v)&&e.callEvent(\"onLinkCreated\",[v])&&e.addLink(v);}k(),e.config.touch?e.refreshData():(m.link_source_id&&e.refreshTask(m.link_source_id,!1),m.link_target_id&&e.refreshTask(m.link_target_id,!1)),_._direction&&(_._direction.parentNode&&_._direction.parentNode.removeChild(_._direction),_._direction=null);},this)),e.attachEvent(\"onGanttRender\",e.bind(function(){_._direction&&b(this._dir_start.x,this._dir_start.y,this._dir_end.x,this._dir_end.y);},this));};const Ba=function(){return{init:Oa};};var za=function(t){var e=t.$services;return{onCreated:function(n){var i=n.$config;i.bind=W(i.bind)?i.bind:\"task\",i.bindLinks=W(i.bindLinks)?i.bindLinks:\"link\",n._linksDnD=Ba(),n._tasksDnD=Ha.createTaskDND(),n._tasksDnD.extend(n),this._mouseDelegates=Te(t);},onInitialized:function(n){this._attachDomEvents(t),this._attachStateProvider(t,n),n._tasksDnD.init(n,t),n._linksDnD.init(n,t),n.$config.id==\"timeline\"&&this.extendDom(n);},onDestroyed:function(n){this._clearDomEvents(t),this._clearStateProvider(t),n._tasksDnD&&n._tasksDnD.destructor();},extendDom:function(n){t.$task=n.$task,t.$task_scale=n.$task_scale,t.$task_data=n.$task_data,t.$task_bg=n.$task_bg,t.$task_links=n.$task_links,t.$task_bars=n.$task_bars;},_clearDomEvents:function(){this._mouseDelegates.destructor(),this._mouseDelegates=null;},_attachDomEvents:function(n){function i(a,r){if(a&&this.callEvent(\"onLinkDblClick\",[a,r])){var s=this.getLink(a);if(this.isReadonly(s))return;var o=this.locale.labels.link+\" \"+this.templates.link_description(this.getLink(a))+\" \"+this.locale.labels.confirm_link_deleting;window.setTimeout(function(){n._delete_link_confirm({link:s,message:o,title:\"\",callback:function(){n.deleteLink(a);}});},this.config.touch?300:1);}}this._mouseDelegates.delegate(\"click\",\"gantt_task_link\",n.bind(function(a,r){var s=this.locate(a,this.config.link_attribute);s&&this.callEvent(\"onLinkClick\",[s,a]);},n),this.$task),this._mouseDelegates.delegate(\"click\",\"gantt_scale_cell\",n.bind(function(a,r){var s=rt(a,n.$task_data),o=n.dateFromPos(s.x),l=Math.floor(n.columnIndexByDate(o)),c=n.getScale().trace_x[l];n.callEvent(\"onScaleClick\",[a,c]);},n),this.$task),this._mouseDelegates.delegate(\"doubleclick\",\"gantt_task_link\",n.bind(function(a,r,s){r=this.locate(a,n.config.link_attribute),i.call(this,r,a);},n),this.$task),this._mouseDelegates.delegate(\"doubleclick\",\"gantt_link_point\",n.bind(function(a,r,s){r=this.locate(a);var o=this.getTask(r),l=null;return s.parentNode&&X(s.parentNode)&&(l=X(s.parentNode).indexOf(\"_left\")>-1?o.$target[0]:o.$source[0]),l&&i.call(this,l,a),!1;},n),this.$task);},_attachStateProvider:function(n,i){var a=i;e.getService(\"state\").registerProvider(\"tasksTimeline\",function(){return{scale_unit:a._tasks?a._tasks.unit:void 0,scale_step:a._tasks?a._tasks.step:void 0};});},_clearStateProvider:function(){e.getService(\"state\").unregisterProvider(\"tasksTimeline\");}};},Wa=function(t){return{getVerticalScrollbar:function(){return t.$ui.getView(\"scrollVer\");},getHorizontalScrollbar:function(){return t.$ui.getView(\"scrollHor\");},_legacyGridResizerClass:function(e){for(var n=e.getCellsByType(\"resizer\"),i=0;i<n.length;i++){var a=n[i],r=!1,s=a.$parent.getPrevSibling(a.$id);if(s&&s.$config&&s.$config.id===\"grid\")r=!0;else{var o=a.$parent.getNextSibling(a.$id);o&&o.$config&&o.$config.id===\"grid\"&&(r=!0);}r&&(a.$config.css=(a.$config.css?a.$config.css+\" \":\"\")+\"gantt_grid_resize_wrap\");}},onCreated:function(e){var n=!0;this._legacyGridResizerClass(e),e.attachEvent(\"onBeforeResize\",function(){var i=t.$ui.getView(\"timeline\");i&&(i.$config.hidden=i.$parent.$config.hidden=!t.config.show_chart);var a=t.$ui.getView(\"grid\");if(a){var r=a._getColsTotalWidth(),s=!t.config.show_grid||!t.config.grid_width||r===0;if(n&&!s&&r!==!1&&(t.config.grid_width=r),a.$config.hidden=a.$parent.$config.hidden=s,!a.$config.hidden){var o=a._getGridWidthLimits();if(o[0]&&t.config.grid_width<o[0]&&(t.config.grid_width=o[0]),o[1]&&t.config.grid_width>o[1]&&(t.config.grid_width=o[1]),i&&t.config.show_chart){if(a.$config.width=t.config.grid_width-1,!a.$config.scrollable&&a.$config.scrollY&&t.$root.offsetWidth){var l=a.$gantt.$layout.$container.offsetWidth,c=t.$ui.getView(a.$config.scrollY).$config.width,d=l-(a.$config.width+c)-4;d<0&&(a.$config.width+=d,t.config.grid_width+=d);}if(n)a.$parent.$config.width=t.config.grid_width,a.$parent.$config.group&&t.$layout._syncCellSizes(a.$parent.$config.group,{value:a.$parent.$config.width,isGravity:!1});else if(i&&!Y(i.$task,e.$view)){if(!a.$config.original_grid_width){var u=t.skins[t.skin];u&&u.config&&u.config.grid_width?a.$config.original_grid_width=u.config.grid_width:a.$config.original_grid_width=0;}t.config.grid_width=a.$config.original_grid_width,a.$parent.$config.width=t.config.grid_width;}else a.$parent._setContentSize(a.$config.width,null),t.$layout._syncCellSizes(a.$parent.$config.group,{value:t.config.grid_width,isGravity:!1});}else i&&Y(i.$task,e.$view)&&(a.$config.original_grid_width=t.config.grid_width),n||(a.$parent.$config.width=0);}n=!1;}}),this._initScrollStateEvents(e);},_initScrollStateEvents:function(e){t._getVerticalScrollbar=this.getVerticalScrollbar,t._getHorizontalScrollbar=this.getHorizontalScrollbar;var n=this.getVerticalScrollbar(),i=this.getHorizontalScrollbar();n&&n.attachEvent(\"onScroll\",function(a,r,s){var o=t.getScrollState();t.callEvent(\"onGanttScroll\",[o.x,a,o.x,r]);}),i&&i.attachEvent(\"onScroll\",function(a,r,s){var o=t.getScrollState();t.callEvent(\"onGanttScroll\",[a,o.y,r,o.y]);var l=t.$ui.getView(\"grid\");l&&l.$grid_data&&!l.$config.scrollable&&(l.$grid_data.style.left=l.$grid.scrollLeft+\"px\",l.$grid_data.scrollLeft=l.$grid.scrollLeft);}),e.attachEvent(\"onResize\",function(){n&&!t.$scroll_ver&&(t.$scroll_ver=n.$scroll_ver),i&&!t.$scroll_hor&&(t.$scroll_hor=i.$scroll_hor);});},_findGridResizer:function(e,n){for(var i,a=e.getCellsByType(\"resizer\"),r=!0,s=0;s<a.length;s++){var o=a[s];o._getSiblings();var l=o._behind,c=o._front;if(l&&l.$content===n||l.isChild&&l.isChild(n)){i=o,r=!0;break;}if(c&&c.$content===n||c.isChild&&c.isChild(n)){i=o,r=!1;break;}}return{resizer:i,gridFirst:r};},onInitialized:function(e){var n=t.$ui.getView(\"grid\"),i=this._findGridResizer(e,n);if(i.resizer){var a,r=i.gridFirst,s=i.resizer;if(s.$config.mode!==\"x\")return;s.attachEvent(\"onResizeStart\",function(o,l){var c=t.$ui.getView(\"grid\"),d=c?c.$parent:null;if(d){var u=c._getGridWidthLimits();c.$config.scrollable||(d.$config.minWidth=u[0]),d.$config.maxWidth=u[1];}return a=r?o:l,t.callEvent(\"onGridResizeStart\",[a]);}),s.attachEvent(\"onResize\",function(o,l){var c=r?o:l;return t.callEvent(\"onGridResize\",[a,c]);}),s.attachEvent(\"onResizeEnd\",function(o,l,c,d){var u=r?o:l,h=r?c:d,_=t.$ui.getView(\"grid\"),p=_?_.$parent:null;p&&(p.$config.minWidth=void 0);var y=t.callEvent(\"onGridResizeEnd\",[u,h]);return y&&h!==0&&(t.config.grid_width=h),y;});}},onDestroyed:function(e){}};};const ja={init:function(t){function e(r,s){var o=s(t);o.onCreated&&o.onCreated(r),r.attachEvent(\"onReady\",function(){o.onInitialized&&o.onInitialized(r);}),r.attachEvent(\"onDestroy\",function(){o.onDestroyed&&o.onDestroyed(r);});}var n=la(t);n.registerView(\"cell\",Ht),n.registerView(\"resizer\",null),n.registerView(\"scrollbar\",fa),n.registerView(\"layout\",kn,function(r){(r.$config?r.$config.id:null)===\"main\"&&e(r,Wa);}),n.registerView(\"viewcell\",ga),n.registerView(\"multiview\",_a),n.registerView(\"timeline\",Ut,function(r){(r.$config?r.$config.id:null)!==\"timeline\"&&r.$config.bind!=\"task\"||e(r,za);}),n.registerView(\"grid\",xe,function(r){(r.$config?r.$config.id:null)!==\"grid\"&&r.$config.bind!=\"task\"||e(r,Ra);}),n.registerView(\"resourceGrid\",xe),n.registerView(\"resourceTimeline\",Ut),n.registerView(\"resourceHistogram\",Ut);var i=function(r){var s=ua(r);return{getDataRender:function(o){return r.$services.getService(\"layer:\"+o)||null;},createDataRender:function(o){var l=o.name,c=o.defaultContainer,d=o.defaultContainerSibling,u=s.createGroup(c,d,function(h,_){if(!u.filters)return!0;for(var p=0;p<u.filters.length;p++)if(u.filters[p](h,_)===!1)return!1;},ha);return r.$services.setService(\"layer:\"+l,function(){return u;}),r.attachEvent(\"onGanttReady\",function(){u.addLayer();}),u;},init:function(){var o=this.createDataRender({name:\"task\",defaultContainer:function(){return r.$task_data?r.$task_data:r.$ui.getView(\"timeline\")?r.$ui.getView(\"timeline\").$task_data:void 0;},defaultContainerSibling:function(){return r.$task_links?r.$task_links:r.$ui.getView(\"timeline\")?r.$ui.getView(\"timeline\").$task_links:void 0;},filter:function(c){}},r),l=this.createDataRender({name:\"link\",defaultContainer:function(){return r.$task_data?r.$task_data:r.$ui.getView(\"timeline\")?r.$ui.getView(\"timeline\").$task_data:void 0;}},r);return{addTaskLayer:function(c){const d=ft;return typeof c==\"function\"?c={renderer:{render:c,getVisibleRange:d}}:c.renderer&&!c.renderer.getVisibleRange&&(c.renderer.getVisibleRange=d),c.view=\"timeline\",o.addLayer(c);},_getTaskLayers:function(){return o.getLayers();},removeTaskLayer:function(c){o.removeLayer(c);},_clearTaskLayers:function(){o.clear();},addLinkLayer:function(c){const d=mn();return typeof c==\"function\"?c={renderer:{render:c,getVisibleRange:d}}:c.renderer&&!c.renderer.getVisibleRange&&(c.renderer.getVisibleRange=d),c.view=\"timeline\",c&&c.renderer&&(c.renderer.getRectangle||c.renderer.isInViewPort||(c.renderer.isInViewPort=vn)),l.addLayer(c);},_getLinkLayers:function(){return l.getLayers();},removeLinkLayer:function(c){l.removeLayer(c);},_clearLinkLayers:function(){l.clear();}};}};}(t),a=Da(t);return t.ext.inlineEditors=a,t.ext._inlineEditors=a,a.init(t),{factory:n,mouseEvents:ca.init(t),layersApi:i.init(),render:{gridLine:function(){return/* @__PURE__ */function(r){return{render:function(s,o,l,c){for(var d=o.getGridColumns(),u=o.$getTemplates(),h=o.$config.rowStore,_=[],p=0;p<d.length;p++){var y,k,b,g=p==d.length-1,m=d[p];m.name==\"add\"?(k=\"<div \"+(S=r._waiAria.gridAddButtonAttrString(m))+\" class='gantt_add'></div>\",b=\"\"):(Q(k=m.template?m.template(s):s[m.name])&&(k=u.date_grid(k,s,m.name)),k==null&&(k=\"\"),b=k,k=\"<div class='gantt_tree_content'>\"+k+\"</div>\");var f=\"gantt_cell\"+(g?\" gantt_last_cell\":\"\"),v=[];if(m.tree){f+=\" gantt_cell_tree\";for(var x=0;x<s.$level;x++)v.push(u.grid_indent(s));!h.hasChild(s.id)||r.isSplitTask(s)&&!r.config.open_split_tasks?(v.push(u.grid_blank(s)),v.push(u.grid_file(s))):(v.push(u.grid_open(s)),v.push(u.grid_folder(s)));}var $=\"width:\"+(m.width-(g?1:0))+\"px;\";if(this.defined(m.align)){var w={right:\"flex-end\",left:\"flex-start\",center:\"center\"}[m.align];$+=\"text-align:\"+m.align+\";justify-content:\"+w+\";\";}var S=r._waiAria.gridCellAttrString(m,b,s);v.push(k),y=\"<div class='\"+f+\"' data-column-index='\"+p+\"' data-column-name='\"+m.name+\"' style='\"+$+\"' \"+S+\">\"+v.join(\"\")+\"</div>\",_.push(y);}switch(f=\"\",h.$config.name){case\"task\":f=r.getGlobalTaskIndex(s.id)%2==0?\"\":\" odd\";break;case\"resource\":f=h.visibleOrder.indexOf(s.id)%2==0?\"\":\" odd\";}if(f+=s.$transparent?\" gantt_transparent\":\"\",f+=s.$dataprocessor_class?\" \"+s.$dataprocessor_class:\"\",u.grid_row_class){var T=u.grid_row_class.call(r,s.start_date,s.end_date,s);T&&(f+=\" \"+T);}h.isSelected(s.id)&&(f+=\" gantt_selected\");var E=document.createElement(\"div\");E.className=\"gantt_row\"+f+\" gantt_row_\"+r.getTaskType(s.type);var C=o.getItemHeight(s.id);return E.style.height=C+\"px\",E.style.lineHeight=C+\"px\",l.smart_rendering&&(E.style.position=\"absolute\",E.style.left=\"0px\",E.style.top=o.getItemTop(s.id)+\"px\"),o.$config.item_attribute&&(E.setAttribute(o.$config.item_attribute,s.id),E.setAttribute(o.$config.bind+\"_id\",s.id)),r._waiAria.taskRowAttr(s,E),E.innerHTML=_.join(\"\"),E;},update:null,getRectangle:Kt,isInViewPort:Ma,getVisibleRange:ft,onrender:function(s,o,l){for(var c=l.getGridColumns(),d=0;d<c.length;d++){var u=c[d];if(u.onrender){var h=o.querySelector(`[data-column-name=\"${u.name}\"]`);if(h){var _=u.onrender(s,h);if(_&&typeof _==\"string\")h.innerHTML=_;else if(_&&typeof _==\"object\"&&r.config.external_render){var p=r.config.external_render;p.isElement(_)&&p.renderElement(_,h);}}}}}};}(t);},taskBg:function(){return/* @__PURE__ */function(r){var s={},o={};function l(_,p){return!(!s[_.id][p]||!s[_.id][p].parentNode);}function c(_,p){s[_]&&s[_][p]&&s[_][p].parentNode&&s[_][p].parentNode.removeChild(s[_][p]);}function d(_){var p,y=_.$getTemplates();return y.task_cell_class!==void 0?(p=y.task_cell_class,(console.warn||console.log)(\"gantt.templates.task_cell_class template is deprecated and will be removed soon. Please use gantt.templates.timeline_cell_class instead.\")):p=y.timeline_cell_class,p;}function u(_){return _.$getTemplates().timeline_cell_content;}function h(_,p,y,k,b,g,m,f){var v=_.width[p],x=\"\";if(oe(p,_,k,r)){var $=g(y,_.trace_x[p]),w=\"\";if(m&&(w=m(y,_.trace_x[p])),f.static_background){var S=!(!$&&!w);if(!f.static_background_cells||!S)return null;}if(s[y.id][p])return o[y.id][p]=p,s[y.id][p];var T=document.createElement(\"div\");return T.style.width=v+\"px\",x=\"gantt_task_cell\"+(p==b-1?\" gantt_last_cell\":\"\"),$&&(x+=\" \"+$),T.className=x,w&&(T.innerHTML=w),T.style.position=\"absolute\",T.style.left=_.left[p]+\"px\",s[y.id][p]=T,o[y.id][p]=p,T;}return null;}return{render:function(_,p,y,k){var b=p.$getTemplates(),g=p.getScale(),m=g.count;if(y.static_background&&!y.static_background_cells)return null;var f,v=document.createElement(\"div\"),x=d(p),$=u(p);if(f=k&&y.smart_rendering&&!Nt(r)?jt(g,k.x):{start:0,end:m-1},y.show_task_cells){s[_.id]={},o[_.id]={};for(var w=f.start;w<=f.end;w++){var S=h(g,w,_,k,m,x,$,y);S&&v.appendChild(S);}}const T=p.$config.rowStore,E=T.getIndexById(_.id)%2!=0;var C=b.task_row_class(_.start_date,_.end_date,_),D=\"gantt_task_row\"+(E?\" odd\":\"\")+(C?\" \"+C:\"\");if(T.isSelected(_.id)&&(D+=\" gantt_selected\"),v.className=D,y.smart_rendering?(v.style.position=\"absolute\",v.style.top=p.getItemTop(_.id)+\"px\",v.style.width=\"100%\"):v.style.position=\"relative\",v.style.height=p.getItemHeight(_.id)+\"px\",_.id==\"timeline_placeholder_task\"){var M=0;_.lastTaskId&&(M=p.getItemTop(_.lastTaskId)+p.getItemHeight(_.lastTaskId));var I=(_.row_height||p.$task_data.offsetHeight)-M;I<0&&(I=0),y.smart_rendering&&(v.style.top=M+\"px\"),v.style.height=I+\"px\";}return p.$config.item_attribute&&(v.setAttribute(p.$config.item_attribute,_.id),v.setAttribute(p.$config.bind+\"_id\",_.id)),v;},update:function(_,p,y,k,b){var g=y.getScale(),m=g.count,f=d(y),v=u(y);if(k.show_task_cells){s[_.id]||(s[_.id]={}),o[_.id]||(o[_.id]={});var x=jt(g,b);for(var $ in o[_.id]){var w=o[_.id][$];(Number(w)<x.start||Number(w)>x.end)&&c(_.id,w);}o[_.id]={};for(var S=x.start;S<=x.end;S++){var T=h(g,S,_,b,m,f,v,k);!T&&l(_,S)?c(_.id,S):T&&!T.parentNode&&p.appendChild(T);}}},getRectangle:qe,getVisibleRange:ft,prepareData:Aa};}(t);},taskBar:function(){return Ue(t);},timedProjectBar:function(){return Ue(t);},taskRollupBar:function(){return function(r){const s=bn(r),o={};function l(u,h,_,p,y){let k=!0;return p.smart_rendering&&(k=$e(u,h,_)),k;}function c(u,h,_,p){const y=r.copy(r.getTask(h.id));if(y.$rendered_at=u.id,r.callEvent(\"onBeforeRollupTaskDisplay\",[y.id,y,u.id])===!1)return;const k=s(y,_);if(!k)return;const b=_.getBarHeight(u.id,h.type==r.config.types.milestone),g=Math.floor((_.getItemHeight(u.id)-b)/2);return k.style.top=p.top+g+\"px\",k.classList.add(\"gantt_rollup_child\"),k.setAttribute(\"data-rollup-parent-id\",u.id),k;}function d(u,h){return u+\"_\"+h;}return{render:function(u,h,_,p){if(u.rollup!==!1&&u.$rollup&&u.$rollup.length){const y=document.createElement(\"div\"),k=r.getTaskPosition(u);return p&&(p.y=0,p.y_end=r.$task_bg.scrollHeight),u.$rollup.forEach(function(b){if(!r.isTaskExists(b))return;const g=r.getTask(b);if(!l(g,p,h,_))return;const m=c(u,g,h,k);m?(o[d(g.id,u.id)]=m,y.appendChild(m)):o[d(g.id,u.id)]=!1;}),y;}return!1;},update:function(u,h,_,p,y){const k=document.createElement(\"div\"),b=r.getTaskPosition(u);y.y=0,y.y_end=r.$task_bg.scrollHeight,u.$rollup.forEach(function(g){const m=r.getTask(g),f=d(m.id,u.id);let v=l(m,y,_,p);if(v!==!!o[f])if(v){const x=c(u,m,_,b);o[f]=x||!1;}else o[f]=!1;o[f]&&k.appendChild(o[f]),h.innerHTML=\"\",h.appendChild(k);});},isInViewPort:$e,getVisibleRange:ft};}(t);},taskSplitBar:function(){return Ct();},taskConstraints:function(){return Ct();},taskDeadline:function(){return Ct();},taskBaselines:function(){return Ct();},link:function(){return Ia(t);},resourceRow:function(){return function(r){var s=Na(r),o={};function l(d,u,h,_,p){var y=h.resource_cell_class(u.start_date,u.end_date,d,u.tasks,u.assignments),k=h.resource_cell_value(u.start_date,u.end_date,d,u.tasks,u.assignments),b=p.getItemHeight(d.id)-1;if(y||k){var g=p.getItemPosition(d,u.start_date,u.end_date),m=document.createElement(\"div\");return m.setAttribute(p.$config.item_attribute,d.id),m.className=[\"gantt_resource_marker\",y].join(\" \"),m.style.cssText=[\"left:\"+g.left+\"px\",\"width:\"+g.width+\"px\",\"height:\"+b+\"px\",\"line-height:\"+b+\"px\",\"top:\"+g.top+\"px\"].join(\";\"),k&&(m.innerHTML=k),m;}return null;}function c(d,u){o[d]&&o[d][u]&&o[d][u].parentNode&&o[d][u].parentNode.removeChild(o[d][u]);}return{render:function(d,u,h,_){var p=u.$getTemplates(),y=u.getScale(),k=s(d,h.resource_property,u.getScale(),u),b=!!_,g=[];o[d.id]={};for(var m=jt(y,_),f=m.start;f<=m.end;f++){var v=k[f];if(v&&(!b||oe(f,y,_,r))){var x=l(d,v,p,0,u);x&&(g.push(x),o[d.id][f]=x);}}var $=null;if(g.length){$=document.createElement(\"div\");for(var w=0;w<g.length;w++)$.appendChild(g[w]);}return $;},update:function(d,u,h,_,p){var y=h.$getTemplates(),k=h.getScale(),b=s(d,_.resource_property,h.getScale(),h),g=jt(k,p),m={};if(o&&o[d.id])for(var f in o[d.id])m[f]=f;for(var v=g.start;v<=g.end;v++){var x=b[v];if(m[v]=!1,x)if(oe(v,k,p,r)){if(o[d.id]&&o[d.id][v])o[d.id]&&o[d.id][v]&&!o[d.id][v].parentNode&&u.appendChild(o[d.id][v]);else{var $=l(d,x,y,0,h);$&&(u.appendChild($),o[d.id][v]=$);}}else c(d.id,v);}for(var f in m)m[f]!==!1&&c(d.id,f);},getRectangle:qe,getVisibleRange:ft};}(t);},resourceHistogram:function(){return Ct();},gridTaskRowResizer:function(){return/* @__PURE__ */function(r){return{render:function(s,o,l){var c=o.$getConfig(),d=document.createElement(\"div\");return d.className=\"gantt_task_grid_row_resize_wrap\",d.style.top=o.getItemTop(s.id)+o.getItemHeight(s.id)+\"px\",d.innerHTML=\"<div class='gantt_task_grid_row_resize' role='cell'></div>\",d.setAttribute(c.task_grid_row_resizer_attribute,s.id),r._waiAria.rowResizerAttr(d),d;},update:null,getRectangle:Kt,getVisibleRange:ft};}(t);}},layersService:{getDataRender:function(r){return i.getDataRender(r,t);},createDataRender:function(r){return i.createDataRender(r,t);}}};}};function ce(t,e){const n=getComputedStyle(e.$root).getPropertyValue(\"--dhx-gantt-theme\");let i,a=!!n;if(a)i=n;else{var r=e.skin;if(i=r,!r||t)for(var s=document.getElementsByTagName(\"link\"),o=0;o<s.length;o++){var l=s[o].href.match(\"dhtmlxgantt_([a-z_]+).css\");if(l&&(e.skins[l[1]]||!r)){i=l[1];break;}}}e._theme_info={theme:i,cssVarTheme:a},e.skin=i||\"terrace\";var c=e.skins[e.skin]||e.skins.terrace;(function(h,_,p){for(var y in _)(h[y]===void 0||p)&&(h[y]=_[y]);})(e.config,c.config,t),a||(e.config.link_radius=1);var d=e.getGridColumns();for(d[1]&&!e.defined(d[1].width)&&(d[1].width=c._second_column_width),d[2]&&!e.defined(d[2].width)&&(d[2].width=c._third_column_width),o=0;o<d.length;o++){var u=d[o];u.name==\"add\"&&(u.width||(u.width=44),e.defined(u.min_width)&&e.defined(u.max_width)||(u.min_width=u.min_width||u.width,u.max_width=u.max_width||u.width),u.min_width&&(u.min_width=+u.min_width),u.max_width&&(u.max_width=+u.max_width),u.width&&(u.width=+u.width,u.width=u.min_width&&u.min_width>u.width?u.min_width:u.width,u.width=u.max_width&&u.max_width<u.width?u.max_width:u.width));}c.config.task_height&&(e.config.task_height=c.config.task_height||\"full\"),c.config.bar_height&&(e.config.bar_height=c.config.bar_height||\"full\"),c._lightbox_template&&(e._lightbox_template=c._lightbox_template),c._redefine_lightbox_buttons&&(e.config.buttons_right=c._redefine_lightbox_buttons.buttons_right,e.config.buttons_left=c._redefine_lightbox_buttons.buttons_left),e.resetLightbox();}function Fa(t){var e=null,n=!1,i=null,a={started:!1},r={};function s(_){return _&&Y(_,t.$root)&&_.offsetHeight;}function o(){var _=!!document.querySelector(\".gantt_drag_marker\"),p=!!document.querySelector(\".gantt_drag_marker.gantt_grid_resize_area\")||!!document.querySelector(\".gantt_drag_marker.gantt_row_grid_resize_area\"),y=!!document.querySelector(\".gantt_link_direction\"),k=t.getState(),b=k.autoscroll;return n=_&&!p&&!y,!(!k.drag_mode&&!_||p)||b;}function l(_){if(i&&(clearTimeout(i),i=null),_){var p=t.config.autoscroll_speed;p&&p<10&&(p=10),i=setTimeout(function(){e=setInterval(u,p||50);},t.config.autoscroll_delay||10);}}function c(_){_?(l(!0),a.started||(a.x=r.x,a.y=r.y,a.started=!0)):(e&&(clearInterval(e),e=null),l(!1),a.started=!1);}function d(_){var p=o();if(!e&&!i||p||c(!1),!t.config.autoscroll||!p)return!1;r={x:_.clientX,y:_.clientY},_.type==\"touchmove\"&&(r.x=_.targetTouches[0].clientX,r.y=_.targetTouches[0].clientY),!e&&p&&c(!0);}function u(){if(!o())return c(!1),!1;var _=s(t.$task)?t.$task:s(t.$grid)?t.$grid:t.$root;if(_){var p=!1;[\".gantt_drag_marker.gantt_grid_resize_area\",\".gantt_drag_marker .gantt_row.gantt_row_task\",\".gantt_drag_marker.gantt_grid_dnd_marker\"].forEach(function(C){p=p||!!document.querySelector(C);}),p&&(_=t.$grid);var y=V(_),k=r.x-y.x,b=r.y-y.y+window.scrollY,g=n?0:h(k,y.width,a.x-y.x),m=h(b,y.height,a.y-y.y+window.scrollY),f=t.getScrollState(),v=f.y,x=f.inner_height,$=f.height,w=f.x,S=f.inner_width,T=f.width;(m&&!x||m<0&&!v||m>0&&v+x>=$+2)&&(m=0),(g&&!S||g<0&&!w||g>0&&w+S>=T)&&(g=0);var E=t.config.autoscroll_step;E&&E<2&&(E=2),m*=E||30,((g*=E||30)||m)&&function(C,D){var M=t.getScrollState(),I=null,A=null;C&&(I=M.x+C,I=Math.min(M.width,I),I=Math.max(0,I)),D&&(A=M.y+D,A=Math.min(M.height,A),A=Math.max(0,A)),t.scrollTo(I,A);}(g,m);}}function h(_,p,y){return _-50<0&&_<y?-1:_>p-50&&_>y?1:0;}t.attachEvent(\"onGanttReady\",function(){if(!F(t)){var _=vt(t.$root)||document.body;t.eventRemove(_,\"mousemove\",d),t.event(_,\"mousemove\",d),t.eventRemove(_,\"touchmove\",d),t.event(_,\"touchmove\",d),t.eventRemove(_,\"pointermove\",d),t.event(_,\"pointermove\",d);}}),t.attachEvent(\"onDestroy\",function(){c(!1);});}var ue,he;typeof window<\"u\"&&window.jQuery&&(ue=window.jQuery,he=[],ue.fn.dhx_gantt=function(t){if(typeof(t=t||{})!=\"string\"){var e=[];return this.each(function(){if(this&&this.getAttribute)if(this.gantt||window.gantt.$root==this)e.push(typeof this.gantt==\"object\"?this.gantt:window.gantt);else{var n=window.gantt.$container&&window.Gantt?window.Gantt.getGanttInstance():window.gantt;for(var i in t)i!=\"data\"&&(n.config[i]=t[i]);n.init(this),t.data&&n.parse(t.data),e.push(n);}}),e.length===1?e[0]:e;}if(he[t])return he[t].apply(this,[]);ue.error(\"Method \"+t+\" does not exist on jQuery.dhx_gantt\");});typeof window<\"u\"&&window.dhtmlx&&(window.dhtmlx.attaches||(window.dhtmlx.attaches={}),window.dhtmlx.attaches.attachGantt=function(t,e,n){var i=document.createElement(\"DIV\");n=n||window.gantt,i.id=\"gantt_\"+n.uid(),i.style.width=\"100%\",i.style.height=\"100%\",i.cmp=\"grid\",document.body.appendChild(i),this.attachObject(i.id),this.dataType=\"gantt\",this.dataObj=n;var a=this.vs[this.av];return a.grid=n,n.init(i.id,t,e),i.firstChild.style.border=\"none\",a.gridId=i.id,a.gridObj=i,this.vs[this._viewRestore()].grid;}),typeof window<\"u\"&&window.dhtmlXCellObject!==void 0&&(window.dhtmlXCellObject.prototype.attachGantt=function(t,e,n){n=n||window.gantt;var i=document.createElement(\"DIV\");return i.id=\"gantt_\"+n.uid(),i.style.width=\"100%\",i.style.height=\"100%\",i.cmp=\"grid\",document.body.appendChild(i),this.attachObject(i.id),this.dataType=\"gantt\",this.dataObj=n,n.init(i.id,t,e),i.firstChild.style.border=\"none\",i=null,this.callEvent(\"_onContentAttach\",[]),this.dataObj;});const Va=[\"ctrlKey\",\"altKey\",\"shiftKey\",\"metaKey\"],Ua=[[{unit:\"month\",date:\"%M\",step:1},{unit:\"day\",date:\"%d\",step:1}],[{unit:\"day\",date:\"%d %M\",step:1}],[{unit:\"day\",date:\"%d %M\",step:1},{unit:\"hour\",date:\"%H:00\",step:8}],[{unit:\"day\",date:\"%d %M\",step:1},{unit:\"hour\",date:\"%H:00\",step:1}]];class qa{constructor(e){this.zoomIn=()=>{const n=this.getCurrentLevel()-1;n<0||this.setLevel(n);},this.zoomOut=()=>{const n=this.getCurrentLevel()+1;n>this._levels.length-1||this.setLevel(n);},this.getCurrentLevel=()=>this._activeLevelIndex,this.getLevels=()=>this._levels,this.setLevel=n=>{const i=this._getZoomIndexByName(n);i===-1&&this.$gantt.assert(i!==-1,\"Invalid zoom level for gantt.ext.zoom.setLevel. \"+n+\" is not an expected value.\"),this._setLevel(i,0);},this._getZoomIndexByName=n=>{let i=-1;if(typeof n==\"string\"){if(!isNaN(Number(n))&&this._levels[Number(n)])i=Number(n);else for(let a=0;a<this._levels.length;a++)if(this._levels[a].name===n){i=a;break;}}else i=n;return i;},this._getVisibleDate=()=>{if(!this.$gantt.$task)return null;const n=this.$gantt.getScrollState().x,i=this.$gantt.$task.offsetWidth;this._visibleDate=this.$gantt.dateFromPos(n+i/2);},this._setLevel=(n,i)=>{this._activeLevelIndex=n;const a=this.$gantt,r=a.copy(this._levels[this._activeLevelIndex]),s=a.copy(r);if(delete s.name,a.mixin(a.config,s,!0),[\"resourceTimeline\",\"resourceHistogram\"].forEach(function(o){const l=a.$ui.getView(o);if(l){const c=l.$getConfig();c.fixed_scales||a.mixin(c,s,!0);}}),a.$root&&a.$task){if(i){const o=this.$gantt.dateFromPos(i+this.$gantt.getScrollState().x);this.$gantt.render();const l=this.$gantt.posFromDate(o);this.$gantt.scrollTo(l-i);}else{const o=this.$gantt.$task.offsetWidth;this._visibleDate||this._getVisibleDate();const l=this._visibleDate;this.$gantt.render();const c=this.$gantt.posFromDate(l);this.$gantt.scrollTo(c-o/2);}this.callEvent(\"onAfterZoom\",[this._activeLevelIndex,r]);}},this._attachWheelEvent=n=>{const i=mt.isFF?\"wheel\":\"mousewheel\";let a;a=typeof n.element==\"function\"?n.element():n.element,a&&this._domEvents.attach(a,i,this.$gantt.bind(function(r){if(this._useKey&&(Va.indexOf(this._useKey)<0||!r[this._useKey]))return!1;if(typeof this._handler==\"function\")return this._handler.apply(this,[r]),!0;},this),{passive:!1});},this._defaultHandler=n=>{const i=this.$gantt.$task.getBoundingClientRect().x,a=n.clientX-i;let r=!1;(this.$gantt.env.isFF?-40*n.deltaY:n.wheelDelta)>0&&(r=!0),n.preventDefault(),n.stopPropagation(),this._setScaleSettings(r,a);},this._setScaleDates=()=>{this._initialStartDate&&this._initialEndDate&&(this.$gantt.config.start_date=this._initialStartDate,this.$gantt.config.end_date=this._initialEndDate);},this.$gantt=e,this._domEvents=this.$gantt._createDomEventScope();}init(e){this.$gantt.env.isNode||(this._initialStartDate=e.startDate,this._initialEndDate=e.endDate,this._activeLevelIndex=e.activeLevelIndex?e.activeLevelIndex:0,this._levels=this._mapScales(e.levels||Ua),this._handler=e.handler||this._defaultHandler,this._minColumnWidth=e.minColumnWidth||60,this._maxColumnWidth=e.maxColumnWidth||240,this._widthStep=e.widthStep||3/8*e.minColumnWidth,this._useKey=e.useKey,this._initialized||(ot(this),this.$gantt.attachEvent(\"onGanttScroll\",()=>{this._getVisibleDate();})),this._domEvents.detachAll(),e.trigger===\"wheel\"&&(this.$gantt.$root?this._attachWheelEvent(e):this.$gantt.attachEvent(\"onGanttLayoutReady\",()=>{this.$gantt.attachEvent(\"onGanttRender\",()=>{this._attachWheelEvent(e);},{once:!0});})),this._initialized=!0,this.setLevel(this._activeLevelIndex));}_mapScales(e){return e.map(n=>Array.isArray(n)?{scales:n}:n);}_setScaleSettings(e,n){e?this._stepUp(n):this._stepDown(n);}_stepUp(e){if(this._activeLevelIndex>=this._levels.length-1)return;let n=this._activeLevelIndex;if(this._setScaleDates(),this._widthStep){let i=this.$gantt.config.min_column_width+this._widthStep;i>this._maxColumnWidth&&(i=this._minColumnWidth,n++),this.$gantt.config.min_column_width=i;}else n++;this._setLevel(n,e);}_stepDown(e){if(this._activeLevelIndex<1)return;let n=this._activeLevelIndex;if(this._setScaleDates(),this._widthStep){let i=this.$gantt.config.min_column_width-this._widthStep;i<this._minColumnWidth&&(i=this._maxColumnWidth,n--),this.$gantt.config.min_column_width=i;}else n--;this._setLevel(n,e);}}function Ga(t){function e(){if(t.config.touch!=\"force\"&&(t.config.touch=t.config.touch&&(navigator.userAgent.indexOf(\"Mobile\")!=-1||navigator.userAgent.indexOf(\"iPad\")!=-1||navigator.userAgent.indexOf(\"Android\")!=-1||navigator.userAgent.indexOf(\"Touch\")!=-1)||navigator.platform===\"MacIntel\"&&navigator.maxTouchPoints>1),t.config.touch){var r=!0;try{document.createEvent(\"TouchEvent\");}catch{r=!1;}r?t._touch_events([\"touchmove\",\"touchstart\",\"touchend\"],function(s){return s.touches&&s.touches.length>1?null:s.touches[0]?{target:s.target,pageX:s.touches[0].pageX,pageY:s.touches[0].pageY,clientX:s.touches[0].clientX,clientY:s.touches[0].clientY}:s;},function(s){return s.defaultPrevented;}):window.navigator.pointerEnabled?t._touch_events([\"pointermove\",\"pointerdown\",\"pointerup\"],function(s){return s.pointerType==\"mouse\"?null:s;},function(s){return!s||s.pointerType==\"mouse\";}):window.navigator.msPointerEnabled&&t._touch_events([\"MSPointerMove\",\"MSPointerDown\",\"MSPointerUp\"],function(s){return s.pointerType==s.MSPOINTER_TYPE_MOUSE?null:s;},function(s){return!s||s.pointerType==s.MSPOINTER_TYPE_MOUSE;});}}function n(r){var s=r.$config.scrollX?t.$ui.getView(r.$config.scrollX):null,o=r.$config.scrollY?t.$ui.getView(r.$config.scrollY):null,l={x:null,y:null};return s&&s.getScrollState().visible&&(l.x=s.$view.scrollLeft),o&&o.getScrollState().visible&&(l.y=o.$view.scrollTop),l;}function i(){var r;return t.$ui.getView(\"timeline\")&&(r=t.$ui.getView(\"timeline\")._tasks_dnd),r;}t.config.touch_drag=75,t.config.touch=!0,t.config.touch_feedback=!0,t.config.touch_feedback_duration=1,t._prevent_touch_scroll=!1,t._touch_feedback=function(){t.config.touch_feedback&&navigator.vibrate&&navigator.vibrate(t.config.touch_feedback_duration);},t.attachEvent(\"onGanttReady\",function(){t.$container&&e();}),t.attachEvent(\"onGanttLayoutReady\",function(){t.$container&&t.attachEvent(\"onGanttRender\",e,{once:!0});});var a=[];t._touch_events=function(r,s,o){var l,c=0,d=!1,u=!1,h=null,_=null,p=null,y=[],k=null;let b={};for(var g=0;g<a.length;g++)t.eventRemove(a[g][0],a[g][1],a[g][2]);(a=[]).push([t.$container,r[0],function(f){var v=i();if(!o(f)&&d){_&&clearTimeout(_);var x=s(f);if(v&&(v.drag.id||v.drag.start_drag))return v.on_mouse_move(x),f.preventDefault&&f.preventDefault(),f.cancelBubble=!0,!1;if(!t._prevent_touch_scroll){if(x&&h){var $=h.pageX-x.pageX,w=h.pageY-x.pageY;if(!u&&(Math.abs($)>5||Math.abs(w)>5)&&(u=!0,c=0,l=k?n(k):t.getScrollState()),u){var S,T=l.x+$,E=l.y+w;if(k?(function(C,D,M){var I=C.$config.scrollX?t.$ui.getView(C.$config.scrollX):null,A=C.$config.scrollY?t.$ui.getView(C.$config.scrollY):null;I&&I.scrollTo(D,null),A&&A.scrollTo(null,M);}(k,T,E),S=n(k)):(t.scrollTo(T,E),S=t.getScrollState()),l.x!=S.x&&w>2*$||l.y!=S.y&&$>2*w)return m(f);}}return m(f);}return!0;}}]);try{document.addEventListener(\"touchmove\",function(f){t._touch_drag&&m(f);},{passive:!1});}catch{console.warn(\"Cannot prevent touch event for the page drag\");}for(a.push([this.$container,\"contextmenu\",function(f){if(d)return m(f);}]),a.push([this.$container,r[1],function(f){if(b=f.touches.length,document&&document.body&&document.body.classList.add(\"gantt_touch_active\"),!o(f))if(f.touches&&f.touches.length>1)d=!1;else{h=s(f),k=function(x){for(var $=t.$layout.getCellsByType(\"viewCell\"),w=0;w<$.length;w++){var S=$[w].$view.getBoundingClientRect();if(x.clientX>=S.left&&x.clientX<=S.right&&x.clientY<=S.bottom&&x.clientY>=S.top)return $[w];}}(h),t._locate_css(h,\"gantt_hor_scroll\")||t._locate_css(h,\"gantt_ver_scroll\")||(d=!0);var v=i();_=setTimeout(function(){var x=t.locate(h);v&&x&&!t._locate_css(h,\"gantt_link_control\")&&!t._locate_css(h,\"gantt_grid_data\")&&(v.on_mouse_down(h),v.drag&&v.drag.start_drag&&(function($){const w=t._getTaskLayers();let S=t.getTask($);if(S){let T=t.isTaskVisible($);if(T){p=$;for(let E=0;E<w.length;E++)if(S=w[E].rendered[$],S&&S.getAttribute(t.config.task_attribute)&&S.getAttribute(t.config.task_attribute)==$){const C=S.cloneNode(!0);y.push(S),w[E].rendered[$]=C,S.style.display=\"none\",C.className+=\" gantt_drag_move \",S.parentNode.appendChild(C);}}else if(S.$split_subtask){let E=S.$rendered_parent;if(T=t.isTaskVisible(E),!T)return;p=$;for(let C=0;C<w.length;C++){const D=w[C].rendered[E];let M;if(D&&D.childNodes&&(M=D.querySelector(`[${t.config.task_attribute}=\"${S.id}\"]`)),M){const I=M.cloneNode(!0);M.parentNode.appendChild(I),t.$task_bars.appendChild(M),M.style.display=\"none\",y.push(M),M=null;}}}}}(x),v._start_dnd(h),t._touch_drag=!0,t.refreshTask(x),t._touch_feedback())),_=null;},t.config.touch_drag);}}]),a.push([this.$container,r[2],function(f){if(document&&document.body&&document.body.classList.remove(\"gantt_touch_active\"),!o(f)){_&&clearTimeout(_),t._touch_drag=!1,d=!1;var v=s(f),x=i();if(x&&x.on_mouse_up(v),p&&t.isTaskExists(p)&&(t.refreshTask(p),y.length&&(y.forEach(function(w){w.parentNode&&w.parentNode.removeChild(w);}),t._touch_feedback())),d=u=!1,y=[],p=null,h&&c){var $=/* @__PURE__ */new Date();$-c<500&&b<=1?(t.$services.getService(\"mouseEvents\").onDoubleClick(h),m(f)):c=$;}else c=/* @__PURE__ */new Date();}}]),g=0;g<a.length;g++)t.event(a[g][0],a[g][1],a[g][2]);function m(f){return f&&f.preventDefault&&f.cancelable&&f.preventDefault(),f.cancelBubble=!0,!1;}};}function Ft(){console.log(\"Method is not implemented.\");}function Mt(){}function ht(t){return Mt;}Mt.prototype.render=Ft,Mt.prototype.set_value=Ft,Mt.prototype.get_value=Ft,Mt.prototype.focus=Ft;var $n={getHtmlSelect:function(t,e,n){var i=\"\",a=this;return kt(t=t||[],function(r){var s=[{key:\"value\",value:r.key}];n==r.key&&(s[s.length]={key:\"selected\",value:\"selected\"}),r.attributes&&(s=s.concat(r.attributes)),i+=a.getHtmlOption({innerHTML:r.label},s);}),Dt(\"select\",{innerHTML:i},e);},getHtmlOption:function(t,e){return Dt(\"option\",t,e);},getHtmlButton:function(t,e){return Dt(\"button\",t,e);},getHtmlDiv:function(t,e){return Dt(\"div\",t,e);},getHtmlLabel:function(t,e){return Dt(\"label\",t,e);},getHtmlInput:function(t){return\"<input\"+wn(t||[])+\">\";}};function Dt(t,e,n){return e=e||[],\"<\"+t+wn(n||[])+\">\"+(e.innerHTML||\"\")+\"</\"+t+\">\";}function wn(t){var e=\"\";return kt(t,function(n){e+=\" \"+n.key+\"='\"+n.value+\"'\";}),e;}function qt(t){const e=ht();function n(){return e.apply(this,arguments)||this;}return z(n,e),n.prototype.render=function(i){const a=i.height?`height:${i.height}px;`:\"\";let r=`<div class='gantt_cal_ltext gantt_section_${i.name}' ${a?`style='${a}'`:\"\"}>`;return r+=$n.getHtmlSelect(i.options,[{key:\"style\",value:\"width:100%;\"},{key:\"title\",value:i.name}]),r+=\"</div>\",r;},n.prototype.set_value=function(i,a,r,s){var o=i.firstChild;!o._dhx_onchange&&s.onchange&&(o.onchange=s.onchange,o._dhx_onchange=!0),a===void 0&&(a=(o.options[0]||{}).value),o.value=a||\"\";},n.prototype.get_value=function(i){return i.firstChild.value;},n.prototype.focus=function(i){var a=i.firstChild;t._focus(a,!0);},n;}function Ya(t){var e=qt(t);function n(){return e.apply(this,arguments)||this;}function i(a,r){var s=[],o=[];r&&(s=t.getTaskByTime(),a.allow_root&&s.unshift({id:t.config.root_id,text:a.root_label||\"\"}),s=function(u,h,_){var p=h.filter||function(){return!0;};u=u.slice(0);for(var y=0;y<u.length;y++){var k=u[y];(k.id==_||t.isChildOf(k.id,_)||p(k.id,k)===!1)&&(u.splice(y,1),y--);}return u;}(s,a,r),a.sort&&s.sort(a.sort));for(var l=a.template||t.templates.task_text,c=0;c<s.length;c++){var d=l.apply(t,[s[c].start_date,s[c].end_date,s[c]]);d===void 0&&(d=\"\"),o.push({key:s[c].id,label:d});}return a.options=o,a.map_to=a.map_to||\"parent\",t.form_blocks.select.render.apply(this,arguments);}return z(n,e),n.prototype.render=function(a){return i(a,!1);},n.prototype.set_value=function(a,r,s,o){r===0&&(r=\"0\"),!s.id&&t.getState().lightbox&&(s.id=t.getLightboxValues().id);var l=document.createElement(\"div\");l.innerHTML=i(o,s.id);var c=l.removeChild(l.firstChild);return a.onselect=null,a.parentNode.replaceChild(c,a),t.form_blocks.select.set_value.apply(t,[c,r,s,o]);},n;}function Ja(t){var e=function(){const g=ht();function m(){return g.apply(this,arguments)||this;}return z(m,g),m.prototype.render=function(f){let v=f.height?`${f.height}px`:\"\";return`<div class='gantt_cal_ltext gantt_cal_template gantt_section_${f.name}' ${v?`style='height:${v};'`:\"\"}></div>`;},m.prototype.set_value=function(f,v){f.innerHTML=v||\"\";},m.prototype.get_value=function(f){return f.innerHTML||\"\";},m.prototype.focus=function(){},m;}(),n=function(g){const m=ht();function f(){return m.apply(this,arguments)||this;}return z(f,m),f.prototype.render=function(v){const x=(v.height||\"130\")+\"px\",$=v.placeholder?`placeholder='${v.placeholder}'`:\"\";return`<div class='gantt_cal_ltext gantt_section_${v.name}' style='height:${x};' ${$}><textarea></textarea></div>`;},f.prototype.set_value=function(v,x){g.form_blocks.textarea._get_input(v).value=x||\"\";},f.prototype.get_value=function(v){return g.form_blocks.textarea._get_input(v).value;},f.prototype.focus=function(v){var x=g.form_blocks.textarea._get_input(v);g._focus(x,!0);},f.prototype._get_input=function(v){return v.querySelector(\"textarea\");},f;}(t),i=function(g){const m=ht();function f(){return m.apply(this,arguments)||this;}return z(f,m),f.prototype.render=function(v){var x=g.form_blocks.getTimePicker.call(this,v);let $=\"gantt_section_time\";v.name!==\"time\"&&($+=\" gantt_section_\"+v.name);var w=\"<div style='padding-top:0px;font-size:inherit;text-align:center;' class='\"+$+\"'>\";return w+=x,v.single_date?(x=g.form_blocks.getTimePicker.call(this,v,!0),w+=\"<span></span>\"):w+=\"<span class='gantt_section_time_spacer'> &nbsp;&ndash;&nbsp; </span>\",(w+=x)+\"</div>\";},f.prototype.set_value=function(v,x,$,w){var S=w,T=v.getElementsByTagName(\"select\"),E=w._time_format_order;if(S.auto_end_date)for(var C=function(){I=new Date(T[E[2]].value,T[E[1]].value,T[E[0]].value,0,0),A=g.calculateEndDate({start_date:I,duration:1,task:$}),g.form_blocks._fill_lightbox_select(T,E.size,A,E,S);},D=0;D<4;D++)T[D].onchange=C;var M=g._resolve_default_mapping(w);typeof M==\"string\"&&(M={start_date:M});var I=$[M.start_date]||/* @__PURE__ */new Date(),A=$[M.end_date]||g.calculateEndDate({start_date:I,duration:1,task:$});g.form_blocks._fill_lightbox_select(T,0,I,E,S),g.form_blocks._fill_lightbox_select(T,E.size,A,E,S);},f.prototype.get_value=function(v,x,$){var w,S=v.getElementsByTagName(\"select\"),T=$._time_format_order;return w=g.form_blocks.getTimePickerValue(S,$),typeof g._resolve_default_mapping($)==\"string\"?w:{start_date:w,end_date:function(E,C,D){var M=g.form_blocks.getTimePickerValue(E,$,C.size);return M<=D&&($.autofix_end!==!1||$.single_date)?g.date.add(D,g._get_timepicker_step(),\"minute\"):M;}(S,T,w)};},f.prototype.focus=function(v){g._focus(v.getElementsByTagName(\"select\")[0]);},f;}(t),a=qt(t),r=function(g){var m=ht();function f(){return m.apply(this,arguments)||this;}return z(f,m),f.prototype.render=function(v){const x=v.height?`height:${v.height}px;`:\"\";let $=`<div class='gantt_cal_ltext gantt_cal_lcheckbox gantt_section_${v.name}' ${x?`style='${x}'`:\"\"}>`;if(v.options&&v.options.length)for(var w=0;w<v.options.length;w++)$+=\"<label><input type='checkbox' value='\"+v.options[w].key+\"' name='\"+v.name+\"'>\"+v.options[w].label+\"</label>\";else v.single_value=!0,$+=\"<label><input type='checkbox' name='\"+v.name+\"'></label>\";return $+=\"</div>\",$;},f.prototype.set_value=function(v,x,$,w){var S=Array.prototype.slice.call(v.querySelectorAll(\"input[type=checkbox]\"));!v._dhx_onchange&&w.onchange&&(v.onchange=w.onchange,v._dhx_onchange=!0),w.single_value?S[0].checked=!!x:kt(S,function(T){T.checked=!!x&&x.indexOf(T.value)>=0;});},f.prototype.get_value=function(v,x,$){return $.single_value?v.querySelector(\"input[type=checkbox]\").checked:function(w,S){if(w.map)return w.map(S);for(var T=w.slice(),E=[],C=0;C<T.length;C++)E.push(S(T[C],C));return E;}(Array.prototype.slice.call(v.querySelectorAll(\"input[type=checkbox]:checked\")),function(w){return w.value;});},f.prototype.focus=function(v){g._focus(v.querySelector(\"input[type=checkbox]\"));},f;}(t),s=function(g){const m=ht();function f(){return m.apply(this,arguments)||this;}return z(f,m),f.prototype.render=function(v){const x=v.height?`${v.height}px`:\"\";let $=`<div class='gantt_cal_ltext gantt_cal_lradio gantt_section_${v.name}' ${x?`style='height:${x};'`:\"\"}>`;if(v.options&&v.options.length)for(var w=0;w<v.options.length;w++)$+=\"<label><input type='radio' value='\"+v.options[w].key+\"' name='\"+v.name+\"'>\"+v.options[w].label+\"</label>\";return $+=\"</div>\",$;},f.prototype.set_value=function(v,x,$,w){var S;w.options&&w.options.length&&(S=v.querySelector(\"input[type=radio][value='\"+x+\"']\")||v.querySelector(\"input[type=radio][value='\"+w.default_value+\"']\"))&&(!v._dhx_onchange&&w.onchange&&(v.onchange=w.onchange,v._dhx_onchange=!0),S.checked=!0);},f.prototype.get_value=function(v,x){var $=v.querySelector(\"input[type=radio]:checked\");return $?$.value:\"\";},f.prototype.focus=function(v){g._focus(v.querySelector(\"input[type=radio]\"));},f;}(t),o=function(g){var m=ht();function f(){return m.apply(this,arguments)||this;}function v(w){return w.formatter||new Pt();}function x(w,S){var T=w.getElementsByTagName(\"select\"),E=S._time_format_order,C=0,D=0;if(g.defined(E[3])){var M=T[E[3]],I=parseInt(M.value,10);isNaN(I)&&M.hasAttribute(\"data-value\")&&(I=parseInt(M.getAttribute(\"data-value\"),10)),C=Math.floor(I/60),D=I%60;}return new Date(T[E[2]].value,T[E[1]].value,T[E[0]].value,C,D);}function $(w,S){var T=w.getElementsByTagName(\"input\")[1];return(T=v(S).parse(T.value))&&!window.isNaN(T)||(T=1),T<0&&(T*=-1),T;}return z(f,m),f.prototype.render=function(w){var S=\"<div class='gantt_time_selects'>\"+g.form_blocks.getTimePicker.call(this,w)+\"</div>\",T=\" \"+g.locale.labels[g.config.duration_unit+\"s\"]+\" \",E=w.single_date?\" style='display:none'\":\"\",C=w.readonly?\" disabled='disabled'\":\"\",D=g._waiAria.lightboxDurationInputAttrString(w),M=\"gantt_duration_value\";w.formatter&&(T=\"\",M+=\" gantt_duration_value_formatted\");var I=\"<div class='gantt_duration' \"+E+\"><div class='gantt_duration_inputs'><input type='button' class='gantt_duration_dec' value='−'\"+C+\"><input type='text' value='5days' class='\"+M+\"'\"+C+\" \"+D+\"><input type='button' class='gantt_duration_inc' value='+'\"+C+\"></div><div class='gantt_duration_end_date'>\"+T+\"<span></span></div></div></div>\";let A=\"gantt_section_time gantt_section_duration\";return w.name!==\"time\"&&(A+=\" gantt_section_\"+w.name),\"<div style='padding-top:0px;font-size:inherit;' class='\"+A+\"'>\"+S+\" \"+I+\"</div>\";},f.prototype.set_value=function(w,S,T,E){var C,D,M,I,A=w.getElementsByTagName(\"select\"),N=w.getElementsByTagName(\"input\"),L=N[1],O=[N[0],N[2]],G=w.getElementsByTagName(\"span\")[0],j=E._time_format_order;function H(){var J=x.call(g,w,E),B=$.call(g,w,E),_t=g.calculateEndDate({start_date:J,duration:B,task:T}),Tt=g.templates.task_end_date||g.templates.task_date;G.innerHTML=Tt(_t);}function tt(J){var B=L.value;B=v(E).parse(B),window.isNaN(B)&&(B=0),(B+=J)<1&&(B=1),L.value=v(E).format(B),H();}O[0].onclick=g.bind(function(){tt(-1*g.config.duration_step);},this),O[1].onclick=g.bind(function(){tt(1*g.config.duration_step);},this),A[0].onchange=H,A[1].onchange=H,A[2].onchange=H,A[3]&&(A[3].onchange=H),L.onkeydown=g.bind(function(J){var B;return(B=(J=J||window.event).charCode||J.keyCode||J.which)==g.constants.KEY_CODES.DOWN?(tt(-1*g.config.duration_step),!1):B==g.constants.KEY_CODES.UP?(tt(1*g.config.duration_step),!1):void window.setTimeout(H,1);},this),L.onchange=g.bind(H,this),typeof(C=g._resolve_default_mapping(E))==\"string\"&&(C={start_date:C}),D=T[C.start_date]||/* @__PURE__ */new Date(),M=T[C.end_date]||g.calculateEndDate({start_date:D,duration:1,task:T}),I=Math.round(T[C.duration])||g.calculateDuration({start_date:D,end_date:M,task:T}),I=v(E).format(I),g.form_blocks._fill_lightbox_select(A,0,D,j,E),L.value=I,H();},f.prototype.get_value=function(w,S,T){var E=x(w,T),C=$(w,T),D=g.calculateEndDate({start_date:E,duration:C,task:S});return typeof g._resolve_default_mapping(T)==\"string\"?E:{start_date:E,end_date:D,duration:C};},f.prototype.focus=function(w){g._focus(w.getElementsByTagName(\"select\")[0]);},f;}(t),l=Ya(t),c=qt(t),d=function(g){var m=ht();function f(){return m.apply(this,arguments)||this;}function v($){return!$||$===g.config.constraint_types.ASAP||$===g.config.constraint_types.ALAP;}function x($,w){for(var S=v(w),T=0;T<$.length;T++)$[T].disabled=S;}return z(f,m),f.prototype.render=function($){const w=$.height?`height:${$.height}px;`:\"\";let S=`<div class='gantt_cal_ltext gantt_section_${$.name}' ${w?`style='${w}'`:\"\"}>`;var T=[];for(var E in g.config.constraint_types)T.push({key:g.config.constraint_types[E],label:g.locale.labels[g.config.constraint_types[E]]});return $.options=$.options||T,S+=\"<span data-constraint-type-select>\"+$n.getHtmlSelect($.options,[{key:\"data-type\",value:\"constraint-type\"}])+\"</span>\",S+=\"<label data-constraint-time-select>\"+(g.locale.labels.constraint_date||\"Constraint date\")+\": \"+g.form_blocks.getTimePicker.call(this,$)+\"</label>\",S+=\"</div>\",S;},f.prototype.set_value=function($,w,S,T){var E=$.querySelector(\"[data-constraint-type-select] select\"),C=$.querySelectorAll(\"[data-constraint-time-select] select\"),D=T._time_format_order,M=g._resolve_default_mapping(T);E._eventsInitialized||(E.addEventListener(\"change\",function(N){x(C,N.target.value);}),E._eventsInitialized=!0);var I=S[M.constraint_date]||/* @__PURE__ */new Date();g.form_blocks._fill_lightbox_select(C,0,I,D,T);var A=S[M.constraint_type]||g.getConstraintType(S);E.value=A,x(C,A);},f.prototype.get_value=function($,w,S){var T=$.querySelector(\"[data-constraint-type-select] select\"),E=$.querySelectorAll(\"[data-constraint-time-select] select\"),C=T.value,D=null;return v(C)||(D=g.form_blocks.getTimePickerValue(E,S)),{constraint_type:C,constraint_date:D};},f.prototype.focus=function($){g._focus($.querySelector(\"select\"));},f;}(t),u=function(g){const m=qt(g);function f(){return m.apply(this,arguments)||this;}return z(f,m),f.prototype.render=function(v){var x=g.config.types,$=g.locale.labels,w=[],S=v.filter||function(C,D){return!x.placeholder||D!==x.placeholder;};for(var T in x)!S(T,x[T])==0&&w.push({key:x[T],label:$[\"type_\"+T]});v.options=w;var E=v.onchange;return v.onchange=function(){g._lightbox_current_type=this.value,g.changeLightboxType(this.value),typeof E==\"function\"&&E.apply(this,arguments);},m.prototype.render.apply(this,arguments);},f;}(t),h=function(g){var m=ht();function f(){return m.apply(this,arguments)||this;}function v(S){return S.formatter||new Pt();}function x(S,T,E,C){const D=\"<div class='gantt_time_selects'>\"+g.form_blocks.getTimePicker.call(g,C)+\"</div>\";let M=\" \"+g.locale.labels[g.config.duration_unit+\"s\"]+\" \";const I=C.single_date?\" style='display:none'\":\"\",A=C.readonly?\" disabled='disabled'\":\"\",N=g._waiAria.lightboxDurationInputAttrString(C),L=g.locale.labels.baselines_remove_button;let O=\"gantt_duration_value\";C.formatter&&(M=\"\",O+=\" gantt_duration_value_formatted\");const G=\"<div class='gantt_duration' \"+I+\"><div class='gantt_duration_inputs'><input type='button' class='gantt_duration_dec' value='−'\"+A+\"><input type='text' value='5days' class='\"+O+\"'\"+A+\" \"+N+\"><input type='button' class='gantt_duration_inc' value='+'\"+A+\"></div><div class='gantt_duration_end_date'>\"+M+\"<span></span></div></div></div>\",j=`<div><div class='baseline_delete_button gantt_custom_button'>${L}</div></div>`,H=document.createElement(\"div\");H.className=\"gantt_section_time gantt_section_duration\",H.setAttribute(\"data-baseline-id\",T.id),H.innerHTML=D+G+j+\"<br>\",S.appendChild(H);var tt,J,B,_t=H.getElementsByTagName(\"select\"),Tt=H.getElementsByTagName(\"input\"),Et=Tt[1],Ee=[Tt[0],Tt[2]],Sn=H.getElementsByTagName(\"span\")[0],Tn=C._time_format_order;function gt(){var ct=$.call(g,H,C),U=w.call(g,H,C),En=g.calculateEndDate({start_date:ct,duration:U,task:E}),Cn=g.templates.task_end_date||g.templates.task_date;Sn.innerHTML=Cn(En);}function Ot(ct){var U=Et.value;U=v(C).parse(U),window.isNaN(U)&&(U=0),(U+=ct)<1&&(U=1),Et.value=v(C).format(U),gt();}H.querySelector(\".baseline_delete_button\").onclick=function(ct){const U=H.parentNode;H.innerHTML=\"\",H.remove(),U.innerHTML===\"\"&&(U.innerHTML=g.locale.labels.baselines_section_placeholder);},Ee[0].onclick=g.bind(function(){Ot(-1*g.config.duration_step);},g),Ee[1].onclick=g.bind(function(){Ot(1*g.config.duration_step);},g),_t[0].onchange=gt,_t[1].onchange=gt,_t[2].onchange=gt,_t[3]&&(_t[3].onchange=gt),Et.onkeydown=g.bind(function(ct){var U;return(U=(ct=ct||window.event).charCode||ct.keyCode||ct.which)==g.constants.KEY_CODES.DOWN?(Ot(-1*g.config.duration_step),!1):U==g.constants.KEY_CODES.UP?(Ot(1*g.config.duration_step),!1):void window.setTimeout(gt,1);},g),Et.onchange=g.bind(gt,g),g._resolve_default_mapping(C),tt=T.start_date||/* @__PURE__ */new Date(),J=T.end_date||g.calculateEndDate({start_date:tt,duration:1,task:E}),B=g.calculateDuration({start_date:tt,end_date:J,task:E}),B=v(C).format(B),g.form_blocks._fill_lightbox_select(_t,0,tt,Tn,C),Et.value=B,gt();}function $(S,T){var E=S.getElementsByTagName(\"select\"),C=T._time_format_order,D=0,M=0;if(g.defined(C[3])){var I=E[C[3]],A=parseInt(I.value,10);isNaN(A)&&I.hasAttribute(\"data-value\")&&(A=parseInt(I.getAttribute(\"data-value\"),10)),D=Math.floor(A/60),M=A%60;}return new Date(E[C[2]].value,E[C[1]].value,E[C[0]].value,D,M);}function w(S,T){var E=S.getElementsByTagName(\"input\")[1];return(E=v(T).parse(E.value))&&!window.isNaN(E)||(E=1),E<0&&(E*=-1),E;}return z(f,m),f.prototype.render=function(S){return`<div style='height: ${S.height||100}px; padding-top:0px; font-size:inherit;' class='gantt_section_baselines'></div>`;},f.prototype.set_value=function(S,T,E,C){E.baselines?(S.innerHTML=\"\",E.baselines.forEach(D=>{x(S,D,E,C);})):S.innerHTML=g.locale.labels.baselines_section_placeholder;},f.prototype.get_value=function(S,T,E){const C=[];return S.querySelectorAll(\"[data-baseline-id]\").forEach(D=>{const M=D.dataset.baselineId;let I,A=g.getDatastore(\"baselines\").getItem(M);I=A?g.copy(A):{id:g.uid(),task_id:T.id,text:\"Baseline 1\"},I.start_date=$(D,E),I.duration=w(D,E),I.end_date=g.calculateEndDate({start_date:I.start_date,duration:I.duration,task:T}),C.push(I);}),C;},f.prototype.button_click=function(S,T,E,C){if(g.callEvent(\"onSectionButton\",[g._lightbox_id,E])!==!1&&(T.closest(\".gantt_custom_button.gantt_remove_baselines\")&&(C.innerHTML=g.locale.labels.baselines_section_placeholder),T.closest(\".gantt_custom_button.gantt_add_baselines\"))){C.innerHTML==g.locale.labels.baselines_section_placeholder&&(C.innerHTML=\"\");const D=g.getTask(g._lightbox_id);x(C,{id:g.uid(),task_id:D.id,start_date:D.start_date,end_date:D.end_date},D,g._get_typed_lightbox_config()[S]);}},f.prototype.focus=function(S){g._focus(S.getElementsByTagName(\"select\")[0]);},f;}(t);t._lightbox_methods={},t._lightbox_template=\"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span></div><div class='gantt_cal_larea'></div>\",t._lightbox_template=`<div class='gantt_cal_ltitle'><div class=\"dhx_cal_ltitle_descr\"><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='dhx_title'></span>\n</div>\n<div class=\"gantt_cal_ltitle_controls\">\n\t<a class=\"gantt_cal_ltitle_close_btn dhx_gantt_icon dhx_gantt_icon_close\"></a>\n\n</div></div><div class='gantt_cal_larea'></div>`,t._lightbox_root=t.$root,t.$services.getService(\"state\").registerProvider(\"lightbox\",function(){return{lightbox:t._lightbox_id};}),t.showLightbox=function(g){var m=this.getTask(g);if(this.callEvent(\"onBeforeLightbox\",[g])){var f=this.getLightbox(this.getTaskType(m.type));this.showCover(f),this._fill_lightbox(g,f),this._setLbPosition(f),this._waiAria.lightboxVisibleAttr(f),this.callEvent(\"onLightbox\",[g]);}else t.isTaskExists(g)&&t.getTask(g).$new&&this.$data.tasksStore._updateOrder();},t._get_timepicker_step=function(){if(this.config.round_dnd_dates){var g;if(function(f){var v=f.$ui.getView(\"timeline\");return!(!v||!v.isVisible());}(this)){var m=t.getScale();g=Vt(m.unit)*m.step/60;}return(!g||g>=1440)&&(g=this.config.time_step),g;}return this.config.time_step;},t.getLabel=function(g,m){for(var f=this._get_typed_lightbox_config(),v=0;v<f.length;v++)if(f[v].map_to==g){for(var x=f[v].options,$=0;$<x.length;$++)if(x[$].key==m)return x[$].label;}return\"\";},t.updateCollection=function(g,m){m=m.slice(0);var f=t.serverList(g);if(!f)return!1;f.splice(0,f.length),f.push.apply(f,m||[]),t.resetLightbox();},t.getLightboxType=function(){return this.getTaskType(this._lightbox_type);},t.getLightbox=function(g){var m,f,v,x,$,w=\"\";if(t.config.csp===!0||t.env.isSalesforce?t._lightbox_root=t.$root:t._lightbox_root=document.body,g===void 0&&(g=this.getLightboxType()),!this._lightbox||this.getLightboxType()!=this.getTaskType(g)){this._lightbox_type=this.getTaskType(g),m=document.createElement(\"div\"),w=\"gantt_cal_light\",f=this._is_lightbox_timepicker(),t.config.wide_form&&(w+=\" gantt_cal_light_wide\"),f&&(w+=\" gantt_cal_light_full\"),m.className=w,m.style.visibility=\"hidden\",v=this._lightbox_template,v+=\"<div class='gantt_cal_lcontrols'>\",v+=y(this.config.buttons_left),v+=\"<div class='gantt_cal_lcontrols_push_right'></div>\",v+=y(this.config.buttons_right),v+=\"</div>\",m.innerHTML=v,t._waiAria.lightboxAttr(m),t.config.drag_lightbox&&(m.firstChild.onmousedown=t._ready_to_dnd,m.firstChild.ontouchstart=function(T){t._ready_to_dnd(T.touches[0]);},m.firstChild.onselectstart=function(){return!1;},m.firstChild.style.cursor=\"pointer\",t._init_dnd_events()),this._lightbox&&this.resetLightbox(),_(),this._cover.insertBefore(m,this._cover.firstChild),this._lightbox=m,x=this._get_typed_lightbox_config(g),v=this._render_sections(x);var S=($=m.querySelector(\"div.gantt_cal_larea\")).style.overflow;$.style.overflow=\"hidden\",$.innerHTML=v,function(T){var E,C,D,M,I,A;for(A=0;A<T.length;A++)E=T[A],D=t._lightbox_root.querySelector(\"#\"+E.id),E.id&&D&&(C=D.querySelector(\"label\"),(M=D.nextSibling)&&(I=M.querySelector(\"input, select, textarea\"))&&(I.id=I.id||\"input_\"+t.uid(),E.inputId=I.id,C.setAttribute(\"for\",E.inputId)));}(x),$.style.overflow=S,this._init_lightbox_events(this),m.style.display=\"none\",m.style.visibility=\"visible\";}return this._lightbox;},t._render_sections=function(g){for(var m=\"\",f=0;f<g.length;f++){var v=this.form_blocks[g[f].type];if(v){g[f].id=\"area_\"+this.uid();var x=g[f].hidden?\" style='display:none'\":\"\",$=\"\";g[f].button&&($=\"<div class='gantt_custom_button' data-index='\"+f+\"'><div class='gantt_custom_button_\"+g[f].button+\"'></div><div class='gantt_custom_button_label'>\"+this.locale.labels[\"button_\"+g[f].button]+\"</div></div>\"),g[f].type==\"baselines\"&&($=\"<div class='gantt_custom_button gantt_remove_baselines' data-index='\"+f+\"'><div class='gantt_custom_button_delete_baselines'></div><div class='gantt_custom_button_label'>\"+this.locale.labels.baselines_remove_all_button+\"</div></div><div class='gantt_custom_button gantt_add_baselines' data-index='\"+f+\"'><div class='gantt_custom_button_add_baseline'></div><div class='gantt_custom_button_label'>\"+this.locale.labels.baselines_add_button+\"</div></div>\"),this.config.wide_form&&(m+=\"<div class='gantt_wrap_section' \"+x+\">\"),m+=\"<div id='\"+g[f].id+\"' class='gantt_cal_lsection'><label>\"+$+(g[f].label||this.locale.labels[\"section_\"+g[f].name]||g[f].name)+\"</label></div>\"+v.render.call(this,g[f]),m+=\"</div>\";}}return m;},t._center_lightbox=function(g){t._setLbPosition(g);},t._setLbPosition=function(g){if(!g)return;const m=t._lightbox_root||t.$root;g.style.top=Math.max(m.offsetHeight/2-g.offsetHeight/2,0)+\"px\",g.style.left=Math.max(m.offsetWidth/2-g.offsetWidth/2,0)+\"px\";},t.showCover=function(g){g&&(g.style.display=\"block\",this._setLbPosition(g)),_(),this._cover.style.display=\"\";};const _=function(){t._cover||(t._cover=document.createElement(\"div\"),t._cover.className=\"gantt_cal_cover\",t._cover.style.display=\"none\",t.event(t._cover,\"mousemove\",t._move_while_dnd),t.event(t._cover,\"mouseup\",t._finish_dnd),(t._lightbox_root||t.$root).appendChild(t._cover));};function p(g){for(var m in this.config.types)if(this.config.types[m]==g)return m;return\"task\";}function y(g,m){var f,v,x=\"\";for(v=0;v<g.length;v++)f=t.config._migrate_buttons[g[v]]?t.config._migrate_buttons[g[v]]:g[v],x+=\"<div \"+t._waiAria.lightboxButtonAttrString(f)+\" class='gantt_btn_set gantt_left_btn_set \"+f+\"_set'><div dhx_button='1' data-dhx-button='1' class='\"+f+\"'></div><div>\"+t.locale.labels[f]+\"</div></div>\";return x;}function k(g){var m,f;return g.time_format?g.time_format:(f=[\"%d\",\"%m\",\"%Y\"],Vt((m=t.getScale())?m.unit:t.config.duration_unit)<Vt(\"day\")&&f.push(\"%H:%i\"),f);}function b(g,m,f){var v,x,$,w,S,T,E=\"\";switch(f.timeFormat[m]){case\"%Y\":for(g._time_format_order[2]=m,g._time_format_order.size++,g.year_range&&(isNaN(g.year_range)?g.year_range.push&&($=g.year_range[0],w=g.year_range[1]):v=g.year_range),v=v||10,x=x||Math.floor(v/2),$=$||f.date.getFullYear()-x,w=w||t.getState().max_date.getFullYear()+x,S=$;S<=w;S++)E+=\"<option value='\"+S+\"'>\"+S+\"</option>\";break;case\"%m\":for(g._time_format_order[1]=m,g._time_format_order.size++,S=0;S<12;S++)E+=\"<option value='\"+S+\"'>\"+t.locale.date.month_full[S]+\"</option>\";break;case\"%d\":for(g._time_format_order[0]=m,g._time_format_order.size++,S=1;S<32;S++)E+=\"<option value='\"+S+\"'>\"+S+\"</option>\";break;case\"%H:%i\":for(g._time_format_order[3]=m,g._time_format_order.size++,S=f.first,T=f.date.getDate(),g._time_values=[];S<f.last;)E+=\"<option value='\"+S+\"'>\"+t.templates.time_picker(f.date)+\"</option>\",g._time_values.push(S),f.date.setTime(f.date.valueOf()+60*t._get_timepicker_step()*1e3),S=24*(f.date.getDate()!=T?1:0)*60+60*f.date.getHours()+f.date.getMinutes();}return E;}t._init_lightbox_events=function(){t.lightbox_events={},t.lightbox_events.gantt_save_btn=function(){t._save_lightbox();},t.lightbox_events.gantt_delete_btn=function(){t._lightbox_current_type=null,t.callEvent(\"onLightboxDelete\",[t._lightbox_id])&&(t.isTaskExists(t._lightbox_id)?t.$click.buttons.delete(t._lightbox_id):t.hideLightbox());},t.lightbox_events.gantt_cancel_btn=function(){t._cancel_lightbox();},t.lightbox_events.default=function(g,m){if(m.getAttribute(\"data-dhx-button\"))t.callEvent(\"onLightboxButton\",[m.className,m,g]);else{var f,v,x=X(m);if(x.indexOf(\"gantt_custom_button\")!=-1)if(x.indexOf(\"gantt_custom_button_\")!=-1)for(f=m.parentNode.getAttribute(\"data-index\"),v=m;v&&X(v).indexOf(\"gantt_cal_lsection\")==-1;)v=v.parentNode;else f=m.getAttribute(\"data-index\"),v=m.closest(\".gantt_cal_lsection\"),m=m.firstChild;var $=t._get_typed_lightbox_config();f&&(f*=1,t.form_blocks[$[1*f].type].button_click(f,m,v,v.nextSibling));}},this.event(t.getLightbox(),\"click\",function(g){g.target.closest(\".gantt_cal_ltitle_close_btn\")&&t._cancel_lightbox();var m=yt(g),f=X(m);return f||(f=X(m=m.previousSibling)),m&&f&&f.indexOf(\"gantt_btn_set\")===0&&(f=X(m=m.firstChild)),!(!m||!f)&&(t.defined(t.lightbox_events[m.className])?t.lightbox_events[m.className]:t.lightbox_events.default)(g,m);}),t.getLightbox().onkeydown=function(g){var m=g||window.event,f=g.target||g.srcElement,v=X(f).indexOf(\"gantt_btn_set\")>-1;switch((g||m).keyCode){case t.constants.KEY_CODES.SPACE:if((g||m).shiftKey)return;v&&f.click&&f.click();break;case t.keys.edit_save:if((g||m).shiftKey)return;v&&f.click?f.click():t._save_lightbox();break;case t.keys.edit_cancel:t._cancel_lightbox();}};},t._cancel_lightbox=function(){var g=this.getLightboxValues();t._lightbox_current_type=null,this.callEvent(\"onLightboxCancel\",[this._lightbox_id,g.$new]),t.isTaskExists(g.id)&&g.$new&&(this.silent(function(){t.$data.tasksStore.removeItem(g.id),t._update_flags(g.id,null);}),this.refreshData()),this.hideLightbox();},t._save_lightbox=function(){var g=this.getLightboxValues();t._lightbox_current_type=null,this.callEvent(\"onLightboxSave\",[this._lightbox_id,g,!!g.$new])&&(t.$data.tasksStore._skipTaskRecalculation=\"lightbox\",g.$new?(delete g.$new,this.addTask(g,g.parent,this.getTaskIndex(g.id))):this.isTaskExists(g.id)&&(this.mixin(this.getTask(g.id),g,!0),this.refreshTask(g.id),this.updateTask(g.id)),t.$data.tasksStore._skipTaskRecalculation=!1,this.refreshData(),this.hideLightbox());},t._resolve_default_mapping=function(g){var m=g.map_to;return{time:!0,time_optional:!0,duration:!0,duration_optional:!0}[g.type]?g.map_to==\"auto\"?m={start_date:\"start_date\",end_date:\"end_date\",duration:\"duration\"}:typeof g.map_to==\"string\"&&(m={start_date:g.map_to}):g.type===\"constraint\"&&(g.map_to&&typeof g.map_to!=\"string\"||(m={constraint_type:\"constraint_type\",constraint_date:\"constraint_date\"})),m;},t.getLightboxValues=function(){let g={};t.isTaskExists(this._lightbox_id)&&(g=this.mixin({},this.getTask(this._lightbox_id)));const m=[...this._get_typed_lightbox_config()].sort((f,v)=>f.name===\"time\"?1:v.name===\"time\"?-1:0);for(let f=0;f<m.length;f++){let v=t._lightbox_root.querySelector(\"#\"+m[f].id);v=v&&v.nextSibling;let x=this.form_blocks[m[f].type];if(!x)continue;let $=x.get_value.call(this,v,g,m[f]),w=t._resolve_default_mapping(m[f]);if(typeof w==\"string\"&&w!=\"auto\")g[w]=$;else if(typeof w==\"object\")for(let S in w)w[S]&&(g[w[S]]=$[S]);}return t._lightbox_current_type&&(g.type=t._lightbox_current_type),g;},t.hideLightbox=function(){var g=this.getLightbox();g&&(g.style.display=\"none\"),this._waiAria.lightboxHiddenAttr(g),this._lightbox_id=null,this.hideCover(g),this.resetLightbox(),this.callEvent(\"onAfterLightbox\",[]);},t.hideCover=function(g){g&&(g.style.display=\"none\"),this._cover&&this._cover.parentNode.removeChild(this._cover),this._cover=null;},t.resetLightbox=function(){t._lightbox&&!t._custom_lightbox&&t._lightbox.remove(),t._lightbox=null;},t._set_lightbox_values=function(g,m){var f=g,v=m.getElementsByTagName(\"span\"),x=[];t.templates.lightbox_header?(x.push(\"\"),x.push(t.templates.lightbox_header(f.start_date,f.end_date,f)),v[1].innerHTML=\"\",v[2].innerHTML=t.templates.lightbox_header(f.start_date,f.end_date,f)):(x.push(this.templates.task_time(f.start_date,f.end_date,f)),x.push(String(this.templates.task_text(f.start_date,f.end_date,f)||\"\").substr(0,70)),v[1].innerHTML=this.templates.task_time(f.start_date,f.end_date,f),v[2].innerHTML=String(this.templates.task_text(f.start_date,f.end_date,f)||\"\").substr(0,70)),v[1].innerHTML=x[0],v[2].innerHTML=x[1],t._waiAria.lightboxHeader(m,x.join(\" \"));for(var $=this._get_typed_lightbox_config(this.getLightboxType()),w=0;w<$.length;w++){var S=$[w];if(this.form_blocks[S.type]){var T=t._lightbox_root.querySelector(\"#\"+S.id).nextSibling,E=this.form_blocks[S.type],C=t._resolve_default_mapping($[w]),D=this.defined(f[C])?f[C]:S.default_value;E.set_value.call(t,T,D,f,S),S.focus&&E.focus.call(t,T);}}t.isTaskExists(g.id)&&(t._lightbox_id=g.id);},t._fill_lightbox=function(g,m){var f=this.getTask(g);this._set_lightbox_values(f,m);},t.getLightboxSection=function(g){for(var m=this._get_typed_lightbox_config(),f=0;f<m.length&&m[f].name!=g;f++);var v=m[f];if(!v)return null;this._lightbox||this.getLightbox();var x=t._lightbox_root.querySelector(\"#\"+v.id),$=x.nextSibling,w={section:v,header:x,node:$,getValue:function(T){return t.form_blocks[v.type].get_value.call(t,$,T||{},v);},setValue:function(T,E){return t.form_blocks[v.type].set_value.call(t,$,T,E||{},v);}},S=this._lightbox_methods[\"get_\"+v.type+\"_control\"];return S?S(w):w;},t._lightbox_methods.get_template_control=function(g){return g.control=g.node,g;},t._lightbox_methods.get_select_control=function(g){return g.control=g.node.getElementsByTagName(\"select\")[0],g;},t._lightbox_methods.get_textarea_control=function(g){return g.control=g.node.getElementsByTagName(\"textarea\")[0],g;},t._lightbox_methods.get_time_control=function(g){return g.control=g.node.getElementsByTagName(\"select\"),g;},t._init_dnd_events=function(){var g=t._lightbox_root;this.event(g,\"mousemove\",t._move_while_dnd),this.event(g,\"mouseup\",t._finish_dnd),this.event(g,\"touchmove\",function(m){t._move_while_dnd(m.touches[0]);}),this.event(g,\"touchend\",function(m){t._finish_dnd(m.touches[0]);});},t._move_while_dnd=function(g){if(t._dnd_start_lb){document.gantt_unselectable||(t._lightbox_root.className+=\" gantt_unselectable\",document.gantt_unselectable=!0);var m=t.getLightbox(),f=[g.pageX,g.pageY];m.style.top=t._lb_start[1]+f[1]-t._dnd_start_lb[1]+\"px\",m.style.left=t._lb_start[0]+f[0]-t._dnd_start_lb[0]+\"px\";}},t._ready_to_dnd=function(g){var m=t.getLightbox();t._lb_start=[m.offsetLeft,m.offsetTop],t._dnd_start_lb=[g.pageX,g.pageY];},t._finish_dnd=function(){t._lb_start&&(t._lb_start=t._dnd_start_lb=!1,t._lightbox_root.className=t._lightbox_root.className.replace(\" gantt_unselectable\",\"\"),document.gantt_unselectable=!1);},t._focus=function(g,m){if(g&&g.focus&&!t.config.touch)try{m&&g.select&&g.select(),g.focus();}catch{}},t.form_blocks={getTimePicker:function(g,m){var f,v,x,$=\"\",w=this.config,S={first:0,last:1440,date:this.date.date_part(new Date(t._min_date.valueOf())),timeFormat:k(g)};for(g._time_format_order={size:0},t.config.limit_time_select&&(S.first=60*w.first_hour,S.last=60*w.last_hour+1,S.date.setHours(w.first_hour)),f=0;f<S.timeFormat.length;f++)f>0&&($+=\" \"),(v=b(g,f,S))&&(x=t._waiAria.lightboxSelectAttrString(S.timeFormat[f]),$+=\"<select \"+(g.readonly?\"disabled='disabled'\":\"\")+(m?\" style='display:none' \":\"\")+x+\">\"+v+\"</select>\");return $;},getTimePickerValue:function(g,m,f){var v,x=m._time_format_order,$=0,w=0,S=f||0;return t.defined(x[3])&&(v=parseInt(g[x[3]+S].value,10),$=Math.floor(v/60),w=v%60),new Date(g[x[2]+S].value,g[x[1]+S].value,g[x[0]+S].value,$,w);},_fill_lightbox_select:function(g,m,f,v){if(g[m+v[0]].value=f.getDate(),g[m+v[1]].value=f.getMonth(),g[m+v[2]].value=f.getFullYear(),t.defined(v[3])){var x=60*f.getHours()+f.getMinutes();x=Math.round(x/t._get_timepicker_step())*t._get_timepicker_step();var $=g[m+v[3]];$.value=x,$.setAttribute(\"data-value\",x);}},template:new e(),textarea:new n(),select:new a(),time:new i(),duration:new o(),parent:new l(),radio:new s(),checkbox:new r(),resources:new c(),constraint:new d(),baselines:new h(),typeselect:new u()},t._is_lightbox_timepicker=function(){for(var g=this._get_typed_lightbox_config(),m=0;m<g.length;m++)if(g[m].name==\"time\"&&g[m].type==\"time\")return!0;return!1;},t._delete_task_confirm=function({task:g,message:m,title:f,callback:v,ok:x}){t._simple_confirm(m,f,v,x);},t._delete_link_confirm=function({link:g,message:m,title:f,callback:v,ok:x}){t._simple_confirm(m,f,v,x);},t._simple_confirm=function(g,m,f,v){if(!g)return f();var x={text:g};m&&(x.title=m),v&&(x.ok=v),f&&(x.callback=function($){$&&f();}),t.confirm(x);},t._get_typed_lightbox_config=function(g){g===void 0&&(g=this.getLightboxType());var m=p.call(this,g);return t.config.lightbox[m+\"_sections\"]?t.config.lightbox[m+\"_sections\"]:t.config.lightbox.sections;},t._silent_redraw_lightbox=function(g){var m=this.getLightboxType();if(this.getState().lightbox){var f=this.getState().lightbox,v=this.getLightboxValues(),x=this.copy(this.getTask(f));this.resetLightbox();var $=this.mixin(x,v,!0),w=this.getLightbox(g||void 0);this._set_lightbox_values($,w),this.showCover(w);}else this.resetLightbox(),this.getLightbox(g||void 0);this.callEvent(\"onLightboxChange\",[m,this.getLightboxType()]);};}function Ka(t){if(!mt.isNode){t.utils={arrayFind:Ln,dom:rn};var e=Se();t.event=e.attach,t.eventRemove=e.detach,t._eventRemoveAll=e.detachAll,t._createDomEventScope=e.extend,P(t,sa(t));var n=ja.init(t);t.$ui=n.factory,t.$ui.layers=n.render,t.$mouseEvents=n.mouseEvents,t.$services.setService(\"mouseEvents\",function(){return t.$mouseEvents;}),t.mixin(t,n.layersApi),function(i){delete i.addTaskLayer,delete i.addLinkLayer;}(t),t.$services.setService(\"layers\",function(){return n.layersService;}),t.mixin(t,/* @__PURE__ */function(){function i(u){return u.$ui.getView(\"timeline\");}function a(u){return u.$ui.getView(\"grid\");}function r(u){var h=i(u);if(h&&!h.$config.hidden)return h;var _=a(u);return _&&!_.$config.hidden?_:null;}function s(u){var h=null,_=!1;return[\".gantt_drag_marker.gantt_grid_resize_area\",\".gantt_drag_marker .gantt_row.gantt_row_task\",\".gantt_drag_marker.gantt_grid_dnd_marker\"].forEach(function(p){_=_||!!document.querySelector(p);}),(h=_?a(u):r(u))?l(u,h,\"scrollY\"):null;}function o(u){var h=r(u);return h&&h.id!=\"grid\"?l(u,h,\"scrollX\"):null;}function l(u,h,_){var p=h.$config[_];return u.$ui.getView(p);}var c=\"DEFAULT_VALUE\";function d(u,h,_,p){var y=u(this);return y&&y.isVisible()?y[h].apply(y,_):p?p():c;}return{getColumnIndex:function(u){var h=d.call(this,a,\"getColumnIndex\",[u]);return h===c?0:h;},dateFromPos:function(u){var h=d.call(this,i,\"dateFromPos\",Array.prototype.slice.call(arguments));return h===c?this.getState().min_date:h;},posFromDate:function(u){var h=d.call(this,i,\"posFromDate\",[u]);return h===c?0:h;},getRowTop:function(u){var h=this,_=d.call(h,i,\"getRowTop\",[u],function(){return d.call(h,a,\"getRowTop\",[u]);});return _===c?0:_;},getTaskTop:function(u){var h=this,_=d.call(h,i,\"getItemTop\",[u],function(){return d.call(h,a,\"getItemTop\",[u]);});return _===c?0:_;},getTaskPosition:function(u,h,_){var p=d.call(this,i,\"getItemPosition\",[u,h,_]);return p===c?{left:0,top:this.getTaskTop(u.id),height:this.getTaskBarHeight(u.id),width:0}:p;},getTaskBarHeight:function(u,h){var _=this,p=d.call(_,i,\"getBarHeight\",[u,h],function(){return d.call(_,a,\"getItemHeight\",[u]);});return p===c?0:p;},getTaskHeight:function(u){var h=this,_=d.call(h,i,\"getItemHeight\",[u],function(){return d.call(h,a,\"getItemHeight\",[u]);});return _===c?0:_;},columnIndexByDate:function(u){var h=d.call(this,i,\"columnIndexByDate\",[u]);return h===c?0:h;},roundTaskDates:function(){d.call(this,i,\"roundTaskDates\",[]);},getScale:function(){var u=d.call(this,i,\"getScale\",[]);return u===c?null:u;},getTaskNode:function(u){var h=i(this);if(h&&h.isVisible()){var _=h._taskRenderer.rendered[u];if(!_){var p=h.$config.item_attribute;_=h.$task_bars.querySelector(\"[\"+p+\"='\"+u+\"']\");}return _||null;}return null;},getLinkNode:function(u){var h=i(this);return h.isVisible()?h._linkRenderer.rendered[u]:null;},scrollTo:function(u,h){var _=s(this),p=o(this),y={position:0},k={position:0};_&&(k=_.getScrollState()),p&&(y=p.getScrollState());var b=p&&1*u==u,g=_&&1*h==h;if(b&&g)for(var m=_._getLinkedViews(),f=p._getLinkedViews(),v=[],x=0;x<m.length;x++)for(var $=0;$<f.length;$++)m[x].$config.id&&f[$].$config.id&&m[x].$config.id===f[$].$config.id&&v.push(m[x].$config.id);b&&(v&&v.forEach(function(T){this.$ui.getView(T).$config.$skipSmartRenderOnScroll=!0;}.bind(this)),p.scroll(u),v&&v.forEach(function(T){this.$ui.getView(T).$config.$skipSmartRenderOnScroll=!1;}.bind(this))),g&&_.scroll(h);var w={position:0},S={position:0};_&&(w=_.getScrollState()),p&&(S=p.getScrollState()),this.callEvent(\"onGanttScroll\",[y.position,k.position,S.position,w.position]);},showDate:function(u){var h=this.posFromDate(u),_=Math.max(h-this.config.task_scroll_offset,0);this.scrollTo(_);},showTask:function(u){var h=this.getTaskPosition(this.getTask(u)),_=h.left;this.config.rtl&&(_=h.left+h.width);var p,y=Math.max(_-this.config.task_scroll_offset,0),k=this._scroll_state().y;p=k?h.top-(k-this.getTaskBarHeight(u))/2:h.top,this.scrollTo(y,p);var b=a(this),g=i(this);b&&g&&b.$config.scrollY!=g.$config.scrollY&&l(this,b,\"scrollY\").scrollTo(null,p);},_scroll_state:function(){var u={x:!1,y:!1,x_pos:0,y_pos:0,scroll_size:this.config.scroll_size+1,x_inner:0,y_inner:0},h=s(this),_=o(this);if(_){var p=_.getScrollState();p.visible&&(u.x=p.size,u.x_inner=p.scrollSize),u.x_pos=p.position||0;}if(h){var y=h.getScrollState();y.visible&&(u.y=y.size,u.y_inner=y.scrollSize),u.y_pos=y.position||0;}return u;},getScrollState:function(){var u=this._scroll_state();return{x:u.x_pos,y:u.y_pos,inner_width:u.x,inner_height:u.y,width:u.x_inner,height:u.y_inner};},getLayoutView:function(u){return this.$ui.getView(u);},scrollLayoutCell:function(u,h,_){const p=this.$ui.getView(u);if(!p)return!1;if(h!==null){const y=this.$ui.getView(p.$config.scrollX);y&&y.scrollTo(h,null);}if(_!==null){const y=this.$ui.getView(p.$config.scrollY);y&&y.scrollTo(null,_);}}};}()),function(i){i.resetSkin||(i.resetSkin=function(){this.skin=\"\",ce(!0,this);},i.skins={},i.attachEvent(\"onGanttLayoutReady\",function(){ce(!1,this),r();})),i._addThemeClass=function(){document.documentElement.setAttribute(\"data-gantt-theme\",i.skin);},i.setSkin=function(s){const o=this.skin!==s;this.skin=s,i._addThemeClass(),r(),i.$root&&(ce(!o,i),this.render());};let a=null;function r(){const s=i.$root;a&&clearInterval(a),s&&(a=setInterval(()=>{const o=getComputedStyle(s).getPropertyValue(\"--dhx-gantt-theme\");o&&o!==i.skin&&i.setSkin(o);},100));}i.attachEvent(\"onDestroy\",function(){clearInterval(a);});}(t),function(i){i.skins.skyblue={config:{grid_width:370,row_height:27,bar_height_padding:4,scale_height:27,link_line_width:1,link_arrow_size:8,link_radius:2,lightbox_additional_height:75},_second_column_width:95,_third_column_width:80};}(t),function(i){i.skins.dark={config:{grid_width:390,row_height:36,scale_height:36,link_line_width:2,link_arrow_size:12,bar_height_padding:9,lightbox_additional_height:75},_second_column_width:100,_third_column_width:70};}(t),function(i){i.skins.meadow={config:{grid_width:380,row_height:27,scale_height:30,link_line_width:2,link_arrow_size:10,bar_height_padding:4,lightbox_additional_height:72},_second_column_width:95,_third_column_width:80};}(t),function(i){i.skins.terrace={config:{grid_width:390,row_height:36,scale_height:36,link_line_width:2,link_arrow_size:12,bar_height_padding:9,lightbox_additional_height:75},_second_column_width:100,_third_column_width:70};}(t),function(i){i.skins.broadway={config:{grid_width:390,row_height:35,scale_height:35,link_line_width:1,link_arrow_size:9,bar_height_padding:4,lightbox_additional_height:86},_second_column_width:100,_third_column_width:80,_lightbox_template:\"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span><div class='gantt_cancel_btn'></div></div><div class='gantt_cal_larea'></div>\",_config_buttons_left:{},_config_buttons_right:{gantt_delete_btn:\"icon_delete\",gantt_save_btn:\"icon_save\"}};}(t),function(i){i.skins.material={config:{grid_width:411,row_height:34,scale_height:36,link_line_width:2,link_arrow_size:12,bar_height_padding:9,lightbox_additional_height:80},_second_column_width:110,_third_column_width:75,_redefine_lightbox_buttons:{buttons_left:[\"dhx_delete_btn\"],buttons_right:[\"dhx_cancel_btn\",\"dhx_save_btn\"]}},i.attachEvent(\"onAfterTaskDrag\",function(a){var r=i.getTaskNode(a);r&&(r.className+=\" gantt_drag_animation\",setTimeout(function(){var s=r.className.indexOf(\" gantt_drag_animation\");s>-1&&(r.className=r.className.slice(0,s));},200));});}(t),function(i){i.skins.contrast_black={config:{grid_width:390,row_height:35,scale_height:35,link_line_width:2,link_arrow_size:12,lightbox_additional_height:75},_second_column_width:100,_third_column_width:80};}(t),function(i){i.skins.contrast_white={config:{grid_width:390,row_height:35,scale_height:35,link_line_width:2,link_arrow_size:12,lightbox_additional_height:75},_second_column_width:100,_third_column_width:80};}(t),function(i){i.ext||(i.ext={});for(var a=[Fa,null,null],r=0;r<a.length;r++)a[r]&&a[r](i);i.ext.zoom=new qa(i);}(t),Ga(t),Ja(t),function(i){i._extend_to_optional=function(a){var r=a,s={render:r.render,focus:r.focus,set_value:function(o,l,c,d){var u=i._resolve_default_mapping(d);if(!c[u.start_date]||u.start_date==\"start_date\"&&this._isAllowedUnscheduledTask(c)){s.disable(o,d);var h={};for(var _ in u)h[u[_]]=c[_];return r.set_value.call(i,o,l,h,d);}return s.enable(o,d),r.set_value.call(i,o,l,c,d);},get_value:function(o,l,c){return c.disabled?{start_date:null}:r.get_value.call(i,o,l,c);},update_block:function(o,l){if(i.callEvent(\"onSectionToggle\",[i._lightbox_id,l]),o.style.display=l.disabled?\"none\":\"\",l.button){var c=o.previousSibling.querySelector(\".gantt_custom_button_label\"),d=i.locale.labels,u=l.disabled?d[l.name+\"_enable_button\"]:d[l.name+\"_disable_button\"];c.innerHTML=u;}},disable:function(o,l){l.disabled=!0,s.update_block(o,l);},enable:function(o,l){l.disabled=!1,s.update_block(o,l);},button_click:function(o,l,c,d){if(i.callEvent(\"onSectionButton\",[i._lightbox_id,c])!==!1){var u=i._get_typed_lightbox_config()[o];u.disabled?s.enable(d,u):s.disable(d,u);}}};return s;},i.form_blocks.duration_optional=i._extend_to_optional(i.form_blocks.duration),i.form_blocks.time_optional=i._extend_to_optional(i.form_blocks.time);}(t),function(i){var a=new RegExp(`<(?:.|\n)*?>`,\"gm\"),r=new RegExp(\" +\",\"gm\");function s(d){return(d+\"\").replace(a,\" \").replace(r,\" \");}var o=new RegExp(\"'\",\"gm\");function l(d){return(d+\"\").replace(o,\"&#39;\");}for(var c in i._waiAria={getAttributeString:function(d){var u=[\" \"];for(var h in d){var _=l(s(d[h]));u.push(h+\"='\"+_+\"'\");}return u.push(\" \"),u.join(\" \");},getTimelineCellAttr:function(d){return i._waiAria.getAttributeString({\"aria-label\":d});},_taskCommonAttr:function(d,u){d.start_date&&d.end_date&&(u.setAttribute(\"aria-label\",s(i.templates.tooltip_text(d.start_date,d.end_date,d))),d.$dataprocessor_class&&u.setAttribute(\"aria-busy\",!0));},setTaskBarAttr:function(d,u){this._taskCommonAttr(d,u),u.setAttribute(\"role\",\"img\"),!i.isReadonly(d)&&i.config.drag_move&&(d.id!=i.getState(\"tasksDnd\").drag_id?u.setAttribute(\"aria-grabbed\",!1):u.setAttribute(\"aria-grabbed\",!0));},taskRowAttr:function(d,u){this._taskCommonAttr(d,u),!i.isReadonly(d)&&i.config.order_branch&&u.setAttribute(\"aria-grabbed\",!1),u.setAttribute(\"role\",\"row\"),u.setAttribute(\"aria-selected\",i.isSelectedTask(d.id)?\"true\":\"false\"),u.setAttribute(\"aria-level\",d.$level+1||1),i.hasChild(d.id)&&u.setAttribute(\"aria-expanded\",d.$open?\"true\":\"false\");},linkAttr:function(d,u){var h=i.config.links,_=d.type==h.finish_to_start||d.type==h.start_to_start,p=d.type==h.start_to_start||d.type==h.start_to_finish,y=i.locale.labels.link+\" \"+i.templates.drag_link(d.source,p,d.target,_);u.setAttribute(\"role\",\"img\"),u.setAttribute(\"aria-label\",s(y));},gridSeparatorAttr:function(d){d.setAttribute(\"role\",\"columnheader\");},rowResizerAttr:function(d){d.setAttribute(\"role\",\"row\");},lightboxHiddenAttr:function(d){d.setAttribute(\"aria-hidden\",\"true\");},lightboxVisibleAttr:function(d){d.setAttribute(\"aria-hidden\",\"false\");},lightboxAttr:function(d){d.setAttribute(\"role\",\"dialog\"),d.setAttribute(\"aria-hidden\",\"true\"),d.firstChild.setAttribute(\"role\",\"heading\"),d.firstChild.setAttribute(\"aria-level\",\"1\");},lightboxButtonAttrString:function(d){return this.getAttributeString({role:\"button\",\"aria-label\":i.locale.labels[d],tabindex:\"0\"});},lightboxHeader:function(d,u){d.setAttribute(\"aria-label\",u);},lightboxSelectAttrString:function(d){var u=\"\";switch(d){case\"%Y\":u=i.locale.labels.years;break;case\"%m\":u=i.locale.labels.months;break;case\"%d\":u=i.locale.labels.days;break;case\"%H:%i\":u=i.locale.labels.hours+i.locale.labels.minutes;}return i._waiAria.getAttributeString({\"aria-label\":u});},lightboxDurationInputAttrString:function(d){return this.getAttributeString({\"aria-label\":i.locale.labels.column_duration,\"aria-valuemin\":\"0\",role:\"spinbutton\"});},inlineEditorAttr:function(d){d.setAttribute(\"role\",\"row\");},gridAttrString:function(){return[\" role='treegrid'\",i.config.multiselect?\"aria-multiselectable='true'\":\"aria-multiselectable='false'\",\" \"].join(\" \");},gridScaleRowAttrString:function(){return\"role='row'\";},gridScaleCellAttrString:function(d,u){var h=\"\";if(d.name==\"add\")h=this.getAttributeString({role:\"columnheader\",\"aria-label\":i.locale.labels.new_task});else{var _={role:\"columnheader\",\"aria-label\":i.config.external_render&&i.config.external_render.isElement(u)?\"\":u};i._sort&&i._sort.name==d.name&&(i._sort.direction==\"asc\"?_[\"aria-sort\"]=\"ascending\":_[\"aria-sort\"]=\"descending\"),h=this.getAttributeString(_);}return h;},gridDataAttrString:function(){return\"role='rowgroup'\";},reorderMarkerAttr:function(d){d.setAttribute(\"role\",\"grid\"),d.firstChild.removeAttribute(\"aria-level\"),d.firstChild.setAttribute(\"aria-grabbed\",\"true\");},gridCellAttrString:function(d,u,h){var _={role:\"gridcell\",\"aria-label\":u};return d.editor&&!i.isReadonly(h)||(_[\"aria-readonly\"]=!0),this.getAttributeString(_);},gridAddButtonAttrString:function(d){return this.getAttributeString({role:\"button\",\"aria-label\":i.locale.labels.new_task});},messageButtonAttrString:function(d){return\"tabindex='0' role='button' aria-label='\"+d+\"'\";},messageInfoAttr:function(d){d.setAttribute(\"role\",\"alert\");},messageModalAttr:function(d,u){d.setAttribute(\"role\",\"dialog\"),u&&d.setAttribute(\"aria-labelledby\",u);},quickInfoAttr:function(d){d.setAttribute(\"role\",\"dialog\");},quickInfoHeaderAttrString:function(){return\" role='heading' aria-level='1' \";},quickInfoHeader:function(d,u){d.setAttribute(\"aria-label\",u);},quickInfoButtonAttrString:function(d){return i._waiAria.getAttributeString({role:\"button\",\"aria-label\":d,tabindex:\"0\"});},tooltipAttr:function(d){d.setAttribute(\"role\",\"tooltip\");},tooltipVisibleAttr:function(d){d.setAttribute(\"aria-hidden\",\"false\");},tooltipHiddenAttr:function(d){d.setAttribute(\"aria-hidden\",\"true\");}},i._waiAria)i._waiAria[c]=/* @__PURE__ */function(d){return function(){return i.config.wai_aria_attributes?d.apply(this,arguments):\"\";};}(i._waiAria[c]);}(t),t.locate=function(i){var a=yt(i);if(dt(a,\".gantt_task_row\"))return null;var r=arguments[1]||this.config.task_attribute,s=nt(a,r);return s?s.getAttribute(r):null;},t._locate_css=function(i,a,r){return pt(i,a,r);},t._locateHTML=function(i,a){return nt(i,a||this.config.task_attribute);};}t.attachEvent(\"onParse\",function(){F(t)||t.attachEvent(\"onGanttRender\",function(){if(t.config.initial_scroll){var i=t.getTaskByIndex(0),a=i?i.id:t.config.root_id;t.isTaskExists(a)&&t.$task&&t.utils.dom.isChildOf(t.$task,t.$container)&&t.showTask(a);}},{once:!0});}),t.attachEvent(\"onBeforeGanttReady\",function(){this.config.scroll_size||(this.config.scroll_size=Xe()||15),F(t)||(this._eventRemoveAll(),this.$mouseEvents.reset(),this.resetLightbox());}),t.attachEvent(\"onGanttReady\",function(){!F(t)&&t.config.rtl&&t.$layout.getCellsByType(\"viewCell\").forEach(function(i){var a=i.$config.scrollX;if(a){var r=t.$ui.getView(a);r&&r.scrollTo(r.$config.scrollSize,0);}});}),t.attachEvent(\"onGanttReady\",function(){if(!F(t)){var i=t.plugins(),a={auto_scheduling:t.autoSchedule,click_drag:t.ext.clickDrag,critical_path:t.isCriticalTask,drag_timeline:t.ext.dragTimeline,export_api:t.exportToPDF,fullscreen:t.ext.fullscreen,grouping:t.groupBy,keyboard_navigation:t.ext.keyboardNavigation,marker:t.addMarker,multiselect:t.eachSelectedTask,overlay:t.ext.overlay,quick_info:t.templates.quick_info_content,tooltip:t.ext.tooltips,undo:t.undo};for(let r in a)a[r]&&!i[r]&&console.warn(`You connected the '${r}' extension via an obsolete file. \nTo fix it, you need to remove the obsolete file and connect the extension via the plugins method: https://docs.dhtmlx.com/gantt/api__gantt_plugins.html`);}});}const Xa=Z.gantt=function(t){var e=ra(t);return e.env.isNode||(Ka(e),function(n){n.load=function(i,a,r){this._load_url=i,this.assert(arguments.length,\"Invalid load arguments\");var s=\"json\",o=null;return arguments.length>=3?(s=a,o=r):typeof arguments[1]==\"string\"?s=arguments[1]:typeof arguments[1]==\"function\"&&(o=arguments[1]),this._load_type=s,this.callEvent(\"onLoadStart\",[i,s]),this.ajax.get(i,n.bind(function(l){this.on_load(l,s),this.callEvent(\"onLoadEnd\",[i,s]),typeof o==\"function\"&&o.call(this);},this));};}(e)),e;}(Vn);export{Xa as default,Xa as gantt};","map":{"version":3,"names":["V","t","e","n","i","a","getBoundingClientRect","r","s","document","body","o","documentElement","parentNode","l","window","pageYOffset","scrollTop","c","pageXOffset","scrollLeft","d","clientTop","u","clientLeft","top","left","offsetWidth","right","offsetHeight","bottom","parseInt","offsetTop","offsetLeft","offsetParent","y","Math","round","x","width","height","Dn","getComputedStyle","display","visibility","currentStyle","An","isNaN","getAttribute","In","area","nodeName","loLowerCase","Mn","input","select","textarea","button","object","toLowerCase","hasAttribute","Lt","querySelectorAll","join","Array","prototype","slice","call","length","$position","sort","tabIndex","splice","Xe","createElement","style","cssText","appendChild","clientWidth","removeChild","max","X","className","baseVal","indexOf","_e","wt","Gt","split","RegExp","replace","we","getElementById","querySelector","Bt","Ze","innerHTML","firstChild","Qe","tn","childNodes","push","yt","tagName","event","target","srcElement","shadowRoot","composedPath","nt","host","String","trim","apply","pt","charAt","rt","clientX","clientY","touches","en","Y","dt","closest","matches","msMatchesSelector","webkitMatchesSelector","contains","parentElement","nodeType","console","error","nn","an","head","createShadowRoot","attachShadow","ge","activeElement","getSelection","focusNode","vt","ShadowRoot","hasClass","classList","test","hasShadowParent","insertNode","isChildOf","isShadowDomSupported","locateAttribute","locateClassName","removeClassName","removeNode","toNode","Symbol","toStringTag","value","Z","global","Nn","constructor","_mouseDown","_touchStarts","_touchActive","_longTapTimer","_gantt","_domEvents","_createDomEventScope","attach","getViewPort","_originPosition","_restoreOriginPosition","position","$services","getService","registerProvider","autoscroll","startDragAndDrop","setStart","copy","setPosition","setEnd","p","$root","changedTouches","h","_","setTimeout","config","touch_drag","clearTimeout","utils","dom","preventDefault","getFilterTargets","_getCoordinates","dragEnd","ext","clickDrag","k","drag_timeline","useKey","b","abs","relative","render","detach","detachAll","unregisterProvider","destructor","absolute","sn","EventHost","_silent_mode","listeners","_silentStart","_silentEnd","ot","attachEvent","eventStorage","arguments","addEvent","id","once","handler","removeEvent","clear","thisObject","bind","attachAll","callEvent","ev_listen_all","concat","checkEvent","detachEvent","detachAllEvents","Ce","second","minute","hour","day","week","month","quarter","year","Vt","kt","forEach","Ln","find","zt","includes","fe","isArray","pop","Q","getFullYear","getMonth","getDate","bt","getTime","De","result","$cancelTimeout","$pending","$execute","at","Ae","At","floor","Pn","_el","defaultRender","min","_singleRow","_getTaskPositionByTop","_startPoint","_view","_viewPort","viewPort","add","callback","_callback","_endPoint","draw","singleRow","_useRequestAnimationFrame","useRequestAnimationFrame","requestAnimationFrame","getElement","_startDate","dateFromPos","_endDate","_positionPoint","getState","max_date","valueOf","getTaskByTime","_getTasksByTop","getInBounds","index","getTaskByIndex","getItemIndexByTopPosition","getItemHeight","getItemTop","getTotalHeight","row_height","getTaskCount","te","Yt","_calculateDirectionVector","_trace","magnitude","sqrt","angleDegrees","atan2","PI","_applyDndReadyStyles","_timeline","$task","_clearDndReadyStyles","remove","_getScrollPosition","$ui","getView","$config","scrollX","getScrollState","scrollY","_countNewScrollPosition","_scrollState","_setScrollPosition","scrollLayoutCell","$id","_stopDrag","_originalReadonly","readonly","_originAutoscroll","_startDrag","create","_isDragInProgress","ignore","enabled","click_drag","Rn","$destroyed","focus","eventRemove","currentTarget","$keyboardNavigation","trapFocus","getLightbox","getActiveElement","isModal","Hn","show","_showForTask","_showAtCoordinates","hide","_quickInfoBox","_quickInfoBoxId","_quickInfoTask","quick_info_detached","getNode","setContainer","_container","setContent","taskId","header","title","date","content","buttons","quickinfo_buttons","_createQuickInfoElement","_waiAria","quickInfoHeader","quickInfoButtonAttrString","locale","labels","_qiButtonClickHandler","_qiKeyPressHandler","_qi_button_click","which","_appendAtCoordinates","show_quick_info","_getContainer","_get_event_counter_part","xViewport","yViewport","_init_quick_info","_prepare_quick_info_classname","_fill_quick_data","_show_quick_info","getTaskNode","getTaskRowNode","dx","dy","quickInfoAttr","quickInfoHeaderAttrString","parent","getTask","_quickInfoReadonly","isReadonly","getTaskType","templates","quick_info_class","start_date","end_date","icon_delete","icon_edit","quick_info_title","quick_info_date","quick_info_content","$click","$task_data","$grid_data","$grid","$layout","ee","On","toString","q","Date","Object","$$typeof","hasOwnProperty","P","W","st","R","on","addEventListener","ln","removeEventListener","Se","element","capture","extend","zn","_tooltipNode","tooltipAttr","setViewport","_root","_isLikeMouseEvent","_calculateTooltipPosition","tooltipVisibleAttr","tooltipHiddenAttr","_getViewPort","_getViewPortSize","tooltip_offset_x","tooltip_offset_y","Wn","_listeners","tooltip","_initDelayedFunctions","hideTooltip","delayHide","selector","doOnMouseEnter","onmouseenter","onmousemove","onmouseleave","node","tooltipFor","createEventObject","createEvent","html","delayShow","tooltip_timeout","tooltip_hide_timeout","Ie","onBeforeUndo","onBeforeRedo","Me","jn","_batchAction","_batchMode","_ignore","_ignoreMoveEvents","_initialTasks","_initialLinks","_nestedTasks","_nestedLinks","_undo","_attachEvents","store","undo_types","task","_storeTask","link","_storeLink","isMoveEventsIgnored","toggleIgnoreMoveEvents","startIgnore","stopIgnore","startBatchAction","_timeout","stopBatchAction","action","logAction","onTaskAdded","_storeTaskCommand","command","type","onTaskUpdated","update","onTaskMoved","$local_index","getTaskIndex","_storeEntityCommand","getInitialTask","move","entity","onTaskDeleted","_storeLinkCommand","onLinkAdded","onLinkUpdated","onLinkDeleted","setNestedTasks","_getLinks","setInitialTask","setInitialLink","$index","getGlobalTaskIndex","setInitialTaskObject","clearInitialTasks","getLink","getInitialLink","clearInitialLinks","saveInitialAll","eachTask","getLinks","clearUndoStack","clearRedoStack","getDatastore","drag_id","isSummaryTask","drag_project","plugins","multiselect","getSelectedTasks","inlineEditors","_storeCommand","updateConfigs","undoEnabled","commands","isTaskExists","$source","$target","Fn","maxSteps","redoEnabled","invert","oldValue","inverseCommands","assert","_undoStack","_redoStack","getUndoStack","setUndoStack","getRedoStack","setRedoStack","undo_steps","undo_actions","undo","redo","_pop","_reorderCommands","_applyAction","_push","shift","any","get","isExists","batchUpdate","startsWith","Vn","$container","dragTimeline","fullscreen","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","overflow","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","zIndex","modified","getFullscreenElement","originalPositioning","warning","log","expand","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","msRequestFullscreen","mozRequestFullScreen","requestFullscreen","collapse","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","exitFullscreen","toggle","keyboard_navigation","keyboard_navigation_cells","_compose","shortcuts","createCommand","modifiers","alt","ctrl","meta","keyCode","parse","getExpressions","getWords","commandKeys","specialKeys","charCodeAt","getCommandFromEvent","shiftKey","altKey","ctrlKey","metaKey","fromCharCode","getHashFromEvent","getHash","junctionChar","combinationChar","backspace","tab","enter","esc","space","up","down","home","end","pageup","pagedown","delete","insert","plus","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","EventHandler","_handlers","findHandler","doAction","facade","returnValue","unbind","bindAll","initKeys","keys","getFocusableNodes","GanttNode","blur","isEnabled","scrollHorizontal","getScale","step","unit","scrollTo","posFromDate","scrollVertical","alt+left","alt+right","alt+up","alt+down","ctrl+z","ctrl+r","KeyNavNode","isValid","fallback","moveTo","dispatcher","setActiveNode","compareTo","setAttribute","$eventAttached","HeaderCell","show_grid","getVisibleTaskCount","getGridColumns","TaskRow","fromDomElement","previousSibling","$grid_scale","getChildren","root_id","TaskCell","enter, space","click","ctrl+enter","createTask","globalIndex","splitItem","$split_subtask","parentId","getParent","locate","isTaskVisible","task_attribute","replaceAll","getTaskPosition","getTaskHeight","inner_width","inner_height","show_chart","scroll_on_click","task_scroll_offset","scrollable","getPrev","getNext","shift+down","hasChild","$open","open","shift+up","close","shift+right","getPrevSibling","moveTask","updateTask","shift+left","isSelectedTask","unselectTask","selectTask","ctrl+left","ctrl+right","showLightbox","columnIndex","show_tasks_outside_timescale","isActive","activeNode","globalNode","enable","getActiveNode","disable","getDefaultNode","setDefaultNode","focusGlobalNode","blurNode","keyDownHandler","defaultPrevented","awaitsFocus","delay","clearDelay","isTaskFocused","focusHandler","$preventDefault","reFocusActiveNode","localName","g","m","f","v","getNodePosition","$","w","S","T","getRelativeEventPosition","E","columns","C","removeAttribute","$data","tasksStore","_smart_render","_redrawTasks","types","placeholder","placeholder_task","focusOnCreate","setInterval","gantt","headerCell","taskRow","taskCell","name","clearInterval","mixin","addShortcut","getShortcutHandler","getCommandHandler","removeShortcut","column","keyboardNavigation","quick_info","quickInfo","text","substr","details","task_time","hidingFunction","showQuickInfo","hideQuickInfo","tooltips","touch","touch_tooltip","tooltip_text","link_source_id","source","saveState","getInitialState","marker","show_markers","min_date","marker_class","css","getRowTop","timeline_placeholder","scrollHeight","external_render","isElement","renderElement","$marker_area","_markers","createDatastore","initItem","uid","renderMarkers","createDataRender","defaultContainer","addLayer","getMarker","getItem","addMarker","addItem","deleteMarker","exists","removeItem","updateMarker","refresh","_getMarkers","getItems","multiselect_one_level","_multiselect","_selected","_one_level","_active","_first_selected_when_shift","getDefaultSelected","getSelected","setFirstSelected","getFirstSelected","updateState","select_task","reset","setLastSelected","silent","unselect","getLastSelected","getSelectedId","afterSelect","isSelected","forSelected","isSameLevel","calculateTaskLevel","_quickRefresh","refreshTask","doSelection","_is_icon_open_click","locateCell","inline_editors_multiselect_open","getEditorConfig","columnName","isVisible","startEdit","toggleTaskSelection","eachSelectedTask","getLastSelectedTask","$level","export_api","_apiUrl","_preparePDFConfigRaw","start","str_to_date","date_format","data","_serializeHtml","_prepareConfigPDF","_serializeAll","_fixColumns","_pdfExportRouter","raw","version","_sendToExport","exportToPDF","exportToPNG","exportToICal","_serializePlain","exportToExcel","smart_rendering","visual","_eachTaskTimed","_no_progress_colors","_serializeTimeline","_serializeGrid","rawDates","scales","_serializeScales","exportToJSON","worktime","_getWorktimeSettings","importFromExcel","File","FormData","append","_sendImportAjaxExcel","importFromMSProject","_sendImportAjaxMSP","importFromPrimaveraP6","exportToMSProject","skip_circular_links","xml_format","format_date","xml_date","date_to_str","_customProjectProperties","_customTaskProperties","_clearRecLinks","_exportConfig","$custom_data","custom","exportToPrimaveraP6","label","_xdr","ajax","post","_markColumns","template","$template","server","JSON","stringify","sheet","XMLHttpRequest","onreadystatechange","readyState","status","onload","responseText","setRequestHeader","send","_ajaxToExport","encodeURIComponent","xmlDoc","_serializableGanttConfig","map","editor","editor_types","skin","_createHiddenForm","submit","_hidden_export_form","_copyObjectBase","constraint_date","deadline","_color_box","_color_hash","_getStyles","_getColor","_getMinutesWorktimeSettings","startMinute","endMinute","hours","minutes","dates","work_time","_working_time_helper","get_calendar","worktimes","parsed","_pull","_originalCopyObject","json","_copyObject","_copyObjectPlain","task_text","match","_copyObjectTable","_copyObjectColumns","_day_index_by_date","columnIndexByDate","$start","$end","$type","$rendered_type","$text","$left","leftside_text","$right","rightside_text","_copyObjectColors","$color","color","date_grid","_copyObjectAll","smart_scales","_exportSerialize","links","_getRaw","_scale_helpers","_get_scales","min_column_width","_get_resize_options","autosize_min_width","scale_height","prepareConfigs","autosize","_getScales","rtl","$scaleHelper","cellColors","timeline_cell_class","task_cell_class","trace_x","styles","col_width","format","date_scale","scaleCell_class","exportMode","tree","serialize","_setLevel","_lvl","_clearLevel","_makeLinksSameLevel","_clearCircDependencies","_clearLinksSameLevel","$_source","_onCircDependencyFind","_target","_source","$_target","project","tasks","getSubtaskDates","start_end","auto_scheduling","manual","durationUnit","projectProperties","taskProperties","Un","KEY_CODES","UP","DOWN","LEFT","RIGHT","SPACE","ENTER","DELETE","ESC","TAB","qn","addExtension","_extensions","getExtension","ut","mt","isIE","navigator","userAgent","isOpera","isChrome","isSafari","isFF","isIPad","search","isEdge","isNode","isSalesforce","Sfdc","$A","Aura","Ne","xt","method","Error","url","async","headers","Le","Function","to_fixed","getISOWeek","getWeek","Pe","getUTCDate","getUTCMonth","getUTCFullYear","day_short","getUTCDay","getDay","day_full","month_short","month_full","getUTCHours","getHours","getUTCMinutes","getMinutes","getUTCSeconds","getSeconds","getUTCISOWeek","month_short_hash","month_full_hash","UTC","Gn","csp","init","date_part","setHours","hour_start","setTime","time_part","getTimezoneOffset","week_start","start_on_monday","month_start","setDate","quarter_start","setMonth","year_start","day_start","setMinutes","minute_start","setSeconds","getMilliseconds","setMilliseconds","_add_days","setYear","add_quarter","_getWeekNumber","convert_to_utc","parseDate","defined","parse_date","Yn","token","_url","_token","_mode","_seed","_queue","api","_events","Accept","fetch","credentials","then","load","key","websocket","_wrapper","connect","_socket","onclose","location","protocol","WebSocket","onmessage","fire","onError","_send","_resubscribe","Promise","_uid","args","resolve","reject","onCall","filter","catch","onResponse","Jn","remoteEvents","_ready","_remote","ready","dn","_on_timeout","ceil","Kn","internal","Xn","et","$create","$removeAt","$remove","$find","$insertAt","$each","$map","$filter","Rt","it","DataStore","pull","$initItem","visibleOrder","fullOrder","_skip_refresh","_filterRule","_searchVisibleOrder","_indexRangeCache","_getItemsCache","_attachDataChange","_parseInner","copyOnParse","isSilent","_updateOrder","updateItem","_removeItemInner","_addItemInner","getVisibleItems","getIndexRange","_changeIdInner","changeId","_moveInner","getIdByIndex","clearAll","arraysEqual","_quick_refresh","_mark_recompute","count","countVisible","eachItem","_ganttConfig","getIndexById","_getNullIfUndefined","getFirst","getLast","cn","TreeDataStore","_branches","lt","$parentProperty","parentProperty","rootId","$getRootId","$openInitially","openInitially","_eachItemMainRangeCache","getConfig","_isSplitItem","open_split_tasks","$expanded_branch","F","_buildTree","setParent","_add_branch","calculateItemLevel","getBranchIndex","_move_branch","$rendered_parent","_replace_branch_child","_traverseBranches","getSiblings","getNextSibling","eachParent","_setParentInner","_eachItemCached","_eachItemIterate","reverse","criteria","_skipTaskRecalculation","Zn","datastoreRender","itemRepainter","getLayers","render_item","get_visible_range","ids","prepare_data","render_items","update_items","batch_update","getDataRender","onUpdateRequest","change_id","ne","Qn","open_tree_initially","deepcopy_on_parse","dropService","setService","_getDatastores","refreshData","preserve_scroll","refreshLink","_bulk_dnd","isSplitTask","linksStore","_update_flags","userdata","_clear_data","_skipResourceRepaint","addTask","lightbox","deleteTask","changeTaskId","getLinkCount","isLinkExists","addLink","updateLink","deleteLink","changeLinkId","pe","getSum","setSumWidth","adjustSize","full_width","splitSize","sortScales","_isLegacyMode","scale_unit","subscales","_prepareScaleObject","primaryScale","initTemplate","scale_cell_class","getSubScales","env","warn","initScaleConfig","processIgnores","initColSizes","limitVisibleRange","unshift","alineScaleColumns","reverseScale","setPosSettings","trace_indexes","trace_index_transition","_ignore_time_config","skip_off_time","isWorkTime","ignore_x","display_count","eachColumn","trace_x_ascending","iterateScales","_correct_dst_change","ti","scale_offset_minimal","duration_unit","deadlines","ie","constraint_type","constraint_types","ASAP","ALAP","baselines","calculateEndDate","duration","_min_date","_max_date","me","fit_tasks","Re","He","ve","getSubtreeLinks","getSubtreeTasks","ei","$gantt","$dp","_dataProcessorHandlers","clientSideDelete","setGanttMode","setUpdated","_sendTaskOrder","cascade_delete","deleteAfterConfirmation","updateMode","setUpdateMode","storeItem","sendAllData","_tSend","_waitMode","_dp","_tMode","_serverProcessor","_ganttMode","substring","serverProcessor","urlSeparator","xml","_xmlNodeToJSON","isExist","assignmentsStore","handleResourceCRUD","handleResourceAssignmentCRUD","handleBaselineCRUD","updatedRows","getUserData","_in_progress","resources","dataprocessor_assignments","resource_assignment_store","task_id","dataprocessor_resources","resource_store","dataprocessor_baselines","datastore","Xt","_storage","getStoredItem","Jt","un","action_param","autoUpdate","_headers","_payload","_postDelim","_routerParametersFormat","_invalid","messages","updated","inserted","deleted","invalid","invalid_cell","enableUTFencoding","setTransactionMode","mode","payload","_serializeAsJson","_router","router","escape","_utf","getSyncState","dnd","findRow","set_invalid","setUserData","is_invalid","markRow","sendData","_methods","getActionByState","checkBeforeUpdate","editStop","modes","_beforeSendData","_getRowData","_serializeAsJSON","serialize_one","security_key","_forEachUpdatedRow","_sendData","_getAllData","defineAction","_uActions","afterUpdateCallback","afterUpdate","getGanttMode","filePath","sid","tid","finalizeUpdate","xmltop","cleanUpdate","xpath","_initialized","_dp_init","_setDefaultTransactionMode","order","delete_confirmation","_change_id","resourcesStore","baselineStore","_row_style","$dataprocessor_class","_delete_task","$drop_target","setDp","setOnAfterUpdate","setOnBeforeUpdateHandler","setAutoUpdate","_user","_needUpdate","_updateBusy","afterAutoUpdate","fullSync","loadUpdate","getUpdates","_getXmlNodeValue","_applyPayload","_cleanupArgumentsBeforeSend","_cleanupItemBeforeSend","query","nodeValue","_prepareDate","_prepareArray","_prepareObject","_prepareDataItem","ni","DataProcessor","ii","ai","resetProjectDates","ri","si","_needRecalc","_isRecalcNeeded","_isGroupSort","group_mode","_getWBSCode","_calcWBS","$virtual","$wbs","_setWBSCode","getWBSCode","getByWBSCode","_getPrevNonPlaceholderSibling","_increaseWBS","getTaskByWBSCode","oi","random","resource_id","resource_property","getTaskBy","getResourceAssignments","li","renderEditableLabel","$task_id","$resource_id","renderSummaryLabel","reduce","Number","editableResourceCellTemplate","$role","editableResourceCellClass","capacity","getSummaryResourceAssignments","initEditableDiagram","resource_render_empty_cells","cancelAnimationFrame","contentEditable","getCellsByType","view","$content","innerText","calculateDuration","updateTaskAssignments","editable_resource_diagram","fetchTasks","lightbox_resources","initItems","$resourcesStore","lightboxOptionsFnc","updateCollection","histogram_cell_class","histogram_cell_label","histogram_cell_allocated","histogram_cell_capacity","defaultResourceCellClass","defaultResourceCellTemplate","resource_cell_value","resource_cell_class","di","process_resource_assignments","D","M","getTaskAssignments","inBoth","inTaskNotInStore","inStoreNotInTask","A","I","N","L","O","unscheduled","getTaskResources","ci","new_task","_silencedPlaceholder","ui","auto_types","$needsUpdate","Zt","canParse","Pt","Qt","_linkReg","exec","_findSource","finish_to_start","lag","ke","hi","formatters","durationFormatter","linkFormatter","_i","show_empty_state","emptyStateElement","isGanttEmpty","renderContent","empty_state_text_link","empty_state_text_description","clickEvents","attachAddTaskEvent","detachAddTaskEvents","getContainer","marginTop","hn","hasBaselinesBelow","render_mode","$t","isSplitParent","gi","bar_height","adjustTaskHeightForBaselines","getLayoutView","getBarHeight","getTaskBaselines","fi","on_load","responseURL","_process_loading","collections","_load_collections","assignments","serverList","$ignore","dhx_security","serializeTask","serializeLink","_copyLink","attributes","_getCollections","_getXML","getXMLTopNode","progress","oldxml","startdate","est","enddate","predecessortasks","message","ae","calendar","re","dir","se","pi","_n","calendarArgumentsHelper","getWorkHoursArguments","setWorkTimeArguments","unsetWorkTimeArguments","isWorkTimeArguments","getClosestWorkTimeArguments","_getStartEndConfig","duration_step","getDurationArguments","hasDurationArguments","calculateEndDateArguments","gn","_getIntervals","_toHoursArray","_intersectHourRanges","_mergeAdjacentIntervals","_mergeHoursConfig","merge","customWeeks","processCalendar","mi","_cache","has","setItem","set","Map","vi","ki","getMinutesPerWeek","_weekCache","_calendar","getHoursPerDay","getMinutesPerMonth","_monthCache","yi","_getCacheObject","durations","endDates","_endDateCacheKey","_durationCacheKey","getEndDate","getDuration","ye","argumentsHelper","_workingUnitsCache","_largeUnitsCache","_dateDurationCache","_worktime","_cached_timestamps","_cached_timestamps_count","units","_clearCaches","_getUnitOrder","_resetTimestampCache","_timestamp","_checkIfWorkingUnit","hasDuration","_is_work_day","_getWorkHours","_is_work_hour","startHour","endHour","_getTimeOfDayStamp","_is_work_minute","_nextDate","_getWorkUnitsBetweenGeneric","_isWorkTime","_getClosestWorkTimeFuture","_getMinutesPerHour","_getMinutesPerDay","durationMinutes","durationHours","_getWorkUnitsForRange","_getMinutesBetweenSingleDay","_getIntervalTimestamp","_getMinutesBetween","_getHoursBetween","_setConfig","_parseSettings","haveCustomWeeks","customWeeksRangeStart","customWeeksRangeEnd","customWeeksBoundaries","_parseHours","from","to","fromReadable","toReadable","days","_tryChangeCalendarSettings","hasWorkTime","_arraysEqual","_compareSettings","equals","getWorkHours","durationSeconds","setWorkTime","unsetWorkTime","reset_calendar","_calculateDuration","_calculateEndDate","_calculateMinuteEndDate","_subtractMinuteDate","_calculateHourEndDate","_addInterval","added","_addHoursUntilDayEnd","_addMinutesUntilHourEnd","_subtractMinutesUntilHourStart","getClosestWorkTime","_isMinutePrecision","_getClosestWorkTimePast","_getClosestWorkTime","_getClosestWorkTimeGeneric","_findClosestTimeInDay","_getClosestWorkMinute","_checkWorkHours","It","isLegacyResourceCalendarFormat","getResourceProperty","resource_calendars","getCalendarIdFromLegacyConfig","bi","Wt","getCalendarIdFromMultipleResources","getResourceCalendar","mergeCalendars","addCalendar","fn","_calendars","_legacyConfig","_isLegacyConfig","createDefaultCalendars","be","pn","calendarManager","$disabledCalendar","_convertWorkTimeSettings","_createCalendarFromConfig","createCalendar","defaults","fulltime","getCalendar","getCalendars","_getOwnCalendar","calendar_property","dynamic_resource_calendars","getTaskCalendar","inherit_calendar","$effective_calendar","isCalendar","deleteCalendar","restoreConfigCalendars","every","_getCalendar","xi","worktimeFacadeFactory","_hasDuration","$i","isUnscheduledTask","_isAllowedUnscheduledTask","show_unscheduled","_isTaskInTimelineLimits","_getProjectEnd","project_end","_getProjectStart","project_start","getDefaultTaskDate","schedule_from_end","_set_default_task_timing","details_on_create","$new","showTask","_lightbox_id","_tasks_dnd","drag","getTaskTimingMode","$no_start","$no_end","scheduled_summary","milestone","_init_task_timing","rollup","$calculate_duration","min_duration","$rollup","getSubtaskDuration","_update_parents","$auto_start_date","$auto_end_date","roundDate","correctTaskWorkTime","correct_work_time","Oe","container_resize_timeout","Be","container_resize_method","$scrollbarRepaint","wi","show_errors","expire","cloneNode","_reinit","_clearTaskLayers","_clearLinkLayers","layout","createView","getPropertyValue","wai_aria_attributes","contentWindow","resetLayout","initTemplates","$mouseEvents","edit","confirm_deleting","confirm_deleting_title","_delete_task_confirm","hideLightbox","_sort","_getHorizontalScrollbar","codeScrollLeft","resize","getScrollbarsInfo","$view","boundViews","x_pos","setSizes","changeLightboxType","getLightboxType","_silent_redraw_lightbox","_get_link_type","start_to_start","start_to_finish","finish_to_finish","isLinkAllowed","Si","icon_save","icon_cancel","icon_details","confirm_closing","section_description","section_time","section_type","section_deadline","section_baselines","column_wbs","column_text","column_start_date","column_duration","column_add","confirm_link_deleting","link_start","link_end","type_task","type_project","type_milestone","weeks","months","years","message_ok","message_cancel","section_constraint","asap","alap","snet","snlt","fnet","fnlt","mso","mfo","resources_filter_placeholder","resources_filter_label","baselines_section_placeholder","baselines_add_button","baselines_remove_button","baselines_remove_all_button","deadline_enable_button","deadline_disable_button","Ti","Ei","Ci","Di","Ai","Ii","Mi","Ni","Li","Pi","Ri","Hi","Oi","Bi","zi","Wi","ji","Fi","Vi","Ui","addLocale","_locales","getLocale","qi","Gi","Yi","Ji","Ki","Xi","Zi","Qi","ta","ea","na","ia","aa","constants","license","edit_save","edit_cancel","ra","services","rows","cols","resizer","autoscroll_speed","show_links","show_task_cells","static_background","static_background_cells","branch_loading","branch_loading_property","show_loading","server_utc","show_progress","drag_links","drag_progress","drag_resize","drag_move","drag_mode","round_dnd_dates","link_wrapper_width","link_arrow_size","autofit","align","inherit_scale_class","time_step","task_date","time_picker","link_attribute","layer_attribute","buttons_left","_migrate_buttons","dhx_save_btn","dhx_cancel_btn","dhx_delete_btn","buttons_right","sections","map_to","project_sections","milestone_sections","single_date","drag_lightbox","details_on_dblclick","initial_scroll","order_branch","order_branch_free","task_height","bar_height_padding","min_grid_column_width","grid_resizer_column_attribute","keep_grid_width","grid_resize","grid_elastic_columns","resize_rows","task_grid_row_resizer_attribute","min_task_grid_row_height","readonly_property","editable_property","type_renderers","optimize_render","prevent_default_scroll","horizontal_scroll_key","drag_multiple","cache","DOMParser","ActiveXObject","loadXML","parseFromString","responseXML","getElementsByTagName","selectNodes","ownerDocument","evaluate","XPathResult","ANY_TYPE","iterateNext","_call","getSync","put","del","postSync","toUpperCase","RemoteEvents","pageX","pageY","_obj","_settings","getInputMethods","_drag_start_timer","clearDragTimer","passive","accessor","timeStamp","original_target","original_element_sizes","dragStart","traceDragEvents","dragMove","dragScroll","started","updates_per_second","cancelable","mousemoveContainer","checkPositionChange","pos","pow","sensitivity","initDnDMarker","backupEventTarget","backup_element","elementFromPoint","pointerEnabled","pointerType","msPointerEnabled","MSPOINTER_TYPE_MOUSE","obj","getPosition","_prevent_touch_scroll","_touch_drag","_touch_feedback","targetTouches","progress_text","grid_header_class","task_class","task_end_date","grid_row_class","task_row_class","timeline_cell_content","scale_row_class","grid_indent","grid_folder","grid_file","grid_open","grid_blank","task_unscheduled_time","grid_date_format","link_class","link_description","drag_link","drag_link_class","tooltip_date_format","baseline_text","selected_task","Bn","events","onItemLoading","onBeforeAdd","onAfterAdd","onBeforeUpdate","onAfterUpdate","onBeforeDelete","onAfterDelete","onIdChange","onBeforeItemMove","onAfterItemMove","onFilterItem","onItemOpen","onItemClose","onBeforeSelect","onAfterSelect","onAfterUnselect","dataProcessor","createDataProcessor","getGridColumn","_cached_functions","update_if_changed","active","activate","critical_path_mode","wrap_methods","_prefetch_originals","prefetch","get_arguments_hash","has_cached_value","get_cached_value","cache_value","is_date","stringify_argument","deactivate","setup","highlight_critical_path","_eventRemoveAll","resetLightbox","ar","ca","cs","da","de","el","es","fa","fr","he","hr","hu","jp","kr","nb","nl","no","pl","ro","ru","sk","sv","tr","ua","i18n","setLocale","gantt_save_btn","gantt_cancel_btn","gantt_delete_btn","sa","box","keyboard","cancelBubble","cover","onkeydown","messageButtonAttrString","messageModalAttr","ok","cancel","onclick","hidden","innerWidth","innerHeight","modalBox","messageBox","messageInfoAttr","insertBefore","timers","seed","hideAll","alert","confirm","modalbox","ze","$extendedConfig","setPrototypeOf","oa","$getConfig","$getTemplates","la","uiFactory$1","scroll","configure","$parent","initUI","views","registerView","doubleclick","contextMenu","root","getClassName","_last_move_event","delegate","callHandler","onDoubleClick","onMouseMove","onContextMenu","onClick","rn","We","x_end","y_end","Nt","Kt","ft","layerFactory","renderer","onrender","isInViewPort","getRectangle","remove_item","rendered","clear_container","getVisibleRange","prepareData","createDocumentFragment","restore","replace_item","replaceChild","getRenderer","clearRenderers","createGroup","tempCollection","renderers","container","filters","_add","getLayer","isConnected","topmost","je","requestUpdate","eachLayer","removeLayer","Fe","mn","rec","vn","ha","$skipSmartRenderOnScroll","Ht","headerHeight","$domEvents","$name","$factory","$externalComponent","_headerClickHandler","cell","$preResize","getSize","minWidth","maxWidth","minHeight","maxHeight","setSize","_hide","cellIndex","moveView","$toHTML","canCollapse","$fill","collapsed","gravity","getContentSize","$lastSize","contentX","contentY","_getBorderSizes","horizontal","vertical","_currentBorders","_borders","_sizeHeader","_sizeContent","_setBorders","transform","z","kn","_parseConfig","$cells","_resizeScrollbars","shouldHide","shouldShow","group","visible","direction","size","scrollSize","_getLinkedViews","x_inner","y_inner","y_pos","_syncCellSizes","_eachChild","_syncGroupSize","_xLayout","isGravity","grid_width","_resizeInProgress","setContentSize","_getAutosizeMode","$originalWidthStored","$originalWidth","$originalHeightStored","$originalHeight","isChild","getCells","_cleanElSize","_getBoxStyles","boxSizing","clientHeight","MozBoxSizing","horPaddings","borderLeftWidth","borderRightWidth","vertPaddings","borderTopWidth","borderBottomWidth","borderBox","outerWidth","outerHeight","_sizes","margin","_calcFreeSpace","_free","_gravity","_calcSize","_configureBorders","_updateCellVisibility","_visibleCells","hide_empty","_a","$cell","byMaxSize","ga","$initialized","unload","_setContentSize","_scrollHorizontalHandler","_scrollVerticalHandler","_outerScrollVerticalHandler","_outerScrollHorizontalHandler","_mouseWheelHandler","scroll_size","_isHorizontal","scrollPosition","_isVertical","_initVertical","_initHorizontal","_initMouseWheel","_initLinkedViews","_getRootParent","_eachView","$scroll_hor","$scroll_ver","_updateLinkedViews","scrollHorizontally","_scrolling","scrollVertically","_wheel_time","_oldLeft","_getScrollSize","_getScrollOffset","outerScroll","innerScroll","outerSize","_setScrollSize","toggleVisibility","_getScaleOffset","_oldTop","_checkWheelTarget","wheel_scroll_sensitivity","deltaX","wheelDeltaX","deltaY","wheelDelta","deltaMode","detail","yn","resetCache","_getRowHeight","_refreshState","rowStore","canUseSimpleCalculation","_resetTopPositionHeight","_resetHeight","getCacheStateTotalHeight","shouldClearHeightCache","_fillHeightCache","globalHeight","items","sumHeight","pa","canvasRender","destroy","Ut","Timeline","_posFromDateCache","_timelineDragScroll","$task_scale","$task_bg","$task_baselines","$task_links","$task_bars","$task_constraints","$task_deadlines","_tasks","bindLinks","item_attribute","_createLayerConfig","layers","linkLayers","_attachLayers","backgroundImage","scrollWidth","_refreshScales","_scales","_getScaleChunkHtml","taskFilter","expose","taskBar","hide_bar","taskBg","_taskLayers","_linkLayers","_bindStore","_taskRenderer","_initStaticBackgroundRender","linkStore","_linkRenderer","_staticBgHandler","$task_bg_static","nextSibling","_clearLayers","_render_tasks_scales","_prepareScaleHtml","sticky","getTimelineCellAttr","_getColumnDuration","_getNextVisibleColumn","_getPrevVisibleColumn","_getClosestVisibleColumn","getItemPosition","rowHeight","_timelineCacheAttached","_unbindStore","ma","_scrollOrder","grid","getCurrentX","_dnd","_scrollView","attachEvents","isScrollable","autoscrollRight","autoscrollStart","autoscrollLeft","autoscrollStop","getCorrection","Ve","va","_targetMarker","calculateCurrentPosition","_scrollableGrid","_draggedCell","draggedColumn","draggedIndex","_gridConfig","outerHTML","lineHeight","_dragX","findColumnsIndexes","setMarkerPosition","drawTargetMarker","targetIndex","targetColumn","cleanTargetMarker","reorderColumns","startX","endX","compare","xBefore","xAfter","columnRelativePos","Te","xe","Grid","$state","gridAttrString","gridDataAttrString","reorder_grid_columns","gridScaleRowAttrString","doOnRender","_renderHeaderResizers","_mouseDelegates","row_before_start","row_after_start","row_drag_move","marker_height","row_drag_end","dnd_sensitivity","_addLayers","_initEvents","_columnDND","_validateColumnWidth","_setColumnsWidth","_getGridWidth","_gridCacheAttached","_initSmartRenderingPlaceholder","_calculateGridWidth","_renderGridHeader","getColumnIndex","getColumn","gridLine","gridTaskRowResizer","_refreshPlaceholderOnStoreUpdate","$rowsPlaceholder","_getColumnWidth","min_width","max_width","_checkGridColumnMinWidthLimits","_getGridWidthLimits","_getColsTotalWidth","parseFloat","gridScaleCellAttrString","ka","isChanged","save","onShow","editPrevCell","editNextCell","onHide","ya","editorType","St","BaseEditor","set_value","get_input","get_value","is_changed","is_valid","ba","xa","oninput","$a","options","wa","Sa","formatter","delimiter","Set","autoSchedule","Ta","Ea","Ca","number","predecessor","Da","setMapping","getMapping","createEditors","inlineEditorAttr","_itemId","_columnName","_editor","_editorType","_placeholder","setValue","_onReMount","getValue","_getItemValue","newValue","inline_editors_date_processing","_findEditableCell","getNextCell","getFirstCell","getLastCell","moveRow","editNextRow","editPrevRow","detachStore","$e","bn","G","j","H","link_from_start","link_target_id","isCriticalTask","link_landing_area","link_to_start","progressColor","textColor","setProperty","setTaskBarAttr","marginLeft","marginRight","Ue","Ct","qe","jt","oe","Aa","lastTaskId","calendar_id","Ia","current_pos","dirs","path","point","get_lines","line_to","get_path","_get_line","get_wrapper_sizes","get_line_sizes","link_line_width","render_line","render_corner","radius","render_arrow","get_direction","current","point_to","get_points","get_endpoint","e_y","e_x","get_line_type","from_start","to_start","shrinkHeight","splitChild","link_radius","isCriticalLink","linkAttr","Ma","Na","tt","J","B","La","initial_open_state","$transparent","lastTaskOfLevel","_getGridPos","_getTargetY","_getTaskByY","reorderMarkerAttr","K","createDropTargetObject","targetParent","targetId","child","prevSibling","nextSiblingTarget","prevSiblingTarget","firstChildTarget","lastChildTarget","xn","le","Ge","Ye","Je","Ke","removeLineHighlight","markerLine","highlightPosition","pointerEvents","Pa","opacity","level","drop_target","doctype","Ra","initializer","onCreated","extendGantt","_inlineEditors","onInitialized","initEvents","extendDom","onDestroyed","clearEvents","showDate","Ha","createTaskDND","roundTaskDates","round_task_dates","dragMultiple","before_start","before_finish","after_finish","clear_drag_state","set_actions","drag_from_start","_move","_resize","_resize_progress","on_mouse_move","on_mouse_down","on_mouse_up","start_x","start_y","_drag_task_coords","_calculateMinDuration","_find_max_shift","obj_s_x","obj_e_x","_mouse_position_change","_is_number","isFinite","start_drag","now","timestamp","_start_dnd","_update_on_move","_update_item_on_move","_isMultiselect","handle_offset","_get_drag_mode","_fix_dnd_scale_time","_fix_working_times","_finalize_mouse_up","_fireEvent","_dhx_changed","doFinalize","_addSubtasksToDragMultiple","Oa","initLinksDND","_direction","link_direction_class","atan","sin","cos","_dir_start","_dir_end","Ba","linkDnD","za","_linksDnD","_tasksDnD","_attachDomEvents","_attachStateProvider","_clearDomEvents","_clearStateProvider","_delete_link_confirm","scale_step","Wa","getVerticalScrollbar","getHorizontalScrollbar","_legacyGridResizerClass","original_grid_width","skins","_initScrollStateEvents","_getVerticalScrollbar","_findGridResizer","_getSiblings","_behind","_front","gridFirst","ja","defaultContainerSibling","addTaskLayer","_getTaskLayers","removeTaskLayer","addLinkLayer","_getLinkLayers","removeLinkLayer","factory","mouseEvents","layersApi","gridAddButtonAttrString","center","gridCellAttrString","taskRowAttr","timedProjectBar","taskRollupBar","$rendered_at","taskSplitBar","taskConstraints","taskDeadline","taskBaselines","resourceRow","resourceHistogram","rowResizerAttr","layersService","ce","href","_theme_info","theme","cssVarTheme","terrace","_second_column_width","_third_column_width","_lightbox_template","_redefine_lightbox_buttons","Fa","autoscroll_delay","autoscroll_step","ue","jQuery","dhx_gantt","each","Gantt","getGanttInstance","dhtmlx","attaches","attachGantt","cmp","attachObject","dataType","dataObj","vs","av","border","gridId","gridObj","_viewRestore","dhtmlXCellObject","Va","Ua","qa","zoomIn","getCurrentLevel","setLevel","zoomOut","_levels","_activeLevelIndex","getLevels","_getZoomIndexByName","_getVisibleDate","_visibleDate","fixed_scales","_attachWheelEvent","_useKey","_handler","_defaultHandler","stopPropagation","_setScaleSettings","_setScaleDates","_initialStartDate","_initialEndDate","startDate","endDate","activeLevelIndex","_mapScales","levels","_minColumnWidth","minColumnWidth","_maxColumnWidth","maxColumnWidth","_widthStep","widthStep","trigger","_stepUp","_stepDown","Ga","platform","maxTouchPoints","_touch_events","touch_feedback","touch_feedback_duration","vibrate","_locate_css","Ft","Mt","ht","$n","getHtmlSelect","getHtmlOption","Dt","getHtmlButton","getHtmlDiv","getHtmlLabel","getHtmlInput","wn","qt","_dhx_onchange","onchange","_focus","Ya","allow_root","root_label","form_blocks","getLightboxValues","onselect","Ja","_get_input","getTimePicker","_time_format_order","auto_end_date","_update_lightbox_select","_fill_lightbox_select","_resolve_default_mapping","getTimePickerValue","autofix_end","_get_timepicker_step","single_value","checked","default_value","lightboxDurationInputAttrString","_t","Tt","charCode","disabled","_eventsInitialized","getConstraintType","_lightbox_current_type","Et","Ee","Sn","Tn","gt","ct","U","En","Cn","Ot","dataset","baselineId","button_click","_get_typed_lightbox_config","_lightbox_methods","_lightbox_root","showCover","_fill_lightbox","_setLbPosition","lightboxVisibleAttr","getLabel","_lightbox_type","_lightbox","_is_lightbox_timepicker","wide_form","lightboxAttr","onmousedown","_ready_to_dnd","ontouchstart","onselectstart","cursor","_init_dnd_events","_cover","_render_sections","inputId","_init_lightbox_events","_center_lightbox","show_cover","_move_while_dnd","_finish_dnd","lightboxButtonAttrString","time_format","timeFormat","year_range","first","_time_values","last","lightbox_events","_save_lightbox","_cancel_lightbox","default","time","time_optional","duration_optional","lightboxHiddenAttr","hideCover","_custom_lightbox","_set_lightbox_values","lightbox_header","lightboxHeader","getLightboxSection","section","get_template_control","control","get_select_control","get_textarea_control","get_time_control","_dnd_start_lb","gantt_unselectable","_lb_start","limit_time_select","first_hour","last_hour","lightboxSelectAttrString","radio","checkbox","constraint","typeselect","_simple_confirm","Ka","arrayFind","getTaskTop","getTaskBarHeight","getLinkNode","_scroll_state","resetSkin","_addThemeClass","setSkin","skyblue","lightbox_additional_height","dark","meadow","broadway","_config_buttons_left","_config_buttons_right","material","contrast_black","contrast_white","zoom","_extend_to_optional","update_block","getAttributeString","_taskCommonAttr","gridSeparatorAttr","role","tabindex","_locateHTML","critical_path","grouping","groupBy","overlay","Xa","_load_url","_load_type"],"sources":["../sources/core/ui/utils/dom_helpers.js","../sources/utils/global.js","../sources/ext/click_drag/eventsManager.ts","../sources/utils/eventable.js","../sources/utils/helpers.js","../sources/ext/click_drag/selectedRegion.ts","../sources/ext/drag_timeline/eventsManager.ts","../sources/ext/keyboard_navigation/modals.js","../sources/ext/quick_info/quickInfo.ts","../sources/utils/utils.js","../sources/core/ui/utils/dom_event_scope.js","../sources/ext/tooltip/tooltip.ts","../sources/ext/tooltip/tooltipManager.ts","../sources/ext/undo/monitor.ts","../sources/ext/undo/undo.ts","../sources/ext/extensions_gpl.ts","../sources/ext/click_drag/index.ts","../sources/ext/drag_timeline/index.ts","../sources/ext/fullscreen/index.ts","../sources/ext/keyboard_navigation.js","../sources/ext/keyboard_navigation/common/keyboard_shortcuts.js","../sources/ext/keyboard_navigation/common/eventhandler.js","../sources/ext/keyboard_navigation/common/trap_modal_focus.js","../sources/ext/keyboard_navigation/elements/gantt_node.js","../sources/ext/keyboard_navigation/elements/nav_node.js","../sources/ext/keyboard_navigation/elements/header_cell.js","../sources/ext/keyboard_navigation/elements/task_row.js","../sources/ext/keyboard_navigation/elements/task_cell.js","../sources/ext/keyboard_navigation/core.js","../sources/ext/quick_info/index.ts","../sources/ext/tooltip/index.ts","../sources/ext/undo/index.ts","../sources/ext/marker.js","../sources/ext/multiselect.js","../sources/ext/export_api/index.ts","../sources/constants/index.js","../sources/ext/extension_manager.ts","../sources/utils/env.js","../sources/core/common/serialize.ts","../sources/core/common/ajax.js","../sources/core/common/date_parsers/fast_version.ts","../sources/core/common/date_parsers/csp_compliant_version.ts","../sources/core/common/date.js","../node_modules/remote-client/dist/remote.es6.js","../sources/core/remote/remote_events.js","../sources/utils/timeout.js","../sources/core/common/state.js","../sources/utils/promise.js","../sources/core/facades/datastore_tasks.js","../sources/core/datastore/power_array.js","../sources/utils/placeholder_task.js","../sources/core/datastore/datastore.js","../sources/core/datastore/treedatastore.js","../sources/utils/is_headless.js","../sources/core/datastore/datastore_render.js","../sources/core/facades/datastore.js","../sources/core/datastore/select.js","../sources/core/facades/datastore_links.js","../sources/core/ui/timeline/scales.js","../sources/core/gantt_data_range.js","../sources/utils/task_tree_helpers.js","../sources/core/dataprocessor/data_processor_events.ts","../sources/core/dataprocessor/simple_storage.ts","../sources/core/dataprocessor/data_processor.ts","../sources/core/dataprocessor/extend_gantt.ts","../sources/core/dataprocessor/index.js","../sources/core/plugins/batch_update.js","../sources/core/plugins/wbs.js","../sources/core/plugins/resources.js","../sources/core/plugins/resource_assignments.js","../sources/core/plugins/new_task_placeholder.js","../sources/core/plugins/auto_task_types.js","../sources/core/common/duration_formatter_numeric.ts","../sources/core/common/link_formatter_simple.ts","../sources/core/plugins/formatters.js","../sources/core/plugins/empty_state_screen.ts","../sources/core/ui/render/baseline_helper.js","../sources/core/plugins/baselines.js","../sources/core/loading/parsing.js","../sources/core/worktime/calendar_arguments_helper.js","../sources/core/worktime/strategy/work_calendar_merger.js","../sources/core/worktime/strategy/work_unit_cache/workunit_map_cache.ts","../sources/core/worktime/strategy/work_unit_cache/workunit_object_cache.ts","../sources/core/worktime/strategy/work_unit_cache/larger_units_helper.ts","../sources/core/worktime/strategy/work_unit_cache/date_duration_cache.ts","../sources/core/worktime/strategy/calendar_strategy.js","../sources/core/worktime/strategy/work_unit_cache/index.ts","../sources/core/worktime/legacy_resource_config.js","../sources/core/worktime/calendar_manager.js","../sources/core/worktime/dynamic_resource_calendars.js","../sources/core/worktime/strategy/no_work_time.js","../sources/core/worktime/time_calculator.js","../sources/core/facades/worktime_calendars.js","../sources/core/data.js","../sources/core/ui/resize_listener.js","../sources/core/gantt_core.js","../sources/core/common/assert.js","../sources/locale/locale_ar.ts","../sources/locale/locale_be.ts","../sources/locale/locale_ca.ts","../sources/locale/locale_cn.ts","../sources/locale/locale_cs.ts","../sources/locale/locale_da.ts","../sources/locale/locale_de.ts","../sources/locale/locale_el.ts","../sources/locale/locale_en.ts","../sources/locale/locale_es.ts","../sources/locale/locale_fa.ts","../sources/locale/locale_fi.ts","../sources/locale/locale_fr.ts","../sources/locale/locale_he.ts","../sources/locale/locale_hr.ts","../sources/locale/locale_hu.ts","../sources/locale/locale_id.ts","../sources/locale/locale_it.ts","../sources/locale/locale_jp.ts","../sources/locale/locale_kr.ts","../sources/locale/locale_manager.ts","../sources/locale/locale_nb.ts","../sources/locale/locale_nl.ts","../sources/locale/locale_no.ts","../sources/locale/locale_pl.ts","../sources/locale/locale_pt.ts","../sources/locale/locale_ro.ts","../sources/locale/locale_ru.ts","../sources/locale/locale_si.ts","../sources/locale/locale_sk.ts","../sources/locale/locale_sv.ts","../sources/locale/locale_tr.ts","../sources/locale/locale_ua.ts","../sources/factory/make_instance_common.js","../sources/core/common/services.js","../sources/core/common/config.ts","../sources/core/common/dnd.js","../sources/core/common/templates.js","../sources/core/datastore/datastore_hooks.js","../sources/core/plugins/index.js","../sources/core/grid_column_api.gpl.js","../sources/core/tasks.js","../sources/core/worktime/work_time.js","../sources/core/data_task_types.gpl.js","../sources/core/cached_functions.js","../sources/core/destructor.js","../sources/locale/index.ts","../sources/core/ui/message.js","../sources/core/ui/configurable.js","../sources/core/ui/ui_factory.js","../sources/core/ui/mouse.js","../sources/core/ui/render/viewport/is_in_viewport.js","../sources/core/ui/render/is_legacy_smart_render.js","../sources/core/ui/render/viewport/get_grid_row_rectangle.js","../sources/core/ui/render/viewport/get_visible_bars_range.js","../sources/core/ui/render/render_factory.js","../sources/core/ui/render/layer_engine.js","../sources/core/ui/render/viewport/get_bar_rectangle.js","../sources/core/ui/render/viewport/factory/get_visible_link_range.js","../sources/core/ui/render/viewport/get_link_rectangle.js","../sources/core/ui/render/viewport/is_link_in_viewport.js","../sources/core/ui/gantt_layers.js","../sources/core/ui/layout/cell.js","../sources/utils/extends.js","../sources/core/ui/layout/layout.js","../sources/core/ui/layout/view_layout.js","../sources/core/ui/layout/view_cell.js","../sources/core/ui/layout/scrollbar_cell.js","../sources/core/ui/row_position_mixin.js","../sources/core/ui/row_position_fixed_height.js","../sources/core/ui/timeline/tasks_canvas_render.gpl.js","../sources/core/ui/timeline/timeline.js","../sources/core/ui/timeline/timeline_layers_gpl.js","../sources/core/ui/plugins/column_grid_dnd/scrollable_grid.ts","../sources/core/ui/plugins/column_grid_dnd/column_grid_dnd.ts","../sources/core/ui/mouse_event_container.js","../sources/core/ui/grid/grid.js","../sources/core/ui/grid/grid_resize.gpl.js","../sources/core/ui/grid/task_grid_row_resize.js","../sources/core/ui/grid/editors/keyboard_mappings/default.js","../sources/core/ui/grid/editors/keyboard_mappings/keyboard_navigation.js","../sources/core/ui/grid/editors/editors/base.js","../sources/core/ui/grid/editors/editors/text.js","../sources/core/ui/grid/editors/editors/number.js","../sources/core/ui/grid/editors/editors/select.js","../sources/core/ui/grid/editors/editors/date.js","../sources/core/ui/grid/editors/editors/predecessor.js","../sources/core/ui/grid/editors/editors/duration.js","../sources/core/ui/grid/editors/linked_properties.js","../sources/core/ui/grid/editors/controller.js","../sources/core/ui/grid/editors/keyboard_mappings.js","../sources/core/ui/render/viewport/is_bar_in_viewport.js","../sources/core/ui/render/task_bar_render.js","../sources/core/ui/render/task_bar_smart_render.js","../sources/core/ui/render/dummy_layer.js","../sources/core/ui/render/viewport/get_bg_row_rectangle.js","../sources/core/ui/render/viewport/get_visible_cells_range.js","../sources/core/ui/render/viewport/is_column_visible.js","../sources/core/ui/render/prerender/task_bg_placeholder.js","../sources/core/ui/render/link_render.js","../sources/core/ui/render/viewport/is_grid_row_in_viewport.js","../sources/core/resource_timetable_builder.js","../sources/core/ui/grid/tasks_grid_dnd.js","../sources/core/ui/grid/tasks_grid_dnd_marker_helpers/drop_target.js","../sources/core/ui/grid/tasks_grid_dnd_marker_helpers/locked_level.js","../sources/core/ui/grid/tasks_grid_dnd_marker_helpers/highlight.js","../sources/core/ui/grid/tasks_grid_dnd_marker.js","../sources/core/ui/grid/tasks_grid_dnd_marker_helpers/multi_level.js","../sources/core/ui/grid/main_grid_initializer.js","../sources/core/ui/timeline/tasks_dnd.js","../sources/core/ui/timeline/links_dnd.js","../sources/core/ui/timeline/main_timeline_initializer.js","../sources/core/ui/main_layout_initializer.js","../sources/core/ui/index.js","../sources/core/ui/layout/resizer_cell.gpl.js","../sources/core/ui/render/task_grid_line_render.js","../sources/core/ui/render/task_bg_render.js","../sources/core/ui/render/task_rollup_render.js","../sources/core/ui/render/resource_matrix_render.js","../sources/core/ui/render/task_grid_row_resize_render.js","../sources/core/ui/skin.js","../sources/core/ui/plugins/autoscroll.js","../sources/core/ui/plugins/jquery_hooks.js","../sources/core/ui/plugins/dhtmlx_hooks.js","../sources/core/ui/plugins/timeline_zoom.ts","../sources/core/ui/touch.js","../sources/core/ui/lightbox/controls/base_control.js","../sources/core/ui/utils/html_helpers.js","../sources/core/ui/lightbox/controls/select_control.js","../sources/core/ui/lightbox/controls/parent_control.js","../sources/core/ui/lightbox/index.js","../sources/core/ui/lightbox/controls/template_control.js","../sources/core/ui/lightbox/controls/textarea_control.js","../sources/core/ui/lightbox/controls/time_control.js","../sources/core/ui/lightbox/controls/checkbox_control.js","../sources/core/ui/lightbox/controls/radio_control.js","../sources/core/ui/lightbox/controls/duration_control.js","../sources/core/ui/lightbox/controls/constraint_control.js","../sources/core/ui/lightbox/controls/typeselect_control.js","../sources/core/ui/lightbox/controls/baseline_control.js","../sources/core/ui_core.js","../sources/core/data_task_layers.gpl.js","../sources/core/facades/layout.js","../sources/css/skins/skyblue.js","../sources/css/skins/dark.js","../sources/css/skins/meadow.js","../sources/css/skins/terrace.js","../sources/css/skins/broadway.js","../sources/css/skins/material.js","../sources/css/skins/contrast_black.js","../sources/css/skins/contrast_white.js","../sources/core/ui/plugins/index.js","../sources/core/ui/lightbox/lightbox_optional_time.js","../sources/core/ui/wai_aria.js","../sources/dhtmlxgantt.gpl.ts","../sources/factory/make_instance_web.js","../sources/core/loading/ajax_loading.js"],"sourcesContent":["//returns position of html element on the page\r\nfunction getNodePosition(elem) {\r\n\tvar top=0, left=0, right=0, bottom=0;\r\n\tif (elem.getBoundingClientRect) { //HTML5 method\r\n\t\tvar box = elem.getBoundingClientRect();\r\n\t\tvar body = document.body;\r\n\t\tvar docElem = (document.documentElement ||\r\n\t\t\tdocument.body.parentNode ||\r\n\t\t\tdocument.body);\r\n\r\n\t\tvar scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\r\n\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\r\n\t\tvar clientTop = docElem.clientTop || body.clientTop || 0;\r\n\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\r\n\t\ttop  = box.top +  scrollTop - clientTop;\r\n\t\tleft = box.left + scrollLeft - clientLeft;\r\n\r\n\t\tright = document.body.offsetWidth - box.right;\r\n\t\tbottom = document.body.offsetHeight - box.bottom;\r\n\t} else { //fallback to naive approach\r\n\t\twhile(elem) {\r\n\t\t\ttop = top + parseInt(elem.offsetTop,10);\r\n\t\t\tleft = left + parseInt(elem.offsetLeft,10);\r\n\t\t\telem = elem.offsetParent;\r\n\t\t}\r\n\r\n\t\tright = document.body.offsetWidth - elem.offsetWidth - left;\r\n\t\tbottom = document.body.offsetHeight - elem.offsetHeight - top;\r\n\t}\r\n\treturn { y: Math.round(top), x: Math.round(left), width:elem.offsetWidth, height:elem.offsetHeight, right: Math.round(right), bottom: Math.round(bottom) };\r\n}\r\n\r\nfunction isVisible(node){\r\n\tvar display = false,\r\n\t\tvisibility = false;\r\n\tif(window.getComputedStyle){\r\n\t\tvar style = window.getComputedStyle(node, null);\r\n\t\tdisplay = style[\"display\"];\r\n\t\tvisibility = style[\"visibility\"];\r\n\t}else if(node.currentStyle){\r\n\t\tdisplay = node.currentStyle[\"display\"];\r\n\t\tvisibility = node.currentStyle[\"visibility\"];\r\n\t}\r\n\treturn (display != \"none\" && visibility != \"hidden\");\r\n}\r\n\r\nfunction hasNonNegativeTabIndex(node){\r\n\treturn !isNaN(node.getAttribute(\"tabindex\")) && (node.getAttribute(\"tabindex\")*1 >= 0);\r\n}\r\n\r\nfunction hasHref(node){\r\n\tvar canHaveHref = {\"a\": true, \"area\": true};\r\n\tif(canHaveHref[node.nodeName.loLowerCase()]){\r\n\t\treturn !!node.getAttribute(\"href\");\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nfunction isEnabled(node){\r\n\tvar canDisable = {\"input\":true, \"select\":true, \"textarea\":true, \"button\":true, \"object\":true};\r\n\tif(canDisable[node.nodeName.toLowerCase()]){\r\n\t\treturn !node.hasAttribute(\"disabled\");\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n\r\nfunction getFocusableNodes(root){\r\n\tvar nodes = root.querySelectorAll([\r\n\t\t\"a[href]\",\r\n\t\t\"area[href]\",\r\n\t\t\"input\",\r\n\t\t\"select\",\r\n\t\t\"textarea\",\r\n\t\t\"button\",\r\n\t\t\"iframe\",\r\n\t\t\"object\",\r\n\t\t\"embed\",\r\n\t\t\"[tabindex]\",\r\n\t\t\"[contenteditable]\"\r\n\t].join(\", \"));\r\n\r\n\tvar nodesArray = Array.prototype.slice.call(nodes, 0);\r\n\t\r\n\tfor(var i = 0; i < nodesArray.length; i++){\r\n\t\tnodesArray[i].$position = i;\r\n\t\t// we remember original nodes order, \r\n\t\t// so when we sort them by tabindex we ensure order of nodes with same tabindex is preserved, \r\n\t\t// since some browsers do unstable sort\r\n\t}\r\n\t\r\n\t// use tabindex to sort focusable nodes\r\n\tnodesArray.sort(function(a, b) {\r\n\t\tif(a.tabIndex === 0 && b.tabIndex !== 0){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\tif(a.tabIndex !== 0 && b.tabIndex === 0){\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\t\r\n\t\tif (a.tabIndex === b.tabIndex){\r\n\t\t\t// ensure we do stable sort\r\n\t\t\treturn a.$position - b.$position;\r\n\t\t}\r\n\t\tif (a.tabIndex < b.tabIndex) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\treturn 1;\r\n\t});\r\n\t\r\n\tfor(var i = 0; i < nodesArray.length; i++){\r\n\t\tvar node = nodesArray[i];\r\n\t\tvar isValid = (hasNonNegativeTabIndex(node)  || isEnabled(node) || hasHref(node)) && isVisible(node);\r\n\t\tif(!isValid){\r\n\t\t\tnodesArray.splice(i, 1);\r\n\t\t\ti--;\r\n\t\t}\r\n\t}\r\n\treturn nodesArray;\r\n}\r\n\r\nfunction getScrollSize(){\r\n\tvar div = document.createElement(\"div\");\r\n\tdiv.style.cssText=\"visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;\";\r\n\r\n\tdocument.body.appendChild(div);\r\n\tvar width = div.offsetWidth-div.clientWidth;\r\n\tdocument.body.removeChild(div);\r\n\r\n\treturn Math.max(width, 15);\r\n}\r\n\r\nfunction getClassName(node){\r\n\tif(!node) return \"\";\r\n\r\n\tvar className = node.className || \"\";\r\n\tif(className.baseVal)//'className' exist but not a string - IE svg element in DOM\r\n\t\tclassName = className.baseVal;\r\n\r\n\tif(!className.indexOf)\r\n\t\tclassName = \"\";\r\n\r\n\treturn _trimString(className);\r\n}\r\n\r\nfunction addClassName(node, className){\r\n\tif (className && node.className.indexOf(className) === -1) {\r\n\t\tnode.className += \" \" + className;\r\n\t}\r\n}\r\n\r\nfunction removeClassName(node, name) {\r\n\tname = name.split(\" \");\r\n\tfor (var i = 0; i < name.length; i++) {\r\n\t\tvar regEx = new RegExp(\"\\\\s?\\\\b\" + name[i] + \"\\\\b(?![-_.])\", \"\");\r\n\t\tnode.className = node.className.replace(regEx, \"\");\r\n\t}\r\n}\r\n\r\nfunction hasClass(element, className){\r\n\tif ('classList' in element) {\r\n\t\treturn element.classList.contains(className);\r\n\t} else { \r\n\t\treturn new RegExp(\"\\\\b\" + className + \"\\\\b\").test(element.className);\r\n\t}\r\n}\r\n\r\nfunction toNode(node) {\r\n\tif (typeof node === \"string\") {\r\n\t\treturn (document.getElementById(node) || document.querySelector(node) || document.body);\r\n\t}\r\n\treturn node || document.body;\r\n}\r\n\r\nvar _slave;\r\nfunction insertNode(node, newone) {\r\n\tif(!_slave){\r\n\t\t_slave = document.createElement(\"div\");\r\n\t}\r\n\t_slave.innerHTML = newone;\r\n\tvar child = _slave.firstChild;\r\n\tnode.appendChild(child);\r\n\treturn child;\r\n}\r\n\r\nfunction removeNode(node) {\r\n\tif (node && node.parentNode) {\r\n\t\tnode.parentNode.removeChild(node);\r\n\t}\r\n}\r\n\r\nfunction getChildNodes(node, css) {\r\n\tvar ch = node.childNodes;\r\n\tvar len = ch.length;\r\n\tvar out = [];\r\n\tfor (var i = 0; i < len; i++) {\r\n\t\tvar obj = ch[i];\r\n\t\tif (obj.className && obj.className.indexOf(css) !== -1) {\r\n\t\t\tout.push(obj);\r\n\t\t}\r\n\t}\r\n\treturn out;\r\n}\r\n\r\nfunction getTargetNode(e) {\r\n\tvar trg;\r\n\tif (e.tagName)\r\n\t\ttrg = e;\r\n\telse {\r\n\t\te = e || window.event;\r\n\t\ttrg = e.target || e.srcElement;\r\n\t\tif (trg.shadowRoot && e.composedPath) {\r\n\t\t\ttrg = e.composedPath()[0];\r\n\t\t}\r\n\t}\r\n\treturn trg;\r\n}\r\n\r\nfunction locateAttribute(e, attribute) {\r\n\tif(!attribute) return;\r\n\r\n\tvar trg = getTargetNode(e);\r\n\r\n\twhile (trg){\r\n\t\tif (trg.getAttribute){\t//text nodes has not getAttribute\r\n\t\t\tvar test = trg.getAttribute(attribute);\r\n\t\t\tif (test) return trg;\r\n\t\t}\r\n\t\t// GS-2941. With the `host`, Gantt will continue iteration outside the ShadowDOM\r\n\t\ttrg = trg.parentNode || trg.host;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction _trimString(str){\r\n\tvar func = String.prototype.trim || function(){ return this.replace(/^\\s+|\\s+$/g, \"\"); };\r\n\treturn func.apply(str);\r\n}\r\n\r\nfunction locateClassName(e, classname, strict){\r\n\tvar trg = getTargetNode(e);\r\n\tvar css = \"\";\r\n\r\n\tif(strict === undefined)\r\n\t\tstrict = true;\r\n\r\n\twhile (trg){\r\n\t\tcss = getClassName(trg);\r\n\t\tif(css){\r\n\t\t\tvar ind = css.indexOf(classname);\r\n\t\t\tif (ind >= 0){\r\n\t\t\t\tif (!strict)\r\n\t\t\t\t\treturn trg;\r\n\r\n\t\t\t\t//check that we have exact match\r\n\t\t\t\tvar left = (ind === 0) || (!_trimString(css.charAt(ind - 1)));\r\n\t\t\t\tvar right = ((ind + classname.length >= css.length)) || (!_trimString(css.charAt(ind + classname.length)));\r\n\r\n\t\t\t\tif (left && right)\r\n\t\t\t\t\treturn trg;\r\n\t\t\t}\r\n\t\t}\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\n/*\r\nevent position relatively to DOM element\r\n */\r\nfunction getRelativeEventPosition(ev, node){\r\n\tconst d = document.documentElement;\r\n\tconst box = getNodePosition(node);\r\n\t//GS-2809: condition to check event(mouse or touch)\r\n\tconst { clientX, clientY } = ev.touches?.[0] ?? ev;\r\n\treturn {\r\n\t\tx: clientX + d.scrollLeft - d.clientLeft - box.x + node.scrollLeft,\r\n\t\ty: clientY + d.scrollTop - d.clientTop - box.y + node.scrollTop\r\n\t};\r\n}\r\n\r\nfunction getRelativeNodePosition(child, parent){\r\n\tconst childPos = getNodePosition(child);\r\n\tconst parentPos = getNodePosition(parent);\r\n\treturn {\r\n\t\tx: childPos.x - parentPos.x,\r\n\t\ty: childPos.y - parentPos.y\r\n\t};\r\n}\r\n\r\nfunction isChildOf(child, parent){\r\n\tif(!child || !parent){\r\n\t\treturn false;\r\n\t}\r\n\r\n\twhile(child && child != parent) {\r\n\t\tchild = child.parentNode;\r\n\t}\r\n\r\n\treturn child === parent;\r\n}\r\n\r\nfunction closest(element, selector){\r\n\tif(element.closest){\r\n\t\treturn element.closest(selector);\r\n\t}else if(element.matches || element.msMatchesSelector || element.webkitMatchesSelector){\r\n\t\tvar el = element;\r\n\t\tif (!document.documentElement.contains(el)) return null;\r\n\t\tdo {\r\n\t\t\tvar method = el.matches || el.msMatchesSelector || el.webkitMatchesSelector;\r\n\r\n\t\t\tif (method.call(el, selector)) return el;\r\n\t\t\tel = el.parentElement || el.parentNode;\r\n\t\t} while (el !== null && el.nodeType === 1); \r\n\t\treturn null;\r\n\t}else{\r\n\t\t// eslint-disable-next-line no-console\r\n\t\tconsole.error(\"Your browser is not supported\");\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nfunction getClosestSizedElement(element) {\r\n\twhile (element) {\r\n\t\tif (element.offsetWidth > 0 && element.offsetHeight > 0) {\r\n\t\t\treturn element;\r\n\t\t}\r\n\t\telement = element.parentElement;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction isShadowDomSupported() {\r\n\treturn document.head.createShadowRoot || document.head.attachShadow;\r\n}\r\n\r\n/**\r\n * Returns element that has the browser focus, or null if no element has focus.\r\n * Works with shadow DOM, so it's prefereed to use this function instead of document.activeElement directly.\r\n * @returns HTMLElement\r\n */\r\nfunction getActiveElement(){\r\n\tvar activeElement = document.activeElement;\r\n\tif (activeElement.shadowRoot) {\r\n\t\tactiveElement = activeElement.shadowRoot.activeElement;\r\n\t}\r\n\tif (activeElement === document.body && document.getSelection) {\r\n\t\tactiveElement = document.getSelection().focusNode || document.body;\r\n\t}\r\n\r\n\treturn activeElement;\r\n}\r\n\r\n/**\r\n * Returns document.body or the host node of the ShadowRoot, if the element is attached to ShadowDom\r\n * @param {HTMLElement} element \r\n * @returns HTMLElement\r\n */\r\nfunction getRootNode(element) {\r\n\tif (!element) {\r\n\t\treturn document.body;\r\n\t}\r\n\tif (!isShadowDomSupported()) {\r\n\t\treturn document.body;\r\n\t}\r\n\twhile (element.parentNode && (element = element.parentNode)) {\r\n\t\tif (element instanceof ShadowRoot) {\r\n\t\t\treturn element.host;\r\n\t\t}\r\n\t}\r\n\treturn document.body;\r\n}\r\n\r\nfunction hasShadowParent(element) {\r\n\treturn !!getRootNode(element);\r\n}\r\n\r\nexport {\r\n\tgetNodePosition,\r\n\tgetFocusableNodes,\r\n\tgetScrollSize,\r\n\tgetClassName,\r\n\taddClassName,\r\n\tremoveClassName,\r\n\tinsertNode,\r\n\tremoveNode,\r\n\tgetChildNodes,\r\n\ttoNode,\r\n\tlocateClassName,\r\n\tlocateAttribute,\r\n\tgetTargetNode,\r\n\tgetRelativeEventPosition,\r\n\tisChildOf,\r\n\thasClass,\r\n\tclosest,\r\n\tgetRootNode,\r\n\thasShadowParent,\r\n\tisShadowDomSupported,\r\n\tgetActiveElement,\r\n\tgetRelativeNodePosition,\r\n\tgetClosestSizedElement\r\n};","\r\n/* eslint-disable no-restricted-globals */\r\nvar globalScope;\r\nif(typeof window !== \"undefined\"){\r\n\tglobalScope = window;\r\n}else{\r\n\tglobalScope = global;\r\n}\r\n/* eslint-enable no-restricted-globals */\r\n\r\nexport default globalScope;","import * as domHelpers from \"../../core/ui/utils/dom_helpers\";\r\nimport global from \"../../utils/global\";\r\nimport { SelectedRegion } from \"./selectedRegion\";\r\n\r\nexport class EventsManager {\r\n\tprivate _mouseDown: boolean = false;\r\n\tprivate _touchStarts: boolean = false;\r\n\tprivate _touchActive: boolean = false;\r\n\tprivate _longTapTimer: any = false;\r\n\tprivate _domEvents: any;\r\n\tprivate _originPosition: string;\r\n\tprivate _gantt: any;\r\n\tprivate _restoreOriginPosition: () => void;\r\n\tconstructor(gantt: any) {\r\n\t\tthis._gantt = gantt;\r\n\t\tthis._domEvents = gantt._createDomEventScope();\r\n\t}\r\n\r\n\tattach(selectedRegion: SelectedRegion, useKey?: \"shiftKey\" | \"ctrlKey\" | \"altKey\", ignore?: any): void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst _target = selectedRegion.getViewPort();\r\n\t\tthis._originPosition = global.getComputedStyle(_target).display;\r\n\t\tthis._restoreOriginPosition = () => {\r\n\t\t\t_target.style.position = this._originPosition;\r\n\t\t};\r\n\t\tif (this._originPosition === \"static\") {\r\n\t\t\t_target.style.position = \"relative\";\r\n\t\t}\r\n\t\tconst state = gantt.$services.getService(\"state\");\r\n\t\tstate.registerProvider(\"clickDrag\", () => {\r\n\t\t\tconst result = { autoscroll: false };\r\n\t\t\treturn result;\r\n\t\t});\r\n\r\n\r\n\t\tlet scheduledDndCoordinates:any = null;\r\n\t\tconst startDragAndDrop = () => {\r\n\t\t\tif (!scheduledDndCoordinates) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis._mouseDown = true;\r\n\t\t\tselectedRegion.setStart(gantt.copy(scheduledDndCoordinates));\r\n\t\t\tselectedRegion.setPosition(gantt.copy(scheduledDndCoordinates));\r\n\t\t\tselectedRegion.setEnd(gantt.copy(scheduledDndCoordinates));\r\n\t\t\tscheduledDndCoordinates = null;\r\n\t\t};\r\n\r\n\t\t// mouse events\r\n\t\tthis._domEvents.attach(_target, \"mousedown\", (event) => {\r\n\t\t\tstartDrag(event);\r\n\t\t});\r\n\t\tconst eventElement = domHelpers.getRootNode(gantt.$root) || document.body;\r\n\t\tthis._domEvents.attach(eventElement, \"mouseup\", (event) => {\r\n\t\t\tstopDrag(event);\r\n\t\t});\r\n\t\tthis._domEvents.attach(_target, \"mousemove\", (event) => {\r\n\t\t\tdragMove(event);\r\n\t\t});\r\n\r\n\t\t// touch events\r\n\t\tthis._domEvents.attach(_target, \"touchstart\", (event) => {\r\n\t\t\tthis._touchStarts = true;\r\n\t\t\tthis._longTapTimer = setTimeout(()=> {\r\n\t\t\t\tif (this._touchStarts){\r\n\t\t\t\t\tstartDrag(getTouchEvent (event));\r\n\t\t\t\t\tthis._touchStarts = false;\r\n\t\t\t\t\tthis._touchActive = true;\r\n\t\t\t\t}\r\n\t\t\t}, this._gantt.config.touch_drag);\r\n\t\t});\r\n\r\n\t\tthis._domEvents.attach(eventElement, \"touchend\", (event) => {\r\n\t\t\tthis._touchStarts = false;\r\n\t\t\tthis._touchActive = false;\r\n\t\t\tclearTimeout(this._longTapTimer);\r\n\t\t\tstopDrag(getTouchEvent (event));\r\n\t\t});\r\n\t\tthis._domEvents.attach(_target, \"touchmove\", (event) => {\r\n\t\t\tif (this._touchActive){\r\n\t\t\t\tlet filterTargets = getFilterTargets();\r\n\t\t\t\tif (filterTargets && gantt.utils.dom.closest(event.target, filterTargets)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tdragMove(getTouchEvent (event));\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t} else {\r\n\t\t\t\tthis._touchStarts = false;\r\n\t\t\t\tclearTimeout(this._longTapTimer);\t\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tfunction getTouchEvent (event){\r\n\t\t\tconst touchEvent = event.changedTouches && event.changedTouches[0] || event;\r\n\t\t\treturn touchEvent;\r\n\t\t}\r\n\r\n\t\tconst getFilterTargets = () => {\r\n\t\t\tlet filterTargets = \".gantt_task_line, .gantt_task_link\";\r\n\t\t\tif (ignore !== undefined) {\r\n\t\t\t\tif (ignore instanceof Array) {\r\n\t\t\t\t\tfilterTargets = ignore.join(\", \");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilterTargets = ignore;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn filterTargets;\r\n\t\t};\r\n\r\n\t\tconst startDrag: any = (event) => {\r\n\t\t\tscheduledDndCoordinates = null;\r\n\t\t\tlet filterTargets = getFilterTargets();\r\n\t\t\tif (filterTargets) {\r\n\t\t\t\tif (gantt.utils.dom.closest(event.target, filterTargets)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstate.registerProvider(\"clickDrag\", () => {\r\n\t\t\t\tconst result = { autoscroll: this._mouseDown };\r\n\t\t\t\treturn result;\r\n\t\t\t});\r\n\r\n\t\t\tif (useKey && event[useKey] !== true) { return; }\r\n\t\t\tscheduledDndCoordinates = this._getCoordinates(event, selectedRegion);\r\n\t\t};\r\n\r\n\t\tconst stopDrag: any = (event) => {\r\n\t\t\tscheduledDndCoordinates = null;\r\n\t\t\tif (useKey && event[useKey] !== true) { return; }\r\n\t\t\tif (this._mouseDown === true) {\r\n\t\t\t\tthis._mouseDown = false;\r\n\t\t\t\tconst coordinates = this._getCoordinates(event, selectedRegion);\r\n\t\t\t\tselectedRegion.dragEnd(coordinates);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst dragMove: any = (event) => {\r\n\t\t\tif (useKey && event[useKey] !== true) { return; }\r\n\t\t\t// GS-854. If we don't have useKey for the click_drag extension,\r\n\t\t\t// check the drag_timeline to not simultaneously use both extensions\r\n\t\t\tconst dragTimeline = this._gantt.ext.clickDrag;\r\n\t\t\tconst dragTimelineUseKey = (this._gantt.config.drag_timeline || {}).useKey;\r\n\t\t\tif (dragTimeline && dragTimelineUseKey) {\r\n\t\t\t\tif (!useKey && event[dragTimelineUseKey]) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet coordinates:any = null;\r\n\t\t\tif(!this._mouseDown && scheduledDndCoordinates){\r\n\t\t\t\tcoordinates = this._getCoordinates(event, selectedRegion);\r\n\t\t\t\tif(Math.abs(scheduledDndCoordinates.relative.left - coordinates.relative.left) > 5){\r\n\t\t\t\t\t// add small threshold not to start dnd on simple click\r\n\t\t\t\t\tstartDragAndDrop();\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this._mouseDown === true) {\r\n\t\t\t\tcoordinates = this._getCoordinates(event, selectedRegion);\r\n\t\t\t\tselectedRegion.setEnd(coordinates);\r\n\t\t\t\tselectedRegion.render();\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tdetach(): void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._domEvents.detachAll();\r\n\t\tif(this._restoreOriginPosition){\r\n\t\t\tthis._restoreOriginPosition();\r\n\t\t}\r\n\r\n\t\tconst state = gantt.$services.getService(\"state\");\r\n\t\tstate.unregisterProvider(\"clickDrag\");\r\n\t}\r\n\r\n\tdestructor(): void {\r\n\t\tthis.detach();\r\n\t}\r\n\r\n\tprivate _getCoordinates(event: MouseEvent, selectedRegion: SelectedRegion) {\r\n\t\tconst viewPort = selectedRegion.getViewPort();\r\n\t\tconst viewPortBounds = viewPort.getBoundingClientRect();\r\n\t\tconst { clientX, clientY } = event;\r\n\t\tconst result = {\r\n\t\t\tabsolute: {\r\n\t\t\t\tleft: clientX,\r\n\t\t\t\ttop: clientY\r\n\t\t\t},\r\n\t\t\trelative: {\r\n\t\t\t\tleft: clientX - viewPortBounds.left + viewPort.scrollLeft,\r\n\t\t\t\ttop: clientY - viewPortBounds.top + viewPort.scrollTop\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn result;\r\n\t}\r\n}","var EventHost = function(){\r\n\tthis._silent_mode = false;\r\n\tthis.listeners = {};\r\n};\r\n\r\nEventHost.prototype = {\r\n\t_silentStart: function() {\r\n\t\tthis._silent_mode = true;\r\n\t},\r\n\t_silentEnd: function() {\r\n\t\tthis._silent_mode = false;\r\n\t}\r\n};\r\n\r\nvar\tcreateEventStorage = function(obj) {\r\n\tvar handlers = {};\r\n\tvar index = 0;\r\n\tvar eventStorage = function(){\r\n\t\tvar combinedResult = true;\r\n\t\tfor(var i in handlers){\r\n\t\t\tvar handlerResult = handlers[i].apply(obj, arguments);\r\n\t\t\tcombinedResult=combinedResult && handlerResult;\r\n\t\t}\r\n\t\treturn combinedResult;\r\n\t};\r\n\teventStorage.addEvent=function(handler, settings){\r\n\t\tif (typeof (handler) == \"function\"){\r\n\t\t\tvar handlerId;\r\n\t\t\tif(settings && settings.id){\r\n\t\t\t\thandlerId = settings.id;\r\n\t\t\t}else{\r\n\t\t\t\thandlerId = index;\r\n\t\t\t\tindex++;\r\n\t\t\t}\r\n\r\n\t\t\tif(settings && settings.once){\r\n\t\t\t\tvar originalHandler = handler;\r\n\t\t\t\thandler = function(){\r\n\t\t\t\t\toriginalHandler();\r\n\t\t\t\t\teventStorage.removeEvent(handlerId);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\thandlers[handlerId] = handler;\r\n\t\t\treturn handlerId;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\teventStorage.removeEvent=function(id){\r\n\t\tdelete handlers[id];\r\n\t};\r\n\r\n\teventStorage.clear = function(){\r\n\t\thandlers = {};\r\n\t};\r\n\r\n\treturn eventStorage;\r\n};\r\n\r\nfunction makeEventable(obj){\r\n\r\n\tvar eventHost = new EventHost();\r\n\tobj.attachEvent=function(eventName, handler, settings){\r\n\t\teventName = 'ev_'+eventName.toLowerCase();\r\n\t\tif (!eventHost.listeners[eventName]){\r\n\t\t\teventHost.listeners[eventName] = createEventStorage(this);\r\n\t\t}\r\n\r\n\t\tif(settings && settings.thisObject){\r\n\t\t\thandler = handler.bind(settings.thisObject);\r\n\t\t}\r\n\r\n\t\tvar innerId = eventHost.listeners[eventName].addEvent(handler, settings);\r\n\r\n\t\tvar handlerId = (eventName+':'+innerId); //return ID (ev_eventname:1)\r\n\t\tif(settings && settings.id){\r\n\t\t\thandlerId = settings.id;\r\n\t\t}\r\n\t\treturn handlerId;\r\n\t};\r\n\r\n\tobj.attachAll = function(callback){\r\n\t\tthis.attachEvent('listen_all', callback);\r\n\t};\r\n\r\n\tobj.callEvent=function(name, eventArguments){\r\n\t\tif (eventHost._silent_mode) return true;\r\n\r\n\t\tvar handlerName = 'ev_'+name.toLowerCase();\r\n\r\n\t\tvar listeners = eventHost.listeners;\r\n\t\tif (listeners['ev_listen_all']){\r\n\t\t\tlisteners['ev_listen_all'].apply(this, [name].concat(eventArguments));\r\n\t\t}\r\n\r\n\t\tif (listeners[handlerName])\r\n\t\t\treturn listeners[handlerName].apply(this, eventArguments);\r\n\t\treturn true;\r\n\t};\r\n\r\n\tobj.checkEvent=function(name){\r\n\t\tvar listeners = eventHost.listeners;\r\n\t\treturn (!!listeners['ev_'+name.toLowerCase()]);\r\n\t};\r\n\r\n\tobj.detachEvent=function(id){\r\n\t\tif (id){\r\n\t\t\tvar listeners = eventHost.listeners;\r\n\t\t\tfor(var i in listeners){\r\n\t\t\t\tlisteners[i].removeEvent(id); //remove event\r\n\t\t\t}\r\n\r\n\t\t\tvar list = id.split(':');//get EventName and ID\r\n\t\t\tvar listeners = eventHost.listeners;\r\n\t\t\tif(list.length === 2){\r\n\t\t\t\tvar eventName = list[0];\r\n\t\t\t\tvar eventId = list[1];\r\n\t\t\t\tif(listeners[eventName]){\r\n\t\t\t\t\tlisteners[eventName].removeEvent(eventId); //remove event\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tobj.detachAllEvents = function(){\r\n\t\tfor (var name in eventHost.listeners) {\r\n\t\t\teventHost.listeners[name].clear();\r\n\t\t}\r\n\t};\r\n\r\n}\r\n\r\nexport default makeEventable;","var units = {\r\n\t\"second\": 1,\r\n\t\"minute\": 60,\r\n\t\"hour\": 60 * 60,\r\n\t\"day\": 60 * 60 * 24,\r\n\t\"week\": 60 * 60 * 24 * 7,\r\n\t\"month\": 60 * 60 * 24 * 30,\r\n\t\"quarter\": 60 * 60 * 24 * 30 * 3,\r\n\t\"year\": 60 * 60 * 24 * 365\r\n};\r\nfunction getSecondsInUnit(unit){\r\n\treturn units[unit] || units.hour;\r\n}\r\n\r\nfunction forEach(arr, callback) {\r\n\tif (arr.forEach) {\r\n\t\tarr.forEach(callback);\r\n\t} else {\r\n\t\tvar workArray = arr.slice();\r\n\t\tfor (var i = 0; i < workArray.length; i++) {\r\n\t\t\tcallback(workArray[i], i);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction arrayMap(arr, callback) {\r\n\tif (arr.map) {\r\n\t\treturn arr.map(callback);\r\n\t} else {\r\n\t\tvar workArray = arr.slice();\r\n\t\tvar resArray = [];\r\n\r\n\t\tfor (var i = 0; i < workArray.length; i++) {\r\n\t\t\tresArray.push(callback(workArray[i], i));\r\n\t\t}\r\n\t\treturn resArray;\r\n\t}\r\n}\r\n\r\n\r\nfunction arrayFind(arr, callback) {\r\n\tif (arr.find) {\r\n\t\treturn arr.find(callback);\r\n\t} else {\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tif (callback(arr[i], i)) {\r\n\t\t\t\treturn arr[i];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction arrayIncludes(arr, item) {\r\n\tif(arr.includes){\r\n\t\treturn arr.includes(item);\r\n\t}else{\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tif (arr[i] === item) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\n// iframe-safe array type check instead of using instanceof\r\nfunction isArray(obj){\r\n\tif(Array.isArray){\r\n\t\treturn Array.isArray(obj);\r\n\t}else{\r\n\t\t// close enough\r\n\t\treturn (obj && obj.length !== undefined && obj.pop && obj.push);\r\n\t}\r\n}\r\n\r\n// non-primitive string object, e.g. new String(\"abc\")\r\nfunction isStringObject(obj){\r\n\treturn obj && typeof obj === \"object\"\r\n\t\t&& Function.prototype.toString.call(obj.constructor) === \"function String() { [native code] }\";\r\n}\r\n\r\n// non-primitive number object, e.g. new Number(5)\r\nfunction isNumberObject(obj){\r\n\treturn obj && typeof obj === \"object\"\r\n\t\t&& Function.prototype.toString.call(obj.constructor) === \"function Number() { [native code] }\";\r\n}\r\n\r\n// non-primitive number object, e.g. new Boolean(true)\r\nfunction isBooleanObject(obj){\r\n\treturn obj && typeof obj === \"object\"\r\n\t\t&& Function.prototype.toString.call(obj.constructor) === \"function Boolean() { [native code] }\";\r\n}\r\n\r\nfunction isDate(obj) {\r\n\tif (obj && typeof obj === \"object\") {\r\n\t\treturn !!(obj.getFullYear && obj.getMonth && obj.getDate);\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nfunction isValidDate(obj){\r\n\treturn isDate(obj) && !isNaN(obj.getTime());\r\n}\r\n\r\nfunction arrayFilter(arr, callback) {\r\n\tvar result = [];\r\n\r\n\tif (arr.filter) {\r\n\t\treturn arr.filter(callback);\r\n\t} else {\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tif (callback(arr[i], i)) {\r\n\t\t\t\tresult[result.length] = arr[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n}\r\n\r\nfunction hashToArray(hash) {\r\n\tvar result = [];\r\n\r\n\tfor (var key in hash) {\r\n\t\tif (hash.hasOwnProperty(key)) {\r\n\t\t\tresult.push(hash[key]);\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n}\r\n\r\nfunction arraySome(arr, callback) {\r\n\tif (arr.length === 0) return false;\r\n\r\n\tfor (var i = 0; i < arr.length; i++) {\r\n\t\tif (callback(arr[i], i, arr)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction arrayDifference(arr, callback) {\r\n\treturn arrayFilter(arr, function(item, i) {\r\n\t\treturn !callback(item, i);\r\n\t});\r\n}\r\n\r\nfunction throttle (callback, timeout) {\r\n\tvar wait = false;\r\n\r\n\treturn function () {\r\n\t\tif (!wait) {\r\n\t\t\tcallback.apply(null, arguments);\r\n\t\t\twait = true;\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\twait = false;\r\n\t\t\t}, timeout);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction delay (callback, timeout){\r\n\tvar timer;\r\n\r\n\tvar result = function() {\r\n\t\tresult.$cancelTimeout();\r\n\t\tresult.$pending = true;\r\n\t\tvar args = Array.prototype.slice.call(arguments);\r\n\t\ttimer = setTimeout(function(){\r\n\t\t\tcallback.apply(this, args);\r\n\t\t\tresult.$pending = false;\r\n\t\t}, timeout);\r\n\t};\r\n\r\n\tresult.$pending = false;\r\n\tresult.$cancelTimeout = function(){\r\n\t\tclearTimeout(timer);\r\n\t\tresult.$pending = false;\r\n\t};\r\n\tresult.$execute = function(){\r\n\t\tvar args = Array.prototype.slice.call(arguments);\r\n\t\tcallback.apply(this, args);\r\n\t\tresult.$cancelTimeout();\r\n\t};\r\n\r\n\treturn result;\r\n}\r\n\r\nfunction sortArrayOfHash(arr, field, desc) {\r\n\tvar compare = function(a, b) {\r\n\t\treturn a < b;\r\n\t};\r\n\r\n\tarr.sort(function(a, b) {\r\n\t\tif (a[field] === b[field]) return 0;\r\n\r\n\t\treturn desc ? compare(a[field], b[field]) : compare(b[field], a[field]);\r\n\t});\r\n}\r\n\r\nfunction objectKeys(obj) {\r\n\tif (Object.keys) {\r\n\t\treturn Object.keys(obj);\r\n\t}\r\n\tvar result = [];\r\n\tvar key;\r\n\tfor (key in obj) {\r\n\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n\t\t\tresult.push(key);\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction isEventable(obj) {\r\n\treturn obj.attachEvent && obj.detachEvent;\r\n}\r\n\r\n//GS-1090: A task should be able to have the id = 0\r\nfunction replaceValidZeroId(id, rootId) {\r\n\tif (checkZeroId(id) && !checkZeroId(rootId)){\r\n\t\tid = \"0\";\r\n\t}\r\n\treturn id;\r\n}\r\n\r\nfunction checkZeroId(id) {\r\n\tif (id === 0){\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction findBinary(array, target) {\r\n\t// modified binary search, target value not exactly match array elements, looking for closest one\r\n\r\n\tvar low = 0, high = array.length - 1, i, item, prev;\r\n\twhile (low <= high) {\r\n\r\n\t\ti = Math.floor((low + high) / 2);\r\n\t\titem = +array[i];\r\n\t\tprev = +array[i - 1];\r\n\t\tif (item < target) {\r\n\t\t\tlow = i + 1;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tif (item > target) {\r\n\t\t\tif (!(!isNaN(prev) && prev < target)) {\r\n\t\t\t\thigh = i - 1;\r\n\t\t\t\tcontinue;\r\n\t\t\t} else {\r\n\t\t\t\t// if target is between 'i' and 'i-1' return 'i - 1'\r\n\t\t\t\treturn i - 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\twhile (+array[i] == +array[i + 1]) i++;\r\n\r\n\t\treturn i;\r\n\t}\r\n\treturn array.length - 1;\r\n}\r\n\r\nexport {\r\n\tgetSecondsInUnit,\r\n\tforEach,\r\n\tarrayMap,\r\n\tarrayIncludes,\r\n\tarrayFind,\r\n\tarrayFilter,\r\n\tarrayDifference,\r\n\tarraySome,\r\n\thashToArray,\r\n\tsortArrayOfHash,\r\n\tthrottle,\r\n\tisArray,\r\n\tisDate,\r\n\tisValidDate,\r\n\tisStringObject,\r\n\tisNumberObject,\r\n\tisBooleanObject,\r\n\tdelay,\r\n\tobjectKeys,\r\n\tisEventable,\r\n\treplaceValidZeroId,\r\n\tcheckZeroId,\r\n\tfindBinary\r\n};","import eventable from \"../../utils/eventable\";\r\nimport { isEventable } from \"../../utils/helpers\";\r\n\r\nexport interface ISelectedRegionConfig {\r\n\tclassName?: string;\r\n\trender?: (startPoint: IPoint, endPoint: IPoint) => HTMLElement;\r\n\tviewPort?: HTMLElement;\r\n\tuseRequestAnimationFrame: boolean;\r\n\tcallback?: (startPoint: IPoint, endPoint: IPoint, startDate: Date, endDate: Date, tasksByDate: any[], tasksByIndex: any[]) => void;\r\n\tsingleRow: boolean;\r\n}\r\n\r\ninterface ICoordinates {\r\n\tleft: number;\r\n\ttop: number;\r\n}\r\n\r\nexport interface IPoint {\r\n\tabsolute: ICoordinates;\r\n\trelative: ICoordinates;\r\n}\r\n\r\nexport class SelectedRegion {\r\n\trender: () => void;\r\n\tprivate _viewPort: HTMLElement & eventable;\r\n\tprivate _el: HTMLElement = document.createElement(\"div\");\r\n\tprivate _callback: (startPoint: IPoint, endPoint: IPoint, startDate: Date, endDate: Date, tasksByDate: any[], tasksByIndex: any[]) => void;\r\n\tprivate _startPoint: IPoint;\r\n\tprivate _endPoint: IPoint;\r\n\tprivate _positionPoint: IPoint;\r\n\tprivate _useRequestAnimationFrame: boolean;\r\n\tprivate _startDate: Date;\r\n\tprivate _endDate: Date;\r\n\tprivate _singleRow: boolean;\r\n\tprivate _gantt: any;\r\n\tprivate _view: any;\r\n\r\n\tconstructor(config: ISelectedRegionConfig, gantt: any, view: any) {\r\n\t\tthis._gantt = gantt;\r\n\t\tthis._view = view;\r\n\t\tthis._viewPort = config.viewPort;\r\n\t\tthis._el.classList.add(config.className);\r\n\t\tif (typeof config.callback === \"function\") {\r\n\t\t\tthis._callback = config.callback;\r\n\t\t}\r\n\r\n\t\tthis.render = () => {\r\n\t\t\tlet node;\r\n\t\t\tif(config.render){\r\n\t\t\t\tnode = config.render(this._startPoint, this._endPoint);\r\n\t\t\t}else{\r\n\t\t\t\tnode = this.defaultRender(this._startPoint, this._endPoint);\r\n\t\t\t}\r\n\r\n\t\t\tif(node !== this._el){\r\n\t\t\t\tif(this._el && this._el.parentNode){\r\n\t\t\t\t\tthis._el.parentNode.removeChild(this._el);\r\n\t\t\t\t}\r\n\t\t\t\tthis._el = node;\r\n\t\t\t}\r\n\r\n\t\t\tif (config.className !== \"\") {\r\n\t\t\t\tthis._el.classList.add(config.className);\r\n\t\t\t}\r\n\t\t\tthis.draw();\r\n\t\t};\r\n\r\n\t\tif (!isEventable(this._viewPort)) {\r\n\t\t\teventable(this._viewPort);\r\n\t\t}\r\n\t\tthis._singleRow = config.singleRow;\r\n\t\tthis._useRequestAnimationFrame = config.useRequestAnimationFrame;\r\n\t}\r\n\r\n\tdefaultRender = (start: IPoint, end: IPoint) => {\r\n\t\tif(!this._el){\r\n\t\t\tthis._el = document.createElement(\"div\");\r\n\t\t}\r\n\t\tconst node = this._el;\r\n\t\t// const gantt = this._gantt;\r\n\r\n\t\tconst top = Math.min(start.relative.top, end.relative.top);\r\n\t\tconst bottom = Math.max(start.relative.top, end.relative.top);\r\n\t\tconst left = Math.min(start.relative.left, end.relative.left);\r\n\t\tconst right = Math.max(start.relative.left, end.relative.left);\r\n\r\n\t\tif (this._singleRow) {\r\n\t\t\tconst pos = this._getTaskPositionByTop(this._startPoint.relative.top);\r\n\t\t\tnode.style.height = pos.height + \"px\";\r\n\t\t\tnode.style.top = pos.top + \"px\";\r\n\t\t} else {\r\n\t\t\tnode.style.height = Math.abs(bottom - top) + \"px\";\r\n\t\t\tnode.style.top = top + \"px\";\r\n\t\t}\r\n\t\tnode.style.width = Math.abs(right - left) + \"px\";\r\n\t\tnode.style.left = left + \"px\";\r\n\t\treturn node;\r\n\t};\r\n\r\n\tdraw() {\r\n\t\tif (this._useRequestAnimationFrame) {\r\n\t\t\treturn requestAnimationFrame(() => {\r\n\t\t\t\tthis._viewPort.appendChild(this.getElement());\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._viewPort.appendChild(this.getElement());\r\n\t\t}\r\n\t}\r\n\r\n\tclear() {\r\n\t\tif (this._useRequestAnimationFrame) {\r\n\t\t\treturn requestAnimationFrame(() => {\r\n\t\t\t\tif (!this._el.parentNode) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis._viewPort.removeChild(this._el);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tif (!this._el.parentNode) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._viewPort.removeChild(this._el);\r\n\t\t}\r\n\t}\r\n\r\n\tgetElement() {\r\n\t\treturn this._el;\r\n\t}\r\n\r\n\tgetViewPort() {\r\n\t\treturn this._viewPort;\r\n\t}\r\n\r\n\tsetStart(startPoint: IPoint) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._startPoint = startPoint;\r\n\t\tthis._startDate = gantt.dateFromPos(this._startPoint.relative.left);\r\n\t\tthis._viewPort.callEvent(\"onBeforeDrag\", [this._startPoint]);\r\n\t}\r\n\r\n\tsetEnd(endPoint: IPoint) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._endPoint = endPoint;\r\n\t\tif (this._singleRow) {\r\n\t\t\tconst pos = this._getTaskPositionByTop(this._startPoint.relative.top);\r\n\t\t\tthis._endPoint.relative.top = pos.top;\r\n\t\t}\r\n\t\tthis._endDate = gantt.dateFromPos(this._endPoint.relative.left);\r\n\t\tif (this._startPoint.relative.left > this._endPoint.relative.left) {\r\n\t\t\tthis._positionPoint = {\r\n\t\t\t\trelative: { left: this._endPoint.relative.left, top: this._positionPoint.relative.top },\r\n\t\t\t\tabsolute: { left: this._endPoint.absolute.left, top: this._positionPoint.absolute.top }\r\n\t\t\t};\r\n\t\t}\r\n\t\tif (this._startPoint.relative.top > this._endPoint.relative.top) {\r\n\t\t\tthis._positionPoint = {\r\n\t\t\t\trelative: { left: this._positionPoint.relative.left, top: this._endPoint.relative.top },\r\n\t\t\t\tabsolute: { left: this._positionPoint.absolute.left, top: this._endPoint.absolute.top }\r\n\t\t\t};\r\n\t\t}\r\n\r\n\r\n\t\tthis._viewPort.callEvent(\"onDrag\", [this._startPoint, this._endPoint]);\r\n\t}\r\n\r\n\tsetPosition(positionPoint: IPoint) {\r\n\t\tthis._positionPoint = positionPoint;\r\n\t}\r\n\r\n\tdragEnd(endPoint: IPoint) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tif(endPoint.relative.left < 0){\r\n\t\t\tendPoint.relative.left = 0;\r\n\t\t}\r\n\t\tthis._viewPort.callEvent(\"onBeforeDragEnd\", [this._startPoint, endPoint]);\r\n\t\tthis.setEnd(endPoint);\r\n\t\t// GS-1422. The endDate can be null if we drag the mouse outside the Gantt container\r\n\t\tthis._endDate = this._endDate || gantt.getState().max_date;\r\n\r\n\t\tif (this._startDate.valueOf() > this._endDate.valueOf()) {\r\n\t\t\t[ this._startDate, this._endDate ] = [ this._endDate, this._startDate ];\r\n\t\t}\r\n\t\tthis.clear();\r\n\t\tconst tasksByTime = gantt.getTaskByTime(this._startDate, this._endDate);\r\n\t\tconst tasksByIndex = this._getTasksByTop(this._startPoint.relative.top, this._endPoint.relative.top);\r\n\r\n\t\tthis._viewPort.callEvent(\"onDragEnd\", [this._startPoint, this._endPoint]);\r\n\t\tif (this._callback) {\r\n\t\t\tthis._callback(this._startPoint, this._endPoint, this._startDate, this._endDate, tasksByTime, tasksByIndex);\r\n\t\t}\r\n\t}\r\n\r\n\tgetInBounds() {\r\n\t\treturn this._singleRow;\r\n\t}\r\n\r\n\tprivate _getTasksByTop(start: number, end:number) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tlet startValue = start;\r\n\t\tlet endValue = end;\r\n\t\tif (start > end) {\r\n\t\t\tstartValue = end;\r\n\t\t\tendValue = start;\r\n\t\t}\r\n\t\tconst startIndex = this._getTaskPositionByTop(startValue).index;\r\n\t\tconst endIndex = this._getTaskPositionByTop(endValue).index;\r\n\t\tconst result = [];\r\n\t\tfor (let i = startIndex; i <= endIndex; i++) {\r\n\t\t\tconst task = gantt.getTaskByIndex(i);\r\n\t\t\tif (task) {\r\n\t\t\t\tresult.push(gantt.getTaskByIndex(i));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tprivate _getTaskPositionByTop(top: number){\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst view = this._view;\r\n\t\tconst index = view.getItemIndexByTopPosition(top);\r\n\t\tconst task = gantt.getTaskByIndex(index);\r\n\t\tif(task){\r\n\t\t\tconst height = view.getItemHeight(task.id);\r\n\t\t\tconst itemTop = view.getItemTop(task.id);\r\n\t\t\treturn {\r\n\t\t\t\ttop: itemTop || 0,\r\n\t\t\t\theight: height || 0,\r\n\t\t\t\tindex\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tconst dataHeight = view.getTotalHeight();\r\n\t\t\treturn {\r\n\t\t\t\ttop: top > dataHeight ? dataHeight : 0,\r\n\t\t\t\theight: gantt.config.row_height,\r\n\t\t\t\tindex: top > dataHeight ? gantt.getTaskCount() : 0\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n}","interface IPoint {\r\n\tx: number;\r\n\ty: number;\r\n}\r\n\r\nlet _dragInProgress: boolean = false;\r\n\r\nexport class EventsManager {\r\n\tstatic create(gantt: any) {\r\n\t\treturn new EventsManager(gantt);\r\n\t}\r\n\tstatic _isDragInProgress() {\r\n\t\treturn _dragInProgress;\r\n\t}\r\n\tprivate _mouseDown: boolean = false;\r\n\tprivate _startPoint: IPoint;\r\n\tprivate _scrollState: IPoint;\r\n\tprivate _originAutoscroll: boolean;\r\n\tprivate _domEvents: any;\r\n\tprivate _timeline: any;\r\n\tprivate _gantt: any;\r\n\tprivate _trace: IPoint[];\r\n\tprivate _originalReadonly: boolean;\r\n\r\n\tconstructor(gantt: any) {\r\n\t\tthis._gantt = gantt;\r\n\t\tthis._domEvents = gantt._createDomEventScope();\r\n\t\tthis._trace = [];\r\n\t}\r\n\r\n\tdestructor() {\r\n\t\tthis._domEvents.detachAll();\r\n\t}\r\n\r\n\tattach(timeline: any): void {\r\n\t\tthis._timeline = timeline;\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._domEvents.attach(timeline.$task, \"mousedown\", (event) => {\r\n\t\t\tif (!gantt.config.drag_timeline) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst { useKey,ignore, enabled } = gantt.config.drag_timeline;\r\n\t\t\tif(enabled === false) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tlet filterTargets = \".gantt_task_line, .gantt_task_link\";\r\n\t\t\tif(ignore !== undefined) {\r\n\t\t\t\tif(ignore instanceof Array){\r\n\t\t\t\t\tfilterTargets = ignore.join(\", \");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilterTargets = ignore;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (filterTargets) {\r\n\t\t\t\tif (gantt.utils.dom.closest(event.target, filterTargets)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (useKey && event[useKey] !== true) { return; }\r\n\r\n\t\t\tthis._startDrag(event);\r\n\t\t});\r\n\r\n\t\tthis._domEvents.attach(document, \"keydown\", (event) => {\r\n\t\t\tif (!gantt.config.drag_timeline) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst { useKey } = gantt.config.drag_timeline;\r\n\t\t\tif (useKey && event[useKey] === true) {\r\n\t\t\t\tthis._applyDndReadyStyles();\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis._domEvents.attach(document, \"keyup\", (event) => {\r\n\t\t\tif (!gantt.config.drag_timeline) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst { useKey } = gantt.config.drag_timeline;\r\n\t\t\tif (useKey && event[useKey] === false) {\r\n\t\t\t\tthis._clearDndReadyStyles();\r\n\t\t\t\tthis._stopDrag(event);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis._domEvents.attach(document, \"mouseup\", (event) => {\r\n\t\t\tthis._stopDrag(event);\r\n\t\t});\r\n\t\tthis._domEvents.attach(gantt.$root, \"mouseup\", (event) => {\r\n\t\t\tthis._stopDrag(event);\r\n\t\t});\r\n\t\tthis._domEvents.attach(document, \"mouseleave\", (event) => {\r\n\t\t\tthis._stopDrag(event);\r\n\t\t});\r\n\t\tthis._domEvents.attach(gantt.$root, \"mouseleave\", (event) => {\r\n\t\t\tthis._stopDrag(event);\r\n\t\t});\r\n\r\n\t\tthis._domEvents.attach(gantt.$root, \"mousemove\", (event) => {\r\n\t\t\tif (!gantt.config.drag_timeline) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst { useKey } = gantt.config.drag_timeline;\r\n\t\t\tif (useKey && event[useKey] !== true) { return; }\r\n\t\t\t// GS-854. If we don't have useKey for the drag_timeline extension,\r\n\t\t\t// check the click_drag to not simultaneously use both extensions\r\n\t\t\tconst clickDrag = this._gantt.ext.clickDrag;\r\n\t\t\tconst clickDragUseKey = (this._gantt.config.click_drag || {}).useKey;\r\n\t\t\tif (clickDrag && clickDragUseKey) {\r\n\t\t\t\tif (!useKey && event[clickDragUseKey]) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this._mouseDown === true) {\r\n\t\t\t\tthis._trace.push({ x: event.clientX, y: event.clientY });\r\n\t\t\t\tconst scrollPosition: IPoint = this._countNewScrollPosition({ x: event.clientX, y: event.clientY });\r\n\t\t\t\tthis._setScrollPosition(timeline, scrollPosition);\r\n\t\t\t\tthis._scrollState = scrollPosition;\r\n\t\t\t\tthis._startPoint = { x: event.clientX, y: event.clientY };\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _calculateDirectionVector = () => {\r\n\t\tconst traceSteps = 10;\r\n\t\tif(this._trace.length >= traceSteps) {\r\n\t\t\tconst dots = this._trace.slice(this._trace.length - traceSteps);\r\n\r\n\t\t\tconst vectors = [];\r\n\t\t\tfor(let i = 1; i < dots.length; i++) {\r\n\t\t\t\tvectors.push({\r\n\t\t\t\t\tx: dots[i].x - dots[i - 1].x,\r\n\t\t\t\t\ty: dots[i].y - dots[i - 1].y\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tconst resultVector = {x:0, y:0};\r\n\r\n\t\t\tvectors.forEach((vector) => {\r\n\t\t\t\tresultVector.x += vector.x;\r\n\t\t\t\tresultVector.y += vector.y;\r\n\t\t\t});\r\n\r\n\t\t\tconst magnitude = Math.sqrt(resultVector.x*resultVector.x + resultVector.y*resultVector.y);\r\n\t\t\tconst angleDegrees = Math.atan2(Math.abs(resultVector.y), Math.abs(resultVector.x)) * 180 / Math.PI;\r\n\r\n\t\t\treturn {\r\n\t\t\t\tmagnitude,\r\n\t\t\t\tangleDegrees\r\n\t\t\t};\r\n\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\tprivate _applyDndReadyStyles = (): void => {\r\n\t\tthis._timeline.$task.classList.add(\"gantt_timeline_move_available\");\r\n\t};\r\n\r\n\tprivate _clearDndReadyStyles = (): void => {\r\n\t\tthis._timeline.$task.classList.remove(\"gantt_timeline_move_available\");\r\n\t};\r\n\r\n\tprivate _getScrollPosition = (timeline: any): IPoint => {\r\n\t\tconst gantt = this._gantt;\r\n\t\treturn {\r\n\t\t\tx: gantt.$ui.getView(timeline.$config.scrollX).getScrollState().position,\r\n\t\t\ty: gantt.$ui.getView(timeline.$config.scrollY).getScrollState().position\r\n\t\t};\r\n\t};\r\n\tprivate _countNewScrollPosition = (coords: IPoint): IPoint => {\r\n\t\tconst vector = this._calculateDirectionVector();\r\n\t\tlet shiftX = this._startPoint.x - coords.x;\r\n\t\tlet shiftY = this._startPoint.y - coords.y;\r\n\t\tif(vector){\r\n\t\t\tif(vector.angleDegrees < 15){\r\n\t\t\t\tshiftY = 0;\r\n\t\t\t} else if(vector.angleDegrees > 75){\r\n\t\t\t\tshiftX = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst result = {\r\n\t\t\tx: this._scrollState.x + shiftX,\r\n\t\t\ty: this._scrollState.y + shiftY\r\n\t\t};\r\n\t\treturn result;\r\n\t};\r\n\tprivate _setScrollPosition = (timeline: any, coords: IPoint): void => {\r\n\t\tconst gantt = this._gantt;\r\n\t\trequestAnimationFrame(() => {\r\n\t\t\tgantt.scrollLayoutCell(timeline.$id, coords.x, coords.y);\r\n\t\t});\r\n\t};\r\n\tprivate _stopDrag = (event: Event): void => {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._trace = [];\r\n\t\tgantt.$root.classList.remove(\"gantt_noselect\");\r\n\r\n\t\t// We need to set the readonly mode because with the key modifiers, \r\n\t\t// users may expect to start dragging the timeline on the task and link coordinates\r\n\t\tif(this._originalReadonly !== undefined && this._mouseDown){\r\n\t\t\tgantt.config.readonly = this._originalReadonly;\r\n\t\t\tif(gantt.config.drag_timeline && gantt.config.drag_timeline.render){\r\n\t\t\t\tgantt.render();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this._originAutoscroll !== undefined){\r\n\t\t\tgantt.config.autoscroll = this._originAutoscroll;\r\n\t\t}\r\n\r\n\t\tif(gantt.config.drag_timeline){\r\n\t\t\tconst { useKey } = gantt.config.drag_timeline;\r\n\t\t\tif (useKey && event[useKey] !== true) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._mouseDown = false;\r\n\t\t_dragInProgress = false;\r\n\t};\r\n\r\n\tprivate _startDrag = (event: any) : void => {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._originAutoscroll = gantt.config.autoscroll;\r\n\t\tgantt.config.autoscroll = false;\r\n\t\t_dragInProgress = true;\r\n\r\n\t\tgantt.$root.classList.add(\"gantt_noselect\");\r\n\t\tthis._originalReadonly = gantt.config.readonly;\r\n\t\tgantt.config.readonly = true;\r\n\r\n\t\tif(gantt.config.drag_timeline && gantt.config.drag_timeline.render){\r\n\t\t\tgantt.render();\r\n\t\t}\r\n\r\n\t\tthis._trace = [];\r\n\t\tthis._mouseDown = true;\r\n\t\tconst { x, y } = this._getScrollPosition(this._timeline);\r\n\t\tthis._scrollState = { x, y };\r\n\t\tthis._startPoint = { x: event.clientX, y: event.clientY };\r\n\t\tthis._trace.push(this._startPoint);\r\n\t};\r\n}","export default function(gantt) {\r\n\r\n\t(function () {\r\n\t\tvar modalsStack = [];\r\n\r\n\t\tfunction isModal() {\r\n\t\t\treturn !!modalsStack.length;\r\n\t\t}\r\n\r\n\t\tfunction afterPopup(box) {\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tif (!isModal()){\r\n\t\t\t\t\tif(!gantt.$destroyed){\r\n\t\t\t\t\t\tgantt.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, 1);\r\n\t\t}\r\n\r\n\t\tfunction startModal(box) {\r\n\t\t\tgantt.eventRemove(box, \"keydown\", trapFocus);\r\n\t\t\tgantt.event(box, \"keydown\", trapFocus);\r\n\t\t\tmodalsStack.push(box);\r\n\t\t\t//gantt.$keyboardNavigation.dispatcher.disable();\r\n\t\t}\r\n\r\n\t\tfunction endModal() {\r\n\t\t\tvar box = modalsStack.pop();\r\n\t\t\tif (box) {\r\n\t\t\t\tgantt.eventRemove(box, \"keydown\", trapFocus);\r\n\t\t\t}\r\n\t\t\tafterPopup(box);\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfunction isTopModal(box) {\r\n\t\t\treturn box == modalsStack[modalsStack.length - 1];\r\n\t\t}\r\n\r\n\t\tfunction trapFocus(event) {\r\n\t\t\tvar target = event.currentTarget;\r\n\t\t\tif (!isTopModal(target)) return;\r\n\r\n\t\t\tgantt.$keyboardNavigation.trapFocus(target, event);\r\n\t\t}\r\n\r\n\t\tfunction traceLightbox() {\r\n\t\t\tstartModal(gantt.getLightbox());\r\n\t\t}\r\n\r\n\t\tgantt.attachEvent(\"onLightbox\", traceLightbox);\r\n\t\tgantt.attachEvent(\"onAfterLightbox\", endModal);\r\n\t\tgantt.attachEvent(\"onLightboxChange\", function () {\r\n\t\t\tendModal();\r\n\t\t\ttraceLightbox();\r\n\t\t});\r\n\r\n\r\n\t\tgantt.attachEvent(\"onAfterQuickInfo\", function () {\r\n\t\t\tafterPopup();\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onMessagePopup\", function (box) {\r\n\t\t\tsaveFocus();\r\n\t\t\tstartModal(box);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterMessagePopup\", function () {\r\n\t\t\tendModal();\r\n\t\t\trestoreFocus();\r\n\t\t});\r\n\r\n\t\tvar focusElement = null;\r\n\r\n\t\tfunction saveFocus() {\r\n\t\t\tfocusElement = gantt.utils.dom.getActiveElement();\r\n\t\t}\r\n\r\n\t\tfunction restoreFocus() {\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tif (focusElement && focusElement.focus) {\r\n\t\t\t\t\tfocusElement.focus();\r\n\t\t\t\t\tfocusElement = null;\r\n\t\t\t\t}\r\n\t\t\t}, 1);\r\n\t\t}\r\n\r\n\t\tgantt.$keyboardNavigation.isModal = isModal;\r\n\r\n\r\n\t})();\r\n\r\n};","\r\ninterface IQuickInfoContainer{\r\n\tparent: HTMLElement;\r\n\txViewport: HTMLElement;\r\n\tyViewport: HTMLElement;\r\n}\r\n\r\nexport class QuickInfo {\r\n\tprivate _quickInfoTask: TaskID;\r\n\tprivate _quickInfoBoxId: number | string;\r\n\tprivate _quickInfoBox: HTMLElement;\r\n\tprivate _quickInfoReadonly: boolean | null;\r\n\tprivate _container: HTMLElement;\r\n\tprivate _gantt: any;\r\n\r\n\tconstructor(gantt: any) {\r\n\t\tthis._gantt = gantt;\r\n\t}\r\n\r\n\t// show at coordinates:\r\n\t// show(x: number, y: number)\r\n\t// show for a task:\r\n\t// show(id: TaskID)\r\n\tshow : {\r\n\t\t(x: number, y: number) : void;\r\n\t\t(id: TaskID) : void;\r\n\t} = (id: TaskID | number, y? : number) : void => {\r\n\t\tif (y === undefined) {\r\n\t\t\tthis._showForTask(id);\r\n\t\t} else {\r\n\t\t\tthis._showAtCoordinates(id as number, y);\r\n\t\t}\r\n\t};\r\n\r\n\thide = (forced?: boolean) : any => {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst qi = this._quickInfoBox;\r\n\t\tthis._quickInfoBoxId = 0;\r\n\t\tconst taskId = this._quickInfoTask;\r\n\t\tthis._quickInfoTask = null;\r\n\r\n\t\tif (qi && qi.parentNode){\r\n\r\n\t\t\tif (gantt.config.quick_info_detached) {\r\n\t\t\t\tgantt.callEvent(\"onAfterQuickInfo\", [taskId]);\r\n\t\t\t\treturn qi.parentNode.removeChild(qi);\r\n\t\t\t}\r\n\r\n\t\t\tqi.className += \" gantt_qi_hidden\";\r\n\t\t\tif (qi.style.right === \"auto\"){\r\n\t\t\t\tqi.style.left = \"-350px\";\r\n\t\t\t} else {\r\n\t\t\t\tqi.style.right = \"-350px\";\r\n\t\t\t}\r\n\r\n\t\t\tif (forced) {\r\n\t\t\t\tqi.style.left = qi.style.right = \"\";\r\n\t\t\t\tqi.parentNode.removeChild(qi);\r\n\t\t\t}\r\n\t\t\tgantt.callEvent(\"onAfterQuickInfo\", [taskId]);\r\n\t\t}\r\n\t};\r\n\r\n\tgetNode = (): HTMLElement => {\r\n\t\tif(this._quickInfoBox) {\r\n\t\t\treturn this._quickInfoBox;\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\tsetContainer = (container: string|HTMLElement): void => {\r\n\t\tif(container){\r\n\t\t\tthis._container = typeof container === \"string\" ? document.getElementById(container) : container;\r\n\t\t}\r\n\t};\r\n\r\n\tsetContent = (content?: IQuickInfoContent) => {\r\n\t\tconst gantt = this._gantt;\r\n\r\n\t\tconst defaultContent = {\r\n\t\t\ttaskId: null,\r\n\t\t\theader: {\r\n\t\t\t\ttitle: \"\",\r\n\t\t\t\tdate: \"\"\r\n\t\t\t},\r\n\t\t\tcontent: \"\",\r\n\t\t\tbuttons: gantt.config.quickinfo_buttons\r\n\t\t};\r\n\r\n\t\tif(!content){\r\n\t\t\tcontent = defaultContent;\r\n\t\t}\r\n\r\n\t\tif(!content.taskId){\r\n\t\t\tcontent.taskId = defaultContent.taskId;\r\n\t\t}\r\n\r\n\t\tif(!content.header){\r\n\t\t\tcontent.header = defaultContent.header;\r\n\t\t}\r\n\r\n\t\tif(!content.header.title){\r\n\t\t\tcontent.header.title = defaultContent.header.title;\r\n\t\t}\r\n\t\tif(!content.header.date){\r\n\t\t\tcontent.header.date = defaultContent.header.date;\r\n\t\t}\r\n\t\tif(!content.content){\r\n\t\t\tcontent.content = defaultContent.content;\r\n\t\t}\r\n\t\tif(!content.buttons){\r\n\t\t\tcontent.buttons = defaultContent.buttons;\r\n\t\t}\r\n\r\n\r\n\t\tlet qi = this.getNode();\r\n\t\tif(!qi){\r\n\t\t\tqi = this._createQuickInfoElement();\r\n\t\t}\r\n\r\n\t\tif(content.taskId){\r\n\t\t\tthis._quickInfoBoxId = content.taskId;\r\n\t\t}\r\n\r\n\t\tconst titleBox = qi.querySelector(\".gantt_cal_qi_title\") as HTMLElement;\r\n\t\tconst titleContent = titleBox.querySelector(\".gantt_cal_qi_tcontent\");\r\n\t\tconst titleDate = titleBox.querySelector(\".gantt_cal_qi_tdate\");\r\n\t\tconst main = qi.querySelector(\".gantt_cal_qi_content\");\r\n\t\tconst controls = qi.querySelector(\".gantt_cal_qi_controls\") as HTMLElement;\r\n\r\n\t\tgantt._waiAria.quickInfoHeader(qi, [content.header.title, content.header.date].join(\" \"));\r\n\r\n\t\ttitleContent.innerHTML = content.header.title;\r\n\t\ttitleDate.innerHTML = content.header.date;\r\n\r\n\t\tif(!content.header.title && !content.header.date){\r\n\t\t\ttitleBox.style.display = \"none\";\r\n\t\t}else{\r\n\t\t\ttitleBox.style.display = \"\";\r\n\t\t}\r\n\t\tmain.innerHTML = content.content;\r\n\r\n\t\tconst buttons = content.buttons;\r\n\t\tif(!buttons.length){\r\n\t\t\tcontrols.style.display = \"none\";\r\n\t\t}else{\r\n\t\t\tcontrols.style.display = \"\";\r\n\t\t}\r\n\t\tlet html = \"\";\r\n\t\tfor (let i = 0; i < buttons.length; i++){\r\n\r\n\t\t\tconst ariaAttr = gantt._waiAria.quickInfoButtonAttrString(gantt.locale.labels[buttons[i]]);\r\n\r\n\t\t\thtml += `<div class=\"gantt_qi_big_icon ${buttons[i]} dhx_gantt_${buttons[i]}\" title=\"${gantt.locale.labels[buttons[i]]}\" ${ariaAttr}>\r\n            <div class='dhx_menu_icon dhx_gantt_icon ${buttons[i]} gantt_menu_icon dhx_gantt_${buttons[i]}'></div>\r\n            <div>${gantt.locale.labels[buttons[i]]}</div>\r\n         </div>`;\r\n\t\t}\r\n\t\tcontrols.innerHTML = html;\r\n\r\n\t\tgantt.eventRemove(qi, \"click\", this._qiButtonClickHandler);\r\n\t\tgantt.eventRemove(qi, \"keypress\", this._qiKeyPressHandler);\r\n\r\n\t\tgantt.event(qi, \"click\", this._qiButtonClickHandler);\r\n\t\tgantt.event(qi, \"keypress\", this._qiKeyPressHandler);\r\n\t};\r\n\r\n\tprivate _qiButtonClickHandler = (ev) => {\r\n\t\tthis._qi_button_click(ev.target);\r\n\t};\r\n\r\n\tprivate _qiKeyPressHandler = (e) => {\r\n\r\n\t\tconst code = e.which;\r\n\t\tif (code === 13 || code === 32){\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis._qi_button_click(e.target);\r\n\t\t\t},1);\r\n\t\t}\r\n\t};\r\n\r\n\tprivate _showAtCoordinates(x: number, y: number) : void {\r\n\t\tthis.hide(true);\r\n\t\tthis._quickInfoBoxId = 0;\r\n\t\tthis._quickInfoTask = null;\r\n\t\tif(!this._quickInfoBox){\r\n\t\t\tthis._createQuickInfoElement();\r\n\t\t\tthis.setContent();\r\n\t\t}\r\n\r\n\t\tthis._appendAtCoordinates(x, y);\r\n\t\tthis._gantt.callEvent(\"onQuickInfo\", [null]);\r\n\t}\r\n\r\n\tprivate _showForTask(id: TaskID) : void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tif ((\r\n\t\t\tid === this._quickInfoBoxId &&\r\n\t\t\tgantt.utils.dom.isChildOf(this._quickInfoBox, document.body)\r\n\t\t) || !gantt.config.show_quick_info) {\r\n\t\t\t// not show if the quick info is already displayed for this task, or if it shouldn't be displayed\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.hide(true);\r\n\t\tconst offset = 6; // offset TASK <> QI-BOX in 'px'\r\n\t\tconst container = this._getContainer();\r\n\t\tconst pos = this._get_event_counter_part(id, offset, container.xViewport, container.yViewport);\r\n\r\n\t\tif (pos){\r\n\t\t\tthis._quickInfoBox = this._init_quick_info(id);\r\n\t\t\tthis._quickInfoTask = id;\r\n\t\t\tthis._quickInfoBox.className = this._prepare_quick_info_classname(id);\r\n\r\n\t\t\tthis._fill_quick_data(id);\r\n\t\t\tthis._show_quick_info(pos, offset);\r\n\t\t\tgantt.callEvent(\"onQuickInfo\", [id]);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _get_event_counter_part(id: TaskID, offset: number, xViewport: HTMLElement, yViewport: HTMLElement) : any {\r\n\t\tconst gantt = this._gantt;\r\n\t\tlet domEv = gantt.getTaskNode(id);\r\n\t\tif (!domEv) {\r\n\t\t\tdomEv = gantt.getTaskRowNode(id);\r\n\t\t\tif (!domEv) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet left = 0;\r\n\t\tconst top = offset + domEv.offsetTop + domEv.offsetHeight;\r\n\r\n\t\tlet node = domEv;\r\n\r\n\t\tif (gantt.utils.dom.isChildOf(node, xViewport)) {\r\n\t\t\twhile (node && node !== xViewport){\r\n\t\t\t\tleft += node.offsetLeft;\r\n\t\t\t\tnode = node.offsetParent;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst scroll = gantt.getScrollState();\r\n\r\n\t\tif(node){\r\n\t\t\tconst dx = (left + domEv.offsetWidth/2) - scroll.x > (xViewport.offsetWidth/2) ? 1 : 0;\r\n\t\t\tconst dy = (top + domEv.offsetHeight/2) - scroll.y > (yViewport.offsetHeight/2) ? 1 : 0;\r\n\r\n\t\t\treturn { left, top, dx, dy, width:domEv.offsetWidth, height:domEv.offsetHeight };\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tprivate _createQuickInfoElement() : HTMLElement {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst qi = document.createElement(\"div\");\r\n\t\tqi.className += \"gantt_cal_quick_info\";\r\n\t\tgantt._waiAria.quickInfoAttr(qi);\r\n\r\n\t\t// title\r\n\t\tconst ariaAttr = gantt._waiAria.quickInfoHeaderAttrString();\r\n\t\tvar html = `\r\n\t\t<div class=\"gantt_cal_qi_tcontrols\">\r\n\t\t\t<a class=\"gantt_cal_qi_close_btn dhx_gantt_icon dhx_gantt_icon_close\"></a>\r\n\t\t</div>\r\n\t\t<div class=\"gantt_cal_qi_title\" ${ariaAttr}>\r\n\t\t\t\t\r\n\t\t\t\t<div class=\"gantt_cal_qi_tcontent\"></div>\r\n\t\t\t\t<div class=\"gantt_cal_qi_tdate\"></div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"gantt_cal_qi_content\"></div>`;\r\n\r\n\t\t//buttons\r\n\t\thtml += \"<div class=\\\"gantt_cal_qi_controls\\\">\";\r\n\r\n\t\thtml += \"</div>\";\r\n\r\n\t\tqi.innerHTML = html;\r\n\r\n\r\n\t\tif (gantt.config.quick_info_detached) {\r\n\t\t\tconst container = this._getContainer();\r\n\t\t\tgantt.event(container.parent, \"scroll\", () => { this.hide(); });\r\n\t\t}\r\n\r\n\t\tthis._quickInfoBox = qi;\r\n\t\treturn qi;\r\n\t}\r\n\r\n\tprivate _init_quick_info(id: TaskID) : HTMLElement {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst task = gantt.getTask(id);\r\n\t\t\r\n\r\n\t\tif(typeof this._quickInfoReadonly === \"boolean\"){\r\n\t\t\tif(gantt.isReadonly(task) !== this._quickInfoReadonly){\r\n\t\t\t\tthis.hide(true);\r\n\t\t\t\tthis._quickInfoBox = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._quickInfoReadonly = gantt.isReadonly(task);\r\n\r\n\t\tif (!this._quickInfoBox){\r\n\t\t\tthis._quickInfoBox = this._createQuickInfoElement();\r\n\t\t}\r\n\r\n\t\treturn this._quickInfoBox;\r\n\t}\r\n\r\n\tprivate _prepare_quick_info_classname(id: TaskID) : string {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst task = gantt.getTask(id);\r\n\t\tconst taskType = gantt.getTaskType(task);\r\n\r\n\t\tlet css = `gantt_cal_quick_info gantt_${taskType}`;\r\n\t\tconst template = gantt.templates.quick_info_class(task.start_date, task.end_date, task);\r\n\r\n\t\tif(template){\r\n\t\t\tcss += \" \" + template;\r\n\t\t}\r\n\t\treturn css;\r\n\t}\r\n\r\n\tprivate _fill_quick_data(id: TaskID) : void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst ev = gantt.getTask(id);\r\n\r\n\t\tthis._quickInfoBoxId = id;\r\n\r\n\t\tlet allowedButtons = [];\r\n\t\tif (this._quickInfoReadonly){\r\n\t\t\tconst buttons = gantt.config.quickinfo_buttons;\r\n\t\t\tconst isEditor = {icon_delete: true, icon_edit: true};\r\n\t\t\tfor (let i = 0; i < buttons.length; i++){\r\n\t\t\t\tif(this._quickInfoReadonly && isEditor[buttons[i]]){\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tallowedButtons.push(buttons[i]);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tallowedButtons = gantt.config.quickinfo_buttons;\r\n\t\t}\r\n\r\n\t\tthis.setContent({\r\n\t\t\theader: {\r\n\t\t\t\ttitle: gantt.templates.quick_info_title(ev.start_date, ev.end_date, ev),\r\n\t\t\t\tdate: gantt.templates.quick_info_date(ev.start_date, ev.end_date, ev)\r\n\t\t\t},\r\n\t\t\tcontent: gantt.templates.quick_info_content(ev.start_date, ev.end_date, ev),\r\n\t\t\tbuttons: allowedButtons\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _appendAtCoordinates(x: number, y: number): void {\r\n\t\tconst qi = this._quickInfoBox;\r\n\t\tconst container = this._getContainer();\r\n\t\tif (!qi.parentNode ||\r\n\t\t\tqi.parentNode.nodeName.toLowerCase() === \"#document-fragment\"){ // IE8\r\n\t\t\tcontainer.parent.appendChild(qi);\r\n\t\t}\r\n\r\n\t\tqi.style.left = x + \"px\";\r\n\t\tqi.style.top = y + \"px\";\r\n\t}\r\n\r\n\tprivate _show_quick_info(pos: any, offset: number) : void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst qi = this._quickInfoBox;\r\n\t\tif (gantt.config.quick_info_detached) {\r\n\t\t\tconst container = this._getContainer();\r\n\t\t\tif (!qi.parentNode ||\r\n\t\t\t\tqi.parentNode.nodeName.toLowerCase() === \"#document-fragment\"){ // IE8\r\n\t\t\t\tcontainer.parent.appendChild(qi);\r\n\t\t\t}\r\n\t\t\tconst width = qi.offsetWidth;\r\n\t\t\tconst popupHeight = qi.offsetHeight;\r\n\r\n\t\t\tconst scrolls = gantt.getScrollState();\r\n\t\t\tconst xViewport = container.xViewport;\r\n\t\t\tconst yViewport = container.yViewport;\r\n\t\t\tconst screenWidth = xViewport.offsetWidth + scrolls.x - width;\r\n\r\n\t\t\tconst relativePopupTop = pos.top - scrolls.y;\r\n\t\t\tconst relativePopupBottom = relativePopupTop + popupHeight;\r\n\r\n\t\t\tlet top = pos.top;\r\n\t\t\tif(relativePopupBottom > yViewport.offsetHeight / 2){\r\n\t\t\t\ttop = pos.top - (popupHeight + pos.height + 2*offset);\r\n\t\t\t\tif(top < scrolls.y && relativePopupBottom <= yViewport.offsetHeight){\r\n\t\t\t\t\ttop = pos.top;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (top < scrolls.y) {\r\n\t\t\t\ttop = scrolls.y;\r\n\t\t\t}\r\n\r\n\t\t\tconst x = Math.min(Math.max(scrolls.x, pos.left - pos.dx*(width - pos.width)), screenWidth);\r\n\t\t\tconst y = top;\r\n\r\n\t\t\tthis._appendAtCoordinates(x, y);\r\n\t\t} else {\r\n\t\t\tqi.style.top = 20 + \"px\";\r\n\t\t\tif (pos.dx === 1){\r\n\t\t\t\tqi.style.right = \"auto\";\r\n\t\t\t\tqi.style.left = \"-300px\";\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tqi.style.left = \"10px\";\r\n\t\t\t\t},1);\r\n\t\t\t} else {\r\n\t\t\t\tqi.style.left = \"auto\";\r\n\t\t\t\tqi.style.right = \"-300px\";\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tqi.style.right = \"10px\";\r\n\t\t\t\t},1);\r\n\t\t\t}\r\n\t\t\tqi.className += \" gantt_qi_\"+(pos.dx === 1 ? \"left\" : \"right\");\r\n\t\t\tgantt.$root.appendChild(qi);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _qi_button_click(node: any) : void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst box = this._quickInfoBox;\r\n\t\tif (!node || node === box){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(node.closest(\".gantt_cal_qi_close_btn\")){\r\n\t\t\tthis.hide();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst mask = node.className;\r\n\t\tif (mask.indexOf(\"_icon\") !== -1){\r\n\t\t\tconst id = this._quickInfoBoxId;\r\n\t\t\tgantt.$click.buttons[mask.split(\" \")[1].replace(\"icon_\",\"\")](id);\r\n\t\t} else {\r\n\t\t\tthis._qi_button_click(node.parentNode);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _getContainer(): IQuickInfoContainer{\r\n\t\tconst gantt = this._gantt;\r\n\t\tlet container = this._container ? this._container : gantt.$task_data;\r\n\t\tif (container && container.offsetHeight && container.offsetWidth) {\r\n\t\t\treturn {\r\n\t\t\t\tparent: container,\r\n\t\t\t\txViewport: gantt.$task,\r\n\t\t\t\tyViewport: gantt.$task_data\r\n\t\t\t};\r\n\t\t}\r\n\t\tcontainer = this._container ? this._container : gantt.$grid_data;\r\n\t\tif (container && container.offsetHeight && container.offsetWidth) {\r\n\t\t\treturn {\r\n\t\t\t\tparent: container,\r\n\t\t\t\txViewport: gantt.$grid,\r\n\t\t\t\tyViewport: gantt.$grid_data\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tparent: this._container ? this._container : gantt.$layout,\r\n\t\t\txViewport: gantt.$layout,\r\n\t\t\tyViewport: gantt.$layout\r\n\t\t};\r\n\t}\r\n}\r\n","import * as helpers from \"./helpers\";\r\n\r\nvar plainObjectConstructor = ({}).constructor.toString();\r\nfunction isCustomType(object){\r\n\tvar constructorString = object.constructor.toString();\r\n\r\n\treturn constructorString !== plainObjectConstructor;\r\n}\r\n\r\nfunction isExternalType(object){\r\n\t// react elements are not plain objects, but they are not custom types either\r\n\t// can't deep copy them\r\n\treturn object.$$typeof && object.$$typeof.toString().includes(\"react.\");\r\n}\r\n\r\nfunction copy(object) {\r\n\tvar i, result; // iterator, types array, result\r\n\r\n\tif (object && typeof object == \"object\") {\r\n\r\n\t\tswitch (true){\r\n\t\t\tcase (helpers.isDate(object)):\r\n\t\t\t\tresult = new Date(object);\r\n\t\t\t\tbreak;\r\n\t\t\tcase (helpers.isArray(object)):\r\n\t\t\t\tresult = new Array(object.length);\r\n\t\t\t\tfor(i = 0; i < object.length; i++){\r\n\t\t\t\t\tresult[i] = copy(object[i]);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t/*\t\tcase (helpers.isStringObject(object)):\r\n\t\t\t\tresult = new String(object);\r\n\t\t\t\tbreak;\r\n\t\t\tcase (helpers.isNumberObject(object)):\r\n\t\t\t\tresult = new Number(object);\r\n\t\t\t\tbreak;\r\n\t\t\tcase (helpers.isBooleanObject(object)):\r\n\t\t\t\tresult = new Boolean(object);\r\n\t\t\t\tbreak;*/\r\n\t\t\tdefault:\r\n\t\t\t\tif(isCustomType(object)){\r\n\t\t\t\t\tresult = Object.create(object);\r\n\t\t\t\t}else if (isExternalType(object)){\r\n\t\t\t\t\tresult = object;\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (i in object) {\r\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.apply(object, [i]))\r\n\t\t\t\t\t\tresult[i] = copy(object[i]);\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\treturn result || object;\r\n}\r\n\r\nfunction mixin (target, source, force){\r\n\tfor (var f in source)\r\n\t\tif (((target[f] === undefined) || force)) target[f]=source[f];\r\n\treturn target;\r\n}\r\n\r\nfunction defined(obj) {\r\n\treturn typeof(obj) != \"undefined\";\r\n}\r\n\r\nvar seed;\r\nfunction uid() {\r\n\tif (!seed)\r\n\t\tseed = (new Date()).valueOf();\r\n\r\n\tseed++;\r\n\treturn seed;\r\n}\r\n\r\n//creates function with specified \"this\" pointer\r\nfunction bind(functor, object){\r\n\tif(functor.bind)\r\n\t\treturn functor.bind(object);\r\n\telse\r\n\t\treturn function(){ return functor.apply(object,arguments); };\r\n}\r\n\r\nfunction event(el, event, handler, capture){\r\n\tif (el.addEventListener)\r\n\t\tel.addEventListener(event, handler, capture === undefined ? false : capture);\r\n\r\n\telse if (el.attachEvent)\r\n\t\tel.attachEvent(\"on\"+event, handler);\r\n}\r\n\r\nfunction eventRemove(el, event, handler, capture){\r\n\tif (el.removeEventListener)\r\n\t\tel.removeEventListener(event, handler, capture === undefined ? false : capture);\r\n\r\n\telse if (el.detachEvent)\r\n\t\tel.detachEvent(\"on\"+event, handler);\r\n}\r\n\r\nexport {\r\n\tcopy,\r\n\tdefined,\r\n\tmixin,\r\n\tuid,\r\n\tbind,\r\n\tevent,\r\n\teventRemove\r\n};","import * as utils from \"../../../utils/utils\";\r\n\r\nfunction createScope(addEvent, removeEvent) {\r\n\taddEvent = addEvent || utils.event;\r\n\tremoveEvent = removeEvent || utils.eventRemove;\r\n\r\n\tvar handlers = [];\r\n\r\n\tvar eventScope = {\r\n\t\tattach: function(el, event, callback, capture){\r\n\t\t\thandlers.push({element: el, event:event, callback: callback, capture: capture});\r\n\t\t\taddEvent(el, event, callback, capture);\r\n\t\t},\r\n\t\tdetach: function(el, event, callback, capture){\r\n\t\t\tremoveEvent(el, event, callback, capture);\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tvar handler = handlers[i];\r\n\t\t\t\tif (handler.element === el && handler.event === event && handler.callback === callback && handler.capture === capture) {\r\n\t\t\t\t\thandlers.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdetachAll: function () {\r\n\t\t\tvar staticArray = handlers.slice();\r\n\t\t\t// original handlers array can be spliced on every iteration\r\n\t\t\tfor (var i = 0; i < staticArray.length; i++){\r\n\t\t\t\tvar handler = staticArray[i];\r\n\t\t\t\teventScope.detach(handler.element, handler.event, handler.callback, handler.capture);\r\n\t\t\t\teventScope.detach(handler.element, handler.event, handler.callback, undefined);\r\n\t\t\t\teventScope.detach(handler.element, handler.event, handler.callback, false);\r\n\t\t\t\teventScope.detach(handler.element, handler.event, handler.callback, true);\r\n\t\t\t}\r\n\t\t\thandlers.splice(0, handlers.length);\r\n\t\t},\r\n\t\textend: function(){\r\n\t\t\treturn createScope(this.event, this.eventRemove);\r\n\t\t}\r\n\t};\r\n\r\n\treturn eventScope;\r\n}\r\n\r\nexport default createScope;","import * as domHelpers from \"../../core/ui/utils/dom_helpers\";\r\n\r\n/* eslint-disable no-restricted-globals */\r\n\r\ninterface IViewPosition{\r\n\ttop: number;\r\n\tleft: number;\r\n}\r\n\r\ninterface IViewBox extends IViewPosition{\r\n\twidth: number;\r\n\theight: number;\r\n\tbottom: number;\r\n\tright: number;\r\n}\r\n\r\nexport class Tooltip {\r\n\tprivate _root: HTMLElement;\r\n\tprivate _tooltipNode: HTMLElement;\r\n\tprivate _gantt: any;\r\n\r\n\tconstructor(gantt: any){\r\n\t\tthis._gantt = gantt;\r\n\t}\r\n\r\n\tgetNode() : HTMLElement {\r\n\t\tconst gantt = this._gantt;\r\n\t\tif (!this._tooltipNode){\r\n\t\t\tthis._tooltipNode = document.createElement(\"div\");\r\n\t\t\tthis._tooltipNode.className = \"gantt_tooltip\";\r\n\t\t\tgantt._waiAria.tooltipAttr(this._tooltipNode);\r\n\t\t}\r\n\t\treturn this._tooltipNode;\r\n\t}\r\n\r\n\tsetViewport(node: HTMLElement):Tooltip{\r\n\t\tthis._root = node;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tshow(left: number, top: number): Tooltip;\r\n\tshow(event: MouseEvent): Tooltip;\r\n\tshow(left: number | MouseEvent, top?: number): Tooltip {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst container = document.body;\r\n\t\tconst node = this.getNode();\r\n\r\n\t\tif(!domHelpers.isChildOf(node, container)){\r\n\t\t\tthis.hide();\r\n\t\t\t// GS-2463. Don't put the node beyond the body coordinates\r\n\t\t\t// as it may trigger the resize event\r\n\t\t\tnode.style.top = node.style.top || \"0px\";\r\n\t\t\tnode.style.left = node.style.left || \"0px\";\r\n\t\t\tcontainer.appendChild(node);\r\n\t\t}\r\n\r\n\t\tif (this._isLikeMouseEvent(left)) {\r\n\t\t\tconst position = this._calculateTooltipPosition(left as MouseEvent);\r\n\t\t\ttop = position.top;\r\n\t\t\tleft = position.left;\r\n\t\t}\r\n\r\n\t\tnode.style.top = top + \"px\";\r\n\t\tnode.style.left = left + \"px\";\r\n\r\n\t\tgantt._waiAria.tooltipVisibleAttr(node);\r\n\t\treturn this;\r\n\t}\r\n\thide() : Tooltip{\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst node = this.getNode();\r\n\t\tif(node && node.parentNode){\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t}\r\n\t\tgantt._waiAria.tooltipHiddenAttr(node);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tsetContent(html: string) : Tooltip{\r\n\t\tconst node = this.getNode();\r\n\t\tnode.innerHTML = html;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t// it is for salesforce, because it proxies event to it own events\r\n\tprivate _isLikeMouseEvent(event: any): boolean {\r\n\t\tif (!event || typeof event !== \"object\") {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn \"clientX\" in event && \"clientY\" in event;\r\n\t}\r\n\r\n\tprivate _getViewPort() : HTMLElement {\r\n\t\treturn this._root || document.body;\r\n\t}\r\n\r\n\r\n\tprivate _calculateTooltipPosition(event: MouseEvent): IViewPosition{\r\n\t\tconst gantt = this._gantt;\r\n\t\t// top/left coordinates inside the viewport by mouse position\r\n\t\tconst viewport =  this._getViewPortSize();\r\n\t\tconst tooltipNode = this.getNode();\r\n\t\tconst tooltip: IViewBox = {\r\n\t\t\ttop:0,\r\n\t\t\tleft: 0,\r\n\t\t\twidth: tooltipNode.offsetWidth,\r\n\t\t\theight: tooltipNode.offsetHeight,\r\n\t\t\tbottom: 0,\r\n\t\t\tright: 0\r\n\t\t};\r\n\r\n\t\tconst offsetX = gantt.config.tooltip_offset_x;\r\n\t\tconst offsetY = gantt.config.tooltip_offset_y;\r\n\r\n\t\tconst container = document.body;\r\n\t\tconst mouse = domHelpers.getRelativeEventPosition(event, container);\r\n\t\tconst containerPos = domHelpers.getNodePosition(container);\r\n\t\tmouse.y += containerPos.y; // to fix margin collapsing\r\n\r\n\t\ttooltip.top = mouse.y;\r\n\t\ttooltip.left = mouse.x;\r\n\t\ttooltip.top += offsetY;\r\n\t\ttooltip.left += offsetX;\r\n\t\ttooltip.bottom = tooltip.top + tooltip.height;\r\n\t\ttooltip.right = tooltip.left + tooltip.width;\r\n\r\n\t\tconst scrollTop = window.scrollY + container.scrollTop; // to fix margin collapsing\r\n\t\t// edge cases when the tooltip element can be partially hidden by edges of the viewport\r\n\t\tif(tooltip.top < viewport.top - scrollTop){\r\n\t\t\ttooltip.top = viewport.top;\r\n\t\t\ttooltip.bottom = tooltip.top + tooltip.height;\r\n\t\t}else if(tooltip.bottom > viewport.bottom){\r\n\t\t\ttooltip.bottom = viewport.bottom;\r\n\t\t\ttooltip.top = tooltip.bottom - tooltip.height;\r\n\t\t}\r\n\r\n\t\tif(tooltip.left < viewport.left){\r\n\t\t\ttooltip.left = viewport.left;\r\n\t\t\ttooltip.right = viewport.left + tooltip.width;\r\n\t\t}else if(tooltip.right > viewport.right){\r\n\t\t\ttooltip.right = viewport.right;\r\n\t\t\ttooltip.left = tooltip.right - tooltip.width;\r\n\t\t}\r\n\r\n\t\tif(mouse.x >= tooltip.left && mouse.x <= tooltip.right) {\r\n\t\t\ttooltip.left = mouse.x - tooltip.width - offsetX;\r\n\t\t\ttooltip.right = tooltip.left + tooltip.width;\r\n\t\t}\r\n\r\n\t\tif(mouse.y >= tooltip.top && mouse.y <= tooltip.bottom) {\r\n\t\t\ttooltip.top = mouse.y - tooltip.height - offsetY;\r\n\t\t\ttooltip.bottom = tooltip.top + tooltip.height;\r\n\t\t}\r\n\r\n\t\t// GS-2827: when tooltip width too long\r\n\t\tif(tooltip.left < 0){\r\n\t\t\ttooltip.left = 0;\r\n\t\t}\r\n\t\tif(tooltip.right < 0){\r\n\t\t\ttooltip.right = 0;\r\n\t\t}\r\n\r\n\t\treturn tooltip;\r\n\t}\r\n\r\n\tprivate _getViewPortSize() : IViewBox {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst container = this._getViewPort();\r\n\t\tlet viewport = container;\r\n\t\tlet scrollTop = window.scrollY + document.body.scrollTop;\r\n\t\tlet scrollLeft = window.scrollX + document.body.scrollLeft;\r\n\t\tlet pos;\r\n\t\t// support for the initial tooltip mode where the tooltip element was attached to the data area of gantt\r\n\t\tif(container === gantt.$task_data){\r\n\t\t\tviewport = gantt.$task;\r\n\t\t\tscrollTop = 0;\r\n\t\t\tscrollLeft = 0;\r\n\t\t\tpos = domHelpers.getNodePosition(gantt.$task);\r\n\t\t}else{\r\n\t\t\tpos = domHelpers.getNodePosition(viewport);\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tleft:pos.x + scrollLeft,\r\n\t\t\ttop: pos.y + scrollTop,\r\n\t\t\twidth: pos.width,\r\n\t\t\theight: pos.height,\r\n\t\t\tbottom: pos.y + pos.height + scrollTop,\r\n\t\t\tright: pos.x + pos.width + scrollLeft\r\n\t\t};\r\n\t}\r\n}\r\n","import domEventsScope from \"../../core/ui/utils/dom_event_scope\";\r\nimport * as domHelpers from \"../../core/ui/utils/dom_helpers\";\r\nimport * as helpers from \"../../utils/helpers\";\r\nimport { Tooltip } from \"./tooltip\";\r\n\r\ninterface ITrackerTarget {\r\n\tselector: string;\r\n\tonmouseenter: (event: MouseEvent, node: HTMLElement) => void;\r\n\tonmousemove: (event: MouseEvent, node: HTMLElement) => void;\r\n\tonmouseleave: (event: MouseEvent, node: HTMLElement) => void;\r\n\tglobal: boolean;\r\n}\r\n\r\ninterface ITooltipConfig {\r\n\tselector: string;\r\n\thtml: (event: MouseEvent, node: HTMLElement) => string;\r\n\tglobal: boolean;\r\n}\r\n\r\nexport class TooltipManager{\r\n\ttooltip: Tooltip;\r\n\tprotected _domEvents: any;\r\n\tprivate _listeners: object = {};\r\n\tprivate _gantt: any;\r\n\tprivate delayShow: any;\r\n\tprivate delayHide: any;\r\n\r\n\tconstructor(gantt: any) {\r\n\t\tthis.tooltip = new Tooltip(gantt);\r\n\t\tthis._gantt = gantt;\r\n\t\tthis._domEvents = domEventsScope();\r\n\t\tthis._initDelayedFunctions();\r\n\t}\r\n\r\n\tdestructor(): void{\r\n\t\tthis.tooltip.hide();\r\n\t\tthis._domEvents.detachAll();\r\n\t}\r\n\thideTooltip(): void{\r\n\t\tthis.delayHide();\r\n\t}\r\n\tattach(config: ITrackerTarget): void {\r\n\t\tlet root = document.body;\r\n\t\tconst gantt = this._gantt;\r\n\t\tif(!config.global){\r\n\t\t\troot = gantt.$root;\r\n\t\t}\r\n\r\n\t\tlet watchableTarget = null;\r\n\t\tconst handler = (event) => {\r\n\t\t\tconst eventTarget = domHelpers.getTargetNode(event);\r\n\t\t\tconst targetNode = domHelpers.closest(eventTarget, config.selector);\r\n\t\t\tif(domHelpers.isChildOf(eventTarget, this.tooltip.getNode())){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst doOnMouseEnter = () => {\r\n\t\t\t\twatchableTarget = targetNode;\r\n\t\t\t\tconfig.onmouseenter(event, targetNode);\r\n\t\t\t};\r\n\r\n\t\t\tif(watchableTarget){\r\n\t\t\t\tif(targetNode && targetNode === watchableTarget){\r\n\t\t\t\t\tconfig.onmousemove(event, targetNode);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconfig.onmouseleave(event, watchableTarget);\r\n\t\t\t\t\twatchableTarget = null;\r\n\r\n\t\t\t\t\tif(targetNode && targetNode !== watchableTarget){\r\n\t\t\t\t\t\tdoOnMouseEnter();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(targetNode){\r\n\t\t\t\t\tdoOnMouseEnter();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.detach(config.selector);\r\n\t\tthis._domEvents.attach(root, \"mousemove\", handler);\r\n\t\tthis._listeners[config.selector] = {\r\n\t\t\tnode: root,\r\n\t\t\thandler\r\n\t\t};\r\n\t}\r\n\r\n\tdetach(selector: string): void {\r\n\t\tconst listener = this._listeners[selector];\r\n\t\tif(listener){\r\n\t\t\tthis._domEvents.detach(listener.node, \"mousemove\", listener.handler);\r\n\t\t}\r\n\t}\r\n\r\n\ttooltipFor(config: ITooltipConfig): void {\r\n\t\tconst cloneDomEvent = (event: MouseEvent) => {\r\n\t\t\tlet clone = event;\r\n\t\t\t// making events survive timeout in ie\r\n\t\t\t// tslint:disable-next-line no-string-literal\r\n\t\t\tif(document[\"createEventObject\"] && !document.createEvent){\r\n\t\t\t\t// tslint:disable-next-line no-string-literal\r\n\t\t\t\tclone = document[\"createEventObject\"](event);\r\n\t\t\t}\r\n\t\t\treturn clone;\r\n\t\t};\r\n\t\tthis._initDelayedFunctions();\r\n\t\tthis.attach({\r\n\t\t\tselector: config.selector,\r\n\t\t\tglobal: config.global,\r\n\t\t\tonmouseenter:(event: MouseEvent, node: HTMLElement) => {\r\n\t\t\t\tconst html = config.html(event, node);\r\n\t\t\t\tif(html){\r\n\t\t\t\t\tthis.delayShow(cloneDomEvent(event), html);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonmousemove:(event: MouseEvent, node: HTMLElement) => {\r\n\t\t\t\tconst html = config.html(event, node);\r\n\t\t\t\tif(html){\r\n\t\t\t\t\tthis.delayShow(cloneDomEvent(event), html);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.delayShow.$cancelTimeout();\r\n\t\t\t\t\tthis.delayHide();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonmouseleave:() => {\r\n\t\t\t\tthis.delayShow.$cancelTimeout();\r\n\t\t\t\tthis.delayHide();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _initDelayedFunctions(){\r\n\t\tconst gantt = this._gantt;\r\n\t\t// reset delayed functions in order to apply current values of tooltip_timeout\r\n\t\tif(this.delayShow){\r\n\t\t\tthis.delayShow.$cancelTimeout();\r\n\t\t}\r\n\t\tif(this.delayHide){\r\n\t\t\tthis.delayHide.$cancelTimeout();\r\n\t\t}\r\n\t\tthis.tooltip.hide();\r\n\r\n\t\tthis.delayShow = helpers.delay((event: MouseEvent, html: string) => {\r\n\t\t\tif(gantt.callEvent(\"onBeforeTooltip\", [event]) === false) {\r\n\t\t\t\tthis.tooltip.hide();\r\n\t\t\t} else {\r\n\t\t\t\tthis.tooltip.setContent(html);\r\n\t\t\t\tthis.tooltip.show(event);\r\n\t\t\t}\r\n\t\t}, gantt.config.tooltip_timeout || 1);\r\n\r\n\t\tthis.delayHide = helpers.delay(() => {\r\n\t\t\tthis.delayShow.$cancelTimeout();\r\n\t\t\tthis.tooltip.hide();\r\n\t\t}, gantt.config.tooltip_hide_timeout || 1);\r\n\t}\r\n\r\n}","import { IInlineEditState, IMonitor, IUndo, IUndoCommand, TActionType, TEntityType, TUndoValue } from \"./types\";\r\n\r\nconst noTrack = {\r\n\tonBeforeUndo: \"onAfterUndo\",\r\n\tonBeforeRedo: \"onAfterRedo\"\r\n};\r\n\r\nconst batchActions = [\r\n\t\"onTaskDragStart\",\r\n\t\"onAfterTaskUpdate\",\r\n\t\"onAfterParentExpand\",\r\n\t\"onAfterTaskDelete\",\r\n\t\"onBeforeBatchUpdate\"\r\n];\r\n\r\nexport class Monitor implements IMonitor {\r\n\tprivate _batchAction = null;\r\n\tprivate _batchMode = false;\r\n\tprivate _ignore = false;\r\n\tprivate _ignoreMoveEvents = false;\r\n\tprivate _initialTasks = {};\r\n\tprivate _initialLinks = {};\r\n\tprivate _nestedTasks =  {};\r\n\tprivate _nestedLinks = {};\r\n\tprivate _timeout;\r\n\tprivate _gantt: any;\r\n\tprivate _undo: IUndo;\r\n\r\n\tconstructor(undo: IUndo, gantt: any) {\r\n\t\tthis._undo = undo;\r\n\t\tthis._gantt = gantt;\r\n\t\tthis._attachEvents();\r\n\t}\r\n\r\n\tstore(id: TaskID | LinkID, type: TEntityType, overwrite: boolean = false) {\r\n\t\tif (type === this._gantt.config.undo_types.task) {\r\n\t\t\treturn this._storeTask(id, overwrite);\r\n\t\t}\r\n\t\tif (type === this._gantt.config.undo_types.link) {\r\n\t\t\treturn this._storeLink(id, overwrite);\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tisMoveEventsIgnored() {\r\n\t\treturn this._ignoreMoveEvents;\r\n\t}\r\n\ttoggleIgnoreMoveEvents(newValue?: boolean) {\r\n\t\tthis._ignoreMoveEvents = newValue || false;\r\n\t}\r\n\tstartIgnore() {\r\n\t\tthis._ignore = true;\r\n\t}\r\n\tstopIgnore() {\r\n\t\tthis._ignore = false;\r\n\t}\r\n\tstartBatchAction() {\r\n\t\t// try catching updates made from event handlers using timeout\r\n\t\tif (!this._timeout){\r\n\t\t\tthis._timeout = setTimeout(() => {\r\n\t\t\t\tthis.stopBatchAction();\r\n\t\t\t\tthis._timeout = null;\r\n\t\t\t}, 10);\r\n\t\t}\r\n\r\n\r\n\t\tif (this._ignore || this._batchMode) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._batchMode = true;\r\n\t\tthis._batchAction = this._undo.action.create();\r\n\t}\r\n\tstopBatchAction() {\r\n\t\tif (this._ignore) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst undo = this._undo;\r\n\t\tif (this._batchAction) {\r\n\t\t\tundo.logAction(this._batchAction);\r\n\t\t}\r\n\t\tthis._batchMode = false;\r\n\t\tthis._batchAction = null;\r\n\t}\r\n\tonTaskAdded(task: ITask) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeTaskCommand(task, this._undo.command.type.add);\r\n\t\t}\r\n\t}\r\n\tonTaskUpdated(task: ITask) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeTaskCommand(task, this._undo.command.type.update);\r\n\t\t}\r\n\t}\r\n\tonTaskMoved(task: ITask) {\r\n\t\tif (!this._ignore) {\r\n\t\t\t(task as any).$local_index = this._gantt.getTaskIndex(task.id);\r\n\t\t\tthis._storeEntityCommand(\r\n\t\t\t\ttask,\r\n\t\t\t\tthis.getInitialTask(task.id),\r\n\t\t\t\tthis._undo.command.type.move,\r\n\t\t\t\tthis._undo.command.entity.task\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\tonTaskDeleted(task: ITask) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeTaskCommand(task, this._undo.command.type.remove);\r\n\t\t\tif (this._nestedTasks[task.id]) {\r\n\t\t\t\tconst children = this._nestedTasks[task.id];\r\n\t\t\t\tfor (let i = 0; i < children.length; i++) {\r\n\t\t\t\t\tthis._storeTaskCommand(children[i], this._undo.command.type.remove);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this._nestedLinks[task.id]) {\r\n\t\t\t\tconst childrenLinks = this._nestedLinks[task.id];\r\n\t\t\t\tfor (let i = 0; i < childrenLinks.length; i++) {\r\n\t\t\t\t\tthis._storeLinkCommand(childrenLinks[i], this._undo.command.type.remove);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tonLinkAdded(link: ILink) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeLinkCommand(link, this._undo.command.type.add);\r\n\t\t}\r\n\t}\r\n\tonLinkUpdated(link: ILink) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeLinkCommand(link, this._undo.command.type.update);\r\n\t\t}\r\n\t}\r\n\tonLinkDeleted(link: ILink) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeLinkCommand(link, this._undo.command.type.remove);\r\n\t\t}\r\n\t}\r\n\tsetNestedTasks(id: TaskID, taskIds: TaskID[]) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tlet task = null;\r\n\t\tconst tasks = [];\r\n\t\tlet\tlinkIds = this._getLinks(gantt.getTask(id));\r\n\r\n\t\tfor (let i = 0; i < taskIds.length; i++) {\r\n\t\t\ttask = this.setInitialTask(taskIds[i]);\r\n\t\t\tlinkIds = linkIds.concat(this._getLinks(task));\r\n\t\t\ttasks.push(task);\r\n\t\t}\r\n\r\n\t\tconst uniqueLinks = {};\r\n\t\tfor (let i = 0; i < linkIds.length; i++) {\r\n\t\t\tuniqueLinks[linkIds[i]] = true;\r\n\t\t}\r\n\t\tconst links = [];\r\n\t\tfor (const i in uniqueLinks) {\r\n\t\t\tlinks.push(this.setInitialLink(i));\r\n\t\t}\r\n\t\tthis._nestedTasks[id] = tasks;\r\n\t\tthis._nestedLinks[id] = links;\r\n\t}\r\n\tsetInitialTask(id: TaskID, overwrite?: boolean) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tif (overwrite || (!this._initialTasks[id] || !this._batchMode)) {\r\n\t\t\tconst task = gantt.copy(gantt.getTask(id));\r\n\t\t\ttask.$index = gantt.getGlobalTaskIndex(id);\r\n\t\t\ttask.$local_index = gantt.getTaskIndex(id);\r\n\t\t\tthis.setInitialTaskObject(id, task);\r\n\t\t}\r\n\t\treturn this._initialTasks[id];\r\n\t}\r\n\tgetInitialTask(id: TaskID) {\r\n\t\treturn this._initialTasks[id];\r\n\t}\r\n\tclearInitialTasks() {\r\n\t\tthis._initialTasks = {};\r\n\t}\r\n\tsetInitialTaskObject(id: TaskID, object: ITask) {\r\n\t\tthis._initialTasks[id] = object;\r\n\t}\r\n\tsetInitialLink(id: LinkID, overwrite?: boolean) {\r\n\t\tif (!this._initialLinks[id] || !this._batchMode) {\r\n\t\t\tthis._initialLinks[id] = this._gantt.copy(this._gantt.getLink(id));\r\n\t\t}\r\n\t\treturn this._initialLinks[id];\r\n\t}\r\n\tgetInitialLink(id: LinkID) {\r\n\t\treturn this._initialLinks[id];\r\n\t}\r\n\tclearInitialLinks() {\r\n\t\tthis._initialLinks = {};\r\n\t}\r\n\tprivate _attachEvents() {\r\n\t\tlet deleteCacheCooldown = null;\r\n\t\tconst gantt = this._gantt;\r\n\r\n\t\tconst saveInitialAll = () => {\r\n\t\t\tif (!deleteCacheCooldown) {\r\n\t\t\t\tdeleteCacheCooldown = setTimeout(() => {\r\n\t\t\t\t\tdeleteCacheCooldown = null;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.clearInitialTasks();\r\n\t\t\t\tgantt.eachTask((task: ITask) => {\r\n\t\t\t\t\tthis.setInitialTask(task.id);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.clearInitialLinks();\r\n\t\t\t\tgantt.getLinks().forEach((link: ILink) => {\r\n\t\t\t\t\tthis.setInitialLink(link.id);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst getMoveObjectByTaskId = (id: TaskID) => {\r\n\t\t\treturn gantt.copy(gantt.getTask(id));\r\n\t\t};\r\n\r\n\t\tfor (const i in noTrack) {\r\n\t\t\tgantt.attachEvent(i, () => {\r\n\t\t\t\tthis.startIgnore();\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t\tgantt.attachEvent(noTrack[i], () => {\r\n\t\t\t\tthis.stopIgnore();\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfor (let i  = 0; i < batchActions.length; i++) {\r\n\t\t\tgantt.attachEvent(batchActions[i], () => {\r\n\t\t\t\tthis.startBatchAction();\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tgantt.attachEvent(\"onParse\", () => {\r\n\t\t\tthis._undo.clearUndoStack();\r\n\t\t\tthis._undo.clearRedoStack();\r\n\t\t\tsaveInitialAll();\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterTaskAdd\", (id: TaskID, task: ITask) => {\r\n\t\t\tthis.setInitialTask(id, true);\r\n\t\t\tthis.onTaskAdded(task);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterTaskUpdate\", (id: TaskID, task: ITask) => {\r\n\t\t\tthis.onTaskUpdated(task);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterParentExpand\", (id: TaskID, task: ITask) => {\r\n\t\t\tthis.onTaskUpdated(task);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterTaskDelete\", (id: TaskID, task: ITask) => {\r\n\t\t\tthis.onTaskDeleted(task);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterLinkAdd\", (id: LinkID, link: ILink) => {\r\n\t\t\tthis.setInitialLink(id, true);\r\n\t\t\tthis.onLinkAdded(link);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterLinkUpdate\", (id: LinkID, link: ILink) => {\r\n\t\t\tthis.onLinkUpdated(link);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterLinkDelete\", (id: LinkID, link: ILink) => {\r\n\t\t\tthis.onLinkDeleted(link);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onRowDragEnd\", (id: TaskID, target: TaskID) => {\r\n\t\t\tthis.onTaskMoved(getMoveObjectByTaskId(id));\r\n\t\t\tthis.toggleIgnoreMoveEvents();\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onBeforeTaskDelete\", (id: TaskID) => {\r\n\t\t\tthis.store(id, gantt.config.undo_types.task);\r\n\t\t\tconst nested = [];\r\n\r\n\t\t\t// remember task indexes in case their being deleted in a loop, so they could be restored in the correct order\r\n\t\t\tsaveInitialAll();\r\n\r\n\t\t\tgantt.eachTask((task: ITask) => {\r\n\t\t\t\tnested.push(task.id);\r\n\t\t\t}, id);\r\n\t\t\tthis.setNestedTasks(id, nested);\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tconst datastore = gantt.getDatastore(\"task\");\r\n\r\n\t\tdatastore.attachEvent(\"onBeforeItemMove\", (id: TaskID, parent: TaskID, tindex: number) => {\r\n\t\t\tif (!this.isMoveEventsIgnored()) {\r\n\t\t\t\tsaveInitialAll();\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tdatastore.attachEvent(\"onAfterItemMove\", (id: TaskID, parent: TaskID, tindex: number) => {\r\n\t\t\tif (!this.isMoveEventsIgnored()) {\r\n\t\t\t\tthis.onTaskMoved(getMoveObjectByTaskId(id));\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onRowDragStart\", (id: TaskID, target: TaskID, e: Event) => {\r\n\t\t\tthis.toggleIgnoreMoveEvents(true);\r\n\t\t\tsaveInitialAll();\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tlet dragId = null;\r\n\t\tlet projectDrag = false;\r\n\t\tgantt.attachEvent(\"onBeforeTaskDrag\", (taskId: TaskID) => {\r\n\t\t\tdragId = gantt.getState().drag_id;\r\n\t\t\tif (dragId === taskId){\r\n\t\t\t\tconst task = gantt.getTask(taskId);\r\n\t\t\t\tif (gantt.isSummaryTask(task) && gantt.config.drag_project){\r\n\t\t\t\t\tprojectDrag = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// GS-99. Store the initial task dates before multiple drag\r\n\t\t\tif (gantt.plugins().multiselect){\r\n\t\t\t\tconst selectedIds = gantt.getSelectedTasks();\r\n\t\t\t\tif (selectedIds.length > 1){\r\n\t\t\t\t\tselectedIds.forEach((id)=>{\r\n\t\t\t\t\t\tthis.store(id, gantt.config.undo_types.task, true);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this.store(taskId, gantt.config.undo_types.task);\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onAfterTaskDrag\", (taskId: TaskID) => {\r\n\t\t\t// if we drag multiple tasks and other tasks move to another date after that,\r\n\t\t\t// auto-scheduling/correct work time should occur in anoher command.\r\n\t\t\t// otherwise, when we undo the changes, the task constraint is not restored correctly\r\n\t\t\tconst multipleDrag = projectDrag || (gantt.plugins().multiselect && gantt.getSelectedTasks().length > 1);\r\n\t\t\tif (multipleDrag && dragId === taskId){\r\n\t\t\t\tprojectDrag = false;\r\n\t\t\t\tdragId = null;\r\n\t\t\t\tthis.stopBatchAction();\r\n\t\t\t}\r\n\t\t\t// GS-99. When dragging multiple tasks, we need to store the initial tasks\r\n\t\t\tthis.store(taskId, gantt.config.undo_types.task, true);\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onLightbox\", (taskId: TaskID) => this.store(taskId, gantt.config.undo_types.task));\r\n\r\n\t\tgantt.attachEvent(\"onBeforeTaskAutoSchedule\", (task: ITask) => {\r\n\t\t\tthis.store(task.id, gantt.config.undo_types.task, true);\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tif (gantt.ext.inlineEditors) {\r\n\t\t\t// remove the onGanttLayoutReady wrapper when GS-1288 is merged\r\n\t\t\tlet onBeforeEditStartId = null;\r\n\t\t\tlet onEditStart = null;\r\n\t\t\tgantt.attachEvent(\"onGanttLayoutReady\", () => {\r\n\t\t\t\tif (onBeforeEditStartId) {\r\n\t\t\t\t\tgantt.ext.inlineEditors.detachEvent(onBeforeEditStartId);\r\n\t\t\t\t}\r\n\t\t\t\tif (onEditStart) {\r\n\t\t\t\t\tgantt.ext.inlineEditors.detachEvent(onEditStart);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tonEditStart = gantt.ext.inlineEditors.attachEvent(\"onEditStart\", (state: IInlineEditState) => {\r\n\t\t\t\t\tthis.store(state.id, gantt.config.undo_types.task);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// GS-99. If another inline editor is opened and we open a new inline editor,\r\n\t\t\t\t// we shouldn't use the batchAction\r\n\t\t\t\tonBeforeEditStartId = gantt.ext.inlineEditors.attachEvent(\"onBeforeEditStart\", (state: IInlineEditState) => {\r\n\t\t\t\t\tthis.stopBatchAction();\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _storeCommand(command: IUndoCommand) {\r\n\t\tconst undo = this._undo;\r\n\t\tundo.updateConfigs();\r\n\r\n\t\tif (!undo.undoEnabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this._batchMode) {\r\n\t\t\tthis._batchAction.commands.push(command);\r\n\t\t} else {\r\n\t\t\tconst action = undo.action.create([command]);\r\n\t\t\tundo.logAction(action);\r\n\t\t}\r\n\t}\r\n\tprivate _storeEntityCommand(obj: TUndoValue, old: TUndoValue, actionType: TActionType, entityType: TEntityType) {\r\n\t\tconst undo = this._undo;\r\n\t\tconst command = undo.command.create(obj, old, actionType, entityType);\r\n\t\tthis._storeCommand(command);\r\n\t}\r\n\tprivate _storeTaskCommand(obj: ITask, type: TActionType) {\r\n\t\tif(this._gantt.isTaskExists(obj.id)){\r\n\t\t\t(obj as any).$local_index = this._gantt.getTaskIndex(obj.id);\r\n\t\t}\r\n\r\n\t\tthis._storeEntityCommand(obj, this.getInitialTask(obj.id), type, this._undo.command.entity.task);\r\n\t}\r\n\tprivate _storeLinkCommand(obj: ILink, type: TActionType) {\r\n\t\tthis._storeEntityCommand(obj, this.getInitialLink(obj.id), type, this._undo.command.entity.link);\r\n\t}\r\n\tprivate _getLinks(task: ITask) {\r\n\t\treturn task.$source.concat(task.$target);\r\n\t}\r\n\tprivate _storeTask(taskId: TaskID, overwrite: boolean = false) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis.setInitialTask(taskId, overwrite);\r\n\t\tgantt.eachTask((child: ITask) => {\r\n\t\t\tthis.setInitialTask(child.id);\r\n\t\t}, taskId);\r\n\t\treturn true;\r\n\t}\r\n\tprivate _storeLink(linkId: LinkID, overwrite: boolean = false) {\r\n\t\tthis.setInitialLink(linkId, overwrite);\r\n\t\treturn true;\r\n\t}\r\n}","import { IUndo, IUndoCommand, IUndoCommands, IUndoPropAction, IUndoPropCommand, TActionType, TEntityType, TUndoStack, TUndoValue } from \"./types\";\r\n\r\nconst MAX_UNDO_STEPS = 100;\r\n\r\nexport class Undo implements IUndo {\r\n\r\n\tmaxSteps = MAX_UNDO_STEPS;\r\n\tundoEnabled = true;\r\n\tredoEnabled = true;\r\n\taction: IUndoPropAction = {\r\n\t\tcreate: (commands?: IUndoCommand[]): IUndoCommands => {\r\n\t\t\treturn { commands: (commands ? commands.slice() : []) };\r\n\t\t},\r\n\t\tinvert: (action: IUndoCommands): IUndoCommands => {\r\n\t\t\tconst gantt = this._gantt;\r\n\t\t\tconst revert = gantt.copy(action);\r\n\t\t\tconst commands = this.command;\r\n\t\t\tfor (let i = 0; i < action.commands.length; i++) {\r\n\t\t\t\tconst command = revert.commands[i] = commands.invert(revert.commands[i]);\r\n\t\t\t\tif (command.type === commands.type.update || command.type === commands.type.move) {\r\n\t\t\t\t\t[command.value, command.oldValue] = [command.oldValue, command.value];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn revert as IUndoCommands;\r\n\t\t}\r\n\t};\r\n\tcommand: IUndoPropCommand = {\r\n\t\t// entities that require different processing for undoing-redoing changes (gantt.config.undo_types)\r\n\t\tentity: null,\r\n\r\n\t\t// types of traced actions (gantt.config.undo_actions)\r\n\t\ttype: null,\r\n\r\n\t\tcreate: (value: TUndoValue, oldValue: TUndoValue, type: TActionType, entity: TEntityType): IUndoCommand => {\r\n\t\t\tconst gantt = this._gantt;\r\n\t\t\treturn {\r\n\t\t\t\tentity,\r\n\t\t\t\ttype,\r\n\t\t\t\tvalue: gantt.copy(value),\r\n\t\t\t\toldValue: gantt.copy(oldValue || value)\r\n\t\t\t};\r\n\t\t},\r\n\t\tinvert: (command: IUndoCommand): IUndoCommand => {\r\n\t\t\tconst gantt = this._gantt;\r\n\t\t\tconst revert = gantt.copy(command);\r\n\t\t\trevert.type = this.command.inverseCommands(command.type);\r\n\t\t\treturn revert;\r\n\t\t},\r\n\t\tinverseCommands: (command: TActionType): TActionType => {\r\n\t\t\tconst gantt = this._gantt;\r\n\t\t\tconst types = this.command.type;\r\n\t\t\tswitch (command) {\r\n\t\t\t\tcase types.update:\r\n\t\t\t\t\treturn types.update;\r\n\t\t\t\tcase types.remove:\r\n\t\t\t\t\treturn types.add;\r\n\t\t\t\tcase types.add:\r\n\t\t\t\t\treturn types.remove;\r\n\t\t\t\tcase types.move:\r\n\t\t\t\t\treturn types.move;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tgantt.assert(false, \"Invalid command \"+ command);\r\n\t\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tprivate _undoStack = [];\r\n\tprivate _redoStack = [];\r\n\tprivate _gantt: any;\r\n\r\n\tconstructor(gantt: any){\r\n\t\tthis._gantt = gantt;\r\n\t}\r\n\tgetUndoStack() {\r\n\t\treturn this._undoStack;\r\n\t}\r\n\tsetUndoStack(stack: []) {\r\n\t\tthis._undoStack = stack;\r\n\t}\r\n\r\n\tgetRedoStack() {\r\n\t\treturn this._redoStack;\r\n\t}\r\n\tsetRedoStack(stack: []) {\r\n\t\tthis._redoStack = stack;\r\n\t}\r\n\r\n\tclearUndoStack() {\r\n\t\tthis._undoStack = [];\r\n\t}\r\n\r\n\tclearRedoStack() {\r\n\t\tthis._redoStack = [];\r\n\t}\r\n\r\n\tupdateConfigs() {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis.maxSteps = gantt.config.undo_steps || MAX_UNDO_STEPS;\r\n\t\tthis.command.entity = gantt.config.undo_types;\r\n\t\tthis.command.type = gantt.config.undo_actions;\r\n\t\tthis.undoEnabled = !!gantt.config.undo;\r\n\t\tthis.redoEnabled = !!gantt.config.redo; // GS-873, Redo should work even when the `gantt.config.undo` is disabled.\r\n\t}\r\n\r\n\tundo() {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis.updateConfigs();\r\n\t\tif (!this.undoEnabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst action = this._pop(this._undoStack);\r\n\t\tif (action) {\r\n\t\t\tthis._reorderCommands(action);\r\n\t\t}\r\n\t\tif (gantt.callEvent(\"onBeforeUndo\", [action]) !== false) {\r\n\t\t\tif (action) {\r\n\t\t\t\tthis._applyAction(this.action.invert(action));\r\n\t\t\t\tthis._push(this._redoStack, gantt.copy(action));\r\n\t\t\t\tgantt.callEvent(\"onAfterUndo\", [action]);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tgantt.callEvent(\"onAfterUndo\", [null]);\r\n\t}\r\n\r\n\tredo() {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis.updateConfigs();\r\n\t\tif (!this.redoEnabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst action = this._pop(this._redoStack);\r\n\t\tif (action) {\r\n\t\t\tthis._reorderCommands(action);\r\n\t\t}\r\n\r\n\t\tif (gantt.callEvent(\"onBeforeRedo\", [action]) !== false) {\r\n\t\t\tif (action) {\r\n\t\t\t\tthis._applyAction(action);\r\n\t\t\t\tthis._push(this._undoStack, gantt.copy(action));\r\n\t\t\t\tgantt.callEvent(\"onAfterRedo\", [action]);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tgantt.callEvent(\"onAfterRedo\", [null]);\r\n\t}\r\n\r\n\t// storeUndo:\r\n\tlogAction(action: IUndoCommands) {\r\n\t\tthis._push(this._undoStack, action);\r\n\t\tthis._redoStack = [];\r\n\t}\r\n\r\n\tprivate _push(stack: TUndoStack, action: IUndoCommands): IUndoCommands {\r\n\t\tconst gantt = this._gantt;\r\n\t\tif (!action.commands.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst event = stack === this._undoStack ? \"onBeforeUndoStack\" : \"onBeforeRedoStack\";\r\n\t\tif (gantt.callEvent(event, [action]) === false){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// commands can be removed from event handler\r\n\t\tif (!action.commands.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tstack.push(action);\r\n\t\twhile (stack.length > this.maxSteps) {\r\n\t\t\tstack.shift();\r\n\t\t}\r\n\t\treturn action;\r\n\t}\r\n\r\n\tprivate _pop(stack: TUndoStack): IUndoCommands {\r\n\t\treturn stack.pop();\r\n\t}\r\n\r\n\tprivate _reorderCommands(action) {\r\n\t\t// firstly process tasks and only then links\r\n\t\t// in order to ensure links are added not earlier than their tasks\r\n\t\t// firstly to 'move' actions and only then updates\r\n\t\tconst weights = { any: 0, link:1, task:2 };\r\n\t\tconst actionWeights = { move: 1, any:0 };\r\n\t\taction.commands.sort(function(a, b) {\r\n\t\t\tif (a.entity === \"task\" && b.entity === \"task\") {\r\n\t\t\t\tif (a.type !== b.type) {\r\n\t\t\t\t\treturn (actionWeights[b.type] || 0) - (actionWeights[a.type] || 0);\r\n\t\t\t\t} else if (a.type === \"move\" && a.oldValue && b.oldValue && b.oldValue.parent === a.oldValue.parent) {\r\n\t\t\t\t\treturn a.oldValue.$index - b.oldValue.$index;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tconst weightA = weights[a.entity] || weights.any;\r\n\t\t\t\tconst weightB = weights[b.entity] || weights.any;\r\n\t\t\t\treturn weightB - weightA;\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _applyAction(action: IUndoCommands) {\r\n\t\tlet command = null;\r\n\t\tconst entities = this.command.entity;\r\n\t\tconst actions = this.command.type;\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst methods = {};\r\n\t\tmethods[entities.task] = {\r\n\t\t\tadd: \"addTask\",\r\n\t\t\tget: \"getTask\",\r\n\t\t\tupdate: \"updateTask\",\r\n\t\t\tremove: \"deleteTask\",\r\n\t\t\tmove: \"moveTask\",\r\n\t\t\tisExists: \"isTaskExists\"\r\n\t\t};\r\n\t\tmethods[entities.link] = {\r\n\t\t\tadd: \"addLink\",\r\n\t\t\tget: \"getLink\",\r\n\t\t\tupdate: \"updateLink\",\r\n\t\t\tremove: \"deleteLink\",\r\n\t\t\tisExists: \"isLinkExists\"\r\n\t\t};\r\n\r\n\t\tgantt.batchUpdate(function() {\r\n\t\t\t// it is logical to undo actions from the last one to the first one\r\n\t\t\t// but we have to do it from the first one because the order\r\n\t\t\t// of tasks ($index and $local_index) depends on the existing tasks\r\n\t\t\tfor (let i = 0; i < action.commands.length; i++) {\r\n\t\t\t\tcommand = action.commands[i];\r\n\t\t\t\tconst method = methods[command.entity][command.type];\r\n\t\t\t\tconst getMethod = methods[command.entity].get;\r\n\t\t\t\tconst check = methods[command.entity].isExists;\r\n\r\n\t\t\t\tif (command.type === actions.add) {\r\n\t\t\t\t\tgantt[method](command.oldValue, command.oldValue.parent, command.oldValue.$local_index);\r\n\t\t\t\t} else if (command.type === actions.remove) {\r\n\t\t\t\t\tif (gantt[check](command.value.id)) {\r\n\t\t\t\t\t\tgantt[method](command.value.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (command.type === actions.update) {\r\n\t\t\t\t\tconst item = gantt[getMethod](command.value.id);\r\n\t\t\t\t\tfor(const prop in command.value){\r\n\t\t\t\t\t\tconst internalProperty = prop.startsWith(\"$\") || prop.startsWith(\"_\");\r\n\t\t\t\t\t\tconst whitelist = [\"$open\"];\r\n\t\t\t\t\t\tlet copyProperty = !internalProperty;\r\n\t\t\t\t\t\tif (whitelist.indexOf(prop) > -1){\r\n\t\t\t\t\t\t\tcopyProperty = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(copyProperty){\r\n\t\t\t\t\t\t\titem[prop] = command.value[prop];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgantt[method](command.value.id);\r\n\t\t\t\t} else if (command.type === actions.move) {\r\n\t\t\t\t\tgantt[method](command.value.id, command.value.$local_index, command.value.parent);\r\n\t\t\t\t\t// GS-680: We should send the changes to the server after we undo vertical reorder\r\n\t\t\t\t\tgantt.callEvent(\"onRowDragEnd\", [command.value.id]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}","\r\nimport click_drag from \"./click_drag\";\r\nimport drag_timeline from \"./drag_timeline\";\r\nimport export_api from \"./export_api\";\r\nimport fullscreen from \"./fullscreen\";\r\nimport keyboard_navigation from \"./keyboard_navigation\";\r\nimport marker from \"./marker\";\r\nimport multiselect from \"./multiselect\";\r\nimport quick_info from \"./quick_info\";\r\nimport tooltip from \"./tooltip\";\r\nimport undo from \"./undo\";\r\n\r\nexport default {\r\n\tclick_drag,\r\n\tdrag_timeline,\r\n\tfullscreen,\r\n\tkeyboard_navigation,\r\n\tquick_info,\r\n\ttooltip,\r\n\tundo,\r\n\tmarker,\r\n\tmultiselect,\r\n\texport_api\r\n};","import { EventsManager } from \"./eventsManager\";\r\nimport { ISelectedRegionConfig, SelectedRegion } from \"./selectedRegion\";\r\n\r\nexport default function(gantt: any){\r\n\tif (!gantt.ext) {\r\n\t\tgantt.ext = {};\r\n\t}\r\n\r\n\tconst defaultConfig: ISelectedRegionConfig = {\r\n\t\tclassName: \"gantt_click_drag_rect\",\r\n\t\tuseRequestAnimationFrame: true,\r\n\t\tcallback: undefined,\r\n\t\tsingleRow: false\r\n\t};\r\n\r\n\tfunction setClickDrag(){\r\n\t\tconst config: ISelectedRegionConfig = { viewPort: gantt.$task_data, ...defaultConfig };\r\n\t\tif (gantt.ext.clickDrag){\r\n\t\t\tgantt.ext.clickDrag.destructor();\r\n\t\t}\r\n\t\tgantt.ext.clickDrag = new EventsManager(gantt);\r\n\t\tconst clickDrag = gantt.config.click_drag;\r\n\t\tconfig.render = clickDrag.render || defaultConfig.render;\r\n\t\tconfig.className = clickDrag.className || defaultConfig.className;\r\n\t\tconfig.callback = clickDrag.callback || defaultConfig.callback;\r\n\t\tconfig.viewPort = clickDrag.viewPort || gantt.$task_data;\r\n\t\tconfig.useRequestAnimationFrame = clickDrag.useRequestAnimationFrame === undefined ?\r\n\t\t\tdefaultConfig.useRequestAnimationFrame : clickDrag.useRequestAnimationFrame;\r\n\r\n\t\tconfig.singleRow = clickDrag.singleRow === undefined ? defaultConfig.singleRow : clickDrag.singleRow;\r\n\t\tconst timeline = gantt.$ui.getView(\"timeline\");\r\n\t\tconst selectedRegion = new SelectedRegion(config, gantt, timeline);\r\n\t\tgantt.ext.clickDrag.attach(selectedRegion, clickDrag.useKey, clickDrag.ignore);\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", () => {\r\n\t\tif (gantt.config.click_drag){\r\n\t\t\tsetClickDrag();\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onGanttLayoutReady\", function(){\r\n\t\tif (gantt.$container && gantt.config.click_drag){\r\n\t\t\tgantt.attachEvent(\"onGanttRender\", function(){\r\n\t\t\t\tsetClickDrag();\r\n\t\t\t}, {once:true});\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onDestroy\", () => {\r\n\t\tif (gantt.ext.clickDrag){\r\n\t\t\tgantt.ext.clickDrag.destructor();\r\n\t\t}\r\n\t});\r\n\r\n}","import { EventsManager } from \"./eventsManager\";\r\nexport default function(gantt: any){\r\n\tif (!gantt.ext){\r\n\t\tgantt.ext = {};\r\n\t}\r\n\r\n\tgantt.ext.dragTimeline = {\r\n\t\tcreate: () => EventsManager.create(gantt),\r\n\t\t_isDragInProgress: () => EventsManager._isDragInProgress\r\n\t};\r\n\r\n\tgantt.config.drag_timeline = {\r\n\t\tenabled: true,\r\n\t\trender: false\r\n\t};\r\n}","export default function(gantt: any){\r\n\r\ninterface IBody extends HTMLElement {\r\n\tmsRequestFullscreen?: () => void;\r\n\tmozRequestFullScreen?: () => void;\r\n\twebkitRequestFullscreen?: (ALLOW_KEYBOARD_INPUT: any) => void;\r\n}\r\n\r\n\r\ninterface IConsole extends Console {\r\n\twarning?: (str: string) => void;\r\n}\r\n\r\ninterface IDocument extends Document {\r\n\tfullscreenElement: Element;\r\n\tmozFullScreenElement?: Element;\r\n\twebkitFullscreenElement?: Element;\r\n\tmsFullscreenElement?: Element;\r\n\twebkitFullscreenEnabled?: boolean;\r\n\tmozFullScreenEnabled?: boolean;\r\n\tmsFullscreenEnabled?: boolean;\r\n\tmsExitFullscreen?: () => void;\r\n\tmozCancelFullScreen?: () => void;\r\n\twebkitExitFullscreen?: () => void;\r\n}\r\n\r\ninterface IElement extends Element {\r\n\tALLOW_KEYBOARD_INPUT?: boolean;\r\n}\r\n\r\ninterface IElementSizes extends ISizes {\r\n\tmodified: boolean;\r\n}\r\n\r\ninterface ISizes {\r\n\twidth: null | string;\r\n\theight: null | string;\r\n\ttop: null | string;\r\n\tleft: null | string;\r\n\tposition: null | string;\r\n\tzIndex: null | number;\r\n}\r\n\r\nfunction isExpanded() {\r\n\tconst element = ((document as IDocument).fullscreenElement ||\r\n\t\t(document as IDocument).mozFullScreenElement ||\r\n\t\t(document as IDocument).webkitFullscreenElement ||\r\n\t\t(document as IDocument).msFullscreenElement);\r\n\treturn !!(element && element === document.body);\r\n}\r\n\r\nfunction isFullscreenAvailable() {\r\n\ttry {\r\n\t\treturn (document as IDocument).fullscreenEnabled ||\r\n\t\t\t(document as IDocument).webkitFullscreenEnabled ||\r\n\t\t\t(document as IDocument).mozFullScreenEnabled ||\r\n\t\t\t(document as IDocument).msFullscreenEnabled;\r\n\t} catch (e) {\r\n\t\t// eslint-disable-next-line no-console\r\n\t\tconsole.error(\"Fullscreen is not available:\", e); \r\n\t}\r\n}\r\n\r\nconst state = gantt.$services.getService(\"state\");\r\nstate.registerProvider(\"fullscreen\", () => {\r\n\tif (isFullscreenAvailable()){\r\n\t\treturn { fullscreen: isExpanded() };\r\n\t} else {\r\n\t\treturn undefined;\r\n\t}\r\n});\r\n\r\nlet backupBodyPadding = {\r\n\toverflow: null,\r\n\tpadding: null,\r\n\tpaddingTop: null,\r\n\tpaddingRight: null,\r\n\tpaddingBottom: null,\r\n\tpaddingLeft: null\r\n};\r\n\r\nconst backupElementSizes: IElementSizes = {\r\n\twidth: null,\r\n\theight: null,\r\n\ttop: null,\r\n\tleft: null,\r\n\tposition: null,\r\n\tzIndex: null,\r\n\tmodified: false\r\n};\r\n\r\nlet backupPositioning = null;\r\nfunction resetParentPositioning(root){\r\n\tlet parent = root.parentNode;\r\n\tconst positions = [];\r\n\twhile(parent && parent.style){\r\n\t\tpositions.push({\r\n\t\t\telement: parent,\r\n\t\t\toriginalPositioning: parent.style.position\r\n\t\t});\r\n\t\tparent.style.position = \"static\";\r\n\t\tparent = parent.parentNode;\r\n\t}\r\n\treturn positions;\r\n}\r\n\r\nfunction restoreParentPositioning(positions: any[]){\r\n\tpositions.forEach(record => {\r\n\t\trecord.element.style.position = record.originalPositioning;\r\n\t});\r\n}\r\n\r\n// expand gantt root element to fullscreen automatically\r\nfunction setFullScreenSizes() {\r\n\tconst root = gantt.ext.fullscreen.getFullscreenElement();\r\n\tconst body = document.body;\r\n\tupdateSizes(root.style, backupElementSizes);\r\n\tbackupBodyPadding = {\r\n\t\toverflow: body.style.overflow,\r\n\t\tpadding: body.style.padding ? body.style.padding : null,\r\n\t\tpaddingTop: body.style.paddingTop ? body.style.paddingTop : null,\r\n\t\tpaddingRight: body.style.paddingRight ? body.style.paddingRight : null,\r\n\t\tpaddingBottom: body.style.paddingBottom ? body.style.paddingBottom : null,\r\n\t\tpaddingLeft: body.style.paddingLeft ? body.style.paddingLeft : null\r\n\t};\r\n\r\n\tif (body.style.padding) {\r\n\t\tbody.style.padding = \"0\";\r\n\t}\r\n\tif (body.style.paddingTop) {\r\n\t\tbody.style.paddingTop = \"0\";\r\n\t}\r\n\tif (body.style.paddingRight) {\r\n\t\tbody.style.paddingRight = \"0\";\r\n\t}\r\n\tif (body.style.paddingBottom) {\r\n\t\tbody.style.paddingBottom = \"0\";\r\n\t}\r\n\tif (body.style.paddingLeft) {\r\n\t\tbody.style.paddingLeft = \"0\";\r\n\t}\r\n\r\n\tbody.style.overflow = \"hidden\";\r\n\r\n\troot.style.width = \"100vw\";\r\n\troot.style.height = \"100vh\";\r\n\troot.style.top = \"0px\";\r\n\troot.style.left = \"0px\";\r\n\troot.style.position = \"absolute\";\r\n\troot.style.zIndex = 1;\r\n\tbackupElementSizes.modified = true;\r\n\tbackupPositioning = resetParentPositioning(root);\r\n}\r\n\r\nfunction restoreSizes() {\r\n\tconst root = gantt.ext.fullscreen.getFullscreenElement();\r\n\tconst body = document.body;\r\n\tif (backupElementSizes.modified) {\r\n\t\tif (backupBodyPadding.padding) {\r\n\t\t\tbody.style.padding = backupBodyPadding.padding;\r\n\t\t}\r\n\t\tif (backupBodyPadding.paddingTop) {\r\n\t\t\tbody.style.paddingTop = backupBodyPadding.paddingTop;\r\n\t\t}\r\n\t\tif (backupBodyPadding.paddingRight) {\r\n\t\t\tbody.style.paddingRight = backupBodyPadding.paddingRight;\r\n\t\t}\r\n\t\tif (backupBodyPadding.paddingBottom) {\r\n\t\t\tbody.style.paddingBottom = backupBodyPadding.paddingBottom;\r\n\t\t}\r\n\t\tif (backupBodyPadding.paddingLeft) {\r\n\t\t\tbody.style.paddingLeft = backupBodyPadding.paddingLeft;\r\n\t\t}\r\n\r\n\t\tbody.style.overflow = backupBodyPadding.overflow;\r\n\t\tbackupBodyPadding = {\r\n\t\t\toverflow: null,\r\n\t\t\tpadding: null,\r\n\t\t\tpaddingTop: null,\r\n\t\t\tpaddingRight: null,\r\n\t\t\tpaddingBottom: null,\r\n\t\t\tpaddingLeft: null\r\n\t\t};\r\n\t\tupdateSizes(backupElementSizes, root.style);\r\n\t\tbackupElementSizes.modified = false;\r\n\t}\r\n\trestoreParentPositioning(backupPositioning);\r\n\tbackupPositioning = null;\r\n}\r\n\r\nfunction updateSizes(source: ISizes, target: ISizes) {\r\n\ttarget.width = source.width;\r\n\ttarget.height = source.height;\r\n\ttarget.top = source.top;\r\n\ttarget.left = source.left;\r\n\ttarget.position = source.position;\r\n\ttarget.zIndex = source.zIndex;\r\n}\r\n\r\nfunction addDOMEvents() {\r\n\tgantt.event(document, \"webkitfullscreenchange\", onFullScreenChange);\r\n\tgantt.event(document, \"mozfullscreenchange\", onFullScreenChange);\r\n\tgantt.event(document, \"MSFullscreenChange\", onFullScreenChange);\r\n\t// For IE on Win 10\r\n\tgantt.event(document, \"fullscreenChange\", onFullScreenChange);\r\n\tgantt.event(document, \"fullscreenchange\", onFullScreenChange);\r\n}\r\n\r\nlet expandGantt = false;\r\nfunction onFullScreenChange() {\r\n\tif (!gantt.$container) {\r\n\t\t// do nothing if gantt is not yet initialized\r\n\t\treturn;\r\n\t}\r\n\tlet event: \"onExpand\" | \"onCollapse\";\r\n\tconst isBodyExpanded = isExpanded();\r\n\r\n\tif (isBodyExpanded) {\r\n\t\tif (expandGantt) {\r\n\t\t\tevent = \"onExpand\";\r\n\t\t\tsetFullScreenSizes();\r\n\t\t}\r\n\t} else if (expandGantt) {\r\n\t\texpandGantt = false;\r\n\t\tevent = \"onCollapse\";\r\n\t\trestoreSizes();\r\n\t}\r\n\tsetTimeout(() => {\r\n\t\tgantt.render();\r\n\t});\r\n\tsetTimeout(() => {\r\n\t\tgantt.callEvent(event, [gantt.ext.fullscreen.getFullscreenElement()]);\r\n\t});\r\n}\r\n\r\nfunction cantFullscreen() {\r\n\tif (!gantt.$container) { // check is gantt initialized or not\r\n\t\treturn true;\r\n\t}\r\n\tif (!gantt.ext.fullscreen.getFullscreenElement()) {\r\n\t\treturn true;\r\n\t}\r\n\tif (!isFullscreenAvailable()) {\r\n\t\t// eslint-disable-next-line no-console\r\n\t\tconst method = (console as IConsole).warning || console.log;\r\n\t\tmethod(\"The `fullscreen` feature not being allowed, or full-screen mode not being supported\");\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\ngantt.ext.fullscreen = {\r\n\texpand(): void {\r\n\t\tif (cantFullscreen()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (isExpanded()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!gantt.callEvent(\"onBeforeExpand\", [this.getFullscreenElement()])) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\texpandGantt = true;\r\n\r\n\t\t// we switch body to fullscreen and then expand fullscreen element to viewport\r\n\t\t// we do it to correct display common elements: lightboxes, tooltip etc.\r\n\t\tconst element = document.body as IBody;\r\n\t\tconst requestArguments = element.webkitRequestFullscreen ?\r\n\t\t\t[(Element as unknown as IElement).ALLOW_KEYBOARD_INPUT] : [];\r\n\r\n\t\tconst requestFullscreen = element.msRequestFullscreen ||\r\n\t\t\telement.mozRequestFullScreen ||\r\n\t\t\telement.webkitRequestFullscreen ||\r\n\t\t\telement.requestFullscreen;\r\n\r\n\t\tif (requestFullscreen) {\r\n\t\t\trequestFullscreen.apply(element, requestArguments);\r\n\t\t}\r\n\t},\r\n\tcollapse(): void {\r\n\t\tif (cantFullscreen()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!isExpanded()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!gantt.callEvent(\"onBeforeCollapse\", [this.getFullscreenElement()])) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst requestExitFullscreen = (document as IDocument).msExitFullscreen ||\r\n\t\t\t(document as IDocument).mozCancelFullScreen ||\r\n\t\t\t(document as IDocument).webkitExitFullscreen ||\r\n\t\t\t(document as IDocument).exitFullscreen;\r\n\r\n\t\tif (requestExitFullscreen) {\r\n\t\t\trequestExitFullscreen.apply(document);\r\n\t\t}\r\n\t},\r\n\ttoggle(): void {\r\n\t\tif (cantFullscreen()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!isExpanded()) {\r\n\t\t\tthis.expand();\r\n\t\t} else {\r\n\t\t\tthis.collapse();\r\n\t\t}\r\n\r\n\t},\r\n\tgetFullscreenElement(): HTMLElement {\r\n\t\treturn gantt.$root;\r\n\t}\r\n};\r\n\r\ngantt.expand = function() {\r\n\tgantt.ext.fullscreen.expand();\r\n};\r\n\r\ngantt.collapse = function(){\r\n\tgantt.ext.fullscreen.collapse();\r\n};\r\n\r\ngantt.attachEvent(\"onGanttReady\", addDOMEvents);\r\n\r\n}","import eventable from \"../utils/eventable\";\r\nimport * as domHelpers from \"../core/ui/utils/dom_helpers\";\r\n\r\nimport keyboard_shortcuts from \"./keyboard_navigation/common/keyboard_shortcuts\";\r\nimport eventhandler from \"./keyboard_navigation/common/eventhandler\";\r\nimport trap_modal_focus from \"./keyboard_navigation/common/trap_modal_focus\";\r\nimport gantt_node from \"./keyboard_navigation/elements/gantt_node\";\r\nimport nav_node from \"./keyboard_navigation/elements/nav_node\";\r\nimport header_cell from \"./keyboard_navigation/elements/header_cell\";\r\nimport task_row from \"./keyboard_navigation/elements/task_row\";\r\nimport task_cell from \"./keyboard_navigation/elements/task_cell\";\r\nimport modals from \"./keyboard_navigation/modals\";\r\nimport core from \"./keyboard_navigation/core\";\r\n\r\n\r\n\r\nexport default function(gantt){\r\n\tfunction setupKeyNav(gantt){\r\n\t\tgantt.config.keyboard_navigation = true;\r\n\t\tgantt.config.keyboard_navigation_cells = false;\r\n\r\n\t\tgantt.$keyboardNavigation = {};\r\n\r\n\t\tgantt._compose = function(){\r\n\t\t\tvar parts = Array.prototype.slice.call(arguments, 0);\r\n\t\t\tvar res = {};\r\n\t\t\tfor(var i = 0; i < parts.length; i++){\r\n\t\t\t\tvar obj = parts[i];\r\n\t\t\t\tif(typeof obj == \"function\"){\r\n\t\t\t\t\tobj = new obj();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor(var p in obj){\r\n\t\t\t\t\tres[p] = obj[p];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t};\r\n\r\n\t\tkeyboard_shortcuts(gantt);\r\n\t\teventhandler(gantt);\r\n\t\ttrap_modal_focus(gantt);\r\n\t\tgantt_node(gantt);\r\n\t\tnav_node(gantt);\r\n\t\theader_cell(gantt);\r\n\t\ttask_row(gantt);\r\n\t\ttask_cell(gantt);\r\n\t\tmodals(gantt);\r\n\t\tcore(gantt);\r\n\r\n\r\n\t\t(function(){\r\n\t\t\tvar dispatcher = gantt.$keyboardNavigation.dispatcher;\r\n\r\n\t\t\tdispatcher.isTaskFocused = function(id){\r\n\t\t\t\tvar node = dispatcher.activeNode;\r\n\t\t\t\tif(node instanceof gantt.$keyboardNavigation.TaskRow || node instanceof gantt.$keyboardNavigation.TaskCell) {\r\n\t\t\t\t\tif (node.taskId == id) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t};\r\n\r\n\t\t\tvar keyDownHandler = function(e){\r\n\t\t\t\tif(!gantt.config.keyboard_navigation) return;\r\n\t\t\t\t// GS-734 & GS-1078: we don't need keyboard navigation inside inline editors\r\n\t\t\t\tif(!gantt.config.keyboard_navigation_cells && isInlineEditorCell(e)) return;\r\n\r\n\t\t\t\tif (isNoKeyboardNavigationElement(e) || isLightboxElement(e)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn dispatcher.keyDownHandler(e);\r\n\t\t\t};\r\n\r\n\t\t\tvar focusHandler = function(e){\r\n\t\t\t\tif(dispatcher.$preventDefault){\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tgantt.$container.blur();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t// do nothing if key-nav focus is already planned\r\n\t\t\t\t} else if (!dispatcher.awaitsFocus()) {\r\n\t\t\t\t\t// otherwise - re-focus key-nav element on gantt focus\r\n\t\t\t\t\tdispatcher.focusGlobalNode();\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t\tvar reFocusActiveNode = function(){\r\n\t\t\t\tif(!dispatcher.isEnabled())\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tconst outsideGantt = !domHelpers.isChildOf(document.activeElement, gantt.$container) && document.activeElement.localName != \"body\";\r\n\t\t\t\tvar activeNode = dispatcher.getActiveNode();\r\n\t\t\t\tif(!activeNode || outsideGantt)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar domElement = activeNode.getNode();\r\n\t\t\t\tvar top, left;\r\n\t\t\t\tif(domElement && domElement.parentNode){\r\n\t\t\t\t\ttop = domElement.parentNode.scrollTop;\r\n\t\t\t\t\tleft = domElement.parentNode.scrollLeft;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tactiveNode.focus(true);\r\n\r\n\t\t\t\tif(domElement && domElement.parentNode){\r\n\t\t\t\t\tdomElement.parentNode.scrollTop = top;\r\n\t\t\t\t\tdomElement.parentNode.scrollLeft = left;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\r\n\t\t\tgantt.attachEvent(\"onDataRender\", function(){\r\n\t\t\t\tif(!gantt.config.keyboard_navigation) return;\r\n\t\t\t\treFocusActiveNode();\r\n\t\t\t});\r\n\r\n\t\t\tgantt.attachEvent(\"onGanttRender\", function(){\r\n\t\t\t\t//GS-2230: in case if `getGanttInstance` created without container\r\n\t\t\t\tif(!gantt.$root) return;\r\n\t\t\t\tgantt.eventRemove(gantt.$root, \"keydown\", keyDownHandler);\r\n\t\t\t\tgantt.eventRemove(gantt.$container, \"focus\", focusHandler);\r\n\t\t\t\tgantt.eventRemove(gantt.$container, \"mousedown\", mousedownHandler);\r\n\r\n\t\t\t\tif(gantt.config.keyboard_navigation){\r\n\r\n\t\t\t\t\tgantt.event(gantt.$root, \"keydown\", keyDownHandler);\r\n\t\t\t\t\tgantt.event(gantt.$container, \"focus\", focusHandler);\r\n\t\t\t\t\tgantt.event(gantt.$container, \"mousedown\", mousedownHandler);\r\n\t\t\t\t\tgantt.$container.setAttribute(\"tabindex\", \"0\");\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t\tgantt.$container.removeAttribute(\"tabindex\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfunction getTaskNodeConstructor(){\r\n\t\t\t\tif (gantt.config.keyboard_navigation_cells) {\r\n\t\t\t\t\treturn gantt.$keyboardNavigation.TaskCell;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.$keyboardNavigation.TaskRow;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction isInlineEditorCell(e){\r\n\t\t\t\treturn !!domHelpers.closest(e.target, \".gantt_grid_editor_placeholder\");\r\n\t\t\t}\r\n\t\t\t// GS-1445. Cancel keyboard navigation within custom elements\r\n\t\t\tfunction isNoKeyboardNavigationElement(e){\r\n\t\t\t\treturn !!domHelpers.closest(e.target, \".no_keyboard_navigation\");\r\n\t\t\t}\r\n\t\t\tfunction isLightboxElement(e){\r\n\t\t\t\treturn !!domHelpers.closest(e.target, \".gantt_cal_light\");\r\n\t\t\t}\r\n\r\n\t\t\tfunction mousedownHandler(e){\r\n\t\t\t\tif(!gantt.config.keyboard_navigation) return true;\r\n\t\t\t\t// GS-734 & GS-1078: we don't need keyboard navigation inside inline editors\r\n\t\t\t\tif(!gantt.config.keyboard_navigation_cells && isInlineEditorCell(e)) return true;\r\n\r\n\t\t\t\tif (isNoKeyboardNavigationElement(e)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar focusNode;\r\n\t\t\t\tvar locateTask = dispatcher.fromDomElement(e);\r\n\t\t\t\tif(locateTask){\r\n\t\t\t\t\t//var node = getTaskNodeConstructor();\r\n\t\t\t\t\tif(dispatcher.activeNode instanceof gantt.$keyboardNavigation.TaskCell && domHelpers.isChildOf(e.target, gantt.$task)){\r\n\t\t\t\t\t\tlocateTask = new gantt.$keyboardNavigation.TaskCell(locateTask.taskId, dispatcher.activeNode.columnIndex);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfocusNode = locateTask;\r\n\t\t\t\t\t// GS-1541 and GS-1542. If you click on the task row element (possible with custom styles)\r\n\t\t\t\t\t// or the task bar element, there is no information about the target grid cell,\r\n\t\t\t\t\t// so we need to set focus on the first visible cell\r\n\t\t\t\t\tconst visibleGrid = gantt.config.show_grid && gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\tif(visibleGrid && gantt.config.keyboard_navigation_cells){\r\n\t\t\t\t\t\tconst taskRow = e.target.classList.contains(\"gantt_row\");\r\n\t\t\t\t\t\tconst taskBar = e.target.closest(\".gantt_task_line\");\r\n\r\n\t\t\t\t\t\tconst gridLeft = gantt.utils.dom.getNodePosition(gantt.$grid).x;\r\n\t\t\t\t\t\tconst gridRight = gridLeft + gantt.$grid.offsetWidth;\r\n\t\t\t\t\t\tconst nodePosition = gantt.utils.dom.getNodePosition(document.activeElement).x;\r\n\t\t\t\t\t\tconst nodeHidden = nodePosition < gridLeft || gridRight < nodePosition;\r\n\r\n\t\t\t\t\t\tif (taskRow || (taskBar && nodeHidden)){\r\n\t\t\t\t\t\t\tlet scrollPosition = gantt.$grid.scrollLeft;\r\n\t\t\t\t\t\t\tconst rightPosition = scrollPosition + gantt.$grid.offsetWidth;\r\n\t\t\t\t\t\t\tlet positionX = 0;\r\n\t\t\t\t\t\t\tif (taskRow){\r\n\t\t\t\t\t\t\t\tscrollPosition = gantt.utils.dom.getRelativeEventPosition(e, gantt.$grid).x;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tfor (let i = 0; i < gantt.config.columns.length; i++) {\r\n\t\t\t\t\t\t\t\tconst column = gantt.config.columns[i];\r\n\t\t\t\t\t\t\t\tif (column.hide){\r\n\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tpositionX += column.width;\r\n\t\t\t\t\t\t\t\tif (scrollPosition < positionX){\r\n\t\t\t\t\t\t\t\t\tif (rightPosition < positionX){\r\n\t\t\t\t\t\t\t\t\t\tpositionX -= column.width;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tfocusNode.columnIndex = i;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (focusNode) {\r\n\t\t\t\t\tif (!dispatcher.isEnabled()) {\r\n\t\t\t\t\t\tdispatcher.activeNode = focusNode;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdispatcher.delay(function () {\r\n\t\t\t\t\t\t\tdispatcher.setActiveNode(focusNode);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// empty click should drop focus from gantt, insert of reselecting default node\r\n\t\t\t\t\tdispatcher.$preventDefault = true;\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tdispatcher.$preventDefault = false;\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar onReady = gantt.attachEvent(\"onGanttReady\", function(){\r\n\t\t\t\t// restore focus on repainted tasks\r\n\t\t\t\tgantt.detachEvent(onReady);\r\n\r\n\t\t\t\tgantt.$data.tasksStore.attachEvent(\"onStoreUpdated\", function(id){\r\n\t\t\t\t\tif (gantt.config.keyboard_navigation && dispatcher.isEnabled()) {\r\n\t\t\t\t\t\tconst currentNode = dispatcher.getActiveNode();\r\n\t\t\t\t\t\tconst grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tif (!grid || !grid.$grid_data){\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst top = grid.getItemTop(id);\r\n\t\t\t\t\t\tconst gridDataTopScroll = grid.$grid_data.scrollTop;\r\n\t\t\t\t\t\tconst gridDataBottomScroll = gridDataTopScroll + grid.$grid_data.getBoundingClientRect().height;\r\n\t\t\t\t\t\tif(currentNode && currentNode.taskId == id){\r\n\t\t\t\t\t\t\t// GS-2539: Don't refocus the node if it is selected and outside the visible range in the grid\r\n\t\t\t\t\t\t\tif(gridDataTopScroll <= top && gridDataBottomScroll >= top){\r\n\t\t\t\t\t\t\t\treFocusActiveNode();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(gantt._smart_render){\r\n\t\t\t\t\tvar updateRender = gantt._smart_render._redrawTasks;\r\n\t\t\t\t\tgantt._smart_render._redrawTasks = function(renderers, items){\r\n\t\t\t\t\t\tif(gantt.config.keyboard_navigation && dispatcher.isEnabled()){\r\n\t\t\t\t\t\t\tvar currentNode = dispatcher.getActiveNode();\r\n\t\t\t\t\t\t\tif(currentNode && currentNode.taskId !== undefined){\r\n\t\t\t\t\t\t\t\tvar focusedItemVisible = false;\r\n\t\t\t\t\t\t\t\tfor(var i = 0; i < items.length; i++){\r\n\t\t\t\t\t\t\t\t\tif(items[i].id == currentNode.taskId && items[i].start_date){\r\n\t\t\t\t\t\t\t\t\t\tfocusedItemVisible = true;\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(!focusedItemVisible){\r\n\t\t\t\t\t\t\t\t\titems.push(gantt.getTask(currentNode.taskId));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar res = updateRender.apply(this, arguments);\r\n\r\n\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\tlet createdTaskId = null;\r\n\t\t\tlet keepFocusOnNewTask = false;\r\n\t\t\tgantt.attachEvent(\"onTaskCreated\", function (task) {\r\n\t\t\t\tcreatedTaskId = task.id;\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\r\n\t\t\tgantt.attachEvent(\"onAfterTaskAdd\", function(id,item){\r\n\t\t\t\tif(!gantt.config.keyboard_navigation) return true;\r\n\t\t\t\tif(dispatcher.isEnabled()){\r\n\r\n\t\t\t\t\t// GS-1394. After adding a new task, the focus shouldn't change to the placeholder task\r\n\t\t\t\t\tif (id == createdTaskId) {\r\n\t\t\t\t\t\tkeepFocusOnNewTask = true;\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tkeepFocusOnNewTask = false;\r\n\t\t\t\t\t\t\tcreatedTaskId = null;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (keepFocusOnNewTask && item.type == gantt.config.types.placeholder) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar columnIndex = 0;\r\n\t\t\t\t\tvar node = dispatcher.activeNode;\r\n\t\t\t\t\tif(node instanceof gantt.$keyboardNavigation.TaskCell){\r\n\t\t\t\t\t\tcolumnIndex = node.columnIndex;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar nodeConstructor = getTaskNodeConstructor();\r\n\r\n\t\t\t\t\tif (item.type == gantt.config.types.placeholder && gantt.config.placeholder_task.focusOnCreate === false) {\r\n\t\t\t\t\t\t// do not focus on the placeholder task\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdispatcher.setActiveNode(new nodeConstructor(id, columnIndex));\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tgantt.attachEvent(\"onTaskIdChange\", function(oldId, newId){\r\n\t\t\t\tif(!gantt.config.keyboard_navigation) return true;\r\n\r\n\t\t\t\tvar node = dispatcher.activeNode;\r\n\t\t\t\tif(dispatcher.isTaskFocused(oldId)){\r\n\t\t\t\t\tnode.taskId = newId;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\r\n\t\t\tvar interval = setInterval(function(){\r\n\t\t\t\tif(!gantt.config.keyboard_navigation) return;\r\n\t\t\t\tif(!dispatcher.isEnabled()){\r\n\t\t\t\t\tdispatcher.enable();\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}, 500);\r\n\r\n\t\t\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\t\t\tclearInterval(interval);\r\n\t\t\t});\r\n\r\n\t\t\tfunction getScopeName(obj){\r\n\t\t\t\tif(obj instanceof gantt.$keyboardNavigation.GanttNode){\r\n\t\t\t\t\treturn \"gantt\";\r\n\t\t\t\t}else if(obj instanceof gantt.$keyboardNavigation.HeaderCell){\r\n\t\t\t\t\treturn \"headerCell\";\r\n\t\t\t\t}else if(obj instanceof gantt.$keyboardNavigation.TaskRow){\r\n\t\t\t\t\treturn \"taskRow\";\r\n\t\t\t\t}else if(obj instanceof gantt.$keyboardNavigation.TaskCell){\r\n\t\t\t\t\treturn \"taskCell\";\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tfunction getScope(mode){\r\n\t\t\t\tvar scopes = {\r\n\t\t\t\t\t\"gantt\":gantt.$keyboardNavigation.GanttNode,\r\n\t\t\t\t\t\"headerCell\": gantt.$keyboardNavigation.HeaderCell,\r\n\t\t\t\t\t\"taskRow\": gantt.$keyboardNavigation.TaskRow,\r\n\t\t\t\t\t\"taskCell\": gantt.$keyboardNavigation.TaskCell\r\n\t\t\t\t};\r\n\r\n\t\t\t\treturn scopes[mode] || scopes.gantt;\r\n\t\t\t}\r\n\r\n\t\t\tfunction findVisibleColumnIndex(columnName) {\r\n\t\t\t\tvar columns = gantt.getGridColumns();\r\n\t\t\t\tfor (var i = 0; i < columns.length; i++){\r\n\t\t\t\t\tif(columns[i].name == columnName){\r\n\t\t\t\t\t\treturn i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t\tvar keyNavFacade = {};\r\n\t\t\teventable(keyNavFacade);\r\n\t\t\tgantt.mixin(keyNavFacade, {\r\n\t\t\t\taddShortcut: function(shortcut, handler, scope){\r\n\t\t\t\t\tvar scopeObject = getScope(scope);\r\n\t\t\t\t\tif(scopeObject){\r\n\t\t\t\t\t\tscopeObject.prototype.bind(shortcut, handler);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tgetShortcutHandler: function(shortcut, scope){\r\n\t\t\t\t\tvar commands = gantt.$keyboardNavigation.shortcuts.parse(shortcut);\r\n\t\t\t\t\tif(commands.length){\r\n\t\t\t\t\t\treturn keyNavFacade.getCommandHandler(commands[0], scope);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tgetCommandHandler: function(command, scope){\r\n\t\t\t\t\tvar scopeObject = getScope(scope);\r\n\t\t\t\t\tif(scopeObject){\r\n\t\t\t\t\t\tif(command){\r\n\t\t\t\t\t\t\treturn scopeObject.prototype.findHandler(command);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tremoveShortcut: function(shortcut, scope){\r\n\t\t\t\t\tvar scopeObject = getScope(scope);\r\n\t\t\t\t\tif(scopeObject){\r\n\t\t\t\t\t\tscopeObject.prototype.unbind(shortcut);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfocus: function(config){\r\n\t\t\t\t\tvar type = config ? config.type : null;\r\n\t\t\t\t\tvar constructor = getScope(type);\r\n\t\t\t\t\tvar node;\r\n\t\t\t\t\tswitch (type){\r\n\t\t\t\t\t\tcase \"taskCell\":\r\n\t\t\t\t\t\t\tnode = new constructor(config.id, findVisibleColumnIndex(config.column));\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"taskRow\":\r\n\t\t\t\t\t\t\tnode = new constructor(config.id);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"headerCell\":\r\n\t\t\t\t\t\t\tnode = new constructor(findVisibleColumnIndex(config.column));\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdispatcher.delay(function(){\r\n\t\t\t\t\t\tif(node){\r\n\t\t\t\t\t\t\tdispatcher.setActiveNode(node);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tdispatcher.enable();\r\n\t\t\t\t\t\t\tif(!dispatcher.getActiveNode()){\r\n\r\n\t\t\t\t\t\t\t\tdispatcher.setDefaultNode();\r\n\t\t\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t\t\t\tif(!dispatcher.awaitsFocus()){\r\n\t\t\t\t\t\t\t\t\tdispatcher.enable();\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\r\n\t\t\t\tgetActiveNode: function(){\r\n\t\t\t\t\tif(dispatcher.isEnabled()){\r\n\t\t\t\t\t\tvar node = dispatcher.getActiveNode();\r\n\t\t\t\t\t\tvar scope = getScopeName(node);\r\n\t\t\t\t\t\tvar columns = gantt.getGridColumns();\r\n\t\t\t\t\t\tswitch (scope){\r\n\t\t\t\t\t\t\tcase \"taskCell\":\r\n\t\t\t\t\t\t\t\treturn {type:\"taskCell\", id:node.taskId, column:columns[node.columnIndex].name};\r\n\t\t\t\t\t\t\tcase \"taskRow\":\r\n\t\t\t\t\t\t\t\treturn {type:\"taskRow\", id:node.taskId};\r\n\t\t\t\t\t\t\tcase \"headerCell\":\r\n\t\t\t\t\t\t\t\treturn {type:\"headerCell\", column:columns[node.index].name};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tgantt.$keyboardNavigation.facade = keyNavFacade;\r\n\r\n\t\t\tgantt.ext.keyboardNavigation = keyNavFacade;\r\n\t\t\tgantt.focus = function(){\r\n\t\t\t\tkeyNavFacade.focus();\r\n\t\t\t};\r\n\t\t\tgantt.addShortcut = keyNavFacade.addShortcut;\r\n\t\t\tgantt.getShortcutHandler = keyNavFacade.getShortcutHandler;\r\n\t\t\tgantt.removeShortcut = keyNavFacade.removeShortcut;\r\n\t\t})();\r\n\r\n\r\n\t}\r\n\r\n\tsetupKeyNav(gantt);\r\n\r\n\r\n\r\n};","export default function(gantt) {\r\n\r\n\tgantt.$keyboardNavigation.shortcuts = {\r\n\t\tcreateCommand: function () {\r\n\t\t\treturn {\r\n\t\t\t\tmodifiers: {\r\n\t\t\t\t\t\"shift\": false,\r\n\t\t\t\t\t\"alt\": false,\r\n\t\t\t\t\t\"ctrl\": false,\r\n\t\t\t\t\t\"meta\": false\r\n\t\t\t\t},\r\n\t\t\t\tkeyCode: null\r\n\t\t\t};\r\n\t\t},\r\n\t\tparse: function (shortcut) {\r\n\t\t\tvar commands = [];\r\n\r\n\t\t\tvar expr = this.getExpressions(this.trim(shortcut));\r\n\t\t\tfor (var i = 0; i < expr.length; i++) {\r\n\t\t\t\tvar words = this.getWords(expr[i]);\r\n\r\n\t\t\t\tvar command = this.createCommand();\r\n\r\n\t\t\t\tfor (var j = 0; j < words.length; j++) {\r\n\t\t\t\t\tif (this.commandKeys[words[j]]) {\r\n\t\t\t\t\t\tcommand.modifiers[words[j]] = true;\r\n\t\t\t\t\t} else if (this.specialKeys[words[j]]) {\r\n\t\t\t\t\t\tcommand.keyCode = this.specialKeys[words[j]];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcommand.keyCode = words[j].charCodeAt(0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcommands.push(command);\r\n\t\t\t}\r\n\t\t\treturn commands;\r\n\t\t},\r\n\r\n\t\tgetCommandFromEvent: function (domEvent) {\r\n\t\t\tvar command = this.createCommand();\r\n\t\t\tcommand.modifiers.shift = !!domEvent.shiftKey;\r\n\t\t\tcommand.modifiers.alt = !!domEvent.altKey;\r\n\t\t\tcommand.modifiers.ctrl = !!domEvent.ctrlKey;\r\n\t\t\tcommand.modifiers.meta = !!domEvent.metaKey;\r\n\t\t\tcommand.keyCode = domEvent.which || domEvent.keyCode;\r\n\r\n\t\t\tif(command.keyCode >= 96 && command.keyCode <= 105){\r\n\t\t\t\t// numpad keys 96-105 -> 48-57\r\n\t\t\t\tcommand.keyCode -= 48;//convert numpad  number code to regular number code\r\n\t\t\t}\r\n\r\n\t\t\tvar printableKey = String.fromCharCode(command.keyCode);\r\n\t\t\tif (printableKey) {\r\n\t\t\t\tcommand.keyCode = printableKey.toLowerCase().charCodeAt(0);\r\n\t\t\t}\r\n\t\t\treturn command;\r\n\t\t},\r\n\r\n\t\tgetHashFromEvent: function (domEvent) {\r\n\t\t\treturn this.getHash(this.getCommandFromEvent(domEvent));\r\n\t\t},\r\n\r\n\t\tgetHash: function (command) {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor (var i in command.modifiers) {\r\n\t\t\t\tif (command.modifiers[i]) {\r\n\t\t\t\t\tparts.push(i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tparts.push(command.keyCode);\r\n\r\n\t\t\treturn parts.join(this.junctionChar);\r\n\t\t},\r\n\r\n\t\tgetExpressions: function (shortcut) {\r\n\t\t\treturn shortcut.split(this.junctionChar);\r\n\t\t},\r\n\t\tgetWords: function (term) {\r\n\t\t\treturn term.split(this.combinationChar);\r\n\t\t},\r\n\t\ttrim: function (shortcut) {\r\n\t\t\treturn shortcut.replace(/\\s/g, \"\");\r\n\t\t},\r\n\t\tjunctionChar: \",\",\r\n\t\tcombinationChar: \"+\",\r\n\t\tcommandKeys: {\r\n\t\t\t\"shift\": 16,\r\n\t\t\t\"alt\": 18,\r\n\t\t\t\"ctrl\": 17,\r\n\t\t\t\"meta\": true\r\n\t\t},\r\n\t\tspecialKeys: {\r\n\t\t\t\"backspace\": 8,\r\n\t\t\t\"tab\": 9,\r\n\t\t\t\"enter\": 13,\r\n\t\t\t\"esc\": 27,\r\n\t\t\t\"space\": 32,\r\n\t\t\t\"up\": 38,\r\n\t\t\t\"down\": 40,\r\n\t\t\t\"left\": 37,\r\n\t\t\t\"right\": 39,\r\n\t\t\t\"home\": 36,\r\n\t\t\t\"end\": 35,\r\n\t\t\t\"pageup\": 33,\r\n\t\t\t\"pagedown\": 34,\r\n\t\t\t\"delete\": 46,\r\n\t\t\t\"insert\": 45,\r\n\t\t\t\"plus\": 107,\r\n\t\t\t\"f1\": 112,\r\n\t\t\t\"f2\": 113,\r\n\t\t\t\"f3\": 114,\r\n\t\t\t\"f4\": 115,\r\n\t\t\t\"f5\": 116,\r\n\t\t\t\"f6\": 117,\r\n\t\t\t\"f7\": 118,\r\n\t\t\t\"f8\": 119,\r\n\t\t\t\"f9\": 120,\r\n\t\t\t\"f10\": 121,\r\n\t\t\t\"f11\": 122,\r\n\t\t\t\"f12\": 123\r\n\t\t}\r\n\t};\r\n};","export default function(gantt) {\r\n\r\n\tgantt.$keyboardNavigation.EventHandler = {\r\n\t\t_handlers: null,\r\n\t\tfindHandler: function (command) {\r\n\t\t\tif (!this._handlers) this._handlers = {};\r\n\t\t\tvar shortcuts = gantt.$keyboardNavigation.shortcuts;\r\n\t\t\tvar hash = shortcuts.getHash(command);\r\n\r\n\t\t\treturn this._handlers[hash];\r\n\t\t},\r\n\r\n\t\tdoAction: function (command, e) {\r\n\t\t\tvar handler = this.findHandler(command);\r\n\t\t\tif (handler) {\r\n\t\t\t\tvar eventFacade = gantt.$keyboardNavigation.facade;\r\n\r\n\t\t\t\tif(eventFacade.callEvent(\"onBeforeAction\", [command, e]) === false){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\thandler.call(this, e);\r\n\r\n\t\t\t\tif (e.preventDefault) e.preventDefault();\r\n\t\t\t\telse e.returnValue = false;\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tbind: function (shortcut, handler) {\r\n\t\t\tif (!this._handlers) this._handlers = {};\r\n\r\n\t\t\tvar shortcuts = gantt.$keyboardNavigation.shortcuts;\r\n\r\n\t\t\tvar commands = shortcuts.parse(shortcut);\r\n\t\t\tfor (var i = 0; i < commands.length; i++) {\r\n\t\t\t\tthis._handlers[shortcuts.getHash(commands[i])] = handler;\r\n\t\t\t}\r\n\t\t},\r\n\t\tunbind: function (shortcut) {\r\n\t\t\tvar shortcuts = gantt.$keyboardNavigation.shortcuts;\r\n\r\n\t\t\tvar commands = shortcuts.parse(shortcut);\r\n\t\t\tfor (var i = 0; i < commands.length; i++) {\r\n\t\t\t\tif (this._handlers[shortcuts.getHash(commands[i])]) {\r\n\t\t\t\t\tdelete this._handlers[shortcuts.getHash(commands[i])];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tbindAll: function (map) {\r\n\t\t\tfor (var i in map) {\r\n\t\t\t\tthis.bind(i, map[i]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tinitKeys: function () {\r\n\t\t\tif (!this._handlers)\r\n\t\t\t\tthis._handlers = {};\r\n\t\t\tif (this.keys) {\r\n\t\t\t\tthis.bindAll(this.keys);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n};","import * as domHelpers from \"../../../core/ui/utils/dom_helpers\";\r\n\r\nexport default function(gantt) {\r\n\r\n\t(function () {\r\n\t\t\r\n\t\tgantt.$keyboardNavigation.getFocusableNodes = domHelpers.getFocusableNodes;\r\n\r\n\t\tgantt.$keyboardNavigation.trapFocus = function trapFocus(root, e) {\r\n\t\t\tif (e.keyCode != 9) return false;\r\n\r\n\t\t\tvar focusable = gantt.$keyboardNavigation.getFocusableNodes(root);\r\n\t\t\tvar currentFocus = domHelpers.getActiveElement();\r\n\t\t\tvar currentIndex = -1;\r\n\t\t\tfor (var i = 0; i < focusable.length; i++) {\r\n\t\t\t\tif (focusable[i] == currentFocus) {\r\n\t\t\t\t\tcurrentIndex = i;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (e.shiftKey) {\r\n\t\t\t\t// back tab\r\n\t\t\t\tif (currentIndex <= 0) {\r\n\t\t\t\t\t// go to the last element if we focused on the first\r\n\t\t\t\t\tvar lastItem = focusable[focusable.length - 1];\r\n\t\t\t\t\tif (lastItem) {\r\n\t\t\t\t\t\tlastItem.focus();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\t// forward tab\r\n\t\t\t\tif (currentIndex >= focusable.length - 1) {\r\n\t\t\t\t\t// forward tab from last element should go back to the first element\r\n\t\t\t\t\tvar firstItem = focusable[0];\r\n\t\t\t\t\tif (firstItem) {\r\n\t\t\t\t\t\tfirstItem.focus();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t};\r\n\t})();\r\n\r\n};","export default function(gantt) {\r\n\r\n\tgantt.$keyboardNavigation.GanttNode = function () {\r\n\t};\r\n\r\n\tgantt.$keyboardNavigation.GanttNode.prototype = gantt._compose(\r\n\t\tgantt.$keyboardNavigation.EventHandler,\r\n\t\t{\r\n\r\n\t\t\tfocus: function () {\r\n\t\t\t\tgantt.focus();\r\n\t\t\t},\r\n\r\n\t\t\tblur: function () {\r\n\r\n\t\t\t},\r\n\r\n\t\t\tisEnabled: function () {\r\n\t\t\t\treturn gantt.$container.hasAttribute(\"tabindex\");\r\n\t\t\t},\r\n\r\n\t\t\tscrollHorizontal: function scrollHorizontal(dir) {\r\n\t\t\t\tvar date = gantt.dateFromPos(gantt.getScrollState().x);\r\n\t\t\t\tvar scale = gantt.getScale();\r\n\t\t\t\tvar step = dir < 0 ? -scale.step : scale.step;\r\n\t\t\t\tdate = gantt.date.add(date, step, scale.unit);\r\n\t\t\t\tgantt.scrollTo(gantt.posFromDate(date));\r\n\t\t\t},\r\n\r\n\t\t\tscrollVertical: function scrollVertical(dir) {\r\n\t\t\t\tvar top = gantt.getScrollState().y;\r\n\t\t\t\tvar step = gantt.config.row_height;\r\n\t\t\t\tgantt.scrollTo(null, top + (dir < 0 ? -1 : 1) * step);\r\n\t\t\t},\r\n\r\n\t\t\tkeys: {\r\n\t\t\t\t\"alt+left\": function (e) {\r\n\t\t\t\t\tthis.scrollHorizontal(-1);\r\n\t\t\t\t},\r\n\t\t\t\t\"alt+right\": function (e) {\r\n\t\t\t\t\tthis.scrollHorizontal(1);\r\n\t\t\t\t},\r\n\t\t\t\t\"alt+up\": function (e) {\r\n\t\t\t\t\tthis.scrollVertical(-1);\r\n\t\t\t\t},\r\n\t\t\t\t\"alt+down\": function (e) {\r\n\t\t\t\t\tthis.scrollVertical(1);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// undo\r\n\t\t\t\t\"ctrl+z\": function () {\r\n\t\t\t\t\tif (gantt.undo) gantt.undo();\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// redo\r\n\t\t\t\t\"ctrl+r\": function () {\r\n\t\t\t\t\tif (gantt.redo) gantt.redo();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\r\n\tgantt.$keyboardNavigation.GanttNode.prototype.bindAll(gantt.$keyboardNavigation.GanttNode.prototype.keys);\r\n\r\n};","export default function(gantt) {\r\n\r\n\tgantt.$keyboardNavigation.KeyNavNode = function () {\r\n\t};\r\n\r\n\tgantt.$keyboardNavigation.KeyNavNode.prototype = gantt._compose(\r\n\t\tgantt.$keyboardNavigation.EventHandler,\r\n\t\t{\r\n\t\t\tisValid: function () {\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tfallback: function () {\r\n\t\t\t\treturn null;\r\n\t\t\t},\r\n\r\n\t\t\tmoveTo: function (element) {\r\n\t\t\t\tgantt.$keyboardNavigation.dispatcher.setActiveNode(element);\r\n\t\t\t},\r\n\r\n\t\t\tcompareTo: function (b) {\r\n\t\t\t\t// good enough comparison of two random objects\r\n\t\t\t\tif (!b) return false;\r\n\t\t\t\tfor (var i in this) {\r\n\t\t\t\t\tif (!!this[i] != !!b[i]) return false;\r\n\r\n\t\t\t\t\tvar canStringifyThis = !!(this[i] && this[i].toString);\r\n\t\t\t\t\tvar canStringifyThat = !!(b[i] && b[i].toString);\r\n\t\t\t\t\tif (canStringifyThat != canStringifyThis) return false;\r\n\t\t\t\t\tif (!(canStringifyThat && canStringifyThis)) {\r\n\t\t\t\t\t\tif (b[i] != this[i]) return false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (b[i].toString() != this[i].toString())\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\r\n\t\t\tgetNode: function () {\r\n\t\t\t},\r\n\t\t\tfocus: function () {\r\n\t\t\t\tvar node = this.getNode();\r\n\t\t\t\tif(!node)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar eventFacade = gantt.$keyboardNavigation.facade;\r\n\r\n\t\t\t\tif(eventFacade.callEvent(\"onBeforeFocus\", [node]) === false){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (node) {\r\n\t\t\t\t\tnode.setAttribute(\"tabindex\", \"-1\");\r\n\t\t\t\t\tif(!node.$eventAttached){\r\n\t\t\t\t\t\tnode.$eventAttached = true;\r\n\t\t\t\t\t\tgantt.event(node, \"focus\",function(e){\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//node.className += \" gantt_focused\";\r\n\t\t\t\t\tif (gantt.utils.dom.isChildOf(document.activeElement, node)){\r\n\t\t\t\t\t\tnode = document.activeElement;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (node.focus) node.focus();\r\n\r\n\t\t\t\t\teventFacade.callEvent(\"onFocus\", [this.getNode()]);\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tblur: function () {\r\n\t\t\t\tvar node = this.getNode();\r\n\t\t\t\tif (node) {\r\n\t\t\t\t\tvar eventFacade = gantt.$keyboardNavigation.facade;\r\n\t\t\t\t\teventFacade.callEvent(\"onBlur\", [node]);\r\n\t\t\t\t\tnode.setAttribute(\"tabindex\", \"-1\");\r\n\t\t\t\t\t//node.className = (node.className || \"\").replace(/ ?gantt_focused/g, \"\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\r\n};","import * as domHelpers from \"../../../core/ui/utils/dom_helpers\";\r\n\r\nexport default function(gantt) {\r\n\r\n\tgantt.$keyboardNavigation.HeaderCell = function (index) {\r\n\t\tthis.index = index || 0;\r\n\t};\r\n\r\n\tgantt.$keyboardNavigation.HeaderCell.prototype = gantt._compose(\r\n\t\tgantt.$keyboardNavigation.KeyNavNode,\r\n\t\t{\r\n\t\t\t_handlers: null,\r\n\r\n\t\t\tisValid: function () {\r\n\t\t\t\tif (!gantt.config.show_grid) {\r\n\t\t\t\t\tif (gantt.getVisibleTaskCount())\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn !!gantt.getGridColumns()[this.index] || !gantt.getVisibleTaskCount();\r\n\t\t\t},\r\n\t\t\tfallback: function () {\r\n\t\t\t\tif (!gantt.config.show_grid) {\r\n\t\t\t\t\tif (gantt.getVisibleTaskCount()) {\r\n\t\t\t\t\t\treturn new gantt.$keyboardNavigation.TaskRow();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\tvar visibleColumns = gantt.getGridColumns();\r\n\t\t\t\tvar index = this.index;\r\n\t\t\t\twhile (index >= 0) {\r\n\t\t\t\t\tif (visibleColumns[index])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tindex--;\r\n\t\t\t\t}\r\n\t\t\t\tif (visibleColumns[index]) {\r\n\t\t\t\t\treturn new gantt.$keyboardNavigation.HeaderCell(index);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tfromDomElement: function(el){\r\n\t\t\t\tvar cellElement = domHelpers.locateClassName(el, \"gantt_grid_head_cell\");\r\n\t\t\t\tif(cellElement){\r\n\t\t\t\t\tvar index = 0;\r\n\t\t\t\t\twhile(cellElement && cellElement.previousSibling){\r\n\t\t\t\t\t\tcellElement = cellElement.previousSibling;\r\n\t\t\t\t\t\tindex += 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn new gantt.$keyboardNavigation.HeaderCell(index);\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tgetNode: function () {\r\n\t\t\t\tconst scale = gantt.$grid_scale;\r\n\t\t\t\tif (!scale){\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\tconst cells = scale.childNodes;\r\n\t\t\t\treturn cells[this.index];\r\n\t\t\t},\r\n\r\n\r\n\t\t\tkeys: {\r\n\r\n\t\t\t\t\"left\": function () {\r\n\t\t\t\t\tif (this.index > 0) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.HeaderCell(this.index - 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"right\": function () {\r\n\t\t\t\t\tvar columns = gantt.getGridColumns();\r\n\t\t\t\t\tif (this.index < columns.length - 1) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.HeaderCell(this.index + 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"down\": function () {\r\n\t\t\t\t\tvar taskRow;\r\n\t\t\t\t\tvar rootLevel = gantt.getChildren(gantt.config.root_id);\r\n\t\t\t\t\tif (gantt.isTaskExists(rootLevel[0])) {\r\n\t\t\t\t\t\ttaskRow = rootLevel[0];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (taskRow) {\r\n\t\t\t\t\t\tif (gantt.config.keyboard_navigation_cells) {\r\n\t\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(taskRow, this.index));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskRow(taskRow));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t\"end\": function () {\r\n\t\t\t\t\tvar columns = gantt.getGridColumns();\r\n\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.HeaderCell(columns.length - 1));\r\n\t\t\t\t},\r\n\t\t\t\t\"home\": function () {\r\n\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.HeaderCell(0));\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\t// press header button\r\n\t\t\t\t\"enter, space\": function () {\r\n\t\t\t\t\tvar node = domHelpers.getActiveElement();\r\n\t\t\t\t\tnode.click();\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// add new task\r\n\t\t\t\t\"ctrl+enter\": function () {\r\n\t\t\t\t\tif (gantt.isReadonly(this)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt.createTask({}, this.taskId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\r\n\tgantt.$keyboardNavigation.HeaderCell.prototype.bindAll(gantt.$keyboardNavigation.HeaderCell.prototype.keys);\r\n\r\n};","export default function(gantt) {\r\n\r\n\tgantt.$keyboardNavigation.TaskRow = function (taskId) {\r\n\t\tif (!taskId) {\r\n\t\t\tvar rootLevel = gantt.getChildren(gantt.config.root_id);\r\n\t\t\tif (rootLevel[0]) {\r\n\t\t\t\ttaskId = rootLevel[0];\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.taskId = taskId;\r\n\t\tif (gantt.isTaskExists(this.taskId)) {\r\n\t\t\tthis.index = gantt.getTaskIndex(this.taskId);\r\n\t\t\tthis.globalIndex = gantt.getGlobalTaskIndex(this.taskId);\r\n\t\t\tthis.splitItem = !!gantt.getTask(this.taskId).$split_subtask;\r\n\t\t\tthis.parentId = gantt.getParent(this.taskId);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.$keyboardNavigation.TaskRow.prototype = gantt._compose(\r\n\t\tgantt.$keyboardNavigation.KeyNavNode,\r\n\t\t{\r\n\t\t\t_handlers: null,\r\n\t\t\tisValid: function () {\r\n\t\t\t\treturn gantt.isTaskExists(this.taskId) && (gantt.getTaskIndex(this.taskId) > -1);\r\n\t\t\t},\r\n\t\t\tfallback: function () {\r\n\t\t\t\tif (!gantt.getVisibleTaskCount()) {\r\n\t\t\t\t\tvar header = new gantt.$keyboardNavigation.HeaderCell();\r\n\t\t\t\t\tif (!header.isValid()) return null;\r\n\t\t\t\t\telse return header;\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif(!this.splitItem){\r\n\t\t\t\t\t\tvar nextIndex = -1;\r\n\t\t\t\t\t\t// GS-1393. When Gantt tries to restore the focus, it should rely on the global index\r\n\t\t\t\t\t\tif (gantt.getTaskByIndex(this.globalIndex - 1)) {\r\n\t\t\t\t\t\t\tnextIndex = this.globalIndex - 1;\r\n\t\t\t\t\t\t} else if (gantt.getTaskByIndex(this.globalIndex + 1)) {\r\n\t\t\t\t\t\t\tnextIndex = this.globalIndex + 1;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar globalIndex = this.globalIndex;\r\n\t\t\t\t\t\t\twhile (globalIndex >= 0) {\r\n\t\t\t\t\t\t\t\tif (gantt.getTaskByIndex(globalIndex)) {\r\n\t\t\t\t\t\t\t\t\tnextIndex = globalIndex;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tglobalIndex--;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (nextIndex > -1) {\r\n\t\t\t\t\t\t\treturn new gantt.$keyboardNavigation.TaskRow(gantt.getTaskByIndex(nextIndex).id);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\treturn new gantt.$keyboardNavigation.TaskRow(this.parentId);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tfromDomElement: function(el){\r\n\t\t\t\tif(gantt.config.keyboard_navigation_cells){\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar taskId = gantt.locate(el);\r\n\t\t\t\tif(gantt.isTaskExists(taskId)){\r\n\t\t\t\t\treturn new gantt.$keyboardNavigation.TaskRow(taskId);\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tgetNode: function () {\r\n\t\t\t\tif (gantt.isTaskExists(this.taskId) && gantt.isTaskVisible(this.taskId)) {\r\n\t\t\t\t\tif (gantt.config.show_grid) {\r\n\t\t\t\t\t\treturn gantt.$grid.querySelector(`.gantt_row[${gantt.config.task_attribute}=\"${String(this.taskId).replaceAll('\"', '\\\\\"')}\"]`);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn gantt.getTaskNode(this.taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tfocus: function (keptFocus) {\r\n\t\t\t\tif(!keptFocus) {\r\n\t\t\t\t\tconst pos = gantt.getTaskPosition(gantt.getTask(this.taskId));\r\n\t\t\t\t\tconst height = gantt.getTaskHeight(this.taskId);\r\n\t\t\t\t\tconst scroll = gantt.getScrollState();\r\n\r\n\t\t\t\t\tlet viewWidth;\r\n\t\t\t\t\tif(gantt.$task){\r\n\t\t\t\t\t\tviewWidth = gantt.$task.offsetWidth;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tviewWidth = scroll.inner_width;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet viewHeight;\r\n\t\t\t\t\tif(gantt.$grid_data || gantt.$task_data){\r\n\t\t\t\t\t\tviewHeight = (gantt.$grid_data || gantt.$task_data).offsetHeight;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tviewHeight = scroll.inner_height;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst visibleTimeline = gantt.config.show_chart && gantt.$ui.getView(\"timeline\");\r\n\r\n\t\t\t\t\tif (pos.top < scroll.y || pos.top + height > (scroll.y + viewHeight)) {\r\n\t\t\t\t\t\t// GS-2346: additional scrolling to be sure that the task will be in the required range\r\n\t\t\t\t\t\tgantt.scrollTo(null, pos.top - 20);\r\n\t\t\t\t\t} else if (gantt.config.scroll_on_click && visibleTimeline) {\r\n\t\t\t\t\t\t// horizontal scroll activated\r\n\t\t\t\t\t\tif (pos.left > (scroll.x + viewWidth)) { // scroll forward to the start of the task\r\n\t\t\t\t\t\t\tgantt.scrollTo(pos.left - gantt.config.task_scroll_offset);\r\n\t\t\t\t\t\t} else if (pos.left + pos.width < scroll.x) {  // scroll back to the end of the task\r\n\t\t\t\t\t\t\tgantt.scrollTo(pos.left + pos.width - gantt.config.task_scroll_offset);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgantt.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this, [keptFocus]);\r\n\r\n\t\t\t\t// GS-152 if there are scrollbars with custom names, change their scroll position\r\n\t\t\t\tscrollGrid();\r\n\r\n\t\t\t\tfunction scrollGrid() {\r\n\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\tif (!grid || !grid.$grid_data){\r\n\t\t\t\t\t\t// GS-1805. Don't try to focus the row that doesn't exist\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar scrollPositionX = parseInt(grid.$grid.scrollLeft);\r\n\t\t\t\t\tvar scrollPositionY = parseInt(grid.$grid_data.scrollTop);\r\n\r\n\t\t\t\t\tvar attachedScrollbarHorizontal = grid.$config.scrollX;\r\n\r\n\t\t\t\t\tif (attachedScrollbarHorizontal && grid.$config.scrollable) {\r\n\t\t\t\t\t\tvar scrollbarHorizontal = gantt.$ui.getView(attachedScrollbarHorizontal);\r\n\t\t\t\t\t\tif (scrollbarHorizontal) {\r\n\t\t\t\t\t\t\tscrollbarHorizontal.scrollTo(scrollPositionX, scrollPositionY);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar attachedScrollbarVertical = grid.$config.scrollY;\r\n\r\n\t\t\t\t\tif (attachedScrollbarVertical) {\r\n\t\t\t\t\t\tvar scrollbarVertical = gantt.$ui.getView(attachedScrollbarVertical);\r\n\t\t\t\t\t\tif (scrollbarVertical) {\r\n\t\t\t\t\t\t\tscrollbarVertical.scrollTo(scrollPositionX, scrollPositionY);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tkeys: {\r\n\t\t\t\t\"pagedown\": function () {\r\n\t\t\t\t\tif (gantt.getVisibleTaskCount()) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskRow(gantt.getTaskByIndex(gantt.getVisibleTaskCount() - 1).id));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"pageup\": function () {\r\n\t\t\t\t\tif (gantt.getVisibleTaskCount()) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskRow(gantt.getTaskByIndex(0).id));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"up\": function () {\r\n\t\t\t\t\tvar nextElement = null;\r\n\t\t\t\t\tvar prevTask = gantt.getPrev(this.taskId);\r\n\t\t\t\t\tif (!gantt.isTaskExists(prevTask)) {\r\n\t\t\t\t\t\tnextElement = new gantt.$keyboardNavigation.HeaderCell();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnextElement = new gantt.$keyboardNavigation.TaskRow(prevTask);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.moveTo(nextElement);\r\n\t\t\t\t},\r\n\t\t\t\t\"down\": function () {\r\n\t\t\t\t\tvar nextTask = gantt.getNext(this.taskId);\r\n\t\t\t\t\tif (gantt.isTaskExists(nextTask)) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskRow(nextTask));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t\"shift+down\": function(){\r\n\t\t\t\t\tif(gantt.hasChild(this.taskId) && !gantt.getTask(this.taskId).$open){\r\n\t\t\t\t\t\tgantt.open(this.taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"shift+up\": function(){\r\n\t\t\t\t\tif(gantt.hasChild(this.taskId) && gantt.getTask(this.taskId).$open){\r\n\t\t\t\t\t\tgantt.close(this.taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"shift+right\": function() {\r\n\t\t\t\t\tif (gantt.isReadonly(this)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar prevId = gantt.getPrevSibling(this.taskId);\r\n\t\t\t\t\tif(gantt.isTaskExists(prevId) && !gantt.isChildOf(this.taskId, prevId)){\r\n\t\t\t\t\t\tvar parent = gantt.getTask(prevId);\r\n\t\t\t\t\t\tparent.$open = true;\r\n\t\t\t\t\t\tvar result = gantt.moveTask(this.taskId, -1, prevId);\r\n\t\t\t\t\t\tif(result !== false)\r\n\t\t\t\t\t\t\tgantt.updateTask(this.taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"shift+left\": function() {\r\n\t\t\t\t\tif (gantt.isReadonly(this)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar parent = gantt.getParent(this.taskId);\r\n\t\t\t\t\tif(gantt.isTaskExists(parent)){\r\n\t\t\t\t\t\tvar result =  gantt.moveTask(this.taskId, gantt.getTaskIndex(parent) + 1, gantt.getParent(parent));\r\n\t\t\t\t\t\tif(result !== false)\r\n\t\t\t\t\t\t\tgantt.updateTask(this.taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// select\r\n\t\t\t\t\"space\": function (e) {\r\n\t\t\t\t\tif (!gantt.isSelectedTask(this.taskId)) {\r\n\t\t\t\t\t\tgantt.selectTask(this.taskId);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgantt.unselectTask(this.taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// collapse\r\n\t\t\t\t\"ctrl+left\": function (e) {\r\n\t\t\t\t\tgantt.close(this.taskId);\r\n\t\t\t\t},\r\n\t\t\t\t// expand\r\n\t\t\t\t\"ctrl+right\": function (e) {\r\n\t\t\t\t\tgantt.open(this.taskId);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// delete task\r\n\t\t\t\t\"delete\": function (e) {\r\n\t\t\t\t\tif (gantt.isReadonly(this)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt.$click.buttons[\"delete\"](this.taskId);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// open lightbox\r\n\t\t\t\t\"enter\": function () {\r\n\t\t\t\t\tif (gantt.isReadonly(this)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt.showLightbox(this.taskId);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// add subtask\r\n\t\t\t\t\"ctrl+enter\": function () {\r\n\t\t\t\t\tif (gantt.isReadonly(this)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt.createTask({}, this.taskId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\tgantt.$keyboardNavigation.TaskRow.prototype.bindAll(gantt.$keyboardNavigation.TaskRow.prototype.keys);\r\n\r\n};","import * as domHelpers from \"../../../core/ui/utils/dom_helpers\";\r\nimport {replaceValidZeroId} from \"../../../utils/helpers\";\r\n\r\nexport default function(gantt) {\r\n\r\n\r\n\tgantt.$keyboardNavigation.TaskCell = function (taskId, index) {\r\n\t\ttaskId = replaceValidZeroId(taskId, gantt.config.root_id);\r\n\t\tif (!taskId) {\r\n\t\t\tvar rootLevel = gantt.getChildren(gantt.config.root_id);\r\n\t\t\tif (rootLevel[0]) {\r\n\t\t\t\ttaskId = rootLevel[0];\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.taskId = taskId;\r\n\t\tthis.columnIndex = index || 0;\r\n\t\t// provided task may not exist, in this case node will be detectes as invalid\r\n\t\tif (gantt.isTaskExists(this.taskId)) {\r\n\t\t\tthis.index = gantt.getTaskIndex(this.taskId);\r\n\t\t\tthis.globalIndex = gantt.getGlobalTaskIndex(this.taskId);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.$keyboardNavigation.TaskCell.prototype = gantt._compose(\r\n\t\tgantt.$keyboardNavigation.TaskRow,\r\n\t\t{\r\n\t\t\t_handlers: null,\r\n\t\t\tisValid: function () {\r\n\r\n\t\t\t\treturn gantt.$keyboardNavigation.TaskRow.prototype.isValid.call(this) && !!gantt.getGridColumns()[this.columnIndex];\r\n\t\t\t},\r\n\t\t\tfallback: function () {\r\n\r\n\t\t\t\tvar node = gantt.$keyboardNavigation.TaskRow.prototype.fallback.call(this);\r\n\t\t\t\tvar result = node;\r\n\t\t\t\tif (node instanceof gantt.$keyboardNavigation.TaskRow) {\r\n\t\t\t\t\tvar visibleColumns = gantt.getGridColumns();\r\n\t\t\t\t\tvar index = this.columnIndex;\r\n\t\t\t\t\twhile (index >= 0) {\r\n\t\t\t\t\t\tif (visibleColumns[index])\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tindex--;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (visibleColumns[index]) {\r\n\t\t\t\t\t\tresult = new gantt.$keyboardNavigation.TaskCell(node.taskId, index);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn result;\r\n\t\t\t},\r\n\r\n\t\t\tfromDomElement: function(el){\r\n\t\t\t\tif(!gantt.config.keyboard_navigation_cells){\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar taskId = gantt.locate(el);\r\n\t\t\t\tif(gantt.isTaskExists(taskId)){\r\n\t\t\t\t\tvar index = 0;\r\n\t\t\t\t\tvar cellElement = domHelpers.locateAttribute(el, \"data-column-index\");\r\n\r\n\t\t\t\t\tif(cellElement){\r\n\t\t\t\t\t\tindex = cellElement.getAttribute(\"data-column-index\")*1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn new gantt.$keyboardNavigation.TaskCell(taskId, index);\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tgetNode: function () {\r\n\t\t\t\tif (gantt.isTaskExists(this.taskId) && (gantt.isTaskVisible(this.taskId) || gantt.config.show_tasks_outside_timescale)) {\r\n\t\t\t\t\tif (gantt.config.show_grid && gantt.$grid) {\r\n\t\t\t\t\t\tvar row = gantt.$grid.querySelector(\".gantt_row[\" + gantt.config.task_attribute + \"='\" + this.taskId + \"']\");\r\n\t\t\t\t\t\tif(!row)\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\treturn row.querySelector(\"[data-column-index='\"+this.columnIndex+\"']\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn gantt.getTaskNode(this.taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tkeys: {\r\n\t\t\t\t\"up\": function () {\r\n\r\n\t\t\t\t\tvar nextElement = null;\r\n\t\t\t\t\tvar prevTask = gantt.getPrev(this.taskId);\r\n\t\t\t\t\tif (!gantt.isTaskExists(prevTask)) {\r\n\t\t\t\t\t\tnextElement = new gantt.$keyboardNavigation.HeaderCell(this.columnIndex);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnextElement = new gantt.$keyboardNavigation.TaskCell(prevTask, this.columnIndex);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.moveTo(nextElement);\r\n\t\t\t\t},\r\n\t\t\t\t\"down\": function () {\r\n\t\t\t\t\tvar nextTask = gantt.getNext(this.taskId);\r\n\t\t\t\t\tif (gantt.isTaskExists(nextTask)) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(nextTask, this.columnIndex));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"left\": function () {\r\n\t\t\t\t\tif (this.columnIndex > 0) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(this.taskId, this.columnIndex - 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"right\": function () {\r\n\t\t\t\t\tvar columns = gantt.getGridColumns();\r\n\t\t\t\t\tif (this.columnIndex < columns.length - 1) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(this.taskId, this.columnIndex + 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t\"end\": function () {\r\n\t\t\t\t\tvar columns = gantt.getGridColumns();\r\n\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(this.taskId, columns.length - 1));\r\n\t\t\t\t},\r\n\t\t\t\t\"home\": function () {\r\n\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(this.taskId, 0));\r\n\t\t\t\t},\r\n\t\t\t\t\"pagedown\": function () {\r\n\t\t\t\t\tif (gantt.getVisibleTaskCount()) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(gantt.getTaskByIndex(gantt.getVisibleTaskCount() - 1).id, this.columnIndex));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"pageup\": function () {\r\n\t\t\t\t\tif (gantt.getVisibleTaskCount()) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(gantt.getTaskByIndex(0).id, this.columnIndex));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\r\n\r\n\tgantt.$keyboardNavigation.TaskCell.prototype.bindAll(gantt.$keyboardNavigation.TaskRow.prototype.keys);\r\n\tgantt.$keyboardNavigation.TaskCell.prototype.bindAll(gantt.$keyboardNavigation.TaskCell.prototype.keys);\r\n\r\n};","export default function(gantt) {\r\n\r\n\tgantt.$keyboardNavigation.dispatcher = {\r\n\t\tisActive: false,\r\n\t\tactiveNode: null,\r\n\t\tglobalNode: new gantt.$keyboardNavigation.GanttNode(),\r\n\r\n\t\tenable: function () {\r\n\t\t\tthis.isActive = true;\r\n\t\t\tthis.setActiveNode(this.getActiveNode());\r\n\t\t},\r\n\r\n\t\tdisable: function () {\r\n\t\t\tthis.isActive = false;\r\n\t\t},\r\n\r\n\t\tisEnabled: function () {\r\n\t\t\treturn !!this.isActive;\r\n\t\t},\r\n\r\n\t\tgetDefaultNode: function () {\r\n\t\t\tvar node;\r\n\t\t\tif (gantt.config.keyboard_navigation_cells) {\r\n\t\t\t\tnode = new gantt.$keyboardNavigation.TaskCell();\r\n\t\t\t} else {\r\n\t\t\t\tnode = new gantt.$keyboardNavigation.TaskRow();\r\n\t\t\t}\r\n\r\n\t\t\tif (!node.isValid()) {\r\n\t\t\t\tnode = node.fallback();\r\n\t\t\t}\r\n\t\t\treturn node;\r\n\t\t},\r\n\r\n\t\tsetDefaultNode: function () {\r\n\t\t\tthis.setActiveNode(this.getDefaultNode());\r\n\t\t},\r\n\r\n\t\tgetActiveNode: function () {\r\n\t\t\tvar node = this.activeNode;\r\n\t\t\tif (node && !node.isValid()) {\r\n\t\t\t\tnode = node.fallback();\r\n\t\t\t}\r\n\t\t\treturn node;\r\n\t\t},\r\n\r\n\t\tfromDomElement: function(e){\r\n\t\t\tvar inputs = [\r\n\t\t\t\tgantt.$keyboardNavigation.TaskRow,\r\n\t\t\t\tgantt.$keyboardNavigation.TaskCell,\r\n\t\t\t\tgantt.$keyboardNavigation.HeaderCell\r\n\t\t\t];\r\n\t\t\tfor(var i = 0; i < inputs.length; i++){\r\n\t\t\t\tif(inputs[i].prototype.fromDomElement){\r\n\t\t\t\t\tvar node = inputs[i].prototype.fromDomElement(e);\r\n\t\t\t\t\tif(node) return node;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\r\n\t\tfocusGlobalNode: function () {\r\n\t\t\tthis.blurNode(this.globalNode);\r\n\t\t\tthis.focusNode(this.globalNode);\r\n\t\t},\r\n\r\n\t\tsetActiveNode: function (el) {\r\n\t\t\t//console.trace()\r\n\t\t\tvar focusChanged = true;\r\n\t\t\tif (this.activeNode) {\r\n\t\t\t\tif (this.activeNode.compareTo(el)) {\r\n\t\t\t\t\tfocusChanged = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.isEnabled()) {\r\n\t\t\t\tif(focusChanged)\r\n\t\t\t\t\tthis.blurNode(this.activeNode);\r\n\r\n\t\t\t\tthis.activeNode = el;\r\n\t\t\t\tthis.focusNode(this.activeNode, !focusChanged);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfocusNode: function (el, keptFocus) {\r\n\t\t\tif (el && el.focus) {\r\n\t\t\t\tel.focus(keptFocus);\r\n\t\t\t}\r\n\t\t},\r\n\t\tblurNode: function (el) {\r\n\t\t\tif (el && el.blur) {\r\n\t\t\t\tel.blur();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tkeyDownHandler: function (e) {\r\n\r\n\t\t\tif (gantt.$keyboardNavigation.isModal())\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (!this.isEnabled())\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(e.defaultPrevented){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar ganttNode = this.globalNode;\r\n\r\n\t\t\tvar command = gantt.$keyboardNavigation.shortcuts.getCommandFromEvent(e);\r\n\r\n\t\t\tvar activeElement = this.getActiveNode();\r\n\t\t\tvar eventFacade = gantt.$keyboardNavigation.facade;\r\n\t\t\tif(eventFacade.callEvent(\"onKeyDown\", [command, e]) === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!activeElement) {\r\n\t\t\t\tthis.setDefaultNode();\r\n\t\t\t} else if (activeElement.findHandler(command)) {\r\n\t\t\t\tactiveElement.doAction(command, e);\r\n\t\t\t} else if (ganttNode.findHandler(command)) {\r\n\t\t\t\tganttNode.doAction(command, e);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t_timeout: null,\r\n\t\tawaitsFocus: function(){\r\n\t\t\treturn this._timeout !== null;\r\n\t\t},\r\n\t\tdelay: function(callback, delay){\r\n\r\n\t\t\tclearTimeout(this._timeout);\r\n\t\t\tthis._timeout = setTimeout(gantt.bind(function(){\r\n\t\t\t\tthis._timeout = null;\r\n\t\t\t\tcallback();\r\n\t\t\t}, this)  , delay || 1);\r\n\r\n\t\t},\r\n\t\tclearDelay: function(){\r\n\t\t\tclearTimeout(this._timeout);\r\n\t\t}\r\n\t};\r\n\r\n};","import { QuickInfo } from \"./quickInfo\";\r\n\r\nexport default function(gantt: any){\r\n\r\nif (!gantt.ext) {\r\n\tgantt.ext = {};\r\n}\r\ngantt.ext.quickInfo = new QuickInfo(gantt);\r\n\r\ngantt.config.quickinfo_buttons = [\"icon_edit\", \"icon_delete\"];\r\ngantt.config.quick_info_detached = true;\r\ngantt.config.show_quick_info = true;\r\n\r\ngantt.templates.quick_info_title = function(start, end, ev){ return ev.text.substr(0,50); };\r\ngantt.templates.quick_info_content = function(start, end, ev){ return ev.details || ev.text; };\r\ngantt.templates.quick_info_date = function(start, end, ev){\r\n\treturn gantt.templates.task_time(start, end, ev);\r\n};\r\ngantt.templates.quick_info_class = function(start, end, task){ return \"\"; };\r\n\r\ngantt.attachEvent(\"onTaskClick\", function(id,e){\r\n\t// GS-1460 and GS-1787. Don't show Quick Info when clicking on the add, collapse, and expand buttons\r\n\tconst addButton = gantt.utils.dom.closest(e.target, \".gantt_add\");\r\n\tconst collapseButton = gantt.utils.dom.closest(e.target, \".gantt_close\");\r\n\tconst expandButton = gantt.utils.dom.closest(e.target, \".gantt_open\");\r\n\tconst showQuickInfo = !addButton && !collapseButton && !expandButton;\r\n\tif (showQuickInfo){\r\n\t\tsetTimeout(function() {\r\n\t\t\tgantt.ext.quickInfo.show(id);\r\n\t\t}, 0);\r\n\t}\r\n\r\n\treturn true;\r\n});\r\n\r\nconst events = [\"onViewChange\", \"onLightbox\", \"onBeforeTaskDelete\", \"onBeforeDrag\"];\r\nconst hidingFunction = function(){\r\n\tgantt.ext.quickInfo.hide();\r\n\treturn true;\r\n};\r\nfor (let i=0; i<events.length; i++){\r\n\tgantt.attachEvent(events[i], hidingFunction);\r\n}\r\n// GS-957: We don't want to hide QuickInfo when we click on it.\r\ngantt.attachEvent(\"onEmptyClick\", function(e){\r\n\tlet hideQuickInfo = true;\r\n\tconst parent = document.querySelector(\".gantt_cal_quick_info\");\r\n\tif (parent){\r\n\t\tconst quickInfoClick = gantt.utils.dom.isChildOf(e.target, parent);\r\n\t\tif (quickInfoClick){\r\n\t\t\thideQuickInfo = false;\r\n\t\t}\r\n\t}\r\n\tif (hideQuickInfo){\r\n\t\thidingFunction();\r\n\t}\r\n});\r\nfunction clearQuickInfo() {\r\n\tgantt.ext.quickInfo.hide();\r\n\tgantt.ext.quickInfo._quickInfoBox = null;\r\n\treturn true;\r\n}\r\ngantt.attachEvent(\"onGanttReady\", clearQuickInfo);\r\ngantt.attachEvent(\"onDestroy\", clearQuickInfo);\r\n\r\n// eslint-disable-next-line no-restricted-globals\r\ngantt.event(window, \"keydown\", function(e){\r\n\tif (e.keyCode === 27){\r\n\t\tgantt.ext.quickInfo.hide();\r\n\t}\r\n});\r\n\r\ngantt.showQuickInfo = function(){\r\n\tgantt.ext.quickInfo.show.apply(gantt.ext.quickInfo, arguments);\r\n};\r\ngantt.hideQuickInfo = function(){\r\n\tgantt.ext.quickInfo.hide.apply(gantt.ext.quickInfo, arguments);\r\n};\r\n\r\n}","import {TooltipManager} from \"./tooltipManager\";\r\n\r\nexport default function(gantt: any){\r\n\r\ngantt.config.tooltip_timeout = 30;\r\ngantt.config.tooltip_offset_y = 20;\r\ngantt.config.tooltip_offset_x = 10;\r\ngantt.config.tooltip_hide_timeout = 30;\r\n\r\n\r\n\r\nconst tooltipManager = new TooltipManager(gantt);\r\n\r\ngantt.ext.tooltips = tooltipManager;\r\n\r\ngantt.attachEvent(\"onGanttReady\", function(){\r\n\t//GS-2230: in case if `getGanttInstance` created without container\r\n\tif(!gantt.$root) return;\r\n\ttooltipManager.tooltipFor({\r\n\t\tselector: \"[\"+gantt.config.task_attribute+\"]:not(.gantt_task_row)\",\r\n\t\thtml: (event: MouseEvent) => {\r\n\t\t\tif (gantt.config.touch && !gantt.config.touch_tooltip) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst targetTaskId = gantt.locate(event);\r\n\t\t\tif(gantt.isTaskExists(targetTaskId)){\r\n\t\t\t\tconst task = gantt.getTask(targetTaskId);\r\n\t\t\t\treturn gantt.templates.tooltip_text(task.start_date, task.end_date, task);\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tglobal: false\r\n\t});\r\n});\r\n\r\ngantt.attachEvent(\"onDestroy\", function() {\r\n\ttooltipManager.destructor();\r\n});\r\n\r\ngantt.attachEvent(\"onLightbox\", function() {\r\n\ttooltipManager.hideTooltip();\r\n});\r\nconst isLinkCreate = () => {\r\n\tconst state = gantt.getState();\r\n\treturn !!state.link_source_id;\r\n};\r\ngantt.attachEvent(\"onBeforeTooltip\", function() {\r\n\tif (isLinkCreate()){\r\n\t\treturn false;\r\n\t}\r\n});\r\n\r\ngantt.attachEvent(\"onGanttScroll\", function(){\r\n\ttooltipManager.hideTooltip();\r\n});\r\n\r\n}","import { Monitor } from \"./monitor\";\r\nimport { IMonitor, IUndoCommand, TEntityType, TUndoStack } from \"./types\";\r\nimport { Undo } from \"./undo\";\r\n\r\nexport default function(gantt: any){\r\n\r\nconst _undo = new Undo(gantt);\r\nconst monitor: IMonitor = new Monitor(_undo, gantt);\r\n\r\ngantt.config.undo = true;\r\ngantt.config.redo = true;\r\n\r\n/**\r\n * entities that require different processing for undoing-redoing changes\r\n * @type {{link: string, task: string}}\r\n */\r\ngantt.config.undo_types = {\r\n\tlink: \"link\",\r\n\ttask: \"task\"\r\n};\r\n\r\n/**\r\n * types of traced actions\r\n * @type {{update: string, remove: string, add: string}}\r\n */\r\ngantt.config.undo_actions = {\r\n\tupdate: \"update\",\r\n\tremove: \"remove\", // remove item from datastore\r\n\tadd: \"add\",\r\n\tmove: \"move\" // move task in grid\r\n};\r\n\r\nif (!gantt.ext) {\r\n\tgantt.ext = {};\r\n}\r\n\r\ngantt.ext.undo = {\r\n\tundo: () => _undo.undo(),\r\n\tredo: () => _undo.redo(),\r\n\tgetUndoStack: () => _undo.getUndoStack(),\r\n\tsetUndoStack: (stack:[]) => _undo.setUndoStack(stack),\r\n\tgetRedoStack: () => _undo.getRedoStack(),\r\n\tsetRedoStack: (stack:[]) => _undo.setRedoStack(stack),\r\n\tclearUndoStack: () => _undo.clearUndoStack(),\r\n\tclearRedoStack: () => _undo.clearRedoStack(),\r\n\tsaveState: (id: TaskID | LinkID, type: TEntityType) => monitor.store(id, type, true),\r\n\tgetInitialState: (id: TaskID | LinkID, type: TEntityType) => {\r\n\t\tif(type === gantt.config.undo_types.link){\r\n\t\t\treturn monitor.getInitialLink(id);\r\n\t\t}else{\r\n\t\t\treturn monitor.getInitialTask(id);\r\n\t\t}\r\n\t}\r\n};\r\n\r\ngantt.undo = gantt.ext.undo.undo;\r\ngantt.redo = gantt.ext.undo.redo;\r\ngantt.getUndoStack = gantt.ext.undo.getUndoStack;\r\ngantt.getRedoStack = gantt.ext.undo.getRedoStack;\r\ngantt.clearUndoStack = gantt.ext.undo.clearUndoStack;\r\ngantt.clearRedoStack = gantt.ext.undo.clearRedoStack;\r\n\r\nfunction isEqualIds(first: TaskID, second: TaskID){\r\n\treturn String(first) === String(second);\r\n};\r\n\r\nfunction updTask(task: ITask, oldId: TaskID, newId: TaskID) {\r\n\tif (!task) { return; }\r\n\r\n\tif (isEqualIds(task.id, oldId)) {\r\n\t\ttask.id = newId;\r\n\t}\r\n\r\n\tif (isEqualIds(task.parent, oldId)) {\r\n\t\ttask.parent = newId;\r\n\t}\r\n}\r\n\r\nfunction changeTaskCommandId(command: IUndoCommand, oldId: TaskID, newId: TaskID) {\r\n\tupdTask(command.value, oldId, newId);\r\n\tupdTask(command.oldValue, oldId, newId);\r\n}\r\n\r\nfunction updLink(link: ILink, oldTaskId: TaskID, newTaskId: TaskID) {\r\n\tif (!link) { return; }\r\n\tif (isEqualIds(link.source, oldTaskId)) {\r\n\t\tlink.source = newTaskId;\r\n\t}\r\n\tif (isEqualIds(link.target, oldTaskId)) {\r\n\t\tlink.target = newTaskId;\r\n\t}\r\n}\r\n\r\nfunction changeLinkCommandId(command: IUndoCommand, oldId: LinkID, newId: LinkID) {\r\n\tupdLink(command.value, oldId, newId);\r\n\tupdLink(command.oldValue, oldId, newId);\r\n}\r\n\r\nfunction updateTasksIds(log: TUndoStack, oldId: TaskID, newId: TaskID) {\r\n\tconst undo = _undo;\r\n\r\n\tfor (let i = 0; i < log.length; i++) {\r\n\t\tconst entry = log[i];\r\n\t\tfor (let j = 0; j < entry.commands.length; j++) {\r\n\t\t\tif (entry.commands[j].entity === undo.command.entity.task) {\r\n\t\t\t\tchangeTaskCommandId(entry.commands[j], oldId, newId);\r\n\t\t\t} else if (entry.commands[j].entity === undo.command.entity.link) {\r\n\t\t\t\tchangeLinkCommandId(entry.commands[j], oldId, newId);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction updateLinksIds(log: TUndoStack, oldId: LinkID, newId: LinkID) {\r\n\tconst undo = _undo;\r\n\r\n\tfor (let i = 0; i < log.length; i++) {\r\n\t\tconst entry = log[i];\r\n\t\tfor (let j = 0; j < entry.commands.length; j++) {\r\n\t\t\tconst command = entry.commands[j];\r\n\t\t\tif (command.entity === undo.command.entity.link) {\r\n\t\t\t\tif (command.value && command.value.id === oldId) {\r\n\t\t\t\t\tcommand.value.id = newId;\r\n\t\t\t\t}\r\n\t\t\t\tif (command.oldValue && command.oldValue.id === oldId) {\r\n\t\t\t\t\tcommand.oldValue.id = newId;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\ngantt.attachEvent(\"onTaskIdChange\", (oldId: TaskID, newId: TaskID) => {\r\n\tconst undo = _undo;\r\n\tupdateTasksIds(undo.getUndoStack(), oldId, newId);\r\n\tupdateTasksIds(undo.getRedoStack(), oldId, newId);\r\n});\r\n\r\ngantt.attachEvent(\"onLinkIdChange\", (oldId: LinkID, newId: LinkID) => {\r\n\tconst undo = _undo;\r\n\tupdateLinksIds(undo.getUndoStack(), oldId, newId);\r\n\tupdateLinksIds(undo.getRedoStack(), oldId, newId);\r\n});\r\n\r\ngantt.attachEvent(\"onGanttReady\", () => {\r\n\t_undo.updateConfigs();\r\n});\r\n\r\n}","\r\nexport default function(gantt){\r\n\r\nif(!gantt._markers) {\r\n\tgantt._markers = gantt.createDatastore({\r\n\t\tname: \"marker\",\r\n\t\tinitItem: function (marker) {\r\n\t\t\tmarker.id = marker.id || gantt.uid();\r\n\t\t\treturn marker;\r\n\t\t}\r\n\t});\r\n}\r\n\r\ngantt.config.show_markers = true;\r\n\r\nfunction render_marker(marker){\r\n\tif(!gantt.config.show_markers)\r\n\t\treturn false;\r\n\r\n\tif(!marker.start_date)\r\n\t\treturn false;\r\n\r\n\tvar state = gantt.getState();\r\n\tif(+marker.start_date > +state.max_date)\r\n\t\treturn;\r\n\tif((!marker.end_date || +marker.end_date < +state.min_date) && +marker.start_date < +state.min_date)\r\n\t\treturn;\r\n\r\n\tvar div = document.createElement(\"div\");\r\n\r\n\tdiv.setAttribute(\"data-marker-id\", marker.id);\r\n\r\n\tvar css = \"gantt_marker\";\r\n\tif(gantt.templates.marker_class)\r\n\t\tcss += \" \" + gantt.templates.marker_class(marker);\r\n\r\n\tif(marker.css){\r\n\t\tcss += \" \" + marker.css;\r\n\t}\r\n\r\n\tif(gantt.templates.marker_class)\r\n\t\tcss += \" \" + gantt.templates.marker_class(marker);\r\n\r\n\tif(marker.title){\r\n\t\tdiv.title = marker.title;\r\n\t}\r\n\tdiv.className = css;\r\n\r\n\tvar start = gantt.posFromDate(marker.start_date);\r\n\tdiv.style.left = start + \"px\";\r\n\tlet markerHeight = Math.max(gantt.getRowTop(gantt.getVisibleTaskCount()), 0) + \"px\";\r\n\tif (gantt.config.timeline_placeholder && gantt.$task_data){\r\n\t\tmarkerHeight = gantt.$task_data.scrollHeight + \"px\";\r\n\t}\r\n\tdiv.style.height = markerHeight;\r\n\tif(marker.end_date){\r\n\t\tvar end = gantt.posFromDate(marker.end_date);\r\n\t\tdiv.style.width = Math.max((end - start), 0) + \"px\";\r\n\r\n\t}\r\n\r\n\tif(marker.text){\r\n\t\tlet content = null;\r\n\t\tif(typeof marker.text === \"function\"){\r\n\t\t\tcontent = marker.text(marker);\r\n\t\t}else {\r\n\t\t\tcontent = marker.text;\r\n\t\t}\r\n\t\tif(content){\r\n\t\t\tif(gantt.config.external_render && gantt.config.external_render.isElement(content)){\r\n\t\t\t\tdiv.innerHTML = \"<div class='gantt_marker_content' ></div>\";\r\n\t\t\t\tgantt.config.external_render.renderElement(content, div.querySelector(\".gantt_marker_content\"));\r\n\t\t\t}else{\r\n\t\t\t\tdiv.innerHTML = \"<div class='gantt_marker_content' >\" + marker.text + \"</div>\";\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\t\r\n\t}\r\n\r\n\treturn div;\r\n}\r\n\r\nfunction initMarkerArea(){\r\n\t// GS-481. Reset $marker_area if there is no timeline\r\n\tif(!gantt.$task_data || !gantt.$root.contains(gantt.$task_data)){\r\n\t\tgantt.$marker_area = null;\r\n\t\treturn;\r\n\t}\r\n\r\n\t// GS-2084. Don't add $marker_area when it already exists\r\n\tif(gantt.$marker_area && gantt.$task_data.contains(gantt.$marker_area)){\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar markerArea = document.createElement(\"div\");\r\n\tmarkerArea.className = \"gantt_marker_area\";\r\n\tgantt.$task_data.appendChild(markerArea);\r\n\tgantt.$marker_area = markerArea;\r\n}\r\n\r\ngantt.attachEvent(\"onBeforeGanttRender\", function(){\r\n\tif(!gantt.$marker_area)\r\n\t\tinitMarkerArea();\r\n});\r\n\r\ngantt.attachEvent(\"onDataRender\", function(){\r\n\tif(!gantt.$marker_area){\r\n\t\tinitMarkerArea();\r\n\t\tgantt.renderMarkers();\r\n\t}\r\n});\r\n\r\ngantt.attachEvent(\"onGanttLayoutReady\", function(){\r\n\t// GS-1304 - markers should attach when layout is initialized, both on gantt.init and gantt.resetLayout\r\n\t// wait for \"onBeforeGanttRender\", so all layout elements will be in DOM\r\n\tgantt.attachEvent(\"onBeforeGanttRender\", function(){\r\n\t\t// GS-882. If markers are rendered in the onDataRender handler, \r\n\t\t// they are not attached to the layer, so we need to remove the DOM elements\r\n\t\tif (gantt.$marker_area) {\r\n\t\t\tgantt.$marker_area.innerHTML = \"\";\r\n\t\t}\r\n\t\tinitMarkerArea();\r\n\r\n\t\tvar layers = gantt.$services.getService(\"layers\");\r\n\t\tvar markerRenderer = layers.createDataRender({\r\n\t\t\tname: \"marker\",\r\n\t\t\tdefaultContainer: function(){ return gantt.$marker_area;}\r\n\t\t});\r\n\t\tmarkerRenderer.addLayer(render_marker);\r\n\t}, {once: true});\r\n});\r\n\r\ngantt.getMarker = function(id){\r\n\tif(!this._markers) return null;\r\n\r\n\treturn this._markers.getItem(id);\r\n};\r\n\r\ngantt.addMarker = function(marker){\r\n\treturn this._markers.addItem(marker);\r\n};\r\n\r\ngantt.deleteMarker = function(id){\r\n\tif(!this._markers.exists(id))\r\n\t\treturn false;\r\n\r\n\tthis._markers.removeItem(id);\r\n\treturn true;\r\n};\r\ngantt.updateMarker = function(id){\r\n\tthis._markers.refresh(id);\r\n};\r\n\r\ngantt._getMarkers = function(){\r\n\treturn this._markers.getItems();\r\n};\r\n\r\ngantt.renderMarkers = function () {\r\n\tthis._markers.refresh();\r\n};\r\n\r\n};","import {replaceValidZeroId} from \"../utils/helpers\";\r\n\r\nexport default function(gantt){\r\n\r\ngantt.config.multiselect = true;\r\ngantt.config.multiselect_one_level = false;\r\n\r\ngantt._multiselect = {\r\n\t_selected: {},\r\n\t_one_level: false,\r\n\t_active: true,\r\n\t_first_selected_when_shift: null,\r\n\tgetDefaultSelected: function() {\r\n\t\tvar selected = this.getSelected();\r\n\t\treturn selected.length ? selected[selected.length - 1] : null;\r\n\t},\r\n\tsetFirstSelected: function(id) {\r\n\t\tthis._first_selected_when_shift = id;\r\n\t},\r\n\tgetFirstSelected: function() {\r\n\t\treturn this._first_selected_when_shift;\r\n\t},\r\n\tisActive: function() {\r\n\t\tthis.updateState();\r\n\t\treturn this._active;\r\n\t},\r\n\tupdateState: function() {\r\n\t\tthis._one_level = gantt.config.multiselect_one_level;\r\n\t\tvar active = this._active;\r\n\t\tthis._active = gantt.config.select_task;\r\n\t\tif (this._active != active) {\r\n\t\t\tthis.reset();\r\n\t\t}\r\n\t},\r\n\treset: function () {\r\n\t\tthis._selected = {};\r\n\t},\r\n\tsetLastSelected: function (id) {\r\n\t\tgantt.$data.tasksStore.silent(function(){\r\n\t\t\tvar store = gantt.$data.tasksStore;\r\n\t\t\tif (id)\r\n\t\t\t\tstore.select(id+\"\");\r\n\t\t\telse\r\n\t\t\t\tstore.unselect(null);\r\n\t\t});\r\n\t},\r\n\tgetLastSelected: function () {\r\n\t\tvar last = gantt.$data.tasksStore.getSelectedId();\r\n\t\tif (last && gantt.isTaskExists(last))\r\n\t\t\treturn last;\r\n\t\treturn null;\r\n\t},\r\n\tselect: function (id, e) {\r\n\t\tif (id && gantt.callEvent(\"onBeforeTaskMultiSelect\", [id, true, e]) && gantt.callEvent(\"onBeforeTaskSelected\", [id])) {\r\n\t\t\tthis._selected[id] = true;\r\n\t\t\tthis.setLastSelected(id);\r\n\t\t\tthis.afterSelect(id);\r\n\t\t\tgantt.callEvent(\"onTaskMultiSelect\", [id, true, e]);\r\n\t\t\tgantt.callEvent(\"onTaskSelected\", [id]);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\ttoggle: function (id, e) {\r\n\t\tif (this._selected[id]) {\r\n\t\t\tthis.unselect(id, e);\r\n\t\t} else {\r\n\t\t\tthis.select(id, e);\r\n\t\t}\r\n\t},\r\n\tunselect: function (id, e) {\r\n\t\tif (id && gantt.callEvent(\"onBeforeTaskMultiSelect\", [id, false, e])) {\r\n\t\t\tthis._selected[id] = false;\r\n\t\t\tif (this.getLastSelected() == id)\r\n\t\t\t\tthis.setLastSelected(this.getDefaultSelected());\r\n\t\t\tthis.afterSelect(id);\r\n\t\t\tgantt.callEvent(\"onTaskMultiSelect\", [id, false, e]);\r\n\t\t\tgantt.callEvent(\"onTaskUnselected\", [id]);\r\n\t\t}\r\n\t},\r\n\tisSelected: function (id) {\r\n\t\treturn !!(gantt.isTaskExists(id) && this._selected[id]);\r\n\t},\r\n\tgetSelected: function () {\r\n\t\tvar res = [];\r\n\t\tfor (var i in this._selected) {\r\n\t\t\tif (this._selected[i] && gantt.isTaskExists(i)) {\r\n\t\t\t\tres.push(i);\r\n\t\t\t} else {\r\n\t\t\t\tthis._selected[i] = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tres.sort(function(a, b) {\r\n\t\t\treturn gantt.getGlobalTaskIndex(a) > gantt.getGlobalTaskIndex(b) ? 1 : -1;\r\n\t\t});\r\n\t\treturn res;\r\n\t},\r\n\tforSelected: function (callback) {\r\n\t\tvar selected = this.getSelected();\r\n\t\tfor (var i = 0; i < selected.length; i++) {\r\n\t\t\tcallback(selected[i]);\r\n\t\t}\r\n\t},\r\n\tisSameLevel: function(id) {\r\n\t\tif (!this._one_level)\r\n\t\t\treturn true;\r\n\t\tvar last = this.getLastSelected();\r\n\t\tif (!last)\r\n\t\t\treturn true;\r\n\t\tif (!(gantt.isTaskExists(last) && gantt.isTaskExists(id)))\r\n\t\t\treturn true;\r\n\t\treturn !!(gantt.calculateTaskLevel(gantt.getTask(last)) == gantt.calculateTaskLevel(gantt.getTask(id)));\r\n\t},\r\n\tafterSelect: function(id) {\r\n\t\tif (gantt.isTaskExists(id)){\r\n\t\t\t// FIXME: quick workaround to prevent re-filtering inside refresh on multiselect\r\n\t\t\tgantt._quickRefresh(function(){\r\n\t\t\t\tgantt.refreshTask(id);\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tdoSelection: function(e) {\r\n\t\tif (!this.isActive())\r\n\t\t\treturn false;\r\n\r\n\t\t// deny selection when click on 'expand' or 'collapse' icons\r\n\t\tif (gantt._is_icon_open_click(e))\r\n\t\t\treturn false;\r\n\r\n\t\tvar target_ev = gantt.locate(e);\r\n\t\tif (!target_ev)\r\n\t\t\treturn false;\r\n\r\n\t\tif (!gantt.callEvent(\"onBeforeMultiSelect\", [e]))\r\n\t\t\treturn false;\r\n\r\n\t\tvar selected = this.getSelected();\r\n\t\tvar defaultLast = this.getFirstSelected();\r\n\t\tvar isLast = false;\r\n\t\tvar last = this.getLastSelected();\r\n\t\tvar multiSelect = gantt.config.multiselect;\r\n\r\n\r\n\t\tvar singleSelection = (function () {\r\n\t\t\t// GS-719: If the multiselect extension is added we still need a way\r\n\t\t\t// to open the inline editors after clicking on the cells in the grid\r\n\t\t\tconst controller = gantt.ext.inlineEditors;\r\n\t\t\tif(controller && controller.getState){\r\n\t\t\t\tconst state = controller.getState();\r\n\t\t\t\tconst cell = controller.locateCell(e.target);\r\n\r\n\t\t\t\tif (gantt.config.inline_editors_multiselect_open && cell && controller.getEditorConfig(cell.columnName)) {\r\n\t\t\t\t\tif (controller.isVisible() && state.id == cell.id && state.columnName == cell.columnName) {\r\n\t\t\t\t\t\t// do nothing if editor is already active in this cell\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcontroller.startEdit(cell.id, cell.columnName);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.setFirstSelected(target_ev);\r\n\r\n\t\t\tif (!this.isSelected(target_ev)) {\r\n\t\t\t\tthis.select(target_ev, e);\r\n\t\t\t}\r\n\t\t\tselected = this.getSelected();\r\n\t\t\tfor (var i = 0; i < selected.length; i++) {\r\n\t\t\t\tif (selected[i] !== target_ev) {\r\n\t\t\t\t\tthis.unselect(selected[i], e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}).bind(this);\r\n\r\n\t\tvar blockSelection = (function(){\r\n\t\t\tif (!last)\r\n\t\t\t\tlast = target_ev;\r\n\t\t\telse if (target_ev) {\r\n\t\t\t\tvar first_indx = gantt.getGlobalTaskIndex(this.getFirstSelected());\r\n\t\t\t\tvar target_indx = gantt.getGlobalTaskIndex(target_ev);\r\n\t\t\t\tvar last_indx = gantt.getGlobalTaskIndex(last);\r\n\t\t\t\t// GS-1969: if the selected tasks are collapsed, need to remove them\r\n\t\t\t\tif(first_indx == -1 || last_indx == -1){\r\n\t\t\t\t\tfirst_indx = target_indx;\r\n\t\t\t\t\tthis.reset();\r\n\t\t\t\t}\r\n\t\t\t\t// clear prev selection\r\n\t\t\t\tvar tmp = last;\r\n\t\t\t\twhile (gantt.getGlobalTaskIndex(tmp) !== first_indx) {\r\n\t\t\t\t\tthis.unselect(tmp, e);\r\n\t\t\t\t\ttmp = (first_indx > last_indx) ? gantt.getNext(tmp) : gantt.getPrev(tmp);\r\n\t\t\t\t}\r\n\t\t\t\ttmp = target_ev;\r\n\t\t\t\twhile (gantt.getGlobalTaskIndex(tmp) !== first_indx) {\r\n\t\t\t\t\tif (this.select(tmp, e) && !isLast) {\r\n\t\t\t\t\t\tisLast = true;\r\n\t\t\t\t\t\tdefaultLast = tmp;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttmp = (first_indx > target_indx) ? gantt.getNext(tmp) : gantt.getPrev(tmp);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}).bind(this);\r\n\r\n\r\n\t\tif (multiSelect && (e.ctrlKey || e.metaKey)) {\r\n\t\t\tif (!this.isSelected(target_ev))\r\n\t\t\t\tthis.setFirstSelected(target_ev);\r\n\r\n\t\t\tif (target_ev) {\r\n\t\t\t\tthis.toggle(target_ev, e);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telse if (multiSelect && e.shiftKey) {\r\n\t\t\tif (!gantt.isTaskExists(this.getFirstSelected()) || this.getFirstSelected() === null) {\r\n\t\t\t\tthis.setFirstSelected(target_ev);\r\n\t\t\t}\r\n\r\n\t\t\tif (selected.length) { // select a group of tasks\r\n\t\t\t\tblockSelection();\r\n\t\t\t}\r\n\t\t\telse { // select a task when no task is selected and Shift is pressed\r\n\t\t\t\tsingleSelection();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\telse { // no key press or no multiple selection on the mouse click\r\n\t\t\tsingleSelection();\r\n\t\t}\r\n\r\n\r\n\t\tif (this.isSelected(target_ev)) {\r\n\t\t\tthis.setLastSelected(target_ev);\r\n\t\t} else if (defaultLast) {\r\n\t\t\tif (target_ev == last)\r\n\t\t\t\tthis.setLastSelected(e.shiftKey ? defaultLast : this.getDefaultSelected());\r\n\t\t} else {\r\n\t\t\tthis.setLastSelected(null);\r\n\t\t}\r\n\r\n\t\tif (!this.getSelected().length)\r\n\t\t\tthis.setLastSelected(null);\r\n\r\n\t\tif (!this.getLastSelected() || !this.isSelected(this.getFirstSelected()))\r\n\t\t\tthis.setFirstSelected(this.getLastSelected());\r\n\r\n\t\treturn true;\r\n\t}\r\n};\r\n\r\n(function(){\r\n\tvar old_selectTask = gantt.selectTask;\r\n\tgantt.selectTask = function(id) {\r\n\t\tid = replaceValidZeroId(id, this.config.root_id);\r\n\t\tif (!id)\r\n\t\t\treturn false;\r\n\t\tvar multiselect = gantt._multiselect;\r\n\t\tvar res = id;\r\n\t\tif (multiselect.isActive()) {\r\n\t\t\tif (multiselect.select(id, null)) {\r\n\t\t\t\tmultiselect.setLastSelected(id);\r\n\t\t\t}\r\n\t\t\tmultiselect.setFirstSelected(multiselect.getLastSelected());\r\n\t\t} else {\r\n\t\t\tres = old_selectTask.call(this, id);\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tvar old_unselectTask = gantt.unselectTask;\r\n\tgantt.unselectTask = function(id) {\r\n\t\tvar multiselect = gantt._multiselect;\r\n\t\tvar isActive = multiselect.isActive();\r\n\t\tid = id || multiselect.getLastSelected();\r\n\t\tif(id && isActive) {\r\n\t\t\tmultiselect.unselect(id, null);\r\n\t\t\tif (id == multiselect.getLastSelected())\r\n\t\t\t\tmultiselect.setLastSelected(null);\r\n\t\t\tgantt.refreshTask(id);\r\n\t\t\tmultiselect.setFirstSelected(multiselect.getLastSelected());\r\n\t\t}\r\n\t\tvar res = id;\r\n\t\tif (!isActive)\r\n\t\t\tres = old_unselectTask.call(this, id);\r\n\t\treturn res;\r\n\t};\r\n\r\n\tgantt.toggleTaskSelection = function(id) {\r\n\t\tvar multiselect = gantt._multiselect;\r\n\t\tif (id && multiselect.isActive()) {\r\n\t\t\tmultiselect.toggle(id);\r\n\t\t\tmultiselect.setFirstSelected(multiselect.getLastSelected());\r\n\t\t}\r\n\t};\r\n\tgantt.getSelectedTasks = function() {\r\n\t\tvar multiselect = gantt._multiselect;\r\n\t\tmultiselect.isActive();\r\n\t\treturn multiselect.getSelected();\r\n\t};\r\n\tgantt.eachSelectedTask = function(callback){\r\n\t\treturn this._multiselect.forSelected(callback);\r\n\t};\r\n\tgantt.isSelectedTask = function(id){\r\n\t\treturn this._multiselect.isSelected(id);\r\n\t};\r\n\tgantt.getLastSelectedTask = function(){\r\n\t\treturn this._multiselect.getLastSelected();\r\n\t};\r\n\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\t\tvar old_isSelected = gantt.$data.tasksStore.isSelected;\r\n\t\tgantt.$data.tasksStore.isSelected = function(id){\r\n\t\t\tif (gantt._multiselect.isActive()) {\r\n\t\t\t\treturn gantt._multiselect.isSelected(id);\r\n\t\t\t}\r\n\t\t\treturn old_isSelected.call(this, id);\r\n\t\t};\r\n\t});\r\n})();\r\n\r\ngantt.attachEvent(\"onTaskIdChange\", function (id, new_id) {\r\n\tvar multiselect = gantt._multiselect;\r\n\tif (!multiselect.isActive())\r\n\t\treturn true;\r\n\tif (gantt.isSelectedTask(id)) {\r\n\t\tmultiselect.unselect(id, null);\r\n\t\tmultiselect.select(new_id, null);\r\n\t}\r\n});\r\n\r\ngantt.attachEvent(\"onAfterTaskDelete\", function (id, item) {\r\n\tvar multiselect = gantt._multiselect;\r\n\tif (!multiselect.isActive())\r\n\t\treturn true;\r\n\r\n\tif (multiselect._selected[id]) {\r\n\t\t// GS-1057: don't unselect the task here because the task is already unselected \r\n\t\t// it was in the select.js file before it was deleted\r\n\t\t// multiselect.unselect(id, null);\r\n\t\tmultiselect._selected[id] = false;\r\n\t\tmultiselect.setLastSelected(multiselect.getDefaultSelected());\r\n\t}\r\n\r\n\tmultiselect.forSelected(function (task_id) {\r\n\t\tif (!gantt.isTaskExists(task_id))\r\n\t\t\tmultiselect.unselect(task_id, null);\r\n\t});\r\n});\r\n\r\ngantt.attachEvent(\"onBeforeTaskMultiSelect\", function(id, state, e){\r\n\tconst multiselect = gantt._multiselect;\r\n\tif (state && multiselect.isActive()) {\r\n\t\t//GS-1321: prevent unselecting task\r\n\t\tlet oldSelectedId = gantt.getSelectedId();\r\n\t\tlet oldSelectedTask = null;\r\n\t\tif (oldSelectedId) {\r\n\t\t\toldSelectedTask = gantt.getTask(oldSelectedId);\r\n\t\t}\r\n\t\tlet newSelectedTask = gantt.getTask(id);\r\n\t\tlet differentTreeLevel = false;\r\n\t\tif (oldSelectedTask && oldSelectedTask.$level != newSelectedTask.$level){\r\n\t\t\tdifferentTreeLevel = true;\r\n\t\t}\r\n\r\n\t\tif (gantt.config.multiselect_one_level && differentTreeLevel && !e.ctrlKey && !e.shiftKey) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (multiselect._one_level) {\r\n\t\t\treturn multiselect.isSameLevel(id);\r\n\t\t}\r\n\t}\r\n\treturn true;\r\n});\r\n\r\ngantt.attachEvent(\"onTaskClick\", function(id, e) {\r\n\tif (gantt._multiselect.doSelection(e))\r\n\t\tgantt.callEvent(\"onMultiSelect\", [e]);\r\n\treturn true;\r\n});\r\n\r\n};","/* eslint-disable */\r\n\r\nexport default function(gantt: any) {\r\n\r\n\tgantt.ext = gantt.ext || {};\r\n\r\n\tgantt.ext.export_api = gantt.ext.export_api || {\r\n\r\n\t\t_apiUrl: \"https://export.dhtmlx.com/gantt\",\r\n\r\n\t\t_preparePDFConfigRaw(config, type){\r\n\t\t\tlet previousDateRage:any = null;\r\n\t\t\tif (config.start && config.end){\r\n\t\t\t\tpreviousDateRage = {\r\n\t\t\t\t\tstart_date: gantt.config.start_date,\r\n\t\t\t\t\tend_date: gantt.config.end_date,\r\n\t\t\t\t};\r\n\t\t\t\tgantt.config.start_date = gantt.date.str_to_date(gantt.config.date_format)(config.start);\r\n\t\t\t\tgantt.config.end_date = gantt.date.str_to_date(gantt.config.date_format)(config.end);\r\n\t\t\t}\r\n\r\n\t\t\tconfig = gantt.mixin(config, {\r\n\t\t\t\tname: \"gantt.\" + type, data: gantt.ext.export_api._serializeHtml()\r\n\t\t\t});\r\n\r\n\t\t\tif (previousDateRage){\r\n\t\t\t\tgantt.config.start_date = previousDateRage.start_date;\r\n\t\t\t\tgantt.config.end_date = previousDateRage.end_date;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_prepareConfigPDF(config, type){\r\n\t\t\tconfig = gantt.mixin((config || {}), {\r\n\t\t\t\tname: \"gantt.\" + type,\r\n\t\t\t\tdata: gantt.ext.export_api._serializeAll(),\r\n\t\t\t\tconfig: gantt.config\r\n\t\t\t});\r\n\t\t\tgantt.ext.export_api._fixColumns(config.config.columns);\r\n\t\t\treturn config;\r\n\t\t},\r\n\r\n\t\t_pdfExportRouter(config, type){\r\n\t\t\tif (config && config.raw) {\r\n\t\t\t\tgantt.ext.export_api._preparePDFConfigRaw(config, type);\r\n\t\t\t} else {\r\n\t\t\t\tconfig = gantt.ext.export_api._prepareConfigPDF(config, type);\r\n\t\t\t}\r\n\t\t\tconfig.version = gantt.version;\r\n\t\t\tgantt.ext.export_api._sendToExport(config, type);\r\n\t\t},\r\n\r\n\t\texportToPDF(config) {\r\n\t\t\tgantt.ext.export_api._pdfExportRouter(config, \"pdf\");\r\n\t\t},\r\n\r\n\t\texportToPNG(config) {\r\n\t\t\tgantt.ext.export_api._pdfExportRouter(config, \"png\");\r\n\t\t},\r\n\r\n\r\n\t\texportToICal(config) {\r\n\t\t\tconfig = gantt.mixin((config || {}), {\r\n\t\t\t\tname: \"gantt.ical\",\r\n\t\t\t\tdata: gantt.ext.export_api._serializePlain().data,\r\n\t\t\t\tversion: gantt.version\r\n\t\t\t});\r\n\t\t\tgantt.ext.export_api._sendToExport(config, \"ical\");\r\n\t\t},\r\n\r\n\t\texportToExcel(config) {\r\n\t\t\tconfig = config || {};\r\n\r\n\t\t\tlet tasks;\r\n\t\t\tlet dates;\r\n\t\t\tlet state;\r\n\t\t\tlet scroll;\r\n\t\t\t// GS-2124, we need to get all task nodes to correctly obtain the colors\r\n\t\t\tconst smartRendering = gantt.config.smart_rendering;\r\n\t\t\tif (config.visual === \"base-colors\"){\r\n\t\t\t\tgantt.config.smart_rendering = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (config.start || config.end) {\r\n\t\t\t\tstate = gantt.getState();\r\n\t\t\t\tdates = [gantt.config.start_date, gantt.config.end_date];\r\n\t\t\t\tscroll = gantt.getScrollState();\r\n\t\t\t\tconst convert = gantt.date.str_to_date(gantt.config.date_format);\r\n\t\t\t\ttasks = gantt.eachTask;\r\n\r\n\t\t\t\tif (config.start){\r\n\t\t\t\t\tgantt.config.start_date = convert(config.start);\r\n\t\t\t\t}\r\n\t\t\t\tif (config.end){\r\n\t\t\t\t\tgantt.config.end_date = convert(config.end);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgantt.render();\r\n\t\t\t\tgantt.config.smart_rendering = smartRendering;\r\n\r\n\t\t\t\tgantt.eachTask = gantt.ext.export_api._eachTaskTimed(gantt.config.start_date, gantt.config.end_date);\r\n\t\t\t} else if (config.visual === \"base-colors\"){\r\n\t\t\t\tgantt.render();\r\n\t\t\t\tgantt.config.smart_rendering = smartRendering;\r\n\t\t\t}\r\n\r\n\t\t\tgantt._no_progress_colors = config.visual === \"base-colors\";\r\n\r\n\t\t\tconfig = gantt.mixin(config, {\r\n\t\t\t\tname: \"gantt.xlsx\",\r\n\t\t\t\ttitle: \"Tasks\",\r\n\t\t\t\tdata: gantt.ext.export_api._serializeTimeline(config).data,\r\n\t\t\t\tcolumns: gantt.ext.export_api._serializeGrid({ rawDates: true }),\r\n\t\t\t\tversion: gantt.version\r\n\t\t\t});\r\n\r\n\t\t\tif (config.visual){\r\n\t\t\t\tconfig.scales = gantt.ext.export_api._serializeScales(config);\r\n\t\t\t}\r\n\r\n\t\t\tgantt.ext.export_api._sendToExport(config, \"excel\");\r\n\r\n\t\t\tif (config.start || config.end) {\r\n\t\t\t\tgantt.config.start_date = state.min_date;\r\n\t\t\t\tgantt.config.end_date = state.max_date;\r\n\t\t\t\tgantt.eachTask = tasks;\r\n\r\n\t\t\t\tgantt.render();\r\n\t\t\t\tgantt.scrollTo(scroll.x, scroll.y);\r\n\r\n\t\t\t\tgantt.config.start_date = dates[0];\r\n\t\t\t\tgantt.config.end_date = dates[1];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\texportToJSON(config) {\r\n\t\t\tconfig = gantt.mixin((config || {}), {\r\n\t\t\t\tname: \"gantt.json\",\r\n\t\t\t\tdata: gantt.ext.export_api._serializeAll(),\r\n\t\t\t\tconfig: gantt.config,\r\n\t\t\t\tcolumns: gantt.ext.export_api._serializeGrid(),\r\n\t\t\t\tworktime: gantt.ext.export_api._getWorktimeSettings(),\r\n\t\t\t\tversion: gantt.version\r\n\t\t\t});\r\n\t\t\tgantt.ext.export_api._sendToExport(config, \"json\");\r\n\t\t},\r\n\r\n\r\n\t\timportFromExcel(config) {\r\n\t\t\ttry {\r\n\t\t\t\tconst formData = config.data;\r\n\t\t\t\tif (formData instanceof File) {\r\n\t\t\t\t\tconst data = new FormData();\r\n\t\t\t\t\tdata.append(\"file\", formData);\r\n\t\t\t\t\tconfig.data = data;\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {}\r\n\t\t\tgantt.ext.export_api._sendImportAjaxExcel(config);\r\n\t\t},\r\n\r\n\t\timportFromMSProject(config) {\r\n\t\t\tconst formData = config.data;\r\n\t\t\ttry {\r\n\t\t\t\tif (formData  instanceof File) {\r\n\t\t\t\t\tconst data = new FormData();\r\n\t\t\t\t\tdata.append(\"file\", formData);\r\n\t\t\t\t\tconfig.data = data;\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {}\r\n\t\t\tgantt.ext.export_api._sendImportAjaxMSP(config);\r\n\t\t},\r\n\r\n\t\timportFromPrimaveraP6(config) {\r\n\t\t\tconfig.type = \"primaveraP6-parse\";\r\n\t\t\treturn gantt.importFromMSProject(config);\r\n\t\t},\r\n\r\n\t\texportToMSProject(config) {\r\n\t\t\tconfig = config || {};\r\n\t\t\tconfig.skip_circular_links = config.skip_circular_links === undefined ? true : !!config.skip_circular_links;\r\n\r\n\t\t\tconst oldXmlFormat = gantt.templates.xml_format;\r\n\t\t\tconst oldFormatDate = gantt.templates.format_date;\r\n\t\t\tconst oldXmlDate = gantt.config.xml_date;\r\n\t\t\tconst oldDateFormat = gantt.config.date_format;\r\n\r\n\t\t\tconst exportServiceDateFormat = \"%d-%m-%Y %H:%i:%s\";\r\n\r\n\t\t\tgantt.config.xml_date = exportServiceDateFormat;\r\n\t\t\tgantt.config.date_format = exportServiceDateFormat;\r\n\t\t\tgantt.templates.xml_format = gantt.date.date_to_str(exportServiceDateFormat);\r\n\t\t\tgantt.templates.format_date = gantt.date.date_to_str(exportServiceDateFormat);\r\n\t\t\tconst data = gantt.ext.export_api._serializeAll();\r\n\r\n\t\t\tgantt.ext.export_api._customProjectProperties(data, config);\r\n\r\n\t\t\tgantt.ext.export_api._customTaskProperties(data, config);\r\n\r\n\t\t\tif (config.skip_circular_links) {\r\n\t\t\t\tgantt.ext.export_api._clearRecLinks(data);\r\n\t\t\t}\r\n\r\n\t\t\tconfig = gantt.ext.export_api._exportConfig(data, config);\r\n\r\n\t\t\tgantt.ext.export_api._sendToExport(config, config.type || \"msproject\");\r\n\t\t\tgantt.config.xml_date = oldXmlDate;\r\n\t\t\tgantt.config.date_format = oldDateFormat;\r\n\t\t\tgantt.templates.xml_format = oldXmlFormat;\r\n\t\t\tgantt.templates.format_date = oldFormatDate;\r\n\r\n\t\t\tgantt.config.$custom_data = null;\r\n\t\t\tgantt.config.custom = null;\r\n\t\t},\r\n\r\n\t\texportToPrimaveraP6(config) {\r\n\t\t\tconfig = config || {};\r\n\t\t\tconfig.type = \"primaveraP6\";\r\n\t\t\treturn gantt.exportToMSProject(config);\r\n\t\t},\r\n\r\n\t\t_fixColumns(columns) {\r\n\t\t\tfor (let i = 0; i < columns.length; i++) {\r\n\t\t\t\tcolumns[i].label = columns[i].label || gantt.locale.labels[\"column_\" + columns[i].name];\r\n\t\t\t\tif (typeof columns[i].width === \"string\") {\r\n\t\t\t\t\tcolumns[i].width = columns[i].width * 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_xdr(url, pack, cb) {\r\n\t\t\tgantt.ajax.post(url, pack, cb);\r\n\t\t},\r\n\r\n\t\t_markColumns(base) {\r\n\t\t\tconst columns = base.config.columns;\r\n\t\t\tif (columns){\r\n\t\t\t\tfor (let i = 0; i < columns.length; i++) {\r\n\t\t\t\t\tif (columns[i].template){\r\n\t\t\t\t\t\tcolumns[i].$template = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\t_sendImportAjaxExcel(config) {\r\n\t\t\tconst url = config.server || gantt.ext.export_api._apiUrl;\r\n\t\t\tconst store = config.store || 0;\r\n\t\t\tconst formData = config.data;\r\n\t\t\tconst callback = config.callback;\r\n\r\n\t\t\tformData.append(\"type\", \"excel-parse\");\r\n\t\t\tformData.append(\"data\", JSON.stringify({\r\n\t\t\t\tsheet: config.sheet || 0\r\n\t\t\t}));\r\n\r\n\t\t\tif (store){\r\n\t\t\t\tformData.append(\"store\", store);\r\n\t\t\t}\r\n\r\n\t\t\tconst xhr = new XMLHttpRequest();\r\n\t\t\txhr.onreadystatechange = function(e) {\r\n\t\t\t\tif (xhr.readyState === 4 && xhr.status === 0) {// network error\r\n\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\tcallback(null);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\txhr.onload = function() {\r\n\t\t\t\tconst fail = xhr.status > 400;\r\n\t\t\t\tlet info = null;\r\n\r\n\t\t\t\tif (!fail) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tinfo = JSON.parse(xhr.responseText);\r\n\t\t\t\t\t} catch (e) { }\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (callback) {\r\n\t\t\t\t\tcallback(info);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\txhr.open(\"POST\", url, true);\r\n\t\t\txhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n\t\t\txhr.send(formData);\r\n\t\t},\r\n\r\n\r\n\t\t_ajaxToExport(data, type, callback) {\r\n\t\t\tdelete data.callback;\r\n\r\n\t\t\tconst url = data.server || gantt.ext.export_api._apiUrl;\r\n\t\t\tconst pack = \"type=\" + type + \"&store=1&data=\" + encodeURIComponent(JSON.stringify(data));\r\n\r\n\t\t\tconst cb = function(loader) {\r\n\t\t\t\tconst xdoc = loader.xmlDoc || loader;\r\n\t\t\t\tconst fail = xdoc.status > 400;\r\n\t\t\t\tlet info = null;\r\n\r\n\t\t\t\tif (!fail) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tinfo = JSON.parse(xdoc.responseText);\r\n\t\t\t\t\t} catch (e) { }\r\n\t\t\t\t}\r\n\t\t\t\tcallback(info);\r\n\t\t\t};\r\n\r\n\t\t\tgantt.ext.export_api._xdr(url, pack, cb);\r\n\t\t},\r\n\t\t_serializableGanttConfig(config) {\r\n\t\t\tconst result = gantt.mixin({}, config);\r\n\r\n\t\t\tif (result.columns) {\r\n\t\t\t\tresult.columns = result.columns.map(function(col) {\r\n\t\t\t\t\tconst copy = gantt.mixin({}, col);\r\n\t\t\t\t\tdelete copy.editor;\r\n\t\t\t\t\treturn copy;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tdelete result.editor_types;\r\n\t\t\treturn result;\r\n\t\t},\r\n\r\n\t\t_sendToExport(data, type) {\r\n\t\t\tconst convert = gantt.date.date_to_str(gantt.config.date_format || gantt.config.xml_date);\r\n\t\t\tif(!data.skin){\r\n\t\t\t\tdata.skin = gantt.skin;\r\n\t\t\t}\r\n\t\t\tif (data.config) {\r\n\t\t\t\tdata.config = gantt.copy(gantt.ext.export_api._serializableGanttConfig(data.config));\r\n\t\t\t\tgantt.ext.export_api._markColumns(data, type);\r\n\r\n\t\t\t\tif (data.config.start_date && data.config.end_date) {\r\n\t\t\t\t\tif (data.config.start_date instanceof Date) {\r\n\t\t\t\t\t\tdata.config.start_date = convert(data.config.start_date);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (data.config.end_date instanceof Date) {\r\n\t\t\t\t\t\tdata.config.end_date = convert(data.config.end_date);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (data.callback) {\r\n\t\t\t\treturn gantt.ext.export_api._ajaxToExport(data, type, data.callback);\r\n\t\t\t}\r\n\r\n\t\t\tconst form = gantt.ext.export_api._createHiddenForm();\r\n\t\t\tform.firstChild.action = data.server || gantt.ext.export_api._apiUrl;\r\n\t\t\tform.firstChild.childNodes[0].value = JSON.stringify(data);\r\n\t\t\tform.firstChild.childNodes[1].value = type;\r\n\t\t\tform.firstChild.submit();\r\n\t\t},\r\n\r\n\t\t_createHiddenForm() {\r\n\t\t\tif (!gantt.ext.export_api._hidden_export_form) {\r\n\t\t\t\tconst t = gantt.ext.export_api._hidden_export_form = document.createElement(\"div\");\r\n\t\t\t\tt.style.display = \"none\";\r\n\t\t\t\tt.innerHTML = \"<form method='POST' target='_blank'><textarea name='data' style='width:0px; height:0px;' readonly='true'></textarea><input type='hidden' name='type' value=''></form>\";\r\n\t\t\t\tdocument.body.appendChild(t);\r\n\t\t\t}\r\n\t\t\treturn gantt.ext.export_api._hidden_export_form;\r\n\t\t},\r\n\r\n\r\n\t\t_copyObjectBase(obj) {\r\n\t\t\tconst copy = {\r\n\t\t\t\tstart_date: undefined,\r\n\t\t\t\tend_date: undefined,\r\n\t\t\t\tconstraint_date: undefined,\r\n\t\t\t\tdeadline: undefined\r\n\t\t\t};\r\n\t\t\tfor (const key in obj) {\r\n\t\t\t\tif (key.charAt(0) === \"$\" || key === \"baselines\"){\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tcopy[key] = obj[key];\r\n\t\t\t}\r\n\t\t\tconst formatDate = gantt.templates.xml_format || gantt.templates.format_date;\r\n\r\n\t\t\tcopy.start_date = formatDate(copy.start_date);\r\n\t\t\tif (copy.end_date){\r\n\t\t\t\tcopy.end_date = formatDate(copy.end_date);\r\n\t\t\t}\r\n\t\t\tif (copy.constraint_date){\r\n\t\t\t\tcopy.constraint_date = formatDate(copy.constraint_date);\r\n\t\t\t}\r\n\t\t\tif (copy.deadline){\r\n\t\t\t\tcopy.deadline = formatDate(copy.deadline);\r\n\t\t\t}\r\n\r\n\t\t\treturn copy;\r\n\t\t},\r\n\r\n\r\n\t\t_color_box: null,\r\n\t\t_color_hash: {},\r\n\r\n\t\t_getStyles(css) {\r\n\t\t\tif (!gantt.ext.export_api._color_box) {\r\n\t\t\t\tgantt.ext.export_api._color_box = document.createElement(\"DIV\");\r\n\t\t\t\tgantt.ext.export_api._color_box.style.cssText = \"position:absolute; display:none;\";\r\n\t\t\t\tdocument.body.appendChild(gantt.ext.export_api._color_box);\r\n\t\t\t}\r\n\t\t\tif (gantt.ext.export_api._color_hash[css]){\r\n\t\t\t\treturn gantt.ext.export_api._color_hash[css];\r\n\t\t\t}\r\n\r\n\t\t\tgantt.ext.export_api._color_box.className = css;\r\n\t\t\tconst color = gantt.ext.export_api._getColor(gantt.ext.export_api._color_box, \"color\");\r\n\t\t\tconst backgroundColor = gantt.ext.export_api._getColor(gantt.ext.export_api._color_box, \"backgroundColor\");\r\n\t\t\treturn (gantt.ext.export_api._color_hash[css] = color + \";\" + backgroundColor);\r\n\t\t},\r\n\r\n\r\n\t\t_getMinutesWorktimeSettings(parsedRanges) {\r\n\t\t\tconst minutes:any = [];\r\n\t\t\tparsedRanges.forEach(function(range) {\r\n\t\t\t\tminutes.push(range.startMinute);\r\n\t\t\t\tminutes.push(range.endMinute);\r\n\t\t\t});\r\n\t\t\treturn minutes;\r\n\t\t},\r\n\r\n\t\t_getWorktimeSettings() {\r\n\r\n\t\t\tconst defaultWorkTimes = {\r\n\t\t\t\thours: [0, 24],\r\n\t\t\t\tminutes: null,\r\n\t\t\t\tdates: { 0: true, 1: true, 2: true, 3: true, 4: true, 5: true, 6: true }\r\n\t\t\t};\r\n\r\n\t\t\tlet time;\r\n\t\t\tif (!gantt.config.work_time) {\r\n\t\t\t\ttime = defaultWorkTimes;\r\n\t\t\t} else {\r\n\t\t\t\tconst wTime = gantt._working_time_helper;\r\n\t\t\t\tif (wTime && wTime.get_calendar) {\r\n\t\t\t\t\ttime = wTime.get_calendar();\r\n\t\t\t\t} else if (wTime) {\r\n\t\t\t\t\ttime = {\r\n\t\t\t\t\t\thours: wTime.hours,\r\n\t\t\t\t\t\tminutes: null,\r\n\t\t\t\t\t\tdates: wTime.dates\r\n\t\t\t\t\t};\r\n\t\t\t\t} else if (gantt.config.worktimes && gantt.config.worktimes.global) {\r\n\t\t\t\t\tconst settings = gantt.config.worktimes.global;\r\n\r\n\t\t\t\t\tif (settings.parsed) {\r\n\t\t\t\t\t\tconst minutes = gantt.ext.export_api._getMinutesWorktimeSettings(settings.parsed.hours);\r\n\t\t\t\t\t\ttime = {\r\n\t\t\t\t\t\t\thours: null,\r\n\t\t\t\t\t\t\tminutes,\r\n\t\t\t\t\t\t\tdates: {}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tfor (const i in settings.parsed.dates) {\r\n\t\t\t\t\t\t\tif (Array.isArray(settings.parsed.dates[i])) {\r\n\t\t\t\t\t\t\t\ttime.dates[i] = gantt.ext.export_api._getMinutesWorktimeSettings(settings.parsed.dates[i]);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttime.dates[i] = settings.parsed.dates[i];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttime = {\r\n\t\t\t\t\t\t\thours: settings.hours,\r\n\t\t\t\t\t\t\tminutes: null,\r\n\t\t\t\t\t\t\tdates: settings.dates\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttime = defaultWorkTimes;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn time;\r\n\t\t},\r\n\r\n\r\n\t\t_eachTaskTimed(start, end) {\r\n\t\t\treturn function(code, parent, master) {\r\n\t\t\t\tparent = parent || gantt.config.root_id;\r\n\t\t\t\tmaster = master || gantt;\r\n\r\n\t\t\t\tconst branch = gantt.getChildren(parent);\r\n\t\t\t\tif (branch){\r\n\t\t\t\t\tfor (let i = 0; i < branch.length; i++) {\r\n\t\t\t\t\t\tconst item = gantt._pull[branch[i]];\r\n\t\t\t\t\t\tif ((!start || item.end_date > start) && (!end || item.start_date < end)){\r\n\t\t\t\t\t\t\tcode.call(master, item);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (gantt.hasChild(item.id)){\r\n\t\t\t\t\t\t\tgantt.eachTask(code, item.id, master);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\r\n\r\n\t\t// patch broken json serialization in gantt 2.1\r\n\t\t_originalCopyObject: gantt.json._copyObject,\r\n\r\n\r\n\t\t_copyObjectPlain(obj) {\r\n\t\t\tconst text = gantt.templates.task_text(obj.start_date, obj.end_date, obj);\r\n\r\n\t\t\tconst copy = gantt.ext.export_api._copyObjectBase(obj);\r\n\t\t\tcopy.text = text || copy.text;\r\n\r\n\t\t\treturn copy;\r\n\t\t},\r\n\r\n\t\t_getColor(node, style) {\r\n\t\t\tconst value = node.currentStyle ? node.currentStyle[style] : getComputedStyle(node, null)[style];\r\n\t\t\tconst rgb = value.replace(/\\s/g, \"\").match(/^rgba?\\((\\d+),(\\d+),(\\d+)/i);\r\n\t\t\treturn ((rgb && rgb.length === 4) ?\r\n\t\t\t\t(\"0\" + parseInt(rgb[1], 10).toString(16)).slice(-2) +\r\n\t\t\t\t(\"0\" + parseInt(rgb[2], 10).toString(16)).slice(-2) +\r\n\t\t\t\t(\"0\" + parseInt(rgb[3], 10).toString(16)).slice(-2) : value).replace(\"#\", \"\");\r\n\t\t},\r\n\r\n\r\n\t\t// excel serialization\r\n\t\t_copyObjectTable(obj) {\r\n\t\t\t// Excel interprets UTC time as local time in every timezone, send local time instead of actual UTC time.\r\n\t\t\t// https://github.com/SheetJS/js-xlsx/issues/126#issuecomment-60531614\r\n\t\t\tconst toISOstring = gantt.date.date_to_str(\"%Y-%m-%dT%H:%i:%s.000Z\");\r\n\r\n\t\t\tconst copy = gantt.ext.export_api._copyObjectColumns(obj, gantt.ext.export_api._copyObjectPlain(obj));\r\n\t\t\tif (copy.start_date){\r\n\t\t\t\tcopy.start_date = toISOstring(obj.start_date);\r\n\t\t\t}\r\n\t\t\tif (copy.end_date){\r\n\t\t\t\tcopy.end_date = toISOstring(obj.end_date);\r\n\t\t\t}\r\n\r\n\t\t\t// private gantt._day_index_by_date was replaced by public gantt.columnIndexByDate in gantt 5.0\r\n\t\t\tconst getDayIndex = gantt._day_index_by_date ? gantt._day_index_by_date : gantt.columnIndexByDate;\r\n\r\n\t\t\tcopy.$start = getDayIndex.call(gantt, obj.start_date);\r\n\t\t\tcopy.$end = getDayIndex.call(gantt, obj.end_date);\r\n\r\n\t\t\t// GS-2100. Correct bar position considering hidden cells\r\n\t\t\tlet hiddenCells = 0;\r\n\t\t\tconst scaleCellsWidth = gantt.getScale().width;\r\n\t\t\tif (scaleCellsWidth.indexOf(0) > -1) {\r\n\t\t\t\tlet i = 0;\r\n\t\t\t\tfor (i; i < copy.$start; i++) {\r\n\t\t\t\t\tif (!scaleCellsWidth[i]) {\r\n\t\t\t\t\t\thiddenCells++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcopy.$start -= hiddenCells;\r\n\r\n\t\t\t\tfor (i; i < copy.$end; i++) {\r\n\t\t\t\t\tif (!scaleCellsWidth[i]) {\r\n\t\t\t\t\t\thiddenCells++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcopy.$end -= hiddenCells;\r\n\t\t\t}\r\n\r\n\t\t\tcopy.$level = obj.$level;\r\n\t\t\tcopy.$type = obj.$rendered_type;\r\n\r\n\t\t\tconst tmps = gantt.templates;\r\n\t\t\tcopy.$text = tmps.task_text(obj.start, obj.end_date, obj);\r\n\t\t\tcopy.$left = tmps.leftside_text ? tmps.leftside_text(obj.start, obj.end_date, obj) : \"\";\r\n\t\t\tcopy.$right = tmps.rightside_text ? tmps.rightside_text(obj.start, obj.end_date, obj) : \"\";\r\n\r\n\t\t\treturn copy;\r\n\t\t},\r\n\r\n\t\t_copyObjectColors(obj) {\r\n\t\t\tconst copy = gantt.ext.export_api._copyObjectTable(obj);\r\n\r\n\t\t\tconst node = gantt.getTaskNode(obj.id);\r\n\t\t\tif (node && node.firstChild) {\r\n\t\t\t\tlet color = gantt.ext.export_api._getColor((gantt._no_progress_colors ? node : node.firstChild), \"backgroundColor\");\r\n\t\t\t\tif (color === \"363636\"){\r\n\t\t\t\t\tcolor = gantt.ext.export_api._getColor(node, \"backgroundColor\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcopy.$color = color;\r\n\t\t\t} else if (obj.color){\r\n\t\t\t\tcopy.$color = obj.color;\r\n\t\t\t}\r\n\r\n\t\t\treturn copy;\r\n\t\t},\r\n\r\n\t\t_copyObjectColumns(obj, copy) {\r\n\t\t\tfor (let i = 0; i < gantt.config.columns.length; i++) {\r\n\t\t\t\tconst ct = gantt.config.columns[i].template;\r\n\t\t\t\tif (ct) {\r\n\t\t\t\t\tlet val = ct(obj);\r\n\t\t\t\t\tif (val instanceof Date){\r\n\t\t\t\t\t\tval = gantt.templates.date_grid(val, obj);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcopy[\"_\" + i] = val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn copy;\r\n\t\t},\r\n\r\n\t\t_copyObjectAll(obj) {\r\n\t\t\tconst copy = gantt.ext.export_api._copyObjectBase(obj);\r\n\r\n\t\t\tconst templates = [\r\n\t\t\t\t\"leftside_text\",\r\n\t\t\t\t\"rightside_text\",\r\n\t\t\t\t\"task_text\",\r\n\t\t\t\t\"progress_text\",\r\n\t\t\t\t\"task_class\"\r\n\t\t\t];\r\n\r\n\t\t\t// serialize all text templates\r\n\t\t\tfor (let i = 0; i < templates.length; i++) {\r\n\t\t\t\tconst template = gantt.templates[templates[i]];\r\n\t\t\t\tif (template){\r\n\t\t\t\t\tcopy[\"$\" + i] = template(obj.start_date, obj.end_date, obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgantt.ext.export_api._copyObjectColumns(obj, copy);\r\n\t\t\tcopy.open = obj.$open;\r\n\t\t\treturn copy;\r\n\t\t},\r\n\r\n\r\n\t\t_serializeHtml() {\r\n\t\t\tconst smartScales = gantt.config.smart_scales;\r\n\t\t\tconst smartRendering = gantt.config.smart_rendering;\r\n\t\t\tif (smartScales || smartRendering) {\r\n\t\t\t\tgantt.config.smart_rendering = false;\r\n\t\t\t\tgantt.config.smart_scales = false;\r\n\t\t\t\tgantt.render();\r\n\t\t\t}\r\n\r\n\t\t\tconst html = gantt.$container.parentNode.innerHTML;\r\n\r\n\t\t\tif (smartScales || smartRendering) {\r\n\t\t\t\tgantt.config.smart_scales = smartScales;\r\n\t\t\t\tgantt.config.smart_rendering = smartRendering;\r\n\t\t\t\tgantt.render();\r\n\t\t\t}\r\n\r\n\t\t\treturn html;\r\n\t\t},\r\n\r\n\t\t_serializeAll() {\r\n\t\t\tgantt.json._copyObject = gantt.ext.export_api._copyObjectAll;\r\n\t\t\tconst data = gantt.ext.export_api._exportSerialize();\r\n\t\t\tgantt.json._copyObject = gantt.ext.export_api._originalCopyObject;\r\n\t\t\treturn data;\r\n\t\t},\r\n\r\n\t\t_serializePlain() {\r\n\t\t\tconst oldXmlFormat = gantt.templates.xml_format;\r\n\t\t\tconst oldFormatDate = gantt.templates.format_date;\r\n\t\t\tgantt.templates.xml_format = gantt.date.date_to_str(\"%Y%m%dT%H%i%s\", true);\r\n\t\t\tgantt.templates.format_date = gantt.date.date_to_str(\"%Y%m%dT%H%i%s\", true);\r\n\t\t\tgantt.json._copyObject = gantt.ext.export_api._copyObjectPlain;\r\n\r\n\t\t\tconst data = gantt.ext.export_api._exportSerialize();\r\n\r\n\t\t\tgantt.templates.xml_format = oldXmlFormat;\r\n\t\t\tgantt.templates.format_date = oldFormatDate;\r\n\t\t\tgantt.json._copyObject = gantt.ext.export_api._originalCopyObject;\r\n\r\n\t\t\tdelete data.links;\r\n\t\t\treturn data;\r\n\t\t},\r\n\r\n\t\t_getRaw() {\r\n\t\t\t// support Gantt < 5.0\r\n\t\t\tif (gantt._scale_helpers) {\r\n\t\t\t\tconst scales = gantt._get_scales();\r\n\t\t\t\tconst\tminWidth = gantt.config.min_column_width;\r\n\t\t\t\tconst\tautosizeMinWidth = gantt._get_resize_options().x ? Math.max(gantt.config.autosize_min_width, 0) : gantt.config.$task.offsetWidth;\r\n\t\t\t\tconst\theight = gantt.config.config.scale_height - 1;\r\n\t\t\t\treturn gantt._scale_helpers.prepareConfigs(scales, minWidth, autosizeMinWidth, height);\r\n\t\t\t} else { // Gantt >= 5.0\r\n\t\t\t\tconst timeline = gantt.$ui.getView(\"timeline\");\r\n\t\t\t\tif (timeline) {\r\n\t\t\t\t\tlet availWidth = timeline.$config.width;\r\n\t\t\t\t\tif (gantt.config.autosize === \"x\" || gantt.config.autosize === \"xy\") {\r\n\t\t\t\t\t\tavailWidth = Math.max(gantt.config.autosize_min_width, 0);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst state = gantt.getState();\r\n\t\t\t\t\tconst\tscales = timeline._getScales();\r\n\t\t\t\t\tconst\tminWidth = gantt.config.min_column_width;\r\n\t\t\t\t\tconst\theight = gantt.config.scale_height - 1;\r\n\t\t\t\t\tconst\trtl = gantt.config.rtl;\r\n\t\t\t\t\treturn timeline.$scaleHelper.prepareConfigs(scales, minWidth, availWidth, height, state.min_date, state.max_date, rtl);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_serializeTimeline(config) {\r\n\t\t\tgantt.json._copyObject = config.visual ? gantt.ext.export_api._copyObjectColors : gantt.ext.export_api._copyObjectTable;\r\n\t\t\tconst data = gantt.ext.export_api._exportSerialize();\r\n\t\t\tgantt.json._copyObject = gantt.ext.export_api._originalCopyObject;\r\n\r\n\t\t\tdelete data.links;\r\n\r\n\t\t\tif (config.cellColors) {\r\n\t\t\t\tconst css = gantt.templates.timeline_cell_class || gantt.templates.task_cell_class;\r\n\t\t\t\tif (css) {\r\n\t\t\t\t\tconst raw = gantt.ext.export_api._getRaw();\r\n\t\t\t\t\tlet steps = raw[0].trace_x;\r\n\t\t\t\t\tfor (let i = 1; i < raw.length; i++){\r\n\t\t\t\t\t\tif (raw[i].trace_x.length > steps.length){\r\n\t\t\t\t\t\t\tsteps = raw[i].trace_x;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (let i = 0; i < data.data.length; i++) {\r\n\t\t\t\t\t\tdata.data[i].styles = [];\r\n\t\t\t\t\t\tconst task = gantt.getTask(data.data[i].id);\r\n\t\t\t\t\t\tfor (let j = 0; j < steps.length; j++) {\r\n\t\t\t\t\t\t\tconst date = steps[j];\r\n\t\t\t\t\t\t\tconst cellCss = css(task, date);\r\n\t\t\t\t\t\t\tif (cellCss){\r\n\t\t\t\t\t\t\t\tdata.data[i].styles.push({ index: j, styles: gantt.ext.export_api._getStyles(cellCss) });\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn data;\r\n\t\t},\r\n\r\n\t\t_serializeScales(config) {\r\n\t\t\tconst scales:any = [];\r\n\t\t\tconst raw = gantt.ext.export_api._getRaw();\r\n\r\n\t\t\tlet min = Infinity;\r\n\t\t\tlet max = 0;\r\n\t\t\tfor (let i = 0; i < raw.length; i++) {\r\n\t\t\t\tmin = Math.min(min, raw[i].col_width);\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i = 0; i < raw.length; i++) {\r\n\t\t\t\tlet start = 0;\r\n\t\t\t\tlet end = 0;\r\n\t\t\t\tconst row:any = [];\r\n\r\n\t\t\t\tscales.push(row);\r\n\t\t\t\tconst step = raw[i];\r\n\t\t\t\tmax = Math.max(max, step.trace_x.length);\r\n\t\t\t\tconst template = step.format || step.template || (step.date ? gantt.date.date_to_str(step.date) : gantt.config.date_scale);\r\n\r\n\t\t\t\tfor (let j = 0; j < step.trace_x.length; j++) {\r\n\t\t\t\t\tconst date = step.trace_x[j];\r\n\t\t\t\t\tend = start + Math.round(step.width[j] / min);\r\n\r\n\t\t\t\t\tconst scaleCell = { text: template(date), start, end, styles: \"\" };\r\n\r\n\t\t\t\t\tif (config.cellColors) {\r\n\t\t\t\t\t\tconst css = step.css || gantt.templates.scaleCell_class;\r\n\t\t\t\t\t\tif (css) {\r\n\t\t\t\t\t\t\tconst scaleCss = css(date);\r\n\t\t\t\t\t\t\tif (scaleCss){\r\n\t\t\t\t\t\t\t\tscaleCell.styles = gantt.ext.export_api._getStyles(scaleCss);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\trow.push(scaleCell);\r\n\t\t\t\t\tstart = end;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn { width: max, height: scales.length, data: scales };\r\n\t\t},\r\n\r\n\t\t_serializeGrid(config) {\r\n\t\t\tgantt.exportMode = true;\r\n\r\n\t\t\tconst columns:any = [];\r\n\t\t\tconst cols = gantt.config.columns;\r\n\r\n\t\t\tlet ccount = 0;\r\n\t\t\tfor (let i = 0; i < cols.length; i++) {\r\n\t\t\t\tif (cols[i].name === \"add\" || cols[i].name === \"buttons\") {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcolumns[ccount] = {\r\n\t\t\t\t\tid: ((cols[i].template) ? (\"_\" + i) : cols[i].name),\r\n\t\t\t\t\theader: cols[i].label || gantt.locale.labels[\"column_\" + cols[i].name],\r\n\t\t\t\t\twidth: (cols[i].width ? Math.floor(cols[i].width / 4) : \"\"),\r\n\t\t\t\t\ttree: cols[i].tree || false\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (cols[i].name === \"duration\"){\r\n\t\t\t\t\tcolumns[ccount].type = \"number\";\r\n\t\t\t\t}\r\n\t\t\t\tif (cols[i].name === \"start_date\" || cols[i].name === \"end_date\") {\r\n\t\t\t\t\tcolumns[ccount].type = \"date\";\r\n\t\t\t\t\tif (config && config.rawDates){\r\n\t\t\t\t\t\tcolumns[ccount].id = cols[i].name;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tccount++;\r\n\t\t\t}\r\n\r\n\t\t\tgantt.exportMode = false;\r\n\t\t\treturn columns;\r\n\t\t},\r\n\r\n\t\t_exportSerialize() {\r\n\t\t\tgantt.exportMode = true;\r\n\r\n\t\t\tconst xmlFormat = gantt.templates.xml_format;\r\n\t\t\tconst formatDate = gantt.templates.format_date;\r\n\r\n\t\t\t// use configuration date format for serialization so date could be parsed on the export\r\n\t\t\t// required when custom format date function is defined\r\n\t\t\tgantt.templates.xml_format =\r\n\t\t\t\tgantt.templates.format_date =\r\n\t\t\t\tgantt.date.date_to_str(gantt.config.date_format || gantt.config.xml_date);\r\n\r\n\t\t\tconst data = gantt.serialize();\r\n\r\n\t\t\tgantt.templates.xml_format = xmlFormat;\r\n\t\t\tgantt.templates.format_date = formatDate;\r\n\t\t\tgantt.exportMode = false;\r\n\t\t\treturn data;\r\n\t\t},\r\n\r\n\r\n\t\t_setLevel(data) {\r\n\t\t\tfor (let i = 0; i < data.length; i++) {\r\n\t\t\t\t// tslint:disable-next-line triple-equals\r\n\t\t\t\tif (data[i].parent == 0) {\r\n\t\t\t\t\tdata[i]._lvl = 1;\r\n\t\t\t\t}\r\n\t\t\t\tfor (let j = i + 1; j < data.length; j++) {\r\n\t\t\t\t\t// tslint:disable-next-line triple-equals\r\n\t\t\t\t\tif (data[i].id == data[j].parent) {\r\n\t\t\t\t\t\tdata[j]._lvl = data[i]._lvl + 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_clearLevel(data) {\r\n\t\t\tfor (let i = 0; i < data.length; i++) {\r\n\t\t\t\tdelete data[i]._lvl;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_clearRecLinks(data) {\r\n\t\t\tgantt.ext.export_api._setLevel(data.data);\r\n\t\t\tconst tasks = {};\r\n\t\t\tfor (let i = 0; i < data.data.length; i++) {\r\n\t\t\t\ttasks[data.data[i].id] = data.data[i];\r\n\t\t\t}\r\n\r\n\t\t\tconst links = {};\r\n\r\n\t\t\tfor (let i = 0; i < data.links.length; i++) {\r\n\t\t\t\tconst link = data.links[i];\r\n\t\t\t\tif (gantt.isTaskExists(link.source) && gantt.isTaskExists(link.target) &&\r\n\t\t\t\t\ttasks[link.source] && tasks[link.target]) {\r\n\t\t\t\t\tlinks[link.id] = link;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (const j in links) {\r\n\t\t\t\tgantt.ext.export_api._makeLinksSameLevel(links[j], tasks);\r\n\t\t\t}\r\n\r\n\t\t\tconst skippedLinks = {};\r\n\t\t\tfor (const j in tasks) {\r\n\t\t\t\tgantt.ext.export_api._clearCircDependencies(tasks[j], links, tasks, {}, skippedLinks, null);\r\n\t\t\t}\r\n\r\n\t\t\tif (Object.keys(links)) {\r\n\t\t\t\tgantt.ext.export_api._clearLinksSameLevel(links, tasks);\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i = 0; i < data.links.length; i++) {\r\n\t\t\t\tif (!links[data.links[i].id]) {\r\n\t\t\t\t\tdata.links.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgantt.ext.export_api._clearLevel(data.data);\r\n\t\t},\r\n\r\n\t\t_clearCircDependencies(task, links, tasks, usedTasks, skippedLinks, prevLink) {\r\n\t\t\tconst sources = task.$_source;\r\n\t\t\tif (!sources) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (usedTasks[task.id]) {\r\n\t\t\t\tgantt.ext.export_api._onCircDependencyFind(prevLink, links, usedTasks, skippedLinks);\r\n\t\t\t}\r\n\r\n\t\t\tusedTasks[task.id] = true;\r\n\r\n\t\t\tconst targets = {};\r\n\r\n\t\t\tfor (let i = 0; i < sources.length; i++) {\r\n\t\t\t\tif (skippedLinks[sources[i]]) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tconst curLink = links[sources[i]];\r\n\t\t\t\tconst targetTask = tasks[curLink._target];\r\n\t\t\t\tif (targets[targetTask.id]) { // two link from one task to another\r\n\t\t\t\t\tgantt.ext.export_api._onCircDependencyFind(curLink, links, usedTasks, skippedLinks);\r\n\t\t\t\t}\r\n\t\t\t\ttargets[targetTask.id] = true;\r\n\t\t\t\tgantt.ext.export_api._clearCircDependencies(targetTask, links, tasks, usedTasks, skippedLinks, curLink);\r\n\t\t\t}\r\n\t\t\tusedTasks[task.id] = false;\r\n\t\t},\r\n\r\n\t\t_onCircDependencyFind(link, links, usedTasks, skippedLinks) {\r\n\t\t\tif (link) {\r\n\t\t\t\tif (gantt.callEvent(\"onExportCircularDependency\", [link.id, link])) {\r\n\t\t\t\t\tdelete links[link.id];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdelete usedTasks[link._source];\r\n\t\t\t\tdelete usedTasks[link._target];\r\n\t\t\t\tskippedLinks[link.id] = true;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_makeLinksSameLevel(link, tasks) {\r\n\t\t\tlet task;\r\n\t\t\tlet targetLvl;\r\n\t\t\tconst linkT = {\r\n\t\t\t\ttarget: tasks[link.target],\r\n\t\t\t\tsource: tasks[link.source]\r\n\t\t\t};\r\n\t\t\t// tslint:disable-next-line triple-equals\r\n\t\t\tif (linkT.target._lvl != linkT.source._lvl) {\r\n\t\t\t\tif (linkT.target._lvl < linkT.source._lvl) {\r\n\t\t\t\t\ttask = \"source\";\r\n\t\t\t\t\ttargetLvl = linkT.target._lvl;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask = \"target\";\r\n\t\t\t\t\ttargetLvl = linkT.source._lvl;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdo {\r\n\t\t\t\t\tconst parent = tasks[linkT[task].parent];\r\n\t\t\t\t\tif (!parent) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlinkT[task] = parent;\r\n\t\t\t\t} while (linkT[task]._lvl < targetLvl);\r\n\r\n\t\t\t\tlet sourceParent = tasks[linkT.source.parent];\r\n\t\t\t\tlet\ttargetParent = tasks[linkT.target.parent];\r\n\t\t\t\t// tslint:disable-next-line triple-equals\r\n\t\t\t\twhile (sourceParent && targetParent && sourceParent.id != targetParent.id) {\r\n\t\t\t\t\tlinkT.source = sourceParent;\r\n\t\t\t\t\tlinkT.target = targetParent;\r\n\t\t\t\t\tsourceParent = tasks[linkT.source.parent];\r\n\t\t\t\t\ttargetParent = tasks[linkT.target.parent];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlink._target = linkT.target.id;\r\n\t\t\tlink._source = linkT.source.id;\r\n\r\n\t\t\tif (!linkT.target.$_target){\r\n\t\t\t\tlinkT.target.$_target = [];\r\n\t\t\t}\r\n\t\t\tlinkT.target.$_target.push(link.id);\r\n\r\n\t\t\tif (!linkT.source.$_source){\r\n\t\t\t\tlinkT.source.$_source = [];\r\n\t\t\t}\r\n\t\t\tlinkT.source.$_source.push(link.id);\r\n\t\t},\r\n\r\n\t\t_clearLinksSameLevel(links, tasks) {\r\n\t\t\tfor (const link in links) {\r\n\t\t\t\tdelete links[link]._target;\r\n\t\t\t\tdelete links[link]._source;\r\n\t\t\t}\r\n\r\n\t\t\tfor (const task in tasks) {\r\n\t\t\t\tdelete tasks[task].$_source;\r\n\t\t\t\tdelete tasks[task].$_target;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\t_customProjectProperties(data, config) {\r\n\t\t\tif (config && config.project) {\r\n\t\t\t\tfor (const i in config.project) {\r\n\t\t\t\t\tif (!gantt.config.$custom_data){\r\n\t\t\t\t\t\tgantt.config.$custom_data = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt.config.$custom_data[i] = typeof config.project[i] === \"function\" ? config.project[i](gantt.config) : config.project[i];\r\n\t\t\t\t}\r\n\t\t\t\tdelete config.project;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_customTaskProperties(data, config) {\r\n\t\t\tif (config && config.tasks) {\r\n\t\t\t\tdata.data.forEach(function(el) {\r\n\t\t\t\t\tfor (const i in config.tasks) {\r\n\t\t\t\t\t\tif (!el.$custom_data){\r\n\t\t\t\t\t\t\tel.$custom_data = {};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tel.$custom_data[i] = typeof config.tasks[i] === \"function\" ? config.tasks[i](el, gantt.config) : config.tasks[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tdelete config.tasks;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_exportConfig(data, config) {\r\n\t\t\tconst projectName = config.name || \"gantt.xml\";\r\n\t\t\tdelete config.name;\r\n\r\n\t\t\tgantt.config.custom = config;\r\n\r\n\t\t\tconst time = gantt.ext.export_api._getWorktimeSettings();\r\n\r\n\t\t\tconst projectDates = gantt.getSubtaskDates();\r\n\t\t\tif (projectDates.start_date && projectDates.end_date) {\r\n\t\t\t\tconst formatDate = gantt.templates.format_date || gantt.templates.xml_format;\r\n\t\t\t\tgantt.config.start_end = {\r\n\t\t\t\t\tstart_date: formatDate(projectDates.start_date),\r\n\t\t\t\t\tend_date: formatDate(projectDates.end_date)\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tconst manual = config.auto_scheduling === undefined ? false : !!config.auto_scheduling;\r\n\r\n\t\t\tconst res = {\r\n\t\t\t\tcallback: config.callback || null,\r\n\t\t\t\tconfig: gantt.config,\r\n\t\t\t\tdata,\r\n\t\t\t\tmanual,\r\n\t\t\t\tname: projectName,\r\n\t\t\t\tworktime: time\r\n\t\t\t};\r\n\t\t\tfor (const i in config) {\r\n\t\t\t\tres[i] = config[i];\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t},\r\n\r\n\r\n\t\t_sendImportAjaxMSP(config) {\r\n\t\t\tconst url = config.server || gantt.ext.export_api._apiUrl;\r\n\t\t\tconst store = config.store || 0;\r\n\t\t\tconst formData = config.data;\r\n\t\t\tconst callback = config.callback;\r\n\r\n\t\t\tconst settings = {\r\n\t\t\t\tdurationUnit: config.durationUnit || undefined,\r\n\t\t\t\tprojectProperties: config.projectProperties || undefined,\r\n\t\t\t\ttaskProperties: config.taskProperties || undefined\r\n\t\t\t};\r\n\r\n\t\t\tformData.append(\"type\", config.type || \"msproject-parse\");\r\n\t\t\tformData.append(\"data\", JSON.stringify(settings));\r\n\r\n\t\t\tif (store){\r\n\t\t\t\tformData.append(\"store\", store);\r\n\t\t\t}\r\n\r\n\t\t\tconst xhr = new XMLHttpRequest();\r\n\t\t\txhr.onreadystatechange = function(e) {\r\n\t\t\t\tif (xhr.readyState === 4 && xhr.status === 0) {// network error\r\n\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\tcallback(null);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\txhr.onload = function(){\r\n\t\t\t\tconst fail = xhr.status > 400;\r\n\t\t\t\tlet info = null;\r\n\r\n\t\t\t\tif (!fail) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tinfo = JSON.parse(xhr.responseText);\r\n\t\t\t\t\t} catch (e) { }\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (callback) {\r\n\t\t\t\t\tcallback(info);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\txhr.open(\"POST\", url, true);\r\n\t\t\txhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n\t\t\txhr.send(formData);\r\n\t\t}\r\n\r\n\t};\r\n\r\n\r\n\tgantt.exportToPDF = gantt.ext.export_api.exportToPDF;\r\n\tgantt.exportToPNG = gantt.ext.export_api.exportToPNG;\r\n\tgantt.exportToICal = gantt.ext.export_api.exportToICal;\r\n\tgantt.exportToExcel = gantt.ext.export_api.exportToExcel;\r\n\tgantt.exportToJSON = gantt.ext.export_api.exportToJSON;\r\n\tgantt.importFromExcel = gantt.ext.export_api.importFromExcel;\r\n\tgantt.importFromMSProject = gantt.ext.export_api.importFromMSProject;\r\n\tgantt.exportToMSProject = gantt.ext.export_api.exportToMSProject;\r\n\tgantt.importFromPrimaveraP6 = gantt.ext.export_api.importFromPrimaveraP6;\r\n\tgantt.exportToPrimaveraP6 = gantt.ext.export_api.exportToPrimaveraP6;\r\n\r\n\r\n\treturn gantt.ext.export_api;\r\n}\r\n","export default {\r\n\tKEY_CODES: {\r\n\t\tUP: 38,\r\n\t\tDOWN: 40,\r\n\t\tLEFT: 37,\r\n\t\tRIGHT: 39,\r\n\t\tSPACE: 32,\r\n\t\tENTER: 13,\r\n\t\tDELETE: 46,\r\n\t\tESC: 27,\r\n\t\tTAB: 9\r\n\t}\r\n};","export default class ExtensionsManager{\r\n\tprivate _extensions:{[key:string]: GanttPlugin };\r\n\r\n\tconstructor(config: {[key:string]: GanttPlugin }){\r\n\t\tthis._extensions = {};\r\n\t\tfor(const i in config){\r\n\t\t\tthis._extensions[i] = config[i];\r\n\t\t}\r\n\t}\r\n\r\n\taddExtension = (name: string, ext: GanttPlugin) => {\r\n\t\tthis._extensions[name] = ext;\r\n\t};\r\n\r\n\tgetExtension = (name: string): GanttPlugin => {\r\n\t\treturn this._extensions[name];\r\n\t};\r\n}","import global from \"./global\";\r\n\r\n/* eslint-disable no-restricted-globals */\r\nvar isWindowAwailable = typeof window !== \"undefined\";\r\n\r\n/* eslint-enable no-restricted-globals */\r\n\r\nexport default {\r\n\tisIE: isWindowAwailable && (navigator.userAgent.indexOf(\"MSIE\") >= 0 || navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisOpera: isWindowAwailable && (navigator.userAgent.indexOf(\"Opera\") >= 0 || navigator.userAgent.indexOf(\"OPR\") >= 0),\r\n\tisChrome: isWindowAwailable && (navigator.userAgent.indexOf(\"Chrome\") >= 0),\r\n\tisSafari: isWindowAwailable && (navigator.userAgent.indexOf(\"Safari\") >= 0 || navigator.userAgent.indexOf(\"Konqueror\") >= 0),\r\n\tisFF: isWindowAwailable && (navigator.userAgent.indexOf(\"Firefox\") >= 0),\r\n\tisIPad: isWindowAwailable && (navigator.userAgent.search(/iPad/gi) >= 0),\r\n\tisEdge: isWindowAwailable && (navigator.userAgent.indexOf(\"Edge\")!=-1),\r\n\tisNode: (!isWindowAwailable || typeof navigator == \"undefined\" || (typeof PRODUCTION !== \"undefined\" && PRODUCTION === \"test\")),\r\n\tisSalesforce: isWindowAwailable && (!!global[\"Sfdc\"] || !!global[\"$A\"] || global[\"Aura\"])\r\n};\r\n","export default function serialize(data: object | string) {\r\n\tif (typeof data === \"string\" || typeof data === \"number\") {\r\n\t\treturn data;\r\n\t}\r\n\r\n\tlet result = \"\";\r\n\r\n\tfor (const key in data) {\r\n\t\tlet serialized = \"\";\r\n\t\tif (data.hasOwnProperty(key)) {\r\n\t\t\tif (typeof data[key] === \"string\") {\r\n\t\t\t\tserialized = encodeURIComponent(data[key]);\r\n\t\t\t} else if (typeof data[key] === \"number\") {\r\n\t\t\t\tserialized = String(data[key]);\r\n\t\t\t} else {\r\n\t\t\t\tserialized = encodeURIComponent(JSON.stringify(data[key]));\r\n\t\t\t}\r\n\t\t\tserialized = key + \"=\" + serialized;\r\n\r\n\t\t\tif (result.length) {\r\n\t\t\t\tserialized = \"&\" + serialized;\r\n\t\t\t}\r\n\t\t\tresult += serialized;\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n","import env from \"../../utils/env\";\r\nimport global from \"../../utils/global\";\r\nimport serialize from \"./serialize\";\r\n\r\nfunction createConfig(method, args) {\r\n\tvar result = {\r\n\t\tmethod: method\r\n\t};\r\n\r\n\tif (args.length === 0) {\r\n\t\tthrow new Error(\"Arguments list of query is wrong.\");\r\n\t}\r\n\tif (args.length === 1) {\r\n\t\tif (typeof args[0] === \"string\") {\r\n\t\t\tresult.url = args[0];\r\n\t\t\tresult.async = true;\r\n\t\t} else {\r\n\t\t\tresult.url = args[0].url;\r\n\t\t\tresult.async = (args[0].async || true);\r\n\t\t\tresult.callback = args[0].callback;\r\n\t\t\tresult.headers = args[0].headers;\r\n\t\t}\r\n\t\tif (method === \"POST\" || \"PUT\") {\r\n\t\t\tif (args[0].data) {\r\n\t\t\t\tif (typeof args[0].data !== \"string\") {\r\n\t\t\t\t\tresult.data = serialize(args[0].data);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.data = args[0].data;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tresult.data = \"\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tresult.url = args[0];\r\n\tswitch(method) {\r\n\t\tcase \"GET\":\r\n\t\tcase \"DELETE\":\r\n\t\t\tresult.callback = args[1];\r\n\t\t\tresult.headers = args[2];\r\n\t\tbreak;\r\n\t\tcase \"POST\":\r\n\t\tcase \"PUT\":\r\n\t\t\tif (args[1]) {\r\n\t\t\t\tif (typeof args[1] !== \"string\") {\r\n\t\t\t\t\tresult.data = serialize(args[1]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.data = args[1];\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tresult.data = \"\";\r\n\t\t\t}\r\n\t\t\tresult.callback = args[2];\r\n\t\t\tresult.headers = args[3];\r\n\t\tbreak;\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nexport default function(gantt) {\r\n\treturn {\r\n\r\n\t\t// if false - dhxr param will added to prevent caching on client side (default),\r\n\t\t// if true - do not add extra params\r\n\t\tcache: true,\r\n\r\n\t\t// default method for load/loadStruct, post/get allowed\r\n\t\t// get - since 4.1.1, this should fix 412 error for macos safari\r\n\t\tmethod: \"get\",\r\n\r\n\t\tparse: function(data) {\r\n\t\t\tif (typeof data !== \"string\") return data;\r\n\r\n\t\t\tvar obj;\r\n\t\t\tdata = data.replace(/^[\\s]+/,\"\");\r\n\t\t\tif (typeof DOMParser !== \"undefined\" && !env.isIE) { // ff,ie9\r\n\t\t\t\tobj = (new DOMParser()).parseFromString(data, \"text/xml\");\r\n\t\t\t} else if (typeof global.ActiveXObject !== \"undefined\") {\r\n\t\t\t\tobj = new global.ActiveXObject(\"Microsoft.XMLDOM\");\r\n\t\t\t\tobj.async = \"false\";\r\n\t\t\t\tobj.loadXML(data);\r\n\t\t\t}\r\n\t\t\treturn obj;\r\n\t\t},\r\n\t\txmltop: function(tagname, xhr, obj) {\r\n\t\t\tif (typeof xhr.status == \"undefined\" || xhr.status < 400) {\r\n\t\t\t\tvar xml = (!xhr.responseXML) ? this.parse(xhr.responseText || xhr) : (xhr.responseXML || xhr);\r\n\t\t\t\tif (xml && xml.documentElement !== null && !xml.getElementsByTagName(\"parsererror\").length) {\r\n\t\t\t\t\treturn xml.getElementsByTagName(tagname)[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (obj !== -1) gantt.callEvent(\"onLoadXMLError\",[\"Incorrect XML\", arguments[1], obj]);\r\n\t\t\treturn document.createElement(\"DIV\");\r\n\t\t},\r\n\t\txpath: function(xpathExp, docObj) {\r\n\t\t\tif (!docObj.nodeName) docObj = docObj.responseXML || docObj;\r\n\t\t\tif (env.isIE) {\r\n\t\t\t\treturn docObj.selectNodes(xpathExp)||[];\r\n\t\t\t} else {\r\n\t\t\t\tvar rows = [];\r\n\t\t\t\tvar first;\r\n\t\t\t\tvar col = (docObj.ownerDocument||docObj).evaluate(xpathExp, docObj, null, XPathResult.ANY_TYPE, null);\r\n\r\n\t\t\t\twhile (true){\r\n\t\t\t\t\tfirst = col.iterateNext();\r\n\t\t\t\t\tif(first){\r\n\t\t\t\t\t\trows.push(first);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn rows;\r\n\t\t\t}\r\n\t\t},\r\n\t\tquery: function(config) {\r\n\t\t\treturn this._call(\r\n\t\t\t\t(config.method || \"GET\"),\r\n\t\t\t\tconfig.url,\r\n\t\t\t\tconfig.data || \"\",\r\n\t\t\t\t(config.async || true),\r\n\t\t\t\tconfig.callback,\r\n\t\t\t\tconfig.headers\r\n\t\t\t);\r\n\t\t},\r\n\t\tget: function(url, onLoad, headers) {\r\n\t\t\tvar config = createConfig(\"GET\", arguments);\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\tgetSync: function(url, headers) {\r\n\t\t\tvar config = createConfig(\"GET\", arguments);\r\n\t\t\tconfig.async = false;\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\tput: function(url, postData, onLoad, headers) {\r\n\t\t\tvar config = createConfig(\"PUT\", arguments);\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\tdel: function(url, onLoad, headers) {\r\n\t\t\t/**\r\n\t\t\t * https://tools.ietf.org/html/rfc7231#section-4.3.5\r\n\t\t\t * A payload within a DELETE request message has no defined semantics;\r\n\t\t\t * sending a payload body on a DELETE request might cause some existing\r\n\t\t\t * implementations to reject the request.\r\n\t\t\t */\r\n\t\t\tvar config = createConfig(\"DELETE\", arguments);\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\tpost: function(url, postData, onLoad, headers) {\r\n\t\t\tif (arguments.length == 1) {\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t} else if (arguments.length == 2 && typeof(postData) == \"function\") {\r\n\t\t\t\tonLoad = postData;\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t}\r\n\t\t\tvar config = createConfig(\"POST\", arguments);\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\tpostSync: function(url, postData, headers) {\r\n\t\t\tpostData = (postData === null ? \"\" : String(postData));\r\n\r\n\t\t\tvar config = createConfig(\"POST\", arguments);\r\n\t\t\tconfig.async = false;\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\t_call: function(method, url, postData, async, onLoad, headers) {\r\n\t\t\treturn new gantt.Promise(function(resolve, reject) {\r\n\t\t\t\tvar t = (typeof XMLHttpRequest !== undefined ? new XMLHttpRequest() : new global.ActiveXObject(\"Microsoft.XMLHTTP\"));\r\n\t\t\t\tvar isQt = (navigator.userAgent.match(/AppleWebKit/) !== null && navigator.userAgent.match(/Qt/) !== null && navigator.userAgent.match(/Safari/) !== null);\r\n\r\n\t\t\t\tif (!!async) {\r\n\t\t\t\t\tt.onreadystatechange = function() {\r\n\t\t\t\t\t\tif ((t.readyState == 4) || (isQt && t.readyState == 3)) { // what for long response and status 404?\r\n\t\t\t\t\t\t\tconst errorStatus = t.status < 200 || t.status > 299;\r\n\t\t\t\t\t\t\tif (errorStatus || t.responseText === \"\")\r\n\t\t\t\t\t\t\t\tif (!gantt.callEvent(\"onAjaxError\", [t])) return;\r\n\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\tif (typeof(onLoad) == \"function\") {\r\n\t\t\t\t\t\t\t\t\tonLoad.apply(global, [{xmlDoc:t, filePath:url}]); // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tresolve(t);\r\n\t\t\t\t\t\t\t\tif (typeof(onLoad) == \"function\") {\r\n\t\t\t\t\t\t\t\t\tonLoad = null;\r\n\t\t\t\t\t\t\t\t\tt = null;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar noCache = !this || !this.cache;\r\n\t\t\t\tif (method == \"GET\" && noCache) {\r\n\t\t\t\t\turl += (url.indexOf(\"?\")>=0?\"&\":\"?\")+\"dhxr\"+new Date().getTime()+\"=1\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tt.open(method, url, async);\r\n\r\n\t\t\t\tif (headers){\r\n\t\t\t\t\tfor (var key in headers)\r\n\t\t\t\t\t\tt.setRequestHeader(key, headers[key]);\r\n\t\t\t\t} else if (method.toUpperCase() == \"POST\" || method == \"PUT\" || method == \"DELETE\") {\r\n\t\t\t\t\tt.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\t\t\t\t} else if (method == \"GET\") {\r\n\t\t\t\t\tpostData = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tt.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n\r\n\t\t\t\tt.send(postData);\r\n\r\n\t\t\t\tif (!async) return {xmlDoc:t, filePath:url}; // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\t\t\t});\r\n\t\t},\r\n\t\turlSeparator: function(str){\r\n\t\t\tif (str.indexOf(\"?\") != -1)\r\n\t\t\t\treturn \"&\";\r\n\t\t\telse\r\n\t\t\t\treturn \"?\";\r\n\t\t}\r\n\t};\r\n};\r\n","const dateToStr = (format: string, utc: boolean, gantt) => {\r\n\tformat = format.replace(/%[a-zA-Z]/g, (a) => {\r\n\t\tswitch (a) {\r\n\t\t\tcase \"%d\":\r\n\t\t\t\treturn `\"+to_fixed(date.get${utc?\"UTC\":\"\"}Date())+\"`;\r\n\t\t\tcase \"%m\":\r\n\t\t\t\treturn `\"+to_fixed((date.get${utc?\"UTC\":\"\"}Month()+1))+\"`;\r\n\t\t\tcase \"%j\":\r\n\t\t\t\treturn `\"+date.get${utc?\"UTC\":\"\"}Date()+\"`;\r\n\t\t\tcase \"%n\":\r\n\t\t\t\treturn `\"+(date.get${utc?\"UTC\":\"\"}Month()+1)+\"`;\r\n\t\t\tcase \"%y\":\r\n\t\t\t\treturn `\"+to_fixed(date.get${utc?\"UTC\":\"\"}FullYear()%100)+\"`;\r\n\t\t\tcase \"%Y\":\r\n\t\t\t\treturn `\"+date.get${utc?\"UTC\":\"\"}FullYear()+\"`;\r\n\t\t\tcase \"%D\":\r\n\t\t\t\treturn `\"+locale.date.day_short[date.get${utc?\"UTC\":\"\"}Day()]+\"`;\r\n\t\t\tcase \"%l\":\r\n\t\t\t\treturn `\"+locale.date.day_full[date.get${utc?\"UTC\":\"\"}Day()]+\"`;\r\n\t\t\tcase \"%M\":\r\n\t\t\t\treturn `\"+locale.date.month_short[date.get${utc?\"UTC\":\"\"}Month()]+\"`;\r\n\t\t\tcase \"%F\":\r\n\t\t\t\treturn `\"+locale.date.month_full[date.get${utc?\"UTC\":\"\"}Month()]+\"`;\r\n\t\t\tcase \"%h\":\r\n\t\t\t\treturn `\"+to_fixed((date.get${utc?\"UTC\":\"\"}Hours()+11)%12+1)+\"`;\r\n\t\t\tcase \"%g\":\r\n\t\t\t\treturn `\"+((date.get${utc?\"UTC\":\"\"}Hours()+11)%12+1)+\"`;\r\n\t\t\tcase \"%G\":\r\n\t\t\t\treturn `\"+date.get${utc?\"UTC\":\"\"}Hours()+\"`;\r\n\t\t\tcase \"%H\":\r\n\t\t\t\treturn `\"+to_fixed(date.get${utc?\"UTC\":\"\"}Hours())+\"`;\r\n\t\t\tcase \"%i\":\r\n\t\t\t\treturn `\"+to_fixed(date.get${utc?\"UTC\":\"\"}Minutes())+\"`;\r\n\t\t\tcase \"%a\":\r\n\t\t\t\treturn `\"+(date.get${utc?\"UTC\":\"\"}Hours()>11?\"pm\":\"am\")+\"`;\r\n\t\t\tcase \"%A\":\r\n\t\t\t\treturn `\"+(date.get${utc?\"UTC\":\"\"}Hours()>11?\"PM\":\"AM\")+\"`;\r\n\t\t\tcase \"%s\":\r\n\t\t\t\treturn `\"+to_fixed(date.get${utc?\"UTC\":\"\"}Seconds())+\"`;\r\n\t\t\tcase \"%W\":\r\n\t\t\t\treturn `\"+to_fixed(getISOWeek(date))+\"`;\r\n\t\t\tcase \"%w\":\r\n\t\t\t\treturn `\"+to_fixed(getWeek(date))+\"`;\r\n\t\t\tdefault:\r\n\t\t\t\treturn a;\r\n\t\t}\r\n\t});\r\n\r\n\t// tslint:disable-next-line: function-constructor\r\n\tconst dateToStrFn = new Function(\"date\", \"to_fixed\", \"locale\", \"getISOWeek\", \"getWeek\", `return \"${format}\";`);\r\n\r\n\treturn (date: Date) => {\r\n\t\treturn dateToStrFn(date, gantt.date.to_fixed, gantt.locale, gantt.date.getISOWeek, gantt.date.getWeek);\r\n\t};\r\n};\r\n\r\n\r\nconst strToDate = (format: string, utc: boolean, gantt:any) => {\r\n\tlet splt = \"var temp=date.match(/[a-zA-Z]+|[0-9]+/g);\";\r\n\tconst mask = format.match(/%[a-zA-Z]/g);\r\n\tfor (let i = 0; i < mask.length; i++) {\r\n\t\tswitch (mask[i]) {\r\n\t\t\tcase \"%j\":\r\n\t\t\tcase \"%d\":\r\n\t\t\t\tsplt += `set[2]=temp[${i}]||1;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%n\":\r\n\t\t\tcase \"%m\":\r\n\t\t\t\tsplt += `set[1]=(temp[${i}]||1)-1;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%y\":\r\n\t\t\t\tsplt += `set[0]=temp[${i}]*1+(temp[${i}]>50?1900:2000);`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%g\":\r\n\t\t\tcase \"%G\":\r\n\t\t\tcase \"%h\":\r\n\t\t\tcase \"%H\":\r\n\t\t\t\tsplt += `set[3]=temp[${i}]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%i\":\r\n\t\t\t\tsplt += `set[4]=temp[${i}]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%Y\":\r\n\t\t\t\tsplt += `set[0]=temp[${i}]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%a\":\r\n\t\t\tcase \"%A\":\r\n\t\t\t\tsplt += `set[3]=set[3]%12+((temp[${i}]||'').toLowerCase()=='am'?0:12);`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%s\":\r\n\t\t\t\tsplt += `set[5]=temp[${i}]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%M\":\r\n\t\t\t\tsplt += `set[1]=locale.date.month_short_hash[temp[${i}]]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%F\":\r\n\t\t\t\tsplt += `set[1]=locale.date.month_full_hash[temp[${i}]]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tlet code = \"set[0],set[1],set[2],set[3],set[4],set[5]\";\r\n\tif (utc) { code = ` Date.UTC(${code})`; }\r\n\t// tslint:disable-next-line: function-constructor\r\n\tconst strToDateFn = new Function(\"date\", \"locale\", `var set=[0,0,1,0,0,0]; ${splt} return new Date(${code});`);\r\n\r\n\treturn (dateString) => {\r\n\t\treturn strToDateFn(dateString, gantt.locale);\r\n\t};\r\n};\r\n\r\nconst fastVersion = {\r\n\tdate_to_str: dateToStr,\r\n\tstr_to_date: strToDate\r\n};\r\n\r\nexport default fastVersion;","const dateToStr = (format: string, utc: boolean, gantt) => {\r\n\treturn (date) => {\r\n\t\treturn format.replace(/%[a-zA-Z]/g, (a) => {\r\n\t\t\tswitch (a) {\r\n\t\t\t\tcase \"%d\": return utc ? gantt.date.to_fixed(date.getUTCDate()) : gantt.date.to_fixed(date.getDate());\r\n\t\t\t\tcase \"%m\": return utc ? gantt.date.to_fixed((date.getUTCMonth() + 1)) : gantt.date.to_fixed((date.getMonth() + 1));\r\n\t\t\t\tcase \"%j\": return utc ? date.getUTCDate() : date.getDate();\r\n\t\t\t\tcase \"%n\": return utc ? (date.getUTCMonth() + 1) : (date.getMonth() + 1);\r\n\t\t\t\tcase \"%y\": return utc ? gantt.date.to_fixed(date.getUTCFullYear() % 100) : gantt.date.to_fixed(date.getFullYear() % 100);\r\n\t\t\t\tcase \"%Y\": return utc ? date.getUTCFullYear() : date.getFullYear();\r\n\t\t\t\tcase \"%D\": return utc ? gantt.locale.date.day_short[date.getUTCDay()] : gantt.locale.date.day_short[date.getDay()];\r\n\t\t\t\tcase \"%l\": return utc ? gantt.locale.date.day_full[date.getUTCDay()] : gantt.locale.date.day_full[date.getDay()];\r\n\t\t\t\tcase \"%M\": return utc ? gantt.locale.date.month_short[date.getUTCMonth()] : gantt.locale.date.month_short[date.getMonth()];\r\n\t\t\t\tcase \"%F\": return utc ? gantt.locale.date.month_full[date.getUTCMonth()] : gantt.locale.date.month_full[date.getMonth()];\r\n\t\t\t\tcase \"%h\": return utc ? gantt.date.to_fixed((date.getUTCHours() + 11) % 12 + 1) : gantt.date.to_fixed((date.getHours() + 11) % 12 + 1);\r\n\t\t\t\tcase \"%g\": return utc ? ((date.getUTCHours() + 11) % 12 + 1) : ((date.getHours() + 11) % 12 + 1);\r\n\t\t\t\tcase \"%G\": return utc ? date.getUTCHours() : date.getHours();\r\n\t\t\t\tcase \"%H\": return utc ? gantt.date.to_fixed(date.getUTCHours()) : gantt.date.to_fixed(date.getHours());\r\n\t\t\t\tcase \"%i\": return utc ? gantt.date.to_fixed(date.getUTCMinutes()) : gantt.date.to_fixed(date.getMinutes());\r\n\t\t\t\tcase \"%a\": return utc ? (date.getUTCHours() > 11 ? \"pm\" : \"am\") : (date.getHours() > 11 ? \"pm\" : \"am\");\r\n\t\t\t\tcase \"%A\": return utc ? (date.getUTCHours() > 11 ? \"PM\" : \"AM\") : (date.getHours() > 11 ? \"PM\" : \"AM\");\r\n\t\t\t\tcase \"%s\": return utc ? gantt.date.to_fixed(date.getUTCSeconds()) : gantt.date.to_fixed(date.getSeconds());\r\n\t\t\t\tcase \"%W\": return utc ? gantt.date.to_fixed(gantt.date.getUTCISOWeek(date)) : gantt.date.to_fixed(gantt.date.getISOWeek(date));\r\n\t\t\t\tdefault: return a;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n};\r\nconst strToDate = (format: string, utc: boolean, gantt:any) => {\r\n\treturn (date: string) => {\r\n\t\tconst set: Array<string|number> = [0, 0, 1, 0, 0, 0];\r\n\t\tconst temp = date.match(/[a-zA-Z]+|[0-9]+/g);\r\n\t\tconst mask = format.match(/%[a-zA-Z]/g);\r\n\r\n\t\tfor (let i = 0; i < mask.length; i++) {\r\n\t\t\tswitch (mask[i]) {\r\n\t\t\t\tcase \"%j\":\r\n\t\t\t\tcase \"%d\":\r\n\t\t\t\t\tset[2] = temp[i] as unknown as number || 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%n\":\r\n\t\t\t\tcase \"%m\":\r\n\t\t\t\t\tset[1] = (temp[i] as unknown as number || 1) - 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%y\":\r\n\t\t\t\t\tset[0] = temp[i] as unknown as number * 1 + ((temp[i] as unknown as number) > 50 ? 1900 : 2000);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%g\":\r\n\t\t\t\tcase \"%G\":\r\n\t\t\t\tcase \"%h\":\r\n\t\t\t\tcase \"%H\":\r\n\t\t\t\t\tset[3] = temp[i] as unknown as number || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%i\":\r\n\t\t\t\t\tset[4] = temp[i] as unknown as number || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\tset[0] = temp[i] as unknown as number || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%a\":\r\n\t\t\t\tcase \"%A\":\r\n\t\t\t\t\tset[3] = set[3] as number % 12 + ((temp[i] || \"\").toLowerCase() === \"am\" ? 0 : 12);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%s\":\r\n\t\t\t\t\tset[5] = temp[i] || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%M\":\r\n\t\t\t\t\tset[1] = gantt.locale.date.month_short_hash[temp[i]] || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%F\":\r\n\t\t\t\t\tset[1] = gantt.locale.date.month_full_hash[temp[i]] || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (utc) {\r\n\t\t\treturn new Date(Date.UTC(\r\n\t\t\t\tset[0] as number,\r\n\t\t\t\tset[1] as number,\r\n\t\t\t\tset[2] as number,\r\n\t\t\t\tset[3] as number,\r\n\t\t\t\tset[4] as number,\r\n\t\t\t\tset[5] as number\r\n\t\t\t));\r\n\t\t}\r\n\t\treturn new Date(\r\n\t\t\tset[0] as number,\r\n\t\t\tset[1] as number,\r\n\t\t\tset[2] as number,\r\n\t\t\tset[3] as number,\r\n\t\t\tset[4] as number,\r\n\t\t\tset[5] as number\r\n\t\t);\r\n\t};\r\n\r\n};\r\n\r\n\r\nconst cspVersion = {\r\n\tdate_to_str: dateToStr,\r\n\tstr_to_date: strToDate\r\n};\r\n\r\nexport default cspVersion;","/*\r\n %d - the day as a number with a leading zero ( 01 to 31 );\r\n %j - the day as a number without a leading zero ( 1 to 31 );\r\n %D - the day as an abbreviation ( Sun to Sat );\r\n %l - the day as a full name ( Sunday to Saturday );\r\n %W - the ISO-8601 week number of the year. Weeks start on Monday; 1)\r\n %m - the month as a number without a leading zero ( 1 to 12 );\r\n %n - the month as a number with a leading zero ( 01 to 12);\r\n %M - the month as an abbreviation ( Jan to Dec );\r\n %F - the month as a full name ( January to December );\r\n %y - the year as a two-digit number ( 00 to 99 );\r\n %Y - the year as a four-digit number ( 1900–9999 );\r\n %h - the hour based on the 12-hour clock ( 00 to 11 );\r\n %H - the hour based on the 24-hour clock ( 00 to 23 );\r\n %i - the minute as a number with a leading zero ( 00 to 59 );\r\n %s - the second as a number without a leading zero ( 00 to 59 ); 2)\r\n %a - displays am (for times from midnight until noon) and pm (for times from noon until midnight);\r\n %A - displays AM (for times from midnight until noon) and PM (for times from noon until midnight).\r\n*/\r\n\r\nimport fastVersion from \"./date_parsers/fast_version\";\r\nimport cspCompliantVersion from \"./date_parsers/csp_compliant_version\";\r\n\r\nexport default function(gantt) {\r\n\tvar canUseCsp = null;\r\n\tfunction cspAutoCheck() {\r\n\t\ttry {\r\n\t\t\tnew Function(\"canUseCsp = false;\");\r\n\t\t} catch(e) {\r\n\t\t\tcanUseCsp = true;\r\n\t\t}\r\n\t}\r\n\tfunction useCsp() {\r\n\t\tvar result = false;\r\n\t\tif (gantt.config.csp === \"auto\") {\r\n\t\t\tif(canUseCsp === null) {\r\n\t\t\t\tcspAutoCheck();\r\n\t\t\t}\r\n\t\t\tresult = canUseCsp;\r\n\t\t} else {\r\n\t\t\tresult = gantt.config.csp;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tvar dateHelper = {\r\n\t\tinit: function () {\r\n\t\t\tvar locale = gantt.locale;\r\n\r\n\t\t\tvar s = locale.date.month_short;\r\n\t\t\tvar t = locale.date.month_short_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\r\n\t\t\tvar s = locale.date.month_full;\r\n\t\t\tvar t = locale.date.month_full_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\t\t},\r\n\t\tdate_part: function (date) {\r\n\t\t\tvar old = new Date(date);\r\n\t\t\tdate.setHours(0);\r\n\t\t\tthis.hour_start(date);\r\n\t\t\tif (date.getHours() && //shift to yesterday on dst\r\n\t\t\t\t(date.getDate() < old.getDate() || date.getMonth() < old.getMonth() || date.getFullYear() < old.getFullYear()))\r\n\t\t\t\tdate.setTime(date.getTime() + 60 * 60 * 1000 * (24 - date.getHours()));\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\ttime_part: function (date) {\r\n\t\t\treturn (date.valueOf() / 1000 - date.getTimezoneOffset() * 60) % 86400;\r\n\t\t},\r\n\t\tweek_start: function (date) {\r\n\t\t\tvar shift = date.getDay();\r\n\t\t\tif (gantt.config.start_on_monday) {\r\n\t\t\t\tif (shift === 0) shift = 6;\r\n\t\t\t\telse shift--;\r\n\t\t\t}\r\n\t\t\treturn this.date_part(this.add(date, -1 * shift, \"day\"));\r\n\t\t},\r\n\t\tmonth_start: function (date) {\r\n\t\t\tdate.setDate(1);\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\tquarter_start: function (date) {\r\n\t\t\tthis.month_start(date);\r\n\t\t\tvar m = date.getMonth(),\r\n\t\t\t\tres_month;\r\n\r\n\t\t\tif (m >= 9) {\r\n\t\t\t\tres_month = 9;\r\n\t\t\t} else if (m >= 6) {\r\n\t\t\t\tres_month = 6;\r\n\t\t\t} else if (m >= 3) {\r\n\t\t\t\tres_month = 3;\r\n\t\t\t} else {\r\n\t\t\t\tres_month = 0;\r\n\t\t\t}\r\n\r\n\t\t\tdate.setMonth(res_month);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tyear_start: function (date) {\r\n\t\t\tdate.setMonth(0);\r\n\t\t\treturn this.month_start(date);\r\n\t\t},\r\n\t\tday_start: function (date) {\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\thour_start: function (date) {\r\n\t\t\tif (date.getMinutes())\r\n\t\t\t\tdate.setMinutes(0);\r\n\t\t\tthis.minute_start(date);\r\n\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tminute_start: function (date) {\r\n\t\t\tif (date.getSeconds())\r\n\t\t\t\tdate.setSeconds(0);\r\n\t\t\tif (date.getMilliseconds())\r\n\t\t\t\tdate.setMilliseconds(0);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\t_add_days: function (modifiedDate, inc, originalDate) {\r\n\r\n\t\t\tmodifiedDate.setDate(modifiedDate.getDate() + inc);\r\n\t\t\tvar incCondition = inc >= 0;\r\n\t\t\tvar getHoursCondition = !originalDate.getHours() && modifiedDate.getHours(); //shift to yesterday on dst\r\n\t\t\tvar getDateCondition = (modifiedDate.getDate() <= originalDate.getDate() || modifiedDate.getMonth() < originalDate.getMonth() || modifiedDate.getFullYear() < originalDate.getFullYear());\r\n\t\t\tif (incCondition && getHoursCondition && getDateCondition){\r\n\t\t\t\tmodifiedDate.setTime(modifiedDate.getTime() + 60 * 60 * 1000 * (24 - modifiedDate.getHours()));\r\n\t\t\t}\r\n\t\t\tvar worktimeCalculation = inc > 1;\r\n\t\t\tif (worktimeCalculation && getHoursCondition){\r\n\t\t\t\t// try to shift the modified Date to 00:00\r\n\t\t\t\tmodifiedDate.setHours(0);\r\n\t\t\t}\r\n\t\t\treturn modifiedDate;\r\n\t\t},\r\n\r\n\t\tadd: function (date, inc, mode) {\r\n\t\t\t/*jsl:ignore*/\r\n\t\t\tvar ndate = new Date(date.valueOf());\r\n\t\t\tswitch (mode) {\r\n\t\t\t\tcase \"day\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc, date);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"week\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc * 7, date);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"month\":\r\n\t\t\t\t\tndate.setMonth(ndate.getMonth() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"year\":\r\n\t\t\t\t\tndate.setYear(ndate.getFullYear() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"hour\":\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t\tadding hours/minutes via setHour(getHour() + inc) gives weird result when\r\n\t\t\t\t\t\tadding one hour to the time before switch to a Daylight Saving time\r\n\r\n\t\t\t\t\t\texample: //Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\t\t\t\t\t\tnew Date(2014, 02, 30, 1).setHours(2)\r\n\t\t\t\t\t\t>>Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\r\n\t\t\t\t\t\tsetTime seems working as expected\r\n\t\t\t\t\t */\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 60 * 1000);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"minute\":\r\n\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 1000);\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn this[\"add_\" + mode](date, inc, mode);\r\n\t\t\t}\r\n\t\t\treturn ndate;\r\n\t\t\t/*jsl:end*/\r\n\t\t},\r\n\t\tadd_quarter: function (date, inc) {\r\n\t\t\treturn this.add(date, inc * 3, \"month\");\r\n\t\t},\r\n\r\n\t\tto_fixed: function (num) {\r\n\t\t\tif (num < 10) return \"0\" + num;\r\n\t\t\treturn num;\r\n\t\t},\r\n\t\tcopy: function (date) {\r\n\t\t\treturn new Date(date.valueOf());\r\n\t\t},\r\n\t\tdate_to_str: function (format, utc) {\r\n\t\t\tvar result = fastVersion;\r\n\t\t\tif (useCsp()) {\r\n\t\t\t\tresult = cspCompliantVersion;\r\n\t\t\t}\r\n\t\t\treturn result.date_to_str(format, utc, gantt);\r\n\t\t},\r\n\t\tstr_to_date: function (format, utc) {\r\n\t\t\tvar result = fastVersion;\r\n\t\t\tif (useCsp()) {\r\n\t\t\t\tresult = cspCompliantVersion;\r\n\t\t\t}\r\n\t\t\treturn result.str_to_date(format, utc, gantt);\r\n\t\t},\r\n\t\tgetISOWeek: function (ndate) {\r\n\t\t\treturn gantt.date._getWeekNumber(ndate, true);\r\n\t\t},\r\n\t\t_getWeekNumber: function(ndate, isoWeek){\r\n\t\t\tif (!ndate) return false;\r\n\t\t\tvar nday = ndate.getDay();\r\n\t\t\tif(isoWeek){\r\n\t\t\t\tif (nday === 0) {\r\n\t\t\t\t\tnday = 7;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar first_thursday = new Date(ndate.valueOf());\r\n\t\t\tfirst_thursday.setDate(ndate.getDate() + (4 - nday));\r\n\t\t\tvar year_number = first_thursday.getFullYear(); // year of the first Thursday\r\n\t\t\tvar ordinal_date = Math.round((first_thursday.getTime() - new Date(year_number, 0, 1).getTime()) / 86400000); //ordinal date of the first Thursday - 1 (so not really ordinal date)\r\n\t\t\tvar week_number = 1 + Math.floor(ordinal_date / 7);\r\n\t\t\treturn week_number;\r\n\t\t},\r\n\r\n\t\tgetWeek: function(ndate){\r\n\t\t\treturn gantt.date._getWeekNumber(ndate, gantt.config.start_on_monday);\r\n\t\t},\r\n\t\tgetUTCISOWeek: function (ndate) {\r\n\t\t\treturn gantt.date.getISOWeek(ndate);\r\n\t\t},\r\n\t\tconvert_to_utc: function (date) {\r\n\t\t\treturn new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\r\n\t\t},\r\n\t\tparseDate: function (date, format) {\r\n\t\t\t// raw date may be of type string, number (timestamp) or something else\r\n\t\t\t// do not check for instanceof Date explicitly, since we may swap native date with different date implementation at some point\r\n\t\t\tif (date && !date.getFullYear) {\r\n\t\t\t\tif (typeof(format) !== \"function\") {\r\n\t\t\t\t\tif (typeof(format) === \"string\") {\r\n\t\t\t\t\t\tif (format === \"parse_date\" || format === \"xml_date\") {\r\n\t\t\t\t\t\t\tformat = gantt.defined(gantt.templates.xml_date) ? gantt.templates.xml_date : gantt.templates.parse_date;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tformat = gantt.defined(gantt.templates[format]) ? gantt.templates[format] : gantt.date.str_to_date(format);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tformat = gantt.defined(gantt.templates.xml_date) ? gantt.templates.xml_date : gantt.templates.parse_date;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (date) {\r\n\t\t\t\t\tdate = format(date);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdate = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn date;\r\n\t\t}\r\n\t};\r\n\treturn dateHelper;\r\n};","class t{constructor(t){const{url:e,token:s}=t;this._url=e,this._token=s,this._mode=1,this._seed=1,this._queue=[],this.data={},this.api={},this._events={}}headers(){return{Accept:\"application/json\",\"Content-Type\":\"application/json\",\"Remote-Token\":this._token}}fetch(t,e){const s={credentials:\"include\",headers:this.headers()};return e&&(s.method=\"POST\",s.body=e),fetch(t,s).then(t=>t.json())}load(t){return t&&(this._url=t),this.fetch(this._url).then(t=>this.parse(t))}parse(t){const{key:e,websocket:s}=t;e&&(this._token=t.key);for(const e in t.data)this.data[e]=t.data[e];for(const e in t.api){const s=this.api[e]={},i=t.api[e];for(const t in i)s[t]=this._wrapper(e+\".\"+t)}return s&&this.connect(),this}connect(){const t=this._socket;t&&(this._socket=null,t.onclose=function(){},t.close()),this._mode=2,this._socket=function(t,e,s,i){let n=e;\"/\"===n[0]&&(n=document.location.protocol+\"//\"+document.location.host+e);n=n.replace(/^http(s|):/,\"ws$1:\");const o=-1!=n.indexOf(\"?\")?\"&\":\"?\";n=`${n}${o}token=${s}&ws=1`;const r=new WebSocket(n);return r.onclose=()=>setTimeout(()=>t.connect(),2e3),r.onmessage=e=>{const s=JSON.parse(e.data);switch(s.action){case\"result\":t.result(s.body,[]);break;case\"event\":t.fire(s.body.name,s.body.value);break;case\"start\":i();break;default:t.onError(s.data)}},r}(this,this._url,this._token,()=>(this._mode=3,this._send(),this._resubscribe(),this))}_wrapper(t){return function(){const e=[].slice.call(arguments);let s=null;const i=new Promise((i,n)=>{s={data:{id:this._uid(),name:t,args:e},status:1,resolve:i,reject:n},this._queue.push(s)});return this.onCall(s,i),3===this._mode?this._send(s):setTimeout(()=>this._send(),1),i}.bind(this)}_uid(){return(this._seed++).toString()}_send(t){if(2==this._mode)return void setTimeout(()=>this._send(),100);const e=t?[t]:this._queue.filter(t=>1===t.status);if(!e.length)return;const s=e.map(t=>(t.status=2,t.data));3!==this._mode?this.fetch(this._url,JSON.stringify(s)).catch(t=>this.onError(t)).then(t=>this.result(t,s)):this._socket.send(JSON.stringify({action:\"call\",body:s}))}result(t,e){const s={};if(t)for(let e=0;e<t.length;e++)s[t[e].id]=t[e];else for(let t=0;t<e.length;t++)s[e[t].id]={id:e[t].id,error:\"Network Error\",data:null};for(let t=this._queue.length-1;t>=0;t--){const e=this._queue[t],i=s[e.data.id];i&&(this.onResponse(e,i),i.error?e.reject(i.error):e.resolve(i.data),this._queue.splice(t,1))}}on(t,e){const s=this._uid();let i=this._events[t];const n=!!i;return n||(i=this._events[t]=[]),i.push({id:s,handler:e}),n||3!=this._mode||this._socket.send(JSON.stringify({action:\"subscribe\",name:t})),{name:t,id:s}}_resubscribe(){if(3==this._mode)for(const t in this._events)this._socket.send(JSON.stringify({action:\"subscribe\",name:t}))}detach(t){if(!t){if(3==this._mode)for(const t in this._events)this._socket.send(JSON.stringify({action:\"unsubscribe\",key:t}));return void(this._events={})}const{id:e,name:s}=t,i=this._events[s];if(i){const t=i.filter(t=>t.id!=e);t.length?this._events[s]=t:(delete this._events[s],3==this._mode&&this._socket.send(JSON.stringify({action:\"unsubscribe\",name:s})))}}fire(t,e){const s=this._events[t];if(s)for(let t=0;t<s.length;t++)s[t].handler(e)}onError(t){return null}onCall(t,e){}onResponse(t,e){}}export{t as Client};\n//# sourceMappingURL=remote.es6.js.map\n","import * as remote_client from \"remote-client\";\r\nexport const remoteEvents = function(url, token) {\r\n    const remote = new remote_client.Client({\r\n      url,\r\n      token\r\n    });\r\n\r\n    // temporary patch, as we do not want credentials\r\n    remote.fetch = function (url, body) {\r\n      const req = {\r\n        headers: this.headers()\r\n      };\r\n      if (body) {\r\n        req.method = \"POST\";\r\n        req.body = body;\r\n      }\r\n\r\n      return fetch(url, req).then((res) => res.json());\r\n    };\r\n\r\n    this._ready = remote.load().then((back) => (this._remote = back));\r\n\r\n    function ready() {\r\n      return this._ready;\r\n    }\r\n  \r\n    function on(name, handler) {\r\n      this.ready().then((back) => {\r\n        if (typeof name === \"string\") back.on(name, handler);\r\n        else {\r\n          for (const key in name) {\r\n            back.on(key, name[key]);\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    this.ready = ready;\r\n    this.on = on;\r\n  };\r\n\r\n","function checkTimeout(host, updPerSecond){\r\n\tif (!updPerSecond)\r\n\t\treturn true;\r\n\t\r\n\tif (host._on_timeout)\r\n\t\treturn false;\r\n\t\r\n\tvar timeout = Math.ceil(1000/updPerSecond);\r\n\tif (timeout < 2) return true;\r\n\r\n\tsetTimeout(function(){\r\n\t\tdelete host._on_timeout;\r\n\t}, timeout);\r\n\r\n\thost._on_timeout = true;\r\n\treturn true;\r\n}\r\n\r\nexport default checkTimeout;","import * as utils from \"../../utils/utils\";\r\n\r\nvar StateService = (function(){\r\n\tvar stateProviders = {};\r\n\r\n\tfunction getState(name){\r\n\t\tvar provider = stateProviders[name];\r\n\t\tif(provider){\r\n\t\t\treturn stateProviders[name].method();\r\n\t\t}else{\r\n\t\t\tvar res = {};\r\n\t\t\tfor(var i in stateProviders){\r\n\t\t\t\tif(!stateProviders[i].internal)\r\n\t\t\t\t\tutils.mixin(res, stateProviders[i].method(), true);\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction registerProvider(name, provider, internal){\r\n\t\tstateProviders[name] = { method: provider, internal: internal};\r\n\t}\r\n\r\n\tfunction unregisterProvider(name){\r\n\t\tdelete stateProviders[name];\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetState: getState,\r\n\t\tregisterProvider: registerProvider,\r\n\t\tunregisterProvider: unregisterProvider\r\n\t};\r\n});\r\n\r\nexport default StateService;\r\n\r\n","export default Promise;","import * as utils from \"../../utils/utils\";\r\nimport {replaceValidZeroId} from \"../../utils/helpers\";\r\n\r\nvar createTasksDatastoreFacade = function(){\r\n\treturn {\r\n\tgetTask: function (id) {\r\n\t\tid = replaceValidZeroId(id, this.config.root_id);\r\n\t\tthis.assert(id, \"Invalid argument for gantt.getTask\");\r\n\t\tvar task = this.$data.tasksStore.getItem(id);\r\n\t\tthis.assert(task, \"Task not found id=\" + id);\r\n\t\treturn task;\r\n\t},\r\n\tgetTaskByTime: function (from, to) {\r\n\t\tvar p = this.$data.tasksStore.getItems();\r\n\r\n\t\tvar res = [];\r\n\r\n\t\tif (!(from || to)) {\r\n\t\t\tres = p;\r\n\t\t} else {\r\n\t\t\tfrom = +from || -Infinity;\r\n\t\t\tto = +to || Infinity;\r\n\t\t\tfor (var t = 0; t < p.length; t++){\r\n\t\t\t\tvar task = p[t];\r\n\t\t\t\tif (+task.start_date < to && +task.end_date > from)\r\n\t\t\t\t\tres.push(task);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\tisTaskExists: function (id) {\r\n\t\tif(!this.$data || !this.$data.tasksStore){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn this.$data.tasksStore.exists(id);\r\n\t},\r\n\tupdateTask: function (id, item) {\r\n\t\tif (!utils.defined(item)) item = this.getTask(id);\r\n\t\tthis.$data.tasksStore.updateItem(id, item);\r\n\t\tif(this.isTaskExists(id))\r\n\t\t\tthis.refreshTask(id);\r\n\t},\r\n\taddTask: function (item, parent, index) {\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\t\t//GS-761: assert unique ID\r\n\t\tif (this.isTaskExists(item.id)){\r\n\t\t\tvar task = this.getTask(item.id);\r\n\t\t\tif (task.$index != item.$index) {\r\n\t\t\t\t// Someone may try to mistakenly add a task with the same ID, and most likely\r\n\t\t\t\t// use the string format for the dates. Gantt shouldn't break in this scenario\r\n\t\t\t\tif (item.start_date && typeof item.start_date === \"string\"){\r\n\t\t\t\t\titem.start_date = this.date.parseDate(item.start_date, \"parse_date\");\r\n\t\t\t\t}\r\n\t\t\t\tif (item.end_date && typeof item.end_date === \"string\"){\r\n\t\t\t\t\titem.end_date = this.date.parseDate(item.end_date, \"parse_date\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this.$data.tasksStore.updateItem(item.id, item);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (!utils.defined(parent)) parent = this.getParent(item) || 0;\r\n\t\tif (!this.isTaskExists(parent)) parent = this.config.root_id;\r\n\t\tthis.setParent(item, parent);\r\n\r\n\t\t// GS-1583. Save the $open state to the Undo Stack\r\n\t\tif (this.getState().lightbox && this.isTaskExists(parent)) {\r\n\t\t\tvar parentObj = this.getTask(parent);\r\n\t\t\tthis.callEvent(\"onAfterParentExpand\", [parent, parentObj]);\r\n\t\t}\r\n\t\treturn this.$data.tasksStore.addItem(item, index, parent);\r\n\t},\r\n\tdeleteTask: function (id) {\r\n\t\tid = replaceValidZeroId(id, this.config.root_id);\r\n\t\treturn this.$data.tasksStore.removeItem(id);\r\n\t},\r\n\tgetTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.count();\r\n\t},\r\n\tgetVisibleTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.countVisible();\r\n\t},\r\n\tgetTaskIndex: function (id) {\r\n\t\treturn this.$data.tasksStore.getBranchIndex(id);\r\n\t},\r\n\tgetGlobalTaskIndex: function (id) {\r\n\t\tid = replaceValidZeroId(id, this.config.root_id);\r\n\t\tthis.assert(id, \"Invalid argument\");\r\n\t\treturn this.$data.tasksStore.getIndexById(id);\r\n\t},\r\n\teachTask: function (code, parent, master) {\r\n\t\treturn this.$data.tasksStore.eachItem(utils.bind(code, master||this), parent);\r\n\t},\r\n\teachParent: function (callback, startTask, master) {\r\n\t\treturn this.$data.tasksStore.eachParent(utils.bind(callback, master || this), startTask);\r\n\t},\r\n\tchangeTaskId: function (oldid, newid) {\r\n\t\tthis.$data.tasksStore.changeId(oldid, newid);\r\n\t\tvar task = this.$data.tasksStore.getItem(newid);\r\n\r\n\t\tvar links = [];\r\n\r\n\t\tif (task.$source) {\r\n\t\t\tlinks = links.concat(task.$source);\r\n\t\t}\r\n\t\tif (task.$target) {\r\n\t\t\tlinks = links.concat(task.$target);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar link = this.getLink(links[i]);\r\n\t\t\tif (link.source == oldid) {\r\n\t\t\t\tlink.source = newid;\r\n\t\t\t}\r\n\t\t\tif (link.target == oldid) {\r\n\t\t\t\tlink.target = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcalculateTaskLevel: function (item) {\r\n\t\treturn this.$data.tasksStore.calculateItemLevel(item);\r\n\t},\r\n\tgetNext: function (id) {\r\n\t\treturn this.$data.tasksStore.getNext(id);\r\n\t},\r\n\tgetPrev: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrev(id);\r\n\t},\r\n\tgetParent: function (id) {\r\n\t\treturn this.$data.tasksStore.getParent(id);\r\n\t},\r\n\tsetParent: function (task, new_pid, silent) {\r\n\t\treturn this.$data.tasksStore.setParent(task, new_pid, silent);\r\n\t},\r\n\tgetSiblings: function (id) {\r\n\t\treturn this.$data.tasksStore.getSiblings(id).slice();\r\n\t},\r\n\tgetNextSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getNextSibling(id);\r\n\t},\r\n\tgetPrevSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrevSibling(id);\r\n\t},\r\n\tgetTaskByIndex: function(index){\r\n\t\tvar id = this.$data.tasksStore.getIdByIndex(index);\r\n\t\tif(this.isTaskExists(id)){\r\n\t\t\treturn this.getTask(id);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tgetChildren: function (id) {\r\n\t\tif(!this.hasChild(id)){\r\n\t\t\treturn [];\r\n\t\t}else{\r\n\t\t\treturn this.$data.tasksStore.getChildren(id).slice();\r\n\t\t}\r\n\t},\r\n\thasChild: function (id) {\r\n\t\treturn this.$data.tasksStore.hasChild(id);\r\n\t},\r\n\topen: function (id) {\r\n\t\tthis.$data.tasksStore.open(id);\r\n\t},\r\n\tclose: function (id) {\r\n\t\tthis.$data.tasksStore.close(id);\r\n\t},\r\n\tmoveTask: function (sid, tindex, parent) {\r\n\t\tparent = replaceValidZeroId(parent, this.config.root_id);\r\n\t\treturn this.$data.tasksStore.move.apply(this.$data.tasksStore, arguments);\r\n\t},\r\n\tsort: function(field, desc, parent, silent) {\r\n\t\tvar render = !silent;//4th argument to cancel redraw after sorting\r\n\r\n\t\tthis.$data.tasksStore.sort(field, desc, parent);\r\n\t\tthis.callEvent(\"onAfterSort\", [field, desc, parent]);\r\n\r\n\t\tif (render) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t}\r\n};\r\n};\r\n\r\nexport default createTasksDatastoreFacade;\r\n\r\n\r\n","import * as utils from \"../../utils/utils\";\r\n\r\nvar $powerArray  = {\r\n\t$create: function(array){\r\n\t\treturn utils.mixin(array || [], this);\r\n\t},\r\n\t//remove element at specified position\r\n\t$removeAt:function(pos,len){\r\n\t\tif (pos>=0) this.splice(pos,(len||1));\r\n\t},\r\n\t//find element in collection and remove it\r\n\t$remove:function(value){\r\n\t\tthis.$removeAt(this.$find(value));\r\n\t},\r\n\t//add element to collection at specific position\r\n\t$insertAt:function(data,pos){\r\n\t\tif (!pos && pos!==0) \t//add to the end by default\r\n\t\t\tthis.push(data);\r\n\t\telse {\r\n\t\t\tvar b = this.splice(pos,(this.length-pos));\r\n\t\t\tthis[pos] = data;\r\n\t\t\tthis.push.apply(this,b); //reconstruct array without loosing this pointer\r\n\t\t}\r\n\t},\r\n\t//return index of element, -1 if it doesn't exists\r\n\t$find:function(data){\r\n\t\tfor (var i=0; i<this.length; i++)\r\n\t\t\tif (data==this[i]) return i;\r\n\t\treturn -1;\r\n\t},\r\n\t//execute some method for each element of array\r\n\t$each:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tfunctor.call((master||this),this[i]);\r\n\t},\r\n\t//create new array from source, by using results of functor\r\n\t$map:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tthis[i]=functor.call((master||this),this[i]);\r\n\t\treturn this;\r\n\t},\r\n\t$filter:function(functor, master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tif (!functor.call((master||this),this[i])){\r\n\t\t\t\tthis.splice(i,1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\treturn this;\r\n\t}\r\n};\r\n\r\nexport default $powerArray;","/**\r\n * Check the over task or draggble task is placeholder task\r\n */\r\n\r\nexport default function isPlaceholderTask(id, gantt, store, config) {\r\n\t// return false;\r\n\tvar config = gantt ? gantt.config : config;\r\n\tif (config && config.placeholder_task) {\r\n\t\tif (store.exists(id)){\r\n\t\t\tvar item = store.getItem(id);\r\n\t\t\treturn item.type === config.types.placeholder;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n};","import powerArray from \"./power_array\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport eventable from \"../../utils/eventable\";\r\nimport isPlaceholderTask from \"../../utils/placeholder_task\";\r\n\r\nvar DataStore = function(config){\r\n\tthis.pull = {};\r\n\tthis.$initItem = config.initItem;\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._skip_refresh = false;\r\n\tthis._filterRule = null;\r\n\tthis._searchVisibleOrder = {};\r\n\tthis._indexRangeCache = {};\r\n\tthis._getItemsCache = null;\r\n\tthis.$config = config;\r\n\teventable(this);\r\n\r\n\tthis._attachDataChange(function(){\r\n\t\tthis._indexRangeCache = {};\r\n\t\tthis._getItemsCache = null;\r\n\t\treturn true;\r\n\t});\r\n\treturn this;\r\n};\r\nDataStore.prototype = {\r\n\r\n\t_attachDataChange: function(callback){\r\n\t\tthis.attachEvent(\"onClearAll\", callback);\r\n\t\tthis.attachEvent(\"onBeforeParse\", callback);\r\n\t\tthis.attachEvent(\"onBeforeUpdate\", callback);\r\n\t\tthis.attachEvent(\"onBeforeDelete\", callback);\r\n\t\tthis.attachEvent(\"onBeforeAdd\", callback);\r\n\t\tthis.attachEvent(\"onParse\", callback);\r\n\t\tthis.attachEvent(\"onBeforeFilter\", callback);\r\n\t},\r\n\t_parseInner: function(data){\r\n\t\tvar item = null,\r\n\t\t\tloaded = [];\r\n\t\tfor(var i = 0, len = data.length; i< len; i++){\r\n\t\t\titem = data[i];\r\n\t\t\tif(this.$initItem){\r\n\t\t\t\tif(this.$config.copyOnParse()){\r\n\t\t\t\t\titem = utils.copy(item);\r\n\t\t\t\t}\r\n\t\t\t\titem = this.$initItem(item);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(this.callEvent(\"onItemLoading\", [item])){\r\n\t\t\t\tif (!this.pull.hasOwnProperty(item.id)) {\r\n\t\t\t\t\tthis.fullOrder.push(item.id);\r\n\t\t\t\t}\r\n\t\t\t\tloaded.push(item);\r\n\t\t\t\tthis.pull[item.id] = item;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn loaded;\r\n\t},\r\n\tparse: function(data){\r\n\t\tif (!this.isSilent()) {\r\n\t\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\t}\r\n\t\tvar loaded = this._parseInner(data);\r\n\t\tif (!this.isSilent()) {\r\n\t\t\tthis.refresh();\r\n\t\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t\t}\r\n\t},\r\n\tgetItem: function(id){\r\n\t\treturn this.pull[id];\r\n\t},\r\n\r\n\t_updateOrder: function(code){\r\n\t\tcode.call(this.visibleOrder);\r\n\t\tcode.call(this.fullOrder);\r\n\t},\r\n\tupdateItem: function(id, item){\r\n\t\tif (!utils.defined(item)) item = this.getItem(id);\r\n\r\n\t\tif (!this.isSilent()) {\r\n\t\t\tif (this.callEvent(\"onBeforeUpdate\", [item.id, item]) === false) return false;\r\n\t\t}\r\n\t\t// This is how it worked before updating the properties:\r\n\t\t// this.pull[id]=item;\r\n\t\tutils.mixin(this.pull[id],item, true);\r\n\t\tif (!this.isSilent()) {\r\n\t\t\tthis.callEvent(\"onAfterUpdate\", [item.id, item]);\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [item.id, item, \"update\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_removeItemInner: function(id){\r\n\t\t//clear from collections\r\n\t\t//this.visibleOrder.$remove(id);\r\n\t\tthis._updateOrder(function(){ this.$remove(id);});\r\n\t\tdelete this.pull[id];\r\n\t},\r\n\r\n\tremoveItem: function(id){\r\n\t\t//utils.assert(this.exists(id), \"Not existing ID in remove command\"+id);\r\n\r\n\t\tvar obj = this.getItem(id);\t//save for later event\r\n\t\tif (!this.isSilent()) {\r\n\t\t\tif (this.callEvent(\"onBeforeDelete\", [obj.id, obj]) === false) return false;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterDeleteConfirmed\", [obj.id, obj]);\r\n\t\tthis._removeItemInner(id);\r\n\t\t\r\n\t\tif (this.isSilent()) {\r\n\t\t\tthis.callEvent(\"onAfterSilentDelete\", [obj.id, obj]);\r\n\t\t}\r\n\r\n\t\tif (!this.isSilent()) {\r\n\t\t\tthis.filter();\r\n\t\t\tthis.callEvent(\"onAfterDelete\", [obj.id, obj]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [obj.id, obj, \"delete\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_addItemInner: function(item, index){\r\n\t\t//in case of treetable order is sent as 3rd parameter\r\n\t\t//var order = index;\r\n\r\n\t\tif(this.exists(item.id)){\r\n\t\t\tthis.silent(function(){this.updateItem(item.id, item);});\r\n\t\t}else{\r\n\t\t\tvar order = this.visibleOrder;\r\n\r\n\t\t\t//by default item is added to the end of the list\r\n\t\t\tvar data_size = order.length;\r\n\r\n\t\t\tif (!utils.defined(index) || index < 0)\r\n\t\t\t\tindex = data_size;\r\n\t\t\t//check to prevent too big indexes\r\n\t\t\tif (index > data_size){\r\n\t\t\t\t//dhx.log(\"Warning\",\"DataStore:add\",\"Index of out of bounds\");\r\n\t\t\t\tindex = Math.min(order.length,index);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t//gantt.assert(!this.exists(id), \"Not unique ID\");\r\n\r\n\t\tthis.pull[item.id]=item;\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tif(this.$find(item.id) === -1)\r\n\t\t\t\tthis.$insertAt(item.id,index);\r\n\t\t});\r\n\t\tthis.filter();\r\n\t\t//order.$insertAt(item.id,index);\r\n\t},\r\n\r\n\r\n\tisVisible: function(id){\r\n\t\treturn this.visibleOrder.$find(id) > -1;\r\n\t},\r\n\tgetVisibleItems: function(){\r\n\t\treturn this.getIndexRange();\r\n\t},\r\n\r\n\taddItem: function(item, index){\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\t\tif(this.$initItem){\r\n\t\t\titem = this.$initItem(item);\r\n\t\t}\r\n\r\n\t\tif (!this.isSilent()){\r\n\t\t\tif (this.callEvent(\"onBeforeAdd\", [item.id, item]) === false) return false;\r\n\t\t}\r\n\r\n\r\n\t\tthis._addItemInner(item, index);\r\n\r\n\t\tif (!this.isSilent()){\r\n\t\t\tthis.callEvent(\"onAfterAdd\",[item.id, item]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[item.id,item,\"add\"]);\r\n\t\t}\r\n\t\treturn item.id;\r\n\t},\r\n\r\n\t_changeIdInner: function(oldId, newId){\r\n\t\tif(this.pull[oldId])\r\n\t\t\tthis.pull[newId] = this.pull[oldId];\r\n\r\n\t\tvar visibleOrder = this._searchVisibleOrder[oldId];\r\n\t\tthis.pull[newId].id = newId;\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis[this.$find(oldId)] = newId;\r\n\t\t});\r\n\t\tthis._searchVisibleOrder[newId] = visibleOrder;\r\n\t\tdelete this._searchVisibleOrder[oldId];\r\n\r\n\t\t//this.visibleOrder[this.visibleOrder.$find(oldId)]=newId;\r\n\t\tdelete this.pull[oldId];\r\n\t},\r\n\tchangeId: function(oldId, newId){\r\n\t\tthis._changeIdInner(oldId, newId);\r\n\r\n\t\tthis.callEvent(\"onIdChange\", [oldId, newId]);\r\n\r\n\t},\r\n\texists: function(id){\r\n\t\treturn !!(this.pull[id]);\r\n\t},\r\n\r\n\t_moveInner: function(sindex, tindex){\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis.$removeAt(sindex);\r\n\t\t\tthis.$insertAt(id,Math.min(this.length, tindex));\r\n\t\t});\r\n\t\t//this.visibleOrder.$removeAt(sindex);\t//remove at old position\r\n\t\t//if (sindex<tindex) tindex--;\t//correct shift, caused by element removing\r\n\t\t//this.visibleOrder.$insertAt(id,Math.min(this.visibleOrder.length, tindex));\t//insert at new position\r\n\t},\r\n\r\n\tmove: function(sindex, tindex){\r\n\t\t//gantt.assert(sindex>=0 && tindex>=0, \"DataStore::move\",\"Incorrect indexes\");\r\n\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\t\tvar obj = this.getItem(id);\r\n\t\tthis._moveInner(sindex, tindex);\r\n\r\n\t\tif (!this.isSilent()) {\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [obj.id, obj, \"move\"]);\r\n\t\t}\r\n\t},\r\n\tclearAll: function(){\r\n\t\tif(this.$destroyed){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// GS-956 We need to unselect the resource as its ID is cached\r\n\t\tthis.silent(function(){\r\n\t\t\tthis.unselect();\r\n\t\t});\r\n\t\tthis.pull = {};\r\n\t\tthis.visibleOrder = powerArray.$create();\r\n\t\tthis.fullOrder = powerArray.$create();\r\n\t\tif (this.isSilent()) return;\r\n\t\tthis.callEvent(\"onClearAll\",[]);\r\n\t\tthis.refresh();\r\n\t},\r\n\r\n\tsilent:function(code, master){\r\n\t\tvar alreadySilent = false;\r\n\t\tif(this.isSilent()) {\r\n\t\t\talreadySilent = true;\r\n\t\t}\r\n\t\tthis._skip_refresh = true;\r\n\t\tcode.call(master||this);\r\n\t\t\r\n\t\tif (!alreadySilent) {\r\n\t\t\tthis._skip_refresh = false;\r\n\t\t}\r\n\t},\r\n\tisSilent: function(){\r\n\t\treturn !!this._skip_refresh;\r\n\t},\r\n\r\n\tarraysEqual: function (arr1, arr2) {\r\n\t\tif(arr1.length !== arr2.length)\r\n\t\t\treturn false;\r\n\t\tfor(var i = 0; i < arr1.length; i++) {\r\n\t\t\tif(arr1[i] !== arr2[i])\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\trefresh: function(id, quick){\r\n\t\tif(this.$destroyed){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.isSilent()) return;\r\n\r\n\t\tvar item;\r\n\t\tif(id){\r\n\t\t\titem = this.getItem(id);\r\n\t\t}\r\n\r\n\t\tvar args;\r\n\t\tif (id){\r\n\t\t\targs = [id, item, \"paint\"];\r\n\t\t}else{\r\n\t\t\targs = [null,null,null];\r\n\t\t}\r\n\r\n\t\tif(this.callEvent(\"onBeforeStoreUpdate\", args) === false){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar skipFilter = this._quick_refresh && !this._mark_recompute;\r\n\t\tthis._mark_recompute = false;\r\n\t\tif(id){\r\n\t\t\t// if item changes visible order (e.g. expand-collapse branch) - do a complete repaint\r\n\t\t\tif(!quick && !skipFilter){\r\n\t\t\t\tvar oldOrder = this.visibleOrder;\r\n\t\t\t\tthis.filter();\r\n\t\t\t\tif(!this.arraysEqual(oldOrder, this.visibleOrder)){\r\n\t\t\t\t\tid = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}else if(!skipFilter){\r\n\t\t\tthis.filter();\r\n\t\t}\r\n\r\n\t\tif (id){\r\n\t\t\targs = [id, item, \"paint\"];\r\n\t\t}else{\r\n\t\t\targs = [null,null,null];\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onStoreUpdated\",args);\r\n\t},\r\n\r\n\tcount: function(){\r\n\t\treturn this.fullOrder.length;\r\n\t},\r\n\tcountVisible: function(){\r\n\t\treturn this.visibleOrder.length;\r\n\t},\r\n\r\n\tsort: function(sort){},\r\n\r\n\tserialize: function(){},\r\n\r\n\teachItem: function(code){\r\n\t\tfor (var i=0; i<this.fullOrder.length; i++) {\r\n\t\t\tvar item = this.getItem(this.fullOrder[i]);\r\n\t\t\tcode.call(this, item);\r\n\t\t}\r\n\t},\r\n\r\n\tfind: function(filter) {\r\n\t\tvar result = [];\r\n\t\tthis.eachItem(function(item) {\r\n\t\t\tif(filter(item)){\r\n\t\t\t\tresult.push(item);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn result;\r\n\t},\r\n\r\n\tfilter: function(rule){\r\n\t\tif (!this.isSilent()) {\r\n\t\t\tthis.callEvent(\"onBeforeFilter\", []);\r\n\t\t}\r\n\t\tthis.callEvent(\"onPreFilter\", []);\r\n\t\tvar filteredOrder = powerArray.$create();\r\n\t\tvar placeholderIds = [];\r\n\t\tthis.eachItem(function(item){\r\n\t\t\tif(this.callEvent(\"onFilterItem\", [item.id, item])){\r\n\t\t\t\tif(isPlaceholderTask(item.id, null, this, this._ganttConfig)){\r\n\t\t\t\t\tplaceholderIds.push(item.id);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilteredOrder.push(item.id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tfor(var i = 0; i < placeholderIds.length; i++){\r\n\t\t\tfilteredOrder.push(placeholderIds[i]);\r\n\t\t}\r\n\r\n\t\tthis.visibleOrder = filteredOrder;\r\n\t\tthis._searchVisibleOrder = {};\r\n\t\tfor(var i = 0; i < this.visibleOrder.length; i++){\r\n\t\t\tthis._searchVisibleOrder[this.visibleOrder[i]] = i;\r\n\t\t}\r\n\t\tif (!this.isSilent()) {\r\n\t\t\tthis.callEvent(\"onFilter\", []);\r\n\t\t}\r\n\t},\r\n\r\n\tgetIndexRange: function(from, to){\r\n\t\tvar max = Math.min((to||Infinity),this.countVisible()-1);\r\n\t\tvar min = from||0;\r\n\r\n\t\tvar cacheKey = min + '-' + max;\r\n\t\tif(this._indexRangeCache[cacheKey]){\r\n\t\t\treturn this._indexRangeCache[cacheKey].slice();\r\n\t\t}\r\n\r\n\t\tvar ret= [];\r\n\t\tfor (var i=min; i <= max; i++)\r\n\t\t\tret.push(this.getItem(this.visibleOrder[i]));\r\n\r\n\t\tthis._indexRangeCache[cacheKey] = ret.slice();\r\n\t\treturn ret;\r\n\t},\r\n\tgetItems: function(){\r\n\t\tif(this._getItemsCache){\r\n\t\t\treturn this._getItemsCache.slice();\r\n\t\t}\r\n\r\n\t\tvar res = [];\r\n\t\tfor(var i in this.pull){\r\n\t\t\tres.push(this.pull[i]);\r\n\t\t}\r\n\t\tthis._getItemsCache = res.slice();\r\n\r\n\t\treturn res;\r\n\t},\r\n\r\n\tgetIdByIndex: function(index){\r\n\t\treturn this.visibleOrder[index];\r\n\t},\r\n\tgetIndexById: function(id){\r\n\t\tvar res = this._searchVisibleOrder[id];\r\n\t\tif(res === undefined){\r\n\t\t\tres = -1;\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\t_getNullIfUndefined: function(value){\r\n\t\tif(value === undefined){\r\n\t\t\treturn null;\r\n\t\t}else{\r\n\t\t\treturn value;\r\n\t\t}\r\n\t},\r\n\tgetFirst: function(){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[0]);\r\n\t},\r\n\tgetLast: function(){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.visibleOrder.length-1]);\r\n\t},\r\n\tgetNext: function(id){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.getIndexById(id) + 1]);\r\n\t},\r\n\tgetPrev: function(id){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.getIndexById(id) - 1]);\r\n\t},\r\n\tdestructor: function(){\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t\tthis.$destroyed = true;\r\n\t\tthis.pull = null;\r\n\t\tthis.$initItem = null;\r\n\t\tthis.visibleOrder = null;\r\n\t\tthis.fullOrder = null;\r\n\t\tthis._skip_refresh = null;\r\n\t\tthis._filterRule = null;\r\n\t\tthis._searchVisibleOrder = null;\r\n\t\tthis._indexRangeCache = {};\r\n\t}\r\n};\r\n\r\nexport default DataStore;","import powerArray from \"./power_array\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport * as helpers from \"../../utils/helpers\";\r\nimport DataStore from \"./datastore\";\r\nimport isPlaceholderTask from \"../../utils/placeholder_task\";\r\nimport {replaceValidZeroId} from \"../../utils/helpers\";\r\n\r\nvar TreeDataStore = function(config){\r\n\tDataStore.apply(this, [config]);\r\n\tthis._branches = {};\r\n\r\n\tthis.pull = {};\r\n\t//GS-761 Update existing item instead of adding it to the new position\r\n\tthis.$initItem = function (item){\r\n\t\tvar loadedItem = item;\r\n\t\tif(config.initItem){\r\n\t\t\tloadedItem = config.initItem(loadedItem);\r\n\t\t}\r\n\t\tvar existingItem = this.getItem(item.id);\r\n\t\tif(existingItem && !isEqualIds(existingItem.parent,loadedItem.parent)){\r\n\t\t\tthis.move(loadedItem.id, loadedItem.$index || -1, loadedItem.parent || this._ganttConfig.root_id);\r\n\t\t}\r\n\t\treturn loadedItem;\r\n\t};\r\n\tthis.$parentProperty = config.parentProperty || \"parent\";\r\n\r\n\tif(typeof config.rootId !== \"function\"){\r\n\t\tthis.$getRootId = (function(val){\r\n\t\t\treturn function(){return val;};\r\n\t\t})(config.rootId || 0);\r\n\t}else{\r\n\t\tthis.$getRootId = config.rootId;\r\n\t}\r\n\r\n\t// TODO: replace with live reference to gantt config\r\n\tthis.$openInitially = config.openInitially;\r\n\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._searchVisibleOrder = {};\r\n\tthis._indexRangeCache = {};\r\n\tthis._eachItemMainRangeCache = null;\r\n\tthis._getItemsCache = null;\r\n\tthis._skip_refresh = false;\r\n\r\n\tthis._ganttConfig = null;\r\n\tif(config.getConfig){\r\n\t\tthis._ganttConfig = config.getConfig();\r\n\t}\r\n\r\n\tvar splitParents = {};\r\n\tvar splitItems = {};\r\n\r\n\tvar taskOpenState = {};\r\n\tvar taskVisibility = {};\r\n\tvar haveSplitItems = false;\r\n\r\n\tthis._attachDataChange(function(){\r\n\t\tthis._indexRangeCache = {};\r\n\t\tthis._eachItemMainRangeCache = null;\r\n\t\tthis._getItemsCache = null;\r\n\t\treturn true;\r\n\t});\r\n\r\n\tthis.attachEvent(\"onPreFilter\", function(){\r\n\t\tthis._indexRangeCache = {};\r\n\t\tthis._eachItemMainRangeCache = null;\r\n\r\n\t\tsplitParents = {};\r\n\t\tsplitItems = {};\r\n\t\ttaskOpenState = {};\r\n\t\ttaskVisibility = {};\r\n\t\thaveSplitItems = false;\r\n\r\n\t\tthis.eachItem(function(item){\r\n\t\t\tvar parent = this.getParent(item.id);\r\n\t\t\tif(item.$open && taskOpenState[parent] !== false){\r\n\t\t\t\ttaskOpenState[item.id] = true;\r\n\t\t\t}else{\r\n\t\t\t\ttaskOpenState[item.id] = false;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._isSplitItem(item)){\r\n\t\t\t\thaveSplitItems = true;\r\n\t\t\t\tsplitParents[item.id] = true;\r\n\t\t\t\tsplitItems[item.id] = true;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif(haveSplitItems && splitItems[parent]){\r\n\t\t\t\tsplitItems[item.id] = true;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif(taskOpenState[parent] || taskOpenState[parent] === undefined){\r\n\t\t\t\ttaskVisibility[item.id] = true;\r\n\t\t\t}else{\r\n\t\t\t\ttaskVisibility[item.id] = false;\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\tthis.attachEvent(\"onFilterItem\", function(id, item){\r\n\r\n\t\tvar canOpenSplitTasks = false;\r\n\t\tif(this._ganttConfig){\r\n\t\t\tvar canOpenSplitTasks = this._ganttConfig.open_split_tasks;\r\n\t\t}\r\n\r\n\t\tvar open = taskVisibility[item.id];\r\n\r\n\t\tif(haveSplitItems){\r\n\t\t\tif(open && splitItems[item.id] && !splitParents[item.id]){\r\n\t\t\t\topen = !!canOpenSplitTasks;\r\n\t\t\t}\r\n\r\n\t\t\tif(splitItems[item.id] && !splitParents[item.id]){\r\n\t\t\t\titem.$split_subtask = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\titem.$expanded_branch = !!taskVisibility[item.id];\r\n\r\n\t\treturn !!open;\r\n\t});\r\n\r\n\tthis.attachEvent(\"onFilter\", function(){\r\n\t\tsplitParents = {};\r\n\t\tsplitItems = {};\r\n\r\n\t\ttaskOpenState = {};\r\n\t\ttaskVisibility = {};\r\n\t});\r\n\r\n\treturn this;\r\n};\r\n\r\nTreeDataStore.prototype = utils.mixin({\r\n\r\n\t\t_buildTree: function(data){\r\n\t\t\tvar item = null;\r\n\t\t\tvar rootId = this.$getRootId();\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis.setParent(item, replaceValidZeroId(this.getParent(item), rootId) || rootId);\r\n\t\t\t}\r\n\r\n\t\t\t// calculating $level for each item\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis._add_branch(item);\r\n\t\t\t\titem.$level = this.calculateItemLevel(item);\r\n\t\t\t\titem.$local_index = this.getBranchIndex(item.id);\r\n\r\n\t\t\t\tif (!utils.defined(item.$open)) {\r\n\t\t\t\t\titem.$open = utils.defined(item.open) ? item.open : this.$openInitially();\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tthis._updateOrder();\r\n\t\t},\r\n\t\t_isSplitItem: function(item){\r\n\t\t\treturn (item.render == \"split\" && this.hasChild(item.id));\r\n\t\t},\r\n\t\tparse: function(data){\r\n\t\t\tif (!this._skip_refresh) {\r\n\t\t\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\t\t}\r\n\t\t\tvar loaded = this._parseInner(data);\r\n\t\t\tthis._buildTree(loaded);\r\n\t\t\tthis.filter();\r\n\t\t\tif (!this._skip_refresh) {\r\n\t\t\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_addItemInner: function(item, index){\r\n\r\n\t\t\tvar parent = this.getParent(item);\r\n\r\n\t\t\tif(!utils.defined(parent)){\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t\tthis.setParent(item, parent);\r\n\t\t\t}\r\n\r\n\t\t\tvar parentIndex = this.getIndexById(parent);\r\n\t\t\tvar targetIndex = parentIndex + Math.min(Math.max(index, 0), this.visibleOrder.length);\r\n\r\n\t\t\tif(targetIndex*1 !== targetIndex){\r\n\t\t\t\ttargetIndex = undefined;\r\n\t\t\t}\r\n\t\t\tDataStore.prototype._addItemInner.call(this, item, targetIndex);\r\n\t\t\tthis.setParent(item, parent);\r\n\r\n\t\t\tif(item.hasOwnProperty(\"$rendered_parent\")){\r\n\t\t\t\tthis._move_branch(item, item.$rendered_parent);\r\n\t\t\t}\r\n\t\t\tthis._add_branch(item, index);\r\n\t\t},\r\n\t\t_changeIdInner: function(oldId, newId){\r\n\t\t\tvar children = this.getChildren(oldId);\r\n\t\t\tvar visibleOrder = this._searchVisibleOrder[oldId];\r\n\r\n\t\t\tDataStore.prototype._changeIdInner.call(this, oldId, newId);\r\n\r\n\t\t\tvar parent = this.getParent(newId);\r\n\r\n\t\t\tthis._replace_branch_child(parent, oldId, newId);\r\n\r\n\t\t\tif(this._branches[oldId]){\r\n\t\t\t\tthis._branches[newId] = this._branches[oldId];\r\n\t\t\t}\r\n\t\t\tfor(var i = 0; i < children.length; i++){\r\n\t\t\t\tvar child = this.getItem(children[i]);\r\n\t\t\t\tchild[this.$parentProperty] = newId;\r\n\t\t\t\tchild.$rendered_parent = newId;\r\n\t\t\t}\r\n\r\n\t\t\tthis._searchVisibleOrder[newId] = visibleOrder;\r\n\t\t\tdelete this._branches[oldId];\r\n\t\t},\r\n\r\n\t\t_traverseBranches: function(code, parent){\r\n\t\t\tif (!utils.defined(parent)) {\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\t\t\tvar branch = this._branches[parent];\r\n\t\t\tif (branch) {\r\n\t\t\t\tfor (var i = 0; i < branch.length; i++) {\r\n\t\t\t\t\tvar itemId = branch[i];\r\n\t\t\t\t\tcode.call(this, itemId);\r\n\t\t\t\t\tif (this._branches[itemId])\r\n\t\t\t\t\t\tthis._traverseBranches(code, itemId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_updateOrder: function(code){\r\n\r\n\t\t\tthis.fullOrder = powerArray.$create();\r\n\t\t\tthis._traverseBranches(function(taskId){\r\n\t\t\t\tthis.fullOrder.push(taskId);\r\n\t\t\t});\r\n\r\n\t\t\tif(code)\r\n\t\t\t\tDataStore.prototype._updateOrder.call(this, code);\r\n\t\t},\r\n\r\n\t\t_removeItemInner: function(id){\r\n\r\n\t\t\tvar items = [];\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\titems.push(child);\r\n\t\t\t}, id);\r\n\r\n\t\t\titems.push(this.getItem(id));\r\n\r\n\t\t\tfor(var i = 0; i < items.length; i++){\r\n\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i]), null);\r\n\t\t\t\tDataStore.prototype._removeItemInner.call(this, items[i].id);\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i]), null);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmove: function(sid, tindex, parent){\r\n\t\t\t//target id as 4th parameter\r\n\t\t\tvar id = arguments[3];\r\n\t\t\tvar config = this._ganttConfig || {};\r\n\t\t\tvar root_id = config.root_id || 0;\r\n\t\t\tid = replaceValidZeroId(id, root_id);\r\n\t\t\tif (id) {\r\n\t\t\t\tif (id === sid) return;\r\n\r\n\t\t\t\tparent = this.getParent(id);\r\n\t\t\t\ttindex = this.getBranchIndex(id);\r\n\t\t\t}\r\n\t\t\tif(isEqualIds(sid, parent)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!utils.defined(parent)) {\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\t\t\tvar source = this.getItem(sid);\r\n\t\t\tvar source_pid = this.getParent(source.id);\r\n\r\n\t\t\tvar tbranch = this.getChildren(parent);\r\n\r\n\t\t\tif (tindex == -1)\r\n\t\t\t\ttindex = tbranch.length + 1;\r\n\t\t\tif (isEqualIds(source_pid, parent)) {\r\n\t\t\t\tvar sindex = this.getBranchIndex(sid);\r\n\t\t\t\tif (sindex == tindex) return;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.callEvent(\"onBeforeItemMove\", [sid, parent, tindex]) === false)\r\n\t\t\t\treturn false;\r\n\r\n\t\t\tvar placeholderIds = [];\r\n\t\t\tfor(var i = 0; i < tbranch.length; i++){\r\n\t\t\t\tif (isPlaceholderTask(tbranch[i], null, this, this._ganttConfig)){\r\n\t\t\t\t\tplaceholderIds.push(tbranch[i]);\r\n\t\t\t\t\ttbranch.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._replace_branch_child(source_pid, sid);\r\n\t\t\ttbranch = this.getChildren(parent);\r\n\r\n\t\t\tvar tid = tbranch[tindex];\r\n\t\t\ttid = replaceValidZeroId(tid, root_id);\r\n\t\t\tif (!tid) //adding as last element\r\n\t\t\t\ttbranch.push(sid);\r\n\t\t\telse\r\n\t\t\t\ttbranch = tbranch.slice(0, tindex).concat([ sid ]).concat(tbranch.slice(tindex));\r\n\r\n\t\t\tif (placeholderIds.length){\r\n\t\t\t\ttbranch = tbranch.concat(placeholderIds);\r\n\t\t\t}\r\n\t\t\t// GS-2423 to return initial parent to the task before it will be moved\r\n\t\t\tif (!isEqualIds(source.$rendered_parent, source_pid) && !isEqualIds(source_pid, parent)){\r\n\t\t\t\tsource.$rendered_parent = source_pid;\r\n\t\t\t}\r\n\t\t\tthis.setParent(source, parent);\r\n\t\t\tthis._branches[parent] = tbranch;\r\n\r\n\t\t\tvar diff = this.calculateItemLevel(source) - source.$level;\r\n\t\t\tsource.$level += diff;\r\n\t\t\tthis.eachItem(function(item){\r\n\t\t\t\titem.$level += diff;\r\n\t\t\t}, source.id, this);\r\n\r\n\r\n\t\t\tthis._moveInner(this.getIndexById(sid), this.getIndexById(parent) + tindex);\r\n\r\n\t\t\tthis.callEvent(\"onAfterItemMove\", [sid, parent, tindex]);\r\n\t\t\tthis.refresh();\r\n\t\t},\r\n\r\n\t\tgetBranchIndex: function(id){\r\n\t\t\tvar branch = this.getChildren(this.getParent(id));\r\n\t\t\tlet index = branch.indexOf(id + \"\");\r\n\t\t\tif (index == -1){\r\n\t\t\t\tindex = branch.indexOf(+id);\r\n\t\t\t}\r\n\t\t\treturn index;\r\n\t\t},\r\n\t\thasChild: function(id){\r\n\t\t\tvar branch = this._branches[id];\r\n\t\t\treturn branch && branch.length;\r\n\t\t},\r\n\t\tgetChildren: function(id){\r\n\t\t\tvar branch = this._branches[id];\r\n\t\t\treturn branch ? branch : powerArray.$create();\r\n\t\t},\r\n\r\n\t\tisChildOf: function(childId, parentId){\r\n\t\t\tif (!this.exists(childId))\r\n\t\t\t\treturn false;\r\n\t\t\tif (parentId === this.$getRootId())\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tif (!this.hasChild(parentId))\r\n\t\t\t\treturn false;\r\n\r\n\t\t\tvar item = this.getItem(childId);\r\n\t\t\tvar pid = this.getParent(childId);\r\n\r\n\t\t\tvar parent = this.getItem(parentId);\r\n\t\t\tif(parent.$level >= item.$level){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\twhile (item && this.exists(pid)) {\r\n\t\t\t\titem = this.getItem(pid);\r\n\r\n\t\t\t\tif (item && isEqualIds(item.id, parentId))\r\n\t\t\t\t\treturn true;\r\n\t\t\t\tpid = this.getParent(item);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tgetSiblings: function(id){\r\n\t\t\tif(!this.exists(id)){\r\n\t\t\t\treturn powerArray.$create();\r\n\t\t\t}\r\n\t\t\tvar parent = this.getParent(id);\r\n\t\t\treturn this.getChildren(parent);\r\n\r\n\t\t},\r\n\t\tgetNextSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(isEqualIds(siblings[i], id)){\r\n\t\t\t\t\tvar nextSibling = siblings[i+1];\r\n\t\t\t\t\tif (nextSibling === 0 && i > 0){\r\n\t\t\t\t\t\tnextSibling = \"0\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn nextSibling || null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetPrevSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(isEqualIds(siblings[i], id)){\r\n\t\t\t\t\tvar previousSibling = siblings[i-1];\r\n\t\t\t\t\tif (previousSibling === 0 && i > 0){\r\n\t\t\t\t\t\tpreviousSibling = \"0\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn previousSibling || null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetParent: function(id){\r\n\t\t\tvar item = null;\r\n\t\t\tif(id.id !== undefined){\r\n\t\t\t\titem = id;\r\n\t\t\t}else{\r\n\t\t\t\titem = this.getItem(id);\r\n\t\t\t}\r\n\r\n\t\t\tvar parent;\r\n\t\t\tif(item){\r\n\t\t\t\tparent = item[this.$parentProperty];\r\n\t\t\t}else{\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\t\t\treturn parent;\r\n\r\n\t\t},\r\n\r\n\t\tclearAll: function(){\r\n\t\t\tthis._branches = {};\r\n\t\t\tDataStore.prototype.clearAll.call(this);\r\n\t\t},\r\n\r\n\t\tcalculateItemLevel: function(item){\r\n\t\t\tvar level = 0;\r\n\t\t\tthis.eachParent(function(){\r\n\t\t\t\tlevel++;\r\n\t\t\t}, item);\r\n\t\t\treturn level;\r\n\t\t},\r\n\r\n\t\t_setParentInner: function(item, new_pid, silent){\r\n\t\t\tif(!silent){\r\n\t\t\t\tif(item.hasOwnProperty(\"$rendered_parent\")){\r\n\t\t\t\t\tthis._move_branch(item, item.$rendered_parent, new_pid);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._move_branch(item, item[this.$parentProperty], new_pid);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetParent: function(item, new_pid, silent){\r\n\t\t\tthis._setParentInner(item, new_pid, silent);\r\n\r\n\t\t\titem[this.$parentProperty] = new_pid;\r\n\t\t},\r\n\r\n\t\t_eachItemCached: function(code, cache){\r\n\t\t\tfor(var i = 0, len = cache.length; i < len; i++){\r\n\t\t\t\tcode.call(this, cache[i]);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_eachItemIterate: function(code, startId, cache){\r\n\t\t\tvar itemsStack = this.getChildren(startId);\r\n\t\t\tif(itemsStack.length){\r\n\t\t\t\titemsStack = itemsStack.slice().reverse();\r\n\t\t\t}\r\n\t\t\twhile(itemsStack.length){\r\n\t\t\t\tvar itemId = itemsStack.pop();\r\n\t\t\t\tvar item = this.getItem(itemId);\r\n\t\t\t\tcode.call(this, item);\r\n\t\t\t\tif(cache){\r\n\t\t\t\t\tcache.push(item);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.hasChild(item.id)){\r\n\t\t\t\t\tvar children = this.getChildren(item.id);\r\n\t\t\t\t\tvar len = children.length;\r\n\t\t\t\t\tfor(var i = len - 1; i >= 0; i--){\r\n\t\t\t\t\t\titemsStack.push(children[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\teachItem: function(code, parent){\r\n\t\t\tvar rootId = this.$getRootId();\r\n\t\t\tif (!utils.defined(parent)) {\r\n\t\t\t\tparent = rootId;\r\n\t\t\t}\r\n\t\t\tvar startId = replaceValidZeroId(parent, rootId) || rootId;\r\n\r\n\t\t\tvar useCache = false;\r\n\t\t\tvar buildCache = false;\r\n\t\t\tvar cache = null;\r\n\t\t\tif(startId === rootId){\r\n\t\t\t\tif(this._eachItemMainRangeCache){\r\n\t\t\t\t\tuseCache = true;\r\n\t\t\t\t\tcache = this._eachItemMainRangeCache;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbuildCache = true;\r\n\t\t\t\t\tcache = this._eachItemMainRangeCache = [];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(useCache){\r\n\t\t\t\tthis._eachItemCached(code, cache);\r\n\t\t\t}else{\r\n\t\t\t\tthis._eachItemIterate(code, startId, buildCache ? cache : null);\r\n\t\t\t}\r\n\t\t},\r\n\t\teachParent: function(code, startItem) {\r\n\t\t\tvar parentsHash = {};\r\n\t\t\tvar item = startItem;\r\n\t\t\tvar parent = this.getParent(item);\r\n\r\n\t\t\twhile (this.exists(parent)) {\r\n\t\t\t\tif (parentsHash[parent]) {\r\n\t\t\t\t\tthrow new Error(\"Invalid tasks tree. Cyclic reference has been detected on task \" + parent);\r\n\t\t\t\t}\r\n\t\t\t\tparentsHash[parent] = true;\r\n\t\t\t\titem = this.getItem(parent);\r\n\t\t\t\tcode.call(this, item);\r\n\t\t\t\tparent = this.getParent(item);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_add_branch: function(item, index, parent){\r\n\t\t\tvar pid = parent === undefined ? this.getParent(item) : parent;\r\n\t\t\tif (!this.hasChild(pid))\r\n\t\t\t\tthis._branches[pid] = powerArray.$create();\r\n\t\t\tvar branch = this.getChildren(pid);\r\n\t\t\tvar added_already = branch.indexOf(item.id + \"\") > -1 || branch.indexOf(+item.id) > -1;\r\n\t\t\tif(!added_already){\r\n\t\t\t\tif(index*1 == index){\r\n\r\n\t\t\t\t\tbranch.splice(index, 0, item.id);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbranch.push(item.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\titem.$rendered_parent = pid;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_move_branch: function(item, old_parent, new_parent){\r\n\t\t\tthis._eachItemMainRangeCache = null;\r\n\t\t\t//this.setParent(item, new_parent);\r\n\t\t\t//this._sync_parent(task);\r\n\t\t\tthis._replace_branch_child(old_parent, item.id);\r\n\t\t\tif(this.exists(new_parent) || isEqualIds(new_parent, this.$getRootId())){\r\n\r\n\t\t\t\tthis._add_branch(item, undefined, new_parent);\r\n\t\t\t}else{\r\n\t\t\t\tdelete this._branches[item.id];\r\n\t\t\t}\r\n\t\t\titem.$level =  this.calculateItemLevel(item);\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\tchild.$level = this.calculateItemLevel(child);\r\n\t\t\t}, item.id);\r\n\t\t},\r\n\r\n\t\t_replace_branch_child: function(node, old_id, new_id){\r\n\t\t\tvar branch = this.getChildren(node);\r\n\t\t\tif (branch && node !== undefined){\r\n\t\t\t\tvar newbranch = powerArray.$create();\r\n\r\n\t\t\t\tlet index = branch.indexOf(old_id + \"\");\r\n\t\t\t\tif (index == -1 && !isNaN(+old_id)){\r\n\t\t\t\t\tindex = branch.indexOf(+old_id);\r\n\t\t\t\t} \r\n\r\n\t\t\t\tif (index > -1){\r\n\t\t\t\t\tif (new_id){\r\n\t\t\t\t\t\tbranch.splice(index, 1, new_id);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbranch.splice(index, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tnewbranch = branch;\r\n\r\n\t\t\t\tthis._branches[node] = newbranch;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tsort: function(field, desc, parent){\r\n\t\t\tif (!this.exists(parent)) {\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\r\n\t\t\tif (!field) field = \"order\";\r\n\t\t\tvar criteria = (typeof(field) == \"string\") ? (function(a, b) {\r\n\t\t\t\tif (a[field] == b[field] ||\r\n\t\t\t\t\t(helpers.isDate(a[field]) && helpers.isDate(b[field]) && a[field].valueOf() == b[field].valueOf()))\r\n\t\t\t\t{\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar result = a[field] > b[field];\r\n\t\t\t\treturn result ? 1 : -1;\r\n\t\t\t}) : field;\r\n\r\n\t\t\tif (desc) {\r\n\t\t\t\tvar original_criteria = criteria;\r\n\t\t\t\tcriteria = function (a, b) {\r\n\t\t\t\t\treturn original_criteria(b, a);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tvar els = this.getChildren(parent);\r\n\r\n\t\t\tif (els){\r\n\t\t\t\tvar temp = [];\r\n\t\t\t\tfor (var i = els.length - 1; i >= 0; i--)\r\n\t\t\t\t\ttemp[i] = this.getItem(els[i]);\r\n\r\n\t\t\t\ttemp.sort(criteria);\r\n\r\n\t\t\t\tfor (var i = 0; i < temp.length; i++) {\r\n\t\t\t\t\tels[i] = temp[i].id;\r\n\t\t\t\t\tthis.sort(field, desc, els[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfilter: function(rule){\r\n\t\t\tfor(let i in this.pull){\r\n\t\t\t\tconst renderedParent = this.pull[i].$rendered_parent;\r\n\t\t\t\tconst actualParent = this.getParent(this.pull[i]);\r\n\t\t\t\t//GS-2339: could be different types of the ids\r\n\t\t\t\tif(!isEqualIds(renderedParent,actualParent)){\r\n\t\t\t\t\tthis._move_branch(this.pull[i], renderedParent, actualParent);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn DataStore.prototype.filter.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\topen: function(id){\r\n\t\t\tif(this.exists(id)){\r\n\t\t\t\tthis.getItem(id).$open = true;\r\n\t\t\t\t// GS-2170. Do not recalculate the indexes and dates as they will be recalculated later\r\n\t\t\t\tthis._skipTaskRecalculation = true;\r\n\t\t\t\tthis.callEvent(\"onItemOpen\", [id]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclose: function(id){\r\n\t\t\tif(this.exists(id)){\r\n\t\t\t\tthis.getItem(id).$open = false;\r\n\t\t\t\t// GS-2170. Do not recalculate the indexes and dates as they will be recalculated later\r\n\t\t\t\tthis._skipTaskRecalculation = true;\r\n\t\t\t\tthis.callEvent(\"onItemClose\", [id]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdestructor: function(){\r\n\t\t\tDataStore.prototype.destructor.call(this);\r\n\t\t\tthis._branches = null;\r\n\t\t\tthis._indexRangeCache = {};\r\n\t\t\tthis._eachItemMainRangeCache = null;\r\n\t\t}\r\n\t},\r\n\tDataStore.prototype\r\n);\r\n\r\nfunction isEqualIds(first, second){\r\n\treturn String(first) === String(second);\r\n};\r\n\r\nexport default TreeDataStore;","import env from \"./env\";\r\n\r\nexport default function(gantt){\r\n\treturn env.isNode || !gantt.$root;\r\n};","import isHeadless from \"../../utils/is_headless\";\r\n\r\nconst storeRenderCreator = function(name, gantt){\r\n\r\n\tconst store = gantt.getDatastore(name);\r\n\r\n\tconst itemRepainter = {\r\n\t\trenderItem: function(id, renderer){\r\n\r\n\t\t\tconst renders = renderer.getLayers();\r\n\r\n\t\t\tconst item = store.getItem(id);\r\n\t\t\tif(item && store.isVisible(id)) {\r\n\t\t\t\tfor (let i = 0; i < renders.length; i++)\r\n\t\t\t\t\trenders[i].render_item(item);\r\n\t\t\t}\r\n\t\t},\r\n\t\trenderItems: function(renderer){\r\n\t\t\tconst renderers = renderer.getLayers();\r\n\t\t\tfor (let i = 0; i < renderers.length; i++) {\r\n\t\t\t\trenderers[i].clear();\r\n\t\t\t}\r\n\r\n\t\t\tlet allData = null;\r\n\r\n\t\t\tconst loadedRanges = {};\r\n\t\t\tfor (let i = 0; i < renderers.length; i++) {\r\n\t\t\t\tconst layer = renderers[i];\r\n\t\t\t\tlet layerData;\r\n\t\t\t\tif(layer.get_visible_range){\r\n\r\n\t\t\t\t\tvar range = layer.get_visible_range(store);\r\n\t\t\t\t\tif(range.start !== undefined && range.end !== undefined){\r\n\t\t\t\t\t\tvar key = range.start + \" - \" + range.end;\r\n\t\t\t\t\t\tif(loadedRanges[key]){\r\n\t\t\t\t\t\t\tlayerData = loadedRanges[key];\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tlayerData = store.getIndexRange(range.start, range.end);\r\n\t\t\t\t\t\t\tloadedRanges[key] = layerData;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else if(range.ids !== undefined){\r\n\t\t\t\t\t\tlayerData = range.ids.map(function(id){\r\n\t\t\t\t\t\t\treturn store.getItem(id);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthrow new Error(\"Invalid range returned from 'getVisibleRange' of the layer\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(!allData){\r\n\t\t\t\t\t\tallData = store.getVisibleItems();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlayerData = allData;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (layer.prepare_data) {\r\n\t\t\t\t\t// GS-1605. Highlight timeline cells below tasks and in an empty chart\r\n\t\t\t\t\tlayer.prepare_data(layerData);\r\n\t\t\t\t}\r\n\r\n\t\t\t\trenderers[i].render_items(layerData);\r\n\t\t\t}\r\n\t\t},\r\n\t\tupdateItems: function(layer) {\r\n\t\t\tif(layer.update_items){\r\n\t\t\t\tlet data = [];\r\n\t\t\t\tif(layer.get_visible_range){\r\n\r\n\t\t\t\t\tvar range = layer.get_visible_range(store);\r\n\t\t\t\t\tif(range.start !== undefined && range.end !== undefined){\r\n\t\t\t\t\t\tdata = store.getIndexRange(range.start, range.end);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(range.ids !== undefined){\r\n\t\t\t\t\t\tlet extraDataArr = range.ids.map(function(id){\r\n\t\t\t\t\t\t\treturn store.getItem(id);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// GS-2502: range.ids might not exist in other datastores\r\n\t\t\t\t\t\tif(extraDataArr.length > 0){\r\n\t\t\t\t\t\t\textraDataArr = extraDataArr.filter(element => element !== undefined);\r\n\t\t\t\t\t\t\tdata = data.concat(extraDataArr);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif((range.start == undefined || range.end == undefined) && range.ids == undefined)  {\r\n\t\t\t\t\t\tthrow new Error(\"Invalid range returned from 'getVisibleRange' of the layer\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdata = store.getVisibleItems();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (layer.prepare_data) {\r\n\t\t\t\t\t// GS-1605. Highlight timeline cells below tasks and in an empty chart\r\n\t\t\t\t\tlayer.prepare_data(data, layer);\r\n\t\t\t\t}\r\n\t\t\t\tlayer.update_items(data);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tstore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(isHeadless(gantt)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tconst renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\t\tif(renderer){\r\n\t\t\trenderer.onUpdateRequest = function(layer){\r\n\t\t\t\titemRepainter.updateItems(layer);\r\n\t\t\t};\r\n\t\t}\r\n\t});\r\n\r\n\tfunction skipRepaint(gantt){\r\n\t\tconst state = gantt.$services.getService(\"state\");\r\n\t\tif(state.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tstore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(skipRepaint(gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(!id || action == \"move\" || action == \"delete\"){\r\n\t\t\tstore.callEvent(\"onBeforeRefreshAll\", []);\r\n\t\t\tstore.callEvent(\"onAfterRefreshAll\", []);\r\n\t\t}else{\r\n\t\t\tstore.callEvent(\"onBeforeRefreshItem\", [item.id]);\r\n\t\t\tstore.callEvent(\"onAfterRefreshItem\", [item.id]);\r\n\t\t}\r\n\t});\r\n\r\n\tstore.attachEvent(\"onAfterRefreshAll\", function(){\r\n\t\tif(isHeadless(gantt)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tconst renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\t\tif(renderer && !skipRepaint(gantt)){\r\n\t\t\titemRepainter.renderItems(renderer);\r\n\t\t}\r\n\t});\r\n\tstore.attachEvent(\"onAfterRefreshItem\", function(id){\r\n\t\tif(isHeadless(gantt)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tconst renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\t\tif(renderer){\r\n\t\t\titemRepainter.renderItem(id, renderer);\r\n\t\t}\r\n\t});\r\n\r\n\t// TODO: probably can be done more in a more efficient way\r\n\tstore.attachEvent(\"onItemOpen\", function(){\r\n\t\tif(isHeadless(gantt) || store.isSilent()){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tgantt.render();\r\n\t});\r\n\r\n\tstore.attachEvent(\"onItemClose\", function(){\r\n\t\tif(isHeadless(gantt) || store.isSilent()){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tgantt.render();\r\n\t});\r\n\r\n\tfunction refreshId(renders, oldId, newId, item) {\r\n\t\tfor (let i = 0; i < renders.length; i++) {\r\n\t\t\trenders[i].change_id(oldId, newId);\r\n\t\t}\r\n\t}\r\n\r\n\tstore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\tif(isHeadless(gantt)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// in case of linked datastores (tasks <-> links), id change should recalculate something in linked datastore before any repaint\r\n\t\t// use onBeforeIdChange for this hook.\r\n\t\t// TODO: use something more reasonable instead\r\n\t\tstore.callEvent(\"onBeforeIdChange\", [oldId, newId]);\r\n\r\n\t\tif(skipRepaint(gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(!store.isSilent()){\r\n\t\t\tconst renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\t\t\tif(renderer){ // missing check for renderer GS-1814\r\n\t\t\t\trefreshId(renderer.getLayers(), oldId, newId, store.getItem(newId));\r\n\t\t\t\titemRepainter.renderItem(newId, renderer);\r\n\t\t\t}else{\r\n\t\t\t\t// GS-1814 repaint ui to apply new id when the datastore don't have own renderer\r\n\t\t\t\tgantt.render();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n};\r\n\r\nexport default {\r\n\tbindDataStore: storeRenderCreator\r\n};","import * as utils from \"../../utils/utils\";\r\nimport createTasksFacade from \"./datastore_tasks\";\r\nimport createLinksFacade from \"./datastore_links\";\r\nimport DataStore from \"../datastore/datastore\";\r\nimport TreeDataStore from \"../datastore/treedatastore\";\r\nimport createDatastoreSelect from \"../datastore/select\";\r\nimport datastoreRender from \"../datastore/datastore_render\";\r\nimport isHeadless from \"../../utils/is_headless\";\r\nimport {replaceValidZeroId} from \"../../utils/helpers\";\r\n\r\nfunction getDatastores(){\r\n\tvar storeNames = this.$services.getService(\"datastores\");\r\n\tvar res = [];\r\n\tfor(var i = 0; i < storeNames.length; i++){\r\n\t\tvar store = this.getDatastore(storeNames[i]);\r\n\t\tif(!store.$destroyed){\r\n\t\t\tres.push(store);\r\n\t\t}\r\n\t}\r\n\treturn res;\r\n}\r\n\r\nvar createDatastoreFacade = function(){\r\n\treturn {\r\n\tcreateDatastore: function(config){\r\n\r\n\t\tvar $StoreType = (config.type || \"\").toLowerCase() == \"treedatastore\" ? TreeDataStore : DataStore;\r\n\r\n\t\tif (config) {\r\n\t\t\tvar self = this;\r\n\t\t\tconfig.openInitially = function(){ return self.config.open_tree_initially; };\r\n\t\t\tconfig.copyOnParse = function(){ return self.config.deepcopy_on_parse; };\r\n\t\t}\r\n\r\n\t\tvar store = new $StoreType(config);\r\n\t\tthis.mixin(store, createDatastoreSelect(store));\r\n\r\n\t\tif (config.name) {\r\n\t\t\tvar servicePrefix = \"datastore:\";\r\n\t\t\tvar storeAccessName = servicePrefix + config.name;\r\n\r\n\t\t\tstore.attachEvent(\"onDestroy\", function(){\r\n\t\t\t\tthis.$services.dropService(storeAccessName);\r\n\t\t\t\tvar storeList = this.$services.getService(\"datastores\");\r\n\t\t\t\tfor(var i = 0; i < storeList.length; i++){\r\n\t\t\t\t\tif(storeList[i] === config.name){\r\n\t\t\t\t\t\tstoreList.splice(i, 1);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\tthis.$services.dropService(storeAccessName);\r\n\t\t\tthis.$services.setService(storeAccessName, function() { return store; } );\r\n\r\n\t\t\tvar storeList = this.$services.getService(\"datastores\");\r\n\t\t\tif (!storeList) {\r\n\t\t\t\tstoreList = [];\r\n\t\t\t\tthis.$services.setService(\"datastores\", function() { return storeList; });\r\n\t\t\t\tstoreList.push(config.name);\r\n\t\t\t} else if (storeList.indexOf(config.name) < 0) {\r\n\t\t\t\tstoreList.push(config.name);\r\n\t\t\t}\r\n\r\n\t\t\tdatastoreRender.bindDataStore(config.name, this);\r\n\r\n\t\t}\r\n\r\n\t\treturn store;\r\n\t},\r\n\tgetDatastore: function(name){\r\n\t\treturn this.$services.getService(\"datastore:\" + name);\r\n\t},\r\n\t_getDatastores: getDatastores,\r\n\r\n\trefreshData: function () {\r\n\t\tvar scrollState;\r\n\t\tif(!isHeadless(this)){\r\n\t\t\tscrollState = this.getScrollState();\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onBeforeDataRender\", []);\r\n\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].refresh();\r\n\t\t}\r\n\r\n\t\tif(this.config.preserve_scroll && !isHeadless(this) && (scrollState.x || scrollState.y)){\r\n\t\t\tthis.scrollTo(scrollState.x, scrollState.y);\r\n\t\t}\r\n\t\tthis.callEvent(\"onDataRender\", []);\r\n\r\n\t},\r\n\r\n\tisChildOf: function(childId, parentId){\r\n\t\treturn this.$data.tasksStore.isChildOf(childId, parentId);\r\n\t},\r\n\r\n\trefreshTask: function (taskId, refresh_links) {\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tvar self = this;\r\n\t\tfunction refreshLinks(){\r\n\t\t\tif (refresh_links !== undefined && !refresh_links)\r\n\t\t\t\treturn;\r\n\t\t\tfor (var i = 0; i < task.$source.length; i++) {\r\n\t\t\t\tself.refreshLink(task.$source[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < task.$target.length; i++) {\r\n\t\t\t\tself.refreshLink(task.$target[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (task && this.isTaskVisible(taskId)) {\r\n\t\t\tthis.$data.tasksStore.refresh(taskId, !!this.getState(\"tasksDnd\").drag_id || refresh_links === false);// do quick refresh during drag and drop\r\n\t\t\trefreshLinks();\r\n\t\t}else if(this.isTaskExists(taskId) && this.isTaskExists(this.getParent(taskId)) && !this._bulk_dnd){\r\n\t\t\tthis.refreshTask(this.getParent(taskId));\r\n\r\n\t\t\tvar hasSplitParent = false;\r\n\t\t\tthis.eachParent(function(parent){\r\n\t\t\t\tif(hasSplitParent || this.isSplitTask(parent)){\r\n\t\t\t\t\thasSplitParent = true;\r\n\t\t\t\t}\r\n\t\t\t}, taskId);\r\n\t\t\tif(hasSplitParent){\r\n\t\t\t\trefreshLinks();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\trefreshLink: function (linkId) {\r\n\t\tthis.$data.linksStore.refresh(linkId, !!this.getState(\"tasksDnd\").drag_id);// do quick refresh during drag and drop\r\n\t},\r\n\r\n\tsilent: function(code){\r\n\t\tvar gantt = this;\r\n\t\tgantt.$data.tasksStore.silent(function(){\r\n\t\t\tgantt.$data.linksStore.silent(function(){\r\n\t\t\t\tcode();\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\r\n\tclearAll: function () {\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\t\r\n\t\t// clear all stores without invoking clearAll event\r\n\t\t// in order to prevent calling handlers when only some stores are cleared\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].silent(function(){\r\n\t\t\t\tstores[i].clearAll();\t\r\n\t\t\t});\r\n\t\t}\r\n\t\t// run clearAll again to invoke events\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].clearAll();\t\r\n\t\t}\r\n\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t\tthis.callEvent(\"onClear\", []);\r\n\t\tthis.render();\r\n\t},\r\n\t_clear_data: function () {\r\n\t\tthis.$data.tasksStore.clearAll();\r\n\t\tthis.$data.linksStore.clearAll();\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t},\r\n\r\n\tselectTask: function(id){\r\n\t\tvar store = this.$data.tasksStore;\r\n\t\tif(!this.config.select_task)\r\n\t\t\treturn false;\r\n\t\tid = replaceValidZeroId(id, this.config.root_id);\r\n\t\tif (id){\r\n\t\t\tlet oldSelectId = this.getSelectedId();\r\n\t\t\t// Don't repaint the resource panel as the data didn't change\r\n\t\t\tstore._skipResourceRepaint = true;\r\n\t\t\tstore.select(id);\r\n\t\t\tstore._skipResourceRepaint = false;\r\n\t\t\t// GS-730. Split task is not included in the tree, \r\n\t\t\t// so the datastore renderer will think that the task is not visible\r\n\t\t\tif (oldSelectId && store.pull[oldSelectId].$split_subtask && oldSelectId != id) {\r\n\t\t\t\tthis.refreshTask(oldSelectId);\r\n\t\t\t}\r\n\t\t\tif (store.pull[id].$split_subtask && oldSelectId != id) {// GS-1850. Do not repaint split task after double click\r\n\t\t\t\tthis.refreshTask(id);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn store.getSelectedId();\r\n\t},\r\n\tunselectTask: function(id){\r\n\t\tvar store = this.$data.tasksStore;\r\n\t\tstore.unselect(id);\r\n\t\t// GS-730. Split task is not included in the tree, \r\n\t\t// so the datastore renderer will think that the task is not visible\r\n\t\tif (id && store.pull[id].$split_subtask) {\r\n\t\t\tthis.refreshTask(id);\r\n\t\t}\r\n\t},\r\n\tisSelectedTask: function(id){\r\n\t\treturn this.$data.tasksStore.isSelected(id);\r\n\t},\r\n\tgetSelectedId: function() {\r\n\t\treturn this.$data.tasksStore.getSelectedId();\r\n\t}\r\n};\r\n};\r\n\r\nfunction createFacade(){\r\n\tvar res = utils.mixin({}, createDatastoreFacade());\r\n\tutils.mixin(res, createTasksFacade());\r\n\tutils.mixin(res, createLinksFacade());\r\n\treturn res;\r\n}\r\n\r\n\r\n\r\n\r\nexport default {create: createFacade};","function createDataStoreSelectMixin(store){\r\n\tvar selectedId = null;\r\n\r\n\tvar deleteItem = store._removeItemInner;\r\n\t\r\n\tfunction unselect(id){\r\n\t\tselectedId = null;\r\n\t\tthis.callEvent(\"onAfterUnselect\", [id]);\r\n\t}\r\n\r\n\tstore._removeItemInner = function(id){\r\n\t\tif(selectedId == id){\r\n\t\t\tunselect.call(this, id);\r\n\t\t}\r\n\r\n\t\tif(selectedId && this.eachItem){\r\n\t\t\tthis.eachItem(function(subItem){\r\n\t\t\t\tif(subItem.id == selectedId){\r\n\t\t\t\t\tunselect.call(this, subItem.id);\r\n\t\t\t\t}\r\n\t\t\t}, id);\r\n\t\t}\r\n\r\n\t\treturn deleteItem.apply(this, arguments);\r\n\t};\r\n\r\n\tstore.attachEvent(\"onIdChange\", function(oldId, newId) {\r\n\t\tif (store.getSelectedId() == oldId) {\r\n\t\t\tstore.silent(function () {\r\n\t\t\t\tstore.unselect(oldId);\r\n\t\t\t\tstore.select(newId);\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\treturn {\r\n\t\tselect: function(id){\r\n\t\t\tif (id){\r\n\r\n\t\t\t\tif(selectedId == id)\r\n\t\t\t\t\treturn selectedId;\r\n\r\n\t\t\t\tif(!this._skip_refresh) {\r\n\t\t\t\t\tif (!this.callEvent(\"onBeforeSelect\", [id])) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.unselect();\r\n\r\n\t\t\t\tselectedId = id;\r\n\r\n\t\t\t\tif(!this._skip_refresh) {\r\n\t\t\t\t\tthis.refresh(id);\r\n\t\t\t\t\tthis.callEvent(\"onAfterSelect\", [id]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn selectedId;\r\n\t\t},\r\n\t\tgetSelectedId: function(){\r\n\t\t\treturn selectedId;\r\n\t\t},\r\n\t\tisSelected: function(id){\r\n\t\t\treturn id == selectedId;\r\n\t\t},\r\n\t\tunselect: function(id){\r\n\t\t\tvar id = id || selectedId;\r\n\t\t\tif(!id)\r\n\t\t\t\treturn;\r\n\t\t\tselectedId = null;\r\n\t\t\tif(!this._skip_refresh){\r\n\t\t\t\tthis.refresh(id);\r\n\t\t\t\tunselect.call(this, id);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport default createDataStoreSelectMixin;","import * as utils from \"../../utils/utils\";\r\n\r\n\r\nvar createLinksStoreFacade = function(){\r\n\treturn {\r\n\tgetLinkCount: function () {\r\n\t\treturn this.$data.linksStore.count();\r\n\t},\r\n\r\n\tgetLink : function (id) {\r\n\t\treturn this.$data.linksStore.getItem(id);\r\n\t},\r\n\r\n\tgetLinks : function () {\r\n\t\treturn this.$data.linksStore.getItems();\r\n\t},\r\n\r\n\tisLinkExists : function (id) {\r\n\t\treturn this.$data.linksStore.exists(id);\r\n\t},\r\n\r\n\taddLink : function (link) {\r\n\t\treturn this.$data.linksStore.addItem(link);\r\n\t},\r\n\r\n\tupdateLink : function (id, data) {\r\n\t\tif (!utils.defined(data))\r\n\t\t\tdata = this.getLink(id);\r\n\t\tthis.$data.linksStore.updateItem(id, data);\r\n\t},\r\n\r\n\tdeleteLink : function (id) {\r\n\t\treturn this.$data.linksStore.removeItem(id);\r\n\t},\r\n\r\n\tchangeLinkId : function (oldid, newid) {\r\n\t\treturn this.$data.linksStore.changeId(oldid, newid);\r\n\t}\r\n};\r\n};\r\n\r\nexport default createLinksStoreFacade;","import * as utils from \"../../../utils/utils\";\r\n\r\nfunction ScaleHelper(gantt){\r\n\tvar dateHelper = gantt.date;\r\n\tvar services = gantt.$services;\r\n\r\n\treturn {\r\n\t\tgetSum: function (sizes, from, to) {\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = sizes.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\r\n\t\t\tvar summ = 0;\r\n\t\t\tfor (var i = from; i <= to; i++)\r\n\t\t\t\tsumm += sizes[i];\r\n\r\n\t\t\treturn summ;\r\n\t\t},\r\n\t\tsetSumWidth: function (sum_width, scale, from, to) {\r\n\t\t\tvar parts = scale.width;\r\n\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tif (from > parts.length - 1 || length <= 0 || to > parts.length - 1)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar oldWidth = this.getSum(parts, from, to);\r\n\r\n\t\t\tvar diff = sum_width - oldWidth;\r\n\r\n\t\t\tthis.adjustSize(diff, parts, from, to);\r\n\t\t\tthis.adjustSize(-diff, parts, to + 1);\r\n\r\n\t\t\tscale.full_width = this.getSum(parts);\r\n\t\t},\r\n\t\tsplitSize: function (width, count) {\r\n\t\t\tvar arr = [];\r\n\t\t\tfor (var i = 0; i < count; i++) arr[i] = 0;\r\n\r\n\t\t\tthis.adjustSize(width, arr);\r\n\t\t\treturn arr;\r\n\r\n\t\t},\r\n\t\tadjustSize: function (width, parts, from, to) {\r\n\t\t\tif (!from)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tvar full = this.getSum(parts, from, to);\r\n\r\n\t\t\tfor (var i = from; i <= to; i++) {\r\n\t\t\t\tvar share = Math.floor(width * (full ? (parts[i] / full) : (1 / length)));\r\n\r\n\t\t\t\tfull -= parts[i];\r\n\t\t\t\twidth -= share;\r\n\t\t\t\tlength--;\r\n\r\n\t\t\t\tparts[i] += share;\r\n\t\t\t}\r\n\t\t\tparts[parts.length - 1] += width;\r\n\t\t},\r\n\t\tsortScales: function (scales) {\r\n\t\t\tfunction cellSize(unit, step) {\r\n\t\t\t\tvar d = new Date(1970, 0, 1);\r\n\t\t\t\treturn dateHelper.add(d, step, unit) - d;\r\n\t\t\t}\r\n\r\n\t\t\tscales.sort(function (a, b) {\r\n\t\t\t\tif (cellSize(a.unit, a.step) < cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t} else if (cellSize(a.unit, a.step) > cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\t\tscales[i].index = i;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_isLegacyMode: function(config){\r\n\t\t\tvar scaleConfig = config || gantt.config;\r\n\t\t\treturn scaleConfig.scale_unit || scaleConfig.date_scale || scaleConfig.subscales;\r\n\t\t},\r\n\t\t_prepareScaleObject: function(scale){\r\n\t\t\tvar format = scale.format;\r\n\t\t\tif(!format){\r\n\t\t\t\tformat = scale.template || scale.date || \"%d %M\";\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof format === \"string\"){\r\n\t\t\t\tformat = gantt.date.date_to_str(format);\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tunit: scale.unit || \"day\",\r\n\t\t\t\tstep: scale.step || 1,\r\n\t\t\t\tformat: format,\r\n\t\t\t\tcss: scale.css\r\n\t\t\t};\r\n\t\t},\r\n\t\tprimaryScale: function(config) {\r\n\t\t\tvar templates = services.getService(\"templateLoader\");\r\n\t\t\tvar legacyMode = this._isLegacyMode(config);\r\n\r\n\t\t\tvar scaleConfig = config || gantt.config;\r\n\r\n\t\t\tvar result;\r\n\t\t\tif(legacyMode){\r\n\t\t\t\ttemplates.initTemplate(\"date_scale\", undefined, undefined, scaleConfig, gantt.config.templates);\r\n\t\t\t\tresult = {\r\n\t\t\t\t\tunit: gantt.config.scale_unit,\r\n\t\t\t\t\tstep: gantt.config.step,\r\n\t\t\t\t\ttemplate: gantt.templates.date_scale,\r\n\t\t\t\t\tdate: gantt.config.date_scale,\r\n\t\t\t\t\tcss: gantt.templates.scale_cell_class\r\n\t\t\t\t};\r\n\t\t\t}else{\r\n\t\t\t\tvar primaryScale = scaleConfig.scales[0];\r\n\t\t\t\tresult = {\r\n\t\t\t\t\tunit: primaryScale.unit,\r\n\t\t\t\t\tstep: primaryScale.step,\r\n\t\t\t\t\ttemplate: primaryScale.template,\r\n\t\t\t\t\tformat: primaryScale.format,\r\n\t\t\t\t\tdate: primaryScale.date,\r\n\t\t\t\t\tcss: primaryScale.css || gantt.templates.scale_cell_class\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\treturn this._prepareScaleObject(result);\r\n\t\t},\r\n\t\tgetSubScales: function(config) {\r\n\t\t\tvar legacyMode = this._isLegacyMode(config);\r\n\t\t\tvar scaleConfig = config || gantt.config;\r\n\t\t\tvar scales;\r\n\t\t\tif(legacyMode){\r\n\t\t\t\tlet docLink = \"https://docs.dhtmlx.com/gantt/migrating.html#:~:text=%3D%20false%3B-,Time%20scale%20settings,-Configuration%20of%20time\";\r\n\t\t\t\tif (gantt.env.isFF){\r\n\t\t\t\t\tdocLink = \"https://docs.dhtmlx.com/gantt/migrating.html#6162\";\r\n\t\t\t\t}\r\n\t\t\t\t// eslint-disable-next-line no-console\r\n\t\t\t\tconsole.warn(`You are using the obsolete scale configuration.\r\nIt will stop working in the future versions.\r\nPlease migrate the configuration to the newer version:\r\n${docLink}`);\r\n\t\t\t\tscales = scaleConfig.subscales || [];\r\n\t\t\t}else{\r\n\t\t\t\tscales = scaleConfig.scales.slice(1);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn scales.map(function(scale){\r\n\t\t\t\treturn this._prepareScaleObject(scale);\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\r\n\t\tprepareConfigs: function (scales, min_coll_width, container_width, scale_height, minDate, maxDate, rtl) {\r\n\t\t\tvar heights = this.splitSize(scale_height, scales.length);\r\n\t\t\tvar full_width = container_width;\r\n\r\n\t\t\tvar configs = [];\r\n\t\t\tfor (var i = scales.length - 1; i >= 0; i--) {\r\n\t\t\t\tvar main_scale = (i == scales.length - 1);\r\n\t\t\t\tvar cfg = this.initScaleConfig(scales[i], minDate, maxDate);\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tthis.processIgnores(cfg);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initColSizes(cfg, min_coll_width, full_width, heights[i]);\r\n\t\t\t\tthis.limitVisibleRange(cfg);\r\n\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tfull_width = cfg.full_width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconfigs.unshift(cfg);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (var i = 0; i < configs.length - 1; i++) {\r\n\t\t\t\tthis.alineScaleColumns(configs[configs.length - 1], configs[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < configs.length; i++) {\r\n\r\n\t\t\t\tif(rtl){\r\n\t\t\t\t\tthis.reverseScale(configs[i]);\r\n\t\t\t\t}\r\n\t\t\t\tthis.setPosSettings(configs[i]);\r\n\t\t\t}\r\n\t\t\treturn configs;\r\n\r\n\t\t},\r\n\r\n\t\treverseScale: function(scale){\r\n\t\t\tscale.width = scale.width.reverse();\r\n\t\t\tscale.trace_x = scale.trace_x.reverse();\r\n\r\n\t\t\tvar indexes = scale.trace_indexes;\r\n\t\t\tscale.trace_indexes = {};\r\n\t\t\tscale.trace_index_transition = {};\r\n\t\t\tscale.rtl = true;\r\n\t\t\tfor(var i = 0; i < scale.trace_x.length; i++){\r\n\t\t\t\tscale.trace_indexes[scale.trace_x[i].valueOf()] = i;\r\n\t\t\t\tscale.trace_index_transition[indexes[scale.trace_x[i].valueOf()]] = i;\r\n\t\t\t}\r\n\t\t\treturn scale;\r\n\t\t},\r\n\r\n\t\tsetPosSettings: function (config) {\r\n\t\t\tfor (var i = 0, len = config.trace_x.length; i < len; i++) {\r\n\t\t\t\tconfig.left.push((config.width[i - 1] || 0) + (config.left[i - 1] || 0));\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_ignore_time_config: function (date, scale) {\r\n\r\n\t\t\tif (gantt.config.skip_off_time) {\r\n\t\t\t\tvar skip = true;\r\n\t\t\t\tvar probe = date;\r\n\r\n\t\t\t\t// check dates in case custom scale unit, e.g. {unit: \"month\", step: 3}\r\n\t\t\t\tfor (var i = 0; i < scale.step; i++) {\r\n\t\t\t\t\tif (i) {\r\n\t\t\t\t\t\tprobe = dateHelper.add(date, i, scale.unit);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tskip = skip && !this.isWorkTime(probe, scale.unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn skip;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t//defined in an extension\r\n\t\tprocessIgnores: function (config) {\r\n\t\t\tconfig.ignore_x = {};\r\n\t\t\tconfig.display_count = config.count;\r\n\t\t},\r\n\t\tinitColSizes: function (config, min_col_width, full_width, line_height) {\r\n\t\t\tvar cont_width = full_width;\r\n\r\n\t\t\tconfig.height = line_height;\r\n\r\n\t\t\tvar column_count = config.display_count === undefined ? config.count : config.display_count;\r\n\r\n\t\t\tif (!column_count)\r\n\t\t\t\tcolumn_count = 1;\r\n\r\n\t\t\tconfig.col_width = Math.floor(cont_width / column_count);\r\n\r\n\t\t\tif (min_col_width) {\r\n\t\t\t\tif (config.col_width < min_col_width) {\r\n\t\t\t\t\tconfig.col_width = min_col_width;\r\n\t\t\t\t\tcont_width = config.col_width * column_count;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconfig.width = [];\r\n\t\t\tvar ignores = config.ignore_x || {};\r\n\t\t\tfor (var i = 0; i < config.trace_x.length; i++) {\r\n\t\t\t\tif (ignores[config.trace_x[i].valueOf()] || (config.display_count == config.count)) {\r\n\t\t\t\t\tconfig.width[i] = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// width of month columns should be proportional month duration\r\n\t\t\t\t\tvar width = 1;\r\n\t\t\t\t\tif (config.unit == \"month\") {\r\n\t\t\t\t\t\tvar days = Math.round((dateHelper.add(config.trace_x[i], config.step, config.unit) - config.trace_x[i]) / (1000 * 60 * 60 * 24));\r\n\t\t\t\t\t\twidth = days;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconfig.width[i] = width;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.adjustSize(cont_width - this.getSum(config.width)/* 1 width per column from the code above */, config.width);\r\n\t\t\tconfig.full_width = this.getSum(config.width);\r\n\t\t},\r\n\t\tinitScaleConfig: function (config, min_date, max_date) {\r\n\t\t\tvar cfg = utils.mixin({\r\n\t\t\t\tcount: 0,\r\n\t\t\t\tcol_width: 0,\r\n\t\t\t\tfull_width: 0,\r\n\t\t\t\theight: 0,\r\n\t\t\t\twidth: [],\r\n\t\t\t\tleft: [],\r\n\t\t\t\ttrace_x: [],\r\n\t\t\t\ttrace_indexes: {},\r\n\t\t\t\tmin_date: new Date(min_date),\r\n\t\t\t\tmax_date: new Date(max_date)\r\n\t\t\t}, config);\r\n\r\n\t\t\tthis.eachColumn(config.unit, config.step, min_date, max_date, function (date) {\r\n\t\t\t\tcfg.count++;\r\n\t\t\t\tcfg.trace_x.push(new Date(date));\r\n\t\t\t\tcfg.trace_indexes[date.valueOf()] = cfg.trace_x.length - 1;\r\n\t\t\t});\r\n\r\n\t\t\tcfg.trace_x_ascending = cfg.trace_x.slice();\r\n\t\t\treturn cfg;\r\n\t\t},\r\n\t\titerateScales: function (lower_scale, upper_scale, from, to, callback) {\r\n\t\t\tvar upper_dates = upper_scale.trace_x;\r\n\t\t\tvar lower_dates = lower_scale.trace_x;\r\n\r\n\t\t\tvar prev = from || 0;\r\n\t\t\tvar end = to || (lower_dates.length - 1);\r\n\t\t\tvar prevUpper = 0;\r\n\r\n\r\n\t\t\tfor (var up = 1; up < upper_dates.length; up++) {\r\n\t\t\t\tvar target_index = (lower_scale.trace_indexes[+upper_dates[up]]);\r\n\t\t\t\tif (target_index !== undefined && target_index <= end) {\r\n\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\tcallback.apply(this, [prevUpper, up, prev, target_index]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprev = target_index;\r\n\t\t\t\t\tprevUpper = up;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\talineScaleColumns: function (lower_scale, upper_scale, from, to) {\r\n\t\t\tthis.iterateScales(lower_scale, upper_scale, from, to, function (upper_start, upper_end, lower_start, lower_end) {\r\n\t\t\t\tvar targetWidth = this.getSum(lower_scale.width, lower_start, lower_end - 1);\r\n\t\t\t\tvar actualWidth = this.getSum(upper_scale.width, upper_start, upper_end - 1);\r\n\t\t\t\tif (actualWidth != targetWidth) {\r\n\t\t\t\t\tthis.setSumWidth(targetWidth, upper_scale, upper_start, upper_end - 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\teachColumn: function (unit, step, min_date, max_date, callback) {\r\n\t\t\tvar start = new Date(min_date),\r\n\t\t\t\tend = new Date(max_date);\r\n\t\t\tif (dateHelper[unit + \"_start\"]) {\r\n\t\t\t\tstart = dateHelper[unit + \"_start\"](start);\r\n\t\t\t}\r\n\r\n\t\t\tvar curr = new Date(start);\r\n\t\t\tif (+curr >= +end) {\r\n\t\t\t\tend = dateHelper.add(curr, step, unit);\r\n\t\t\t}\r\n\t\t\twhile (+curr < +end) {\r\n\t\t\t\tcallback.call(this, new Date(curr));\r\n\t\t\t\tvar tzOffset = curr.getTimezoneOffset();\r\n\t\t\t\tcurr = dateHelper.add(curr, step, unit);\r\n\t\t\t\tcurr = gantt._correct_dst_change(curr, tzOffset, step, unit);\r\n\t\t\t\tif (dateHelper[unit + '_start'])\r\n\t\t\t\t\tcurr = dateHelper[unit + \"_start\"](curr);\r\n\t\t\t}\r\n\t\t},\r\n\t\tlimitVisibleRange: function (cfg) {\r\n\t\t\tvar dates = cfg.trace_x;\r\n\r\n\t\t\tvar left = 0, right = cfg.width.length - 1;\r\n\t\t\tvar diff = 0;\r\n\t\t\tif (+dates[0] < +cfg.min_date && left != right) {\r\n\t\t\t\tvar width = Math.floor(cfg.width[0] * ((dates[1] - cfg.min_date) / (dates[1] - dates[0])));\r\n\t\t\t\tdiff += cfg.width[0] - width;\r\n\t\t\t\tcfg.width[0] = width;\r\n\r\n\t\t\t\tdates[0] = new Date(cfg.min_date);\r\n\t\t\t}\r\n\r\n\t\t\tvar last = dates.length - 1;\r\n\t\t\tvar lastDate = dates[last];\r\n\t\t\tvar outDate = dateHelper.add(lastDate, cfg.step, cfg.unit);\r\n\t\t\tif (+outDate > +cfg.max_date && last > 0) {\r\n\t\t\t\tvar width = cfg.width[last] - Math.floor(cfg.width[last] * ((outDate - cfg.max_date) / (outDate - lastDate)));\r\n\t\t\t\tdiff += cfg.width[last] - width;\r\n\t\t\t\tcfg.width[last] = width;\r\n\t\t\t}\r\n\r\n\t\t\tif (diff) {\r\n\t\t\t\tvar full = this.getSum(cfg.width);\r\n\t\t\t\tvar shared = 0;\r\n\t\t\t\tfor (var i = 0; i < cfg.width.length; i++) {\r\n\t\t\t\t\tvar share = Math.floor(diff * (cfg.width[i] / full));\r\n\t\t\t\t\tcfg.width[i] += share;\r\n\t\t\t\t\tshared += share;\r\n\t\t\t\t}\r\n\t\t\t\tthis.adjustSize(diff - shared, cfg.width);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport default ScaleHelper;\r\n","import ScaleHelper from \"./ui/timeline/scales_ignore\";\r\nimport PrimaryScaleHelper from \"./ui/timeline/scales\";\r\n\r\nfunction resolveConfigRange(unit, gantt){\r\n\tvar range = {\r\n\t\tstart_date:null,\r\n\t\tend_date:null\r\n\t};\r\n\r\n\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](new Date(gantt.config.start_date));\r\n\r\n\t\tvar end = new Date(gantt.config.end_date);\r\n\t\tvar start_interval = gantt.date[unit + \"_start\"](new Date(end));\r\n\t\tif (+end != +start_interval) {\r\n\t\t\tend = gantt.date.add(start_interval, 1, unit);\r\n\t\t} else {\r\n\t\t\tend = start_interval;\r\n\t\t}\r\n\r\n\t\trange.end_date = end;\r\n\t}\r\n\treturn range;\r\n}\r\n\r\nfunction _scale_range_unit(gantt) {\r\n\tvar primaryScale = (new PrimaryScaleHelper(gantt)).primaryScale();\r\n\tvar unit = primaryScale.unit;\r\n\tvar step = primaryScale.step;\r\n\tif (gantt.config.scale_offset_minimal) {\r\n\r\n\t\tvar helper = new ScaleHelper(gantt);\r\n\t\tvar scales = [helper.primaryScale()].concat(helper.getSubScales());\r\n\r\n\t\thelper.sortScales(scales);\r\n\t\tunit = scales[scales.length - 1].unit;\r\n\t\tstep = scales[scales.length - 1].step || 1;\r\n\t}\r\n\treturn { unit:unit, step:step };\r\n}\r\n\r\nfunction _init_tasks_range(gantt) {\r\n\tvar cfg = _scale_range_unit(gantt);\r\n\tvar unit = cfg.unit,\r\n\t\tstep = cfg.step;\r\n\tvar range = resolveConfigRange(unit, gantt);\r\n\r\n\t// GS-1544: Show correct date range if we have tasks or only projects\r\n\tif(!(range.start_date && range.end_date)){\r\n\t\tvar onlyProjectTasks = true;\r\n\t\tvar tasks = gantt.getTaskByTime();\r\n\t\tfor (var i = 0; i < tasks.length; i++) {\r\n\t\t\tvar task = tasks[i];\r\n\t\t\tif (task.type !== gantt.config.types.project){\r\n\t\t\t\tonlyProjectTasks = false;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (tasks.length && onlyProjectTasks){\r\n\t\t\tvar start_date = tasks[0].start_date;\r\n\t\t\tvar end_date = gantt.date.add(start_date, 1, gantt.config.duration_unit);\r\n\t\t\trange = {\r\n\t\t\t\tstart_date: new Date(start_date),\r\n\t\t\t\tend_date: new Date(end_date)\r\n\t\t\t};\r\n\t\t} else{\r\n\t\t\trange = gantt.getSubtaskDates();\r\n\t\t}\r\n\r\n\t\tif(!range.start_date || !range.end_date){\r\n\t\t\trange = {\r\n\t\t\t\tstart_date: new Date(),\r\n\t\t\t\tend_date: new Date()\r\n\t\t\t};\r\n\t\t}\r\n\t\t// extend the displayed date range including the constraints, deadlines and baselines\r\n\t\tgantt.eachTask(function(task){\r\n\t\t\tif (gantt.config.deadlines && task.deadline){\r\n\t\t\t\textendRangeForDates(range, task.deadline, task.deadline);\r\n\t\t\t}\r\n\t\t\tif (task.constraint_date && task.constraint_type){\r\n\t\t\t\tif (gantt.config.constraint_types && task.constraint_type !== gantt.config.constraint_types.ASAP && task.constraint_type !== gantt.config.constraint_types.ALAP){\r\n\t\t\t\t\textendRangeForDates(range, task.constraint_date, task.constraint_date);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (gantt.config.baselines && task.baselines){\r\n\t\t\t\ttask.baselines.forEach(function(baseline){\r\n\t\t\t\t\textendRangeForDates(range, baseline.start_date, baseline.end_date);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](range.start_date);\r\n\t\trange.start_date = gantt.calculateEndDate({\r\n\t\t\tstart_date: gantt.date[unit + \"_start\"](range.start_date),\r\n\t\t\tduration: -1,\r\n\t\t\tunit: unit,\r\n\t\t\tstep:step\r\n\t\t});//one free column before first task\r\n\r\n\t\trange.end_date = gantt.date[unit + \"_start\"](range.end_date);\r\n\t\trange.end_date = gantt.calculateEndDate({start_date: range.end_date, duration: 2, unit: unit, step:step});//one free column after last task\r\n\t}\r\n\r\n\tgantt._min_date = range.start_date;\r\n\tgantt._max_date = range.end_date;\r\n}\r\n\r\nfunction extendRangeForDates(range, start_date, end_date){\r\n\tif (start_date < range.start_date){\r\n\t\trange.start_date = new Date(start_date);\r\n\t}\r\n\tif (end_date > range.end_date){\r\n\t\trange.end_date = new Date(end_date);\r\n\t}\r\n}\r\n\r\nfunction _adjust_scales(gantt) {\r\n\tif (gantt.config.fit_tasks) {\r\n\t\tvar old_min = +gantt._min_date,\r\n\t\t\told_max = +gantt._max_date;\r\n\t\t//this._init_tasks_range();\r\n\t\tif (+gantt._min_date != old_min || +gantt._max_date != old_max) {\r\n\t\t\tgantt.render();\r\n\r\n\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nexport default function updateTasksRange(gantt){\r\n\t_init_tasks_range(gantt);\r\n\t_adjust_scales(gantt);\r\n};\r\n","function copyLinkIdsArray(gantt, linkIds, targetHash){\r\n\tfor(var i = 0; i < linkIds.length; i++) {\r\n\t\tif(gantt.isLinkExists(linkIds[i])){\r\n\t\t\ttargetHash[linkIds[i]] = gantt.getLink(linkIds[i]);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction copyLinkIds(gantt, task, targetHash){\r\n\tcopyLinkIdsArray(gantt, task.$source, targetHash);\r\n\tcopyLinkIdsArray(gantt, task.$target, targetHash);\r\n}\r\n\r\nfunction getSubtreeLinks(gantt, rootId){\r\n\tvar res = {};\r\n\r\n\tif(gantt.isTaskExists(rootId)){\r\n\t\tcopyLinkIds(gantt, gantt.getTask(rootId), res);\r\n\t}\r\n\r\n\tgantt.eachTask(function(child){\r\n\t\tcopyLinkIds(gantt, child, res);\r\n\t}, rootId);\r\n\r\n\treturn res;\r\n}\r\n\r\nfunction getSubtreeTasks(gantt, rootId){\r\n\tvar res = {};\r\n\r\n\tgantt.eachTask(function(child){\r\n\t\tres[child.id] = child;\r\n\t}, rootId);\r\n\r\n\treturn res;\r\n}\r\n\r\nexport default {\r\n\tgetSubtreeLinks: getSubtreeLinks,\r\n\tgetSubtreeTasks: getSubtreeTasks\r\n};","import * as helpers from \"../../utils/helpers\";\r\nimport treeHelper from \"../../utils/task_tree_helpers\";\r\n\r\n\r\nexport default class DataProcessorEvents {\r\n\tprotected _dataProcessorHandlers: any[];\r\n\tprotected $gantt: any;\r\n\tprotected $dp: any;\r\n\r\n\tconstructor(gantt: any, dp: any) {\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis.$dp = dp;\r\n\t\tthis._dataProcessorHandlers = [];\r\n\t}\r\n\r\n\tattach() {\r\n\t\tconst dp = this.$dp;\r\n\t\tconst gantt = this.$gantt;\r\n\t\tconst cascadeDelete = {};\r\n\r\n\t\tconst clientSideDelete = (id) => {\r\n\t\t\treturn this.clientSideDelete(id, dp, gantt);\r\n\t\t};\r\n\r\n\t\tfunction getTaskLinks(task) {\r\n\t\t\tlet _links = [];\r\n\r\n\t\t\tif (task.$source) {\r\n\t\t\t\t_links = _links.concat(task.$source);\r\n\t\t\t}\r\n\t\t\tif (task.$target) {\r\n\t\t\t\t_links = _links.concat(task.$target);\r\n\t\t\t}\r\n\r\n\t\t\treturn _links;\r\n\t\t}\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterTaskAdd\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (gantt.isTaskExists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tdp.setUpdated(id, true, \"inserted\");\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterTaskUpdate\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (gantt.isTaskExists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tdp.setUpdated(id, true);\r\n\r\n\t\t\t\t// gantt can be destroyed/reinitialized after dp.setUpdated\r\n\t\t\t\tif(gantt._sendTaskOrder){\r\n\t\t\t\t\tgantt._sendTaskOrder(id, item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onBeforeTaskDelete\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (gantt.config.cascade_delete) {\r\n\t\t\t\tcascadeDelete[id] = {\r\n\t\t\t\t\ttasks: treeHelper.getSubtreeTasks(gantt, id),\r\n\t\t\t\t\tlinks: treeHelper.getSubtreeLinks(gantt, id)\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t// GS-631. Keep the deleted item in Gantt until we receive the successful response from the server\r\n\t\t\tif (dp.deleteAfterConfirmation) {\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tdp.setUpdated(id, true, \"deleted\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterTaskDelete\", function(id, item) { // tslint:disable-line\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\r\n\t\t\t// not send delete request if item is not inserted into the db - just remove it from the client\r\n\t\t\tconst needDbDelete = !clientSideDelete(id);\r\n\t\t\tconst needCascadeDelete = gantt.config.cascade_delete && cascadeDelete[id];\r\n\t\t\tif (!needDbDelete && !needCascadeDelete) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (needCascadeDelete) {\r\n\t\t\t\tconst dpMode = dp.updateMode;\r\n\t\t\t\tdp.setUpdateMode(\"off\");\r\n\r\n\t\t\t\tconst cascade = cascadeDelete[id];\r\n\t\t\t\tfor (const i in cascade.tasks) {\r\n\t\t\t\t\tif (!clientSideDelete(i)) {\r\n\t\t\t\t\t\tdp.storeItem(cascade.tasks[i]);\r\n\t\t\t\t\t\tdp.setUpdated(i, true, \"deleted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\t\tfor (const i in cascade.links) {\r\n\t\t\t\t\tif (!clientSideDelete(i)) {\r\n\t\t\t\t\t\tdp.storeItem(cascade.links[i]);\r\n\t\t\t\t\t\tdp.setUpdated(i, true, \"deleted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcascadeDelete[id] = null;\r\n\r\n\t\t\t\tif (dpMode !== \"off\") {\r\n\t\t\t\t\tdp.sendAllData();\r\n\t\t\t\t}\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tdp.setUpdateMode(dpMode);\r\n\t\t\t}\r\n\r\n\t\t\tif (needDbDelete){\r\n\t\t\t\tdp.storeItem(item);\r\n\t\t\t\tif (!dp.deleteAfterConfirmation){\r\n\t\t\t\t\tdp.setUpdated(id, true, \"deleted\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (dp.updateMode !== \"off\" && !dp._tSend) {\r\n\t\t\t\tdp.sendAllData();\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterLinkUpdate\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (gantt.isLinkExists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\t\tdp.setUpdated(id, true);\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterLinkAdd\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (gantt.isLinkExists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\t\tdp.setUpdated(id, true,\"inserted\");\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterLinkDelete\", function(id, item) { // tslint:disable-line\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\r\n\t\t\tconst needDbDelete = !clientSideDelete(id);\r\n\t\t\tif (!needDbDelete) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdp.storeItem(item);\r\n\t\t\tdp.setUpdated(id, true,\"deleted\");\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onRowDragEnd\", function(id, target) { // tslint:disable-line\r\n\t\t\tgantt._sendTaskOrder(id, gantt.getTask(id));\r\n\t\t}));\r\n\r\n\t\tlet tasks = null;\r\n\t\tlet links = null;\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onTaskIdChange\", function(oldId, newId) { // tslint:disable-line\r\n\t\t\tif (!dp._waitMode) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst children = gantt.getChildren(newId);\r\n\t\t\tif (children.length) {\r\n\t\t\t\ttasks = tasks || {};\r\n\r\n\t\t\t\tfor (let i = 0; i < children.length; i++) {\r\n\t\t\t\t\tconst ch = this.getTask(children[i]);\r\n\t\t\t\t\ttasks[ch.id] = ch;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst item = this.getTask(newId);\r\n\t\t\tconst itemLinks = getTaskLinks(item);\r\n\r\n\t\t\tif (itemLinks.length) {\r\n\t\t\t\tlinks = links || {};\r\n\r\n\t\t\t\tfor (let i = 0; i < itemLinks.length; i++) {\r\n\t\t\t\t\tconst link = this.getLink(itemLinks[i]);\r\n\t\t\t\t\tlinks[link.id] = link;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tdp.attachEvent(\"onAfterUpdateFinish\", function() {\r\n\t\t\tif (tasks || links) {\r\n\t\t\t\tgantt.batchUpdate(function() {\r\n\t\t\t\t\tfor (const id in tasks) {\r\n\t\t\t\t\t\tgantt.updateTask(tasks[id].id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (const id in links) {\r\n\t\t\t\t\t\tgantt.updateLink(links[id].id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttasks = null;\r\n\t\t\t\t\tlinks = null;\r\n\t\t\t\t});\r\n\t\t\t\tif (tasks) {\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"tasks\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"links\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"onBeforeDataSending\", function() {\r\n\t\t\tif (this._tMode === \"CUSTOM\") {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tlet url = this._serverProcessor;\r\n\t\t\tif (this._tMode === \"REST-JSON\" || this._tMode === \"REST\") {\r\n\t\t\t\tconst mode = this._ganttMode;\r\n\r\n\t\t\t\turl = url.substring(0, url.indexOf(\"?\") > -1 ? url.indexOf(\"?\") : url.length);\r\n\t\t\t\t// editing=true&\r\n\t\t\t\tthis.serverProcessor = url + (url.slice(-1) === \"/\" ? \"\" : \"/\") + mode;\r\n\t\t\t} else {\r\n\t\t\t\tconst pluralizedMode = this._ganttMode + \"s\";\r\n\t\t\t\tthis.serverProcessor = url + gantt.ajax.urlSeparator(url) + \"gantt_mode=\" + pluralizedMode;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"insertCallback\", function insertCallback(upd, id, parent, mode) { // tslint:disable-line\r\n\t\t\tconst data = upd.data || gantt.xml._xmlNodeToJSON(upd.firstChild);\r\n\t\t\tconst methods = {\r\n\t\t\t\tadd: gantt.addTask,\r\n\t\t\t\tisExist: gantt.isTaskExists\r\n\t\t\t};\r\n\t\t\tif (mode === \"links\") {\r\n\t\t\t\tmethods.add = gantt.addLink;\r\n\t\t\t\tmethods.isExist = gantt.isLinkExists;\r\n\t\t\t}\r\n\t\t\tif (methods.isExist.call(gantt, id)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdata.id = id;\r\n\t\t\tmethods.add.call(gantt, data);\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"updateCallback\", function updateCallback(upd, id) {\r\n\t\t\tconst data = upd.data || gantt.xml._xmlNodeToJSON(upd.firstChild);\r\n\t\t\tif (!gantt.isTaskExists(id)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst objData = gantt.getTask(id);\r\n\t\t\tfor (const key in data) {\r\n\t\t\t\tlet property = data[key];\r\n\t\t\t\tswitch (key) {\r\n\t\t\t\t\tcase \"id\":\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\tcase \"start_date\":\r\n\t\t\t\t\tcase \"end_date\":\r\n\t\t\t\t\t\tproperty = gantt.defined(gantt.templates.xml_date) ? gantt.templates.xml_date(property) : gantt.templates.parse_date(property);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"duration\":\r\n\t\t\t\t\t\tobjData.end_date = gantt.calculateEndDate({start_date: objData.start_date, duration: property, task:objData});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tobjData[key] = property;\r\n\t\t\t}\r\n\t\t\tgantt.updateTask(id);\r\n\t\t\tgantt.refreshData();\r\n\t\t});\r\n\t\tdp.attachEvent(\"deleteCallback\", function deleteCallback(upd, id, parent, mode) { // tslint:disable-line\r\n\t\t\tconst methods = {\r\n\t\t\t\tdelete: gantt.deleteTask,\r\n\t\t\t\tisExist: gantt.isTaskExists\r\n\t\t\t};\r\n\t\t\tif (mode === \"links\") {\r\n\t\t\t\tmethods.delete = gantt.deleteLink;\r\n\t\t\t\tmethods.isExist = gantt.isLinkExists;\r\n\t\t\t} else if(mode === \"assignment\") {\r\n\t\t\t\tmethods.delete = function(val) {\r\n\t\t\t\t\tgantt.$data.assignmentsStore.remove(val);\r\n\t\t\t\t};\r\n\t\t\t\tmethods.isExist = function(val){\r\n\t\t\t\t\treturn gantt.$data.assignmentsStore.exists(val);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tif (methods.isExist.call(gantt, id)) {\r\n\t\t\t\tmethods.delete.call(gantt, id);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.handleResourceCRUD(dp, gantt);\r\n\t\tthis.handleResourceAssignmentCRUD(dp, gantt);\r\n\t\tthis.handleBaselineCRUD(dp, gantt);\r\n\t}\r\n\r\n\tclientSideDelete(id, dp, gantt){\r\n\t\tconst updated = dp.updatedRows.slice();\r\n\t\tlet clientOnly = false;\r\n\r\n\t\tif(gantt.getUserData(id, \"!nativeeditor_status\", dp._ganttMode) === \"true_deleted\"){\r\n\t\t\tclientOnly = true;\r\n\t\t\tdp.setUpdated(id,false);\r\n\t\t}\r\n\r\n\t\tfor (let i = 0; i < updated.length && !dp._in_progress[id]; i++) {\r\n\t\t\tif (updated[i] === id) {\r\n\t\t\t\tif (gantt.getUserData(id, \"!nativeeditor_status\", dp._ganttMode) === \"inserted\") {\r\n\t\t\t\t\tclientOnly = true;\r\n\t\t\t\t}\r\n\t\t\t\tdp.setUpdated(id,false);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn clientOnly;\r\n\t}\r\n\r\n\thandleResourceAssignmentCRUD(dp, gantt){\r\n\t\tif(!gantt.config.resources || gantt.config.resources.dataprocessor_assignments !== true){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst assignmentsStore = gantt.getDatastore(gantt.config.resource_assignment_store);\r\n\t\tconst insertedTasks = {};\r\n\t\tconst pendingAssignments = {};\r\n\r\n\t\tgantt.attachEvent(\"onBeforeTaskAdd\", function(id, task){\r\n\t\t\tinsertedTasks[id] = true;\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tfunction putAssignmentToQueue(item){\r\n\t\t\tpendingAssignments[item.id] = item;\r\n\t\t\tinsertedTasks[item.task_id] = true;\r\n\t\t}\r\n\r\n\t\tfunction insertResourceAssignment(assignment){\r\n\t\t\tconst id = assignment.id;\r\n\t\t\tif (assignmentsStore.exists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"assignment\");\r\n\t\t\t\tdp.setUpdated(id, true,\"inserted\");\r\n\t\t\t}\r\n\t\t\tdelete pendingAssignments[id];\r\n\t\t}\r\n\r\n\t\tgantt.attachEvent(\"onTaskIdChange\", function(id, newId){\r\n\t\t\tdelete insertedTasks[id];\r\n\t\t});\r\n\r\n\t\tassignmentsStore.attachEvent(\"onAfterAdd\", (id, item) => {\r\n\t\t\tif(insertedTasks[item.task_id]){\r\n\t\t\t\t// inserting assignment of new task\r\n\t\t\t\t// task is not saved yet, need to wait till it gets permanent id and save assigmnents after that\r\n\t\t\t\tputAssignmentToQueue(item);\r\n\t\t\t}else{\r\n\t\t\t\tinsertResourceAssignment(item);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tassignmentsStore.attachEvent(\"onAfterUpdate\", (id, item) => {\r\n\t\t\tif (assignmentsStore.exists(id)) {\r\n\t\t\t\tif(pendingAssignments[id]){\r\n\t\t\t\t\tinsertResourceAssignment(item);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdp.setGanttMode(\"assignment\");\r\n\t\t\t\t\tdp.setUpdated(id, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tassignmentsStore.attachEvent(\"onAfterDelete\", (id, item) => {\r\n\t\t\tdp.setGanttMode(\"assignment\");\r\n\r\n\t\t\tconst needDbDelete = !this.clientSideDelete(id, dp, gantt);\r\n\t\t\tif (!needDbDelete) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdp.storeItem(item);\r\n\t\t\tdp.setUpdated(id, true,\"deleted\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\thandleResourceCRUD(dp, gantt){\r\n\t\tif(!gantt.config.resources || gantt.config.resources.dataprocessor_resources !== true){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst resourcesStore = gantt.getDatastore(gantt.config.resource_store);\r\n\r\n\t\tfunction insertResource(resource){\r\n\t\t\tconst id = resource.id;\r\n\t\t\tif (resourcesStore.exists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"resource\");\r\n\t\t\t\tdp.setUpdated(id, true,\"inserted\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tresourcesStore.attachEvent(\"onAfterAdd\", (id, item) => {\r\n\t\t\tinsertResource(item);\r\n\t\t});\r\n\r\n\t\tresourcesStore.attachEvent(\"onAfterUpdate\", (id, item) => {\r\n\t\t\tif (resourcesStore.exists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"resource\");\r\n\t\t\t\tdp.setUpdated(id, true);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tresourcesStore.attachEvent(\"onAfterDelete\", (id, item) => {\r\n\t\t\tdp.setGanttMode(\"resource\");\r\n\r\n\t\t\tconst needDbDelete = !this.clientSideDelete(id, dp, gantt);\r\n\t\t\tif (!needDbDelete) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdp.storeItem(item);\r\n\t\t\tdp.setUpdated(id, true,\"deleted\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\thandleBaselineCRUD(dp, gantt){\r\n\t\tif(!gantt.config.baselines || gantt.config.baselines.dataprocessor_baselines !== true){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst baselineStore = gantt.getDatastore(gantt.config.baselines.datastore);\r\n\r\n\t\tfunction insertResource(resource){\r\n\t\t\tconst id = resource.id;\r\n\t\t\tif (baselineStore.exists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"baseline\");\r\n\t\t\t\tdp.setUpdated(id, true,\"inserted\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tbaselineStore.attachEvent(\"onAfterAdd\", (id, item) => {\r\n\t\t\tinsertResource(item);\r\n\t\t});\r\n\r\n\t\tbaselineStore.attachEvent(\"onAfterUpdate\", (id, item) => {\r\n\t\t\tif (baselineStore.exists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"baseline\");\r\n\t\t\t\tdp.setUpdated(id, true);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tbaselineStore.attachEvent(\"onAfterDelete\", (id, item) => {\r\n\t\t\tdp.setGanttMode(\"baseline\");\r\n\r\n\t\t\tconst needDbDelete = !this.clientSideDelete(id, dp, gantt);\r\n\t\t\tif (!needDbDelete) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdp.storeItem(item);\r\n\t\t\tdp.setUpdated(id, true,\"deleted\");\r\n\t\t});\r\n\t}\r\n\r\n\tdetach() {\r\n\t\thelpers.forEach(this._dataProcessorHandlers, (e) => {\r\n\t\t\tthis.$gantt.detachEvent(e);\r\n\t\t});\r\n\t\tthis._dataProcessorHandlers = [];\r\n\t}\r\n}\r\n","import * as utils from \"../../utils/utils\";\r\n\r\nexport default class SimpleStorage {\r\n\tpublic static create = () : SimpleStorage => {\r\n\t\treturn new SimpleStorage();\r\n\t};\r\n\r\n\tprotected _storage: { [id: string]: any; };\r\n\r\n\tprotected constructor() {\r\n\t\tthis._storage = {};\r\n\t}\r\n\r\n\tpublic clear = (): void => {\r\n\t\tthis._storage = {};\r\n\t};\r\n\r\n\tpublic storeItem = (item: any): void => {\r\n\t\tthis._storage[item.id] = utils.copy(item);\r\n\t};\r\n\r\n\tpublic getStoredItem = (id: string): any => {\r\n\t\treturn this._storage[id] || null;\r\n\t};\r\n}","import eventable from \"../../utils/eventable\";\r\nimport * as helpers from \"../../utils/helpers\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport DataProcessorEvents from \"./data_processor_events\";\r\nimport extendGantt from \"./extend_gantt\";\r\nimport SimpleStorage from \"./simple_storage\";\r\nimport global from \"../../utils/global\";\r\n\r\nexport interface DataProcessor { // tslint:disable-line\r\n\t$gantt: any;\r\n\tdetachAllEvents: any;\r\n\tattachEvent: any;\r\n\tcallEvent: any;\r\n\r\n\tserverProcessor: string;\r\n\taction_param: string;\r\n\tupdatedRows: any[];\r\n\tautoUpdate: boolean;\r\n\tupdateMode: string;\r\n\tmessages: any[];\r\n\tstyles: object;\r\n\tdnd: any;\r\n\tdeleteAfterConfirmation?: any;\r\n}\r\n\r\nexport function createDataProcessor(config: any) {\r\n\tlet router;\r\n\tlet tMode;\r\n\tlet headers;\r\n\tif (config instanceof Function) {\r\n\t\trouter = config;\r\n\t} else if (config.hasOwnProperty(\"router\")) {\r\n\t\trouter = config.router;\r\n\t} else if (config.hasOwnProperty(\"assignment\") || config.hasOwnProperty(\"baseline\") || config.hasOwnProperty(\"link\") || config.hasOwnProperty(\"task\")) {\r\n\t\trouter = config;\r\n\t} else if(config.hasOwnProperty(\"headers\")){\r\n\t\t// GS-2312 for custom headers\r\n\t\theaders = config.headers;\r\n\t}\r\n\tif (router) {\r\n\t\ttMode = \"CUSTOM\";\r\n\t} else {\r\n\t\ttMode = config.mode || \"REST-JSON\";\r\n\t}\r\n\tconst gantt = this; // tslint:disable-line\r\n\tconst dp = new DataProcessor(config.url);\r\n\r\n\r\n\tdp.init(gantt);\r\n\tdp.setTransactionMode({\r\n\t\tmode: tMode,\r\n\t\trouter,\r\n\t\theaders\r\n\t}, config.batchUpdate);\r\n\tif(config.deleteAfterConfirmation){\r\n\t\tdp.deleteAfterConfirmation = config.deleteAfterConfirmation;\r\n\t}\r\n\treturn dp;\r\n}\r\n\r\nexport class DataProcessor {\r\n\tpublic modes: object;\r\n\tpublic serverProcessor: string;\r\n\tpublic action_param: string; // tslint:disable-line\r\n\tpublic updatedRows: any[];\r\n\tpublic autoUpdate: boolean;\r\n\tpublic updateMode: string;\r\n\tpublic messages: any[];\r\n\tpublic styles: object;\r\n\tpublic dnd: any;\r\n\r\n\tprotected _tMode: string;\r\n\tprotected _headers: any;\r\n\tprotected _payload: any;\r\n\tprotected _postDelim: string;\r\n\tprotected _waitMode: number;\r\n\tprotected _in_progress: object; // tslint:disable-line\r\n\tprotected _invalid: object;\r\n\tprotected _storage: SimpleStorage;\r\n\tprotected _tSend: boolean;\r\n\tprotected _serializeAsJson: boolean;\r\n\tprotected _router: any;\r\n\tprotected _utf: boolean;\r\n\tprotected _methods: any[];\r\n\tprotected _user: any;\r\n\tprotected _uActions: object;\r\n\tprotected _needUpdate: boolean;\r\n\tprotected _ganttMode: \"task\"|\"link\";\r\n\tprotected _routerParametersFormat: \"parameters\"|\"object\";\r\n\r\n\tprotected _silent_mode: any; // tslint:disable-line\r\n\tprotected _updateBusy: any;\r\n\tprotected _serverProcessor: any;\r\n\tprotected _initialized: boolean;\r\n\r\n\tconstructor(serverProcessorURL?) {\r\n\t\tthis.serverProcessor = serverProcessorURL;\r\n\t\tthis.action_param = \"!nativeeditor_status\";\r\n\r\n\t\tthis.updatedRows = []; // ids of updated rows\r\n\r\n\t\tthis.autoUpdate = true;\r\n\t\tthis.updateMode = \"cell\";\r\n\t\tthis._headers = null;\r\n\t\tthis._payload = null;\r\n\t\tthis._postDelim = \"_\";\r\n\t\tthis._routerParametersFormat = \"parameters\";\r\n\r\n\t\tthis._waitMode = 0;\r\n\t\tthis._in_progress = {}; // ?\r\n\t\tthis._storage = SimpleStorage.create();\r\n\t\tthis._invalid = {};\r\n\t\tthis.messages = [];\r\n\r\n\t\tthis.styles = {\r\n\t\t\tupdated: \"font-weight:bold;\",\r\n\t\t\tinserted: \"font-weight:bold;\",\r\n\t\t\tdeleted: \"text-decoration : line-through;\",\r\n\t\t\tinvalid: \"background-color:FFE0E0;\",\r\n\t\t\tinvalid_cell: \"border-bottom:2px solid red;\",\r\n\t\t\terror: \"color:red;\",\r\n\t\t\tclear: \"font-weight:normal;text-decoration:none;\"\r\n\t\t};\r\n\t\tthis.enableUTFencoding(true);\r\n\t\teventable(this);\r\n\t}\r\n\r\n\tsetTransactionMode(mode:any, total?:any) {\r\n\t\tif (typeof mode === \"object\") {\r\n\t\t\tthis._tMode = mode.mode || this._tMode;\r\n\r\n\t\t\tif (utils.defined(mode.headers)) {\r\n\t\t\t\tthis._headers = mode.headers;\r\n\t\t\t}\r\n\r\n\t\t\tif (utils.defined(mode.payload)) {\r\n\t\t\t\tthis._payload = mode.payload;\r\n\t\t\t}\r\n\t\t\tthis._tSend = !!total;\r\n\t\t} else {\r\n\t\t\tthis._tMode = mode;\r\n\t\t\tthis._tSend = total;\r\n\t\t}\r\n\r\n\t\tif (this._tMode === \"REST\") {\r\n\t\t\tthis._tSend = false;\r\n\t\t}\r\n\r\n\t\tif (this._tMode === \"JSON\" || this._tMode === \"REST-JSON\") {\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._serializeAsJson = true;\r\n\t\t\tthis._headers = this._headers || {};\r\n\t\t\tthis._headers[\"Content-Type\"] = \"application/json\";\r\n\t\t}else{\r\n\t\t\tif(this._headers && !this._headers[\"Content-Type\"]){\r\n\t\t\t\tthis._headers[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this._tMode === \"CUSTOM\") {\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._router = mode.router;\r\n\t\t}\r\n\t}\r\n\r\n\tescape(data:any) {\r\n\t\tif (this._utf) {\r\n\t\t\treturn encodeURIComponent(data);\r\n\t\t} else {\r\n\t\t\treturn escape(data);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: allows to set escaping mode\r\n\t * @param: true - utf based escaping, simple - use current page encoding\r\n\t * @type: public\r\n\t */\r\n\tenableUTFencoding(mode:boolean) {\r\n\t\tthis._utf = !!mode;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: get state of updating\r\n\t * @returns:   true - all in sync with server, false - some items not updated yet.\r\n\t * @type: public\r\n\t */\r\n\tgetSyncState() {\r\n\t\treturn !this.updatedRows.length;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: set if rows should be send to server automatically\r\n\t * @param: mode - \"row\" - based on row selection changed, \"cell\" - based on cell editing finished, \"off\" - manual data sending\r\n\t * @type: public\r\n\t */\r\n\tsetUpdateMode(mode: string, dnd: any) {\r\n\t\tthis.autoUpdate = (mode === \"cell\");\r\n\t\tthis.updateMode = mode;\r\n\t\tthis.dnd = dnd;\r\n\t}\r\n\r\n\tignore(code: any, master: any) {\r\n\t\tthis._silent_mode = true;\r\n\t\tcode.call(master || global);\r\n\t\tthis._silent_mode = false;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: mark row as updated/normal. check mandatory fields, initiate autoupdate (if turned on)\r\n\t * @param: rowId - id of row to set update-status for\r\n\t * @param: state - true for \"updated\", false for \"not updated\"\r\n\t * @param: mode - update mode name\r\n\t * @type: public\r\n\t */\r\n\tsetUpdated(rowId:number|string, state: boolean, mode?: string) {\r\n\t\tif (this._silent_mode) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst ind = this.findRow(rowId);\r\n\r\n\t\tmode = mode || \"updated\";\r\n\t\tconst existing = this.$gantt.getUserData(rowId, this.action_param, this._ganttMode);\r\n\t\tif (existing && mode === \"updated\") {\r\n\t\t\tmode = existing;\r\n\t\t}\r\n\t\tif (state) {\r\n\t\t\tthis.set_invalid(rowId, false); // clear previous error flag\r\n\t\t\tthis.updatedRows[ind] = rowId;\r\n\t\t\tthis.$gantt.setUserData(rowId, this.action_param, mode, this._ganttMode);\r\n\t\t\tif (this._in_progress[rowId]) {\r\n\t\t\t\tthis._in_progress[rowId] = \"wait\";\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (!this.is_invalid(rowId)) {\r\n\t\t\t\tthis.updatedRows.splice(ind, 1);\r\n\t\t\t\tthis.$gantt.setUserData(rowId, this.action_param, \"\", this._ganttMode);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.markRow(rowId, state, mode);\r\n\t\tif (state && this.autoUpdate) {\r\n\t\t\tthis.sendData(rowId);\r\n\t\t}\r\n\t}\r\n\r\n\tmarkRow(id: number | string, state: boolean, mode: string) {\r\n\t\tlet str = \"\";\r\n\t\tconst invalid = this.is_invalid(id);\r\n\t\tif (invalid) {\r\n\t\t\tstr = this.styles[invalid];\r\n\t\t\tstate = true;\r\n\t\t}\r\n\t\tif (this.callEvent(\"onRowMark\", [id, state, mode, invalid])) {\r\n\t\t\t// default logic\r\n\t\t\tstr = this.styles[state ? mode : \"clear\"] + \" \" + str;\r\n\r\n\t\t\tthis.$gantt[this._methods[0]](id, str);\r\n\r\n\t\t\tif (invalid && invalid.details) {\r\n\t\t\t\tstr += this.styles[invalid + \"_cell\"];\r\n\t\t\t\tfor (let i = 0; i < invalid.details.length; i++) {\r\n\t\t\t\t\tif (invalid.details[i]) {\r\n\t\t\t\t\t\tthis.$gantt[this._methods[1]](id, i, str);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetActionByState(state: string):string {\r\n\t\tif (state === \"inserted\") {\r\n\t\t\treturn \"create\";\r\n\t\t}\r\n\r\n\t\tif (state === \"updated\") {\r\n\t\t\treturn \"update\";\r\n\t\t}\r\n\r\n\t\tif (state === \"deleted\") {\r\n\t\t\treturn \"delete\";\r\n\t\t}\r\n\r\n\t\t// reorder\r\n\t\treturn \"update\";\r\n\t}\r\n\r\n\tgetState(id: number | string) {\r\n\t\treturn this.$gantt.getUserData(id, this.action_param, this._ganttMode);\r\n\t}\r\n\r\n\tis_invalid(id: number | string) {\r\n\t\treturn this._invalid[id];\r\n\t}\r\n\r\n\tset_invalid(id: number | string, mode: any, details?) {\r\n\t\tif (details) {\r\n\t\t\tmode = {\r\n\t\t\t\tvalue: mode,\r\n\t\t\t\tdetails,\r\n\t\t\t\ttoString: function() { // tslint:disable-line\r\n\t\t\t\t\treturn this.value.toString();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\tthis._invalid[id] = mode;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: check mandatory fields and verify values of cells, initiate update (if specified). Can be redefined in order to provide custom validation\r\n\t * @param: rowId - id of row to set update-status for\r\n\t * @type: public\r\n\t */\r\n\t// tslint:disable-next-line\r\n\tcheckBeforeUpdate(rowId: number | string) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: send row(s) values to server\r\n\t * @param: rowId - id of row which data to send. If not specified, then all \"updated\" rows will be send\r\n\t * @type: public\r\n\t */\r\n\tsendData(rowId?: any) {\r\n\t\tif (this.$gantt.editStop) {\r\n\t\t\tthis.$gantt.editStop();\r\n\t\t}\r\n\r\n\t\tif (typeof rowId === \"undefined\" || this._tSend) {\r\n\r\n\t\t\tconst pendingUpdateModes = [];\r\n\t\t\tif(this.modes){\r\n\t\t\t\tconst knownModes = [\"task\", \"link\", \"assignment\", \"baseline\"];\r\n\t\t\t\tknownModes.forEach((mode) => {\r\n\t\t\t\t\tif(this.modes[mode] && this.modes[mode].updatedRows.length){\r\n\t\t\t\t\t\tpendingUpdateModes.push(mode);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (pendingUpdateModes.length){\r\n\t\t\t\tfor(let i = 0; i < pendingUpdateModes.length; i++){\r\n\t\t\t\t\tthis.setGanttMode(pendingUpdateModes[i]);\r\n\t\t\t\t\tthis.sendAllData();\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.sendAllData();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._in_progress[rowId]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.messages = [];\r\n\t\tif (!this.checkBeforeUpdate(rowId) && this.callEvent(\"onValidationError\", [rowId, this.messages])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis._beforeSendData(this._getRowData(rowId), rowId);\r\n\t}\r\n\r\n\tserialize(data: any, id: any) {\r\n\t\tif (this._serializeAsJson) {\r\n\t\t\treturn  this._serializeAsJSON(data);\r\n\t\t}\r\n\r\n\t\tif (typeof data === \"string\") {\r\n\t\t\treturn data;\r\n\t\t}\r\n\t\tif (typeof id !== \"undefined\") {\r\n\t\t\treturn this.serialize_one(data, \"\");\r\n\t\t} else {\r\n\t\t\tconst stack = [];\r\n\t\t\tconst keys = [];\r\n\t\t\tfor (const key in data) {\r\n\t\t\t\tif (data.hasOwnProperty(key)) {\r\n\t\t\t\t\tstack.push(this.serialize_one(data[key], key + this._postDelim));\r\n\t\t\t\t\tkeys.push(key);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstack.push(\"ids=\" + this.escape(keys.join(\",\")));\r\n\t\t\tif (this.$gantt.security_key) {\r\n\t\t\t\tstack.push(\"dhx_security=\" + this.$gantt.security_key);\r\n\t\t\t}\r\n\t\t\treturn stack.join(\"&\");\r\n\t\t}\r\n\t}\r\n\r\n\tserialize_one(data: any, pref: string) {\r\n\t\tif (typeof data === \"string\") {\r\n\t\t\treturn data;\r\n\t\t}\r\n\t\tconst stack: string[] = [];\r\n\t\tlet serialized = \"\";\r\n\t\tfor (const key in data)\r\n\t\t\tif (data.hasOwnProperty(key)) {\r\n\t\t\t\tif ((key === \"id\" ||\r\n\t\t\t\t\tkey == this.action_param) && // tslint:disable-line\r\n\t\t\t\t\tthis._tMode === \"REST\") {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof data[key] === \"string\" || typeof data[key] === \"number\") {\r\n\t\t\t\t\tserialized = String(data[key]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tserialized = JSON.stringify(data[key]);\r\n\t\t\t\t}\r\n\t\t\t\tstack.push(this.escape((pref || \"\") + key) + \"=\" + this.escape(serialized));\r\n\t\t\t}\r\n\t\treturn stack.join(\"&\");\r\n\t}\r\n\r\n\tsendAllData() {\r\n\t\tif (!this.updatedRows.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.messages = [];\r\n\t\tlet valid: any = true;\r\n\r\n\t\tthis._forEachUpdatedRow(function(rowId) {\r\n\t\t\tvalid = valid && this.checkBeforeUpdate(rowId);\r\n\t\t});\r\n\r\n\t\tif (!valid && !this.callEvent(\"onValidationError\", [\"\", this.messages])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (this._tSend) {\r\n\t\t\tthis._sendData(this._getAllData());\r\n\t\t} else {\r\n\t\t\t// this.updatedRows can be spliced from onBeforeUpdate via dp.setUpdated false\r\n\t\t\t// use an iterator instead of for(var i = 0; i < this.updatedRows; i++) then\r\n\t\t\tthis._forEachUpdatedRow(function(rowId) {\r\n\t\t\t\tif (!this._in_progress[rowId]) {\r\n\t\t\t\t\tif (this.is_invalid(rowId)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._beforeSendData(this._getRowData(rowId), rowId);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfindRow(pattern: any) {\r\n\t\tlet i = 0;\r\n\t\tfor (i = 0; i < this.updatedRows.length; i++) {\r\n\t\t\tif (pattern == this.updatedRows[i]) { // tslint:disable-line\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn i;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: define custom actions\r\n\t * @param: name - name of action, same as value of action attribute\r\n\t * @param: handler - custom function, which receives a XMl response content for action\r\n\t * @type: private\r\n\t */\r\n\tdefineAction(name: string, handler: any) {\r\n\t\tif (!this._uActions) {\r\n\t\t\tthis._uActions = {};\r\n\t\t}\r\n\t\tthis._uActions[name] = handler;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: used in combination with setOnBeforeUpdateHandler to create custom client-server transport system\r\n\t * @param: sid - id of item before update\r\n\t * @param: tid - id of item after up0ate\r\n\t * @param: action - action name\r\n\t * @type: public\r\n\t * @topic: 0\r\n\t */\r\n\tafterUpdateCallback(sid: number | string, tid: number | string, action: string, btag: any, ganttMode: string) {\r\n\t\tif(!this.$gantt){\r\n\t\t\t// destructor has been called before the callback\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.setGanttMode(ganttMode);\r\n\r\n\t\tconst marker = sid;\r\n\t\tconst correct = (action !== \"error\" && action !== \"invalid\");\r\n\t\tif (!correct) {\r\n\t\t\tthis.set_invalid(sid, action);\r\n\t\t}\r\n\t\tif ((this._uActions) && (this._uActions[action]) && (!this._uActions[action](btag))) {\r\n\t\t\treturn (delete this._in_progress[marker]);\r\n\t\t}\r\n\r\n\t\tif (this._in_progress[marker] !== \"wait\") {\r\n\t\t\tthis.setUpdated(sid, false);\r\n\t\t}\r\n\r\n\t\tconst originalSid = sid;\r\n\r\n\t\tswitch (action) {\r\n\t\t\tcase \"inserted\":\r\n\t\t\tcase \"insert\":\r\n\t\t\t\tif (tid != sid) { // tslint:disable-line\r\n\t\t\t\t\tthis.setUpdated(sid, false);\r\n\t\t\t\t\tthis.$gantt[this._methods[2]](sid, tid);\r\n\t\t\t\t\tsid = tid;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"delete\":\r\n\t\t\tcase \"deleted\":\r\n\t\t\t\tif(!this.deleteAfterConfirmation || this._ganttMode !== \"task\"){\r\n\t\t\t\t\tthis.$gantt.setUserData(sid, this.action_param, \"true_deleted\", this._ganttMode);\r\n\t\t\t\t\tthis.$gantt[this._methods[3]](sid);\r\n\t\t\t\t\tdelete this._in_progress[marker];\r\n\t\t\t\t\treturn this.callEvent(\"onAfterUpdate\", [sid, action, tid, btag]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif (this._ganttMode === \"task\" && this.$gantt.isTaskExists(sid)) {\r\n\t\t\t\t\t\tthis.$gantt.setUserData(sid, this.action_param, \"true_deleted\", this._ganttMode);\r\n\t\t\t\t\t\tconst task = this.$gantt.getTask(sid);\r\n\t\t\t\t\t\tthis.$gantt.silent(() => {\r\n\t\t\t\t\t\t\tthis.$gantt.deleteTask(sid);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.$gantt.callEvent(\"onAfterTaskDelete\", [sid, task]);\r\n\t\t\t\t\t\tthis.$gantt.render();\r\n\t\t\t\t\t\tdelete this._in_progress[marker];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this.callEvent(\"onAfterUpdate\", [sid, action, tid, btag]);\r\n\t\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif (this._in_progress[marker] !== \"wait\") {\r\n\t\t\tif (correct) {\r\n\t\t\t\tthis.$gantt.setUserData(sid, this.action_param, \"\", this._ganttMode);\r\n\t\t\t}\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t} else {\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t\tthis.setUpdated(tid, true, this.$gantt.getUserData(sid, this.action_param, this._ganttMode));\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterUpdate\", [originalSid, action, tid, btag]);\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: response from server\r\n\t * @param: xml - XMLLoader object with response XML\r\n\t * @type: private\r\n\t */\r\n\tafterUpdate(that: any, xml: any, id?:any) {\r\n\t\tlet _xml;\r\n\t\tif (arguments.length === 3) {\r\n\t\t\t_xml = arguments[1];\r\n\t\t} else {\r\n\t\t\t// old dataprocessor\r\n\t\t\t_xml = arguments[4];\r\n\t\t}\r\n\t\tlet mode = this.getGanttMode();\r\n\t\tconst reqUrl = _xml.filePath || _xml.url;\r\n\r\n\t\tif (this._tMode !== \"REST\" && this._tMode !== \"REST-JSON\") {\r\n\t\t\tif (reqUrl.indexOf(\"gantt_mode=links\") !== -1) {\r\n\t\t\t\tmode = \"link\";\r\n\t\t\t} else if (reqUrl.indexOf(\"gantt_mode=assignments\") !== -1) {\r\n\t\t\t\tmode = \"assignment\";\r\n\t\t\t} else if (reqUrl.indexOf(\"gantt_mode=baselines\") !== -1) {\r\n\t\t\t\tmode = \"baseline\";\r\n\t\t\t} else {\r\n\t\t\t\tmode = \"task\";\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (reqUrl.indexOf(\"/link\") >= 0) {\r\n\t\t\t\tmode = \"link\";\r\n\t\t\t} else if(reqUrl.indexOf(\"/assignment\") >= 0){\r\n\t\t\t\tmode = \"assignment\";\r\n\t\t\t} else if(reqUrl.indexOf(\"/baseline\") >= 0){\r\n\t\t\t\tmode = \"baseline\";\r\n\t\t\t} else {\r\n\t\t\t\tmode = \"task\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setGanttMode(mode);\r\n\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\t\t// try to use json first\r\n\t\tlet tag;\r\n\r\n\t\ttry {\r\n\t\t\ttag = JSON.parse(xml.xmlDoc.responseText);\r\n\t\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n\t\t} catch (e) {\r\n\r\n\t\t\t// empty response also can be processed by json handler\r\n\t\t\tif (!xml.xmlDoc.responseText.length) {\r\n\t\t\t\ttag = {};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst processCallback = (itemId: any) => {\r\n\t\t\tconst action = tag.action || this.getState(itemId) || \"updated\";\r\n\t\t\tconst sid = tag.sid || itemId[0];\r\n\t\t\tconst tid = tag.tid || itemId[0];\r\n\t\t\tthat.afterUpdateCallback(sid, tid, action, tag, mode);\r\n\t\t};\r\n\t\tif (tag) {\r\n\t\t\t// GS-753. When multiple tasks are updated, unhighlight all of them\r\n\t\t\tif (Array.isArray(id) && id.length > 1) {\r\n\t\t\t\tid.forEach((taskId) => processCallback(taskId));\r\n\t\t\t} else {\r\n\t\t\t\tprocessCallback(id);\r\n\t\t\t}\r\n\t\t\tthat.finalizeUpdate();\r\n\t\t\tthis.setGanttMode(mode);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// xml response\r\n\t\tconst top = ajax.xmltop(\"data\", xml.xmlDoc); // fix incorrect content type in IE\r\n\t\tif (!top) {\r\n\t\t\treturn this.cleanUpdate(id);\r\n\t\t}\r\n\t\tconst atag = ajax.xpath(\"//data/action\", top);\r\n\t\tif (!atag.length) {\r\n\t\t\treturn this.cleanUpdate(id);\r\n\t\t}\r\n\r\n\t\tfor (let i = 0; i < atag.length; i++) {\r\n\t\t\tconst btag = atag[i];\r\n\t\t\tconst action = btag.getAttribute(\"type\");\r\n\t\t\tconst sid = btag.getAttribute(\"sid\");\r\n\t\t\tconst tid = btag.getAttribute(\"tid\");\r\n\r\n\t\t\tthat.afterUpdateCallback(sid, tid, action, btag, mode);\r\n\t\t}\r\n\t\tthat.finalizeUpdate();\r\n\t}\r\n\r\n\tcleanUpdate(id: any[]) {\r\n\t\tif (id) {\r\n\t\t\tfor (let i = 0; i < id.length; i++) {\r\n\t\t\t\tdelete this._in_progress[id[i]];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfinalizeUpdate() {\r\n\t\tif (this._waitMode) {\r\n\t\t\tthis._waitMode--;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterUpdateFinish\", []);\r\n\t\tif (!this.updatedRows.length) {\r\n\t\t\tthis.callEvent(\"onFullSync\", []);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: initializes data-processor\r\n\t * @param: gantt - dhtmlxGantt object to attach this data-processor to\r\n\t * @type: public\r\n\t */\r\n\tinit(gantt: any) {\r\n\t\tif (this._initialized) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.$gantt = gantt;\r\n\t\tif (this.$gantt._dp_init) {\r\n\t\t\tthis.$gantt._dp_init(this);\r\n\t\t}\r\n\r\n\t\tthis._setDefaultTransactionMode();\r\n\r\n\t\tthis.styles = {\r\n\t\t\tupdated:\"gantt_updated\",\r\n\t\t\torder:\"gantt_updated\",\r\n\t\t\tinserted:\"gantt_inserted\",\r\n\t\t\tdeleted:\"gantt_deleted\",\r\n\t\t\tdelete_confirmation:\"gantt_deleted\",\r\n\t\t\tinvalid:\"gantt_invalid\",\r\n\t\t\terror:\"gantt_error\",\r\n\t\t\tclear:\"\"\r\n\t\t};\r\n\r\n\t\tthis._methods=[\"_row_style\",\"setCellTextStyle\",\"_change_id\",\"_delete_task\"];\r\n\t\textendGantt(this.$gantt, this);\r\n\t\tconst dataProcessorEvents = new DataProcessorEvents(this.$gantt, this);\r\n\t\tdataProcessorEvents.attach();\r\n\t\tthis.attachEvent(\"onDestroy\", function() {\r\n\t\t\tdelete this.setGanttMode;\r\n\t\t\tdelete this._getRowData;\r\n\r\n\t\t\tdelete this.$gantt._dp;\r\n\t\t\tdelete this.$gantt._change_id;\r\n\t\t\tdelete this.$gantt._row_style;\r\n\t\t\tdelete this.$gantt._delete_task;\r\n\t\t\tdelete this.$gantt._sendTaskOrder;\r\n\t\t\tdelete this.$gantt;\r\n\r\n\t\t\tdataProcessorEvents.detach();\r\n\t\t});\r\n\t\tthis.$gantt.callEvent(\"onDataProcessorReady\", [this]);\r\n\t\tthis._initialized = true;\r\n\t}\r\n\r\n\tsetOnAfterUpdate(handler) {\r\n\t\tthis.attachEvent(\"onAfterUpdate\", handler);\r\n\t}\r\n\r\n\tsetOnBeforeUpdateHandler(handler) {\r\n\t\tthis.attachEvent(\"onBeforeDataSending\", handler);\r\n\t}\r\n\r\n\t/* starts autoupdate mode\r\n\t\t@param interval time interval for sending update requests\r\n\t*/\r\n\tsetAutoUpdate(interval, user) {\r\n\t\tinterval = interval || 2000;\r\n\r\n\t\tthis._user = user || (new Date()).valueOf();\r\n\t\tthis._needUpdate = false;\r\n\r\n\t\tthis._updateBusy = false;\r\n\r\n\t\tthis.attachEvent(\"onAfterUpdate\", this.afterAutoUpdate); // arguments sid, action, tid, xml_node;\r\n\r\n\t\tthis.attachEvent(\"onFullSync\", this.fullSync);\r\n\r\n\t\tsetInterval(() => {\r\n\t\t\tthis.loadUpdate();\r\n\t\t}, interval);\r\n\t}\r\n\r\n\t/* process updating request response\r\n\t\tif status == collision version is deprecated\r\n\t\tset flag for autoupdating immediately\r\n\t*/\r\n\tafterAutoUpdate(sid, action, tid, xml_node) { // tslint:disable-line\r\n\t\tif (action === \"collision\") {\r\n\t\t\tthis._needUpdate = true;\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\t/* callback function for onFillSync event\r\n\t\tcall update function if it's need\r\n\t*/\r\n\tfullSync() {\r\n\t\tif (this._needUpdate) {\r\n\t\t\tthis._needUpdate = false;\r\n\t\t\tthis.loadUpdate();\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/* sends query to the server and call callback function\r\n\t*/\r\n\tgetUpdates(url, callback) {\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\t\tif (this._updateBusy) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\tthis._updateBusy = true;\r\n\t\t}\r\n\r\n\t\tajax.get(url, callback);\r\n\r\n\t}\r\n\r\n\t/* loads updates and processes them\r\n\t*/\r\n\tloadUpdate() {\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\t\tconst version = this.$gantt.getUserData(0, \"version\", this._ganttMode);\r\n\t\tlet url = this.serverProcessor + ajax.urlSeparator(this.serverProcessor) + [\"dhx_user=\" + this._user, \"dhx_version=\" + version].join(\"&\");\r\n\t\turl = url.replace(\"editing=true&\", \"\");\r\n\t\tthis.getUpdates(url, (xml) => {\r\n\t\t\tconst vers = ajax.xpath(\"//userdata\", xml);\r\n\t\t\tthis.$gantt.setUserData(0, \"version\", this._getXmlNodeValue(vers[0]), this._ganttMode);\r\n\r\n\t\t\tconst updates = ajax.xpath(\"//update\", xml);\r\n\t\t\tif (updates.length) {\r\n\t\t\t\tthis._silent_mode = true;\r\n\r\n\t\t\t\tfor (let i = 0; i < updates.length; i++) {\r\n\t\t\t\t\tconst status = updates[i].getAttribute(\"status\");\r\n\t\t\t\t\tconst id = updates[i].getAttribute(\"id\");\r\n\t\t\t\t\tconst parent = updates[i].getAttribute(\"parent\");\r\n\t\t\t\t\tswitch (status) {\r\n\t\t\t\t\t\tcase \"inserted\":\r\n\t\t\t\t\t\t\tthis.callEvent(\"insertCallback\", [updates[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"updated\":\r\n\t\t\t\t\t\t\tthis.callEvent(\"updateCallback\", [updates[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"deleted\":\r\n\t\t\t\t\t\t\tthis.callEvent(\"deleteCallback\", [updates[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._silent_mode = false;\r\n\t\t\t}\r\n\r\n\t\t\tthis._updateBusy = false;\r\n\t\t});\r\n\t}\r\n\r\n\tdestructor() {\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\r\n\t\tthis.updatedRows = [];\r\n\t\tthis._in_progress = {}; // ?\r\n\t\tthis._invalid = {};\r\n\t\tthis._storage.clear();\r\n\t\tthis._storage = null;\r\n\t\tthis._headers = null;\r\n\t\tthis._payload = null;\r\n\t\tdelete this._initialized;\r\n\t}\r\n\r\n\tsetGanttMode(mode) {\r\n\t\tif (mode === \"tasks\") {\r\n\t\t\tmode = \"task\";\r\n\t\t} else if (mode === \"links\") {\r\n\t\t\tmode = \"link\";\r\n\t\t}\r\n\r\n\t\tconst modes = this.modes || {};\r\n\t\tconst ganttMode = this.getGanttMode();\r\n\t\tif (ganttMode) {\r\n\t\t\tmodes[ganttMode] = {\r\n\t\t\t\t_in_progress : this._in_progress,\r\n\t\t\t\t_invalid: this._invalid,\r\n\t\t\t\t_storage: this._storage,\r\n\t\t\t\tupdatedRows : this.updatedRows\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tlet newState = modes[mode];\r\n\t\tif (!newState) {\r\n\t\t\tnewState = modes[mode] = {\r\n\t\t\t\t_in_progress : {},\r\n\t\t\t\t_invalid : {},\r\n\t\t\t\t_storage : SimpleStorage.create(),\r\n\t\t\t\tupdatedRows : []\r\n\t\t\t};\r\n\t\t}\r\n\t\tthis._in_progress = newState._in_progress;\r\n\t\tthis._invalid = newState._invalid;\r\n\t\tthis._storage = newState._storage;\r\n\t\tthis.updatedRows = newState.updatedRows;\r\n\t\tthis.modes = modes;\r\n\t\tthis._ganttMode = mode;\r\n\t}\r\n\tgetGanttMode():string {\r\n\t\treturn this._ganttMode;\r\n\t}\r\n\r\n\tstoreItem(item) {\r\n\t\tthis._storage.storeItem(item);\r\n\t}\r\n\r\n\turl(url: string) {\r\n\t\tthis.serverProcessor = this._serverProcessor = url;\r\n\t}\r\n\r\n\tprotected _beforeSendData(data: any, rowId: any) {\r\n\t\tif (!this.callEvent(\"onBeforeUpdate\", [rowId, this.getState(rowId), data])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis._sendData(data, rowId);\r\n\t}\r\n\r\n\tprotected _serializeAsJSON(data: any) {\r\n\t\tif (typeof data === \"string\") {\r\n\t\t\treturn data;\r\n\t\t}\r\n\r\n\t\tconst copy = utils.copy(data);\r\n\t\tif (this._tMode === \"REST-JSON\") {\r\n\t\t\tdelete copy.id;\r\n\t\t\tdelete copy[this.action_param];\r\n\t\t}\r\n\r\n\t\treturn JSON.stringify(copy);\r\n\t}\r\n\r\n\tprotected _applyPayload(url: string) {\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\t\tif (this._payload) {\r\n\t\t\tfor (const key in this._payload) {\r\n\t\t\t\turl = url + ajax.urlSeparator(url) + this.escape(key) + \"=\" + this.escape(this._payload[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn url;\r\n\t}\r\n\r\n\t// GET/POST/JSON modes of the dataProcessor didn't send the whole data items in 'delete' requests\r\n\t// clear extra info from the data in order not to change the request format\r\n\tprotected _cleanupArgumentsBeforeSend(dataToSend: any) {\r\n\t\tlet processedData;\r\n\t\tif(dataToSend[this.action_param] === undefined){// hash of updated items, and not an individual item\r\n\t\t\tprocessedData = {};\r\n\t\t\tfor(const i in dataToSend) {\r\n\t\t\t\tprocessedData[i] = this._cleanupArgumentsBeforeSend(dataToSend[i]);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tprocessedData = this._cleanupItemBeforeSend(dataToSend);\r\n\t\t}\r\n\t\treturn processedData;\r\n\t}\r\n\tprotected _cleanupItemBeforeSend(updatedItem: any) {\r\n\t\tlet output = null;\r\n\t\tif(updatedItem){\r\n\t\t\tif(updatedItem[this.action_param] === \"deleted\"){\r\n\t\t\t\toutput = {};\r\n\t\t\t\toutput.id = updatedItem.id;\r\n\t\t\t\toutput[this.action_param] = updatedItem[this.action_param];\r\n\t\t\t}else{\r\n\t\t\t\toutput = updatedItem;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tprotected _sendData(dataToSend: any, rowId?: any) {\r\n\t\tif (!dataToSend) {\r\n\t\t\treturn; // nothing to send\r\n\t\t}\r\n\t\tif (!this.callEvent(\"onBeforeDataSending\", rowId ? [rowId, this.getState(rowId), dataToSend] : [null, null, dataToSend])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (rowId) {\r\n\t\t\tthis._in_progress[rowId] = (new Date()).valueOf();\r\n\t\t}\r\n\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\r\n\t\tif (this._tMode === \"CUSTOM\") {\r\n\t\t\tconst taskState = this.getState(rowId);\r\n\t\t\tconst taskAction = this.getActionByState(taskState);\r\n\t\t\tdelete dataToSend[this.action_param]; // not send !nativeeditor_status parameter in router mode\r\n\t\t\tconst ganttMode = this.getGanttMode();\r\n\t\t\tconst _onResolvedCreateUpdate = (tag) => {\r\n\t\t\t\tlet action = taskState || \"updated\";\r\n\t\t\t\tlet sid = rowId;\r\n\t\t\t\tlet tid = rowId;\r\n\r\n\t\t\t\tif (tag) {\r\n\t\t\t\t\taction = tag.action || taskState;\r\n\t\t\t\t\tsid = tag.sid || sid;\r\n\t\t\t\t\ttid = tag.id || tag.tid || tid;\r\n\t\t\t\t}\r\n\t\t\t\tthis.afterUpdateCallback(sid, tid, action, tag, ganttMode);\r\n\t\t\t};\r\n\r\n\t\t\tlet actionPromise;\r\n\t\t\tif (this._router instanceof Function) {\r\n\t\t\t\tif(this._routerParametersFormat === \"object\"){\r\n\t\t\t\t\tconst obj = {\r\n\t\t\t\t\t\tentity: ganttMode,\r\n\t\t\t\t\t\taction: taskAction,\r\n\t\t\t\t\t\tdata: dataToSend,\r\n\t\t\t\t\t\tid: rowId\r\n\t\t\t\t\t};\r\n\t\t\t\t\tactionPromise = this._router(obj);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tactionPromise = this._router(ganttMode, taskAction, dataToSend, rowId);\r\n\t\t\t\t}\r\n\t\t\t} else if (this._router[ganttMode] instanceof Function) {\r\n\t\t\t\tactionPromise = this._router[ganttMode](taskAction, dataToSend, rowId);\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconst errorMsgStart = \"Incorrect configuration of gantt.createDataProcessor\";\r\n\t\t\t\tconst errorMsgEnd = `\r\nYou need to either add missing properties to the dataProcessor router object or to use a router function.\r\nSee https://docs.dhtmlx.com/gantt/desktop__server_side.html#customrouting and https://docs.dhtmlx.com/gantt/api__gantt_createdataprocessor.html for details.`;\r\n\r\n\t\t\t\tif(!this._router[ganttMode]){\r\n\t\t\t\t\tthrow new Error(`${errorMsgStart}: router for the **${ganttMode}** entity is not defined. ${errorMsgEnd}`);\r\n\t\t\t\t}\r\n\t\t\t\tswitch (taskState) {\r\n\t\t\t\t\tcase \"inserted\":\r\n\t\t\t\t\t\tif(!this._router[ganttMode].create){\r\n\t\t\t\t\t\t\tthrow new Error(`${errorMsgStart}: **create** action for the **${ganttMode}** entity is not defined. ${errorMsgEnd}`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tactionPromise = this._router[ganttMode].create(dataToSend);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"deleted\":\r\n\t\t\t\t\t\tif(!this._router[ganttMode].delete){\r\n\t\t\t\t\t\t\tthrow new Error(`${errorMsgStart}: **delete** action for the **${ganttMode}** entity is not defined. ${errorMsgEnd}`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tactionPromise = this._router[ganttMode].delete(rowId);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tif(!this._router[ganttMode].update){\r\n\t\t\t\t\t\t\tthrow new Error(`${errorMsgStart}: **update**\" action for the **${ganttMode}** entity is not defined. ${errorMsgEnd}`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tactionPromise = this._router[ganttMode].update(dataToSend, rowId);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(actionPromise){\r\n\t\t\t\t// neither promise nor {tid: newId} response object\r\n\t\t\t\tif(!actionPromise.then &&\r\n\t\t\t\t\t(actionPromise.id === undefined && actionPromise.tid === undefined && actionPromise.action === undefined)){\r\n\t\t\t\t\tthrow new Error(\"Incorrect router return value. A Promise or a response object is expected\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(actionPromise.then){\r\n\t\t\t\t\tactionPromise.then(_onResolvedCreateUpdate).catch((error) => {\r\n\t\t\t\t\t\tif(error && error.action){\r\n\t\t\t\t\t\t\t_onResolvedCreateUpdate(error);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t_onResolvedCreateUpdate({ action: \"error\", value: error});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// custom method may return a response object in case of sync action\r\n\t\t\t\t\t_onResolvedCreateUpdate(actionPromise);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t_onResolvedCreateUpdate(null);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet queryParams: any;\r\n\t\tqueryParams = {\r\n\t\t\tcallback: (xml) => {\r\n\t\t\t\tconst ids = [];\r\n\r\n\t\t\t\tif (rowId) {\r\n\t\t\t\t\tids.push(rowId);\r\n\t\t\t\t} else if (dataToSend) {\r\n\t\t\t\t\tfor (const key in dataToSend) {\r\n\t\t\t\t\t\tids.push(key);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this.afterUpdate(this, xml, ids);\r\n\t\t\t},\r\n\t\t\theaders: this._headers\r\n\t\t};\r\n\r\n\t\tconst dhxVersion = \"dhx_version=\" + this.$gantt.getUserData(0, \"version\", this._ganttMode);\r\n\t\tconst urlParams = this.serverProcessor + (this._user ? (ajax.urlSeparator(this.serverProcessor) + [\"dhx_user=\" + this._user, dhxVersion].join(\"&\")) : \"\");\r\n\t\tlet url: any = this._applyPayload(urlParams);\r\n\t\tlet data;\r\n\r\n\t\tswitch (this._tMode) {\r\n\t\t\tcase \"GET\":\r\n\t\t\t\tdata = this._cleanupArgumentsBeforeSend(dataToSend);\r\n\t\t\t\tqueryParams.url = url + ajax.urlSeparator(url) + this.serialize(data, rowId);\r\n\t\t\t\tqueryParams.method = \"GET\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"POST\":\r\n\t\t\t\tdata = this._cleanupArgumentsBeforeSend(dataToSend);\r\n\t\t\t\tqueryParams.url = url;\r\n\t\t\t\tqueryParams.method = \"POST\";\r\n\t\t\t\tqueryParams.data = this.serialize(data, rowId);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"JSON\":\r\n\t\t\t\tdata = {};\r\n\t\t\t\tconst preprocessedData = this._cleanupItemBeforeSend(dataToSend);\r\n\t\t\t\tfor (const key in preprocessedData) {\r\n\t\t\t\t\tif (key === this.action_param || key === \"id\" || key === \"gr_id\") {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdata[key] = preprocessedData[key];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tqueryParams.url = url;\r\n\t\t\t\tqueryParams.method = \"POST\";\r\n\t\t\t\tqueryParams.data = JSON.stringify({\r\n\t\t\t\t\tid: rowId,\r\n\t\t\t\t\taction: dataToSend[this.action_param],\r\n\t\t\t\t\tdata\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"REST\":\r\n\t\t\tcase \"REST-JSON\":\r\n\t\t\t\turl = urlParams.replace(/(&|\\?)editing=true/, \"\");\r\n\t\t\t\tdata = \"\";\r\n\r\n\t\t\t\tswitch (this.getState(rowId)) {\r\n\t\t\t\t\tcase \"inserted\":\r\n\t\t\t\t\t\tqueryParams.method = \"POST\";\r\n\t\t\t\t\t\tqueryParams.data = this.serialize(dataToSend, rowId);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"deleted\":\r\n\t\t\t\t\t\tqueryParams.method = \"DELETE\";\r\n\t\t\t\t\t\turl = url + (url.slice(-1) === \"/\" ? \"\" : \"/\") + rowId;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tqueryParams.method = \"PUT\";\r\n\t\t\t\t\t\tqueryParams.data = this.serialize(dataToSend, rowId);\r\n\t\t\t\t\t\turl = url + (url.slice(-1) === \"/\" ? \"\" : \"/\") + rowId;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tqueryParams.url = this._applyPayload(url);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis._waitMode++;\r\n\t\treturn ajax.query(queryParams);\r\n\t}\r\n\r\n\tprotected _forEachUpdatedRow(code: any) {\r\n\t\tconst updatedRows = this.updatedRows.slice();\r\n\t\tfor (let i = 0; i < updatedRows.length; i++) {\r\n\t\t\tconst rowId = updatedRows[i];\r\n\t\t\tif (this.$gantt.getUserData(rowId, this.action_param, this._ganttMode)) {\r\n\t\t\t\tcode.call(this, rowId);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprotected _setDefaultTransactionMode() {\r\n\t\tif (this.serverProcessor) {\r\n\t\t\tthis.setTransactionMode(\"POST\", true);\r\n\t\t\tthis.serverProcessor += (this.serverProcessor.indexOf(\"?\") !== -1 ? \"&\" : \"?\") + \"editing=true\";\r\n\t\t\tthis._serverProcessor = this.serverProcessor;\r\n\t\t}\r\n\t}\r\n\r\n\t/* returns xml node value\r\n\t\t@param node\r\n\t\t\txml node\r\n\t*/\r\n\tprotected _getXmlNodeValue(node) {\r\n\t\tif (node.firstChild) {\r\n\t\t\treturn node.firstChild.nodeValue;\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tprotected _getAllData() {\r\n\t\tconst out = {};\r\n\t\tlet hasOne = false;\r\n\r\n\t\tthis._forEachUpdatedRow(function(id) {\r\n\t\t\tif (this._in_progress[id] || this.is_invalid(id)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst row = this._getRowData(id);\r\n\t\t\tif (!this.callEvent(\"onBeforeUpdate\", [id, this.getState(id), row])) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tout[id] = row;\r\n\t\t\thasOne = true;\r\n\t\t\tthis._in_progress[id] = (new Date()).valueOf();\r\n\t\t});\r\n\r\n\t\treturn hasOne ? out : null;\r\n\t}\r\n\r\n\tprotected _prepareDate(value: Date) : string {\r\n\t\treturn this.$gantt.defined(this.$gantt.templates.xml_format) ? this.$gantt.templates.xml_format(value) : this.$gantt.templates.format_date(value);\r\n\t}\r\n\r\n\tprotected _prepareArray(value: any[], traversedObjects: object[]) : any[] {\r\n\t\ttraversedObjects.push(value);\r\n\r\n\t\treturn value.map((item) => {\r\n\t\t\tif(helpers.isDate(item)){\r\n\t\t\t\treturn this._prepareDate(item);\r\n\t\t\t} else if (Array.isArray(item) && !helpers.arrayIncludes(traversedObjects, item)){\r\n\t\t\t\treturn this._prepareArray(item, traversedObjects);\r\n\t\t\t} else if (item && typeof item === \"object\" && !helpers.arrayIncludes(traversedObjects, item)) {\r\n\t\t\t\treturn this._prepareObject(item, traversedObjects);\r\n\t\t\t} else {\r\n\t\t\t\treturn item;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprotected _prepareObject(rawItem: any, traversedObjects: object[]) : any {\r\n\t\tconst processedItem = {};\r\n\t\ttraversedObjects.push(rawItem);\r\n\r\n\t\tfor (const key in rawItem) {\r\n\t\t\tif (key.substr(0, 1) === \"$\") {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tconst value = rawItem[key];\r\n\t\t\tif (helpers.isDate(value)) {\r\n\t\t\t\tprocessedItem[key] = this._prepareDate(value);\r\n\t\t\t} else if(value === null) {\r\n\t\t\t\tprocessedItem[key] = \"\";\r\n\t\t\t} else if (Array.isArray(value) && !helpers.arrayIncludes(traversedObjects, value)){\r\n\t\t\t\tprocessedItem[key] = this._prepareArray(value, traversedObjects);\r\n\t\t\t} else if (value && typeof value === \"object\" && !helpers.arrayIncludes(traversedObjects, value)) {\r\n\t\t\t\tprocessedItem[key] = this._prepareObject(value, traversedObjects);\r\n\t\t\t} else {\r\n\t\t\t\tprocessedItem[key] = value;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn processedItem;\r\n\t}\r\n\r\n\tprotected _prepareDataItem(rawItem: any): any {\r\n\t\tconst processedItem = this._prepareObject(rawItem, []);\r\n\r\n\t\tprocessedItem[this.action_param] = this.$gantt.getUserData(rawItem.id, this.action_param, this._ganttMode);\r\n\t\treturn processedItem;\r\n\t}\r\n\r\n\tprotected getStoredItem(id){\r\n\t\treturn this._storage.getStoredItem(id);\r\n\t}\r\n\r\n\tprotected _getRowData(id) {\r\n\t\tlet dataItem;\r\n\t\tconst gantt = this.$gantt;\r\n\t\tif (this.getGanttMode() === \"task\") {\r\n\t\t\tif(gantt.isTaskExists(id)){\r\n\t\t\t\tdataItem =this.$gantt.getTask(id);\r\n\t\t\t}\r\n\t\t} else if (this.getGanttMode() === \"assignment\") {\r\n\t\t\tif(this.$gantt.$data.assignmentsStore.exists(id)){\r\n\t\t\t\tdataItem =this.$gantt.$data.assignmentsStore.getItem(id);\r\n\t\t\t}\r\n\t\t} else if (this.getGanttMode() === \"baseline\") {\r\n\t\t\tif(this.$gantt.$data.baselineStore.exists(id)){\r\n\t\t\t\tdataItem =this.$gantt.$data.baselineStore.getItem(id);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif(gantt.isLinkExists(id)){\r\n\t\t\t\tdataItem =this.$gantt.getLink(id);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!dataItem) {\r\n\t\t\tdataItem = this.getStoredItem(id);\r\n\t\t}\r\n\r\n\t\tif (!dataItem) {\r\n\t\t\tdataItem = { id };\r\n\t\t}\r\n\r\n\t\treturn this._prepareDataItem(dataItem);\r\n\t}\r\n}","\r\nexport default function extendGantt(gantt: any, dp: any) {\r\n\tgantt.getUserData = function(id, name, store) {\r\n\t\tif (!this.userdata) {\r\n\t\t\tthis.userdata = {};\r\n\t\t}\r\n\t\tthis.userdata[store] = this.userdata[store] || {};\r\n\t\tif (this.userdata[store][id] && this.userdata[store][id][name]) {\r\n\t\t\treturn this.userdata[store][id][name];\r\n\t\t}\r\n\t\treturn \"\";\r\n\t};\r\n\tgantt.setUserData = function(id, name, value, store) {\r\n\t\tif (!this.userdata) {\r\n\t\t\tthis.userdata = {};\r\n\t\t}\r\n\t\tthis.userdata[store] = this.userdata[store] || {};\r\n\t\tthis.userdata[store][id] = this.userdata[store][id] || {};\r\n\t\tthis.userdata[store][id][name] = value;\r\n\t};\r\n\r\n\tgantt._change_id = function(oldId, newId) {\r\n\t\tswitch (this._dp._ganttMode) {\r\n\t\t\tcase \"task\":\r\n\t\t\t\tthis.changeTaskId(oldId, newId);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"link\":\r\n\t\t\t\tthis.changeLinkId(oldId, newId);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"assignment\":\r\n\t\t\t\tthis.$data.assignmentsStore.changeId(oldId, newId);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"resource\":\r\n\t\t\t\tthis.$data.resourcesStore.changeId(oldId, newId);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"baseline\":\r\n\t\t\t\tthis.$data.baselineStore.changeId(oldId, newId);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(`Invalid mode of the dataProcessor after database id is received: ${this._dp._ganttMode}, new id: ${newId}`);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._row_style = function(rowId, classname){\r\n\t\tif (this._dp._ganttMode !== \"task\") {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!gantt.isTaskExists(rowId)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst task = gantt.getTask(rowId);\r\n\t\ttask.$dataprocessor_class = classname;\r\n\t\tgantt.refreshTask(rowId);\r\n\t};\r\n\r\n\t// fake method for dataprocessor\r\n\tgantt._delete_task = function(rowId, node) {}; // tslint:disable-line\r\n\r\n\tgantt._sendTaskOrder = function(id, item){\r\n\t\tif (item.$drop_target) {\r\n\t\t\tthis._dp.setGanttMode(\"task\");\r\n\t\t\tthis.getTask(id).target = item.$drop_target;\r\n\t\t\tthis._dp.setUpdated(id, true,\"order\");\r\n\t\t\tdelete this.getTask(id).$drop_target;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.setDp = function() {\r\n\t\tthis._dp = dp;\r\n\t};\r\n\r\n\tgantt.setDp();\r\n}","import * as DataProcessor from \"./data_processor\";\r\nexport default {\r\n\tDEPRECATED_api: function(server) {\r\n\t\treturn new (DataProcessor.DataProcessor)(server);\r\n\t},\r\n\tcreateDataProcessor: DataProcessor.createDataProcessor\r\n};","import global from \"../../utils/global\";\r\n\r\nfunction createMethod(gantt){\r\n\tvar methods = {};\r\n\tvar isActive = false;\r\n\tfunction disableMethod(methodName, dummyMethod){\r\n\t\tdummyMethod = typeof dummyMethod == \"function\" ? dummyMethod : function(){};\r\n\r\n\t\tif(!methods[methodName]){\r\n\t\t\tmethods[methodName] = this[methodName];\r\n\t\t\tthis[methodName] = dummyMethod;\r\n\t\t}\r\n\t}\r\n\tfunction restoreMethod(methodName){\r\n\t\tif(methods[methodName]){\r\n\t\t\tthis[methodName] = methods[methodName];\r\n\t\t\tmethods[methodName] = null;\r\n\t\t}\r\n\t}\r\n\tfunction disableMethods(methodsHash){\r\n\t\tfor(var i in methodsHash){\r\n\t\t\tdisableMethod.call(this, i, methodsHash[i]);\r\n\t\t}\r\n\t}\r\n\tfunction restoreMethods(){\r\n\t\tfor(var i in methods){\r\n\t\t\trestoreMethod.call(this, i);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction batchUpdatePayload(callback){\r\n\t\ttry{\r\n\t\t\tcallback();\r\n\t\t}catch(e){\r\n\t\t\tglobal.console.error(e);\r\n\t\t}\r\n\t}\r\n\r\n\tvar state = gantt.$services.getService(\"state\");\r\n\tstate.registerProvider(\"batchUpdate\", function(){\r\n\t\treturn {\r\n\t\t\tbatch_update: isActive\r\n\t\t};\r\n\t}, false);\r\n\r\n\treturn function batchUpdate(callback, noRedraw) {\r\n\t\tif(isActive){\r\n\t\t\t// batch mode is already active\r\n\t\t\tbatchUpdatePayload(callback);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar call_dp = (this._dp && this._dp.updateMode != \"off\");\r\n\t\tvar dp_mode;\r\n\t\tif (call_dp){\r\n\t\t\tdp_mode = this._dp.updateMode;\r\n\t\t\tthis._dp.setUpdateMode(\"off\");\r\n\t\t}\r\n\r\n\t\t// temporary disable some methods while updating multiple tasks\r\n\t\tvar resetProjects = {};\r\n\t\tvar methods = {\r\n\t\t\t\"render\":true,\r\n\t\t\t\"refreshData\":true,\r\n\t\t\t\"refreshTask\":true,\r\n\t\t\t\"refreshLink\":true,\r\n\t\t\t\"resetProjectDates\":function(task){\r\n\t\t\t\tresetProjects[task.id] = task;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdisableMethods.call(this, methods);\r\n\r\n\t\tisActive = true;\r\n\t\tthis.callEvent(\"onBeforeBatchUpdate\", []);\r\n\r\n\t\tbatchUpdatePayload(callback);\r\n\r\n\t\tthis.callEvent(\"onAfterBatchUpdate\", []);\r\n\r\n\t\trestoreMethods.call(this);\r\n\r\n\t\t// do required updates after changes applied\r\n\t\tfor(var i in resetProjects){\r\n\t\t\tthis.resetProjectDates(resetProjects[i]);\r\n\t\t}\r\n\r\n\t\tisActive = false;\r\n\r\n\t\tif(!noRedraw){\r\n\t\t\tthis.render();\r\n\t\t}\r\n\r\n\t\tif (call_dp) {\r\n\t\t\tthis._dp.setUpdateMode(dp_mode);\r\n\t\t\tthis._dp.setGanttMode(\"task\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t\tthis._dp.setGanttMode(\"link\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n}\r\n\r\nexport default function(gantt){\r\n\tgantt.batchUpdate = createMethod(gantt);\r\n};","const createWbs = (function(gantt){\r\n\treturn {\r\n\t_needRecalc: true,\r\n\treset: function(){\r\n\t\tthis._needRecalc = true;\r\n\t},\r\n\t_isRecalcNeeded: function(){\r\n\t\treturn (!this._isGroupSort() && this._needRecalc);\r\n\t},\r\n\t_isGroupSort: function() {\r\n\t\treturn !!(gantt.getState().group_mode);\r\n\t},\r\n\t_getWBSCode: function(task) {\r\n\t\tif(!task) return \"\";\r\n\r\n\t\tif(this._isRecalcNeeded()){\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\r\n\t\tif(task.$virtual) return \"\";\r\n\t\tif(this._isGroupSort()) return task.$wbs || \"\";\r\n\r\n\t\tif(!task.$wbs) {\r\n\t\t\tthis.reset();\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\t\treturn task.$wbs;\r\n\t},\r\n\t_setWBSCode: function(task, value) {\r\n\t\ttask.$wbs = value;\r\n\t},\r\n\tgetWBSCode: function(task) {\r\n\t\treturn this._getWBSCode(task);\r\n\t},\r\n\tgetByWBSCode: function(code){\r\n\t\tlet parts = code.split(\".\");\r\n\t\tlet currentNode = gantt.config.root_id;\r\n\t\tfor(let i = 0; i < parts.length; i++){\r\n\t\t\tconst children = gantt.getChildren(currentNode);\r\n\t\t\tlet index = parts[i]*1 - 1;\r\n\t\t\tif(gantt.isTaskExists(children[index])){\r\n\t\t\t\tcurrentNode = children[index];\r\n\t\t\t}else{\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(currentNode)){\r\n\t\t\treturn gantt.getTask(currentNode);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\t_calcWBS: function() {\r\n\t\tif(!this._isRecalcNeeded()) return;\r\n\r\n\t\tlet _isFirst = true;\r\n\t\tgantt.eachTask(function(ch) {\r\n\t\t\tif(ch.type == gantt.config.types.placeholder) return;\r\n\t\t\tif(_isFirst) {\r\n\t\t\t\t_isFirst = false;\r\n\t\t\t\tthis._setWBSCode(ch, \"1\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst _prevSibling = this._getPrevNonPlaceholderSibling(ch.id);\r\n\t\t\tif (_prevSibling !== null) {\r\n\t\t\t\tthis._increaseWBS(ch, _prevSibling);\r\n\t\t\t} else {\r\n\t\t\t\tlet _parent = gantt.getParent(ch.id);\r\n\t\t\t\tthis._setWBSCode(ch, gantt.getTask(_parent).$wbs + \".1\");\r\n\t\t\t}\r\n\t\t}, gantt.config.root_id, this);\r\n\r\n\t\tthis._needRecalc = false;\r\n\t},\r\n\t_increaseWBS: function(task, siblingiId){\r\n\t\tlet _wbs = gantt.getTask(siblingiId).$wbs;\r\n\t\tif(_wbs) {\r\n\t\t\t_wbs = _wbs.split(\".\");\r\n\t\t\t_wbs[_wbs.length-1]++;\r\n\t\t\tthis._setWBSCode(task, _wbs.join(\".\"));\r\n\t\t}\r\n\t},\r\n\t_getPrevNonPlaceholderSibling: function(childId) {\r\n\t\tlet prevSibling;\r\n\t\tlet currentId = childId;\r\n\t\tdo {\r\n\t\t\tprevSibling = gantt.getPrevSibling(currentId);\r\n\t\t\tcurrentId = prevSibling;\r\n\t\t} while (prevSibling !== null && gantt.getTask(prevSibling).type == gantt.config.types.placeholder);\r\n\t\treturn prevSibling;\r\n   }\r\n};\r\n});\r\n\r\nexport default function(gantt){\r\n\tconst wbs = createWbs(gantt);\r\n\tgantt.getWBSCode = function getWBSCode(task) {\r\n\t\treturn wbs.getWBSCode(task);\r\n\t};\r\n\r\n\tgantt.getTaskByWBSCode = function(code) {\r\n\t\treturn wbs.getByWBSCode(code);\r\n\t};\r\n\r\n\tfunction resetCache(){\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onAfterTaskMove\", resetCache);\r\n\tgantt.attachEvent(\"onBeforeParse\", resetCache);\r\n\tgantt.attachEvent(\"onAfterTaskDelete\", resetCache);\r\n\tgantt.attachEvent(\"onAfterTaskAdd\", resetCache);\r\n\tgantt.attachEvent(\"onAfterSort\", resetCache);\r\n\r\n};\r\n","import * as helpers from \"../../utils/helpers\";\r\nimport * as dom_helpers from \"../ui/utils/dom_helpers\";\r\nfunction createResourceMethods(gantt){\r\n\r\n\tvar resourceTaskCache = {};\r\n\tvar singleResourceCacheBuilt = false;\r\n\r\n\tgantt.$data.tasksStore.attachEvent(\"onStoreUpdated\", function(){\r\n\t\tresourceTaskCache = {};\r\n\t\tsingleResourceCacheBuilt = false;\r\n\t});\r\n\tgantt.attachEvent(\"onBeforeGanttRender\", function(){\r\n\t\tresourceTaskCache = {};\r\n\t});\r\n\r\n\tfunction getTaskBy(propertyName, propertyValue, typeFilter) {\r\n\t\tif (typeof propertyName == \"function\") {\r\n\t\t\treturn filterResourceTasks(propertyName);\r\n\t\t} else {\r\n\t\t\tif (helpers.isArray(propertyValue)) {\r\n\t\t\t\treturn getResourceTasks(propertyName, propertyValue, typeFilter);\r\n\t\t\t} else {\r\n\t\t\t\treturn getResourceTasks(propertyName, [propertyValue], typeFilter);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction filterResourceTasks(filter) {\r\n\t\tvar res = [];\r\n\t\tgantt.eachTask(function (task) {\r\n\t\t\tif (filter(task)) {\r\n\t\t\t\tres.push(task);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn res;\r\n\t}\r\n\r\n\tvar falsyValuePrefix = String(Math.random());\r\n\tfunction resourceHashFunction(value){\r\n\t\tif (value === null){\r\n\t\t\treturn falsyValuePrefix + String(value);\r\n\t\t}\r\n\t\treturn String(value);\r\n\t}\r\n\r\n\tfunction getCacheKey(resourceIds, property, typeFilter) {\r\n\t\tif (Array.isArray(resourceIds)) {\r\n\t\t\treturn resourceIds.map(function (value) {\r\n\t\t\t\treturn resourceHashFunction(value);\r\n\t\t\t}).join(\"_\") + `_${property}_${typeFilter}`;\r\n\t\t} else {\r\n\t\t\treturn resourceHashFunction(resourceIds) + `_${property}_${typeFilter}`;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getResourceTasks(property, resourceIds, typeFilter) {\r\n\t\tvar res;\r\n\t\tvar cacheKey = getCacheKey(resourceIds, property, JSON.stringify(typeFilter));\r\n\t\tvar matchingResources = {};\r\n\t\thelpers.forEach(resourceIds, function(resourceId) {\r\n\t\t\tmatchingResources[resourceHashFunction(resourceId)] = true;\r\n\t\t});\r\n\r\n\t\tif (!resourceTaskCache[cacheKey]) {\r\n\t\t\tres = resourceTaskCache[cacheKey] = [];\r\n\t\t\tgantt.eachTask(function (task) {\r\n\t\t\t\tif (typeFilter) {\r\n\t\t\t\t\tif (!typeFilter[gantt.getTaskType(task)]) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (task.type == gantt.config.types.project) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (property in task) {\r\n\t\t\t\t\tvar resourceValue;\r\n\t\t\t\t\tif (!helpers.isArray(task[property])) {\r\n\t\t\t\t\t\tresourceValue = [task[property]];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresourceValue = task[property];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\thelpers.forEach(resourceValue, function(value) {\r\n\t\t\t\t\t\tvar resourceValue = (value && value.resource_id) ? value.resource_id : value;\r\n\r\n\t\t\t\t\t\tif (matchingResources[resourceHashFunction(resourceValue)]) {\r\n\t\t\t\t\t\t\tres.push(task);\r\n\t\t\t\t\t\t}else if(!singleResourceCacheBuilt){\r\n\r\n\t\t\t\t\t\t\tvar key = getCacheKey(value, property);\r\n\t\t\t\t\t\t\tif(!resourceTaskCache[key]){\r\n\t\t\t\t\t\t\t\tresourceTaskCache[key] = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresourceTaskCache[key].push(task);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tsingleResourceCacheBuilt = true;\r\n\t\t} else {\r\n\t\t\tres = resourceTaskCache[cacheKey];\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction selectAssignments(resourceId, taskId, result){\r\n\t\tvar property = gantt.config.resource_property;\r\n\t\tvar owners = [];\r\n\t\tif (gantt.getDatastore(\"task\").exists(taskId)) {\r\n\t\t\tvar task = gantt.getTask(taskId);\r\n\t\t\towners = task[property] || [];\r\n\t\t}\r\n\r\n\t\tif (!Array.isArray(owners)) {\r\n\t\t\towners = [owners];\r\n\t\t}\r\n\t\tfor (var i = 0; i < owners.length; i++) {\r\n\t\t\tif (owners[i].resource_id == resourceId) {\r\n\t\t\t\tresult.push({task_id: task.id, resource_id:owners[i].resource_id, value:owners[i].value});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getResourceAssignments(resourceId, taskId){\r\n\t\t// resource assignment as an independent module:\r\n\t\t// {taskId:, resourceId, value}\r\n\t\t// TODO: probably should add a separate datastore for these\r\n\t\tvar assignments = [];\r\n\t\tvar property = gantt.config.resource_property;\r\n\t\tif(taskId !== undefined){\r\n\t\t\tselectAssignments(resourceId, taskId, assignments);\r\n\t\t}else{\r\n\t\t\tvar tasks = gantt.getTaskBy(property, resourceId);\r\n\t\t\ttasks.forEach(function(task){\r\n\t\t\t\tselectAssignments(resourceId, task.id, assignments);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn assignments;\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetTaskBy: getTaskBy,\r\n\t\tgetResourceAssignments: getResourceAssignments\r\n\t};\r\n}\r\n\r\nfunction createHelper(gantt){\r\n\tconst resourcePlugin = {\r\n\t\trenderEditableLabel: function(start_date, end_date, resource, tasks, assignments){\r\n\t\t\tconst editable = gantt.config.readonly ? \"\" : \"contenteditable\";\r\n\t\t\tif(start_date < resource.end_date && end_date > resource.start_date){\r\n\t\t\t\tfor(let i = 0; i < assignments.length; i++){\r\n\t\t\t\t\tconst a = assignments[i];\r\n\t\t\t\t\t\treturn \"<div \"+editable+\" data-assignment-cell data-assignment-id='\"+a.id+\"'\"+\r\n\t\t\t\t\t\t\" data-row-id='\"+resource.id+\"'\"+\r\n\t\t\t\t\t\t\" data-task='\"+resource.$task_id+\"'\"+\r\n\t\t\t\t\t\t\" data-start-date='\"+gantt.templates.format_date(start_date)+\"'\"+\r\n\t\t\t\t\t\t\" data-end-date='\"+gantt.templates.format_date(end_date)+\"'>\" + a.value + \"</div>\";\r\n\t\t\t\t}\r\n\t\t\t\treturn \"<div \"+editable+\" data-assignment-cell data-empty \"+ \r\n\t\t\t\t\t\t\" data-row-id='\"+resource.id+\"'\"+\r\n\t\t\t\t\t\t\" data-resource-id='\"+resource.$resource_id+\"'\"+\r\n\t\t\t\t\t\t\" data-task='\"+resource.$task_id+\"'\"+\r\n\t\t\t\t\t\t\" data-start-date='\"+gantt.templates.format_date(start_date)+\"'\"+\r\n\t\t\t\t\t\t\"'  data-end-date='\"+gantt.templates.format_date(end_date)+\"'>-</div>\";\r\n\t\t\t}\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\t\trenderSummaryLabel: function(start_date, end_date, resource, tasks, assignments){\r\n\t\t\tlet sum = assignments.reduce(function(total, assignment){ \r\n\t\t\t\treturn total + Number(assignment.value);\r\n\t\t\t}, 0);\r\n\r\n\t\t\tif(sum % 1){\r\n\t\t\t\tsum = Math.round(sum * 10)/10;\r\n\t\t\t}\r\n\r\n\t\t\tif(sum){\r\n\t\t\t\treturn \"<div>\" + sum + \"</div>\";\r\n\t\t\t}\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\t\teditableResourceCellTemplate: function(start_date, end_date, resource, tasks, assignments){\r\n\t\t\tif(resource.$role === \"task\"){\r\n\t\t\t\treturn resourcePlugin.renderEditableLabel(start_date, end_date, resource, tasks, assignments);\r\n\t\t\t}else{\r\n\t\t\t\treturn resourcePlugin.renderSummaryLabel(start_date, end_date, resource, tasks, assignments);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t\r\n\t\teditableResourceCellClass: function(start_date, end_date, resource, tasks, assignments){\r\n\t\t\tconst css = [];\r\n\t\t\tcss.push(\"resource_marker\");\r\n\r\n\t\t\tif(resource.$role === \"task\"){\r\n\t\t\t\tcss.push(\"task_cell\");\r\n\t\t\t}else{\r\n\t\t\t\tcss.push(\"resource_cell\");\r\n\t\t\t}\r\n\r\n\t\t\tconst sum = assignments.reduce(function(total, assignment){ \r\n\t\t\t\treturn total + Number(assignment.value);\r\n\t\t\t}, 0);\r\n\r\n\t\t\tlet capacity = Number(resource.capacity);\r\n\t\t\tif(isNaN(capacity)){\r\n\t\t\t\tcapacity = 8;\r\n\t\t\t}\r\n\t\t\tif (sum <= capacity) {\r\n\t\t\t\tcss.push(\"workday_ok\");\r\n\t\t\t} else {\r\n\t\t\t\tcss.push(\"workday_over\");\r\n\t\t\t}\r\n\t\t\treturn css.join(\" \");\r\n\t\t},\r\n\t\tgetSummaryResourceAssignments: function getResourceAssignments(resourceId) {\r\n\t\t\tlet assignments;\r\n\t\t\tconst store = gantt.getDatastore(gantt.config.resource_store);\r\n\t\t\tconst resource = store.getItem(resourceId);\r\n\r\n\t\t\tif(resource.$role === \"task\"){\r\n\t\t\t\tassignments = gantt.getResourceAssignments(resource.$resource_id, resource.$task_id);\r\n\t\t\t}else{\r\n\t\t\t\tassignments = gantt.getResourceAssignments(resourceId);\r\n\t\t\t\tif(store.eachItem){\r\n\t\t\t\t\tstore.eachItem(function(childResource){\r\n\t\t\t\t\t\tif(childResource.$role !== \"task\"){\r\n\t\t\t\t\t\t\tassignments = assignments.concat(gantt.getResourceAssignments(childResource.id));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, resourceId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn assignments;\r\n\t\t},\r\n\t\t\r\n\t\tinitEditableDiagram: function(){\r\n\t\t\tgantt.config.resource_render_empty_cells = true;\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t(function(){\r\n\t\t\t\t/// salesforce locker workaround\r\n\t\t\t\t// SF removes 'contenteditable' attribute from cells\r\n\t\t\t\t// restore it on render\r\n\t\t\t\tlet timeoutId = null;\r\n\t\t\t\tfunction makeEditable() {\r\n\t\t\t\t\tif (timeoutId) {\r\n\t\t\t\t\t\tcancelAnimationFrame(timeoutId);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttimeoutId = requestAnimationFrame(function () {\r\n\t\t\t\t\t\tif (gantt.$container){\r\n\t\t\t\t\t\t\tvar cells = Array.prototype.slice.call(gantt.$container.querySelectorAll(\".resourceTimeline_cell [data-assignment-cell]\"));\r\n\t\t\t\t\t\t\tcells.forEach(function (cell) {\r\n\t\t\t\t\t\t\t\tcell.contentEditable = true;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\t\t\t\t\tgantt.getDatastore(gantt.config.resource_assignment_store).attachEvent(\"onStoreUpdated\", makeEditable);\r\n\t\t\t\t\tgantt.getDatastore(gantt.config.resource_store).attachEvent(\"onStoreUpdated\", makeEditable);\r\n\t\t\t\t}, {once: true});\r\n\t\t\t\tgantt.attachEvent(\"onGanttLayoutReady\", function(){\r\n\t\t\t\t\tconst ganttViews = gantt.$layout.getCellsByType(\"viewCell\");\r\n\t\t\t\t\tganttViews.forEach(function(view){\r\n\t\t\t\t\t\tif(view.$config && view.$config.view === \"resourceTimeline\" && view.$content){\r\n\t\t\t\t\t\t\tview.$content.attachEvent(\"onScroll\", makeEditable);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t})();\r\n\t\t\t//GS-2766: need to restore focus after updating assignments\r\n\t\t\tlet currentFocusIndex = null;\r\n\t\t\tfunction setNextFocus(){\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tconst focusableElementsAfterRender = dom_helpers.getFocusableNodes(gantt.$container);\r\n\t\t\t\t\tif(currentFocusIndex > -1){\r\n\t\t\t\t\t\tfocusableElementsAfterRender[currentFocusIndex +1].focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 300);\r\n\t\t\t};\r\n\r\n\t\t\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\t\t\t\tlet assignmentEditInProcess = false;\r\n\t\t\t\tgantt.event(gantt.$container, \"keypress\", function(e){\r\n\t\t\t\t\tvar target = e.target.closest(\".resourceTimeline_cell [data-assignment-cell]\");\r\n\t\t\t\t\tif(target){\r\n\t\t\t\t\t\tif (e.keyCode === 13 || e.keyCode === 27) {\r\n\t\t\t\t\t\t\ttarget.blur();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgantt.event(gantt.$container, \"keydown\", function(event){\r\n\t\t\t\t\tif (event.key === \"Tab\") {\r\n\t\t\t\t\t\tconst focusableElements = dom_helpers.getFocusableNodes(gantt.$container);\r\n\t\t\t\t\t\tcurrentFocusIndex = focusableElements.indexOf(document.activeElement);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgantt.event(gantt.$container, \"focusout\", function(e){\r\n\t\t\t\t\tif (assignmentEditInProcess){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tassignmentEditInProcess = true;\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tassignmentEditInProcess = false;\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t\tvar target = e.target.closest(\".resourceTimeline_cell [data-assignment-cell]\");\r\n\t\t\t\t\tif(target){\r\n\t\t\t\t\t\tvar strValue = (target.innerText || \"\").trim();\r\n\t\t\t\t\t\tif(strValue == \"-\"){\r\n\t\t\t\t\t\t\tstrValue = \"0\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar value = Number(strValue);\r\n\t\t\t\t\t\tvar rowId = target.getAttribute(\"data-row-id\");\r\n\t\t\t\t\t\tvar assignmentId = target.getAttribute(\"data-assignment-id\");\r\n\t\t\t\t\t\tvar taskId = target.getAttribute(\"data-task\");\r\n\t\t\t\t\t\tvar resourceId = target.getAttribute(\"data-resource-id\");\r\n\t\t\t\t\t\tvar startDate = gantt.templates.parse_date(target.getAttribute(\"data-start-date\"));\r\n\t\t\t\t\t\tvar endDate = gantt.templates.parse_date(target.getAttribute(\"data-end-date\"));\r\n\r\n\t\t\t\t\t\tvar assignmentStore = gantt.getDatastore(gantt.config.resource_assignment_store);\r\n\t\t\t\t\t\tif(isNaN(value)){\r\n\t\t\t\t\t\t\tgantt.getDatastore(gantt.config.resource_store).refresh(rowId);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tvar task = gantt.getTask(taskId);\r\n\t\t\t\t\t\t\t// GS-2141. Track the changes by the Undo extension\r\n\t\t\t\t\t\t\tif (gantt.plugins().undo){\r\n\t\t\t\t\t\t\t\tgantt.ext.undo.saveState(taskId, \"task\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(assignmentId){\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar assignment = assignmentStore.getItem(assignmentId);\r\n\t\t\t\t\t\t\t\tif(value === assignment.value){\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(assignment.start_date.valueOf() === startDate.valueOf() && assignment.end_date.valueOf() === endDate.valueOf()){\r\n\t\t\t\t\t\t\t\t\tassignment.value = value;\r\n\t\t\t\t\t\t\t\t\tif(!value){\r\n\t\t\t\t\t\t\t\t\t\tassignmentStore.removeItem(assignment.id);\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tassignmentStore.updateItem(assignment.id);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif(assignment.end_date.valueOf() > endDate.valueOf()){\r\n\t\t\t\t\t\t\t\t\t\tvar nextChunk = gantt.copy(assignment);\r\n\t\t\t\t\t\t\t\t\t\tnextChunk.id = gantt.uid();\r\n\t\t\t\t\t\t\t\t\t\tnextChunk.start_date = endDate;\r\n\t\t\t\t\t\t\t\t\t\tnextChunk.duration = gantt.calculateDuration({\r\n\t\t\t\t\t\t\t\t\t\t\tstart_date: nextChunk.start_date,\r\n\t\t\t\t\t\t\t\t\t\t\tend_date: nextChunk.end_date,\r\n\t\t\t\t\t\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tnextChunk.delay = gantt.calculateDuration({\r\n\t\t\t\t\t\t\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\t\t\t\t\t\t\tend_date: nextChunk.start_date,\r\n\t\t\t\t\t\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tnextChunk.mode = assignment.mode || \"default\";\r\n\t\t\t\t\t\t\t\t\t\tif(nextChunk.duration !== 0){\r\n\t\t\t\t\t\t\t\t\t\t\tassignmentStore.addItem(nextChunk);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tif(assignment.start_date.valueOf() < startDate.valueOf()){\r\n\t\t\t\t\t\t\t\t\t\tassignment.end_date = startDate;\r\n\t\t\t\t\t\t\t\t\t\tassignment.duration = gantt.calculateDuration({\r\n\t\t\t\t\t\t\t\t\t\t\tstart_date: assignment.start_date,\r\n\t\t\t\t\t\t\t\t\t\t\tend_date: assignment.end_date,\r\n\t\t\t\t\t\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tassignment.mode = \"fixedDuration\";\r\n\r\n\t\t\t\t\t\t\t\t\t\tif(assignment.duration === 0){\r\n\t\t\t\t\t\t\t\t\t\t\tassignmentStore.removeItem(assignment.id);\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\tassignmentStore.updateItem(assignment.id);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tassignmentStore.removeItem(assignment.id);\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tif(value){\r\n\t\t\t\t\t\t\t\t\t\tassignmentStore.addItem({\r\n\t\t\t\t\t\t\t\t\t\t\ttask_id: assignment.task_id,\r\n\t\t\t\t\t\t\t\t\t\t\tresource_id: assignment.resource_id,\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: value,\r\n\t\t\t\t\t\t\t\t\t\t\tstart_date: startDate,\r\n\t\t\t\t\t\t\t\t\t\t\tend_date: endDate,\r\n\t\t\t\t\t\t\t\t\t\t\tduration: gantt.calculateDuration({\r\n\t\t\t\t\t\t\t\t\t\t\t\tstart_date: startDate,\r\n\t\t\t\t\t\t\t\t\t\t\t\tend_date: endDate,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t\t\tdelay: gantt.calculateDuration({\r\n\t\t\t\t\t\t\t\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\t\t\t\t\t\t\t\tend_date: startDate,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t\t\tmode: \"fixedDuration\"\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tgantt.updateTaskAssignments(task.id);\r\n\t\t\t\t\t\t\t\tgantt.updateTask(task.id);\r\n\t\t\t\t\t\t\t\tsetNextFocus();\r\n\r\n\t\t\t\t\t\t\t}else if(value){\r\n\t\t\t\t\t\t\t\tvar assignment = {\r\n\t\t\t\t\t\t\t\t\ttask_id: taskId,\r\n\t\t\t\t\t\t\t\t\tresource_id: resourceId,\r\n\t\t\t\t\t\t\t\t\tvalue: value,\r\n\t\t\t\t\t\t\t\t\tstart_date: startDate,\r\n\t\t\t\t\t\t\t\t\tend_date: endDate,\r\n\t\t\t\t\t\t\t\t\tduration: gantt.calculateDuration({\r\n\t\t\t\t\t\t\t\t\t\tstart_date: startDate,\r\n\t\t\t\t\t\t\t\t\t\tend_date: endDate,\r\n\t\t\t\t\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\tdelay: gantt.calculateDuration({\r\n\t\t\t\t\t\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\t\t\t\t\t\tend_date: startDate,\r\n\t\t\t\t\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\tmode: \"fixedDuration\"\r\n\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\tassignmentStore.addItem(assignment);\r\n\t\t\t\t\t\t\t\tgantt.updateTaskAssignments(task.id);\r\n\t\t\t\t\t\t\t\tgantt.updateTask(task.id);\r\n\t\t\t\t\t\t\t\tsetNextFocus();\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}, {once: true});\r\n\t\t}\r\n\t};\r\n\treturn resourcePlugin;\r\n}\r\n\r\nexport default function(gantt){\r\n\tvar methods = createResourceMethods(gantt);\r\n\t\r\n\tgantt.ext.resources = createHelper(gantt);\r\n\r\n\tgantt.config.resources = {\r\n\t\tdataprocessor_assignments: false,\r\n\t\tdataprocessor_resources: false,\r\n\t\teditable_resource_diagram: false,\r\n\t\tresource_store: {\r\n\t\t\ttype: \"treeDataStore\",\r\n\t\t\tfetchTasks: false,\r\n\t\t\tinitItem: function(item) {\r\n\t\t\t\titem.parent = item.parent || gantt.config.root_id;\r\n\t\t\t\titem[gantt.config.resource_property] = item.parent;\r\n\t\t\t\titem.open = true;\r\n\t\t\t\treturn item;\r\n\t\t\t}\r\n\t\t},\r\n\t\tlightbox_resources: function selectResourceControlOptions(resources){\r\n\t\t\tconst lightboxOptions = [];\r\n\t\t\tconst store = gantt.getDatastore(gantt.config.resource_store);\r\n\t\t\tresources.forEach(function(res) {\r\n\t\t\t\tif (!store.hasChild(res.id)) {\r\n\t\t\t\t\tconst copy = gantt.copy(res);\r\n\t\t\t\t\tcopy.key = res.id;\r\n\t\t\t\t\tcopy.label = res.text;\r\n\t\t\t\t\tlightboxOptions.push(copy);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn lightboxOptions;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeGanttReady\", function(){\r\n\t\tif(gantt.getDatastore(gantt.config.resource_store)){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst resourceStoreConfig = gantt.config.resources ? gantt.config.resources.resource_store : undefined;\r\n\t\tlet fetchTasks = resourceStoreConfig ? resourceStoreConfig.fetchTasks : undefined;\r\n\t\tif(gantt.config.resources && gantt.config.resources.editable_resource_diagram){\r\n\t\t\tfetchTasks = true;\r\n\t\t}\r\n\r\n\t\tlet initItems = function(item) {\r\n\t\t\titem.parent = item.parent || gantt.config.root_id;\r\n\t\t\titem[gantt.config.resource_property] = item.parent;\r\n\t\t\titem.open = true;\r\n\t\t\treturn item;\r\n\t\t};\r\n\r\n\t\tif(resourceStoreConfig && resourceStoreConfig.initItem){\r\n\t\t\tinitItems = resourceStoreConfig.initItem;\r\n\t\t}\r\n\r\n\t\tconst storeType = resourceStoreConfig && resourceStoreConfig.type ? resourceStoreConfig.type : \"treeDatastore\";\r\n\r\n\t\tgantt.$resourcesStore = gantt.createDatastore({\r\n\t\t\tname: gantt.config.resource_store,\r\n\t\t\ttype: storeType,\r\n\t\t\tfetchTasks: fetchTasks !== undefined ? fetchTasks : false,\r\n\t\t\tinitItem: initItems\r\n\t\t});\r\n\r\n\t\tgantt.$data.resourcesStore = gantt.$resourcesStore;\r\n\r\n\t\tgantt.$resourcesStore.attachEvent(\"onParse\", function() {\r\n\t\t\tfunction selectResourceControlOptions(resources){\r\n\t\t\t\tconst lightboxOptions = [];\r\n\t\t\t\tresources.forEach(function(res) {\r\n\t\t\t\t\tconst copy = gantt.copy(res);\r\n\t\t\t\t\tcopy.key = res.id;\r\n\t\t\t\t\tcopy.label = res.text;\r\n\t\t\t\t\tlightboxOptions.push(copy);\r\n\t\t\t\t});\r\n\t\t\t\treturn lightboxOptions;\r\n\t\t\t}\r\n\r\n\t\t\tlet lightboxOptionsFnc = selectResourceControlOptions;\r\n\t\t\tlet options;\r\n\t\t\tif(gantt.config.resources && gantt.config.resources.lightbox_resources){\r\n\t\t\t\tlightboxOptionsFnc = gantt.config.resources.lightbox_resources;\r\n\t\t\t}\r\n\t\t\tif(gantt.config.resources && gantt.config.resources.editable_resource_diagram){\r\n\t\t\t\t// GS-2604: case for the next parsed resources\r\n\t\t\t\t// to filter only resources with assignments\r\n\t\t\t\tconst resources = gantt.$resourcesStore.getItems();\r\n\t\t\t\tconst filteredResources = resources.filter(resource => {\r\n\t\t\t\t\tlet assignments = gantt.getResourceAssignments(resource.id);\r\n\t\t\t\t\tif(!gantt.$resourcesStore.hasChild(resource.id) || (assignments && assignments.length)){\r\n\t\t\t\t\t\tif(resource.$resource_id && resource.$task_id){\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\toptions = lightboxOptionsFnc(filteredResources);\r\n\t\t\t} else {\r\n\t\t\t\toptions = lightboxOptionsFnc(gantt.$resourcesStore.getItems());\r\n\t\t\t}\r\n\t\t\tgantt.updateCollection(\"resourceOptions\", options);\r\n\t\t});\r\n\t});\r\n\r\n\tgantt.getTaskBy = methods.getTaskBy;\r\n\tgantt.getResourceAssignments = methods.getResourceAssignments;\r\n\tgantt.config.resource_property = \"owner_id\";\r\n\tgantt.config.resource_store = \"resource\";\r\n\tgantt.config.resource_render_empty_cells = false;\r\n\r\n\t/**\r\n\t * these are placeholder functions that should be redefined by the user\r\n\t*/\r\n\tgantt.templates.histogram_cell_class = function(start_date, end_date, resource, tasks, assignments) {};\r\n\tgantt.templates.histogram_cell_label = function(start_date, end_date, resource, tasks, assignments) {\r\n\t\treturn tasks.length + \"/3\";\r\n\t};\r\n\tgantt.templates.histogram_cell_allocated = function(start_date, end_date, resource, tasks, assignments) {\r\n\t\treturn tasks.length / 3;\r\n\t};\r\n\tgantt.templates.histogram_cell_capacity = function(start_date, end_date, resource, tasks, assignments) {\r\n\t\treturn 0;\r\n\t};\r\n\r\n\r\n\tconst defaultResourceCellClass = function(start, end, resource, tasks, assignments) {\r\n\t\tvar css = \"\";\r\n\t\tif (tasks.length <= 1) {\r\n\t\t\tcss = \"gantt_resource_marker_ok\";\r\n\t\t} else {\r\n\t\t\tcss = \"gantt_resource_marker_overtime\";\r\n\t\t}\r\n\t\treturn css;\r\n\t};\r\n\r\n\tconst defaultResourceCellTemplate = function(start, end, resource, tasks, assignments) {\r\n\t\treturn tasks.length * 8;\r\n\t};\r\n\r\n\tgantt.templates.resource_cell_value = defaultResourceCellTemplate;\r\n\tgantt.templates.resource_cell_class = defaultResourceCellClass;\r\n\r\n\t//editable_resource_diagram\r\n\tgantt.attachEvent(\"onBeforeGanttReady\", function(){\r\n\t\tif(gantt.config.resources && gantt.config.resources.editable_resource_diagram){\r\n\r\n\t\t\tgantt.config.resource_render_empty_cells = true;\r\n\t\t\tif(gantt.templates.resource_cell_value === defaultResourceCellTemplate){\r\n\t\t\t\tgantt.templates.resource_cell_value = gantt.ext.resources.editableResourceCellTemplate;\r\n\t\t\t}\r\n\t\t\tif(gantt.templates.resource_cell_class === defaultResourceCellClass){\r\n\t\t\t\tgantt.templates.resource_cell_class = gantt.ext.resources.editableResourceCellClass;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tgantt.ext.resources.initEditableDiagram(gantt);\r\n\t\t}\r\n\t});\r\n};\r\n\r\n\r\n","export default function (gantt) {\r\n\tvar resourceAssignmentsProperty = \"$resourceAssignments\";\r\n\tgantt.config.resource_assignment_store = \"resourceAssignments\";\r\n\tgantt.config.process_resource_assignments = true;\r\n\r\n\tvar resourceAssignmentFormats = {\r\n\t\tauto: \"auto\",\r\n\t\tsingleValue: \"singleValue\",\r\n\t\tvalueArray: \"valueArray\",\r\n\t\tresourceValueArray: \"resourceValueArray\",\r\n\t\tassignmentsArray: \"assignmentsArray\"\r\n\t};\r\n\tvar resourceAssignmentFormat = resourceAssignmentFormats.auto;//\"primitiveSingle\";//\"primitive\";//\"object\"|\"assignment\"\r\n\r\n\tvar assignmentModes = {\r\n\t\tfixedDates: \"fixedDates\",\r\n\t\tfixedDuration: \"fixedDuration\",\r\n\t\tdefault: \"default\"\r\n\t};\r\n\r\n\r\n\tfunction initAssignmentFields(item, task){\r\n\t\tif (item.start_date) {\r\n\t\t\titem.start_date = gantt.date.parseDate(item.start_date, \"parse_date\");\r\n\t\t} else {\r\n\t\t\titem.start_date = null;\r\n\t\t}\r\n\r\n\t\tif (item.end_date) {\r\n\t\t\titem.end_date = gantt.date.parseDate(item.end_date, \"parse_date\");\r\n\t\t} else {\r\n\t\t\titem.end_date = null;\r\n\t\t}\r\n\r\n\t\tvar delay = Number(item.delay);\r\n\t\tvar initDelay = false;\r\n\t\tif (!isNaN(delay)) {\r\n\t\t\titem.delay = delay;\r\n\t\t} else {\r\n\t\t\titem.delay = 0;\r\n\t\t\tinitDelay = true;\r\n\t\t}\r\n\r\n\t\tif (!gantt.defined(item.value)) {\r\n\t\t\titem.value = null;\r\n\t\t}\r\n\r\n\t\tif (!item.task_id || !item.resource_id) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\titem.mode = item.mode || assignmentModes.default;\r\n\r\n\t\tif(item.mode === assignmentModes.fixedDuration){\r\n\t\t\tif(isNaN(Number(item.duration))){\r\n\t\t\t\ttask = task || gantt.getTask(item.task_id);\r\n\t\t\t\titem.duration = gantt.calculateDuration({\r\n\t\t\t\t\tstart_date: item.start_date,\r\n\t\t\t\t\tend_date: item.end_date,\r\n\t\t\t\t\tid: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif(initDelay){\r\n\t\t\t\ttask = task || gantt.getTask(item.task_id);\r\n\t\t\t\titem.delay = gantt.calculateDuration({\r\n\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\tend_date: item.start_date,\r\n\t\t\t\t\tid: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (item.mode !== assignmentModes.fixedDates && (task || gantt.isTaskExists(item.task_id))) {\r\n\t\t\ttask = task || gantt.getTask(item.task_id);\r\n\t\t\tvar timing = _assignmentTimeFromTask(item, task);\r\n\t\t\titem.start_date = timing.start_date;\r\n\t\t\titem.end_date = timing.end_date;\r\n\t\t\titem.duration = timing.duration;\r\n\t\t}\r\n\t}\r\n\t// gantt init\r\n\tvar resourceAssignmentsStore = gantt.createDatastore({\r\n\t\tname: gantt.config.resource_assignment_store,\r\n\t\tinitItem: function (item) {\r\n\t\t\tif (!item.id) {\r\n\t\t\t\titem.id = gantt.uid();\r\n\t\t\t}\r\n\r\n\t\t\tinitAssignmentFields(item);\r\n\r\n\t\t\treturn item;\r\n\t\t}\r\n\t});\r\n\t\r\n\tgantt.$data.assignmentsStore = resourceAssignmentsStore;\r\n\r\n\tfunction _assignmentTimeFromTask(assignment, task) {\r\n\r\n\t\tif (assignment.mode === assignmentModes.fixedDates) {\r\n\t\t\treturn {\r\n\t\t\t\tstart_date: assignment.start_date,\r\n\t\t\t\tend_date: assignment.end_date,\r\n\t\t\t\tduration: assignment.duration\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tvar start = assignment.delay ? gantt.calculateEndDate({\r\n\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\tduration: assignment.delay,\r\n\t\t\t\ttask: task\r\n\t\t\t}) : new Date(task.start_date);\r\n\r\n\t\t\tvar end;\r\n\t\t\tvar duration;\r\n\t\t\tif (assignment.mode === assignmentModes.fixedDuration) {\r\n\t\t\t\tend = gantt.calculateEndDate({\r\n\t\t\t\t\tstart_date: start,\r\n\t\t\t\t\tduration: assignment.duration,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t\tduration = assignment.duration;\r\n\t\t\t} else {\r\n\t\t\t\tend = new Date(task.end_date);\r\n\t\t\t\tduration = task.duration - assignment.delay;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: start,\r\n\t\t\tend_date: end,\r\n\t\t\tduration: duration\r\n\t\t};\r\n\t}\r\n\r\n\t// data loading\r\n\r\n\tfunction _makeAssignmentsFromTask(task) {\r\n\t\tconst property = gantt.config.resource_property;\r\n\t\tlet assignments = task[property];\r\n\t\tconst resourceAssignments = [];\r\n\t\tlet detectFormat = resourceAssignmentFormat === resourceAssignmentFormats.auto;\r\n\r\n\t\tif (gantt.defined(assignments) && assignments) {\r\n\t\t\tif (!Array.isArray(assignments)) {\r\n\t\t\t\tassignments = [assignments];\r\n\t\t\t\tif (detectFormat) {\r\n\t\t\t\t\tresourceAssignmentFormat = resourceAssignmentFormats.singleValue;\r\n\t\t\t\t\tdetectFormat = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst usedIds = {};\r\n\t\t\tassignments.forEach(function (res) {\r\n\t\t\t\tif (!res.resource_id) { // when resource is a string/number\r\n\t\t\t\t\tres = { resource_id: res };\r\n\t\t\t\t\tif (detectFormat) {\r\n\t\t\t\t\t\tresourceAssignmentFormat = resourceAssignmentFormats.valueArray;\r\n\t\t\t\t\t\tdetectFormat = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//\tisSimpleArray = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (detectFormat) {\r\n\t\t\t\t\tif (res.id && res.resource_id) {\r\n\t\t\t\t\t\tresourceAssignmentFormat = resourceAssignmentFormats.assignmentsArray;\r\n\t\t\t\t\t\tdetectFormat = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresourceAssignmentFormat = resourceAssignmentFormats.resourceValueArray;\r\n\t\t\t\t\t\tdetectFormat = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet defaultMode = assignmentModes.default;\r\n\t\t\t\tif(!res.mode){\r\n\t\t\t\t\tif((res.start_date && res.end_date) || (res.start_date && res.duration)){\r\n\t\t\t\t\t\tdefaultMode = assignmentModes.fixedDuration;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet id;\r\n\t\t\t\tif(!res.id && res.$id && !usedIds[res.$id]){\r\n\t\t\t\t\tid = res.$id;\r\n\t\t\t\t} else if(res.id && !usedIds[res.id]){\r\n\t\t\t\t\tid = res.id;\r\n\t\t\t\t} else{\r\n\t\t\t\t\tid = gantt.uid();\r\n\t\t\t\t}\r\n\t\t\t\tusedIds[id] = true;\r\n\r\n\t\t\t\tconst assignment = {\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\tstart_date: res.start_date,\r\n\t\t\t\t\tduration: res.duration,\r\n\t\t\t\t\tend_date: res.end_date,\r\n\t\t\t\t\tdelay: res.delay,\r\n\t\t\t\t\ttask_id: task.id,\r\n\t\t\t\t\tresource_id: res.resource_id,\r\n\t\t\t\t\tvalue: res.value,\r\n\t\t\t\t\tmode: res.mode || defaultMode\r\n\t\t\t\t};\r\n\t\t\t\t// GS-2490: to add custom properties to assignment\r\n\t\t\t\t// need to exclude $id which incfluences on render \r\n\t\t\t\tObject.keys(res).forEach(key => {\r\n\t\t\t\t\tif(key != \"$id\") {\r\n\t\t\t\t\t\tassignment[key] = res[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(!(assignment.start_date && assignment.start_date.getMonth \r\n\t\t\t\t\t&& assignment.end_date && assignment.end_date.getMonth && typeof assignment.duration === \"number\")){\r\n\t\t\t\t\tinitAssignmentFields(assignment, task);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresourceAssignments.push(assignment);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn resourceAssignments;\r\n\t}\r\n\r\n\tfunction _updateTaskBack(taskId) {\r\n\t\t// GS-1493. In some cases, the resource assignment store has the tasks that no longer exist\r\n\t\tif (!gantt.isTaskExists(taskId)){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar task = gantt.getTask(taskId);\r\n\t\tvar assignments = gantt.getTaskAssignments(task.id);\r\n\t\t_assignAssignments(task, assignments);\r\n\t}\r\n\r\n\tfunction _assignAssignments(task, assignments){\r\n\t\tassignments.sort(function(a, b){\r\n\t\t\tif(a.start_date && b.start_date && a.start_date.valueOf() != b.start_date.valueOf()){\r\n\t\t\t\treturn a.start_date - b.start_date;\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (resourceAssignmentFormat == resourceAssignmentFormats.assignmentsArray) {\r\n\t\t\ttask[gantt.config.resource_property] = assignments;\r\n\t\t} else if (resourceAssignmentFormat == resourceAssignmentFormats.resourceValueArray) {\r\n\t\t\ttask[gantt.config.resource_property] = assignments.map(function (a) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t$id: a.id,\r\n\t\t\t\t\tstart_date: a.start_date,\r\n\t\t\t\t\tduration: a.duration,\r\n\t\t\t\t\tend_date: a.end_date,\r\n\t\t\t\t\tdelay: a.delay,\r\n\t\t\t\t\tresource_id: a.resource_id,\r\n\t\t\t\t\tvalue: a.value,\r\n\t\t\t\t\tmode: a.mode\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\ttask[resourceAssignmentsProperty] = assignments;\r\n\t}\r\n\r\n\tfunction _loadAssignmentsFromTask(task) {\r\n\t\tvar assignments = _makeAssignmentsFromTask(task);\r\n\t\tvar taskAssignments = [];\r\n\t\tassignments.forEach(function (a) {\r\n\t\t\ta.id = a.id || gantt.uid();\r\n\t\t\t//var newId = resourceAssignmentsStore.addItem(a);\r\n\t\t\ttaskAssignments.push(a);\r\n\t\t});\r\n\r\n\t\treturn assignments;\r\n\t}\r\n\r\n\tfunction diffAssignments(taskValues, assignmentsStoreValues) {\r\n\t\tvar result = {\r\n\t\t\tinBoth: [],\r\n\t\t\tinTaskNotInStore: [],\r\n\t\t\tinStoreNotInTask: []\r\n\t\t};\r\n\r\n\t\tif (resourceAssignmentFormat == resourceAssignmentFormats.singleValue) {\r\n\t\t\tvar taskOwner = taskValues[0];\r\n\t\t\tvar ownerId = taskOwner ? taskOwner.resource_id : null;\r\n\t\t\tvar foundOwnerAssignment = false;\r\n\t\t\tassignmentsStoreValues.forEach(function (a) {\r\n\t\t\t\tif (a.resource_id != ownerId) {\r\n\t\t\t\t\tresult.inStoreNotInTask.push(a);\r\n\t\t\t\t} else if (a.resource_id == ownerId) {\r\n\t\t\t\t\tresult.inBoth.push({ store: a, task: taskOwner });\r\n\t\t\t\t\tfoundOwnerAssignment = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (!foundOwnerAssignment && taskOwner) {\r\n\t\t\t\tresult.inTaskNotInStore.push(taskOwner);\r\n\t\t\t}\r\n\r\n\r\n\t\t} else if (resourceAssignmentFormat == resourceAssignmentFormats.valueArray){\r\n\r\n\t\t\tvar taskSearch = {};\r\n\t\t\tvar storeSearch = {};\r\n\t\t\tvar processedIds = {};\r\n\t\t\ttaskValues.forEach(function (a) {\r\n\t\t\t\ttaskSearch[a.resource_id] = a;\r\n\t\t\t});\r\n\t\t\tassignmentsStoreValues.forEach(function (a) {\r\n\t\t\t\tstoreSearch[a.resource_id] = a;\r\n\t\t\t});\r\n\t\t\ttaskValues.concat(assignmentsStoreValues).forEach(function (a) {\r\n\t\t\t\tif (processedIds[a.resource_id]) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tprocessedIds[a.resource_id] = true;\r\n\t\t\t\tvar inTask = taskSearch[a.resource_id];\r\n\t\t\t\tvar inStore = storeSearch[a.resource_id];\r\n\r\n\t\t\t\tif (inTask && inStore) {\r\n\t\t\t\t\tresult.inBoth.push({ store: inStore, task: inTask });\r\n\t\t\t\t} else if (inTask && !inStore) {\r\n\t\t\t\t\tresult.inTaskNotInStore.push(inTask);\r\n\t\t\t\t} else if (!inTask && inStore) {\r\n\t\t\t\t\tresult.inStoreNotInTask.push(inStore);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else if ((resourceAssignmentFormat == resourceAssignmentFormats.assignmentsArray)\r\n\t\t\t|| (resourceAssignmentFormat == resourceAssignmentFormats.resourceValueArray)) {\r\n\t\t\tvar taskSearch = {};\r\n\t\t\tvar storeSearch = {};\r\n\t\t\tvar processedIds = {};\r\n\t\t\ttaskValues.forEach(function (a) {\r\n\t\t\t\ttaskSearch[a.id || a.$id] = a;\r\n\t\t\t});\r\n\t\t\tassignmentsStoreValues.forEach(function (a) {\r\n\t\t\t\tstoreSearch[a.id] = a;\r\n\t\t\t});\r\n\t\t\ttaskValues.concat(assignmentsStoreValues).forEach(function (a) {\r\n\t\t\t\tvar id = a.id || a.$id;\r\n\t\t\t\tif (processedIds[id]) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tprocessedIds[id] = true;\r\n\t\t\t\tvar inTask = taskSearch[id];\r\n\t\t\t\tvar inStore = storeSearch[id];\r\n\r\n\t\t\t\tif (inTask && inStore) {\r\n\t\t\t\t\tresult.inBoth.push({ store: inStore, task: inTask });\r\n\t\t\t\t} else if (inTask && !inStore) {\r\n\t\t\t\t\tresult.inTaskNotInStore.push(inTask);\r\n\t\t\t\t} else if (!inTask && inStore) {\r\n\t\t\t\t\tresult.inStoreNotInTask.push(inStore);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tfunction assignmentHasChanged(source, target) {\r\n\t\tvar ignoreFields = {\r\n\t\t\tid: true\r\n\t\t};\r\n\r\n\t\tfor (var i in source) {\r\n\t\t\tif (!ignoreFields[i]) {\r\n\t\t\t\tif (String(source[i]) !== String(target[i])) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tfunction updateAssignment(source, target) {\r\n\t\tvar ignoreFields = {\r\n\t\t\tid: true\r\n\t\t};\r\n\r\n\t\tfor (var i in source) {\r\n\t\t\tif (!ignoreFields[i]) {\r\n\t\t\t\ttarget[i] = source[i];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _syncAssignments(task, storeAssignments){\r\n\t\tvar tasksAssignments = _makeAssignmentsFromTask(task);\r\n\r\n\t\tvar diff = diffAssignments(tasksAssignments, storeAssignments);\r\n\t\tdiff.inStoreNotInTask.forEach(function (a) {\r\n\t\t\tresourceAssignmentsStore.removeItem(a.id);\r\n\t\t});\r\n\t\tdiff.inTaskNotInStore.forEach(function (a) {\r\n\t\t\tresourceAssignmentsStore.addItem(a);\r\n\t\t});\r\n\r\n\t\tdiff.inBoth.forEach(function (a) {\r\n\t\t\tif (assignmentHasChanged(a.task, a.store)) {\r\n\t\t\t\tupdateAssignment(a.task, a.store);\r\n\t\t\t\tresourceAssignmentsStore.updateItem(a.store.id);\r\n\t\t\t} else {\r\n\t\t\t\tif (a.task.start_date && a.task.end_date && a.task.mode !== assignmentModes.fixedDates) {\r\n\t\t\t\t\tvar timing = _assignmentTimeFromTask(a.store, task);\r\n\t\t\t\t\tif (a.store.start_date.valueOf() != timing.start_date.valueOf() || a.store.end_date.valueOf() != timing.end_date.valueOf()) {\r\n\t\t\t\t\t\ta.store.start_date = timing.start_date;\r\n\t\t\t\t\t\ta.store.end_date = timing.end_date;\r\n\t\t\t\t\t\ta.store.duration = timing.duration;\r\n\t\t\t\t\t\tresourceAssignmentsStore.updateItem(a.store.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t_updateTaskBack(task.id);\r\n\t}\r\n\r\n\tfunction _syncOnTaskUpdate(task) {\r\n\t\tvar storeAssignments = task[resourceAssignmentsProperty] || resourceAssignmentsStore.find(function (a) {\r\n\t\t\treturn a.task_id == task.id;\r\n\t\t});\r\n\r\n\t\t_syncAssignments(task, storeAssignments);\r\n\t}\r\n\r\n\tfunction _syncOnTaskDelete(ids) {\r\n\t\tvar idsSearch = {};\r\n\t\tids.forEach(function (id) {\r\n\t\t\tidsSearch[id] = true;\r\n\t\t});\r\n\t\tvar taskResources = resourceAssignmentsStore.find(function (a) {\r\n\t\t\treturn idsSearch[a.task_id];\r\n\t\t});\r\n\t\ttaskResources.forEach(function (a) {\r\n\t\t\tresourceAssignmentsStore.removeItem(a.id);\r\n\t\t});\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\r\n\t\tif (gantt.config.process_resource_assignments) {\r\n\t\t\tgantt.attachEvent(\"onParse\", function () {\r\n\t\t\t\tgantt.silent(function () {\r\n\t\t\t\t\tresourceAssignmentsStore.clearAll();\r\n\t\t\t\t\tvar totalAssignments = [];\r\n\t\t\t\t\tgantt.eachTask(function (task) {\r\n\t\t\t\t\t\tif (task.type === gantt.config.types.project) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar assignments = _loadAssignmentsFromTask(task);\r\n\t\t\t\t\t\t_assignAssignments(task, assignments);\r\n\r\n\t\t\t\t\t\tassignments.forEach(function (a) {\r\n\t\t\t\t\t\t\ttotalAssignments.push(a);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tresourceAssignmentsStore.parse(totalAssignments);\r\n\t\t\t\t});\r\n\r\n\t\t\t});\r\n\r\n\t\t\tvar batchUpdate = false;\r\n\t\t\tvar needUpdate = false;\r\n\t\t\tvar needUpdateFor = {};\r\n\t\t\tvar undoBatchCancel = false;\r\n\t\t\tgantt.attachEvent(\"onBeforeBatchUpdate\", function(){\r\n\t\t\t\tbatchUpdate = true;\r\n\t\t\t});\r\n\t\t\tgantt.attachEvent(\"onAfterBatchUpdate\", function(){\r\n\t\t\t\t\r\n\t\t\t\tif(needUpdate){\r\n\t\t\t\t\tvar assignmentsHash = {};\r\n\t\t\t\t\tfor(var i in needUpdateFor){\r\n\t\t\t\t\t\tassignmentsHash[i] = gantt.getTaskAssignments(needUpdateFor[i].id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// GS-2546. If we add a task that has the data in the old format,\r\n\t\t\t\t\t// we need to reset the cache as the assignment will be added\r\n\t\t\t\t\t// to the assignment store, but the cache won't have the changes\r\n\t\t\t\t\tif (gantt.config.process_resource_assignments && resourceAssignmentFormat === \"resourceValueArray\"){\r\n\t\t\t\t\t\ttaskAssignmentsCache = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor(var i in needUpdateFor){\r\n\t\t\t\t\t\t_syncAssignments(needUpdateFor[i], assignmentsHash[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tneedUpdate = false;\r\n\t\t\t\tbatchUpdate = false;\r\n\t\t\t\tneedUpdateFor = {};\r\n\t\t\t});\r\n\r\n\t\t\tgantt.attachEvent(\"onTaskCreated\", function (item) {\r\n\t\t\t\tvar assignments = _loadAssignmentsFromTask(item);\r\n\t\t\t\tresourceAssignmentsStore.parse(assignments);\r\n\t\t\t\t_assignAssignments(item, assignments);\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t\tgantt.attachEvent(\"onAfterTaskUpdate\", function (id, item) {\r\n\t\t\t\tif(batchUpdate){\r\n\t\t\t\t\tneedUpdate = true;\r\n\t\t\t\t\tneedUpdateFor[id] = item;\r\n\t\t\t\t}else if (!item.unscheduled){\r\n\t\t\t\t\t_syncOnTaskUpdate(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tgantt.attachEvent(\"onAfterTaskAdd\", function (id, item) {\r\n\t\t\t\tif(batchUpdate){\r\n\t\t\t\t\tneedUpdate = true;\r\n\t\t\t\t\tneedUpdateFor[id] = item;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t_syncOnTaskUpdate(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t/*\tgantt.attachEvent(\"onRowDragMove\", function (id) {\r\n\t\t\t\t_syncOnTaskUpdate(gantt.getTask(id));\r\n\t\t\t});*/\r\n\t\t\tgantt.attachEvent(\"onRowDragEnd\", function (id) {\r\n\t\t\t\t_syncOnTaskUpdate(gantt.getTask(id));\r\n\t\t\t});\r\n\t\t\tgantt.$data.tasksStore.attachEvent(\"onAfterDeleteConfirmed\", function (id, item) {\r\n\t\t\t\tvar deleteIds = [id];\r\n\t\t\t\tgantt.eachTask(function (task) {\r\n\t\t\t\t\tdeleteIds.push(task.id);\r\n\t\t\t\t}, id);\r\n\t\t\t\t_syncOnTaskDelete(deleteIds);\r\n\t\t\t});\r\n\t\t\tgantt.$data.tasksStore.attachEvent(\"onClearAll\", function () {\r\n\t\t\t\tresourceAssignmentsCache = null;\r\n\t\t\t\tresourceTaskAssignmentsCache = null;\r\n\t\t\t\ttaskAssignmentsCache = null;\r\n\t\t\t\tresourceAssignmentsStore.clearAll();\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t\tgantt.attachEvent(\"onTaskIdChange\", function (id, new_id) {\r\n\t\t\t\tvar taskResources = resourceAssignmentsStore.find(function (a) {\r\n\t\t\t\t\treturn a.task_id == id;\r\n\t\t\t\t});\r\n\t\t\t\ttaskResources.forEach(function (a) {\r\n\t\t\t\t\ta.task_id = new_id;\r\n\t\t\t\t\tresourceAssignmentsStore.updateItem(a.id);\r\n\t\t\t\t});\r\n\t\t\t\t_updateTaskBack(new_id);\r\n\t\t\t\t//any custom logic here\r\n\t\t\t});\r\n\t\t\t// GS-2144. When we Undo something, the cache should be reset\r\n\t\t\t// during the `onStoreUpdated` event to properly update the assignments\r\n\t\t\tgantt.attachEvent(\"onBeforeUndo\", function (action) {\r\n\t\t\t\tundoBatchCancel = true;\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t\tgantt.attachEvent(\"onAfterUndo\", function (action) {\r\n\t\t\t\tundoBatchCancel = true;\r\n\t\t\t});\r\n\r\n\r\n\t\t\tvar resourceAssignmentsCache = null;\r\n\t\t\tvar resourceTaskAssignmentsCache = null;\r\n\t\t\tvar taskAssignmentsCache = null;\r\n\r\n\t\t\tresourceAssignmentsStore.attachEvent(\"onStoreUpdated\", function resetCache(){\r\n\t\t\t\tif(batchUpdate && !undoBatchCancel){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tresourceAssignmentsCache = null;\r\n\t\t\t\tresourceTaskAssignmentsCache = null;\r\n\t\t\t\ttaskAssignmentsCache = null;\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\r\n\t\t\tgantt.getResourceAssignments = function (resourceId, taskId) {\r\n\t\t\t\tvar searchTaskId = gantt.defined(taskId) && taskId !== null;\r\n\r\n\t\t\t\tif(resourceAssignmentsCache === null){\r\n\t\t\t\t\tresourceAssignmentsCache = {};\r\n\t\t\t\t\tresourceTaskAssignmentsCache = {};\r\n\r\n\t\t\t\t\tresourceAssignmentsStore.eachItem(function (a) {\r\n\t\t\t\t\t\tif(!resourceAssignmentsCache[a.resource_id]){\r\n\t\t\t\t\t\t\tresourceAssignmentsCache[a.resource_id] = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresourceAssignmentsCache[a.resource_id].push(a);\r\n\r\n\t\t\t\t\t\tvar resourceTaskCacheKey = a.resource_id + \"-\" + a.task_id;\r\n\t\t\t\t\t\tif(!resourceTaskAssignmentsCache[resourceTaskCacheKey]){\r\n\t\t\t\t\t\t\tresourceTaskAssignmentsCache[resourceTaskCacheKey] = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresourceTaskAssignmentsCache[resourceTaskCacheKey].push(a);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif(searchTaskId){\r\n\t\t\t\t\treturn (resourceTaskAssignmentsCache[resourceId + \"-\" + taskId] || []).slice();\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn (resourceAssignmentsCache[resourceId] || []).slice();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t\r\n\t\t\tgantt.getTaskAssignments = function (taskId) {\r\n\t\t\t\tif(taskAssignmentsCache === null){\r\n\t\t\t\t\tvar result = [];\r\n\t\t\t\t\ttaskAssignmentsCache = {};\r\n\t\t\t\t\tresourceAssignmentsStore.eachItem(function (a) {\r\n\t\t\t\t\t\tif(!taskAssignmentsCache[a.task_id]){\r\n\t\t\t\t\t\t\ttaskAssignmentsCache[a.task_id] = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttaskAssignmentsCache[a.task_id].push(a);\r\n\t\t\t\t\t\tif (a.task_id == taskId) {\r\n\t\t\t\t\t\t\tresult.push(a);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn (taskAssignmentsCache[taskId] || []).slice();\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tgantt.getTaskResources = function (taskId) {\r\n\t\t\t\tconst store = gantt.getDatastore(\"resource\");\r\n\t\t\t\tconst assignments = gantt.getTaskAssignments(taskId);\r\n\t\r\n\t\t\t\tconst uniqueResources = {};\r\n\t\t\t\tassignments.forEach(function(a){\r\n\t\t\t\t\tif(!uniqueResources[a.resource_id]){\r\n\t\t\t\t\t\tuniqueResources[a.resource_id] = a.resource_id;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tconst resources = [];\r\n\t\t\t\tfor(const i in uniqueResources){\r\n\t\t\t\t\tconst res = store.getItem(uniqueResources[i]);\r\n\t\t\t\t\tif(res){\r\n\t\t\t\t\t\tresources.push(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn resources;\r\n\t\t\t};\r\n\r\n\t\t\tgantt.updateTaskAssignments = _updateTaskBack;\r\n\t\t}\r\n\t}, {once: true});\r\n};","export default function addPlaceholder(gantt){\r\n\tfunction isEnabled(){\r\n\t\treturn gantt.config.placeholder_task;\r\n\t}\r\n\r\n\tfunction callIfEnabled(callback){\r\n\t\treturn function(){\r\n\t\t\tif(!isEnabled()){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn callback.apply(this, arguments);\r\n\t\t};\r\n\t}\r\n\r\n\tfunction silenceDataProcessor(dataProcessor){\r\n\t\tif(dataProcessor && !dataProcessor._silencedPlaceholder){\r\n\t\t\tdataProcessor._silencedPlaceholder = true;\r\n\t\t\tdataProcessor.attachEvent(\"onBeforeUpdate\", callIfEnabled(function(id, state, data){\r\n\t\t\t\tif(data.type == gantt.config.types.placeholder){\r\n\t\t\t\t\tdataProcessor.setUpdated(id, false);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\r\n\tfunction insertPlaceholder(){\r\n\t\tvar placeholders = gantt.getTaskBy(\"type\", gantt.config.types.placeholder);\r\n\t\tif(!placeholders.length || !gantt.isTaskExists(placeholders[0].id)){\r\n\t\t\tvar placeholder = {\r\n\t\t\t\tunscheduled: true,\r\n\t\t\t\ttype: gantt.config.types.placeholder,\r\n\t\t\t\tduration:0,\r\n\t\t\t\ttext: gantt.locale.labels.new_task\r\n\t\t\t};\r\n\t\t\tif(gantt.callEvent(\"onTaskCreated\", [placeholder]) === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tgantt.addTask(placeholder);\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tfunction afterEdit(id){\r\n\t\tvar item = gantt.getTask(id);\r\n\t\tif(item.type == gantt.config.types.placeholder) {\r\n\t\t\tif(item.start_date && item.end_date && item.unscheduled){\r\n\t\t\t\titem.unscheduled = false;\r\n\t\t\t}\r\n\r\n\t\t\tgantt.batchUpdate(function(){\r\n\t\t\t\tvar newTask = gantt.copy(item);\r\n\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\tgantt.deleteTask(item.id);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdelete newTask[\"!nativeeditor_status\"];\r\n\t\t\t\tnewTask.type = gantt.config.types.task;\r\n\t\t\t\tnewTask.id = gantt.uid();\r\n\t\t\t\tgantt.addTask(newTask);\r\n\r\n\t\t\t\t//insertPlaceholder();\r\n\t\t\t});\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.config.types.placeholder = \"placeholder\";\r\n\tgantt.attachEvent(\"onDataProcessorReady\", callIfEnabled(silenceDataProcessor));\r\n\r\n\tvar ready = false;\r\n\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\t\tif(ready){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tready = true;\r\n\t\tgantt.attachEvent(\"onAfterTaskUpdate\", callIfEnabled(afterEdit));\r\n\t\tgantt.attachEvent(\"onAfterTaskAdd\", callIfEnabled(function(id, task){\r\n\t\t\tif(task.type != gantt.config.types.placeholder){\r\n\t\t\t\tvar placeholders = gantt.getTaskBy(\"type\", gantt.config.types.placeholder);\r\n\t\t\t\tplaceholders.forEach(function(p){\r\n\t\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\t\tif(gantt.isTaskExists(p.id))\r\n\t\t\t\t\t\t\tgantt.deleteTask(p.id);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tinsertPlaceholder();\r\n\t\t\t}\r\n\t\t}));\r\n\t\tgantt.attachEvent(\"onParse\", callIfEnabled(insertPlaceholder));\r\n\t});\r\n\r\n\tfunction isPlaceholderTask(taskId){\r\n\t\tif(gantt.config.types.placeholder && gantt.isTaskExists(taskId)){\r\n\t\t\tvar task = gantt.getTask(taskId);\r\n\t\t\tif(task.type == gantt.config.types.placeholder){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tfunction isPlaceholderLink(link){\r\n\t\tif(isPlaceholderTask(link.source) || isPlaceholderTask(link.target)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tgantt.attachEvent(\"onLinkValidation\", function(link){\r\n\t\tif(isPlaceholderLink(link)){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\tgantt.attachEvent(\"onBeforeLinkAdd\", function(id,link){\r\n\t\tif(isPlaceholderLink(link)){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onBeforeUndoStack\", function(action){\r\n\t\tfor(var i = 0; i < action.commands.length; i++){\r\n\t\t\tvar command = action.commands[i];\r\n\t\t\tif(command.entity === \"task\" && command.value.type === gantt.config.types.placeholder){\r\n\t\t\t\taction.commands.splice(i,1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n};","export default function(gantt) {\r\n\tfunction isEnabled() {\r\n\t\treturn gantt.config.auto_types && // if enabled\r\n\t\t\t(gantt.getTaskType(gantt.config.types.project) == gantt.config.types.project);// and supported\r\n\t}\r\n\r\n\tfunction callIfEnabled(callback) {\r\n\t\treturn function() {\r\n\t\t\tif (!isEnabled()) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn callback.apply(this, arguments);\r\n\t\t};\r\n\t}\r\n\r\n\tfunction checkTaskType(id, changedTypes) {\r\n\t\tvar task = gantt.getTask(id);\r\n\t\tvar targetType = getTaskTypeToUpdate(task);\r\n\t\tif (targetType !== false && gantt.getTaskType(task) !== targetType) {\r\n\t\t\tchangedTypes.$needsUpdate = true;\r\n\t\t\tchangedTypes[task.id] = {task: task, type: targetType};\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getUpdatedTypes(id, changedTypes) {\r\n\t\tchangedTypes = changedTypes || {};\r\n\t\t\r\n\t\tcheckTaskType(id, changedTypes);\r\n\t\tgantt.eachParent(function(parent) {\r\n\t\t\tcheckTaskType(parent.id, changedTypes);\r\n\t\t}, id);\r\n\r\n\t\treturn changedTypes;\r\n\t}\r\n\r\n\tfunction applyChanges(changedTypes) {\r\n\t\tfor (var i in changedTypes) {\r\n\t\t\tif(changedTypes[i] && changedTypes[i].task){\r\n\t\t\t\tvar task = changedTypes[i].task;\r\n\t\t\t\ttask.type = changedTypes[i].type;\r\n\t\t\t\tgantt.updateTask(task.id);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction updateParentTypes(startId) {\r\n\t\tif (gantt.getState().group_mode) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tvar changedTypes = getUpdatedTypes(startId);\r\n\t\tif (changedTypes.$needsUpdate) {\r\n\t\t\tgantt.batchUpdate(function() {\r\n\t\t\t\tapplyChanges(changedTypes);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tvar delTaskParent;\r\n\r\n\tfunction updateTaskType(task, targetType) {\r\n\t\tif(!gantt.getState().group_mode){\r\n\t\t\ttask.type = targetType;\r\n\t\t\tgantt.updateTask(task.id);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getTaskTypeToUpdate(task) {\r\n\t\tvar allTypes = gantt.config.types;\r\n\t\tvar hasChildren = gantt.hasChild(task.id);\r\n\t\tvar taskType = gantt.getTaskType(task.type);\r\n\r\n\t\tif (hasChildren && taskType === allTypes.task) {\r\n\t\t\treturn allTypes.project;\r\n\t\t}\r\n\r\n\t\tif (!hasChildren && taskType === allTypes.project) {\r\n\t\t\treturn allTypes.task;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tvar isParsingDone = true;\r\n\r\n\tgantt.attachEvent(\"onParse\", callIfEnabled(function() {\r\n\t\tisParsingDone = false;\r\n\t\tif(gantt.getState().group_mode){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tgantt.batchUpdate(function() {\r\n\t\t\tgantt.eachTask(function(task) {\r\n\t\t\t\tvar targetType = getTaskTypeToUpdate(task);\r\n\t\t\t\tif (targetType !== false) {\r\n\t\t\t\t\tupdateTaskType(task, targetType);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tisParsingDone = true;\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onAfterTaskAdd\", callIfEnabled(function(id) {\r\n\t\tif (isParsingDone) {\r\n\t\t\tupdateParentTypes(id);\r\n\t\t}\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onAfterTaskUpdate\", callIfEnabled(function(id) {\r\n\t\tif (isParsingDone) {\r\n\t\t\tupdateParentTypes(id);\r\n\t\t}\r\n\t}));\r\n\r\n\tfunction updateAfterRemoveChild(id){\r\n\t\tif (id != gantt.config.root_id && gantt.isTaskExists(id)) {\r\n\t\t\tupdateParentTypes(id);\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskDelete\", callIfEnabled(function(id, task) {\r\n\t\tdelTaskParent = gantt.getParent(id);\r\n\t\treturn true;\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDelete\", callIfEnabled(function(id, task) {\r\n\t\tupdateAfterRemoveChild(delTaskParent);\r\n\t}));\r\n\r\n\r\n\tvar originalRowDndParent;\r\n\r\n\tgantt.attachEvent(\"onRowDragStart\", callIfEnabled(function(id, target, e) {\r\n\t\toriginalRowDndParent = gantt.getParent(id);\r\n\t\treturn true;\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onRowDragEnd\", callIfEnabled(function(id, target) {\r\n\t\tupdateAfterRemoveChild(originalRowDndParent);\r\n\t\tupdateParentTypes(id);\r\n\t}));\r\n\r\n\tvar originalMoveTaskParent;\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskMove\", callIfEnabled(function(sid, parent, tindex) {\r\n\t\toriginalMoveTaskParent = gantt.getParent(sid);\r\n\t\treturn true;\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onAfterTaskMove\", callIfEnabled(function(id, parent, tindex) {\r\n\t\tif (document.querySelector(\".gantt_drag_marker\")) {\r\n\t\t\t// vertical dnd in progress\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tupdateAfterRemoveChild(originalMoveTaskParent);\r\n\t\tupdateParentTypes(id);\r\n\t}));\r\n};","export default class DurationFormatterNumeric implements IDurationFormatter {\r\n\tstatic create = (settings: IDurationFormatterConfig = null): IDurationFormatter => {\r\n\t\treturn new DurationFormatterNumeric();\r\n\t};\r\n\tcanParse = (value: string) : boolean => {\r\n\t\treturn !isNaN(this.parse(value));\r\n\t};\r\n\tformat = (value: number) : string => {\r\n\t\treturn String(value);\r\n\t};\r\n\tparse = (value: string) : number => {\r\n\t\treturn parseInt(value, 10);\r\n\t};\r\n}","export default class LinkFormatterSimple implements ILinkFormatter {\r\n\tstatic create = (settings: ILinkFormatterConfig = null, gantt: any): LinkFormatterSimple => {\r\n\t\treturn new LinkFormatterSimple(gantt);\r\n\t};\r\n\tprotected _linkReg: RegExp;\r\n\tprotected _gantt: any;\r\n\r\n\tconstructor(gantt: any) {\r\n\t\tthis._linkReg = /^[0-9\\.]+/;\r\n\t\tthis._gantt = gantt;\r\n\t}\r\n\r\n\tformat = (link: ILink) : string => {\r\n\t\tconst wbs = this._getWBSCode(link.source);\r\n\t\treturn wbs;\r\n\t};\r\n\r\n\tcanParse = (value: string) : boolean => {\r\n\t\treturn this._linkReg.test(value);\r\n\t};\r\n\tparse = (value: string) : ILink => {\r\n\t\tif(!this.canParse(value)){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst linkPart = this._linkReg.exec(value)[0].trim();\r\n\r\n\t\tconst source = this._findSource(linkPart) || null;\r\n\r\n\t\treturn {\r\n\t\t\tid: undefined,\r\n\t\t\tsource,\r\n\t\t\ttarget: null,\r\n\t\t\ttype: this._gantt.config.links.finish_to_start,\r\n\t\t\tlag: 0\r\n\t\t};\r\n\t};\r\n\r\n\tprotected _getWBSCode = (source: number | string) => {\r\n\t\tconst pred = this._gantt.getTask(source);\r\n\t\treturn this._gantt.getWBSCode(pred);\r\n\t};\r\n\r\n\tprotected _findSource = (value: string) => {\r\n\t\tconst reqTemplate = new RegExp(\"^[0-9\\.]+\", \"i\");\r\n\t\tif(reqTemplate.exec(value)){\r\n\t\t\tconst wbs = reqTemplate.exec(value)[0];\r\n\t\t\tconst task = this._gantt.getTaskByWBSCode(wbs);\r\n\t\t\tif(task){\r\n\t\t\t\treturn task.id;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n}","\r\nimport DurationFormatter from \"../common/duration_formatter\";\r\nimport LinkFormatter from \"../common/link_formatter\";\r\n\r\nexport default function(gantt){\r\n\tgantt.ext.formatters = {\r\n\t\tdurationFormatter: function(settings){\r\n\t\t\tif(!settings){\r\n\t\t\t\tsettings = {};\r\n\t\t\t}\r\n\t\t\tif(!settings.store){\r\n\t\t\t\tsettings.store = gantt.config.duration_unit;\r\n\t\t\t}\r\n\t\t\tif(!settings.enter){\r\n\t\t\t\tsettings.enter = gantt.config.duration_unit;\r\n\t\t\t}\r\n\t\t\treturn DurationFormatter.create(settings, gantt);\r\n\t\t},\r\n\t\tlinkFormatter: function(settings){\r\n\t\t\treturn LinkFormatter.create(settings, gantt);\r\n\t\t}\r\n\t};\r\n};","export default function(gantt: any){\r\n\r\n\tgantt.ext = gantt.ext || {};\r\n\tgantt.config.show_empty_state = false;\r\n\r\n\tgantt.ext.emptyStateElement = gantt.ext.emptyStateElement || {\r\n\t\tisEnabled() {\r\n\t\t\treturn gantt.config.show_empty_state === true;\r\n\t\t},\r\n\t\tisGanttEmpty(){\r\n\t\t\treturn !gantt.getTaskByTime().length;\r\n\t\t},\r\n\t\trenderContent(container){\r\n\t\t\tconst placeholderTextElement = `<div class='gantt_empty_state_text'>\r\n    <div class='gantt_empty_state_text_link' data-empty-state-create-task>${gantt.locale.labels.empty_state_text_link}</div>\r\n    <div class='gantt_empty_state_text_description'>${gantt.locale.labels.empty_state_text_description}</div>\r\n    </div>`;\r\n\t\t\tconst placeholderImageElement = \"<div class='gantt_empty_state_image'></div>\";\r\n\r\n\t\t\tconst placeholderContainer = `<div class='gantt_empty_state'>${placeholderImageElement}${placeholderTextElement}</div>`;\r\n\t\t\tcontainer.innerHTML = placeholderContainer;\r\n\t\t},\r\n\r\n\t\tclickEvents: [],\r\n\t\tattachAddTaskEvent(){\r\n\t\t\tconst id = gantt.attachEvent(\"onEmptyClick\", function(e){\r\n\t\t\t\tconst domHelpers = gantt.utils.dom;\r\n\t\t\t\tconst gridPlaceholder = domHelpers.closest(e.target, \"[data-empty-state-create-task]\");\r\n\t\t\t\tif (gridPlaceholder){\r\n\t\t\t\t\tgantt.createTask({\r\n\t\t\t\t\t\tid: gantt.uid(),\r\n\t\t\t\t\t\ttext: \"New Task\"\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.clickEvents.push(id);\r\n\t\t},\r\n\t\tdetachAddTaskEvents(){\r\n\t\t\tthis.clickEvents.forEach(function(event){\r\n\t\t\t\tgantt.detachEvent(event);\r\n\t\t\t});\r\n\t\t\tthis.clickEvents = [];\r\n\t\t},\r\n\r\n\t\tgetContainer(){\r\n\t\t\tif (gantt.$container) {\r\n\t\t\t\tconst domHelpers = gantt.utils.dom;\r\n\t\t\t\tif (gantt.$container.contains(gantt.$grid_data)) {\r\n\t\t\t\t\treturn domHelpers.closest(gantt.$grid_data, \".gantt_layout_content\");\r\n\t\t\t\t}\r\n\t\t\t\tif (gantt.$container.contains(gantt.$task_data)){\r\n\t\t\t\t\treturn domHelpers.closest(gantt.$task_data, \".gantt_layout_content\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\t\t},\r\n\r\n\t\tgetNode(){\r\n\t\t\tconst container = this.getContainer();\r\n\t\t\tif (!container){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tconst emptyStateElementNode = container.querySelector(\".gantt_empty_state_wrapper\");\r\n\t\t\treturn emptyStateElementNode;\r\n\t\t},\r\n\r\n\t\tshow(){\r\n\t\t\tconst container = this.getContainer();\r\n\t\t\tif (!container && this.isGanttEmpty()){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tconst wrapper = document.createElement(\"div\");\r\n\t\t\twrapper.className = \"gantt_empty_state_wrapper\";\r\n\t\t\twrapper.style.marginTop = (gantt.config.scale_height - container.offsetHeight) + \"px\";\r\n\t\t\tconst oldNodes = gantt.$container.querySelectorAll(\".gantt_empty_state_wrapper\");\r\n\t\t\t// for IE11\r\n\t\t\tArray.prototype.forEach.call(oldNodes, function(node){\r\n\t\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\t});\r\n\r\n\t\t\tthis.detachAddTaskEvents();\r\n\t\t\tthis.attachAddTaskEvent();\r\n\r\n\t\t\tcontainer.appendChild(wrapper);\r\n\t\t\tthis.renderContent(wrapper);\r\n\t\t},\r\n\t\thide(){\r\n\t\t\tconst emptyStateElementNode = this.getNode();\r\n\t\t\tif (emptyStateElementNode){\r\n\t\t\t\temptyStateElementNode.parentNode.removeChild(emptyStateElementNode);\r\n\t\t\t} else{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tinit(){ }\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onDataRender\", function() {\r\n\t\tconst emptyStateElement = gantt.ext.emptyStateElement;\r\n\t\tif (emptyStateElement.isEnabled() && emptyStateElement.isGanttEmpty()) {\r\n\t\t\temptyStateElement.show();\r\n\t\t} else {\r\n\t\t\temptyStateElement.hide();\r\n\t\t}\r\n\t});\r\n\r\n\r\n\r\n\r\n}\r\n","export const hasBaselinesBelow = function (gantt, task) {\r\n  const baselines = task.baselines && task.baselines.length;\r\n  const baselinesOnDifferentRow = gantt.config.baselines.render_mode == \"separateRow\" || gantt.config.baselines.render_mode == \"individualRow\";\r\n  if (baselines && baselinesOnDifferentRow) {\r\n    return true;\r\n  }\r\n};\r\n\r\nexport const childrenHaveBaselines = function (gantt, taskId) {\r\n  let hasBaselines = false;\r\n  gantt.eachTask(function (child) {\r\n    if (hasBaselines) {\r\n      return;\r\n    }\r\n    hasBaselines = hasBaselinesBelow(gantt, child);\r\n  }, taskId);\r\n  return hasBaselines;\r\n};\r\n\r\nexport const isSplitChild = function (gantt, id) {\r\n  let splitChild = false;\r\n  gantt.eachParent(function (parent) {\r\n    if (isSplitParent(parent)) {\r\n      splitChild = true;\r\n    }\r\n  }, id);\r\n  return splitChild;\r\n};\r\n\r\nexport const isSplitParent = function (task) {\r\n  return task.render && task.render == \"split\" && !task.$open;\r\n};\r\n\r\nexport const getMaxParentHeight = function (gantt, view, task, heightLimit) {\r\n  let maxHeight = heightLimit || view.$task_data.scrollHeight;\r\n  let shrinkHeight = false;\r\n  let splitChild = false;\r\n\r\n  gantt.eachParent(function (parent) {\r\n    if (isSplitParent(parent)) {\r\n      splitChild = true;\r\n      const parentSizes = view.getItemPosition(parent);\r\n      const parentHeight = parentSizes.rowHeight;\r\n      if (parentHeight < maxHeight) {\r\n        maxHeight = parentHeight;\r\n        shrinkHeight = true;\r\n      }\r\n    }\r\n  }, task.id);\r\n\r\n  return { maxHeight, shrinkHeight, splitChild };\r\n};\r\n\r\nexport const getMilestoneHeight = function (height) {\r\n  return Math.sqrt(2 * height * height);\r\n};\r\n\r\nexport const getInvertedMilestoneHeight = function (height) {\r\n  return Math.round(height / Math.sqrt(2));\r\n};\r\n\r\nexport const getAdjustedPosition = function (gantt, timeline, sizes, heightLimit, task, childBaselines) {\r\n  const baselines = hasBaselinesBelow(gantt, task);\r\n\r\n  const splitParams = getMaxParentHeight(gantt, timeline, task);\r\n  let maxHeight = splitParams.maxHeight;\r\n\r\n  let height = sizes.height;\r\n  let largerHeight = height > heightLimit;\r\n  let noNeedToShrink = sizes.rowHeight >= heightLimit && !splitParams.splitChild && !baselines;\r\n  if (largerHeight || noNeedToShrink) {\r\n    height = heightLimit;\r\n  }\r\n\r\n  if (maxHeight < height) {\r\n    height = maxHeight;\r\n  }\r\n\r\n  let marginTop = Math.floor((sizes.rowHeight - height) / 2);\r\n\r\n  if (splitParams.splitChild) {\r\n    marginTop = Math.floor((maxHeight - height) / 2);\r\n  }\r\n  if (childBaselines || baselines) {\r\n    let heightDiff = Math.min(sizes.height, maxHeight) - height;\r\n\r\n    let additionalMargin = 2;\r\n    let exceedBarHeight = baselines && task.bar_height >= task.row_height;\r\n    let exceedParentHeight = splitParams.splitChild && sizes.height >= maxHeight;\r\n    if (exceedBarHeight || exceedParentHeight){\r\n      additionalMargin = 0;\r\n    }\r\n\r\n    marginTop = Math.floor(heightDiff / 2) + additionalMargin;\r\n    const bottom = height + marginTop;\r\n    if (bottom > sizes.rowHeight || bottom > maxHeight) {\r\n      // marginTop = 0;\r\n    }\r\n  }\r\n\r\n  return { height, marginTop };\r\n};\r\n\r\nexport default {\r\n  hasBaselinesBelow,\r\n  childrenHaveBaselines,\r\n  isSplitChild,\r\n  isSplitParent,\r\n  getMaxParentHeight,\r\n  getMilestoneHeight,\r\n  getInvertedMilestoneHeight,\r\n  getAdjustedPosition\r\n};\r\n","import { hasBaselinesBelow, isSplitParent } from \"../ui/render/baseline_helper\";\r\nimport isHeadless from \"../../utils/is_headless\";\r\n\r\nexport default function (gantt) {\r\n  gantt.config.baselines = {\r\n    datastore: \"baselines\",\r\n    render_mode: false,\r\n    dataprocessor_baselines: false,\r\n    row_height: 16,\r\n    bar_height: 8\r\n  };\r\n\r\n  function initBaselineFields(item, task) {\r\n    // don't add baseline if it doesn't belong to any task\r\n    // or if doesn't have the dates\r\n    if (!item.task_id || (!item.start_date && !item.end_date)) {\r\n      return false;\r\n    }\r\n\r\n    if (item.start_date) {\r\n      item.start_date = gantt.date.parseDate(item.start_date, \"parse_date\");\r\n    } else {\r\n      item.start_date = null;\r\n    }\r\n\r\n    if (item.end_date) {\r\n      item.end_date = gantt.date.parseDate(item.end_date, \"parse_date\");\r\n    } else {\r\n      item.end_date = null;\r\n    }\r\n\r\n    // set min baseline duration\r\n    item.duration = item.duration || 1;\r\n\r\n    // GS-2636. Calculate the 3rd date parameter basing on existing date parameters\r\n    if (item.start_date && !item.end_date){\r\n      item.end_date = gantt.calculateEndDate(item.start_date, item.duration);\r\n    } else if (item.end_date && !item.start_date){\r\n      item.start_date = gantt.calculateEndDate(item.end_date, -item.duration);\r\n    } \r\n  }\r\n  // gantt init\r\n  const baselineStore = gantt.createDatastore({\r\n    name: gantt.config.baselines.datastore,\r\n    initItem: function (item) {\r\n      if (!item.id) {\r\n        item.id = gantt.uid();\r\n      }\r\n\r\n      initBaselineFields(item);\r\n\r\n      return item;\r\n    }\r\n  });\r\n\r\n  gantt.$data.baselineStore = baselineStore;\r\n\r\n  function _syncBaselines(task) {\r\n    let shouldRepaint = false;\r\n    const iteratedBaselines = {};\r\n\r\n    const taskBaselines = task.baselines || [];\r\n    const exisingBaselines = gantt.getTaskBaselines(task.id);\r\n\r\n    if (taskBaselines.length != exisingBaselines.length) {\r\n      shouldRepaint = true;\r\n    }\r\n\r\n    taskBaselines.forEach(function (baseline) {\r\n      iteratedBaselines[baseline.id] = true;\r\n      const exisingBaseline = baselineStore.getItem(baseline.id);\r\n      if (exisingBaseline) {\r\n        const start = +exisingBaseline.start_date !== +baseline.start_date;\r\n        const end = +exisingBaseline.end_date !== +baseline.end_date;\r\n        if (start || end) {\r\n          baselineStore.updateItem(baseline.id, baseline);\r\n        }\r\n      } else {\r\n        baselineStore.addItem(baseline);\r\n      }\r\n    });\r\n\r\n    exisingBaselines.forEach(function (baseline) {\r\n      if (!iteratedBaselines[baseline.id]) {\r\n        baselineStore.removeItem(baseline.id);\r\n      }\r\n    });\r\n\r\n    if (shouldRepaint) {\r\n      if (isSplitParent(task)){\r\n        // here we adjust the parent height, then adjust it with the total child height\r\n        _adjustSplitParentHeight (task);\r\n      } else {\r\n        gantt.adjustTaskHeightForBaselines(task);\r\n      }\r\n      gantt.render();\r\n    }\r\n  }\r\n\r\n  function _deleteOrphanBaselines() {\r\n    baselineStore.eachItem(function (baseline) {\r\n      if (!gantt.isTaskExists(baseline.task_id)) {\r\n        baselineStore.removeItem(baseline.id);\r\n      }\r\n    });\r\n  }\r\n\r\n  function _adjustSplitParentHeight (task){\r\n    let maxParentHeight = 0;\r\n\r\n    gantt.adjustTaskHeightForBaselines(task);\r\n\r\n    gantt.eachTask(function(child){\r\n      let childHeight = child.row_height || gantt.config.row_height;\r\n\r\n      maxParentHeight = maxParentHeight || childHeight;\r\n      if (childHeight > maxParentHeight){\r\n        maxParentHeight = childHeight;\r\n      }\r\n    }, task.id);\r\n\r\n    if (task.row_height < maxParentHeight){\r\n      task.row_height = maxParentHeight;\r\n    }\r\n  }\r\n\r\n  gantt.adjustTaskHeightForBaselines = function (task) {\r\n    let height, baselineSize, betweenBaselines;\r\n    let margins = 2;\r\n    let baselineAmount = task.baselines && task.baselines.length || 0;\r\n    const subrowHeight = gantt.config.baselines.row_height;\r\n    //const baselineBarHeight = task?.baselines.bar_height\r\n\r\n    const timelineView = gantt.getLayoutView(\"timeline\");\r\n    if (!timelineView || !gantt.config.show_chart){\r\n      return;\r\n    }\r\n\r\n    switch (gantt.config.baselines.render_mode) {\r\n      case \"taskRow\":\r\n        task.row_height = task.bar_height + 8;\r\n        break;\r\n\r\n      case \"separateRow\":\r\n        height = timelineView.getBarHeight(task.id);\r\n        if (baselineAmount) {\r\n          task.bar_height = task.bar_height || height;\r\n\r\n          if (task.bar_height > height){\r\n            height = task.bar_height;\r\n          }\r\n\r\n          task.row_height = height + subrowHeight;\r\n        } else if (task.bar_height) {\r\n          task.row_height = task.bar_height + 4;\r\n        }\r\n\r\n        _increaseSplitParentHeight(task);\r\n        break;\r\n\r\n      case \"individualRow\":\r\n        height = timelineView.getBarHeight(task.id);\r\n\r\n        if (baselineAmount) {\r\n          task.bar_height = task.bar_height || height;\r\n\r\n          if (task.bar_height > height){\r\n            height = task.bar_height;\r\n          }\r\n\r\n          baselineSize = subrowHeight * baselineAmount;\r\n       //   betweenBaselines = 3 * (baselineAmount + 1);\r\n\r\n          task.row_height = height + baselineSize + margins;\r\n        } else if (task.bar_height){\r\n          task.row_height = task.bar_height + 4;\r\n        }\r\n\r\n        _increaseSplitParentHeight(task);\r\n        break;\r\n      default:\r\n        task.row_height = task.bar_height + 8;\r\n        break;\r\n    }\r\n  };\r\n\r\n  function _increaseSplitParentHeight(task) {\r\n    gantt.eachParent(function (parent) {\r\n      if (isSplitParent(parent)) {\r\n        const parentHeight = parent.row_height || gantt.getLayoutView(\"timeline\").getBarHeight(parent.id);\r\n        let maxHeight = task.row_height;\r\n\r\n        // iterate only direct children\r\n        const subtasks = gantt.getChildren(parent.id);\r\n        subtasks.forEach(function (subtaskId) {\r\n          const subtask = gantt.getTask(subtaskId);\r\n          if (subtask.id == task.id) {\r\n            return;\r\n          }\r\n          const subtaskHeight = subtask.row_height || gantt.getLayoutView(\"timeline\").getBarHeight(subtask.id);\r\n          maxHeight = maxHeight || subtaskHeight;\r\n          if (subtaskHeight > maxHeight) {\r\n            maxHeight = subtaskHeight;\r\n          }\r\n        });\r\n\r\n        parent.row_height = maxHeight;\r\n        parent.bar_height = parent.bar_height || parentHeight;\r\n      }\r\n    }, task.id);\r\n  }\r\n\r\n  gantt.attachEvent(\r\n    \"onGanttReady\",\r\n    function () {\r\n\r\n      if(!gantt.config.baselines){\r\n        return;\r\n      }\r\n\r\n      gantt.attachEvent(\"onParse\", function () {\r\n        baselineStore.eachItem(function (baseline) {\r\n          const taskId = baseline.task_id;\r\n          if (gantt.isTaskExists(taskId)) {\r\n            const task = gantt.getTask(taskId);\r\n\r\n            task.baselines = task.baselines || [];\r\n\r\n            let newBaseline = true;\r\n            for (let i = 0; i < task.baselines.length; i++) {\r\n              let existingBaseline = task.baselines[i];\r\n              if (existingBaseline.id == baseline.id){\r\n                newBaseline = false;\r\n                gantt.mixin(existingBaseline, baseline, true);\r\n                break;\r\n              }\r\n            }\r\n            if (newBaseline){\r\n              task.baselines.push(baseline);\r\n            }\r\n\r\n            if(!isHeadless(gantt)){\r\n              if (isSplitParent(task)){\r\n                _adjustSplitParentHeight (task);\r\n              } else {\r\n                gantt.adjustTaskHeightForBaselines(task);\r\n              }\r\n            }\r\n          }\r\n        });\r\n      });\r\n\r\n      gantt.attachEvent(\"onBeforeTaskUpdate\", function (id, task) {\r\n        _syncBaselines(task);\r\n        return true;\r\n      });\r\n\r\n      gantt.attachEvent(\"onAfterUndo\", function(action){\r\n        const baselinesRenderedBelow = gantt.config.baselines.render_mode == \"separateRow\" || gantt.config.baselines.render_mode == \"individualRow\";\r\n        if (baselinesRenderedBelow && action){\r\n          let repaint = false;\r\n          action.commands.forEach(function(command){\r\n            if (command.entity == \"task\"){\r\n              const taskId = command.value.id;\r\n              if (gantt.isTaskExists(taskId)){\r\n                const task = gantt.getTask(taskId);\r\n                if (task.parent && gantt.isTaskExists(task.parent)){\r\n                  const parent = gantt.getTask(task.parent);\r\n                  if (isSplitParent(parent)){\r\n                    _adjustSplitParentHeight (parent);\r\n                    repaint = true;\r\n                  }\r\n                }\r\n              }    \r\n            }\r\n          });\r\n          if (repaint){\r\n            gantt.render();\r\n          }\r\n        }\r\n      });\r\n\r\n      gantt.attachEvent(\"onAfterTaskDelete\", function (id, task) {\r\n        if (hasBaselinesBelow){\r\n          if (task.parent && gantt.isTaskExists(task.parent)){\r\n            const parent = gantt.getTask(task.parent);\r\n            if (isSplitParent(parent)){\r\n              _adjustSplitParentHeight (parent);\r\n            }\r\n          }\r\n        }\r\n        _deleteOrphanBaselines();\r\n      });\r\n\r\n      gantt.getTaskBaselines = function (taskId) {\r\n        const baselines = [];\r\n        baselineStore.eachItem(function (baseline) {\r\n          if (baseline.task_id == taskId) {\r\n            baselines.push(baseline);\r\n          }\r\n        });\r\n        return baselines;\r\n      };\r\n      gantt.$data.baselineStore.attachEvent(\"onClearAll\", function () {\r\n        gantt.eachTask(function(task){\r\n          if (task.baselines){\r\n            delete task.baselines;\r\n          }\r\n        });\r\n        // The data should not be repainted as otherwise it causes issues when we have resource \r\n        // assignments and group tasks. It should be fixed when we add a repaint stack\r\n        // gantt.refreshData();\r\n        return true;\r\n      });\r\n\r\n      gantt.$data.tasksStore.attachEvent(\"onClearAll\", function () {\r\n        baselineStore.clearAll();\r\n        return true;\r\n      });\r\n      gantt.attachEvent(\"onTaskIdChange\", function (id, new_id) {\r\n        const baselines = baselineStore.find(function (a) {\r\n          return a.task_id == id;\r\n        });\r\n        baselines.forEach(function (a) {\r\n          a.task_id = new_id;\r\n          baselineStore.updateItem(a.id);\r\n        });\r\n      });\r\n    },\r\n    { once: true }\r\n  );\r\n};\r\n","import * as helpers from \"../../utils/helpers\";\r\n\r\nexport default function(gantt) {\r\n\tgantt.load = function(){\r\n\t\tthrow new Error(\"gantt.load() method is not available in the node.js, use gantt.parse() instead\");\r\n\t};\r\n\tgantt.parse = function (data, type) {\r\n\t\tthis.on_load({xmlDoc: {responseText: data}}, type);\r\n\t};\r\n\r\n\tgantt.serialize = function (type) {\r\n\t\ttype = type || \"json\";\r\n\t\treturn this[type].serialize();\r\n\t};\r\n\r\n\t/*\r\n\ttasks and relations\r\n\t{\r\n\tdata:[\r\n\t\t{\r\n\t\t\t\"id\":\"string\",\r\n\t\t\t\"text\":\"...\",\r\n\t\t\t\"start_date\":\"Date or string\",\r\n\t\t\t\"end_date\":\"Date or string\",\r\n\t\t\t\"duration\":\"number\",\r\n\t\t\t\"progress\":\"0..1\",\r\n\t\t\t\"parent_id\":\"string\",\r\n\t\t\t\"order\":\"number\"\r\n\t\t},...],\r\n\tlinks:[\r\n\t\t{\r\n\t\t\tid:\"string\",\r\n\t\t\tsource:\"string\",\r\n\t\t\ttarget:\"string\",\r\n\t\t\ttype:\"string\"\r\n\t\t},...],\r\n\tcollections:{\r\n\t\t\tcollectionName:[\r\n\t\t\t\t{key:, label:, optional:...},...\r\n\t\t\t],...\r\n\t\t}\r\n\t}\r\n\r\n\t* */\r\n\r\n\tgantt.on_load = function (resp, type) {\r\n\t\tif(resp.xmlDoc && resp.xmlDoc.status === 404){ // work if we don't have a file at current url\r\n\t\t\tthis.assert(false, \"Failed to load the data from <a href='\" + resp.xmlDoc.responseURL + \"' target='_blank'>\" \r\n\t\t\t\t+ resp.xmlDoc.responseURL + \"</a>, server returns 404\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(gantt.$destroyed){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.callEvent(\"onBeforeParse\", []);\r\n\t\tif (!type)\r\n\t\t\ttype = \"json\";\r\n\t\tthis.assert(this[type], \"Invalid data type:'\" + type + \"'\");\r\n\r\n\t\tvar raw = resp.xmlDoc.responseText;\r\n\r\n\t\tvar data = this[type].parse(raw, resp);\r\n\t\tthis._process_loading(data);\r\n\t};\r\n\r\n\tfunction attachAssignmentsToTasks(tasks, assignments) {\r\n\t\tconst assignmentsByTasks = {};\r\n\t\tassignments.forEach((a)=>{\r\n\t\t\tif(!assignmentsByTasks[a.task_id]) {\r\n\t\t\t\tassignmentsByTasks[a.task_id] = [];\r\n\t\t\t}\r\n\t\t\tassignmentsByTasks[a.task_id].push(a);\r\n\t\t});\r\n\t\ttasks.forEach((t) => {\r\n\t\t\tt[gantt.config.resource_property] = assignmentsByTasks[t.id] || [];\r\n\t\t});\t\r\n\t}\r\n\t\r\n\tgantt._process_loading = function (data) {\r\n\t\tif(data.collections)\r\n\t\t\tthis._load_collections(data.collections);\r\n\r\n\t\tif(data.resources && this.$data.resourcesStore){\r\n\t\t\tthis.$data.resourcesStore.parse(data.resources);\r\n\t\t}\r\n\t\tif(gantt.config.baselines && data.baselines && this.$data.baselineStore){\r\n\t\t\tthis.$data.baselineStore.parse(data.baselines);\r\n\t\t}\r\n\t\t\r\n\t\tconst tasks = data.data || data.tasks;\r\n\t\tif(data.assignments){\r\n\t\t\tattachAssignmentsToTasks(tasks, data.assignments);\r\n\t\t}\r\n\r\n\t\tthis.$data.tasksStore.parse(tasks);\r\n\t\tvar links = data.links || ((data.collections && data.collections.links) ? data.collections.links : []);\r\n\t\tthis.$data.linksStore.parse(links);\r\n\r\n\t\t//this._sync_links();\r\n\t\tthis.callEvent(\"onParse\", []);\r\n\t\tthis.render();\r\n\t};\r\n\r\n\tgantt._load_collections = function (collections) {\r\n\t\tvar collections_loaded = false;\r\n\t\tfor (var key in collections) {\r\n\t\t\tif (collections.hasOwnProperty(key)) {\r\n\t\t\t\tcollections_loaded = true;\r\n\t\t\t\tvar collection = collections[key];\r\n\t\t\t\t// GS-1728. Create an empty serverList if it doesn't exist\r\n\t\t\t\tthis.serverList[key] = this.serverList[key] || [];\r\n\t\t\t\tvar arr = this.serverList[key];\r\n\t\t\t\tif (!arr) continue;\r\n\t\t\t\tarr.splice(0, arr.length); //clear old options\r\n\t\t\t\tfor (var j = 0; j < collection.length; j++) {\r\n\t\t\t\t\tvar option = collection[j];\r\n\t\t\t\t\tvar obj = this.copy(option);\r\n\t\t\t\t\tobj.key = obj.value;// resulting option object\r\n\r\n\t\t\t\t\tfor (var option_key in option) {\r\n\t\t\t\t\t\tif (option.hasOwnProperty(option_key)) {\r\n\t\t\t\t\t\t\tif (option_key == \"value\" || option_key == \"label\")\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\tobj[option_key] = option[option_key]; // obj['value'] = option['value']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (collections_loaded)\r\n\t\t\tthis.callEvent(\"onOptionsLoad\", []);\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskDisplay\", function (id, task) {\r\n\t\treturn !task.$ignore;\r\n\t});\r\n\r\n\tfunction jsonParseError(data){\r\n\t\tgantt.assert(false, \"Can't parse data: incorrect value of gantt.parse or gantt.load method. \"\r\n\t\t\t+ \"Actual argument value: \" + JSON.stringify(data));\r\n\t\tthrow new Error(\"Invalid argument for gantt.parse or gantt.load. An object or a JSON string of format https://docs.dhtmlx.com/gantt/desktop__supported_data_formats.html#json is expected. Actual argument value: \"\r\n\t\t\t+ JSON.stringify(data));\r\n\t}\r\n\r\n\tgantt.json = {\r\n\t\tparse: function (data) {\r\n\t\t\tif(!data){\r\n\t\t\t\tjsonParseError(data);\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof data == \"string\") {\r\n\t\t\t\tif (typeof JSON != undefined){\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch(e) {\r\n\t\t\t\t\t\tjsonParseError(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgantt.assert(false, \"JSON is not supported\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(!data.data && !data.tasks){\r\n\t\t\t\tjsonParseError(data);\r\n\t\t\t}\r\n\r\n\t\t\tif (data.dhx_security)\r\n\t\t\t\tgantt.security_key = data.dhx_security;\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserializeTask: function (task) {\r\n\t\t\treturn this._copyObject(task);\r\n\t\t},\r\n\t\tserializeLink: function (link) {\r\n\t\t\treturn this._copyLink(link);\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj)\r\n\t\t\t\tcopy[key] = obj[key];\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj) {\r\n\t\t\t\tif (key.charAt(0) == \"$\")\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tcopy[key] = obj[key];\r\n\r\n\t\t\t\tif (helpers.isDate(copy[key])) {\r\n\t\t\t\t\tcopy[key] = gantt.defined(gantt.templates.xml_format) ? gantt.templates.xml_format(copy[key]) : gantt.templates.format_date(copy[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\t\t\tlet baselines = [];\r\n\r\n\t\t\tgantt.eachTask(function (obj) {\r\n\t\t\t\tgantt.resetProjectDates(obj);\r\n\t\t\t\ttasks.push(this.serializeTask(obj));\r\n\t\t\t}, gantt.config.root_id, this);\r\n\r\n\t\t\tvar rawLinks = gantt.getLinks();\r\n\t\t\tfor (var i = 0; i < rawLinks.length; i++) {\r\n\t\t\t\tlinks.push(this.serializeLink(rawLinks[i]));\r\n\t\t\t}\r\n\r\n\t\t\tconst baselineStore = gantt.getDatastore(\"baselines\");\r\n\t\t\tbaselineStore.eachItem(function(baseline){\r\n\t\t\t\tconst baselineCopy = gantt.json.serializeTask(baseline);\r\n\t\t\t\tbaselines.push(baselineCopy);\r\n\t\t\t});\r\n\r\n\t\t\treturn {\r\n\t\t\t\tdata: tasks,\r\n\t\t\t\tlinks,\r\n\t\t\t\tbaselines\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\t<data>\r\n\t\t<task id:\"some\" parent_id=\"0\" progress=\"0.5\">\r\n\t\t\t<text>My task 1</text>\r\n\t\t\t<start_date>16.08.2013</start_date>\r\n\t\t\t<end_date>22.08.2013</end_date>\r\n\t\t</task>\r\n\t\t<coll_options>\r\n\t\t\t<links>\r\n\t\t\t\t<link source='a1' target='b2' type='c3' />\r\n\t\t\t</links>\r\n\t\t</coll_options>\r\n\t</data>\r\n\t*/\r\n\r\n\tfunction xmlParseError(data){\r\n\t\tgantt.assert(false, \"Can't parse data: incorrect value of gantt.parse or gantt.load method. \"\r\n\t\t\t+ \"Actual argument value: \" + JSON.stringify(data));\r\n\t\tthrow new Error(\"Invalid argument for gantt.parse or gantt.load. An XML of format https://docs.dhtmlx.com/gantt/desktop__supported_data_formats.html#xmldhtmlxgantt20 is expected. Actual argument value: \"\r\n\t\t\t+ JSON.stringify(data));\r\n\t}\r\n\r\n\tgantt.xml = {\r\n\t\t_xmlNodeToJSON: function (node, attrs_only) {\r\n\t\t\tvar t = {};\r\n\t\t\tfor (var i = 0; i < node.attributes.length; i++)\r\n\t\t\t\tt[node.attributes[i].name] = node.attributes[i].value;\r\n\r\n\t\t\tif (!attrs_only) {\r\n\t\t\t\tfor (var i = 0; i < node.childNodes.length; i++) {\r\n\t\t\t\t\tvar child = node.childNodes[i];\r\n\t\t\t\t\tif (child.nodeType == 1)\r\n\t\t\t\t\t\tt[child.tagName] = child.firstChild ? child.firstChild.nodeValue : \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!t.text) t.text = node.firstChild ? node.firstChild.nodeValue : \"\";\r\n\t\t\t}\r\n\r\n\t\t\treturn t;\r\n\t\t},\r\n\t\t_getCollections: function (loader) {\r\n\t\t\tvar collection = {};\r\n\t\t\tvar opts = gantt.ajax.xpath(\"//coll_options\", loader);\r\n\t\t\tfor (var i = 0; i < opts.length; i++) {\r\n\t\t\t\tvar bind = opts[i].getAttribute(\"for\");\r\n\t\t\t\tvar arr = collection[bind] = [];\r\n\t\t\t\tvar itms = gantt.ajax.xpath(\".//item\", opts[i]);\r\n\t\t\t\tfor (var j = 0; j < itms.length; j++) {\r\n\t\t\t\t\tvar itm = itms[j];\r\n\t\t\t\t\tvar attrs = itm.attributes;\r\n\t\t\t\t\tvar obj = {key: itms[j].getAttribute(\"value\"), label: itms[j].getAttribute(\"label\")};\r\n\t\t\t\t\tfor (var k = 0; k < attrs.length; k++) {\r\n\t\t\t\t\t\tvar attr = attrs[k];\r\n\t\t\t\t\t\tif (attr.nodeName == \"value\" || attr.nodeName == \"label\")\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\tobj[attr.nodeName] = attr.nodeValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn collection;\r\n\t\t},\r\n\t\t_getXML: function (text, loader, toptag) {\r\n\t\t\ttoptag = toptag || \"data\";\r\n\t\t\tif (!loader.getXMLTopNode) {\r\n\t\t\t\tloader = gantt.ajax.parse(loader);\r\n\t\t\t}\r\n\r\n\t\t\tvar xml = gantt.ajax.xmltop(toptag, loader.xmlDoc);\r\n\t\t\tif (!xml || xml.tagName != toptag) {\r\n\t\t\t\txmlParseError(text);\r\n\t\t\t}\r\n\r\n\t\t\tvar skey = xml.getAttribute(\"dhx_security\");\r\n\t\t\tif (skey)\r\n\t\t\t\tgantt.security_key = skey;\r\n\r\n\t\t\treturn xml;\r\n\t\t},\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = this._getXML(text, loader);\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++)\r\n\t\t\t\tevs[i] = this._xmlNodeToJSON(xml[i]);\r\n\r\n\t\t\tdata.collections = this._getCollections(loader);\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\treturn \"<item id='\" + obj.id + \"' source='\" + obj.source + \"' target='\" + obj.target + \"' type='\" + obj.type + \"' />\";\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\treturn \"<task id='\" + obj.id + \"' parent='\" + (obj.parent || \"\") + \"' start_date='\" + obj.start_date + \"' duration='\" + obj.duration + \"' open='\" + (!!obj.open) + \"' progress='\" + obj.progress + \"' end_date='\" + obj.end_date + \"'><![CDATA[\" + obj.text + \"]]></task>\";\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tvar json = gantt.json.serialize();\r\n\t\t\tfor (var i = 0, len = json.data.length; i < len; i++) {\r\n\t\t\t\ttasks.push(this._copyObject(json.data[i]));\r\n\t\t\t}\r\n\t\t\tfor (var i = 0, len = json.links.length; i < len; i++) {\r\n\t\t\t\tlinks.push(this._copyLink(json.links[i]));\r\n\t\t\t}\r\n\t\t\treturn \"<data>\" + tasks.join(\"\") + \"<coll_options for='links'>\" + links.join(\"\") + \"</coll_options></data>\";\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.oldxml = {\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = gantt.xml._getXML(text, loader, \"projects\");\r\n\t\t\tvar data = {collections: {links: []}};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tevs[i] = gantt.xml._xmlNodeToJSON(xml[i]);\r\n\t\t\t\tvar parent = xml[i].parentNode;\r\n\r\n\t\t\t\tif (parent.tagName == \"project\")\r\n\t\t\t\t\tevs[i].parent = \"project-\" + parent.getAttribute(\"id\");\r\n\t\t\t\telse\r\n\t\t\t\t\tevs[i].parent = parent.parentNode.getAttribute(\"id\");\r\n\t\t\t}\r\n\r\n\t\t\txml = gantt.ajax.xpath(\"//project\", loader);\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tvar ev = gantt.xml._xmlNodeToJSON(xml[i], true);\r\n\t\t\t\tev.id = \"project-\" + ev.id;\r\n\t\t\t\tevs.push(ev);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < evs.length; i++) {\r\n\t\t\t\tvar ev = evs[i];\r\n\t\t\t\tev.start_date = ev.startdate || ev.est;\r\n\t\t\t\tev.end_date = ev.enddate;\r\n\t\t\t\tev.text = ev.name;\r\n\t\t\t\tev.duration = ev.duration / 8;\r\n\t\t\t\tev.open = 1;\r\n\t\t\t\tif (!ev.duration && !ev.end_date) ev.duration = 1;\r\n\t\t\t\tif (ev.predecessortasks)\r\n\t\t\t\t\tdata.collections.links.push({\r\n\t\t\t\t\t\ttarget: ev.id,\r\n\t\t\t\t\t\tsource: ev.predecessortasks,\r\n\t\t\t\t\t\ttype: gantt.config.links.finish_to_start\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tgantt.message(\"Serialization to 'old XML' is not implemented\");\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.serverList = function (name, array) {\r\n\t\tif (array) {\r\n\t\t\tthis.serverList[name] = array.slice(0);\r\n\t\t} else if (!this.serverList[name]) {\r\n\t\t\tthis.serverList[name] = [];\r\n\t\t}\r\n\t\treturn this.serverList[name];\r\n\t};\r\n\r\n};","import * as utils from \"../../utils/utils\";\r\nimport * as helpers from \"../../utils/helpers\";\r\n\r\n\r\nfunction IsWorkTimeArgument(date, unit, task, id, calendar){\r\n\tthis.date = date;\r\n\tthis.unit = unit;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction ClosestWorkTimeArgument(date, dir, unit, task, id, calendar){\r\n\tthis.date = date;\r\n\tthis.dir = dir;\r\n\tthis.unit = unit;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction CalculateEndDateArgument(start_date, duration, unit, step, task, id, calendar){\r\n\tthis.start_date = start_date;\r\n\tthis.duration = duration;\r\n\tthis.unit = unit;\r\n\tthis.step = step;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction GetDurationArgument(start, end, task, calendar) {\r\n\tthis.start_date = start;\r\n\tthis.end_date = end;\r\n\tthis.task = task;\r\n\tthis.calendar = calendar;\r\n\tthis.unit = null;\r\n\tthis.step = null;\r\n\treturn this;\r\n}\r\n\r\nvar calendarArgumentsHelper = function(gantt){\r\n\treturn {\r\n\t\tgetWorkHoursArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (helpers.isDate(config)) {\r\n\t\t\t\tconfig = {\r\n\t\t\t\t\tdate: config\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t}\r\n\r\n\t\t\tif(!helpers.isValidDate(config.date)){\r\n\t\t\t\tgantt.assert(false, \"Invalid date argument for getWorkHours method\");\r\n\t\t\t\tthrow new Error(\"Invalid date argument for getWorkHours method\");\r\n\t\t\t}\r\n\r\n\t\t\treturn config;\r\n\t\t},\r\n\t\tsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tunsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tisWorkTimeArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif(config instanceof IsWorkTimeArgument){\r\n\t\t\t\treturn config;\r\n\t\t\t}\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\tif (!config.date) {\r\n\t\t\t\t//IsWorkTimeArgument(date, unit, task, id, calendar)\r\n\t\t\t\tprocessedConfig = new IsWorkTimeArgument(arguments[0], arguments[1], arguments[2], null, arguments[3]);\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new IsWorkTimeArgument(config.date, config.unit, config.task, null, config.calendar);\r\n\t\t\t}\r\n\r\n\t\t\tprocessedConfig.unit = processedConfig.unit || gantt.config.duration_unit;\r\n\r\n\t\t\tif(!helpers.isValidDate(processedConfig.date)){\r\n\t\t\t\tgantt.assert(false, \"Invalid date argument for isWorkTime method\");\r\n\t\t\t\tthrow new Error(\"Invalid date argument for isWorkTime method\");\r\n\t\t\t}\r\n\r\n\t\t\treturn processedConfig;\r\n\t\t},\r\n\t\tgetClosestWorkTimeArguments: function (arg) {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (config instanceof ClosestWorkTimeArgument)\r\n\t\t\t\treturn config;\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\tif (helpers.isDate(config)) {\r\n\t\t\t\tprocessedConfig = new ClosestWorkTimeArgument(config);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new ClosestWorkTimeArgument(\r\n\t\t\t\t\tconfig.date,\r\n\t\t\t\t\tconfig.dir,\r\n\t\t\t\t\tconfig.unit,\r\n\t\t\t\t\tconfig.task,\r\n\t\t\t\t\tnull,//config.id,\r\n\t\t\t\t\tconfig.calendar\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif(config.id){\r\n\t\t\t\tprocessedConfig.task = config;\r\n\t\t\t}\r\n\t\t\tprocessedConfig.dir = config.dir || 'any';\r\n\t\t\tprocessedConfig.unit = config.unit || gantt.config.duration_unit;\r\n\r\n\t\t\tif(!helpers.isValidDate(processedConfig.date)){\r\n\t\t\t\tgantt.assert(false, \"Invalid date argument for getClosestWorkTime method\");\r\n\t\t\t\tthrow new Error(\"Invalid date argument for getClosestWorkTime method\");\r\n\t\t\t}\r\n\t\t\treturn processedConfig;\r\n\t\t},\r\n\r\n\t\t_getStartEndConfig: function (param) {\r\n\t\t\tvar argumentType = GetDurationArgument;\r\n\t\t\tvar config;\r\n\t\t\tif (param instanceof argumentType)\r\n\t\t\t\treturn param;\r\n\r\n\t\t\tif (helpers.isDate(param)) {\r\n\t\t\t\tconfig = new argumentType(arguments[0], arguments[1], arguments[2], arguments[3]);\r\n\t\t\t} else {\r\n\t\t\t\tconfig = new argumentType(param.start_date, param.end_date, param.task);\r\n\t\t\t\tif (param.id !== null && param.id !== undefined) {\r\n\t\t\t\t\tconfig.task = param;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\t\t\tconfig.step = config.step || gantt.config.duration_step;\r\n\t\t\tconfig.start_date = config.start_date || config.start || config.date;\r\n\r\n\t\t\tif(!helpers.isValidDate(config.start_date)){\r\n\t\t\t\tgantt.assert(false, \"Invalid start_date argument for getDuration method\");\r\n\t\t\t\tthrow new Error(\"Invalid start_date argument for getDuration method\");\r\n\t\t\t}\r\n\r\n\t\t\tif(!helpers.isValidDate(config.end_date)){\r\n\t\t\t\tgantt.assert(false, \"Invalid end_date argument for getDuration method\");\r\n\t\t\t\tthrow new Error(\"Invalid end_date argument for getDuration method\");\r\n\t\t\t}\r\n\r\n\t\t\treturn config;\r\n\t\t},\r\n\r\n\t\tgetDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\thasDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\tcalculateEndDateArguments: function (start, duration, unit, step) {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (config instanceof CalculateEndDateArgument)\r\n\t\t\t\treturn config;\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\t//CalculateEndDateArgument(start_date, duration, unit, step, task, id, calendar)\r\n\t\t\tif (helpers.isDate(config)) {\r\n\t\t\t\tprocessedConfig = new CalculateEndDateArgument(\r\n\t\t\t\t\targuments[0],\r\n\t\t\t\t\targuments[1],\r\n\t\t\t\t\targuments[2],\r\n\t\t\t\t\tundefined,\r\n\t\t\t\t\targuments[3],\r\n\t\t\t\t\tundefined,\r\n\t\t\t\t\targuments[4]\r\n\t\t\t\t);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new CalculateEndDateArgument(\r\n\t\t\t\t\tconfig.start_date,\r\n\t\t\t\t\tconfig.duration,\r\n\t\t\t\t\tconfig.unit,\r\n\t\t\t\t\tconfig.step,\r\n\t\t\t\t\tconfig.task,\r\n\t\t\t\t\tnull,//config.id,\r\n\t\t\t\t\tconfig.calendar\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif(config.id !== null && config.id !== undefined){\r\n\t\t\t\tprocessedConfig.task = config;\r\n\r\n\t\t\t\t// received a task object as an argument\r\n\t\t\t\t// ignore 'unit' and 'step' properties in this case, since it's likely a part of data model of a task\r\n\t\t\t\tprocessedConfig.unit = null;\r\n\t\t\t\tprocessedConfig.step = null;\r\n\t\t\t}\r\n\r\n\t\t\tprocessedConfig.unit = processedConfig.unit || gantt.config.duration_unit;\r\n\t\t\tprocessedConfig.step = processedConfig.step || gantt.config.duration_step;\r\n\r\n\t\t\tif(!helpers.isValidDate(processedConfig.start_date)){\r\n\t\t\t\tgantt.assert(false, \"Invalid start_date argument for calculateEndDate method\");\r\n\t\t\t\tthrow new Error(\"Invalid start_date argument for calculateEndDate method\");\r\n\t\t\t}\r\n\r\n\t\t\treturn processedConfig;\r\n\t\t}\r\n\t};\r\n};\r\n\r\n\r\nexport default calendarArgumentsHelper;","import * as utils from \"../../../utils/utils\";\r\nfunction WorkTimeCalendarMerger(){\r\n}\r\n\r\nWorkTimeCalendarMerger.prototype = {\r\n\r\n\r\n\t/**\r\n\t * convert hours array items into objects, e.g. [8, 12, 17, 18] -> [{start: 8, end: 12}, {start:17, end:18}]\r\n\t * @param {Array} hoursArray\r\n\t */\r\n\t_getIntervals: function(hoursArray){\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < hoursArray.length; i += 2){\r\n\r\n\t\t\tresult.push({\r\n\t\t\t\tstart: hoursArray[i],\r\n\t\t\t\tend: hoursArray[i+1]\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t/**\r\n\t * Convert ranges config into hours array\r\n\t * [{start: 8, end: 12}, {start:17, end:18}] --> [8, 12, 17, 18]\r\n\t * @param {*} intervalsArray\r\n\t */\r\n\t_toHoursArray: function(intervalsArray){\r\n\t\tvar result = [];\r\n\r\n\t\tfunction toFixed(value){\r\n\t\t\tvar str = String(value);\r\n\t\t\tif(str.length < 2){\r\n\t\t\t\tstr = \"0\" + str;\r\n\t\t\t}\r\n\t\t\treturn str;\r\n\t\t}\r\n\t\tfunction formatHHMM(secondsValue){\r\n\t\t\tvar hours = Math.floor(secondsValue / (60*60));\r\n\t\t\tvar minutePart = secondsValue - hours * 60 * 60;\r\n\r\n\t\t\tvar minutes = Math.floor(minutePart / (60));\r\n\t\t\treturn hours + \":\" + toFixed(minutes);\r\n\t\t}\r\n\t\tfor(var i = 0; i < intervalsArray.length; i++){\r\n\t\t\tresult.push(\r\n\t\t\t\tformatHHMM(intervalsArray[i].start) +\r\n\t\t\t\t\"-\" +\r\n\t\t\t\tformatHHMM(intervalsArray[i].end)\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t/**\r\n\t * Build intersection of hour intervals. e.g.\r\n\t * first: [{start: 8, end: 12}, {start:13, end:18}]\r\n\t * second: [{start: 10, end: 15}]\r\n\t * result: [{start: 10, end: 12}, {start: 13, end: 15}]\r\n\t * @param {Array} first\r\n\t * @param {Array} second\r\n\t */\r\n\t_intersectHourRanges: function(first, second){\r\n\t\tvar result = [];\r\n\r\n\t\tvar baseArray = first.length > second.length ? first : second;\r\n\t\tvar overridesArray = first === baseArray ? second: first;\r\n\t\tbaseArray = baseArray.slice();\r\n\t\toverridesArray = overridesArray.slice();\r\n\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < baseArray.length; i++){\r\n\t\t\tvar base = baseArray[i];\r\n\r\n\t\t\tfor(var j = 0; j < overridesArray.length; j++){\r\n\t\t\t\tvar current = overridesArray[j];\r\n\t\t\t\tif(current.start < base.end && current.end > base.start){\r\n\t\t\t\t\tresult.push({\r\n\t\t\t\t\t\tstart: Math.max(base.start, current.start),\r\n\t\t\t\t\t\tend: Math.min(base.end, current.end)\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif(base.end > current.end){\r\n\t\t\t\t\t\toverridesArray.splice(j, 1);\r\n\t\t\t\t\t\tj--;\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t/**\r\n\t * Reduce the number of ranges in config when possible,\r\n\t * joins ranges that can be merged\r\n\t * parts: [{start: 8, end: 12}, {start:12, end:13}, {start: 15, end: 17}]\r\n\t * result: [{start: 8, end: 13}, {start: 15, end: 17}]\r\n\t * @param {Array} parts\r\n\t */\r\n\t_mergeAdjacentIntervals: function(parts){\r\n\t\tvar result = parts.slice();\r\n\t\tresult.sort(function(a, b){\r\n\t\t\treturn a.start - b.start;\r\n\t\t});\r\n\t\tvar base = result[0];\r\n\t\tfor(var i = 1; i < result.length; i++){\r\n\t\t\tvar current = result[i];\r\n\t\t\tif(current.start <= base.end){\r\n\t\t\t\tif(current.end > base.end){\r\n\t\t\t\t\tbase.end = current.end;\r\n\t\t\t\t}\r\n\t\t\t\tresult.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}else{\r\n\t\t\t\tbase = current;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t_mergeHoursConfig: function(firstHours, secondHours){\r\n\t\t//var firstIntervals = this._getIntervals(firstHours);\r\n\t\t//var secondIntervals = this._getIntervals(secondHours);\r\n\r\n\t\treturn this._mergeAdjacentIntervals(\r\n\t\t\tthis._intersectHourRanges(firstHours, secondHours)\r\n\t\t);\r\n\t},\r\n\r\n\tmerge: function(first, second){\r\n\t\tconst firstCalendar = utils.copy(first.getConfig());\r\n\t\tconst secondCalendar = utils.copy(second.getConfig());\r\n\r\n\t\tconst firstConfig = firstCalendar.parsed;\r\n\t\tconst secondConfig = secondCalendar.parsed;\r\n\r\n\t\t// GS-2101. The customWeeks config shouldn't have parsed values as we'll parse them later\r\n\t\tfirstConfig.customWeeks = firstCalendar.customWeeks;\r\n\t\tsecondConfig.customWeeks = secondCalendar.customWeeks;\r\n\r\n\t\tvar mergedSettings = {\r\n\t\t\thours: this._toHoursArray(this._mergeHoursConfig(firstConfig.hours, secondConfig.hours)),\r\n\t\t\tdates: {},\r\n\t\t\tcustomWeeks: {}\r\n\t\t};\r\n\r\n\t\tconst processCalendar = (config1, config2) => {\r\n\t\t\tfor (let i in config1.dates) {\r\n\t\t\t\tconst date1 = config1.dates[i];\r\n\t\r\n\t\t\t\t// dates contain day-of-week rules [0-7] and rules for specific dates (js date timestamps) - set false date rules initially\r\n\t\t\t\tif (+i > 1000) {\r\n\t\t\t\t\tmergedSettings.dates[i] = false;\r\n\t\t\t\t}\r\n\t\t\t\t// Check if the key exists in the fisrt calendar object\r\n\t\t\t\tfor (const key in config2.dates) {\r\n\t\t\t\t\tconst date2 = config2.dates[key];\r\n\t\r\n\t\t\t\t\t// Logical AND for week days\r\n\t\t\t\t\tif (key == i) {\r\n\t\t\t\t\t\tmergedSettings.dates[i] = !!(date1 && date2);\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t// Handle case where dates are arrays\r\n\t\t\t\t\tif (Array.isArray(date1)) {\r\n\t\t\t\t\t\tconst hours2 = Array.isArray(date2) ? date2 : config2.hours;\r\n\t\t\t\t\t\tmergedSettings.dates[i] = this._toHoursArray(this._mergeHoursConfig(date1, hours2));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\r\n\t\t// Check both calendars\r\n\t\tprocessCalendar(firstConfig, secondConfig);\r\n\t\tprocessCalendar(secondConfig, firstConfig);\r\n\r\n\t\t// transfer and overwrite custom week calendars\r\n\t\tif(firstConfig.customWeeks){\r\n\t\t\tfor(var i in firstConfig.customWeeks){\r\n\t\t\t\tmergedSettings.customWeeks[i] = firstConfig.customWeeks[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(secondConfig.customWeeks){\r\n\t\t\tfor(var i in secondConfig.customWeeks){\r\n\t\t\t\t// GS-2101. If both calendars have the same name for a period, we need to rename it\r\n\t\t\t\tif (mergedSettings.customWeeks[i]){\r\n\t\t\t\t\tmergedSettings.customWeeks[i + \"_second\"] = secondConfig.customWeeks[i];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmergedSettings.customWeeks[i] = secondConfig.customWeeks[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn mergedSettings;\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport default WorkTimeCalendarMerger;","\r\n\r\nimport { IWorkUnitCache } from \"./workunit_cache_interface\";\r\n\r\nexport class WorkUnitsMapCache implements IWorkUnitCache {\r\n\tprivate _cache: Map<string, Array<Map<string, boolean>>>;\r\n\tconstructor() {\r\n\t\tthis.clear();\r\n\t}\r\n\r\n\tgetItem(unit: string, timestamp: string, value: Date): number|boolean {\r\n\t\tif (this._cache.has(unit)) {\r\n\t\t\tconst unitCache = this._cache.get(unit);\r\n\r\n\t\t\tconst subCache = unitCache[value.getFullYear()];\r\n\t\t\tif (subCache && subCache.has(timestamp)) {\r\n\t\t\t\treturn subCache.get(timestamp);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\tsetItem(unit: string, timestamp: string, value: boolean, rawValue: Date): void {\r\n\t\tif (!unit || !timestamp) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst cache = this._cache;\r\n\t\tconst year = rawValue.getFullYear();\r\n\r\n\t\tlet unitCache;\r\n\t\tif (!cache.has(unit)) {\r\n\t\t\tunitCache = [];\r\n\t\t\tcache.set(unit, unitCache);\r\n\t\t} else {\r\n\t\t\tunitCache = cache.get(unit);\r\n\t\t}\r\n\r\n\t\tlet yearCache = unitCache[year];\r\n\t\tif(!yearCache){\r\n\t\t\tyearCache = unitCache[year] = new Map<string, boolean>();\r\n\t\t}\r\n\r\n\r\n\t\tyearCache.set(timestamp, value);\r\n\t}\r\n\tclear(): void{\r\n\t\tthis._cache = new Map<string, Array<Map<string, boolean>>>();\r\n\t}\r\n}","import { IWorkUnitCache } from \"./workunit_cache_interface\";\r\n\r\nexport class WorkUnitsObjectCache implements IWorkUnitCache {\r\n\tprivate _cache: any;\r\n\tconstructor() {\r\n\t\tthis.clear();\r\n\t}\r\n\r\n\tgetItem(unit: string, timestamp: string, value: Date): number|boolean {\r\n\t\tconst cache = this._cache;\r\n\t\tif (cache && cache[unit]) {\r\n\t\t\tconst units = cache[unit];\r\n\t\t\tif(units === undefined){\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t\tconst subCache = units[value.getFullYear()];\r\n\t\t\tif (subCache && subCache[timestamp] !== undefined) {\r\n\t\t\t\treturn subCache[timestamp];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\tsetItem(unit: string, timestamp: string, value: boolean, rawValue: Date): void {\r\n\t\tif (!unit || !timestamp) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst cache = this._cache;\r\n\r\n\t\tif (!cache) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!cache[unit]) {\r\n\t\t\tcache[unit] = [];\r\n\t\t}\r\n\t\tconst unitCache = cache[unit];\r\n\r\n\t\tconst year = rawValue.getFullYear();\r\n\t\tlet yearCache = unitCache[year];\r\n\t\tif(!yearCache){\r\n\t\t\tyearCache = unitCache[year] = {};\r\n\t\t}\r\n\t\tyearCache[timestamp] = value;\r\n\t}\r\n\tclear(): void{\r\n\t\tthis._cache = {};\r\n\t}\r\n}","\r\n\r\nexport class LargerUnitsCache {\r\n\tprivate _weekCache: Map<number, number>;\r\n\tprivate _monthCache: Map<number, number>;\r\n\tprivate _calendar: any;\r\n\tconstructor(calendar) {\r\n\t\tthis.clear();\r\n\t\tthis._calendar = calendar;\r\n\t}\r\n\r\n\tgetMinutesPerWeek = (weekStart: Date) => {\r\n\t\tconst key = weekStart.valueOf();\r\n\r\n\t\tif(this._weekCache.has(key)){\r\n\t\t\treturn this._weekCache.get(key);\r\n\t\t}\r\n\r\n\t\tconst calendar = this._calendar;\r\n\t\tconst gantt = this._calendar.$gantt;\r\n\r\n\t\tlet minutesPerWeek = 0;\r\n\t\tlet start = gantt.date.week_start(new Date(weekStart));\r\n\t\tfor(let i = 0; i < 7; i++){\r\n\t\t\tminutesPerWeek += calendar.getHoursPerDay(start) * 60;\r\n\t\t\tstart = gantt.date.add(start, 1, \"day\");\r\n\t\t}\r\n\r\n\t\tthis._weekCache.set(key, minutesPerWeek);\r\n\t\treturn minutesPerWeek;\r\n\t};\r\n\r\n\tgetMinutesPerMonth = (monthStart: Date) => {\r\n\t\tconst key = monthStart.valueOf();\r\n\r\n\t\tif(this._monthCache.has(key)){\r\n\t\t\treturn this._monthCache.get(key);\r\n\t\t}\r\n\r\n\t\tconst calendar = this._calendar;\r\n\t\tconst gantt = this._calendar.$gantt;\r\n\r\n\t\tlet minutesPerMonth = 0;\r\n\t\tlet start = gantt.date.week_start(new Date(monthStart));\r\n\t\tconst nextMonth = gantt.date.add(start, 1, \"month\").valueOf();\r\n\t\twhile(start.valueOf() < nextMonth){\r\n\t\t\tminutesPerMonth += calendar.getHoursPerDay(start) * 60;\r\n\t\t\tstart = gantt.date.add(start, 1, \"day\");\r\n\t\t}\r\n\r\n\t\tthis._monthCache.set(key, minutesPerMonth);\r\n\t\treturn minutesPerMonth;\r\n\t};\r\n\r\n\tclear = (): void => {\r\n\t\tthis._weekCache = new Map<number, number>();\r\n\t\tthis._monthCache = new Map<number, number>();\r\n\t};\r\n}","export class DateDurationCache  {\r\n\tprivate _cache: any;\r\n\tconstructor() {\r\n\t\tthis.clear();\r\n\t}\r\n\r\n\t_getCacheObject(startDate: Date, unit: string, step:number){\r\n\t\tconst cache = this._cache;\r\n\t\tif (!cache[unit]) {\r\n\t\t\tcache[unit] = [];\r\n\t\t}\r\n\t\tlet unitCache = cache[unit];\r\n\t\tif(!unitCache) {\r\n\t\t\tunitCache = cache[unit] = {};\r\n\t\t}\r\n\r\n\t\tlet stepCache = unitCache[step];\r\n\t\tif(!stepCache) {\r\n\t\t\tstepCache = unitCache[step] = {};\r\n\t\t}\r\n\r\n\t\tconst year = startDate.getFullYear();\r\n\t\tlet yearCache = stepCache[year];\r\n\t\tif(!yearCache){\r\n\t\t\tyearCache = stepCache[year] = {durations: {}, endDates: {}};\r\n\t\t}\r\n\r\n\t\treturn yearCache;\r\n\t}\r\n\t_endDateCacheKey(startDate: number, duration: number){\r\n\t\treturn String(startDate) + \"-\" + String(duration);\r\n\t}\r\n\t_durationCacheKey(startDate: number, endDate: number){\r\n\t\treturn String(startDate) + \"-\" + String(endDate);\r\n\t}\r\n\tgetEndDate(startDate: Date, duration: number, unit: string, step: number, compute: () => Date): number|null{\r\n\t\tconst cache = this._getCacheObject(startDate, unit, step);\r\n\r\n\t\tconst startDateTimestamp = startDate.valueOf();\r\n\t\tconst key = this._endDateCacheKey(startDateTimestamp, duration);\r\n\t\tlet endDate;\r\n\t\tif(cache.endDates[key] === undefined){\r\n\t\t\tconst result = compute();\r\n\t\t\tconst resultTimestamp = result.valueOf();\r\n\t\t\tcache.endDates[key] = resultTimestamp;\r\n\t\t\tcache.durations[this._durationCacheKey(startDateTimestamp, resultTimestamp)] = duration;\r\n\t\t\tendDate = result;\r\n\t\t}else{\r\n\t\t\tendDate = new Date(cache.endDates[key]);\r\n\t\t}\r\n\r\n\t\treturn endDate;\r\n\t}\r\n\r\n\tgetDuration(startDate: Date, endDate: Date, unit: string, step: number, compute: () => number): number|null{\r\n\t\tconst cache = this._getCacheObject(startDate, unit, step);\r\n\r\n\t\tconst startDateTimestamp = startDate.valueOf();\r\n\t\tconst endDateTimestamp = endDate.valueOf();\r\n\t\tconst key = this._durationCacheKey(startDateTimestamp, endDateTimestamp);\r\n\t\tlet duration;\r\n\t\tif(cache.durations[key] === undefined){\r\n\t\t\tconst result = compute();\r\n\t\t\tcache.durations[key] = result.valueOf();\r\n\r\n\t\t\t// can't populate end date due to logic of end date calculation, current unit tests capture it\r\n\t\t\t// cache.endDates[this._endDateCacheKey(startDateTimestamp, result)] = endDateTimestamp;\r\n\t\t\tduration = result;\r\n\t\t}else{\r\n\t\t\tduration = cache.durations[key];\r\n\t\t}\r\n\r\n\t\treturn duration;\r\n\t}\r\n\r\n\tclear(): void{\r\n\t\tthis._cache = {};\r\n\t}\r\n}","import {createCacheObject} from \"./work_unit_cache\";\r\nimport {LargerUnitsCache} from \"./work_unit_cache\";\r\nimport * as utils from \"../../../utils/utils\";\r\nimport {DateDurationCache} from \"./work_unit_cache/date_duration_cache\";\r\n\r\nfunction CalendarWorkTimeStrategy(gantt, argumentsHelper) {\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n\tthis._workingUnitsCache = createCacheObject();\r\n\tthis._largeUnitsCache = new LargerUnitsCache(this);\r\n\tthis._dateDurationCache = new DateDurationCache();\r\n\tthis._worktime = null;\r\n\tthis._cached_timestamps = {};\r\n\tthis._cached_timestamps_count = 0;\r\n}\r\n\r\nCalendarWorkTimeStrategy.prototype = {\r\n\tunits: [\r\n\t\t\"year\",\r\n\t\t\"month\",\r\n\t\t\"week\",\r\n\t\t\"day\",\r\n\t\t\"hour\",\r\n\t\t\"minute\"\r\n\t],\r\n\t_clearCaches: function(){\r\n\t\tthis._workingUnitsCache.clear();\r\n\t\tthis._largeUnitsCache.clear();\r\n\t\tthis._dateDurationCache.clear();\r\n\t},\r\n\t// cache previously calculated worktime\r\n\t_getUnitOrder: function (unit) {\r\n\t\tfor (var i = 0, len = this.units.length; i < len; i++) {\r\n\t\t\tif (this.units[i] == unit)\r\n\t\t\t\treturn i;\r\n\t\t}\r\n\t},\r\n\t_resetTimestampCache: function(){\r\n\t\tthis._cached_timestamps = {};\r\n\t\tthis._cached_timestamps_count = 0;\r\n\t},\r\n\t_timestamp: function (settings) {\r\n\t\t// minor optimization, store calculated timestamps to reduce computations\r\n\t\t// reset cache when number of keys exceeds large number where key lookup may became more expensive than the recalculation\r\n\t\tif(this._cached_timestamps_count > 1000000){\r\n\t\t\tthis._resetTimestampCache();\r\n\t\t}\r\n\r\n\t\tvar timestamp = null;\r\n\t\tif ((settings.day || settings.day === 0)) {\r\n\t\t\ttimestamp = settings.day;\r\n\t\t} else if (settings.date) {\r\n\t\t\tvar value = String(settings.date.valueOf());\r\n\t\t\tif(this._cached_timestamps[value]){\r\n\t\t\t\ttimestamp = this._cached_timestamps[value];\r\n\t\t\t}else{\r\n\t\t\t\t// store worktime datestamp in utc so it could be recognized in different timezones (e.g. opened locally and sent to the export service in different timezone)\r\n\t\t\t\ttimestamp = Date.UTC(settings.date.getFullYear(), settings.date.getMonth(), settings.date.getDate());\r\n\t\t\t\tthis._cached_timestamps[value] = timestamp;\r\n\t\t\t\tthis._cached_timestamps_count++;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn timestamp;\r\n\t},\r\n\t_checkIfWorkingUnit: function (date, unit) {\r\n\t\t// GS-596: If unit is larger than day or has a custom logic\r\n\t\tif (!this[\"_is_work_\" + unit]) {\r\n\t\t\tconst from = this.$gantt.date[`${unit}_start`](new Date(date));\r\n\t\t\tconst to = this.$gantt.date.add(from, 1, unit);\r\n\t\t\treturn this.hasDuration(from, to);\r\n\t\t}\r\n\t\treturn this[\"_is_work_\" + unit](date);\r\n\t},\r\n\t//checkings for particular time units\r\n\t//methods for month-year-week can be defined, otherwise always return 'true'\r\n\t_is_work_day: function (date) {\r\n\t\tvar val = this._getWorkHours(date);\r\n\r\n\t\tif (Array.isArray(val)) {\r\n\t\t\treturn val.length > 0;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_is_work_hour: function (date) {\r\n\t\tvar hours = this._getWorkHours(date); // [{start: 8*60*60, end: 12*60*60}, {start: 13*60*60, end: 17*60*60}]\r\n\t\tvar value = date.getHours();\r\n\t\tfor (var i = 0; i < hours.length; i++) {\r\n\t\t\tif(value >= hours[i].startHour && value < hours[i].endHour){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\t_getTimeOfDayStamp: function(date, dayEnd) {\r\n\t\tvar hours = date.getHours();\r\n\t\tif(!date.getHours() && !date.getMinutes() && dayEnd){\r\n\t\t\thours = 24;\r\n\t\t}\r\n\t\treturn hours * 60 * 60 + date.getMinutes() * 60;\r\n\t},\r\n\r\n\t_is_work_minute: function(date){\r\n\t\tvar hours = this._getWorkHours(date); // [{start: 8*60*60, end: 12*60*60}, {start: 13*60*60, end: 17*60*60}]\r\n\t\tvar checkTime = this._getTimeOfDayStamp(date);\r\n\t\tfor (var i = 0; i < hours.length; i++) {\r\n\t\t\tif(checkTime >= hours[i].start && checkTime < hours[i].end){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\t_nextDate: function (start, unit, step) {\r\n\t\treturn this.$gantt.date.add(start, step, unit);\r\n\t},\r\n\t_getWorkUnitsBetweenGeneric: function (from, to, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\t\tvar units = 0;\r\n\r\n\r\n\t\tvar next = null;\r\n\t\tvar stepStart,\r\n\t\t\tstepEnd;\r\n\r\n\t\t// calculating decimal durations, i.e. 2016-09-20 00:05:00 - 2016-09-20 01:00:00 ~ 0.95 instead of 1\r\n\t\t// and also  2016-09-20 00:00:00 - 2016-09-20 00:05:00 ~ 0.05 instead of 1\r\n\t\t// durations must be rounded later\r\n\t\tvar checkFirst = false;\r\n\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\tif (stepStart.valueOf() != start.valueOf()) {\r\n\t\t\tcheckFirst = true;\r\n\t\t}\r\n\t\tvar checkLast = false;\r\n\t\tstepEnd = dateHelper[unit + \"_start\"](new Date(to));\r\n\t\tif (stepEnd.valueOf() != to.valueOf()) {\r\n\t\t\tcheckLast = true;\r\n\t\t}\r\n\r\n\t\tvar isLastStep = false;\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tnext = this._nextDate(start, unit, step);\r\n\t\t\tisLastStep = (next.valueOf() > end.valueOf());\r\n\r\n\t\t\tif (this._isWorkTime(start, unit)) {\r\n\t\t\t\tif (checkFirst || (checkLast && isLastStep)) {\r\n\t\t\t\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\t\t\t\tstepEnd = dateHelper.add(stepStart, step, unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (checkFirst) {\r\n\t\t\t\t\tcheckFirst = false;\r\n\t\t\t\t\tnext = this._nextDate(stepStart, unit, step);\r\n\t\t\t\t\tunits += ((stepEnd.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\t\t\t\t} else if (checkLast && isLastStep) {\r\n\t\t\t\t\tcheckLast = false;\r\n\t\t\t\t\tunits += ((end.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunits++;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar unitOrder = this._getUnitOrder(unit);\r\n\t\t\t\tvar biggerTimeUnit = this.units[unitOrder - 1];\r\n\t\t\t\tif(biggerTimeUnit && !this._isWorkTime(start, biggerTimeUnit)){\r\n\t\t\t\t\tnext = this._getClosestWorkTimeFuture(start, biggerTimeUnit);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstart = next;\r\n\t\t}\r\n\t\treturn units;\r\n\t},\r\n\r\n\t_getMinutesPerHour: function (date) {\r\n\t\tvar hourStart = this._getTimeOfDayStamp(date);\r\n\t\tvar hourEnd = this._getTimeOfDayStamp(this._nextDate(date, \"hour\", 1));\r\n\t\tif (hourEnd === 0){\r\n\t\t\thourEnd = 24 * 60 * 60;\r\n\t\t}\r\n\t\tvar worktimes = this._getWorkHours(date);\r\n\r\n\t\tfor(var i = 0; i < worktimes.length; i++){\r\n\t\t\tvar interval = worktimes[i];\r\n\t\t\tif(hourStart >= interval.start && hourEnd <= interval.end){\r\n\t\t\t\treturn 60;// hour inside a working interval, all hour is a work hour\r\n\t\t\t}else if(hourStart < interval.end && hourEnd > interval.start){\r\n\t\t\t\t// hour is partially work time\r\n\t\t\t\tvar duration = Math.min(hourEnd, interval.end) - Math.max(hourStart, interval.start);\r\n\t\t\t\treturn duration / 60;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\t},\r\n\r\n\t_getMinutesPerDay: function (date) {\r\n\t\tvar hours = this._getWorkHours(date);\r\n\t\tvar res = 0;\r\n\t\thours.forEach(function(interval){\r\n\t\t\tres+= interval.durationMinutes;\r\n\t\t});\r\n\t\treturn res;\r\n\t},\r\n\tgetHoursPerDay: function (date) {\r\n\t\tvar hours = this._getWorkHours(date);\r\n\t\tvar res = 0;\r\n\t\thours.forEach(function(interval){\r\n\t\t\tres+= interval.durationHours;\r\n\t\t});\r\n\t\treturn res;\r\n\t},\r\n\t_getWorkUnitsForRange: function (from, to, unit, step) {\r\n\t\tvar total = 0;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\r\n\t\tvar getUnitsPerDay;\r\n\t\tif (unit == \"minute\") {\r\n\t\t\tgetUnitsPerDay = utils.bind(this._getMinutesPerDay, this);\r\n\t\t} else {\r\n\t\t\tgetUnitsPerDay = utils.bind(this.getHoursPerDay, this);\r\n\t\t}\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif(end - start > 1000*60*60*24*32 && start.getDate() === 0) {\r\n\t\t\t\tvar units = this._largeUnitsCache.getMinutesPerMonth(start);\r\n\t\t\t\tif(unit == \"hour\"){\r\n\t\t\t\t\tunits = units / 60;\r\n\t\t\t\t}\r\n\t\t\t\ttotal += units;\r\n\t\t\t\tstart = this.$gantt.date.add(start, 1, \"month\");\r\n\t\t\t\tcontinue;\r\n\t\t\t}else if(end - start > 1000*60*60*24*16) {\r\n\t\t\t\tvar weekStart = this.$gantt.date.week_start(new Date(start));\r\n\t\t\t\tif(start.valueOf() === weekStart.valueOf()){\r\n\t\t\t\t\tvar units = this._largeUnitsCache.getMinutesPerWeek(start);\r\n\t\t\t\t\tif(unit == \"hour\"){\r\n\t\t\t\t\t\tunits = units / 60;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttotal += units;\r\n\t\t\t\t\tstart = this.$gantt.date.add(start, 7, \"day\");\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t//\tif (this._isWorkTime(start, \"day\")) {\r\n\t\t\ttotal += getUnitsPerDay(start);\r\n\t\t//\t}\r\n\t\t\tstart = this._nextDate(start, \"day\", 1);\r\n\t\t}\r\n\r\n\t\treturn total / step;\r\n\t},\r\n\r\n\r\n\t_getMinutesBetweenSingleDay: function(from, to){\r\n\t\tvar range = this._getIntervalTimestamp(from, to);\r\n\t\tvar worktimes = this._getWorkHours(from);\r\n\t\tvar result = 0;\r\n\r\n\t\tfor(var i = 0; i < worktimes.length; i++){\r\n\t\t\tvar interval = worktimes[i];\r\n\t\t\tif(range.end >= interval.start && range.start <= interval.end){\r\n\t\t\t\tvar minuteFrom = Math.max(interval.start, range.start);\r\n\t\t\t\tvar minuteTo = Math.min(interval.end, range.end);\r\n\r\n\t\t\t\tresult += (minuteTo - minuteFrom) / 60;\r\n\t\t\t\trange.start = minuteTo;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Math.floor(result);\r\n\t},\r\n\r\n\t_getMinutesBetween: function(from, to, unit, step){\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\tvar firstDayStart = new Date(start);\r\n\t\tvar firstDayEnd = this.$gantt.date.add(this.$gantt.date.day_start(new Date(start)), 1, \"day\");\r\n\r\n\t\tif (end.valueOf() <= firstDayEnd.valueOf()) {\r\n\t\t\treturn this._getMinutesBetweenSingleDay(from, to);\r\n\t\t} else {\r\n\r\n\t\t\tvar lastDayStart = this.$gantt.date.day_start(new Date(end));\r\n\t\t\tvar lastDayEnd = end;\r\n\r\n\t\t\tvar startPart = this._getMinutesBetweenSingleDay(firstDayStart, firstDayEnd);\r\n\t\t\tvar endPart = this._getMinutesBetweenSingleDay(lastDayStart, lastDayEnd);\r\n\r\n\t\t\tvar rangePart = this._getWorkUnitsForRange(firstDayEnd, lastDayStart, unit, step);\r\n\t\t\tvar total = startPart + rangePart + endPart;\r\n\r\n\t\t\treturn total;\r\n\t\t}\r\n\t},\r\n\t// optimized method for calculating work units duration of large time spans\r\n\t// implemented for hours and minutes units, bigger time units don't benefit from the optimization so much\r\n\t_getHoursBetween: function (from, to, unit, step) {\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\tvar firstDayStart = new Date(start);\r\n\t\tvar firstDayEnd = this.$gantt.date.add(this.$gantt.date.day_start(new Date(start)), 1, \"day\");\r\n\r\n\t\tif (end.valueOf() <= firstDayEnd.valueOf()) {\r\n\t\t\treturn Math.round(this._getMinutesBetweenSingleDay(from, to) / 60);\r\n\t\t} else {\r\n\r\n\t\t\tvar lastDayStart = this.$gantt.date.day_start(new Date(end));\r\n\t\t\tvar lastDayEnd = end;\r\n\r\n\t\t\tvar startPart = this._getMinutesBetweenSingleDay(firstDayStart, firstDayEnd, unit, step) / 60;\r\n\t\t\tvar endPart = this._getMinutesBetweenSingleDay(lastDayStart, lastDayEnd, unit, step) / 60;\r\n\r\n\t\t\tvar rangePart = this._getWorkUnitsForRange(firstDayEnd, lastDayStart, unit, step);\r\n\t\t\tvar total = startPart + rangePart + endPart;\r\n\r\n\t\t\treturn Math.round(total);\r\n\t\t}\r\n\t},\r\n\r\n\tgetConfig: function () {\r\n\t\treturn this._worktime;\r\n\t},\r\n\t_setConfig: function (settings) {\r\n\t\tthis._worktime = settings;\r\n\t\tthis._parseSettings();\r\n\t\tthis._clearCaches();\r\n\t},\r\n\t_parseSettings: function() {\r\n\t\tvar settings = this.getConfig();\r\n\t\tsettings.parsed = {\r\n\t\t\tdates: {},\r\n\t\t\thours: null,\r\n\t\t\thaveCustomWeeks: false,\r\n\t\t\tcustomWeeks: {},\r\n\t\t\tcustomWeeksRangeStart: null,\r\n\t\t\tcustomWeeksRangeEnd: null,\r\n\t\t\tcustomWeeksBoundaries: []\r\n\t\t};\r\n\r\n\t\tsettings.parsed.hours = this._parseHours(settings.hours);\r\n\t\tfor(var i in settings.dates){\r\n\t\t\tsettings.parsed.dates[i] = this._parseHours(settings.dates[i]);\r\n\t\t}\r\n\r\n\t\tif(settings.customWeeks) {\r\n\t\t\tvar minCustomRangeStart = null;\r\n\t\t\tvar maxCustomRangeEnd = null;\r\n\t\t\tfor(var i in settings.customWeeks){\r\n\t\t\t\tvar customTime = settings.customWeeks[i];\r\n\r\n\t\t\t\tif(customTime.from && customTime.to){\r\n\t\t\t\t\tvar rangeStart = customTime.from;\r\n\t\t\t\t\tvar rangeEnd = customTime.to;\r\n\t\t\t\t\tif(!minCustomRangeStart || minCustomRangeStart > rangeStart.valueOf()){\r\n\t\t\t\t\t\tminCustomRangeStart = rangeStart.valueOf();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!maxCustomRangeEnd || maxCustomRangeEnd < rangeEnd.valueOf()){\r\n\t\t\t\t\t\tmaxCustomRangeEnd = rangeEnd.valueOf();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsettings.parsed.customWeeksBoundaries.push({\r\n\t\t\t\t\t\tfrom: rangeStart.valueOf(),\r\n\t\t\t\t\t\tfromReadable: new Date(rangeStart),\r\n\t\t\t\t\t\tto: rangeEnd.valueOf(),\r\n\t\t\t\t\t\ttoReadable: new Date(rangeEnd),\r\n\t\t\t\t\t\tname: i\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tsettings.parsed.haveCustomWeeks = true;\r\n\t\t\t\t\tvar currentWeek = settings.parsed.customWeeks[i] = {\r\n\t\t\t\t\t\tfrom: customTime.from,\r\n\t\t\t\t\t\tto: customTime.to,\r\n\t\t\t\t\t\thours: this._parseHours(customTime.hours),\r\n\t\t\t\t\t\tdates: {}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// GS-1840. If there are no dates, it should work correctly with the weekdays\r\n\t\t\t\t\tif (customTime.days && !customTime.dates) {\r\n\t\t\t\t\t\tcustomTime.dates = customTime.dates || {};\r\n\t\t\t\t\t\tfor (var i = 0; i < customTime.days.length; i++) {\r\n\t\t\t\t\t\t\tcustomTime.dates[i] = customTime.days[i];\r\n\t\t\t\t\t\t\tif (!(customTime.days[i] instanceof Array)) {\r\n\t\t\t\t\t\t\t\tcustomTime.dates[i] = !!customTime.days[i];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdelete customTime.days;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor(var d in customTime.dates){\r\n\t\t\t\t\t\tcurrentWeek.dates[d] = this._parseHours(customTime.dates[d]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tsettings.parsed.customWeeksRangeStart = minCustomRangeStart;\r\n\t\t\tsettings.parsed.customWeeksRangeEnd = maxCustomRangeEnd;\r\n\r\n\t\t}\r\n\t},\r\n\r\n\t_tryChangeCalendarSettings: function (payload) {\r\n\t\tvar backup = JSON.stringify(this.getConfig());\r\n\t\tpayload();\r\n\t\tif (!this.hasWorkTime()) {\r\n\t\t//\tthis.$gantt.assert(false, \"Invalid calendar settings, no worktime available\");\r\n\t\t\tthis._setConfig(JSON.parse(backup));\r\n\t\t\tthis._clearCaches();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\t_arraysEqual: function(a, b){\r\n\t\tif (a === b) return true;\r\n\t\tif (!a || !b) return false;\r\n\t\tif (a.length != b.length) return false;\r\n\r\n\t\tfor (var i = 0; i < a.length; ++i) {\r\n\t\t\tif (a[i] !== b[i]) return false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\r\n\t_compareSettings: function (mySettings, thatSettings) {\r\n\t\tif (!this._arraysEqual(mySettings.hours, thatSettings.hours)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar myDays = Object.keys(mySettings.dates);\r\n\t\tvar otherDates = Object.keys(thatSettings.dates);\r\n\t\tmyDays.sort();\r\n\t\totherDates.sort();\r\n\r\n\t\tif (!this._arraysEqual(myDays, otherDates)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < myDays.length; i++){\r\n\t\t\tvar timestamp = myDays[i];\r\n\t\t\tvar myHours = mySettings.dates[timestamp];\r\n\t\t\tvar otherHours = mySettings.dates[timestamp];\r\n\r\n\t\t\t// day settings not equal\r\n\t\t\tif(myHours !== otherHours &&\r\n\t\t\t\t// but still can be two arrays with the equivalent hour settings\r\n\t\t\t\t!(Array.isArray(myHours) && Array.isArray(otherHours) && this._arraysEqual(myHours, otherHours))\r\n\t\t\t\t){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\tequals: function (calendar) {\r\n\t\tif(!(calendar instanceof CalendarWorkTimeStrategy)){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar mySettings = this.getConfig();\r\n\t\tvar thatSettings = calendar.getConfig();\r\n\r\n\t\tif(!this._compareSettings(mySettings, thatSettings)){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(mySettings.parsed.haveCustomWeeks && thatSettings.parsed.haveCustomWeeks){\r\n\t\t\tif(mySettings.parsed.customWeeksBoundaries.length != thatSettings.parsed.customWeeksBoundaries.length){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tfor(var i in mySettings.parsed.customWeeks){\r\n\t\t\t\tvar myWeek = mySettings.parsed.customWeeks[i];\r\n\t\t\t\tvar thatWeek = thatSettings.parsed.customWeeks[i];\r\n\t\t\t\tif(!thatWeek){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!this._compareSettings(myWeek, thatWeek)){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else if(mySettings.parse.haveCustomWeeks !== thatSettings.parsed.haveCustomWeeks){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\tgetWorkHours: function () {\r\n\t\tvar config = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn this._getWorkHours(config.date, false);\r\n\t},\r\n\t_getWorkHours: function (date, parsed) {\r\n\t\tvar calendar = this.getConfig();\r\n\t\tif(parsed !== false){\r\n\t\t\tcalendar = calendar.parsed;\r\n\t\t}\r\n\r\n\t\tif(!date){\r\n\t\t\treturn calendar.hours;\r\n\t\t}\r\n\r\n\t\tvar dateValue = this._timestamp({date: date});\r\n\r\n\t\tif(calendar.haveCustomWeeks){\r\n\t\t\tif(calendar.customWeeksRangeStart <= dateValue && calendar.customWeeksRangeEnd > dateValue){\r\n\t\t\t\tfor(var i = 0; i < calendar.customWeeksBoundaries.length; i++){\r\n\t\t\t\t\tif(calendar.customWeeksBoundaries[i].from <= dateValue && calendar.customWeeksBoundaries[i].to > dateValue){\r\n\t\t\t\t\t\tcalendar = calendar.customWeeks[calendar.customWeeksBoundaries[i].name];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar hours = true;\r\n\r\n\t\tif (calendar.dates[dateValue] !== undefined) {\r\n\t\t\thours = calendar.dates[dateValue];//custom day\r\n\t\t} else if (calendar.dates[date.getDay()] !== undefined) {\r\n\t\t\thours = calendar.dates[date.getDay()];//week day\r\n\t\t}\r\n\t\tif (hours === true) {\r\n\t\t\treturn calendar.hours;\r\n\t\t} else if (hours) {\r\n\t\t\treturn hours;\r\n\t\t}\r\n\t\treturn [];\r\n\t},\r\n\r\n\t_getIntervalTimestamp: function(from, to){\r\n\t\tvar res = {\r\n\t\t\tstart: 0,\r\n\t\t\tend: 0\r\n\t\t};\r\n\r\n\t\tres.start = from.getHours() * 60 * 60 + from.getMinutes() * 60 + from.getSeconds();\r\n\t\tvar endHours = to.getHours();\r\n\t\tif(!endHours && !to.getMinutes() && !to.getSeconds() && from.valueOf() < to.valueOf()){\r\n\t\t\tendHours = 24;\r\n\t\t}\r\n\t\tres.end = endHours * 60 * 60 + to.getMinutes() * 60 + to.getSeconds();\r\n\t\treturn res;\r\n\t},\r\n\r\n\t_parseHours: function(hours) {\r\n\t\tif(Array.isArray(hours)){\r\n\r\n\t\t\tvar timestampRanges = [];// worktime as seconds range\r\n\t\t\thours.forEach(function(hour){\r\n\t\t\t\tif(typeof hour === \"number\"){\r\n\t\t\t\t\ttimestampRanges.push(hour*60*60);\r\n\t\t\t\t}else if(typeof hour === \"string\") {\r\n\t\t\t\t\t// \"12-13\", or \"12:00-13:00\", or \"12:00:00-13:00:00\"\r\n\t\t\t\t\thour.split(\"-\").map(function(time){\r\n\t\t\t\t\t\treturn time.trim();\r\n\t\t\t\t\t}).forEach(function(part){\r\n\t\t\t\t\t\tvar parsed = part.split(\":\").map(function(time){\r\n\t\t\t\t\t\t\treturn time.trim();\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tvar value = parseInt(parsed[0]*60*60);\r\n\t\t\t\t\t\tif(parsed[1]){\r\n\t\t\t\t\t\t\tvalue += parseInt(parsed[1]*60);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(parsed[2]){\r\n\t\t\t\t\t\t\tvalue += parseInt(parsed[2]);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttimestampRanges.push(value);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tvar timerangeConfig = [];\r\n\t\t\tfor (var i = 0; i < timestampRanges.length; i += 2) {\r\n\t\t\t\tvar start = timestampRanges[i];\r\n\t\t\t\tvar end = timestampRanges[i + 1];\r\n\t\t\t\tvar duration = end - start;\r\n\r\n\t\t\t\ttimerangeConfig.push({\r\n\t\t\t\t\tstart: start,\r\n\t\t\t\t\tend: end,\r\n\t\t\t\t\tstartHour: Math.floor(start / (60*60)),\r\n\t\t\t\t\tstartMinute: Math.floor(start / (60)),\r\n\t\t\t\t\tendHour: Math.ceil(end / (60*60)),\r\n\t\t\t\t\tendMinute: Math.ceil(end / (60)),\r\n\t\t\t\t\tdurationSeconds: duration,\r\n\t\t\t\t\tdurationMinutes: duration/60,\r\n\t\t\t\t\tdurationHours: duration/(60 * 60)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn timerangeConfig;\r\n\t\t} else {\r\n\t\t\treturn hours;\r\n\t\t}\r\n\t},\r\n\r\n\tsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tvar hours = settings.hours !== undefined ? settings.hours : true;\r\n\t\t\tvar timestamp = this._timestamp(settings);\r\n\t\t\tvar calendarConfig = this.getConfig();\r\n\t\t\tif (timestamp !== null) {\r\n\t\t\t\tcalendarConfig.dates[timestamp] = hours;\r\n\t\t\t} else if(!settings.customWeeks) {\r\n\t\t\t\tcalendarConfig.hours = hours;\r\n\t\t\t}\r\n\r\n\t\t\tif(settings.customWeeks){\r\n\t\t\t\tif(!calendarConfig.customWeeks){\r\n\t\t\t\t\tcalendarConfig.customWeeks = {};\r\n\t\t\t\t}\r\n\t\t\t\t// GS-1867. allow setWorkTime to exclude dates in the customWeeks range\r\n\t\t\t\tif (typeof settings.customWeeks == \"string\"){\r\n\t\t\t\t\tif (timestamp !== null) {\r\n\t\t\t\t\t\tcalendarConfig.customWeeks[settings.customWeeks].dates[timestamp] = hours;\r\n\t\t\t\t\t} else if(!settings.customWeeks) {\r\n\t\t\t\t\t\tcalendarConfig.customWeeks[settings.customWeeks].hours = hours;\r\n\t\t\t\t\t}\t\t\r\n\t\t\t\t} else if (typeof settings.customWeeks === \"object\"\r\n\t\t\t\t&& settings.customWeeks.constructor === Object){\r\n\t\t\t\t\tfor(var i in settings.customWeeks){\r\n\t\t\t\t\t\tcalendarConfig.customWeeks[i] = settings.customWeeks[i];\r\n\t\t\t\t\t}\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._parseSettings();\r\n\t\t\tthis._clearCaches();\r\n\t\t}, this));\r\n\t},\r\n\r\n\tunsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tif (!settings) {\r\n\t\t\t\tthis.reset_calendar();\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar timestamp = this._timestamp(settings);\r\n\r\n\t\t\t\tif (timestamp !== null) {\r\n\t\t\t\t\tdelete this.getConfig().dates[timestamp];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Load updated settings and clear work units cache\r\n\t\t\tthis._parseSettings();\r\n\t\t\tthis._clearCaches();\r\n\t\t}, this));\r\n\t},\r\n\r\n\t_isWorkTime: function (date, unit) {\r\n\t\t// Check if this item has in the cache\r\n\r\n\t\tvar useCache = true;//unit === \"day\"; // use cache only for days. In case of hours/minutes cache size grows too large and the overhead exceeds the gains\r\n\t\tvar isWorkUnit = -1;\r\n\t\tvar dateKey = null;\r\n\r\n\t\tif(useCache){\r\n\t\t\t// use string keys\r\n\t\t\tdateKey = String(date.valueOf());\r\n\t\t\tisWorkUnit = this._workingUnitsCache.getItem(unit, dateKey, date);\r\n\t\t}\r\n\r\n\t\tif (isWorkUnit == -1) {\r\n\t\t\t// calculate if not cached\r\n\t\t\tisWorkUnit = this._checkIfWorkingUnit(date, unit);\r\n\t\t\tif(useCache){\r\n\t\t\t\tthis._workingUnitsCache.setItem(unit, dateKey, isWorkUnit, date);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn isWorkUnit;\r\n\t},\r\n\r\n\tisWorkTime: function () {\r\n\t\tvar config =  this.argumentsHelper.isWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._isWorkTime(config.date, config.unit);\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tif (!config.unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t//return this._calculateDuration(config.start_date, config.end_date, config.unit, config.step);\r\n\r\n\t\tvar self = this;\r\n\t\treturn this._dateDurationCache.getDuration(config.start_date, config.end_date, config.unit, config.step, function(){ \r\n\t\t\treturn self._calculateDuration(config.start_date, config.end_date, config.unit, config.step);\r\n\t\t});\r\n\t},\r\n\r\n\t_calculateDuration: function (from, to, unit, step) {\r\n\t\tvar res = 0;\r\n\r\n\t\tvar sign = 1;\r\n\t\tif(from.valueOf() > to.valueOf()){\r\n\t\t\tvar tmp = to;\r\n\t\t\tto = from;\r\n\t\t\tfrom = tmp;\r\n\t\t\tsign = -1;\r\n\t\t}\r\n\r\n\t\tif (unit == \"hour\" && step == 1) {\r\n\t\t\tres = this._getHoursBetween(from, to, unit, step);\r\n\t\t} else if(unit == \"minute\" && step == 1){\r\n\t\t\t// quick calculation for minutes with 1 minute step\r\n\t\t\tres = this._getMinutesBetween(from, to, unit, step);\r\n\t\t} else {\r\n\t\t\tres = this._getWorkUnitsBetweenGeneric(from, to, unit, step);\r\n\t\t}\r\n\r\n\t\t// getWorkUnits.. returns decimal durations\r\n\t\treturn sign * Math.round(res);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif (this._isWorkTime(start, unit))\r\n\t\t\t\treturn true;\r\n\t\t\tstart = this._nextDate(start, unit, step);\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config =  this.argumentsHelper.calculateEndDateArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tif (!unit)\r\n\t\t\treturn false;\r\n\r\n\t\tvar mult = (config.duration >= 0) ? 1 : -1;\r\n\t\tduration = Math.abs(duration * 1);\r\n\t//\tvar endDate = this._calculateEndDate(from, duration, unit, step * mult);\r\n\t//\treturn endDate;\r\n\t\tvar self = this;\r\n\t\treturn this._dateDurationCache.getEndDate(from, duration, unit, step * mult, function(){ \r\n\t\t\treturn self._calculateEndDate(from, duration, unit, step * mult);\r\n\t\t} );\r\n\t},\r\n\r\n\t_calculateEndDate: function (from, duration, unit, step) {\r\n\t\tif (!unit)\r\n\t\t\treturn false;\r\n\r\n\t\tif (step == 1 && unit == \"minute\") {\r\n\t\t\treturn this._calculateMinuteEndDate(from, duration, step);\r\n\t\t} else if(step == -1 && unit == \"minute\") {\r\n\t\t\treturn this._subtractMinuteDate(from, duration, step);\r\n\t\t} else if (step == 1 && unit == \"hour\") {\r\n\t\t\treturn this._calculateHourEndDate(from, duration, step);\r\n\t\t} else {\r\n\t\t\tvar interval = this._addInterval(from, duration, unit, step, null);\r\n\t\t\treturn interval.end;\r\n\t\t}\r\n\t},\r\n\r\n\t_addInterval: function (start, duration, unit, step, stopAction) {\r\n\t\tvar added = 0;\r\n\t\tvar current = start;\r\n\t\tvar dstShift = false;\r\n\r\n\t\twhile (added < duration && !(stopAction && stopAction(current))) {\r\n\t\t\tvar next = this._nextDate(current, unit, step);\r\n\r\n\t\t\t// GS-1501. Correct hours after DST change\r\n\t\t\tif (unit == \"day\"){\r\n\t\t\t\tdstShift = dstShift || !current.getHours() && next.getHours();\r\n\r\n\t\t\t\tif (dstShift){\r\n\t\t\t\t\tnext.setHours(0);\r\n\t\t\t\t\tif (next.getHours()){\r\n\t\t\t\t\t// the day when the timezone is changed, try to correct hours next time\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdstShift = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar dateValue = new Date(next.valueOf() + 1);\r\n\t\t\tif (step > 0) {\r\n\t\t\t\tdateValue = new Date(next.valueOf() - 1);\r\n\t\t\t}\r\n\t\t\tvar workTimeCheck = this._isWorkTime(dateValue, unit);\r\n\r\n\t\t\tif (workTimeCheck && !dstShift) {\r\n\t\t\t\tadded++;\r\n\t\t\t}\r\n\t\t\tcurrent = next;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tend: current,\r\n\t\t\tstart: start,\r\n\t\t\tadded: added\r\n\t\t};\r\n\t},\r\n\r\n\t_addHoursUntilDayEnd: function(from, duration) {\r\n\t\tvar dayEnd = this.$gantt.date.add(this.$gantt.date.day_start(new Date(from)), 1, \"day\");\r\n\t\tvar added = 0;\r\n\t\tvar left = duration;\r\n\r\n\t\tvar range = this._getIntervalTimestamp(from, dayEnd);\r\n\t\tvar worktimes = this._getWorkHours(from);\r\n\t\tfor(var i = 0; i < worktimes.length && added < duration; i++){\r\n\t\t\tvar interval = worktimes[i];\r\n\t\t\tif(range.end >= interval.start && range.start <= interval.end){\r\n\t\t\t\tvar minuteFrom = Math.max(interval.start, range.start);\r\n\t\t\t\tvar minuteTo = Math.min(interval.end, range.end);\r\n\t\t\t\tvar rangeHours = (minuteTo - minuteFrom) / (60 * 60);\r\n\t\t\t\tif(rangeHours > left){\r\n\t\t\t\t\trangeHours = left;\r\n\t\t\t\t\tminuteTo = minuteFrom + (left * 60 * 60);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar addHours = Math.round((minuteTo - minuteFrom) / (60 * 60));\r\n\t\t\t\tadded += addHours;\r\n\t\t\t\tleft -= addHours;\r\n\t\t\t\trange.start = minuteTo;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar intervalEnd = dayEnd;\r\n\t\tif(added === duration){\r\n\t\t\tintervalEnd = new Date(from.getFullYear(), from.getMonth(), from.getDate(), 0, 0, range.start);\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tadded: added,\r\n\t\t\tend: intervalEnd\r\n\t\t};\r\n\t},\r\n\r\n\t_calculateHourEndDate: function (from, duration,  step) {\r\n\t\tvar start = new Date(from),\r\n\t\tadded = 0;\r\n\t\tstep = step || 1;\r\n\t\tduration = Math.abs(duration * 1);\r\n\r\n\t\tvar interval = this._addHoursUntilDayEnd(start, duration);\r\n\t\tadded = interval.added;\r\n\t\tstart = interval.end;\r\n\r\n\t\tvar durationLeft = duration - added;\r\n\r\n\t\tif (durationLeft) {\r\n\t\t\tvar current = start;\r\n\t\t\twhile (added < duration) {\r\n\t\t\t\tvar next = this._nextDate(current, \"day\", step);\r\n\t\t\t\t// reset to day start in case DST switch happens in the process\r\n\t\t\t\tnext.setHours(0);\r\n\t\t\t\tnext.setMinutes(0);\r\n\t\t\t\tnext.setSeconds(0);\r\n\r\n\t\t\t\tvar hoursPerDay = 0;\r\n\t\t\t\tif(step > 0){\r\n\t\t\t\t\thoursPerDay = this.getHoursPerDay(new Date(next.valueOf() - 1));\r\n\t\t\t\t}else{\r\n\t\t\t\t\thoursPerDay = this.getHoursPerDay(new Date(next.valueOf() + 1));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (added + hoursPerDay >= duration) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tadded += hoursPerDay;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcurrent = next;\r\n\t\t\t}\r\n\t\t\tstart = current;\r\n\t\t}\r\n\r\n\t\tif (added < duration) {\r\n\t\t\tvar durationLeft = duration - added;\r\n\t\t\tinterval = this._addHoursUntilDayEnd(start, durationLeft);\r\n\t\t\tstart = interval.end;\r\n\t\t}\r\n\r\n\t\treturn start;\r\n\t},\r\n\r\n\t_addMinutesUntilHourEnd: function(from, duration){\r\n\t\tif(from.getMinutes() === 0) {\r\n\t\t\t// already at hour end\r\n\t\t\treturn {\r\n\t\t\t\tadded: 0,\r\n\t\t\t\tend: new Date(from)\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar hourEnd = this.$gantt.date.add(this.$gantt.date.hour_start(new Date(from)), 1, \"hour\");\r\n\t\tvar added = 0;\r\n\t\tvar left = duration;\r\n\r\n\t\tvar range = this._getIntervalTimestamp(from, hourEnd);\r\n\t\tvar worktimes = this._getWorkHours(from);\r\n\t\tfor(var i = 0; i < worktimes.length && added < duration; i++){\r\n\t\t\tvar interval = worktimes[i];\r\n\t\t\tif(range.end >= interval.start && range.start <= interval.end){\r\n\t\t\t\tvar minuteFrom = Math.max(interval.start, range.start);\r\n\t\t\t\tvar minuteTo = Math.min(interval.end, range.end);\r\n\t\t\t\tvar rangeMinutes = (minuteTo - minuteFrom) / 60;\r\n\t\t\t\tif(rangeMinutes > left){\r\n\t\t\t\t\trangeMinutes = left;\r\n\t\t\t\t\tminuteTo = minuteFrom + (left * 60);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// TODO: verify testcase https://dhtmlxsupport.teamwork.com/desk/tickets/9625700/messages\r\n\t\t\t\t/*if (rangeMinutes === 0) {\r\n\t\t\t\t\trangeMinutes = left;\r\n\t\t\t\t\tminuteTo = minuteFrom + (left * 60);\r\n\t\t\t\t}*/\r\n\r\n\t\t\t\tvar addMinutes = Math.round((minuteTo - minuteFrom) / 60);\r\n\t\t\t\tleft -= addMinutes;\r\n\t\t\t\tadded += addMinutes;\r\n\t\t\t\trange.start = minuteTo;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar intervalEnd = hourEnd;\r\n\t\tif(added === duration){\r\n\t\t\tintervalEnd = new Date(from.getFullYear(), from.getMonth(), from.getDate(), 0, 0, range.start);\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tadded: added,\r\n\t\t\tend: intervalEnd\r\n\t\t};\r\n\t},\r\n\r\n\t_subtractMinutesUntilHourStart: function(from, duration){\r\n\t\tvar hourStart = this.$gantt.date.hour_start(new Date(from));\r\n\t\tvar added = 0;\r\n\t\tvar left = duration;\r\n\r\n\t\tvar hourStartTimestamp = hourStart.getHours() * 60 * 60 + hourStart.getMinutes() * 60 + hourStart.getSeconds();\r\n\t\tvar initialDateTimestamp = from.getHours() * 60 * 60 + from.getMinutes() * 60 + from.getSeconds();\r\n\r\n\t\tvar worktimes = this._getWorkHours(from);\r\n\t\tfor(var i = worktimes.length - 1; i >= 0 && added < duration; i--){\r\n\t\t\tvar interval = worktimes[i];\r\n\t\t\tif(initialDateTimestamp > interval.start && hourStartTimestamp <= interval.end){\r\n\t\t\t\tvar minuteFrom = Math.min(initialDateTimestamp, interval.end);\r\n\t\t\t\tvar minuteTo = Math.max(hourStartTimestamp, interval.start);\r\n\r\n\t\t\t//\tvar minuteFrom = Math.max(interval.start, currentHour.start);\r\n\t\t\t//\tvar minuteTo = Math.min(interval.end, currentHour.end);\r\n\t\t\t\tvar rangeMinutes = (minuteFrom - minuteTo) / 60;\r\n\t\t\t\tif(rangeMinutes > left){\r\n\t\t\t\t\trangeMinutes = left;\r\n\t\t\t\t\tminuteTo = minuteFrom - (left * 60);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// TODO: verify testcase https://dhtmlxsupport.teamwork.com/desk/tickets/9625700/messages\r\n\t\t\t\t/*if (rangeMinutes === 0) {\r\n\t\t\t\t\trangeMinutes = left;\r\n\t\t\t\t\tminuteTo = minuteFrom - (left * 60);\r\n\t\t\t\t}*/\r\n\r\n\t\t\t\tvar addMinutes = Math.abs(Math.round((minuteFrom - minuteTo) / 60));\r\n\t\t\t\tleft -= addMinutes;\r\n\t\t\t\tadded += addMinutes;\r\n\t\t\t\tinitialDateTimestamp = minuteTo;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar intervalEnd = hourStart;\r\n\t\tif(added === duration){\r\n\t\t\tintervalEnd = new Date(from.getFullYear(), from.getMonth(), from.getDate(), 0, 0, initialDateTimestamp);\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tadded: added,\r\n\t\t\tend: intervalEnd\r\n\t\t};\r\n\t},\r\n\r\n\t_subtractMinuteDate: function (from, duration, step) {\r\n\t\t// var start = new Date(from),\r\n\t\t// GS-2683. We should start calculating minutes from the working time\r\n\t\tvar start = this.getClosestWorkTime({ date: from, dir: \"past\", unit: \"minute\" }),\r\n\t\t\tadded = 0;\r\n\t\tstep = step || -1;\r\n\t\tduration = Math.abs(duration * 1);\r\n\t\tduration = Math.round(duration);\r\n\r\n\t\tconst minutePrecision = this._isMinutePrecision(start);\r\n\r\n\t\tlet addedInterval = this._subtractMinutesUntilHourStart(start, duration);\r\n\t\tadded += addedInterval.added;\r\n\r\n\t\tstart = addedInterval.end;\r\n\r\n\t\tvar calculatedDay = 0;\r\n\t\tvar daySchedule = [];\r\n\t\tvar minutesInDay = 0;\r\n\r\n\t\twhile (added < duration) {\r\n\t\t\tvar dayStart = this.$gantt.date.day_start(new Date(start));\r\n\r\n\t\t\tvar iterateFromDayEnd = false;\r\n\t\t\tif(start.valueOf() === dayStart.valueOf()){\r\n\t\t\t\tdayStart = this.$gantt.date.add(dayStart, -1, \"day\");\r\n\t\t\t\titerateFromDayEnd = true;\r\n\t\t\t}\r\n\t\t\t//var dayStartTimestamp = this.$gantt.date.day_start(new Date(start)).valueOf();\r\n\t\t\tvar dayEnd = new Date(dayStart.getFullYear(), dayStart.getMonth(), dayStart.getDate(), 23, 59,59,999).valueOf();\r\n\r\n\t\t\tif(dayEnd !== calculatedDay){\r\n\t\t\t\tdaySchedule = this._getWorkHours(dayStart);\r\n\t\t\t\tminutesInDay = this._getMinutesPerDay(dayStart);\r\n\t\t\t\tcalculatedDay = dayEnd;\r\n\t\t\t}\r\n\r\n\t\t\tvar left = duration - added;\r\n\t\t\tvar timestamp = this._getTimeOfDayStamp(start, iterateFromDayEnd);\r\n\r\n\t\t\tif(!daySchedule.length || !minutesInDay){\r\n\t\t\t\tstart = this.$gantt.date.add(start, -1, \"day\");\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif(daySchedule[daySchedule.length - 1].end <= timestamp){\r\n\t\t\t\tif(left > minutesInDay){\r\n\t\t\t\t\tadded += minutesInDay;\r\n\t\t\t\t\tstart = this.$gantt.date.add(start, -1, \"day\");\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar isWorkHour = false;\r\n\t\t\tvar workInterval = null;\r\n\t\t\tvar prevInterval = null;\r\n\t\t\tfor(var i = daySchedule.length - 1; i >= 0; i--){\r\n\t\t\t\tif(daySchedule[i].start < timestamp - 1 && daySchedule[i].end >= timestamp - 1){\r\n\t\t\t\t\tisWorkHour = true;\r\n\t\t\t\t\tworkInterval = daySchedule[i];\r\n\t\t\t\t\tprevInterval = daySchedule[i-1];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(isWorkHour){\r\n\r\n\t\t\t\t// we're at the end of worktime interval and subtracting more than the duration of the interval\r\n\t\t\t\t// -> subtract the duration of the interval and move to the start of the interval (we're moving from end)\r\n\t\t\t\tif(timestamp === workInterval.end && left >= workInterval.durationMinutes){\r\n\t\t\t\t\tadded += workInterval.durationMinutes;\r\n\t\t\t\t\tstart = this.$gantt.date.add(start, -workInterval.durationMinutes, \"minute\");\r\n\t\t\t\t} // worktime is set in whole hours (no intervals like 9:15-10:00)\r\n\t\t\t\t// the amount we need to subtract lies inside the interval\r\n\t\t\t\telse if(!minutePrecision && left <= (timestamp/60 - workInterval.startMinute)){\r\n\t\t\t\t\tadded += left;\r\n\t\t\t\t\tstart = this.$gantt.date.add(start, -left, \"minute\");\r\n\t\t\t\t}else if (minutePrecision){\r\n\t\t\t\t\t// GS-2129. If the working time is set in minutes, we accumulate the working time in minutes from right to left\r\n\t\t\t\t\t\r\n\t\t\t\t\t// duration we need to subtract lies completely inside the work interval\r\n\t\t\t\t\tif(left <= (timestamp/60 - workInterval.startMinute)){\r\n\t\t\t\t\t\tadded += left;\r\n\t\t\t\t\t\tstart = this.$gantt.date.add(start, -left, \"minute\");\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\t// we need to go trough multiple work intervals to subtract needed time\r\n\t\t\t\t\t\tadded += (timestamp/60 - workInterval.startMinute);\r\n\t\t\t\t\t\tif(prevInterval){\r\n\t\t\t\t\t\t\tstart = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 0, 0, prevInterval.end);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tstart = this.$gantt.date.day_start(start);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar minutesInHour = this._getMinutesPerHour(start);\r\n\t\t\t\t\tif(minutesInHour <= left){\r\n\t\t\t\t\t\tadded += minutesInHour;\r\n\t\t\t\t\t\tstart = this._nextDate(start, \"hour\", step);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\taddedInterval = this._subtractMinutesUntilHourStart(start, left);\r\n\t\t\t\t\t\tadded += addedInterval.added;\r\n\t\t\t\t\t\tstart = addedInterval.end;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(start.getHours() === 0 && start.getMinutes() === 0 && start.getSeconds() === 0){\r\n\t\t\t\t\tvar prev = this._getClosestWorkTimePast(start, \"hour\");\r\n\t\t\t\t\tif(prev.valueOf() === start.valueOf()){\r\n\t\t\t\t\t\tvar prev = this.$gantt.date.add(start, -1, \"day\");\r\n\t\t\t\t\t\tvar times = this._getWorkHours(prev);\r\n\t\t\t\t\t\tif(times.length){\r\n\t\t\t\t\t\t\tvar lastInterval = times[times.length - 1];\r\n\t\t\t\t\t\t\tprev.setSeconds(lastInterval.durationSeconds);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstart = prev;\r\n\r\n\t\t\t\t} else{\r\n\t\t\t\t\tstart = this._getClosestWorkTimePast(new Date(start - 1), \"hour\");\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (added < duration) {\r\n\t\t\tvar durationLeft = duration - added;\r\n\t\t\taddedInterval = this._subtractMinutesUntilHourStart(start, durationLeft);\r\n\t\t\tadded += addedInterval.added;\r\n\t\t\tstart = addedInterval.end;\r\n\t\t}\r\n\r\n\t\treturn start;\r\n\t},\r\n\t_calculateMinuteEndDate: function (from, duration, step) {\r\n\t\tvar start = new Date(from),\r\n\t\t\tadded = 0;\r\n\t\tstep = step || 1;\r\n\t\tduration = Math.abs(duration * 1);\r\n\t\tduration = Math.round(duration);\r\n\r\n\t\tvar addedInterval = this._addMinutesUntilHourEnd(start, duration);\r\n\t\tadded += addedInterval.added;\r\n\r\n\t\tstart = addedInterval.end;\r\n\r\n\t\tvar calculatedDay = 0;\r\n\t\tvar daySchedule = [];\r\n\t\tvar minutesInDay = 0;\r\n\r\n\t\tvar minutePrecision = this._isMinutePrecision(start);\r\n\r\n\t\twhile (added < duration) {\r\n\t\t\tvar dayStart = this.$gantt.date.day_start(new Date(start)).valueOf();\r\n\t\t\tif(dayStart !== calculatedDay){\r\n\t\t\t\tdaySchedule = this._getWorkHours(start);\r\n\t\t\t\tminutesInDay = this._getMinutesPerDay(start);\r\n\t\t\t\tcalculatedDay = dayStart;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar left = duration - added;\r\n\t\t\tvar timestamp = this._getTimeOfDayStamp(start);\r\n\r\n\t\t\tif(!daySchedule.length || !minutesInDay){\r\n\t\t\t\tstart = this.$gantt.date.add(this.$gantt.date.day_start(start), 1, \"day\");\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif(daySchedule[0].start >= timestamp){\r\n\t\t\t\tif(left >= minutesInDay){\r\n\t\t\t\t\tadded += minutesInDay;\r\n\t\t\t\t\tif (left == minutesInDay) {\r\n\t\t\t\t\t\tstart = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 0, 0, daySchedule[daySchedule.length - 1].end);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tstart = this.$gantt.date.add(start, 1, \"day\");\r\n\t\t\t\t\t\tstart = this.$gantt.date.day_start(start);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar isWorkHour = false;\r\n\t\t\tvar workInterval = null;\r\n\t\t\tfor(var i = 0; i < daySchedule.length; i++){\r\n\t\t\t\tif(daySchedule[i].start <= timestamp && daySchedule[i].end > timestamp){\r\n\t\t\t\t\tisWorkHour = true;\r\n\t\t\t\t\tworkInterval = daySchedule[i];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(isWorkHour){\r\n\r\n\t\t\t\tif(timestamp === workInterval.start && left >= workInterval.durationMinutes){\r\n\t\t\t\t\tadded += workInterval.durationMinutes;\r\n\t\t\t\t\tstart = this.$gantt.date.add(start, workInterval.durationMinutes, \"minute\");\r\n\t\t\t\t}else if(left <= (workInterval.endMinute - timestamp/60)){\r\n\t\t\t\t\tadded += left;\r\n\t\t\t\t\tstart = this.$gantt.date.add(start, left, \"minute\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar minutesInHour = this._getMinutesPerHour(start);\r\n\t\t\t\t\tif(minutesInHour <= left){\r\n\t\t\t\t\t\tadded += minutesInHour;\r\n\t\t\t\t\t\t// when the working time settings are set in minutes move to the next minutes\r\n\t\t\t\t\t\tif (minutePrecision) {\r\n\t\t\t\t\t\t\tstart = this.$gantt.date.add(start, minutesInHour, \"minute\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tstart = this._nextDate(start, \"hour\", step);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\taddedInterval = this._addMinutesUntilHourEnd(start, left);\r\n\t\t\t\t\t\tadded += addedInterval.added;\r\n\t\t\t\t\t\tstart = addedInterval.end;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tstart = this._getClosestWorkTimeFuture(start, \"hour\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (added < duration) {\r\n\t\t\tvar durationLeft = duration - added;\r\n\t\t\taddedInterval = this._addMinutesUntilHourEnd(start, durationLeft);\r\n\t\t\tadded += addedInterval.added;\r\n\t\t\tstart = addedInterval.end;\r\n\t\t}\r\n\r\n\t\treturn start;\r\n\t},\r\n\r\n\tgetClosestWorkTime: function () {\r\n\t\tvar settings =  this.argumentsHelper.getClosestWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._getClosestWorkTime(settings.date, settings.unit, settings.dir);\r\n\t},\r\n\r\n\t_getClosestWorkTime: function (inputDate, unit, direction) {\r\n\t\tvar result = new Date(inputDate);\r\n\r\n\t\tif (this._isWorkTime(result, unit)) {\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\tresult = this.$gantt.date[unit + '_start'](result);\r\n\r\n\t\tif (direction == 'any' || !direction) {\r\n\t\t\tvar closestFuture = this._getClosestWorkTimeFuture(result, unit);\r\n\t\t\tvar closestPast = this._getClosestWorkTimePast(result, unit);\r\n\t\t\tif (Math.abs(closestFuture - inputDate) <= Math.abs(inputDate - closestPast)) {\r\n\t\t\t\tresult = closestFuture;\r\n\t\t\t} else {\r\n\t\t\t\tresult = closestPast;\r\n\t\t\t}\r\n\t\t} else if (direction == \"past\") {\r\n\t\t\tresult = this._getClosestWorkTimePast(result, unit);\r\n\t\t} else {\r\n\t\t\tresult = this._getClosestWorkTimeFuture(result, unit);\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t_getClosestWorkTimeFuture: function (date, unit) {\r\n\t\treturn this._getClosestWorkTimeGeneric(date, unit, 1);\r\n\t},\r\n\r\n\t_getClosestWorkTimePast: function (date, unit) {\r\n\t\tvar result = this._getClosestWorkTimeGeneric(date, unit, -1);\r\n\t\t// should return the end of the closest work interval\r\n\t\treturn this.$gantt.date.add(result, 1, unit);\r\n\t},\r\n\r\n\t_findClosestTimeInDay: function(date, direction, worktimes) {\r\n\t\tvar start = new Date(date);\r\n\t\tvar resultDate = null;\r\n\t\tvar fromDayEnd = false;\r\n\t\tif(!this._getWorkHours(start).length){\r\n\t\t\tstart = this._getClosestWorkTime(start, \"day\", direction < 0 ? \"past\" : \"future\");\r\n\t\t\tif(direction < 0){\r\n\t\t\t\tstart = new Date(start.valueOf() - 1);\r\n\t\t\t\tfromDayEnd = true;\r\n\t\t\t}\r\n\t\t\tworktimes = this._getWorkHours(start);\r\n\t\t}\r\n\r\n\t\tvar value = this._getTimeOfDayStamp(start);\r\n\t\tif(fromDayEnd){\r\n\t\t\tvalue = this._getTimeOfDayStamp(new Date(start.valueOf() + 1), fromDayEnd);\r\n\t\t}\r\n\t\tif(direction > 0){\r\n\t\t\tfor(var i = 0; i < worktimes.length; i++){\r\n\t\t\t\tif(worktimes[i].start >= value){\r\n\t\t\t\t\tresultDate = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 0, 0, worktimes[i].start);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tfor(var i = worktimes.length - 1; i >= 0; i--){\r\n\t\t\t\tif(worktimes[i].end <= value){\r\n\t\t\t\t\tresultDate = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 0, 0, worktimes[i].end);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}else if(worktimes[i].end > value && worktimes[i].start <= value) {\r\n\t\t\t\t\tresultDate = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 0, 0, value);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn resultDate;\r\n\t},\r\n\t_getClosestWorkMinute: function(date, unit, direction) {\r\n\t\tvar start = new Date(date);\r\n\t\tvar worktimes = this._getWorkHours(start);\r\n\t\tvar resultDate = this._findClosestTimeInDay(start, direction, worktimes);\r\n\t\tif(!resultDate){\r\n\t\t\tif(direction > 0){\r\n\t\t\t\tstart = this.calculateEndDate(start, direction, unit);\r\n\t\t\t\tstart = this.$gantt.date.day_start(start);\r\n\t\t\t}else{\r\n\t\t\t\tstart = this.calculateEndDate(start, direction, \"day\");\r\n\t\t\t\tstart = this.$gantt.date.day_start(start);\r\n\t\t\t\tstart = this.$gantt.date.add(start, 1, \"day\");\r\n\t\t\t\tstart = new Date(start.valueOf() - 1);\r\n\t\t\t}\r\n\t\t\tworktimes = this._getWorkHours(start);\r\n\t\t\tresultDate = this._findClosestTimeInDay(start, direction, worktimes);\r\n\t\t}\r\n\t\tif(direction < 0){\r\n\t\t\t// getClosestWorkTimePast adds one time unit to the result date after this\r\n\t\t\tresultDate = this.$gantt.date.add(resultDate, -1, unit);\r\n\t\t}\r\n\t\treturn resultDate;\r\n\t},\r\n\r\n\t_getClosestWorkTimeGeneric: function (date, unit, increment) {\r\n\t\tif(unit === \"hour\" || unit === \"minute\"){\r\n\t\t\treturn this._getClosestWorkMinute(date, unit, increment);\r\n\t\t}\r\n\r\n\t\tvar unitOrder = this._getUnitOrder(unit),\r\n\t\t\tbiggerTimeUnit = this.units[unitOrder - 1];\r\n\r\n\t\tvar result = date;\r\n\r\n\t\t// be extra sure we won't fall into infinite loop, 3k seems big enough\r\n\t\tvar maximumLoop = 3000,\r\n\t\t\tcount = 0;\r\n\r\n\t\twhile (!this._isWorkTime(result, unit)) {\r\n\t\t\tif (biggerTimeUnit && !this._isWorkTime(result, biggerTimeUnit)) {\r\n\t\t\t\t// if we look for closest work hour and detect a week-end - first find the closest work day,\r\n\t\t\t\t// and continue iterations after that\r\n\t\t\t\tif (increment > 0) {\r\n\t\t\t\t\tresult = this._getClosestWorkTimeFuture(result, biggerTimeUnit);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = this._getClosestWorkTimePast(result, biggerTimeUnit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this._isWorkTime(result, unit)) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcount++;\r\n\t\t\tif (count > maximumLoop) {\r\n\t\t\t\tthis.$gantt.assert(false, \"Invalid working time check\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar tzOffset = result.getTimezoneOffset();\r\n\t\t\tresult = this.$gantt.date.add(result, increment, unit);\r\n\r\n\t\t\tresult = this.$gantt._correct_dst_change(result, tzOffset, increment, unit);\r\n\t\t\tif (this.$gantt.date[unit + '_start']) {\r\n\t\t\t\tresult = this.$gantt.date[unit + '_start'](result);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t/**\r\n\t * Check whether this calendar has working time. Calendar has working time only if there are regular working days of week\r\n\t *\r\n\t */\r\n\thasWorkTime: function () {\r\n\t\tvar worktime = this.getConfig();\r\n\t\tvar dates = worktime.dates;\r\n\r\n\t\tvar daysOfWeek = [0, 1, 2, 3, 4, 5, 6];\r\n\t\tvar exceptions = [];\r\n\t\tfor(var i in worktime.dates){\r\n\t\t\tif(Number(i) > 6){\r\n\t\t\t\texceptions.push(Number(i));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar hasRegularHours = this._checkWorkHours(worktime.hours);\r\n\r\n\t\tvar result = false;\r\n\t\tdaysOfWeek.forEach((function(day){\r\n\t\t\tif(result){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar dayConfig = dates[day];\r\n\t\t\tif(dayConfig === true){\r\n\t\t\t\t// workday uses global hours\r\n\t\t\t\tresult = hasRegularHours;\r\n\t\t\t}else if(Array.isArray(dayConfig)){\r\n\t\t\t\t// workday uses custom hours\r\n\t\t\t\tresult = this._checkWorkHours(dayConfig);\r\n\t\t\t}\r\n\t\t}).bind(this));\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t_checkWorkHours: function(hoursArray) {\r\n\t\tif (hoursArray.length === 0) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar result = false;\r\n\t\tfor (var i = 0; i < hoursArray.length; i += 2) {\r\n\t\t\tif (hoursArray[i] !== hoursArray[i + 1]) {\r\n\t\t\t\tresult = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t_isMinutePrecision: function (date) {\r\n\t\tlet minutePrecision = false;\r\n\t\tthis._getWorkHours(date).forEach(function(interval){\r\n\t\t\tif (interval.startMinute % 60 || interval.endMinute % 60){\r\n\t\t\t\tminutePrecision = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn minutePrecision;\r\n\t}\r\n};\r\n\r\nexport default CalendarWorkTimeStrategy;","import { IWorkUnitCache } from \"./workunit_cache_interface\";\r\nimport { WorkUnitsMapCache } from \"./workunit_map_cache\";\r\nimport { WorkUnitsObjectCache } from \"./workunit_object_cache\";\r\nexport { LargerUnitsCache } from \"./larger_units_helper\";\r\n\r\nexport function createCacheObject(): IWorkUnitCache {\r\n\r\n\t// worktime hash is on the hot path,\r\n\t// Map seems to work faster than plain array, use it whenever possible\r\n\tif (typeof Map !== \"undefined\") {\r\n\t\treturn new WorkUnitsMapCache();\r\n\t} else {\r\n\t\treturn new WorkUnitsObjectCache();\r\n\t}\r\n}\r\n","export default {\r\n\tisLegacyResourceCalendarFormat: function(resourceCalendarsProperty){\r\n\t\t// modern format:\r\n\t\t//gantt.config.resource_calendars = {\r\n\t\t//\tresourceId: calendarId,\r\n\t\t//\tresourceId: calendarId,\r\n\t\t//\tresourceId: calendarId\r\n\t\t//\t};\r\n\t\t\r\n\t\t// legacy format:\r\n\t\t// gantt.config.resource_calendars = {\r\n\t\t//\t\"resourceProperty\": {\r\n\t\t//\t\tresourceId: calendarId,\r\n\t\t//\t\tresourceId: calendarId,\r\n\t\t//\t\tresourceId: calendarId\r\n\t\t//\t\t}\r\n\t\t//\t};\r\n\r\n\t\tif(!resourceCalendarsProperty){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tfor(var i in resourceCalendarsProperty){\r\n\t\t\tif(resourceCalendarsProperty[i] && typeof resourceCalendarsProperty[i] === \"object\"){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\tgetResourceProperty: function(config){\r\n\t\tvar resourceCalendarsConfig = config.resource_calendars;\r\n\t\tvar propertyName = config.resource_property;\r\n\t\tif(this.isLegacyResourceCalendarFormat(resourceCalendarsConfig)){\r\n\t\t\tfor(var i in config){\r\n\t\t\t\tpropertyName = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn propertyName;\r\n\t},\r\n\tgetCalendarIdFromLegacyConfig: function(task, config){\r\n\t\tif (config) {\r\n\t\t\tfor (var field in config) {\r\n\t\t\t\tvar resource = config[field];\r\n\t\t\t\tif (task[field]) {\r\n\t\t\t\t\tvar calendarId = resource[task[field]];\r\n\t\t\t\t\tif (calendarId) {\r\n\t\t\t\t\t\treturn calendarId;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n};","import * as utils from \"../../utils/utils\";\r\nimport createArgumentsHelper from \"./calendar_arguments_helper\";\r\nimport CalendarMergeHelper from \"./strategy/work_calendar_merger\";\r\nimport CalendarWorkTimeStrategy from \"./strategy/calendar_strategy\";\r\nimport legacyResourceCalendarConfig from \"./legacy_resource_config\";\r\nimport dynamicResourceCalendarsFactory from \"./dynamic_resource_calendars\";\r\n\r\nconst dynamicResourceCalendars = dynamicResourceCalendarsFactory();\r\n\r\nfunction CalendarManager (gantt){\r\n\tthis.$gantt = gantt;\r\n\tthis._calendars = {};\r\n\tthis._legacyConfig = undefined;\r\n\tthis.$gantt.attachEvent(\"onGanttReady\", function(){\r\n\t\tif(this.$gantt.config.resource_calendars){\r\n\t\t\tthis._isLegacyConfig = legacyResourceCalendarConfig.isLegacyResourceCalendarFormat(this.$gantt.config.resource_calendars);\r\n\t\t}\r\n\t}.bind(this));\r\n\r\n\tthis.$gantt.attachEvent(\"onBeforeGanttReady\", function(){\r\n\t\tthis.createDefaultCalendars();\r\n\t}.bind(this));\r\n\tthis.$gantt.attachEvent(\"onBeforeGanttRender\", function(){\r\n\t\tthis.createDefaultCalendars();\r\n\t}.bind(this));\r\n}\r\n\r\nCalendarManager.prototype = {\r\n\t_calendars: {},\r\n\t_convertWorkTimeSettings: function (settings) {\r\n\t\tvar days = settings.days;\r\n\t\tif (days && !settings.dates) {\r\n\t\t\tsettings.dates = settings.dates || {};\r\n\t\t\tfor (var i = 0; i < days.length; i++) {\r\n\t\t\t\tsettings.dates[i] = days[i];\r\n\t\t\t\tif (!(days[i] instanceof Array)) {\r\n\t\t\t\t\tsettings.dates[i] = !!days[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tdelete settings.days;\r\n\t\treturn settings;\r\n\t},\r\n\tmergeCalendars: function(){\r\n\t\tvar calendars = [];\r\n\t\tvar args = arguments;\r\n\t\tif(Array.isArray(args[0])){\r\n\t\t\tcalendars = args[0].slice();\r\n\t\t}else{\r\n\t\t\tfor(var i = 0; i < arguments.length; i++){\r\n\t\t\t\tcalendars.push(arguments[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar mergeHelper = new CalendarMergeHelper();\r\n\r\n\t\tvar result;\r\n\t\tcalendars.forEach(function(calendar){\r\n\t\t\tif(!result){\r\n\t\t\t\tresult = calendar;\r\n\t\t\t} else{\r\n\t\t\t\tresult = this._createCalendarFromConfig(mergeHelper.merge(result, calendar));\r\n\t\t\t}\r\n\r\n\t\t}.bind(this));\r\n\t\treturn this.createCalendar(result);\r\n\t},\r\n\r\n\t_createCalendarFromConfig: function(config){\r\n\t\tvar apiCore = new CalendarWorkTimeStrategy(this.$gantt, createArgumentsHelper(this.$gantt));\r\n\t\tapiCore.id = String(utils.uid());\r\n\r\n\t\tvar preparedConfig = this._convertWorkTimeSettings(config);\r\n\t\tif(preparedConfig.customWeeks){\r\n\t\t\tfor(var i in preparedConfig.customWeeks){\r\n\t\t\t\tpreparedConfig.customWeeks[i] = this._convertWorkTimeSettings(preparedConfig.customWeeks[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tapiCore._setConfig(preparedConfig);\r\n\r\n\t\treturn apiCore;\r\n\t},\r\n\r\n\tcreateCalendar: function (parentCalendar) {\r\n\t\tvar settings;\r\n\r\n\t\tif (!parentCalendar) {\r\n\t\t\tparentCalendar = {};\r\n\t\t}\r\n\r\n\t\tif (parentCalendar.getConfig){\r\n\t\t\tsettings = utils.copy(parentCalendar.getConfig());\r\n\t\t} else if (parentCalendar.worktime) {\r\n\t\t\tsettings = utils.copy(parentCalendar.worktime);\r\n\t\t} else {\r\n\t\t\tsettings = utils.copy(parentCalendar);\r\n\t\t}\r\n\r\n\t\tvar defaults = utils.copy(this.defaults.fulltime.worktime);\r\n\t\tutils.mixin(settings, defaults);\r\n\r\n\t\treturn this._createCalendarFromConfig(settings);\r\n\t},\r\n\r\n\tgetCalendar: function (id) {\r\n\t\tid = id || \"global\";\r\n\t\tvar calendar = this._calendars[id];\r\n\t\tif(!calendar){\r\n\t\t\tthis.createDefaultCalendars();\r\n\t\t\tcalendar = this._calendars[id];\r\n\t\t}\r\n\r\n\t\treturn calendar;\r\n\t},\r\n\r\n\tgetCalendars: function () {\r\n\t\tvar res = [];\r\n\t\tfor (var i in this._calendars) {\r\n\t\t\tres.push(this.getCalendar(i));\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\t_getOwnCalendar: function(task){\r\n\t\tvar config = this.$gantt.config;\r\n\t\tif (task[config.calendar_property]) {\r\n\t\t\treturn this.getCalendar(task[config.calendar_property]);\r\n\t\t}\r\n\r\n\t\tif (config.resource_calendars) {\r\n\t\t\tvar calendar;\r\n\t\t\tvar calendarId;\r\n\t\t\tvar resourceProperty;\r\n\t\t\tif(this._legacyConfig === false){\r\n\t\t\t\tresourceProperty = config.resource_property;\r\n\t\t\t}else{\r\n\t\t\t\tresourceProperty = legacyResourceCalendarConfig.getResourceProperty(config);\r\n\t\t\t}\r\n\t\t\t// GS-2821. If no resource is assigned to a task,\r\n\t\t\t// there is no need to check the resource calendar\r\n\t\t\tif(Array.isArray(task[resourceProperty]) && task[resourceProperty].length){\r\n\t\t\t\t// if multiple resources are attached to the task - merge their calendars\r\n\t\t\t\tif(config.dynamic_resource_calendars){\r\n\t\t\t\t\tcalendarId = dynamicResourceCalendars.getCalendarIdFromMultipleResources(task[resourceProperty], this);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcalendar = this.getResourceCalendar(task[resourceProperty]);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(this._legacyConfig === undefined){\r\n\t\t\t\t\tthis._legacyConfig = legacyResourceCalendarConfig.isLegacyResourceCalendarFormat(config.resource_calendars);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this._legacyConfig){\r\n\t\t\t\t\tvar calendarId = legacyResourceCalendarConfig.getCalendarIdFromLegacyConfig(task, config.resource_calendars);\r\n\t\t\t\t}else if(resourceProperty && task[resourceProperty] && config.resource_calendars[task[resourceProperty]]){\r\n\t\t\t\t\tvar calendar = this.getResourceCalendar(task[resourceProperty]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(calendarId){\r\n\t\t\t\tcalendar = this.getCalendar(calendarId);\r\n\t\t\t}\r\n\r\n\t\t\tif(calendar){\r\n\t\t\t\treturn calendar;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns calendar assigned to the specified resource.\r\n\t * Returns the global calendar if no custom calendar is associated with the resource.\r\n\t * @param {(string|number|Object)} resource - resource object or resource id\r\n\t * @returns {object} Calendar object\r\n\t */\r\n\tgetResourceCalendar: function(resource) {\r\n\t\tif (resource === null || resource === undefined) {\r\n\t\t\treturn this.getCalendar();\r\n\t\t}\r\n\r\n\t\tvar resourceId = null;\r\n\t\t// if task id is provided\r\n\t\tif((typeof resource === \"number\" || typeof resource === \"string\")){\r\n\t\t\tresourceId = resource;\r\n\t\t}else{\r\n\t\t\tresourceId = resource.id || resource.key;\r\n\t\t}\r\n\r\n\t\tvar config = this.$gantt.config;\r\n\t\tvar calendarsConfig = config.resource_calendars;\r\n\t\tvar calendarId = null;\r\n\r\n\t\t// GS-1714: if resource is specified through array\r\n\t\tif (Array.isArray(resource)){\r\n\t\t\tif (resource.length === 1){\r\n\t\t\t\tif (typeof resource[0] === 'object'){\r\n\t\t\t\t\tresourceId = resource[0].resource_id; // if resource: [\"resource_id: \"6\", value: \"4\", ...\"]\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresourceId = resource[0]; // if resource: [1]\r\n\t\t\t\t}\r\n\t\t\t} \r\n\t\t}\r\n\t\t\r\n\t\tif (calendarsConfig) {\r\n\t\t\tif(this._legacyConfig === undefined){\r\n\t\t\t\tthis._legacyConfig = legacyResourceCalendarConfig.isLegacyResourceCalendarFormat(config.resource_calendars);\r\n\t\t\t}\r\n\r\n\t\t\tif(this._legacyConfig){\r\n\t\t\t\tfor(var field in calendarsConfig){\r\n\t\t\t\t\tif(calendarsConfig[field][resourceId]){\r\n\t\t\t\t\t\tcalendarId = calendarsConfig[field][resourceId];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar calendarId = calendarsConfig[resourceId];\r\n\t\t\t}\r\n\r\n\t\t\tif(calendarId){\r\n\t\t\t\treturn this.getCalendar(calendarId);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn this.getCalendar();\r\n\t},\r\n\r\n\t/**\r\n\t * Returns the calendar assigned to a task.\r\n\t * - Returns a calendar assigned via task[gantt.config.calendar_property] if specified.\r\n\t * - Returns a calendar assigned to the task resource if specified.\r\n\t * - Returns the global calendar otherwise.\r\n\t * @param {(string|number|Object)} task - task object or task id\r\n\t * @returns {object} Calendar object\r\n\t */\r\n\tgetTaskCalendar: function (task) {\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar taskObject;\r\n\t\tif (task === null || task === undefined) {\r\n\t\t\treturn this.getCalendar();\r\n\t\t}\r\n\r\n\t\t// if task id is provided\r\n\t\tif((typeof task === \"number\" || typeof task === \"string\") && gantt.isTaskExists(task)){\r\n\t\t\ttaskObject = gantt.getTask(task);\r\n\t\t}else{\r\n\t\t\ttaskObject = task;\r\n\t\t}\r\n\r\n\t\tif(!taskObject){\r\n\t\t\treturn this.getCalendar();\r\n\t\t}\r\n\r\n\t\tvar calendar = this._getOwnCalendar(taskObject);\r\n\t\tvar groupMode = !!gantt.getState().group_mode;\r\n\r\n\t\tif (!calendar && gantt.config.inherit_calendar && gantt.isTaskExists(taskObject.parent)){\r\n\t\t\t// GS-1579  group mode overrides tree hierarchy, iterate using `.parent` property, instead of using eachParent iterator\r\n\t\t\tvar currentTask = taskObject;\r\n\t\t\twhile(gantt.isTaskExists(currentTask.parent)){\r\n\t\t\t\tcurrentTask = gantt.getTask(currentTask.parent);\r\n\t\t\t\tif(gantt.isSummaryTask(currentTask)){\r\n\t\t\t\t\tcalendar = this._getOwnCalendar(currentTask);\r\n\t\t\t\t\tif(calendar){\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(groupMode && !calendar){\r\n\t\t\t\t// if group mode and inherit_calendars is enabled - preserve previously applied parent calendar\r\n\t\t\t\t// we may need it when groupBy parses grouped data, old parent may be not loaded yet\r\n\t\t\t\tif(task.$effective_calendar){\r\n\t\t\t\t\tcalendar = this.getCalendar(task.$effective_calendar);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn calendar || this.getCalendar();\r\n\t},\r\n\r\n\taddCalendar: function(calendar) { // puts new calendar to Global Storage - gantt.calendarManager._calendars {}\r\n\t\tif (!(this.isCalendar(calendar))) {\r\n\t\t\tvar id = calendar.id;\r\n\t\t\tcalendar = this.createCalendar(calendar);\r\n\t\t\tcalendar.id = id;\r\n\t\t}\r\n\r\n\t\t// validate/check if empty calendar\r\n\t\tif (!calendar._tryChangeCalendarSettings(function () {\r\n\t\t\t})) {\r\n\r\n\t\t\tthis.$gantt.callEvent(\"onCalendarError\", [{message: \"Invalid calendar settings, no worktime available\"}, calendar]);\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\tvar config = this.$gantt.config;\r\n\r\n\t\t\tcalendar.id = calendar.id || utils.uid();\r\n\t\t\tthis._calendars[calendar.id] = calendar;\r\n\t\t\tif (!config.worktimes)\r\n\t\t\t\tconfig.worktimes = {};\r\n\t\t\tconfig.worktimes[calendar.id] = calendar.getConfig();\r\n\t\t\treturn calendar.id;\r\n\t\t}\r\n\t},\r\n\r\n\tdeleteCalendar: function (calendar) {\r\n\t\tvar config = this.$gantt.config;\r\n\t\tif (!calendar) return false;\r\n\t\tif (this._calendars[calendar]) {\r\n\t\t\tdelete this._calendars[calendar];\r\n\t\t\tif (config.worktimes && config.worktimes[calendar])\r\n\t\t\t\tdelete config.worktimes[calendar];\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n\r\n\trestoreConfigCalendars: function (configs) {\r\n\t\tfor (var i in configs) {\r\n\t\t\tif (this._calendars[i])\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar settings = configs[i];\r\n\t\t\tvar calendar = this.createCalendar(settings);\r\n\t\t\tcalendar.id = i;\r\n\t\t\tthis.addCalendar(calendar);\r\n\t\t}\r\n\t},\r\n\r\n\tdefaults: {\r\n\t\tglobal: {\r\n\t\t\tid: \"global\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [8, 12, 13, 17],\r\n\t\t\t\tdays: [0, 1, 1, 1, 1, 1, 0]\r\n\t\t\t}\r\n\t\t},\r\n\t\tfulltime: {\r\n\t\t\tid: \"fulltime\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [0, 24],\r\n\t\t\t\tdays: [1, 1, 1, 1, 1, 1, 1]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tcreateDefaultCalendars: function () {\r\n\t\tvar config = this.$gantt.config;\r\n\t\tthis.restoreConfigCalendars(this.defaults);\r\n\t\tthis.restoreConfigCalendars(config.worktimes);\r\n\t},\r\n\r\n\tisCalendar: function(possibleCalendar) {\r\n\t\t// because we don't have any way to check without dependency to CalendarWorkTimeStrategy\r\n\t\tvar props = [\r\n\t\t\tpossibleCalendar.isWorkTime,\r\n\t\t\tpossibleCalendar.setWorkTime,\r\n\t\t\tpossibleCalendar.getWorkHours,\r\n\t\t\tpossibleCalendar.unsetWorkTime,\r\n\t\t\tpossibleCalendar.getClosestWorkTime,\r\n\t\t\tpossibleCalendar.calculateDuration,\r\n\t\t\tpossibleCalendar.hasDuration,\r\n\t\t\tpossibleCalendar.calculateEndDate\r\n\t\t];\r\n\t\treturn props.every(function(entry) {\r\n\t\t\treturn entry instanceof Function;\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport default CalendarManager;","export default function() {\r\n\tfunction getResourcesCalendarKey(resourceAssignments){\r\n\t\treturn resourceAssignments.map(function(res){\r\n\t\t\tif(res && res.resource_id){\r\n\t\t\t\treturn res.resource_id;\r\n\t\t\t} else {\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t}).sort().join(\"-\");\r\n\t}\r\n\r\n\tvar dynamicCalendars = {};\r\n\r\n\tfunction mergeResourceCalendars(resourceAssignments, manager){\r\n\t\treturn manager.mergeCalendars(resourceAssignments.map(function(assignment){\r\n\t\t\tvar resourceId = (assignment && assignment.resource_id) ? assignment.resource_id : assignment;\r\n\t\t\treturn manager.getResourceCalendar(resourceId);\r\n\t\t}));\r\n\t}\r\n\tfunction getCalendarIdFromMultipleResources(resourceAssignments, manager){\r\n\t\tvar key = getResourcesCalendarKey(resourceAssignments);\r\n\t\tif(!resourceAssignments.length){\r\n\t\t\treturn null;\r\n\t\t}else if(resourceAssignments.length === 1){\r\n\t\t\treturn manager.getResourceCalendar(key).id;\r\n\t\t}else if (dynamicCalendars[key]){\r\n\t\t\treturn dynamicCalendars[key].id;\r\n\t\t} else {\r\n\t\t\tvar tempCalendar = mergeResourceCalendars(resourceAssignments, manager);\r\n\r\n\t\t\tdynamicCalendars[key] = tempCalendar;\r\n\t\t\treturn manager.addCalendar(tempCalendar);\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetCalendarIdFromMultipleResources: getCalendarIdFromMultipleResources\r\n\t};\r\n};","function CalendarDisabledTimeStrategy(gantt, argumentsHelper){\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n}\r\n\r\nCalendarDisabledTimeStrategy.prototype = {\r\n\tgetWorkHours: function () {\r\n\t\treturn [0, 24];\r\n\t},\r\n\tsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tunsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tisWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tvar config = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn config.date;\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this._calculateDuration(from, to, unit, step);\r\n\t},\r\n\t_calculateDuration: function (start, end, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar fixedUnits = {\r\n\t\t\t\"week\": 1000 * 60 * 60 * 24 * 7,\r\n\t\t\t\"day\": 1000 * 60 * 60 * 24,\r\n\t\t\t\"hour\": 1000 * 60 * 60,\r\n\t\t\t\"minute\": 1000 * 60\r\n\t\t};\r\n\r\n\t\tvar res = 0;\r\n\t\tif (fixedUnits[unit]) {\r\n\t\t\tres = Math.round((end - start) / (step * fixedUnits[unit]));\r\n\t\t} else {\r\n\t\t\tvar from = new Date(start),\r\n\t\t\t\tto = new Date(end);\r\n\t\t\twhile (from.valueOf() < to.valueOf()) {\r\n\t\t\t\tres += 1;\r\n\t\t\t\tfrom = dateHelper.add(from, step, unit);\r\n\t\t\t}\r\n\r\n\t\t\tif (from.valueOf() != end.valueOf()) {\r\n\t\t\t\tres += (to - from) / (dateHelper.add(from, step, unit) - from);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Math.round(res);\r\n\t},\r\n\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tfrom = new Date(from);\r\n\t\tto = new Date(to);\r\n\r\n\t\treturn (from.valueOf() < to.valueOf());\r\n\t},\r\n\r\n\thasWorkTime: function() {\r\n\t\treturn true;\r\n\t},\r\n\r\n\tequals: function(calendar) {\r\n\t\tif(!(calendar instanceof CalendarDisabledTimeStrategy)){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar start = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this.$gantt.date.add(start, step * duration, unit);\r\n\t}\r\n};\r\n\r\nexport default CalendarDisabledTimeStrategy;","import createArgumentsHelper from \"./calendar_arguments_helper\";\r\nimport NoWorkTimeCalendar from \"./strategy/no_work_time\";\r\n\r\nfunction TimeCalculator(calendarManager){\r\n\r\n\tthis.$gantt = calendarManager.$gantt;\r\n\tthis.argumentsHelper = createArgumentsHelper(this.$gantt);\r\n\tthis.calendarManager = calendarManager;\r\n\tthis.$disabledCalendar = new NoWorkTimeCalendar(this.$gantt, this.argumentsHelper);\r\n}\r\n\r\nTimeCalculator.prototype = {\r\n\t_getCalendar: function (config) {\r\n\t\tvar calendar;\r\n\t\tif (!this.$gantt.config.work_time) {\r\n\t\t\tcalendar = this.$disabledCalendar;\r\n\t\t} else {\r\n\t\t\tvar manager = this.calendarManager;\r\n\t\t\tif (config.task) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config.task);\r\n\t\t\t} else if (config.id) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config);\r\n\t\t\t} else if (config.calendar) {\r\n\t\t\t\tcalendar = config.calendar;\r\n\t\t\t}\r\n\t\t\tif (!calendar) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn calendar;\r\n\t},\r\n\r\n\tgetWorkHours: function (config) {\r\n\t\tconfig = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getWorkHours(config.date);\r\n\t},\r\n\r\n\tsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.setWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.setWorkTime(config);\r\n\t},\r\n\r\n\tunsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.unsetWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.unsetWorkTime(config);\r\n\t},\r\n\tisWorkTime: function (date, unit, task, calendar) {\r\n\t\tvar config = this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tcalendar = this._getCalendar(config);\r\n\t\treturn calendar.isWorkTime(config);\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tconfig = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getClosestWorkTime(config);\r\n\t},\r\n\r\n\tcalculateDuration: function () { // start_date_date, end_date, task\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateDuration(config);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.hasDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.hasDuration(config);\r\n\t},\r\n\tcalculateEndDate: function (config) { // start_date, duration, unit, task\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateEndDate(config);\r\n\t}\r\n};\r\n\r\nexport default TimeCalculator;\r\n\r\n","// TODO: rework public api for date methods\r\nimport * as utils from \"../../utils/utils\";\r\n\r\nvar createWorkTimeFacade = function(calendarManager, timeCalculator){\r\n\treturn {\r\n\t\tgetWorkHours: function (date) {\r\n\t\t\treturn timeCalculator.getWorkHours(date);\r\n\t\t},\r\n\r\n\t\tsetWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.setWorkTime(config);\r\n\t\t},\r\n\r\n\t\tunsetWorkTime: function (config) {\r\n\t\t\ttimeCalculator.unsetWorkTime(config);\r\n\t\t},\r\n\r\n\t\tisWorkTime: function (date, unit, task) {\r\n\t\t\treturn timeCalculator.isWorkTime(date, unit, task);\r\n\t\t},\r\n\r\n\t\tgetClosestWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.getClosestWorkTime(config);\r\n\t\t},\r\n\r\n\t\tcalculateDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.calculateDuration(start_date, end_date, task);\r\n\t\t},\r\n\t\t_hasDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.hasDuration(start_date, end_date, task);\r\n\t\t},\r\n\r\n\t\tcalculateEndDate: function (start, duration, unit, task) {\r\n\t\t\treturn timeCalculator.calculateEndDate(start, duration, unit, task);\r\n\t\t},\r\n\r\n\t\tmergeCalendars: utils.bind(calendarManager.mergeCalendars, calendarManager),\r\n\t\tcreateCalendar: utils.bind(calendarManager.createCalendar, calendarManager),\r\n\t\taddCalendar: utils.bind(calendarManager.addCalendar, calendarManager),\r\n\t\tgetCalendar: utils.bind(calendarManager.getCalendar, calendarManager),\r\n\t\tgetCalendars: utils.bind(calendarManager.getCalendars, calendarManager),\r\n\t\tgetResourceCalendar: utils.bind(calendarManager.getResourceCalendar, calendarManager),\r\n\t\tgetTaskCalendar: utils.bind(calendarManager.getTaskCalendar, calendarManager),\r\n\t\tdeleteCalendar: utils.bind(calendarManager.deleteCalendar, calendarManager)\r\n\t};\r\n};\r\n\r\n\r\nexport default { create: createWorkTimeFacade };","import * as helpers from \"../utils/helpers\";\r\n\r\nexport default function(gantt) {\r\n\r\n\tgantt.isUnscheduledTask = function (task) {\r\n\t\tgantt.assert(task && task instanceof Object, \"Invalid argument <b>task</b>=\"+task+\" of gantt.isUnscheduledTask. Task object was expected\");\r\n\t\treturn (!!task.unscheduled || !task.start_date);\r\n\t};\r\n\r\n\tgantt._isAllowedUnscheduledTask = function (task) {\r\n\t\treturn !!(task.unscheduled && gantt.config.show_unscheduled);\r\n\t};\r\n\r\n\tgantt._isTaskInTimelineLimits = function(task) {\r\n\t\tvar taskStart = task.start_date ? task.start_date.valueOf() : null;\r\n\t\tvar taskEnd = task.end_date ? task.end_date.valueOf() : null;\r\n\t\treturn !!(taskStart && taskEnd && taskStart <= this._max_date.valueOf() && taskEnd >= this._min_date.valueOf());\r\n\t};\r\n\tgantt.isTaskVisible = function (id) {\r\n\t\tif (!this.isTaskExists(id)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar task = this.getTask(id);\r\n\t\tif (!(this._isAllowedUnscheduledTask(task) || this._isTaskInTimelineLimits(task))) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn !!(this.getGlobalTaskIndex(id) >= 0);\r\n\t};\r\n\r\n\tgantt._getProjectEnd = function() {\r\n\t\tif(gantt.config.project_end){\r\n\t\t\treturn gantt.config.project_end;\r\n\t\t}else{\r\n\t\t\tvar tasks = gantt.getTaskByTime();\r\n\t\t\ttasks = tasks.sort(function (a, b) {\r\n\t\t\t\treturn +a.end_date > +b.end_date ? 1 : -1;\r\n\t\t\t});\r\n\t\t\treturn tasks.length ? tasks[tasks.length - 1].end_date : null;\r\n\t\t}\r\n\t};\r\n\tgantt._getProjectStart = function() {\r\n\t\tif (gantt.config.project_start) {\r\n\t\t\treturn gantt.config.project_start;\r\n\t\t}\r\n\r\n\t\t// use timeline start if project start is not specified\r\n\t\tif (gantt.config.start_date) {\r\n\t\t\treturn gantt.config.start_date;\r\n\t\t}\r\n\t\tif (gantt.getState().min_date) {\r\n\t\t\treturn gantt.getState().min_date;\r\n\t\t}\r\n\r\n\t\t// earliest task start if neither project start nor timeline are specified\r\n\t\tvar tasks = gantt.getTaskByTime();\r\n\t\ttasks = tasks.sort(function (a, b) {\r\n\t\t\treturn +a.start_date > +b.start_date ? 1 : -1;\r\n\t\t});\r\n\t\treturn tasks.length ? tasks[0].start_date : null;\r\n\t};\r\n\r\n\tvar getDefaultTaskDate = function (item, parent_id) {\r\n\t\tvar parentExists = parent_id && parent_id != gantt.config.root_id && gantt.isTaskExists(parent_id);\r\n\t\tvar parent = parentExists ? gantt.getTask(parent_id) : false,\r\n\t\t\tstartDate = null;\r\n\t\tif (parent) {\r\n\t\t\tif(gantt.config.schedule_from_end){\r\n\t\t\t\tstartDate = gantt.calculateEndDate({\r\n\t\t\t\t\tstart_date: parent.end_date,\r\n\t\t\t\t\tduration: - gantt.config.duration_step,\r\n\t\t\t\t\ttask:item\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tif(!parent.start_date){\r\n\t\t\t\t\treturn getDefaultTaskDate(parent, gantt.getParent(parent));\r\n\t\t\t\t}\r\n\t\t\t\tstartDate = parent.start_date;\r\n\t\t\t}\r\n\r\n\t\t} else if(gantt.config.schedule_from_end) {\r\n\t\t\tstartDate = gantt.calculateEndDate({\r\n\t\t\t\tstart_date: gantt._getProjectEnd(),\r\n\t\t\t\tduration: - gantt.config.duration_step,\r\n\t\t\t\ttask:item\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tconst first = gantt.getTaskByIndex(0);\r\n\t\t\tconst minDate = gantt.config.start_date || gantt.getState().min_date;\r\n\r\n\t\t\tif (first){\r\n\t\t\t\tif (first.start_date){\r\n\t\t\t\t\tstartDate = first.start_date;\r\n\t\t\t\t}\r\n\t\t\t\telse if (first.end_date){\r\n\t\t\t\t\tstartDate = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: first.end_date,\r\n\t\t\t\t\t\tduration: -gantt.config.duration_step,\r\n\t\t\t\t\t\ttask:item\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tstartDate = minDate;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tstartDate = minDate;\r\n\t\t\t}\r\n\t\t}\r\n\t\tgantt.assert(startDate, \"Invalid dates\");\r\n\t\treturn new Date(startDate);\r\n\t};\r\n\r\n\tgantt._set_default_task_timing = function (task) {\r\n\t\ttask.start_date = task.start_date || getDefaultTaskDate(task, gantt.getParent(task));\r\n\t\ttask.duration = task.duration || gantt.config.duration_step;\r\n\t\ttask.end_date = task.end_date || gantt.calculateEndDate(task);\r\n\t};\r\n\r\n\tgantt.createTask = function (item, parent, index) {\r\n\t\titem = item || {};\r\n\r\n\t\tif (!gantt.defined(item.id))\r\n\t\t\titem.id = gantt.uid();\r\n\r\n\t\tif (!item.start_date) {\r\n\t\t\titem.start_date = getDefaultTaskDate(item, parent);\r\n\t\t}\r\n\t\tif (item.text === undefined) {\r\n\t\t\titem.text = gantt.locale.labels.new_task;\r\n\t\t}\r\n\t\tif (item.duration === undefined) {\r\n\t\t\titem.duration = 1;\r\n\t\t}\r\n\r\n\t\tif (this.isTaskExists(parent)) {\r\n\t\t\tthis.setParent(item, parent, true);\r\n\t\t\tvar parentObj = this.getTask(parent);\r\n\t\t\tparentObj.$open = true;\r\n\t\t\t// GS-1583. Save the $open state to the Undo Stack\r\n\t\t\tif (!this.config.details_on_create){\r\n\t\t\t\tthis.callEvent(\"onAfterParentExpand\", [parent, parentObj]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!this.callEvent(\"onTaskCreated\", [item])) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (this.config.details_on_create) {\r\n\t\t\t//GS-761: assert unique ID\r\n\t\t\tif (gantt.isTaskExists(item.id)){\r\n\t\t\t\tvar task = gantt.getTask(item.id);\r\n\t\t\t\tif (task.$index != item.$index) {\r\n\t\t\t\t\t// Someone may try to mistakenly add a task with the same ID, and most likely\r\n\t\t\t\t\t// use the string format for the dates. Gantt shouldn't break in this scenario\r\n\t\t\t\t\tif (item.start_date && typeof item.start_date === \"string\"){\r\n\t\t\t\t\t\titem.start_date = this.date.parseDate(item.start_date, \"parse_date\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (item.end_date && typeof item.end_date === \"string\"){\r\n\t\t\t\t\t\titem.end_date = this.date.parseDate(item.end_date, \"parse_date\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$data.tasksStore.updateItem(item.id, item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\titem.$new = true;\r\n\t\t\t\tthis.silent(function(){\r\n\t\t\t\t\tgantt.$data.tasksStore.addItem(item, index);\r\n\t\t\t\t});\t\r\n\t\t\t}\r\n\t\t\tthis.selectTask(item.id);\r\n\t\t\tthis.refreshData();\r\n\t\t\tthis.showLightbox(item.id);\r\n\t\t} else {\r\n\t\t\tif (this.addTask(item, parent, index)) {\r\n\t\t\t\tthis.showTask(item.id);\r\n\t\t\t\tthis.selectTask(item.id);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn item.id;\r\n\t};\r\n\r\n\tgantt._update_flags = function (oldid, newid) {\r\n\t\t//  TODO: need a proper way to update all possible flags\r\n\t\tvar store = gantt.$data.tasksStore;\r\n\t\tif (oldid === undefined) {\r\n\t\t\tthis._lightbox_id = null;\r\n\r\n\t\t\tstore.silent(function(){\r\n\t\t\t\tstore.unselect();\r\n\t\t\t});\r\n\t\t\t// GS-1522. If we have multiselect, unselect all previously selected tasks\r\n\t\t\tif (this.getSelectedTasks) {\r\n\t\t\t\tthis._multiselect.reset();\r\n\t\t\t}\r\n\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = null;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this._lightbox_id == oldid)\r\n\t\t\t\tthis._lightbox_id = newid;\r\n\r\n\t\t\t// TODO: probably can be removed\r\n\t\t\tif (store.getSelectedId() == oldid) {\r\n\t\t\t\tstore.silent(function(){\r\n\t\t\t\t\tstore.unselect(oldid);\r\n\t\t\t\t\tstore.select(newid);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag && this._tasks_dnd.drag.id == oldid) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar getTaskTimingMode = function (task, force) {\r\n\t\tvar task_type = gantt.getTaskType(task.type);\r\n\r\n\t\tvar state = {\r\n\t\t\ttype: task_type,\r\n\t\t\t$no_start: false,\r\n\t\t\t$no_end: false,\r\n\t\t\tscheduled_summary: false\r\n\t\t};\r\n\r\n\t\tif(task_type === gantt.config.types.project && task.auto_scheduling === false){\r\n\t\t\tstate.scheduled_summary = true;\r\n\t\t}\r\n\r\n\t\tif (!force && task_type == task.$rendered_type) {\r\n\t\t\tstate.$no_start = task.$no_start;\r\n\t\t\tstate.$no_end = task.$no_end;\r\n\t\t\treturn state;\r\n\t\t}\r\n\r\n\t\tif (task_type == gantt.config.types.project) {\r\n\t\t\t//project duration is always defined by children duration\r\n\t\t\tstate.$no_end = state.$no_start = true;\r\n\t\t} else if (task_type != gantt.config.types.milestone) {\r\n\t\t\t//tasks can have fixed duration, children duration(as projects), or one date fixed, and other defined by nested items\r\n\t\t\tstate.$no_end = !(task.end_date || task.duration);\r\n\t\t\tstate.$no_start = !task.start_date;\r\n\r\n\t\t\tif (gantt._isAllowedUnscheduledTask(task)) {\r\n\t\t\t\tstate.$no_end = state.$no_start = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn state;\r\n\t};\r\n\r\n\tgantt._init_task_timing = function (task) {\r\n\t\tvar task_mode = getTaskTimingMode(task, true);\r\n\r\n\t\tvar dirty = task.$rendered_type != task_mode.type;\r\n\r\n\t\tvar task_type = task_mode.type;\r\n\r\n\t\tif (dirty) {\r\n\t\t\ttask.$no_start = task_mode.$no_start;\r\n\t\t\ttask.$no_end = task_mode.$no_end;\r\n\t\t\ttask.$rendered_type = task_mode.type;\r\n\t\t}\r\n\r\n\t\tif (dirty && task_type != this.config.types.milestone) {\r\n\t\t\tif (task_type == this.config.types.project) {\r\n\t\t\t\t//project duration is always defined by children duration\r\n\t\t\t\tthis._set_default_task_timing(task);\r\n\t\t\t\ttask.$calculate_duration = false;// do not recalculate duration below\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (task_type == this.config.types.milestone) {\r\n\t\t\ttask.end_date = task.start_date;\r\n\t\t}\r\n\t\tif (task.start_date && task.end_date && task.$calculate_duration !== false) {\r\n\t\t\ttask.duration = this.calculateDuration(task);\r\n\t\t}\r\n\r\n\t\tif(!task.$calculate_duration){\r\n\t\t\ttask.$calculate_duration = true;\r\n\t\t}\r\n\r\n\t\tif (!task.end_date) {\r\n\t\t\ttask.end_date = task.start_date;\r\n\t\t}\r\n\r\n\t\ttask.duration = task.duration || 0;\r\n\t\t// GS-1145. We should let tasks to have 0 duration if user wants it\r\n\t\tif (this.config.min_duration === 0 && task.duration === 0){\r\n\t\t\ttask.$no_end = false;\r\n\t\t\t//GS-2813: special case for project that has 0 duration with milestone child\r\n\t\t\tif(task.type === gantt.config.types.project && gantt.hasChild(task.id)){\r\n\t\t\t\ttask.$no_end = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// work calendar of task has changed\r\n\t\tvar effectiveCalendar = this.getTaskCalendar(task);\r\n\t\tif(task.$effective_calendar && task.$effective_calendar !== effectiveCalendar.id){\r\n\t\t\tupdateTaskTiming(task);\r\n\t\t\tif(this.config.inherit_calendar && this.isSummaryTask(task)){\r\n\t\t\t\tthis.eachTask(function(child){\r\n\t\t\t\t\tupdateTaskTiming(child);\r\n\t\t\t\t}, task.id);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttask.$effective_calendar = effectiveCalendar.id;\r\n\t};\r\n\r\n\tfunction updateTaskTiming(task) {\r\n\t\ttask.$effective_calendar = gantt.getTaskCalendar(task).id;\r\n\t\ttask.start_date = gantt.getClosestWorkTime({\r\n\t\t\tdir: \"future\",\r\n\t\t\tdate: task.start_date,\r\n\t\t\tunit: gantt.config.duration_unit,\r\n\t\t\ttask: task\r\n\t\t});\r\n\t\ttask.end_date = gantt.calculateEndDate(task);\r\n\t}\r\n\r\n\tgantt.isSummaryTask = function (task) {\r\n\t\tgantt.assert(task && task instanceof Object, \"Invalid argument <b>task</b>=\"+task+\" of gantt.isSummaryTask. Task object was expected\");\r\n\r\n\t\tvar mode = getTaskTimingMode(task);\r\n\r\n\t\treturn !!(mode.$no_end || mode.$no_start);\r\n\t};\r\n\r\n// downward calculation of project duration\r\n\tgantt.resetProjectDates = function (task) {\r\n\t\tvar taskMode = getTaskTimingMode(task);\r\n\t\tif (taskMode.$no_end || taskMode.$no_start) {\r\n\t\t\tvar info = getSubtaskInfo(task.id);\r\n\t\t\tassignProjectDates.call(this, task, taskMode, info.start_date, info.end_date);\r\n\t\t\ttask.$rollup = info.rollup;\r\n\t\t}\r\n\t};\r\n\r\n\tfunction assignProjectDates(task, taskTiming, from, to) {\r\n\r\n\t\tconst summaryDateFields = {\r\n\t\t\tstart: \"start_date\",\r\n\t\t\tend: \"end_date\"\r\n\t\t};\r\n\t\tconst manuallyScheduledSummaryDateFields = {\r\n\t\t\tstart: \"$auto_start_date\",\r\n\t\t\tend: \"$auto_end_date\"\r\n\t\t};\r\n\r\n\t\tlet dateFields;\r\n\t\tif(task.type === gantt.config.types.project && task.auto_scheduling === false){\r\n\t\t\tdateFields = manuallyScheduledSummaryDateFields;\r\n\t\t}else{\r\n\t\t\tdateFields = summaryDateFields;\r\n\t\t}\r\n\r\n\t\tif (taskTiming.$no_start) {\r\n\t\t\tif (from) {\r\n\t\t\t\ttask[dateFields.start] = new Date(from);\r\n\t\t\t} else {\r\n\t\t\t\ttask[dateFields.start] = getDefaultTaskDate(task, this.getParent(task));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (taskTiming.$no_end) {\r\n\t\t\tif (to) {\r\n\t\t\t\ttask[dateFields.end] = new Date(to);\r\n\t\t\t} else {\r\n\t\t\t\ttask[dateFields.end] = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task[dateFields.start],\r\n\t\t\t\t\tduration: this.config.duration_step,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (taskTiming.$no_start || taskTiming.$no_end) {\r\n\t\t\tthis._init_task_timing(task);\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.getSubtaskDuration = function (taskId) {\r\n\t\tvar res = 0,\r\n\t\t\troot = taskId !== undefined ? taskId : gantt.config.root_id;\r\n\r\n\t\tthis.eachTask(function (child) {\r\n\t\t\tif (this.getTaskType(child.type) == gantt.config.types.project || this.isUnscheduledTask(child))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tres += child.duration;\r\n\t\t}, root);\r\n\r\n\t\treturn res;\r\n\t};\r\n\r\n\tfunction getSubtaskInfo (taskId){\r\n\t\tvar min = null,\r\n\t\t\tmax = null,\r\n\t\t\troot = taskId !== undefined ? taskId : gantt.config.root_id,\r\n\t\t\trollup = [];\r\n\r\n\t\tgantt.eachTask(function (child) {\r\n\t\t\tconst isScheduledSummary = (gantt.getTaskType(child.type) == gantt.config.types.project && (child.auto_scheduling === false));\r\n\t\t\tif ((gantt.getTaskType(child.type) == gantt.config.types.project && !isScheduledSummary) || gantt.isUnscheduledTask(child))\r\n\t\t\t\treturn;\r\n\t\t\t\r\n\t\t\tif(child.rollup){\r\n\t\t\t\trollup.push(child.id);\r\n\t\t\t}\r\n\r\n\t\t\tif ((child.start_date && (!child.$no_start || isScheduledSummary)) && (!min || min > child.start_date.valueOf()))\r\n\t\t\t\tmin = child.start_date.valueOf();\r\n\t\t\tif ((child.end_date && (!child.$no_end || isScheduledSummary)) && (!max || max < child.end_date.valueOf()))\r\n\t\t\t\tmax = child.end_date.valueOf();\r\n\t\t}, root);\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: min ? new Date(min) : null,\r\n\t\t\tend_date: max ? new Date(max) : null,\r\n\t\t\trollup: rollup\r\n\t\t};\r\n\t}\r\n\r\n\tgantt.getSubtaskDates = function (task_id) {\r\n\t\tvar info = getSubtaskInfo(task_id);\r\n\t\treturn {\r\n\t\t\tstart_date: info.start_date,\r\n\t\t\tend_date: info.end_date\r\n\t\t};\r\n\t};\r\n\r\n\r\n// upward calculation of project duration\r\n\tgantt._update_parents = function (taskId, silent, updateAll) {\r\n\t\tif (!taskId) return;\r\n\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tif(task.rollup){\r\n\t\t\tupdateAll = true;\r\n\t\t}\r\n\t\tvar pid = this.getParent(task);\r\n\r\n\t\tvar taskTiming = getTaskTimingMode(task);\r\n\r\n\t\tvar has_changed = true;\r\n\t\t// GS-761 the dates check is necessary for adding empty tasks: gantt.addTask({id:\"2\"})\r\n\t\tif (updateAll || (task.start_date && task.end_date && (taskTiming.$no_start || taskTiming.$no_end))) {\r\n\r\n\t\t\tconst startDateField = task.$auto_start_date ? \"$auto_start_date\" : \"start_date\";\r\n\t\t\tconst endDateField = task.$auto_end_date ? \"$auto_end_date\" : \"end_date\";\r\n\r\n\t\t\tvar oldStart = task[startDateField].valueOf(),\r\n\t\t\t\toldEnd = task[endDateField].valueOf();\r\n\r\n\t\t\tgantt.resetProjectDates(task);\r\n\r\n\t\t\t// not refresh parent projects if dates hasn't changed\r\n\t\t\tif (!updateAll && oldStart == task[startDateField].valueOf() && oldEnd == task[endDateField].valueOf()) {\r\n\t\t\t\thas_changed = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (has_changed && !silent) {\r\n\t\t\t\tthis.refreshTask(task.id, true);\r\n\t\t\t}\r\n\r\n\t\t\tif(taskTiming.scheduled_summary){\r\n\t\t\t\thas_changed = true;//recalculate upwards from scheduled summaries\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (has_changed && pid && this.isTaskExists(pid)) {\r\n\t\t\tthis._update_parents(pid, silent, updateAll);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.roundDate = function (config) {\r\n\t\tvar scale = gantt.getScale();\r\n\r\n\t\tif (helpers.isDate(config)) {\r\n\t\t\tconfig = {\r\n\t\t\t\tdate: config,\r\n\t\t\t\tunit: scale ? scale.unit : gantt.config.duration_unit,\r\n\t\t\t\tstep: scale ?  scale.step : gantt.config.duration_step\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar date = config.date,\r\n\t\t\tsteps = config.step,\r\n\t\t\tunit = config.unit;\r\n\r\n\t\tif(!scale){\r\n\t\t\treturn date;\r\n\t\t}\r\n\r\n\t\tvar upper, lower, colIndex;\r\n\t\tif (unit == scale.unit && steps == scale.step &&\r\n\t\t\t+date >= +scale.min_date && +date <= +scale.max_date) {\r\n\t\t\t//find date in time scale config\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tif (!scale.trace_x[colIndex]) {\r\n\t\t\t\tcolIndex -= 1;// end of time scale\r\n\t\t\t\tif(scale.rtl){\r\n\t\t\t\t\tcolIndex = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlower = new Date(scale.trace_x[colIndex]);\r\n\t\t\tupper = gantt.date.add(lower, steps, unit);\r\n\t\t} else {\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tupper = gantt.date[unit + \"_start\"](new Date(scale.min_date));\r\n\t\t\tif (scale.trace_x[colIndex]) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](scale.trace_x[colIndex]);// end of time scale\r\n\t\t\t}\r\n\r\n\t\t\twhile (+upper < +date) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](gantt.date.add(upper, steps, unit));\r\n\r\n\t\t\t\tvar tzOffset = upper.getTimezoneOffset();\r\n\r\n\t\t\t\tupper = gantt._correct_dst_change(upper, tzOffset, upper, unit);\r\n\t\t\t\tif (gantt.date[unit + '_start'])\r\n\t\t\t\t\tupper = gantt.date[unit + '_start'](upper);\r\n\t\t\t}\r\n\r\n\t\t\tlower = gantt.date.add(upper, -1 * steps, unit);\r\n\r\n\t\t}\r\n\t\tif (config.dir && config.dir == 'future')\r\n\t\t\treturn upper;\r\n\t\tif (config.dir && config.dir == 'past')\r\n\t\t\treturn lower;\r\n\r\n\t\tif (Math.abs(date - lower) < Math.abs(upper - date)) {\r\n\t\t\treturn lower;\r\n\t\t} else {\r\n\t\t\treturn upper;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tgantt.correctTaskWorkTime = function (task) {\r\n\t\tif (gantt.config.work_time && gantt.config.correct_work_time) {\r\n\t\t\tif (!this.isWorkTime(task.start_date, undefined, task)) {\r\n\t\t\t\ttask.start_date = this.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!this.isWorkTime(new Date(+task.end_date - 1), undefined, task)) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskUpdate\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\tgantt.attachEvent(\"onBeforeTaskAdd\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onAfterTaskMove\", function (id, parent, tindex) {\r\n\t\tgantt._init_task_timing(gantt.getTask(id));\r\n\t\treturn true;\r\n\t});\r\n\r\n};","function addResizeListener(gantt){\r\n\tvar containerStyles = window.getComputedStyle(gantt.$root);\r\n\tif(containerStyles.getPropertyValue(\"position\") == \"static\"){\r\n\t\tgantt.$root.style.position = \"relative\";\r\n\t}\r\n\r\n\tvar resizeWatcher = document.createElement('iframe');\r\n\tresizeWatcher.className = \"gantt_container_resize_watcher\";\r\n\tresizeWatcher.tabIndex = -1;\r\n\tif(gantt.config.wai_aria_attributes){\r\n\t\tresizeWatcher.setAttribute(\"role\", \"none\");\r\n\t\tresizeWatcher.setAttribute(\"aria-hidden\", true);\r\n\t}\r\n\r\n\tif (gantt.env.isSalesforce){\r\n\t\tgantt.config.container_resize_method = \"timeout\";\r\n\t}\r\n\r\n\t// in some environments (namely, in SalesForce) iframe.contentWindow is not available\r\n\tgantt.$root.appendChild(resizeWatcher);\r\n\tif (resizeWatcher.contentWindow) {\r\n\t\tlistenWindowResize(gantt, resizeWatcher.contentWindow);\r\n\t} else {\r\n\t\t// if so - ditch the iframe and fallback to listening the main window resize\r\n\t\tgantt.$root.removeChild(resizeWatcher);\r\n\t\tlistenWindowResize(gantt, window);\r\n\t}\r\n}\r\n\r\nfunction listenWindowResize(gantt, window){\r\n\tvar resizeTimeout = gantt.config.container_resize_timeout || 20;\r\n\tvar resizeDelay;\r\n\tlet previousSize = getContainerSize(gantt);\r\n\r\n\tif (gantt.config.container_resize_method == \"timeout\"){\r\n\t\tlowlevelResizeWatcher();\r\n\t}\r\n\telse {\r\n\t\ttry {\r\n\t\t\tgantt.event(window, \"resize\", function () {\r\n\t\t\t\tif (gantt.$scrollbarRepaint) {\r\n\t\t\t\t\tgantt.$scrollbarRepaint = null;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// GS-2140. Don't repaint Gantt if it has the same sizes\r\n\t\t\t\t\tlet currentSize = getContainerSize(gantt);\r\n\t\t\t\t\tif (previousSize.x == currentSize.x && previousSize.y == currentSize.y){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpreviousSize = currentSize;\r\n\t\t\t\t\trepaintGantt();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tlowlevelResizeWatcher();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction repaintGantt(){\r\n\t\tclearTimeout(resizeDelay);\r\n\t\tresizeDelay = setTimeout(function(){\r\n\t\t\tif(!gantt.$destroyed){\r\n\t\t\t\tgantt.render();\r\n\t\t\t}\r\n\t\t}, resizeTimeout);\r\n\t}\r\n\r\n\tvar previousHeight = gantt.$root.offsetHeight;\r\n\tvar previousWidth = gantt.$root.offsetWidth;\t\r\n\r\n\tfunction lowlevelResizeWatcher(){\r\n\t\tif (gantt.$root.offsetHeight != previousHeight ||\r\n\t\t\t\tgantt.$root.offsetWidth != previousWidth){\r\n\t\t\t\trepaintGantt();\r\n\t\t}\r\n\r\n\t\tpreviousHeight = gantt.$root.offsetHeight;\r\n\t\tpreviousWidth = gantt.$root.offsetWidth;\r\n\r\n\t\tsetTimeout(lowlevelResizeWatcher, resizeTimeout);\r\n\t}\r\n}\r\n\r\nfunction getContainerSize(gantt){\r\n\treturn {\r\n\t\tx: gantt.$root.offsetWidth,\r\n\t\ty: gantt.$root.offsetHeight\r\n\t};\r\n}\r\n\r\nexport default addResizeListener;","import * as domHelpers from \"./ui/utils/dom_helpers\";\r\nimport * as helpers from \"../utils/helpers\";\r\nimport isHeadless from \"../utils/is_headless\";\r\nimport addResizeListener from \"./ui/resize_listener\";\r\nimport calculateScaleRange from \"./gantt_data_range\";\r\nimport assert from \"./common/assert\";\r\n\r\nexport default function(gantt){\r\n\t\r\n\r\n\tgantt.assert = assert(gantt);\r\n\r\n\tfunction isHTMLElement(node){\r\n\t\ttry {\r\n\t\t\tnode.cloneNode(false);\r\n\t\t}\r\n\t\tcatch (e){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\tvar invalidContainerMessage = \"Invalid value of the first argument of `gantt.init`. Supported values: HTMLElement, String (element id).\" +\r\n\t\"This error means that either invalid object is passed into `gantt.init` or that the element with the specified ID doesn't exist on the page when `gantt.init` is called.\";\r\n\r\n\tfunction validateNode(node){\r\n\t\tif (!node || (typeof node == 'string' && document.getElementById(node))) return true;\r\n\t\tif (isHTMLElement(node)) return true;\r\n\r\n\t\tgantt.assert(false, invalidContainerMessage);\r\n\t\tthrow new Error(invalidContainerMessage);\r\n\t}\r\n\r\n//initial initialization\r\n\tgantt.init = function(node, from, to){\r\n\t\tif (gantt.env.isNode) { \r\n\t\t\tnode = null; // for the nodejs version\r\n\t\t} else {\r\n\t\t\tvalidateNode(node); // for the web version\r\n\t\t}\r\n\r\n\t\tif(from && to){\r\n\t\t\tthis.config.start_date = this._min_date = new Date(from);\r\n\t\t\tthis.config.end_date = this._max_date = new Date(to);\r\n\t\t}\r\n\t\tthis.date.init();\r\n\r\n\t\t//can be called only once\r\n\t\tthis.init = function(node){\r\n\t\t\tif (gantt.env.isNode) { \r\n\t\t\t\tnode = null; // for the nodejs version\r\n\t\t\t} else {\r\n\t\t\t\tvalidateNode(node); // for the web version\r\n\t\t\t}\r\n\r\n\t\t\tif (this.$container && this.$container.parentNode){\r\n\t\t\t\tthis.$container.parentNode.removeChild(this.$container);\r\n\t\t\t\tthis.$container = null;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.$layout){\r\n\t\t\t\tthis.$layout.clear();\r\n\t\t\t}\r\n\t\t\tthis._reinit(node);\r\n\t\t};\r\n\t\tthis._reinit(node);\r\n\t};\r\n\r\n\tgantt._quickRefresh = function(code){\r\n\t\tvar stores = this._getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i]._quick_refresh = true;\r\n\t\t}\r\n\r\n\t\tcode();\r\n\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i]._quick_refresh = false;\r\n\t\t}\r\n\t};\r\n\r\n\tvar dropLayout = (function dropLayout(){\r\n\t\tif(this._clearTaskLayers){\r\n\t\t\tthis._clearTaskLayers();\r\n\t\t}\r\n\r\n\t\tif(this._clearLinkLayers){\r\n\t\t\tthis._clearLinkLayers();\r\n\t\t}\r\n\r\n\t\tif(this.$layout){\r\n\t\t\tthis.$layout.destructor();\r\n\t\t\tthis.$layout = null;\r\n\t\t\tthis.$ui.reset();\r\n\t\t}\r\n\t}).bind(gantt);\r\n\r\n\tvar rebuildLayout = (function rebuildLayout(){\r\n\t\tif(isHeadless(gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.$root.innerHTML = \"\";\r\n\r\n\t\tthis.$root.gantt = this;\r\n\t\tcalculateScaleRange(this);\r\n\t\tthis.config.layout.id = \"main\";\r\n\t\tthis.$layout = this.$ui.createView(\"layout\", this.$root, this.config.layout);\r\n\r\n\t\tthis.$layout.attachEvent(\"onBeforeResize\", function(){\r\n\t\t\tvar storeNames = gantt.$services.getService(\"datastores\");\r\n\t\t\tfor(var i = 0; i < storeNames.length; i++){\r\n\t\t\t\tgantt.getDatastore(storeNames[i]).filter();\r\n\t\t\t\tif (gantt.$data.tasksStore._skipTaskRecalculation){\r\n\t\t\t\t\t// do not repaint items, they will be repainted later in the onStoreUpdate event\r\n\t\t\t\t\tif (gantt.$data.tasksStore._skipTaskRecalculation != \"lightbox\"){\r\n\t\t\t\t\t\tgantt.$data.tasksStore._skipTaskRecalculation = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgantt.getDatastore(storeNames[i]).callEvent(\"onBeforeRefreshAll\", []);\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.$layout.attachEvent(\"onResize\", function(){\r\n\t\t\tgantt._quickRefresh(function(){\r\n\t\t\t\tgantt.refreshData();\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tthis.callEvent(\"onGanttLayoutReady\", []);\r\n\t\tthis.$layout.render();\r\n\r\n\t\tthis.$container = this.$layout.$container.firstChild;\r\n\r\n\t\taddResizeListener(this);\r\n\t}).bind(gantt);\r\n\r\n\tgantt.resetLayout = function(){\r\n\t\tdropLayout();\r\n\t\trebuildLayout();\r\n\t\tthis.render();\r\n\t};\r\n\r\n\tgantt._reinit = function(node){\r\n\t\tthis.callEvent(\"onBeforeGanttReady\", []);\r\n\t\tthis._update_flags();\r\n\r\n\t\tvar config = this.$services.getService(\"templateLoader\");\r\n\t\tconfig.initTemplates(this);\r\n\r\n\t\tdropLayout();\r\n\r\n\t\tthis.$root = null;\r\n\t\tif(node){\r\n\t\t\tthis.$root = domHelpers.toNode(node);\r\n\t\t\trebuildLayout();\r\n\t\t\tthis.$mouseEvents.reset(this.$root);\r\n\t\t\taddMinimalSizes(gantt);\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onTemplatesReady\",[]);\r\n\r\n\t\tthis.callEvent(\"onGanttReady\", []);\r\n\r\n\t\tthis.render();\r\n\t};\r\n\r\n\tfunction addMinimalSizes(gantt) {\r\n\t\tif (gantt.$container && !gantt.config.autosize) {\r\n\t\t\tif (gantt.$root.offsetHeight < 50) {\r\n\t\t\t\t// eslint-disable-next-line no-console\r\n\t\t\t\tconsole.warn(`The Gantt container has a small height, so you cannot see its content. If it is not intended, you need to set the 'height' style rule to the container:\r\nhttps://docs.dhtmlx.com/gantt/faq.html#theganttchartisntrenderedcorrectly`);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.$click={\r\n\t\tbuttons:{\r\n\t\t\t\"edit\": function(id) {\r\n\t\t\t\tif (gantt.isReadonly(gantt.getTask(id))) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t},\r\n\t\t\t\"delete\": function(id) {\r\n\t\t\t\tvar task = gantt.getTask(id);\r\n\t\t\t\tif (gantt.isReadonly(task)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar question = gantt.locale.labels.confirm_deleting;\r\n\t\t\t\tvar title = gantt.locale.labels.confirm_deleting_title;\r\n\r\n\t\t\t\tgantt._delete_task_confirm({\r\n\t\t\t\t\ttask: task,\r\n\t\t\t\t\tmessage: question,\r\n\t\t\t\t\ttitle: title,\r\n\t\t\t\t\tcallback: function(){\r\n\t\t\t\t\t\tif(!gantt.isTaskExists(id)){\r\n\t\t\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(task.$new){\r\n\t\t\t\t\t\t\t// GS-2170. Do not recalculate the indexes and dates of other tasks\r\n\t\t\t\t\t\t\t// as they will be recalculated in the `refreshData`\r\n\t\t\t\t\t\t\tgantt.$data.tasksStore._skipTaskRecalculation = \"lightbox\";\r\n\t\t\t\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\t\t\t\tgantt.deleteTask(id, true);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tgantt.$data.tasksStore._skipTaskRecalculation = false;\r\n\t\t\t\t\t\t\tgantt.refreshData();\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tgantt.$data.tasksStore._skipTaskRecalculation = true;\r\n\t\t\t\t\t\t\tgantt.deleteTask(id);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n//renders self\r\n\tgantt.render = function(){\r\n\t\tthis.callEvent(\"onBeforeGanttRender\", []);\r\n\r\n\t\tvar visibleDate;\r\n\t\tif(!isHeadless(gantt)){\r\n\t\t\tif (!this.config.sort && this._sort) {\r\n\t\t\t\tthis._sort = undefined;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.$root){\r\n\t\t\t\tif(this.config.rtl){\r\n\t\t\t\t\tthis.$root.classList.add(\"gantt_rtl\");\r\n\t\t\t\t\tthis.$root.firstChild.classList.add(\"gantt_rtl\"); // GS-1499\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$root.classList.remove(\"gantt_rtl\");\r\n\t\t\t\t\tthis.$root.firstChild.classList.remove(\"gantt_rtl\"); // GS-1499\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar pos = this.getScrollState();\r\n\t\t\tvar posX = pos ? pos.x : 0;\r\n\t\t\tif(this._getHorizontalScrollbar()){\r\n\t\t\t\tvar scrollbar = this._getHorizontalScrollbar();\r\n\t\t\t\tposX = scrollbar.$config.codeScrollLeft || posX || 0;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvisibleDate = null;\r\n\t\t\tif(posX){\r\n\t\t\t\tvisibleDate = gantt.dateFromPos(posX + this.config.task_scroll_offset);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcalculateScaleRange(this);\r\n\r\n\t\tif(!isHeadless(gantt)){\r\n\t\t\tthis.$layout.$config.autosize = this.config.autosize;\r\n\t\t\tvar preserveScroll = this.config.preserve_scroll;\r\n\t\t\tthis.config.preserve_scroll = false; // prevent scrolling from layout resize, scroll will be called here later on\r\n\t\t\tthis.$layout.resize();\r\n\t\t\tthis.config.preserve_scroll = preserveScroll;\r\n\r\n\t\t\tif(this.config.preserve_scroll && pos){\r\n\r\n\t\t\t\t// GS-1640: We need pos.y, otherwise part of the timeline won't be rendered if the scrollbar disappeared\r\n\t\t\t\tif (posX || pos.y) {\r\n\t\t\t\t\tvar new_pos = gantt.getScrollState();\r\n\t\t\t\t\tvar new_date = gantt.dateFromPos(new_pos.x);\r\n\t\t\t\t\tif(!(+visibleDate == +new_date && new_pos.y == pos.y)){\r\n\t\t\t\t\t\tvar posX = null;\r\n\t\t\t\t\t\tvar posY = null;\r\n\t\t\t\t\t\tif(visibleDate){\r\n\t\t\t\t\t\t\tvar posX = Math.max(gantt.posFromDate(visibleDate) - gantt.config.task_scroll_offset, 0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(pos.y){\r\n\t\t\t\t\t\t\tposY = pos.y;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgantt.scrollTo(posX, posY);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// GS-1640: We need to reset the scroll position for the grid if the scrollbar disappeared and\r\n\t\t\t\t// the grid and timeline have different scrollbars\r\n\t\t\t\t// GS-2718: if we have resources and two verticall scrollbars for tasks timeline and resource timeline\r\n\t\t\t\t// we don't get the scroll state of the resource timeline\r\n\t\t\t\tconst scrollbarsInfo = this.$layout.getScrollbarsInfo();\r\n\t\t\t\tscrollbarsInfo.forEach((scroll_info) => {\r\n\t\t\t\t\tconst scroll = gantt.$ui.getView(scroll_info.id);\r\n\t\t\t\t\tconst scrollbarNodeVisible = gantt.utils.dom.isChildOf(scroll.$view, gantt.$container);\r\n\t\t\t\t\tscroll_info.boundViews.forEach((viewName) => {\r\n\t\t\t\t\t\tconst view = gantt.$ui.getView(viewName);\r\n\t\t\t\t\t\tif(scroll_info.y && scroll_info.y != pos.y){\r\n\t\t\t\t\t\t\tif(view && !scrollbarNodeVisible){\r\n\t\t\t\t\t\t\t\tview.scrollTo(undefined, 0);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//GS-2586: take into account the horizontal scroll of the resource timeline\r\n\t\t\t\t\t\tif(scroll_info.x_pos && scroll_info.x_pos != pos.x){\r\n\t\t\t\t\t\t\tif(view && scrollbarNodeVisible){\r\n\t\t\t\t\t\t\t\tview.scrollTo(scroll_info.x_pos, undefined);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\tthis.callEvent(\"onGanttRender\", []);\r\n\t};\r\n\r\n\t//TODO: add layout.resize method that wouldn't trigger data repaint\r\n\tgantt.setSizes = gantt.render;\r\n\r\n\r\n\tgantt.getTaskRowNode = function(id) {\r\n\t\tvar els = this.$grid_data.childNodes;\r\n\t\tvar attribute = this.config.task_attribute;\r\n\t\tfor (var i = 0; i < els.length; i++) {\r\n\t\t\tif (els[i].getAttribute) {\r\n\t\t\t\tvar value = els[i].getAttribute(attribute);\r\n\t\t\t\tif (value == id) return els[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\tgantt.changeLightboxType = function(type){\r\n\t\tif(this.getLightboxType() == type)\r\n\t\t\treturn true;\r\n\t\tgantt._silent_redraw_lightbox(type);\r\n\t};\r\n\r\n\tgantt._get_link_type = function (from_start, to_start) {\r\n\t\tvar type = null;\r\n\t\tif (from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_start;\r\n\t\t} else if (!from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_start;\r\n\t\t} else if (!from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_finish;\r\n\t\t} else if (from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_finish;\r\n\t\t}\r\n\t\treturn type;\r\n\t};\r\n\r\n\tgantt.isLinkAllowed = function (from, to, from_start, to_start) {\r\n\t\tvar link = null;\r\n\t\tif (typeof(from) == \"object\") {\r\n\t\t\tlink = from;\r\n\t\t} else {\r\n\t\t\tlink = {source: from, target: to, type: this._get_link_type(from_start, to_start)};\r\n\t\t}\r\n\r\n\t\tif (!link) return false;\r\n\t\tif (!(link.source && link.target && link.type)) return false;\r\n\t\tif (link.source == link.target) return false;\r\n\r\n\t\tvar res = true;\r\n\t\t//any custom rules\r\n\t\tif (this.checkEvent(\"onLinkValidation\"))\r\n\t\t\tres = this.callEvent(\"onLinkValidation\", [link]);\r\n\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tgantt._correct_dst_change = function(date, prevOffset, step, unit){\r\n\t\tvar time_unit = helpers.getSecondsInUnit(unit) * step;\r\n\t\tif(time_unit > 60*60 && time_unit < 60*60*24){\r\n\t\t\t//correct dst change only if current unit is more than one hour and less than day (days have own checking), e.g. 12h\r\n\t\t\tvar offsetChanged = date.getTimezoneOffset() - prevOffset;\r\n\t\t\tif(offsetChanged){\r\n\t\t\t\tdate = gantt.date.add(date, offsetChanged, \"minute\");\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn date;\r\n\t};\r\n\r\n\tgantt.isSplitTask = function(task){\r\n\t\tgantt.assert(task && task instanceof Object, \"Invalid argument <b>task</b>=\"+task+\" of gantt.isSplitTask. Task object was expected\");\r\n\t\treturn this.$data.tasksStore._isSplitItem(task);\r\n\t};\r\n\r\n\tgantt._is_icon_open_click = function(e) {\r\n\t\tif (!e)\r\n\t\t\treturn false;\r\n\t\tvar target = e.target || e.srcElement;\r\n\t\tif (!(target && target.className))\r\n\t\t\treturn false;\r\n\t\tvar className = domHelpers.getClassName(target);\r\n\t\tif (className.indexOf(\"gantt_tree_icon\") !== -1 && (className.indexOf(\"gantt_close\") !== -1 || className.indexOf(\"gantt_open\") !== -1))\r\n\t\t\treturn true;\r\n\t\treturn false;\r\n\t};\r\n\r\n};","/*\r\n \tasserts will be removed in final code, so you can place them anythere\r\n\twithout caring about performance impacts\r\n*/\r\n\r\nexport default function(gantt){\r\n\treturn function assert(check, message){\r\n\t\tif (!check){\r\n\t\t\tif(gantt.config.show_errors && gantt.callEvent(\"onError\",[message]) !== false) {\r\n\t\t\t\tif (gantt.message) {\r\n\t\t\t\t\tgantt.message({type: \"error\", text: message, expire: -1});\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// eslint-disable-next-line\r\n\t\t\t\t\tconsole.log(message);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// eslint-disable-next-line no-debugger\r\n\t\t\t\tdebugger;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"كانون الثاني\", \"شباط\", \"آذار\", \"نيسان\", \"أيار\", \"حزيران\", \"تموز\", \"آب\", \"أيلول\", \"تشرين الأول\", \"تشرين الثاني\", \"كانون الأول\"],\r\n\t\tmonth_short: [\"يناير\", \"فبراير\", \"مارس\", \"أبريل\", \"مايو\", \"يونيو\", \"يوليو\", \"أغسطس\", \"سبتمبر\", \"أكتوبر\", \"نوفمبر\", \"ديسمبر\"],\r\n\t\tday_full: [\"الأحد\", \"الأثنين\", \"ألثلاثاء\", \"الأربعاء\", \"ألحميس\", \"ألجمعة\", \"السبت\"],\r\n\t\tday_short: [\"احد\", \"اثنين\", \"ثلاثاء\", \"اربعاء\", \"خميس\", \"جمعة\", \"سبت\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"مهمة جديد\",\r\n\t\ticon_save: \"اخزن\",\r\n\t\ticon_cancel: \"الغاء\",\r\n\t\ticon_details: \"تفاصيل\",\r\n\t\ticon_edit: \"تحرير\",\r\n\t\ticon_delete: \"حذف\",\r\n\t\tconfirm_closing: \"التغييرات سوف تضيع, هل انت متأكد؟\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"الحدث سيتم حذفها نهائيا ، هل أنت متأكد؟\",\r\n\t\tsection_description: \"الوصف\",\r\n\t\tsection_time: \"الفترة الزمنية\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"الغاء\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Студзень\", \"Люты\", \"Сакавік\", \"Красавік\", \"Maй\", \"Чэрвень\", \"Ліпень\", \"Жнівень\", \"Верасень\", \"Кастрычнік\", \"Лістапад\", \"Снежань\"],\r\n\t\tmonth_short: [\"Студз\", \"Лют\", \"Сак\", \"Крас\", \"Maй\", \"Чэр\", \"Ліп\", \"Жнів\", \"Вер\", \"Каст\", \"Ліст\", \"Снеж\"],\r\n\t\tday_full: [\"Нядзеля\", \"Панядзелак\", \"Аўторак\", \"Серада\", \"Чацвер\", \"Пятніца\", \"Субота\"],\r\n\t\tday_short: [\"Нд\", \"Пн\", \"Аўт\", \"Ср\", \"Чцв\", \"Пт\", \"Сб\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Новае заданне\",\r\n\t\ticon_save: \"Захаваць\",\r\n\t\ticon_cancel: \"Адмяніць\",\r\n\t\ticon_details: \"Дэталі\",\r\n\t\ticon_edit: \"Змяніць\",\r\n\t\ticon_delete: \"Выдаліць\",\r\n\t\tconfirm_closing: \"\", // Унесеныя змены будуць страчаны, працягнуць?\r\n\t\tconfirm_deleting: \"Падзея будзе выдалена незваротна, працягнуць?\",\r\n\t\tsection_description: \"Апісанне\",\r\n\t\tsection_time: \"Перыяд часу\",\r\n\t\tsection_type: \"Тып\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"ІСР\",\r\n\t\tcolumn_text: \"Задача\",\r\n\t\tcolumn_start_date: \"Пачатак\",\r\n\t\tcolumn_duration: \"Працяг\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Сувязь\",\r\n\t\tconfirm_link_deleting: \"будзе выдалена\",\r\n\t\tlink_start: \"(пачатак)\",\r\n\t\tlink_end: \"(канец)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Хвiлiна\",\r\n\t\thours: \"Гадзiна\",\r\n\t\tdays: \"Дзень\",\r\n\t\tweeks: \"Тыдзень\",\r\n\t\tmonths: \"Месяц\",\r\n\t\tyears: \"Год\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Адмяніць\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n @Traducido por Vicente Adria Bohigues - vicenteadria@hotmail.com\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Gener\", \"Febrer\", \"Març\", \"Abril\", \"Maig\", \"Juny\", \"Juliol\", \"Agost\", \"Setembre\", \"Octubre\", \"Novembre\", \"Desembre\"],\r\n\t\tmonth_short: [\"Gen\", \"Feb\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Oct\", \"Nov\", \"Des\"],\r\n\t\tday_full: [\"Diumenge\", \"Dilluns\", \"Dimarts\", \"Dimecres\", \"Dijous\", \"Divendres\", \"Dissabte\"],\r\n\t\tday_short: [\"Dg\", \"Dl\", \"Dm\", \"Dc\", \"Dj\", \"Dv\", \"Ds\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nova tasca\",\r\n\t\ticon_save: \"Guardar\",\r\n\t\ticon_cancel: \"Cancel·lar\",\r\n\t\ticon_details: \"Detalls\",\r\n\t\ticon_edit: \"Editar\",\r\n\t\ticon_delete: \"Esborrar\",\r\n\t\tconfirm_closing: \"\", // \"Els seus canvis es perdràn, continuar ?\"\r\n\t\tconfirm_deleting: \"L'esdeveniment s'esborrarà definitivament, continuar ?\",\r\n\t\tsection_description: \"Descripció\",\r\n\t\tsection_time: \"Periode de temps\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Cancel·lar\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\nTranslation by FreezeSoul\r\n\r\nUpdate 26/10/2015:\r\nTranslation of new labels by zwh8800\r\n https://github.com/DHTMLX/gantt/pull/7\r\n\r\n*/\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"十月\", \"十一月\", \"十二月\"],\r\n\t\tmonth_short: [\"1月\", \"2月\", \"3月\", \"4月\", \"5月\", \"6月\", \"7月\", \"8月\", \"9月\", \"10月\", \"11月\", \"12月\"],\r\n\t\tday_full: [\"星期日\", \"星期一\", \"星期二\", \"星期三\", \"星期四\", \"星期五\", \"星期六\"],\r\n\t\tday_short: [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"新任務\",\r\n\t\ticon_save: \"保存\",\r\n\t\ticon_cancel: \"关闭\",\r\n\t\ticon_details: \"详细\",\r\n\t\ticon_edit: \"编辑\",\r\n\t\ticon_delete: \"删除\",\r\n\t\tconfirm_closing: \"请确认是否撤销修改!\", // Your changes will be lost, are your sure?\r\n\t\tconfirm_deleting: \"是否删除日程?\",\r\n\t\tsection_description: \"描述\",\r\n\t\tsection_time: \"时间范围\",\r\n\t\tsection_type: \"类型\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"工作分解结构\",\r\n\t\tcolumn_text: \"任务名\",\r\n\t\tcolumn_start_date: \"开始时间\",\r\n\t\tcolumn_duration: \"持续时间\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\r\n\t\tlink: \"关联\",\r\n\t\tconfirm_link_deleting: \"将被删除\",\r\n\t\tlink_start: \" (开始)\",\r\n\t\tlink_end: \" (结束)\",\r\n\r\n\t\ttype_task: \"任务\",\r\n\t\ttype_project: \"项目\",\r\n\t\ttype_milestone: \"里程碑\",\r\n\r\n\t\tminutes: \"分钟\",\r\n\t\thours: \"小时\",\r\n\t\tdays: \"天\",\r\n\t\tweeks: \"周\",\r\n\t\tmonths: \"月\",\r\n\t\tyears: \"年\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"关闭\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Leden\", \"Únor\", \"Březen\", \"Duben\", \"Květen\", \"Červen\", \"Červenec\", \"Srpen\", \"Září\", \"Říjen\", \"Listopad\", \"Prosinec\"],\r\n\t\tmonth_short: [\"Led\", \"Ún\", \"Bře\", \"Dub\", \"Kvě\", \"Čer\", \"Čec\", \"Srp\", \"Září\", \"Říj\", \"List\", \"Pro\"],\r\n\t\tday_full: [\"Neděle\", \"Pondělí\", \"Úterý\", \"Středa\", \"Čtvrtek\", \"Pátek\", \"Sobota\"],\r\n\t\tday_short: [\"Ne\", \"Po\", \"Út\", \"St\", \"Čt\", \"Pá\", \"So\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nová práce\",\r\n\t\ticon_save: \"Uložit\",\r\n\t\ticon_cancel: \"Zpět\",\r\n\t\ticon_details: \"Detail\",\r\n\t\ticon_edit: \"Edituj\",\r\n\t\ticon_delete: \"Smazat\",\r\n\t\tconfirm_closing: \"\", // Vaše změny budou ztraceny, opravdu ?\r\n\t\tconfirm_deleting: \"Událost bude trvale smazána, opravdu?\",\r\n\t\tsection_description: \"Poznámky\",\r\n\t\tsection_time: \"Doba platnosti\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Zpět\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Marts\", \"April\", \"Maj\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Maj\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Søndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lørdag\"],\r\n\t\tday_short: [\"Søn\", \"Man\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"Lør\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Ny opgave\",\r\n\t\ticon_save: \"Gem\",\r\n\t\ticon_cancel: \"Fortryd\",\r\n\t\ticon_details: \"Detaljer\",\r\n\t\ticon_edit: \"Tilret\",\r\n\t\ticon_delete: \"Slet\",\r\n\t\tconfirm_closing: \"Dine rettelser vil gå tabt.. Er dy sikker?\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Bigivenheden vil blive slettet permanent. Er du sikker?\",\r\n\t\tsection_description: \"Beskrivelse\",\r\n\t\tsection_time: \"Tidsperiode\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Fortryd\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\" Januar\", \" Februar\", \" März \", \" April\", \" Mai\", \" Juni\", \" Juli\", \" August\", \" September \", \" Oktober\", \" November \", \" Dezember\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mär\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dez\"],\r\n\t\tday_full: [\"Sonntag\", \"Montag\", \"Dienstag\", \" Mittwoch\", \" Donnerstag\", \"Freitag\", \"Samstag\"],\r\n\t\tday_short: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Neue Aufgabe\",\r\n\t\ticon_save: \"Speichern\",\r\n\t\ticon_cancel: \"Abbrechen\",\r\n\t\ticon_details: \"Details\",\r\n\t\ticon_edit: \"Ändern\",\r\n\t\ticon_delete: \"Löschen\",\r\n\t\tconfirm_closing: \"\", // \"Ihre Veränderungen werden verloren sein, wollen Sie ergänzen? \"\r\n\t\tconfirm_deleting: \"Der Eintrag wird gelöscht\",\r\n\t\tsection_description: \"Beschreibung\",\r\n\t\tsection_time: \"Zeitspanne\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"PSP\",\r\n\t\tcolumn_text: \"Task-Namen\",\r\n\t\tcolumn_start_date: \"Startzeit\",\r\n\t\tcolumn_duration: \"Dauer\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"werden gelöscht\",\r\n\t\tlink_start: \"(starten)\",\r\n\t\tlink_end: \"(ende)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minuten\",\r\n\t\thours: \"Stunden\",\r\n\t\tdays: \"Tage\",\r\n\t\tweeks: \"Wochen\",\r\n\t\tmonths: \"Monate\",\r\n\t\tyears: \"Jahre\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Abbrechen\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Regel\",\r\n\t\tconstraint_type: \"Regel\",\r\n\t\tconstraint_date: \"Regel - Datum\",\r\n\t\tasap: \"So bald wie möglich\",\r\n\t\talap: \"So spät wie möglich\",\r\n\t\tsnet: \"Beginn nicht vor\",\r\n\t\tsnlt: \"Beginn nicht später als\",\r\n\t\tfnet: \"Fertigstellung nicht vor\",\r\n\t\tfnlt: \"Fertigstellung nicht später als\",\r\n\t\tmso: \"Muss beginnen am\",\r\n\t\tmfo: \"Muss fertig sein am\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Ιανουάριος\", \"Φεβρουάριος\", \"Μάρτιος\", \"Απρίλιος\", \"Μάϊος\", \"Ιούνιος\", \"Ιούλιος\", \"Αύγουστος\", \"Σεπτέμβριος\", \"Οκτώβριος\", \"Νοέμβριος\", \"Δεκέμβριος\"],\r\n\t\tmonth_short: [\"ΙΑΝ\", \"ΦΕΒ\", \"ΜΑΡ\", \"ΑΠΡ\", \"ΜΑΙ\", \"ΙΟΥΝ\", \"ΙΟΥΛ\", \"ΑΥΓ\", \"ΣΕΠ\", \"ΟΚΤ\", \"ΝΟΕ\", \"ΔΕΚ\"],\r\n\t\tday_full: [\"Κυριακή\", \"Δευτέρα\", \"Τρίτη\", \"Τετάρτη\", \"Πέμπτη\", \"Παρασκευή\", \"Κυριακή\"],\r\n\t\tday_short: [\"ΚΥ\", \"ΔΕ\", \"ΤΡ\", \"ΤΕ\", \"ΠΕ\", \"ΠΑ\", \"ΣΑ\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Νέα εργασία\",\r\n\t\ticon_save: \"Αποθήκευση\",\r\n\t\ticon_cancel: \"Άκυρο\",\r\n\t\ticon_details: \"Λεπτομέρειες\",\r\n\t\ticon_edit: \"Επεξεργασία\",\r\n\t\ticon_delete: \"Διαγραφή\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Το έργο θα διαγραφεί οριστικά. Θέλετε να συνεχίσετε;\",\r\n\t\tsection_description: \"Περιγραφή\",\r\n\t\tsection_time: \"Χρονική περίοδος\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Άκυρο\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\r\n\t\tday_short: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"New task\",\r\n\t\ticon_save: \"Save\",\r\n\t\ticon_cancel: \"Cancel\",\r\n\t\ticon_details: \"Details\",\r\n\t\ticon_edit: \"Edit\",\r\n\t\ticon_delete: \"Delete\",\r\n\t\tconfirm_closing: \"\",// Your changes will be lost, are you sure?\r\n\t\tconfirm_deleting: \"Task will be deleted permanently, are you sure?\",\r\n\t\tsection_description: \"Description\",\r\n\t\tsection_time: \"Time period\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\r\n\t\t/* grid columns */\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Cancel\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;","/*\r\n @Autor Manuel Fernandez Panzuela - www.mfernandez.es\r\n\r\n Update 30/10/2015:\r\n Translation of new labels by Jorge Macias\r\n https://disqus.com/by/disqus_bTuZk1voC7/\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"],\r\n\t\tmonth_short: [\"Ene\", \"Feb\", \"Mar\", \"Abr\", \"May\", \"Jun\", \"Jul\", \"Ago\", \"Sep\", \"Oct\", \"Nov\", \"Dic\"],\r\n\t\tday_full: [\"Domingo\", \"Lunes\", \"Martes\", \"Miércoles\", \"Jueves\", \"Viernes\", \"Sábado\"],\r\n\t\tday_short: [\"Dom\", \"Lun\", \"Mar\", \"Mié\", \"Jue\", \"Vie\", \"Sáb\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nueva tarea\",\r\n\t\ticon_save: \"Guardar\",\r\n\t\ticon_cancel: \"Cancelar\",\r\n\t\ticon_details: \"Detalles\",\r\n\t\ticon_edit: \"Editar\",\r\n\t\ticon_delete: \"Eliminar\",\r\n\t\tconfirm_closing: \"\", // \"Sus cambios se perderán, continuar ?\"\r\n\t\tconfirm_deleting: \"El evento se borrará definitivamente, ¿continuar?\",\r\n\t\tsection_description: \"Descripción\",\r\n\t\tsection_time: \"Período\",\r\n\t\tsection_type: \"Tipo\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"EDT\",\r\n\t\tcolumn_text: \"Tarea\",\r\n\t\tcolumn_start_date: \"Inicio\",\r\n\t\tcolumn_duration: \"Duración\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Enlace\",\r\n\t\tconfirm_link_deleting: \"será borrada\",\r\n\t\tlink_start: \" (inicio)\",\r\n\t\tlink_end: \" (fin)\",\r\n\r\n\t\ttype_task: \"Tarea\",\r\n\t\ttype_project: \"Proyecto\",\r\n\t\ttype_milestone: \"Hito\",\r\n\r\n\r\n\t\tminutes: \"Minutos\",\r\n\t\thours: \"Horas\",\r\n\t\tdays: \"Días\",\r\n\t\tweeks: \"Semanas\",\r\n\t\tmonths: \"Meses\",\r\n\t\tyears: \"Años\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Cancelar\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n dhtmlxGantt Persian (Farsi, fa_IR) locale by Mohammad Shokri http://slashsbin.com/\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\r\n\t\t\t\"ژانویه\",\r\n\t\t\t\"فوریه\",\r\n\t\t\t\"مارس\",\r\n\t\t\t\"آوریل\",\r\n\t\t\t\"مه\",\r\n\t\t\t\"ژوئن\",\r\n\t\t\t\"ژوئیه\",\r\n\t\t\t\"اوت\",\r\n\t\t\t\"سپتامبر\",\r\n\t\t\t\"اکتبر\",\r\n\t\t\t\"نوامبر\",\r\n\t\t\t\"دسامبر\"\r\n\t\t],\r\n\t\tmonth_short: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n\t\tday_full: [\r\n\t\t\t\"يکشنبه\",\r\n\t\t\t\"دوشنبه\",\r\n\t\t\t\"سه‌شنبه\",\r\n\t\t\t\"چهارشنبه\",\r\n\t\t\t\"پنجشنبه\",\r\n\t\t\t\"جمعه\",\r\n\t\t\t\"شنبه\"\r\n\t\t],\r\n\t\tday_short: [\r\n\t\t\t\"ی\",\r\n\t\t\t\"د\",\r\n\t\t\t\"س\",\r\n\t\t\t\"چ\",\r\n\t\t\t\"پ\",\r\n\t\t\t\"ج\",\r\n\t\t\t\"ش\"\r\n\t\t]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"وظیفه جدید\",\r\n\t\ticon_save: \"ذخیره\",\r\n\t\ticon_cancel: \"لغو\",\r\n\t\ticon_details: \"جزییات\",\r\n\t\ticon_edit: \"ویرایش\",\r\n\t\ticon_delete: \"حذف\",\r\n\t\tconfirm_closing: \"تغییرات شما ازدست خواهد رفت، آیا مطمئن هستید؟\",\r\n\t\tconfirm_deleting: \"این مورد برای همیشه حذف خواهد شد، آیا مطمئن هستید؟\",\r\n\t\tsection_description: \"توضیحات\",\r\n\t\tsection_time: \"مدت زمان\",\r\n\t\tsection_type: \"نوع\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"عنوان\",\r\n\t\tcolumn_start_date: \"زمان شروع\",\r\n\t\tcolumn_duration: \"مدت\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"ارتباط\",\r\n\t\tconfirm_link_deleting: \"حذف خواهد شد\",\r\n\t\tlink_start: \" (آغاز)\",\r\n\t\tlink_end: \" (پایان)\",\r\n\r\n\t\ttype_task: \"وظیفه\",\r\n\t\ttype_project: \"پروژه\",\r\n\t\ttype_milestone: \"نگارش\",\r\n\r\n\t\tminutes: \"دقایق\",\r\n\t\thours: \"ساعات\",\r\n\t\tdays: \"روزها\",\r\n\t\tweeks: \"هفته\",\r\n\t\tmonths: \"ماه‌ها\",\r\n\t\tyears: \"سال‌ها\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"تایید\",\r\n\t\tmessage_cancel: \"لغو\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Tammikuu\", \"Helmikuu\", \"Maaliskuu\", \"Huhtikuu\", \"Toukokuu\", \"Kes&auml;kuu\", \"Hein&auml;kuu\", \"Elokuu\", \"Syyskuu\", \"Lokakuu\", \"Marraskuu\", \"Joulukuu\"],\r\n\t\tmonth_short: [\"Tam\", \"Hel\", \"Maa\", \"Huh\", \"Tou\", \"Kes\", \"Hei\", \"Elo\", \"Syy\", \"Lok\", \"Mar\", \"Jou\"],\r\n\t\tday_full: [\"Sunnuntai\", \"Maanantai\", \"Tiistai\", \"Keskiviikko\", \"Torstai\", \"Perjantai\", \"Lauantai\"],\r\n\t\tday_short: [\"Su\", \"Ma\", \"Ti\", \"Ke\", \"To\", \"Pe\", \"La\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Uusi tehtävä\",\r\n\t\ticon_save: \"Tallenna\",\r\n\t\ticon_cancel: \"Peru\",\r\n\t\ticon_details: \"Tiedot\",\r\n\t\ticon_edit: \"Muokkaa\",\r\n\t\ticon_delete: \"Poista\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Haluatko varmasti poistaa tapahtuman?\",\r\n\t\tsection_description: \"Kuvaus\",\r\n\t\tsection_time: \"Aikajakso\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Peru\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Janvier\", \"Février\", \"Mars\", \"Avril\", \"Mai\", \"Juin\", \"Juillet\", \"Août\", \"Septembre\", \"Octobre\", \"Novembre\", \"Décembre\"],\r\n\t\tmonth_short: [\"Jan\", \"Fév\", \"Mar\", \"Avr\", \"Mai\", \"Juin\", \"Juil\", \"Aoû\", \"Sep\", \"Oct\", \"Nov\", \"Déc\"],\r\n\t\tday_full: [\"Dimanche\", \"Lundi\", \"Mardi\", \"Mercredi\", \"Jeudi\", \"Vendredi\", \"Samedi\"],\r\n\t\tday_short: [\"Dim\", \"Lun\", \"Mar\", \"Mer\", \"Jeu\", \"Ven\", \"Sam\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nouvelle tâche\",\r\n\t\ticon_save: \"Enregistrer\",\r\n\t\ticon_cancel: \"Annuler\",\r\n\t\ticon_details: \"Détails\",\r\n\t\ticon_edit: \"Modifier\",\r\n\t\ticon_delete: \"Effacer\",\r\n\t\tconfirm_closing: \"\",// Vos modifications seront perdus, êtes-vous sûr ?\r\n\t\tconfirm_deleting: \"L'événement sera effacé sans appel, êtes-vous sûr ?\",\r\n\r\n\t\tsection_description: \"Description\",\r\n\t\tsection_time: \"Période\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"OTP\",\r\n\t\tcolumn_text: \"Nom de la tâche\",\r\n\t\tcolumn_start_date: \"Date initiale\",\r\n\t\tcolumn_duration: \"Durée\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Le lien\",\r\n\t\tconfirm_link_deleting: \"sera supprimé\",\r\n\t\tlink_start: \"(début)\",\r\n\t\tlink_end: \"(fin)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Heures\",\r\n\t\tdays: \"Jours\",\r\n\t\tweeks: \"Semaines\",\r\n\t\tmonths: \"Mois\",\r\n\t\tyears: \"Années\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Annuler\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"ינואר\", \"פברואר\", \"מרץ\", \"אפריל\", \"מאי\", \"יוני\", \"יולי\", \"אוגוסט\", \"ספטמבר\", \"אוקטובר\", \"נובמבר\", \"דצמבר\"],\r\n\t\tmonth_short: [\"ינו\", \"פבר\", \"מרץ\", \"אפר\", \"מאי\", \"יונ\", \"יול\", \"אוג\", \"ספט\", \"אוק\", \"נוב\", \"דצמ\"],\r\n\t\tday_full: [\"ראשון\", \"שני\", \"שלישי\", \"רביעי\", \"חמישי\", \"שישי\", \"שבת\"],\r\n\t\tday_short: [\"א\", \"ב\", \"ג\", \"ד\", \"ה\", \"ו\", \"ש\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"משימה חדש\",\r\n\t\ticon_save: \"שמור\",\r\n\t\ticon_cancel: \"בטל\",\r\n\t\ticon_details: \"פרטים\",\r\n\t\ticon_edit: \"ערוך\",\r\n\t\ticon_delete: \"מחק\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"ארוע ימחק סופית.להמשיך?\",\r\n\t\tsection_description: \"הסבר\",\r\n\t\tsection_time: \"תקופה\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"בטל\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n  Translation by Davor\r\n http://docs.dhtmlx.com/gantt/desktop__localization.html#comment-2569116291\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Siječanj\", \"Veljača\", \"Ožujak\", \"Travanj\", \"Svibanj\", \"Lipanj\", \"Srpanj\", \"Kolovoz\", \"Rujan\", \"Listopad\", \"Studeni\", \"Prosinac\"],\r\n\t\tmonth_short: [\"Sij\", \"Velj\", \"Ožu\", \"Tra\", \"Svi\", \"Lip\", \"Srp\", \"Kol\", \"Ruj\", \"Lis\", \"Stu\", \"Pro\"],\r\n\t\tday_full: [\"Nedjelja\", \"Ponedjeljak\", \"Utorak\", \"Srijeda\", \"Četvrtak\", \"Petak\", \"Subota\"],\r\n\t\tday_short: [\"Ned\", \"Pon\", \"Uto\", \"Sri\", \"Čet\", \"Pet\", \"Sub\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Novi Zadatak\",\r\n\t\ticon_save: \"Spremi\",\r\n\t\ticon_cancel: \"Odustani\",\r\n\t\ticon_details: \"Detalji\",\r\n\t\ticon_edit: \"Izmjeni\",\r\n\t\ticon_delete: \"Obriši\",\r\n\t\tconfirm_closing: \"\",\r\n\t\tconfirm_deleting: \"Zadatak će biti trajno izbrisan, jeste li sigurni?\",\r\n\t\tsection_description: \"Opis\",\r\n\t\tsection_time: \"Vremenski Period\",\r\n\t\tsection_type: \"Tip\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\r\n\t\t/* grid columns */\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Naziv Zadatka\",\r\n\t\tcolumn_start_date: \"Početno Vrijeme\",\r\n\t\tcolumn_duration: \"Trajanje\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Poveznica\",\r\n\t\tconfirm_link_deleting: \"će biti izbrisan\",\r\n\t\tlink_start: \" (početak)\",\r\n\t\tlink_end: \" (kraj)\",\r\n\r\n\t\ttype_task: \"Zadatak\",\r\n\t\ttype_project: \"Projekt\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\t\tminutes: \"Minute\",\r\n\t\thours: \"Sati\",\r\n\t\tdays: \"Dani\",\r\n\t\tweeks: \"Tjedni\",\r\n\t\tmonths: \"Mjeseci\",\r\n\t\tyears: \"Godine\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Odustani\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Január\", \"Február\", \"Március\", \"Április\", \"Május\", \"Június\", \"Július\", \"Augusztus\", \"Szeptember\", \"Október\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Már\", \"Ápr\", \"Máj\", \"Jún\", \"Júl\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Vasárnap\", \"Hétfõ\", \"Kedd\", \"Szerda\", \"Csütörtök\", \"Péntek\", \"szombat\"],\r\n\t\tday_short: [\"Va\", \"Hé\", \"Ke\", \"Sze\", \"Csü\", \"Pé\", \"Szo\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Új feladat\",\r\n\t\ticon_save: \"Mentés\",\r\n\t\ticon_cancel: \"Mégse\",\r\n\t\ticon_details: \"Részletek\",\r\n\t\ticon_edit: \"Szerkesztés\",\r\n\t\ticon_delete: \"Törlés\",\r\n\t\tconfirm_closing: \"\", // A változások elvesznek, biztosan folytatja? \"\r\n\t\tconfirm_deleting: \"Az esemény törölve lesz, biztosan folytatja?\",\r\n\t\tsection_description: \"Leírás\",\r\n\t\tsection_time: \"Idõszak\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Mégse\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januari\", \"Februari\", \"Maret\", \"April\", \"Mei\", \"Juni\", \"Juli\", \"Agustus\", \"September\", \"Oktober\", \"November\", \"Desember\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mei\", \"Jun\", \"Jul\", \"Ags\", \"Sep\", \"Okt\", \"Nov\", \"Des\"],\r\n\t\tday_full: [\"Minggu\", \"Senin\", \"Selasa\", \"Rabu\", \"Kamis\", \"Jumat\", \"Sabtu\"],\r\n\t\tday_short: [\"Ming\", \"Sen\", \"Sel\", \"Rab\", \"Kam\", \"Jum\", \"Sab\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Tugas baru\",\r\n\t\ticon_save: \"Simpan\",\r\n\t\ticon_cancel: \"Batal\",\r\n\t\ticon_details: \"Detail\",\r\n\t\ticon_edit: \"Edit\",\r\n\t\ticon_delete: \"Hapus\",\r\n\t\tconfirm_closing: \"\", /* Perubahan tidak akan disimpan ? */\r\n\t\tconfirm_deleting: \"Acara akan dihapus\",\r\n\t\tsection_description: \"Keterangan\",\r\n\t\tsection_time: \"Periode\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Batal\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n Update 29/12/2015:\r\n New labels translation by ARCANGELI CLAUDIO\r\n\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Gennaio\", \"Febbraio\", \"Marzo\", \"Aprile\", \"Maggio\", \"Giugno\", \"Luglio\", \"Agosto\", \"Settembre\", \"Ottobre\", \"Novembre\", \"Dicembre\"],\r\n\t\tmonth_short: [\"Gen\", \"Feb\", \"Mar\", \"Apr\", \"Mag\", \"Giu\", \"Lug\", \"Ago\", \"Set\", \"Ott\", \"Nov\", \"Dic\"],\r\n\t\tday_full: [\"Domenica\", \"Lunedì\", \"Martedì\", \"Mercoledì\", \"Giovedì\", \"Venerdì\", \"Sabato\"],\r\n\t\tday_short: [\"Dom\", \"Lun\", \"Mar\", \"Mer\", \"Gio\", \"Ven\", \"Sab\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nuovo compito\",\r\n\t\ticon_save: \"Salva\",\r\n\t\ticon_cancel: \"Chiudi\",\r\n\t\ticon_details: \"Dettagli\",\r\n\t\ticon_edit: \"Modifica\",\r\n\t\ticon_delete: \"Elimina\",\r\n\t\tconfirm_closing: \"\",// \"Sei sicuro di confermare la chiusura?\",\r\n\t\tconfirm_deleting: \"Sei sicuro di confermare l'eliminazione?\",\r\n\t\tsection_description: \"Descrizione\",\r\n\t\tsection_time: \"Periodo di tempo\",\r\n\t\tsection_type: \"Tipo\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Nome Attività\",\r\n\t\tcolumn_start_date: \"Inizio\",\r\n\t\tcolumn_duration: \"Durata\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"sarà eliminato\",\r\n\t\tlink_start: \" (inizio)\",\r\n\t\tlink_end: \" (fine)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minuti\",\r\n\t\thours: \"Ore\",\r\n\t\tdays: \"Giorni\",\r\n\t\tweeks: \"Settimane\",\r\n\t\tmonths: \"Mesi\",\r\n\t\tyears: \"Anni\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Chiudi\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n Translation by Genexus Japan Inc.\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"1月\", \"2月\", \"3月\", \"4月\", \"5月\", \"6月\", \"7月\", \"8月\", \"9月\", \"10月\", \"11月\", \"12月\"],\r\n\t\tmonth_short: [\"1月\", \"2月\", \"3月\", \"4月\", \"5月\", \"6月\", \"7月\", \"8月\", \"9月\", \"10月\", \"11月\", \"12月\"],\r\n\t\tday_full: [\"日曜日\", \"月曜日\", \"火曜日\", \"水曜日\", \"木曜日\", \"金曜日\", \"土曜日\"],\r\n\t\tday_short: [\"日\", \"月\", \"火\", \"水\", \"木\", \"金\", \"土\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"新しい仕事\",\r\n\t\ticon_save: \"保存\",\r\n\t\ticon_cancel: \"キャンセル\",\r\n\t\ticon_details: \"詳細\",\r\n\t\ticon_edit: \"編集\",\r\n\t\ticon_delete: \"削除\",\r\n\t\tconfirm_closing: \"\", // 変更が取り消されます、宜しいですか？\r\n\t\tconfirm_deleting: \"イベント完全に削除されます、宜しいですか？\",\r\n\t\tsection_description: \"デスクリプション\",\r\n\t\tsection_time: \"期間\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"キャンセル\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n\tTranslated by cjkim@dbvalley.com\r\n*/\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"1월\", \"2월\", \"3월\", \"4월\", \"5월\", \"6월\", \"7월\", \"8월\", \"9월\", \"10월\", \"11월\", \"12월\"],\r\n\t\tmonth_short: [\"1월\", \"2월\", \"3월\", \"4월\", \"5월\", \"6월\", \"7월\", \"8월\", \"9월\", \"10월\", \"11월\", \"12월\"],\r\n\t\tday_full: [\"일요일\", \"월요일\", \"화요일\", \"수요일\", \"목요일\", \"금요일\", \"토요일\"],\r\n\t\tday_short: [\"일\", \"월\", \"화\", \"수\", \"목\", \"금\", \"토\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"이름없는 작업\",\r\n\t\ticon_save: \"저장\",\r\n\t\ticon_cancel: \"취소\",\r\n\t\ticon_details: \"세부 사항\",\r\n\t\ticon_edit: \"수정\",\r\n\t\ticon_delete: \"삭제\",\r\n\t\tconfirm_closing: \"\",\r\n\t\tconfirm_deleting: \"작업을 삭제하시겠습니까?\",\r\n\t\tsection_description: \"설명\",\r\n\t\tsection_time: \"기간\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"작업명\",\r\n\t\tcolumn_start_date: \"시작일\",\r\n\t\tcolumn_duration: \"기간\",\r\n\t\tcolumn_add: \"\",\r\n\t\tlink: \"전제\",\r\n\t\tconfirm_link_deleting: \"삭제 하시겠습니까?\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\t\ttype_task: \"작업\",\r\n\t\ttype_project: \"프로젝트\",\r\n\t\ttype_milestone: \"마일스톤\",\r\n\t\tminutes: \"분\",\r\n\t\thours: \"시간\",\r\n\t\tdays: \"일\",\r\n\t\tweeks: \"주\",\r\n\t\tmonths: \"달\",\r\n\t\tyears: \"년\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"취소\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","export default class LocaleManager{\r\n\tprivate _locales:{[key:string]: IGanttLocale };\r\n\r\n\tconstructor(config: {[key:string]: IGanttLocale }){\r\n\t\tthis._locales = {};\r\n\t\tfor(const i in config){\r\n\t\t\tthis._locales[i] = config[i];\r\n\t\t}\r\n\t}\r\n\r\n\taddLocale = (name: string, locale: IGanttLocale) => {\r\n\t\tthis._locales[name] = locale;\r\n\t};\r\n\r\n\tgetLocale = (name: string): IGanttLocale => {\r\n\t\treturn this._locales[name];\r\n\t};\r\n}","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Mars\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Desember\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Des\"],\r\n\t\tday_full: [\"Søndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lørdag\"],\r\n\t\tday_short: [\"Søn\", \"Mon\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"Lør\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Ny oppgave\",\r\n\t\ticon_save: \"Lagre\",\r\n\t\ticon_cancel: \"Avbryt\",\r\n\t\ticon_details: \"Detaljer\",\r\n\t\ticon_edit: \"Rediger\",\r\n\t\ticon_delete: \"Slett\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Hendelsen vil bli slettet permanent. Er du sikker?\",\r\n\t\tsection_description: \"Beskrivelse\",\r\n\t\tsection_time: \"Tidsperiode\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Avbryt\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januari\", \"Februari\", \"Maart\", \"April\", \"Mei\", \"Juni\", \"Juli\", \"Augustus\", \"September\", \"Oktober\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"mrt\", \"Apr\", \"Mei\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Zondag\", \"Maandag\", \"Dinsdag\", \"Woensdag\", \"Donderdag\", \"Vrijdag\", \"Zaterdag\"],\r\n\t\tday_short: [\"Zo\", \"Ma\", \"Di\", \"Wo\", \"Do\", \"Vr\", \"Za\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nieuwe taak\",\r\n\t\ticon_save: \"Opslaan\",\r\n\t\ticon_cancel: \"Annuleren\",\r\n\t\ticon_details: \"Details\",\r\n\t\ticon_edit: \"Bewerken\",\r\n\t\ticon_delete: \"Verwijderen\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Item zal permanent worden verwijderd, doorgaan?\",\r\n\t\tsection_description: \"Beschrijving\",\r\n\t\tsection_time: \"Tijd periode\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Taak omschrijving\",\r\n\t\tcolumn_start_date: \"Startdatum\",\r\n\t\tcolumn_duration: \"Duur\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Koppeling\",\r\n\t\tconfirm_link_deleting: \"zal worden verwijderd\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (eind)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"minuten\",\r\n\t\thours: \"uren\",\r\n\t\tdays: \"dagen\",\r\n\t\tweeks: \"weken\",\r\n\t\tmonths: \"maanden\",\r\n\t\tyears: \"jaren\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Annuleren\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Mars\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Desember\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Des\"],\r\n\t\tday_full: [\"Søndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lørdag\"],\r\n\t\tday_short: [\"Søn\", \"Man\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"Lør\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Ny oppgave\",\r\n\t\ticon_save: \"Lagre\",\r\n\t\ticon_cancel: \"Avbryt\",\r\n\t\ticon_details: \"Detaljer\",\r\n\t\ticon_edit: \"Endre\",\r\n\t\ticon_delete: \"Slett\",\r\n\t\tconfirm_closing: \"Endringer blir ikke lagret, er du sikker?\", // Endringer blir ikke lagret, er du sikker?\r\n\t\tconfirm_deleting: \"Oppføringen vil bli slettet, er du sikker?\",\r\n\t\tsection_description: \"Beskrivelse\",\r\n\t\tsection_time: \"Tidsperiode\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Avbryt\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Styczeń\", \"Luty\", \"Marzec\", \"Kwiecień\", \"Maj\", \"Czerwiec\", \"Lipiec\", \"Sierpień\", \"Wrzesień\", \"Październik\", \"Listopad\", \"Grudzień\"],\r\n\t\tmonth_short: [\"Sty\", \"Lut\", \"Mar\", \"Kwi\", \"Maj\", \"Cze\", \"Lip\", \"Sie\", \"Wrz\", \"Paź\", \"Lis\", \"Gru\"],\r\n\t\tday_full: [\"Niedziela\", \"Poniedziałek\", \"Wtorek\", \"Środa\", \"Czwartek\", \"Piątek\", \"Sobota\"],\r\n\t\tday_short: [\"Nie\", \"Pon\", \"Wto\", \"Śro\", \"Czw\", \"Pią\", \"Sob\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nowe zadanie\",\r\n\t\ticon_save: \"Zapisz\",\r\n\t\ticon_cancel: \"Anuluj\",\r\n\t\ticon_details: \"Szczegóły\",\r\n\t\ticon_edit: \"Edytuj\",\r\n\t\ticon_delete: \"Usuń\",\r\n\t\tconfirm_closing: \"\", // Zmiany zostaną usunięte, jesteś pewien?\r\n\t\tconfirm_deleting: \"Zdarzenie zostanie usunięte na zawsze, kontynuować?\",\r\n\t\tsection_description: \"Opis\",\r\n\t\tsection_time: \"Okres czasu\",\r\n\t\tsection_type: \"Typ\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Nazwa zadania\",\r\n\t\tcolumn_start_date: \"Początek\",\r\n\t\tcolumn_duration: \"Czas trwania\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"zostanie usunięty\",\r\n\t\tlink_start: \" (początek)\",\r\n\t\tlink_end: \" (koniec)\",\r\n\r\n\t\ttype_task: \"Zadanie\",\r\n\t\ttype_project: \"Projekt\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minuty\",\r\n\t\thours: \"Godziny\",\r\n\t\tdays: \"Dni\",\r\n\t\tweeks: \"Tydzień\",\r\n\t\tmonths: \"Miesiące\",\r\n\t\tyears: \"Lata\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Anuluj\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n\r\n TRANSLATION BY MATTHEUS PIROVANI RORIZ GONЗALVES\r\n\r\n mattheusroriz@hotmail.com / mattheus.pirovani@gmail.com /\r\n\r\n www.atrixian.com.br\r\n\r\n\r\n Updated by Jorge Albernaz Martins\r\n\r\n jorgefox@hotmail.com\r\n\r\n www.redfox.inf.br\r\n\r\n JorgeFox\r\n\r\n*/\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Janeiro\", \"Fevereiro\", \"Março\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"],\r\n\t\tmonth_short: [\"Jan\", \"Fev\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Out\", \"Nov\", \"Dez\"],\r\n\t\tday_full: [\"Domingo\", \"Segunda\", \"Terça\", \"Quarta\", \"Quinta\", \"Sexta\", \"Sábado\"],\r\n\t\tday_short: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sab\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nova tarefa\",\r\n\t\ticon_save: \"Salvar\",\r\n\t\ticon_cancel: \"Cancelar\",\r\n\t\ticon_details: \"Detalhes\",\r\n\t\ticon_edit: \"Editar\",\r\n\t\ticon_delete: \"Excluir\",\r\n\t\tconfirm_closing: \"\",// Suas alterações serão perdidas, confirme?\r\n\t\tconfirm_deleting: \"As tarefas serão excluidas permanentemente, confirme?\",\r\n\t\tsection_description: \"Descrição\",\r\n\t\tsection_time: \"Período\",\r\n\t\tsection_type: \"Tipo\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"EAP\",\r\n\t\tcolumn_text: \"Nome tarefa\",\r\n\t\tcolumn_start_date: \"Data início\",\r\n\t\tcolumn_duration: \"Duração\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"Será excluído!\",\r\n\t\tlink_start: \" (início)\",\r\n\t\tlink_end: \" (fim)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Projeto\",\r\n\t\ttype_milestone: \"Marco\",\r\n\r\n\r\n\t\tminutes: \"Minutos\",\r\n\t\thours: \"Horas\",\r\n\t\tdays: \"Dias\",\r\n\t\tweeks: \"Semanas\",\r\n\t\tmonths: \"Meses\",\r\n\t\tyears: \"Anos\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Cancelar\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Restrição\",\r\n\t\tconstraint_type: \"Tipo Restrição\",\r\n\t\tconstraint_date: \"Data restrição\",\r\n\t\tasap: \"Mais breve possível\",\r\n\t\talap: \"Mais tarde possível\",\r\n\t\tsnet: \"Não começar antes de\",\r\n\t\tsnlt: \"Não começar depois de\",\r\n\t\tfnet: \"Não terminar antes de\",\r\n\t\tfnlt: \"Não terminar depois de\",\r\n\t\tmso: \"Precisa começar em\",\r\n\t\tmfo: \"Precisa terminar em\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"Tipo de filtros\",\r\n\t\tresources_filter_label: \"Ocultar vazios\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n\tTraducere de Ovidiu Lixandru: http://www.madball.ro\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Ianuarie\", \"Februarie\", \"Martie\", \"Aprilie\", \"Mai\", \"Iunie\", \"Iulie\", \"August\", \"Septembrie\", \"Octombrie\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Ian\", \"Feb\", \"Mar\", \"Apr\", \"Mai\", \"Iun\", \"Iul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Duminica\", \"Luni\", \"Marti\", \"Miercuri\", \"Joi\", \"Vineri\", \"Sambata\"],\r\n\t\tday_short: [\"Du\", \"Lu\", \"Ma\", \"Mi\", \"Jo\", \"Vi\", \"Sa\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Sarcina noua\",\r\n\t\ticon_save: \"Salveaza\",\r\n\t\ticon_cancel: \"Anuleaza\",\r\n\t\ticon_details: \"Detalii\",\r\n\t\ticon_edit: \"Editeaza\",\r\n\t\ticon_delete: \"Sterge\",\r\n\t\tconfirm_closing: \"Schimbarile nu vor fi salvate, esti sigur?\",// Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Evenimentul va fi sters permanent, esti sigur?\",\r\n\t\tsection_description: \"Descriere\",\r\n\t\tsection_time: \"Interval\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Anuleaza\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Январь\", \"Февраль\", \"Март\", \"Апрель\", \"Maй\", \"Июнь\", \"Июль\", \"Август\", \"Сентябрь\", \"Oктябрь\", \"Ноябрь\", \"Декабрь\"],\r\n\t\tmonth_short: [\"Янв\", \"Фев\", \"Maр\", \"Aпр\", \"Maй\", \"Июн\", \"Июл\", \"Aвг\", \"Сен\", \"Окт\", \"Ноя\", \"Дек\"],\r\n\t\tday_full: [\"Воскресенье\", \"Понедельник\", \"Вторник\", \"Среда\", \"Четверг\", \"Пятница\", \"Суббота\"],\r\n\t\tday_short: [\"Вс\", \"Пн\", \"Вт\", \"Ср\", \"Чт\", \"Пт\", \"Сб\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Новое задание\",\r\n\t\ticon_save: \"Сохранить\",\r\n\t\ticon_cancel: \"Отменить\",\r\n\t\ticon_details: \"Детали\",\r\n\t\ticon_edit: \"Изменить\",\r\n\t\ticon_delete: \"Удалить\",\r\n\t\tconfirm_closing: \"\", // Ваши изменения будут потеряны, продолжить?\r\n\t\tconfirm_deleting: \"Событие будет удалено безвозвратно, продолжить?\",\r\n\t\tsection_description: \"Описание\",\r\n\t\tsection_time: \"Период времени\",\r\n\t\tsection_type: \"Тип\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"ИСР\",\r\n\t\tcolumn_text: \"Задача\",\r\n\t\tcolumn_start_date: \"Начало\",\r\n\t\tcolumn_duration: \"Длительность\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Связь\",\r\n\t\tconfirm_link_deleting: \"будет удалена\",\r\n\t\tlink_start: \" (начало)\",\r\n\t\tlink_end: \" (конец)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Минута\",\r\n\t\thours: \"Час\",\r\n\t\tdays: \"День\",\r\n\t\tweeks: \"Неделя\",\r\n\t\tmonths: \"Месяц\",\r\n\t\tyears: \"Год\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Отменить\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"начните вводить слово для фильтрации\",\r\n\t\tresources_filter_label: \"спрятать не установленные\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Marec\", \"April\", \"Maj\", \"Junij\", \"Julij\", \"Avgust\", \"September\", \"Oktober\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Maj\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Nedelja\", \"Ponedeljek\", \"Torek\", \"Sreda\", \"Četrtek\", \"Petek\", \"Sobota\"],\r\n\t\tday_short: [\"Ned\", \"Pon\", \"Tor\", \"Sre\", \"Čet\", \"Pet\", \"Sob\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nova naloga\",\r\n\t\ticon_save: \"Shrani\",\r\n\t\ticon_cancel: \"Prekliči\",\r\n\t\ticon_details: \"Podrobnosti\",\r\n\t\ticon_edit: \"Uredi\",\r\n\t\ticon_delete: \"Izbriši\",\r\n\t\tconfirm_closing: \"\", // Spremembe ne bodo shranjene. Želite nadaljevati ?\r\n\t\tconfirm_deleting: \"Dogodek bo izbrisan. Želite nadaljevati?\",\r\n\t\tsection_description: \"Opis\",\r\n\t\tsection_time: \"Časovni okvir\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Prekliči\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Január\", \"Február\", \"Marec\", \"Apríl\", \"Máj\", \"Jún\", \"Júl\", \"August\", \"September\", \"Október\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Máj\", \"Jún\", \"Júl\", \"Aug\", \"Sept\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Nedeľa\", \"Pondelok\", \"Utorok\", \"Streda\", \"Štvrtok\", \"Piatok\", \"Sobota\"],\r\n\t\tday_short: [\"Ne\", \"Po\", \"Ut\", \"St\", \"Št\", \"Pi\", \"So\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nová úloha\",\r\n\t\ticon_save: \"Uložiť\",\r\n\t\ticon_cancel: \"Späť\",\r\n\t\ticon_details: \"Detail\",\r\n\t\ticon_edit: \"Edituj\",\r\n\t\ticon_delete: \"Zmazať\",\r\n\t\tconfirm_closing: \"Vaše zmeny nebudú uložené. Skutočne?\", // Vaše změny budou ztraceny, opravdu ?\r\n\t\tconfirm_deleting: \"Udalosť bude natrvalo vymazaná. Skutočne?\",\r\n\t\tsection_description: \"Poznámky\",\r\n\t\tsection_time: \"Doba platnosti\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Späť\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n\tTranslation by Peter Eriksson\r\n */\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januari\", \"Februari\", \"Mars\", \"April\", \"Maj\", \"Juni\", \"Juli\", \"Augusti\", \"September\", \"Oktober\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Maj\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Söndag\", \"Måndag\", \"Tisdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lördag\"],\r\n\t\tday_short: [\"Sön\", \"Mån\", \"Tis\", \"Ons\", \"Tor\", \"Fre\", \"Lör\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Ny uppgift\",\r\n\t\ticon_save: \"Spara\",\r\n\t\ticon_cancel: \"Avbryt\",\r\n\t\ticon_details: \"Detajer\",\r\n\t\ticon_edit: \"Ändra\",\r\n\t\ticon_delete: \"Ta bort\",\r\n\t\tconfirm_closing: \"\",\r\n\t\tconfirm_deleting: \"Är du säker på att du vill ta bort händelsen permanent?\",\r\n\t\tsection_description: \"Beskrivning\",\r\n\t\tsection_time: \"Tid\",\r\n\t\tsection_type: \"Typ\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Uppgiftsnamn\",\r\n\t\tcolumn_start_date: \"Starttid\",\r\n\t\tcolumn_duration: \"Varaktighet\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\r\n\t\tlink: \"Länk\",\r\n\t\tconfirm_link_deleting: \"kommer tas bort\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (slut)\",\r\n\t\ttype_task: \"Uppgift\",\r\n\t\ttype_project: \"Projekt\",\r\n\t\ttype_milestone: \"Milstolpe\",\r\n\r\n\t\tminutes: \"Minuter\",\r\n\t\thours: \"Timmar\",\r\n\t\tdays: \"Dagar\",\r\n\t\tweeks: \"Veckor\",\r\n\t\tmonths: \"Månader\",\r\n\t\tyears: \"År\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Avbryt\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n * updated by @levkar at https://github.com/DHTMLX/gantt/pull/10\r\n */\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Ocak\", \"Şubat\", \"Mart\", \"Nisan\", \"Mayıs\", \"Haziran\", \"Temmuz\", \"Ağustos\", \"Eylül\", \"Ekim\", \"Kasım\", \"Aralık\"],\r\n\t\tmonth_short: [\"Oca\", \"Şub\", \"Mar\", \"Nis\", \"May\", \"Haz\", \"Tem\", \"Ağu\", \"Eyl\", \"Eki\", \"Kas\", \"Ara\"],\r\n\t\tday_full: [\"Pazar\", \"Pazartesi\", \"Salı\", \"Çarşamba\", \"Perşembe\", \"Cuma\", \"Cumartesi\"],\r\n\t\tday_short: [\"Paz\", \"Pzt\", \"Sal\", \"Çar\", \"Per\", \"Cum\", \"Cmt\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Yeni görev\",\r\n\t\ticon_save: \"Kaydet\",\r\n\t\ticon_cancel: \"İptal\",\r\n\t\ticon_details: \"Detaylar\",\r\n\t\ticon_edit: \"Düzenle\",\r\n\t\ticon_delete: \"Sil\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Görev silinecek, emin misiniz?\",\r\n\t\tsection_description: \"Açıklama\",\r\n\t\tsection_time: \"Zaman Aralığı\",\r\n\t\tsection_type: \"Tip\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Görev Adı\",\r\n\t\tcolumn_start_date: \"Başlangıç\",\r\n\t\tcolumn_duration: \"Süre\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Bağlantı\",\r\n\t\tconfirm_link_deleting: \"silinecek\",\r\n\t\tlink_start: \" (başlangıç)\",\r\n\t\tlink_end: \" (bitiş)\",\r\n\r\n\t\ttype_task: \"Görev\",\r\n\t\ttype_project: \"Proje\",\r\n\t\ttype_milestone: \"Kilometretaşı\",\r\n\r\n\r\n\t\tminutes: \"Dakika\",\r\n\t\thours: \"Saat\",\r\n\t\tdays: \"Gün\",\r\n\t\tweeks: \"Hafta\",\r\n\t\tmonths: \"Ay\",\r\n\t\tyears: \"Yıl\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Ýptal\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Січень\", \"Лютий\", \"Березень\", \"Квітень\", \"Травень\", \"Червень\", \"Липень\", \"Серпень\", \"Вересень\", \"Жовтень\", \"Листопад\", \"Грудень\"],\r\n\t\tmonth_short: [\"Січ\", \"Лют\", \"Бер\", \"Кві\", \"Тра\", \"Чер\", \"Лип\", \"Сер\", \"Вер\", \"Жов\", \"Лис\", \"Гру\"],\r\n\t\tday_full: [\"Неділя\", \"Понеділок\", \"Вівторок\", \"Середа\", \"Четвер\", \"П'ятниця\", \"Субота\"],\r\n\t\tday_short: [\"Нед\", \"Пон\", \"Вів\", \"Сер\", \"Чет\", \"Птн\", \"Суб\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Нове завдання\",\r\n\t\ticon_save: \"Зберегти\",\r\n\t\ticon_cancel: \"Відміна\",\r\n\t\ticon_details: \"Деталі\",\r\n\t\ticon_edit: \"Редагувати\",\r\n\t\ticon_delete: \"Вилучити\",\r\n\t\tconfirm_closing: \"\", // Ваші зміни втратяться. Ви впевнені ?\r\n\t\tconfirm_deleting: \"Подія вилучиться назавжди. Ви впевнені?\",\r\n\t\tsection_description: \"Опис\",\r\n\t\tsection_time: \"Часовий проміжок\",\r\n\t\tsection_type: \"Тип\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Відміна\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","import * as utils from \"../utils/utils\";\r\nimport constants from \"../constants\";\r\nimport ExtensionManager from \"../ext/extension_manager\";\r\n\r\nimport services from \"../core/common/services\";\r\nimport config from \"../core/common/config\";\r\nimport ajax from \"../core/common/ajax\";\r\nimport date from \"../core/common/date\";\r\nimport {remoteEvents} from \"../core/remote/remote_events\";\r\n\r\nimport DnD from \"../core/common/dnd\";\r\nimport templates from \"../core/common/templates\";\r\nimport eventable from \"../utils/eventable\";\r\n\r\nimport StateService from \"../core/common/state\";\r\n\r\nimport Promise from \"../utils/promise\";\r\nimport env from \"../utils/env\";\r\nimport datastoreHooks from \"../core/datastore/datastore_hooks\";\r\nimport DataProcessor from \"../core/dataprocessor\";\r\n\r\nimport plugins from \"../core/plugins\";\r\n\r\nimport grid_column_api from \"../core/grid_column_api\";\r\nimport tasks from \"../core/tasks\";\r\nimport parsing from \"../core/loading/parsing\";\r\nimport work_time from \"../core/worktime/work_time\";\r\nimport data from \"../core/data\";\r\n\r\nimport void_script_second from \"../publish_helpers/void_script_second\";\r\n\r\nimport data_task_types from \"../core/data_task_types\";\r\nimport cached_functions from \"../core/cached_functions\";\r\n\r\nimport gantt_core from \"../core/gantt_core\";\r\nimport destructor from \"../core/destructor\";\r\nimport void_script_third from \"../publish_helpers/void_script_third\";\r\n\r\nimport i18nFactory from \"../locale\";\r\n\r\nfunction DHXGantt(){\r\n\tthis.constants = constants;\r\n\tthis.version = VERSION;\r\n\tthis.license = LICENSE;\r\n\tthis.templates = {};\r\n\tthis.ext = {};\r\n\tthis.keys = {\r\n\t\tedit_save: this.constants.KEY_CODES.ENTER,\r\n\t\tedit_cancel: this.constants.KEY_CODES.ESC\r\n\t};\r\n}\r\n\r\nexport default function(supportedExtensions) {\r\n\t// use a named constructor to make gantt instance discoverable in heap snapshots\r\n\tvar gantt = new DHXGantt();\r\n\r\n\tvar extensionManager = new ExtensionManager(supportedExtensions);\r\n\tvar activePlugins = {};\r\n\tgantt.plugins = function(config){\r\n\t\tfor(var i in config){\r\n\t\t\tif(config[i] && !activePlugins[i]){\r\n\t\t\t\tvar plugin = extensionManager.getExtension(i);\r\n\t\t\t\tif(plugin){\r\n\t\t\t\t\tplugin(gantt);\r\n\t\t\t\t\tactivePlugins[i] = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn activePlugins;\r\n\t};\r\n\r\n\tgantt.$services = services();\r\n\tgantt.config = config();\r\n\tgantt.ajax =  ajax(gantt);\r\n\tgantt.date = date(gantt);\r\n\tgantt.RemoteEvents = remoteEvents;\r\n\r\n\tvar dnd = DnD(gantt);\r\n\tgantt.$services.setService(\"dnd\", function(){return dnd;});\r\n\r\n\tvar templatesLoader = templates(gantt);\r\n\tgantt.$services.setService(\"templateLoader\", function () {\r\n\t\treturn templatesLoader;\r\n\t});\r\n\r\n\teventable(gantt);\r\n\r\n\t\r\n\tvar stateService = new StateService();\r\n\r\n\tstateService.registerProvider(\"global\", function () {\r\n\t\tvar res = {\r\n\t\t\tmin_date: gantt._min_date,\r\n\t\t\tmax_date: gantt._max_date,\r\n\t\t\tselected_task: null\r\n\t\t};\r\n\r\n\t\t// do not throw error if getState called from non-initialized gantt\r\n\t\tif(gantt.$data && gantt.$data.tasksStore){\r\n\t\t\tres.selected_task = gantt.$data.tasksStore.getSelectedId();\r\n\t\t}\r\n\t\treturn res;\r\n\t});\r\n\tgantt.getState = stateService.getState;\r\n\tgantt.$services.setService(\"state\", function () {\r\n\t\treturn stateService;\r\n\t});\r\n\r\n\tutils.mixin(gantt, utils);\r\n\r\n\tgantt.Promise = Promise;\r\n\tgantt.env = env;\r\n\r\n\tdatastoreHooks(gantt);\r\n\r\n\tgantt.dataProcessor = DataProcessor.DEPRECATED_api;\r\n\tgantt.createDataProcessor = DataProcessor.createDataProcessor;\r\n\r\n\tplugins(gantt);\r\n\r\n\tgrid_column_api(gantt);\r\n\ttasks(gantt);\r\n\tparsing(gantt);\r\n\twork_time(gantt);\r\n\tdata(gantt);\r\n\r\n\tvoid_script_second(gantt);\r\n\r\n\tdata_task_types(gantt);\r\n\tcached_functions(gantt);\r\n\r\n\tgantt_core(gantt);\r\n\tdestructor(gantt);\r\n\tvoid_script_third(gantt);\r\n\r\n\tvar i18n = i18nFactory();\r\n\tgantt.i18n = {\r\n\t\taddLocale: i18n.addLocale,\r\n\t\tsetLocale: function(locale){\r\n\t\t\tif(typeof locale === \"string\"){\r\n\t\t\t\tvar localeObject = i18n.getLocale(locale);\r\n\t\t\t\tif(!localeObject){\r\n\t\t\t\t\tlocaleObject = i18n.getLocale(\"en\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgantt.locale = localeObject;\r\n\t\t\t}else if(locale){\r\n\t\t\t\tif(!gantt.locale){\r\n\t\t\t\t\tgantt.locale = locale;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfor(var i in locale){\r\n\t\t\t\t\t\tif(locale[i] && typeof locale[i] === \"object\"){\r\n\t\t\t\t\t\t\tif(!gantt.locale[i]){\r\n\t\t\t\t\t\t\t\tgantt.locale[i] = {};\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tgantt.mixin(gantt.locale[i], locale[i], true);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tgantt.locale[i] = locale[i];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst labels = gantt.locale.labels;\r\n\t\t\tlabels.gantt_save_btn = labels.gantt_save_btn || labels.icon_save;\r\n\t\t\tlabels.gantt_cancel_btn = labels.gantt_cancel_btn || labels.icon_cancel;\r\n\t\t\tlabels.gantt_delete_btn = labels.gantt_delete_btn || labels.icon_delete;\r\n\t\t},\r\n\t\tgetLocale: i18n.getLocale\r\n\t};\r\n\tgantt.i18n.setLocale(\"en\");\r\n\treturn gantt;\r\n};","export default function(){\r\n\tvar services = {};\r\n\tfunction register (name, getter){\r\n\t\tservices[name] = getter;\r\n\t}\r\n\r\n\tfunction getService(name){\r\n\t\tif(!services[name]){\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn services[name]();\r\n\t}\r\n\r\n\tfunction dropService(name) {\r\n\t\tif (services[name]) {\r\n\t\t\tdelete services[name];\r\n\t\t}\r\n\t}\r\n\r\n\tvar servicesEnum = {};\r\n\r\n\treturn {\r\n\t\tservices: servicesEnum,\r\n\t\tsetService: register,\r\n\t\tgetService: getService,\r\n\t\tdropService: dropService,\r\n\t\tdestructor: function(){\r\n\t\t\tfor(var i in services){\r\n\t\t\t\tif(services[i]){\r\n\t\t\t\t\tvar service = services[i];\r\n\t\t\t\t\tif(service && service.destructor){\r\n\t\t\t\t\t\tservice.destructor();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tservices = null;\r\n\t\t}\r\n\t};\r\n};\r\n","type DurationUnits = \"minute\" | \"hour\" | \"day\" | \"week\" | \"month\" | \"year\";\r\ntype Align = \"left\" | \"center\" | \"right\";\r\ntype SectionType = \"textarea\"\r\n\t\t\t\t\t| \"time\"\r\n\t\t\t\t\t| \"duration\"\r\n\t\t\t\t\t| \"select\"\r\n\t\t\t\t\t| \"typeselect\"\r\n\t\t\t\t\t| \"parent\"\r\n\t\t\t\t\t| \"template\"\r\n\t\t\t\t\t| \"checkbox\"\r\n\t\t\t\t\t| \"radio\"\r\n\t\t\t\t\t| \"resources\"\r\n\t\t\t\t\t| \"constraint\";\r\n\r\ntype LightboxSection = Array<ILightboxSection\r\n\t| ILightboxTimeAndDurationSection\r\n\t| ILightboxInputControl\r\n\t| ILightboxSelectControl\r\n\t| ILightboxParentControl\r\n\t| ILightboxTypeselectControl>;\r\n\r\ntype LayoutView = \"grid\"\r\n\t| \"timeline\"\r\n\t| \"resizer\"\r\n\t| \"scrollbar\"\r\n\t| \"resourceGrid\"\r\n\t| \"resourceTimeline\";\r\n\r\ninterface IColumnItem {\r\n\tname: string;\r\n\tlabel?: string;\r\n\ttree?: boolean;\r\n\talign?: Align;\r\n\thide?: boolean;\r\n\tmax_width?: number;\r\n\tmin_width?: number;\r\n\tresize?: boolean;\r\n\ttemplate?: (obj: any) => string;\r\n\twidth?: number | \"*\";\r\n}\r\n\r\nexport type TModifierKeys = \"metaKey\" | \"ctrlKey\" | \"altKey\" | \"shiftKey\" | false | undefined;\r\n\r\nexport interface IScale {\r\n\tcss?: () => string;\r\n\tdate?: string;\r\n\tstep: number;\r\n\ttemplate?: (date: Date) => string;\r\n\tunit: DurationUnits;\r\n}\r\n\r\ninterface ILightboxSection {\r\n\tname: string;\r\n\tmap_to: string;\r\n\ttype: SectionType;\r\n\theight?: number;\r\n\tfocus?: boolean;\r\n}\r\n\r\ninterface ILightboxTimeAndDurationSection extends ILightboxSection {\r\n\treadonly: boolean;\r\n\tyear_range: number[] | number;\r\n\tsingle_date: boolean;\r\n\ttime_format: string;\r\n}\r\n\r\ninterface ILightboxInputControl extends ILightboxSection {\r\n\tdefault_value?: any;\r\n\toptions?: Array<{key: string, label: string}>;\r\n}\r\n\r\ninterface ILightboxSelectControl extends ILightboxInputControl {\r\n\tonchange: () => boolean | undefined;\r\n}\r\n\r\ninterface ILightboxParentControl extends ILightboxSection {\r\n\tallow_root: boolean;\r\n\troot_label: string;\r\n\tsort?: (a: any, b: any) => -1 | 0 | 1;\r\n\tfilter?: (task: string | number | object) => boolean;\r\n\ttemplate?: (start: Date, end: Date, ev: object) => string;\r\n}\r\n\r\ninterface ILightboxTypeselectControl extends ILightboxSection {\r\n\tfilter?: (typeName: string) => boolean;\r\n}\r\n\r\n\r\ninterface ILayoutScrollbar {\r\n\tview: \"scrollbar\";\r\n\tscroll?: \"x\" | \"y\";\r\n\tid: string;\r\n\theight?: number;\r\n\twidth?: number;\r\n}\r\n\r\ninterface ILayoutView {\r\n\tview: LayoutView;\r\n\tid?: string;\r\n\tscrollX?: string;\r\n\tscrollY?: string;\r\n\tconfig?: object;\r\n}\r\n\r\ninterface ILayoutGrid extends ILayoutView {\r\n\tview: \"grid\";\r\n\tbind?: string;\r\n}\r\n\r\ninterface ILayoutTimeline extends ILayoutView {\r\n\tview: \"timeline\";\r\n\tbindLinks?: string;\r\n\tlayers?: any[];\r\n}\r\n\r\ninterface ILayoutResizer {\r\n\tview?: undefined;\r\n\tresizer: boolean;\r\n\twidth: number;\r\n}\r\n\r\ninterface ILayoutResourceGrid extends ILayoutView {\r\n\tview: \"resourceGrid\";\r\n\twidth: number;\r\n\tgroup: \"string\";\r\n}\r\n\r\ninterface ILayoutResourceTimeline extends ILayoutView {\r\n\tview: \"resourceTimeline\";\r\n\twidth: number;\r\n\tgroup: \"string\";\r\n}\r\n\r\ninterface ILayoutHtml {\r\n\thtml: string;\r\n\tcss: string;\r\n\twidth: number;\r\n}\r\n\r\ntype LayoutRow = ILayoutGrid\r\n\t| ILayoutTimeline\r\n\t| ILayoutResizer\r\n\t| ILayoutResourceGrid\r\n\t| ILayoutResourceTimeline\r\n\t| ILayoutHtml\r\n\t| ILayoutScrollbar\r\n\t| { cols: LayoutCol[] };\r\n\r\ntype LayoutCol = ILayoutGrid\r\n\t| ILayoutTimeline\r\n\t| ILayoutResizer\r\n\t| ILayoutResourceGrid\r\n\t| ILayoutResourceTimeline\r\n\t| ILayoutHtml\r\n\t| ILayoutScrollbar\r\n\t| { rows: LayoutRow[] };\r\n\r\ninterface ILayout {\r\n\tcss: string;\r\n\trows?: LayoutRow[];\r\n\tcols?: LayoutCol[];\r\n}\r\n\r\ntype TCsp = boolean | \"auto\";\r\n\r\ninterface IResourceConfig {\r\n\tdataprocessor_assignments?: boolean;\r\n\tdataprocessor_resources?: boolean;\r\n\teditable_resource_diagram?: boolean;\r\n\tresource_store?: {\r\n\t\ttype?: \"treeDataStore\"|\"dataStore\"|string;\r\n\t\tfetchTasks?: boolean;\r\n\t\tinitItem?: (item: any) => any;\r\n\t};\r\n\tlightbox_resources?: (resources: any[]) => any[];\r\n\r\n}\r\n\r\ninterface IGanttConfig {\r\n\tlayout: ILayout;\r\n\tlinks: {\r\n\t\tfinish_to_start: \"0\";\r\n\t\tstart_to_start: \"1\";\r\n\t\tfinish_to_finish: \"2\";\r\n\t\tstart_to_finish: \"3\";\r\n\t};\r\n\ttypes: {\r\n\t\ttask: string;\r\n\t\tproject: string;\r\n\t\tmilestone: string;\r\n\t};\r\n\tauto_types: boolean;\r\n\tduration_unit: DurationUnits;\r\n\twork_time: boolean;\r\n\tcorrect_work_time: boolean;\r\n\tdeadlines: boolean;\r\n\tskip_off_time: boolean;\r\n\tcascade_delete: boolean;\r\n\tautosize: boolean | string;\r\n\tautoscroll: boolean;\r\n\tshow_links: boolean;\r\n\tshow_task_cells: boolean;\r\n\tautosize_min_width: number;\r\n\tautoscroll_speed: number;\r\n\tdeepcopy_on_parse: boolean;\r\n\tstatic_background: boolean;\r\n\tstatic_background_cells: boolean;\r\n\tbranch_loading: boolean;\r\n\tbranch_loading_property: string;\r\n\tshow_loading: boolean;\r\n\tshow_chart: boolean;\r\n\tshow_grid: boolean;\r\n\tmin_duration: number;\r\n\tdate_format: string; // use instead xml_date\r\n\txml_date?: string; // deprecated\r\n\tstart_on_monday: boolean;\r\n\tserver_utc: boolean;\r\n\tshow_progress: boolean;\r\n\tfit_tasks: boolean;\r\n\tselect_task: boolean;\r\n\tscroll_on_click: boolean;\r\n\tsmart_rendering: boolean;\r\n\tpreserve_scroll: boolean;\r\n\treadonly: boolean;\r\n\tcontainer_resize_timeout: number;\r\n\r\n\t/*grid */\r\n\tdate_grid: string;\r\n\r\n\tdrag_links: boolean;\r\n\tdrag_progress: boolean;\r\n\tdrag_resize: boolean;\r\n\tdrag_project: boolean;\r\n\tdrag_move: boolean;\r\n\tdrag_mode: {\r\n\t\tresize: \"resize\",\r\n\t\tprogress: \"progress\",\r\n\t\tmove: \"move\",\r\n\t\tignore: \"ignore\"\r\n\t};\r\n\tround_dnd_dates: boolean;\r\n\tlink_wrapper_width: number;\r\n\troot_id: string | number;\r\n\r\n\tlink_arrow_size:number;\r\n\r\n\tautofit: boolean;\r\n\tcolumns: IColumnItem[];\r\n\r\n\t/* scale*/\r\n\t/* it will be deprecated */\r\n\tdate_scale?: string;\r\n\tstep?: number;\r\n\tscale_unit?: DurationUnits;\r\n\tsubscales?: IScale[];\r\n\t/* it will be deprecated end */\r\n\r\n\tscales: IScale[];\r\n\r\n\tscale_offset_minimal: boolean;\r\n\r\n\tinherit_scale_class: boolean;\r\n\r\n\r\n\ttime_step: number;\r\n\tduration_step: number;\r\n\r\n\r\n\ttask_date: string;\r\n\ttime_picker: string;\r\n\ttask_attribute: string;\r\n\tlink_attribute: string;\r\n\tlayer_attribute: string;\r\n\tbuttons_left: string[];\r\n\t_migrate_buttons: {\r\n\t\tdhx_save_btn: \"gantt_save_btn\",\r\n\t\tdhx_cancel_btn: \"gantt_cancel_btn\",\r\n\t\tdhx_delete_btn: \"gantt_delete_btn\"\r\n\t};\r\n\r\n\tbuttons_right: string[];\r\n\r\n\r\n\tlightbox: {\r\n\t\tsections?: LightboxSection,\r\n\t\tproject_sections?: LightboxSection,\r\n\t\tmilestone_sections?: LightboxSection\r\n\t};\r\n\tdrag_lightbox: boolean;\r\n\tsort: boolean;\r\n\tdetails_on_create: boolean;\r\n\tdetails_on_dblclick: boolean;\r\n\tinitial_scroll: boolean;\r\n\ttask_scroll_offset: number;\r\n\r\n\torder_branch: boolean;\r\n\torder_branch_free: boolean;\r\n\r\n\t// task_height is deprecated, use 'bar_height` instead\r\n\ttask_height: number | \"full\" | undefined;\r\n\tbar_height: number | \"full\";\r\n\tmin_column_width: number;\r\n\tbar_height_padding: number,\r\n\trow_height: number,\r\n\r\n\t// min width for grid column (when resizing)\r\n\tmin_grid_column_width: number;\r\n\t// name of the attribute with column index for resize element\r\n\tgrid_resizer_column_attribute: string;\r\n\t// name of the attribute with column index for resize element\r\n\t// grid_resizer_attribute: string; // usage of this parameter is not found\r\n\r\n\t// grid width can be increased after the column has been resized\r\n\tkeep_grid_width: boolean;\r\n\r\n\t// grid width can be adjusted\r\n\tgrid_resize: boolean;\r\n\tgrid_elastic_columns: boolean;\r\n\tshow_tasks_outside_timescale: boolean;\r\n\tshow_unscheduled: boolean;\r\n\treadonly_property: string;\r\n\teditable_property: string;\r\n\tcalendar_property: string;\r\n\tresource_calendars: object;\r\n\tdynamic_resource_calendars: boolean;\r\n\tinherit_calendar: boolean;\r\n\ttype_renderers: object;\r\n\r\n\tresize_rows: boolean;\r\n\t// name of the attribute with row index for resize element\r\n\ttask_grid_row_resizer_attribute: string;\r\n\t// min height for row (when resizing)\r\n\tmin_task_grid_row_height: number;\r\n\r\n\topen_tree_initially: boolean;\r\n\toptimize_render: boolean;\r\n\tprevent_default_scroll: boolean;\r\n\tshow_errors: boolean;\r\n\twai_aria_attributes: boolean;\r\n\tsmart_scales: boolean;\r\n\trtl: boolean;\r\n\tplaceholder_task: boolean | object;\r\n\thorizontal_scroll_key: TModifierKeys;\r\n\tdrag_timeline: {\r\n\t\tuseKey: TModifierKeys;\r\n\t\tignore: string;\r\n\t\trender?: boolean;\r\n\t};\r\n\tdrag_multiple: boolean;\r\n\tcsp: TCsp;\r\n\r\n\tresources?: IResourceConfig;\r\n}\r\n\r\nexport default () => {\r\n\tconst result: IGanttConfig = {\r\n\t\tlayout: {\r\n\t\t\tcss: \"gantt_container\",\r\n\t\t\trows: [\r\n\t\t\t\t{\r\n\t\t\t\t\tcols: [\r\n\t\t\t\t\t\t{view: \"grid\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{resizer: true, width: 1},\r\n\t\t\t\t\t\t{view: \"timeline\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{view: \"scrollbar\", id: \"scrollVer\"}\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\t{view: \"scrollbar\", id: \"scrollHor\", height: 20}\r\n\t\t\t]\r\n\t\t},\r\n\t\tlinks: {\r\n\t\t\tfinish_to_start: \"0\",\r\n\t\t\tstart_to_start: \"1\",\r\n\t\t\tfinish_to_finish: \"2\",\r\n\t\t\tstart_to_finish: \"3\"\r\n\t\t},\r\n\t\ttypes: {\r\n\t\t\ttask: \"task\",\r\n\t\t\tproject: \"project\",\r\n\t\t\tmilestone: \"milestone\"\r\n\t\t},\r\n\t\tauto_types: false,\r\n\t\tduration_unit: \"day\",\r\n\t\twork_time: false,\r\n\t\tcorrect_work_time: false,\r\n\t\tskip_off_time: false,\r\n\r\n\t\tcascade_delete: true,\r\n\r\n\t\tautosize: false,\r\n\t\tautosize_min_width: 0,\r\n\t\tautoscroll: true,\r\n\t\tautoscroll_speed: 30,\r\n\t\tdeepcopy_on_parse: false,\r\n\t\tshow_links: true,\r\n\t\tshow_task_cells: true,\r\n\t\t// replace backgroung of the task area with a canvas img\r\n\t\tstatic_background: false,\r\n\t\tstatic_background_cells: true,\r\n\t\tbranch_loading: false,\r\n\t\tbranch_loading_property: \"$has_child\",\r\n\t\tshow_loading: false,\r\n\t\tshow_chart: true,\r\n\t\tshow_grid: true,\r\n\t\tmin_duration: 60 * 60 * 1000,\r\n\t\tdate_format: \"%d-%m-%Y %H:%i\", // use instead xml_date\r\n\t\txml_date: undefined, // \"%d-%m-%Y %H:%i\", // deprecated\r\n\t\tstart_on_monday: true,\r\n\t\tserver_utc: false,\r\n\t\tshow_progress: true,\r\n\t\tfit_tasks: false,\r\n\t\tselect_task: true,\r\n\t\tscroll_on_click: true,\r\n\t\tsmart_rendering: true,\r\n\t\tpreserve_scroll: true,\r\n\t\treadonly: false,\r\n\t\tcontainer_resize_timeout: 20,\r\n\t\tdeadlines: true,\r\n\r\n\t\t/*grid */\r\n\t\tdate_grid: \"%Y-%m-%d\",\r\n\r\n\t\tdrag_links: true,\r\n\t\tdrag_progress: true,\r\n\t\tdrag_resize: true,\r\n\t\tdrag_project: false,\r\n\t\tdrag_move: true,\r\n\t\tdrag_mode: {\r\n\t\t\tresize: \"resize\",\r\n\t\t\tprogress: \"progress\",\r\n\t\t\tmove: \"move\",\r\n\t\t\tignore: \"ignore\"\r\n\t\t},\r\n\t\tround_dnd_dates: true,\r\n\t\tlink_wrapper_width: 20,\r\n\t\tlink_arrow_size:12,\r\n\t\troot_id: 0,\r\n\r\n\t\tautofit: false, // grid column automatic fit grid_width config\r\n\t\tcolumns: [\r\n\t\t\t{name: \"text\", tree: true, width: \"*\", resize: true},\r\n\t\t\t{name: \"start_date\", align: \"center\", resize: true},\r\n\t\t\t{name: \"duration\", align: \"center\"},\r\n\t\t\t{name: \"add\", width: 44}\r\n\t\t],\r\n\r\n\t\t/*scale*/\r\n\r\n\t\tscale_offset_minimal: true,\r\n\t\tinherit_scale_class: false,\r\n\r\n\t\tscales: [\r\n\t\t\t{\r\n\t\t\t\tunit: \"day\",\r\n\t\t\t\tstep: 1,\r\n\t\t\t\tdate: \"%d %M\"\r\n\t\t\t}\r\n\t\t],\r\n// \t\tdate_scale: \"%d %M\",\r\n\r\n\t\ttime_step: 60,\r\n\t\tduration_step: 1,\r\n\t\ttask_date: \"%d %F %Y\",\r\n\t\ttime_picker: \"%H:%i\",\r\n\t\ttask_attribute: \"data-task-id\",\r\n\t\tlink_attribute: \"data-link-id\",\r\n\t\tlayer_attribute: \"data-layer\",\r\n\t\tbuttons_left: [\r\n\t\t\t\"gantt_save_btn\",\r\n\t\t\t\"gantt_cancel_btn\"\r\n\t\t],\r\n\t\t_migrate_buttons: {\r\n\t\t\tdhx_save_btn: \"gantt_save_btn\",\r\n\t\t\tdhx_cancel_btn: \"gantt_cancel_btn\",\r\n\t\t\tdhx_delete_btn: \"gantt_delete_btn\"\r\n\t\t},\r\n\t\tbuttons_right: [\r\n\t\t\t\"gantt_delete_btn\"\r\n\t\t],\r\n\t\tlightbox: {\r\n\t\t\tsections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"time\", type: \"duration\", map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tproject_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", readonly: true, map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tmilestone_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", single_date: true, map_to: \"auto\"}\r\n\t\t\t]\r\n\t\t},\r\n\t\tdrag_lightbox: true,\r\n\t\tsort: false,\r\n\t\tdetails_on_create: true,\r\n\t\tdetails_on_dblclick: true,\r\n\t\tinitial_scroll: true,\r\n\t\ttask_scroll_offset: 100,\r\n\r\n\t\torder_branch: false,\r\n\t\torder_branch_free: false,\r\n\r\n\t\t// task height is deprecated, use 'bar_height' instead\r\n\t\ttask_height: undefined,// number px of 'full' for row height\r\n\t\tbar_height: \"full\",\r\n\t\tbar_height_padding:9,\r\n\t\tmin_column_width: 70,\r\n\r\n\t\t// min width for grid column (when resizing)\r\n\t\tmin_grid_column_width: 70,\r\n\t\t// name of the attribute with column index for resize element\r\n\t\tgrid_resizer_column_attribute: \"data-column-index\",\r\n\t\t// name of the attribute with column index for resize element\r\n\t\t// grid_resizer_attribute: \"grid_resizer\", // - usage of this parameter is not found in code\r\n\r\n\t\t// grid width can be increased after the column has been resized\r\n\t\tkeep_grid_width: false,\r\n\r\n\t\t// grid width can be adjusted\r\n\t\tgrid_resize: false,\r\n\t\tgrid_elastic_columns: false,\r\n\t\tshow_tasks_outside_timescale: false,\r\n\t\tshow_unscheduled: true,\r\n\r\n\t\tresize_rows: false,\r\n\t\t// name of the attribute with row index for resize element\r\n\t\ttask_grid_row_resizer_attribute: \"data-row-index\",\r\n\t\t// min height for row (when resizing)\r\n\t\tmin_task_grid_row_height: 30,\r\n\t\trow_height: 36,\r\n\r\n\t\t//\r\n\t\treadonly_property: \"readonly\",\r\n\t\teditable_property: \"editable\",\r\n\t\tcalendar_property: \"calendar_id\",\r\n\t\tresource_calendars: {},\r\n\t\tdynamic_resource_calendars: false,\r\n\t\tinherit_calendar: false,\r\n\t\ttype_renderers: {},\r\n\r\n\t\topen_tree_initially: false,\r\n\t\toptimize_render: true,\r\n\t\tprevent_default_scroll: false,\r\n\t\tshow_errors: true,\r\n\t\twai_aria_attributes: true,\r\n\t\tsmart_scales: true,\r\n\t\trtl:false,\r\n\t\tplaceholder_task: false,\r\n\t\thorizontal_scroll_key: \"shiftKey\",\r\n\t\tdrag_timeline: {\r\n\t\t\tuseKey: undefined,\r\n\t\t\tignore: \".gantt_task_line, .gantt_task_link\",\r\n\t\t\trender: false\r\n\t\t},\r\n\t\tdrag_multiple: true,\r\n\t\tcsp: \"auto\"\r\n\t};\r\n\treturn result;\r\n};\r\n","import eventable from \"../../utils/eventable\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport timeout from \"../../utils/timeout\";\r\nimport global from \"../../utils/global\";\r\nimport * as domHelpers from \"../ui/utils/dom_helpers\";\r\n\r\nexport default function(gantt){\r\n\r\n\tfunction copyDomEvent(e){\r\n\t\treturn {\r\n\t\t\ttarget: e.target || e.srcElement,\r\n\t\t\tpageX: e.pageX,\r\n\t\t\tpageY: e.pageY,\r\n\t\t\tclientX: e.clientX,\r\n\t\t\tclientY: e.clientY,\r\n\t\t\tmetaKey: e.metaKey,\r\n\t\t\tshiftKey: e.shiftKey,\r\n\t\t\tctrlKey: e.ctrlKey,\r\n\t\t\taltKey: e.altKey\r\n\t\t};\r\n\t}\r\n\r\n\tfunction DnD(obj, config) {\r\n\t\tthis._obj = obj;\r\n\t\tthis._settings = config || {};\r\n\t\teventable(this);\r\n\r\n\t\tvar inputMethods = this.getInputMethods();\r\n\r\n\t\tthis._drag_start_timer = null;\r\n\t\tgantt.attachEvent(\"onGanttScroll\", utils.bind(function (left, top) {\r\n\t\t\tthis.clearDragTimer();\r\n\t\t}, this));\r\n\r\n\t\tvar lastDown = 0;\r\n\t\tvar eventParams = {passive: false};\r\n\t\tfor(var i = 0; i < inputMethods.length; i++){\r\n\t\t\t(utils.bind(function(input){\r\n\r\n\t\t\t\tgantt.event(obj, input.down, utils.bind(function (e) {\r\n\t\t\t\t\tif(!input.accessor(e)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (typeof e.button !== 'undefined' && e.button !== 0) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(config.preventDefault && config.selector && domHelpers.closest(e.target, config.selector)){\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (gantt.config.touch && e.timeStamp && e.timeStamp - lastDown < 300) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._settings.original_target = copyDomEvent(e);\r\n\r\n\t\t\t\t\tthis._settings.original_element_sizes = {\r\n\t\t\t\t\t\t...domHelpers.getRelativeEventPosition(e, domHelpers.getClosestSizedElement(obj)), \r\n\t\t\t\t\t\twidth: e.target.offsetWidth,\r\n\t\t\t\t\t\theight: e.target.offsetHeight\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t\t\tthis.clearDragTimer();\r\n\t\t\t\t\t\tthis._drag_start_timer = setTimeout(utils.bind(function () {\r\n\t\t\t\t\t\t\tif(gantt.getState().lightbox){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t\t}, this), gantt.config.touch_drag);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this), eventParams);\r\n\t\t\t\tvar eventElement = document.body;\r\n\t\t\t\tgantt.event(eventElement, input.up, utils.bind(function (e) {\r\n\t\t\t\t\tif(!input.accessor(e)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.clearDragTimer();\r\n\t\t\t\t}, this), eventParams);\r\n\r\n\t\t\t}, this))(inputMethods[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tDnD.prototype = {\r\n\t\ttraceDragEvents: function (domElement, inputMethod) {\r\n\t\t\tvar mousemove = utils.bind(function (e) {\r\n\t\t\t\treturn this.dragMove(domElement, e, inputMethod.accessor);\r\n\t\t\t}, this);\r\n\t\t\tutils.bind(function (e) {\r\n\t\t\t\treturn this.dragScroll(domElement, e);\r\n\t\t\t}, this);\r\n\r\n\t\t\tvar limited_mousemove = utils.bind(function (e) {\r\n\t\t\t\tif (this.config.started && utils.defined(this.config.updates_per_second)) {\r\n\t\t\t\t\tif (!timeout(this, this.config.updates_per_second))\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar dndActive = mousemove(e);\r\n\r\n\t\t\t\tif (dndActive) {\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tif (e && e.preventDefault && e.cancelable){//e.cancelable condition - because navigator.vibrate is blocked by Chrome\r\n\t\t\t\t\t\t\te.preventDefault();//Cancel default action on DND\r\n\t\t\t\t\t\t} //Cancel default action on DND\r\n\t\t\t\t\t}catch (e){\r\n\t\t\t\t\t\t// just suppress the exception, nothing needed to be done here\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//e.cancelBubble = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn dndActive;\r\n\t\t\t}, this);\r\n\t\t\tvar eventElement = domHelpers.getRootNode(gantt.$root);\r\n\t\t\tvar mousemoveContainer = this.config.mousemoveContainer || domHelpers.getRootNode(gantt.$root);\r\n\r\n\t\t\tvar eventParams = {passive: false};\r\n\t\t\tvar mouseup = utils.bind(function (e) {\r\n\t\t\t\tgantt.eventRemove(mousemoveContainer, inputMethod.move, limited_mousemove);\r\n\t\t\t\tgantt.eventRemove(eventElement, inputMethod.up, mouseup, eventParams);\r\n\t\t\t\treturn this.dragEnd(domElement);\r\n\t\t\t}, this);\r\n\r\n\t\t\tgantt.event(mousemoveContainer, inputMethod.move, limited_mousemove, eventParams);\r\n\t\t\tgantt.event(eventElement, inputMethod.up, mouseup, eventParams);\r\n\t\t},\r\n\t\tcheckPositionChange: function (pos) {\r\n\t\t\tvar diff_x = pos.x - this.config.pos.x;\r\n\t\t\tvar diff_y = pos.y - this.config.pos.y;\r\n\t\t\tvar distance = Math.sqrt(Math.pow(Math.abs(diff_x), 2) + Math.pow(Math.abs(diff_y), 2));\r\n\r\n\t\t\tif (distance > this.config.sensitivity) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tinitDnDMarker: function () {\r\n\t\t\t// create dnd placeholder and put it in dom\r\n\t\t\tvar marker = this.config.marker = document.createElement(\"div\");\r\n\t\t\tmarker.className = \"gantt_drag_marker\";\r\n\t\t\t// GS-1333: don't show any message when we resize grid columns\r\n\t\t\tmarker.innerHTML = \"\";\r\n\t\t\tdocument.body.appendChild(marker);\r\n\t\t},\r\n\t\tbackupEventTarget: function (domEvent, getEvent) {\r\n\t\t\tif (!gantt.config.touch) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// keep original event target in DOM in order to keep dnd on touchmove event\r\n\t\t\tvar e = getEvent(domEvent);\r\n\r\n\t\t\tvar el = e.target || e.srcElement;\r\n\t\t\tvar copy = el.cloneNode(true);\r\n\t\t\t//this.config.target.target = copy;\r\n\t\t\tthis.config.original_target = copyDomEvent(e);\r\n\t\t\tthis.config.original_target.target = copy;\r\n\t\t\tthis.config.backup_element = el;\r\n\t\t\tel.parentNode.appendChild(copy);\r\n\r\n\t\t\tel.style.display = \"none\";\r\n\t\t\tvar mousemoveContainer = this.config.mousemoveContainer || document.body;\r\n\t\t\tmousemoveContainer.appendChild(el);\r\n\t\t},\r\n\t\tgetInputMethods: function () {\r\n\t\t\t// bind actions to browser events\r\n\t\t\tvar inputMethods = [];\r\n\r\n\t\t\tinputMethods.push({\r\n\t\t\t\t\"move\": \"mousemove\",\r\n\t\t\t\t\"down\": \"mousedown\",\r\n\t\t\t\t\"up\": \"mouseup\",\r\n\t\t\t\t\"accessor\": function (e) {\r\n\t\t\t\t\treturn e;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\r\n\t\t\t\tvar touchEventsSupported = true;\r\n\t\t\t\ttry{\r\n\t\t\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t\t\t}catch (e){\r\n\t\t\t\t\ttouchEventsSupported = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(touchEventsSupported){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"touchmove\",\r\n\t\t\t\t\t\t\"down\": \"touchstart\",\r\n\t\t\t\t\t\t\"up\": \"touchend\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\ttarget: document.elementFromPoint(ev.touches[0].clientX, ev.touches[0].clientY),\r\n\t\t\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else if(global.navigator.pointerEnabled){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"pointermove\",\r\n\t\t\t\t\t\t\"down\": \"pointerdown\",\r\n\t\t\t\t\t\t\"up\": \"pointerup\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}else if (global.navigator.msPointerEnabled){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"MSPointerMove\",\r\n\t\t\t\t\t\t\"down\": \"MSPointerDown\",\r\n\t\t\t\t\t\t\"up\": \"MSPointerUp\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn inputMethods;\r\n\t\t},\r\n\t\tclearDragTimer: function () {\r\n\t\t\tif (this._drag_start_timer) {\r\n\t\t\t\tclearTimeout(this._drag_start_timer);\r\n\t\t\t\tthis._drag_start_timer = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdragStart: function (obj, e, inputMethod) {\r\n\t\t\tif (this.config && this.config.started) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.config = {\r\n\t\t\t\tobj: obj,\r\n\t\t\t\tmarker: null,\r\n\t\t\t\tstarted: false,\r\n\t\t\t\tpos: this.getPosition(e),\r\n\t\t\t\tsensitivity: 4\r\n\t\t\t};\r\n\t\t\tif (this._settings)\r\n\t\t\t\tutils.mixin(this.config, this._settings, true);\r\n\r\n\r\n\t\t\tthis.traceDragEvents(obj, inputMethod);\r\n\r\n\t\t\tgantt._prevent_touch_scroll = true;\r\n\t\t\t// GS-2664. Prevent grid scroll only if we can reorder rows\r\n\t\t\tif (e.target.closest(\".gantt_row\") && !gantt.config.order_branch){\r\n\t\t\t\tgantt._prevent_touch_scroll = false;\r\n\t\t\t}\r\n\t\t\tdocument.body.classList.add(\"gantt_noselect\");\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\tthis.dragMove(obj, e, inputMethod.accessor);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tdragMove: function (obj, e, getEvent) {\r\n\t\t\tvar source = getEvent(e);\r\n\t\t\tif (!source) return false;\r\n\r\n\t\t\tif (!this.config.marker && !this.config.started) {\r\n\t\t\t\tvar pos = this.getPosition(source);\r\n\r\n\t\t\t\tif (gantt.config.touch || this.checkPositionChange(pos)) {\r\n\t\t\t\t\t// real drag starts here,\r\n\t\t\t\t\t// when user moves mouse at first time after onmousedown\r\n\t\t\t\t\tthis.config.started = true;\r\n\t\t\t\t\tthis.config.ignore = false;\r\n\t\t\t\t\tgantt._touch_drag = true;\r\n\t\t\t\t\tif (this.callEvent(\"onBeforeDragStart\", [obj, this.config.original_target]) === false) {\r\n\t\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.backupEventTarget(e, getEvent);\r\n\t\t\t\t\tthis.initDnDMarker();\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\tthis.callEvent(\"onAfterDragStart\", [obj, this.config.original_target]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.config.ignore) {\r\n\t\t\t\t// GS-1279 Gantt crashes on Mobile Firefox after starting to create a link and moving finger outisde the page.\r\n\t\t\t\tif (e.targetTouches && !source.target) return;\r\n\t\t\t\t\r\n\t\t\t\tsource.pos = this.getPosition(source);\r\n\t\t\t\tthis.config.marker.style.left = source.pos.x + \"px\";\r\n\t\t\t\tthis.config.marker.style.top = source.pos.y + \"px\";\r\n\t\t\t\tthis.callEvent(\"onDragMove\", [obj, source]);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tdragEnd: function (obj) {\r\n\t\t\tvar target = this.config.backup_element;\r\n\t\t\tif (target && target.parentNode) {\r\n\t\t\t\ttarget.parentNode.removeChild(target);\r\n\t\t\t}\r\n\t\t\tgantt._prevent_touch_scroll = false;\r\n\t\t\tif (this.config.marker) {\r\n\t\t\t\tthis.config.marker.parentNode.removeChild(this.config.marker);\r\n\t\t\t\tthis.config.marker = null;\r\n\r\n\t\t\t\tthis.callEvent(\"onDragEnd\", []);\r\n\t\t\t}\r\n\t\t\tthis.config.started = false;\r\n\t\t\tgantt._touch_drag = false;\r\n\t\t\tdocument.body.classList.remove(\"gantt_noselect\");\r\n\t\t},\r\n\r\n\t\tgetPosition: function (e) {\r\n\t\t\tvar x = 0, y = 0;\r\n\t\t\tif (e.pageX || e.pageY) {\r\n\t\t\t\tx = e.pageX;\r\n\t\t\t\ty = e.pageY;\r\n\t\t\t} else if (e.clientX || e.clientY) {\r\n\t\t\t\tx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n\t\t\t\ty = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n\t\t\t}\r\n\t\t\treturn {x: x, y: y};\r\n\t\t}\r\n\t};\r\n\r\n\treturn DnD;\r\n};\r\n","export default function(gantt) {\r\n\r\n\tvar regTemplates = {};\r\n\r\n\tfunction initTemplate(name, initial, template_name) {\r\n\t\ttemplate_name = template_name || name;\r\n\t\tvar config = gantt.config,\r\n\t\t\ttemplates = gantt.templates;\r\n\r\n\t\tif (gantt.config[name] && regTemplates[template_name] != config[name]) {\r\n\t\t\tif (!(initial && templates[template_name])) {\r\n\t\t\t\ttemplates[template_name] = gantt.date.date_to_str(config[name]);\r\n\t\t\t\tregTemplates[template_name] = config[name];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction initTemplates() {\r\n\t\tvar date = gantt.date;\r\n\r\n\t\t//build configuration based templates\r\n\t\tvar d = date.date_to_str;\r\n\t\tvar c = gantt.config;\r\n\t\tvar format_date = d(c.xml_date || c.date_format, c.server_utc);\r\n\t\tvar parse_date = date.str_to_date(c.xml_date || c.date_format, c.server_utc);\r\n\r\n\t\tinitTemplate(\"date_scale\", true, undefined, gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"date_grid\", true, \"grid_date_format\", gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"task_date\", true, undefined, gantt.config, gantt.templates);\r\n\r\n\t\tgantt.mixin(gantt.templates, {\r\n\t\t\txml_format: undefined, // deprecated\r\n\t\t\tformat_date: format_date,\r\n\r\n\t\t\txml_date: undefined, // deprecated\r\n\t\t\tparse_date: parse_date,\r\n\r\n\t\t\tprogress_text: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tgrid_header_class: function (column, config) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttask_text: function (start, end, task) {\r\n\t\t\t\treturn task.text;\r\n\t\t\t},\r\n\t\t\ttask_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_end_date: function (date) {\r\n\t\t\t\treturn gantt.templates.task_date(date);\r\n\t\t\t},\r\n\t\t\tgrid_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttimeline_cell_class: function (item, date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttimeline_cell_content: function (item, date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_cell_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_row_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\tgrid_indent: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_indent'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_folder: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_folder_\" + (item.$open ? \"open\" : \"closed\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_file: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_file'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_open: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_\" + (item.$open ? \"close\" : \"open\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_blank: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_blank'></div>\";\r\n\t\t\t},\r\n\t\t\tdate_grid: function (date, item, column) {\r\n\t\t\t\tif (item && gantt.isUnscheduledTask(item) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(item);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.grid_date_format(date, column);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_time: function (start, end, ev) {\r\n\t\t\t\tif (gantt.isUnscheduledTask(ev) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(ev);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.task_date(start) + \" - \" + gantt.templates.task_end_date(end);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_unscheduled_time: function (task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttime_picker: d(c.time_picker),\r\n\t\t\tlink_class: function (link) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tlink_description: function (link) {\r\n\t\t\t\tvar from = gantt.getTask(link.source),\r\n\t\t\t\t\tto = gantt.getTask(link.target);\r\n\r\n\t\t\t\treturn \"<b>\" + from.text + \"</b> &ndash;  <b>\" + to.text + \"</b>\";\r\n\t\t\t},\r\n\r\n\t\t\tdrag_link: function (from, from_start, to, to_start) {\r\n\t\t\t\tfrom = gantt.getTask(from);\r\n\t\t\t\tvar labels = gantt.locale.labels;\r\n\r\n\t\t\t\tvar text = \"<b>\" + from.text + \"</b> \" + (from_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\tif (to) {\r\n\t\t\t\t\tto = gantt.getTask(to);\r\n\t\t\t\t\ttext += \"<b> \" + to.text + \"</b> \" + (to_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\t}\r\n\t\t\t\treturn text;\r\n\t\t\t},\r\n\t\t\tdrag_link_class: function (from, from_start, to, to_start) {\r\n\t\t\t\tvar add = \"\";\r\n\r\n\t\t\t\tif (from && to) {\r\n\t\t\t\t\tvar allowed = gantt.isLinkAllowed(from, to, from_start, to_start);\r\n\t\t\t\t\tadd = \" \" + (allowed ? \"gantt_link_allow\" : \"gantt_link_deny\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn \"gantt_link_tooltip\" + add;\r\n\t\t\t},\r\n\r\n\t\t\t/* used for aria-labels of bar elements and for tooltip.js */\r\n\t\t\ttooltip_date_format: date.date_to_str(\"%Y-%m-%d\"),\r\n\t\t\ttooltip_text: function (start, end, event) {\r\n\t\t\t\treturn `<div>Task: ${event.text}</div>\r\n\t\t\t\t<div>Start date: ${gantt.templates.tooltip_date_format(start)}</div>\r\n\t\t\t\t<div>End date: ${gantt.templates.tooltip_date_format(end)}</div>`;\r\n\t\t\t},\r\n\t\t\tbaseline_text: function (task, baseline, index) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\treturn {\r\n\t\tinitTemplates: initTemplates,\r\n\t\tinitTemplate: initTemplate\r\n\t};\r\n\r\n};","import * as utils from \"../../utils/utils\";\r\nimport facadeFactory from \"./../facades/datastore\";\r\nimport calculateScaleRange from \"../gantt_data_range\";\r\nimport isPlaceholderTask from \"../../utils/placeholder_task\";\r\n\r\nimport treeHelper from \"../../utils/task_tree_helpers\";\r\n\r\nfunction initDataStores(gantt){\r\n\r\n\tvar facade = facadeFactory.create();\r\n\tutils.mixin(gantt, facade);\r\n\tvar tasksStore = gantt.createDatastore({\r\n\t\tname: \"task\",\r\n\t\ttype: \"treeDatastore\",\r\n\t\trootId: function() { return gantt.config.root_id; },\r\n\t\tinitItem: utils.bind(_init_task, gantt),\r\n\t\tgetConfig: function() { return gantt.config; }\r\n\t});\r\n\r\n\tvar linksStore = gantt.createDatastore({\r\n\t\tname: \"link\",\r\n\t\tinitItem: utils.bind(_init_link, gantt)\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\ttasksStore.destructor();\r\n\t\tlinksStore.destructor();\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onLinkValidation\", function(link){\r\n\t\tif(gantt.isLinkExists(link.id) || link.id === \"predecessor_generated\"){\r\n\t\t\t// link was already added into gantt\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvar source = gantt.getTask(link.source);\r\n\t\tvar taskLinks = source.$source;\r\n\t\tfor (var i = 0; i < taskLinks.length; i++) {\r\n\t\t\tvar existingLink = gantt.getLink(taskLinks[i]);\r\n\r\n\t\t\tvar sourceMatch = link.source == existingLink.source;\r\n\t\t\tvar targetMatch = link.target == existingLink.target;\r\n\t\t\tvar typeMatch = link.type == existingLink.type;\r\n\r\n\t\t\t// prevent creating duplicated links from the UI\r\n\t\t\tif (sourceMatch && targetMatch && typeMatch) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onBeforeRefreshAll\", function(){\r\n\r\n\t\t// GS-2170 do not recalculate indexes and dates as the event will be called later in the onStoreUpdate event\r\n\t\tif (tasksStore._skipTaskRecalculation){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar order = tasksStore.getVisibleItems();\r\n\r\n\t\tfor(var i=0; i < order.length; i++){\r\n\t\t\tvar item = order[i];\r\n\t\t\titem.$index = i;\r\n\t\t\titem.$local_index = gantt.getTaskIndex(item.id);\r\n\t\t\tgantt.resetProjectDates(item);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onFilterItem\", function(id, task) {\r\n\t\tif (gantt.config.show_tasks_outside_timescale) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvar min = null, max = null;\r\n\t\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\t\tif (gantt._isAllowedUnscheduledTask(task)) return true;\r\n\t\t\tmin = gantt.config.start_date.valueOf();\r\n\t\t\tmax = gantt.config.end_date.valueOf();\r\n\r\n\t\t\tif (+task.start_date > max || +task.end_date < +min)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\tgantt._update_flags(oldId, newId);\r\n\r\n\t\tvar changedTask = gantt.getTask(newId);\r\n\t\tif(!tasksStore.isSilent()){\r\n\t\t\tif(changedTask.$split_subtask || changedTask.rollup){\r\n\t\t\t\tgantt.eachParent(function(parent){\r\n\t\t\t\t\tgantt.refreshTask(parent.id);\r\n\t\t\t\t}, newId);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterUpdate\", function(id){\r\n\t\tgantt._update_parents(id);\r\n\t\tif(gantt.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tvar task = tasksStore.getItem(id);\r\n\t\tif (!task.$source) task.$source = [];\r\n\t\tfor (var i = 0; i < task.$source.length; i++) {\r\n\t\t\tlinksStore.refresh(task.$source[i]);\r\n\t\t}\r\n\t\tif (!task.$target) task.$target = [];\r\n\t\tfor (var i = 0; i < task.$target.length; i++) {\r\n\t\t\tlinksStore.refresh(task.$target[i]);\r\n\t\t}\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onBeforeItemMove\", function(sid, parent, tindex){\r\n\t\t// GS-125. Don't allow users to move the placeholder task\r\n\t\tif (isPlaceholderTask(sid, gantt, tasksStore)){\r\n\t\t\t//eslint-disable-next-line\r\n\t\t\tconsole.log(\"The placeholder task cannot be moved to another position.\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterItemMove\", function(sid, parent, tindex){\r\n\t\tvar source = gantt.getTask(sid);\r\n\r\n\t\tif(this.getNextSibling(sid) !== null){\r\n\t\t\tsource.$drop_target = this.getNextSibling(sid);\r\n\t\t} else if(this.getPrevSibling(sid) !== null){\r\n\t\t\tsource.$drop_target = \"next:\" + this.getPrevSibling(sid);\r\n\t\t}else{\r\n\t\t\tsource.$drop_target = \"next:null\";\r\n\t\t}\r\n\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(action == \"delete\"){\r\n\t\t\tgantt._update_flags(id, null);\r\n\t\t}\r\n\r\n\t\tvar state = gantt.$services.getService(\"state\");\r\n\t\tif(state.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(gantt.config.fit_tasks && action !== \"paint\"){\r\n\t\t\tvar oldState = gantt.getState();\r\n\t\t\tcalculateScaleRange(gantt);\r\n\t\t\tvar newState = gantt.getState();\r\n\r\n\t\t\t//this._init_tasks_range();\r\n\t\t\tif (+oldState.min_date != +newState.min_date || +oldState.max_date != +newState.max_date) {\r\n\t\t\t\tgantt.render();\r\n\r\n\t\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(action == \"add\" || action == \"move\" || action == \"delete\"){\r\n\t\t\tif(gantt.$layout){\r\n\t\t\t\t// GS-2170. Do not recalculate the indexes and dates of other tasks in the\r\n\t\t\t\t// onBeforeResize layout event, but do it later. If lightbox is opened, it will\r\n\t\t\t\t// trigger the refreshData, so the indexes and dates will be recalculated there\r\n\t\t\t\tif (this.$config.name == \"task\" && (action == \"add\" || action == \"delete\")){\r\n\t\t\t\t\tif (this._skipTaskRecalculation != \"lightbox\"){\r\n\t\t\t\t\t\tthis._skipTaskRecalculation = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tgantt.$layout.resize();\r\n\t\t\t}\r\n\r\n\t\t}else if(!id){\r\n\t\t\tlinksStore.refresh();\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tlinksStore.attachEvent(\"onAfterAdd\", function(id, link){\r\n\t\tsync_link(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterUpdate\", function(id, link){\r\n\t\tsync_links();\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterDelete\", function(id, link){\r\n\t\tsync_link_delete(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterSilentDelete\", function(id, link){\r\n\t\tsync_link_delete(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onBeforeIdChange\", function(oldId, newId){\r\n\t\tsync_link_delete(gantt.mixin({id:oldId}, gantt.$data.linksStore.getItem(newId)));\r\n\t\tsync_link(gantt.$data.linksStore.getItem(newId));\r\n\t});\r\n\r\n\tfunction checkLinkedTaskVisibility(taskId){\r\n\t\tvar isVisible = gantt.isTaskVisible(taskId);\r\n\t\tif(!isVisible && gantt.isTaskExists(taskId)){\r\n\t\t\tvar parent = gantt.getParent(taskId);\r\n\t\t\tif(gantt.isTaskExists(parent) && gantt.isTaskVisible(parent)){\r\n\t\t\t\tparent = gantt.getTask(parent);\r\n\t\t\t\tif(gantt.isSplitTask(parent)){\r\n\t\t\t\t\tisVisible = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn isVisible;\r\n\t}\r\n\r\n\tlinksStore.attachEvent(\"onFilterItem\", function(id, link){\r\n\t\tif (!gantt.config.show_links) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar sourceVisible = checkLinkedTaskVisibility(link.source);\r\n\t\tvar targetVisible = checkLinkedTaskVisibility(link.target);\r\n\r\n\t\tif (!(sourceVisible && targetVisible) ||\r\n\t\t\tgantt._isAllowedUnscheduledTask(gantt.getTask(link.source)) || gantt._isAllowedUnscheduledTask(gantt.getTask(link.target)))\r\n\t\t\treturn false;\r\n\r\n\t\treturn gantt.callEvent(\"onBeforeLinkDisplay\", [id, link]);\r\n\t});\r\n\r\n\r\n\t(function(){\r\n\t\t// delete all connected links after task is deleted\r\n\t\tvar deletedLinks = {};\r\n\r\n\t\tgantt.attachEvent(\"onBeforeTaskDelete\", function(id, item){\r\n\t\t\tdeletedLinks[id] = treeHelper.getSubtreeLinks(gantt, id);\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onAfterTaskDelete\", function(id, item) {\r\n\t\t\tif(deletedLinks[id]){\r\n\t\t\t\tgantt.$data.linksStore.silent(function(){\r\n\t\t\t\t\tfor(var i in deletedLinks[id]){\r\n\t\t\t\t\t\tif (gantt.isLinkExists(i)){\r\n\t\t\t\t\t\t\tgantt.$data.linksStore.removeItem(i);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsync_link_delete(deletedLinks[id][i]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdeletedLinks[id] = null;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t})();\r\n\r\n\tgantt.attachEvent(\"onAfterLinkDelete\", function(id, link) {\r\n\t\t// GS-1786. Repaint tasks only if they are loaded\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tgantt.refreshTask(link.source);\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tgantt.refreshTask(link.target);\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onParse\", sync_links);\r\n\r\n\tmapEvents({\r\n\t\tsource: linksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onLinkLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeLinkAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterLinkAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeLinkUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterLinkUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeLinkDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterLinkDelete\",\r\n\t\t\t\"onIdChange\":\"onLinkIdChange\"\r\n\t\t}\r\n\t});\r\n\r\n\tmapEvents({\r\n\t\tsource: tasksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onTaskLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeTaskAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterTaskAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeTaskUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterTaskUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeTaskDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterTaskDelete\",\r\n\t\t\t\"onIdChange\":\"onTaskIdChange\",\r\n\t\t\t\"onBeforeItemMove\":\"onBeforeTaskMove\",\r\n\t\t\t\"onAfterItemMove\":\"onAfterTaskMove\",\r\n\t\t\t\"onFilterItem\":\"onBeforeTaskDisplay\",\r\n\t\t\t\"onItemOpen\":\"onTaskOpened\",\r\n\t\t\t\"onItemClose\":\"onTaskClosed\",\r\n\t\t\t\"onBeforeSelect\":\"onBeforeTaskSelected\",\r\n\t\t\t\"onAfterSelect\":\"onTaskSelected\",\r\n\t\t\t\"onAfterUnselect\":\"onTaskUnselected\"\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.$data = {\r\n\t\ttasksStore: tasksStore,\r\n\t\tlinksStore: linksStore\r\n\t};\r\n\r\n\tfunction sync_link(link){\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tsourceTask.$source = sourceTask.$source || [];\r\n\t\t\tif (noDuplicateIds(link.id, sourceTask.$source)){\r\n\t\t\t\tsourceTask.$source.push(link.id);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\ttargetTask.$target = targetTask.$target || [];\r\n\t\t\tif (noDuplicateIds(link.id, targetTask.$target)){\r\n\t\t\t\ttargetTask.$target.push(link.id);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// GS-2085. Don't add duplicate link IDs\r\n\tfunction noDuplicateIds(id, array){\r\n\t\treturn array.indexOf(String(id)) === -1 && array.indexOf(Number(id)) === -1;\r\n\t}\r\n\r\n\tfunction sync_link_delete(link){\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tfor(var i = 0; i < sourceTask.$source.length; i++){\r\n\t\t\t\tif(sourceTask.$source[i] == link.id){\r\n\t\t\t\t\tsourceTask.$source.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\tfor(var i = 0; i < targetTask.$target.length; i++){\r\n\t\t\t\tif(targetTask.$target[i] == link.id){\r\n\t\t\t\t\ttargetTask.$target.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sync_links() {\r\n\t\tvar task = null;\r\n\t\tvar tasks = gantt.$data.tasksStore.getItems();\r\n\r\n\t\tfor(var i = 0, len = tasks.length; i < len; i++){\r\n\t\t\ttask = tasks[i];\r\n\t\t\ttask.$source = [];\r\n\t\t\ttask.$target = [];\r\n\t\t}\r\n\r\n\t\tvar links = gantt.$data.linksStore.getItems();\r\n\t\tfor (var i = 0, len = links.length; i < len; i++) {\r\n\r\n\t\t\tvar link = links[i];\r\n\t\t\tsync_link(link);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapEvents(conf){\r\n\t\tvar mapFrom = conf.source;\r\n\t\tvar mapTo = conf.target;\r\n\t\tfor(var i in conf.events){\r\n\t\t\t(function(sourceEvent, targetEvent){\r\n\t\t\t\tmapFrom.attachEvent(sourceEvent, function(){\r\n\t\t\t\t\treturn mapTo.callEvent(targetEvent, Array.prototype.slice.call(arguments));\r\n\t\t\t\t}, targetEvent);\r\n\t\t\t})(i, conf.events[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _init_task(task) {\r\n\t\tif (!this.defined(task.id))\r\n\t\t\ttask.id = this.uid();\r\n\r\n\t\tif (task.start_date)\r\n\t\t\ttask.start_date = gantt.date.parseDate(task.start_date, \"parse_date\");\r\n\t\tif (task.end_date)\r\n\t\t\ttask.end_date = gantt.date.parseDate(task.end_date, \"parse_date\");\r\n\r\n\r\n\t\tvar duration = null;\r\n\t\tif (task.duration || task.duration === 0) {\r\n\t\t\ttask.duration = duration = task.duration * 1;\r\n\t\t}\r\n\r\n\t\tif (duration) {\r\n\t\t\tif (task.start_date && !task.end_date) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!task.start_date && task.end_date) {\r\n\t\t\t\ttask.start_date = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\tduration: -task.duration,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t//task.$calculate_duration = false;\r\n\t\t}\r\n\r\n\t\tif (gantt.config.deadlines !== false && task.deadline){\r\n\t\t\ttask.deadline = gantt.date.parseDate(task.deadline, \"parse_date\");\r\n\t\t}\r\n\r\n\t\ttask.progress = Number(task.progress) || 0;\r\n\r\n\t\tif (this._isAllowedUnscheduledTask(task)) {\r\n\t\t\tthis._set_default_task_timing(task);\r\n\t\t}\r\n\t\tthis._init_task_timing(task);\r\n\t\tif (task.start_date && task.end_date)\r\n\t\t\tthis.correctTaskWorkTime(task);\r\n\r\n\t\ttask.$source = [];\r\n\t\ttask.$target = [];\r\n\r\n\t\tvar originalTask = this.$data.tasksStore.getItem(task.id);\r\n\t\tif (originalTask && !utils.defined(task.open)) {\r\n\t\t\t// if a task with the same id is already in the gantt and the new object doesn't specify the `open` state -\r\n\t\t\t// restore the `open` state we already have in the chart\r\n\t\t\ttask.$open = originalTask.$open;\r\n\t\t}\r\n\r\n\t\tif (task.parent === undefined) {\r\n\t\t\ttask.parent = this.config.root_id;\r\n\t\t}\r\n\t\tif(task.open){\r\n\t\t\ttask.$open = true;\r\n\t\t}\r\n\t\treturn task;\r\n\t}\r\n\r\n\tfunction _init_link(link) {\r\n\t\tif (!this.defined(link.id))\r\n\t\t\tlink.id = this.uid();\r\n\t\treturn link;\r\n\t}\r\n}\r\n\r\n\r\nexport default initDataStores;\r\n","import batch_update from \"./batch_update\";\r\nimport wbs from \"./wbs\";\r\nimport resources from \"./resources\";\r\nimport resource_assignments from \"./resource_assignments\";\r\nimport new_task_placeholder from \"./new_task_placeholder\";\r\nimport auto_task_types from \"./auto_task_types\";\r\nimport formatters from \"./formatters\";\r\nimport empty_state_screen from \"./empty_state_screen\";\r\nimport baselines from \"./baselines\";\r\n\r\nexport default function(gantt){\r\n\tif(!gantt.ext){\r\n\t\tgantt.ext = {};\r\n\t}\r\n\r\n\tvar modules = [\r\n\t\tbatch_update,\r\n\t\twbs,\r\n\t\tresources,\r\n\t\tresource_assignments,\r\n\t\tnew_task_placeholder,\r\n\t\tauto_task_types,\r\n\t\tformatters,\r\n\t\tempty_state_screen,\r\n\t\tbaselines\r\n\t];\r\n\r\n\tfor(var i = 0; i < modules.length; i++){\r\n\t\tif(modules[i])\r\n\t\t\tmodules[i](gantt);\r\n\t}\r\n};","export default function(gantt) {\r\n\tgantt.getGridColumn = function(name) {\r\n\t\tvar columns = gantt.config.columns;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tif (columns[i].name == name)\r\n\t\t\t\treturn columns[i];\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t};\r\n\r\n\tgantt.getGridColumns = function() {\r\n\t\treturn gantt.config.columns.slice();\r\n\t};\r\n};","export default function(gantt) {\r\n\tgantt.isReadonly = function (item) {\r\n\r\n\t\tif((typeof item == \"number\" || typeof item == \"string\") && gantt.isTaskExists(item)){\r\n\t\t\titem = gantt.getTask(item);\r\n\t\t}\r\n\t\tif (item && item[this.config.editable_property]) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn (item && item[this.config.readonly_property]) || this.config.readonly;\r\n\t\t}\r\n\t};\r\n};","import CalendarManager from \"./calendar_manager\";\r\nimport TimeCalculator from \"./time_calculator\";\r\nimport worktimeFacadeFactory from \"../facades/worktime_calendars\";\r\nimport * as utils from \"../../utils/utils\";\r\n\r\nexport default function (gantt) {\r\n\tvar manager = new CalendarManager(gantt),\r\n\ttimeCalculator = new TimeCalculator(manager);\r\n\tvar facade = worktimeFacadeFactory.create(manager, timeCalculator);\r\n\tutils.mixin(gantt, facade);\r\n};\r\n","export default function(gantt) {\r\n\r\n\tgantt.getTaskType = function (type) {\r\n\t\treturn \"task\";\r\n\t};\r\n};","/*\r\n reuse results of functions that can be recalculated during rendering\r\n greatly increases the rendering speed when critical path enabled\r\n Sample - 94_dev/critical_path.html\r\n\r\n */\r\nexport default function(gantt){\r\n\r\ngantt._cached_functions = {\r\n\tcache: {},\r\n\tmode: false,\r\n\tcritical_path_mode: false,\r\n\twrap_methods : function(methods, object){\r\n\t\tif(object._prefetch_originals){\r\n\t\t\tfor(var i in object._prefetch_originals){\r\n\t\t\t\tobject[i] = object._prefetch_originals[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tobject._prefetch_originals = {};\r\n\t\tfor(var i = 0; i < methods.length; i++)\r\n\t\t\tthis.prefetch(methods[i], object);\r\n\r\n\t},\r\n\tprefetch : function(methodname, host){\r\n\t\tvar original = host[methodname];\r\n\t\tif(original){\r\n\t\t\tvar optimizer = this;\r\n\r\n\t\t\thost._prefetch_originals[methodname] = original;\r\n\t\t\thost[methodname] = function get_prefetched_value(){\r\n\r\n\t\t\t\tvar argumentsArray = new Array(arguments.length);\r\n\t\t\t\tfor (var i = 0, l = arguments.length; i < l; i++) {\r\n\t\t\t\t\targumentsArray[i] = arguments[i];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(optimizer.active){\r\n\t\t\t\t\tvar args = optimizer.get_arguments_hash(Array.prototype.slice.call(argumentsArray));\r\n\t\t\t\t\tif(!optimizer.cache[methodname]){\r\n\t\t\t\t\t\toptimizer.cache[methodname] = {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar cached_values = optimizer.cache[methodname];\r\n\r\n\t\t\t\t\tif(optimizer.has_cached_value(cached_values, args)){\r\n\t\t\t\t\t\treturn optimizer.get_cached_value(cached_values, args);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar value = original.apply(this, argumentsArray);\r\n\t\t\t\t\t\toptimizer.cache_value(cached_values, args, value);\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn original.apply(this, argumentsArray);\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn original;\r\n\t},\r\n\tcache_value: function(cache, arguments_hash, value){\r\n\t\tif(this.is_date(value))\r\n\t\t\tvalue = new Date(value);\r\n\t\tcache[arguments_hash] = value;\r\n\t},\r\n\thas_cached_value: function(cache, arguments_hash){\r\n\t\treturn cache.hasOwnProperty(arguments_hash);\r\n\t},\r\n\tget_cached_value: function(cache, arguments_hash){\r\n\t\tvar data = cache[arguments_hash];\r\n\r\n\t\t//for cached dates - return copy\r\n\t\tif(this.is_date(data)){\r\n\t\t\tdata = new Date(data);\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\tis_date: function(value){\r\n\t\treturn (value && value.getUTCDate);\r\n\t},\r\n\tget_arguments_hash:function(args){\r\n\t\tvar values = [];\r\n\t\tfor(var i = 0; i < args.length; i++){\r\n\t\t\tvalues.push(this.stringify_argument(args[i]));\r\n\t\t}\r\n\t\treturn \"(\" + values.join(\";\") + \")\";\r\n\t},\r\n\tstringify_argument: function(value){\r\n\t\t//expecting task or link, or any other data entries, dates and primitive values\r\n\t\tvar ret = \"\";\r\n\t\tif(value.id){\r\n\t\t\tret = value.id;\r\n\t\t}else if(this.is_date(value)){\r\n\t\t\tret = value.valueOf();\r\n\t\t}else{\r\n\t\t\tret = value;\r\n\t\t}\r\n\t\treturn ret + \"\";\r\n\t},\r\n\tactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = true;\r\n\t},\r\n\tdeactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = false;\r\n\t},\r\n\tclear: function(){\r\n\t\tthis.cache = {};\r\n\t},\r\n\r\n\tsetup: function(gantt){\r\n\t\tvar override_gantt = [];\r\n\r\n\t\tvar gantt_methods  = [\r\n\t\t\t'_isProjectEnd',\r\n\t\t\t'_getProjectEnd',\r\n\t\t\t'_getSlack'\r\n\t\t];\r\n\r\n\r\n\r\n\t\tif(this.mode == 'auto'){\r\n\t\t\tif(gantt.config.highlight_critical_path){\r\n\t\t\t\toverride_gantt = gantt_methods;\r\n\t\t\t}\r\n\t\t}else if(this.mode === true){\r\n\t\t\toverride_gantt = gantt_methods;\r\n\t\t}\r\n\r\n\t\tthis.wrap_methods(override_gantt, gantt);\r\n\r\n\t},\r\n\tupdate_if_changed: function(gantt){\r\n\t\tvar changed = (this.critical_path_mode != gantt.config.highlight_critical_path ||\r\n\t\t\t\t\t\tthis.mode !== gantt.config.optimize_render);\r\n\t\tif(changed){\r\n\t\t\tthis.critical_path_mode = gantt.config.highlight_critical_path;\r\n\t\t\tthis.mode = gantt.config.optimize_render;\r\n\t\t\tthis.setup(gantt);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction activate(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\tif(!gantt._cached_functions.active){\r\n\t\tgantt._cached_functions.activate();\r\n\t}\r\n\treturn true;\r\n}\r\ngantt.attachEvent(\"onBeforeGanttRender\", activate);\r\ngantt.attachEvent(\"onBeforeDataRender\", activate);\r\ngantt.attachEvent(\"onBeforeSmartRender\",  function(){\r\n\tactivate();\r\n});\r\ngantt.attachEvent(\"onBeforeParse\", activate);\r\ngantt.attachEvent(\"onDataRender\", function(){\r\n\tgantt._cached_functions.deactivate();\r\n});\r\nvar deactivTimeout = null;\r\ngantt.attachEvent(\"onSmartRender\", function(){\r\n\tif(deactivTimeout)\r\n\t\tclearTimeout(deactivTimeout);\r\n\tdeactivTimeout = setTimeout(function(){\r\n\t\tgantt._cached_functions.deactivate();\r\n\t}, 1000);\r\n});\r\n\r\ngantt.attachEvent(\"onBeforeGanttReady\", function(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\treturn true;\r\n});\r\n\r\n};","function extend(gantt){\r\n\r\n\tgantt.destructor = function(){\r\n\t\tthis.clearAll();\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\r\n\t\tthis._getDatastores().forEach(function(store){\r\n\t\t\tstore.destructor();\r\n\t\t});\r\n\r\n\t\tif(this.$root){\r\n\t\t\tdelete this.$root.gantt;\r\n\t\t}\r\n\r\n\t\tif(this._eventRemoveAll){\r\n\t\t\tthis._eventRemoveAll();\r\n\t\t}\r\n\r\n\t\tif(this.$layout){\r\n\t\t\tthis.$layout.destructor();\r\n\t\t}\r\n\r\n\t\tif(this.resetLightbox){\r\n\t\t\tthis.resetLightbox();\r\n\t\t}\r\n\r\n\t\t// GS-99. Call this here to detach the events\r\n\t\tif (this.ext.inlineEditors && this.ext.inlineEditors.destructor) {\r\n\t\t\tthis.ext.inlineEditors.destructor();\r\n\t\t}\r\n\r\n\t\tif(this._dp && this._dp.destructor){\r\n\t\t\tthis._dp.destructor();\r\n\t\t}\r\n\t\tthis.$services.destructor();\r\n\r\n\t\t// detachAllEvents should be called last, because in components may be attached events\r\n\t\tthis.detachAllEvents();\r\n\r\n\t\tfor(var i in this){\r\n\t\t\tif(i.indexOf(\"$\") === 0){\r\n\t\t\t\tdelete this[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.$destroyed = true;\r\n\t};\r\n}\r\n\r\nexport default extend;\r\n","import ar from \"./locale_ar\";\r\nimport be from \"./locale_be\";\r\nimport ca from \"./locale_ca\";\r\nimport cn from \"./locale_cn\";\r\nimport cs from \"./locale_cs\";\r\nimport da from \"./locale_da\";\r\nimport de from \"./locale_de\";\r\nimport el from \"./locale_el\";\r\nimport en from \"./locale_en\";\r\nimport es from \"./locale_es\";\r\nimport fa from \"./locale_fa\";\r\nimport fi from \"./locale_fi\";\r\nimport fr from \"./locale_fr\";\r\nimport he from \"./locale_he\";\r\nimport hr from \"./locale_hr\";\r\nimport hu from \"./locale_hu\";\r\nimport id from \"./locale_id\";\r\nimport it from \"./locale_it\";\r\nimport jp from \"./locale_jp\";\r\nimport kr from \"./locale_kr\";\r\n\r\nimport LocaleManager from \"./locale_manager\";\r\n\r\nimport nb from \"./locale_nb\";\r\nimport nl from \"./locale_nl\";\r\nimport no from \"./locale_no\";\r\nimport pl from \"./locale_pl\";\r\nimport pt from \"./locale_pt\";\r\nimport ro from \"./locale_ro\";\r\nimport ru from \"./locale_ru\";\r\nimport si from \"./locale_si\";\r\nimport sk from \"./locale_sk\";\r\nimport sv from \"./locale_sv\";\r\nimport tr from \"./locale_tr\";\r\nimport ua from \"./locale_ua\";\r\n\r\nexport default function(){\r\n\treturn new LocaleManager({\r\n\t\ten,\r\n\t\tar,\r\n\t\tbe,\r\n\t\tca,\r\n\t\tcn,\r\n\t\tcs,\r\n\t\tda,\r\n\t\tde,\r\n\t\tel,\r\n\t\tes,\r\n\t\tfa,\r\n\t\tfi,\r\n\t\tfr,\r\n\t\the,\r\n\t\thr,\r\n\t\thu,\r\n\t\tid,\r\n\t\tit,\r\n\t\tjp,\r\n\t\tkr,\r\n\t\tnb,\r\n\t\tnl,\r\n\t\tno,\r\n\t\tpl,\r\n\t\tpt,\r\n\t\tro,\r\n\t\tru,\r\n\t\tsi,\r\n\t\tsk,\r\n\t\tsv,\r\n\t\ttr,\r\n\t\tua\r\n\t});\r\n}","import * as utils from \"../../utils/utils\";\r\nimport * as domHelpers from \"./utils/dom_helpers\";\r\n\r\nexport default function(gantt) {\r\n\r\n\tvar boxAttribute = \"data-dhxbox\";\r\n\r\n\tvar _dhx_msg_cfg = null;\r\n\r\n\tfunction callback(config, result) {\r\n\t\tvar usercall = config.callback;\r\n\t\tmodalBox.hide(config.box);\r\n\r\n\t\t_dhx_msg_cfg = config.box = null;\r\n\t\tif (usercall)\r\n\t\t\tusercall(result);\r\n\t}\r\n\r\n\tfunction modal_key(event) {\r\n\t\tif (_dhx_msg_cfg) {\r\n\r\n\t\t\tvar code = event.which || event.keyCode;\r\n\t\t\tvar preventDefault = false;\r\n\r\n\t\t\tif (messageBox.keyboard) {\r\n\t\t\t\tif (code == 13 || code == 32) {\r\n\t\t\t\t\t// default behavior is to confirm/submit popup on space/enter\r\n\t\t\t\t\t// if browser focus is set on button element - do button click instead of default behavior\r\n\t\t\t\t\tvar target = event.target || event.srcElement;\r\n\t\t\t\t\tif (domHelpers.getClassName(target).indexOf(\"gantt_popup_button\") > -1 && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcallback(_dhx_msg_cfg, true);\r\n\t\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (code == 27) {\r\n\t\t\t\t\tcallback(_dhx_msg_cfg, false);\r\n\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (preventDefault) {\r\n\t\t\t\tif (event.preventDefault){\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t\treturn !(event.cancelBubble = true);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\tvar eventElement = domHelpers.getRootNode(gantt.$root) || document;\r\n\tgantt.event(eventElement, \"keydown\", modal_key, true);\r\n\r\n\tfunction modality(mode) {\r\n\t\tif (!modality.cover) {\r\n\t\t\tmodality.cover = document.createElement(\"div\");\r\n\t\t\t//necessary for IE only\r\n\t\t\tmodality.cover.onkeydown = modal_key;\r\n\t\t\tmodality.cover.className = \"dhx_modal_cover\";\r\n\t\t\tdocument.body.appendChild(modality.cover);\r\n\t\t}\r\n\r\n\t\tmodality.cover.style.display = mode ? \"inline-block\" : \"none\";\r\n\t}\r\n\r\n\tfunction button(text, className, result) {\r\n\t\tvar buttonAriaAttrs = gantt._waiAria.messageButtonAttrString(text);\r\n\t\tvar name = className.toLowerCase().replace(/ /g, \"_\");\r\n\t\tvar button_css = \"gantt_\" + name + \"_button\";\r\n\t\treturn \"<div \" + buttonAriaAttrs + \" class='gantt_popup_button \" + button_css + \"' data-result='\" + result + \"' result='\" + result + \"' ><div>\" + text + \"</div></div>\";\r\n\t}\r\n\r\n\tfunction info(text) {\r\n\t\tif (!messageBox.area) {\r\n\t\t\tmessageBox.area = document.createElement(\"div\");\r\n\t\t\tmessageBox.area.className = \"gantt_message_area\";\r\n\t\t\tmessageBox.area.style[messageBox.position] = \"5px\";\r\n\t\t}\r\n\t\tif (!domHelpers.isChildOf(messageBox.area, document.body)){\r\n\t\t\tdocument.body.appendChild(messageBox.area);\r\n\t\t}\r\n\r\n\t\tmessageBox.hide(text.id);\r\n\t\tvar message = document.createElement(\"div\");\r\n\t\tmessage.innerHTML = \"<div>\" + text.text + \"</div>\";\r\n\t\tmessage.className = \"gantt-info gantt-\" + text.type;\r\n\t\tmessage.onclick = function () {\r\n\t\t\tmessageBox.hide(text.id);\r\n\t\t\ttext = null;\r\n\t\t};\r\n\r\n\t\tgantt._waiAria.messageInfoAttr(message);\r\n\r\n\t\tif (messageBox.position == \"bottom\" && messageBox.area.firstChild)\r\n\t\t\tmessageBox.area.insertBefore(message, messageBox.area.firstChild);\r\n\t\telse\r\n\t\t\tmessageBox.area.appendChild(message);\r\n\r\n\t\tif (text.expire > 0)\r\n\t\t\tmessageBox.timers[text.id] = window.setTimeout(function () {\r\n\t\t\t\t// GS-1213: We need that when Gantt is destroyed\r\n\t\t\t\tif (messageBox) messageBox.hide(text.id);\r\n\t\t\t}, text.expire);\r\n\r\n\t\tmessageBox.pull[text.id] = message;\r\n\t\tmessage = null;\r\n\r\n\t\treturn text.id;\r\n\t}\r\n\r\n\tfunction getFirstDefined() {\r\n\t\tvar values = [].slice.apply(arguments, [0]);\r\n\r\n\t\tfor (var i = 0; i < values.length; i++) {\r\n\t\t\tif (values[i]) {\r\n\t\t\t\treturn values[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction _boxStructure(config, ok, cancel) {\r\n\t\tvar box = document.createElement(\"div\");\r\n\r\n\t\tvar contentId = utils.uid();\r\n\t\tgantt._waiAria.messageModalAttr(box, contentId);\r\n\r\n\r\n\t\tbox.className = \" gantt_modal_box gantt-\" + config.type;\r\n\t\tbox.setAttribute(boxAttribute, 1);\r\n\r\n\t\tvar inner = '';\r\n\r\n\t\tif (config.width)\r\n\t\t\tbox.style.width = config.width;\r\n\t\tif (config.height)\r\n\t\t\tbox.style.height = config.height;\r\n\t\tif (config.title)\r\n\t\t\tinner += '<div class=\"gantt_popup_title\">' + config.title + '</div>';\r\n\t\tinner += '<div class=\"gantt_popup_text\" id=\"' + contentId + '\"><span>' + (config.content ? '' : config.text) + '</span></div><div  class=\"gantt_popup_controls\">';\r\n\t\tif (ok)\r\n\t\t\tinner += button(getFirstDefined(config.ok, gantt.locale.labels.message_ok, \"OK\"), \"ok\", true);\r\n\t\tif (cancel)\r\n\t\t\tinner += button(getFirstDefined(config.cancel, gantt.locale.labels.message_cancel, \"Cancel\"), \"cancel\", false);\r\n\r\n\t\tif (config.buttons) {\r\n\t\t\tfor (var i = 0; i < config.buttons.length; i++) {\r\n\t\t\t\tvar btn = config.buttons[i];\r\n\t\t\t\tif (typeof btn == \"object\") {\r\n\t\t\t\t\t// Support { label:\"Save\", css:\"main_button\", value:\"save\" }\r\n\t\t\t\t\tvar label = btn.label;\r\n\t\t\t\t\tvar css = btn.css || (\"gantt_\" + btn.label.toLowerCase() + \"_button\");\r\n\t\t\t\t\tvar value = btn.value || i;\r\n\t\t\t\t\tinner += button(label, css, value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tinner += button(btn, btn, i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tinner += '</div>';\r\n\t\tbox.innerHTML = inner;\r\n\r\n\t\tif (config.content) {\r\n\t\t\tvar node = config.content;\r\n\t\t\tif (typeof node == \"string\")\r\n\t\t\t\tnode = document.getElementById(node);\r\n\t\t\tif (node.style.display == 'none')\r\n\t\t\t\tnode.style.display = \"\";\r\n\t\t\tbox.childNodes[config.title ? 1 : 0].appendChild(node);\r\n\t\t}\r\n\r\n\t\tbox.onclick = function (event) {\r\n\t\t\tvar source = event.target || event.srcElement;\r\n\t\t\tif (!source.className) source = source.parentNode;\r\n\t\t\tif (domHelpers.closest(source, \".gantt_popup_button\")) {\r\n\t\t\t\tvar result = source.getAttribute(\"data-result\");\r\n\t\t\t\tresult = (result == \"true\") || (result == \"false\" ? false : result);\r\n\t\t\t\tcallback(config, result);\r\n\t\t\t}\r\n\t\t};\r\n\t\tconfig.box = box;\r\n\t\tif (ok || cancel)\r\n\t\t\t_dhx_msg_cfg = config;\r\n\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction _createBox(config, ok, cancel) {\r\n\t\tvar box = config.tagName ? config : _boxStructure(config, ok, cancel);\r\n\r\n\t\tif (!config.hidden)\r\n\t\t\tmodality(true);\r\n\t\tdocument.body.appendChild(box);\r\n\t\tvar x = Math.abs(Math.floor(((window.innerWidth || document.documentElement.offsetWidth) - box.offsetWidth) / 2));\r\n\t\tvar y = Math.abs(Math.floor(((window.innerHeight || document.documentElement.offsetHeight) - box.offsetHeight) / 2));\r\n\t\tif (config.position == \"top\")\r\n\t\t\tbox.style.top = \"-3px\";\r\n\t\telse\r\n\t\t\tbox.style.top = y + 'px';\r\n\t\tbox.style.left = x + 'px';\r\n\t\t//necessary for IE only\r\n\t\tbox.onkeydown = modal_key;\r\n\r\n\t\tmodalBox.focus(box);\r\n\r\n\t\tif (config.hidden)\r\n\t\t\tmodalBox.hide(box);\r\n\r\n\t\tgantt.callEvent(\"onMessagePopup\", [box]);\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction alertPopup(config) {\r\n\t\treturn _createBox(config, true, false);\r\n\t}\r\n\r\n\tfunction confirmPopup(config) {\r\n\t\treturn _createBox(config, true, true);\r\n\t}\r\n\r\n\tfunction boxPopup(config) {\r\n\t\treturn _createBox(config);\r\n\t}\r\n\r\n\tfunction box_params(text, type, callback) {\r\n\t\tif (typeof text != \"object\") {\r\n\t\t\tif (typeof type == \"function\") {\r\n\t\t\t\tcallback = type;\r\n\t\t\t\ttype = \"\";\r\n\t\t\t}\r\n\t\t\ttext = {text: text, type: type, callback: callback};\r\n\t\t}\r\n\t\treturn text;\r\n\t}\r\n\r\n\tfunction params(text, type, expire, id) {\r\n\t\tif (typeof text != \"object\")\r\n\t\t\ttext = {text: text, type: type, expire: expire, id: id};\r\n\t\ttext.id = text.id || utils.uid();\r\n\t\ttext.expire = text.expire || messageBox.expire;\r\n\t\treturn text;\r\n\t}\r\n\r\n\tvar alertBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"confirm\";\r\n\t\treturn alertPopup(text);\r\n\t};\r\n\tvar confirmBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn confirmPopup(text);\r\n\t};\r\n\tvar modalBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn boxPopup(text);\r\n\t};\r\n\tmodalBox.hide = function (node) {\r\n\t\twhile (node && node.getAttribute && !node.getAttribute(boxAttribute))\r\n\t\t\tnode = node.parentNode;\r\n\t\tif (node) {\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\tmodality(false);\r\n\r\n\t\t\tgantt.callEvent(\"onAfterMessagePopup\", [node]);\r\n\t\t}\r\n\t};\r\n\r\n\tmodalBox.focus = function (node) {\r\n\t\tsetTimeout(function () {\r\n\t\t\tvar focusable = domHelpers.getFocusableNodes(node);\r\n\t\t\tif (focusable.length) {\r\n\t\t\t\tif (focusable[0].focus) focusable[0].focus();\r\n\t\t\t}\r\n\t\t}, 1);\r\n\t};\r\n\r\n\tvar messageBox = function (text, type, expire, id) {\r\n\t\ttext = params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"info\";\r\n\r\n\t\tvar subtype = text.type.split(\"-\")[0];\r\n\t\tswitch (subtype) {\r\n\t\t\tcase \"alert\":\r\n\t\t\t\treturn alertPopup(text);\r\n\t\t\tcase \"confirm\":\r\n\t\t\t\treturn confirmPopup(text);\r\n\t\t\tcase \"modalbox\":\r\n\t\t\t\treturn boxPopup(text);\r\n\t\t\tdefault:\r\n\t\t\t\treturn info(text);\r\n\t\t}\r\n\t};\r\n\r\n\tmessageBox.seed = (new Date()).valueOf();\r\n\tmessageBox.uid = utils.uid;\r\n\tmessageBox.expire = 4000;\r\n\tmessageBox.keyboard = true;\r\n\tmessageBox.position = \"top\";\r\n\tmessageBox.pull = {};\r\n\tmessageBox.timers = {};\r\n\r\n\tmessageBox.hideAll = function () {\r\n\t\tfor (var key in messageBox.pull)\r\n\t\t\tmessageBox.hide(key);\r\n\t};\r\n\tmessageBox.hide = function (id) {\r\n\t\tvar obj = messageBox.pull[id];\r\n\t\tif (obj && obj.parentNode) {\r\n\t\t\twindow.setTimeout(function () {\r\n\t\t\t\tobj.parentNode.removeChild(obj);\r\n\t\t\t\tobj = null;\r\n\t\t\t}, 2000);\r\n\t\t\tobj.className += \" hidden\";\r\n\r\n\t\t\tif (messageBox.timers[id])\r\n\t\t\t\twindow.clearTimeout(messageBox.timers[id]);\r\n\t\t\tdelete messageBox.pull[id];\r\n\t\t}\r\n\t};\r\n\r\n\tvar popups = [];\r\n\tgantt.attachEvent(\"onMessagePopup\", function(box){\r\n\t\tpopups.push(box);\r\n\t});\r\n\tgantt.attachEvent(\"onAfterMessagePopup\", function(box){\r\n\t\tfor(var i = 0; i < popups.length; i++){\r\n\t\t\tif(popups[i] === box){\r\n\t\t\t\tpopups.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\tif(modality.cover && modality.cover.parentNode){\r\n\t\t\tmodality.cover.parentNode.removeChild(modality.cover);\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < popups.length; i++){\r\n\t\t\tif(popups[i].parentNode){\r\n\t\t\t\tpopups[i].parentNode.removeChild(popups[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tpopups = null;\r\n\r\n\t\tif(messageBox.area && messageBox.area.parentNode){\r\n\t\t\tmessageBox.area.parentNode.removeChild(messageBox.area);\r\n\t\t}\r\n\t\tmessageBox = null;\r\n\t});\r\n\r\n\treturn {\r\n\t\talert: alertBox,\r\n\t\tconfirm: confirmBox,\r\n\t\tmessage: messageBox,\r\n\t\tmodalbox: modalBox\r\n\t};\r\n};","import * as utils from \"../../utils/utils\";\r\n\r\nfunction extendSettings (store, parentSettings){\r\n\tvar own = this.$config[store];\r\n\r\n\tif(own){\r\n\t\tif(!own.$extendedConfig){\r\n\t\t\town.$extendedConfig = true;\r\n\t\t\tObject.setPrototypeOf(own, parentSettings);\r\n\t\t}\r\n\t\treturn own;\r\n\t}else{\r\n\t\treturn parentSettings;\r\n\t}\r\n}\r\n\r\nvar configurable = function(parentView){\r\n\tvar parentConfig,\r\n\t\tparentTemplates;\r\n\r\n\treturn {\r\n\t\t$getConfig: function(){\r\n\t\t\tif(!parentConfig){\r\n\t\t\t\tparentConfig = parentView ? parentView.$getConfig() : this.$gantt.config;\r\n\t\t\t}\r\n\t\t\tif(!this.$config.config){\r\n\t\t\t\treturn parentConfig;\r\n\t\t\t}else{\r\n\t\t\t\treturn extendSettings.call(this, \"config\", parentConfig);\r\n\t\t\t}\r\n\t\t},\r\n\t\t$getTemplates: function(){\r\n\t\t\tif(!parentTemplates){\r\n\t\t\t\tparentTemplates = parentView ? parentView.$getTemplates() : this.$gantt.templates;\r\n\t\t\t}\r\n\t\t\tif(!this.$config.templates){\r\n\t\t\t\treturn parentTemplates;\r\n\t\t\t}else{\r\n\t\t\t\treturn extendSettings.call(this, \"templates\", parentTemplates);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport default function(obj, parent){\r\n\tutils.mixin(obj, configurable(parent));\r\n};","import * as utils from \"../../utils/utils\";\r\nimport configurable from \"./configurable\";\r\n\r\nvar uiFactory = function createFactory(gantt){\r\n\tvar views = {};\r\n\r\n\tfunction ui(cell, parentView) {\r\n\t\tvar content;\r\n\t\tvar view = \"cell\";\r\n\t\tif (cell.view){\r\n\t\t\tview = \"viewcell\";\r\n\t\t}else if (cell.resizer) {\r\n\t\t\tview = \"resizer\";\r\n\t\t}\r\n\t\telse if (cell.rows || cell.cols) {\r\n\t\t\tview = \"layout\";\r\n\t\t}\r\n\t\telse if (cell.views) {\r\n\t\t\tview = \"multiview\";\r\n\t\t}\r\n\r\n\t\tcontent = createView.call(this, view, null, cell, parentView);\r\n\t\treturn content;\r\n\t}\r\n\t\r\n\tvar createdViews = {};\r\n\r\n\tfunction createView(name, parent, config, parentView) {\r\n\t\tvar creator = views[name];\r\n\r\n\t\tif(!creator || !creator.create)\r\n\t\t\treturn false;\r\n\r\n\t\tif(name == \"resizer\" && !config.mode){\r\n\t\t\tif(parentView.$config.cols){\r\n\t\t\t\tconfig.mode = \"x\";\r\n\t\t\t}else{\r\n\t\t\t\tconfig.mode = \"y\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(name == \"viewcell\" && config.view == \"scrollbar\" && !config.scroll){\r\n\t\t\tif(parentView.$config.cols){\r\n\t\t\t\tconfig.scroll = \"y\";\r\n\t\t\t}else{\r\n\t\t\t\tconfig.scroll = \"x\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar config = utils.copy(config);\r\n\r\n\t\tif(!config.id && !createdViews[config.view]){\r\n\t\t\tconfig.id = config.view;\r\n\t\t}\r\n\r\n\t\tif(config.id && !config.css){\r\n\t\t\tconfig.css = config.id+\"_cell\";\r\n\t\t}\r\n\r\n\t\tvar view = new creator.create(parent, config, this, gantt);\r\n\r\n\t\tif(creator.configure){\r\n\t\t\tcreator.configure(view);\r\n\t\t}\r\n\r\n\t\tconfigurable(view, parentView);\r\n\t\tif(!view.$id){\r\n\t\t\tview.$id = config.id || gantt.uid();\r\n\t\t}\r\n\r\n\t\tif(!view.$parent && typeof parent == \"object\"){\r\n\t\t\tview.$parent = parent;\r\n\t\t}\r\n\t\tif(!view.$config){\r\n\t\t\tview.$config = config;\r\n\t\t}\r\n\r\n\t\tif(createdViews[view.$id]){\r\n\t\t\tview.$id = gantt.uid();\r\n\t\t}\r\n\r\n\t\tcreatedViews[view.$id] = view;\r\n\r\n\t\treturn view;\r\n\t}\r\n\r\n\tfunction reset(){\r\n\t\tcreatedViews = {};\r\n\t}\r\n\r\n\tfunction register(name, viewConstructor, configure){\r\n\t\tviews[name] = {create: viewConstructor, configure: configure};\r\n\t}\r\n\r\n\tfunction getView(id){\r\n\t\treturn createdViews[id];\r\n\t}\r\n\r\n\tvar factory = {\r\n\t\tinitUI:ui,\r\n\t\treset: reset,\r\n\t\tregisterView: register,\r\n\t\tcreateView: createView,\r\n\t\tgetView: getView\r\n\t};\r\n\r\n\treturn factory;\r\n};\r\n\r\nexport default {\r\n\tcreateFactory: uiFactory\r\n};\r\n\r\n","import * as domHelpers from \"./utils/dom_helpers\";\r\n\r\nvar createMouseHandler = (function(domHelpers) {\r\n\treturn function (gantt) {\r\n\t\tvar eventHandlers = {\r\n\t\t\t\"click\": {},\r\n\t\t\t\"doubleclick\": {},\r\n\t\t\t\"contextMenu\": {}\r\n\t\t};\r\n\r\n\t\tfunction addEventTarget(event, className, handler, root) {\r\n\t\t\tif(!eventHandlers[event][className]){\r\n\t\t\t\teventHandlers[event][className] = [];\r\n\t\t\t}\r\n\r\n\t\t\teventHandlers[event][className].push({\r\n\t\t\t\thandler: handler,\r\n\t\t\t\troot: root\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction callHandler(eventName, className, root, args) {\r\n\t\t\tvar handlers = eventHandlers[eventName][className];\r\n\t\t\tif(handlers){\r\n\t\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\t\tif(!(root || handlers[i].root) || handlers[i].root === root){\r\n\t\t\t\t\t\thandlers[i].handler.apply(this, args);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar id = gantt.locate(e);\r\n\r\n\t\t\tvar handlers = findEventHandlers(e, eventHandlers.click);\r\n\t\t\tvar res = true;\r\n\t\t\tif (id !== null) {\r\n\t\t\t\tres = !gantt.checkEvent(\"onTaskClick\") || gantt.callEvent(\"onTaskClick\", [id, e]);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.callEvent(\"onEmptyClick\", [e]);\r\n\t\t\t}\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = callEventHandlers(handlers, e, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t// GS-1025: if we don't do that, the dropdown or date select will be closed for unselected tasks\r\n\t\t\t\t// GS-1078: or for the built-in select inline editor\r\n\t\t\t\tswitch(e.target.nodeName) {\r\n\t\t\t\t\tcase \"SELECT\":\r\n\t\t\t\t\tcase 'INPUT':\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//allow task selection when the multiselect plugin is not enabled\r\n\t\t\t\tif (id && gantt.getTask(id) && !gantt._multiselect && gantt.config.select_task) {\r\n\t\t\t\t\tgantt.selectTask(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onContextMenu(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar src = e.target || e.srcElement,\r\n\t\t\t\ttaskId = gantt.locate(src),\r\n\t\t\t\tlinkId = gantt.locate(src, gantt.config.link_attribute);\r\n\r\n\t\t\tvar res = !gantt.checkEvent(\"onContextMenu\") || gantt.callEvent(\"onContextMenu\", [taskId, linkId, e]);\r\n\t\t\tif (!res) {\r\n\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\telse\r\n\t\t\t\t\te.returnValue = false;\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\t\tfunction findEventHandlers(e, hash){\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar handlers = [];\r\n\t\t\twhile (trg) {\r\n\t\t\t\tvar css = domHelpers.getClassName(trg);\r\n\t\t\t\tif (css) {\r\n\t\t\t\t\tcss = css.split(\" \");\r\n\t\t\t\t\tfor (var i = 0; i < css.length; i++) {\r\n\t\t\t\t\t\tif (!css[i]) continue;\r\n\t\t\t\t\t\tif (hash[css[i]]) {\r\n\t\t\t\t\t\t\tvar delegateHandlers = hash[css[i]];\r\n\r\n\t\t\t\t\t\t\tfor(var h = 0; h < delegateHandlers.length; h++){\r\n\t\t\t\t\t\t\t\tif(delegateHandlers[h].root){\r\n\t\t\t\t\t\t\t\t\tif(!domHelpers.isChildOf(trg, delegateHandlers[h].root)){\r\n\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\thandlers.push(delegateHandlers[h].handler);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttrg = trg.parentNode;\r\n\t\t\t}\r\n\t\t\treturn handlers;\r\n\t\t}\r\n\r\n\t\tfunction callEventHandlers(handlers, e, id){\r\n\t\t\tvar res = true;\r\n\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tvar handlerResult =  handlers[i].call(gantt, e, id, e.target || e.srcElement);\r\n\t\t\t\tres = res && !(typeof handlerResult != \"undefined\" && handlerResult !== true);\r\n\t\t\t}\r\n\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\r\n\t\tfunction onDoubleClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar id = gantt.locate(e);\r\n\r\n\t\t\tvar handlers = findEventHandlers(e, eventHandlers.doubleclick);\r\n\t\t\t// when doubleclick fired not on task, id === null\r\n\t\t\tvar res = !gantt.checkEvent(\"onTaskDblClick\") || id === null || gantt.callEvent(\"onTaskDblClick\", [id, e]);\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = callEventHandlers(handlers, e, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (id !== null && gantt.getTask(id)) {\r\n\t\t\t\t\tif (res && gantt.config.details_on_dblclick && !gantt.isReadonly(id)) {\r\n\t\t\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onMouseMove(e) {\r\n\t\t\tif (gantt.checkEvent(\"onMouseMove\")) {\r\n\t\t\t\tvar id = gantt.locate(e);\r\n\t\t\t\tgantt._last_move_event = e;\r\n\t\t\t\tgantt.callEvent(\"onMouseMove\", [id, e]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction detach(eventName, className, handler, root) {\r\n\t\t\tif (eventHandlers[eventName] && eventHandlers[eventName][className]) {\r\n\t\t\t\tvar handlers = eventHandlers[eventName];\r\n\t\t\t\tvar elementHandlers = handlers[className];\r\n\t\t\t\tfor(var i = 0; i < elementHandlers.length; i++){\r\n\t\t\t\t\tif(elementHandlers[i].root == root){\r\n\t\t\t\t\t\telementHandlers.splice(i, 1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(!elementHandlers.length){\r\n\t\t\t\t\tdelete handlers[className];\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar domEvents = gantt._createDomEventScope();\r\n\r\n\t\tfunction reset(node){\r\n\r\n\t\t\tdomEvents.detachAll();\r\n\r\n\t\t\tif(node){\r\n\t\t\t\tdomEvents.attach(node, \"click\", onClick);\r\n\t\t\t\tdomEvents.attach(node, \"dblclick\", onDoubleClick);\r\n\t\t\t\tdomEvents.attach(node, \"mousemove\", onMouseMove);\r\n\t\t\t\tdomEvents.attach(node, \"contextmenu\", onContextMenu);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\treturn {\r\n\t\t\treset: reset,\r\n\t\t\tglobal: function(event, classname, handler){\r\n\t\t\t\taddEventTarget(event, classname, handler, null);\r\n\t\t\t},\r\n\t\t\tdelegate: addEventTarget,\r\n\t\t\tdetach: detach,\r\n\t\t\tcallHandler: callHandler,\r\n\t\t\tonDoubleClick: onDoubleClick,\r\n\t\t\tonMouseMove: onMouseMove,\r\n\t\t\tonContextMenu: onContextMenu,\r\n\t\t\tonClick: onClick,\r\n\t\t\tdestructor: function(){\r\n\t\t\t\treset();\r\n\t\t\t\teventHandlers = null;\r\n\t\t\t\tdomEvents = null;\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t};\r\n\r\n})(domHelpers);\r\n\r\n\r\nexport default {\r\n\tinit:createMouseHandler\r\n};","export default function(viewport, box, gantt){\r\n\tif(!box){\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif(box.left > viewport.x_end || box.left + box.width < viewport.x){\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif(box.top > viewport.y_end || box.top + box.height < viewport.y){\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\treturn true;\r\n};","export default function(gantt){\r\n\treturn gantt.config.smart_rendering && gantt._smart_render;\r\n};","export default function(item, view, config){\r\n\treturn {\r\n\t\ttop: view.getItemTop(item.id),\r\n\t\theight: view.getItemHeight(item.id),\r\n\t\tleft: 0,\r\n\t\tright: Infinity\r\n\t};\r\n};","export default function getVisibleTasksRange(gantt, view, config, datastore, viewport){\r\n\tvar buffer = 1;\r\n\tvar start = view.getItemIndexByTopPosition(viewport.y) || 0;\r\n\tvar end = view.getItemIndexByTopPosition(viewport.y_end) || datastore.count();\r\n\tvar indexStart = Math.max(0, start - buffer);\r\n\tvar indexEnd =  Math.min(datastore.count(), end + buffer);\r\n\t// GS-2481 and GS-1715, need to take into account selected task when using keyboard shortcuts and when the inline editor is opened \r\n\tconst extraTasksIds= [];\r\n\tif (gantt.config.keyboard_navigation && gantt.getSelectedId()) {\r\n\t\tlet task = gantt.getTask(gantt.getSelectedId());\r\n\t\t// GS-2661 and GS-2835: The selected task shouldn't be a split child \r\n\t\t// and its parent shouldn't be collapsed\r\n\t\tif(task.$expanded_branch && !task.$split_subtask) {\r\n\t\t\textraTasksIds.push(gantt.getSelectedId());\r\n\t\t}\r\n\t}\r\n\tif (gantt.$ui.getView(\"grid\") && gantt.ext.inlineEditors && gantt.ext.inlineEditors.getState().id) {\r\n\t\tlet inlineEditorId = gantt.ext.inlineEditors.getState().id;\r\n\t\tif (datastore.exists(inlineEditorId)){\r\n\t\t\textraTasksIds.push(inlineEditorId);\r\n\t\t}\r\n\t}\r\n\treturn {\r\n\t\tstart: indexStart,\r\n\t\tend: indexEnd,\r\n\t\tids: extraTasksIds \r\n\t};\r\n};","import genericViewPortChecker from \"./viewport/is_in_viewport\";\r\nimport isLegacyRender from \"./is_legacy_smart_render\";\r\nimport basicGetRectangle from \"./viewport/get_grid_row_rectangle\";\r\nimport basicGetRange from \"./viewport/get_visible_bars_range\";\r\nvar rendererFactory = function(gantt){\r\n\r\n\t//hash of dom elements is needed to redraw single bar/link\r\n\tvar task_area_pulls = {},\r\n\t\ttask_area_renderers = {};\r\n\r\n\tfunction getView(layer){\r\n\t\tvar view = null;\r\n\t\tif (typeof layer.view === \"string\") {\r\n\t\t\tview = gantt.$ui.getView(layer.view);\r\n\t\t} else if (layer.view) {\r\n\t\t\tview = layer.view;\r\n\t\t}\r\n\t\treturn view;\r\n\t}\r\n\r\n\tfunction getRenderer(id, layer, node) {\r\n\t\t\r\n\t\tif (task_area_renderers[id])\r\n\t\t\treturn task_area_renderers[id];\r\n\r\n\t\tif (!layer.renderer)\r\n\t\t\tgantt.assert(false, \"Invalid renderer call\");\r\n\r\n\t\tvar renderMethod = null;\r\n\t\tvar updateMethod = null;\r\n\t\tvar getRectangle = null;\r\n\t\tvar renderCallbackMethod = null;\r\n\t\tvar specializedViewPortChecker = null;\r\n\r\n\t\tif(typeof layer.renderer === \"function\"){\r\n\t\t\trenderMethod = layer.renderer;\r\n\t\t\tgetRectangle = basicGetRectangle;\r\n\t\t}else{\r\n\t\t\trenderMethod = layer.renderer.render;\r\n\t\t\tupdateMethod = layer.renderer.update;\r\n\t\t\trenderCallbackMethod = layer.renderer.onrender;\r\n\t\t\t\r\n\t\t\tif(layer.renderer.isInViewPort){\r\n\t\t\t\tspecializedViewPortChecker = layer.renderer.isInViewPort;\r\n\t\t\t}else{\r\n\t\t\t\tgetRectangle = layer.renderer.getRectangle;\r\n\t\t\t}\r\n\r\n\t\t\tif (!getRectangle && getRectangle !== null) {\r\n\t\t\t\tgetRectangle = basicGetRectangle;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar filter = layer.filter;\r\n\r\n\t\tif (node)\r\n\t\t\tnode.setAttribute(gantt.config.layer_attribute, true);\r\n\r\n\t\ttask_area_renderers[id] = {\r\n\t\t\trender_item: function (item, container, viewPort, layerView, viewConfig) {\r\n\t\t\t\tcontainer = container || node;\r\n\t\t\t\tif (filter) {\r\n\t\t\t\t\tif (!filter(item)) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar view = layerView || getView(layer);\r\n\t\t\t\tvar config = viewConfig || (view ? view.$getConfig() : null);\r\n\t\t\t\tvar rendererViewPort = viewPort;\r\n\t\t\t\tif(!rendererViewPort && config && config.smart_rendering){\r\n\t\t\t\t\trendererViewPort = view.getViewPort();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar dom = null;\r\n\t\t\t\tif(!isLegacyRender(gantt) && (getRectangle || specializedViewPortChecker) && rendererViewPort){\r\n\t\t\t\t\tvar isVisible = false;\r\n\t\t\t\t\tif(specializedViewPortChecker){\r\n\t\t\t\t\t\tisVisible = specializedViewPortChecker(item, rendererViewPort, view, config, gantt);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tisVisible = genericViewPortChecker(rendererViewPort, getRectangle(item, view, config, gantt), gantt);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(isVisible){\r\n\t\t\t\t\t\tdom = renderMethod.call(gantt, item, view, config, rendererViewPort);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdom = renderMethod.call(gantt, item, view, config, rendererViewPort);\r\n\t\t\t\t}\r\n\t\t\t\tthis.append(item, dom, container);\r\n\r\n\t\t\t\tvar useBuffer = container.nodeType == 11;//DocumentFragment\r\n\t\t\t\tif(renderCallbackMethod && !useBuffer && dom) {\r\n\t\t\t\t\trenderCallbackMethod.call(gantt, item, dom, view);\r\n\t\t\t\t} \r\n\t\t\t},\r\n\r\n\t\t\tclear: function (container) {\r\n\r\n\t\t\t\tthis.rendered = task_area_pulls[id] = {};\r\n\t\t\t\tif(!layer.append)\r\n\t\t\t\t\tthis.clear_container(container);\r\n\t\t\t},\r\n\t\t\tclear_container: function (container) {\r\n\t\t\t\tcontainer = container || node;\r\n\t\t\t\tif (container){\r\n\t\t\t\t\tcontainer.innerHTML = \"\";\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tget_visible_range: function(datastore){\r\n\t\t\t\tvar view = getView(layer);\r\n\t\t\t\tvar viewport;\r\n\t\t\t\tvar viewConfig = view ? view.$getConfig() : null;\r\n\t\t\t\tif(viewConfig && viewConfig.smart_rendering){\r\n\t\t\t\t\tviewport = view.getViewPort();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar range;\r\n\t\t\t\tif(view && viewport){\r\n\t\t\t\t\tif(typeof layer.renderer === \"function\"){\r\n\t\t\t\t\t\trange = basicGetRange(gantt, view, viewConfig, datastore, viewport);\r\n\t\t\t\t\t}else if(layer.renderer && layer.renderer.getVisibleRange){\r\n\t\t\t\t\t\trange = layer.renderer.getVisibleRange(gantt, view, viewConfig, datastore, viewport);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(!range){\r\n\t\t\t\t\trange = {\r\n\t\t\t\t\t\tstart: 0,\r\n\t\t\t\t\t\tend: datastore.count()\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn range;\r\n\t\t\t},\r\n\t\t\tprepare_data: function(items){\r\n\t\t\t\tif(layer.renderer && layer.renderer.prepareData){\r\n\t\t\t\t\treturn layer.renderer.prepareData(items, gantt, layer);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trender_items: function (items, container) {\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tvar buffer = document.createDocumentFragment();\r\n\t\t\t\tthis.clear(container);\r\n\r\n\t\t\t\tvar viewPort = null;\r\n\t\t\t\tvar view = getView(layer);\r\n\t\t\t\tvar viewConfig = view ? view.$getConfig() : null;\r\n\t\t\t\tif(viewConfig && viewConfig.smart_rendering){\r\n\t\t\t\t\tviewPort = view.getViewPort();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var i = 0, vis = items.length; i < vis; i++) {\r\n\t\t\t\t\tthis.render_item(items[i], buffer, viewPort, view, viewConfig);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcontainer.appendChild(buffer, container);\r\n\r\n\t\t\t\tvar itemsSearch = {};\r\n\t\t\t\titems.forEach(function(item){\r\n\t\t\t\t\titemsSearch[item.id] = item;\r\n\t\t\t\t});\r\n\t\t\t\tvar renderedItems = {};\r\n\t\t\t\tif (renderCallbackMethod) {\r\n\t\t\t\t\tvar newElements = {};\r\n\t\t\t\t\tfor(var i in this.rendered) {\r\n\t\t\t\t\t\tif(!renderedItems[i]){\r\n\t\t\t\t\t\t\tnewElements[i] = this.rendered[i];\r\n\t\t\t\t\t\t\trenderCallbackMethod.call(gantt, itemsSearch[i], this.rendered[i], view);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tupdate_items: function (items, container) {\r\n\t\t\t\tvar view = getView(layer);\r\n\t\t\t\tvar viewConfig = view ? view.$getConfig() : null;\r\n\t\t\t\tif(!view || !view.$getConfig().smart_rendering || isLegacyRender(gantt)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!this.rendered){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!(getRectangle || specializedViewPortChecker)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tvar buffer = document.createDocumentFragment();\r\n\r\n\t\t\t\tvar viewPort = null;\r\n\t\t\t\tif(view){\r\n\t\t\t\t\tviewPort = view.getViewPort();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar itemsSearch = {};\r\n\t\t\t\titems.forEach(function(item){\r\n\t\t\t\t\titemsSearch[item.id] = item;\r\n\t\t\t\t});\r\n\t\t\t\tvar renderedItems = {};\r\n\r\n\t\t\t\tvar nodesToRemove = {};\r\n\t\t\t\tfor(var i in this.rendered){\r\n\t\t\t\t\tnodesToRemove[i] = true;\r\n\t\t\t\t\trenderedItems[i] = true;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar renderCalledFor = {};\r\n\t\t\t\tfor (var i = 0, vis = items.length; i < vis; i++) {\r\n\t\t\t\t\tvar item = items[i];\r\n\t\t\t\t\tvar itemNode = this.rendered[item.id];\r\n\t\t\t\t\tnodesToRemove[item.id] = false;\r\n\t\t\t\t\tif (itemNode && itemNode.parentNode) {\r\n\t\t\t\t\t\tvar isVisible = false;\r\n\t\t\t\t\t\tif(specializedViewPortChecker){\r\n\t\t\t\t\t\t\tisVisible = specializedViewPortChecker(item, viewPort, view, viewConfig, gantt);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tisVisible = genericViewPortChecker(viewPort, getRectangle(item, view, viewConfig, gantt), gantt);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!isVisible) {\r\n\t\t\t\t\t\t\tnodesToRemove[item.id] = true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif(updateMethod){\r\n\t\t\t\t\t\t\t\tupdateMethod.call(gantt, item, itemNode, view, viewConfig, viewPort);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.restore(item, buffer);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trenderCalledFor[items[i].id] = true;\r\n\t\t\t\t\t\tthis.render_item(items[i], buffer, viewPort, view, viewConfig);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor(var i in nodesToRemove){\r\n\t\t\t\t\tif(nodesToRemove[i]){\r\n\t\t\t\t\t\tthis.hide(i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(buffer.childNodes.length){\r\n\t\t\t\t\tcontainer.appendChild(buffer, container);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (renderCallbackMethod) {\r\n\t\t\t\t\tvar newElements = {};\r\n\t\t\t\t\tfor(var i in this.rendered) {\r\n\t\t\t\t\t\tif(!renderedItems[i] || renderCalledFor[i]){\r\n\t\t\t\t\t\t\tnewElements[i] = this.rendered[i];\r\n\t\t\t\t\t\t\trenderCallbackMethod.call(gantt, itemsSearch[i], this.rendered[i], view);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tappend: function (item, node, container) {\r\n\t\t\t\tif(!this.rendered){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!node) {\r\n\t\t\t\t\tif (this.rendered[item.id]) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.rendered[item.id] && this.rendered[item.id].parentNode) {\r\n\t\t\t\t\tthis.replace_item(item.id, node);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item.id] = node;\r\n\t\t\t},\r\n\t\t\treplace_item: function (item_id, newNode) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.replaceChild(newNode, item);\r\n\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item_id] = newNode;\r\n\t\t\t},\r\n\t\t\tremove_item: function (item_id) {\r\n\t\t\t\tthis.hide(item_id);\r\n\t\t\t\tdelete this.rendered[item_id];\r\n\t\t\t},\r\n\t\t\thide: function (item_id) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.removeChild(item);\r\n\t\t\t\t}\r\n\t\t\t\tdelete this.rendered[item_id];\r\n\t\t\t},\r\n\t\t\trestore: function (item, container) {\r\n\t\t\t\tvar dom = this.rendered[item.id];\r\n\t\t\t\tif (dom) {\r\n\t\t\t\t\tif (!dom.parentNode) {\r\n\t\t\t\t\t\tthis.append(item, dom, container || node);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.render_item(item, container || node);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchange_id: function (oldid, newid) {\r\n\t\t\t\tthis.rendered[newid] = this.rendered[oldid];\r\n\t\t\t\tdelete this.rendered[oldid];\r\n\t\t\t},\r\n\t\t\trendered: task_area_pulls[id],\r\n\t\t\tnode: node,\r\n\t\t\tdestructor: function () {\r\n\t\t\t\tthis.clear();\r\n\t\t\t\tdelete task_area_renderers[id];\r\n\t\t\t\tdelete task_area_pulls[id];\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn task_area_renderers[id];\r\n\t}\r\n\r\n\r\n\tfunction clearRenderers() {\r\n\t\tfor (var i in task_area_renderers) {\r\n\t\t\tgetRenderer(i).destructor();\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetRenderer: getRenderer,\r\n\t\tclearRenderers: clearRenderers\r\n\t};\r\n\r\n};\r\n\r\nexport default rendererFactory;","import renderFactoryProvider from \"./render_factory\";\r\nimport * as utils from \"../../../utils/utils\";\r\nimport * as domHelpers from \"../utils/dom_helpers\";\r\nimport isLegacyRender from \"./is_legacy_smart_render\";\r\n\r\nvar layerFactory = function(gantt){\r\n\r\n\tvar renderFactory = renderFactoryProvider(gantt);\r\n\treturn {\r\n\tcreateGroup: function (getContainer, relativeRoot, defaultFilters, initLayer) {\r\n\r\n\t\tvar renderGroup = {\r\n\t\t\ttempCollection: [],\r\n\t\t\trenderers: {},\r\n\t\t\tcontainer: getContainer,\r\n\t\t\tfilters: [],\r\n\t\t\tgetLayers: function () {\r\n\t\t\t\tthis._add();// add pending layers\r\n\r\n\t\t\t\tvar res = [];\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tres.push(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t\treturn res;\r\n\t\t\t},\r\n\t\t\tgetLayer: function (id) {\r\n\t\t\t\treturn this.renderers[id];\r\n\t\t\t},\r\n\t\t\t_add: function (layer) {\r\n\t\t\t\tif (layer) {\r\n\t\t\t\t\tlayer.id = layer.id || utils.uid();\r\n\t\t\t\t\tthis.tempCollection.push(layer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst container = this.container();\r\n\t\t\t\tconst pending = this.tempCollection;\r\n\t\t\t\tfor (let i = 0; i < pending.length; i++) {\r\n\t\t\t\t\tlayer = pending[i];\r\n\t\t\t\t\t// GS-2803: in case of Salesforce domHelpers.isChildOf check with document.body doesn't work\r\n\t\t\t\t\t// instead we check it with isConnected property\r\n\t\t\t\t\tif (!this.container() && !(layer && layer.container && layer.container.isConnected)) continue;\r\n\r\n\t\t\t\t\tlet node = layer.container,\r\n\t\t\t\t\t\tid = layer.id,\r\n\t\t\t\t\t\ttopmost = layer.topmost;\r\n\t\t\t\t\tif (!node.parentNode) {\r\n\t\t\t\t\t\t//insert on top or below the tasks\r\n\t\t\t\t\t\tif (topmost) {\r\n\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlet rel = relativeRoot ? relativeRoot() : container.firstChild;\r\n\t\t\t\t\t\t\t// GS-1274: if we don't add the second check, Gantt stops working if\r\n\t\t\t\t\t\t\t// we add the task layer without the timeline and switch to a layout with the timeline\r\n\t\t\t\t\t\t\tif (rel && rel.parentNode == container)\r\n\t\t\t\t\t\t\t\tcontainer.insertBefore(node, rel);\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.renderers[id] = renderFactory.getRenderer(\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\tlayer,\r\n\t\t\t\t\t\tnode\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tif (initLayer) {\r\n\t\t\t\t\t\tinitLayer(layer, gantt);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.tempCollection.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddLayer: function (config) {\r\n\t\t\t\tif(config){\r\n\t\t\t\t\tif(typeof config == \"function\"){\r\n\t\t\t\t\t\tconfig = {renderer: config};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(config.filter === undefined){\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(defaultFilters || []);\r\n\t\t\t\t\t}else if(config.filter instanceof Array){\r\n\t\t\t\t\t\tconfig.filter.push(defaultFilters);\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(config.filter);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!config.container){\r\n\t\t\t\t\t\tconfig.container = document.createElement(\"div\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar self = this;\r\n\t\t\t\t\tconfig.requestUpdate = function(){\r\n\t\t\t\t\t\tif(gantt.config.smart_rendering && !isLegacyRender(gantt)){\r\n\t\t\t\t\t\t\tif(self.renderers[config.id]){\r\n\t\t\t\t\t\t\t\tself.onUpdateRequest(self.renderers[config.id]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._add(config);\r\n\t\t\t\treturn (config ? config.id : undefined);\r\n\t\t\t},\r\n\t\t\tonUpdateRequest: function(layer){\r\n\r\n\t\t\t},\r\n\r\n\t\t\teachLayer: function(code){\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tcode(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tremoveLayer: function (id) {\r\n\t\t\t\tif(!this.renderers[id])\r\n\t\t\t\t\treturn;\r\n\t\t\t\tthis.renderers[id].destructor();\r\n\t\t\t\tdelete this.renderers[id];\r\n\t\t\t},\r\n\t\t\tclear: function () {\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tthis.renderers[i].destructor();\r\n\t\t\t\t}\r\n\t\t\t\tthis.renderers = {};\r\n\t\t\t}//,\r\n\t\t\t//prepareConfig: prepareConfig\r\n\t\t};\r\n\r\n\t\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\t\trenderGroup.clear();\r\n\t\t\trenderGroup = null;\r\n\t\t});\r\n\r\n\t\treturn renderGroup;\r\n\t}\r\n};};\r\n\r\n\r\nfunction mergeFilters(filter_methods){\r\n\tif(!(filter_methods instanceof Array)){\r\n\t\tfilter_methods = Array.prototype.slice.call(arguments, 0);\r\n\t}\r\n\r\n\treturn function(obj){\r\n\t\tvar res = true;\r\n\t\tfor(var i = 0, len = filter_methods.length; i < len; i++){\r\n\t\t\tvar filter_method = filter_methods[i];\r\n\t\t\tif(filter_method){\r\n\t\t\t\tres = res && (filter_method(obj.id, obj) !== false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t};\r\n}\r\n\r\n\r\nexport default layerFactory;\r\n","export default function(item, view, config){\r\n\tif(!item.start_date || !item.end_date){\r\n\t\treturn null;\r\n\t}\r\n\tvar padding = 200;\r\n\tvar startCoord = view.posFromDate(item.start_date);\r\n\tvar endCoord = view.posFromDate(item.end_date);\r\n\tvar left = Math.min(startCoord, endCoord) - padding;\r\n\tvar right = Math.max(startCoord, endCoord) + padding;\r\n\treturn {\r\n\t\ttop: view.getItemTop(item.id),\r\n\t\theight: view.getItemHeight(item.id),\r\n\t\tleft: left,\r\n\t\twidth: right - left\r\n\t};\r\n};","import getLinkRectangle from \"../get_link_rectangle\";\r\n\r\nexport default function(){\r\n\tvar coordinates = [];\r\n\tvar calculated = false;\r\n\r\n\tfunction clearCache(){\r\n\t\tcoordinates = [];\r\n\t\tcalculated = false;\r\n\t}\r\n\r\n\tfunction buildCache(datastore, view, gantt){\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar visibleItems = datastore.getVisibleItems();\r\n\t\t//datastore.eachItem(function(link){\r\n\t\tvisibleItems.forEach(function(link){\r\n\t\t\tvar rec = getLinkRectangle(link, view, config, gantt);\r\n\t\t\tif(!rec){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tcoordinates.push({id: link.id, rec: rec});\r\n\t\t});\r\n\r\n\t\tcoordinates.sort(function(a, b){\r\n\t\t\tif(a.rec.right < b.rec.right){\r\n\t\t\t\treturn -1;\r\n\t\t\t}else {\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tcalculated = true;\r\n\t}\r\n\r\n\tvar initialized = false;\r\n\tfunction init(datastore){\r\n\t\tif(initialized){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tinitialized = true;\r\n\t\tdatastore.attachEvent(\"onPreFilter\", clearCache);\r\n\t\tdatastore.attachEvent(\"onStoreUpdated\", clearCache);\r\n\t\tdatastore.attachEvent(\"onClearAll\", clearCache);\r\n\t\tdatastore.attachEvent(\"onBeforeStoreUpdate\", clearCache);\r\n\t}\r\n\r\n\treturn function getVisibleLinksRange(gantt, view, config, datastore, viewport){\r\n\t\tinit(datastore);\r\n\t\tif(!calculated){\r\n\t\t\tbuildCache(datastore, view, gantt);\r\n\t\t}\r\n\r\n\t\tvar visibleBoxes = [];\r\n\t\tfor(var i = 0; i < coordinates.length; i++){\r\n\t\t\tvar item = coordinates[i];\r\n\t\t\tvar box = item.rec;\r\n\t\t\tif(box.right < viewport.x){\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif(box.left < viewport.x_end && box.right > viewport.x && box.top < viewport.y_end && box.bottom > viewport.y){\r\n\t\t\t\tvisibleBoxes.push(item.id);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn {\r\n\t\t\tids: visibleBoxes\r\n\t\t};\r\n\t};\r\n};","\r\n\r\nimport barRectangle from \"./get_bar_rectangle\";\r\n\r\nexport default function getLinkBox(item, view, config, gantt){\r\n\tif(!gantt.isTaskExists(item.source)){\r\n\t\treturn null;\r\n\t}\r\n\r\n\tif(!gantt.isTaskExists(item.target)){\r\n\t\treturn null;\r\n\t}\r\n\tvar sourceBox = barRectangle(gantt.getTask(item.source), view, gantt);\r\n\tvar targetBox = barRectangle(gantt.getTask(item.target), view, gantt);\r\n\r\n\tif(!sourceBox || !targetBox){\r\n\t\treturn null;\r\n\t}\r\n\r\n\tvar padding = 100;\r\n\tvar left = Math.min(sourceBox.left, targetBox.left) - padding;\r\n\tvar right = Math.max(sourceBox.left + sourceBox.width, targetBox.left + targetBox.width) + padding;\r\n\tvar top = Math.min(sourceBox.top, targetBox.top) - padding;\r\n\tvar bottom = Math.max(sourceBox.top + sourceBox.height, targetBox.top + targetBox.height) + padding;\r\n\r\n\treturn {\r\n\t\ttop: top,\r\n\t\theight: bottom - top,\r\n\t\tbottom,\r\n\t\tleft: left,\r\n\t\twidth: right - left,\r\n\t\tright\r\n\t};\r\n};\r\n","\r\n// optimized checker for links smart rendering\r\n\r\n// first check the vertical position since it's easier to calculate\r\n\r\nexport default function isLinkInViewPort(item, viewport, view, config, gantt){\r\n\tvar source = view.$gantt.getTask(item.source);\r\n\tvar target = view.$gantt.getTask(item.target);\r\n\t// check vertical visibility first since it's a lighter check\r\n\tvar sourceTop = view.getItemTop(source.id);\r\n\tvar sourceHeight = view.getItemHeight(source.id);\r\n\r\n\tvar targetTop = view.getItemTop(target.id);\r\n\tvar targetHeight = view.getItemHeight(target.id);\r\n\r\n\tif(viewport.y > sourceTop + sourceHeight &&\r\n\t\tviewport.y > targetTop + targetHeight){\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif(viewport.y_end < targetTop &&\r\n\t\tviewport.y_end < sourceTop){\r\n\t\treturn false;\r\n\t}\r\n\r\n\tvar padding = 100;\r\n\tvar sourceLeft = view.posFromDate(source.start_date);\r\n\tvar sourceRight = view.posFromDate(source.end_date);\r\n\tvar targetLeft = view.posFromDate(target.start_date);\r\n\tvar targetRight = view.posFromDate(target.end_date);\r\n\r\n\tif(sourceLeft > sourceRight){\r\n\t\t// rtl\r\n\t\tvar tmp = sourceRight;\r\n\t\tsourceRight = sourceLeft;\r\n\t\tsourceLeft = tmp;\r\n\t}\r\n\tif(targetLeft > targetRight){\r\n\t\t// rtl\r\n\t\tvar tmp = targetRight;\r\n\t\ttargetRight = targetLeft;\r\n\t\ttargetLeft = tmp;\r\n\t}\r\n\tsourceLeft += -padding; // add buffer for custom elements\r\n\tsourceRight += padding;\r\n\ttargetLeft += -padding; // add buffer for custom elements\r\n\ttargetRight += padding;\r\n\r\n\tif(viewport.x > sourceRight &&\r\n\t\tviewport.x > targetRight){\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif(viewport.x_end < sourceLeft &&\r\n\t\tviewport.x_end < targetLeft){\r\n\t\treturn false;\r\n\t}\r\n\treturn true;\r\n};\r\n","import createLayerFactory from \"./render/layer_engine\";\r\n\r\nimport getVisibleTaskRange from \"./render/viewport/get_visible_bars_range\";\r\nimport getVisibleLinksRangeFactory from \"./render/viewport/factory/get_visible_link_range\";\r\n\r\nimport isLinkInViewport from \"./render/viewport/is_link_in_viewport\";\r\n\r\nfunction initLayer(layer, gantt){\r\n\tif(!layer.view){\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar view = layer.view;\r\n\tif(typeof view === \"string\"){\r\n\t\tview = gantt.$ui.getView(view);\r\n\t}\r\n\r\n\tif(view && view.attachEvent){\r\n\t\tview.attachEvent(\"onScroll\", function(){\r\n\t\t\tvar state = gantt.$services.getService(\"state\");\r\n\t\t\t// don't repaint if we're inside batchUpdate, a complete repaint will be called afterwards\r\n\t\t\tif(!state.getState(\"batchUpdate\").batch_update && !view.$config.$skipSmartRenderOnScroll){\r\n\t\t\t\tif(layer.requestUpdate){\r\n\t\t\t\t\tlayer.requestUpdate();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nvar createLayerEngine = function(gantt){\r\n\tvar factory = createLayerFactory(gantt);\r\n\treturn {\r\n\t\tgetDataRender: function(name){\r\n\t\t\treturn gantt.$services.getService(\"layer:\" + name) || null;\r\n\t\t},\r\n\t\tcreateDataRender: function(config){\r\n\t\t\tvar name = config.name,\r\n\t\t\t\tdefaultContainer = config.defaultContainer,\r\n\t\t\t\tpreviusSiblingContainer = config.defaultContainerSibling;\r\n\r\n\t\t\tvar layers = factory.createGroup(\r\n\t\t\t\tdefaultContainer,\r\n\t\t\t\tpreviusSiblingContainer,\r\n\t\t\t\tfunction(itemId, item){\r\n\t\t\t\t\tif(layers.filters){\r\n\t\t\t\t\t\tfor(var i = 0; i < layers.filters.length; i++){\r\n\t\t\t\t\t\t\tif(layers.filters[i](itemId, item) === false){\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tinitLayer\r\n\t\t\t);\r\n\r\n\t\t\tgantt.$services.setService(\"layer:\" + name, function(){\r\n\t\t\t\treturn layers;\r\n\t\t\t});\r\n\r\n\t\t\tgantt.attachEvent(\"onGanttReady\", function () {\r\n\t\t\t\tlayers.addLayer();// init layers on start\r\n\t\t\t});\r\n\r\n\t\t\treturn layers;\r\n\t\t},\r\n\t\tinit: function(){\r\n\t\t\tvar taskLayers = this.createDataRender({\r\n\t\t\t\tname: \"task\",\r\n\t\t\t\tdefaultContainer: function(){\r\n\t\t\t\t\tif(gantt.$task_data){\r\n\t\t\t\t\t\treturn gantt.$task_data;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_data;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdefaultContainerSibling: function(){\r\n\t\t\t\t\tif(gantt.$task_links){\r\n\t\t\t\t\t\treturn gantt.$task_links;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_links;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfilter: function(item){\r\n\r\n\t\t\t\t}\r\n\t\t\t}, gantt);\r\n\r\n\t\t\tvar linkLayers = this.createDataRender({\r\n\t\t\t\tname: \"link\",\r\n\t\t\t\tdefaultContainer: function(){\r\n\t\t\t\t\tif(gantt.$task_data){\r\n\t\t\t\t\t\treturn gantt.$task_data;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, gantt);\r\n\r\n\t\t\treturn {\r\n\t\t\t\taddTaskLayer: function(config){\r\n\t\t\t\t\tconst rangeFunction = getVisibleTaskRange;\r\n\t\t\t\t\tif(typeof config === \"function\"){\r\n\t\t\t\t\t\tconfig = {\r\n\t\t\t\t\t\t\trenderer: {\r\n\t\t\t\t\t\t\t\trender: config,\r\n\t\t\t\t\t\t\t\tgetVisibleRange: rangeFunction\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(config.renderer && !config.renderer.getVisibleRange){\r\n\t\t\t\t\t\t\tconfig.renderer.getVisibleRange = rangeFunction;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconfig.view = \"timeline\";\r\n\r\n\t\t\t\t\treturn taskLayers.addLayer(config);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t_getTaskLayers: function(){\r\n\t\t\t\t\treturn taskLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveTaskLayer: function(id){\r\n\t\t\t\t\ttaskLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t_clearTaskLayers: function(){\r\n\t\t\t\t\ttaskLayers.clear();\r\n\t\t\t\t},\r\n\t\t\t\taddLinkLayer: function(config){\r\n\t\t\t\t\tconst rangeFunction = getVisibleLinksRangeFactory();\r\n\t\t\t\t\tif(typeof config === \"function\"){\r\n\t\t\t\t\t\tconfig = {\r\n\t\t\t\t\t\t\trenderer: {\r\n\t\t\t\t\t\t\t\trender: config,\r\n\t\t\t\t\t\t\t\tgetVisibleRange: rangeFunction\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(config.renderer && !config.renderer.getVisibleRange){\r\n\t\t\t\t\t\t\tconfig.renderer.getVisibleRange = rangeFunction;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconfig.view = \"timeline\";\r\n\t\t\t\t\tif(config && config.renderer){\r\n\t\t\t\t\t\tif(!config.renderer.getRectangle && !config.renderer.isInViewPort){\r\n\t\t\t\t\t\t\tconfig.renderer.isInViewPort = isLinkInViewport;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn linkLayers.addLayer(config);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t_getLinkLayers: function(){\r\n\t\t\t\t\treturn linkLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveLinkLayer: function(id){\r\n\t\t\t\t\tlinkLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t_clearLinkLayers: function(){\r\n\t\t\t\t\tlinkLayers.clear();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport default createLayerEngine;","import * as utils from \"../../../utils/utils\";\r\nimport eventable from \"../../../utils/eventable\";\r\nimport * as domHelpers from \"../utils/dom_helpers\";\r\n\r\nvar Cell = (function () {\r\n\t\"use strict\";\r\n\r\n\tfunction Cell(parent, config, factory, gantt) {\r\n\t\tif (parent) {\r\n\t\t\tthis.$container = domHelpers.toNode(parent);\r\n\t\t\tthis.$parent = parent;\r\n\t\t}\r\n\t\t// save config\r\n\t\tthis.$config = utils.mixin(config, {\r\n\t\t\theaderHeight: 33\r\n\t\t});\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis.$domEvents = gantt._createDomEventScope();\r\n\t\t// set id\r\n\t\tthis.$id = config.id || \"c\" + utils.uid();\r\n\r\n\t\tthis.$name = \"cell\";\r\n\t\tthis.$factory = factory;\r\n\t\tthis.$externalComponent = null;\r\n\r\n\t\teventable(this);\r\n\r\n\t}\r\n\r\n\tCell.prototype.destructor = function () {\r\n\t\tthis.$parent = this.$container = this.$view = null;\r\n\t\tvar mouse = this.$gantt.$services.getService(\"mouseEvents\");\r\n\t\tmouse.detach(\"click\", \"gantt_header_arrow\", this._headerClickHandler);\r\n\t\tthis.$domEvents.detachAll();\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t};\r\n\tCell.prototype.cell = function (id) {\r\n\t\treturn null;\r\n\t};\r\n\r\n\tCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\t//GS-333 Add a way to scroll the HTML views:\r\n\t\tvar cell = this.$view;\r\n\t\tif (this.$config.html) cell = this.$view.firstChild;\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\tcell.scrollLeft = left;\r\n\t\t}\r\n\t\tif(top*1 == top){\r\n\t\t\tcell.scrollTop = top;\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype.clear = function(){\r\n\t\tthis.getNode().innerHTML = \"\";\r\n\t\tthis.getNode().className = \"gantt_layout_content\";\r\n\t\tthis.getNode().style.padding = \"0\";\r\n\t};\r\n\r\n\tCell.prototype.resize = function (final) {\r\n\t\tif (this.$parent) {\r\n\t\t\treturn this.$parent.resize(final);\r\n\t\t}\r\n\r\n\t\tif(final === false){\r\n\t\t\tthis.$preResize = true;\r\n\t\t}\r\n\r\n\t\tvar topCont = this.$container;\r\n\t\tvar x = topCont.offsetWidth;\r\n\t\tvar y = topCont.offsetHeight;\r\n\t\tvar topSize = this.getSize();\r\n\t\tif (topCont === document.body) {\r\n\t\t\tx = document.body.offsetWidth;\r\n\t\t\ty = document.body.offsetHeight;\r\n\t\t}\r\n\t\tif (x < topSize.minWidth) {\r\n\t\t\tx = topSize.minWidth;\r\n\t\t}\r\n\t\tif (x > topSize.maxWidth) {\r\n\t\t\tx = topSize.maxWidth;\r\n\t\t}\r\n\t\tif (y < topSize.minHeight) {\r\n\t\t\ty = topSize.minHeight;\r\n\t\t}\r\n\t\tif (y > topSize.maxHeight) {\r\n\t\t\ty = topSize.maxHeight;\r\n\t\t}\r\n\t\tthis.setSize(x, y);\r\n\r\n\t\tif(!this.$preResize){\r\n\t\t//\tself.callEvent(\"onResize\", [x, y]);\r\n\t\t}\r\n\t\tthis.$preResize = false;\r\n\t};\r\n\r\n\tCell.prototype.hide = function () {\r\n\t\tthis._hide(true);\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.show = function (force) {\r\n\t\tthis._hide(false);\r\n\t\tif (force && this.$parent) {\r\n\t\t\tthis.$parent.show();\r\n\t\t}\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype._hide = function (mode) {\r\n\t\tif (mode === true && this.$view.parentNode) {\r\n\t\t\tthis.$view.parentNode.removeChild(this.$view);\r\n\t\t}\r\n\t\telse if (mode === false && !this.$view.parentNode) {\r\n\t\t\tvar index = this.$parent.cellIndex(this.$id);\r\n\t\t\tthis.$parent.moveView(this, index);\r\n\t\t}\r\n\t\tthis.$config.hidden = mode;\r\n\t};\r\n\tCell.prototype.$toHTML = function (content, css) {\r\n\t\tif (content === void 0) { content = \"\"; }\r\n\t\tcss = [(css || \"\"), (this.$config.css || \"\")].join(\" \");\r\n\t\tvar obj = this.$config;\r\n\t\tvar header = \"\";\r\n\t\tif (obj.raw) {\r\n\t\t\tcontent = typeof obj.raw === \"string\" ? obj.raw : \"\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!content) {\r\n\t\t\t\tlet renderedElement = null;\r\n\t\t\t\tif(typeof obj.html === \"function\"){\r\n\t\t\t\t\trenderedElement = obj.html();\r\n\t\t\t\t}else{\r\n\t\t\t\t\trenderedElement = obj.html;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.$gantt.config.external_render && this.$gantt.config.external_render.isElement(renderedElement)){\r\n\t\t\t\t\tthis.$externalComponent = renderedElement;\r\n\t\t\t\t\trenderedElement = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcontent = \"<div class='gantt_layout_content' \"+(css ? \" class='\"+css+\"' \" : \"\")+\" >\" + (renderedElement || \"\") + \"</div>\";\r\n\t\t\t}\r\n\t\t\tif (obj.header) {\r\n\t\t\t\tvar collapseIcon = obj.canCollapse ? \"<div class='gantt_layout_header_arrow'></div>\" : \"\";\r\n\t\t\t\theader = \"<div class='gantt_layout_header'>\" + collapseIcon + \"<div class='gantt_layout_header_content'>\" + obj.header + \"</div></div>\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"<div class='gantt_layout_cell \" + css + \"' data-cell-id='\" + this.$id + \"'>\" + header + content + \"</div>\";\r\n\t};\r\n\tCell.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tthis.init();\r\n\t};\r\n\tCell.prototype.getNode = function () {\r\n\t\treturn (this.$view.querySelector(\"gantt_layout_cell\") || this.$view);\r\n\t};\r\n\tCell.prototype.init = function () {\r\n\t\t// [NOT-GOOD] code is executed for each component, while it still has only one handler, it is no good\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tthis._headerClickHandler = function(e){\r\n\t\t\tvar cellId = domHelpers.locateAttribute(e, \"data-cell-id\");\r\n\t\t\tif(cellId == self.$id){\r\n\t\t\t\tself.toggle();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar mouse = this.$gantt.$services.getService(\"mouseEvents\");\r\n\t\tmouse.delegate(\"click\", \"gantt_header_arrow\", this._headerClickHandler);\r\n\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t};\r\n\tCell.prototype.toggle = function () {\r\n\t\tthis.$config.collapsed = !this.$config.collapsed;\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.getSize = function () {\r\n\t\tvar size = {\r\n\t\t\theight: this.$config.height || 0,\r\n\t\t\twidth: this.$config.width || 0,\r\n\t\t\tgravity: this.$config.gravity || 1,\r\n\t\t\tminHeight: this.$config.minHeight || 0,\r\n\t\t\tminWidth: this.$config.minWidth || 0,\r\n\t\t\tmaxHeight: this.$config.maxHeight || 100000000000,\r\n\t\t\tmaxWidth: this.$config.maxWidth || 100000000000\r\n\t\t};\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tvar mode = this.$config.mode === \"x\";\r\n\t\t\tsize[mode ? \"width\" : \"height\"] = size[mode ? \"maxWidth\" : \"maxHeight\"] = this.$config.headerHeight;\r\n\t\t}\r\n\t\treturn size;\r\n\t};\r\n\r\n\tCell.prototype.getContentSize = function(){\r\n\r\n\t\tvar width = this.$lastSize.contentX;\r\n\t\tif(width !== width*1){\r\n\t\t\twidth = this.$lastSize.width;\r\n\t\t}\r\n\r\n\t\tvar height = this.$lastSize.contentY;\r\n\t\tif(height !== height*1){\r\n\t\t\theight = this.$lastSize.height;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\twidth: width,\r\n\t\t\theight: height\r\n\t\t};\r\n\t};\r\n\r\n\tCell.prototype._getBorderSizes = function(){\r\n\t\tvar borders = {\r\n\t\t\ttop: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0,\r\n\t\t\thorizontal: 0,\r\n\t\t\tvertical: 0\r\n\t\t};\r\n\t\tif(this._currentBorders){\r\n\t\t\tif(this._currentBorders[this._borders.left]){\r\n\t\t\t\tborders.left = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.right]){\r\n\t\t\t\tborders.right = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.top]){\r\n\t\t\t\tborders.top = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.bottom]){\r\n\t\t\t\tborders.bottom = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn borders;\r\n\r\n\t};\r\n\r\n\tCell.prototype.setSize = function (x, y) {\r\n\t\tthis.$view.style.width = x + \"px\";\r\n\t\tthis.$view.style.height = y + \"px\";\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tvar contentY = y - borders.vertical;\r\n\t\tvar contentX = x - borders.horizontal;\r\n\r\n\t\tthis.$lastSize = { x: x, y: y, contentX: contentX, contentY: contentY };\r\n\t\tif (this.$config.header) {\r\n\t\t\tthis._sizeHeader();\r\n\t\t}else{\r\n\t\t\tthis._sizeContent();\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._borders = {\r\n\t\t\"left\":\"gantt_layout_cell_border_left\",\r\n\t\t\"right\":\"gantt_layout_cell_border_right\",\r\n\t\t\"top\":\"gantt_layout_cell_border_top\",\r\n\t\t\"bottom\":\"gantt_layout_cell_border_bottom\"\r\n\t};\r\n\r\n\tCell.prototype._setBorders = function(css, view){\r\n\t\tif(!view) {\r\n\t\t\tview = this;\r\n\t\t}\r\n\t\tvar node = view.$view;\r\n\r\n\t\tfor( var i in this._borders){\r\n\t\t\tdomHelpers.removeClassName(node, this._borders[i]);\r\n\t\t}\r\n\r\n\t\tif(typeof css == \"string\"){\r\n\t\t\tcss = [css];\r\n\t\t}\r\n\r\n\t\tvar cssHash = {};\r\n\r\n\t\tfor(var i = 0; i < css.length; i++){\r\n\t\t\tdomHelpers.addClassName(node, css[i]);\r\n\t\t\tcssHash[css[i]] = true;\r\n\t\t}\r\n\r\n\t\tview._currentBorders = cssHash;\r\n\t};\r\n\r\n\r\n\tCell.prototype._sizeContent = function(){\r\n\t\tvar content = this.$view.childNodes[0];\r\n\t\tif(content && content.className == \"gantt_layout_content\"){\r\n\t\t\tcontent.style.height = this.$lastSize.contentY + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._sizeHeader = function () {\r\n\t\tvar size = this.$lastSize;\r\n\t\tsize.contentY -= this.$config.headerHeight;\r\n\t\tvar header = this.$view.childNodes[0];\r\n\t\tvar content = this.$view.childNodes[1];\r\n\t\tvar xLayout = this.$config.mode === \"x\";\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tcontent.style.display = \"none\";\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_x\";\r\n\t\t\t\theader.style.width = size.y + \"px\";\r\n\t\t\t\tvar d = Math.floor(size.y / 2 - size.x / 2);\r\n\t\t\t\theader.style.transform = \"rotate(90deg) translate(\" + d + \"px, \" + d + \"px)\";\r\n\t\t\t\tcontent.style.display = \"none\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_y\";\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header vertical\";\r\n\t\t\t}\r\n\t\t\theader.style.width = 'auto';\r\n\t\t\theader.style.transform = '';\r\n\t\t\tcontent.style.display = \"\";\r\n\t\t\tcontent.style.height = size.contentY + \"px\";\r\n\t\t}\r\n\t\theader.style.height = this.$config.headerHeight + \"px\";\r\n\t};\r\n\treturn Cell;\r\n}());\r\n\r\nexport default Cell;\r\n","export default function (d, b) {\r\n\tfor (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\tfunction __() { this.constructor = d; }\r\n\td.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};","import __extends from \"../../../utils/extends\";\r\nimport * as domHelpers from \"../utils/dom_helpers\";\r\nimport Cell from \"./cell\";\r\n\r\nvar Layout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(Layout, _super);\r\n\tfunction Layout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(parent)\r\n\t\t\t_this.$root = true;\r\n\r\n\t\t_this._parseConfig(config);\r\n\t\t_this.$name = \"layout\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tLayout.prototype.destructor = function () {\r\n\t\tif (this.$container && this.$view) {\r\n\t\t\tdomHelpers.removeNode(this.$view);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tchild.destructor();\r\n\t\t}\r\n\t\tthis.$cells = [];\r\n\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tLayout.prototype._resizeScrollbars = function(autosize, scrollbars){\r\n\t\tvar scrollChanged = false;\r\n\t\tvar visibleScrollbars = [],\r\n\t\t\thiddenScrollbars = [];\r\n\r\n\t\tconst scrollbarsToHide = [];\r\n\r\n\t\tfunction showScrollbar(scrollbar){\r\n\t\t\tscrollbar.$parent.show();\r\n\t\t\tscrollChanged = true;\r\n\t\t\tvisibleScrollbars.push(scrollbar);\r\n\t\t}\r\n\t\tfunction hideScrollbar(scrollbar){\r\n\t\t\tscrollbar.$parent.hide();\r\n\t\t\tscrollChanged = true;\r\n\t\t\thiddenScrollbars.push(scrollbar);\r\n\t\t}\r\n\r\n\t\tvar scrollbar;\r\n\t\tfor(var i = 0; i < scrollbars.length; i++){\r\n\t\t\tscrollbar = scrollbars[i];\r\n\r\n\t\t\tif(autosize[scrollbar.$config.scroll]) {\r\n\t\t\t\thideScrollbar(scrollbar);\r\n\t\t\t}else if(scrollbar.shouldHide()){\r\n\t\t\t\t//hideScrollbar(scrollbar);\r\n\t\t\t\tscrollbarsToHide.push(scrollbar);\r\n\t\t\t}else if(scrollbar.shouldShow()){\r\n\t\t\t\tshowScrollbar(scrollbar);\r\n\t\t\t}else{\r\n\t\t\t\tif(scrollbar.isVisible()){\r\n\t\t\t\t\tvisibleScrollbars.push(scrollbar);\r\n\t\t\t\t}else{\r\n\t\t\t\t\thiddenScrollbars.push(scrollbar);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar visibleGroups = {};\r\n\t\tfor(var i = 0; i < visibleScrollbars.length; i++){\r\n\t\t\tif(visibleScrollbars[i].$config.group){\r\n\t\t\t\tvisibleGroups[visibleScrollbars[i].$config.group] = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// GS-2220\r\n\t\tscrollbarsToHide.forEach(function(scrollbar){\r\n\t\t\tif(!(scrollbar.$config.group && visibleGroups[scrollbar.$config.group])){\r\n\t\t\t\thideScrollbar(scrollbar);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tfor(var i = 0; i < hiddenScrollbars.length; i++){\r\n\t\t\tscrollbar = hiddenScrollbars[i];\r\n\r\n\t\t\tif(scrollbar.$config.group && visibleGroups[scrollbar.$config.group]){\r\n\t\t\t\tshowScrollbar(scrollbar);\r\n\t\t\t\t// GS-707 If the scrollbar was hidden then showed, the container resize shouldn't happen because of that\r\n\t\t\t\tfor(var j = 0; j < visibleScrollbars.length; j++){\r\n\t\t\t\t\tif(visibleScrollbars[j] == scrollbar){\r\n\t\t\t\t\t\tthis.$gantt.$scrollbarRepaint = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn scrollChanged;\r\n\t};\r\n\r\n\tLayout.prototype.getScrollbarsInfo = function(){\r\n\t\tconst scrollbars = this.getCellsByType(\"scroller\");\r\n\t\tconst scrollbarsInfo = [];\r\n\t\tscrollbars.forEach(scrollbar => {\r\n\t\t\tlet obj = {};\r\n\t\t\tconst {visible, direction, size, scrollSize, position} = scrollbar.getScrollState();\r\n\t\t\tlet linkedViews = scrollbar._getLinkedViews();\r\n\t\t\tlet boundViews = linkedViews.map(view => view.$config.id);\r\n\r\n\t\t\tobj.id = scrollbar.$id;\r\n\t\t\tobj.visible = visible;\r\n\t\t\tobj.boundViews = boundViews;\r\n\t\t\tif(direction === \"x\"){\r\n\t\t\t\tobj.x = size;\r\n\t\t\t\tobj.x_inner = scrollSize;\r\n\t\t\t\tobj.x_pos = position || 0;\r\n\t\t\t} else {\r\n\t\t\t\tobj.y = size;\r\n\t\t\t\tobj.y_inner = scrollSize;\r\n\t\t\t\tobj.y_pos = position || 0;\r\n\t\t\t}\r\n\t\t\tscrollbarsInfo.push(obj);\r\n\t\t});\r\n\t\treturn scrollbarsInfo;\r\n\t};\r\n\r\n\tLayout.prototype._syncCellSizes = function(groupName, newSize){\r\n\t\tif(!groupName)\r\n\t\t\treturn;\r\n\r\n\t\tvar groups = {};\r\n\r\n\t\tthis._eachChild(function(cell){\r\n\t\t\tif(cell.$config.group && cell.$name != \"scrollbar\" && cell.$name != \"resizer\"){\r\n\t\t\t\tif(!groups[cell.$config.group]){\r\n\t\t\t\t\tgroups[cell.$config.group] = [];\r\n\t\t\t\t}\r\n\t\t\t\tgroups[cell.$config.group].push(cell);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(groups[groupName]){\r\n\t\t\tthis._syncGroupSize(groups[groupName], newSize);\r\n\t\t}\r\n\t\treturn groups[groupName];\r\n\t};\r\n\r\n\tLayout.prototype._syncGroupSize = function(cells, newSize){\r\n\t\tif(!cells.length) return;\r\n\r\n\t\tvar property = cells[0].$parent._xLayout ? \"width\" : \"height\";\r\n\t\tvar direction = cells[0].$parent.getNextSibling(cells[0].$id) ? 1 : -1;\r\n\r\n\t\tvar newSizeValue = newSize.value;\r\n\t\tvar isGravity = newSize.isGravity;\r\n\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\tvar ownSize = cells[i].getSize();\r\n\r\n\t\t\tvar resizeSibling = direction > 0 ? cells[i].$parent.getNextSibling(cells[i].$id) : cells[i].$parent.getPrevSibling(cells[i].$id);\r\n\t\t\tif(resizeSibling.$name == \"resizer\"){\r\n\t\t\t\tresizeSibling = direction > 0 ? resizeSibling.$parent.getNextSibling(resizeSibling.$id) : resizeSibling.$parent.getPrevSibling(resizeSibling.$id);\r\n\t\t\t}\r\n\t\t\tvar siblingSize = resizeSibling.getSize();\r\n\r\n\t\t\tif(!isGravity) {\r\n\t\t\t\tif(resizeSibling[property]){\r\n\t\t\t\t\tvar totalGravity = ownSize.gravity + siblingSize.gravity;\r\n\t\t\t\t\tvar totalSize = ownSize[property] + siblingSize[property];\r\n\t\t\t\t\tvar k = totalGravity / totalSize;\r\n\t\t\t\t\tcells[i].$config.gravity = k * newSizeValue;\r\n\r\n\t\t\t\t\tresizeSibling.$config[property] = totalSize - newSizeValue;\r\n\t\t\t\t\tresizeSibling.$config.gravity = totalGravity - k * newSizeValue;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcells[i].$config[property] = newSizeValue;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tcells[i].$config.gravity = newSizeValue;\r\n\t\t\t}\r\n\r\n\t\t\tvar mainGrid = this.$gantt.$ui.getView(\"grid\");\r\n\t\t\tif(mainGrid && cells[i].$content === mainGrid && !mainGrid.$config.scrollable && !isGravity){\r\n\t\t\t\tthis.$gantt.config.grid_width = newSizeValue;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.resize = function(startStage){\r\n\t\tvar mainCall = false;\r\n\t\tif(this.$root && !this._resizeInProgress){\r\n\t\t\tthis.callEvent(\"onBeforeResize\", []);\r\n\t\t\tmainCall = true;\r\n\t\t\tthis._resizeInProgress = true;\r\n\t\t}\r\n\r\n\t\t_super.prototype.resize.call(this, true);\r\n\t\t_super.prototype.resize.call(this, false);\r\n\r\n\t\tif(mainCall){\r\n\r\n\t\t\tvar contentViews = [];\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"viewCell\"));\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"viewLayout\"));\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"hostCell\"));\r\n\r\n\t\t\tvar scrollbars = this.getCellsByType(\"scroller\");\r\n\r\n\t\t\tfor(var i = 0; i < contentViews.length; i++){\r\n\t\t\t\tif(!contentViews[i].$config.hidden)\r\n\t\t\t\t\tcontentViews[i].setContentSize();\r\n\t\t\t}\r\n\r\n\t\t\tvar autosize = this._getAutosizeMode(this.$config.autosize);\r\n\r\n\t/* // possible to rollback set content size when autisize is disabled, not sure if need to\r\n\t\t\tcontentViews.forEach(function(view){\r\n\t\t\t\tconst parent = view.$parent;\r\n\t\t\t\tif(!autosize.x){\r\n\t\t\t\t\tif(parent.$config.$originalWidthStored){\r\n\t\t\t\t\t\tparent.$config.$originalWidthStored = false;\r\n\t\t\t\t\t\tparent.$config.width = parent.$config.$originalWidth;\r\n\t\t\t\t\t\tparent.$config.$originalWidth = undefined;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!autosize.y){\r\n\t\t\t\t\tif(parent.$config.$originalHeightStored){\r\n\t\t\t\t\t\tparent.$config.$originalHeightStored = false;\r\n\t\t\t\t\t\tparent.$config.height = parent.$config.$originalHeight;\r\n\t\t\t\t\t\tparent.$config.$originalHeight = undefined;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});*/\r\n\t\t\t\r\n\t\t\tvar scrollChanged = this._resizeScrollbars(autosize, scrollbars);\r\n\r\n\t\t\tif(this.$config.autosize){\r\n\t\t\t\tthis.autosize(this.$config.autosize);\r\n\t\t\t\tcontentViews.forEach(function(view){\r\n\t\t\t\t\tconst parent = view.$parent;\r\n\t\t\t\t\tconst sizes = parent.getContentSize(autosize);\r\n\t\t\t\t\tif(autosize.x){\r\n\t\t\t\t\t\tif(!parent.$config.$originalWidthStored){\r\n\t\t\t\t\t\t\tparent.$config.$originalWidthStored = true;\r\n\t\t\t\t\t\t\tparent.$config.$originalWidth = parent.$config.width;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tparent.$config.width = sizes.width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(autosize.y){\r\n\t\t\t\t\t\tif(!parent.$config.$originalHeightStored){\r\n\t\t\t\t\t\t\tparent.$config.$originalHeightStored = true;\r\n\t\t\t\t\t\t\tparent.$config.$originalHeight = parent.$config.height;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tparent.$config.height = sizes.height;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tscrollChanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif(scrollChanged){\r\n\t\t\t\tthis.resize();\r\n\t\t\t\tfor(var i = 0; i < contentViews.length; i++){\r\n\t\t\t\t\tif(!contentViews[i].$config.hidden)\r\n\t\t\t\t\t\tcontentViews[i].setContentSize();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onResize\", []);\r\n\t\t}\r\n\t\tif(mainCall){\r\n\t\t\tthis._resizeInProgress = false;\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype._eachChild = function(code, cell){\r\n\t\tcell = cell || this;\r\n\t\tcode(cell);\r\n\t\tif(cell.$cells){\r\n\t\t\tfor(var i = 0; i < cell.$cells.length; i++){\r\n\t\t\t\tthis._eachChild(code, cell.$cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.isChild = function(view){\r\n\t\tvar res = false;\r\n\t\tthis._eachChild(function(child){\r\n\t\t\tif(child === view || child.$content === view){\r\n\t\t\t\tres = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.getCellsByType = function(type){\r\n\t\tvar res = [];\r\n\t\tif(type === this.$name){\r\n\t\t\tres.push(this);\r\n\t\t}\r\n\r\n\t\tif(this.$content && this.$content.$name == type){\r\n\t\t\tres.push(this.$content);\r\n\t\t}\r\n\r\n\t\tif(this.$cells){\r\n\t\t\tfor(var i = 0; i < this.$cells.length; i++){\r\n\t\t\t\tvar children = Layout.prototype.getCellsByType.call(this.$cells[i], type);\r\n\t\t\t\tif(children.length){\r\n\t\t\t\t\tres.push.apply(res, children);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.getNextSibling = function(cellId){\r\n\t\tvar index = this.cellIndex(cellId);\r\n\t\tif(index >= 0 && this.$cells[index + 1]){\r\n\t\t\treturn this.$cells[index + 1];\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getPrevSibling = function(cellId){\r\n\t\tvar index = this.cellIndex(cellId);\r\n\t\tif(index >= 0 && this.$cells[index - 1]){\r\n\t\t\treturn this.$cells[index - 1];\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tLayout.prototype.cell = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tif (child.$id === id) {\r\n\t\t\t\treturn child;\r\n\t\t\t}\r\n\t\t\tvar sub = child.cell(id);\r\n\t\t\tif (sub) {\r\n\t\t\t\treturn sub;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.cellIndex = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tif (this.$cells[i].$id === id) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t};\r\n\tLayout.prototype.moveView = function (view, ind) {\r\n\t\tif (this.$cells[ind] !== view) {\r\n\t\t\treturn window.alert(\"Not implemented\");\r\n\t\t}\r\n\t\telse {\r\n\t\t\tind += this.$config.header ? 1 : 0;\r\n\t\t\tvar node = this.$view;\r\n\t\t\tif (ind >= node.childNodes.length) {\r\n\t\t\t\tnode.appendChild(view.$view);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnode.insertBefore(view.$view, node.childNodes[ind]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype._parseConfig = function (config) {\r\n\t\tthis.$cells = [];\r\n\t\tthis._xLayout = !config.rows;\r\n\t\tvar cells = config.rows || config.cols || config.views;\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tvar cell = cells[i];\r\n\t\t\tcell.mode = this._xLayout ? \"x\" : \"y\";\r\n\t\t\tvar $content = this.$factory.initUI(cell, this);\r\n\t\t\tif(!$content){\r\n\t\t\t\tcells.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}else{\r\n\t\t\t\t$content.$parent = this;\r\n\t\t\t\tthis.$cells.push($content);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.getCells = function () {\r\n\t\treturn this.$cells;\r\n\t};\r\n\tLayout.prototype.render = function () {\r\n\t\tvar view = domHelpers.insertNode(this.$container, this.$toHTML());\r\n\r\n\t\tthis.$fill(view, null);\r\n\r\n\t\tconst gantt = this.$gantt;\r\n\t\tthis._eachChild((cell) => {\r\n\t\t\tif(cell.$externalComponent){\r\n\t\t\t\tgantt.config.external_render.renderElement(\r\n\t\t\t\t\tcell.$externalComponent, \r\n\t\t\t\t\tcell.$view.querySelector(\".gantt_layout_content\")\r\n\t\t\t\t);\r\n\t\t\t\tcell.$externalComponent = null;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\tthis.resize();\r\n\r\n\t\t// do simple repaint after the first call\r\n\t\tthis.render = this.resize;\r\n\t};\r\n\tLayout.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tvar cells = domHelpers.getChildNodes(node, \"gantt_layout_cell\");\r\n\t\tfor (var i = cells.length - 1; i >= 0; i--) {\r\n\t\t\tvar sub = this.$cells[i];\r\n\t\t\tsub.$fill(cells[i], this);\r\n\t\t\t// initially hidden cell\r\n\t\t\tif (sub.$config.hidden) {\r\n\t\t\t\tsub.$view.parentNode.removeChild(sub.$view);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.$toHTML = function () {\r\n\t\tvar mode = this._xLayout ? \"x\" : \"y\";\r\n\t\tvar html = [];\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\thtml.push(this.$cells[i].$toHTML());\r\n\t\t}\r\n\t\treturn _super.prototype.$toHTML.call(this, html.join(\"\"), (this.$root ? \"gantt_layout_root \" : \"\") + \"gantt_layout gantt_layout_\" + mode);\r\n\t};\r\n\r\n\tLayout.prototype.getContentSize = function(mode){\r\n\t\tvar contentWidth = 0,\r\n\t\t\tcontentHeight = 0;\r\n\r\n\t\tvar cellSize, cell, borders;\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\t\t\tif(cell.$config.hidden)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tcellSize = cell.getContentSize(mode);\r\n\r\n\t\t\tif(cell.$config.view === \"scrollbar\" && mode[cell.$config.scroll]){\r\n\t\t\t\tcellSize.height = 0;\r\n\t\t\t\tcellSize.width = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif(cell.$config.resizer){\r\n\t\t\t\tif(this._xLayout){\r\n\t\t\t\t\tcellSize.height = 0;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcellSize.width = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tborders = cell._getBorderSizes();\r\n\r\n\t\t\tif(this._xLayout){\r\n\t\t\t\tcontentWidth += (cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight = Math.max(contentHeight, (cellSize.height + borders.vertical));\r\n\t\t\t}else{\r\n\t\t\t\tcontentWidth = Math.max(contentWidth, cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight += cellSize.height + borders.vertical;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tborders = this._getBorderSizes();\r\n\t\tcontentWidth += borders.horizontal;\r\n\t\tcontentHeight += borders.vertical;\r\n\r\n\t\t// GS-149 & GS-150: By default this code only increases the container sizes, because of that, the cell sizes\r\n\t\t// are also increased. Keep this code here in the case if something goes wrong\r\n\t\t/*\r\n\t\tif(this.$root){\r\n\t\t\tcontentWidth += 1;\r\n\t\t\tcontentHeight += 1;\r\n\t\t}\r\n\t\t*/\r\n\t\treturn {\r\n\t\t\twidth: contentWidth,\r\n\t\t\theight: contentHeight\r\n\t\t};\r\n\t};\r\n\r\n\tLayout.prototype._cleanElSize = function(value){\r\n\t\treturn ((value || \"\").toString().replace(\"px\", \"\") * 1 || 0);\r\n\t};\r\n\tLayout.prototype._getBoxStyles = function(div){\r\n\t\tvar computed = null;\r\n\t\tif(window.getComputedStyle){\r\n\t\t\tcomputed = window.getComputedStyle(div, null);\r\n\t\t}else{\r\n\t\t\t//IE with elem.currentStyle does not calculate sizes from %, so will use the default approach\r\n\t\t\tcomputed = {\r\n\t\t\t\t\"width\":div.clientWidth,\r\n\t\t\t\t\"height\":div.clientHeight\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar properties = [\r\n\t\t\t\"width\",\r\n\t\t\t\"height\",\r\n\r\n\t\t\t\"paddingTop\",\r\n\t\t\t\"paddingBottom\",\r\n\t\t\t\"paddingLeft\",\r\n\t\t\t\"paddingRight\",\r\n\r\n\t\t\t\"borderLeftWidth\",\r\n\t\t\t\"borderRightWidth\",\r\n\t\t\t\"borderTopWidth\",\r\n\t\t\t\"borderBottomWidth\"\r\n\t\t];\r\n\t\tvar styles = {\r\n\t\t\tboxSizing:(computed.boxSizing == \"border-box\")\r\n\t\t};\r\n\r\n\t\tif(computed.MozBoxSizing){\r\n\t\t\tstyles.boxSizing = (computed.MozBoxSizing == \"border-box\");\r\n\t\t}\r\n\t\tfor(var i =0; i < properties.length; i++){\r\n\t\t\tstyles[properties[i]] = computed[properties[i]] ? this._cleanElSize(computed[properties[i]]) : 0;\r\n\t\t}\r\n\r\n\r\n\t\tvar box = {\r\n\t\t\thorPaddings : (styles.paddingLeft + styles.paddingRight + styles.borderLeftWidth + styles.borderRightWidth),\r\n\t\t\tvertPaddings : (styles.paddingTop + styles.paddingBottom + styles.borderTopWidth + styles.borderBottomWidth),\r\n\t\t\tborderBox: styles.boxSizing,\r\n\t\t\tinnerWidth : styles.width,\r\n\t\t\tinnerHeight : styles.height,\r\n\t\t\touterWidth : styles.width,\r\n\t\t\touterHeight : styles.height\r\n\t\t};\r\n\r\n\r\n\t\tif(box.borderBox){\r\n\t\t\tbox.innerWidth -= box.horPaddings;\r\n\t\t\tbox.innerHeight -= box.vertPaddings;\r\n\t\t}else{\r\n\t\t\tbox.outerWidth += box.horPaddings;\r\n\t\t\tbox.outerHeight += box.vertPaddings;\r\n\t\t}\r\n\r\n\t\treturn box;\r\n\t};\r\n\r\n\tLayout.prototype._getAutosizeMode = function(config){\r\n\t\tvar res = {x:false, y:false};\r\n\t\tif(config === \"xy\"){\r\n\t\t\tres.x = res.y = true;\r\n\t\t}else if(config === \"y\" || config === true){\r\n\t\t\tres.y = true;\r\n\t\t}else if(config === \"x\"){\r\n\t\t\tres.x = true;\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.autosize = function(mode) {\r\n\t\tvar res = this._getAutosizeMode(mode);\r\n\t\tvar boxSizes = this._getBoxStyles(this.$container);\r\n\t\tvar contentSizes = this.getContentSize(mode);\r\n\r\n\t\tvar node = this.$container;\r\n\t\tif(res.x){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.width += boxSizes.horPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.width = contentSizes.width + \"px\";\r\n\t\t}\r\n\t\tif(res.y){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.height += boxSizes.vertPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.height = contentSizes.height + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getSize = function () {\r\n\t\tthis._sizes = [];\r\n\t\tvar width = 0;\r\n\t\tvar minWidth = 0;\r\n\t\tvar maxWidth = 100000000000;\r\n\t\tvar height = 0;\r\n\t\tvar maxHeight = 100000000000;\r\n\t\tvar minHeight = 0;\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\r\n\t\t\tvar size = this._sizes[i] = this.$cells[i].getSize();\r\n\t\t\tif (this.$cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width && size.minWidth) {\r\n\t\t\t\t\twidth += size.minWidth;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\twidth += size.width;\r\n\t\t\t\t}\r\n\t\t\t\tmaxWidth += size.maxWidth;\r\n\t\t\t\tminWidth += size.minWidth;\r\n\t\t\t\theight = Math.max(height, size.height);\r\n\t\t\t\tmaxHeight = Math.min(maxHeight, size.maxHeight); // min of maxHeight\r\n\t\t\t\tminHeight = Math.max(minHeight, size.minHeight); // max of minHeight\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height && size.minHeight) {\r\n\t\t\t\t\theight += size.minHeight;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\theight += size.height;\r\n\t\t\t\t}\r\n\t\t\t\tmaxHeight += size.maxHeight;\r\n\t\t\t\tminHeight += size.minHeight;\r\n\t\t\t\twidth = Math.max(width, size.width);\r\n\t\t\t\tmaxWidth = Math.min(maxWidth, size.maxWidth); // min of maxWidth\r\n\t\t\t\tminWidth = Math.max(minWidth, size.minWidth); // max of minWidth\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar self = _super.prototype.getSize.call(this);\r\n\t\t// maxWidth\r\n\t\tif (self.maxWidth >= 100000) {\r\n\t\t\tself.maxWidth = maxWidth;\r\n\t\t}\r\n\t\t// maxHeight\r\n\t\tif (self.maxHeight >= 100000) {\r\n\t\t\tself.maxHeight = maxHeight;\r\n\t\t}\r\n\t\t// minWidth\r\n\t\tself.minWidth = self.minWidth !== self.minWidth ? 0 : self.minWidth;// || self.width || Math.max(minWidth, width);\r\n\t\t// minHeight\r\n\t\tself.minHeight = self.minHeight !== self.minHeight ? 0 : self.minHeight;//self.minHeight || self.height || Math.max(minHeight, height);\r\n\t\t// sizes with paddings and margins\r\n\t\tif (this._xLayout) {\r\n\t\t\tself.minWidth += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minWidth += this.$config.padding * 2 || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tself.minHeight += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\t\r\n\t\treturn self;\r\n\t};\r\n\t// calc total gravity and free space\r\n\tLayout.prototype._calcFreeSpace = function (s, cell, xLayout) {\r\n\t\tvar min = xLayout ? cell.minWidth : cell.minHeight;\r\n\t\tvar max = xLayout ? cell.maxWidth : cell.maxWidth;\r\n\t\tvar side = s;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * cell.gravity);\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t}\r\n\t\t\tthis._free -= side;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\tLayout.prototype._calcSize = function (s, size, xLayout) {\r\n\t\tvar side = s;\r\n\t\tvar min = xLayout ? size.minWidth : size.minHeight;\r\n\t\tvar max = xLayout ? size.maxWidth : size.maxHeight;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * size.gravity);\r\n\t\t}\r\n\t\tif (side > max) {\r\n\t\t\tside = max;\r\n\t\t}\r\n\t\tif (side < min) {\r\n\t\t\tside = min;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\r\n\tLayout.prototype._configureBorders = function(){\r\n\t\tif(this.$root){\r\n\t\t\tthis._setBorders([\r\n\t\t\t\tthis._borders.left,\r\n\t\t\t\tthis._borders.top,\r\n\t\t\t\tthis._borders.right,\r\n\t\t\t\tthis._borders.bottom\r\n\t\t\t],\r\n\t\t\tthis);\r\n\t\t}\r\n\r\n\t\tvar borderClass = this._xLayout ? this._borders.right : this._borders.bottom;\r\n\r\n\t\tvar cells = this.$cells;\r\n\r\n\t\tvar lastVisibleIndex = cells.length - 1;\r\n\t\tfor(var i = lastVisibleIndex; i >= 0; i--){\r\n\t\t\tif (!cells[i].$config.hidden) {\r\n\t\t\t\tlastVisibleIndex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tif (cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar lastCell = i >= lastVisibleIndex;\r\n\t\t\tvar borderColorClass = \"\";\r\n\t\t\tif(!lastCell && cells[i + 1]){\r\n\t\t\t\tif(cells[i + 1].$config.view == \"scrollbar\"){\r\n\t\t\t\t\tif(this._xLayout){\r\n\t\t\t\t\t\tlastCell = true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tborderColorClass = \"gantt_layout_cell_border_transparent\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis._setBorders(lastCell ? [] : [borderClass, borderColorClass], cells[i]);\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype._updateCellVisibility = function(){\r\n\t\tvar oldVisibleCells = this._visibleCells || {};\r\n\t\tvar firstCall = !this._visibleCells;\r\n\t\tvar visibleCells = {};\r\n\t\tvar cell = null;\r\n\t\tvar parentVisibility = [];\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\t\t\tif (cell.$config.hide_empty){\r\n\t\t\t\tparentVisibility.push(cell);\r\n\t\t\t}\r\n\r\n\t\t\tif (!firstCall && cell.$config.hidden && oldVisibleCells[cell.$id]) {\r\n\t\t\t\tcell._hide(true);\r\n\t\t\t}else if(!cell.$config.hidden && !oldVisibleCells[cell.$id]){\r\n\t\t\t\tcell._hide(false);\r\n\t\t\t}\r\n\r\n\t\t\tif(!cell.$config.hidden){\r\n\t\t\t\tvisibleCells[cell.$id] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._visibleCells = visibleCells;\r\n\r\n\t\t// GS-27. A way to hide the whole cell if all its children are hidden\r\n\t\tfor (var i = 0; i < parentVisibility.length; i++) {\r\n\t\t\tvar cell = parentVisibility[i];\r\n\t\t\tvar children = cell.$cells;\r\n\t\t\tvar hideCell = true;\r\n\t\t\tchildren.forEach(function(child){\r\n\t\t\t\tif (!child.$config.hidden && !child.$config.resizer){\r\n\t\t\t\t\thideCell = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tcell.$config.hidden = hideCell;\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.setSize = function (x, y) {\r\n\t\tthis._configureBorders();\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\t\ty = this.$lastSize.contentY;\r\n\t\tx = this.$lastSize.contentX;\r\n\r\n\t\tvar padding = (this.$config.padding || 0);\r\n\t\tthis.$view.style.padding = padding + \"px\";\r\n\t\tthis._gravity = 0;\r\n\t\tthis._free = this._xLayout ? x : y;\r\n\t\tthis._free -= padding * 2;\r\n\t\t// calc all gravity\r\n\r\n\t\tvar cell,\r\n\t\t\tsize;\r\n\r\n\t\tthis._updateCellVisibility();\r\n\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tvar margin = (this.$config.margin || 0);\r\n\t\t\tif(cell.$name == \"resizer\" && !margin){\r\n\t\t\t\tmargin = -1;\r\n\t\t\t}\r\n\r\n\t\t\t// set margins to child cell\r\n\t\t\tvar cellView = cell.$view;\r\n\r\n\t\t\tvar marginSide = this._xLayout ? \"marginRight\" : \"marginBottom\";\r\n\t\t\tif (i !== this.$cells.length - 1) {\r\n\t\t\t\tcellView.style[marginSide] = margin + \"px\";\r\n\t\t\t\tthis._free -= margin; // calc free space without margin\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar width = size.width;\r\n\t\t\tvar height = size.height;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tthis._calcFreeSpace(width, size, true);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._calcFreeSpace(height, size, false);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar dx = void 0;\r\n\t\t\tvar dy = void 0;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tdx = this._calcSize(size.width, size, true);\r\n\t\t\t\tdy = y - padding * 2; // layout height without paddings\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdx = x - padding * 2; // layout width without paddings\r\n\t\t\t\tdy = this._calcSize(size.height, size, false);\r\n\t\t\t}\r\n\r\n\t\t\tcell.setSize(dx, dy);\r\n\t\t}\r\n\r\n\t};\r\n\r\n\treturn Layout;\r\n}(Cell));\r\n\r\nexport default Layout;","import __extends from \"../../../utils/extends\";\r\nimport Layout from \"./layout\";\r\nimport Cell from \"./cell\";\r\n\r\nvar ViewLayout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewLayout, _super);\r\n\tfunction ViewLayout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tfor (var i = 0; i < _this.$cells.length; i++) {\r\n\t\t\t_this.$cells[i].$config.hidden = (i !== 0);\r\n\t\t}\r\n\t\t_this.$cell = _this.$cells[0];\r\n\t\t_this.$name = \"viewLayout\";\r\n\r\n\t\treturn _this;\r\n\t}\r\n\tViewLayout.prototype.cell = function (id) {\r\n\t\tvar cell = _super.prototype.cell.call(this, id);\r\n\t\tif (!cell.$view) {\r\n\t\t\tthis.$fill(null, this);\r\n\t\t}\r\n\t\treturn cell;\r\n\t};\r\n\tViewLayout.prototype.moveView = function (view) {\r\n\t\tvar body = this.$view;\r\n\t\tif (this.$cell) {\r\n\t\t\tthis.$cell.$config.hidden = true;\r\n\t\t\tbody.removeChild(this.$cell.$view);\r\n\t\t}\r\n\t\tthis.$cell = view;\r\n\t\tbody.appendChild(view.$view);\r\n\t};\r\n\tViewLayout.prototype.setSize = function (x, y) {\r\n\t\tCell.prototype.setSize.call(this, x, y);\r\n\t};\r\n\r\n\tViewLayout.prototype.setContentSize = function(){\r\n\t\tvar size = this.$lastSize;\r\n\t\tthis.$cell.setSize(size.contentX, size.contentY);\r\n\t};\r\n\r\n\tViewLayout.prototype.getSize = function () {\r\n\t\tvar sizes = _super.prototype.getSize.call(this);\r\n\t\tif (this.$cell) {\r\n\t\t\tvar cellSize = this.$cell.getSize();\r\n\t\t\tif (this.$config.byMaxSize) {\r\n\t\t\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\t\t\tvar otherCell = this.$cells[i].getSize();\r\n\t\t\t\t\tfor (var cell in cellSize) {\r\n\t\t\t\t\t\tcellSize[cell] = Math.max(cellSize[cell], otherCell[cell]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var size in sizes) {\r\n\t\t\t\tsizes[size] = sizes[size] || cellSize[size];\r\n\t\t\t}\r\n\t\t\tsizes.gravity = Math.max(sizes.gravity, cellSize.gravity);\r\n\t\t}\r\n\t\treturn sizes;\r\n\t};\r\n\treturn ViewLayout;\r\n}(Layout));\r\n\r\nexport default ViewLayout;","import __extends from \"../../../utils/extends\";\r\nimport * as utils from \"../../../utils/utils\";\r\nimport Cell from \"./cell\";\r\n\r\nvar ViewCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewCell, _super);\r\n\tfunction ViewCell(parent, config, factory) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(config.view){\r\n\t\t\tif(config.id){\r\n\t\t\t\t// pass id to the nested view\r\n\t\t\t\tthis.$id = utils.uid();\r\n\t\t\t}\r\n\t\t\tvar childConfig = utils.copy(config);\r\n\t\t\tdelete childConfig.config;\r\n\t\t\tdelete childConfig.templates;\r\n\r\n\t\t\tthis.$content = this.$factory.createView(config.view, this, childConfig, this);\r\n\t\t\tif(!this.$content)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t_this.$name = \"viewCell\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tViewCell.prototype.destructor = function(){\r\n\t\tthis.clear();\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tViewCell.prototype.clear = function(){\r\n\r\n\t\tthis.$initialized = false;\r\n\r\n\t\t// call destructor\r\n\t\tif (this.$content){\r\n\t\t\tvar method = this.$content.unload || this.$content.destructor;\r\n\t\t\tif (method){\r\n\t\t\t\tmethod.call(this.$content);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_super.prototype.clear.call(this);\r\n\r\n\t};\r\n\r\n\tViewCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\tif(this.$content && this.$content.scrollTo){\r\n\t\t\tthis.$content.scrollTo(left, top);\r\n\t\t}else{\r\n\t\t\t_super.prototype.scrollTo.call(this, left, top);\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype._setContentSize = function(x, y){\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tif(typeof x === \"number\"){\r\n\t\t\tvar outerX = x + borders.horizontal;\r\n\t\t\tthis.$config.width = outerX;\r\n\t\t}\r\n\t\tif(typeof y === \"number\"){\r\n\t\t\tvar outerY = y + borders.vertical;\r\n\t\t\tthis.$config.height = outerY;\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype.setSize = function(x, y){\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\r\n\t\tif(!this.$preResize && this.$content) {\r\n\t\t\tif (!this.$initialized) {\r\n\t\t\t\tthis.$initialized = true;\r\n\t\t\t\tvar header = this.$view.childNodes[0];\r\n\t\t\t\tvar content = this.$view.childNodes[1];\r\n\t\t\t\tif(!content) content = header;\r\n\r\n\t\t\t\t/*if(this.$content.$config){\r\n\t\t\t\t\tthis.$content.$config.width = this.$lastSize.contentX;\r\n\t\t\t\t\tthis.$content.$config.height = this.$lastSize.contentY;\r\n\t\t\t\t}*/\r\n\t\t\t\tthis.$content.init(content);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype.setContentSize = function(){\r\n\t\tif(!this.$preResize && this.$content) {\r\n\t\t\tif (this.$initialized) {\r\n\t\t\t\tthis.$content.setSize(this.$lastSize.contentX, this.$lastSize.contentY);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tViewCell.prototype.getContentSize = function(){\r\n\t\tvar size = _super.prototype.getContentSize.call(this);\r\n\r\n\t\tif(this.$content && this.$initialized){\r\n\t\t\tvar childSize = this.$content.getSize();\r\n\t\t\tsize.width = childSize.contentX === undefined ? childSize.width : childSize.contentX;\r\n\t\t\tsize.height = childSize.contentY === undefined ? childSize.height : childSize.contentY;\r\n\t\t}\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tsize.width += borders.horizontal;\r\n\t\tsize.height += borders.vertical;\r\n\r\n\t\treturn size;\r\n\t};\r\n\r\n\treturn ViewCell;\r\n}(Cell));\r\n\r\nexport default ViewCell;","import __extends from \"../../../utils/extends\";\r\nimport * as domHelpers from \"../utils/dom_helpers\";\r\nimport * as utils from \"../../../utils/utils\";\r\nimport env from \"../../../utils/env\";\r\nimport Cell from \"./cell\";\r\n\r\nvar ScrollbarCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\tvar SCROLL_MODIFIER_KEYS = [\"altKey\", \"shiftKey\", \"metaKey\"]; // it's no way to disable ctrl+wheel\r\n\t__extends(ScrollbarCell, _super);\r\n\tfunction ScrollbarCell(parent, config, factory, gantt) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tthis.$config = utils.mixin(config, {scroll: \"x\"});\r\n\t\t_this._scrollHorizontalHandler = utils.bind(_this._scrollHorizontalHandler, _this);\r\n\t\t_this._scrollVerticalHandler = utils.bind(_this._scrollVerticalHandler, _this);\r\n\t\t_this._outerScrollVerticalHandler = utils.bind(_this._outerScrollVerticalHandler, _this);\r\n\t\t_this._outerScrollHorizontalHandler = utils.bind(_this._outerScrollHorizontalHandler, _this);\r\n\t\t_this._mouseWheelHandler = utils.bind(_this._mouseWheelHandler, _this);\r\n\r\n\t\tthis.$config.hidden = true;\r\n\t\tvar size = gantt.config.scroll_size;\r\n\r\n\t\tif(gantt.env.isIE){\r\n\t\t\t// full element height/width must be bigger than just a browser scrollbar,\r\n\t\t\t// otherwise the scrollbar element won't be scrolled on click\r\n\t\t\tsize += 1;\r\n\t\t}\r\n\r\n\t\tif(this._isHorizontal()){\r\n\t\t\t_this.$config.height = size;\r\n\t\t\t_this.$parent.$config.height = size;\r\n\t\t}else{\r\n\t\t\t_this.$config.width = size;\r\n\t\t\t_this.$parent.$config.width = size;\r\n\t\t}\r\n\r\n\t\tthis.$config.scrollPosition = 0;\r\n\r\n\t\t_this.$name = \"scroller\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tScrollbarCell.prototype.init = function(container){\r\n\t\tcontainer.innerHTML = this.$toHTML();\r\n\t\tthis.$view = container.firstChild;\r\n\r\n\t\tif(!this.$view){\r\n\t\t\tthis.init();\r\n\t\t}\r\n\t\tif(this._isVertical()){\r\n\t\t\tthis._initVertical();\r\n\t\t}else{\r\n\t\t\tthis._initHorizontal();\r\n\t\t}\r\n\t\tthis._initMouseWheel();\r\n\t\tthis._initLinkedViews();\r\n\t};\r\n\r\n\tScrollbarCell.prototype.$toHTML = function () {\r\n\t\tvar className = this._isHorizontal() ? \"gantt_hor_scroll\" : \"gantt_ver_scroll\";\r\n\t\treturn \"<div class='gantt_layout_cell \"+className+\"'><div style='\"+(this._isHorizontal() ? \"width:2000px\" : \"height:2000px\")+\"'></div></div>\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getRootParent = function(){\r\n\t\tvar parent = this.$parent;\r\n\t\twhile(parent && parent.$parent){\r\n\t\t\tparent = parent.$parent;\r\n\t\t}\r\n\t\tif(parent){\r\n\t\t\treturn parent;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tfunction eachCell(root, res){\r\n\t\tres.push(root);\r\n\t\tif(root.$cells){\r\n\t\t\tfor(var i = 0; i < root.$cells.length; i++){\r\n\t\t\t\teachCell(root.$cells[i], res);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tScrollbarCell.prototype._eachView = function(){\r\n\t\tvar res = [];\r\n\t\teachCell(this._getRootParent(), res);\r\n\t\treturn res;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getLinkedViews = function(){\r\n\t\tvar views = this._eachView();\r\n\t\tvar res = [];\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].$config && ((this._isVertical() && views[i].$config.scrollY == this.$id) || (this._isHorizontal() && views[i].$config.scrollX == this.$id)) ){\r\n\t\t\t\tres.push(views[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tScrollbarCell.prototype._initHorizontal = function(){\r\n\t\tthis.$scroll_hor = this.$view;\r\n\t\tthis.$domEvents.attach(this.$view, \"scroll\", this._scrollHorizontalHandler);\r\n\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initLinkedViews = function(){\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tvar css = this._isVertical() ?\"gantt_layout_outer_scroll gantt_layout_outer_scroll_vertical\" : \"gantt_layout_outer_scroll gantt_layout_outer_scroll_horizontal\";\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\t//views[i].$config.css = [views[i].$config.css || \"\", css].join(\" \");\r\n\t\t\tdomHelpers.addClassName(views[i].$view || views[i].getNode(), css);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initVertical = function(){\r\n\t\tthis.$scroll_ver = this.$view;\r\n\t\tthis.$domEvents.attach(this.$view, \"scroll\", this._scrollVerticalHandler);\r\n\t};\r\n\r\n\tScrollbarCell.prototype._updateLinkedViews = function(){\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initMouseWheel = function(){\r\n\t\tvar ff = env.isFF;\r\n\t\tif (ff)\r\n\t\t\tthis.$domEvents.attach(this._getRootParent().$view, \"wheel\", this._mouseWheelHandler, {passive: false});\r\n\t\telse\r\n\t\t\tthis.$domEvents.attach(this._getRootParent().$view, \"mousewheel\", this._mouseWheelHandler, {passive: false});\r\n\t};\r\n\r\n\r\n\r\n\r\n\tScrollbarCell.prototype.scrollHorizontally = function(left){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\tthis.$config.codeScrollLeft = left;\r\n\t\tleft = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(left, undefined);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = left;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, left, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\tScrollbarCell.prototype.scrollVertically = function(top){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_ver.scrollTop = top;\r\n\t\ttop = this.$scroll_ver.scrollTop;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(undefined, top);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = top;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, top, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._isVertical = function(){\r\n\t\treturn this.$config.scroll == \"y\";\r\n\t};\r\n\tScrollbarCell.prototype._isHorizontal = function(){\r\n\t\treturn this.$config.scroll == \"x\";\r\n\t};\r\n\tScrollbarCell.prototype._scrollHorizontalHandler = function (e) {\r\n\t\tif(this._isVertical() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//in safari we can catch previous onscroll after setting new value from mouse-wheel event\r\n\t\t//set delay to prevent value drifiting\r\n\t\tif ((new Date()) - ( this._wheel_time || 0 ) < 100) return true;\r\n\t\t//if (this.$gantt._touch_scroll_active) return;\r\n\t\tvar left = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tthis.scrollHorizontally(left);\r\n\r\n\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollHorizontalHandler = function(e){\r\n\t\tif(this._isVertical()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.show = function(){\r\n\t\tthis.$parent.show();\r\n\t};\r\n\tScrollbarCell.prototype.hide = function(){\r\n\t\tthis.$parent.hide();\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScrollSize = function(){\r\n\t\tvar scrollSize = 0;\r\n\t\tvar outerSize = 0;\r\n\t\tvar isHorizontal = this._isHorizontal();\r\n\r\n\t\tvar linked = this._getLinkedViews();\r\n\t\tvar view;\r\n\t\tvar scrollProperty = isHorizontal ? \"scrollWidth\" : \"scrollHeight\",\r\n\t\t\tinnerSizeProperty = isHorizontal ? \"contentX\" : \"contentY\";\r\n\t\tvar outerProperty = isHorizontal ? \"x\" : \"y\";\r\n\t\tvar offset = this._getScrollOffset();\r\n\r\n\t\tfor(var i = 0; i < linked.length; i++){\r\n\t\t\tview = linked[i];\r\n\t\t\tif(!(view && view.$content && view.$content.getSize && !view.$config.hidden)) continue;\r\n\r\n\t\t\tvar sizes = view.$content.getSize();\r\n\t\t\tvar cellScrollSize;\r\n\t\t\tif(sizes.hasOwnProperty(scrollProperty)){\r\n\t\t\t\tcellScrollSize = sizes[scrollProperty];\r\n\t\t\t}else{\r\n\t\t\t\tcellScrollSize = sizes[innerSizeProperty];\r\n\t\t\t}\r\n\r\n\t\t\tif(offset){\r\n\t\t\t\t// precalculated vertical/horizontal offsets of scrollbar to emulate 4.x look\r\n\t\t\t\tif(sizes[innerSizeProperty] > sizes[outerProperty] && sizes[innerSizeProperty] > scrollSize && (cellScrollSize > (sizes[outerProperty] - offset + 2))){\r\n\t\t\t\t\tscrollSize = cellScrollSize + (isHorizontal ? 0 : 2);\r\n\t\t\t\t\touterSize = sizes[outerProperty];\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar nonScrollableSize = Math.max(sizes[innerSizeProperty] - cellScrollSize, 0);\r\n\t\t\t\tvar scrollableViewPortSize = Math.max(sizes[outerProperty] - nonScrollableSize, 0);\r\n\t\t\t\tcellScrollSize = cellScrollSize + nonScrollableSize;\r\n\r\n\t\t\t\tif(cellScrollSize > scrollableViewPortSize && (cellScrollSize > scrollSize) ){\r\n\t\t\t\t\t//|| (cellScrollSize === scrollSize && sizes[outerProperty] < outerSize) // same scroll width but smaller scrollable view port\r\n\r\n\t\t\t\t\tscrollSize = cellScrollSize;\r\n\t\t\t\t\touterSize = sizes[outerProperty];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\touterScroll: outerSize,\r\n\t\t\tinnerScroll: scrollSize\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.scroll = function(position){\r\n\t\tif(this._isHorizontal()){\r\n\t\t\tthis.scrollHorizontally(position);\r\n\t\t}else{\r\n\t\t\tthis.scrollVertically(position);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.getScrollState = function(){\r\n\t\treturn {\r\n\t\t\tvisible: this.isVisible(),\r\n\t\t\tdirection: this.$config.scroll,\r\n\t\t\tsize: this.$config.outerSize,\r\n\t\t\tscrollSize: this.$config.scrollSize || 0,\r\n\t\t\tposition: this.$config.scrollPosition || 0\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.setSize = function(width, height){\r\n\t\t_super.prototype.setSize.apply(this, arguments);\r\n\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\r\n\t\tvar ownSize = (this._isVertical() ? height : width) - this._getScrollOffset() + (this._isHorizontal() ? 1 : 0);\r\n\r\n\t\tif(scrollSizes.innerScroll && ownSize > scrollSizes.outerScroll){\r\n\t\t\tscrollSizes.innerScroll += (ownSize - scrollSizes.outerScroll);\r\n\t\t}\r\n\t\tthis.$config.scrollSize = scrollSizes.innerScroll;\r\n\r\n\t\tthis.$config.width = width;\r\n\t\tthis.$config.height = height;\r\n\t\tthis._setScrollSize(scrollSizes.innerScroll);\r\n\t};\r\n\r\n\tScrollbarCell.prototype.isVisible = function(){\r\n\t\treturn !!(this.$parent && this.$parent.$view.parentNode);\r\n\t};\r\n\r\n\tScrollbarCell.prototype.shouldShow = function(){\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(!scrollSizes.innerScroll && (this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn false;\r\n\t\t}else if(scrollSizes.innerScroll && !(this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.shouldHide = function(){\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(!scrollSizes.innerScroll && (this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tScrollbarCell.prototype.toggleVisibility = function(){\r\n\t\tif(this.shouldHide()){\r\n\t\t\tthis.hide();\r\n\t\t}else if(this.shouldShow()){\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScaleOffset = function(view){\r\n\t\tvar offset = 0;\r\n\t\tif(view && (view.$config.view == \"timeline\" || view.$config.view == \"grid\")){\r\n\t\t\toffset = view.$content.$getConfig().scale_height;\r\n\t\t}\r\n\t\treturn offset;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScrollOffset = function(){\r\n\t\tvar offset = 0;\r\n\t\tif(this._isVertical()){\r\n\t\t\tvar parentLayout = this.$parent.$parent;\r\n\t\t\toffset = Math.max(\r\n\t\t\t\tthis._getScaleOffset(parentLayout.getPrevSibling(this.$parent.$id)),\r\n\t\t\t\tthis._getScaleOffset(parentLayout.getNextSibling(this.$parent.$id))\r\n\t\t\t\t);\r\n\t\t}else{\r\n\t\t\tvar linked = this._getLinkedViews();\r\n\r\n\t\t\tfor (var i = 0; i < linked.length; i++) {\r\n\t\t\t\tvar view = linked[i],\r\n\t\t\t\t\tvparent = view.$parent;\r\n\t\t\t\tvar cells = vparent.$cells;\r\n\r\n\t\t\t\tvar last = cells[cells.length - 1];\r\n\r\n\t\t\t\tif (last && last.$config.view == \"scrollbar\" && last.$config.hidden === false) {\r\n\t\t\t\t\toffset = last.$config.width;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn offset || 0;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._setScrollSize = function(size){\r\n\t\tvar property = this._isHorizontal() ? \"width\" : \"height\";\r\n\t\tvar scrollbar = this._isHorizontal() ? this.$scroll_hor : this.$scroll_ver;\r\n\r\n\t\tvar offset = this._getScrollOffset();\r\n\r\n\t\tvar node = scrollbar.firstChild;\r\n\r\n\t\tif(offset){\r\n\t\t\tif(this._isVertical()){\r\n\r\n\t\t\t\tthis.$config.outerSize = (this.$config.height - offset + 3);\r\n\t\t\t\tscrollbar.style.height = this.$config.outerSize + \"px\";\r\n\t\t\t\tscrollbar.style.top = (offset-1) + \"px\";\r\n\t\t\t\tdomHelpers.addClassName(scrollbar, this.$parent._borders.top);\r\n\t\t\t\tdomHelpers.addClassName(scrollbar.parentNode, \"gantt_task_vscroll\");\r\n\t\t\t}else{\r\n\t\t\t\tthis.$config.outerSize = (this.$config.width - offset + 1);\r\n\t\t\t\tscrollbar.style.width = this.$config.outerSize + \"px\";\r\n\t\t\t\t//domHelpers.addClassName(scrollbar, this.$parent._borders.right);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tscrollbar.style.top = \"auto\";\r\n\t\t\tdomHelpers.removeClassName(scrollbar, this.$parent._borders.top);\r\n\t\t\tdomHelpers.removeClassName(scrollbar.parentNode, \"gantt_task_vscroll\");\r\n\t\t\tthis.$config.outerSize = this.$config.height;\r\n\t\t}\r\n\r\n\t\tnode.style[property] = size + \"px\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._scrollVerticalHandler = function (e) {\r\n\t\tif(this._scrollHorizontalHandler() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//if (this.$gantt._touch_scroll_active) return;\r\n\t\tvar top = this.$scroll_ver.scrollTop;\r\n\t\tvar prev = this._oldTop;\r\n\t\tif(top == prev) return;\r\n\r\n\t\tthis.scrollVertically(top);\r\n\r\n\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollVerticalHandler = function(e){\r\n\t\tif(this._scrollHorizontalHandler()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._checkWheelTarget = function(targetNode){\r\n\t\tvar connectedViews = this._getLinkedViews().concat(this);\r\n\r\n\t\tfor(var i = 0; i < connectedViews.length; i++){\r\n\t\t\tvar node = connectedViews[i].$view;\r\n\t\t\tif(domHelpers.isChildOf(targetNode, node)){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._mouseWheelHandler = function(e){\r\n\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\tif(!this._checkWheelTarget(target))\r\n\t\t\treturn;\r\n\r\n\t\tthis._wheel_time = new Date();\r\n\r\n\t\tvar res = {};\r\n\r\n\t\tvar wheelSpeed = {x: 1, y: 1};\r\n\t\tvar wheelSpeedConfig = this.$gantt.config.wheel_scroll_sensitivity;\r\n\r\n\t\tif (typeof wheelSpeedConfig == \"number\" && !!wheelSpeedConfig) {\r\n\t\t\twheelSpeed = {x: wheelSpeedConfig, y: wheelSpeedConfig};\r\n\t\t}\r\n\t\telse if (({}).toString.apply(wheelSpeedConfig) == \"[object Object]\") {\r\n\t\t\twheelSpeed = {x: wheelSpeedConfig.x, y: wheelSpeedConfig.y};\r\n\t\t}\r\n\r\n\t\tvar ff = env.isFF;\r\n\t\tvar deltaX = ff ? (e.deltaX) : e.wheelDeltaX;\r\n\t\tvar deltaY = ff ? (e.deltaY) : e.wheelDelta;\r\n\r\n\t\tvar multiplier = -20;\r\n\t\tif (ff) {\r\n\t\t\t// GS-1500. Firefox had many changes during the versions\r\n\t\t\tconst version = parseInt(navigator.userAgent.split(\"Firefox/\")[1]);\r\n\t\t\tif (version <= 87){\r\n\t\t\t\tif (e.deltaMode !== 0) {\r\n\t\t\t\t\tmultiplier = -40;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmultiplier = -10;\r\n\t\t\t\t}\r\n\t\t\t} else if (version <= 90){\r\n\t\t\t\tmultiplier = -3;\r\n\t\t\t} else if (version <= 96){\r\n\t\t\t\tmultiplier = -1.5;\r\n\t\t\t} else {\r\n\t\t\t\tmultiplier = -1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar wx = ff ? (deltaX * multiplier * wheelSpeed.x) : deltaX * 2 * wheelSpeed.x;\r\n\t\tvar wy = ff ? (deltaY * multiplier * wheelSpeed.y) : deltaY * wheelSpeed.y;\r\n\r\n\t\tvar horizontalScrollModifier = this.$gantt.config.horizontal_scroll_key;\r\n\r\n\t\tif (horizontalScrollModifier !== false) {\r\n\t\t\tif (SCROLL_MODIFIER_KEYS.indexOf(horizontalScrollModifier) >= 0) {\r\n\t\t\t\tif(e[horizontalScrollModifier] && !(e.deltaX || e.wheelDeltaX)){\r\n\t\t\t\t\t// shift+mousewheel for horizontal scroll\r\n\t\t\t\t\twx = wy*2;\r\n\t\t\t\t\twy = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (wx && Math.abs(wx) > Math.abs(wy)){\r\n\t\t\tif(this._isVertical()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.x) return true;//no horisontal scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_hor || !this.$scroll_hor.offsetWidth) return true;\r\n\r\n\t\t\tvar dir  = wx/-40;\r\n\t\t\tvar oldLeft = this._oldLeft;\r\n\t\t\tvar left = oldLeft+dir*30;\r\n\t\t\tthis.scrollHorizontally(left);\r\n\t\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldLeft == this.$scroll_hor.scrollLeft){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t\t} else {\r\n\t\t\tif(this._isHorizontal()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.y) return true;//no vertical scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_ver || !this.$scroll_ver.offsetHeight) return true;\r\n\r\n\t\t\tvar dir  = wy/-40;\r\n\t\t\tif (typeof wy == \"undefined\")\r\n\t\t\t\tdir = e.detail;\r\n\r\n\t\t\tvar oldTop = this._oldTop;\r\n\t\t\tvar top = this.$scroll_ver.scrollTop+dir*30;\r\n\r\n\t\t\t//if(!this.$gantt.config.prevent_default_scroll &&\r\n\t\t\t//\t(this.$gantt._cached_scroll_pos && ((this.$gantt._cached_scroll_pos.y == top) || (this.$gantt._cached_scroll_pos.y <= 0 && top <= 0)))) return true;\r\n\r\n\r\n\t\t\tthis.scrollVertically(top);\r\n\t\t\tthis.$scroll_ver.scrollTop = top;\r\n\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldTop == this.$scroll_ver.scrollTop){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\t\t}\r\n\r\n\t\tif (e.preventDefault)\r\n\t\t\te.preventDefault();\r\n\t\te.cancelBubble=true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\treturn ScrollbarCell;\r\n})(Cell);\r\n\r\nexport default ScrollbarCell;","import quickPositionHelperFactory from \"./row_position_fixed_height\";\r\n\r\nfunction createMixin(view){\r\n\tvar getItemTopCache = {};\r\n\tvar getRowTopCache = {};\r\n\tvar getItemHeightCache = null;\r\n\tvar totalHeightCache = -1;\r\n\tvar getItemHeightCacheState = null;\r\n\r\n\tvar quickPosition = quickPositionHelperFactory(view);\r\n\r\n\treturn {\r\n\t\t_resetTopPositionHeight: function(){\r\n\t\t\tgetItemTopCache = {};\r\n\t\t\tgetRowTopCache = {};\r\n\t\t\tquickPosition.resetCache();\r\n\t\t},\r\n\t\t_resetHeight: function(){\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tvar newState = this.getCacheStateTotalHeight(store);\r\n\t\t\tif(!getItemHeightCacheState){\r\n\t\t\t\tgetItemHeightCacheState = newState;\r\n\t\t\t}else if(this.shouldClearHeightCache(getItemHeightCacheState, newState)){\r\n\t\t\t\tgetItemHeightCacheState = newState;\r\n\t\t\t\tgetItemHeightCache = null;\r\n\t\t\t}\r\n\r\n\t\t\ttotalHeightCache = -1;\r\n\t\t\tquickPosition.resetCache();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get top coordinate by row index (order)\r\n\t\t * @param {number} index\r\n\t\t */\r\n\t\tgetRowTop: function(index){\r\n\t\t\tif(quickPosition.canUseSimpleCalculation()){\r\n\t\t\t\treturn quickPosition.getRowTop(index);\r\n\t\t\t}\r\n\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store){\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\tif(getRowTopCache[index] !== undefined){\r\n\t\t\t\treturn getRowTopCache[index];\r\n\t\t\t}else {\r\n\t\t\t\tvar all = store.getIndexRange();\r\n\t\t\t\tvar top = 0;\r\n\t\t\t\tvar result = 0;\r\n\t\t\t\tfor(var i = 0; i < all.length; i++){\r\n\t\t\t\t\tgetRowTopCache[i] = top;\r\n\t\t\t\t\ttop += this.getItemHeight(all[i].id);\r\n\t\t\t\t\tif(i < index){\r\n\t\t\t\t\t\tresult = top;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get top coordinate by item id\r\n\t\t * @param {*} task_id\r\n\t\t */\r\n\t\tgetItemTop: function (taskId) {\r\n\t\t\tif(this.$config.rowStore){\r\n\t\t\t\tif(getItemTopCache[taskId] !== undefined){\r\n\t\t\t\t\treturn getItemTopCache[taskId];\r\n\t\t\t\t}\r\n\t\t\t\tvar store = this.$config.rowStore;\r\n\t\t\t\tif(!store) return 0;\r\n\r\n\t\t\t\tvar itemIndex = store.getIndexById(taskId);\r\n\r\n\t\t\t\tif (itemIndex === -1 && store.getParent && store.exists(taskId)) {\r\n\t\t\t\t\tvar parentId = store.getParent(taskId);\r\n\t\t\t\t\tif (store.exists(parentId)) {\r\n\t\t\t\t\t\t// if task is not found in list - maybe it's parent is a split task and we should use parents index instead\r\n\t\t\t\t\t\tvar parent = store.getItem(parentId);\r\n\t\t\t\t\t\tif (this.$gantt.isSplitTask(parent)) {\r\n\t\t\t\t\t\t\treturn this.getItemTop(parentId);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tgetItemTopCache[taskId] = this.getRowTop(itemIndex);\r\n\t\t\t\treturn getItemTopCache[taskId];\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get height of the item by item id\r\n\t\t * @param {*} itemId\r\n\t\t */\r\n\t\tgetItemHeight: function (itemId) {\r\n\t\t\tif(quickPosition.canUseSimpleCalculation()){\r\n\t\t\t\treturn quickPosition.getItemHeight(itemId);\r\n\t\t\t}\r\n\r\n\t\t\tif(!getItemHeightCache && this.$config.rowStore){\r\n\t\t\t\tthis._fillHeightCache(this.$config.rowStore);\r\n\t\t\t}\r\n\r\n\t\t\tif(getItemHeightCache[itemId] !== undefined){\r\n\t\t\t\treturn getItemHeightCache[itemId];\r\n\t\t\t}\r\n\r\n\t\t\tvar defaultHeight = this.$getConfig().row_height;\r\n\r\n\t\t\tif(this.$config.rowStore){\r\n\t\t\t\tvar store = this.$config.rowStore;\r\n\t\t\t\tif(!store) return defaultHeight;\r\n\r\n\t\t\t\tvar item = store.getItem(itemId);\r\n\r\n\t\t\t\treturn getItemHeightCache[itemId] = item && item.row_height || defaultHeight;\r\n\t\t\t}else{\r\n\t\t\t\treturn defaultHeight;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_fillHeightCache: function(store){\r\n\t\t\tif(!store){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgetItemHeightCache = {};\r\n\t\t\tvar defaultHeight = this.$getConfig().row_height;\r\n\t\t\tstore.eachItem(function(item){\r\n\t\t\t\treturn getItemHeightCache[item.id] = item && item.row_height || defaultHeight;\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetCacheStateTotalHeight: function(store){\r\n\r\n\t\t\tvar globalHeight = this.$getConfig().row_height;\r\n\t\t\tvar itemHeightCache = {};\r\n\t\t\tvar items = [];\r\n\t\t\tvar sumHeight = 0;\r\n\t\t\tif(store){\r\n\t\t\t\tstore.eachItem(function(item){\r\n\t\t\t\t\titems.push(item);\r\n\t\t\t\t\titemHeightCache[item.id] = item.row_height;\r\n\t\t\t\t\tsumHeight += item.row_height || globalHeight;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\t\t\treturn {\r\n\t\t\t\tglobalHeight: globalHeight,\r\n\t\t\t\titems: items,\r\n\t\t\t\tcount: items.length,\r\n\t\t\t\tsumHeight: sumHeight\r\n\t\t\t};\r\n\t\t},\r\n\t\tshouldClearHeightCache: function(oldState, newState){\r\n\r\n\t\t\tif(oldState.count != newState.count){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif(oldState.globalHeight != newState.globalHeight){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tif(oldState.sumHeight != newState.sumHeight){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tfor(var i in oldState.items){\r\n\t\t\t\tvar newValue = newState.items[i];\r\n\t\t\t\tif(newValue !== undefined && newValue != oldState.items[i]){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Get total height of items\r\n\t\t */\r\n\t\tgetTotalHeight: function () {\r\n\t\t\tif(quickPosition.canUseSimpleCalculation()){\r\n\t\t\t\treturn quickPosition.getTotalHeight();\r\n\t\t\t}\r\n\r\n\t\t\tif(totalHeightCache != -1){\r\n\t\t\t\treturn totalHeightCache;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.$config.rowStore){\r\n\t\t\t\tvar store = this.$config.rowStore;\r\n\t\t\t\tthis._fillHeightCache(store);\r\n\t\t\t\tvar getHeight = this.getItemHeight.bind(this);\r\n\t\t\t\tvar visibleItems = store.getVisibleItems();\r\n\t\t\t\tvar totalHeight = 0;\r\n\r\n\t\t\t\tvisibleItems.forEach(function(item){\r\n\t\t\t\t\ttotalHeight += getHeight(item.id);\r\n\t\t\t\t});\r\n\r\n\t\t\t\ttotalHeightCache = totalHeight;\r\n\t\t\t\treturn totalHeight;\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get item by top position\r\n\t\t * @param {*} top\r\n\t\t */\r\n\t\tgetItemIndexByTopPosition: function (top) {\r\n\t\t\tif(this.$config.rowStore){\r\n\t\t\t\tif(quickPosition.canUseSimpleCalculation()){\r\n\t\t\t\t\treturn quickPosition.getItemIndexByTopPosition(top);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar store = this.$config.rowStore;\r\n\t\t\t\tfor(var i = 0; i < store.countVisible(); i++){\r\n\t\t\t\t\tvar current = this.getRowTop(i);\r\n\t\t\t\t\tvar next = this.getRowTop(i+1);\r\n\t\t\t\t\tif(!next){\r\n\t\t\t\t\t\tvar taskId = store.getIdByIndex(i);\r\n\t\t\t\t\t\tnext = current + this.getItemHeight(taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(top >= current && top < next){\r\n\t\t\t\t\t\treturn i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// GS-1723: If we iterated all tasks and didn't find the position, the target is below all other tasks\r\n\t\t\t\treturn store.countVisible() + 2;\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport default createMixin;","function createHelper(view){\r\n\tvar cachedRowHeight = -1;\r\n\tvar canUseSimpleCalc = -1;\r\n\treturn {\r\n\t\tresetCache: function(){\r\n\t\t\tcachedRowHeight = -1;\r\n\t\t\tcanUseSimpleCalc = -1;\r\n\t\t},\r\n\t\t_getRowHeight: function(){\r\n\t\t\tif(cachedRowHeight === -1){\r\n\t\t\t\tcachedRowHeight = view.$getConfig().row_height;\r\n\t\t\t}\r\n\t\t\treturn cachedRowHeight;\r\n\t\t},\r\n\t\t_refreshState: function(){\r\n\t\t\tthis.resetCache();\r\n\t\t\tcanUseSimpleCalc = true;\r\n\t\t\tvar store = view.$config.rowStore;\r\n\t\t\tif(!store){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar globalRowHeight = this._getRowHeight();\r\n\t\t\tfor (var i=0; i<store.fullOrder.length; i++) {\r\n\t\t\t\tvar item = store.getItem(store.fullOrder[i]);\r\n\t\t\t\t// GS-1491: ignore the task when it is filtered:\r\n\t\t\t\tif (!item) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif(item.row_height && item.row_height !== globalRowHeight){\r\n\t\t\t\t\tcanUseSimpleCalc = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t},\r\n\t\tcanUseSimpleCalculation: function(){\r\n\t\t\tif(canUseSimpleCalc === -1){\r\n\t\t\t\tthis._refreshState();\r\n\t\t\t}\r\n\t\t\treturn canUseSimpleCalc;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get top coordinate by row index (order)\r\n\t\t * @param {number} index\r\n\t\t */\r\n\t\tgetRowTop: function(index){\r\n\t\t\tvar store = view.$config.rowStore;\r\n\t\t\tif(!store){\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\treturn index * this._getRowHeight();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get height of the item by item id\r\n\t\t * @param {*} itemId\r\n\t\t */\r\n\t\tgetItemHeight: function (itemId) {\r\n\t\t\treturn this._getRowHeight();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get total height of items\r\n\t\t */\r\n\t\tgetTotalHeight: function () {\r\n\t\t\tif(view.$config.rowStore){\r\n\t\t\t\tvar store = view.$config.rowStore;\r\n\t\t\t\treturn store.countVisible() * this._getRowHeight();\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get item by top position\r\n\t\t * @param {*} top\r\n\t\t */\r\n\t\tgetItemIndexByTopPosition: function (top) {\r\n\t\t\tif(view.$config.rowStore){\r\n\t\t\t\treturn Math.floor(top / this._getRowHeight());\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport default createHelper;","var createStaticBgHelper = function(){\r\n\treturn {\r\n\t\trender: function () { },\r\n\t\tdestroy: function () { }\r\n\t};\r\n};\r\n\r\nexport default {\r\n\tcreate: function(){\r\n\t\treturn createStaticBgHelper();\r\n\t}\r\n};\r\n\r\n","import ScaleHelper from \"./scales_ignore\";\r\nimport eventable from \"../../../utils/eventable\";\r\nimport * as utils from \"../../../utils/utils\";\r\nimport * as helpers from \"../../../utils/helpers\";\r\nimport topPositionMixin from \"../row_position_mixin\";\r\nimport canvasRender from \"./tasks_canvas_render\";\r\nimport createLayerConfig from \"./timeline_layers\";\r\n\r\nvar Timeline = function(parent, config, factory, gantt){\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$scaleHelper = new ScaleHelper(gantt);\r\n\tthis.$gantt = gantt;\r\n\tthis._posFromDateCache = {};\r\n\tthis._timelineDragScroll = null;\r\n\tutils.mixin(this, topPositionMixin(this));\r\n\teventable(this);\r\n};\r\n\r\nTimeline.prototype = {\r\n\tinit: function(container) {\r\n\t\tcontainer.innerHTML += \"<div class='gantt_task' style='width:inherit;height:inherit;'></div>\";\r\n\t\tthis.$task = container.childNodes[0];\r\n\r\n\t\tthis.$task.innerHTML = \"<div class='gantt_task_scale'></div><div class='gantt_data_area'></div>\";\r\n\t\tthis.$task_scale = this.$task.childNodes[0];\r\n\r\n\t\tthis.$task_data = this.$task.childNodes[1];\r\n\t\tconst taskBg = \"<div class='gantt_task_bg'></div>\";\r\n\t\tconst links = \"<div class='gantt_links_area'></div>\";\r\n\t\tconst taskBars = \"<div class='gantt_bars_area'></div>\";\r\n\r\n\t\tconst taskConstraints = \"<div class='gantt_task_constraints'></div>\";\r\n\t\tconst taskDeadlines = \"<div class='gantt_task_deadlines'></div>\";\r\n\t\tconst taskBaselines = \"<div class='gantt_task_baselines'></div>\";\r\n\r\n\t\tthis.$task_data.innerHTML = taskBg + taskBaselines + links + taskBars + taskConstraints + taskDeadlines;\r\n\r\n\t\tthis.$task_bg = this.$task_data.childNodes[0];\r\n\t\tthis.$task_baselines = this.$task_data.childNodes[1];\r\n\t\tthis.$task_links = this.$task_data.childNodes[2];\r\n\t\tthis.$task_bars = this.$task_data.childNodes[3];\r\n\t\tthis.$task_constraints = this.$task_data.childNodes[4];\r\n\t\tthis.$task_deadlines = this.$task_data.childNodes[5];\r\n\r\n\t\tthis._tasks = {\r\n\t\t\tcol_width: 0,\r\n\t\t\twidth: [], // width of each column\r\n\t\t\tfull_width: 0, // width of all columns\r\n\t\t\ttrace_x: [],\r\n\t\t\trendered: {}\r\n\t\t};\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar attr = config[this.$config.bind + \"_attribute\"];\r\n\t\tvar linksAttr = config[this.$config.bindLinks + \"_attribute\"];\r\n\t\tif(!attr && this.$config.bind){\r\n\t\t\tattr = \"data-\" + this.$config.bind + \"-id\";\r\n\t\t}\r\n\t\tif(!linksAttr && this.$config.bindLinks){\r\n\t\t\tlinksAttr = \"data-\" + this.$config.bindLinks + \"-id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\t\tthis.$config.link_attribute = linksAttr || null;\r\n\r\n\t\tvar layers = this._createLayerConfig();\r\n\t\tif(!this.$config.layers){\r\n\t\t\tthis.$config.layers = layers.tasks;\r\n\t\t}\r\n\t\tif(!this.$config.linkLayers){\r\n\t\t\tthis.$config.linkLayers = layers.links;\r\n\t\t}\r\n\r\n\t\tthis._attachLayers(this.$gantt);\r\n\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t\tif (this.$gantt.ext.dragTimeline) {\r\n\t\t\tthis._timelineDragScroll = this.$gantt.ext.dragTimeline.create();\r\n\t\t\tthis._timelineDragScroll.attach(this);\r\n\t\t}\r\n\t},\r\n\r\n\tsetSize: function(width, height){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tif(width*1 === width){\r\n\t\t\tthis.$config.width = width;\r\n\t\t}\r\n\t\tif(height*1 === height){\r\n\r\n\t\t\tthis.$config.height = height;\r\n\t\t\tvar dataHeight = Math.max(this.$config.height - config.scale_height);\r\n\t\t\tthis.$task_data.style.height = dataHeight + 'px';\r\n\t\t}\r\n\r\n\t\tthis.refresh();\r\n\t\tthis.$task_bg.style.backgroundImage = \"\";\r\n\r\n\t\tif(config.smart_rendering && this.$config.rowStore){\r\n\t\t\tthis.$task_bg.style.height = this.getTotalHeight() +\"px\";\r\n\t\t}else{\r\n\t\t\tthis.$task_bg.style.height = \"\";\r\n\t\t}\r\n\r\n\t\tvar scale = this._tasks;\r\n\t\t//timeline area layers\r\n\t\tvar data_els = this.$task_data.childNodes;\r\n\t\tfor(var i= 0, len = data_els.length; i < len; i++){\r\n\t\t\tvar el = data_els[i];\r\n\t\t\tif(el.hasAttribute(\"data-layer\") && el.style)\r\n\t\t\t\tel.style.width = scale.full_width + \"px\";\r\n\t\t}\r\n\t},\r\n\r\n\tisVisible: function(){\r\n\t\tif(this.$parent && this.$parent.$config){\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t}else{\r\n\t\t\treturn this.$task.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\tgetSize: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar store = this.$config.rowStore;\r\n\r\n\t\tvar contentHeight = store ? this.getTotalHeight() : 0,\r\n\t\t\tcontentWidth = this.isVisible() ? this._tasks.full_width : 0;\r\n\r\n\t\treturn {\r\n\t\t\tx: this.isVisible() ? this.$config.width : 0,\r\n\t\t\ty: this.isVisible() ? this.$config.height : 0,\r\n\t\t\tcontentX: this.isVisible() ? contentWidth : 0,\r\n\t\t\tcontentY: this.isVisible() ? (config.scale_height + contentHeight) : 0,\r\n\t\t\tscrollHeight: this.isVisible() ? contentHeight : 0,\r\n\t\t\tscrollWidth: this.isVisible() ? contentWidth : 0\r\n\t\t};\r\n\t},\r\n\r\n\tscrollTo: function(left, top){\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tvar scrolled = false;\r\n\r\n\t\tthis.$config.scrollTop = this.$config.scrollTop || 0;\r\n\t\tthis.$config.scrollLeft = this.$config.scrollLeft || 0;\r\n\t\tif(top*1 === top){\r\n\t\t\tthis.$config.scrollTop = top;\r\n\t\t\tthis.$task_data.scrollTop = this.$config.scrollTop;\r\n\t\t\tscrolled = true;\r\n\t\t}\r\n\t\tif (left*1 === left){\r\n\t\t\tthis.$task.scrollLeft = left;\r\n\t\t\tthis.$config.scrollLeft = this.$task.scrollLeft;\r\n\t\t\tthis._refreshScales();\r\n\t\t\tscrolled = true;\r\n\t\t}\r\n\r\n\t\tif(scrolled){\r\n\t\t\tthis.callEvent(\"onScroll\", [this.$config.scrollLeft, this.$config.scrollTop]);\r\n\t\t}\r\n\t},\r\n\r\n\t_refreshScales: function _refreshScales() {\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif (!config.smart_scales) return;\r\n\r\n\t\tvar viewPort = this.getViewPort();\r\n\r\n\t\tvar scales = this._scales;\r\n\t\tthis.$task_scale.innerHTML = this._getScaleChunkHtml(scales, viewPort.x, viewPort.x_end);\r\n\t},\r\n\r\n\tgetViewPort: function(){\r\n\t\tvar scrollLeft = this.$config.scrollLeft || 0;\r\n\t\tvar scrollTop = this.$config.scrollTop || 0;\r\n\t\tvar height = this.$config.height || 0;\r\n\t\tvar width = this.$config.width || 0;\r\n\t\treturn {\r\n\t\t\ty: scrollTop,\r\n\t\t\ty_end: scrollTop + height,\r\n\t\t\tx: scrollLeft,\r\n\t\t\tx_end: scrollLeft + width,\r\n\t\t\theight: height,\r\n\t\t\twidth: width\r\n\t\t};\r\n\t},\r\n\r\n\t_createLayerConfig: createLayerConfig,\r\n\r\n\t_attachLayers: function(gantt){\r\n\t\tthis._taskLayers = [];\r\n\t\tthis._linkLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\r\n\t\tif(this.$config.bind){\r\n\r\n\t\t\tthis._bindStore();\r\n\t\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\t\tif(!taskRenderer){\r\n\t\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bind,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\ttaskRenderer.container = function(){ return self.$task_data;};\r\n\r\n\t\t\tvar taskLayers = this.$config.layers;\r\n\t\t\tfor(var i = 0; taskLayers && i < taskLayers.length; i++){\r\n\t\t\t\tvar layer = taskLayers[i];\r\n\r\n\t\t\t\tif(typeof layer == \"string\"){\r\n\t\t\t\t\tlayer = this.$gantt.$ui.layers[layer]();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(typeof layer == \"function\" || (layer && layer.render && layer.update)){\r\n\t\t\t\t\tlayer = {renderer: layer};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayer.view = this;\r\n\r\n\t\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t\t\tif(layer.expose){\r\n\t\t\t\t\tthis._taskRenderer = taskRenderer.getLayer(bar_layer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._initStaticBackgroundRender();\r\n\t\t}\r\n\r\n\t\tif(this.$config.bindLinks){\r\n\t\t\tself.$config.linkStore = self.$gantt.getDatastore(self.$config.bindLinks);\r\n\r\n\t\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\t\tif(!linkRenderer){\r\n\t\t\t\tlinkRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bindLinks,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar linkLayers = this.$config.linkLayers;\r\n\t\t\tfor(var i = 0; linkLayers && i < linkLayers.length; i++){\r\n\r\n\t\t\t\tif(typeof layer == \"string\"){\r\n\t\t\t\t\tlayer = this.$gantt.$ui.layers[layer]();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar layer = linkLayers[i];\r\n\t\t\t\tlayer.view = this;\r\n\t\t\t//\tlayer.getViewPort = getViewPort;\r\n\t\t\t//\tsubscribeSmartRender(layer);\r\n\t\t\t\tvar linkLayer = linkRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(linkLayer);\r\n\t\t\t\tif(linkLayers[i].expose){\r\n\t\t\t\t\tthis._linkRenderer = linkRenderer.getLayer(linkLayer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_initStaticBackgroundRender: function(){\r\n\t\tvar self = this;\r\n\t\tvar staticRender = canvasRender.create();\r\n\t\tvar store = self.$config.rowStore;\r\n\t\tif(!store) return;\r\n\r\n\t\tthis._staticBgHandler = store.attachEvent(\"onStoreUpdated\", function(id, item, mode){\r\n\t\t\tif(id !== null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!self.isVisible())\r\n\t\t\t\treturn;\r\n\t\t\tvar config = self.$getConfig();\r\n\t\t\tif(config.static_background || config.timeline_placeholder) {\r\n\t\t\t\tvar store = self.$gantt.getDatastore(self.$config.bind);\r\n\t\t\t\tvar staticBgContainer = self.$task_bg_static;\r\n\t\t\t\tif(!staticBgContainer){\r\n\t\t\t\t\tstaticBgContainer = document.createElement(\"div\");\r\n\t\t\t\t\tstaticBgContainer.className = \"gantt_task_bg\";\r\n\t\t\t\t\tself.$task_bg_static = staticBgContainer;\r\n\t\t\t\t\tif(self.$task_bg.nextSibling){\r\n\t\t\t\t\t\tself.$task_data.insertBefore(staticBgContainer, self.$task_bg.nextSibling);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tself.$task_data.appendChild(staticBgContainer);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (store) {\r\n\t\t\t\t\tvar staticBackgroundHeight = self.getTotalHeight();\r\n\t\t\t\t\tif (config.timeline_placeholder){\r\n\t\t\t\t\t\tstaticBackgroundHeight = config.timeline_placeholder.height || self.$task_data.offsetHeight || 99999;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstaticRender.render(staticBgContainer, config, self.getScale(), staticBackgroundHeight, self.getItemHeight(item ? item.id : null));\r\n\t\t\t\t}\r\n\t\t\t}else if(config.static_background){\r\n\t\t\t\tif(self.$task_bg_static && self.$task_bg_static.parentNode){\r\n\t\t\t\t\tself.$task_bg_static.parentNode.removeChild(self.$task_bg_static);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.attachEvent(\"onDestroy\", function () {\r\n\t\t\tstaticRender.destroy();\r\n\t\t});\r\n\t\tthis._initStaticBackgroundRender = function(){};//init once\r\n\t},\r\n\r\n\t_clearLayers: function(gantt){\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\tif (this._taskLayers) {\r\n\t\t\tfor(var i = 0; i < this._taskLayers.length; i++){\r\n\t\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._linkLayers) {\r\n\t\t\tfor(var i = 0; i < this._linkLayers.length; i++){\r\n\t\t\t\tlinkRenderer.removeLayer(this._linkLayers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._linkLayers = [];\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_render_tasks_scales: function _render_tasks_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar scales_html = \"\",\r\n\t\t\touter_width = 0,\r\n\t\t\tscale_height = 0;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (this.isVisible()) {\r\n\t\t\tvar helpers = this.$scaleHelper;\r\n\t\t\tvar scales = this._getScales();\r\n\t\t\tscale_height = config.scale_height;\r\n\r\n\t\t\tvar availWidth = this.$config.width;\r\n\t\t\tif(config.autosize == \"x\" || config.autosize == \"xy\"){\r\n\t\t\t\tavailWidth = Math.max(config.autosize_min_width, 0);\r\n\t\t\t}\r\n\r\n\t\t\tvar cfgs = helpers.prepareConfigs(scales, config.min_column_width, availWidth, scale_height - 1, state.min_date, state.max_date, config.rtl);\r\n\t\t\tvar cfg = this._tasks = cfgs[cfgs.length - 1];\r\n\t\t\tthis._scales = cfgs;\r\n\t\t\tthis._posFromDateCache = {};\r\n\r\n\t\t\tscales_html = this._getScaleChunkHtml(cfgs, 0, this.$config.width);\r\n\r\n\t\t\touter_width = cfg.full_width + \"px\";//cfg.full_width + (this._scroll_sizes().y ? scrollSizes.scroll_size : 0) + \"px\";\r\n\t\t\tscale_height += \"px\";\r\n\t\t}\r\n\r\n\t\tthis.$task_scale.style.height = scale_height;\r\n\r\n\t\tthis.$task_data.style.width =\r\n\t\t\tthis.$task_scale.style.width = outer_width;\r\n\r\n\t\tthis.$task_scale.innerHTML = scales_html;\r\n\r\n\t},\r\n\r\n\t_getScaleChunkHtml: function _get_scale_chunk_html (scales, fromPos, toPos) {\r\n\t\tvar templates = this.$gantt.templates;\r\n\t\tvar html = [];\r\n\r\n\t\tvar css = templates.scale_row_class;\r\n\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\tvar cssClass = \"gantt_scale_line\";\r\n\t\t\tvar tplClass = css(scales[i]);\r\n\t\t\tif (tplClass) {\r\n\t\t\t\tcssClass += \" \" + tplClass;\r\n\t\t\t}\r\n\r\n\t\t\thtml.push(\"<div class=\\\"\" + cssClass + \"\\\" style=\\\"height:\" + (scales[i].height) +\r\n\t\t\t\t\"px;position:relative;line-height:\" + (scales[i].height) + \"px\\\">\" + this._prepareScaleHtml(scales[i], fromPos, toPos, i) + \"</div>\");\r\n\t\t}\r\n\r\n\t\treturn html.join(\"\");\r\n\t},\r\n\t_prepareScaleHtml: function _prepare_scale_html(config, fromPos, toPos, index) {\r\n\t\tvar globalConfig = this.$getConfig();\r\n\t\tvar globalTemplates = this.$gantt.templates;\r\n\r\n\t\tvar cells = [];\r\n\t\tvar date = null, css = null;\r\n\r\n\t\tvar content = config.format || config.template || config.date;\r\n\r\n\t\tif(typeof content === \"string\"){\r\n\t\t\tcontent = this.$gantt.date.date_to_str(content);\r\n\t\t}\r\n\r\n\t\tvar startIndex = 0,\r\n\t\t\tendIndex = config.count;\r\n\r\n\t\tif (globalConfig.smart_scales && (!isNaN(fromPos) && !isNaN(toPos))) {\r\n\t\t\tstartIndex = helpers.findBinary(config.left, fromPos);\r\n\t\t\tendIndex = helpers.findBinary(config.left, toPos) + 1;\r\n\t\t}\r\n\r\n\t\tcss = config.css || function () {\r\n\t\t\t};\r\n\t\tif (!config.css && globalConfig.inherit_scale_class) {\r\n\t\t\tcss = globalTemplates.scale_cell_class;\r\n\t\t}\r\n\r\n\t\tfor (var i = startIndex; i < endIndex; i++) {\r\n\t\t\tif (!config.trace_x[i]) break;\r\n\r\n\t\t\tdate = new Date(config.trace_x[i]);\r\n\t\t\tvar value = content.call(this, date),\r\n\t\t\t\twidth = config.width[i],\r\n\t\t\t\theight = config.height,\r\n\t\t\t\tleft = config.left[i],\r\n\t\t\t\tstyle = \"\",\r\n\t\t\t\ttemplate = \"\",\r\n\t\t\t\tcssclass = \"\";\r\n\r\n\t\t\tif (width) {\r\n\t\t\t\tvar position = globalConfig.smart_scales ? (\"position:absolute;left:\" + left + \"px\") : \"\";\r\n\r\n\t\t\t\tstyle = \"width:\" + (width) + \"px;\" + position;\r\n\t\t\t\t// GS-1188: Display the scale value in the viewport for long cells\r\n\t\t\t\tconst viewPort = this.getViewPort();\r\n\t\t\t\tconst floatConfig = (globalConfig.scales[index] || {}).sticky; // for old scale settings\r\n\r\n\t\t\t\tlet labelPosition = '';\r\n\t\t\t\tconst approxLabelWidth = 70;\r\n\t\t\t\t// if sticky config is not specified - sticky labels are enabled for long cells only\r\n\t\t\t\tif ((floatConfig !== false && width > approxLabelWidth) || floatConfig === true) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (left < viewPort.x && left + width/2 - approxLabelWidth/2 < viewPort.x){\r\n\t\t\t\t\t\tlabelPosition = ` style='position:absolute;left: ${viewPort.x  - left + 10}px;' `;\r\n\t\t\t\t\t} else if(left + width/2 + approxLabelWidth/2 > viewPort.x_end && width > approxLabelWidth){\r\n\t\t\t\t\t\tlet labelPos = viewPort.x_end - left - 10;\r\n\t\t\t\t\t\tlet translateValue = \"-100%\";\r\n\t\t\t\t\t\tif(labelPos < approxLabelWidth) {\r\n\t\t\t\t\t\t\tlabelPos = approxLabelWidth;\r\n\t\t\t\t\t\t\ttranslateValue = `-${labelPos}px`;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlabelPosition = ` style='position:absolute;left: ${labelPos}px;transform: translate(${translateValue},0);' `;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcssclass = \"gantt_scale_cell\" + (i == config.count - 1 ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\t\ttemplate = css.call(this, date);\r\n\t\t\t\tif (template) cssclass += \" \" + template;\r\n\r\n\t\t\t\tvar ariaAttr = this.$gantt._waiAria.getTimelineCellAttr(value);\r\n\t\t\t\tvar cell = `<div class='${cssclass}' ${ariaAttr} style='${style}'><span ${labelPosition}>${value}</span></div>`;\r\n\t\t\t\tcells.push(cell);\r\n\t\t\t} else {\r\n\t\t\t\t//do not render ignored cells\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn cells.join(\"\");\r\n\t},\r\n\tdateFromPos: function dateFromPos(x) {\r\n\t\tvar scale = this._tasks;\r\n\t\tif (x < 0 || x > scale.full_width || !scale.full_width) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar ind = helpers.findBinary(this._tasks.left, x);\r\n\t\tvar summ = this._tasks.left[ind];\r\n\r\n\t\tvar col_width = scale.width[ind] || scale.col_width;\r\n\t\tvar part = 0;\r\n\t\tif (col_width) {\r\n\t\t\tpart = (x - summ) / col_width;\r\n\t\t\tif(scale.rtl){\r\n\t\t\t\tpart = 1 - part;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar unit = 0;\r\n\t\tif (part) {\r\n\t\t\tunit = this._getColumnDuration(scale, scale.trace_x[ind]);\r\n\t\t}\r\n\r\n\t\tvar date = new Date(scale.trace_x[ind].valueOf() + Math.round(part * unit));\r\n\t\treturn date;\r\n\t},\r\n\tposFromDate: function posFromDate(date) {\r\n\t\tif (!this.isVisible())\r\n\t\t\treturn 0;\r\n\r\n\t\tif(!date){\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tvar dateValue = String(date.valueOf());\r\n\r\n\t\tif(this._posFromDateCache[dateValue] !== undefined){\r\n\t\t\treturn this._posFromDateCache[dateValue];\r\n\t\t}\r\n\t\tvar ind = this.columnIndexByDate(date);\r\n\t\tthis.$gantt.assert(ind >= 0, \"Invalid day index\");\r\n\r\n\t\tvar wholeCells = Math.floor(ind);\r\n\t\tvar partCell = ind % 1;\r\n\r\n\t\tvar pos = this._tasks.left[Math.min(wholeCells, this._tasks.width.length - 1)];\r\n\t\tif (wholeCells == this._tasks.width.length)\r\n\t\t\tpos += this._tasks.width[this._tasks.width.length - 1];\r\n\t\t//for(var i=1; i <= wholeCells; i++)\r\n\t\t//\tpos += gantt._tasks.width[i-1];\r\n\r\n\t\tif (partCell) {\r\n\t\t\tif (wholeCells < this._tasks.width.length) {\r\n\t\t\t\tpos += this._tasks.width[wholeCells] * (partCell % 1);\r\n\t\t\t} else {\r\n\t\t\t\tpos += 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar roundPos = Math.round(pos);\r\n\t\tthis._posFromDateCache[dateValue] = roundPos;\r\n\t\treturn Math.round(roundPos);\r\n\t},\r\n\r\n\t_getNextVisibleColumn: function (startIndex, columns, ignores) {\r\n\t\t// iterate columns to the right\r\n\t\tvar date = +columns[startIndex];\r\n\t\tvar visibleDateIndex = startIndex;\r\n\t\twhile (ignores[date]) {\r\n\t\t\tvisibleDateIndex++;\r\n\t\t\tdate = +columns[visibleDateIndex];\r\n\t\t}\r\n\r\n\t\treturn visibleDateIndex;\r\n\t},\r\n\t_getPrevVisibleColumn: function (startIndex, columns, ignores) {\r\n\t\t// iterate columns to the left\r\n\t\tvar date = +columns[startIndex];\r\n\t\tvar visibleDateIndex = startIndex;\r\n\t\twhile (ignores[date]) {\r\n\t\t\tvisibleDateIndex--;\r\n\t\t\tdate = +columns[visibleDateIndex];\r\n\t\t}\r\n\t\treturn visibleDateIndex;\r\n\t},\r\n\t_getClosestVisibleColumn: function (startIndex, columns, ignores) {\r\n\t\tvar visibleDateIndex = this._getNextVisibleColumn(startIndex, columns, ignores);\r\n\t\tif (!columns[visibleDateIndex]) {\r\n\t\t\tvisibleDateIndex =  this._getPrevVisibleColumn(startIndex, columns, ignores);\r\n\t\t}\r\n\t\treturn visibleDateIndex;\r\n\t},\r\n\tcolumnIndexByDate: function columnIndexByDate(date) {\r\n\t\tvar pos = new Date(date).valueOf();\r\n\t\tvar days = this._tasks.trace_x_ascending,\r\n\t\t\tignores = this._tasks.ignore_x;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (pos <= state.min_date) {\r\n\t\t\tif(this._tasks.rtl){\r\n\t\t\t\treturn days.length;\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif (pos >= state.max_date) {\r\n\t\t\tif(this._tasks.rtl){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn days.length;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar dateIndex = helpers.findBinary(days, pos);\r\n\r\n\t\tvar visibleIndex = this._getClosestVisibleColumn(dateIndex, days, ignores);\r\n\t\tvar visibleDate = days[visibleIndex];\r\n\t\tvar transition = this._tasks.trace_index_transition;\r\n\r\n\t\tif(!visibleDate){\r\n\t\t\tif(transition){\r\n\t\t\t\treturn transition[0];\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar part = ((date - days[visibleIndex]) / this._getColumnDuration(this._tasks, days[visibleIndex]));\r\n\t\tif(transition){\r\n\t\t\treturn transition[visibleIndex] + (1 - part);\r\n\t\t}else{\r\n\t\t\treturn visibleIndex + part;\r\n\t\t}\r\n\t},\r\n\tgetItemPosition:function (task, start_date, end_date) {\r\n\t\tvar xLeft, xRight, width;\r\n\r\n\t\tlet displayStart = start_date || task.start_date || task.$auto_start_date;\r\n\t\tlet displayEnd = end_date || task.end_date || task.$auto_end_date;\r\n\t\tif(this._tasks.rtl){\r\n\t\t\txRight = this.posFromDate(displayStart);\r\n\t\t\txLeft = this.posFromDate(displayEnd);\r\n\t\t}else{\r\n\t\t\txLeft = this.posFromDate(displayStart);\r\n\t\t\txRight = this.posFromDate(displayEnd);\r\n\t\t}\r\n\t\twidth =  Math.max((xRight - xLeft), 0);\r\n\r\n\t\tvar y = this.getItemTop(task.id);\r\n\r\n\t\tvar height = this.getBarHeight(task.id);\r\n\t\tvar rowHeight = this.getItemHeight(task.id);\r\n\t\treturn {\r\n\t\t\tleft: xLeft,\r\n\t\t\ttop: y,\r\n\t\t\theight: height,\r\n\t\t\twidth: width,\r\n\t\t\trowHeight: rowHeight\r\n\t\t};\r\n\t},\r\n\r\n\tgetBarHeight: function(taskId, isMilestoneRender){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar task = this.$config.rowStore.getItem(taskId);\r\n\t\t// height of the bar item\r\n\t\tvar height = task.task_height || task.bar_height || config.bar_height || config.task_height;\r\n\t\tvar rowHeight = this.getItemHeight(taskId);\r\n\r\n\t\tif (height == \"full\") {\r\n\t\t\tvar offset = config.bar_height_padding || 3;\r\n\t\t\theight = rowHeight - offset;\r\n\t\t}\r\n\t\t//item height cannot be bigger than row height\r\n\t\theight = Math.min(height, rowHeight);\r\n\t\tif (isMilestoneRender) { // to get correct height for addapting Milestone to the row\r\n\t\t\theight = Math.round(height / Math.sqrt(2));\r\n\t\t}\r\n\t\treturn Math.max(height, 0);\r\n\t},\r\n\r\n\tgetScale: function(){\r\n\t\treturn this._tasks;\r\n\t},\r\n\r\n\t_getScales: function _get_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar helpers = this.$scaleHelper;\r\n\t\tvar scales = [helpers.primaryScale(config)].concat(helpers.getSubScales(config));\r\n\r\n\t\thelpers.sortScales(scales);\r\n\t\treturn scales;\r\n\t},\r\n\r\n\t_getColumnDuration: function _get_coll_duration(scale, date) {\r\n\t\treturn this.$gantt.date.add(date, scale.step, scale.unit) - date;\r\n\t},\r\n\t_bindStore: function () {\r\n\t\tif (this.$config.bind){\r\n\t\t\tvar rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\t\t\tthis.$config.rowStore = rowStore;\r\n\t\t\tif(rowStore && !rowStore._timelineCacheAttached){\r\n\t\t\t\tvar self = this;\r\n\t\t\t\trowStore._timelineCacheAttached = rowStore.attachEvent(\"onBeforeFilter\", function(){\r\n\t\t\t\t\tself._resetTopPositionHeight();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_unbindStore: function(){\r\n\t\tif (this.$config.bind){\r\n\t\t\tvar rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\t\t\tif(rowStore && rowStore._timelineCacheAttached){\r\n\t\t\t\trowStore.detachEvent(rowStore._timelineCacheAttached);\r\n\t\t\t\trowStore._timelineCacheAttached = false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\trefresh: function(){\r\n\t\tthis._bindStore();\r\n\r\n\t\tif(this.$config.bindLinks) {\r\n\t\t\tthis.$config.linkStore = this.$gantt.getDatastore(this.$config.bindLinks);\r\n\t\t}\r\n\r\n\t\tthis._resetTopPositionHeight();\r\n\t\tthis._resetHeight();\r\n\t\tthis._initStaticBackgroundRender();\r\n\t\tthis._render_tasks_scales();\r\n\t},\r\n\r\n\tdestructor: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tthis._clearLayers(gantt);\r\n\t\tthis._unbindStore();\r\n\t\tthis.$task = null;\r\n\t\tthis.$task_scale = null;\r\n\t\tthis.$task_data = null;\r\n\t\tthis.$task_bg = null;\r\n\t\tthis.$task_links = null;\r\n\t\tthis.$task_bars = null;\r\n\r\n\t\tthis.$gantt = null;\r\n\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tthis.$config.rowStore.detachEvent(this._staticBgHandler);\r\n\t\t\tthis.$config.rowStore = null;\r\n\t\t}\r\n\t\tif(this.$config.linkStore){\r\n\t\t\tthis.$config.linkStore = null;\r\n\t\t}\r\n\r\n\t\tif(this._timelineDragScroll) {\r\n\t\t\tthis._timelineDragScroll.destructor();\r\n\t\t\tthis._timelineDragScroll = null;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\r\n\t}\r\n};\r\n\r\nexport default Timeline;","\r\nexport default function(){\r\n\tvar self = this;\r\n\tvar taskFilter = function(){\r\n\t\treturn self.isVisible();\r\n\t};\r\n\r\n\tvar barVisible = function(id, task){\r\n\t\treturn !task.hide_bar;\r\n\t};\r\n\r\n\tconst gantt = this.$gantt;\r\n\r\n\tvar taskLayers = [\r\n\t\t{\r\n\t\t\texpose: true,\r\n\t\t\trenderer: this.$gantt.$ui.layers.taskBar(),\r\n\t\t\tcontainer: this.$task_bars,\r\n\t\t\tfilter: [taskFilter, barVisible]\r\n\t\t}\r\n\t];\r\n\r\n\ttaskLayers.push({\r\n\t\trenderer: this.$gantt.$ui.layers.taskBg(),\r\n\t\tcontainer: this.$task_bg,\r\n\t\tfilter: [\r\n\t\t\t//function(){\r\n\t\t\t//\treturn !self.$getConfig().static_background;\r\n\t\t\t//},\r\n\t\t\ttaskFilter\r\n\t\t]\r\n\t});\r\n\r\n\tvar linkLayers = [\r\n\t\t{\r\n\t\t\texpose: true,\r\n\t\t\trenderer: this.$gantt.$ui.layers.link(),\r\n\t\t\tcontainer: this.$task_links,\r\n\t\t\tfilter: [taskFilter]\r\n\t\t}\r\n\t];\r\n\r\n\treturn {\r\n\t\ttasks: taskLayers,\r\n\t\tlinks: linkLayers\r\n\t};\r\n\r\n};","const SENSITIVITY = 20;\r\nconst TIMEOUT = 50;\r\nconst SCROLLSTEP = 10;\r\n\r\nexport default class ScrollableGrid {\r\n\tpublic getCurrentX;\r\n\tprivate $gantt;\r\n\tprivate $grid;\r\n\tprivate _dnd;\r\n\tprivate _scrollView;\r\n\tprivate _scrollOrder: 0 | 1 | -1 = 0;\r\n\r\n\tconstructor(params) {\r\n\t\tconst {gantt, grid, dnd, getCurrentX} = params;\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis.$grid = grid;\r\n\t\tthis._dnd = dnd;\r\n\t\tthis.getCurrentX = getCurrentX;\r\n\t\tthis._scrollView = this.$gantt.$ui.getView(this.$grid.$config.scrollX);\r\n\t\tthis.attachEvents();\r\n\t}\r\n\tattachEvents() {\r\n\t\tif (this.isScrollable()) {\r\n\t\t\tthis._dnd.attachEvent(\"onDragMove\", (obj, e) => {\r\n\t\t\t\tconst gridBoundingRect = this.$grid.$grid.getBoundingClientRect();\r\n\t\t\t\tconst maxLeft = gridBoundingRect.right;\r\n\t\t\t\tconst minLeft = gridBoundingRect.left;\r\n\t\t\t\tconst currentX = this.getCurrentX(e.clientX);\r\n\r\n\t\t\t\tif (currentX >= maxLeft - SENSITIVITY) {\r\n\t\t\t\t\tthis.autoscrollRight();\r\n\t\t\t\t\tthis.autoscrollStart();\r\n\t\t\t\t}\r\n\t\t\t\tif (currentX <= minLeft + SENSITIVITY) {\r\n\t\t\t\t\tthis.autoscrollLeft();\r\n\t\t\t\t\tthis.autoscrollStart();\r\n\t\t\t\t}\r\n\t\t\t\tif (currentX < maxLeft - SENSITIVITY && currentX > minLeft + SENSITIVITY) {\r\n\t\t\t\t\tthis.autoscrollStop();\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t\tthis._dnd.attachEvent(\"onDragEnd\", () => {\r\n\t\t\t\tthis.autoscrollStop();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tautoscrollStart() {\r\n\t\tif (this._scrollOrder === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst scrollStep = SCROLLSTEP * this._scrollOrder;\r\n\t\tconst scrollState = this._scrollView.getScrollState();\r\n\t\tthis._scrollView.scrollTo(scrollState.position + scrollStep);\r\n\t\tsetTimeout(() => { this.autoscrollStart(); }, TIMEOUT);\r\n\t}\r\n\tautoscrollRight() {\r\n\t\tthis._scrollOrder = 1;\r\n\t}\r\n\tautoscrollLeft() {\r\n\t\tthis._scrollOrder = -1;\r\n\t}\r\n\tautoscrollStop() {\r\n\t\tthis._scrollOrder = 0;\r\n\t}\r\n\tgetCorrection() {\r\n\t\tif (!this.isScrollable()) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\treturn this._scrollView.getScrollState().position;\r\n\t}\r\n\tisScrollable() {\r\n\t\treturn !!this.$grid.$config.scrollable;\r\n\t}\r\n}","import * as domHelpers from \"../../utils/dom_helpers\";\r\nimport ScrollableGrid from \"./scrollable_grid\";\r\n\r\nconst COLUMN_ID_ATTR_NAME = \"data-column-id\";\r\n\r\nexport class ColumnsGridDnd {\r\n\tprivate $gantt;\r\n\tprivate $grid;\r\n\tprivate _dragX;\r\n\tprivate _dnd;\r\n\tprivate _originAutoscroll;\r\n\tprivate _scrollableGrid: ScrollableGrid;\r\n\tprivate _draggedCell;\r\n\tprivate _targetMarker = null;\r\n\tprivate _gridConfig;\r\n\tconstructor(gantt, grid) {\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis.$grid = grid;\r\n\t}\r\n\tinit() {\r\n\t\tconst DND = this.$gantt.$services.getService(\"dnd\");\r\n\t\tthis._dnd = new DND(this.$grid.$grid_scale, { updates_per_second: 60 });\r\n\t\tthis._scrollableGrid = new ScrollableGrid({\r\n\t\t\tgantt: this.$gantt,\r\n\t\t\tgrid: this.$grid,\r\n\t\t\tdnd: this._dnd,\r\n\t\t\tgetCurrentX: this.calculateCurrentPosition\r\n\t\t});\r\n\t\tthis.attachEvents();\r\n\t}\r\n\tattachEvents() {\r\n\t\tthis._dnd.attachEvent(\"onBeforeDragStart\", (obj, e) => {\r\n\t\t\tthis._draggedCell = this.$gantt.utils.dom.closest(e.target, \".gantt_grid_head_cell\");\r\n\t\t\tif(!this._draggedCell){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst columns = this.$grid.$getConfig().columns;\r\n\t\t\tconst columnName = this._draggedCell.getAttribute(COLUMN_ID_ATTR_NAME);\r\n\t\t\tlet draggedColumn;\r\n\t\t\tlet draggedIndex;\r\n\t\t\tcolumns.map(function(column, index){\r\n\t\t\t\tif(column.name === columnName){\r\n\t\t\t\t\tdraggedColumn = column;\r\n\t\t\t\t\tdraggedIndex = index;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (this.$grid.callEvent(\"onBeforeColumnDragStart\", [{ draggedColumn, draggedIndex}]) === false) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (!this._draggedCell || !draggedColumn) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tthis._gridConfig = this.$grid.$getConfig();\r\n\t\t\tthis._originAutoscroll = this.$gantt.config.autoscroll;\r\n\t\t\tthis.$gantt.config.autoscroll = false;\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tthis._dnd.attachEvent(\"onAfterDragStart\", (obj, e) => {\r\n\t\t\tif (!this._draggedCell) {\r\n\t\t\t\treturn; // GS-1333: don't try to reorder a column when we resize it\r\n\t\t\t}\r\n\t\t\tthis._dnd.config.column = this._draggedCell.getAttribute(COLUMN_ID_ATTR_NAME);\r\n\t\t\tthis._dnd.config.marker.innerHTML = this._draggedCell.outerHTML;\r\n\t\t\tthis._dnd.config.marker.classList.add(\"gantt_column_drag_marker\");\r\n\t\t\tthis._dnd.config.marker.style.height = this._gridConfig.scale_height + \"px\";\r\n\t\t\tthis._dnd.config.marker.style.lineHeight = this._gridConfig.scale_height + \"px\";\r\n\t\t\tthis._draggedCell.classList.add(\"gantt_grid_head_cell_dragged\");\r\n\t\t});\r\n\r\n\t\tthis._dnd.attachEvent(\"onDragMove\", (obj, e) => {\r\n\t\t\tif(!this._draggedCell){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis._dragX = e.clientX;\r\n\t\t\tconst x = this.calculateCurrentPosition(e.clientX);\r\n\t\t\tconst columnIndexes = this.findColumnsIndexes();\r\n\t\t\tthis.setMarkerPosition(x);\r\n\t\t\tthis.drawTargetMarker(columnIndexes);\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tthis._dnd.attachEvent(\"onDragEnd\", () => {\r\n\t\t\tif (!this._draggedCell) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst columnIndexes = this.findColumnsIndexes();\r\n\t\t\tconst targetIndex = columnIndexes.targetIndex;\r\n\t\t\tconst draggedIndex = columnIndexes.draggedIndex;\r\n\t\t\tconst columns = this.$grid.$getConfig().columns;\r\n\r\n\t\t\tconst draggedColumn = columns[draggedIndex];\r\n\t\t\tconst targetColumn = columns[targetIndex];\r\n\t\t\tif (this.$grid.callEvent(\"onColumnDragMove\", [{ draggedColumn, targetColumn, draggedIndex, targetIndex }]) === false) {\r\n\t\t\t\tthis.cleanTargetMarker();\r\n\t\t\t\tthis.$gantt.render();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$gantt.config.autoscroll = this._originAutoscroll;\r\n\t\t\tthis._draggedCell.classList.remove(\"gantt_grid_head_cell_dragged\");\r\n\t\t\tthis.cleanTargetMarker();\r\n\t\t\tthis.reorderColumns();\r\n\t\t});\r\n\r\n\t}\r\n\treorderColumns() {\r\n\t\tconst { targetIndex, draggedIndex } = this.findColumnsIndexes();\r\n\r\n\t\tconst columns = this.$grid.$getConfig().columns;\r\n\t\tconst draggedColumn = columns[draggedIndex];\r\n\t\tconst targetColumn = columns[targetIndex];\r\n\r\n\t\tif (this.$grid.callEvent(\"onBeforeColumnReorder\", [{ draggedColumn, targetColumn, draggedIndex, targetIndex }]) === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (targetIndex === draggedIndex) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tcolumns.splice(draggedIndex, 1);\r\n\t\tcolumns.splice(targetIndex, 0, draggedColumn);\r\n\t\tthis.$gantt.render();\r\n\t\tthis.$grid.callEvent(\"onAfterColumnReorder\", [{ draggedColumn, targetColumn, draggedIndex, targetIndex }]);\r\n\t}\r\n\tfindColumnsIndexes() {\r\n\t\tconst draggedId = this._dnd.config.column;\r\n\t\tconst columns = this.$grid.$getConfig().columns;\r\n\t\tlet targetIndex: number;\r\n\t\tlet draggedIndex: number;\r\n\t\tlet xBefore: number;\r\n\t\tlet xAfter: number;\r\n\t\tconst currentColumn = { startX: 0, endX: 0 };\r\n\r\n\t\tlet start = 0;\r\n\t\tlet end = columns.length - 1;\r\n\t\tlet compare = (a, b) => a <= b;\r\n\t\tlet next = (index) => ++index;\r\n\t\tif (this.$gantt.config.rtl) {\r\n\t\t\tstart = columns.length - 1;\r\n\t\t\tend = 0;\r\n\t\t\tcompare = (a, b) => a >= b;\r\n\t\t\tnext = (index) => --index;\r\n\t\t}\r\n\r\n\t\tlet columnRelativePos: number;\r\n\r\n\t\tconst relativeX = this._dragX - this.$grid.$grid.getBoundingClientRect().left + this._scrollableGrid.getCorrection();\r\n\t\tfor (let i = start; compare(i, end); i = next(i)) {\r\n\t\t\tif (targetIndex !== undefined && draggedIndex !== undefined) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif(!columns[i].hide) {\r\n\t\t\t\tcurrentColumn.startX = currentColumn.endX;\r\n\t\t\t\tcurrentColumn.endX += columns[i].width;\r\n\r\n\t\t\t\t// if drop on a column or drop after the last column\r\n\t\t\t\tif (relativeX >= currentColumn.startX && (relativeX <= currentColumn.endX || !compare(next(i), end))) {\r\n\t\t\t\t\ttargetIndex = i;\r\n\t\t\t\t\txBefore = currentColumn.startX;\r\n\t\t\t\t\txAfter = currentColumn.endX;\r\n\t\t\t\t\tcolumnRelativePos = (relativeX - currentColumn.startX) / (currentColumn.endX - currentColumn.startX);\r\n\t\t\t\t}\r\n\t\t\t\tif (draggedId === columns[i].name) {\r\n\t\t\t\t\tdraggedIndex = i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttargetIndex,\r\n\t\t\tdraggedIndex,\r\n\t\t\txBefore,\r\n\t\t\txAfter,\r\n\t\t\tcolumnRelativePos\r\n\t\t};\r\n\t}\r\n\tsetMarkerPosition(x: number, y: number = 10) {\r\n\t\tconst { marker } = this._dnd.config;\r\n\t\tconst gridOffset = this._dnd._obj.getBoundingClientRect();\r\n\t\tmarker.style.top = `${gridOffset.y + y}px`;\r\n\t\tmarker.style.left = `${x}px`;\r\n\t}\r\n\tcalculateCurrentPosition = (eventX: number) => {\r\n\t\tconst gridBoundingRect = this.$grid.$grid.getBoundingClientRect();\r\n\t\tconst maxLeft = gridBoundingRect.right;\r\n\t\tconst minLeft = gridBoundingRect.left;\r\n\t\tlet x = eventX;\r\n\t\tif (x > maxLeft) {\r\n\t\t\tx = maxLeft;\r\n\t\t}\r\n\t\tif (x < minLeft) {\r\n\t\t\tx = minLeft;\r\n\t\t}\r\n\t\treturn x;\r\n\t};\r\n\tdrawTargetMarker({ targetIndex, draggedIndex, xBefore, xAfter, columnRelativePos }) {\r\n\t\tif (!this._targetMarker) {\r\n\t\t\tthis._targetMarker = document.createElement(\"div\");\r\n\t\t\tdomHelpers.addClassName(this._targetMarker, \"gantt_grid_target_marker\");\r\n\t\t\tthis._targetMarker.style.display = \"none\";\r\n\t\t\tthis._targetMarker.style.height = `${this._gridConfig.scale_height}px`;\r\n\t\t}\r\n\r\n\t\t// marker can be detached after gantt.render\r\n\t\tif(!this._targetMarker.parentNode){\r\n\t\t\tthis.$grid.$grid_scale.appendChild(this._targetMarker);\r\n\t\t}\r\n\r\n\t\tlet nextPosition: number;\r\n\t\tif (targetIndex > draggedIndex) {\r\n\t\t\tnextPosition = xAfter;\r\n\t\t} else if (targetIndex < draggedIndex) {\r\n\t\t\tnextPosition = xBefore;\r\n\t\t} else {\r\n\t\t\tif(columnRelativePos > 0.5){\r\n\t\t\t\tnextPosition = xAfter;\r\n\t\t\t}else{\r\n\t\t\t\tnextPosition = xBefore;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._targetMarker.style.left = `${nextPosition}px`;\r\n\t\tthis._targetMarker.style.display = \"block\";\r\n\t}\r\n\tcleanTargetMarker() {\r\n\t\tif (this._targetMarker && this._targetMarker.parentNode) {\r\n\t\t\tthis.$grid.$grid_scale.removeChild(this._targetMarker);\r\n\t\t}\r\n\t\tthis._targetMarker = null;\r\n\t}\r\n}","function create(gantt){\r\n\tvar events = [];\r\n\r\n\treturn {\r\n\t\tdelegate:function(event, className, handler, root) {\r\n\t\t\tevents.push([event, className, handler, root]);\r\n\r\n\t\t\tvar helper = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\thelper.delegate(event, className, handler, root);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\tfor(var i = 0; i < events.length; i++){\r\n\t\t\t\tvar h = events[i];\r\n\t\t\t\tmouseEvents.detach(h[0], h[1], h[2], h[3]);\r\n\t\t\t}\r\n\t\t\tevents = [];\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport default create;","import * as domHelpers from \"../utils/dom_helpers\";\r\nimport * as utils from \"../../../utils/utils\";\r\nimport eventable from \"../../../utils/eventable\";\r\nimport gridResize from \"./grid_resize\";\r\nimport topPositionMixin from \"../row_position_mixin\";\r\nimport rowResize from \"./task_grid_row_resize\";\r\n\r\nimport ColumnDnd from \"../plugins/column_grid_dnd\";\r\n\r\nimport mouseEventContainer from \"../mouse_event_container\";\r\n\r\nvar Grid = function (parent, config, factory, gantt) {\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$gantt = gantt;\r\n\tthis.$parent = parent;\r\n\teventable(this);\r\n\tthis.$state = {};\r\n\tutils.mixin(this, topPositionMixin(this));\r\n};\r\n\r\n\r\nGrid.prototype = {\r\n\tinit: function(container) {\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar gridAriaAttr = gantt._waiAria.gridAttrString();\r\n\t\tvar gridDataAriaAttr = gantt._waiAria.gridDataAttrString();\r\n\t\tvar _ganttConfig = this.$getConfig();\r\n\t\tvar reorderColumns = _ganttConfig.reorder_grid_columns || false;\r\n\t\tif (this.$config.reorder_grid_columns !== undefined) {\r\n\t\t\treorderColumns = this.$config.reorder_grid_columns;\r\n\t\t}\r\n\r\n\r\n\t\tcontainer.innerHTML = \"<div class='gantt_grid' style='height:inherit;width:inherit;' \" + gridAriaAttr + \"></div>\";\r\n\t\tthis.$grid = container.childNodes[0];\r\n\r\n\t\tthis.$grid.innerHTML = \"<div class='gantt_grid_scale' \" +\r\n\t\t\tgantt._waiAria.gridScaleRowAttrString() + \"></div><div class='gantt_grid_data' \" + gridDataAriaAttr + \"></div>\";\r\n\r\n\t\tthis.$grid_scale = this.$grid.childNodes[0];\r\n\t\tthis.$grid_data = this.$grid.childNodes[1];\r\n\r\n\t\tvar attr = _ganttConfig[this.$config.bind + \"_attribute\"];\r\n\t\tif (!attr && this.$config.bind) {\r\n\t\t\tattr = \"data-\" + this.$config.bind + \"-id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\r\n\t\tif (!this.$config.layers) {\r\n\t\t\tvar layers = this._createLayerConfig();\r\n\t\t\tthis.$config.layers = layers;\r\n\t\t}\r\n\r\n\t\tvar resizer = gridResize(gantt, this);\r\n\t\tresizer.init();\r\n\t\tthis._renderHeaderResizers = resizer.doOnRender;\r\n\t\tthis._mouseDelegates = mouseEventContainer(gantt);\r\n\r\n\t\tvar resizerrow = rowResize(gantt, this);\r\n\t\tresizerrow.init();\r\n\r\n\t\tthis._addLayers(this.$gantt);\r\n\t\tthis._initEvents();\r\n\r\n\t\tif (reorderColumns) {\r\n\t\t\tthis._columnDND = new ColumnDnd(gantt, this);\r\n\t\t\tthis._columnDND.init();\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t},\r\n\r\n\t_validateColumnWidth: function (column, property) {\r\n\t\t// user can set {name:\"text\", width:\"200\",...} for some reason,\r\n\t\t// check and convert it to number when possible\r\n\t\tvar value = column[property];\r\n\t\tif (value && value != \"*\") {\r\n\t\t\tvar gantt = this.$gantt;\r\n\t\t\tvar numericWidth = value * 1;\r\n\t\t\tif (isNaN(numericWidth)) {\r\n\t\t\t\tgantt.assert(false, \"Wrong \" + property + \" value of column \" + column.name);\r\n\t\t\t} else {\r\n\t\t\t\tcolumn[property] = numericWidth;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tsetSize: function (width, height) {\r\n\t\tthis.$config.width = this.$state.width = width;\r\n\t\tthis.$config.height = this.$state.height = height;\r\n\r\n\t\t// TODO: maybe inherit and override in a subclass instead of extending here\r\n\r\n\t\tvar columns = this.getGridColumns(),\r\n\t\t\tinnerWidth = 0;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar elasticColumns = config.grid_elastic_columns;\r\n\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tthis._validateColumnWidth(columns[i], \"min_width\");\r\n\t\t\tthis._validateColumnWidth(columns[i], \"max_width\");\r\n\t\t\tthis._validateColumnWidth(columns[i], \"width\");\r\n\r\n\t\t\tinnerWidth += columns[i].width * 1;\r\n\t\t}\r\n\r\n\t\tvar outerWidth;\r\n\t\tif (isNaN(innerWidth) || !this.$config.scrollable) {\r\n\t\t\touterWidth = this._setColumnsWidth(width + 1);\r\n\t\t\tinnerWidth = outerWidth;\r\n\t\t}\r\n\r\n\t\tif(this.$config.scrollable && elasticColumns && !isNaN(innerWidth)){\r\n\t\t\t// GS-1352: Allow resizing the grid columns, then the grid width is increased\r\n\t\t\t// or keep the grid width, but don't allow column resize to affect the grid width\r\n\t\t\tlet columnProperty = \"width\";\r\n\t\t\tif (elasticColumns == \"min_width\"){\r\n\t\t\t\tcolumnProperty = \"min_width\";\r\n\t\t\t}\r\n\t\t\tlet newColumnWidth = 0;\r\n\t\t\tcolumns.forEach(function(col){\r\n\t\t\t\tnewColumnWidth += col[columnProperty] || config.min_grid_column_width;\r\n\t\t\t});\r\n\t\t\t//newColumnWidth--; // the total column width shouldn't match the outerWidth // GS-2190 reducing width seems to be not needed\r\n\t\t\tvar columnsWidth = Math.max(newColumnWidth, width);\r\n\t\t\tinnerWidth = this._setColumnsWidth(columnsWidth);\r\n\t\t\touterWidth = width;\r\n\t\t}\r\n\r\n\t\tif (this.$config.scrollable) {\r\n\t\t\tthis.$grid_scale.style.width = innerWidth + \"px\";\r\n\t\t\tthis.$grid_data.style.width = innerWidth + \"px\";\r\n\t\t} else {\r\n\t\t\tthis.$grid_scale.style.width = \"inherit\";\r\n\t\t\tthis.$grid_data.style.width = \"inherit\";\r\n\t\t}\r\n\t\tthis.$config.width -= 1;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif (outerWidth !== width) {\r\n\t\t\tif(outerWidth !== undefined){\r\n\t\t\t\tconfig.grid_width = outerWidth;\r\n\t\t\t\tthis.$config.width = outerWidth - 1;\r\n\t\t\t}else{\r\n\t\t\t\tif(!isNaN(innerWidth)){\r\n\t\t\t\t\tthis._setColumnsWidth(innerWidth);\r\n\t\t\t\t\tconfig.grid_width = innerWidth;\r\n\t\t\t\t\tthis.$config.width = innerWidth - 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar dataHeight = Math.max(this.$state.height - config.scale_height, 0);\r\n\t\tthis.$grid_data.style.height = dataHeight + \"px\";\r\n\t\tthis.refresh();\r\n\t},\r\n\tgetSize: function () {\r\n\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar store = this.$config.rowStore;\r\n\r\n\t\tvar contentHeight = store ? this.getTotalHeight() : 0,\r\n\t\t\tcontentWidth = this._getGridWidth();\r\n\r\n\t\tvar size = {\r\n\t\t\tx: this.$state.width,\r\n\t\t\ty: this.$state.height,\r\n\t\t\tcontentX: this.isVisible() ? contentWidth : 0,\r\n\t\t\tcontentY: this.isVisible() ? (config.scale_height + contentHeight) : 0,\r\n\t\t\tscrollHeight: this.isVisible() ? contentHeight : 0,\r\n\t\t\tscrollWidth: this.isVisible() ? contentWidth : 0\r\n\t\t};\r\n\r\n\t\treturn size;\r\n\t},\r\n\r\n\t_bindStore: function () {\r\n\t\tif (this.$config.bind){\r\n\t\t\tvar rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\t\t\tthis.$config.rowStore = rowStore;\r\n\t\t\tif(rowStore && !rowStore._gridCacheAttached){\r\n\t\t\t\tvar self = this;\r\n\t\t\t\trowStore._gridCacheAttached = rowStore.attachEvent(\"onBeforeFilter\", function(){\r\n\t\t\t\t\tself._resetTopPositionHeight();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_unbindStore: function(){\r\n\t\tif (this.$config.bind){\r\n\t\t\tvar rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\t\t\tif(rowStore && rowStore._gridCacheAttached){\r\n\t\t\t\trowStore.detachEvent(rowStore._gridCacheAttached);\r\n\t\t\t\trowStore._gridCacheAttached = false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\trefresh: function () {\r\n\t\tthis._bindStore();\r\n\r\n\t\tthis._resetTopPositionHeight();\r\n\t\tthis._resetHeight();\r\n\t\tthis._initSmartRenderingPlaceholder();\r\n\r\n\t\tthis._calculateGridWidth();\r\n\t\tthis._renderGridHeader();\r\n\t},\r\n\r\n\tgetViewPort: function(){\r\n\t\tvar scrollLeft = this.$config.scrollLeft || 0;\r\n\t\tvar scrollTop = this.$config.scrollTop || 0;\r\n\t\tvar height = this.$config.height || 0;\r\n\t\tvar width = this.$config.width || 0;\r\n\t\treturn {\r\n\t\t\ty: scrollTop,\r\n\t\t\ty_end: scrollTop + height,\r\n\t\t\tx: scrollLeft,\r\n\t\t\tx_end: scrollLeft + width,\r\n\t\t\theight: height,\r\n\t\t\twidth: width\r\n\t\t};\r\n\t},\r\n\r\n\tscrollTo: function (left, top) {\r\n\t\tif (!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tvar scrolled = false;\r\n\r\n\t\tthis.$config.scrollTop = this.$config.scrollTop || 0;\r\n\t\tthis.$config.scrollLeft = this.$config.scrollLeft || 0;\r\n\r\n\t\tif (left * 1 == left) {\r\n\t\t\tthis.$config.scrollLeft = this.$state.scrollLeft = this.$grid.scrollLeft = left;\r\n\t\t\tscrolled = true;\r\n\t\t}\r\n\r\n\t\t// var config = this.$getConfig();\r\n\t\tif (top * 1 == top) {\r\n\t\t\tthis.$config.scrollTop = this.$state.scrollTop = this.$grid_data.scrollTop = top;\r\n\t\t\tscrolled = true;\r\n\t\t}\r\n\r\n\t\tif(scrolled){\r\n\t\t\tthis.callEvent(\"onScroll\", [this.$config.scrollLeft, this.$config.scrollTop]);\r\n\t\t}\r\n\t},\r\n\r\n\tgetColumnIndex: function (name, excludeHidden) {\r\n\t\tvar columns = this.$getConfig().columns;\r\n\t\tvar hiddenIndexShift = 0;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\t// GS-1257. If the cell is hidden, the target column index should be correct\r\n\t\t\tif (excludeHidden && columns[i].hide){\r\n\t\t\t\thiddenIndexShift++;\r\n\t\t\t}\r\n\t\t\tif (columns[i].name == name) {\r\n\t\t\t\treturn i - hiddenIndexShift;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\tgetColumn: function (name) {\r\n\t\tvar index = this.getColumnIndex(name);\r\n\t\tif (index === null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn this.$getConfig().columns[index];\r\n\t},\r\n\r\n\tgetGridColumns: function () {\r\n\t\tvar config = this.$getConfig();\r\n\t\treturn config.columns.slice();\r\n\t},\r\n\tisVisible: function () {\r\n\t\tif (this.$parent && this.$parent.$config) {\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t} else {\r\n\t\t\treturn this.$grid.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\t// getItemHeight: function () {\r\n\t// \tvar config = this.$getConfig();\r\n\t// \treturn config.row_height;\r\n\t// },\r\n\r\n\t_createLayerConfig: function () {\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar self = this;\r\n\t\tvar layers = [\r\n\t\t\t{\r\n\t\t\t\trenderer: gantt.$ui.layers.gridLine(),\r\n\t\t\t\tcontainer: this.$grid_data,\r\n\t\t\t\tfilter: [function () {\r\n\t\t\t\t\treturn self.isVisible();\r\n\t\t\t\t}]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\trenderer: gantt.$ui.layers.gridTaskRowResizer(),\r\n\t\t\t\tcontainer: this.$grid_data,\r\n\t\t\t\tappend: true,\r\n\t\t\t\tfilter: [function () {\r\n\t\t\t\t\treturn gantt.config.resize_rows;\r\n\t\t\t\t}]\r\n\t\t\t}\r\n\t\t];\r\n\t\treturn layers;\r\n\t},\r\n\r\n\t_addLayers: function (gantt) {\r\n\t\tif (!this.$config.bind)\r\n\t\t\treturn;\r\n\r\n\t\tthis._taskLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tif (!taskRenderer) {\r\n\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\tname: this.$config.bind,\r\n\t\t\t\tdefaultContainer: function () { return self.$grid_data; }\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar taskLayers = this.$config.layers;\r\n\t\tfor (var i = 0; taskLayers && i < taskLayers.length; i++) {\r\n\t\t\tvar layer = taskLayers[i];\r\n\t\t\tlayer.view = this;\r\n\r\n\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t}\r\n\r\n\t\tthis._bindStore();\r\n\r\n\t\tthis._initSmartRenderingPlaceholder();\r\n\t},\r\n\r\n\t_refreshPlaceholderOnStoreUpdate: function (id) {\r\n\t\tvar config = this.$getConfig(),\r\n\t\t\tstore = this.$config.rowStore;\r\n\r\n\t\tif (!store || id !== null || !this.isVisible() || !config.smart_rendering) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar contentHeight;\r\n\t\tif (this.$config.scrollY) {\r\n\t\t\tvar scroll = this.$gantt.$ui.getView(this.$config.scrollY);\r\n\t\t\tif (scroll)\r\n\t\t\t\tcontentHeight = scroll.getScrollState().scrollSize;\r\n\t\t}\r\n\r\n\t\tif (!contentHeight) {\r\n\t\t\tcontentHeight = store ? this.getTotalHeight() : 0;\r\n\t\t}\r\n\r\n\t\tif (contentHeight) {\r\n\t\t\tif (this.$rowsPlaceholder && this.$rowsPlaceholder.parentNode) {\r\n\t\t\t\tthis.$rowsPlaceholder.parentNode.removeChild(this.$rowsPlaceholder);\r\n\t\t\t}\r\n\r\n\t\t\tvar placeholder = this.$rowsPlaceholder = document.createElement(\"div\");\r\n\t\t\tplaceholder.style.visibility = \"hidden\";\r\n\t\t\tplaceholder.style.height = contentHeight + \"px\";\r\n\t\t\tplaceholder.style.width = \"1px\";\r\n\t\t\tthis.$grid_data.appendChild(placeholder);\r\n\t\t}\r\n\t},\r\n\r\n\t_initSmartRenderingPlaceholder: function () {\r\n\t\tvar store = this.$config.rowStore;\r\n\t\tif (!store) {\r\n\t\t\treturn;\r\n\t\t} else {\r\n\t\t\tthis._initSmartRenderingPlaceholder = function () { };\r\n\t\t}\r\n\t\tthis._staticBgHandler = store.attachEvent(\"onStoreUpdated\", utils.bind(this._refreshPlaceholderOnStoreUpdate, this));\r\n\t},\r\n\r\n\t_initEvents: function () {\r\n\t\tvar gantt = this.$gantt;\r\n\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_close\", gantt.bind(function (e, id, trg) {\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif (!store) return true;\r\n\r\n\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\tif (target) {\r\n\t\t\t\tstore.close(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}, this), this.$grid);\r\n\r\n\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_open\", gantt.bind(function (e, id, trg) {\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif (!store) return true;\r\n\r\n\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\tif (target) {\r\n\t\t\t\tstore.open(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}, this), this.$grid);\r\n\t},\r\n\r\n\t_clearLayers: function (gantt) {\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tif (this._taskLayers) {\r\n\t\t\tfor (var i = 0; i < this._taskLayers.length; i++) {\r\n\t\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_getColumnWidth: function (column, config, width) {\r\n\t\tvar min_width = column.min_width || config.min_grid_column_width;\r\n\t\tvar new_width = Math.max(width, min_width || 10);\r\n\t\tif (column.max_width)\r\n\t\t\tnew_width = Math.min(new_width, column.max_width);\r\n\t\treturn new_width;\r\n\t},\r\n\t// set min width only if width < than config.min_grid_column_width\r\n\t_checkGridColumnMinWidthLimits: function (columns, config) {\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tvar width = columns[i].width * 1;\r\n\t\t\tif (!columns[i].min_width && width < config.min_grid_column_width){\r\n\t\t\t\tcolumns[i].min_width = width;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t// return min and max possible grid width according to restricts\r\n\t_getGridWidthLimits: function () {\r\n\t\tvar config = this.$getConfig(),\r\n\t\t\tcolumns = this.getGridColumns(),\r\n\t\t\tmin_limit = 0,\r\n\t\t\tmax_limit = 0;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tmin_limit += columns[i].min_width ? columns[i].min_width : config.min_grid_column_width;\r\n\t\t\tif (max_limit !== undefined) {\r\n\t\t\t\tmax_limit = columns[i].max_width ? (max_limit + columns[i].max_width) : undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._checkGridColumnMinWidthLimits(columns, config); // FIX ME: should it be before calculating limits?\r\n\t\treturn [min_limit, max_limit];\r\n\t},\r\n\t// resize columns to get total newWidth, starting from columns[start_index]\r\n\t_setColumnsWidth: function (newWidth, start_index) {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns(),\r\n\t\t\tcolumns_width = 0,\r\n\t\t\tfinal_width = newWidth;\r\n\r\n\t\tstart_index = !window.isNaN(start_index) ? start_index : -1;\r\n\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tcolumns_width += columns[i].width * 1;\r\n\t\t}\r\n\r\n\t\tif (window.isNaN(columns_width)) {\r\n\t\t\tthis._calculateGridWidth();\r\n\t\t\tcolumns_width = 0;\r\n\t\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\t\tcolumns_width += columns[i].width * 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar extra_width = final_width - columns_width;\r\n\r\n\t\tvar start_width = 0;\r\n\t\tfor (var i = 0; i < start_index + 1; i++) {\r\n\t\t\tstart_width += columns[i].width;\r\n\t\t}\r\n\r\n\t\tcolumns_width -= start_width;\r\n\r\n\t\tfor (var i = start_index + 1; i < columns.length; i++) {\r\n\r\n\t\t\tvar col = columns[i];\r\n\t\t\tvar share = Math.round(extra_width * (col.width / columns_width));\r\n\r\n\t\t\t// columns have 2 additional restrict fields - min_width & max_width that are set by user\r\n\t\t\tif (extra_width < 0) {\r\n\t\t\t\tif (col.min_width && col.width + share < col.min_width)\r\n\t\t\t\t\tshare = col.min_width - col.width;\r\n\t\t\t\telse if (!col.min_width && config.min_grid_column_width && col.width + share < config.min_grid_column_width)\r\n\t\t\t\t\tshare = config.min_grid_column_width - col.width;\r\n\t\t\t} else if (col.max_width && col.width + share > col.max_width)\r\n\t\t\t\tshare = col.max_width - col.width;\r\n\r\n\t\t\tcolumns_width -= col.width;\r\n\t\t\tcol.width += share;\r\n\t\t\textra_width -= share;\r\n\r\n\t\t}\r\n\r\n\t\tvar iterator = extra_width > 0 ? 1 : -1;\r\n\t\twhile ((extra_width > 0 && iterator === 1) || (extra_width < 0 && iterator === -1)) {\r\n\t\t\tvar curExtra = extra_width;\r\n\t\t\tfor (i = start_index + 1; i < columns.length; i++) {\r\n\t\t\t\tvar new_width = columns[i].width + iterator;\r\n\r\n\t\t\t\tif (new_width == this._getColumnWidth(columns[i], config, new_width)) {\r\n\t\t\t\t\textra_width -= iterator;\r\n\t\t\t\t\tcolumns[i].width = new_width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!extra_width)\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (curExtra == extra_width)\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// if impossible to resize the right-side columns, resize the start column\r\n\t\tif (extra_width && start_index > -1) {\r\n\t\t\tvar new_width = columns[start_index].width + extra_width;\r\n\t\t\tif (new_width == this._getColumnWidth(columns[start_index], config, new_width))\r\n\t\t\t\tcolumns[start_index].width = new_width;\r\n\t\t}\r\n\r\n\t\t//if (this.callEvent(\"onGridResizeEnd\", [config.grid_width, final_width]) === false)\r\n\t\t//\treturn;\r\n\r\n\t\treturn this._getColsTotalWidth();\r\n\t},\r\n\r\n\t_getColsTotalWidth: function () {\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\t\treturn cols_width;\r\n\t},\r\n\t_calculateGridWidth: function () {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\t\tvar unknown = [];\r\n\t\tvar width = [];\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\tv = config.min_grid_column_width || 10;\r\n\t\t\t\tunknown.push(i);\r\n\t\t\t}\r\n\t\t\twidth[i] = v;\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\t\tvar gridWidth = this._getGridWidth() + 1;\r\n\t\tif (config.autofit || unknown.length) {\r\n\t\t\tvar diff = gridWidth - cols_width;\r\n\t\t\t// TODO: logic may be improved for proportional changing of width\r\n\r\n\t\t\t// autofit adjusts columns widths to the outer grid width\r\n\t\t\t// it doesn't makes sense if grid has inner scroll with elastic columns\r\n\t\t\tif (config.autofit && !config.grid_elastic_columns) {\r\n\t\t\t\t// delta must be added for all columns\r\n\t\t\t\tfor (var i = 0; i < width.length; i++) {\r\n\t\t\t\t\tvar delta = Math.round(diff / (width.length - i));\r\n\t\t\t\t\twidth[i] += delta;\r\n\t\t\t\t\tvar new_width = this._getColumnWidth(columns[i], config, width[i]);\r\n\r\n\t\t\t\t\tif (new_width != width[i]) {\r\n\t\t\t\t\t\tdelta = new_width - width[i];\r\n\t\t\t\t\t\twidth[i] = new_width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdiff -= delta;\r\n\t\t\t\t}\r\n\t\t\t} else if (unknown.length) {\r\n\t\t\t\t// there are several columns with undefined width\r\n\t\t\t\tfor (var i = 0; i < unknown.length; i++) {\r\n\t\t\t\t\tvar delta = Math.round(diff / (unknown.length - i)); // no float values, just integer\r\n\t\t\t\t\tvar index = unknown[i];\r\n\t\t\t\t\twidth[index] += delta;\r\n\t\t\t\t\tvar new_width = this._getColumnWidth(columns[index], config, width[index]);\r\n\t\t\t\t\tif (new_width != width[index]) {\r\n\t\t\t\t\t\tdelta = new_width - width[index];\r\n\t\t\t\t\t\twidth[index] = new_width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdiff -= delta;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < width.length; i++) {\r\n\t\t\t\tcolumns[i].width = width[i];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar changed = (gridWidth != cols_width);\r\n\t\t\tthis.$config.width = cols_width - 1;\r\n\t\t\tconfig.grid_width = cols_width;\r\n\t\t\tif (changed) {\r\n\t\t\t\tthis.$parent._setContentSize(this.$config.width, null);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_renderGridHeader: function () {\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar locale = this.$gantt.locale;\r\n\t\tvar templates = this.$gantt.templates;\r\n\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tif (config.rtl) {\r\n\t\t\tcolumns = columns.reverse();\r\n\t\t}\r\n\t\tvar cells = [];\r\n\t\tvar width = 0,\r\n\t\t\tlabels = locale.labels;\r\n\r\n\t\tvar lineHeigth = config.scale_height - 1;\r\n\r\n\t\tconst renderableComponents = {};\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\r\n\t\t\t// ensure columns have non-empty names\r\n\t\t\tif (!col.name) {\r\n\t\t\t\tcol.name = gantt.uid() + \"\";\r\n\t\t\t}\r\n\r\n\t\t\tvar colWidth = col.width * 1;\r\n\r\n\t\t\tvar gridWidth = this._getGridWidth();\r\n\t\t\tif (last && gridWidth > width + colWidth)\r\n\t\t\t\tcol.width = colWidth = gridWidth - width;\r\n\t\t\twidth += colWidth;\r\n\t\t\tvar sort = (gantt._sort && col.name == gantt._sort.name) ? (`<div data-column-id=\"${col.name}\" class=\"gantt_sort gantt_${gantt._sort.direction}\"></div>`) : \"\";\r\n\t\t\tvar cssClass = [\"gantt_grid_head_cell\",\r\n\t\t\t\t(\"gantt_grid_head_\" + col.name),\r\n\t\t\t\t(last ? \"gantt_last_cell\" : \"\"),\r\n\t\t\t\ttemplates.grid_header_class(col.name, col)].join(\" \");\r\n\r\n\t\t\tvar style = \"width:\" + (colWidth - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tvar label = (col.label || labels[\"column_\" + col.name] || labels[col.name]);\r\n\t\t\tif(typeof label === \"function\"){\r\n\t\t\t\tlabel = label.call(gantt, col.name, col);\r\n\t\t\t}\r\n\t\t\tlabel = label || \"\";\r\n\t\t\tlet componentLabel = false;\r\n\t\t\tif(gantt.config.external_render && gantt.config.external_render.isElement(label)){\r\n\t\t\t\tcomponentLabel = true;\r\n\t\t\t\trenderableComponents[col.name] = label;\r\n\t\t\t}\r\n\r\n\t\t\tvar ariaAttrs = gantt._waiAria.gridScaleCellAttrString(col, label);\r\n\r\n\t\t\tvar cell = \"<div class='\" + cssClass + \"' style='\" + style + \"' \" + ariaAttrs + \r\n\t\t\t\t\" data-column-id='\" + col.name + \"' column_id='\" + col.name + \"'\" +\r\n\t\t\t\t\" data-column-name='\" + col.name + \"' data-column-index='\" + i + \"'\" +\r\n\t\t\t\t\">\" + (!componentLabel ? label : \"<div data-component-container></div>\") + sort + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\tthis.$grid_scale.style.height = (config.scale_height) + \"px\";\r\n\t\tthis.$grid_scale.style.lineHeight = lineHeigth + \"px\";\r\n\t\t//this.$grid_scale.style.width = \"inherit\";\r\n\t\tthis.$grid_scale.innerHTML = cells.join(\"\");\r\n\t\tfor(let i in renderableComponents){\r\n\t\t\tgantt.config.external_render.renderElement(renderableComponents[i], this.$grid_scale.querySelector(\"[data-column-id='\" + i + \"'] [data-component-container]\"));\r\n\t\t}\r\n\r\n\t\tif (this._renderHeaderResizers) {\r\n\t\t\tthis._renderHeaderResizers();\r\n\t\t}\r\n\t},\r\n\r\n\t_getGridWidth: function () {\r\n\t\t// TODO: refactor/remove/comment some of _getGridWidth/this.$config.width/this.$state.width, it's not clear what they do\r\n\t\treturn this.$config.width;\r\n\t},\r\n\r\n\tdestructor: function () {\r\n\t\tthis._clearLayers(this.$gantt);\r\n\t\tif (this._mouseDelegates) {\r\n\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\tthis._mouseDelegates = null;\r\n\t\t}\r\n\t\tthis._unbindStore();\r\n\t\tthis.$grid = null;\r\n\t\tthis.$grid_scale = null;\r\n\t\tthis.$grid_data = null;\r\n\t\tthis.$gantt = null;\r\n\t\tif (this.$config.rowStore) {\r\n\t\t\tthis.$config.rowStore.detachEvent(this._staticBgHandler);\r\n\t\t\tthis.$config.rowStore = null;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t}\r\n};\r\n\r\nexport default Grid;\r\n","function createResizer(gantt, grid){\r\n\treturn {\r\n\t\tinit: function(){},\r\n\t\tdoOnRender: function(){}\r\n\t};\r\n}\r\n\r\nexport default createResizer;","import * as domHelpers from \"../utils/dom_helpers\";\r\n\r\nfunction createRowResizer(gantt, grid){\r\n\r\n\tvar _task_grid_row_resize = {\r\n\t\trow_before_start: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\t\t\tvar store = grid.$config.rowStore;\r\n\r\n\t\t\tvar el = domHelpers.locateAttribute(e, config.task_grid_row_resizer_attribute);\r\n\t\t\tif (!el) return false;\r\n\r\n\t\t\tvar row_id = this.locate(e, config.task_grid_row_resizer_attribute),\r\n\t\t\t\trow = store.getItem(row_id);\r\n\r\n\t\t\tif (grid.callEvent(\"onBeforeRowResize\", [row]) === false)\r\n\t\t\t\treturn false;\r\n\t\t}, gantt),\r\n\r\n\t\trow_after_start: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\tvar row_id = this.locate(e, config.task_grid_row_resizer_attribute);\r\n\t\t\tdnd.config.marker.innerHTML = \"\";\r\n\r\n\t\t\tdnd.config.marker.className += \" gantt_row_grid_resize_area\";\r\n\t\t\tdnd.config.marker.style.width = grid.$grid.offsetWidth + \"px\";\r\n\t\t\tdnd.config.drag_id = row_id;\r\n\r\n\t\t}, gantt),\r\n\r\n\t\trow_drag_move: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar store = grid.$config.rowStore;\r\n\t\t\tvar config = grid.$getConfig();\r\n\t\t\tvar dd = dnd.config;\r\n\t\t\tvar id = dd.drag_id,\r\n\t\t\t\titemHeight = grid.getItemHeight(id),\r\n\t\t\t\titemTop = grid.getItemTop(id) - obj.scrollTop;\r\n\t\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data),\r\n\t\t\t\tpointerPosition = parseInt(dd.marker.style.top, 10),\r\n\t\t\t\tmarkerStartPosition = itemTop + pos.y,\r\n\t\t\t\tmarker_height = 0,\r\n\t\t\t\tminPointerPosition = config.min_task_grid_row_height;\r\n\r\n\t\t\tmarker_height = pointerPosition - markerStartPosition;\r\n\t\t\tif(marker_height < minPointerPosition){\r\n\t\t\t\tmarker_height = minPointerPosition;\r\n\t\t\t}\r\n\r\n\t\t\tdd.marker.style.left = pos.x + \"px\";\r\n\t\t\tdd.marker.style.top = markerStartPosition - 1 + \"px\";\r\n\t\t\tdd.marker.style.height = Math.abs(marker_height) + 1 + \"px\";\r\n\r\n\t\t\tdd.marker_height = marker_height;\r\n\t\t\t\r\n\t\t\tgrid.callEvent(\"onRowResize\", [id, store.getItem(id), marker_height + itemHeight]);\r\n\t\t\treturn true;\r\n\t\t}, gantt),\r\n\r\n\t\trow_drag_end: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar store = grid.$config.rowStore;\r\n\t\t\tvar dd = dnd.config;\r\n\t\t\tvar id = dd.drag_id,\r\n\t\t\t\titem = store.getItem(id),\r\n\t\t\t\toldItemHeight = grid.getItemHeight(id);\r\n\r\n\t\t\tvar finalHeight = dd.marker_height;\r\n\r\n\t\t\tif (grid.callEvent(\"onBeforeRowResizeEnd\", [id, item, finalHeight]) === false)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (item.row_height == finalHeight)\r\n\t\t\t\treturn;\r\n\r\n\t\t\titem.row_height = finalHeight;\r\n\t\t\t// GS-2275: case for resizing resource grid row and others\r\n\t\t\tstore.updateItem(id);\r\n\t\t\tgrid.callEvent(\"onAfterRowResize\", [id, item, oldItemHeight, finalHeight]);\r\n\r\n\t\t\tthis.render();\r\n\t\t}, gantt)\r\n\t};\r\n\r\n\t// calls the initialization of the D'n'D events for resize elements\r\n\tvar _init_resize = function () {\r\n\r\n\t\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\t\tvar config = grid.$getConfig();\r\n\r\n\t\tvar dnd = new DnD(grid.$grid_data, {updates_per_second: 60});\r\n\t\tif (gantt.defined(config.dnd_sensitivity))\r\n\t\t\tdnd.config.sensitivity = config.dnd_sensitivity;\r\n\r\n\t\tdnd.attachEvent(\"onBeforeDragStart\", function (obj, e) {\r\n\t\t\treturn _task_grid_row_resize.row_before_start(dnd, obj, e);\r\n\t\t});\r\n\t\tdnd.attachEvent(\"onAfterDragStart\", function (obj, e) {\r\n\t\t\treturn _task_grid_row_resize.row_after_start(dnd, obj, e);\r\n\t\t});\r\n\t\tdnd.attachEvent(\"onDragMove\", function (obj, e) {\r\n\t\t\treturn _task_grid_row_resize.row_drag_move(dnd, obj, e);\r\n\t\t});\r\n\t\tdnd.attachEvent(\"onDragEnd\", function (obj, e) {\r\n\t\t\treturn _task_grid_row_resize.row_drag_end(dnd, obj, e);\r\n\t\t});\r\n\r\n\t};\r\n\r\n\treturn {\r\n\t\tinit: _init_resize\r\n\t};\r\n}\r\n\r\nexport default createRowResizer;","export default {\r\n\tinit: function (controller, grid) {\r\n\t\tvar gantt = grid.$gantt;\r\n\r\n\t\tgantt.attachEvent(\"onTaskClick\", function (id, e) {\r\n\t\t\tif (gantt._is_icon_open_click(e))\r\n\t\t\t\treturn true;\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\r\n\t\t\tif (cell && controller.getEditorConfig(cell.columnName)) {\r\n\t\t\t\tif (controller.isVisible() && state.id == cell.id && state.columnName == cell.columnName) {\r\n\t\t\t\t\t// do nothing if editor is already active in this cell\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontroller.startEdit(cell.id, cell.columnName);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onEmptyClick\", function () {\r\n\t\t\tif (controller.isVisible() && controller.isChanged()) {\r\n\t\t\t\tcontroller.save();\r\n\t\t\t} else {\r\n\t\t\t\tcontroller.hide();\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onTaskDblClick\", function (id, e) {\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\t\t\tif (cell && controller.isVisible() && cell.columnName == state.columnName) {\r\n\t\t\t\t//GS-933 probably, we don't need to hide the inline editor because the lightbox cannot be opened if you double-click on an inline editor\r\n\t\t\t\t//remove this code later if people don't complain\r\n\t\t\t\t//controller.hide();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t},\r\n\r\n\tonShow: function (controller, placeholder, grid) {\r\n\t\tvar gantt = grid.$gantt;\r\n\t\t\r\n\r\n\t\tif(gantt.ext && gantt.ext.keyboardNavigation){\r\n\t\t\tvar keyNav = gantt.ext.keyboardNavigation;\r\n\t\t\tkeyNav.attachEvent(\"onKeyDown\", function(command, e){\r\n\t\t\t\tvar keyboard = gantt.constants.KEY_CODES;\r\n\t\t\t\tvar keyCode = e.keyCode;\r\n\t\t\t\tvar preventKeyNav = false;\r\n\r\n\t\t\t\tswitch (keyCode){\r\n\t\t\t\t\tcase keyboard.SPACE:\r\n\t\t\t\t\t\tif(controller.isVisible()){\r\n\t\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (preventKeyNav){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else{\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tplaceholder.onkeydown = function (e) {\r\n\t\t\te = e || window.event;\r\n\r\n\t\t\tvar keyboard = gantt.constants.KEY_CODES;\r\n\t\t\tif (e.defaultPrevented || (e.shiftKey && e.keyCode != keyboard.TAB)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar shouldPrevent = true;\r\n\t\t\tswitch (e.keyCode) {\r\n\t\t\t\tcase gantt.keys.edit_save:\r\n\t\t\t\t\tcontroller.save();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase gantt.keys.edit_cancel:\r\n\t\t\t\t\tcontroller.hide();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.UP:\r\n\t\t\t\tcase keyboard.DOWN:\r\n\t\t\t\t\tif (controller.isVisible()) {\r\n\t\t\t\t\t\tcontroller.hide();\r\n\t\t\t\t\t\tshouldPrevent = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.TAB:\r\n\t\t\t\t\tif (e.shiftKey) {\r\n\t\t\t\t\t\tcontroller.editPrevCell(true);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcontroller.editNextCell(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tshouldPrevent = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif (shouldPrevent) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tonHide: function () {\r\n\r\n\t},\r\n\r\n\tdestroy: function () {\r\n\r\n\t}\r\n};\r\n\r\n","export default {\r\n\tinit: function(controller, grid){\r\n\t\tvar self = controller;\r\n\t\tvar gantt = grid.$gantt;\r\n\r\n\t\tvar onBlurDelay = null;\r\n\t\tvar keyNav = gantt.ext.keyboardNavigation;\r\n\t\tkeyNav.attachEvent(\"onBeforeFocus\", function (node) {\r\n\t\t\tvar activeCell = controller.locateCell(node);\r\n\t\t\tclearTimeout(onBlurDelay);\r\n\t\t\tif (activeCell) {\r\n\t\t\t\tvar columnName = activeCell.columnName;\r\n\t\t\t\tvar id = activeCell.id;\r\n\r\n\t\t\t\tvar editorState = self.getState();\r\n\t\t\t\tif(self.isVisible()){\r\n\t\t\t\t\tif(editorState.id == id && editorState.columnName === columnName) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tkeyNav.attachEvent(\"onFocus\", function (node) {\r\n\t\t\tvar activeCell = controller.locateCell(node);\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tclearTimeout(onBlurDelay);\r\n\t\t\tif (activeCell && !(activeCell.id == state.id && activeCell.columnName == state.columnName)) {\r\n\t\t\t\tif(self.isVisible()){\r\n\t\t\t\t\tself.save();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tcontroller.attachEvent(\"onHide\", function(){\r\n\t\t\tclearTimeout(onBlurDelay);\r\n\t\t});\r\n\r\n\t\tkeyNav.attachEvent(\"onBlur\", function () {\r\n\t\t\tonBlurDelay = setTimeout(function(){\r\n\t\t\t\tself.save();\r\n\t\t\t});\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onTaskDblClick\", function(id,e){\r\n\t\t\t// block lightbox on double click inside editor\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\t\t\tif(cell && controller.isVisible() && cell.columnName == state.columnName){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onTaskClick\", function (id, e) {\r\n\t\t\tif(gantt._is_icon_open_click(e))\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\r\n\t\t\tif (cell && controller.getEditorConfig(cell.columnName)) {\r\n\t\t\t\tif(controller.isVisible() && state.id == cell.id && state.columnName == cell.columnName){\r\n\t\t\t\t\t// do nothing if editor is already active in this cell\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcontroller.startEdit(cell.id, cell.columnName);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onEmptyClick\", function () {\r\n\t\t\tself.save();\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tkeyNav.attachEvent(\"onKeyDown\", function(command, e){\r\n\t\t\tvar activeCell = controller.locateCell(e.target);\r\n\t\t\tvar hasEditor = activeCell ? controller.getEditorConfig(activeCell.columnName) : false;\r\n\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar keyboard = gantt.constants.KEY_CODES;\r\n\t\t\tvar keyCode = e.keyCode;\r\n\t\t\tvar preventKeyNav = false;\r\n\r\n\t\t\tswitch (keyCode){\r\n\t\t\t\tcase keyboard.ENTER:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\t\t\t\t\t\tcontroller.save();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}else if(hasEditor && !(e.ctrlKey || e.metaKey || e.shiftKey)){\r\n\t\t\t\t\t\tself.startEdit(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.ESC:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\t\t\t\t\t\tcontroller.hide();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.UP:\r\n\t\t\t\tcase keyboard.DOWN:\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.LEFT:\r\n\t\t\t\tcase keyboard.RIGHT:\r\n\t\t\t\t\tif((hasEditor && controller.isVisible()) || state.editorType === \"date\"){\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.SPACE:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(hasEditor && !controller.isVisible()){\r\n\t\t\t\t\t\tself.startEdit(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.DELETE:\r\n\t\t\t\t\tif(hasEditor && !controller.isVisible()){\r\n\t\t\t\t\t\tself.startEdit(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t} else if(hasEditor && controller.isVisible()){\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.TAB:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\r\n\t\t\t\t\t\tif(e.shiftKey){\r\n\t\t\t\t\t\t\tcontroller.editPrevCell(true);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tcontroller.editNextCell(true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar newState = controller.getState();\r\n\t\t\t\t\t\tif(newState.id){\r\n\t\t\t\t\t\t\tkeyNav.focus({type:\"taskCell\", id: newState.id, column:newState.columnName});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tif(controller.isVisible())\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\telse{\r\n\r\n\t\t\t\t\t\t// start editing on character key\r\n\t\t\t\t\t\tif((keyCode >= 48 && keyCode <= 57) || // [0-9]\r\n\t\t\t\t\t\t\t(keyCode > 95 && keyCode < 112) || // numpad\r\n\t\t\t\t\t\t\t(keyCode >= 64 && keyCode <= 91) || // [a-z]\r\n\t\t\t\t\t\t\t(keyCode > 185 && keyCode < 193) || //;=-,etc\r\n\t\t\t\t\t\t\t(keyCode > 218  && keyCode < 223)\r\n\t\t\t\t\t\t){\r\n\t\t\t\t\t\t\tvar modifiers = command.modifiers;\r\n\r\n\t\t\t\t\t\t\tvar anyModifier = modifiers.alt || modifiers.ctrl || modifiers.meta || modifiers.shift;\r\n\t\t\t\t\t\t\tif(modifiers.alt){\r\n\t\t\t\t\t\t\t\t// don't start editing on alt+key\r\n\t\t\t\t\t\t\t}else if (anyModifier && keyNav.getCommandHandler(command, \"taskCell\")){\r\n\t\t\t\t\t\t\t\t// don't start editing if command already have a keyboard shortcut\r\n\t\t\t\t\t\t\t}else if(hasEditor && !controller.isVisible()){\r\n\t\t\t\t\t\t\t\tself.startEdit(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif (preventKeyNav){\r\n\t\t\t\treturn false;\r\n\t\t\t} else{\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t},\r\n\tonShow: function(controller, placeholder, grid){},\r\n\tonHide: function(controller, placeholder, grid){\r\n\t\tconst gantt = grid.$gantt;\r\n\t\tif (gantt){\r\n\t\t\tgantt.focus();\r\n\t\t}\r\n\r\n\t},\r\n\tdestroy: function(){}\r\n};\r\n\r\n","export default function (gantt) {\r\n\r\n\tvar BaseEditor = function () {\r\n\t};\r\n\r\n\tBaseEditor.prototype = {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t},\r\n\t\thide: function () {\r\n\t\t},\r\n\t\tset_value: function (value, id, column, node) {\r\n\t\t\tthis.get_input(node).value = value;\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\treturn this.get_input(node).value || \"\";\r\n\t\t},\r\n\t\tis_changed: function (value, id, column, node) {\r\n\t\t\tvar currentValue = this.get_value(id, column, node);\r\n\t\t\tif (currentValue && value && currentValue.valueOf && value.valueOf) {\r\n\t\t\t\treturn currentValue.valueOf() != value.valueOf();\r\n\t\t\t} else {\r\n\t\t\t\treturn currentValue != value;\r\n\t\t\t}\r\n\t\t},\r\n\t\tis_valid: function (value, id, column, node) {\r\n\t\t\treturn true;\r\n\t\t},\r\n\r\n\t\tsave: function (id, column, node) {\r\n\r\n\t\t},\r\n\t\tget_input: function (node) {\r\n\t\t\treturn node.querySelector(\"input\");\r\n\t\t},\r\n\t\tfocus: function (node) {\r\n\t\t\tvar input = this.get_input(node);\r\n\t\t\tif (!input) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (input.focus) {\r\n\t\t\t\tinput.focus();\r\n\t\t\t}\r\n\r\n\t\t\tif (input.select) {\r\n\t\t\t\tinput.select();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn BaseEditor;\r\n};","import BaseFactory from \"./base\";\r\nimport * as utils from \"../../../../../utils/utils\";\r\nimport __extends from \"../../../../../utils/extends\";\r\n\r\n\r\nexport default function(gantt) {\r\n\r\n\tvar BaseEditor = BaseFactory(gantt);\r\n\r\n\tfunction TextEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(TextEditor, BaseEditor);\r\n\r\n\tutils.mixin(TextEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar html = `<div role='cell'><input type='text' name='${column.name}' title='${column.name}'></div>`;\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn TextEditor;\r\n};","import BaseFactory from \"./base\";\r\nimport * as utils from \"../../../../../utils/utils\";\r\nimport __extends from \"../../../../../utils/extends\";\r\n\r\n\r\nexport default function(gantt) {\r\n\r\n\tvar BaseEditor = BaseFactory(gantt);\r\n\r\n\tfunction NumberEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(NumberEditor, BaseEditor);\r\n\r\n\tutils.mixin(NumberEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar min = config.min || 0,\r\n\t\t\t\tmax = config.max || 100;\r\n\r\n\t\t\tvar html = `<div role='cell'><input type='number' min='${min}' max='${max}' name='${column.name}' title='${column.name}'></div>`;\r\n\t\t\tplaceholder.innerHTML = html;\r\n\r\n\t\t\t// GS-1914. Do not allow entering alues beyond min and max via keyboard\r\n\t\t\tplaceholder.oninput = function (e) {\r\n\t\t\t\tif (+e.target.value < min) {\r\n\t\t\t\t\te.target.value = min;\r\n\t\t\t\t}\r\n\t\t\t\tif (+e.target.value > max) {\r\n\t\t\t\t\te.target.value = max;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\treturn this.get_input(node).value || \"\";\r\n\t\t},\r\n\t\tis_valid: function (value, id, column, node) {\r\n\t\t\treturn !isNaN(parseInt(value, 10));\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn NumberEditor;\r\n};","import BaseFactory from \"./base\";\r\nimport * as utils from \"../../../../../utils/utils\";\r\nimport __extends from \"../../../../../utils/extends\";\r\n\r\n\r\nexport default function(gantt) {\r\n\r\n\tvar BaseEditor = BaseFactory(gantt);\r\n\r\n\tfunction SelectEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(SelectEditor, BaseEditor);\r\n\r\n\tutils.mixin(SelectEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar html = `<div role='cell'><select name='${column.name}' title='${column.name}'>`;\r\n\t\t\tvar optionsHtml = [],\r\n\t\t\t\toptions = config.options || [];\r\n\r\n\t\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\t\toptionsHtml.push(\"<option value='\" + config.options[i].key + \"'>\" + options[i].label + \"</option>\");\r\n\t\t\t}\r\n\r\n\t\t\thtml += optionsHtml.join(\"\") + \"</select></div>\";\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t},\r\n\t\tget_input: function (node) {\r\n\t\t\treturn node.querySelector(\"select\");\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn SelectEditor;\r\n};","import * as utils from \"../../../../../utils/utils\";\r\nimport __extends from \"../../../../../utils/extends\";\r\nimport BaseFactory from \"./base\";\r\n\r\nexport default function (gantt) {\r\n\tvar BaseEditor = BaseFactory(gantt);\r\n\t\r\n\t\r\n\r\n\tvar html5DateFormat = \"%Y-%m-%d\";\r\n\r\n\tvar dateToStr = null;\r\n\tvar strToDate = null;\r\n\r\n\tfunction init() {\r\n\t\tif (!dateToStr) {\r\n\t\t\tdateToStr = gantt.date.date_to_str(html5DateFormat);\r\n\t\t}\r\n\t\tif (!strToDate) {\r\n\t\t\tstrToDate = gantt.date.str_to_date(html5DateFormat);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction DateEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(DateEditor, BaseEditor);\r\n\r\n\tutils.mixin(DateEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tinit();\r\n\t\t\tvar minValue = null;\r\n\t\t\tvar maxValue = null;\r\n\r\n\t\t\tif(typeof config.min === \"function\"){\r\n\t\t\t\tminValue = config.min(id, column);\r\n\t\t\t}else{\r\n\t\t\t\tminValue = config.min;\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof config.max === \"function\"){\r\n\t\t\t\tmaxValue = config.max(id, column);\r\n\t\t\t}else{\r\n\t\t\t\tmaxValue = config.max;\r\n\t\t\t}\r\n\r\n\t\t\tvar minAttr = minValue ? \" min='\" + dateToStr(minValue)+\"' \"  : \"\";\r\n\t\t\tvar maxAttr = maxValue ? \" max='\" + dateToStr(maxValue)+\"' \"  : \"\";\r\n\t\t\tvar html = `<div style='width:140px' role='cell'><input type='date' ${minAttr} ${maxAttr} name='${column.name}' title='${column.name}'></div>`;\r\n\t\t\tplaceholder.innerHTML = html;\r\n\r\n\t\t\t// GS-1914. Do not allow entering alues beyond min and max via keyboard\r\n\t\t\tplaceholder.oninput = function (e) {\r\n\t\t\t\tif (e.target.value && (minValue || maxValue)){\r\n\t\t\t\t\tif (+gantt.date.str_to_date(\"%Y-%m-%d\")(e.target.value) < +minValue) {\r\n\t\t\t\t\t\te.target.value = gantt.date.date_to_str(\"%Y-%m-%d\")(minValue);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (+gantt.date.str_to_date(\"%Y-%m-%d\")(e.target.value) > +maxValue) {\r\n\t\t\t\t\t\te.target.value = gantt.date.date_to_str(\"%Y-%m-%d\")(maxValue);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\t\tset_value: function (value, id, column, node) {\r\n\t\t\tif (value && value.getFullYear) {\r\n\t\t\t\tthis.get_input(node).value = dateToStr(value);\r\n\t\t\t} else {\r\n\t\t\t\tthis.get_input(node).value = value;\r\n\t\t\t}\r\n\t\t},\r\n\t\tis_valid: function (value, id, column, node) {\r\n\t\t\tif (!value || isNaN(value.getTime()))\r\n\t\t\t\treturn false;\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\tvar parsed;\r\n\t\t\ttry {\r\n\t\t\t\tparsed = strToDate(this.get_input(node).value || \"\");\r\n\t\t\t} catch (e) {\r\n\t\t\t\tparsed = null;// return null will cancel changes\r\n\t\t\t}\r\n\r\n\t\t\treturn parsed;\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn DateEditor;\r\n};\r\n","import BaseFactory from \"./base\";\r\nimport * as utils from \"../../../../../utils/utils\";\r\nimport __extends from \"../../../../../utils/extends\";\r\n\r\n\r\nexport default function(gantt) {\r\n\r\n\tvar BaseEditor = BaseFactory(gantt);\r\n\r\n\tfunction PredecessorEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(PredecessorEditor, BaseEditor);\r\n\r\n\tfunction getFormatter(config) {\r\n\t\treturn config.formatter || gantt.ext.formatters.linkFormatter();\r\n\t}\r\n\r\n\tfunction parseInputString(value, config) {\r\n\t\tvar predecessors = (value || \"\").split(config.delimiter || \",\");\r\n\t\tfor (var i = 0; i < predecessors.length; i++) {\r\n\t\t\tvar val = predecessors[i].trim();\r\n\t\t\tif (val) {\r\n\t\t\t\tpredecessors[i] = val;\r\n\t\t\t} else {\r\n\t\t\t\tpredecessors.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t\tpredecessors.sort();\r\n\t\treturn predecessors;\r\n\t}\r\n\r\n\tfunction formatPredecessors(task, config, gantt) {\r\n\t\tvar links = task.$target;\r\n\t\tvar labels = [];\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar link = gantt.getLink(links[i]);\r\n\t\t\tlabels.push(getFormatter(config).format(link));\r\n\t\t}\r\n\t\treturn labels.join((config.delimiter || \",\") + \" \");\r\n\t}\r\n\r\n\tfunction getSelectedLinks(taskId, predecessorCodes, config) {\r\n\t\tvar links = [];\r\n\t\t// select only unique codes GS-1439\r\n\t\t[...new Set(predecessorCodes)].forEach(function (code) {\r\n\t\t\tvar link = getFormatter(config).parse(code);\r\n\t\t\tif(link){\r\n\t\t\t\tlink.target = taskId;\r\n\t\t\t\t// GS-1290 A way to preserve the link. Otherwise validation will return false\r\n\t\t\t\t// because the existing link ID is not passed there\r\n\t\t\t\tlink.id = \"predecessor_generated\";\r\n\t\t\t\tif (gantt.isLinkAllowed(link)) {\r\n\t\t\t\t\tlink.id = undefined;\r\n\t\t\t\t\tlinks.push(link);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn links;\r\n\t}\r\n\r\n\tfunction formatLinkKey(link){\r\n\t\treturn link.source + \"_\" + link.target + \"_\" + link.type + \"_\" + (link.lag||0);\r\n\t}\r\n\r\n\tfunction getLinksDiff(task, predecessorCodes, config) {\r\n\t\tvar selectedLinks = getSelectedLinks(task.id, predecessorCodes, config);\r\n\t\tvar existingLinksSearch = {};\r\n\t\ttask.$target.forEach(function (linkId) {\r\n\t\t\tvar link = gantt.getLink(linkId);\r\n\t\t\texistingLinksSearch[formatLinkKey(link)] = link.id;\r\n\t\t});\r\n\r\n\t\tvar linksToAdd = [];\r\n\t\tselectedLinks.forEach(function (link) {\r\n\t\t\tvar linkKey = formatLinkKey(link);\r\n\t\t\tif (!existingLinksSearch[linkKey]) {\r\n\t\t\t\tlinksToAdd.push(link);\r\n\t\t\t} else {\r\n\t\t\t\tdelete existingLinksSearch[linkKey];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tvar linksToDelete = [];\r\n\t\tfor (var i in existingLinksSearch) {\r\n\t\t\tlinksToDelete.push(existingLinksSearch[i]);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tadd: linksToAdd,\r\n\t\t\tremove: linksToDelete\r\n\t\t};\r\n\t}\r\n\r\n\tutils.mixin(PredecessorEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar html = `<div role='cell'><input type='text' name='${column.name}' title='${column.name}'></div>`;\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t},\r\n\t\thide: function () {\r\n\t\t},\r\n\t\tset_value: function (value, id, column, node) {\r\n\t\t\tthis.get_input(node).value = formatPredecessors(value, column.editor, gantt);\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\treturn parseInputString((this.get_input(node).value || \"\"), column.editor);\r\n\t\t},\r\n\t\tsave: function (id, column, node) {\r\n\t\t\tvar task = gantt.getTask(id);\r\n\r\n\t\t\tvar linksDiff = getLinksDiff(task, this.get_value(id, column, node), column.editor);\r\n\r\n\t\t\tif (linksDiff.add.length || linksDiff.remove.length) {\r\n\t\t\t\tgantt.batchUpdate(function () {\r\n\t\t\t\t\tlinksDiff.add.forEach(function (link) {\r\n\t\t\t\t\t\tgantt.addLink(link);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlinksDiff.remove.forEach(function (linkId) {\r\n\t\t\t\t\t\tgantt.deleteLink(linkId);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (gantt.autoSchedule)\r\n\t\t\t\t\t\tgantt.autoSchedule();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tis_changed: function (value, id, column, node) {\r\n\t\t\tvar inputPredecessors = this.get_value(id, column, node);\r\n\t\t\tvar taskPredecessors = parseInputString(formatPredecessors(value, column.editor, gantt), column.editor);\r\n\r\n\t\t\treturn inputPredecessors.join() !== taskPredecessors.join();\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn PredecessorEditor;\r\n};","import BaseFactory from \"./base\";\r\nimport * as utils from \"../../../../../utils/utils\";\r\nimport __extends from \"../../../../../utils/extends\";\r\n\r\n\r\nexport default function(gantt) {\r\n\r\n\tvar BaseEditor = BaseFactory(gantt);\r\n\r\n\tfunction TextEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(TextEditor, BaseEditor);\r\n\r\n\tfunction getFormatter(config) {\r\n\t\treturn config.formatter || gantt.ext.formatters.durationFormatter();\r\n\t}\r\n\tutils.mixin(TextEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar html = `<div role='cell'><input type='text' name='${column.name}' title='${column.name}'></div>`;\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t},\r\n\t\tset_value: function (value, id, column, node) {\r\n\t\t\tthis.get_input(node).value = getFormatter(column.editor).format(value);\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\treturn getFormatter(column.editor).parse(this.get_input(node).value || \"\");\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn TextEditor;\r\n};","export default function (gantt) {\r\n\treturn function processTaskDateProperties(item, mapTo, mode) {\r\n\t\tif (mode == \"keepDates\") {\r\n\t\t\tkeepDatesOnEdit(item, mapTo);\r\n\t\t} else if (mode == \"keepDuration\") {\r\n\t\t\tkeepDurationOnEdit(item, mapTo);\r\n\t\t} else {\r\n\t\t\tdefaultActionOnEdit(item, mapTo);\r\n\t\t}\r\n\t};\r\n\r\n\t// resize task\r\n\t// resize task when start/end/duration changes\r\n\tfunction keepDatesOnEdit(item, mapTo) {\r\n\t\tif (mapTo == \"duration\") {\r\n\t\t\titem.end_date = gantt.calculateEndDate(item);\r\n\t\t} else if (mapTo == \"end_date\" || mapTo == \"start_date\") {\r\n\t\t\titem.duration = gantt.calculateDuration(item);\r\n\t\t}\r\n\t}\r\n\r\n\t// move task(before 6.2)\r\n\t// move task when start/end dates changes\r\n\t// resize task when duration changes\r\n\tfunction keepDurationOnEdit(item, mapTo) {\r\n\t\tif (mapTo == \"end_date\") {\r\n\t\t\titem.start_date = decreaseStartDate(item);\r\n\t\t} else if (mapTo == \"start_date\" || mapTo == \"duration\") {\r\n\t\t\titem.end_date = gantt.calculateEndDate(item);\r\n\t\t}\r\n\t}\r\n\r\n\t// default behavior\r\n\t// move task when start date changes\r\n\t// resize task when end date/duration changes\r\n\tfunction defaultActionOnEdit(item, mapTo) {\r\n\t\tif (gantt.config.schedule_from_end){\r\n\t\t\tif (mapTo == \"end_date\" || mapTo == \"duration\") {\r\n\t\t\t\titem.start_date = decreaseStartDate(item);\r\n\t\t\t} else if (mapTo == \"start_date\") {\r\n\t\t\t\titem.duration = gantt.calculateDuration(item);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (mapTo == \"start_date\" || mapTo == \"duration\") {\r\n\t\t\t\titem.end_date = gantt.calculateEndDate(item);\r\n\t\t\t} else if (mapTo == \"end_date\") {\r\n\t\t\t\titem.duration = gantt.calculateDuration(item);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction decreaseStartDate(item){\r\n\t\treturn gantt.calculateEndDate({\r\n\t\t\tstart_date: item.end_date,\r\n\t\t\tduration: -item.duration,\r\n\t\t\ttask: item\r\n\t\t});\r\n\t}\r\n};","import getKeyboardMapping from \"./keyboard_mappings\";\r\nimport textEditorFactory from \"./editors/text\";\r\nimport numberEditorFactory from \"./editors/number\";\r\nimport selectEditorFactory from \"./editors/select\";\r\nimport dateEditorFactory from \"./editors/date\";\r\nimport predecessorEditorFactory from \"./editors/predecessor\";\r\nimport durationEditorFactory from \"./editors/duration\";\r\nimport * as utils from \"../../../../utils/utils\";\r\nimport * as domHelpers from \"../../utils/dom_helpers\";\r\nimport eventable from \"../../../../utils/eventable\";\r\nimport linkedPropertiesProcessor from \"./linked_properties\";\r\n\r\nfunction initConfigs(gantt){\r\n\tgantt.config.editor_types = {\r\n\t\ttext: new (textEditorFactory(gantt))(),\r\n\t\tnumber: new (numberEditorFactory(gantt))(),\r\n\t\tselect: new (selectEditorFactory(gantt))(),\r\n\t\tdate: new (dateEditorFactory(gantt))(),\r\n\t\tpredecessor: new (predecessorEditorFactory(gantt))(),\r\n\t\tduration: new (durationEditorFactory(gantt))()\r\n\t};\r\n}\r\n\r\nfunction create(gantt){\r\n\tvar keyboardMapping = getKeyboardMapping(gantt);\r\n\r\n\tvar eventBus = {};\r\n\teventable(eventBus);\r\n\r\n\tfunction createGridEditors(grid) {\r\n\r\n\t\tfunction _getGridCellFromNode(node){\r\n\t\t\tif(!domHelpers.isChildOf(node, grid.$grid)){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tvar row = domHelpers.locateAttribute(node, grid.$config.item_attribute);\r\n\t\t\tvar cell = domHelpers.locateAttribute(node, \"data-column-name\");\r\n\t\t\tif(row && cell){\r\n\t\t\t\tvar columnName = cell.getAttribute(\"data-column-name\");\r\n\t\t\t\tvar id = row.getAttribute(grid.$config.item_attribute);\r\n\t\t\t\treturn {\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\tcolumnName: columnName\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tfunction _getEditorPosition(itemId, columnName) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\t\t\tvar top = grid.getItemTop(itemId);\r\n\t\t\tvar height = grid.getItemHeight(itemId);\r\n\t\t\tvar cols = grid.getGridColumns();\r\n\t\t\tvar left = 0,\r\n\t\t\t\tright = 0,\r\n\t\t\t\twidth = 0;\r\n\r\n\t\t\tfor (var i = 0; i < cols.length; i++) {\r\n\t\t\t\tif (cols[i].name == columnName) {\r\n\t\t\t\t\twidth = cols[i].width;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (config.rtl) {\r\n\t\t\t\t\tright += cols[i].width;\r\n\t\t\t\t}\telse {\r\n\t\t\t\t\tleft += cols[i].width;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tif (config.rtl) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttop: top,\r\n\t\t\t\t\tright: right,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\twidth: width\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttop: top,\r\n\t\t\t\t\tleft: left,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\twidth: width\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction findVisibleIndex(grid, columnName) {\r\n\t\t\tvar columns = grid.getGridColumns();\r\n\t\t\tfor (var i = 0; i < columns.length; i++){\r\n\t\t\t\tif(columns[i].name == columnName){\r\n\t\t\t\t\treturn i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tfunction _createPlaceholder(itemId, columnName) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\t\t\tvar pos = _getEditorPosition(itemId, columnName);\r\n\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\tel.className = \"gantt_grid_editor_placeholder\";\r\n\t\t\tel.setAttribute(grid.$config.item_attribute, itemId);\r\n\t\t\tel.setAttribute(grid.$config.bind + \"_id\", itemId);// for backward compatibility\r\n\r\n\t\t\tel.setAttribute(\"data-column-name\", columnName);\r\n\r\n\t\t\tvar visibleIndex = findVisibleIndex(grid, columnName);\r\n\t\t\tel.setAttribute(\"data-column-index\", visibleIndex);\r\n\r\n\t\t\tgantt._waiAria.inlineEditorAttr(el);\r\n\r\n\t\t\tif (config.rtl) {\r\n\t\t\t\tel.style.cssText = [\r\n\t\t\t\t\t\"top:\" + pos.top + \"px\",\r\n\t\t\t\t\t\"right:\" + pos.right + \"px\",\r\n\t\t\t\t\t\"width:\" + pos.width + \"px\",\r\n\t\t\t\t\t\"height:\" + pos.height + \"px\"\r\n\t\t\t\t].join(\";\");\r\n\t\t\t} else {\r\n\t\t\t\tel.style.cssText = [\r\n\t\t\t\t\t\"top:\" + pos.top + \"px\",\r\n\t\t\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\t\t\"width:\" + pos.width + \"px\",\r\n\t\t\t\t\t\"height:\" + pos.height + \"px\"\r\n\t\t\t\t].join(\";\");\r\n\t\t\t}\r\n\r\n\t\t\treturn el;\r\n\t\t}\r\n\r\n\t\tvar updateTaskDateProperties = linkedPropertiesProcessor(gantt);\r\n\r\n\t\tvar handlers = [];\r\n\t\tvar ganttHandlers = [];\r\n\t\tvar store = null;\r\n\t\tvar controller = {\r\n\t\t\t_itemId: null,\r\n\t\t\t_columnName: null,\r\n\t\t\t_editor: null,\r\n\t\t\t_editorType: null,\r\n\t\t\t_placeholder: null,\r\n\r\n\t\t\tlocateCell: _getGridCellFromNode,\r\n\t\t\tgetEditorConfig: function (columnName) {\r\n\t\t\t\tvar column = grid.getColumn(columnName);\r\n\t\t\t\treturn column.editor;\r\n\t\t\t},\r\n\r\n\t\t\tinit: function () {\r\n\t\t\t\tvar mapping = keyboardMapping.getMapping();\r\n\t\t\t\tif(mapping.init){\r\n\t\t\t\t\tmapping.init(this, grid);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstore = grid.$gantt.getDatastore(grid.$config.bind);\r\n\r\n\t\t\t\tvar self = this;\r\n\r\n\t\t\t\thandlers.push(store.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\t\t\t\tif(self._itemId == oldId){\r\n\t\t\t\t\t\tself._itemId = newId;\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\t\t\t\thandlers.push(store.attachEvent(\"onStoreUpdated\", function(){\r\n\t\t\t\t\tif(grid.$gantt.getState(\"batchUpdate\").batch_update){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(self.isVisible() && !store.isVisible(self._itemId)){\r\n\t\t\t\t\t\tself.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\r\n\t\t\t\tganttHandlers.push(gantt.attachEvent(\"onDataRender\", function(){\r\n\t\t\t\t\tif(self._editor && self._placeholder && !domHelpers.isChildOf(self._placeholder, gantt.$root)){\r\n\t\t\t\t\t\tgrid.$grid_data.appendChild(self._placeholder);\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\r\n\t\t\t\tthis.init = function(){};\r\n\t\t\t},\r\n\r\n\t\t\tgetState: function(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\teditor: this._editor,\r\n\t\t\t\t\teditorType: this._editorType,\r\n\t\t\t\t\tplaceholder: this._placeholder,\r\n\t\t\t\t\tid: this._itemId,\r\n\t\t\t\t\tcolumnName: this._columnName\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\t\t\tstartEdit: function(itemId, columnName) {\r\n\t\t\t\tif (this.isVisible()) {\r\n\t\t\t\t\tthis.save();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!store.exists(itemId)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar editorState = {id: itemId, columnName: columnName};\r\n\t\t\t\tif (gantt.isReadonly(store.getItem(itemId))) {\r\n\t\t\t\t\tthis.callEvent(\"onEditPrevent\", [editorState]);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.callEvent(\"onBeforeEditStart\", [editorState]) === false) {\r\n\t\t\t\t\tthis.callEvent(\"onEditPrevent\", [editorState]);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst asyncShow = this.show(editorState.id, editorState.columnName);\r\n\t\t\t\tif(asyncShow && asyncShow.then){\r\n\t\t\t\t\tasyncShow.then(function(){\r\n\t\t\t\t\t\tthis.setValue();\r\n\r\n\t\t\t\t\t\tthis.callEvent(\"onEditStart\", [editorState]);\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.setValue();\r\n\t\t\t\t\tthis.callEvent(\"onEditStart\", [editorState]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tisVisible: function(){\r\n\t\t\t\treturn !!(this._editor && domHelpers.isChildOf(this._placeholder, gantt.$root));\r\n\t\t\t},\r\n\t\t\tshow: function (itemId, columnName) {\r\n\t\t\t\tif (this.isVisible()) {\r\n\t\t\t\t\tthis.save();\r\n\t\t\t\t}\r\n\t\t\t\tvar editorState = {id: itemId, columnName: columnName};\r\n\r\n\t\t\t\tvar column = grid.getColumn(editorState.columnName);\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(column.name);\r\n\t\t\t\tif(!editorConfig)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar editor = grid.$getConfig().editor_types[editorConfig.type];\r\n\r\n\t\t\t\tvar placeholder = _createPlaceholder(editorState.id, editorState.columnName);\r\n\t\t\t\tgrid.$grid_data.appendChild(placeholder);\r\n\r\n\t\t\t\tconst onAfterShow = (function(){\r\n\t\t\t\t\tthis._editor = editor;\r\n\t\t\t\t\tthis._placeholder = placeholder;\r\n\t\t\t\t\tthis._itemId = editorState.id;\r\n\t\t\t\t\tthis._columnName = editorState.columnName;\r\n\t\t\t\t\tthis._editorType = editorConfig.type;\r\n\r\n\t\t\t\t\tvar mapping = keyboardMapping.getMapping();\r\n\t\t\t\t\tif(mapping.onShow){\r\n\t\t\t\t\t\tmapping.onShow(this, placeholder, grid);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplaceholder._onReMount = (function(){\r\n\t\t\t\t\t\tthis.setValue();\r\n\t\t\t\t\t}).bind(this);\r\n\t\t\t\t}).bind(this);\r\n\r\n\t\t\t\tconst editorResult = editor.show(editorState.id, column, editorConfig, placeholder);\r\n\t\t\t\tif(editorResult && editorResult.then){\r\n\t\t\t\t\treturn editorResult.then(() => {\r\n\t\t\t\t\t\tonAfterShow();\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tonAfterShow();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tsetValue: function () {\r\n\t\t\t\tvar state = this.getState();\r\n\t\t\t\tvar itemId = state.id,\r\n\t\t\t\t\tcolumnName = state.columnName;\r\n\r\n\t\t\t\tvar column = grid.getColumn(columnName);\r\n\t\t\t\tvar item = store.getItem(itemId);\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(columnName);\r\n\r\n\t\t\t\tif(!editorConfig)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar value = item[editorConfig.map_to];\r\n\t\t\t\tif(editorConfig.map_to == \"auto\"){\r\n\t\t\t\t\tvalue = store.getItem(itemId);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._editor.set_value(value, itemId, column, this._placeholder);\r\n\t\t\t\tthis.focus();\r\n\t\t\t},\r\n\r\n\t\t\tfocus: function(){\r\n\t\t\t\tthis._editor.focus(this._placeholder);\r\n\t\t\t},\r\n\r\n\t\t\tgetValue: function () {\r\n\t\t\t\tvar column = grid.getColumn(this._columnName);\r\n\t\t\t\treturn this._editor.get_value(this._itemId, column, this._placeholder);\r\n\t\t\t},\r\n\r\n\t\t\t_getItemValue: function() {\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(this._columnName);\r\n\r\n\t\t\t\tif(!editorConfig)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar item = gantt.getTask(this._itemId);\r\n\t\t\t\tvar value = item[editorConfig.map_to];\r\n\t\t\t\tif(editorConfig.map_to == \"auto\"){\r\n\t\t\t\t\tvalue = store.getItem(this._itemId);\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\t\t\t},\r\n\r\n\t\t\tisChanged: function(){\r\n\r\n\t\t\t\tvar column = grid.getColumn(this._columnName);\r\n\r\n\t\t\t\tvar value = this._getItemValue();\r\n\r\n\t\t\t\treturn this._editor.is_changed(value, this._itemId, column, this._placeholder);\r\n\t\t\t},\r\n\r\n\t\t\thide: function () {\r\n\t\t\t\tif(!this._itemId)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar itemId = this._itemId,\r\n\t\t\t\t\tcolumnName = this._columnName;\r\n\r\n\t\t\t\tvar mapping = keyboardMapping.getMapping();\r\n\t\t\t\tif(mapping.onHide){\r\n\t\t\t\t\tmapping.onHide(this, this._placeholder, grid);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._itemId = null;\r\n\t\t\t\tthis._columnName = null;\r\n\t\t\t\tthis._editorType = null;\r\n\t\t\t\tif (!this._placeholder) return;\r\n\r\n\t\t\t\tif (this._editor && this._editor.hide) {\r\n\t\t\t\t\tthis._editor.hide(this._placeholder);\r\n\t\t\t\t}\r\n\t\t\t\tthis._editor = null;\r\n\t\t\t\tif (this._placeholder.parentNode) {\r\n\t\t\t\t\tthis._placeholder.parentNode.removeChild(this._placeholder);\r\n\t\t\t\t}\r\n\t\t\t\tthis._placeholder = null;\r\n\r\n\t\t\t\tthis.callEvent(\"onEditEnd\", [{id: itemId, columnName: columnName}]);\r\n\t\t\t},\r\n\t\t\tsave: function () {\r\n\t\t\t\tif(!(this.isVisible() && store.exists(this._itemId) && this.isChanged())) {\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar itemId = this._itemId,\r\n\t\t\t\t\tcolumnName = this._columnName;\r\n\r\n\t\t\t\tif(!store.exists(itemId)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar item = store.getItem(itemId);\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(columnName);\r\n\t\t\t\tvar editorState = {\r\n\t\t\t\t\tid: itemId,\r\n\t\t\t\t\tcolumnName: columnName,\r\n\t\t\t\t\tnewValue: this.getValue(),\r\n\t\t\t\t\toldValue: this._getItemValue()\r\n\t\t\t\t};\r\n\t\t\t\tif (this.callEvent(\"onBeforeSave\", [editorState]) !== false) {\r\n\t\t\t\t\tif (!this._editor.is_valid || this._editor.is_valid(editorState.newValue, editorState.id, grid.getColumn(columnName), this._placeholder)) {\r\n\r\n\t\t\t\t\t\tvar mapTo = editorConfig.map_to;\r\n\t\t\t\t\t\tvar value = editorState.newValue;\r\n\t\t\t\t\t\tif (mapTo != \"auto\") {\r\n\t\t\t\t\t\t\titem[mapTo] = value;\r\n\t\t\t\t\t\t\tupdateTaskDateProperties(item, mapTo, gantt.config.inline_editors_date_processing);\r\n\r\n\t\t\t\t\t\t\tstore.updateItem(itemId);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis._editor.save(itemId, grid.getColumn(columnName), this._placeholder);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.callEvent(\"onSave\", [editorState]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.hide();\r\n\t\t\t},\r\n\r\n\t\t\t_findEditableCell: function findEditableCell(start, direction){\r\n\t\t\t\tvar nextIndex = start;\r\n\t\t\t\tvar columns = grid.getGridColumns();\r\n\t\t\t\tvar nextColumn = columns[nextIndex];\r\n\r\n\t\t\t\tvar columnName = nextColumn ? nextColumn.name : null;\r\n\t\t\t\tif(columnName){\r\n\t\t\t\t\twhile(columnName && !this.getEditorConfig(columnName)){\r\n\t\t\t\t\t\tcolumnName = this._findEditableCell(start + direction, direction);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn columnName;\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t},\r\n\r\n\t\t\tgetNextCell: function moveCell(dir){\r\n\t\t\t\t// GS-1257. true means to exclude hidden columns\r\n\t\t\t\treturn this._findEditableCell(grid.getColumnIndex(this._columnName, true) + dir, dir);\r\n\t\t\t},\r\n\r\n\t\t\tgetFirstCell: function getFirstCell(){\r\n\t\t\t\treturn this._findEditableCell(0, 1);\r\n\t\t\t},\r\n\r\n\t\t\tgetLastCell: function getLastCell(){\r\n\t\t\t\treturn this._findEditableCell(grid.getGridColumns().length - 1, -1);\r\n\t\t\t},\r\n\r\n\t\t\teditNextCell: function nextCell(canChangeRow){\r\n\t\t\t\tvar cell = this.getNextCell(1);\r\n\t\t\t\tif(cell){\r\n\t\t\t\t\tvar nextColumn = this.getNextCell(1);\r\n\t\t\t\t\tif(nextColumn && this.getEditorConfig(nextColumn)){\r\n\t\t\t\t\t\tthis.startEdit(this._itemId, nextColumn);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(canChangeRow && this.moveRow(1)){\r\n\t\t\t\t\tvar task = this.moveRow(1);\r\n\t\t\t\t\tcell = this.getFirstCell();\r\n\t\t\t\t\tif(cell && this.getEditorConfig(cell)){\r\n\t\t\t\t\t\tthis.startEdit(task, cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\teditPrevCell: function prevCell(canChangeRow){\r\n\t\t\t\tvar cell = this.getNextCell(-1);\r\n\t\t\t\tif(cell){\r\n\t\t\t\t\tvar nextColumn = this.getNextCell(-1);\r\n\t\t\t\t\tif(nextColumn && this.getEditorConfig(nextColumn)){\r\n\t\t\t\t\t\tthis.startEdit(this._itemId, nextColumn);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(canChangeRow && this.moveRow(-1)){\r\n\t\t\t\t\tvar task = this.moveRow(-1);\r\n\t\t\t\t\tcell = this.getLastCell();\r\n\t\t\t\t\tif(cell && this.getEditorConfig(cell)){\r\n\t\t\t\t\t\tthis.startEdit(task, cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tmoveRow: function moveRow(dir) {\r\n\t\t\t\tvar moveTask = dir > 0 ? gantt.getNext : gantt.getPrev;\r\n\t\t\t\tmoveTask = gantt.bind(moveTask, gantt);\r\n\r\n\t\t\t\tvar nextItem = moveTask(this._itemId);\r\n\t\t\t\t// skip readonly rows\r\n\t\t\t\twhile (gantt.isTaskExists(nextItem) && gantt.isReadonly(gantt.getTask(nextItem))) {\r\n\t\t\t\t\tnextItem = moveTask(nextItem);\r\n\t\t\t\t}\r\n\t\t\t\treturn nextItem;\r\n\t\t\t},\r\n\r\n\t\t\teditNextRow: function nextRow(skipReadonly){\r\n\t\t\t\tvar id = this.getState().id;\r\n\t\t\t\tif (!gantt.isTaskExists(id)) return;\r\n\r\n\t\t\t\tvar next = null;\r\n\t\t\t\tif (skipReadonly){\r\n\t\t\t\t\tnext = this.moveRow(1);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tnext = gantt.getNext(id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (gantt.isTaskExists(next)){\r\n\t\t\t\t\tthis.startEdit(next, this._columnName);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\teditPrevRow: function prevRow(skipReadonly){\r\n\t\t\t\tvar id = this.getState().id;\r\n\t\t\t\tif (!gantt.isTaskExists(id)) return;\r\n\r\n\t\t\t\tvar prev = null;\r\n\t\t\t\tif (skipReadonly){\r\n\t\t\t\t\tprev = this.moveRow(-1);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tprev = gantt.getPrev(id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (gantt.isTaskExists(prev)){\r\n\t\t\t\t\tthis.startEdit(prev, this._columnName);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdetachStore: function(){\r\n\t\t\t\thandlers.forEach(function(handlerId){\r\n\t\t\t\t\tstore.detachEvent(handlerId);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tganttHandlers.forEach(function(handlerId){\r\n\t\t\t\t\tgantt.detachEvent(handlerId);\r\n\t\t\t\t});\r\n\t\t\t\thandlers = [];\r\n\t\t\t\tganttHandlers = [];\r\n\r\n\t\t\t\tstore = null;\r\n\t\t\t\tthis.hide();\r\n\t\t\t},\r\n\t\t\tdestructor: function(){\r\n\t\t\t\tthis.detachStore();\r\n\t\t\t\tthis.detachAllEvents();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tutils.mixin(controller, keyboardMapping);\r\n\t\tutils.mixin(controller, eventBus);\r\n\r\n\t\treturn controller;\r\n\t}\r\n\r\n\r\n\tvar inlineEditController = {\r\n\t\tinit: initConfigs,\r\n\t\tcreateEditors: createGridEditors\r\n\t};\r\n\r\n\tutils.mixin(inlineEditController, keyboardMapping);\r\n\tutils.mixin(inlineEditController, eventBus);\r\n\r\n\treturn inlineEditController;\r\n}\r\n\r\n\r\n\r\n\r\nexport default create;","import defaultMapping from \"./keyboard_mappings/default\";\r\nimport keyNavMappings from \"./keyboard_mappings/keyboard_navigation\";\r\n\r\nexport default function(gantt){\r\n\r\n\tvar mapping = null;\r\n\r\n\treturn {\r\n\t\tsetMapping: function(map){\r\n\t\t\tmapping = map;\r\n\t\t},\r\n\t\tgetMapping: function(){\r\n\r\n\t\t\tif(mapping){\r\n\t\t\t\treturn mapping;\r\n\t\t\t}else if(gantt.config.keyboard_navigation_cells && gantt.ext.keyboardNavigation){\r\n\t\t\t\treturn keyNavMappings;\r\n\t\t\t}else{\r\n\t\t\t\treturn defaultMapping;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};\r\n","// optimized checker for task bars smart rendering\r\n\r\n// first check the vertical position since it's easier to calculate\r\nexport default function isBarInViewport(item, viewport, view, config, gantt){\r\n\tif(!item.start_date || !item.end_date){\r\n\t\treturn null;\r\n\t}\r\n\r\n\tvar top = view.getItemTop(item.id);\r\n\tvar height = view.getItemHeight(item.id);\r\n\r\n\tif(top > viewport.y_end || top + height < viewport.y){\r\n\t\treturn false;\r\n\t}\r\n\r\n\tvar padding = 200;\r\n\tvar startCoord = view.posFromDate(item.start_date);\r\n\tvar endCoord = view.posFromDate(item.end_date);\r\n\tvar left = Math.min(startCoord, endCoord) - padding;\r\n\tvar right = Math.max(startCoord, endCoord) + padding;\r\n\r\n\tif(left > viewport.x_end || right < viewport.x){\r\n\t\treturn false;\r\n\t}\r\n\r\n\treturn true;\r\n};","function createTaskRenderer(gantt) {\r\n\r\n\tfunction _render_task_element(task, view, config) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar painters = config.type_renderers;\r\n\t\tvar renderer = painters[gantt.getTaskType(task.type)],\r\n\t\t\tdefaultRenderer = _task_default_render;\r\n\r\n\t\tif (!renderer) {\r\n\t\t\treturn defaultRenderer.call(gantt, task, view, config);\r\n\t\t}else{\r\n\t\t\treturn renderer.call(gantt, task, function(task){ return defaultRenderer.call(gantt, task, view, config);}, view);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _task_default_render(task, view, config) {\r\n\t\tif (gantt._isAllowedUnscheduledTask(task))\r\n\t\t\treturn;\r\n\r\n\t\tif (!gantt._isTaskInTimelineLimits(task)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar pos = view.getItemPosition(task);\r\n\r\n\t\tvar cfg = config,\r\n\t\t\ttemplates = view.$getTemplates();\r\n\r\n\t\tvar taskType = gantt.getTaskType(task.type);\r\n\t\tvar height = view.getBarHeight(task.id, taskType == cfg.types.milestone);\r\n\r\n\t\tvar controlsMargin = 0;\r\n\t\tif (taskType == cfg.types.milestone) {\r\n\t\t\tcontrolsMargin = (height - pos.height)/2;\r\n\t\t}\r\n\r\n\t\tvar padd = Math.floor((view.getItemHeight(task.id) - height) / 2);\r\n\t\tconst hasBaselines = gantt.config.baselines && task.baselines && task.baselines.length;\r\n\t\tconst baselinesOnDifferentRow = gantt.config.baselines && (gantt.config.baselines.render_mode == \"separateRow\" || gantt.config.baselines.render_mode == \"individualRow\");\r\n\t\tif (hasBaselines && baselinesOnDifferentRow){\r\n\t\t\tif (task.bar_height !== \"full\" && task.bar_height < task.row_height){\r\n\t\t\t\tif (taskType === cfg.types.milestone){\r\n\t\t\t\t\tlet milestoneHeight = view.getBarHeight(task.id, true);\r\n\t\t\t\t\tlet milestoneWidth = Math.sqrt(2 * milestoneHeight * milestoneHeight);\r\n\t\t\t\t\tpadd = Math.floor((milestoneWidth - height) / 2) + 2;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpadd = 2;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t//\tif(task.type == cfg.types.milestone){\r\n\t//\t\tpadd -= 1;\r\n\t//\t}\r\n\t//\tif (taskType == cfg.types.milestone && cfg.link_line_width > 1) {\r\n\t//\t\t//little adjust milestone position, so horisontal corners would match link arrow when thickness of link line is more than 1px\r\n\t//\t\tpadd += 1;\r\n\t//\t}\r\n\r\n\t\tif (taskType == cfg.types.milestone) {\r\n\t\t\tpos.left -= Math.round(height / 2);\r\n\t\t\tpos.width = height;\r\n\t\t}\r\n\r\n\t\tvar div = document.createElement(\"div\");\r\n\r\n\t\tvar width = Math.round(pos.width);\r\n\r\n\t\tif(view.$config.item_attribute) {\r\n\t\t\tdiv.setAttribute(view.$config.item_attribute, task.id);\r\n\t\t\tdiv.setAttribute(view.$config.bind + \"_id\", task.id); // 'task_id'/'resource_id' for backward compatibility\r\n\t\t}\r\n\r\n\t\tif (cfg.show_progress && taskType != cfg.types.milestone) {\r\n\t\t\t_render_task_progress(task, div, width, cfg, templates);\r\n\t\t}\r\n\r\n\t\t//use separate div to display content above progress bar\r\n\t\tvar content = _render_task_content(task, width, templates);\r\n\r\n\t\tdiv.appendChild(content);\r\n\r\n\t\tvar css = _combine_item_class(\"gantt_task_line\",\r\n\t\t\ttemplates.task_class(task.start_date, task.end_date, task),\r\n\t\t\ttask.id,\r\n\t\t\tview);\r\n\t\tif (task.color || task.progressColor || task.textColor) {\r\n\t\t\tcss += \" gantt_task_inline_color\";\r\n\t\t}\r\n\t\tif (pos.width < 20){\r\n\t\t\tcss += \" gantt_thin_task\";\r\n\t\t}\r\n\t\tdiv.className = css;\r\n\r\n\t\tvar styles = [\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"top:\" + (padd + pos.top) + 'px',\r\n\t\t\t\"height:\" + (height) + 'px',\r\n\t\t\t\"line-height:\" + (Math.max(height < 30 ? height - 2 : height, 0)) + 'px',\r\n\t\t\t\"width:\" + width + 'px'\r\n\t\t];\r\n\r\n\t\tdiv.style.cssText = styles.join(\";\");\r\n\t\tif (task.color) {\r\n\t\t\tdiv.style.setProperty(\"--dhx-gantt-task-background\", task.color);\r\n\t\t}\r\n\t\tif (task.textColor) {\r\n\t\t\tdiv.style.setProperty(\"--dhx-gantt-task-color\", task.textColor);\r\n\t\t}\r\n\r\n\t\tif (task.progressColor) {\r\n\t\t\tdiv.style.setProperty(\"--dhx-gantt-task-progress-color\", task.progressColor);\r\n\t\t}\r\n\r\n\t\t\r\n\t\tvar side = _render_leftside_content(task, cfg, templates, controlsMargin);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tside = _render_rightside_content(task, cfg, templates, controlsMargin);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tgantt._waiAria.setTaskBarAttr(task, div);\r\n\r\n\t\tvar state = gantt.getState();\r\n\t\tconst taskEditable = !gantt.isReadonly(task);\r\n\t\tconst timelineDrag = gantt.ext.dragTimeline && gantt.ext.dragTimeline._isDragInProgress();\r\n\r\n\t\tif (taskEditable || timelineDrag) {\r\n\t\t\tif (cfg.drag_resize && !gantt.isSummaryTask(task) && taskType != cfg.types.milestone) {\r\n\t\t\t\t_render_pair(div, \"gantt_task_drag\", task, function (css) {\r\n\t\t\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\t\t\tel.className = css;\r\n\t\t\t\t\treturn el;\r\n\t\t\t\t}, cfg);\r\n\t\t\t}\r\n\t\t\tif (cfg.drag_links && cfg.show_links) {\r\n\t\t\t\t_render_pair(div, \"gantt_link_control\", task, function (css) {\r\n\t\t\t\t\tvar outer = document.createElement(\"div\");\r\n\t\t\t\t\touter.className = css;\r\n\t\t\t\t\touter.style.cssText = [\r\n\t\t\t\t\t\t\"height:\" + height + 'px',\r\n\t\t\t\t\t\t\"line-height:\" + height + 'px'\r\n\t\t\t\t\t].join(\";\");\r\n\t\t\t\t\tvar inner = document.createElement(\"div\");\r\n\t\t\t\t\tinner.className = \"gantt_link_point\";\r\n\r\n\t\t\t\t\tvar showLinkPoints = false;\r\n\t\t\t\t\tif(state.link_source_id && cfg.touch){\r\n\t\t\t\t\t\tshowLinkPoints = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tinner.style.display = showLinkPoints ? \"block\" : \"\";\r\n\t\t\t\t\touter.appendChild(inner);\r\n\t\t\t\t\treturn outer;\r\n\t\t\t\t}, cfg, controlsMargin);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn div;\r\n\t}\r\n\r\n\tfunction _render_side_content(task, template, cssClass, marginStyle) {\r\n\t\tif (!template) return null;\r\n\r\n\t\tvar text = template(task.start_date, task.end_date, task);\r\n\t\tif (!text) return null;\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tcontent.className = \"gantt_side_content \" + cssClass;\r\n\t\tcontent.innerHTML = text;\r\n\t\tif(marginStyle){\r\n\t\t\tcontent.style[marginStyle.type] = Math.abs(marginStyle.value) + \"px\";\r\n\t\t}\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_leftside_content(task, cfg, templates, margin) {\r\n\t\tvar css = \"gantt_left \" + _get_link_crossing_css(!cfg.rtl ? true : false, task, cfg);\r\n\t\tvar marginStyle = null;\r\n\t\tif(margin){\r\n\t\t\tmarginStyle = { type: \"marginRight\", value: margin };\r\n\t\t}\r\n\t\treturn _render_side_content(task, templates.leftside_text, css, marginStyle);\r\n\t}\r\n\r\n\tfunction _render_rightside_content(task, cfg, templates, margin) {\r\n\t\tvar css = \"gantt_right \" + _get_link_crossing_css(!cfg.rtl ? false : true, task, cfg);\r\n\t\tvar marginStyle = null;\r\n\t\tif(margin){\r\n\t\t\tmarginStyle = { type: \"marginLeft\", value: margin };\r\n\t\t}\r\n\t\treturn _render_side_content(task, templates.rightside_text, css, marginStyle);\r\n\t}\r\n\r\n\tfunction _get_link_crossing_css(left, task) {\r\n\t\tvar cond = _get_conditions(left);\r\n\r\n\t\tfor (var i in cond) {\r\n\t\t\tvar links = task[i];\r\n\t\t\tfor (var ln = 0; ln < links.length; ln++) {\r\n\t\t\t\tvar link = gantt.getLink(links[ln]);\r\n\r\n\t\t\t\tfor (var tp = 0; tp < cond[i].length; tp++) {\r\n\t\t\t\t\tif (link.type == cond[i][tp]) {\r\n\t\t\t\t\t\treturn \"gantt_link_crossing\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\r\n\tfunction _render_task_content(task, width, templates) {\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tif (gantt.getTaskType(task.type) != gantt.config.types.milestone){\r\n\t\t\tcontent.innerHTML = templates.task_text(task.start_date, task.end_date, task);\r\n\t\t} else if(gantt.getTaskType(task.type) == gantt.config.types.milestone && width) {\r\n\t\t\tcontent.style.height = content.style.width = width + \"px\";\r\n\t\t}\r\n\t\tcontent.className = \"gantt_task_content\";\r\n\t\t//content.style.width = width + 'px';\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_task_progress(task, element, maxWidth, cfg, templates) {\r\n\t\tvar done = task.progress * 1 || 0;\r\n\t\t//GS-2776: borders were removed in v9.0\r\n\t\tmaxWidth = Math.max(maxWidth, 0);\r\n\t\tvar pr = document.createElement(\"div\");\r\n\t\tvar width = Math.round(maxWidth * done);\r\n\r\n\t\twidth = Math.min(maxWidth, width);\r\n\r\n\t\tpr.style.width = width + 'px';\r\n\t\tpr.className = \"gantt_task_progress\";\r\n\t\tpr.innerHTML = templates.progress_text(task.start_date, task.end_date, task);\r\n\r\n\t\tif(cfg.rtl){\r\n\t\t\tpr.style.position = \"absolute\";\r\n\t\t\tpr.style.right = \"0px\";\r\n\t\t}\r\n\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.className = \"gantt_task_progress_wrapper\";\r\n\t\twrapper.appendChild(pr);\r\n\t\telement.appendChild(wrapper);\r\n\r\n\t\tconst taskEditable = !gantt.isReadonly(task);\r\n\t\tconst timelineDrag = gantt.ext.dragTimeline && gantt.ext.dragTimeline._isDragInProgress();\r\n\r\n\t\tif (gantt.config.drag_progress && (taskEditable || timelineDrag)) {\r\n\t\t\tvar drag = document.createElement(\"div\");\r\n\r\n\t\t\tvar markerPos = width;\r\n\t\t\tif(cfg.rtl){\r\n\t\t\t\tmarkerPos = maxWidth - width;\r\n\t\t\t}\r\n\r\n\t\t\tdrag.style.left = markerPos + 'px';\r\n\t\t\tdrag.className = \"gantt_task_progress_drag\";\r\n\t\t\tdrag.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"9\" viewBox=\"0 0 12 9\" fill=\"none\">\r\n<path d=\"M5.58397 1.52543C5.78189 1.22856 6.21811 1.22856 6.41602 1.52543L10.5475 7.72265C10.769 8.05493 10.5308 8.5 10.1315 8.5L1.86852 8.5C1.46917 8.5 1.23097 8.05493 1.45249 7.72265L5.58397 1.52543Z\" fill=\"var(--dhx-gantt-progress-handle-background)\" stroke=\"var(--dhx-gantt-progress-handle-border)\"/>\r\n</svg>`;\r\n\t\t\tpr.appendChild(drag);\r\n\t\t\telement.appendChild(drag);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _get_conditions(leftside) {\r\n\t\tif (leftside) {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.start_to_start\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.start_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_start\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.finish_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _combine_item_class(basic, template, itemId, view) {\r\n\t\tvar cfg = view.$getConfig();\r\n\t\tvar css = [basic];\r\n\t\tif (template)\r\n\t\t\tcss.push(template);\r\n\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tvar task = gantt.getTask(itemId);\r\n\r\n\t\tif (gantt.getTaskType(task.type) == cfg.types.milestone) {\r\n\t\t\tcss.push(\"gantt_milestone\");\r\n\t\t}else if (gantt.getTaskType(task.type) == cfg.types.project) {\r\n\t\t\tcss.push(\"gantt_project\");\r\n\t\t}\r\n\r\n\t\tcss.push(\"gantt_bar_\" + gantt.getTaskType(task.type));\r\n\r\n\r\n\t\tif (gantt.isSummaryTask(task))\r\n\t\t\tcss.push(\"gantt_dependent_task\");\r\n\r\n\t\tif (gantt.isSplitTask(task) && ((cfg.open_split_tasks && !task.$open) || !cfg.open_split_tasks)) {\r\n\t\t\tcss.push(\"gantt_split_parent\");\r\n\t\t}\r\n\r\n\t\tif (cfg.select_task && gantt.isSelectedTask(itemId)) {\r\n\t\t\tcss.push(\"gantt_selected\");\r\n\t\t}\r\n\r\n\t\tif (itemId == state.drag_id) {\r\n\t\t\tcss.push(\"gantt_drag_\" + state.drag_mode);\r\n\t\t\tif (state.touch_drag) {\r\n\t\t\t\tcss.push(\"gantt_touch_\" + state.drag_mode);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (state.link_source_id == itemId){\r\n\t\t\tcss.push(\"gantt_link_source\");\r\n\t\t\tif(state.link_from_start) {\r\n\t\t\t\tcss.push(\"gantt_link_from_start\");\r\n\t\t\t}else{\r\n\t\t\t\tcss.push(\"gantt_link_from_end\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (state.link_target_id == itemId)\r\n\t\t\tcss.push(\"gantt_link_target\");\r\n\r\n\r\n\t\tif (cfg.highlight_critical_path && gantt.isCriticalTask) {\r\n\t\t\tif (gantt.isCriticalTask(task))\r\n\t\t\t\tcss.push(\"gantt_critical_task\");\r\n\t\t}\r\n\r\n\t\tif (state.link_landing_area &&\r\n\t\t\t(state.link_target_id && state.link_source_id) &&\r\n\t\t\t(state.link_target_id != state.link_source_id) &&\r\n\t\t\t(state.link_target_id == itemId || state.link_source_id == itemId)) {\r\n\r\n\t\t\tvar from_id = state.link_source_id;\r\n\t\t\tvar from_start = state.link_from_start;\r\n\t\t\tvar to_start = state.link_to_start;\r\n\r\n\t\t\tvar allowDrag = gantt.isLinkAllowed(from_id, itemId, from_start, to_start);\r\n\r\n\t\t\tvar dragClass = \"\";\r\n\t\t\tif (allowDrag) {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_allow\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_allow\";\r\n\t\t\t} else {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_deny\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_deny\";\r\n\t\t\t}\r\n\t\t\tcss.push(dragClass);\r\n\t\t}\r\n\t\treturn css.join(\" \");\r\n\t}\r\n\r\n\tfunction _render_pair(parent, css, task, content, config, margin) {\r\n\t\tvar state = gantt.getState();\r\n\t\tvar className, element;\r\n\t\tif (+task.start_date >= +state.min_date) {\r\n\t\t\tclassName = [css, config.rtl ? \"task_right\" : \"task_left\", \"task_start_date\"];\r\n\t\t\telement = content(className.join(\" \"));\r\n\t\t\telement.setAttribute(\"data-bind-property\", \"start_date\");\r\n\t\t\tif(margin){\r\n\t\t\t\telement.style.marginLeft = margin + \"px\";\r\n\t\t\t}\r\n\t\t\tparent.appendChild(element);\r\n\t\t}\r\n\r\n\t\tif (+task.end_date <= +state.max_date){\r\n\t\t\tclassName = [css, config.rtl ? \"task_left\" : \"task_right\", \"task_end_date\"];\r\n\t\t\telement = content(className.join(\" \"));\r\n\t\t\telement.setAttribute(\"data-bind-property\", \"end_date\");\r\n\t\t\tif(margin){\r\n\t\t\t\telement.style.marginRight = margin + \"px\";\r\n\t\t\t}\r\n\t\t\tparent.appendChild(element);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn _render_task_element;\r\n}\r\n\r\nexport default createTaskRenderer;","import isInViewPort from \"./viewport/is_bar_in_viewport\";\r\nimport getVisibleRange from \"./viewport/get_visible_bars_range\";\r\nimport createBaseBarRender from \"./task_bar_render\";\r\n\r\nexport default function createTaskRenderer(gantt){\r\n\tvar defaultRender = createBaseBarRender(gantt);\r\n\treturn {\r\n\t\trender: defaultRender,\r\n\t\tupdate: null,\r\n\t\t//getRectangle: getBarRectangle\r\n\t\tisInViewPort: isInViewPort,\r\n\t\tgetVisibleRange: getVisibleRange\r\n\t};\r\n};","export default function () {\r\n  // eslint-disable-next-line no-console\r\n  console.error(\"You are trying to use a Pro feature that is not available in the GPL version.\");\r\n  return {\r\n    render: function (){},\r\n    isInViewPort: function (){},\r\n    getVisibleRange: function (){}\r\n  };\r\n};\r\n","export default function(item, view, config){\r\n\treturn {\r\n\t\ttop: view.getItemTop(item.id),\r\n\t\theight: view.getItemHeight(item.id),\r\n\t\tleft: 0,\r\n\t\tright: Infinity\r\n\t};\r\n};","export default function getVisibleCellsRange(scale, viewport){\r\n\tvar firstCellIndex = 0;\r\n\tvar lastCellIndex = scale.left.length - 1;\r\n\tif(viewport){\r\n\t\tfor(var i = 0; i < scale.left.length; i++){\r\n\t\t\tvar left = scale.left[i];\r\n\t\t\tif(left < viewport.x){\r\n\t\t\t\tfirstCellIndex = i;\r\n\t\t\t}\r\n\t\t\tif(left > viewport.x_end){\r\n\t\t\t\tlastCellIndex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tstart: firstCellIndex,\r\n\t\tend: lastCellIndex\r\n\t};\r\n};","import isLegacyRender from \"../is_legacy_smart_render\";\r\n\r\nexport default function isColumnVisible(columnIndex, scale, viewPort, gantt){\r\n\tvar width = scale.width[columnIndex];\r\n\tif(width <= 0){\r\n\t\treturn false;\r\n\t}\r\n\tif(!gantt.config.smart_rendering || isLegacyRender(gantt)){\r\n\t\treturn true;\r\n\t}\r\n\tvar cellLeftCoord = scale.left[columnIndex] - width;\r\n\tvar cellRightCoord = scale.left[columnIndex] + width;\r\n\treturn (cellLeftCoord <= viewPort.x_end && cellRightCoord >= viewPort.x);//do not render skipped columns\r\n};","export default function (items, gantt){\r\n\tvar placeholderConfig = gantt.config.timeline_placeholder;\r\n\titems = items || [];\r\n\tif (placeholderConfig && items.filter(e => e.id === 'timeline_placeholder_task').length === 0){\r\n\t\tvar state = gantt.getState();\r\n\t\tvar lastTaskId = null;\r\n\t\tvar start_date = state.min_date;\r\n\t\tvar end_date = state.max_date;\r\n\t\tif (items.length){\r\n\t\t\tlastTaskId = items[items.length -1].id;\r\n\t\t}\r\n\t\tvar placeholderTask = {\r\n\t\t\tstart_date: start_date, \r\n\t\t\tend_date: end_date, \r\n\t\t\trow_height: placeholderConfig.height || 0,\r\n\t\t\tid: \"timeline_placeholder_task\", \r\n\t\t\tunscheduled: true,\r\n\t\t\tlastTaskId: lastTaskId, \r\n\t\t\tcalendar_id: placeholderConfig.calendar || \"global\",\r\n\t\t\t$source:[], \r\n\t\t\t$target: []\r\n\t\t};\r\n\t\titems.push(placeholderTask);\r\n\t}\r\n};","import isInViewPort from \"./viewport/is_link_in_viewport\";\r\nimport getVisibleRange from \"./viewport/factory/get_visible_link_range\";\r\nimport { childrenHaveBaselines, getMaxParentHeight } from \"./baseline_helper\";\r\n\r\n\r\nfunction createLinkRender(gantt){\r\n\r\nfunction _render_link_element(link, view, config) {\r\n\tvar source = gantt.getTask(link.source);\r\n\tif(source.hide_bar){\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar target = gantt.getTask(link.target);\r\n\tif(target.hide_bar){\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar pt = path_builder.get_endpoint(link, view, source, target);\r\n\tvar dy = pt.e_y - pt.y;\r\n\tvar dx = pt.e_x - pt.x;\r\n\tif(!dx && !dy){\r\n\t\treturn null;\r\n\t}\r\n\r\n\r\n\tvar dots = path_builder.get_points(link, view, source, target);\r\n\tconst lines = drawer.get_lines(dots, view);\r\n\r\n\tconst shapes = transform_lines_to_shapes(lines.filter(l => l.size > 0), config);\r\n  \r\n\tconst div = render_shapes(shapes, view, link, config);\r\n\r\n\r\n\tvar css = \"gantt_task_link\";\r\n\r\n\tif (link.color) {\r\n\t\tcss += \" gantt_link_inline_color\";\r\n\t}\r\n\tvar cssTemplate = gantt.templates.link_class ? gantt.templates.link_class(link) : \"\";\r\n\tif (cssTemplate) {\r\n\t\tcss += \" \" + cssTemplate;\r\n\t}\r\n\r\n\tif (config.highlight_critical_path && gantt.isCriticalLink) {\r\n\t\tif (gantt.isCriticalLink(link))\r\n\t\t\tcss += \" gantt_critical_link\";\r\n\t}\r\n\r\n\tdiv.className = css;\r\n\r\n\tif(view.$config.link_attribute){\r\n\t\tdiv.setAttribute(view.$config.link_attribute, link.id);\r\n\t\tdiv.setAttribute(\"link_id\", link.id);\r\n\t}\r\n\tif (link.color) {\r\n\t\tdiv.style.setProperty(\"--dhx-gantt-link-background\", link.color);\r\n\t}\r\n\r\n\tgantt._waiAria.linkAttr(link, div);\r\n\r\n\treturn div;\r\n}\r\n\r\n\tfunction render_shapes(shapes, view, link, config) {\r\n\t\tconst container = document.createElement(\"div\");\r\n\r\n\t\tshapes.forEach(shape => {\r\n\t\t\tlet element;\r\n\t\t\tif (shape.type === 'line') {\r\n\t\t\t\telement = drawer.render_line(shape.data, null, view, link.source);\r\n\t\t\t} else if (shape.type === 'corner') {\r\n\t\t\t\telement = drawer.render_corner(shape.data, view);\r\n\t\t\t}else if (shape.type === 'arrow') {\r\n\t\t\t\telement = drawer.render_arrow(shape.data, config);\r\n\t\t\t}\r\n\r\n\t\t\tcontainer.appendChild(element);\r\n\t\t});\r\n\r\n\t\treturn container;\r\n\t}\r\n\r\n\tfunction transform_lines_to_shapes(lines, config) {\r\n\t\tconst radius = config.link_radius || 4;\r\n\t\tconst arrowSize = config.link_arrow_size || 6; // Arrow size from config\r\n\t\tconst shapes = [];\r\n\t\r\n\t\tfor (let i = 0; i < lines.length; i++) {\r\n\t\t\tconst line = lines[i];\r\n\t\t\tconst nextLine = lines[i + 1];\r\n\t\r\n\t\t\tif (!nextLine || config.link_radius <= 1) {\r\n\t\t\t\tshapes.push({ type: 'line', data: line });\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\r\n\t\t\tif (line.direction !== nextLine.direction) {\r\n\t\t\t\tif(line.size < radius || nextLine.size < radius){\r\n\t\t\t\t\tshapes.push({ type: 'line', data: line });\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tline.size -= radius;\r\n\t\t\t\tshapes.push({ type: 'line', data: line });\r\n\t\r\n\t\t\t\tlet cornerX = line.x;\r\n\t\t\t\tlet cornerY = line.y - config.link_line_width / 2;\r\n\t\r\n\t\t\t\tswitch (line.direction) {\r\n\t\t\t\t\tcase 'right':\r\n\t\t\t\t\t\tcornerX += line.size;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'left':\r\n\t\t\t\t\t\tcornerX -= line.size;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'down':\r\n\t\t\t\t\t\tcornerY += line.size;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'up':\r\n\t\t\t\t\t\tcornerY -= line.size;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tconst corner = {\r\n\t\t\t\t\tx: cornerX,\r\n\t\t\t\t\ty: cornerY,\r\n\t\t\t\t\tdirection: { from: line.direction, to: nextLine.direction },\r\n\t\t\t\t\tradius\r\n\t\t\t\t};\r\n\t\t\t\tshapes.push({ type: 'corner', data: corner });\r\n\t\r\n\t\t\t\tswitch (nextLine.direction) {\r\n\t\t\t\t\tcase 'right':\r\n\t\t\t\t\t\tnextLine.x += radius;\r\n\t\t\t\t\t\tnextLine.size -= radius;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'left':\r\n\t\t\t\t\t\tnextLine.x -= radius;\r\n\t\t\t\t\t\tnextLine.size -= radius;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'down':\r\n\t\t\t\t\t\tnextLine.y += radius;\r\n\t\t\t\t\t\tnextLine.size -= radius;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'up':\r\n\t\t\t\t\t\tnextLine.y -= radius;\r\n\t\t\t\t\t\tnextLine.size -= radius;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tshapes.push({ type: 'line', data: line });\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tconst lastLine = lines[lines.length - 1];\r\n\t\r\n\t\tif (lastLine.direction === 'right' || lastLine.direction === 'left') {\r\n\t\t\tlastLine.size -= arrowSize*3/4; \r\n\t\r\n\t\t\tlet arrowX = lastLine.direction === 'right' ? (lastLine.x + lastLine.size) : lastLine.x - lastLine.size - arrowSize/2;\r\n\t\t\tlet arrowY = lastLine.y - (config.link_line_width / 2) - (arrowSize / 2) + 1;\r\n\t\r\n\t\t\tif(lastLine.direction === 'left'){\r\n\t\t\t\tarrowY -= 1;// left pointing arrows for some reason need adjustments\r\n\t\t\t\tarrowX -= 2;\r\n\t\t\t}else{\r\n\t\t\t\tarrowX -= 1;\r\n\t\t\t}\r\n\t\t\tconst arrow = {\r\n\t\t\t\tx: arrowX,\r\n\t\t\t\ty: arrowY,\r\n\t\t\t\tsize: arrowSize,\r\n\t\t\t\tdirection: lastLine.direction\r\n\t\t\t};\r\n\t\r\n\t\t\tshapes.push({ type: 'line', data: lastLine });\r\n\t\t\tshapes.push({ type: 'arrow', data: arrow });\r\n\t\t} else {\r\n\t\t\tshapes.push({ type: 'line', data: lastLine });\r\n\t\t}\r\n\t\r\n\t\treturn shapes;\r\n\t}\r\n\t\r\n\r\n\r\nvar drawer = {\r\n\tcurrent_pos: null,\r\n\tdirs: {\"left\": 'left', \"right\": 'right', \"up\": 'up', \"down\": 'down'},\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.current_pos = null;\r\n\t\tthis.path = [];\r\n\t},\r\n\tpoint: function (pos) {\r\n\t\tthis.current_pos = gantt.copy(pos);\r\n\t},\r\n\tget_lines: function (dots) {\r\n\t\tthis.clear();\r\n\t\tthis.point(dots[0]);\r\n\t\tfor (var i = 1; i < dots.length; i++) {\r\n\t\t\tthis.line_to(dots[i]);\r\n\t\t}\r\n\t\treturn this.get_path();\r\n\t},\r\n\tline_to: function (pos) {\r\n\t\tvar next = gantt.copy(pos);\r\n\t\tvar prev = this.current_pos;\r\n\r\n\t\tvar line = this._get_line(prev, next);\r\n\t\tthis.path.push(line);\r\n\t\tthis.current_pos = next;\r\n\t},\r\n\tget_path: function () {\r\n\t\treturn this.path;\r\n\t},\r\n\tget_wrapper_sizes: function (v, view, itemId) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\ty = v.y - (wrapper_size) / 2;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - v.size - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y - v.size,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y /*- wrapper_size/2*/,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t},\r\n\tget_line_sizes: function (v, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\tline_size = config.link_line_width,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\tsize = v.size + line_size;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: line_size,\r\n\t\t\t\t\twidth: size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: size,\r\n\t\t\t\t\twidth: line_size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\r\n\t\treturn res;\r\n\t},\r\n\trender_line: function (v, end, view, itemId) {\r\n\t\tvar pos = this.get_wrapper_sizes(v, view, itemId);\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.style.cssText = [\r\n\t\t\t\"top:\" + pos.top + \"px\",\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"height:\" + pos.height + \"px\",\r\n\t\t\t\"width:\" + pos.width + \"px\"\r\n\t\t].join(';');\r\n\t\twrapper.className = \"gantt_line_wrapper\";\r\n\r\n\t\tvar innerPos = this.get_line_sizes(v, view);\r\n\t\tvar inner = document.createElement(\"div\");\r\n\t\tinner.style.cssText = [\r\n\t\t\t\"height:\" + innerPos.height + \"px\",\r\n\t\t\t\"width:\" + innerPos.width + \"px\",\r\n\t\t\t\"margin-top:\" + innerPos.marginTop + \"px\",\r\n\t\t\t\"margin-left:\" + innerPos.marginLeft + \"px\"\r\n\t\t].join(\";\");\r\n\r\n\t\tinner.className = \"gantt_link_line_\" + v.direction;\r\n\t\twrapper.appendChild(inner);\r\n\r\n\t\treturn wrapper;\r\n\t},\r\n\r\n\trender_corner: function (corner, view) {\r\n\t\tconst radius = corner.radius;\r\n\t\tconst config = view.$getConfig();\r\n\t\tconst lineWidth = config.link_line_width || 2;\r\n\t\tconst cornerDiv = document.createElement(\"div\");\r\n\t\r\n\t\tcornerDiv.classList.add(\"gantt_link_corner\");\r\n\t\tcornerDiv.classList.add(`gantt_link_corner_${corner.direction.from}_${corner.direction.to}`);\r\n\t\r\n\t\tcornerDiv.style.width = `${radius}px`;\r\n\t\tcornerDiv.style.height = `${radius}px`;\r\n\t\r\n\t\tlet borderVertical;\r\n\t\tlet borderHorizontal;\r\n\r\n\t\tif (corner.direction.from === 'right' && corner.direction.to === 'down') {\r\n\t\t\tborderVertical = \"Right\";\r\n\t\t\tborderHorizontal = \"Top\";\r\n\t\t\tcornerDiv.style.left = `${corner.x - config.link_line_width/2}px`;\r\n\t\t\tcornerDiv.style.top = `${corner.y}px`;\r\n\t\t} else if (corner.direction.from === 'down' && corner.direction.to === 'right') {\r\n\t\t\tborderVertical = \"Left\";\r\n\t\t\tborderHorizontal = \"Bottom\";\r\n\t\t\tcornerDiv.style.left = `${corner.x - config.link_line_width/2}px`;\r\n\t\t\tcornerDiv.style.top = `${corner.y}px`;\r\n\t\t} else if (corner.direction.from === 'right' && corner.direction.to === 'up') {\r\n\t\t\tborderVertical = \"Right\";\r\n\t\t\tborderHorizontal = \"Bottom\";\r\n\t\t\tcornerDiv.style.left = `${corner.x - config.link_line_width/2}px`;\r\n\t\t\tcornerDiv.style.top = `${corner.y - radius}px`;\r\n\t\t} else if (corner.direction.from === 'up' && corner.direction.to === 'right') {\r\n\t\t\tborderVertical = \"Left\";\r\n\t\t\tborderHorizontal = \"Top\";\r\n\t\t\tcornerDiv.style.left = `${corner.x - config.link_line_width/2}px`;\r\n\t\t\tcornerDiv.style.top = `${corner.y - radius}px`;\r\n\t\t} else if (corner.direction.from === 'left' && corner.direction.to === 'down') {\r\n\t\t\tborderVertical = \"Left\";\r\n\t\t\tborderHorizontal = \"Top\";\r\n\t\t\tcornerDiv.style.left = `${corner.x - radius - config.link_line_width/2}px`;\r\n\t\t\tcornerDiv.style.top = `${corner.y}px`;\r\n\t\t} else if (corner.direction.from === 'down' && corner.direction.to === 'left') {\r\n\t\t\tborderVertical = \"Right\";\r\n\t\t\tborderHorizontal = \"Bottom\";\r\n\t\t\tcornerDiv.style.left = `${corner.x - radius - config.link_line_width/2}px`;\r\n\t\t\tcornerDiv.style.top = `${corner.y}px`;\r\n\t\t} else if (corner.direction.from === 'left' && corner.direction.to === 'up') {\r\n\t\t\tborderVertical = \"Left\";\r\n\t\t\tborderHorizontal = \"Bottom\";\r\n\t\t\tcornerDiv.style.left = `${corner.x - radius - config.link_line_width/2}px`;\r\n\t\t\tcornerDiv.style.top = `${corner.y - radius}px`;\r\n\t\t} else if (corner.direction.from === 'up' && corner.direction.to === 'left') {\r\n\t\t\tborderVertical = \"Right\";\r\n\t\t\tborderHorizontal = \"Top\";\r\n\t\t\tcornerDiv.style.left = `${corner.x - radius - config.link_line_width/2}px`;\r\n\t\t\tcornerDiv.style.top = `${corner.y - radius}px`;\r\n\t\t}\r\n\r\n\t\tcornerDiv.style[`border${borderHorizontal}Width`] = `${lineWidth}px`;\r\n\t\tcornerDiv.style[`border${borderVertical}Width`] = `${lineWidth}px`;\r\n\t\tcornerDiv.style[`border${borderVertical}Style`] = `solid`;\r\n\t\tcornerDiv.style[`border${borderHorizontal}Style`] = `solid`;\r\n\t\tcornerDiv.style[`border${borderHorizontal}${borderVertical}Radius`] = `${radius}px`;\r\n\r\n\t\r\n\t\treturn cornerDiv;\r\n\t},\r\n\r\n\trender_arrow(arrow, config) {\r\n\t\tvar div = document.createElement(\"div\");\r\n\t\tvar top = arrow.y;\r\n\t\tvar left = arrow.x;\r\n\t\r\n\t\tvar size = config.link_arrow_size;\r\n\t\tdiv.style.setProperty(\"--dhx-gantt-icon-size\", `${size}px`);\r\n\t\r\n\t\tvar className = \"gantt_link_arrow gantt_link_arrow_\" + arrow.direction;\r\n\r\n\t\tdiv.style.top = top + \"px\";\r\n\t\tdiv.style.left = left + 'px';\r\n\t\tdiv.className = className;\r\n\t\r\n\t\treturn div;\r\n\t},\r\n\t\r\n\t_get_line: function (from, to) {\r\n\t\tvar direction = this.get_direction(from, to);\r\n\t\tvar vect = {\r\n\t\t\tx: from.x,\r\n\t\t\ty: from.y,\r\n\t\t\tdirection: this.get_direction(from, to)\r\n\t\t};\r\n\t\tif (direction == this.dirs.left || direction == this.dirs.right) {\r\n\t\t\tvect.size = Math.abs(from.x - to.x);\r\n\t\t} else {\r\n\t\t\tvect.size = Math.abs(from.y - to.y);\r\n\t\t}\r\n\t\treturn vect;\r\n\t},\r\n\tget_direction: function (from, to) {\r\n\t\tvar direction = 0;\r\n\t\tif (to.x < from.x) {\r\n\t\t\tdirection = this.dirs.left;\r\n\t\t} else if (to.x > from.x) {\r\n\t\t\tdirection = this.dirs.right;\r\n\t\t} else if (to.y > from.y) {\r\n\t\t\tdirection = this.dirs.down;\r\n\t\t} else {\r\n\t\t\tdirection = this.dirs.up;\r\n\t\t}\r\n\t\treturn direction;\r\n\t}\r\n\r\n};\r\n\r\nvar path_builder = {\r\n\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.path = [];\r\n\t},\r\n\tcurrent: function () {\r\n\t\treturn this.path[this.path.length - 1];\r\n\t},\r\n\tpoint: function (next) {\r\n\t\tif (!next)\r\n\t\t\treturn this.current();\r\n\r\n\t\tthis.path.push(gantt.copy(next));\r\n\t\treturn next;\r\n\t},\r\n\tpoint_to: function (direction, diff, point) {\r\n\t\tif (!point)\r\n\t\t\tpoint = gantt.copy(this.point());\r\n\t\telse\r\n\t\t\tpoint = {x: point.x, y: point.y};\r\n\t\tvar dir = drawer.dirs;\r\n\t\tswitch (direction) {\r\n\t\t\tcase (dir.left):\r\n\t\t\t\tpoint.x -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.right):\r\n\t\t\t\tpoint.x += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.up):\r\n\t\t\t\tpoint.y -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.down):\r\n\t\t\t\tpoint.y += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn this.point(point);\r\n\t},\r\n\tget_points: function (link, view, source, target) {\r\n\t\tvar pt = this.get_endpoint(link, view, source, target);\r\n\t\tvar xy = gantt.config;\r\n\r\n\t\tvar dy = pt.e_y - pt.y;\r\n\t\tvar dx = pt.e_x - pt.x;\r\n\r\n\t\tvar dir = drawer.dirs;\r\n\r\n\t\tvar rowHeight = view.getItemHeight(link.source);\r\n\r\n\t\tthis.clear();\r\n\t\tthis.point({x: pt.x, y: pt.y});\r\n\r\n\t\tvar shiftX = 2 * xy.link_arrow_size;//just random size for first line\r\n\t\tvar lineType = this.get_line_type(link, view.$getConfig());\r\n\r\n\t\tvar forward = (pt.e_x > pt.x);\r\n\t\tif (lineType.from_start && lineType.to_start) {\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\r\n\t\t} else if (!lineType.from_start && lineType.to_start) {\r\n\t\t\t// GS-2619. No need to add loops for the split tasks (zero dy means the tasks are on the same line)\r\n\t\t\tif (dy !== 0){\r\n\t\t\t\tforward = (pt.e_x > (pt.x + 2 * shiftX));\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tdx -= shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx -= 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\r\n\t\t\t\tthis.point_to(dir.down, sign * (rowHeight / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (rowHeight / 2)));\r\n\t\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\t}\r\n\r\n\t\t} else if (!lineType.from_start && !lineType.to_start) {\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t} else if (lineType.from_start && !lineType.to_start) {\r\n\t\t\t// GS-2619. No need to add loops for the split tasks (zero dy means the tasks are on the same line)\r\n\t\t\tif (dy !== 0){\r\n\t\t\t\tforward = (pt.e_x > (pt.x - 2 * shiftX));\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\r\n\t\t\tif (!forward) {\r\n\t\t\t\tdx += shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx += 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\t\t\t\tthis.point_to(dir.down, sign * (rowHeight / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (rowHeight / 2)));\r\n\t\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this.path;\r\n\t},\r\n\tget_line_type: function(link, config){\r\n\t\tvar types = config.links;\r\n\t\tvar from_start = false, to_start = false;\r\n\t\tif (link.type == types.start_to_start) {\r\n\t\t\tfrom_start = to_start = true;\r\n\t\t} else if (link.type == types.finish_to_finish) {\r\n\t\t\tfrom_start = to_start = false;\r\n\t\t} else if (link.type == types.finish_to_start) {\r\n\t\t\tfrom_start = false;\r\n\t\t\tto_start = true;\r\n\t\t} else if (link.type == types.start_to_finish) {\r\n\t\t\tfrom_start = true;\r\n\t\t\tto_start = false;\r\n\t\t} else {\r\n\t\t\tgantt.assert(false, \"Invalid link type\");\r\n\t\t}\r\n\r\n\t\tif(config.rtl){\r\n\t\t\tfrom_start = !from_start;\r\n\t\t\tto_start = !to_start;\r\n\t\t}\r\n\r\n\t\treturn {from_start: from_start, to_start: to_start};\r\n\t},\r\n\r\n\tget_endpoint: function (link, view, source, target) {\r\n\t\tvar config = view.$getConfig();\r\n\r\n\t\tvar lineType = this.get_line_type(link, config);\r\n\t\tvar from_start = lineType.from_start,\r\n\t\t\tto_start = lineType.to_start;\r\n\r\n\t\tvar from = getMilestonePosition(source, view, config),\r\n\t\t\tto = getMilestonePosition(target, view, config);\r\n\r\n\t\treturn {\r\n\t\t\tx: from_start ? from.left : (from.left + from.width),\r\n\t\t\te_x: to_start ? to.left : (to.left + to.width),\r\n\t\t\ty: from.top + (from.rowHeight/2) - 1,\r\n\t\t\te_y: to.top + (to.rowHeight/2) - 1\r\n\t\t};\r\n\t}\r\n};\r\n\r\nfunction getMilestonePosition(task, view, config){\r\n\tvar pos = view.getItemPosition(task);\r\n\r\n\t// GS-2270: Link to the split children shouldn't exceed the parent row height\r\n\tlet splitParams = getMaxParentHeight(gantt, view, task);\r\n\tlet maxHeight = splitParams.maxHeight;\r\n\r\n\tlet splitChild = splitParams.splitChild;\r\n\tconst baselinesOnDifferentRow = gantt.config.baselines && (gantt.config.baselines.render_mode == \"separateRow\" || gantt.config.baselines.render_mode == \"individualRow\");\r\n\tconst baselines = baselinesOnDifferentRow && task.baselines && task.baselines.length;\r\n\r\n\tif (splitParams.shrinkHeight){\r\n\t\tpos.rowHeight = maxHeight;\r\n\t}\r\n\r\n\tlet milestoneWidth;\r\n\tlet milestoneTask = gantt.getTaskType(task.type) == config.types.milestone;\r\n\tif(milestoneTask){\r\n\t\tlet milestoneHeight = view.getBarHeight(task.id, true);\r\n\t\tmilestoneWidth = Math.sqrt(2*milestoneHeight*milestoneHeight);\r\n\t\tif (splitParams.shrinkHeight && maxHeight < milestoneHeight){\r\n\t\t\tmilestoneHeight = maxHeight;\r\n\t\t\tmilestoneWidth = maxHeight;\r\n\t\t}\r\n\t\tpos.left -= milestoneWidth / 2;\r\n\t\tpos.width = milestoneWidth;\r\n\t} \r\n\tif (splitChild){\r\n\t\tif (maxHeight >= pos.height) {\r\n\t\t\tconst siblingBaselines = childrenHaveBaselines(gantt, task.parent);\r\n\t\t\tif (baselines || siblingBaselines){\r\n\t\t\t\tif (milestoneTask){\r\n\t\t\t\t\tpos.rowHeight = pos.height + 4;\r\n\t\t\t\t\tpos.left += (pos.width - pos.rowHeight + 4) / 2;\r\n\t\t\t\t\tpos.width = pos.rowHeight - 3;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tpos.rowHeight = pos.height + 6;\r\n\t\t\t\t}\r\n\t\t\t} else if (milestoneTask) {\r\n\t\t\t\tpos.left += (milestoneWidth - pos.height) / 2;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tpos.rowHeight = maxHeight + 2;\r\n\t\t\tif (milestoneTask){\r\n\t\t\t\tpos.left += (pos.width - pos.rowHeight + 4) / 2;\r\n\t\t\t\tpos.width = pos.rowHeight - 3;\r\n\t\t\t}\r\n\t\t}\r\n\t} else if (baselines){\r\n\t\tpos.rowHeight = pos.height + 4;\r\n\t}\r\n\r\n\treturn pos;\r\n}\r\n\r\n\r\nreturn {\r\n\trender: _render_link_element,\r\n\tupdate: null,\r\n\t//getRectangle: getLinkRectangle\r\n\tisInViewPort: isInViewPort,\r\n\tgetVisibleRange: getVisibleRange()\r\n};\r\n}\r\n\r\nexport default createLinkRender;","export default function(item, viewport, view, config, gantt){\r\n    // GS-2481 and GS-1715, don't remove selected task when using keyboard shortcuts and when the inline editor is opened\r\n    if(gantt.$ui.getView(\"grid\") && ((gantt.config.keyboard_navigation && gantt.getSelectedId()) || (gantt.ext.inlineEditors && gantt.ext.inlineEditors.getState().id))) {\r\n\t\t//GS-2661: selected task might be collapsed\r\n\t\tif(!item.$expanded_branch) return false;\r\n\t\treturn true;\r\n\t}\r\n    var top = view.getItemTop(item.id);\r\n\tvar height = view.getItemHeight(item.id);\r\n\r\n\tif(top > viewport.y_end || top + height < viewport.y){\r\n\t\treturn false;\r\n\t}\r\n\r\n\treturn true;\r\n};","import * as helpers from \"../utils/helpers\";\r\n\r\nexport default function createResourceTimelineBuilder(gantt){\r\n\r\n\tlet resourceTaskCache = {};\r\n\r\n\tgantt.$data.tasksStore.attachEvent(\"onStoreUpdated\", function(){\r\n\t\tresourceTaskCache = {};\r\n\t});\r\n\r\n\tfunction getResourceLoad(resource, resourceProperty, scale, timeline){\r\n\t\tconst cacheKey = resource.id + \"_\" + resourceProperty  + \"_\" + scale.unit + \"_\" + scale.step;\r\n\t\tlet res;\r\n\t\tif (!resourceTaskCache[cacheKey]) {\r\n\t\t\tres = resourceTaskCache[cacheKey] = calculateResourceLoad(resource, resourceProperty, scale, timeline);\r\n\r\n\t\t} else {\r\n\t\t\tres = resourceTaskCache[cacheKey];\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction calculateResourceLoadFromAssignments(items, scale, assignmentsPassed){\r\n\t\tconst scaleUnit = scale.unit;\r\n\t\tconst scaleStep = scale.step;\r\n\t\tconst timegrid = {};\r\n\r\n\t\tconst precalculatedTimes = {};\r\n\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\tconst item = items[i];\r\n\t\t\tlet task = item;\r\n\t\t\tif(assignmentsPassed){\r\n\t\t\t\ttask = gantt.getTask(item.task_id);\r\n\t\t\t}\r\n\t\t\tif (task.unscheduled){\r\n\t\t\t\tcontinue; // do not process assignments for unscheduled tasks\r\n\t\t\t}\r\n\t\t\tlet minDate = (item.start_date || task.start_date);\r\n\t\t\tlet maxDate = (item.end_date || task.end_date);\r\n\t\t\tif(assignmentsPassed){\r\n\t\t\t\tif(item.start_date){\r\n\t\t\t\t\tminDate = new Date(Math.max(item.start_date.valueOf(), task.start_date.valueOf()));\r\n\t\t\t\t}\r\n\t\t\t\tif(item.end_date){\r\n\t\t\t\t\tmaxDate = new Date(Math.min(item.end_date.valueOf(), task.end_date.valueOf()));\r\n\t\t\t\t}\r\n\t\t\t\t// GS-2063: handle case with fixedDates mode\r\n\t\t\t\tif(item.mode && item.mode == \"fixedDates\"){\r\n\t\t\t\t\tminDate = item.start_date;\r\n\t\t\t\t\tmaxDate = item.end_date;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet firstColumn = helpers.findBinary(scale.trace_x, minDate.valueOf());\r\n\t\t\tlet minScaleDate = new Date(scale.trace_x[firstColumn] || gantt.date[scaleUnit + \"_start\"](new Date(minDate)));\r\n\t\t\t// GS-2307: need to take into account that task could start before the min scale date\r\n\t\t\t// so the task would be added to timegrid\r\n\t\t\tlet currDate = new Date(Math.min(minDate.valueOf(), minScaleDate.valueOf())); \r\n\r\n\t\t\tlet calendar = gantt.config.work_time ? gantt.getTaskCalendar(task) : gantt;\r\n\t\t\tprecalculatedTimes[calendar.id] = {};\r\n\t\t\twhile (currDate < maxDate) {\r\n\t\t\t\tconst cachedTimes = precalculatedTimes[calendar.id];\r\n\r\n\t\t\t\tlet date = currDate;\r\n\t\t\t\tconst timestamp = date.valueOf();\r\n\r\n\t\t\t\tcurrDate = gantt.date.add(currDate, scaleStep, scaleUnit);\r\n\r\n\t\t\t\tif(cachedTimes[timestamp] === false){\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!timegrid[timestamp]){\r\n\t\t\t\t\ttimegrid[timestamp] = {tasks: [], assignments: []};\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttimegrid[timestamp].tasks.push(task);\r\n\t\t\t\tif(assignmentsPassed){\r\n\t\t\t\t\ttimegrid[timestamp].assignments.push(item);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn timegrid;\r\n\t}\r\n\r\n\tfunction calculateResourceLoad(resource, resourceProperty, scale, timeline) {\r\n\r\n\t\tlet items;\r\n\t\tlet assignmentsPassed = false;\r\n\t\tlet timegrid = {};\r\n\r\n\t\tif(gantt.config.process_resource_assignments && resourceProperty === gantt.config.resource_property){\r\n\t\t\tif(resource.$role == \"task\"){\r\n\t\t\t\titems = gantt.getResourceAssignments(resource.$resource_id, resource.$task_id);\r\n\t\t\t}else{\r\n\t\t\t\titems = gantt.getResourceAssignments(resource.id);\r\n\t\t\t}\r\n\r\n\t\t\tassignmentsPassed = true;\r\n\t\t}else if(resource.$role == \"task\"){\r\n\t\t\titems = [];\r\n\t\t}else{\r\n\t\t\titems = gantt.getTaskBy(resourceProperty, resource.id);\r\n\t\t}\r\n\r\n\t\ttimegrid = calculateResourceLoadFromAssignments(items, scale, assignmentsPassed);\r\n\t\tconst scaleUnit = scale.unit;\r\n\t\tconst scaleStep = scale.step;\r\n\r\n\t\tconst timetable = [];\r\n\t\tlet start, end, tasks, assignments, cell;\r\n\t\tconst config = timeline.$getConfig();\r\n\r\n\t\tfor(let i = 0; i < scale.trace_x.length; i++){\r\n\t\t\tstart = new Date(scale.trace_x[i]);\r\n\t\t\tend = gantt.date.add(start, scaleStep, scaleUnit);\r\n\t\t\tcell = timegrid[start.valueOf()] || {};\r\n\t\t\ttasks = cell.tasks || [];\r\n\t\t\tassignments = cell.assignments || [];\r\n\t\t\tif(tasks.length || config.resource_render_empty_cells){\r\n\t\t\t\ttimetable.push({\r\n\t\t\t\t\tstart_date: start,\r\n\t\t\t\t\tend_date: end,\r\n\t\t\t\t\ttasks: tasks,\r\n\t\t\t\t\tassignments: assignments\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\ttimetable.push(null);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn timetable;\r\n\t}\r\n\r\n\r\n\r\n\treturn getResourceLoad;\r\n};","import * as domHelpers from \"../utils/dom_helpers\";\r\nimport isPlaceholderTask from \"../../../utils/placeholder_task\";\r\n\r\nfunction _init_dnd(gantt, grid) {\r\n\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\tif(!grid.$config.bind || !gantt.getDatastore(grid.$config.bind)){\r\n\t\treturn;\r\n\t}\r\n\r\n\tfunction locate(e){\r\n\t\treturn domHelpers.locateAttribute(e, grid.$config.item_attribute);\r\n\t}\r\n\r\n\tfunction getStore(){\r\n\t\treturn gantt.getDatastore(grid.$config.bind);\r\n\t}\r\n\r\n\tfunction checkPlaceholderTask(id){\r\n\t\treturn isPlaceholderTask(id, gantt, getStore());\r\n\t}\r\n\r\n\tvar dnd = new DnD(grid.$grid_data, {updates_per_second: 60});\r\n\tif (gantt.defined(grid.$getConfig().dnd_sensitivity))\r\n\t\tdnd.config.sensitivity = grid.$getConfig().dnd_sensitivity;\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tif (!el) return false;\r\n\t\tif (gantt.hideQuickInfo) gantt.hideQuickInfo();\r\n\r\n\t\tif (domHelpers.closest(e.target, \".gantt_grid_editor_placeholder\")){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar id = el.getAttribute(grid.$config.item_attribute);\r\n\t\tif (checkPlaceholderTask(id)) return false;\r\n\r\n\t\tvar datastore = getStore();\r\n\r\n\t\tvar task = datastore.getItem(id);\r\n\r\n\t\tif (gantt.isReadonly(task))\r\n\t\t\treturn false;\r\n\r\n\t\tdnd.config.initial_open_state = task.$open;\r\n\t\tif (!gantt.callEvent(\"onRowDragStart\", [id, e.target || e.srcElement, e])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tdnd.config.marker.innerHTML = el.outerHTML;\r\n\t\tvar element = dnd.config.marker.firstChild;\r\n\t\tif(element){\r\n\t\t\telement.style.position = \"static\";\r\n\t\t}\r\n\r\n\t\tdnd.config.id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar store = getStore();\r\n\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\tdnd.config.index = store.getBranchIndex(dnd.config.id);\r\n\t\tdnd.config.parent = task.parent;\r\n\t\ttask.$open = false;\r\n\t\ttask.$transparent = true;\r\n\t\tthis.refreshData();\r\n\t}, gantt));\r\n\r\n\tdnd.lastTaskOfLevel = function (level) {\r\n\t\tvar last_item = null;\r\n\t\tvar store = getStore();\r\n\t\tvar tasks = store.getItems();\r\n\t\tfor (var i = 0, len = tasks.length; i < len; i++) {\r\n\t\t\tif (tasks[i].$level == level) {\r\n\t\t\t\tlast_item = tasks[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn last_item ? last_item.id : null;\r\n\t};\r\n\tdnd._getGridPos = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\t\t// row offset\r\n\t\tvar x = pos.x + grid.$grid.scrollLeft;\r\n\t\tvar y = e.pos.y - 10;\r\n\r\n\t\tvar rowHeight = grid.getItemHeight(dnd.config.id);\r\n\t\t// prevent moving row out of grid_data container\r\n\t\tif (y < pos.y) y = pos.y;\r\n\t\tvar gridHeight = grid.getTotalHeight();\r\n\t\tif (y > pos.y + gridHeight - rowHeight) y = pos.y + gridHeight - rowHeight;\r\n\t\tconst maxBottom = pos.y + pos.height;\r\n\t\tif (y > maxBottom - rowHeight) {\r\n\t\t\ty = maxBottom - rowHeight;\r\n\t\t}\r\n\r\n\t\tpos.x = x;\r\n\t\tpos.y = y;\r\n\t\treturn pos;\r\n\t}, gantt);\r\n\tdnd._getTargetY = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\t\tvar scrollPos = grid.$state.scrollTop || 0;\r\n\t\tvar maxBottom = gantt.$grid_data.getBoundingClientRect().height + scrollPos;\r\n\r\n\t\tvar y = e.pageY - pos.y + scrollPos;\r\n\t\tif (y > maxBottom) {\r\n\t\t\ty = maxBottom;\r\n\t\t} else if (y < scrollPos) {\r\n\t\t\ty = scrollPos;\r\n\t\t}\r\n\t\treturn y;\r\n\t}, gantt);\r\n\tdnd._getTaskByY = gantt.bind(function (y, dropIndex) {\r\n\r\n\t\tvar store = getStore();\r\n\r\n\t\ty = y || 0;\r\n\r\n\t\tvar index = grid.getItemIndexByTopPosition(y);\r\n\t\tindex = dropIndex < index ? index - 1 : index;\r\n\r\n\t\tif (index > store.countVisible() - 1)\r\n\t\t\treturn null;\r\n\r\n\t\treturn store.getIdByIndex(index);\r\n\t}, gantt);\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function (obj, e) {\r\n\t\tvar gridDataSizes = gantt.$grid_data.getBoundingClientRect();\r\n\t\tvar maxBottom = gridDataSizes.height + gridDataSizes.y + (grid.$state.scrollTop || 0) + window.scrollY;\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = dnd._getGridPos(e);\r\n\r\n\t\tgantt._waiAria.reorderMarkerAttr(dd.marker);\r\n\r\n\t\tvar config = grid.$getConfig(),\r\n\t\t\tstore = getStore();\r\n\r\n\t\t// setting position of row\r\n\t\tif (pos.y < maxBottom) {\r\n\t\t\tdd.marker.style.top = pos.y + \"px\";\r\n\t\t} else {\r\n\t\t\tdd.marker.style.top = maxBottom + \"px\";\r\n\t\t}\r\n\t\tdd.marker.style.left = pos.x + 10 + \"px\";\r\n\t\tconst containerSize = domHelpers.getNodePosition(gantt.$root);\r\n\t\tif (pos.width > containerSize.width){\r\n\t\t\tdd.marker.style.width = containerSize.width - 10 - 2 + \"px\";\r\n\t\t\tdd.marker.style.overflow = \"hidden\";\t\r\n\t\t}\r\n\r\n\t\t// highlight row when mouseover\r\n\t\tvar item = store.getItem(dnd.config.id);\r\n\t\tvar targetY = dnd._getTargetY(e);\r\n\t\tvar el = dnd._getTaskByY(targetY, store.getIndexById(item.id));\r\n\r\n\t\tif (!store.exists(el)) {\r\n\t\t\tel = dnd.lastTaskOfLevel(config.order_branch_free ? item.$level : 0);\r\n\t\t\tif (el == dnd.config.id) {\r\n\t\t\t\tel = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction allowedLevel(next, item) {\r\n\t\t\treturn (!(store.isChildOf(over.id, item.id)) && (next.$level == item.$level || config.order_branch_free));\r\n\t\t}\r\n\r\n\t\tif (store.exists(el)) {\r\n\t\t\tvar over = store.getItem(el);\r\n\r\n\t\t\tvar itemTop = grid.getItemTop(over.id);\r\n\t\t\tvar itemHeight = grid.getItemHeight(over.id);\r\n\t\t\tif (itemTop + itemHeight / 2 < targetY) {\r\n\t\t\t\t//hovering over bottom part of item, check can be drop to bottom\r\n\t\t\t\tvar index = store.getIndexById(over.id);\r\n\t\t\t\tvar nextId = store.getNext(over.id);//adds +1 when hovering over placeholder\r\n\t\t\t\tvar next = store.getItem(nextId);\r\n\t\t\t\tif (checkPlaceholderTask(nextId)){\r\n\t\t\t\t\tvar prevId = store.getPrev(next.id);\r\n\t\t\t\t\tnext = store.getItem(prevId);\r\n\t\t\t\t}\r\n\t\t\t\tif (next) {\r\n\t\t\t\t\tif (next.id != item.id) {\r\n\t\t\t\t\t\tover = next; //there is a valid target\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (config.order_branch_free) {\r\n\t\t\t\t\t\t\tif (!(store.isChildOf(item.id, over.id) && store.getChildren(over.id).length == 1))\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tstore.move(item.id, store.getBranchIndex(over.id) + 1, store.getParent(over.id));\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//we at end of the list, check and drop at the end of list\r\n\t\t\t\t\tnextId = store.getIdByIndex(index);\r\n\t\t\t\t\tnext = store.getItem(nextId);\r\n\r\n\t\t\t\t\tif (checkPlaceholderTask(nextId)){\r\n\t\t\t\t\t\tvar prevId = store.getPrev(next.id);\r\n\t\t\t\t\t\tnext = store.getItem(prevId);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (allowedLevel(next, item) && next.id != item.id) {\r\n\t\t\t\t\t\tstore.move(item.id, -1, store.getParent(next.id));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (config.order_branch_free) {\r\n\t\t\t\tif (over.id != item.id && allowedLevel(over, item) && !checkPlaceholderTask(over.id)) {\r\n\t\t\t\t\tif (!store.hasChild(over.id)) {\r\n\t\t\t\t\t\tover.$open = true;\r\n\t\t\t\t\t\tstore.move(item.id, -1, over.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (store.getIndexById(over.id) || itemHeight / 3 < targetY) return;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//if item is on different level, check the one before it\r\n\t\t\tvar index = store.getIndexById(over.id),\r\n\t\t\t\tprevId = store.getIdByIndex(index - 1);\r\n\r\n\t\t\tvar prev = store.getItem(prevId);\r\n\r\n\t\t\tvar shift = 1;\r\n\t\t\twhile ((!prev || prev.id == over.id) && index - shift >= 0) {\r\n\r\n\t\t\t\tprevId = store.getIdByIndex(index - shift);\r\n\t\t\t\tprev = store.getItem(prevId);\r\n\t\t\t\tshift++;\r\n\t\t\t}\r\n\r\n\t\t\tif (item.id == over.id || checkPlaceholderTask(over.id)) return;\r\n\t\t\t//replacing item under cursor\r\n\t\t\tif (allowedLevel(over, item) && item.id != over.id) {\r\n\t\t\t\tstore.move(item.id, 0, 0, over.id);\r\n\r\n\t\t\t} else if (over.$level == item.$level - 1 && !store.getChildren(over.id).length) {\r\n\t\t\t\tstore.move(item.id, 0, over.id);\r\n\r\n\t\t\t} else if (prev && (allowedLevel(prev, item)) && (item.id != prev.id)) {\r\n\t\t\t\tstore.move(item.id, -1, store.getParent(prev.id));\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function () {\r\n\t\tvar store = getStore();\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\ttask.$transparent = false;\r\n\t\ttask.$open = dnd.config.initial_open_state;\r\n\r\n\t\tif (this.callEvent(\"onBeforeRowDragEnd\", [dnd.config.id, dnd.config.parent, dnd.config.index]) === false) {\r\n\t\t\tstore.move(dnd.config.id, dnd.config.index, dnd.config.parent);\r\n\t\t\ttask.$drop_target = null;\r\n\t\t} else {\r\n\t\t\tthis.callEvent(\"onRowDragEnd\", [dnd.config.id, task.$drop_target]);\r\n\t\t}\r\n\t\tgantt.render();\r\n\t\tthis.refreshData();\r\n\t}, gantt));\r\n}\r\n\r\nexport default {\r\n\tinit: _init_dnd\r\n};","/**\r\n * The state object for order branch drag and drop\r\n */\r\n\r\nimport * as utils from \"../../../../utils/utils\";\r\n\r\nexport default {\r\n\tcreateDropTargetObject: function createDropTargetObject(parent) {\r\n\t\tvar res = {\r\n\t\t\ttargetParent: null,\r\n\t\t\ttargetIndex: 0,\r\n\t\t\ttargetId: null,\r\n\t\t\tchild: false,\r\n\t\t\tnextSibling: false,\r\n\t\t\tprevSibling: false\r\n\t\t};\r\n\r\n\t\tif (parent) {\r\n\t\t\tutils.mixin(res, parent, true);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\tnextSiblingTarget: function nextSiblingTarget(dndTaskId, targetTaskId, store) {\r\n\t\tvar result = this.createDropTargetObject();\r\n\t\tresult.targetId = targetTaskId;\r\n\t\tresult.nextSibling = true;\r\n\t\tresult.targetParent = store.getParent(result.targetId);\r\n\t\tresult.targetIndex = store.getBranchIndex(result.targetId);\r\n\t\tif(store.getParent(dndTaskId) != result.targetParent || result.targetIndex < store.getBranchIndex(dndTaskId)){\r\n\t\t\tresult.targetIndex += 1;\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tprevSiblingTarget: function prevSiblingTarget(dndTaskId, targetTaskId, store) {\r\n\t\tvar result = this.createDropTargetObject();\r\n\t\tresult.targetId = targetTaskId;\r\n\t\tresult.prevSibling = true;\r\n\t\tresult.targetParent = store.getParent(result.targetId);\r\n\t\tresult.targetIndex = store.getBranchIndex(result.targetId);\r\n\t\tif(store.getParent(dndTaskId) == result.targetParent && result.targetIndex > store.getBranchIndex(dndTaskId)){\r\n\t\t\tresult.targetIndex -= 1;\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tfirstChildTarget: function firstChildTarget(dndTaskId, targetTaskId, store) {\r\n\t\tvar result = this.createDropTargetObject();\r\n\t\tresult.targetId = targetTaskId;\r\n\t\tresult.targetParent = result.targetId;\r\n\t\tresult.targetIndex = 0;\r\n\t\tresult.child = true;\r\n\t\treturn result;\r\n\t},\r\n\tlastChildTarget: function lastChildTarget(dndTaskId, targetTaskId, store) {\r\n\t\tvar children = store.getChildren(targetTaskId);\r\n\t\tvar result = this.createDropTargetObject();\r\n\t\tresult.targetId = children[children.length - 1];\r\n\t\tresult.targetParent = targetTaskId;\r\n\t\tresult.targetIndex = children.length;\r\n\t\tresult.nextSibling = true;\r\n\t\treturn result;\r\n\t}\r\n};","/**\r\n * resolve dnd position of the task when gantt.config.order_branch_free = false\r\n */\r\n\r\nimport dropTarget from \"./drop_target\";\r\n\r\nfunction getLast(store){\r\n\tvar current = store.getNext();\r\n\twhile(store.exists(current)){\r\n\r\n\t\tvar next = store.getNext(current);\r\n\t\tif(!store.exists(next)){\r\n\t\t\treturn current;\r\n\t\t}else{\r\n\t\t\tcurrent = next;\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction findClosesTarget(dndTaskId, taskId, allowedLevel, store, up){\r\n\tvar prev = taskId;\r\n\twhile(store.exists(prev)){\r\n\t\tvar targetLevel = store.calculateItemLevel(store.getItem(prev));\r\n\t\tif((targetLevel === allowedLevel || targetLevel === (allowedLevel - 1)) && store.getBranchIndex(prev) > -1){\r\n\t\t\tbreak;\r\n\t\t}else {\r\n\t\t\tprev = up ? store.getPrev(prev) : store.getNext(prev);\r\n\t\t}\r\n\t}\r\n\r\n\tif(store.exists(prev)){\r\n\t\tif(store.calculateItemLevel(store.getItem(prev)) === allowedLevel){\r\n\t\t\treturn up ? dropTarget.nextSiblingTarget(dndTaskId, prev, store) : dropTarget.prevSiblingTarget(dndTaskId, prev, store);\r\n\t\t}else{\r\n\t\t\treturn dropTarget.firstChildTarget(dndTaskId, prev, store);\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction findTargetAbove(dndTaskId, taskId, allowedLevel, store){\r\n\treturn findClosesTarget(dndTaskId, taskId, allowedLevel, store, true);\r\n}\r\nfunction findTargetBelow(dndTaskId, taskId, allowedLevel, store){\r\n\treturn findClosesTarget(dndTaskId, taskId, allowedLevel, store, false);\r\n}\r\n\r\nexport default function getSameLevelDropPosition(dndTaskId, targetTaskId, relTargetPos, eventTop, store, level){\r\n\tvar result;\r\n\tif(targetTaskId !== store.$getRootId()){\r\n\t\tvar targetTask = store.getItem(targetTaskId);\r\n\t\tvar targetLevel = store.calculateItemLevel(targetTask);\r\n\t\tif(targetLevel === level){\r\n\t\t\tvar prevSibling = store.getPrevSibling(targetTaskId);\r\n\t\t\tif(relTargetPos < 0.5 && !prevSibling){\r\n\t\t\t\tresult = dropTarget.prevSiblingTarget(dndTaskId, targetTaskId, store);\r\n\t\t\t}else{\r\n\t\t\t\tif(relTargetPos < 0.5){\r\n\t\t\t\t\ttargetTaskId = prevSibling;\r\n\t\t\t\t}\r\n\t\t\t\tresult = dropTarget.nextSiblingTarget(dndTaskId, targetTaskId, store);\r\n\t\t\t}\r\n\t\t}else if(targetLevel > level){\r\n\t\t\tstore.eachParent(function(parent){\r\n\t\t\t\tif(store.calculateItemLevel(parent) === level){\r\n\t\t\t\t\ttargetTaskId = parent.id;\r\n\t\t\t\t}\r\n\t\t\t}, targetTask); \r\n\t\t\tresult = findTargetAbove(dndTaskId, targetTaskId, level, store);\r\n\t\t}else{\r\n\t\t\tvar targetAbove = findTargetAbove(dndTaskId, targetTaskId, level, store);\r\n\t\t\tvar targetBelow = findTargetBelow(dndTaskId, targetTaskId, level, store);\r\n\t\t\tresult = (relTargetPos < 0.5) ? targetAbove : targetBelow;\r\n\t\t}\r\n\t}else{\r\n\t\tvar rootId = store.$getRootId();\r\n\t\tvar rootLevel = store.getChildren(rootId);\r\n\t\tresult = dropTarget.createDropTargetObject();\r\n\t\tif(rootLevel.length && eventTop >= 0){\r\n\t\t\tresult = findTargetAbove(dndTaskId, getLast(store), level, store);\r\n\t\t}else{\r\n\t\t\tresult = findTargetBelow(dndTaskId, rootId, level, store);\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n};\r\n","import * as domHelpers from \"../../utils/dom_helpers\";\r\n\r\n/**\r\n * methods for highlighting current drag and drop position\r\n */\r\n\r\nfunction highlightPosition(target, root, grid){\r\n\tvar markerPos = getTaskMarkerPosition(target, grid);\r\n\t// setting position of row\r\n\troot.marker.style.left = markerPos.x + 9 + \"px\";\r\n\troot.marker.style.width = markerPos.width + \"px\";\r\n\troot.marker.style.overflow = \"hidden\";\r\n\tvar markerLine = root.markerLine;\r\n\tif(!markerLine){\r\n\t\tmarkerLine = document.createElement(\"div\");\r\n\t\tmarkerLine.className = \"gantt_drag_marker gantt_grid_dnd_marker\";\r\n\t\tmarkerLine.innerHTML = \"<div class='gantt_grid_dnd_marker_line'></div>\";\r\n\t\tmarkerLine.style.pointerEvents = \"none\";\r\n\t}\r\n\r\n\tif(target.child){\r\n\t\thighlightFolder(target, markerLine, grid);\r\n\t}else{\r\n\t\thighlightRow(target, markerLine, grid);\r\n\t}\r\n\r\n\tif(!root.markerLine){\r\n\t\tdocument.body.appendChild(markerLine);\r\n\t\troot.markerLine = markerLine;\r\n\t}\r\n}\r\n\r\nfunction removeLineHighlight(root){\r\n\tif(root.markerLine && root.markerLine.parentNode){\r\n\t\troot.markerLine.parentNode.removeChild(root.markerLine);\r\n\t}\r\n\troot.markerLine = null;\r\n}\r\n\r\nfunction highlightRow(target, markerLine, grid){\r\n\tvar linePos = getLineMarkerPosition(target, grid);\r\n\tvar maxBottom = grid.$grid_data.getBoundingClientRect().bottom + window.scrollY;\r\n\r\n\tmarkerLine.innerHTML = \"<div class='gantt_grid_dnd_marker_line'></div>\";\r\n\tmarkerLine.style.left = linePos.x + \"px\";\r\n\tmarkerLine.style.height = \"4px\";\r\n\r\n\tvar markerLineTop = linePos.y - 2;\r\n\tmarkerLine.style.top = markerLineTop + \"px\";\r\n\tmarkerLine.style.width = linePos.width + \"px\";\r\n\r\n\tif (markerLineTop > maxBottom) {\r\n\t\tmarkerLine.style.top = maxBottom + 'px';\r\n\t}\r\n\r\n\treturn markerLine;\r\n}\r\nfunction highlightFolder(target, markerFolder, grid){\r\n\tvar id = target.targetParent;\r\n\tvar pos = gridToPageCoordinates({x: 0, y: grid.getItemTop(id)}, grid);\r\n\tvar maxBottom = grid.$grid_data.getBoundingClientRect().bottom + window.scrollY;\r\n\r\n\tlet folderHighlightWidth = setWidthWithinContainer(grid.$gantt, grid.$grid_data.offsetWidth);\t\r\n\r\n\tmarkerFolder.innerHTML = \"<div class='gantt_grid_dnd_marker_folder'></div>\";\r\n\tmarkerFolder.style.width = folderHighlightWidth + \"px\";\r\n\tmarkerFolder.style.top = pos.y + \"px\";\r\n\tmarkerFolder.style.left = pos.x  + \"px\";\r\n\tmarkerFolder.style.height = grid.getItemHeight(id) + \"px\";\r\n\tif (pos.y > maxBottom) {\r\n\t\tmarkerFolder.style.top = maxBottom + 'px';\r\n\t}\r\n\r\n\treturn markerFolder;\r\n}\r\n\r\nfunction getLineMarkerPosition(target, grid){\r\n\tvar store = grid.$config.rowStore;\r\n\tvar pos = {x:0, y:0};\r\n\tvar indentNode = grid.$grid_data.querySelector(\".gantt_tree_indent\");\r\n\tvar indent = 15;\r\n\tvar level = 0;\r\n\tif(indentNode){\r\n\t\tindent = indentNode.offsetWidth;\r\n\t}\r\n\tvar iconWidth = 40;\r\n\tif(target.targetId !== store.$getRootId()){\r\n\t\tvar itemTop = grid.getItemTop(target.targetId);\r\n\t\tvar itemHeight = grid.getItemHeight(target.targetId);\r\n\t\tlevel = store.exists(target.targetId) ? store.calculateItemLevel(store.getItem(target.targetId)) : 0;\r\n\r\n\t\tif(target.prevSibling){\r\n\t\t\tpos.y = itemTop;\r\n\t\t}else if(target.nextSibling){\r\n\t\t\tvar childCount = 0;\r\n\t\t\tstore.eachItem(function(child){\r\n\t\t\t\tif(store.getIndexById(child.id) !== -1)\r\n\t\t\t\t\tchildCount++;\r\n\t\t\t}, target.targetId);\r\n\r\n\t\t\tpos.y = itemTop + itemHeight + childCount*itemHeight;\r\n\t\t}else {\r\n\t\t\tpos.y = itemTop + itemHeight;\r\n\t\t\tlevel += 1;\r\n\t\t}\r\n\t}\r\n\tpos.x = iconWidth + level * indent;\r\n\tpos.width = setWidthWithinContainer(grid.$gantt, Math.max(grid.$grid_data.offsetWidth - pos.x, 0), pos.x);\r\n\treturn gridToPageCoordinates(pos, grid);\r\n}\r\n\r\nfunction gridToPageCoordinates(pos, grid){\r\n\tvar gridPos = domHelpers.getNodePosition(grid.$grid_data);\r\n\tpos.x += gridPos.x + grid.$grid.scrollLeft;\r\n\tpos.y += gridPos.y - grid.$grid_data.scrollTop;\r\n\treturn pos;\r\n}\r\n\r\nfunction getTaskMarkerPosition(e, grid) {\r\n\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\tvar ePos = domHelpers.getRelativeEventPosition(e, grid.$grid_data);\r\n\t// row offset\r\n\tvar x = pos.x + grid.$grid.scrollLeft;\r\n\tvar y = ePos.y - 10;\r\n\r\n\tvar rowHeight = grid.getItemHeight(e.targetId);\r\n\t// prevent moving row out of grid_data container\r\n\tif (y < pos.y) y = pos.y;\r\n\tvar gridHeight = grid.getTotalHeight();\r\n\tif (y > pos.y + gridHeight - rowHeight) y = pos.y + gridHeight - rowHeight;\r\n\r\n\tpos.x = x;\r\n\tpos.y = y;\r\n\tpos.width = setWidthWithinContainer(grid.$gantt, pos.width, 9);\r\n\treturn pos;\r\n}\r\n\r\nfunction setWidthWithinContainer(gantt, width, offset = 0){\r\n\tconst containerSize = domHelpers.getNodePosition(gantt.$root);\r\n\tif (width > containerSize.width){\r\n\t\twidth = containerSize.width - offset - 2;\r\n\t}\r\n\treturn width;\r\n}\r\n\r\nexport default {\r\n\tremoveLineHighlight: removeLineHighlight,\r\n\thighlightPosition: highlightPosition\r\n};\r\n","import * as domHelpers from \"../utils/dom_helpers\";\r\nimport dropTarget from \"./tasks_grid_dnd_marker_helpers/drop_target\";\r\nimport getLockedLevelTarget from \"./tasks_grid_dnd_marker_helpers/locked_level\";\r\nimport getMultiLevelTarget from \"./tasks_grid_dnd_marker_helpers/multi_level\";\r\nimport higlighter from \"./tasks_grid_dnd_marker_helpers/highlight\";\r\nimport isPlaceholderTask from \"../../../utils/placeholder_task\";\r\n\r\nfunction _init_dnd(gantt, grid) {\r\n\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\tif(!grid.$config.bind || !gantt.getDatastore(grid.$config.bind)){\r\n\t\treturn;\r\n\t}\r\n\r\n\tfunction locate(e){\r\n\t\treturn domHelpers.locateAttribute(e, grid.$config.item_attribute);\r\n\t}\r\n\r\n\tfunction getStore(){\r\n\t\treturn gantt.getDatastore(grid.$config.bind);\r\n\t}\r\n\r\n\tfunction checkPlaceholderTask(id){\r\n\t\treturn isPlaceholderTask(id, gantt, getStore());\r\n\t}\r\n\r\n\tvar dnd = new DnD(grid.$grid_data, {updates_per_second: 60});\r\n\tif (gantt.defined(grid.$getConfig().dnd_sensitivity))\r\n\t\tdnd.config.sensitivity = grid.$getConfig().dnd_sensitivity;\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tif (!el) return false;\r\n\t\tif (gantt.hideQuickInfo) gantt.hideQuickInfo();\r\n\t\tif (domHelpers.closest(e.target, \".gantt_grid_editor_placeholder\")){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar id = el.getAttribute(grid.$config.item_attribute);\r\n\t\tvar datastore = grid.$config.rowStore;\r\n\t\tvar task = datastore.getItem(id);\r\n\r\n\t\tif (gantt.isReadonly(task) || checkPlaceholderTask(id))\r\n\t\t\treturn false;\r\n\r\n\t\tdnd.config.initial_open_state = task.$open;\r\n\t\tif (!gantt.callEvent(\"onRowDragStart\", [id, e.target || e.srcElement, e])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\r\n\t\tdnd.config.marker.innerHTML = el.outerHTML;\r\n\t\tvar element = dnd.config.marker.firstChild;\r\n\t\tif(element){\r\n\t\t\tdnd.config.marker.style.opacity = 0.4;\r\n\t\t\telement.style.position = \"static\";\r\n\t\t\telement.style.pointerEvents = \"none\";\r\n\t\t}\r\n\r\n\t\tdnd.config.id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar store = grid.$config.rowStore;\r\n\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\tdnd.config.level = store.calculateItemLevel(task);\r\n\t\tdnd.config.drop_target = dropTarget.createDropTargetObject({\r\n\t\t\ttargetParent: store.getParent(task.id),\r\n\t\t\ttargetIndex: store.getBranchIndex(task.id),\r\n\t\t\ttargetId: task.id,\r\n\t\t\tnextSibling: true\r\n\t\t});\r\n\r\n\t\ttask.$open = false;\r\n\t\ttask.$transparent = true;\r\n\t\tthis.refreshData();\r\n\t}, gantt));\r\n\r\n\tfunction getTargetTaskId(e){\r\n\t\tvar y = domHelpers.getRelativeEventPosition(e, grid.$grid_data).y;\r\n\t\tvar store = grid.$config.rowStore;\r\n\r\n\t\tif (!document.doctype){\r\n\t\t\ty += window.scrollY;\r\n\t\t}\r\n\t\ty = y || 0;\r\n\r\n\t\t// limits for the marker according to the layout layer\r\n\t\tvar scrollPos = grid.$state.scrollTop || 0;\r\n\t\tvar maxBottom = gantt.$grid_data.getBoundingClientRect().height + scrollPos + window.scrollY;\r\n\t\tvar minTop = scrollPos;\r\n\r\n\t\tvar firstVisibleTaskIndex = grid.getItemIndexByTopPosition(grid.$state.scrollTop);\r\n\t\tif (!store.exists(firstVisibleTaskIndex)){\r\n\t\t\tfirstVisibleTaskIndex = store.countVisible() - 1;\r\n\t\t}\r\n\t\tif (firstVisibleTaskIndex < 0) {\r\n\t\t\treturn store.$getRootId();\r\n\t\t}\r\n\r\n\t\tvar firstVisibleTaskId = store.getIdByIndex(firstVisibleTaskIndex);\r\n\r\n\t\tvar firstVisibleTaskPos = grid.$state.scrollTop / grid.getItemHeight(firstVisibleTaskId);\r\n\t\tvar hiddenTaskPart = firstVisibleTaskPos - Math.floor(firstVisibleTaskPos);\r\n\t\tif (hiddenTaskPart > 0.1 && hiddenTaskPart < 0.9) {\r\n\t\t\tmaxBottom = maxBottom - grid.getItemHeight(firstVisibleTaskId) * hiddenTaskPart;\r\n\t\t\tminTop = minTop + grid.getItemHeight(firstVisibleTaskId) * (1 - hiddenTaskPart);\r\n\t\t}\r\n\r\n\t\t// GS-715. The placeholder task row shouldn't be draggable below the Gantt container\r\n\t\tconst gridPosition = domHelpers.getNodePosition(grid.$grid_data);\r\n\t\tconst gridBottom = gridPosition.y + gridPosition.height;\r\n\t\tconst placeholderRowHeight = dnd.config.marker.offsetHeight;\r\n\t\tif (y + placeholderRowHeight + window.scrollY >= maxBottom){\r\n\t\t\tdnd.config.marker.style.top = gridBottom - placeholderRowHeight\t+ \"px\";\r\n\t\t}\r\n\r\n\t\tif (y >= maxBottom) {\r\n\t\t\ty = maxBottom;\r\n\t\t} else if (y <= minTop) {\r\n\t\t\ty = minTop;\r\n\t\t\tdnd.config.marker.style.top = gridPosition.y + \"px\";\r\n\t\t}\r\n\r\n\t\tvar index = grid.getItemIndexByTopPosition(y);\r\n\r\n\t\tif (index > store.countVisible() - 1 || index < 0) {\r\n\t\t\treturn store.$getRootId();\r\n\t\t}\r\n\r\n\t\tvar targetId = store.getIdByIndex(index);\r\n\t\tif (checkPlaceholderTask(targetId)) {\r\n\t\t\treturn store.getPrevSibling(targetId);\r\n\t\t}\r\n\r\n\t\treturn store.getIdByIndex(index);\r\n\t}\r\n\r\n\tfunction getDropPosition(e){\r\n\t\tvar targetTaskId = getTargetTaskId(e);\r\n\t\tvar relTargetPos = null;\r\n\t\tvar store = grid.$config.rowStore;\r\n\t\tvar config = grid.$getConfig();\r\n\t\tvar lockLevel = !config.order_branch_free;\r\n\r\n\t\tvar eventTop = domHelpers.getRelativeEventPosition(e, grid.$grid_data).y;\r\n\t\tif (!document.doctype){\r\n\t\t\teventTop += window.scrollY;\r\n\t\t}\r\n\r\n\t\tif(targetTaskId !== store.$getRootId()) {\r\n\t\t\tvar rowTop = grid.getItemTop(targetTaskId);\r\n\t\t\tvar rowHeight = grid.getItemHeight(targetTaskId);\r\n\t\t\trelTargetPos = (eventTop - rowTop) / rowHeight;\r\n\t\t}\r\n\r\n\t\tvar result;\r\n\t\tif(!lockLevel){\r\n\t\t\tresult = getMultiLevelTarget(dnd.config.id, targetTaskId, relTargetPos, eventTop, store);\r\n\t\t}else{\r\n\t\t\tresult = getLockedLevelTarget(dnd.config.id, targetTaskId, relTargetPos, eventTop, store, dnd.config.level);\r\n\t\t\tif(result && result.targetParent && checkPlaceholderTask(result.targetParent)){\r\n\t\t\t\ttargetTaskId = store.getPrevSibling(result.targetParent);\r\n\t\t\t\tresult = getLockedLevelTarget(dnd.config.id, targetTaskId, relTargetPos, eventTop, store, dnd.config.level);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function (obj, e) {\r\n\t\tvar target = getDropPosition(e);\r\n\r\n\t\tif(!target ||\r\n\t\t\tgantt.callEvent(\"onBeforeRowDragMove\", [dnd.config.id, target.targetParent, target.targetIndex]) === false){\r\n\t\t\t\ttarget = dropTarget.createDropTargetObject(dnd.config.drop_target);\r\n\t\t\t}\r\n\r\n\t\thiglighter.highlightPosition(target, dnd.config, grid);\r\n\t\tdnd.config.drop_target = target;\r\n\t\tgantt._waiAria.reorderMarkerAttr(dnd.config.marker);\r\n\r\n\t\tthis.callEvent(\"onRowDragMove\", [dnd.config.id, target.targetParent, target.targetIndex]);\r\n\t\treturn true;\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function () {\r\n\t\tvar store = grid.$config.rowStore;\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\r\n\t\thiglighter.removeLineHighlight(dnd.config);\r\n\r\n\t\ttask.$transparent = false;\r\n\t\ttask.$open = dnd.config.initial_open_state;\r\n\t\tvar target = dnd.config.drop_target;\r\n\r\n\t\tif (this.callEvent(\"onBeforeRowDragEnd\", [dnd.config.id, target.targetParent, target.targetIndex]) === false) {\r\n\t\t\ttask.$drop_target = null;\r\n\t\t} else {\r\n\t\t\tstore.move(dnd.config.id, target.targetIndex, target.targetParent);\r\n\t\t\tgantt.render();\r\n\t\t\tthis.callEvent(\"onRowDragEnd\", [dnd.config.id, target.targetParent, target.targetIndex]);\r\n\t\t}\r\n\t\tstore.refresh(task.id);\r\n\t}, gantt));\r\n}\r\n\r\nexport default {\r\n\tinit: _init_dnd\r\n};","/**\r\n * resolve dnd position of the task when gantt.config.order_branch_free = true\r\n */\r\n\r\nimport dropTarget from \"./drop_target\";\r\n\r\nexport default function getMultiLevelDropPosition(dndTaskId, targetTaskId, relTargetPos, eventTop, store){\r\n\tvar result;\r\n\r\n\tif(targetTaskId !== store.$getRootId()){\r\n\t\tif(relTargetPos < 0.25){\r\n\t\t\tresult = dropTarget.prevSiblingTarget(dndTaskId, targetTaskId, store);\r\n\t\t}else if(relTargetPos > 0.60 && !(store.hasChild(targetTaskId) && store.getItem(targetTaskId).$open)){\r\n\t\t\tresult = dropTarget.nextSiblingTarget(dndTaskId, targetTaskId, store);\r\n\t\t}else {\r\n\t\t\tresult = dropTarget.firstChildTarget(dndTaskId, targetTaskId, store);\r\n\t\t}\r\n\t}else{\r\n\t\tvar rootId = store.$getRootId();\r\n\t\tif(store.hasChild(rootId) && eventTop >= 0){\r\n\t\t\tresult = dropTarget.lastChildTarget(dndTaskId, rootId, store);\r\n\t\t}else{\r\n\t\t\tresult = dropTarget.firstChildTarget(dndTaskId, rootId, store);\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n};","import * as utils from \"../../../utils/utils\";\r\nimport rowDnd from \"./tasks_grid_dnd\";\r\nimport rowDndMarker from \"./tasks_grid_dnd_marker\";\r\nimport mouseEventContainer from \"../mouse_event_container\";\r\n\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\treturn {\r\n\t\t\tonCreated: function (grid) {\r\n\t\t\t\tgrid.$config = utils.mixin(grid.$config, {\r\n\t\t\t\t\tbind: \"task\"\r\n\t\t\t\t});\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendGantt(grid);\r\n\t\t\t\t\tgantt.ext.inlineEditors = gantt.ext._inlineEditors.createEditors(grid);\r\n\t\t\t\t\tgantt.ext.inlineEditors.init();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._mouseDelegates = mouseEventContainer(gantt);\r\n\t\t\t},\r\n\t\t\tonInitialized: function (grid) {\r\n\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\tif (config.order_branch) {\r\n\t\t\t\t\tif(config.order_branch == \"marker\"){\r\n\t\t\t\t\t\trowDndMarker.init(grid.$gantt, grid);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\trowDnd.init(grid.$gantt, grid);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initEvents(grid, gantt);\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendDom(grid);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (grid) {\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\t// GS-1288. We need to only detach the store and its events without detaching the\r\n\t\t\t\t\t// inline editor's events. Otherwise, we won't be able to access them\r\n\t\t\t\t\tgantt.ext.inlineEditors.detachStore();\r\n\t\t\t\t}\r\n\t\t\t\tthis.clearEvents(grid, gantt);\r\n\t\t\t},\r\n\r\n\t\t\tinitEvents: function (grid, gantt) {\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_row\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tconst config = grid.$getConfig();\r\n\t\t\t\t\tif (id !== null) {\r\n\t\t\t\t\t\tconst task = this.getTask(id);\r\n\t\t\t\t\t\tif (config.scroll_on_click) {\r\n\t\t\t\t\t\t\tconst notOpenIcon = !gantt._is_icon_open_click(e);\r\n\t\t\t\t\t\t\tconst visibleTimeline = gantt.$ui.getView(\"timeline\");\r\n\t\t\t\t\t\t\t// don't need to scroll to the date when the timeline is not visible\r\n\t\t\t\t\t\t\t// or when we click on the open/close icon\r\n\t\t\t\t\t\t\tif (notOpenIcon && visibleTimeline){\r\n\t\t\t\t\t\t\t\tthis.showDate(task.start_date);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgantt.callEvent(\"onTaskRowClick\", [id, trg]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_grid_head_cell\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar column = trg.getAttribute(\"data-column-id\");\r\n\r\n\t\t\t\t\tif (!gantt.callEvent(\"onGridHeaderClick\", [column, e]))\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\t\t\tif (column == \"add\") {\r\n\t\t\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\t\t\t\tmouseEvents.callHandler(\"click\", \"gantt_add\", grid.$grid, [e, config.root_id]);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (config.sort && column) { // GS-929: if there is no column name, we cannot sort the column\r\n\t\t\t\t\t\tvar sorting_method = column,\r\n\t\t\t\t\t\t\tconf;\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < config.columns.length; i++) {\r\n\t\t\t\t\t\t\tif (config.columns[i].name == column) {\r\n\t\t\t\t\t\t\t\tconf = config.columns[i];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (conf && conf.sort !== undefined && conf.sort !== true) {\r\n\t\t\t\t\t\t\tsorting_method = conf.sort;\r\n\r\n\t\t\t\t\t\t\tif (!sorting_method) { // column sort property 'false', no sorting\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar sort = (this._sort && this._sort.direction && this._sort.name == column) ? this._sort.direction : \"desc\";\r\n\t\t\t\t\t\t// invert sort direction\r\n\t\t\t\t\t\tsort = (sort == \"desc\") ? \"asc\" : \"desc\";\r\n\t\t\t\t\t\tthis._sort = {\r\n\t\t\t\t\t\t\tname: column,\r\n\t\t\t\t\t\t\tdirection: sort\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthis.sort(sorting_method, sort == \"desc\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_add\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\t\tif (config.readonly) return;\r\n\r\n\t\t\t\t\tvar item = {};\r\n\t\t\t\t\tthis.createTask(item, id ? id : gantt.config.root_id);\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tclearEvents: function(grid, gantt){\r\n\t\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\t\tthis._mouseDelegates = null;\r\n\t\t\t},\r\n\r\n\t\t\textendDom: function(grid){\r\n\t\t\t\tgantt.$grid = grid.$grid;\r\n\t\t\t\tgantt.$grid_scale = grid.$grid_scale;\r\n\t\t\t\tgantt.$grid_data = grid.$grid_data;\r\n\t\t\t},\r\n\t\t\textendGantt: function(grid){\r\n\t\t\t\tgantt.getGridColumns = gantt.bind(grid.getGridColumns, grid);\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeStart\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeStart\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResize\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResize\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeEnd\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeEnd\", arguments);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeComplete\", function(columns, totalWidth){\r\n\t\t\t\t\tgantt.config.grid_width = totalWidth;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgrid.attachEvent(\"onBeforeRowResize\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onBeforeRowResize\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onRowResize\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onRowResize\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onBeforeRowResizeEnd\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onBeforeRowResizeEnd\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onAfterRowResize\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onAfterRowResize\", arguments);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n})();\r\n\r\nexport default initializer;","import * as domHelpers from \"../utils/dom_helpers\";\r\nimport * as utils from \"../../../utils/utils\";\r\nimport timeout from \"../../../utils/timeout\";\r\nimport * as helpers from \"../../../utils/helpers\";\r\n\r\nfunction createTaskDND(timeline, gantt) {\r\n\tvar services = gantt.$services;\r\n\treturn {\r\n\t\tdrag: null,\r\n\t\tdragMultiple: {},\r\n\t\t_events: {\r\n\t\t\tbefore_start: {},\r\n\t\t\tbefore_finish: {},\r\n\t\t\tafter_finish: {}\r\n\t\t},\r\n\t\t_handlers: {},\r\n\t\tinit: function() {\r\n\t\t\tthis._domEvents = gantt._createDomEventScope();\r\n\t\t\tthis.clear_drag_state();\r\n\t\t\tvar drag = gantt.config.drag_mode;\r\n\t\t\tthis.set_actions();\r\n\r\n\t\t\tvar stateService = services.getService(\"state\");\r\n\t\t\tstateService.registerProvider(\"tasksDnd\", utils.bind(function() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdrag_id : this.drag ? this.drag.id : undefined,\r\n\t\t\t\t\tdrag_mode : this.drag ? this.drag.mode : undefined,\r\n\t\t\t\t\tdrag_from_start : this.drag ? this.drag.left : undefined\r\n\t\t\t\t};\r\n\t\t\t}, this));\r\n\r\n\t\t\tvar evs = {\r\n\t\t\t\t\"before_start\": \"onBeforeTaskDrag\",\r\n\t\t\t\t\"before_finish\": \"onBeforeTaskChanged\",\r\n\t\t\t\t\"after_finish\": \"onAfterTaskDrag\"\r\n\t\t\t};\r\n\t\t\t//for now, all drag operations will trigger the same events\r\n\t\t\tfor (var stage in this._events) {\r\n\t\t\t\tfor (var mode in drag) {\r\n\t\t\t\t\tthis._events[stage][mode] = evs[stage];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._handlers[drag.move] = this._move;\r\n\t\t\tthis._handlers[drag.resize] = this._resize;\r\n\t\t\tthis._handlers[drag.progress] = this._resize_progress;\r\n\t\t},\r\n\t\tset_actions: function() {\r\n\t\t\tvar data = timeline.$task_data;\r\n\t\t\tthis._domEvents.attach(data, \"mousemove\", gantt.bind(function(e) {\r\n\t\t\t\tthis.on_mouse_move(e);\r\n\t\t\t}, this));\r\n\t\t\tthis._domEvents.attach(data, \"mousedown\", gantt.bind(function(e) {\r\n\t\t\t\tthis.on_mouse_down(e);\r\n\t\t\t}, this));\r\n\t\t\tthis._domEvents.attach(document.body, \"mouseup\", gantt.bind(function(e) {\r\n\t\t\t\tthis.on_mouse_up(e);\r\n\t\t\t}, this));\r\n\t\t},\r\n\r\n\t\tclear_drag_state: function() {\r\n\t\t\tthis.drag = {\r\n\t\t\t\tid: null,\r\n\t\t\t\tmode: null,\r\n\t\t\t\tpos: null,\r\n\t\t\t\tstart_x: null,\r\n\t\t\t\tstart_y: null,\r\n\t\t\t\tobj: null,\r\n\t\t\t\tleft: null\r\n\t\t\t};\r\n\t\t\tthis.dragMultiple = {};\r\n\t\t},\r\n\t\t_resize: function(task, shift, drag) {\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar coords_x = this._drag_task_coords(task, drag);\r\n\t\t\tif (drag.left) {\r\n\t\t\t\ttask.start_date = gantt.dateFromPos(coords_x.start + shift);\r\n\t\t\t\tif (!task.start_date) {\r\n\t\t\t\t\ttask.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\ttask.end_date = gantt.dateFromPos(coords_x.end + shift);\r\n\t\t\t\tif (!task.end_date) {\r\n\t\t\t\t\ttask.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar minDurationInUnits = this._calculateMinDuration(cfg.min_duration, cfg.duration_unit);\r\n\t\t\tif (task.end_date - task.start_date < cfg.min_duration) {\r\n\t\t\t\tif (drag.left)\r\n\t\t\t\t\ttask.start_date = gantt.calculateEndDate(task.end_date, -minDurationInUnits, cfg.duration_unit, task);\r\n\t\t\t\telse\r\n\t\t\t\t\ttask.end_date = gantt.calculateEndDate(task.start_date, minDurationInUnits, cfg.duration_unit, task);\r\n\t\t\t}\r\n\t\t\tgantt._init_task_timing(task);\r\n\t\t},\r\n\t\t_calculateMinDuration: function(duration, unit) {\r\n\t\t\tvar inMs = {\r\n\t\t\t\t\"minute\": 60000,\r\n\t\t\t\t\"hour\": 3600000,\r\n\t\t\t\t\"day\": 86400000,\r\n\t\t\t\t\"week\": 604800000,\r\n\t\t\t\t\"month\": 2419200000,\r\n\t\t\t\t\"year\": 31356000000\r\n\t\t\t};\r\n\t\t\treturn Math.ceil(duration / inMs[unit]);\r\n\t\t},\r\n\t\t_resize_progress: function(task, shift, drag) {\r\n\t\t\tvar coords_x = this._drag_task_coords(task, drag);\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar diffValue = !config.rtl ? (drag.pos.x - coords_x.start) : (coords_x.start - drag.pos.x);\r\n\r\n\t\t\tvar diff = Math.max(0, diffValue);\r\n\t\t\ttask.progress = Math.min(1, diff / Math.abs(coords_x.end - coords_x.start));\r\n\t\t},\r\n\t\t_find_max_shift: function(dragItems, shift) {\r\n\t\t\tvar correctShift;\r\n\t\t\tfor (var i in dragItems) {\r\n\t\t\t\tvar drag = dragItems[i];\r\n\t\t\t\tvar task = gantt.getTask(drag.id);\r\n\t\t\t\tif (task.unscheduled){\r\n\t\t\t\t\t// GS-1674. There is no need to check the tasks that are ignored by projects\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar coords_x = this._drag_task_coords(task, drag);\r\n\t\t\t\tvar minX = gantt.posFromDate(new Date(gantt.getState().min_date));\r\n\t\t\t\tvar maxX = gantt.posFromDate(new Date(gantt.getState().max_date));\r\n\r\n\t\t\t\tif (coords_x.end + shift > maxX) {\r\n\t\t\t\t\tvar maxShift = maxX - coords_x.end;\r\n\t\t\t\t\tif (maxShift < correctShift || correctShift === undefined) {\r\n\t\t\t\t\t\tcorrectShift = maxShift;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (coords_x.start + shift < minX) {\r\n\t\t\t\t\tvar minShift = minX - coords_x.start;\r\n\t\t\t\t\tif (minShift > correctShift || correctShift === undefined) {\r\n\t\t\t\t\t\tcorrectShift = minShift;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn correctShift;\r\n\t\t},\r\n\t\t_move: function(task, shift, drag, multipleDragShift) {\r\n\t\t\tvar coords_x = this._drag_task_coords(task, drag);\r\n\t\t\tvar new_start = null,\r\n\t\t\tnew_end = null;\r\n\t\t\t// GS-454: If we drag multiple tasks, rely on the dates instead of timeline coordinates\r\n\t\t\tif (multipleDragShift){\r\n\t\t\t\tnew_start = new Date(+drag.obj.start_date + multipleDragShift),\r\n\t\t\t\tnew_end = new Date(+drag.obj.end_date + multipleDragShift);\r\n\t\t\t} else {\r\n\t\t\t\tnew_start = gantt.dateFromPos(coords_x.start + shift),\r\n\t\t\t\tnew_end = gantt.dateFromPos(coords_x.end + shift);\r\n\t\t\t}\r\n\t\t\tif (!new_start) {\r\n\t\t\t\ttask.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\ttask.end_date = gantt.dateFromPos(gantt.posFromDate(task.start_date) + (coords_x.end - coords_x.start));\r\n\t\t\t} else if (!new_end) {\r\n\t\t\t\ttask.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\ttask.start_date = gantt.dateFromPos(gantt.posFromDate(task.end_date) - (coords_x.end - coords_x.start));\r\n\t\t\t} else {\r\n\t\t\t\ttask.start_date = new_start;\r\n\t\t\t\ttask.end_date = new_end;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_drag_task_coords: function(t, drag) {\r\n\t\t\tvar start = drag.obj_s_x = drag.obj_s_x || gantt.posFromDate(t.start_date);\r\n\t\t\tvar end = drag.obj_e_x = drag.obj_e_x || gantt.posFromDate(t.end_date);\r\n\t\t\treturn {\r\n\t\t\t\tstart: start,\r\n\t\t\t\tend: end\r\n\t\t\t};\r\n\t\t},\r\n\t\t_mouse_position_change: function(oldPos, newPos) {\r\n\t\t\tvar dx = oldPos.x - newPos.x,\r\n\t\t\t\tdy = oldPos.y - newPos.y;\r\n\t\t\treturn Math.sqrt(dx * dx + dy * dy);\r\n\t\t},\r\n\t\t_is_number: function(n) {\r\n\t\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\r\n\t\t},\r\n\r\n\t\ton_mouse_move: function(e) {\r\n\t\t\tif (this.drag.start_drag) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\tvar sX = this.drag.start_drag.start_x,\r\n\t\t\t\t\tsY = this.drag.start_drag.start_y;\r\n\r\n\t\t\t\tif ((Date.now() - this.drag.timestamp > 50) ||\r\n\t\t\t\t\t(this._is_number(sX) && this._is_number(sY) && this._mouse_position_change({\r\n\t\t\t\t\t\tx: sX,\r\n\t\t\t\t\t\ty: sY\r\n\t\t\t\t\t}, pos) > 20)) {\r\n\t\t\t\t\tthis._start_dnd(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar drag = this.drag;\r\n\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tif (!timeout(this, 40))//limit update frequency\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis._update_on_move(e);\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_update_item_on_move: function(shift, id, mode, drag, e, multipleDragShift) {\r\n\t\t\tvar task = gantt.getTask(id);\r\n\t\t\tvar original = gantt.mixin({}, task);\r\n\t\t\tvar copy = gantt.mixin({}, task);\r\n\t\t\tthis._handlers[mode].apply(this, [copy, shift, drag, multipleDragShift]);\r\n\t\t\tgantt.mixin(task, copy, true);\r\n\t\t\t//gantt._update_parents(drag.id, true);\r\n\t\t\tgantt.callEvent(\"onTaskDrag\", [task.id, mode, copy, original, e]);\r\n\t\t\tgantt.mixin(task, copy, true);\r\n\t\t\tgantt.refreshTask(id);\r\n\t\t},\r\n\r\n\t\t_update_on_move: function(e) {\r\n\t\t\tvar drag = this.drag;\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\r\n\t\t\t\tif (drag.pos && drag.pos.x == pos.x)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tdrag.pos = pos;\r\n\r\n\t\t\t\tvar curr_date = gantt.dateFromPos(pos.x);\r\n\t\t\t\tif (!curr_date || isNaN(curr_date.getTime()))\r\n\t\t\t\t\treturn;\r\n\r\n\r\n\t\t\t\tvar shift = pos.x - drag.start_x;\r\n\t\t\t\tvar task = gantt.getTask(drag.id);\r\n\t\t\t\tif (this._handlers[drag.mode]) {\r\n\t\t\t\t\tif (drag.mode === config.drag_mode.move) {\r\n\t\t\t\t\t\tvar dragHash = {};\r\n\r\n\t\t\t\t\t\tif (this._isMultiselect()) {\r\n\t\t\t\t\t\t\tvar selectedTasksIds = gantt.getSelectedTasks();\r\n\t\t\t\t\t\t\tif (selectedTasksIds.indexOf(drag.id) >= 0) {\r\n\t\t\t\t\t\t\t\tdragHash = this.dragMultiple;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar dragProject = false;\r\n\t\t\t\t\t\tif (gantt.isSummaryTask(task) && gantt.config.drag_project) {\r\n\t\t\t\t\t\t\tvar initialDrag = {};\r\n\t\t\t\t\t\t\tinitialDrag[drag.id] = utils.copy(drag);\r\n\t\t\t\t\t\t\tdragProject = true;\r\n\t\t\t\t\t\t\tdragHash = utils.mixin(initialDrag, this.dragMultiple);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar maxShift = this._find_max_shift(dragHash, shift);\r\n\t\t\t\t\t\tif (maxShift !== undefined) {\r\n\t\t\t\t\t\t\tshift = maxShift;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis._update_item_on_move(shift, drag.id, drag.mode, drag, e);\r\n\r\n\t\t\t\t\t\tlet multipleDragShift;\r\n\t\t\t\t\t\tif (maxShift === undefined) {\r\n\t\t\t\t\t\t\t// GS-2593. If the timeline is repainted during the drag (infinite scale scenario)\r\n\t\t\t\t\t\t\t// we need to update the initial drag position to correctly update\r\n\t\t\t\t\t\t\t// the position of other dragged tasks\r\n\t\t\t\t\t\t\tconst newStartPos = gantt.posFromDate(drag.obj.start_date);\r\n\t\t\t\t\t\t\tconst newEndPos = gantt.posFromDate(drag.obj.end_date);\r\n\t\t\t\t\t\t\t// calculate the offset only when the drag started\r\n\t\t\t\t\t\t\tif (drag.handle_offset === undefined){\r\n\t\t\t\t\t\t\t\tconst width = newEndPos - newStartPos;\r\n\t\t\t\t\t\t\t\tconst dragPos = drag.start_x - newStartPos;\r\n\t\t\t\t\t\t\t\tdrag.handle_offset = dragPos / width;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconst newWidth = Math.abs(newEndPos - newStartPos);\r\n\t\t\t\t\t\t\tlet dragX = newStartPos + newWidth * drag.handle_offset;\r\n\r\n\t\t\t\t\t\t\t// GS-454: Calculate the date shift in milliseconds instead of pixels\r\n\t\t\t\t\t\t\tconst shiftDate = gantt.dateFromPos(dragX);\r\n\t\t\t\t\t\t\tmultipleDragShift = curr_date - shiftDate;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (var i in dragHash) {\r\n\t\t\t\t\t\t\tvar childDrag = dragHash[i];\r\n\t\t\t\t\t\t\tif(dragProject && childDrag.id != drag.id){\r\n\t\t\t\t\t\t\t\tgantt._bulk_dnd = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis._update_item_on_move(shift, childDrag.id, childDrag.mode, childDrag, e, multipleDragShift);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgantt._bulk_dnd = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// for resize and progress\r\n\t\t\t\t\t\tthis._update_item_on_move(shift, drag.id, drag.mode, drag, e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt._update_parents(drag.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ton_mouse_down: function(e, src) {\r\n\t\t\t// on Mac we do not get onmouseup event when clicking right mouse button leaving us in dnd state\r\n\t\t\t// let's ignore right mouse button then\r\n\t\t\tif (e.button == 2 && e.button !== undefined)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar id = gantt.locate(e);\r\n\t\t\tvar task = null;\r\n\t\t\tif (gantt.isTaskExists(id)) {\r\n\t\t\t\ttask = gantt.getTask(id);\r\n\t\t\t}\r\n\r\n\t\t\tif (gantt.isReadonly(task) || this.drag.mode) return;\r\n\r\n\t\t\tthis.clear_drag_state();\r\n\r\n\t\t\tsrc = src || (e.target || e.srcElement);\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tvar drag = this._get_drag_mode(className, src);\r\n\r\n\t\t\tif (!className || !drag) {\r\n\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\t\t\t\telse\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!drag) {\r\n\t\t\t\tif (gantt.checkEvent(\"onMouseDown\") && gantt.callEvent(\"onMouseDown\", [className.split(\" \")[0]])) {\r\n\t\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (drag.mode && drag.mode != config.drag_mode.ignore && config[\"drag_\" + drag.mode]) {\r\n\t\t\t\t\tid = gantt.locate(src);\r\n\t\t\t\t\ttask = gantt.copy(gantt.getTask(id) || {});\r\n\r\n\t\t\t\t\tif (gantt.isReadonly(task)) {\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ((gantt.isSummaryTask(task) && !(task.auto_scheduling === false) && !config.drag_project) && drag.mode != config.drag_mode.progress) {//only progress drag is allowed for tasks with flexible duration\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdrag.id = id;\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\t\tdrag.start_x = pos.x;\r\n\t\t\t\t\tdrag.start_y = pos.y;\r\n\t\t\t\t\tdrag.obj = task;\r\n\t\t\t\t\tthis.drag.start_drag = drag;\r\n\t\t\t\t\tthis.drag.timestamp = Date.now();\r\n\r\n\t\t\t\t} else\r\n\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_dnd_scale_time: function(task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar unit = gantt.getScale().unit,\r\n\t\t\t\tstep = gantt.getScale().step;\r\n\t\t\tif (!config.round_dnd_dates) {\r\n\t\t\t\tunit = 'minute';\r\n\t\t\t\tstep = config.time_step;\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixStart(task) {\r\n\t\t\t\tif (!gantt.config.correct_work_time)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(task.start_date, undefined, task))\r\n\t\t\t\t\ttask.start_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\t\tduration: -1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixEnd(task) {\r\n\t\t\t\tif (!gantt.config.correct_work_time)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(new Date(task.end_date - 1), undefined, task))\r\n\t\t\t\t\ttask.end_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\t\tduration: 1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\tif (drag.left) {\r\n\t\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\t\t\t\tfixStart(task);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask.end_date = gantt.roundDate({date: task.end_date, unit: unit, step: step});\r\n\t\t\t\t\tfixEnd(task);\r\n\t\t\t\t}\r\n\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\t\t\tfixStart(task);\r\n\t\t\t\ttask.end_date = gantt.calculateEndDate(task);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_working_times: function(task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar drag = drag || {mode: config.drag_mode.move};\r\n\r\n\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\tif (drag.left) {\r\n\t\t\t\t\ttask.start_date = gantt.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask.end_date = gantt.getClosestWorkTime({date: task.end_date, dir: 'past', task: task});\r\n\t\t\t\t}\r\n\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\tgantt.correctTaskWorkTime(task);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_finalize_mouse_up: function(taskId, config, drag, e) {\r\n\t\t\tvar task = gantt.getTask(taskId);\r\n\r\n\t\t\tif (config.work_time && config.correct_work_time) {\r\n\t\t\t\tthis._fix_working_times(task, drag);\r\n\t\t\t}\r\n\r\n\t\t\tthis._fix_dnd_scale_time(task, drag);\r\n\r\n\t\t\tif (!this._fireEvent(\"before_finish\", drag.mode, [taskId, drag.mode, gantt.copy(drag.obj), e])) {\r\n\t\t\t\t//drag.obj._dhx_changed = false;\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\tif (taskId == drag.id) {\r\n\t\t\t\t\tdrag.obj._dhx_changed = false;\r\n\t\t\t\t\tgantt.mixin(task, drag.obj, true);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tgantt.refreshTask(task.id);\r\n\t\t\t\t// GS-2013. Repaint parent projects when the drag is cancelled\r\n\t\t\t\tif (task.$level > 100){\r\n\t\t\t\t\t// When there are too many tasks to repaint, it is better to repaint Gantt\r\n\t\t\t\t\tlet shouldRepaint = false;\r\n\t\t\t\t\tgantt.eachParent(function(parent){\r\n\t\t\t\t\t\tif (!shouldRepaint && parent.type === gantt.config.types.project) {\r\n\t\t\t\t\t\t\tconst initialDates = {start_date: parent.start_date, end_date: parent.end_date};\r\n\t\t\t\t\t\t\tgantt.resetProjectDates(parent);\r\n\t\t\t\t\t\t\tif (+initialDates.start_date !== +parent.start_date || +initialDates.end_date !== +parent.end_date){\r\n\t\t\t\t\t\t\t\tshouldRepaint = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},task.id);\r\n\t\t\t\t\tif (shouldRepaint){\r\n\t\t\t\t\t\tgantt.refreshData();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// If there are not so many parents especially if there are split tasks,\r\n\t\t\t\t\t// it is better to repaint individual tasks\r\n\t\t\t\t\tgantt.eachParent(function(parent){\r\n\t\t\t\t\t\tif (parent.type === gantt.config.types.project) {\r\n\t\t\t\t\t\t\tconst initialDates = {start_date: parent.start_date, end_date: parent.end_date};\r\n\t\t\t\t\t\t\tgantt.resetProjectDates(parent);\r\n\t\t\t\t\t\t\tif (+initialDates.start_date !== +parent.start_date || +initialDates.end_date !== +parent.end_date){\r\n\t\t\t\t\t\t\t\tgantt.refreshTask(parent.id);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},task.id);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar drag_id = taskId;\r\n\r\n\t\t\t\tgantt._init_task_timing(task);\r\n\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\tgantt.updateTask(task.id);\r\n\t\t\t\tthis._fireEvent(\"after_finish\", drag.mode, [drag_id, drag.mode, e]);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\ton_mouse_up: function(e) {\r\n\r\n\t\t\tvar drag = this.drag;\r\n\t\t\tif (drag.mode && drag.id) {\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\t//drop\r\n\t\t\t\tvar task = gantt.getTask(drag.id);\r\n\t\t\t\tvar dragMultiple = this.dragMultiple;\r\n\r\n\t\t\t\tvar finalizingBulkMove = false;\r\n\t\t\t\tvar moveCount = 0;\r\n\t\t\t\tif (drag.mode === config.drag_mode.move) {\r\n\t\t\t\t\tif ((gantt.isSummaryTask(task) && config.drag_project) || (this._isMultiselect())) {\r\n\t\t\t\t\t\tfinalizingBulkMove = true;\r\n\t\t\t\t\t\tmoveCount = Object.keys(dragMultiple).length;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar doFinalize = function doFinalize(){\r\n\t\t\t\t\tif(finalizingBulkMove){\r\n\t\t\t\t\t\tfor (var i in dragMultiple) {\r\n\t\t\t\t\t\t\t// GS-1057: Don't call drag events for the dragged task as they will be called later\r\n\t\t\t\t\t\t\tif (dragMultiple[i].id != drag.id){\r\n\t\t\t\t\t\t\t\tthis._finalize_mouse_up(dragMultiple[i].id, config, dragMultiple[i], e);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._finalize_mouse_up(drag.id, config, drag, e);\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(finalizingBulkMove && moveCount > 10){// 10 - arbitrary threshold for bulk dnd at which we start doing complete repaint to refresh\r\n\t\t\t\t\tgantt.batchUpdate(function(){\r\n\t\t\t\t\t\tdoFinalize.call(this);\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdoFinalize.call(this);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tthis.clear_drag_state();\r\n\t\t},\r\n\t\t_get_drag_mode: function(className, el) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar modes = config.drag_mode;\r\n\t\t\tvar classes = (className || \"\").split(\" \");\r\n\t\t\tvar classname = classes[0];\r\n\t\t\tvar drag = {mode: null, left: null};\r\n\t\t\tswitch (classname) {\r\n\t\t\t\tcase \"gantt_task_line\":\r\n\t\t\t\tcase \"gantt_task_content\":\r\n\t\t\t\t\tdrag.mode = modes.move;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_drag\":\r\n\t\t\t\t\tdrag.mode = modes.resize;\r\n\r\n\t\t\t\t\tvar dragProperty = el.getAttribute(\"data-bind-property\");\r\n\r\n\t\t\t\t\tif (dragProperty == \"start_date\") {\r\n\t\t\t\t\t\tdrag.left = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdrag.left = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_progress_drag\":\r\n\t\t\t\t\tdrag.mode = modes.progress;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_link_control\":\r\n\t\t\t\tcase \"gantt_link_point\":\r\n\t\t\t\t\tdrag.mode = modes.ignore;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tdrag = null;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn drag;\r\n\r\n\t\t},\r\n\r\n\t\t_start_dnd: function(e) {\r\n\t\t\tvar drag = this.drag = this.drag.start_drag;\r\n\t\t\tdelete drag.start_drag;\r\n\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar id = drag.id;\r\n\r\n\t\t\tif (!cfg[\"drag_\" + drag.mode] || !gantt.callEvent(\"onBeforeDrag\", [id, drag.mode, e]) || !this._fireEvent(\"before_start\", drag.mode, [id, drag.mode, e])) {\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t} else {\r\n\t\t\t\tdelete drag.start_drag;\r\n\t\t\t\tvar task = gantt.getTask(id);\r\n\t\t\t\tif (gantt.isReadonly(task)){\r\n\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this._isMultiselect()) {\r\n\t\t\t\t\t// for don't move selected tasks when drag unselected task\r\n\t\t\t\t\tvar selectedTasksIds = gantt.getSelectedTasks();\r\n\t\t\t\t\tif (selectedTasksIds.indexOf(drag.id) >= 0) {\r\n\t\t\t\t\t\thelpers.forEach(selectedTasksIds, gantt.bind(function(taskId) {\r\n\t\t\t\t\t\t\tvar selectedTask = gantt.getTask(taskId);\r\n\t\t\t\t\t\t\tif (gantt.isSummaryTask(selectedTask) && gantt.config.drag_project && drag.mode == cfg.drag_mode.move) {\r\n\t\t\t\t\t\t\t\tthis._addSubtasksToDragMultiple(selectedTask.id);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.dragMultiple[taskId] = gantt.mixin({\r\n\t\t\t\t\t\t\t\tid: selectedTask.id,\r\n\t\t\t\t\t\t\t\tobj: gantt.copy(selectedTask)\r\n\t\t\t\t\t\t\t}, this.drag);\r\n\t\t\t\t\t\t}, this));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// for move unselected summary\r\n\t\t\t\tif (gantt.isSummaryTask(task) && gantt.config.drag_project && drag.mode == cfg.drag_mode.move) {\r\n\t\t\t\t\tthis._addSubtasksToDragMultiple(task.id);\r\n\t\t\t\t}\r\n\t\t\t\tgantt.callEvent(\"onTaskDragStart\", []);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t_fireEvent: function(stage, mode, params) {\r\n\t\t\tgantt.assert(this._events[stage], \"Invalid stage:{\" + stage + \"}\");\r\n\r\n\t\t\tvar trigger = this._events[stage][mode];\r\n\r\n\t\t\tgantt.assert(trigger, \"Unknown after drop mode:{\" + mode + \"}\");\r\n\t\t\tgantt.assert(params, \"Invalid event arguments\");\r\n\r\n\r\n\t\t\tif (!gantt.checkEvent(trigger))\r\n\t\t\t\treturn true;\r\n\r\n\t\t\treturn gantt.callEvent(trigger, params);\r\n\t\t},\r\n\r\n\t\tround_task_dates: function(task) {\r\n\t\t\tvar drag_state = this.drag;\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tif (!drag_state) {\r\n\t\t\t\tdrag_state = {mode: config.drag_mode.move};\r\n\t\t\t}\r\n\t\t\tthis._fix_dnd_scale_time(task, drag_state);\r\n\t\t},\r\n\t\tdestructor: function() {\r\n\t\t\tthis._domEvents.detachAll();\r\n\t\t},\r\n\t\t_isMultiselect: function() {\r\n\t\t\treturn gantt.config.drag_multiple && !!(gantt.getSelectedTasks && gantt.getSelectedTasks().length > 0);\r\n\t\t},\r\n\t\t_addSubtasksToDragMultiple: function(summaryId) {\r\n\t\t\tgantt.eachTask(function(child) {\r\n\t\t\t\tthis.dragMultiple[child.id] = gantt.mixin({\r\n\t\t\t\t\tid: child.id,\r\n\t\t\t\t\tobj: gantt.copy(child)\r\n\t\t\t\t}, this.drag);\r\n\t\t\t}, summaryId, this);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction initTaskDND() {\r\n\tvar _tasks_dnd;\r\n\treturn {\r\n\t\textend: function(timeline) {\r\n\t\t\ttimeline.roundTaskDates = function(task) {\r\n\t\t\t\t_tasks_dnd.round_task_dates(task);\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t\tinit: function(timeline, gantt) {\r\n\t\t\t_tasks_dnd = createTaskDND(timeline, gantt);\r\n\t\t\t// TODO: entry point for touch handlers, move touch to timeline\r\n\t\t\ttimeline._tasks_dnd = _tasks_dnd;\r\n\t\t\treturn _tasks_dnd.init(gantt);\r\n\t\t},\r\n\t\tdestructor: function() {\r\n\t\t\tif (_tasks_dnd) {\r\n\t\t\t\t_tasks_dnd.destructor();\r\n\t\t\t\t_tasks_dnd = null;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport default {\r\n\tcreateTaskDND: initTaskDND\r\n};","import * as domHelpers from \"../utils/dom_helpers\";\r\n\r\nvar initLinksDND = function(timeline, gantt) {\r\n\tvar _link_landing,\r\n\t\t_link_target_task,\r\n\t\t_link_target_task_start,\r\n\t\t_link_source_task,\r\n\t\t_link_source_task_start,\r\n\t\tmarkerDefaultOffset = 10,\r\n\t\tscrollDefaultSize = 18;\r\n\r\n\tfunction getDndState(){\r\n\t\treturn {\r\n\t\t\tlink_source_id : _link_source_task,\r\n\t\t\tlink_target_id : _link_target_task,\r\n\t\t\tlink_from_start : _link_source_task_start,\r\n\t\t\tlink_to_start : _link_target_task_start,\r\n\t\t\tlink_landing_area : _link_landing\r\n\t\t};\r\n\t}\r\n\r\n\tvar services = gantt.$services;\r\n\r\n\tvar state = services.getService(\"state\");\r\n\tvar DnD = services.getService(\"dnd\");\r\n\r\n\tstate.registerProvider(\"linksDnD\", getDndState);\r\n\r\n\tvar start_marker = \"task_start_date\",\r\n\t\tend_marker = \"task_end_date\",\r\n\t\tlink_edge_marker = \"gantt_link_point\",\r\n\t\tlink_landing_hover_area = \"gantt_link_control\";\r\n\r\n\tvar dnd = new DnD(timeline.$task_bars, {\r\n\t\tsensitivity : 0,\r\n\t\tupdates_per_second : 60,\r\n\t\tmousemoveContainer: gantt.$root,\r\n\t\tselector: \".\" + link_edge_marker,\r\n\t\tpreventDefault: true\r\n\t});\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function(obj,e) {\r\n\t\tvar target = (e.target||e.srcElement);\r\n\t\tresetDndState();\r\n\t\tif(gantt.getState(\"tasksDnd\").drag_id)\r\n\t\t\treturn false;\r\n\r\n\t\tif(domHelpers.locateClassName(target, link_edge_marker)){\r\n\t\t\tif(domHelpers.locateClassName(target, start_marker))\r\n\t\t\t\t_link_source_task_start = true;\r\n\r\n\t\t\tvar sid = gantt.locate(e);\r\n\t\t\t_link_source_task = sid;\r\n\r\n\t\t\tvar t = gantt.getTask(sid);\r\n\t\t\tif(gantt.isReadonly(t)){\r\n\t\t\t\tresetDndState();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tthis._dir_start = {\r\n\t\t\t\tx: dnd.config.original_element_sizes.x + dnd.config.original_element_sizes.width/2,\r\n\t\t\t\ty: dnd.config.original_element_sizes.y + dnd.config.original_element_sizes.height/2\r\n\t\t\t};\r\n\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, this));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function(obj,e) {\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\tupdateMarkedHtml(dnd.config.marker);\r\n\t}, this));\r\n\r\n\tfunction getVieportSize(){\r\n\t\tvar root = gantt.$root;\r\n\t\treturn { right: root.offsetWidth, bottom: root.offsetHeight };\r\n\t}\r\n\tfunction getMarkerSize (marker){\r\n\t\tvar width = 0, height = 0;\r\n\t\tif(marker){\r\n\t\t\twidth = marker.offsetWidth || 0;\r\n\t\t\theight = marker.offsetHeight || 0;\r\n\t\t}\r\n\t\treturn { width: width, height: height };\r\n\t}\r\n\r\n\tfunction getPosition(e, marker){\r\n\t\tvar oldPos = dnd.getPosition(e);\r\n\r\n\t\tvar markerSize = getMarkerSize(marker);\r\n\t\tvar viewportSize = getVieportSize();\r\n\r\n\t\tvar offsetX = gantt.config.tooltip_offset_x || markerDefaultOffset;\r\n\t\tvar offsetY = gantt.config.tooltip_offset_y || markerDefaultOffset;\r\n\r\n\t\tvar scrollSize = gantt.config.scroll_size || scrollDefaultSize;\r\n\r\n\t\t// GS-1315: Add offset if there are elements above Gantt\r\n\t\tvar ganttOffsetY = gantt.$container.getBoundingClientRect().y + window.scrollY;\r\n\r\n\t\tvar position = {\r\n\t\t\ty: oldPos.y + offsetY,\r\n\t\t\tx: oldPos.x + offsetX,\r\n\t\t\tbottom: oldPos.y + markerSize.height + offsetY + scrollSize,\r\n\t\t\tright: oldPos.x + markerSize.width + offsetX + scrollSize\r\n\t\t};\r\n\r\n\t\tif(position.bottom > viewportSize.bottom + ganttOffsetY){\r\n\t\t\tposition.y = viewportSize.bottom + ganttOffsetY - markerSize.height - offsetY;\r\n\t\t}\r\n\r\n\t\tif(position.right > viewportSize.right){\r\n\t\t\tposition.x = viewportSize.right - markerSize.width - offsetX;\r\n\t\t}\r\n\t\treturn position;\r\n\t}\r\n\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function(obj,e) {\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = getPosition(e, dd.marker);\r\n\t\tadvanceMarker(dd.marker, pos);\r\n\t\tvar landing = !!domHelpers.locateClassName(e, link_landing_hover_area);\r\n\r\n\t\tvar prevTarget = _link_target_task;\r\n\t\tvar prevLanding = _link_landing;\r\n\t\tvar prevToStart = _link_target_task_start;\r\n\r\n\t\tvar targ = gantt.locate(e),\r\n\t\t\tto_start = true;\r\n\r\n\t\t// can drag and drop link to another gantt on the page, such links are not supported\r\n\t\tvar eventTarget = domHelpers.getTargetNode(e);\r\n\r\n\t\tvar sameGantt = domHelpers.isChildOf(eventTarget, gantt.$root);\r\n\t\tif(!sameGantt){\r\n\t\t\tlanding = false;\r\n\t\t\ttarg = null;\r\n\t\t}\r\n\r\n\t\tif(landing){\r\n\t\t\t//refreshTask\r\n\t\t\tto_start = !domHelpers.locateClassName(e, end_marker);\r\n\t\t\tlanding = !!targ;\r\n\t\t}\r\n\r\n\t\t_link_target_task = targ;\r\n\t\t_link_landing = landing;\r\n\t\t_link_target_task_start = to_start;\r\n\r\n\t\tif(landing){\r\n\r\n\t\t\tvar node = domHelpers.locateClassName(e, link_landing_hover_area);\r\n\t\t\r\n\t\t\tconst point = node.querySelector(`.${link_edge_marker}`);\r\n\t\t\tif(point){\r\n\t\t\t\tconst absCoords = domHelpers.getRelativeNodePosition(point, timeline.$task_bg);\r\n\t\t\t\tthis._dir_end = {\r\n\t\t\t\t\tx: absCoords.x + point.offsetWidth/2,\r\n\t\t\t\t\ty: absCoords.y + point.offsetHeight/2\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tthis._dir_end = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\r\n\t\t\tif(gantt.env.isEdge){ // to fix margin collapsing\r\n\t\t\t\tthis._dir_end.y += window.scrollY;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar targetChanged = !(prevLanding == landing && prevTarget == targ && prevToStart == to_start);\r\n\t\tif(targetChanged){\r\n\t\t\tif(prevTarget)\r\n\t\t\t\tgantt.refreshTask(prevTarget, false);\r\n\t\t\tif(targ)\r\n\t\t\t\tgantt.refreshTask(targ, false);\r\n\t\t}\r\n\r\n\t\tif(targetChanged){\r\n\t\t\tupdateMarkedHtml(dd.marker);\r\n\t\t}\r\n\r\n\t\tshowDirectingLine(this._dir_start.x, this._dir_start.y, this._dir_end.x, this._dir_end.y);\r\n\r\n\t\treturn true;\r\n\t}, this));\r\n\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function() {\r\n\t\tvar drag = getDndState();\r\n\r\n\t\tif(drag.link_source_id && drag.link_target_id && drag.link_source_id != drag.link_target_id){\r\n\t\t\tvar type = gantt._get_link_type(drag.link_from_start, drag.link_to_start);\r\n\r\n\t\t\tvar link = {source : drag.link_source_id, target: drag.link_target_id, type:type};\r\n\t\t\tif(link.type && gantt.isLinkAllowed(link)) {\r\n\t\t\t\tif(gantt.callEvent(\"onLinkCreated\", [link])){\r\n\t\t\t\t\tgantt.addLink(link);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tresetDndState();\r\n\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (drag.link_source_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_source_id, false);\r\n\t\t\tif (drag.link_target_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_target_id, false);\r\n\t\t}\r\n\t\tremoveDirectionLine();\r\n\t}, this));\r\n\r\n\tfunction updateMarkedHtml(marker){\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_tooltip\"];\r\n\t\tif(link.link_source_id && link.link_target_id){\r\n\t\t\tif(gantt.isLinkAllowed(link.link_source_id, link.link_target_id, link.link_from_start, link.link_to_start)){\r\n\t\t\t\tcss.push(\"gantt_allowed_link\");\r\n\t\t\t}else{\r\n\t\t\t\tcss.push(\"gantt_invalid_link\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar className = gantt.templates.drag_link_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start);\r\n\t\tif(className)\r\n\t\t\tcss.push(className);\r\n\r\n\t\tvar html = \"<div class='\"+className+ \"'>\" +\r\n\t\t\tgantt.templates.drag_link(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start) +\r\n\t\t\t\"</div>\";\r\n\t\tmarker.innerHTML = html;\r\n\t}\r\n\r\n\tfunction advanceMarker(marker, pos){\r\n\t\tmarker.style.left = pos.x + \"px\";\r\n\t\tmarker.style.top = pos.y + \"px\";\r\n\t}\r\n\r\n\tfunction resetDndState(){\r\n\t\t_link_source_task =\r\n\t\t\t_link_source_task_start =\r\n\t\t\t\t_link_target_task = null;\r\n\t\t_link_target_task_start = true;\r\n\t}\r\n\tfunction showDirectingLine(s_x, s_y, e_x, e_y){\r\n\t\tvar div = getDirectionLine();\r\n\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_direction\"];\r\n\t\tif(gantt.templates.link_direction_class){\r\n\t\t\tcss.push(gantt.templates.link_direction_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start));\r\n\t\t}\r\n\r\n\t\tvar dist =Math.sqrt( (Math.pow(e_x - s_x, 2)) + (Math.pow(e_y - s_y, 2)) );\r\n\t\tdist = Math.max(0, dist - 3);\r\n\t\tif(!dist)\r\n\t\t\treturn;\r\n\r\n\t\tdiv.className = css.join(\" \");\r\n\t\tvar tan = (e_y - s_y)/(e_x - s_x),\r\n\t\t\tangle = Math.atan(tan);\r\n\r\n\t\tif(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 2){\r\n\t\t\tangle += Math.PI;\r\n\t\t}else if(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 3){\r\n\t\t\tangle -= Math.PI;\r\n\t\t}\r\n\r\n\r\n\r\n\t\tvar sin = Math.sin(angle),\r\n\t\t\tcos = Math.cos(angle),\r\n\t\t\ttop = Math.round(s_y),\r\n\t\t\tleft = Math.round(s_x);\r\n\r\n\r\n\t\tvar style = [\r\n\t\t\t\"-webkit-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-moz-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-ms-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-o-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"width:\" + Math.round(dist) + \"px\"\r\n\t\t];\r\n\r\n\t\tif(window.navigator.userAgent.indexOf(\"MSIE 8.0\") != -1){\r\n\t\t\t//ms-filter breaks styles in ie9, so add it only for 8th\r\n\t\t\tstyle.push(\"-ms-filter: \\\"\" + ieTransform(sin, cos) + \"\\\"\");\r\n\r\n\t\t\tvar shiftLeft = Math.abs(Math.round(s_x - e_x)),\r\n\t\t\t\tshiftTop = Math.abs(Math.round(e_y - s_y));\r\n\t\t\t//fix rotation axis\r\n\t\t\tswitch(coordinateCircleQuarter(s_x, e_x, s_y, e_y)){\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstyle.push(\"top:\" +  top + \"px\");\r\n\t\tstyle.push(\"left:\" +  left + \"px\");\r\n\r\n\t\tdiv.style.cssText = style.join(\";\");\r\n\t}\r\n\r\n\tfunction ieTransform(sin, cos){\r\n\t\treturn \"progid:DXImageTransform.Microsoft.Matrix(\"+\r\n\t\t\t\"M11 = \"+cos+\",\"+\r\n\t\t\t\"M12 = -\"+sin+\",\"+\r\n\t\t\t\"M21 = \"+sin+\",\"+\r\n\t\t\t\"M22 = \"+cos+\",\"+\r\n\t\t\t\"SizingMethod = 'auto expand'\"+\r\n\t\t\")\";\r\n\t}\r\n\tfunction coordinateCircleQuarter(sX, eX, sY, eY){\r\n\t\tif(eX >= sX){\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 1;\r\n\t\t\t}else{\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 2;\r\n\t\t\t}else{\r\n\t\t\t\treturn 3;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\tfunction getDirectionLine(){\r\n\t\tif(!dnd._direction || !dnd._direction.parentNode){\r\n\t\t\tdnd._direction = document.createElement(\"div\");\r\n\t\t\ttimeline.$task_links.appendChild(dnd._direction);\r\n\t\t}\r\n\t\treturn dnd._direction;\r\n\t}\r\n\tfunction removeDirectionLine(){\r\n\t\tif(dnd._direction){\r\n\t\t\tif (dnd._direction.parentNode)\t//the event line can be detached because of data refresh\r\n\t\t\t\tdnd._direction.parentNode.removeChild(dnd._direction);\r\n\r\n\t\t\tdnd._direction = null;\r\n\t\t}\r\n\t}\r\n\tgantt.attachEvent(\"onGanttRender\", gantt.bind(function() {\r\n\t\tif(dnd._direction){\r\n\t\t\tshowDirectingLine(this._dir_start.x, this._dir_start.y, this._dir_end.x, this._dir_end.y);\r\n\t\t}\r\n\t}, this));\r\n};\r\n\r\nexport default {\r\n\tcreateLinkDND: function(){\r\n\t\treturn {\r\n\t\t\tinit: initLinksDND\r\n\t\t};\r\n\t}\r\n};","import * as utils from \"../../../utils/utils\";\r\nimport taskDnD from \"./tasks_dnd\";\r\nimport linkDnD from \"./links_dnd\";\r\nimport * as domHelpers from \"../utils/dom_helpers\";\r\nimport MouseDelegates from \"../mouse_event_container\";\r\n\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\tvar services = gantt.$services;\r\n\t\treturn {\r\n\t\t\tonCreated: function (timeline) {\r\n\t\t\t\tvar config = timeline.$config;\r\n\t\t\t\tconfig.bind = utils.defined(config.bind) ? config.bind : \"task\";\r\n\t\t\t\tconfig.bindLinks = utils.defined(config.bindLinks) ? config.bindLinks : \"link\";\r\n\r\n\t\t\t\ttimeline._linksDnD = linkDnD.createLinkDND();\r\n\t\t\t\ttimeline._tasksDnD = taskDnD.createTaskDND();\r\n\t\t\t\ttimeline._tasksDnD.extend(timeline);\r\n\r\n\t\t\t\tthis._mouseDelegates = MouseDelegates(gantt);\r\n\t\t\t},\r\n\t\t\tonInitialized: function (timeline) {\r\n\t\t\t\tthis._attachDomEvents(gantt);\r\n\r\n\t\t\t\tthis._attachStateProvider(gantt, timeline);\r\n\r\n\t\t\t\ttimeline._tasksDnD.init(timeline, gantt);\r\n\t\t\t\ttimeline._linksDnD.init(timeline, gantt);\r\n\r\n\t\t\t\tif(timeline.$config.id == \"timeline\"){\r\n\t\t\t\t\tthis.extendDom(timeline);\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\t\t\t\tthis._clearDomEvents(gantt);\r\n\t\t\t\tthis._clearStateProvider(gantt);\r\n\t\t\t\tif (timeline._tasksDnD) {\r\n\t\t\t\t\ttimeline._tasksDnD.destructor();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\textendDom: function(timeline){\r\n\t\t\t\tgantt.$task = timeline.$task;\r\n\t\t\t\tgantt.$task_scale = timeline.$task_scale;\r\n\t\t\t\tgantt.$task_data = timeline.$task_data;\r\n\t\t\t\tgantt.$task_bg = timeline.$task_bg;\r\n\t\t\t\tgantt.$task_links = timeline.$task_links;\r\n\t\t\t\tgantt.$task_bars = timeline.$task_bars;\r\n\t\t\t},\r\n\r\n\t\t\t_clearDomEvents: function(){\r\n\t\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\t\tthis._mouseDelegates = null;\r\n\t\t\t},\r\n\r\n\t\t\t_attachDomEvents: function(gantt){\r\n\t\t\t\tfunction _delete_link_handler(id, e) {\r\n\t\t\t\t\tif (id && this.callEvent(\"onLinkDblClick\", [id, e])) {\r\n\r\n\t\t\t\t\t\tvar link = this.getLink(id);\r\n\t\t\t\t\t\tif (this.isReadonly(link)) return;\r\n\r\n\t\t\t\t\t\tvar title = \"\";\r\n\t\t\t\t\t\tvar question = this.locale.labels.link + \" \" + this.templates.link_description(this.getLink(id)) + \" \" + this.locale.labels.confirm_link_deleting;\r\n\r\n\t\t\t\t\t\twindow.setTimeout(function () {\r\n\t\t\t\t\t\t\tgantt._delete_link_confirm({\r\n\t\t\t\t\t\t\t\tlink: link,\r\n\t\t\t\t\t\t\t\tmessage: question,\r\n\t\t\t\t\t\t\t\ttitle: title,\r\n\t\t\t\t\t\t\t\tcallback: function () {\r\n\t\t\t\t\t\t\t\t\tgantt.deleteLink(id);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, (this.config.touch ? 300 : 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_task_link\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, this.config.link_attribute);\r\n\t\t\t\t\tif (id) {\r\n\t\t\t\t\t\tthis.callEvent(\"onLinkClick\", [id, e]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_scale_cell\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\t\t\t\t\tvar date = gantt.dateFromPos(pos.x);\r\n\t\t\t\t\tvar coll = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\t\t\tvar coll_date = gantt.getScale().trace_x[coll];\r\n\r\n\t\t\t\t\tgantt.callEvent(\"onScaleClick\", [e, coll_date]);\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"doubleclick\", \"gantt_task_link\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, gantt.config.link_attribute);\r\n\t\t\t\t\t_delete_link_handler.call(this, id, e);\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"doubleclick\", \"gantt_link_point\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e),\r\n\t\t\t\t\t\ttask = this.getTask(id);\r\n\r\n\t\t\t\t\tvar link = null;\r\n\t\t\t\t\tif (trg.parentNode && domHelpers.getClassName(trg.parentNode)) {\r\n\t\t\t\t\t\tif (domHelpers.getClassName(trg.parentNode).indexOf(\"_left\") > -1) {\r\n\t\t\t\t\t\t\tlink = task.$target[0];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlink = task.$source[0];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (link)\r\n\t\t\t\t\t\t_delete_link_handler.call(this, link, e);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt), this.$task);\r\n\t\t\t},\r\n\r\n\t\t\t_attachStateProvider: function(gantt, timeline){\r\n\t\t\t\tvar self = timeline;\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.registerProvider(\"tasksTimeline\", function(){\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tscale_unit: self._tasks ? self._tasks.unit : undefined,\r\n\t\t\t\t\t\tscale_step:  self._tasks ? self._tasks.step  : undefined\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t_clearStateProvider: function(){\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.unregisterProvider(\"tasksTimeline\");\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n})();\r\n\r\nexport default initializer;","import * as domHelpers from \"./utils/dom_helpers\";\r\n\r\nvar initializer = (function() {\r\n\treturn function (gantt) {\r\n\t\treturn {\r\n\r\n\t\t\tgetVerticalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollVer\");\r\n\t\t\t},\r\n\t\t\tgetHorizontalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollHor\");\r\n\t\t\t},\r\n\r\n\t\t\t_legacyGridResizerClass: function(layout){\r\n\t\t\t\tvar resizers = layout.getCellsByType(\"resizer\");\r\n\t\t\t\tfor(var i = 0; i < resizers.length; i++){\r\n\t\t\t\t\tvar r = resizers[i];\r\n\t\t\t\t\tvar gridResizer = false;\r\n\r\n\t\t\t\t\tvar prev = r.$parent.getPrevSibling(r.$id);\r\n\t\t\t\t\tif(prev && prev.$config && prev.$config.id === \"grid\"){\r\n\t\t\t\t\t\tgridResizer= true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar next = r.$parent.getNextSibling(r.$id);\r\n\t\t\t\t\t\tif(next && next.$config && next.$config.id === \"grid\"){\r\n\t\t\t\t\t\t\tgridResizer= true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(gridResizer){\r\n\t\t\t\t\t\tr.$config.css = (r.$config.css ? r.$config.css + \" \" : \"\") + \"gantt_grid_resize_wrap\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tonCreated: function(layout) {\r\n\t\t\t\tvar first = true;\r\n\r\n\t\t\t\tthis._legacyGridResizerClass(layout);\r\n\r\n\t\t\t\tlayout.attachEvent(\"onBeforeResize\", function() {\r\n\t\t\t\t\tvar mainTimeline = gantt.$ui.getView(\"timeline\");\r\n\t\t\t\t\tif (mainTimeline)\r\n\t\t\t\t\t\tmainTimeline.$config.hidden = mainTimeline.$parent.$config.hidden = !gantt.config.show_chart;\r\n\r\n\t\t\t\t\tvar mainGrid = gantt.$ui.getView(\"grid\");\r\n\r\n\t\t\t\t\tif(!mainGrid)\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tvar colsWidth = mainGrid._getColsTotalWidth();\r\n\t\t\t\t\tvar hideGrid = !gantt.config.show_grid || !gantt.config.grid_width || colsWidth === 0;\r\n\t\t\t\t\tif (first && !hideGrid && colsWidth !== false){\r\n\t\t\t\t\t\t\tgantt.config.grid_width = colsWidth;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmainGrid.$config.hidden = mainGrid.$parent.$config.hidden = hideGrid;\r\n\r\n\t\t\t\t\tif (!mainGrid.$config.hidden) {\r\n\t\t\t\t\t\t/* restrict grid width due to min_width, max_width, min_grid_column_width */\r\n\t\t\t\t\t\tvar grid_limits = mainGrid._getGridWidthLimits();\r\n\t\t\t\t\t\tif (grid_limits[0] && gantt.config.grid_width < grid_limits[0])\r\n\t\t\t\t\t\t\tgantt.config.grid_width = grid_limits[0];\r\n\t\t\t\t\t\tif (grid_limits[1] && gantt.config.grid_width > grid_limits[1])\r\n\t\t\t\t\t\t\tgantt.config.grid_width = grid_limits[1];\r\n\t\t\t\t\t\tif (mainTimeline && gantt.config.show_chart){\r\n\r\n\t\t\t\t\t\t\tmainGrid.$config.width = gantt.config.grid_width - 1;\r\n\r\n\t\t\t\t\t\t\t// GS-1314: Don't let the non-scrollable grid to be larger than the container with the correct width\r\n\t\t\t\t\t\t\tif (!mainGrid.$config.scrollable && mainGrid.$config.scrollY && gantt.$root.offsetWidth){\r\n\t\t\t\t\t\t\t\tvar ganttContainerWidth = mainGrid.$gantt.$layout.$container.offsetWidth;\r\n\t\t\t\t\t\t\t\tvar verticalScrollbar = gantt.$ui.getView(mainGrid.$config.scrollY);\r\n\t\t\t\t\t\t\t\tvar verticalScrollbarWidth = verticalScrollbar.$config.width;\r\n\r\n\t\t\t\t\t\t\t\t// GS-2488: to prevent grid from occupying the whole gantt container(timeline will be disabled) \r\n\t\t\t\t\t\t\t\t// need to leave min width for timeline\r\n\t\t\t\t\t\t\t\tvar gridOverflow = ganttContainerWidth - (mainGrid.$config.width + verticalScrollbarWidth) - 4;\r\n\t\t\t\t\t\t\t\tif (gridOverflow < 0){\r\n\t\t\t\t\t\t\t\t\tmainGrid.$config.width += gridOverflow;\r\n\t\t\t\t\t\t\t\t\tgantt.config.grid_width += gridOverflow;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (!first) {\r\n\t\t\t\t\t\t\t\tif (mainTimeline && !domHelpers.isChildOf(mainTimeline.$task, layout.$view)) {\r\n\t\t\t\t\t\t\t\t\t// timeline is being displayed after being not visible, reset grid with from full screen\r\n\t\t\t\t\t\t\t\t\tif (!mainGrid.$config.original_grid_width) {\r\n\t\t\t\t\t\t\t\t\t\tvar skinSettings = gantt.skins[gantt.skin];\r\n\t\t\t\t\t\t\t\t\t\tif(skinSettings && skinSettings.config && skinSettings.config.grid_width){\r\n\t\t\t\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width =  skinSettings.config.grid_width;\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width = 0;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tgantt.config.grid_width = mainGrid.$config.original_grid_width;\r\n\t\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tmainGrid.$parent._setContentSize(mainGrid.$config.width, null);\r\n\t\t\t\t\t\t\t\t\tgantt.$layout._syncCellSizes(mainGrid.$parent.$config.group, {value: gantt.config.grid_width, isGravity: false});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t\tif (mainGrid.$parent.$config.group) {\r\n\t\t\t\t\t\t\t\t\tgantt.$layout._syncCellSizes(mainGrid.$parent.$config.group, {value: mainGrid.$parent.$config.width, isGravity: false});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (mainTimeline && domHelpers.isChildOf(mainTimeline.$task, layout.$view)) {\r\n\t\t\t\t\t\t\t\t// hiding timeline, remember grid with to restore it when timeline is displayed again\r\n\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!first) {\r\n\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfirst = false;\r\n\t\t\t\t});\r\n\t\t\t\tthis._initScrollStateEvents(layout);\r\n\t\t\t},\r\n\r\n\t\t\t_initScrollStateEvents: function(layout) {\r\n\t\t\t\tgantt._getVerticalScrollbar = this.getVerticalScrollbar;\r\n\t\t\t\tgantt._getHorizontalScrollbar = this.getHorizontalScrollbar;\r\n\r\n\t\t\t\tvar vertical = this.getVerticalScrollbar();\r\n\t\t\t\tvar horizontal = this.getHorizontalScrollbar();\r\n\t\t\t\tif (vertical) {\r\n\t\t\t\t\tvertical.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [scrollState.x, oldPos, scrollState.x, newPos]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (horizontal) {\r\n\t\t\t\t\thorizontal.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [oldPos, scrollState.y, newPos, scrollState.y]);\r\n\r\n\t\t\t\t\t\t// if the grid doesn't fit the width, scroll the row container\r\n\t\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tif (grid && grid.$grid_data && !grid.$config.scrollable){\r\n\t\t\t\t\t\t\tgrid.$grid_data.style.left = grid.$grid.scrollLeft + \"px\";\r\n\t\t\t\t\t\t\tgrid.$grid_data.scrollLeft = grid.$grid.scrollLeft;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayout.attachEvent(\"onResize\", function(){\r\n\t\t\t\t\tif (vertical && !gantt.$scroll_ver){\r\n\t\t\t\t\t\tgantt.$scroll_ver = vertical.$scroll_ver;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (horizontal && !gantt.$scroll_hor){\r\n\t\t\t\t\t\tgantt.$scroll_hor = horizontal.$scroll_hor;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t_findGridResizer: function(layout, grid){\r\n\t\t\t\tvar resizers = layout.getCellsByType(\"resizer\");\r\n\r\n\t\t\t\tvar gridFirst = true;\r\n\t\t\t\tvar gridResizer;\r\n\t\t\t\tfor(var i = 0; i < resizers.length; i++){\r\n\t\t\t\t\tvar res = resizers[i];\r\n\t\t\t\t\tres._getSiblings();\r\n\t\t\t\t\tvar prev = res._behind;\r\n\t\t\t\t\tvar next = res._front;\r\n\t\t\t\t\tif(prev && prev.$content === grid || (prev.isChild && prev.isChild(grid))){\r\n\t\t\t\t\t\tgridResizer = res;\r\n\t\t\t\t\t\tgridFirst = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}else if(next && next.$content === grid || (next.isChild && next.isChild(grid))){\r\n\t\t\t\t\t\tgridResizer = res;\r\n\t\t\t\t\t\tgridFirst = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\t\t\t\t\tresizer: gridResizer,\r\n\t\t\t\t\tgridFirst: gridFirst\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\t\t\tonInitialized: function (layout) {\r\n\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\r\n\t\t\t\tvar resizeInfo = this._findGridResizer(layout, grid);\r\n\r\n\t\t\t\t// expose grid resize events\r\n\t\t\t\tif(resizeInfo.resizer){\r\n\t\t\t\t\tvar gridFirst = resizeInfo.gridFirst,\r\n\t\t\t\t\t\tnext = resizeInfo.resizer;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tif(next.$config.mode !== \"x\"){\r\n\t\t\t\t\t\treturn;// track only horizontal resize\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar initialWidth;\r\n\t\t\t\t\tnext.attachEvent(\"onResizeStart\", function(prevCellWidth, nextCellWidth){\r\n\r\n\t\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tvar viewCell = grid ? grid.$parent : null;\r\n\t\t\t\t\t\tif(viewCell){\r\n\t\t\t\t\t\t\tvar limits = grid._getGridWidthLimits();\r\n\r\n\t\t\t\t\t\t\t// min grid width is defined by min widths of its columns, unless grid has horizontal scroll\r\n\t\t\t\t\t\t\tif(!grid.$config.scrollable)\r\n\t\t\t\t\t\t\t\tviewCell.$config.minWidth = limits[0];\r\n\r\n\t\t\t\t\t\t\tviewCell.$config.maxWidth = limits[1];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tinitialWidth = gridFirst ? prevCellWidth : nextCellWidth;\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResizeStart\", [initialWidth]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResize\", function(newBehindSize, newFrontSize){\r\n\t\t\t\t\t\tvar newSize = gridFirst ? newBehindSize : newFrontSize;\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResize\", [initialWidth, newSize]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResizeEnd\", function(oldBackSize, oldFrontSize, newBackSize, newFrontSize){\r\n\r\n\t\t\t\t\t\tvar oldSize = gridFirst ? oldBackSize : oldFrontSize;\r\n\t\t\t\t\t\tvar newSize = gridFirst ? newBackSize : newFrontSize;\r\n\t\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tvar viewCell = grid ? grid.$parent : null;\r\n\t\t\t\t\t\tif(viewCell){\r\n\t\t\t\t\t\t\tviewCell.$config.minWidth = undefined;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar res = gantt.callEvent(\"onGridResizeEnd\", [oldSize, newSize]);\r\n\t\t\t\t\t\tif(res && newSize !== 0){// new size may be numeric zero when cell size is defined by 'gravity', actual size will be calculated by layout later\r\n\t\t\t\t\t\t\tgantt.config.grid_width = newSize;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t};\r\n})();\r\n\r\nexport default initializer;","import uiFactory from \"./ui_factory\";\r\nimport mouseEvents from \"./mouse\";\r\nimport createLayers from \"./gantt_layers\";\r\nimport Cell from \"./layout/cell\";\r\nimport Layout from \"./layout/layout\";\r\nimport ViewLayout from \"./layout/view_layout\";\r\nimport ViewCell from \"./layout/view_cell\";\r\nimport Resizer from \"./layout/resizer_cell\";\r\nimport Scrollbar from \"./layout/scrollbar_cell\";\r\nimport Timeline from \"./timeline/timeline\";\r\nimport Grid from \"./grid/grid\";\r\nimport ResourceGrid from \"./grid/resource_grid\";\r\nimport ResourceTimeline from \"./timeline/resource_timeline\";\r\nimport ResourceHistogram from \"./timeline/resource_histogram\";\r\n\r\n\r\nimport gridEditorsFactory from \"./grid/editors/controller\";\r\n\r\nimport renderTaskBar from \"./render/task_bar_smart_render\";\r\nimport renderTimedProjectBar from \"./render/task_project_smart_render\";\r\nimport renderSplitTaskBar from \"./render/task_split_render\";\r\nimport renderRollupTaskBar from \"./render/task_rollup_render\";\r\nimport renderTaskBg from \"./render/task_bg_render\";\r\nimport renderLink from \"./render/link_render\";\r\nimport gridRenderer from \"./render/task_grid_line_render\";\r\nimport resourceMatrixRenderer from \"./render/resource_matrix_render\";\r\nimport resourceHistogramRenderer from \"./render/resource_histogram_render\";\r\nimport gridTaskRowResizerRenderer from \"./render/task_grid_row_resize_render\";\r\nimport renderConstraints from \"./render/task_constraints_render\";\r\nimport renderDeadline from \"./render/task_deadline_render\";\r\nimport renderBaselines from \"./render/task_baselines_render\";\r\nimport mainGridInitializer from \"./grid/main_grid_initializer\";\r\nimport mainTimelineInitializer from \"./timeline/main_timeline_initializer\";\r\nimport mainLayoutInitializer from \"./main_layout_initializer\";\r\n\r\nfunction initUI(gantt){\r\n\tfunction attachInitializer(view, initializer){\r\n\t\tvar ext = initializer(gantt);\r\n\t\tif(ext.onCreated)\r\n\t\t\text.onCreated(view);\r\n\t\tview.attachEvent(\"onReady\", function(){\r\n\t\t\tif(ext.onInitialized)\r\n\t\t\t\text.onInitialized(view);\r\n\t\t});\r\n\t\tview.attachEvent(\"onDestroy\", function(){\r\n\t\t\tif(ext.onDestroyed)\r\n\t\t\t\text.onDestroyed(view);\r\n\t\t});\r\n\t}\r\n\r\n\tvar factory = uiFactory.createFactory(gantt);\r\n\tfactory.registerView(\"cell\", Cell);\r\n\tfactory.registerView(\"resizer\", Resizer);\r\n\tfactory.registerView(\"scrollbar\", Scrollbar);\r\n\tfactory.registerView(\"layout\", Layout, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"main\"){\r\n\t\t\tattachInitializer(view, mainLayoutInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"viewcell\", ViewCell);\r\n\tfactory.registerView(\"multiview\", ViewLayout);\r\n\tfactory.registerView(\"timeline\", Timeline, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"timeline\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainTimelineInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"grid\", Grid, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"grid\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainGridInitializer);\r\n\t\t}\r\n\t});\r\n\r\n\tfactory.registerView(\"resourceGrid\", ResourceGrid);\r\n\tfactory.registerView(\"resourceTimeline\", ResourceTimeline);\r\n\tfactory.registerView(\"resourceHistogram\", ResourceHistogram);\r\n\r\n\tvar layersEngine = createLayers(gantt);\r\n\r\n\tvar inlineEditors = gridEditorsFactory(gantt);\r\n\r\n\tgantt.ext.inlineEditors = inlineEditors;\r\n\tgantt.ext._inlineEditors = inlineEditors;\r\n\tinlineEditors.init(gantt);\r\n\r\n\treturn {\r\n\t\tfactory:factory,\r\n\t\tmouseEvents: mouseEvents.init(gantt),\r\n\t\tlayersApi: layersEngine.init(),\r\n\t\trender:{\r\n\t\t\tgridLine: function(){\r\n\t\t\t\treturn gridRenderer(gantt);\r\n\t\t\t},\r\n\t\t\ttaskBg: function(){\r\n\t\t\t\treturn renderTaskBg(gantt);\r\n\t\t\t},\r\n\t\t\ttaskBar: function(){\r\n\t\t\t\treturn renderTaskBar(gantt);\r\n\t\t\t},\r\n\t\t\ttimedProjectBar: function(){\r\n\t\t\t\treturn renderTimedProjectBar(gantt);\r\n\t\t\t},\r\n\t\t\ttaskRollupBar: function() {\r\n\t\t\t\treturn renderRollupTaskBar(gantt);\r\n\t\t\t},\r\n\t\t\ttaskSplitBar: function(){\r\n\t\t\t\treturn renderSplitTaskBar(gantt);\r\n\t\t\t},\r\n\t\t\ttaskConstraints: function(){\r\n\t\t\t\treturn renderConstraints(gantt);\r\n\t\t\t},\r\n\t\t\ttaskDeadline: function(){\r\n\t\t\t\treturn renderDeadline(gantt);\r\n\t\t\t},\r\n\t\t\ttaskBaselines: function(){\r\n\t\t\t\treturn renderBaselines(gantt);\r\n\t\t\t},\r\n\t\t\tlink: function(){\r\n\t\t\t\treturn renderLink(gantt);\r\n\t\t\t},\r\n\t\t\tresourceRow: function(){\r\n\t\t\t\treturn resourceMatrixRenderer(gantt);\r\n\t\t\t},\r\n\t\t\tresourceHistogram: function(){\r\n\t\t\t\treturn resourceHistogramRenderer(gantt);\r\n\t\t\t},\r\n\t\t\tgridTaskRowResizer: function(){\r\n\t\t\t\treturn gridTaskRowResizerRenderer(gantt);\r\n\t\t\t}\r\n\t\t},\r\n\t\tlayersService: {\r\n\t\t\tgetDataRender: function(name){\r\n\t\t\t\treturn layersEngine.getDataRender(name, gantt);\r\n\t\t\t},\r\n\t\t\tcreateDataRender: function(config){\r\n\t\t\t\treturn layersEngine.createDataRender(config, gantt);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport default {\r\n\tinit: initUI\r\n};","export default null;","import * as helpers from \"../../../utils/helpers\";\r\nimport getRowRectangle from \"./viewport/get_grid_row_rectangle\";\r\nimport getVisibleRange from \"./viewport/get_visible_bars_range\";\r\nimport isInViewPort from \"./viewport/is_grid_row_in_viewport\";\r\n\r\nfunction createGridLineRender(gantt){\r\n\r\n\tfunction _render_grid_item(item, view, config, viewport) {\r\n\t\tvar columns = view.getGridColumns();\r\n\t\tvar templates = view.$getTemplates();\r\n\r\n\t\tvar store = view.$config.rowStore;\r\n\r\n\t\tvar cells = [];\r\n\t\tvar has_child;\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\t\t\tvar cell;\r\n\r\n\t\t\tvar value;\r\n\t\t\tvar textValue;\r\n\t\t\tif (col.name == \"add\") {\r\n\t\t\t\tvar aria = gantt._waiAria.gridAddButtonAttrString(col);\r\n\r\n\t\t\t\tvalue = \"<div \" + aria + \" class='gantt_add'></div>\";\r\n\t\t\t\ttextValue = \"\";\r\n\t\t\t} else {\r\n\t\t\t\tif (col.template)\r\n\t\t\t\t\tvalue = col.template(item);\r\n\t\t\t\telse\r\n\t\t\t\t\tvalue = item[col.name];\r\n\r\n\t\t\t\tif (helpers.isDate(value)){\r\n\t\t\t\t\tvalue = templates.date_grid(value, item, col.name);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (value === null || value === undefined) {\r\n\t\t\t\t\tvalue = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttextValue = value;\r\n\t\t\t\tvalue = \"<div class='gantt_tree_content'>\" + value + \"</div>\";\r\n\t\t\t}\r\n\t\t\tvar css = \"gantt_cell\" + (last ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\tvar tree = [];\r\n\t\t\tif (col.tree) {\r\n\t\t\t\tcss += \" gantt_cell_tree\";\r\n\t\t\t\tfor (var j = 0; j < item.$level; j++)\r\n\t\t\t\t\ttree.push(templates.grid_indent(item));\r\n\r\n\t\t\t\thas_child = store.hasChild(item.id) && !(gantt.isSplitTask(item) && !gantt.config.open_split_tasks);\r\n\t\t\t\tif (has_child) {\r\n\t\t\t\t\ttree.push(templates.grid_open(item));\r\n\t\t\t\t\ttree.push(templates.grid_folder(item));\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttree.push(templates.grid_blank(item));\r\n\t\t\t\t\ttree.push(templates.grid_file(item));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar style = \"width:\" + (col.width - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tif (this.defined(col.align)){\r\n\t\t\t\tvar flexAlign = {\r\n\t\t\t\t\tright: \"flex-end\",\r\n\t\t\t\t\tleft: \"flex-start\",\r\n\t\t\t\t\tcenter: \"center\"\r\n\t\t\t\t};\r\n\t\t\t\tvar justifyContent = flexAlign[col.align];\r\n\r\n\t\t\t\tstyle += \"text-align:\" + col.align + \";justify-content:\"  + justifyContent + \";\";\r\n\t\t\t}\r\n\r\n\t\t\tvar aria = gantt._waiAria.gridCellAttrString(col, textValue, item);\r\n\r\n\t\t\ttree.push(value);\r\n\t\t\tcell = \"<div class='\" + css + \"' data-column-index='\"+i+\"' data-column-name='\"+col.name+\"' style='\" + style + \"' \" + aria + \">\" + tree.join(\"\") + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\t// GS-291. The odd class should be assigned correctly\r\n\t\tcss = \"\";\r\n\t\tconst storeName = store.$config.name;\r\n\t\tswitch (storeName) {\r\n\t\t\tcase \"task\":\r\n\t\t\t\tcss = gantt.getGlobalTaskIndex(item.id) % 2 === 0 ? \"\" : \" odd\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"resource\":\r\n\t\t\t\tcss = store.visibleOrder.indexOf(item.id) % 2 === 0 ? \"\" : \" odd\";\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tcss += (item.$transparent) ? \" gantt_transparent\" : \"\";\r\n\r\n\t\tcss += (item.$dataprocessor_class ? \" \" + item.$dataprocessor_class : \"\");\r\n\r\n\t\tif (templates.grid_row_class) {\r\n\t\t\tvar css_template = templates.grid_row_class.call(gantt, item.start_date, item.end_date, item);\r\n\t\t\tif (css_template)\r\n\t\t\t\tcss += \" \" + css_template;\r\n\t\t}\r\n\r\n\t\tif(store.isSelected(item.id)) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.className = \"gantt_row\" + css + \" gantt_row_\" + gantt.getTaskType(item.type);\r\n\t\tvar height = view.getItemHeight(item.id);\r\n\t\tel.style.height = height + \"px\";\r\n\t\tel.style.lineHeight = height + \"px\";\r\n\r\n\t\tif(config.smart_rendering){\r\n\t\t\tel.style.position = \"absolute\";\r\n\t\t\tel.style.left = \"0px\";\r\n\t\t\tel.style.top = view.getItemTop(item.id) + \"px\";\r\n\t\t}\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\tel.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t\tel.setAttribute(view.$config.bind + \"_id\", item.id); // 'task_id'/'resource_id' for backward compatibility\r\n\t\t}\r\n\r\n\t\tgantt._waiAria.taskRowAttr(item, el);\r\n\r\n\t\tel.innerHTML = cells.join(\"\");\r\n\t\treturn el;\r\n\t}\r\n\r\n\tfunction onrender(item, rowNode, view){\r\n\t\tvar columns = view.getGridColumns();\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar column = columns[i];\r\n\t\t\tif (column.onrender){\r\n\r\n\t\t\t\t// find cell node for current column\r\n\t\t\t\tvar cellNode = rowNode.querySelector(`[data-column-name=\"${column.name}\"]`);\r\n\t\t\t\tif (cellNode) {\r\n\t\t\t\t\tvar content = column.onrender(item, cellNode);\r\n\t\t\t\t\tif (content && typeof content === \"string\") {\r\n\t\t\t\t\t\tcellNode.innerHTML = content;\r\n\t\t\t\t\t} else if (content && typeof content === \"object\") {\r\n\t\t\t\t\t\t// render object to node using additional functionality\r\n\t\t\t\t\t\tif (gantt.config.external_render){\r\n\t\t\t\t\t\t\tvar adapter = gantt.config.external_render;\r\n\t\t\t\t\t\t\tif (adapter.isElement(content)){\r\n\t\t\t\t\t\t\t\tadapter.renderElement(content, cellNode);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\trender: _render_grid_item,\r\n\t\tupdate: null,\r\n\t\tgetRectangle: getRowRectangle,\r\n\t\tisInViewPort: isInViewPort,\r\n\t\tgetVisibleRange: getVisibleRange,\r\n\t\tonrender: onrender\r\n\t};\r\n}\r\n\r\nexport default createGridLineRender;","import getRowRectangle from \"./viewport/get_bg_row_rectangle\";\r\nimport isLegacyRender from \"./is_legacy_smart_render\";\r\nimport getVisibleRange from \"./viewport/get_visible_bars_range\";\r\nimport getVisibleCellsRange from \"./viewport/get_visible_cells_range\";\r\nimport isColumnVisible from \"./viewport/is_column_visible\";\r\nimport bgPlaceholder from \"./prerender/task_bg_placeholder\";\r\n\r\nfunction createTaskBgRender(gantt){\r\n\tvar renderedCells = {};\r\n\tvar visibleCells = {};\r\n\r\n\tfunction isRendered(item, columnIndex){\r\n\t\tif(renderedCells[item.id][columnIndex] && renderedCells[item.id][columnIndex].parentNode){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction detachRenderedCell(itemId, columnIndex){\r\n\t\tif(renderedCells[itemId] && renderedCells[itemId][columnIndex] &&\r\n\t\t\trenderedCells[itemId][columnIndex].parentNode\r\n\t\t\t){\r\n\t\t\t\trenderedCells[itemId][columnIndex].parentNode.removeChild(renderedCells[itemId][columnIndex]);\r\n\t\t\t}\r\n\t}\r\n\r\n\tfunction getCellClassTemplate(view){\r\n\t\tvar templates = view.$getTemplates();\r\n\t\tvar cssTemplate;\r\n\t\tif (typeof templates.task_cell_class !== \"undefined\") {\r\n\t\t\tcssTemplate = templates.task_cell_class;\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tvar log = console.warn || console.log;\r\n\t\t\tlog('gantt.templates.task_cell_class template is deprecated and will be removed soon. Please use gantt.templates.timeline_cell_class instead.');\r\n\t\t} else {\r\n\t\t\tcssTemplate = templates.timeline_cell_class;\r\n\t\t}\r\n\t\treturn cssTemplate;\r\n\t}\r\n\tfunction getCellContentTemplate(view){\r\n\t\tvar templates = view.$getTemplates();\r\n\t\tvar contentTemplate = templates.timeline_cell_content;\r\n\t\treturn contentTemplate;\r\n\t}\r\n\r\n\tfunction renderCells(item, node, view, config, viewPort){\r\n\t\tvar cfg = view.getScale();\r\n\t\tvar count = cfg.count;\r\n\t\tvar cssTemplate = getCellClassTemplate(view);\r\n\t\tvar contentTemplate = getCellContentTemplate(view);\r\n\r\n\t\tif (config.show_task_cells) {\r\n\t\t\tif(!renderedCells[item.id]){\r\n\t\t\t\trenderedCells[item.id] = {};\r\n\t\t\t}\r\n\t\t\tif(!visibleCells[item.id]){\r\n\t\t\t\tvisibleCells[item.id] = {};\r\n\t\t\t}\r\n\r\n\t\t\tvar range = getVisibleCellsRange(cfg, viewPort);\r\n\r\n\t\t\tfor(var i in visibleCells[item.id]){\r\n\t\t\t\tvar index = visibleCells[item.id][i];\r\n\r\n\t\t\t\tif(Number(index) < range.start || Number(index) > range.end){\r\n\t\t\t\t\tdetachRenderedCell(item.id, index);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvisibleCells[item.id] = {};\r\n\t\t\t// TODO: do not iterate all cell, only ones in the viewport and once that are already rendered\r\n\t\t\tfor (var columnIndex = range.start; columnIndex <= range.end; columnIndex++) {\r\n\t\t\t\tvar cell = renderOneCell(cfg, columnIndex, item, viewPort, count, cssTemplate, contentTemplate, config);\r\n\t\t\t\tif(!cell && isRendered(item, columnIndex)){\r\n\t\t\t\t\tdetachRenderedCell(item.id, columnIndex);\r\n\t\t\t\t}else if (cell && !cell.parentNode){\r\n\t\t\t\t\tnode.appendChild(cell);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction renderOneCell(scale, columnIndex, item, viewPort, count, cssTemplate, contentTemplate, config){\r\n\t\tvar width = scale.width[columnIndex],\r\n\t\t\tcssclass = \"\";\r\n\r\n\t\tif (isColumnVisible(columnIndex, scale, viewPort, gantt)) {//do not render skipped columns\r\n\r\n\t\t\tvar cssTemplateContent = cssTemplate(item, scale.trace_x[columnIndex]);\r\n\t\t\tvar htmlTemplateContent = \"\";\r\n\t\t\tif (contentTemplate) {// for backward compatibility, contentTemplate was added in 7.2.0+, will be undefined if someone used copy of old config/template object\r\n\t\t\t\thtmlTemplateContent = contentTemplate(item, scale.trace_x[columnIndex]);\r\n\t\t\t}\r\n\r\n\t\t\tif(config.static_background){\r\n\t\t\t\t// if cell render in static background is not allowed, or if it's a blank cell\r\n\t\t\t\tvar customCell = !!(cssTemplateContent || htmlTemplateContent);\r\n\t\t\t\tif(!(config.static_background_cells && customCell)){\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(renderedCells[item.id][columnIndex]){\r\n\t\t\t\tvisibleCells[item.id][columnIndex] = columnIndex;\r\n\t\t\t\treturn renderedCells[item.id][columnIndex];\r\n\t\t\t}\r\n\t\t\tvar cell = document.createElement(\"div\");\r\n\t\t\tcell.style.width = (width) + \"px\";\r\n\r\n\t\t\tcssclass = \"gantt_task_cell\" + (columnIndex == count - 1 ? \" gantt_last_cell\" : \"\");\r\n\t\t\tif (cssTemplateContent) {\r\n\t\t\t\tcssclass += \" \" + cssTemplateContent;\r\n\t\t\t}\r\n\t\t\tcell.className = cssclass;\r\n\r\n\t\t\tif (htmlTemplateContent) {\r\n\t\t\t\tcell.innerHTML = htmlTemplateContent;\r\n\t\t\t}\r\n\r\n\t\t\tcell.style.position = \"absolute\";\r\n\t\t\tcell.style.left = scale.left[columnIndex] + \"px\";\r\n\t\t\trenderedCells[item.id][columnIndex] = cell;\r\n\t\t\tvisibleCells[item.id][columnIndex] = columnIndex;\r\n\r\n\t\t\treturn cell;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction _render_bg_line(item, view, config, viewPort) {\r\n\t\tvar templates = view.$getTemplates();\r\n\t\tvar cfg = view.getScale();\r\n\t\tvar count = cfg.count;\r\n\r\n\t\tif(config.static_background && !config.static_background_cells){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar row = document.createElement(\"div\");\r\n\r\n\t\tvar cellCssTemplate = getCellClassTemplate(view);\r\n\t\tvar cellHtmlTemplate = getCellContentTemplate(view);\r\n\r\n\t\tvar range;\r\n\r\n\t\tif(!viewPort || !config.smart_rendering || isLegacyRender(gantt)){\r\n\t\t\trange = {\r\n\t\t\t\tstart: 0,\r\n\t\t\t\tend: count - 1\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\trange = getVisibleCellsRange(cfg, viewPort.x);\r\n\t\t}\r\n\t\tif (config.show_task_cells) {\r\n\t\t\trenderedCells[item.id] = {};\r\n\t\t\tvisibleCells[item.id] = {};\r\n\t\t\tfor (var columnIndex = range.start; columnIndex <= range.end; columnIndex++) {\r\n\t\t\t\tvar cell = renderOneCell(cfg, columnIndex, item, viewPort, count, cellCssTemplate, cellHtmlTemplate, config);\r\n\t\t\t\tif(cell){\r\n\t\t\t\t\trow.appendChild(cell);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// GS-291. The odd class should be assigned correctly\r\n\t\tconst store = view.$config.rowStore;\r\n\t\tconst odd = store.getIndexById(item.id) % 2 !== 0;\r\n\r\n\t\tvar cssTemplate = templates.task_row_class(item.start_date, item.end_date, item);\r\n\t\tvar css = \"gantt_task_row\" + (odd ? \" odd\" : \"\") + (cssTemplate ? ' ' + cssTemplate : '');\r\n\r\n\t\tif(store.isSelected(item.id)) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\r\n\t\trow.className = css;\r\n\r\n\t\tif (config.smart_rendering) {\r\n\t\t\trow.style.position = \"absolute\";\r\n\t\t\trow.style.top = view.getItemTop(item.id) + \"px\";\r\n\t\t\trow.style.width = \"100%\";\r\n\t\t}else{\r\n\t\t\trow.style.position = \"relative\";\r\n\t\t}\r\n\t\trow.style.height = (view.getItemHeight(item.id)) + \"px\";\r\n\r\n\t\tif (item.id == \"timeline_placeholder_task\"){\r\n\t\t\tvar placeholderTop = 0;\r\n\t\t\tif (item.lastTaskId){\r\n\t\t\t\tvar lastTaskTop = view.getItemTop(item.lastTaskId);\r\n\t\t\t\tvar lastTaskHeight = view.getItemHeight(item.lastTaskId);\r\n\t\t\t\tplaceholderTop = lastTaskTop + lastTaskHeight;\t\r\n\t\t\t}\r\n\r\n\t\t\tvar maxHeight = item.row_height || view.$task_data.offsetHeight;\r\n\r\n\t\t\tvar placeholderHeight = maxHeight - placeholderTop;\r\n\t\t\t// So that it won't exceed the placeholder timeline height\r\n\t\t\tif (placeholderHeight < 0){\r\n\t\t\t\tplaceholderHeight = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (config.smart_rendering) {\r\n\t\t\t\trow.style.top = placeholderTop + \"px\";\t\r\n\t\t\t}\r\n\t\t\trow.style.height = placeholderHeight + \"px\";\r\n\t\t}\r\n\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\trow.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t\trow.setAttribute(view.$config.bind + \"_id\", item.id); // 'task_id'/'resource_id' for backward compatibility\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\treturn {\r\n\t\trender: _render_bg_line,\r\n\t\tupdate: renderCells,\r\n\t\tgetRectangle: getRowRectangle,\r\n\t\tgetVisibleRange: getVisibleRange,\r\n\t\tprepareData: bgPlaceholder\r\n\t};\r\n}\r\n\r\nexport default createTaskBgRender;\r\n","import createBaseBarRender from \"./task_bar_render\";\r\nimport isInViewPort from \"./viewport/is_bar_in_viewport\";\r\nimport getVisibleRange from \"./viewport/get_visible_bars_range\";\r\n\r\nfunction createTaskRenderer(gantt){\r\n\tconst defaultRender = createBaseBarRender(gantt);\r\n\r\n\tconst renderedNodes = {};\r\n\r\n\tfunction checkVisibility(child, viewPort, timeline, config, gantt){\r\n\t\tlet isVisible = true;\r\n\t\t// GS-2123. Don't render rollup tasks that are outside the viewport\r\n\t\tif (config.smart_rendering){\r\n\t\t\tisVisible = isInViewPort(child, viewPort, timeline, config, gantt);\r\n\t\t}\r\n\t\treturn isVisible;\r\n\t}\r\n\r\n\tfunction generateChildElement(task, child, timeline, sizes){\r\n\t\tconst childCopy = gantt.copy(gantt.getTask(child.id));\r\n\t\tchildCopy.$rendered_at = task.id;\r\n\t\t// a way to filter rollup tasks:\r\n\t\tconst displayRollup = gantt.callEvent(\"onBeforeRollupTaskDisplay\", [childCopy.id, childCopy, task.id]);\r\n\t\tif (displayRollup === false){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst element = defaultRender(childCopy, timeline);\r\n\t\tif(!element){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst height = timeline.getBarHeight(task.id, child.type == gantt.config.types.milestone);\r\n\t\tconst padding = Math.floor((timeline.getItemHeight(task.id) - height) / 2);\r\n\r\n\t\telement.style.top = (sizes.top + padding) + \"px\";\r\n\t\telement.classList.add(\"gantt_rollup_child\");\r\n\t\telement.setAttribute(\"data-rollup-parent-id\", task.id);\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\tfunction getKey(childId, renderParentId){\r\n\t\treturn childId + \"_\" + renderParentId;\r\n\t}\r\n\r\n\r\n\tfunction renderRollupTask(task, timeline, config, viewPort) {\r\n\t\tif (task.rollup !== false && task.$rollup && task.$rollup.length) {\r\n\t\t\tconst el = document.createElement('div'),\r\n\t\t\t\tsizes = gantt.getTaskPosition(task);\r\n\r\n\t\t\t// vertical position is not important for the rollup tasks as long as the parent is rendered\r\n\t\t\tif (viewPort){\r\n\t\t\t\tviewPort.y = 0;\r\n\t\t\t\tviewPort.y_end = gantt.$task_bg.scrollHeight;\r\n\t\t\t}\r\n\r\n\t\t\ttask.$rollup.forEach(function(itemId){\r\n\t\t\t\tif (!gantt.isTaskExists(itemId)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst child = gantt.getTask(itemId);\r\n\t\t\t\tlet isVisible = checkVisibility(child, viewPort, timeline, config, gantt);\r\n\t\t\t\tif (!isVisible){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst element = generateChildElement(task, child, timeline, sizes);\r\n\t\t\t\tif (element) {\r\n\t\t\t\t\trenderedNodes[getKey(child.id, task.id)] = element;\r\n\t\t\t\t\tel.appendChild(element);\r\n\t\t\t\t} else{\r\n\t\t\t\t\trenderedNodes[getKey(child.id, task.id)] = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\treturn el;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfunction repaintRollupTask(task, itemNode, timeline, config, viewPort) {\r\n\t\tconst el = document.createElement(\"div\"),\r\n\t\tsizes = gantt.getTaskPosition(task);\r\n\r\n\t\t// vertical position is not important for the rollup tasks as long as the parent is rendered\r\n\t\tviewPort.y = 0;\r\n\t\tviewPort.y_end = gantt.$task_bg.scrollHeight;\r\n\r\n\t\ttask.$rollup.forEach(function(itemId){\r\n\t\t\tconst child = gantt.getTask(itemId);\r\n\t\t\tconst rollupKey = getKey(child.id, task.id);\r\n\t\t\tlet isVisible = checkVisibility(child, viewPort, timeline, config, gantt);\r\n\t\t\tif (isVisible !== !!renderedNodes[rollupKey]) {\r\n\r\n\t\t\t\tif (isVisible) {\r\n\t\t\t\t\tconst element = generateChildElement(task, child, timeline, sizes);\r\n\t\t\t\t\trenderedNodes[rollupKey] = element || false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\trenderedNodes[rollupKey] = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!!renderedNodes[rollupKey]) {\r\n\t\t\t\tel.appendChild(renderedNodes[rollupKey]);\r\n\t\t\t}\r\n\t\t\titemNode.innerHTML = \"\";\r\n\t\t\titemNode.appendChild(el);\r\n\t\t});\r\n\t}\r\n\r\n\r\n\r\n\treturn {\r\n\t\trender: renderRollupTask,\r\n\t\tupdate: repaintRollupTask,\r\n\t\t//getRectangle: getBarRectangle\r\n\t\tisInViewPort: isInViewPort,\r\n\t\tgetVisibleRange: getVisibleRange\r\n\t};\r\n}\r\n\r\nexport default createTaskRenderer;","import getRectangle from \"./viewport/get_bg_row_rectangle\";\r\nimport getVisibleRange from \"./viewport/get_visible_bars_range\";\r\nimport getVisibleCellsRange from \"./viewport/get_visible_cells_range\";\r\nimport isColumnVisible from \"./viewport/is_column_visible\";\r\nimport resourceTimetable from \"../../resource_timetable_builder\";\r\n\r\nfunction generateRenderResourceLine(gantt){\r\n\tvar getResourceLoad = resourceTimetable(gantt);\r\n\tvar renderedResourceLines = {};\r\n\r\n\tfunction renderResourceLineCell(resource, day, templates, config, timeline){\r\n\t\tvar css = templates.resource_cell_class(day.start_date, day.end_date, resource, day.tasks, day.assignments);\r\n\t\tvar content = templates.resource_cell_value(day.start_date, day.end_date, resource, day.tasks, day.assignments);\r\n\t\tvar height = timeline.getItemHeight(resource.id) - 1;\r\n\r\n\t\tif (css || content){\r\n\t\t\tvar sizes = timeline.getItemPosition(resource, day.start_date, day.end_date);\r\n\t\t\tvar el = document.createElement('div');\r\n\t\t\tel.setAttribute(timeline.$config.item_attribute, resource.id);\r\n\t\t\tel.className = [\"gantt_resource_marker\", css].join(\" \");\r\n\r\n\t\t\tel.style.cssText = [\r\n\t\t\t\t'left:' + sizes.left + 'px',\r\n\t\t\t\t'width:' + sizes.width + 'px',\r\n\t\t\t\t'height:' + (height) + 'px',\r\n\t\t\t\t'line-height:' + (height) + 'px',\r\n\t\t\t\t'top:' + sizes.top + 'px'\r\n\t\t\t].join(\";\");\r\n\r\n\t\t\tif(content)\r\n\t\t\t\tel.innerHTML = content;\r\n\r\n\t\t\treturn el;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction detachRenderedResourceLine(id, index){\r\n\t\tif(renderedResourceLines[id] && renderedResourceLines[id][index] &&\r\n\t\t\trenderedResourceLines[id][index].parentNode\r\n\t\t\t){\r\n\t\t\t\trenderedResourceLines[id][index].parentNode.removeChild(renderedResourceLines[id][index]);\r\n\t\t\t}\r\n\t}\r\n\r\n\tfunction renderResourceLine(resource, timeline, config, viewport) {\r\n\t\tvar templates = timeline.$getTemplates();\r\n\t\tvar scale = timeline.getScale();\r\n\t\tvar timetable = getResourceLoad(resource, config.resource_property, timeline.getScale(), timeline);\r\n\t\tvar smartRendering = !!viewport;//no viewport means smart rendering is disabled\r\n\t\tvar cells = [];\r\n\t\trenderedResourceLines[resource.id] = {};\r\n\r\n\t\tvar range = getVisibleCellsRange(scale, viewport);\r\n\t\tfor (var columnIndex = range.start; columnIndex <= range.end; columnIndex++) {\r\n\r\n\t\t\tvar day = timetable[columnIndex];\r\n\t\t\tif(!day){\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif(smartRendering && !isColumnVisible(columnIndex, scale, viewport, gantt)){\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar cell = renderResourceLineCell(resource, day, templates, config, timeline);\r\n\t\t\tif(cell){\r\n\t\t\t\tcells.push(cell);\r\n\t\t\t\trenderedResourceLines[resource.id][columnIndex] = cell;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar row = null;\r\n\t\tif(cells.length){\r\n\t\t\trow = document.createElement(\"div\");\r\n\t\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\t\trow.appendChild(cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn row;\r\n\t}\r\n\r\n\tfunction updateResourceLine(resource, node, timeline, config, viewport) {\r\n\t\tvar templates = timeline.$getTemplates();\r\n\t\tvar scale = timeline.getScale();\r\n\t\tvar timetable = getResourceLoad(resource, config.resource_property, timeline.getScale(), timeline);\r\n\r\n\t\tvar range = getVisibleCellsRange(scale, viewport);\r\n\r\n\t\tvar checkedColumns = {};\r\n\t\tif(renderedResourceLines && renderedResourceLines[resource.id]){\r\n\t\t\tfor(var i in renderedResourceLines[resource.id]){\r\n\t\t\t\tcheckedColumns[i] = i;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var columnIndex = range.start; columnIndex <= range.end; columnIndex++) {\r\n\t\t\tvar day = timetable[columnIndex];\r\n\t\t\tcheckedColumns[columnIndex] = false;\r\n\t\t\tif(!day){\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif(!isColumnVisible(columnIndex, scale, viewport, gantt)){\r\n\t\t\t\tdetachRenderedResourceLine(resource.id, columnIndex);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif(!renderedResourceLines[resource.id] || !renderedResourceLines[resource.id][columnIndex]){\r\n\t\t\t\tvar cell = renderResourceLineCell(resource, day, templates, config, timeline);\r\n\t\t\t\tif(cell){\r\n\t\t\t\t\tnode.appendChild(cell);\r\n\t\t\t\t\trenderedResourceLines[resource.id][columnIndex] = cell;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if(renderedResourceLines[resource.id] && renderedResourceLines[resource.id][columnIndex] && !renderedResourceLines[resource.id][columnIndex].parentNode){\r\n\t\t\t\tnode.appendChild(renderedResourceLines[resource.id][columnIndex]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(var i in checkedColumns){\r\n\t\t\tif(checkedColumns[i] !== false){\r\n\t\t\t\tdetachRenderedResourceLine(resource.id, i);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\trender: renderResourceLine,\r\n\t\tupdate: updateResourceLine,\r\n\t\tgetRectangle: getRectangle,\r\n\t\tgetVisibleRange: getVisibleRange\r\n\t};\r\n}\r\n\r\nexport default generateRenderResourceLine;","import getRowRectangle from \"./viewport/get_grid_row_rectangle\";\r\nimport getVisibleRange from \"./viewport/get_visible_bars_range\";\r\n\r\nfunction createGridTaskRowResizerRender(gantt){\r\n\r\n\tfunction _render_grid_item(item, view, viewport) {\r\n\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar resize_el = document.createElement(\"div\");\r\n\t\tresize_el.className = \"gantt_task_grid_row_resize_wrap\";\r\n\r\n\t\tresize_el.style.top = (view.getItemTop(item.id) + view.getItemHeight(item.id)) + \"px\";\r\n\r\n\t\tresize_el.innerHTML = \"<div class='gantt_task_grid_row_resize' role='cell'></div>\";\r\n\t\tresize_el.setAttribute(config.task_grid_row_resizer_attribute, item.id);\r\n\r\n\t\tgantt._waiAria.rowResizerAttr(resize_el);\r\n\t\treturn resize_el;\r\n\t}\r\n\r\n\treturn {\r\n\t\trender: _render_grid_item,\r\n\t\tupdate: null,\r\n\t\tgetRectangle: getRowRectangle,\r\n\t\tgetVisibleRange: getVisibleRange\r\n\t};\r\n}\r\n\r\nexport default createGridTaskRowResizerRender;","function _configure(col, data, force) {\r\n\tfor (var key in data)\r\n\t\tif (typeof col[key] == \"undefined\" || force)\r\n\t\t\tcol[key] = data[key];\r\n}\r\n\r\nfunction _get_skin(force, gantt) {\r\n\r\n\tconst styles = getComputedStyle(gantt.$root);\r\n\tconst themeVar = styles.getPropertyValue(\"--dhx-gantt-theme\");\r\n\tlet isCssVarTheme = !!themeVar;\r\n\tlet themeName;\r\n\r\n\t\r\n\tif(isCssVarTheme){\r\n\t\tthemeName = themeVar;\r\n\t}else{\r\n\t\tvar skin = gantt.skin;\r\n\t\tthemeName = skin;\r\n\t\tif (!skin || force) {\r\n\t\t\tvar links = document.getElementsByTagName(\"link\");\r\n\t\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\t\tvar res = links[i].href.match(\"dhtmlxgantt_([a-z_]+).css\");\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tif (gantt.skins[res[1]] || !skin) {\r\n\t\t\t\t\t\tthemeName = res[1];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tgantt._theme_info = {\r\n\t\ttheme: themeName,\r\n\t\tcssVarTheme: isCssVarTheme\r\n\t};\r\n\r\n\r\n\r\n\tgantt.skin = themeName || \"terrace\";\r\n\tvar skinset = gantt.skins[gantt.skin] || gantt.skins[\"terrace\"];\r\n\r\n\t//apply skin related settings\r\n\t_configure(gantt.config, skinset.config, force);\r\n\r\n\tif(!isCssVarTheme){\r\n\t\tgantt.config.link_radius = 1;\r\n\t}\r\n\r\n\tvar config = gantt.getGridColumns();\r\n\tif (config[1] && !gantt.defined(config[1].width))\r\n\t\tconfig[1].width = skinset._second_column_width;\r\n\tif (config[2] && !gantt.defined(config[2].width))\r\n\t\tconfig[2].width = skinset._third_column_width;\r\n\t\r\n\tfor (var i=0; i<config.length; i++) {\r\n\t\tvar column = config[i];\r\n\t\tif (column.name == \"add\") {\r\n\t\t\tif(!column.width){\r\n\t\t\t\tcolumn.width = 44;\r\n\t\t\t}\r\n\t\t\tif (!(gantt.defined(column.min_width) && gantt.defined(column.max_width))) {\r\n\t\t\t\tcolumn.min_width = column.min_width || column.width;\r\n\t\t\t\tcolumn.max_width = column.max_width || column.width;\r\n\t\t\t}\r\n\t\t\tif (column.min_width)\r\n\t\t\t\tcolumn.min_width = +column.min_width;\r\n\t\t\tif (column.max_width)\r\n\t\t\t\tcolumn.max_width = +column.max_width;\r\n\t\t\tif (column.width) {\r\n\t\t\t\tcolumn.width = +column.width;\r\n\t\t\t\tcolumn.width = (column.min_width && column.min_width > column.width) ? column.min_width : column.width;\r\n\t\t\t\tcolumn.width = (column.max_width && column.max_width < column.width) ? column.max_width : column.width;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (skinset.config.task_height){\r\n\t\tgantt.config.task_height = skinset.config.task_height || \"full\";\r\n\t}\r\n\tif (skinset.config.bar_height){\r\n\t\tgantt.config.bar_height = skinset.config.bar_height || \"full\";\r\n\t}\r\n\r\n\tif (skinset._lightbox_template)\r\n\t\tgantt._lightbox_template = skinset._lightbox_template;\r\n\r\n\tif (skinset._redefine_lightbox_buttons) {\r\n\t\tgantt.config.buttons_right = skinset._redefine_lightbox_buttons[\"buttons_right\"];\r\n\t\tgantt.config.buttons_left = skinset._redefine_lightbox_buttons[\"buttons_left\"];\r\n\t}\r\n\r\n\r\n\tgantt.resetLightbox();\r\n}\r\n\r\n\r\n\r\nexport default function(gantt) {\r\n\t\r\n\tif(!gantt.resetSkin){\r\n\t\tgantt.resetSkin = function () {\r\n\t\t\tthis.skin = \"\";\r\n\t\t\t_get_skin(true, this);\r\n\t\t};\r\n\t\tgantt.skins = {};\r\n\r\n\t\tgantt.attachEvent(\"onGanttLayoutReady\", function(){\r\n\t\t\t_get_skin(false, this);\r\n\t\t\tmonitorThemeChange();\r\n\t\t});\r\n\t}\r\n\r\n\tgantt._addThemeClass = function(){\r\n\t\tdocument.documentElement.setAttribute(\"data-gantt-theme\", gantt.skin);\r\n\t};\r\n\r\n\tgantt.setSkin = function(value){\r\n\t\tconst skinChanged = this.skin !== value;\r\n\t\tthis.skin = value;\r\n\t\tgantt._addThemeClass();\r\n\t\tmonitorThemeChange();\r\n\t\tif(gantt.$root){\r\n\t\t\t_get_skin(skinChanged ? false : true, gantt);\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t};\r\n\r\n\r\n\tlet monitorIntervalId = null;\r\n\tfunction monitorThemeChange(){\r\n\t\tconst container = gantt.$root;\r\n\t\t\r\n\t\tif(monitorIntervalId){\r\n\t\t\tclearInterval(monitorIntervalId);\r\n\t\t}\r\n\t\t\r\n\t\tif(container){\r\n\t\t\tmonitorIntervalId = setInterval(() => {\r\n\t\t\t\tconst csstheme = getComputedStyle(container).getPropertyValue('--dhx-gantt-theme');\r\n\t\t\t\tif(csstheme && csstheme !== gantt.skin){\r\n\t\t\t\t\tgantt.setSkin(csstheme);\r\n\t\t\t\t}\r\n\r\n\t\t\t}, 100);\r\n\t\t}\r\n\t}\r\n\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\tclearInterval(monitorIntervalId);\r\n\t});\r\n};","import * as domHelpers from \"../utils/dom_helpers\";\r\nimport isHeadless from \"../../../utils/is_headless\";\r\n\r\nexport default function(gantt){\r\n\r\n\tvar scrollRange = 50,\r\n\t\tscrollStep = 30,\r\n\t\tscrollDelay = 10,\r\n\t\tscrollSpeed = 50;\r\n\r\n\tvar interval = null,\r\n\t\tisMove = false,\r\n\t\tdelayTimeout = null,\r\n\t\tstartPos = {\r\n\t\t\tstarted: false\r\n\t\t},\r\n\t\teventPos = {};\r\n\r\n\r\n\tfunction isDisplayed(element){\r\n\t\treturn element &&\r\n\t\t\tdomHelpers.isChildOf(element, gantt.$root) &&\r\n\t\t\telement.offsetHeight;\r\n\t}\r\n\r\n\tfunction getAutoscrollContainer(){\r\n\t\tvar element;\r\n\t\tif(isDisplayed(gantt.$task)){\r\n\t\t\telement = gantt.$task;\r\n\t\t}else if(isDisplayed(gantt.$grid)){\r\n\t\t\telement = gantt.$grid;\r\n\t\t}else{\r\n\t\t\telement = gantt.$root;\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\tfunction isScrollState() {\r\n\t\tvar dragMarker = !!document.querySelector(\".gantt_drag_marker\");\r\n\t\tvar isResize = !!document.querySelector(\".gantt_drag_marker.gantt_grid_resize_area\")\r\n\t\t\t|| !!document.querySelector(\".gantt_drag_marker.gantt_row_grid_resize_area\") ;\r\n\t\tvar isLink = !!document.querySelector(\".gantt_link_direction\");\r\n\t\tvar state = gantt.getState();\r\n\t\tvar isClickDrag = state.autoscroll;\r\n\t\tisMove = dragMarker && !isResize && !isLink;\r\n\r\n\t\treturn !((!state.drag_mode && !dragMarker) || isResize) || isClickDrag;\r\n\t}\r\n\r\n\tfunction defineDelayTimeout(state) {\r\n\t\tif (delayTimeout) {\r\n\t\t\tclearTimeout(delayTimeout);\r\n\t\t\tdelayTimeout = null;\r\n\t\t}\r\n\t\tif (state) {\r\n\t\t\tvar speed = gantt.config.autoscroll_speed;\r\n\t\t\tif (speed && speed < 10) // limit speed value to 10\r\n\t\t\t\tspeed = 10;\r\n\r\n\t\t\tdelayTimeout = setTimeout(function() {\r\n\t\t\t\tinterval = setInterval(tick, speed || scrollSpeed);\r\n\t\t\t}, gantt.config.autoscroll_delay || scrollDelay);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction defineScrollInterval(state) {\r\n\t\tif (state) {\r\n\t\t\tdefineDelayTimeout(true);\r\n\t\t\tif (!startPos.started) {\r\n\t\t\t\tstartPos.x = eventPos.x;\r\n\t\t\t\tstartPos.y = eventPos.y;\r\n\t\t\t\tstartPos.started = true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (interval) {\r\n\t\t\t\tclearInterval(interval);\r\n\t\t\t\tinterval = null;\r\n\t\t\t}\r\n\t\t\tdefineDelayTimeout(false);\r\n\t\t\tstartPos.started = false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction autoscrollInterval(event) {\r\n\t\tvar isScroll = isScrollState();\r\n\r\n\t\tif ((interval || delayTimeout) && !isScroll) {\r\n\t\t\tdefineScrollInterval(false);\r\n\t\t}\r\n\r\n\t\tif (!gantt.config.autoscroll || !isScroll) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\teventPos = {\r\n\t\t\tx: event.clientX,\r\n\t\t\ty: event.clientY\r\n\t\t};\r\n\r\n\t\t// if it is a mobile device, we need to detect the touch event coords\r\n\t\tif (event.type == \"touchmove\"){\r\n\t\t\teventPos.x = event.targetTouches[0].clientX;\r\n\t\t\teventPos.y = event.targetTouches[0].clientY;\r\n\t\t}\r\n\r\n\t\tif (!interval && isScroll) {\r\n\t\t\tdefineScrollInterval(true);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction tick() {\r\n\r\n\t\tif (!isScrollState()) {\r\n\t\t\tdefineScrollInterval(false);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar container = getAutoscrollContainer();\r\n\t\tif(!container){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// GS-1150: if we reorder or resize something in the grid, we should obtain the grid container\r\n\t\tvar gridDrag = false;\r\n\t\tvar gridMarkers = [\r\n\t\t\t\".gantt_drag_marker.gantt_grid_resize_area\",\r\n\t\t\t\".gantt_drag_marker .gantt_row.gantt_row_task\",\r\n\t\t\t\".gantt_drag_marker.gantt_grid_dnd_marker\"\r\n\t\t];\r\n\t\tgridMarkers.forEach(function (selector) {\r\n\t\t\tgridDrag = gridDrag || !!document.querySelector(selector);\r\n\t\t});\r\n\t\tif (gridDrag){\r\n\t\t\tcontainer = gantt.$grid;\r\n\t\t}\r\n\r\n\t\tvar box = domHelpers.getNodePosition(container);\r\n\r\n\t\tvar posX = eventPos.x - box.x;\r\n\t\tvar posY = eventPos.y - box.y + window.scrollY; // GS-1315: window.scrollY here and below for the elements above Gantt\r\n\r\n\t\tvar scrollLeft = isMove ? 0 : need_scroll(posX, box.width, startPos.x - box.x);\r\n\t\tvar scrollTop = need_scroll(posY, box.height, startPos.y - box.y + window.scrollY);\r\n\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar currentScrollTop = scrollState.y,\r\n\t\t\tscrollOuterHeight = scrollState.inner_height,\r\n\t\t\tscrollInnerHeight = scrollState.height,\r\n\t\t\tcurrentScrollLeft = scrollState.x,\r\n\t\t\tscrollOuterWidth = scrollState.inner_width,\r\n\t\t\tscrollInnerWidth = scrollState.width;\r\n\r\n\t\t// do scrolling only if we have scrollable area to do so\r\n\t\tif (scrollTop && !scrollOuterHeight) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop < 0 && !currentScrollTop) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop > 0 && currentScrollTop + scrollOuterHeight >= scrollInnerHeight + 2) {\r\n\t\t\tscrollTop = 0;\r\n\t\t}\r\n\r\n\t\tif (scrollLeft && !scrollOuterWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft < 0 && !currentScrollLeft) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft > 0 && currentScrollLeft + scrollOuterWidth >= scrollInnerWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t}\r\n\r\n\t\tvar step = gantt.config.autoscroll_step;\r\n\r\n\t\tif (step && step < 2) // limit step value to 2\r\n\t\t\tstep = 2;\r\n\r\n\t\tscrollLeft = scrollLeft * (step || scrollStep);\r\n\t\tscrollTop = scrollTop * (step || scrollStep);\r\n\r\n\t\tif (scrollLeft || scrollTop) {\r\n\t\t\tscroll(scrollLeft, scrollTop);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction need_scroll(pos, boxSize, startCoord) {\r\n\t\tif ((pos - scrollRange < 0) && (pos < startCoord))\r\n\t\t\treturn -1;\r\n\t\telse if ((pos > boxSize - scrollRange) && (pos > startCoord))\r\n\t\t\treturn 1;\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tfunction scroll(left, top) {\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar scrollLeft = null,\r\n\t\t\tscrollTop = null;\r\n\r\n\t\tif (left) {\r\n\t\t\tscrollLeft = scrollState.x + left;\r\n\t\t\tscrollLeft = Math.min(scrollState.width, scrollLeft);\r\n\t\t\tscrollLeft = Math.max(0, scrollLeft);\r\n\t\t}\r\n\r\n\t\tif (top) {\r\n\t\t\tscrollTop = scrollState.y + top;\r\n\t\t\tscrollTop = Math.min(scrollState.height, scrollTop);\r\n\t\t\tscrollTop = Math.max(0, scrollTop);\r\n\t\t}\r\n\r\n\t\tgantt.scrollTo(scrollLeft, scrollTop);\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", function() {\r\n\t\tif(!isHeadless(gantt)){\r\n\t\t\tvar eventElement = domHelpers.getRootNode(gantt.$root) || document.body;\r\n\t\t\tgantt.eventRemove(eventElement, \"mousemove\", autoscrollInterval);\r\n\t\t\tgantt.event(eventElement, \"mousemove\", autoscrollInterval);\r\n\r\n\t\t\tgantt.eventRemove(eventElement, \"touchmove\", autoscrollInterval);\r\n\t\t\tgantt.event(eventElement, \"touchmove\", autoscrollInterval);\r\n\r\n\t\t\tgantt.eventRemove(eventElement, \"pointermove\", autoscrollInterval);\r\n\t\t\tgantt.event(eventElement, \"pointermove\", autoscrollInterval);\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\tdefineScrollInterval(false);\r\n\t});\r\n\r\n};","if (typeof window !== \"undefined\" && window.jQuery){\r\n\r\n\t(function( $ ){\r\n\r\n\t\tvar methods = [];\r\n\t\t$.fn.dhx_gantt = function(config){\r\n\t\t\tconfig = config || {};\r\n\t\t\tif (typeof(config) === 'string') {\r\n\t\t\t\tif (methods[config] ) {\r\n\t\t\t\t\treturn methods[config].apply(this, []);\r\n\t\t\t\t}else {\r\n\t\t\t\t\t$.error('Method ' +  config + ' does not exist on jQuery.dhx_gantt');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar views = [];\r\n\t\t\t\tthis.each(function() {\r\n\t\t\t\t\tif (this && this.getAttribute){\r\n\t\t\t\t\t\tif (!this.gantt && !(window.gantt.$root == this)){\r\n\r\n\t\t\t\t\t\t\tvar newgantt = (window.gantt.$container && window.Gantt) ? window.Gantt.getGanttInstance():window.gantt;\r\n\t\t\t\t\t\t\tfor (var key in config)\r\n\t\t\t\t\t\t\t\tif (key!=\"data\")\r\n\t\t\t\t\t\t\t\t\tnewgantt.config[key] = config[key];\r\n\r\n\t\t\t\t\t\t\tnewgantt.init(this);\r\n\t\t\t\t\t\t\tif (config.data)\r\n\t\t\t\t\t\t\t\tnewgantt.parse(config.data);\r\n\r\n\t\t\t\t\t\t\tviews.push(newgantt);\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\tviews.push(typeof this.gantt == \"object\" ? this.gantt : window.gantt);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\tif (views.length === 1) return views[0];\r\n\t\t\t\treturn views;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t})(window.jQuery);\r\n\r\n}\r\n\r\n\r\nexport default null;","if (typeof window !== \"undefined\" && window.dhtmlx){\r\n\r\n\tif (!window.dhtmlx.attaches)\r\n\twindow.dhtmlx.attaches = {};\r\n\r\n\twindow.dhtmlx.attaches.attachGantt=function(start, end, gantt){\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tobj.id = \"gantt_\"+ gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tvar that = this.vs[this.av];\r\n\t\tthat.grid = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\r\n\t\tthat.gridId = obj.id;\r\n\t\tthat.gridObj = obj;\r\n\r\n\t\tvar method_name=\"_viewRestore\";\r\n\t\treturn this.vs[this[method_name]()].grid;\r\n\t};\r\n\r\n}\r\nif (typeof window !== \"undefined\" && typeof(window.dhtmlXCellObject) != \"undefined\") {\r\n\r\n\twindow.dhtmlXCellObject.prototype.attachGantt=function(start, end, gantt){\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\t\tobj.id = \"gantt_\"+gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\r\n\t\tobj = null;\r\n\t\tthis.callEvent(\"_onContentAttach\",[]);\r\n\r\n\t\treturn this.dataObj;\r\n\t};\r\n}\r\n\r\nexport default null;","import env from \"../../../utils/env\";\r\nimport eventable from \"../../../utils/eventable\";\r\nimport { IScale, TModifierKeys } from \"../../common/config\";\r\n\r\ninterface ITimelineZoomConfig {\r\n\thandler?: (e: Event) => {};\r\n\tstartDate?: Date;\r\n\tendDate?: Date;\r\n\tlevels: IZoomLevel[];\r\n\tactiveLevelIndex?: number;\r\n\twidthStep?: number;\r\n\tminColumnWidth?: number;\r\n\tmaxColumnWidth?: number;\r\n\tuseKey?: \"ctrlKey\" | \"altKey\" | \"shiftKey\";\r\n\ttrigger?: \"wheel\" | null | undefined;\r\n\telement?: Element | (() => Element);\r\n}\r\n\r\nconst USE_KEY = [\"ctrlKey\", \"altKey\", \"shiftKey\", \"metaKey\"];\r\n\r\ninterface IZoomLevel {\r\n\tname?: string;\r\n\tscale_height?: number;\r\n\tmin_column_width: number;\r\n\tscales: IScale[];\r\n}\r\n\r\nconst _defaultScales = [\r\n\t[\r\n\t\t{\r\n\t\t\tunit: \"month\",\r\n\t\t\tdate: \"%M\",\r\n\t\t\tstep: 1\r\n\t\t},\r\n\t\t{\r\n\t\t\tunit: \"day\",\r\n\t\t\tdate: \"%d\",\r\n\t\t\tstep: 1\r\n\t\t}\r\n\t],\r\n\t[\r\n\t\t{\r\n\t\t\tunit: \"day\",\r\n\t\t\tdate: \"%d %M\",\r\n\t\t\tstep: 1\r\n\t\t}\r\n\t],\r\n\t[\r\n\t\t{\r\n\t\t\tunit: \"day\",\r\n\t\t\tdate: \"%d %M\",\r\n\t\t\tstep: 1\r\n\t\t},\r\n\t\t{\r\n\t\t\tunit: \"hour\",\r\n\t\t\tdate: \"%H:00\",\r\n\t\t\tstep: 8\r\n\t\t}\r\n\t],\r\n\t[\r\n\t\t{\r\n\t\t\tunit: \"day\",\r\n\t\t\tdate: \"%d %M\",\r\n\t\t\tstep: 1\r\n\t\t},\r\n\t\t{\r\n\t\t\tunit: \"hour\",\r\n\t\t\tdate: \"%H:00\",\r\n\t\t\tstep: 1\r\n\t\t}\r\n\t]\r\n];\r\n\r\nexport default class TimelineZoom {\r\n\tpublic attachEvent: (eventName: string, handler: () => void) => string;\r\n\tpublic callEvent: (eventName: string, args: any[]) => any;\r\n\tpublic detachEvent: (eventName: string) => any;\r\n\tprotected _initialStartDate: Date;\r\n\tprotected _initialEndDate: Date;\r\n\tprotected _activeLevelIndex: number;\r\n\tprotected _levels: IZoomLevel[];\r\n\tprotected _handler: (e: any) => void;\r\n\tprotected $gantt;\r\n\tprotected _widthStep: number;\r\n\tprotected _minColumnWidth: number;\r\n\tprotected _maxColumnWidth: number;\r\n\tprotected _useKey: TModifierKeys;\r\n\tprotected _visibleDate: Date;\r\n\tprotected _initialized: boolean;\r\n\tprotected _domEvents: any;\r\n\r\n\tconstructor(gantt) {\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis._domEvents = this.$gantt._createDomEventScope();\r\n\t}\r\n\r\n\tpublic init(config: ITimelineZoomConfig) {\r\n\t\t// GS-1354 and GS-1318. If we check the headless mode using the function,\r\n\t\t// it will return false when Gantt is not initialized, but we may want to do it later\r\n\t\tif(this.$gantt.env.isNode){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._initialStartDate = config.startDate;\r\n\t\tthis._initialEndDate = config.endDate;\r\n\t\tthis._activeLevelIndex = config.activeLevelIndex ? config.activeLevelIndex : 0;\r\n\t\tthis._levels = this._mapScales(config.levels || _defaultScales);\r\n\t\tthis._handler = config.handler || this._defaultHandler;\r\n\t\tthis._minColumnWidth = config.minColumnWidth || 60;\r\n\t\tthis._maxColumnWidth = config.maxColumnWidth || 240;\r\n\t\tthis._widthStep = config.widthStep || 3/8 * config.minColumnWidth;\r\n\t\tthis._useKey = config.useKey;\r\n\r\n\t\tif(!this._initialized){\r\n\t\t\teventable(this);\r\n\t\t\tthis.$gantt.attachEvent(\"onGanttScroll\", () => {\r\n\t\t\t\tthis._getVisibleDate();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis._domEvents.detachAll();\r\n\r\n\t\tif(config.trigger === \"wheel\"){\r\n\t\t\tif(this.$gantt.$root){\r\n\t\t\t\tthis._attachWheelEvent(config);\r\n\t\t\t}else{\r\n\t\t\t\t// GS-1322. This way the handler works for the init and resetLayout methods\r\n\t\t\t\tthis.$gantt.attachEvent(\"onGanttLayoutReady\", () => {\r\n\t\t\t\t\tthis.$gantt.attachEvent(\"onGanttRender\", () => {\r\n\t\t\t\t\t\tthis._attachWheelEvent(config);\r\n\t\t\t\t\t}, {once: true});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._initialized = true;\r\n\t\tthis.setLevel(this._activeLevelIndex);\r\n\t}\r\n\r\n\tpublic zoomIn = () => {\r\n\t\tconst index = this.getCurrentLevel() - 1;\r\n\t\tif(index < 0){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.setLevel(index);\r\n\t};\r\n\r\n\tpublic zoomOut = () => {\r\n\t\tconst index = this.getCurrentLevel() + 1;\r\n\t\tif(index > this._levels.length - 1){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.setLevel(index);\r\n\t};\r\n\r\n\tpublic getCurrentLevel = () => {\r\n\t\treturn this._activeLevelIndex;\r\n\t};\r\n\r\n\tpublic getLevels = () => {\r\n\t\treturn this._levels;\r\n\t};\r\n\r\n\tpublic setLevel = (level: number|string) => {\r\n\t\tconst zoomLevel = this._getZoomIndexByName(level);\r\n\r\n\t\tif(zoomLevel === -1){\r\n\t\t\tthis.$gantt.assert(zoomLevel !== -1, \"Invalid zoom level for gantt.ext.zoom.setLevel. \" + level + \" is not an expected value.\");\r\n\t\t}\r\n\t\tthis._setLevel(zoomLevel, 0);\r\n\t};\r\n\r\n\tprotected _getZoomIndexByName = (levelName: number|string) => {\r\n\t\tlet zoomLevel:number = -1;\r\n\t\tif(typeof levelName === \"string\"){\r\n\t\t\tif(!isNaN(Number(levelName)) &&  this._levels[Number(levelName)]){\r\n\t\t\t\tzoomLevel = Number(levelName);\r\n\t\t\t}else{\r\n\t\t\t\tfor(let i = 0; i < this._levels.length; i++){\r\n\t\t\t\t\tif(this._levels[i].name === levelName){\r\n\t\t\t\t\t\tzoomLevel = i;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tzoomLevel = levelName;\r\n\t\t}\r\n\t\treturn zoomLevel;\r\n\t};\r\n\r\n\tprotected _mapScales(levels: IScale[][] | any): IZoomLevel[]{\r\n\t\treturn levels.map((l) => {\r\n\t\t\tif(Array.isArray(l)){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tscales: l\r\n\t\t\t\t};\r\n\t\t\t}else{\r\n\t\t\t\treturn l;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprotected _getVisibleDate = () => {\r\n\t\t// GS-1450. Don't try to get the visible date if there is no timeline\r\n\t\tif (!this.$gantt.$task){\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst scrollPos = this.$gantt.getScrollState().x;\r\n\t\tconst viewPort = this.$gantt.$task.offsetWidth;\r\n\t\tthis._visibleDate = this.$gantt.dateFromPos(scrollPos + viewPort/2);\r\n\t};\r\n\r\n\tprotected _setLevel = (level: number, cursorOffset: number) => {\r\n\t\tthis._activeLevelIndex = level;\r\n\r\n\t\tconst gantt = this.$gantt;\r\n\t\tconst nextConfig = gantt.copy(this._levels[this._activeLevelIndex]);\r\n\t\tconst chartConfig = gantt.copy(nextConfig);\r\n\t\tdelete chartConfig.name;\r\n\r\n\t\tgantt.mixin(gantt.config, chartConfig, true);\r\n\r\n\t\t// GS-1148: Change scales for the resource views\r\n\t\tconst resourceViews = [\r\n\t\t\t\"resourceTimeline\",\r\n\t\t\t\"resourceHistogram\"\r\n\t\t];\r\n\r\n\t\tresourceViews.forEach(function(name){\r\n\t\t\tconst resourceView = gantt.$ui.getView(name);\r\n\t\t\tif (resourceView){\r\n\t\t\t\tconst resourceConfig = resourceView.$getConfig();\r\n\t\t\t\tif (!resourceConfig.fixed_scales){\r\n\t\t\t\t\tgantt.mixin(resourceConfig, chartConfig, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst isRendered = !!gantt.$root && !!gantt.$task;\r\n\r\n\t\tif(isRendered){\r\n\t\t\tif(cursorOffset){\r\n\t\t\t\tconst cursorDate = this.$gantt.dateFromPos(cursorOffset + this.$gantt.getScrollState().x);\r\n\t\t\t\tthis.$gantt.render();\r\n\t\t\t\tconst newPosition = this.$gantt.posFromDate(cursorDate);\r\n\t\t\t\tthis.$gantt.scrollTo(newPosition - cursorOffset);\r\n\t\t\t}else{\r\n\t\t\t\tconst viewPort = this.$gantt.$task.offsetWidth;\r\n\t\t\t\tif(!this._visibleDate){\r\n\t\t\t\t\tthis._getVisibleDate();\r\n\t\t\t\t}\r\n\t\t\t\tconst middleDate = this._visibleDate;\r\n\t\t\t\tthis.$gantt.render();\r\n\t\t\t\tconst newPosition = this.$gantt.posFromDate(middleDate);\r\n\t\t\t\tthis.$gantt.scrollTo(newPosition - viewPort/2);\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onAfterZoom\", [this._activeLevelIndex, nextConfig]);\r\n\t\t}\r\n\t};\r\n\r\n\tprivate _attachWheelEvent = (config) => {\r\n\t\tconst event = env.isFF ? \"wheel\" : \"mousewheel\";\r\n\t\tlet el: Element;\r\n\t\tif(typeof config.element === \"function\"){\r\n\t\t\tel = config.element();\r\n\t\t}else{\r\n\t\t\tel = config.element as Element;\r\n\t\t}\r\n\t\tif (!el){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._domEvents.attach(el, event, this.$gantt.bind(function(e) {\r\n\t\t\tif (this._useKey) {\r\n\t\t\t\tif (USE_KEY.indexOf(this._useKey) < 0) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!e[this._useKey]) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (typeof this._handler === \"function\") {\r\n\t\t\t\tthis._handler.apply(this, [e]);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}, this), {passive: false});\r\n\t};\r\n\r\n\tprivate _defaultHandler = (e: any):void => {\r\n\t\tconst timelineOffset = this.$gantt.$task.getBoundingClientRect().x;\r\n\t\tconst cursorOffset = e.clientX - timelineOffset;\r\n\t\tconst wheelY = this.$gantt.env.isFF ? (e.deltaY*-40) : e.wheelDelta;\r\n\t\tlet wheelUp = false;\r\n\t\tif (wheelY > 0) {\r\n\t\t\twheelUp = true;\r\n\t\t}\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tthis._setScaleSettings(wheelUp, cursorOffset);\r\n\t};\r\n\r\n\tprivate _setScaleSettings(wheelUp: boolean, cursorOffset: number) {\r\n\t\tif (wheelUp) {\r\n\t\t\tthis._stepUp(cursorOffset);\r\n\t\t} else {\r\n\t\t\tthis._stepDown(cursorOffset);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _setScaleDates = () => {\r\n\t\tif(this._initialStartDate && this._initialEndDate){\r\n\t\t\tthis.$gantt.config.start_date = this._initialStartDate;\r\n\t\t\tthis.$gantt.config.end_date = this._initialEndDate;\r\n\t\t}\r\n\t};\r\n\r\n\tprivate _stepUp(cursorOffset) {\r\n\t\tif (this._activeLevelIndex >= this._levels.length - 1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet nextLevel = this._activeLevelIndex;\r\n\t\tthis._setScaleDates();\r\n\r\n\t\tif(this._widthStep){\r\n\t\t\tlet newColumnWidth = this.$gantt.config.min_column_width + this._widthStep;\r\n\t\t\tif (newColumnWidth > this._maxColumnWidth) {\r\n\t\t\t\tnewColumnWidth = this._minColumnWidth;\r\n\t\t\t\tnextLevel++;\r\n\t\t\t}\r\n\r\n\t\t\tthis.$gantt.config.min_column_width = newColumnWidth;\r\n\t\t}else{\r\n\t\t\tnextLevel++;\r\n\t\t}\r\n\t\tthis._setLevel(nextLevel, cursorOffset);\r\n\t}\r\n\tprivate _stepDown(cursorOffset) {\r\n\t\tif (this._activeLevelIndex < 1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet nextLevel = this._activeLevelIndex;\r\n\t\tthis._setScaleDates();\r\n\r\n\t\tif(this._widthStep){\r\n\t\t\tlet newColumnWidth = this.$gantt.config.min_column_width - this._widthStep;\r\n\t\t\tif (newColumnWidth < this._minColumnWidth) {\r\n\t\t\t\tnewColumnWidth = this._maxColumnWidth;\r\n\t\t\t\tnextLevel--;\r\n\t\t\t}\r\n\t\t\tthis.$gantt.config.min_column_width = newColumnWidth;\r\n\t\t}else{\r\n\t\t\tnextLevel--;\r\n\t\t}\r\n\t\tthis._setLevel(nextLevel, cursorOffset);\r\n\t}\r\n}","export default function(gantt) {\r\n\r\n\tgantt.config.touch_drag = 75; //nearly immediate dnd\r\n\tgantt.config.touch = true;\r\n\tgantt.config.touch_feedback = true;\r\n\tgantt.config.touch_feedback_duration = 1;\r\n\tgantt._prevent_touch_scroll = false;\r\n\r\n\r\n\tgantt._touch_feedback = function () {\r\n\t\tif (gantt.config.touch_feedback) {\r\n\t\t\tif (navigator.vibrate)\r\n\t\t\t\tnavigator.vibrate(gantt.config.touch_feedback_duration);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\t\tif (gantt.$container)\t{\r\n\t\t\taddTouchEvents();\r\n\t\t}\r\n\t});\r\n\tgantt.attachEvent(\"onGanttLayoutReady\", function(){\r\n\t\tif (gantt.$container)\t{\r\n\t\t\t\tgantt.attachEvent(\"onGanttRender\", addTouchEvents, {once: true});\r\n\t\t}\r\n\t});\r\n\r\n\tfunction addTouchEvents(){\r\n\t\tif (gantt.config.touch != \"force\")\r\n\t\t\tgantt.config.touch = gantt.config.touch &&\r\n\t\t\t\t((navigator.userAgent.indexOf(\"Mobile\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"iPad\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Android\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Touch\") != -1)) ||\r\n\t\t\t\t\t((navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1));\r\n\r\n\t\tif (gantt.config.touch) {\r\n\r\n\t\t\tvar touchEventsSupported = true;\r\n\t\t\ttry {\r\n\t\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t\t} catch (e) {\r\n\t\t\t\ttouchEventsSupported = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (touchEventsSupported) {\r\n\t\t\t\tgantt._touch_events([\"touchmove\", \"touchstart\", \"touchend\"], function (ev) {\r\n\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttarget: ev.target,\r\n\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn ev.defaultPrevented;\r\n\t\t\t\t});\r\n\t\t\t} else if (window.navigator.pointerEnabled) {\r\n\t\t\t\tgantt._touch_events([\"pointermove\", \"pointerdown\", \"pointerup\"], function (ev) {\r\n\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn (!ev || (ev.pointerType == \"mouse\" ));\r\n\t\t\t\t});\r\n\t\t\t} else if (window.navigator.msPointerEnabled) {\r\n\t\t\t\tgantt._touch_events([\"MSPointerMove\", \"MSPointerDown\", \"MSPointerUp\"], function (ev) {\r\n\t\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn (!ev || ev.pointerType == ev.MSPOINTER_TYPE_MOUSE);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction findTargetView(event){\r\n\t\tvar allViews = gantt.$layout.getCellsByType(\"viewCell\");\r\n\r\n\t\tfor(var i = 0; i < allViews.length; i++){\r\n\t\t\tvar box = allViews[i].$view.getBoundingClientRect();\r\n\t\t\tif(event.clientX >= box.left && event.clientX <= box.right &&\r\n\t\t\t\tevent.clientY <= box.bottom && event.clientY >= box.top){\r\n\t\t\t\t\treturn allViews[i];\r\n\t\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getScrollState(view){\r\n\t\tvar scrollX = view.$config.scrollX ? gantt.$ui.getView(view.$config.scrollX) : null;\r\n\t\tvar scrollY = view.$config.scrollY ? gantt.$ui.getView(view.$config.scrollY) : null;\r\n\r\n\t\tvar scrollState = {x: null, y: null};\r\n\t\tif(scrollX){\r\n\t\t\tvar state = scrollX.getScrollState();\r\n\t\t\tif(state.visible){\r\n\t\t\t\tscrollState.x = scrollX.$view.scrollLeft;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(scrollY){\r\n\t\t\tvar state = scrollY.getScrollState();\r\n\t\t\tif(state.visible){\r\n\t\t\t\tscrollState.y = scrollY.$view.scrollTop;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn scrollState;\r\n\t}\r\n\r\n\tfunction scrollView(view, left, top){\r\n\t\tvar scrollX = view.$config.scrollX ? gantt.$ui.getView(view.$config.scrollX) : null;\r\n\t\tvar scrollY = view.$config.scrollY ? gantt.$ui.getView(view.$config.scrollY) : null;\r\n\r\n\t\tif(scrollX){\r\n\t\t\tscrollX.scrollTo(left, null);\r\n\t\t}\r\n\t\tif(scrollY){\r\n\t\t\tscrollY.scrollTo(null, top);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getTaskDND(){\r\n\t\tvar tasksDnD;\r\n\t\tif(gantt.$ui.getView(\"timeline\")){\r\n\t\t\ttasksDnD = gantt.$ui.getView(\"timeline\")._tasks_dnd;\r\n\t\t}\r\n\t\treturn tasksDnD;\r\n\t}\r\n\r\n\tvar touchHandlers = [];\r\n\r\n//we can't use native scrolling, as we need to sync momentum between different parts\r\n//so we will block native scroll and use the custom one\r\n//in future we can add custom momentum\r\n\tgantt._touch_events = function (names, accessor, ignore) {\r\n\t\t//webkit on android need to be handled separately\r\n\t\tvar dblclicktime = 0;\r\n\t\tvar actionMode = false;\r\n\t\tvar scrollMode = false;\r\n\t\tvar actionStart = null;\r\n\t\tvar scrollState;\r\n\t\tvar longTapTimer = null;\r\n\t\tvar currentDndId = null;\r\n\t\tvar dndNodes = [];\r\n\t\tvar targetView = null;\r\n\t\tlet multiTouchEvents = {};\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.eventRemove(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\t\ttouchHandlers = [];\r\n\r\n\t\t//touch move\r\n\t\ttouchHandlers.push([gantt.$container, names[0], function (e) {\r\n\t\t\tvar tasksDnD = getTaskDND();\r\n\r\n\t\t\t\tif (ignore(e)) return;\r\n\r\n\t\t\t\t//ignore common and scrolling moves\r\n\t\t\t\tif (!actionMode) return;\r\n\r\n\t\t\t\tif (longTapTimer) clearTimeout(longTapTimer);\r\n\r\n\t\t\t\tvar source = accessor(e);\r\n\t\t\t\tif (tasksDnD && (tasksDnD.drag.id || tasksDnD.drag.start_drag)) {\r\n\t\t\t\t\ttasksDnD.on_mouse_move(source);\r\n\t\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.cancelBubble = true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!gantt._prevent_touch_scroll) {\r\n\t\t\t\t\tif (source && actionStart) {\r\n\t\t\t\t\t\tvar dx = actionStart.pageX - source.pageX;\r\n\t\t\t\t\t\tvar dy = actionStart.pageY - source.pageY;\r\n\t\t\t\t\t\tif (!scrollMode && (Math.abs(dx) > 5 || Math.abs(dy) > 5)) {\r\n\t\t\t\t\t\t\tscrollMode = true;\r\n\t\t\t\t\t\t\t//gantt._touch_scroll_active = scroll_mode = true;\r\n\t\t\t\t\t\t\tdblclicktime = 0;\r\n\r\n\t\t\t\t\t\t\tif(targetView){\r\n\t\t\t\t\t\t\t\tscrollState = getScrollState(targetView);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tscrollState = gantt.getScrollState();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (scrollMode) {\r\n\r\n\t\t\t\t\t\t\tvar newScrollState;\r\n\t\t\t\t\t\t\tvar scrollX = scrollState.x + dx;\r\n\t\t\t\t\t\t\tvar scrollY = scrollState.y + dy;\r\n\t\t\t\t\t\t\tif(targetView){\r\n\t\t\t\t\t\t\t\tscrollView(targetView, scrollX, scrollY);\r\n\t\t\t\t\t\t\t\tnewScrollState = getScrollState(targetView);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tgantt.scrollTo(scrollX, scrollY);\r\n\t\t\t\t\t\t\t\tnewScrollState = gantt.getScrollState();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ((scrollState.x != newScrollState.x && dy > 2 * dx) ||\r\n\t\t\t\t\t\t\t\t(scrollState.y != newScrollState.y && dx > 2 * dy )) {\r\n\t\t\t\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}]);\r\n\r\n\t\t// prevent page drag on touch move\r\n\t\ttry{\r\n\t\t\tdocument.addEventListener('touchmove', function(e) {\r\n\t\t\t\tif (gantt._touch_drag) {\r\n\t\t\t\t\tblock_action(e);\r\n\t\t\t\t}\r\n\t\t\t}, { passive: false });\r\n\t\t}\r\n\t\tcatch(e){\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tconsole.warn(\"Cannot prevent touch event for the page drag\");\r\n\t\t}\r\n\r\n\t\t//block touch context menu in IE10\r\n\t\ttouchHandlers.push([this.$container, \"contextmenu\", function (e) {\r\n\t\t\tif (actionMode)\r\n\t\t\t\treturn block_action(e);\r\n\t\t}]);\r\n\r\n\t\t//touch start\r\n\t\ttouchHandlers.push([this.$container, names[1], function (e) {\r\n\t\t\tmultiTouchEvents = e.touches.length;\r\n\t\t\t// block pull-to-refresh\r\n\t\t\tif(document && document.body){\r\n\t\t\t\tdocument.body.classList.add(\"gantt_touch_active\");\r\n\t\t\t}\r\n\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (e.touches && e.touches.length > 1) {\r\n\t\t\t\tactionMode = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tactionStart = accessor(e);\r\n\t\t\ttargetView = findTargetView(actionStart);\r\n\t\t\tif (!gantt._locate_css(actionStart, \"gantt_hor_scroll\") && !gantt._locate_css(actionStart, \"gantt_ver_scroll\")) {\r\n\t\t\t\tactionMode = true;\r\n\t\t\t}\r\n\t\t\tvar tasksDnD = getTaskDND();\r\n\r\n\t\t\t//long tap\r\n\t\t\tlongTapTimer = setTimeout(function () {\r\n\t\t\t\tvar taskId = gantt.locate(actionStart);\r\n\t\t\t\tif (tasksDnD && (taskId && !gantt._locate_css(actionStart, \"gantt_link_control\") && !gantt._locate_css(actionStart, \"gantt_grid_data\"))) {\r\n\t\t\t\t\ttasksDnD.on_mouse_down(actionStart);\r\n\r\n\t\t\t\t\tif (tasksDnD.drag && tasksDnD.drag.start_drag) {\r\n\t\t\t\t\t\t// we need that as touch events break if the target node is removed from the DOM\r\n\t\t\t\t\t\tcloneTaskRendered(taskId);\r\n\t\t\t\t\t\ttasksDnD._start_dnd(actionStart);\r\n\t\t\t\t\t\tgantt._touch_drag = true;\r\n\r\n\t\t\t\t\t\tgantt.refreshTask(taskId);\r\n\r\n\t\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlongTapTimer = null;\r\n\t\t\t}, gantt.config.touch_drag);\r\n\t\t}]);\r\n\r\n\t\t//touch end\r\n\t\ttouchHandlers.push([this.$container, names[2], function (e) {\r\n\t\t\tif(document && document.body){\r\n\t\t\t\tdocument.body.classList.remove(\"gantt_touch_active\");\r\n\t\t\t}\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (longTapTimer) clearTimeout(longTapTimer);\r\n\t\t\tgantt._touch_drag = false;\r\n\t\t\tactionMode = false;\r\n\t\t\tvar source = accessor(e);\r\n\r\n\t\t\tvar tasksDnD = getTaskDND();\r\n\r\n\t\t\tif(tasksDnD)\r\n\t\t\t\ttasksDnD.on_mouse_up(source);\r\n\r\n\t\t\tif (currentDndId && gantt.isTaskExists(currentDndId)) {\r\n\t\t\t\tgantt.refreshTask(currentDndId);\r\n\t\t\t\tif(dndNodes.length){\r\n\t\t\t\t\tdndNodes.forEach(function(node){\r\n\t\t\t\t\t\tif(node.parentNode){\r\n\t\t\t\t\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//gantt._touch_scroll_active = action_mode = scroll_mode = false;\r\n\t\t\tactionMode = scrollMode = false;\r\n\t\t\tdndNodes = [];\r\n\t\t\tcurrentDndId = null;\r\n\r\n\t\t\t//dbl-tap handling\r\n\t\t\tif (actionStart && dblclicktime) {\r\n\t\t\t\tvar now = new Date();\r\n\t\t\t\t// doubletap shouldn't happen with multitouch\r\n\t\t\t\tif ((now - dblclicktime) < 500 && multiTouchEvents <= 1) {\r\n\r\n\t\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\t\t\tmouseEvents.onDoubleClick(actionStart);\r\n\t\t\t\t\tblock_action(e);\r\n\t\t\t\t} else\r\n\t\t\t\t\tdblclicktime = now;\r\n\t\t\t} else {\r\n\t\t\t\tdblclicktime = new Date();\r\n\t\t\t}\r\n\t\t}]);\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.event(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\r\n\t\t//common helper, prevents event\r\n\t\tfunction block_action(e) {\r\n\t\t\tif (e && e.preventDefault && e.cancelable){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\te.cancelBubble = true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction cloneTaskRendered(taskId) {\r\n\t\t\tconst renders = gantt._getTaskLayers();\r\n\t\t\tlet task = gantt.getTask(taskId);\r\n\t\t\tif (task) {\r\n\t\t\t\tlet visible = gantt.isTaskVisible(taskId);\r\n\t\t\t\tif (visible){\r\n\t\t\t\t\tcurrentDndId = taskId;\r\n\t\t\t\t\tfor (let i = 0; i < renders.length; i++) {\r\n\t\t\t\t\t\ttask = renders[i].rendered[taskId];\r\n\t\t\t\t\t\tif (task && task.getAttribute(gantt.config.task_attribute) && task.getAttribute(gantt.config.task_attribute) == taskId) {\r\n\t\t\t\t\t\t\tconst copy = task.cloneNode(true);\r\n\t\t\t\t\t\t\tdndNodes.push(task);\r\n\t\t\t\t\t\t\trenders[i].rendered[taskId] = copy;\r\n\t\t\t\t\t\t\ttask.style.display = \"none\";\r\n\t\t\t\t\t\t\tcopy.className += \" gantt_drag_move \";\r\n\t\t\t\t\t\t\ttask.parentNode.appendChild(copy);\r\n\t\t\t\t\t\t\t//return copy;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (task.$split_subtask){\r\n\t\t\t\t\tlet renderedParent = task.$rendered_parent;\r\n\t\t\t\t\tvisible = gantt.isTaskVisible(renderedParent);\r\n\t\t\t\t\tif (!visible){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcurrentDndId = taskId;\r\n\t\t\t\t\tfor (let i = 0; i < renders.length; i++) {\r\n\t\t\t\t\t\tconst parent = renders[i].rendered[renderedParent];\r\n\t\t\t\t\t\tlet taskNode;\r\n\t\t\t\t\t\tif (parent && parent.childNodes){\r\n\t\t\t\t\t\t\ttaskNode = parent.querySelector(`[${gantt.config.task_attribute}=\"${task.id}\"]`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (taskNode) {\r\n\t\t\t\t\t\t\t// move the child node to a different parent as the task bar will be repainted\r\n\t\t\t\t\t\t\t// and the initial node will be lost\r\n\t\t\t\t\t\t\tconst copy = taskNode.cloneNode(true);\r\n\t\t\t\t\t\t\ttaskNode.parentNode.appendChild(copy);\r\n\r\n\t\t\t\t\t\t\tgantt.$task_bars.appendChild(taskNode);\r\n\t\t\t\t\t\t\ttaskNode.style.display = \"none\";\r\n\r\n\t\t\t\t\t\t\t// don't add the node as rendered otherwise it will be lost:\r\n\t\t\t\t\t\t\t// renders[i].rendered[taskId] = taskNode;\r\n\t\t\t\t\t\t\t// instead, add it to dndNodes as its elements will be removed after drag\r\n\t\t\t\t\t\t\tdndNodes.push(taskNode);\r\n\r\n\t\t\t\t\t\t\ttaskNode = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n};","function dummy() {\r\n\t// eslint-disable-next-line\r\n\tconsole.log(\"Method is not implemented.\"); \r\n}\r\nfunction BaseControl() {\r\n}\r\n\r\n// base methods will be runned in gantt context\r\nBaseControl.prototype.render = dummy; // arguments: sns\r\nBaseControl.prototype.set_value = dummy; // arguments: node, value, ev, sns(config)\r\nBaseControl.prototype.get_value = dummy; // arguments node, ev, sns(config)\r\nBaseControl.prototype.focus = dummy; // arguments: node\r\n\r\nexport default function(gantt) { // we could send current instance of gantt to module\r\n\treturn BaseControl;\r\n};","import * as helpers from \"../../../utils/helpers\";\r\n\r\nvar htmlHelpers = {\r\n\tgetHtmlSelect: function(options, attributes, value) {\r\n\t\tvar innerHTML = \"\";\r\n\t\tvar _this = this;\r\n\r\n\t\toptions = options || [];\r\n\t\t\r\n\t\thelpers.forEach(options, function(entry) {\r\n\t\t\tvar _attributes = [{ key: \"value\", value: entry.key }];\r\n\r\n\t\t\tif (value == entry.key) {\r\n\t\t\t\t_attributes[_attributes.length] = { key: \"selected\", value: \"selected\" };\r\n\t\t\t}\r\n\t\t\tif (entry.attributes) {\r\n\t\t\t\t_attributes = _attributes.concat(entry.attributes);\r\n\t\t\t}\r\n\t\t\tinnerHTML += _this.getHtmlOption({ innerHTML: entry.label }, _attributes);\r\n\t\t});\r\n\r\n\t\treturn _getHtmlContainer(\"select\", { innerHTML: innerHTML }, attributes);\r\n\t},\r\n\tgetHtmlOption: function(options, attributes) { return _getHtmlContainer(\"option\", options, attributes); },\r\n\tgetHtmlButton: function(options, attributes) { return _getHtmlContainer(\"button\", options, attributes); },\r\n\tgetHtmlDiv: function(options, attributes) { return _getHtmlContainer(\"div\", options, attributes); },\r\n\tgetHtmlLabel: function(options, attributes) { return _getHtmlContainer(\"label\", options, attributes); },\r\n\tgetHtmlInput: function(attributes) {\r\n\t\treturn \"<input\" + _getHtmlAttributes(attributes || []) + \">\";\r\n\t}\r\n};\r\n\r\nfunction _getHtmlContainer(tag, options, attributes) {\r\n\tvar html;\r\n\r\n\toptions = options || [];\r\n\t\r\n\thtml = \"<\" + tag + _getHtmlAttributes(attributes || []) + \">\" + (options.innerHTML || \"\") + \"</\" + tag +\">\";\r\n\treturn html;\r\n\r\n}\r\n\r\nfunction _getHtmlAttributes(attributes) {\r\n\tvar html = \"\";\r\n\r\n\thelpers.forEach(attributes, function(entry) {\r\n\t\thtml += \" \" + entry.key + \"='\" + entry.value + \"'\";\r\n\t});\r\n\treturn html;\r\n}\r\n\r\nexport default htmlHelpers;","import __extends from \"../../../../utils/extends\";\r\nimport htmlHelpers from \"../../utils/html_helpers\";\r\n\r\nimport Super from \"./base_control\";\r\n\r\nexport default function(gantt) {\r\n\tconst _super = Super(gantt);\r\n\r\n\tfunction SelectControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\t\r\n\t\treturn self; \r\n\t}\r\n\t\r\n\t__extends(SelectControl, _super);\r\n\t\r\n\tSelectControl.prototype.render = function(sns) {\r\n\t\tconst height = sns.height ? `height:${sns.height}px;` : '';\r\n\t\tlet html = `<div class='gantt_cal_ltext gantt_section_${sns.name}' ${height ? `style='${height}'` : ''}>`;\r\n\r\n\t\thtml += htmlHelpers.getHtmlSelect(sns.options, [{ key: \"style\", value: \"width:100%;\" }, { key: \"title\", value: sns.name }]);\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tSelectControl.prototype.set_value = function(node, value, ev, sns) {\r\n\t\tvar select = node.firstChild;\r\n\t\tif (!select._dhx_onchange && sns.onchange) {\r\n\t\t\tselect.onchange = sns.onchange;\r\n\t\t\tselect._dhx_onchange = true;\r\n\t\t}\r\n\t\tif (typeof value === \"undefined\")\r\n\t\t\tvalue = (select.options[0] || {}).value;\r\n\t\tselect.value = value || \"\";\r\n\t};\r\n\t\r\n\tSelectControl.prototype.get_value = function(node) {\r\n\t\treturn node.firstChild.value;\r\n\t};\r\n\t\r\n\tSelectControl.prototype.focus = function(node) {\r\n\t\tvar a = node.firstChild;\r\n\t\tgantt._focus(a, true);\r\n\t};\r\n\t\r\n\treturn SelectControl;\r\n};","import __extends from \"../../../../utils/extends\";\r\nimport SelectControl from \"./select_control\";\r\nexport default function(gantt) {\r\n\tvar _super = SelectControl(gantt);\r\n\r\n\tfunction ParentControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this; \r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(ParentControl, _super);\r\n\r\n\r\n\tParentControl.prototype.render = function(sns) {\r\n\t\treturn _display(sns, false);\r\n\t};\r\n\r\n\tParentControl.prototype.set_value = function(node, value, ev, config) {\r\n\t\t// GS-1051. If the value is `0`, the set_value function in the select control won't select \r\n\t\t// the first child because (0 || '') = '';\r\n\t\tif (value === 0) value = \"0\";\r\n\r\n\t\t// GS-1374. Usually, the ID is not specified,\r\n\t\t// we need to add it to keep the options and exclude the current task\r\n\t\tif (!ev.id && gantt.getState().lightbox) {\r\n\t\t\tev.id = gantt.getLightboxValues().id;\r\n\t\t}\r\n\r\n\t\tvar tmpDom = document.createElement(\"div\");\r\n\t\ttmpDom.innerHTML = _display(config, ev.id);\r\n\t\tvar newOptions = tmpDom.removeChild(tmpDom.firstChild);\r\n\t\tnode.onselect = null;\r\n\t\tnode.parentNode.replaceChild(newOptions, node);\r\n\r\n\t\treturn gantt.form_blocks.select.set_value.apply(gantt, [newOptions, value, ev, config]);\r\n\t};\r\n\r\n\tfunction _display(config, item_id) {\r\n\t\tvar tasks = [],\r\n\t\t\toptions = [];\r\n\t\tif (item_id) {\r\n\t\t\ttasks = gantt.getTaskByTime();\r\n\t\t\tif (config.allow_root) {\r\n\t\t\t\ttasks.unshift({id: gantt.config.root_id, text: config.root_label || \"\"});\r\n\t\t\t}\r\n\t\t\ttasks = _filter(tasks, config, item_id);\r\n\t\t\tif (config.sort) {\r\n\t\t\t\ttasks.sort(config.sort);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar text = config.template || gantt.templates.task_text;\r\n\t\tfor (var i = 0; i < tasks.length; i++) {\r\n\t\t\tvar label = text.apply(gantt, [tasks[i].start_date, tasks[i].end_date, tasks[i]]);\r\n\t\t\tif (label === undefined) {\r\n\t\t\t\tlabel = \"\";\r\n\t\t\t}\r\n\t\t\toptions.push({\r\n\t\t\t\tkey: tasks[i].id,\r\n\t\t\t\tlabel: label\r\n\t\t\t});\r\n\t\t}\r\n\t\tconfig.options = options;\r\n\t\tconfig.map_to = config.map_to || \"parent\";\r\n\t\treturn gantt.form_blocks.select.render.apply(this, arguments);\r\n\t}\r\n\r\n\tfunction _filter(options, config, item_id) {\r\n\t\tvar filter = config.filter || function() {\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\toptions = options.slice(0);\r\n\r\n\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\tvar task = options[i];\r\n\t\t\tif (task.id == item_id || gantt.isChildOf(task.id, item_id) || filter(task.id, task) === false) {\r\n\t\t\t\toptions.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn options;\r\n\t}\r\n\treturn ParentControl;\r\n};","import TemplateControlConstructor from \"./controls/template_control\";\r\nimport TextareaControlConstructor from \"./controls/textarea_control\";\r\nimport TimeControlConstructor from \"./controls/time_control\";\r\nimport SelectControlConstructor from \"./controls/select_control\";\r\nimport CheckboxControlConstructor from \"./controls/checkbox_control\";\r\nimport RadioControlConstructor from \"./controls/radio_control\";\r\nimport DurationControlConstructor from \"./controls/duration_control\";\r\nimport ParentControlConstructor from \"./controls/parent_control\";\r\nimport ResourcesControlConstructor from \"./controls/resources_control\";\r\nimport ConstraintControlConstructor from \"./controls/constraint_control\";\r\nimport TypeselectControlConstructor from \"./controls/typeselect_control\";\r\nimport BaselineControlConstructor from \"./controls/baseline_control\";\r\n\r\nimport * as domHelpers from \"../utils/dom_helpers\";\r\nimport * as helpers from \"../../../utils/helpers\";\r\n\t\r\n\r\nexport default function (gantt) {\r\n\r\n\r\n\tvar TemplateControl = TemplateControlConstructor(gantt);\r\n\tvar TextareaControl = TextareaControlConstructor(gantt);\r\n\tvar TimeControl = TimeControlConstructor(gantt);\r\n\tvar SelectControl = SelectControlConstructor(gantt);\r\n\tvar CheckboxControl = CheckboxControlConstructor(gantt);\r\n\tvar RadioControl = RadioControlConstructor(gantt);\r\n\tvar DurationControl = DurationControlConstructor(gantt);\r\n\tvar ParentControl = ParentControlConstructor(gantt);\r\n\tvar ResourcesControl = ResourcesControlConstructor(gantt);\r\n\tvar ConstraintControl = ConstraintControlConstructor(gantt);\r\n\tvar TypeselectControl = TypeselectControlConstructor(gantt);\r\n\tvar BaselineControl = BaselineControlConstructor(gantt);\r\n\r\n\tgantt._lightbox_methods = {};\r\n\tgantt._lightbox_template = \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span></div><div class='gantt_cal_larea'></div>\";\r\n\tgantt._lightbox_template = `<div class='gantt_cal_ltitle'><div class=\"dhx_cal_ltitle_descr\"><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='dhx_title'></span>\r\n</div>\r\n<div class=\"gantt_cal_ltitle_controls\">\r\n\t<a class=\"gantt_cal_ltitle_close_btn dhx_gantt_icon dhx_gantt_icon_close\"></a>\r\n\r\n</div></div><div class='gantt_cal_larea'></div>`;\r\n\r\n\t// GS-1952. Attaching the lightbox to the BODY element is not considered secure.\r\n\t// Attach it to Gantt container for Salesforce and other secure environments\r\n\tgantt._lightbox_root = gantt.$root;\r\n\tfunction setParentNode() {\r\n\t\tconst cspEnvironment = gantt.config.csp === true;\r\n\t\tif (cspEnvironment || gantt.env.isSalesforce) {\r\n\t\t\tgantt._lightbox_root = gantt.$root;\r\n\t\t} else {\r\n\t\t\tgantt._lightbox_root = document.body;\r\n\t\t}\r\n\t}\r\n\r\n\t//TODO: gantt._lightbox_id is changed from data.js and accessed from autoscheduling, check if it can be removed from gantt object\r\n\tvar state = gantt.$services.getService(\"state\");\r\n\tstate.registerProvider(\"lightbox\", function () {\r\n\t\treturn {\r\n\t\t\tlightbox: gantt._lightbox_id\r\n\t\t};\r\n\t});\r\n\r\n\tgantt.showLightbox = function (id) {\r\n\t\tvar task = this.getTask(id);\r\n\t\tif (!this.callEvent(\"onBeforeLightbox\", [id])) {\r\n\t\t\tif(gantt.isTaskExists(id) && gantt.getTask(id).$new){\r\n\t\t\t\t//GS-2340 if 'onBeforeLightbox' returns 'false' need update the order in datastore\r\n\t\t\t\tthis.$data.tasksStore._updateOrder();\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar box = this.getLightbox(this.getTaskType(task.type));\r\n\r\n\t\tthis.showCover(box);\r\n\t\tthis._fill_lightbox(id, box);\r\n\t\tthis._setLbPosition(box);\r\n\t\tthis._waiAria.lightboxVisibleAttr(box);\r\n\r\n\t\tthis.callEvent(\"onLightbox\", [id]);\r\n\t};\r\n\r\n\tfunction _is_chart_visible(gantt) {\r\n\t\tvar timeline = gantt.$ui.getView(\"timeline\");\r\n\t\tif (timeline && timeline.isVisible()) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgantt._get_timepicker_step = function () {\r\n\t\tif (this.config.round_dnd_dates) {\r\n\t\t\tvar step;\r\n\t\t\tif (_is_chart_visible(this)) {\r\n\t\t\t\tvar scale = gantt.getScale();\r\n\t\t\t\tstep = (helpers.getSecondsInUnit(scale.unit) * scale.step) / 60;//timepicker step is measured in minutes\r\n\t\t\t}\r\n\r\n\t\t\tif (!step || step >= 60 * 24) {\r\n\t\t\t\tstep = this.config.time_step;\r\n\t\t\t}\r\n\t\t\treturn step;\r\n\t\t}\r\n\t\treturn this.config.time_step;\r\n\t};\r\n\tgantt.getLabel = function (property, key) {\r\n\t\tvar sections = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < sections.length; i++) {\r\n\t\t\tif (sections[i].map_to == property) {\r\n\t\t\t\tvar options = sections[i].options;\r\n\t\t\t\tfor (var j = 0; j < options.length; j++) {\r\n\t\t\t\t\tif (options[j].key == key) {\r\n\t\t\t\t\t\treturn options[j].label;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t};\r\n\r\n\tgantt.updateCollection = function (list_name, collection) {\r\n\t\tcollection = collection.slice(0);\r\n\t\tvar list = gantt.serverList(list_name);\r\n\t\tif (!list) return false;\r\n\t\tlist.splice(0, list.length);\r\n\t\tlist.push.apply(list, collection || []);\r\n\t\tgantt.resetLightbox();\r\n\t};\r\n\tgantt.getLightboxType = function () {\r\n\t\treturn this.getTaskType(this._lightbox_type);\r\n\t};\r\n\tgantt.getLightbox = function (type) {\r\n\t\tvar lightboxDiv;\r\n\t\tvar fullWidth;\r\n\t\tvar html;\r\n\t\tvar sns;\r\n\t\tvar ds;\r\n\t\tvar classNames = \"\";\r\n\t\tsetParentNode();\r\n\r\n\t\tif (type === undefined)\r\n\t\t\ttype = this.getLightboxType();\r\n\r\n\t\tif (!this._lightbox || this.getLightboxType() != this.getTaskType(type)) {\r\n\t\t\tthis._lightbox_type = this.getTaskType(type);\r\n\t\t\tlightboxDiv = document.createElement(\"div\");\r\n\t\t\tclassNames = \"gantt_cal_light\";\r\n\t\t\tfullWidth = this._is_lightbox_timepicker();\r\n\r\n\t\t\tif (gantt.config.wide_form)\r\n\t\t\t\tclassNames += \" gantt_cal_light_wide\";\r\n\r\n\t\t\tif (fullWidth) {\r\n\t\t\t\tclassNames += \" gantt_cal_light_full\";\r\n\t\t\t}\r\n\r\n\t\t\tlightboxDiv.className = classNames;\r\n\r\n\t\t\tlightboxDiv.style.visibility = \"hidden\";\r\n\t\t\thtml = this._lightbox_template;\r\n\t\t\thtml += \"<div class='gantt_cal_lcontrols'>\";\r\n\t\t\thtml += getHtmlButtons(this.config.buttons_left);\r\n\t\t\thtml += \"<div class='gantt_cal_lcontrols_push_right'></div>\";\r\n\t\t\thtml += getHtmlButtons(this.config.buttons_right, true);\r\n\t\t\thtml += \"</div>\";\r\n\r\n\t\t\tlightboxDiv.innerHTML = html;\r\n\r\n\t\t\tgantt._waiAria.lightboxAttr(lightboxDiv);\r\n\r\n\t\t\tif (gantt.config.drag_lightbox) {\r\n\t\t\t\tlightboxDiv.firstChild.onmousedown = gantt._ready_to_dnd;\r\n\t\t\t\tlightboxDiv.firstChild.ontouchstart = function (e){\r\n\t\t\t\t\tgantt._ready_to_dnd(e.touches[0]);\r\n\t\t\t\t};\r\n\t\t\t\tlightboxDiv.firstChild.onselectstart = function () {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t};\r\n\t\t\t\tlightboxDiv.firstChild.style.cursor = \"pointer\";\r\n\t\t\t\tgantt._init_dnd_events();\r\n\t\t\t}\r\n\r\n\t\t\t// GS-1428: If there is lightbox node, we need to remove it from the DOM\r\n\t\t\tif (this._lightbox){\r\n\t\t\t\tthis.resetLightbox();\r\n\t\t\t}\r\n\t\t\tshow_cover();\r\n\t\t\tthis._cover.insertBefore(lightboxDiv, this._cover.firstChild);\r\n\t\t\tthis._lightbox = lightboxDiv;\r\n\r\n\t\t\tsns = this._get_typed_lightbox_config(type);\r\n\t\t\thtml = this._render_sections(sns);\r\n\r\n\t\t\tds = lightboxDiv.querySelector(\"div.gantt_cal_larea\");\r\n\t\t\t\r\n\t\t\t//GS-1131. If gantt_cal_larea is displayed, Firefox renders buttons incorrectly;\r\n\t\t\tvar backup_overflow = ds.style.overflow;\r\n\t\t\tds.style.overflow = 'hidden';\r\n\r\n\t\t\tds.innerHTML = html;\r\n\r\n\t\t\t\r\n\r\n\t\t\tbindLabelsToInputs(sns);\r\n\r\n\t\t\tds.style.overflow = backup_overflow;\r\n\r\n\t\t\tthis._init_lightbox_events(this);\r\n\t\t\tlightboxDiv.style.display = \"none\";\r\n\t\t\tlightboxDiv.style.visibility = \"visible\";\r\n\t\t}\r\n\t\treturn this._lightbox;\r\n\t};\r\n\r\n\tgantt._render_sections = function (sns) {\r\n\t\tvar html = \"\";\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar block = this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue; //ignore incorrect blocks\r\n\t\t\tsns[i].id = \"area_\" + this.uid();\r\n\r\n\t\t\tvar display = sns[i].hidden ? \" style='display:none'\" : \"\";\r\n\t\t\tvar button = \"\";\r\n\t\t\tif (sns[i].button) {\r\n\t\t\t\tbutton = \"<div class='gantt_custom_button' data-index='\" + i + \"'><div class='gantt_custom_button_\" + sns[i].button + \"'></div><div class='gantt_custom_button_label'>\" + this.locale.labels[\"button_\" + sns[i].button] + \"</div></div>\";\r\n\t\t\t}\r\n\t\t\tif (sns[i].type == \"baselines\") {\r\n\t\t\t\tbutton = \"<div class='gantt_custom_button gantt_remove_baselines' data-index='\" + i + \"'><div class='gantt_custom_button_delete_baselines'></div><div class='gantt_custom_button_label'>\" + this.locale.labels.baselines_remove_all_button + \"</div></div>\" +\r\n\t\t\t\t\"<div class='gantt_custom_button gantt_add_baselines' data-index='\" + i + \"'><div class='gantt_custom_button_add_baseline'></div><div class='gantt_custom_button_label'>\" + this.locale.labels.baselines_add_button + \"</div></div>\";\r\n\t\t\t}\r\n\t\t\tif (this.config.wide_form) {\r\n\t\t\t\thtml += \"<div class='gantt_wrap_section' \" + display + \">\";\r\n\t\t\t}\r\n\t\t\thtml += \"<div id='\" + sns[i].id + \"' class='gantt_cal_lsection'><label>\" + button + (sns[i].label || this.locale.labels[\"section_\" + sns[i].name]||sns[i].name) + \"</label></div>\" + block.render.call(this, sns[i]);\r\n\t\t\thtml += \"</div>\";\r\n\t\t}\r\n\t\treturn html;\r\n\t};\r\n\r\n\tgantt._center_lightbox = function(box){\r\n\t\tgantt._setLbPosition(box);\r\n\t};\r\n\tgantt._setLbPosition = function(box) {\r\n\t\tif(!box){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst rootElement = gantt._lightbox_root || gantt.$root;\r\n\t\tbox.style.top = Math.max(rootElement.offsetHeight / 2 - box.offsetHeight/2, 0) + \"px\";\r\n\t\tbox.style.left = Math.max(rootElement.offsetWidth / 2 - box.offsetWidth/2, 0) + \"px\";\r\n\t};\r\n\r\n\tgantt.showCover = function (box) {\r\n\t\tif (box){\r\n\t\t\tbox.style.display=\"block\";\r\n\t\r\n\t\t\tthis._setLbPosition(box);\r\n\t\t}\r\n\t\tshow_cover();\r\n\t\tthis._cover.style.display = \"\";\r\n\t};\r\n\tconst show_cover=function(){\r\n\t\tif(gantt._cover) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\r\n\t\tgantt._cover=document.createElement(\"div\");\r\n\t\tgantt._cover.className=\"gantt_cal_cover\";\r\n\t\tgantt._cover.style.display = \"none\";\r\n\t\r\n\t\tgantt.event(gantt._cover, \"mousemove\", gantt._move_while_dnd);\r\n\t\tgantt.event(gantt._cover, \"mouseup\", gantt._finish_dnd);\r\n\t\r\n\t\tconst rootElement = gantt._lightbox_root || gantt.$root;\r\n\t\trootElement.appendChild(gantt._cover);\r\n\t};\r\n\r\n\tgantt._init_lightbox_events = function () {\r\n\t\tgantt.lightbox_events = {};\r\n\r\n\r\n\t\tgantt.lightbox_events.gantt_save_btn = function () {\r\n\t\t\tgantt._save_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events.gantt_delete_btn = function () {\r\n\t\t\tgantt._lightbox_current_type = null;\r\n\t\t\tif (!gantt.callEvent(\"onLightboxDelete\", [gantt._lightbox_id]))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (gantt.isTaskExists(gantt._lightbox_id)) {\r\n\t\t\t\tgantt.$click.buttons[\"delete\"](gantt._lightbox_id);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.hideLightbox();\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events.gantt_cancel_btn = function () {\r\n\t\t\tgantt._cancel_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"default\"] = function (e, src) {\r\n\t\t\tif (src.getAttribute(\"data-dhx-button\")) {\r\n\t\t\t\tgantt.callEvent(\"onLightboxButton\", [src.className, src, e]);\r\n\t\t\t} else {\r\n\t\t\t\tvar index, block, sec;\r\n\r\n\t\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\t\tif (className.indexOf(\"gantt_custom_button\") != -1) {\r\n\t\t\t\t\tif (className.indexOf(\"gantt_custom_button_\") != -1) {\r\n\t\t\t\t\t\tindex = src.parentNode.getAttribute(\"data-index\");\r\n\t\t\t\t\t\tsec = src;\r\n\t\t\t\t\t\twhile (sec && domHelpers.getClassName(sec).indexOf(\"gantt_cal_lsection\") == -1) {\r\n\t\t\t\t\t\t\tsec = sec.parentNode;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tindex = src.getAttribute(\"data-index\");\r\n\t\t\t\t\t\tsec = src.closest(\".gantt_cal_lsection\");\r\n\t\t\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar sections = gantt._get_typed_lightbox_config();\r\n\r\n\t\t\t\tif (index) {\r\n\t\t\t\t\tindex = index * 1;\r\n\t\t\t\t\tblock = gantt.form_blocks[sections[index * 1].type];\r\n\t\t\t\t\tblock.button_click(index, src, sec, sec.nextSibling);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.event(gantt.getLightbox(), \"click\", function (e) {\r\n\t\t\tif(e.target.closest(\".gantt_cal_ltitle_close_btn\")){\r\n\t\t\t\tgantt._cancel_lightbox();\r\n\t\t\t}\r\n\t\t\tvar src = domHelpers.getTargetNode(e);\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tif (!className) {\r\n\t\t\t\tsrc = src.previousSibling;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className && className.indexOf(\"gantt_btn_set\") === 0) {\r\n\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className) {\r\n\t\t\t\tvar func = gantt.defined(gantt.lightbox_events[src.className]) ? gantt.lightbox_events[src.className] : gantt.lightbox_events[\"default\"];\r\n\t\t\t\treturn func(e, src);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tgantt.getLightbox().onkeydown = function (e) {\r\n\t\t\tvar event = e || window.event;\r\n\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\tvar buttonTarget = domHelpers.getClassName(target).indexOf(\"gantt_btn_set\") > -1;\r\n\r\n\t\t\tswitch ((e || event).keyCode) {\r\n\t\t\t\tcase gantt.constants.KEY_CODES.SPACE: {\r\n\t\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase gantt.keys.edit_save:\r\n\t\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgantt._save_lightbox();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase gantt.keys.edit_cancel:\r\n\t\t\t\t\tgantt._cancel_lightbox();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\tgantt._cancel_lightbox = function () {\r\n\t\tvar task = this.getLightboxValues();\r\n\t\tgantt._lightbox_current_type = null;\r\n\t\tthis.callEvent(\"onLightboxCancel\", [this._lightbox_id, task.$new]);\r\n\t\tif (gantt.isTaskExists(task.id) && task.$new) {\r\n\t\t\tthis.silent(function () {\r\n\t\t\t\tgantt.$data.tasksStore.removeItem(task.id);\r\n\t\t\t\tgantt._update_flags(task.id, null);\r\n\t\t\t});\r\n\t\t\tthis.refreshData();\r\n\t\t}\r\n\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._save_lightbox = function () {\r\n\t\tvar task = this.getLightboxValues();\r\n\t\tgantt._lightbox_current_type = null;\r\n\t\tif (!this.callEvent(\"onLightboxSave\", [this._lightbox_id, task, !!task.$new]))\r\n\t\t\treturn;\r\n\r\n\t\t// GS-2170. Do not recalculate the indexes and dates of other tasks\r\n\t\t// as they will be recalculated in the `refreshData`\r\n\t\tgantt.$data.tasksStore._skipTaskRecalculation = \"lightbox\";\r\n\t\tif (task.$new) {\r\n\t\t\tdelete task.$new;\r\n\t\t\tthis.addTask(task, task.parent, this.getTaskIndex(task.id));\r\n\t\t} else if (this.isTaskExists(task.id)) {\r\n\t\t\tthis.mixin(this.getTask(task.id), task, true);\r\n\t\t\tthis.refreshTask(task.id);\r\n\t\t\tthis.updateTask(task.id);\r\n\t\t}\r\n\t\tgantt.$data.tasksStore._skipTaskRecalculation = false;\r\n\t\tthis.refreshData();\r\n\r\n\t\t// TODO: do we need any blockable events here to prevent closing lightbox?\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._resolve_default_mapping = function (section) {\r\n\t\tvar mapping = section.map_to;\r\n\t\tvar time_controls = { \"time\": true, \"time_optional\": true, \"duration\": true, \"duration_optional\": true };\r\n\t\tif (time_controls[section.type]) {\r\n\t\t\tif (section.map_to == \"auto\") {\r\n\t\t\t\tmapping = { start_date: \"start_date\", end_date: \"end_date\", duration: \"duration\" };\r\n\t\t\t} else if (typeof (section.map_to) === \"string\") {\r\n\t\t\t\tmapping = { start_date: section.map_to };\r\n\t\t\t}\r\n\t\t} else if (section.type === \"constraint\") {\r\n\t\t\tif (!section.map_to || typeof (section.map_to) === \"string\") {\r\n\t\t\t\tmapping = { constraint_type: \"constraint_type\", constraint_date: \"constraint_date\" };\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn mapping;\r\n\t};\r\n\r\n\tgantt.getLightboxValues = function () {\r\n\t\tlet task = {};\r\n\r\n\t\tif (gantt.isTaskExists(this._lightbox_id)) {\r\n\t\t\ttask = this.mixin({}, this.getTask(this._lightbox_id));\r\n\t\t}\r\n\r\n\t\tconst sns = this._get_typed_lightbox_config();\r\n\t\t// GS-2370: if there is a resource with its calendar\r\n\t\t// need to place time section at the end\r\n\t\tconst sortedSns = [...sns].sort((a, b) => {\r\n\t\t\tif (a.name === \"time\") return 1;\r\n\t\t\tif (b.name === \"time\") return -1;\r\n\t\t\treturn 0;\r\n\t\t});\r\n\t\tfor (let i = 0; i < sortedSns.length; i++) {\r\n\t\t\tlet node = gantt._lightbox_root.querySelector(\"#\" + sortedSns[i].id);\r\n\t\t\tnode = (node ? node.nextSibling : node);\r\n\t\t\tlet block = this.form_blocks[sortedSns[i].type];\r\n\t\t\tif (!block) continue;\r\n\t\t\tlet res = block.get_value.call(this, node, task, sortedSns[i]);\r\n\t\t\tlet map_to = gantt._resolve_default_mapping(sortedSns[i]);\r\n\t\t\tif (typeof map_to == \"string\" && map_to != \"auto\") {\r\n\t\t\t\ttask[map_to] = res;\r\n\t\t\t} else if (typeof map_to == \"object\") {\r\n\t\t\t\tfor (let property in map_to) {\r\n\t\t\t\t\tif (map_to[property])\r\n\t\t\t\t\t\ttask[map_to[property]] = res[property];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// GS-1282 We need to preserve the task type even if the lightbox doesn't have the typeselect section\r\n\t\t// GS-2460 set the current type from selector\r\n\t\tif (gantt._lightbox_current_type) {\r\n\t\t\ttask.type = gantt._lightbox_current_type;\r\n\t\t}\r\n\r\n\t\treturn task;\r\n\t};\r\n\r\n\r\n\tgantt.hideLightbox = function () {\r\n\t\tvar box = this.getLightbox();\r\n\t\tif (box) box.style.display = \"none\";\r\n\r\n\t\tthis._waiAria.lightboxHiddenAttr(box);\r\n\t\tthis._lightbox_id = null;\r\n\r\n\t\tthis.hideCover(box);\r\n\t\tthis.resetLightbox();\r\n\t\tthis.callEvent(\"onAfterLightbox\", []);\r\n\t};\r\n\tgantt.hideCover = function (box) {\r\n\t\tif(box){\r\n\t\t\tbox.style.display = \"none\";\r\n\t\t}\r\n\t\tif (this._cover)\r\n\t\t\tthis._cover.parentNode.removeChild(this._cover);\r\n\t\tthis._cover = null;\r\n\t};\r\n\r\n\tgantt.resetLightbox = function () {\r\n\t\tif (gantt._lightbox && !gantt._custom_lightbox)\r\n\t\t\tgantt._lightbox.remove();\r\n\t\tgantt._lightbox = null;\r\n\t};\r\n\tgantt._set_lightbox_values = function (data, box) {\r\n\t\tvar task = data;\r\n\t\tvar s = box.getElementsByTagName(\"span\");\r\n\t\tvar lightboxHeader = [];\r\n\t\tif (gantt.templates.lightbox_header) {\r\n\t\t\tlightboxHeader.push(\"\");\r\n\t\t\tlightboxHeader.push(gantt.templates.lightbox_header(task.start_date, task.end_date, task));\r\n\t\t\ts[1].innerHTML = \"\";\r\n\t\t\ts[2].innerHTML = gantt.templates.lightbox_header(task.start_date, task.end_date, task);\r\n\t\t} else {\r\n\t\t\tlightboxHeader.push(this.templates.task_time(task.start_date, task.end_date, task));\r\n\t\t\tlightboxHeader.push(String(this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70)); //IE6 fix\r\n\t\t\ts[1].innerHTML = this.templates.task_time(task.start_date, task.end_date, task);\r\n\t\t\ts[2].innerHTML = String(this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70); //IE6 fix\r\n\t\t}\r\n\t\ts[1].innerHTML = lightboxHeader[0];\r\n\t\ts[2].innerHTML = lightboxHeader[1];\r\n\r\n\t\tgantt._waiAria.lightboxHeader(box, lightboxHeader.join(\" \"));\r\n\r\n\t\tvar sns = this._get_typed_lightbox_config(this.getLightboxType());\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar section = sns[i];\r\n\r\n\t\t\tif (!this.form_blocks[section.type]) {\r\n\t\t\t\tcontinue;//skip incorrect sections, same check is done during rendering\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar node = gantt._lightbox_root.querySelector(\"#\" + section.id).nextSibling;\r\n\t\t\tvar block = this.form_blocks[section.type];\r\n\t\t\tvar map_to = gantt._resolve_default_mapping(sns[i]);\r\n\t\t\tvar value = this.defined(task[map_to]) ? task[map_to] : section.default_value;\r\n\t\t\tblock.set_value.call(gantt, node, value, task, section);\r\n\r\n\t\t\tif (section.focus)\r\n\t\t\t\tblock.focus.call(gantt, node);\r\n\t\t}\r\n\t\tif (gantt.isTaskExists(data.id)){\r\n\t\t\tgantt._lightbox_id = data.id;\r\n\t\t}\r\n\t};\r\n\tgantt._fill_lightbox = function (id, box) {\r\n\t\tvar task = this.getTask(id);\r\n\t\tthis._set_lightbox_values(task, box);\r\n\t};\r\n\r\n\r\n\tgantt.getLightboxSection = function (name) {\r\n\t\tvar config = this._get_typed_lightbox_config();\r\n\t\tvar i = 0;\r\n\t\tfor (i; i < config.length; i++)\r\n\t\t\tif (config[i].name == name)\r\n\t\t\t\tbreak;\r\n\t\tvar section = config[i];\r\n\t\tif (!section)\r\n\t\t\treturn null;\r\n\r\n\t\tif (!this._lightbox)\r\n\t\t\tthis.getLightbox();\r\n\t\tvar header = gantt._lightbox_root.querySelector(\"#\" + section.id);\r\n\t\tvar node = header.nextSibling;\r\n\r\n\t\tvar result = {\r\n\t\t\tsection: section,\r\n\t\t\theader: header,\r\n\t\t\tnode: node,\r\n\t\t\tgetValue: function (ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].get_value.call(gantt, node, (ev || {}), section);\r\n\t\t\t},\r\n\t\t\tsetValue: function (value, ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].set_value.call(gantt, node, value, (ev || {}), section);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar handler = this._lightbox_methods[\"get_\" + section.type + \"_control\"];\r\n\t\treturn handler ? handler(result) : result;\r\n\t};\r\n\r\n\tgantt._lightbox_methods.get_template_control = function (result) {\r\n\t\tresult.control = result.node;\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_select_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName(\"select\")[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_textarea_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName(\"textarea\")[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_time_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName(\"select\"); // array\r\n\t\treturn result;\r\n\t};\r\n\r\n\r\n\tgantt._init_dnd_events = function () {\r\n\t\tvar eventElement = gantt._lightbox_root;\r\n\t\tthis.event(eventElement, \"mousemove\", gantt._move_while_dnd);\r\n\t\tthis.event(eventElement, \"mouseup\", gantt._finish_dnd);\r\n\t\tthis.event(eventElement, \"touchmove\", function (e){\r\n\t\t\tgantt._move_while_dnd(e.touches[0]);\r\n\t\t});\r\n\t\tthis.event(eventElement, \"touchend\", function (e){\r\n\t\t\tgantt._finish_dnd(e.touches[0]);\r\n\t\t});\r\n\t\t// GS-1952: In Salesforce environment, the lightbox is attached to the Gantt container. \r\n\t\t// So when Gantt is reinitialized, the events are no longer attached to the Gantt container.\r\n\t\t// gantt._init_dnd_events = function () {\r\n\t\t// };\r\n\t};\r\n\tgantt._move_while_dnd = function (event) {\r\n\t\tif (gantt._dnd_start_lb) {\r\n\t\t\tif (!document.gantt_unselectable) {\r\n\t\t\t\tgantt._lightbox_root.className += \" gantt_unselectable\";\r\n\t\t\t\tdocument.gantt_unselectable = true;\r\n\t\t\t}\r\n\t\t\tvar lb = gantt.getLightbox();\r\n\t\t\tvar now = [event.pageX, event.pageY];\r\n\t\t\tlb.style.top = gantt._lb_start[1] + now[1] - gantt._dnd_start_lb[1] + \"px\";\r\n\t\t\tlb.style.left = gantt._lb_start[0] + now[0] - gantt._dnd_start_lb[0] + \"px\";\r\n\t\t}\r\n\t};\r\n\tgantt._ready_to_dnd = function (event) {\r\n\t\tvar lb = gantt.getLightbox();\r\n\t\tgantt._lb_start = [lb.offsetLeft, lb.offsetTop];\r\n\t\tgantt._dnd_start_lb = [event.pageX, event.pageY];\r\n\t};\r\n\tgantt._finish_dnd = function () {\r\n\t\tif (gantt._lb_start) {\r\n\t\t\tgantt._lb_start = gantt._dnd_start_lb = false;\r\n\t\t\tgantt._lightbox_root.className = gantt._lightbox_root.className.replace(\" gantt_unselectable\", \"\");\r\n\t\t\tdocument.gantt_unselectable = false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt._focus = function (node, select) {\r\n\t\tif (node && node.focus) {\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t//do not focus editor, to prevent auto-zoom\r\n\t\t\t} else {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (select && node.select) node.select();\r\n\t\t\t\t\tnode.focus();\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t// silent errors\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.form_blocks = {\r\n\t\tgetTimePicker: function (sns, hidden) {\r\n\t\t\tvar html = \"\";\r\n\t\t\tvar cfg = this.config;\r\n\t\t\tvar i;\r\n\t\t\tvar options;\r\n\t\t\tvar ariaAttrs;\r\n\t\t\tvar readonly;\r\n\t\t\tvar display;\r\n\t\t\tvar settings = {\r\n\t\t\t\tfirst: 0,\r\n\t\t\t\tlast: 24 * 60,\r\n\t\t\t\tdate: this.date.date_part(new Date(gantt._min_date.valueOf())),\r\n\t\t\t\ttimeFormat: getTimeFormat(sns)\r\n\t\t\t};\r\n\r\n\t\t\t// map: default order => real one\r\n\t\t\tsns._time_format_order = { size: 0 };\r\n\r\n\t\t\tif (gantt.config.limit_time_select) {\r\n\t\t\t\tsettings.first = 60 * cfg.first_hour;\r\n\t\t\t\tsettings.last = 60 * cfg.last_hour + 1;\r\n\t\t\t\tsettings.date.setHours(cfg.first_hour);\r\n\t\t\t}\r\n\r\n\t\t\tfor (i = 0; i < settings.timeFormat.length; i++) {\r\n\t\t\t\t// adding spaces between selects\r\n\t\t\t\tif (i > 0) {\r\n\t\t\t\t\thtml += \" \";\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions = getHtmlTimePickerOptions(sns, i, settings);\r\n\r\n\t\t\t\tif (options) {\r\n\t\t\t\t\tariaAttrs = gantt._waiAria.lightboxSelectAttrString(settings.timeFormat[i]);\r\n\t\t\t\t\treadonly = sns.readonly ? \"disabled='disabled'\" : \"\";\r\n\t\t\t\t\tdisplay = hidden ? \" style='display:none' \" : \"\";\r\n\t\t\t\t\thtml += \"<select \" + readonly + display + ariaAttrs + \">\" + options + \"</select>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn html;\r\n\t\t},\r\n\t\tgetTimePickerValue: function (selects, config, offset) {\r\n\t\t\tvar map = config._time_format_order;\r\n\t\t\tvar needSetTime = gantt.defined(map[3]);\r\n\r\n\t\t\tvar time;\r\n\t\t\tvar hours = 0;\r\n\t\t\tvar minutes = 0;\r\n\r\n\t\t\tvar mapOffset = offset || 0;\r\n\r\n\t\t\tif (needSetTime) {\r\n\t\t\t\ttime = parseInt(selects[map[3] + mapOffset].value, 10);\r\n\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\tminutes = time % 60;\r\n\t\t\t}\r\n\t\t\treturn new Date(selects[map[2] + mapOffset].value, selects[map[1] + mapOffset].value, selects[map[0] + mapOffset].value, hours, minutes);\r\n\t\t},\r\n\r\n\t\t_fill_lightbox_select: function (s, i, d, map) {\r\n\t\t\ts[i + map[0]].value = d.getDate();\r\n\t\t\ts[i + map[1]].value = d.getMonth();\r\n\t\t\ts[i + map[2]].value = d.getFullYear();\r\n\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\tvar v = d.getHours() * 60 + d.getMinutes();\r\n\t\t\t\tv = Math.round(v / gantt._get_timepicker_step()) * gantt._get_timepicker_step();\r\n\t\t\t\tvar input = s[i + map[3]];\r\n\t\t\t\tinput.value = v;\r\n\t\t\t\t//in case option not shown\r\n\t\t\t\tinput.setAttribute(\"data-value\", v);\r\n\t\t\t}\r\n\t\t},\r\n\t\ttemplate: new TemplateControl(),\r\n\t\ttextarea: new TextareaControl(),\r\n\t\tselect: new SelectControl(),\r\n\t\ttime: new TimeControl(),\r\n\t\tduration: new DurationControl(),\r\n\t\tparent: new ParentControl(),\r\n\t\tradio: new RadioControl(),\r\n\t\tcheckbox: new CheckboxControl(),\r\n\t\tresources: new ResourcesControl(),\r\n\t\tconstraint: new ConstraintControl(),\r\n\t\tbaselines: new BaselineControl(),\r\n\t\ttypeselect: new TypeselectControl()\r\n\t};\r\n\r\n\tgantt._is_lightbox_timepicker = function () {\r\n\t\tvar s = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\tif (s[i].name == \"time\" && s[i].type == \"time\")\r\n\t\t\t\treturn true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\tgantt._delete_task_confirm = function ({task, message, title, callback, ok}){\r\n\t\tgantt._simple_confirm(message, title, callback, ok);\r\n\t};\r\n\tgantt._delete_link_confirm = function({link, message, title, callback, ok}){\r\n\t\tgantt._simple_confirm(message, title, callback, ok);\r\n\t};\r\n\r\n\tgantt._simple_confirm = function (message, title, callback, ok) {\r\n\t\tif (!message)\r\n\t\t\treturn callback();\r\n\t\tvar opts = { text: message };\r\n\t\tif (title)\r\n\t\t\topts.title = title;\r\n\t\tif (ok) {\r\n\t\t\topts.ok = ok;\r\n\t\t}\r\n\t\tif (callback) {\r\n\t\t\topts.callback = function (result) {\r\n\t\t\t\tif (result)\r\n\t\t\t\t\tcallback();\r\n\t\t\t};\r\n\t\t}\r\n\t\tgantt.confirm(opts);\r\n\t};\r\n\r\n\tfunction _get_type_name(type_value) {\r\n\t\tfor (var i in this.config.types) {\r\n\t\t\tif (this.config.types[i] == type_value) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"task\";\r\n\t}\r\n\r\n\tgantt._get_typed_lightbox_config = function (type) {\r\n\t\tif (type === undefined) {\r\n\t\t\ttype = this.getLightboxType();\r\n\t\t}\r\n\r\n\t\tvar field = _get_type_name.call(this, type);\r\n\r\n\t\tif (gantt.config.lightbox[field + \"_sections\"]) {\r\n\t\t\treturn gantt.config.lightbox[field + \"_sections\"];\r\n\t\t} else {\r\n\t\t\treturn gantt.config.lightbox.sections;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._silent_redraw_lightbox = function (type) {\r\n\t\tvar oldType = this.getLightboxType();\r\n\r\n\t\tif (this.getState().lightbox) {\r\n\t\t\tvar taskId = this.getState().lightbox;\r\n\t\t\tvar formData = this.getLightboxValues(),\r\n\t\t\t\ttask = this.copy(this.getTask(taskId));\r\n\r\n\t\t\tthis.resetLightbox();\r\n\r\n\t\t\tvar updTask = this.mixin(task, formData, true);\r\n\t\t\tvar box = this.getLightbox(type ? type : undefined);\r\n\t\t\tthis._set_lightbox_values(updTask, box);\r\n\t\t\tthis.showCover(box);\r\n\t\t} else {\r\n\t\t\tthis.resetLightbox();\r\n\t\t\tthis.getLightbox(type ? type : undefined);\r\n\t\t}\r\n\t\tthis.callEvent(\"onLightboxChange\", [oldType, this.getLightboxType()]);\r\n\t};\r\n\r\n\tfunction bindLabelsToInputs(sns) {\r\n\t\tvar section;\r\n\t\tvar label;\r\n\t\tvar labelBlock;\r\n\t\tvar inputBlock;\r\n\t\tvar input;\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 0; i < sns.length; i++) {\r\n\t\t\tsection = sns[i];\r\n\t\t\tlabelBlock = gantt._lightbox_root.querySelector(\"#\" + section.id);\r\n\r\n\t\t\tif (!section.id || !labelBlock) continue;\r\n\r\n\t\t\tlabel = labelBlock.querySelector(\"label\");\r\n\t\t\tinputBlock = labelBlock.nextSibling;\r\n\r\n\t\t\tif (!inputBlock) continue;\r\n\r\n\t\t\tinput = inputBlock.querySelector(\"input, select, textarea\");\r\n\t\t\tif (input) {\r\n\t\t\t\tinput.id = input.id || \"input_\" + gantt.uid();\r\n\t\t\t\tsection.inputId = input.id;\r\n\t\t\t\tlabel.setAttribute(\"for\", section.inputId);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getHtmlButtons(buttons, floatRight) {\r\n\t\tvar button;\r\n\t\tvar ariaAttr;\r\n\t\tvar html = \"\";\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 0; i < buttons.length; i++) {\r\n\t\t\t// needed to migrate from 'dhx_something' to 'gantt_something' naming in a lightbox\r\n\t\t\tbutton = gantt.config._migrate_buttons[buttons[i]] ? gantt.config._migrate_buttons[buttons[i]] : buttons[i];\r\n\r\n\t\t\tariaAttr = gantt._waiAria.lightboxButtonAttrString(button);\r\n\t\t\thtml += \"<div \" + ariaAttr + \" class='gantt_btn_set gantt_left_btn_set \" + button + \"_set'\" + \"><div dhx_button='1' data-dhx-button='1' class='\" + button + \"'></div><div>\" + gantt.locale.labels[button] + \"</div></div>\";\r\n\t\t}\r\n\t\treturn html;\r\n\t}\r\n\r\n\tfunction getTimeFormat(sns) {\r\n\t\tvar scale;\r\n\t\tvar unit;\r\n\t\tvar result;\r\n\r\n\t\tif (sns.time_format) return sns.time_format;\r\n\r\n\t\t// default order\r\n\t\tresult = [\"%d\", \"%m\", \"%Y\"];\r\n\t\tscale = gantt.getScale();\r\n\t\tunit = scale ? scale.unit : gantt.config.duration_unit;\r\n\t\tif (helpers.getSecondsInUnit(unit) < helpers.getSecondsInUnit(\"day\")) {\r\n\t\t\tresult.push(\"%H:%i\");\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tfunction getHtmlTimePickerOptions(sns, index, settings) {\r\n\t\tvar range;\r\n\t\tvar offset;\r\n\t\tvar start_year;\r\n\t\tvar end_year;\r\n\t\tvar i;\r\n\t\tvar time;\r\n\t\tvar diff;\r\n\t\tvar tdate;\r\n\t\tvar html = \"\";\r\n\r\n\t\tswitch (settings.timeFormat[index]) {\r\n\t\t\tcase \"%Y\":\r\n\t\t\t\tsns._time_format_order[2] = index;\r\n\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t//year\r\n\r\n\t\t\t\tif (sns.year_range) {\r\n\t\t\t\t\tif (!isNaN(sns.year_range)) {\r\n\t\t\t\t\t\trange = sns.year_range;\r\n\t\t\t\t\t} else if (sns.year_range.push) {\r\n\t\t\t\t\t\t// if\r\n\t\t\t\t\t\tstart_year = sns.year_range[0];\r\n\t\t\t\t\t\tend_year = sns.year_range[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\trange = range || 10;\r\n\t\t\t\toffset = offset || Math.floor(range / 2);\r\n\t\t\t\tstart_year = start_year || settings.date.getFullYear() - offset;\r\n\t\t\t\tend_year = end_year || gantt.getState().max_date.getFullYear() + offset;\r\n\r\n\t\t\t\tfor (i = start_year; i <= end_year; i++)\r\n\t\t\t\t\thtml += \"<option value='\" + (i) + \"'>\" + (i) + \"</option>\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%m\":\r\n\t\t\t\tsns._time_format_order[1] = index;\r\n\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t//month\r\n\t\t\t\tfor (i = 0; i < 12; i++)\r\n\t\t\t\t\thtml += \"<option value='\" + i + \"'>\" + gantt.locale.date.month_full[i] + \"</option>\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%d\":\r\n\t\t\t\tsns._time_format_order[0] = index;\r\n\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t//days\r\n\t\t\t\tfor (i = 1; i < 32; i++)\r\n\t\t\t\t\thtml += \"<option value='\" + i + \"'>\" + i + \"</option>\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%H:%i\":\r\n\t\t\t\t//  var last = 24*60, first = 0;\r\n\t\t\t\tsns._time_format_order[3] = index;\r\n\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t//hours\r\n\t\t\t\ti = settings.first;\r\n\t\t\t\ttdate = settings.date.getDate();\r\n\t\t\t\tsns._time_values = [];\r\n\r\n\t\t\t\twhile (i < settings.last) {\r\n\t\t\t\t\ttime = gantt.templates.time_picker(settings.date);\r\n\t\t\t\t\thtml += \"<option value='\" + i + \"'>\" + time + \"</option>\";\r\n\t\t\t\t\tsns._time_values.push(i);\r\n\t\t\t\t\tsettings.date.setTime(settings.date.valueOf() + gantt._get_timepicker_step() * 60 * 1000);\r\n\t\t\t\t\tdiff = (settings.date.getDate() != tdate) ? 1 : 0; // moved or not to the next day\r\n\t\t\t\t\ti = diff * 24 * 60 + settings.date.getHours() * 60 + settings.date.getMinutes();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn html;\r\n\t}\r\n};","import __extends from \"../../../../utils/extends\";\r\n\r\nimport Super from \"./base_control\";\r\n\r\nexport default function(gantt) {\r\n\tconst _super = Super(gantt);\r\n\r\n\tfunction TemplateControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this; \r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(TemplateControl, _super);\r\n\r\n\r\n\tTemplateControl.prototype.render = function(sns) {\r\n\t\tlet height = sns.height ? `${sns.height}px` : '';\r\n\t\treturn `<div class='gantt_cal_ltext gantt_cal_template gantt_section_${sns.name}' ${height ? `style='height:${height};'` : ''}></div>`;\r\n\t};\r\n\r\n\tTemplateControl.prototype.set_value = function(node, value) {\r\n\t\tnode.innerHTML = value || \"\";\r\n\t};\r\n\r\n\tTemplateControl.prototype.get_value = function(node) {\r\n\t\treturn node.innerHTML || \"\";\r\n\t};\r\n\r\n\tTemplateControl.prototype.focus = function() {};\r\n\r\n\treturn TemplateControl;\r\n};","import __extends from \"../../../../utils/extends\";\r\n\r\nimport Super from \"./base_control\";\r\n\r\nexport default function(gantt) {\r\n\tconst _super = Super(gantt);\r\n\r\n\tfunction TextareaControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(TextareaControl, _super);\r\n\r\n\tTextareaControl.prototype.render = function(sns) {\r\n\t\tconst height = (sns.height || \"130\") + \"px\";\r\n\t\tconst placeholder = sns.placeholder ? `placeholder='${sns.placeholder}'` : \"\";\r\n\t\treturn `<div class='gantt_cal_ltext gantt_section_${sns.name}' style='height:${height};' ${placeholder}><textarea></textarea></div>`;\r\n\t};\r\n\r\n\tTextareaControl.prototype.set_value = function(node, value) {\r\n\t\tgantt.form_blocks.textarea._get_input(node).value = value || \"\";\r\n\t};\r\n\r\n\tTextareaControl.prototype.get_value = function(node) {\r\n\t\treturn gantt.form_blocks.textarea._get_input(node).value;\r\n\t};\r\n\r\n\tTextareaControl.prototype.focus = function(node) {\r\n\t\tvar a = gantt.form_blocks.textarea._get_input(node);\r\n\t\tgantt._focus(a, true);\r\n\t};\r\n\r\n\tTextareaControl.prototype._get_input = function(node) {\r\n\t\treturn node.querySelector(\"textarea\");\r\n\t};\r\n\r\n\treturn TextareaControl;\r\n};","import __extends from \"../../../../utils/extends\";\r\n\r\nimport Super from \"./base_control\";\r\n\r\nexport default function(gantt) {\r\n\tconst _super = Super(gantt);\r\n\r\n\tfunction TimeControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(TimeControl, _super);\r\n\r\n\tTimeControl.prototype.render = function (sns) {\r\n\t\tvar time = gantt.form_blocks.getTimePicker.call(this, sns);\r\n\t\tlet sectionClassName = \"gantt_section_time\";\r\n\t\tif (sns.name !== \"time\"){\r\n\t\t\tsectionClassName += \" gantt_section_\" + sns.name;\r\n\t\t}\r\n\t\tvar html = \"<div style='padding-top:0px;font-size:inherit;text-align:center;' class='\" + sectionClassName + \"'>\";\r\n\t\thtml += time;\r\n\r\n\t\tif (sns.single_date) {\r\n\t\t\ttime = gantt.form_blocks.getTimePicker.call(this, sns, true);\r\n\t\t\thtml += \"<span></span>\";\r\n\t\t} else {\r\n\t\t\thtml += \"<span class='gantt_section_time_spacer'> &nbsp;&ndash;&nbsp; </span>\";\r\n\t\t}\r\n\r\n\t\thtml += time;\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tTimeControl.prototype.set_value = function (node, value, ev, config) {\r\n\t\tvar cfg = config;\r\n\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\tvar map = config._time_format_order;\r\n\r\n\t\tif (cfg.auto_end_date) {\r\n\t\t\tvar _update_lightbox_select = function () {\r\n\t\t\t\tstart_date = new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, 0, 0);\r\n\t\t\t\tend_date = gantt.calculateEndDate({ start_date: start_date, duration: 1, task: ev });\r\n\t\t\t\tgantt.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t\t\t};\r\n\t\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\t\ts[i].onchange = _update_lightbox_select;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar mapping = gantt._resolve_default_mapping(config);\r\n\r\n\t\tif (typeof (mapping) === \"string\") mapping = { start_date: mapping };\r\n\r\n\t\tvar start_date = ev[mapping.start_date] || new Date();\r\n\t\tvar end_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\tstart_date: start_date,\r\n\t\t\tduration: 1,\r\n\t\t\ttask: ev\r\n\t\t});\r\n\r\n\t\tgantt.form_blocks._fill_lightbox_select(s, 0, start_date, map, cfg);\r\n\t\tgantt.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t};\r\n\r\n\tTimeControl.prototype.get_value = function (node, ev, config) {\r\n\t\tvar selects = node.getElementsByTagName(\"select\");\r\n\t\tvar startDate;\r\n\t\tvar map = config._time_format_order;\r\n\t\tfunction _getEndDate(selects, map, startDate) {\r\n\t\t\tvar endDate = gantt.form_blocks.getTimePickerValue(selects, config, map.size);\r\n\t\t\t// GS-1010: We need to add a way to obtain exact end_date for validation\r\n\t\t\tif (endDate <= startDate) {  // when end date seems wrong\r\n\t\t\t\tif (config.autofix_end !== false || config.single_date) { // auto correct it in two cases - when the auto correction is not disabled, or when we have 'single date' control and the user don't have the UI to specify the end date\r\n\t\t\t\t\treturn gantt.date.add(startDate, gantt._get_timepicker_step(), \"minute\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn endDate;\r\n\t\t}\r\n\r\n\t\tstartDate = gantt.form_blocks.getTimePickerValue(selects, config);\r\n\r\n\t\tif (typeof gantt._resolve_default_mapping(config) === \"string\") {\r\n\t\t\treturn startDate;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: startDate,\r\n\t\t\tend_date: _getEndDate(selects, map, startDate)\r\n\t\t};\r\n\t};\r\n\r\n\tTimeControl.prototype.focus = function (node) {\r\n\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t};\r\n\r\n\treturn TimeControl;\r\n};","import * as helpers from \"../../../../utils/helpers\";\r\nimport __extends from \"../../../../utils/extends\";\r\nimport BaseConstrutor from \"./base_control\";\r\n\r\nexport default function(gantt) {\r\n\tvar _super = BaseConstrutor(gantt);\r\n\r\n\tfunction CheckboxControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(CheckboxControl, _super);\r\n\r\n\tCheckboxControl.prototype.render = function(sns) {\r\n\t\tconst height = sns.height ? `height:${sns.height}px;` : '';\r\n\t\tlet html = `<div class='gantt_cal_ltext gantt_cal_lcheckbox gantt_section_${sns.name}' ${height ? `style='${height}'` : ''}>`;\r\n\r\n\t\tif (sns.options && sns.options.length) {\r\n\t\t\tfor (var i = 0; i < sns.options.length; i++) {\r\n\t\t\t\thtml += \"<label><input type='checkbox' value='\" + sns.options[i].key + \"' name='\" + sns.name + \"'>\" + sns.options[i].label + \"</label>\";\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tsns.single_value = true;\r\n\t\t\thtml += \"<label><input type='checkbox' name='\" + sns.name + \"'></label>\";\r\n\t\t}\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tCheckboxControl.prototype.set_value = function(node, value, ev, sns) {\r\n\t\tvar checkboxes = Array.prototype.slice.call(node.querySelectorAll(\"input[type=checkbox]\"));\r\n\r\n\t\tif (!node._dhx_onchange && sns.onchange) {\r\n\t\t\tnode.onchange = sns.onchange;\r\n\t\t\tnode._dhx_onchange = true;\r\n\t\t}\r\n\r\n\t\tif(sns.single_value){\r\n\t\t\tvar box = checkboxes[0];\r\n\t\t\tbox.checked = !!value;\r\n\t\t}else{\r\n\t\t\thelpers.forEach(checkboxes, function(entry) {\r\n\t\t\t\tentry.checked = value ? value.indexOf(entry.value) >= 0 : false;\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tCheckboxControl.prototype.get_value = function(node, task, sns) {\r\n\t\tif(sns.single_value){\r\n\t\t\tvar box = node.querySelector(\"input[type=checkbox]\");\r\n\t\t\treturn box.checked;\r\n\t\t}else{\r\n\t\t\treturn helpers.arrayMap(Array.prototype.slice.call(node.querySelectorAll(\"input[type=checkbox]:checked\")), function(entry) {\r\n\t\t\t\treturn entry.value;\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tCheckboxControl.prototype.focus = function(node) {\r\n\t\tgantt._focus(node.querySelector(\"input[type=checkbox]\"));\r\n\t};\r\n\r\n\treturn CheckboxControl;\r\n};","import __extends from \"../../../../utils/extends\";\r\nimport Super from \"./base_control\";\r\n\r\nexport default function(gantt) {\r\n\tconst _super = Super(gantt);\r\n\r\n\tfunction RadioControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(RadioControl, _super);\r\n\r\n\tRadioControl.prototype.render = function(sns) {\r\n\t\tconst height = sns.height ? `${sns.height}px` : '';\r\n\t\tlet html = `<div class='gantt_cal_ltext gantt_cal_lradio gantt_section_${sns.name}' ${height ? `style='height:${height};'` : ''}>`;\r\n\r\n\t\tif (sns.options && sns.options.length) {\r\n\t\t\tfor (var i = 0; i < sns.options.length; i++) {\r\n\t\t\t\thtml += \"<label><input type='radio' value='\" + sns.options[i].key + \"' name='\" + sns.name + \"'>\" + sns.options[i].label + \"</label>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tRadioControl.prototype.set_value = function(node, value, ev, sns) {\r\n\t\tvar radio;\r\n\r\n\t\tif (!sns.options || !sns.options.length) return;\r\n\r\n\t\tradio = node.querySelector(\"input[type=radio][value='\" + value + \"']\") ||\r\n\t\t\t\tnode.querySelector(\"input[type=radio][value='\" + sns.default_value + \"']\");\r\n\r\n\t\tif (!radio) return;\r\n\r\n\t\tif (!node._dhx_onchange && sns.onchange) {\r\n\t\t\tnode.onchange = sns.onchange;\r\n\t\t\tnode._dhx_onchange = true;\r\n\t\t}\r\n\r\n\t\tradio.checked = true;\r\n\t};\r\n\r\n\tRadioControl.prototype.get_value = function(node, ev) {\r\n\t\tvar result = node.querySelector(\"input[type=radio]:checked\");\r\n\r\n\t\treturn result ? result.value : \"\";\r\n\t};\r\n\r\n\tRadioControl.prototype.focus = function(node) {\r\n\t\tgantt._focus(node.querySelector(\"input[type=radio]\"));\r\n\t};\r\n\r\n\treturn RadioControl;\r\n};","import __extends from \"../../../../utils/extends\";\r\n\r\nimport DurationFormatterNumeric from  \"../../../common/duration_formatter_numeric\";\r\nimport BaseConstrutor from \"./base_control\";\r\n\r\nexport default function(gantt) {\r\n\tvar _super = BaseConstrutor(gantt);\r\n\r\n\tfunction DurationControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this; \r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\tfunction getFormatter(config) {\r\n\t\treturn config.formatter || new DurationFormatterNumeric();\r\n\t}\r\n\r\n\t__extends(DurationControl, _super);\r\n\r\n\tDurationControl.prototype.render = function(sns) {\r\n\t\tvar time = \"<div class='gantt_time_selects'>\" + gantt.form_blocks.getTimePicker.call(this, sns) + \"</div>\";\r\n\t\tvar label = \" \"+ gantt.locale.labels[gantt.config.duration_unit + \"s\"] +\" \";\r\n\t\tvar singleDate = sns.single_date ? \" style='display:none'\" : \"\";\r\n\t\tvar readonly = sns.readonly ? \" disabled='disabled'\" : \"\";\r\n\t\tvar ariaAttr = gantt._waiAria.lightboxDurationInputAttrString(sns);\r\n\r\n\t\tvar durationInputClass = \"gantt_duration_value\";\r\n\t\tif(sns.formatter) {\r\n\t\t\tlabel = \"\";\r\n\t\t\tdurationInputClass += \" gantt_duration_value_formatted\" ;\r\n\t\t}\r\n\r\n\t\tvar duration = \"<div class='gantt_duration' \" + singleDate + \">\" +\r\n\t\t\"<div class='gantt_duration_inputs'>\" +\r\n\t\t\t\"<input type='button' class='gantt_duration_dec' value='−'\" + readonly + \">\" +\r\n\t\t\t\"<input type='text' value='5days' class='\"+durationInputClass+\"'\" + readonly + \" \" + ariaAttr + \">\" +\r\n\t\t\t\"<input type='button' class='gantt_duration_inc' value='+'\" + readonly + \">\"+\r\n\t\t\t\"</div>\" +\r\n\t\t\t\"<div class='gantt_duration_end_date'>\"+label+\"<span></span></div>\" +\r\n\t\t\t\"</div>\" +\r\n\t\t\t\"</div>\";\r\n\t\tlet sectionClassName = \"gantt_section_time gantt_section_duration\";\r\n\t\tif (sns.name !== \"time\"){\r\n\t\t\tsectionClassName += \" gantt_section_\" + sns.name;\r\n\t\t}\t\r\n\t\tvar html = \"<div style='padding-top:0px;font-size:inherit;' class='\" + sectionClassName + \"'>\" + time + \" \" + duration + \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tDurationControl.prototype.set_value = function(node, value, ev, config) {\r\n\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\tvar inps = node.getElementsByTagName(\"input\");\r\n\t\tvar duration = inps[1];\r\n\t\tvar btns = [inps[0], inps[2]];\r\n\t\tvar endspan = node.getElementsByTagName(\"span\")[0];\r\n\t\tvar map = config._time_format_order;\r\n\t\tvar mapping;\r\n\t\tvar start_date;\r\n\t\tvar end_date;\r\n\t\tvar duration_val;\r\n\r\n\t\tfunction _calc_date() {\r\n\t\t\tvar start_date = _getStartDate.call(gantt, node, config);\r\n\t\t\tvar duration = _getDuration.call(gantt, node, config);\r\n\t\t\tvar end_date = gantt.calculateEndDate({start_date: start_date, duration: duration, task: ev});\r\n\r\n\t\t\tvar template = gantt.templates.task_end_date || gantt.templates.task_date;\r\n\t\t\tendspan.innerHTML = template(end_date);\r\n\t\t}\r\n\r\n\t\tfunction _change_duration(step) {\r\n\t\t\tvar value = duration.value;\r\n\r\n\t\t\tvalue = getFormatter(config).parse(value);\r\n\t\t\tif (window.isNaN(value))\r\n\t\t\t\tvalue = 0;\r\n\t\t\tvalue += step;\r\n\t\t\tif (value < 1) value = 1;\r\n\t\t\tduration.value = getFormatter(config).format(value);\r\n\t\t\t_calc_date();\r\n\t\t}\r\n\r\n\t\tbtns[0].onclick = gantt.bind(function() {\r\n\t\t\t_change_duration(-1 * gantt.config.duration_step);\r\n\t\t}, this);\r\n\t\tbtns[1].onclick = gantt.bind(function() {\r\n\t\t\t_change_duration(1 * gantt.config.duration_step);\r\n\t\t}, this);\r\n\t\ts[0].onchange = _calc_date;\r\n\t\ts[1].onchange = _calc_date;\r\n\t\ts[2].onchange = _calc_date;\r\n\t\tif (s[3]) s[3].onchange = _calc_date;\r\n\r\n\t\tduration.onkeydown = gantt.bind(function(e) {\r\n\t\t\tvar code; \r\n\r\n\t\t\te = e || window.event;\r\n\t\t\tcode = (e.charCode || e.keyCode || e.which);\r\n\t\t\t\r\n\t\t\tif (code == gantt.constants.KEY_CODES.DOWN) {\r\n\t\t\t\t_change_duration(-1 * gantt.config.duration_step);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (code == gantt.constants.KEY_CODES.UP) {\r\n\t\t\t\t_change_duration(1 * gantt.config.duration_step);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\twindow.setTimeout(_calc_date, 1);\r\n\t\t}, this);\r\n\r\n\t\tduration.onchange = gantt.bind(_calc_date, this);\r\n\r\n\t\tmapping = gantt._resolve_default_mapping(config);\r\n\t\tif (typeof(mapping) === \"string\") mapping = {start_date: mapping};\r\n\r\n\t\tstart_date = ev[mapping.start_date] || new Date();\r\n\t\tend_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\tstart_date: start_date,\r\n\t\t\tduration: 1,\r\n\t\t\ttask: ev\r\n\t\t});\r\n\t\tduration_val = Math.round(ev[mapping.duration]) || gantt.calculateDuration({\r\n\t\t\tstart_date: start_date,\r\n\t\t\tend_date: end_date,\r\n\t\t\ttask: ev\r\n\t\t});\r\n\t\tduration_val = getFormatter(config).format(duration_val);\r\n\r\n\t\tgantt.form_blocks._fill_lightbox_select(s, 0, start_date, map, config);\r\n\t\tduration.value = duration_val;\r\n\t\t_calc_date();\r\n\t};\r\n\r\n\tDurationControl.prototype.get_value = function(node, ev, config) {\r\n\t\tvar startDate = _getStartDate(node, config);\r\n\t\tvar duration = _getDuration(node, config);\r\n\t\tvar endDate = gantt.calculateEndDate({start_date: startDate, duration: duration, task: ev});\r\n\r\n\t\tif (typeof gantt._resolve_default_mapping(config) == \"string\") {\r\n\t\t\treturn startDate;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: startDate,\r\n\t\t\tend_date: endDate,\r\n\t\t\tduration: duration\r\n\t\t};\r\n\t};\r\n\r\n\tDurationControl.prototype.focus = function(node) {\r\n\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t};\r\n\r\n\r\n\tfunction _getStartDate(node, config) {\r\n\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\tvar map = config._time_format_order;\r\n\t\tvar hours = 0;\r\n\t\tvar minutes = 0;\r\n\r\n\t\tif (gantt.defined(map[3])) {\r\n\t\t\tvar input = s[map[3]];\r\n\t\t\tvar time = parseInt(input.value, 10);\r\n\t\t\tif (isNaN(time) && input.hasAttribute(\"data-value\")) {\r\n\t\t\t\ttime = parseInt(input.getAttribute(\"data-value\"), 10);\r\n\t\t\t}\r\n\r\n\t\t\thours = Math.floor(time / 60);\r\n\t\t\tminutes = time % 60;\r\n\t\t}\r\n\t\treturn new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, hours, minutes);\r\n\t}\r\n\r\n\tfunction _getDuration(node, config) {\r\n\t\tvar duration = node.getElementsByTagName(\"input\")[1];\r\n\r\n\t\tduration = getFormatter(config).parse(duration.value);\r\n\t\tif (!duration || window.isNaN(duration)) duration = 1;\r\n\t\tif (duration < 0) duration *= -1;\r\n\t\treturn duration;\r\n\t}\r\n\r\n\treturn DurationControl; \r\n};","import __extends from \"../../../../utils/extends\";\r\nimport htmlHelpers from \"../../utils/html_helpers\";\r\nimport BaseConstrutor from \"./base_control\";\r\n\r\nexport default function(gantt) {\r\n\tvar _super = BaseConstrutor(gantt);\r\n\r\n\tfunction ConstraintControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(ConstraintControl, _super);\r\n\r\n\tfunction isNonTimedConstraint(value) {\r\n\t\tif (!value || value === gantt.config.constraint_types.ASAP || value === gantt.config.constraint_types.ALAP) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction toggleTimeSelect(timeSelects, typeValue) {\r\n\t\tvar isNonTimed = isNonTimedConstraint(typeValue);\r\n\t\tfor (var i = 0; i < timeSelects.length; i++) {\r\n\t\t\ttimeSelects[i].disabled = isNonTimed;\r\n\t\t}\r\n\t}\r\n\r\n\tConstraintControl.prototype.render = function (sns) {\r\n\t\tconst height = sns.height ? `height:${sns.height}px;` : '';\r\n\t\tlet html = `<div class='gantt_cal_ltext gantt_section_${sns.name}' ${height ? `style='${height}'` : ''}>`;\r\n\r\n\t\tvar options = [];\r\n\t\tfor (var i in gantt.config.constraint_types) {\r\n\t\t\toptions.push({ key: gantt.config.constraint_types[i], label: gantt.locale.labels[gantt.config.constraint_types[i]] });\r\n\t\t}\r\n\r\n\t\tsns.options = sns.options || options;\r\n\r\n\t\thtml += \"<span data-constraint-type-select>\" + htmlHelpers.getHtmlSelect(sns.options, [{ key: \"data-type\", value: \"constraint-type\" }]) + \"</span>\";\r\n\r\n\t\tvar timeLabel = gantt.locale.labels[\"constraint_date\"] || \"Constraint date\";\r\n\t\thtml += \"<label data-constraint-time-select>\" + timeLabel + \": \" + gantt.form_blocks.getTimePicker.call(this, sns) + \"</label>\";\r\n\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tConstraintControl.prototype.set_value = function (node, value, task, config) {\r\n\t\tvar typeSelect = node.querySelector(\"[data-constraint-type-select] select\");\r\n\t\tvar timeSelects = node.querySelectorAll(\"[data-constraint-time-select] select\");\r\n\t\tvar map = config._time_format_order;\r\n\r\n\t\tvar mapping = gantt._resolve_default_mapping(config);\r\n\r\n\t\tif (!typeSelect._eventsInitialized) {\r\n\t\t\ttypeSelect.addEventListener(\"change\", function (e) {\r\n\t\t\t\ttoggleTimeSelect(timeSelects, e.target.value);\r\n\t\t\t});\r\n\t\t\ttypeSelect._eventsInitialized = true;\r\n\t\t}\r\n\r\n\t\tvar constraintDate = task[mapping.constraint_date] || new Date();\r\n\t\tgantt.form_blocks._fill_lightbox_select(timeSelects, 0, constraintDate, map, config);\r\n\r\n\t\tvar constraintType = task[mapping.constraint_type] || gantt.getConstraintType(task);\r\n\t\ttypeSelect.value = constraintType;\r\n\t\ttoggleTimeSelect(timeSelects, constraintType);\r\n\t};\r\n\r\n\tConstraintControl.prototype.get_value = function (node, task, config) {\r\n\t\tvar typeSelect = node.querySelector(\"[data-constraint-type-select] select\");\r\n\t\tvar timeSelects = node.querySelectorAll(\"[data-constraint-time-select] select\");\r\n\r\n\t\tvar constraintType = typeSelect.value;\r\n\t\tvar constraintDate = null;\r\n\t\tif (!isNonTimedConstraint(constraintType)) {\r\n\t\t\tconstraintDate = gantt.form_blocks.getTimePickerValue(timeSelects, config);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tconstraint_type: constraintType,\r\n\t\t\tconstraint_date: constraintDate\r\n\t\t};\r\n\t};\r\n\r\n\tConstraintControl.prototype.focus = function (node) {\r\n\t\tgantt._focus(node.querySelector(\"select\"));\r\n\t};\r\n\r\n\treturn ConstraintControl;\r\n};","import __extends from \"../../../../utils/extends\";\r\n\r\nimport Super from \"./select_control\";\r\n\r\nexport default function(gantt) {\r\n\tconst _super = Super(gantt);\r\n\r\n\tfunction TypeselectControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(TypeselectControl, _super);\r\n\r\n\tTypeselectControl.prototype.render = function(sns) {\r\n\t\tvar types = gantt.config.types,\r\n\t\t\tlocale = gantt.locale.labels,\r\n\t\t\toptions = [];\r\n\r\n\t\tvar filter = sns.filter || function (typeKey, typeValue) {\r\n\t\t\tif (!types.placeholder || typeValue !== types.placeholder) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t};\r\n\t\tfor (var i in types) {\r\n\t\t\tif (!filter(i, types[i]) === false) {\r\n\t\t\t\toptions.push({ key: types[i], label: locale[\"type_\" + i] });\r\n\t\t\t}\r\n\t\t}\r\n\t\tsns.options = options;\r\n\r\n\t\tvar oldOnChange = sns.onchange;\r\n\t\tsns.onchange = function () {\r\n\t\t\tgantt._lightbox_current_type = this.value;\r\n\t\t\tgantt.changeLightboxType(this.value);\r\n\t\t\tif (typeof oldOnChange == 'function') {\r\n\t\t\t\toldOnChange.apply(this, arguments);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn _super.prototype.render.apply(this, arguments);\r\n\t};\r\n\r\n\treturn TypeselectControl;\r\n};\r\n","\r\nimport __extends from \"../../../../utils/extends\";\r\nimport DurationFormatterNumeric from \"../../../common/duration_formatter_numeric\";\r\nimport BaseConstrutor from \"./base_control\";\r\n\r\nexport default function(gantt) {\r\n\tvar _super = BaseConstrutor(gantt);\r\n\r\n\tfunction DurationControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this; \r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\tfunction getFormatter(config) {\r\n\t\treturn config.formatter || new DurationFormatterNumeric();\r\n\t}\r\n\r\n\tfunction _generateBaselineRow (node, baseline, task, config){\r\n\t\tconst time = \"<div class='gantt_time_selects'>\" + gantt.form_blocks.getTimePicker.call(gantt, config) + \"</div>\";\r\n\t\tlet durationLabel = \" \"+ gantt.locale.labels[gantt.config.duration_unit + \"s\"] +\" \";\r\n\t\tconst singleDate = config.single_date ? \" style='display:none'\" : \"\";\r\n\t\tconst readonly = config.readonly ? \" disabled='disabled'\" : \"\";\r\n\t\tconst ariaAttr = gantt._waiAria.lightboxDurationInputAttrString(config);\r\n\t\tconst deleteLabel = gantt.locale.labels.baselines_remove_button;\r\n\r\n\t\tlet durationInputClass = \"gantt_duration_value\";\r\n\t\tif(config.formatter) {\r\n\t\t\tdurationLabel = \"\";\r\n\t\t\tdurationInputClass += \" gantt_duration_value_formatted\";\r\n\t\t}\r\n\r\n\t\tconst durationEl = \"<div class='gantt_duration' \" + singleDate + \">\" +\r\n\t\t\"<div class='gantt_duration_inputs'>\" +\r\n\t\t\t\"<input type='button' class='gantt_duration_dec' value='−'\" + readonly + \">\" +\r\n\t\t\t\"<input type='text' value='5days' class='\"+durationInputClass+\"'\" + readonly + \" \" + ariaAttr + \">\" +\r\n\t\t\t\"<input type='button' class='gantt_duration_inc' value='+'\" + readonly + \">\"+\r\n\t\t\t\"</div>\" +\r\n\t\t\t\"<div class='gantt_duration_end_date'>\"+durationLabel+\"<span></span></div>\" +\r\n\t\t\t\"</div>\" +\r\n\t\t\t\"</div>\";\r\n\r\n\t\tconst deleteButton = `<div><div class='baseline_delete_button gantt_custom_button'>${deleteLabel}</div></div>`;\r\n\r\n\t\tconst baselineRow = document.createElement(\"div\");\r\n\t\tbaselineRow.className = \"gantt_section_time gantt_section_duration\";\r\n\t\tbaselineRow.setAttribute(\"data-baseline-id\", baseline.id);\r\n\t\tbaselineRow.innerHTML = time + durationEl + deleteButton + \"<br>\";\r\n\t\tnode.appendChild(baselineRow);\r\n\r\n\t\tvar s = baselineRow.getElementsByTagName(\"select\");\r\n\t\tvar inps = baselineRow.getElementsByTagName(\"input\");\r\n\t\tvar duration = inps[1];\r\n\t\tvar btns = [inps[0], inps[2]];\r\n\t\tvar endspan = baselineRow.getElementsByTagName(\"span\")[0];\r\n\t\tvar map = config._time_format_order;\r\n\t\tvar mapping;\r\n\t\tvar start_date;\r\n\t\tvar end_date;\r\n\t\tvar duration_val;\r\n\r\n\t\tconst deleteEl = baselineRow.querySelector(\".baseline_delete_button\");\r\n\t\tdeleteEl.onclick = function(e){\r\n\t\t\tconst section = baselineRow.parentNode;\r\n\t\t\tbaselineRow.innerHTML = \"\";\r\n\t\t\tbaselineRow.remove();\r\n\t\t\tif (section.innerHTML === \"\"){\r\n\t\t\t\tsection.innerHTML = gantt.locale.labels.baselines_section_placeholder;\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\r\n\t\tfunction _calc_date() {\r\n\t\t\tvar start_date = _getStartDate.call(gantt, baselineRow, config);\r\n\t\t\tvar duration = _getDuration.call(gantt, baselineRow, config);\r\n\t\t\tvar end_date = gantt.calculateEndDate({start_date: start_date, duration: duration, task: task});\r\n\r\n\t\t\tvar template = gantt.templates.task_end_date || gantt.templates.task_date;\r\n\t\t\tendspan.innerHTML = template(end_date);\r\n\t\t}\r\n\r\n\t\tfunction _change_duration(step) {\r\n\t\t\tvar value = duration.value;\r\n\r\n\t\t\tvalue = getFormatter(config).parse(value);\r\n\t\t\tif (window.isNaN(value))\r\n\t\t\t\tvalue = 0;\r\n\t\t\tvalue += step;\r\n\t\t\tif (value < 1) value = 1;\r\n\t\t\tduration.value = getFormatter(config).format(value);\r\n\t\t\t_calc_date();\r\n\t\t}\r\n\r\n\t\tbtns[0].onclick = gantt.bind(function() {\r\n\t\t\t_change_duration(-1 * gantt.config.duration_step);\r\n\t\t}, gantt);\r\n\t\tbtns[1].onclick = gantt.bind(function() {\r\n\t\t\t_change_duration(1 * gantt.config.duration_step);\r\n\t\t}, gantt);\r\n\t\ts[0].onchange = _calc_date;\r\n\t\ts[1].onchange = _calc_date;\r\n\t\ts[2].onchange = _calc_date;\r\n\t\tif (s[3]) s[3].onchange = _calc_date;\r\n\r\n\t\tduration.onkeydown = gantt.bind(function(e) {\r\n\t\t\tvar code; \r\n\r\n\t\t\te = e || window.event;\r\n\t\t\tcode = (e.charCode || e.keyCode || e.which);\r\n\t\t\t\r\n\t\t\tif (code == gantt.constants.KEY_CODES.DOWN) {\r\n\t\t\t\t_change_duration(-1 * gantt.config.duration_step);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (code == gantt.constants.KEY_CODES.UP) {\r\n\t\t\t\t_change_duration(1 * gantt.config.duration_step);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\twindow.setTimeout(_calc_date, 1);\r\n\t\t}, gantt);\r\n\r\n\t\tduration.onchange = gantt.bind(_calc_date, gantt);\r\n\r\n\t\tmapping = gantt._resolve_default_mapping(config);\r\n\t\tif (typeof(mapping) === \"string\") mapping = {start_date: mapping};\r\n\r\n\t\tstart_date = baseline.start_date || new Date();\r\n\t\tend_date = baseline.end_date || gantt.calculateEndDate({\r\n\t\t\tstart_date: start_date,\r\n\t\t\tduration: 1,\r\n\t\t\ttask\r\n\t\t});\r\n\t\tduration_val = gantt.calculateDuration({\r\n\t\t\tstart_date: start_date,\r\n\t\t\tend_date: end_date,\r\n\t\t\ttask\r\n\t\t});\r\n\t\tduration_val = getFormatter(config).format(duration_val);\r\n\r\n\t\tgantt.form_blocks._fill_lightbox_select(s, 0, start_date, map, config);\r\n\t\tduration.value = duration_val;\r\n\t\t_calc_date();\r\n\t}\r\n\r\n\t__extends(DurationControl, _super);\r\n\r\n\tDurationControl.prototype.render = function(sns) {\r\n\t\tconst baselineSection = `<div style='height: ${sns.height || 100}px; padding-top:0px; font-size:inherit;' class='gantt_section_baselines'></div>`;\r\n\t\treturn baselineSection;\r\n\t};\r\n\r\n\tDurationControl.prototype.set_value = function(node, value, task, config) {\r\n\t\tif (task.baselines){\r\n\t\t\tnode.innerHTML = \"\";\r\n\r\n\t\t\ttask.baselines.forEach((baseline)=>{\r\n\t\t\t\t_generateBaselineRow(node, baseline, task, config);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tnode.innerHTML = gantt.locale.labels.baselines_section_placeholder;\r\n\t\t}\t\t\r\n\r\n\t};\r\n\r\n\tDurationControl.prototype.get_value = function(node, task, config) {\r\n\t\tconst baselines = [];\r\n\t\tconst baselineRows = node.querySelectorAll(`[data-baseline-id]`);\r\n\t\tbaselineRows.forEach((baselineNode)=>{\r\n\t\t\tconst baselineId = baselineNode.dataset.baselineId;\r\n\t\t\tconst baselineStore = gantt.getDatastore(\"baselines\");\r\n\t\t\tlet baseline = baselineStore.getItem(baselineId);\r\n\t\t\tlet updatedBaseline;\r\n\t\t\tif (baseline){\r\n\t\t\t\tupdatedBaseline = gantt.copy(baseline);\r\n\t\t\t} else {\r\n\t\t\t\tupdatedBaseline = {\r\n\t\t\t\t\tid: gantt.uid(),\r\n\t\t\t\t\ttask_id: task.id,\r\n\t\t\t\t\ttext: \"Baseline 1\"\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tupdatedBaseline.start_date = _getStartDate(baselineNode, config);\r\n\t\t\tupdatedBaseline.duration = _getDuration(baselineNode, config);\r\n\t\t\tupdatedBaseline.end_date = gantt.calculateEndDate({start_date: updatedBaseline.start_date, duration: updatedBaseline.duration, task});\r\n\r\n\t\t\tbaselines.push(updatedBaseline);\r\n\t\t});\r\n\r\n\t\treturn baselines;\r\n\t};\r\n\r\n\tDurationControl.prototype.button_click = function (index, el, section, container) {\r\n\t\tif (gantt.callEvent(\"onSectionButton\", [gantt._lightbox_id, section]) === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (el.closest(\".gantt_custom_button.gantt_remove_baselines\")){\r\n\t\t\tcontainer.innerHTML = gantt.locale.labels.baselines_section_placeholder;\r\n\t\t}\r\n\t\tif (el.closest(\".gantt_custom_button.gantt_add_baselines\")){\r\n\t\t\tif (container.innerHTML == gantt.locale.labels.baselines_section_placeholder){\r\n\t\t\t\tcontainer.innerHTML = \"\";\r\n\t\t\t}\r\n\t\t\tconst task = gantt.getTask(gantt._lightbox_id);\r\n\t\t\tconst baseline = {\r\n\t\t\t\tid: gantt.uid(),\r\n\t\t\t\ttask_id: task.id,\r\n\t\t\t\ttext: \"Baseline 1\",\r\n\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\tend_date: task.end_date\r\n\t\t\t};\r\n\t\t\tconst config = gantt._get_typed_lightbox_config()[index];\r\n\t\t\t_generateBaselineRow(container, baseline, task, config);\r\n\t\t}\r\n\t};\r\n\r\n\tDurationControl.prototype.focus = function(node) {\r\n\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t};\r\n\r\n\r\n\tfunction _getStartDate(node, config) {\r\n\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\tvar map = config._time_format_order;\r\n\t\tvar hours = 0;\r\n\t\tvar minutes = 0;\r\n\r\n\t\tif (gantt.defined(map[3])) {\r\n\t\t\tvar input = s[map[3]];\r\n\t\t\tvar time = parseInt(input.value, 10);\r\n\t\t\tif (isNaN(time) && input.hasAttribute(\"data-value\")) {\r\n\t\t\t\ttime = parseInt(input.getAttribute(\"data-value\"), 10);\r\n\t\t\t}\r\n\r\n\t\t\thours = Math.floor(time / 60);\r\n\t\t\tminutes = time % 60;\r\n\t\t}\r\n\t\treturn new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, hours, minutes);\r\n\t}\r\n\r\n\tfunction _getDuration(node, config) {\r\n\t\tvar duration = node.getElementsByTagName(\"input\")[1];\r\n\r\n\t\tduration = getFormatter(config).parse(duration.value);\r\n\t\tif (!duration || window.isNaN(duration)) duration = 1;\r\n\t\tif (duration < 0) duration *= -1;\r\n\t\treturn duration;\r\n\t}\r\n\r\n\treturn DurationControl; \r\n};","import * as utils from \"../utils/utils\";\r\nimport env from \"../utils/env\";\r\nimport isHeadless from \"../utils/is_headless\";\r\nimport * as domHelpers from \"./ui/utils/dom_helpers\";\r\nimport * as codeHelpers from \"../utils/helpers\";\r\nimport domEventScope from \"./ui/utils/dom_event_scope\";\r\nimport messages from \"./ui/message\";\r\nimport ui from \"./ui/index\";\r\nimport createLayoutFacade from \"./facades/layout\";\r\nimport taskLayers from \"./data_task_layers\";\r\n\r\nimport skin from \"./ui/skin\";\r\nimport skyblue from \"../css/skins/skyblue\";\r\nimport meadow from \"../css/skins/meadow\";\r\nimport terrace from \"../css/skins/terrace\";\r\nimport broadway from \"../css/skins/broadway\";\r\nimport material from \"../css/skins/material\";\r\nimport dark from \"../css/skins/dark\";\r\nimport contrast_black from \"../css/skins/contrast_black\";\r\nimport contrast_white from \"../css/skins/contrast_white\";\r\nimport plugins from \"./ui/plugins\";\r\nimport touch from \"./ui/touch\";\r\nimport lightbox from \"./ui/lightbox\";\r\nimport lightbox_optional_time from \"./ui/lightbox/lightbox_optional_time\";\r\nimport wai_aria from \"./ui/wai_aria\";\r\n\r\n\r\nexport default function(gantt) {\r\n\r\n\tif(!env.isNode){\r\n\r\n\t\tgantt.utils = {\r\n\t\t\tarrayFind: codeHelpers.arrayFind,\r\n\t\t\tdom: domHelpers\r\n\t\t};\r\n\r\n\t\tvar domEvents = domEventScope();\r\n\t\tgantt.event = domEvents.attach;\r\n\t\tgantt.eventRemove = domEvents.detach;\r\n\t\tgantt._eventRemoveAll = domEvents.detachAll;\r\n\t\tgantt._createDomEventScope = domEvents.extend;\r\n\r\n\t\tutils.mixin(gantt, messages(gantt));\r\n\t\tvar uiApi = ui.init(gantt);\r\n\t\tgantt.$ui = uiApi.factory;\r\n\t\tgantt.$ui.layers = uiApi.render;\r\n\t\tgantt.$mouseEvents = uiApi.mouseEvents;\r\n\t\tgantt.$services.setService(\"mouseEvents\", function () {\r\n\t\t\treturn gantt.$mouseEvents;\r\n\t\t});\r\n\t\tgantt.mixin(gantt, uiApi.layersApi);\r\n\r\n\t\ttaskLayers(gantt);\r\n\r\n\t\tgantt.$services.setService(\"layers\", function () {\r\n\t\t\treturn uiApi.layersService;\r\n\t\t});\r\n\r\n\t\tgantt.mixin(gantt, createLayoutFacade());\r\n\t\tskin(gantt);\r\n\t\tskyblue(gantt);\r\n\t\tdark(gantt);\r\n\t\tmeadow(gantt);\r\n\t\tterrace(gantt);\r\n\t\tbroadway(gantt);\r\n\t\tmaterial(gantt);\r\n\t\tcontrast_black(gantt);\r\n\t\tcontrast_white(gantt);\r\n\t\tplugins(gantt);\r\n\t\ttouch(gantt);\r\n\t\tlightbox(gantt);\r\n\t\tlightbox_optional_time(gantt);\r\n\t\twai_aria(gantt);\r\n\r\n\t\tgantt.locate = function(e) {\r\n\t\t\tvar trg = domHelpers.getTargetNode(e);\r\n\r\n\t\t\t// ignore empty rows/cells of the timeline\r\n\t\t\tif(domHelpers.closest(trg, \".gantt_task_row\")){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tvar targetAttribute = arguments[1] || this.config.task_attribute;\r\n\r\n\t\t\tvar node = domHelpers.locateAttribute(trg, targetAttribute);\r\n\t\t\tif(node){\r\n\t\t\t\treturn node.getAttribute(targetAttribute);\r\n\t\t\t}else{\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tgantt._locate_css = function(e, classname, strict){\r\n\t\t\treturn domHelpers.locateClassName(e, classname, strict);\r\n\t\t};\r\n\r\n\t\tgantt._locateHTML = function(e, attribute) {\r\n\t\t\treturn domHelpers.locateAttribute(e, attribute || this.config.task_attribute);\r\n\t\t};\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onParse\", function(){\r\n\t\tif(!isHeadless(gantt)){\r\n\t\t\tgantt.attachEvent(\"onGanttRender\", function(){\r\n\t\t\t\tif(gantt.config.initial_scroll){\r\n\t\t\t\t\tvar firstTask = gantt.getTaskByIndex(0);\r\n\t\t\t\t\tvar id = firstTask ? firstTask.id : gantt.config.root_id;\r\n\t\t\t\t\t// GS-1450. Don't scroll to the task if there is no timeline\r\n\t\t\t\t\tif(gantt.isTaskExists(id) && gantt.$task && gantt.utils.dom.isChildOf(gantt.$task, gantt.$container)){\r\n\t\t\t\t\t\tgantt.showTask(id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, {once: true});\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onBeforeGanttReady\", function(){\r\n\t\tif (!this.config.scroll_size)\r\n\t\t\tthis.config.scroll_size = domHelpers.getScrollSize() || 15;\r\n\r\n\t\tif(!isHeadless(gantt)){\r\n\t\t\t// detach listeners before clearing old DOM, possible IE errors when accessing detached nodes\r\n\t\t\tthis._eventRemoveAll();\r\n\t\t\tthis.$mouseEvents.reset();\r\n\r\n\t\t\tthis.resetLightbox();\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t// GS-1261: scroll the views to the right side when RTL is enabled\r\n\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\t\tif(!isHeadless(gantt) && gantt.config.rtl){\r\n\t\t\tgantt.$layout.getCellsByType(\"viewCell\").forEach(function(cell){ \r\n\t\t\t\tvar attachedScrollbar = cell.$config.scrollX;\r\n\t\t\t\tif (!attachedScrollbar) return;\r\n\r\n\t\t\t\tvar scrollbar = gantt.$ui.getView(attachedScrollbar);\r\n\t\t\t\tif (scrollbar) scrollbar.scrollTo(scrollbar.$config.scrollSize,0);\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\t// GS-1649: check if extensions are connected via files\r\n\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\t\tif(!isHeadless(gantt)){\r\n\r\n\t\t\tvar activePlugins = gantt.plugins();\r\n\r\n\t\t\tvar availablePlugins = {\r\n\t\t\t\tauto_scheduling: gantt.autoSchedule,\r\n\t\t\t\tclick_drag: gantt.ext.clickDrag,\r\n\t\t\t\tcritical_path: gantt.isCriticalTask,\r\n\t\t\t\tdrag_timeline: gantt.ext.dragTimeline,\r\n\t\t\t\texport_api: gantt.exportToPDF,\r\n\t\t\t\tfullscreen: gantt.ext.fullscreen,\r\n\t\t\t\tgrouping: gantt.groupBy,\r\n\t\t\t\tkeyboard_navigation: gantt.ext.keyboardNavigation,\r\n\t\t\t\tmarker: gantt.addMarker,\r\n\t\t\t\tmultiselect: gantt.eachSelectedTask,\r\n\t\t\t\toverlay: gantt.ext.overlay,\r\n\t\t\t\tquick_info: gantt.templates.quick_info_content,\r\n\t\t\t\ttooltip: gantt.ext.tooltips,\r\n\t\t\t\tundo: gantt.undo\r\n\t\t\t};\r\n\r\n\t\t\tfor (let plugin in availablePlugins){\r\n\t\t\t\tif (availablePlugins[plugin] && !activePlugins[plugin]){\r\n\t\t\t\t\t// eslint-disable-next-line no-console\r\n\t\t\t\t\tconsole.warn(`You connected the '${plugin}' extension via an obsolete file. \r\nTo fix it, you need to remove the obsolete file and connect the extension via the plugins method: https://docs.dhtmlx.com/gantt/api__gantt_plugins.html`);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};","export default function(gantt) {\r\n\tdelete gantt.addTaskLayer;\r\n\tdelete gantt.addLinkLayer;\r\n};","function createLayoutFacade(){\r\n\r\n\tfunction getTimeline(gantt){\r\n\t\treturn gantt.$ui.getView(\"timeline\");\r\n\t}\r\n\r\n\tfunction getGrid(gantt){\r\n\t\treturn gantt.$ui.getView(\"grid\");\r\n\t}\r\n\r\n\tfunction getBaseCell(gantt){\r\n\t\tvar timeline = getTimeline(gantt);\r\n\t\tif (timeline && !timeline.$config.hidden){\r\n\t\t\treturn timeline;\r\n\t\t} else{\r\n\t\t\tvar grid = getGrid(gantt);\r\n\t\t\tif (grid && !grid.$config.hidden){\r\n\t\t\t\treturn grid;\r\n\t\t\t} else {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getVerticalScrollbar(gantt){\r\n\t\tvar baseCell = null;\r\n\t\t// GS-1150: if we reorder or resize something in the grid, we should obtain the grid container\r\n\t\tvar gridDrag = false;\r\n\t\tvar gridMarkers = [\r\n\t\t\t\".gantt_drag_marker.gantt_grid_resize_area\",\r\n\t\t\t\".gantt_drag_marker .gantt_row.gantt_row_task\",\r\n\t\t\t\".gantt_drag_marker.gantt_grid_dnd_marker\"\r\n\t\t];\r\n\t\tgridMarkers.forEach(function (selector) {\r\n\t\t\tgridDrag = gridDrag || !!document.querySelector(selector);\r\n\t\t});\r\n\t\tif (gridDrag){\r\n\t\t\tbaseCell = getGrid(gantt);\r\n\t\t} else{\r\n\t\t\tbaseCell = getBaseCell(gantt);\r\n\t\t}\r\n\r\n\t\t// GS-1827. If there is no grid and timeline, there is no scrollbar for them\r\n\t\tif (!baseCell){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar verticalScrollbar = getAttachedScrollbar(gantt, baseCell, \"scrollY\");\r\n\t\treturn verticalScrollbar;\r\n\t}\r\n\r\n\tfunction getHorizontalScrollbar(gantt){\r\n\t\tvar baseCell = getBaseCell(gantt);\r\n\t\tif (!baseCell || baseCell.id == \"grid\"){\r\n\t\t\treturn null; // if the timeline is not displayed, do not return the scrollbar\r\n\t\t}\r\n\t\tvar horizontalScrollbar = getAttachedScrollbar(gantt, baseCell, \"scrollX\");\r\n\t\treturn horizontalScrollbar;\r\n\t}\r\n\r\n\tfunction getAttachedScrollbar(gantt, cell, type){\r\n\t\tvar attachedScrollbar = cell.$config[type];\r\n\t\tvar scrollbarView = gantt.$ui.getView(attachedScrollbar);\r\n\t\treturn scrollbarView;\r\n\t}\r\n\r\n\tvar DEFAULT_VALUE = \"DEFAULT_VALUE\";\r\n\r\n\tfunction tryCall(getView, method, args, fallback){\r\n\t\tvar view = getView(this);\r\n\t\tif (!(view && view.isVisible())) {\r\n\t\t\tif(fallback){\r\n\t\t\t\treturn fallback();\r\n\t\t\t}else{\r\n\t\t\t\treturn DEFAULT_VALUE;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn view[method].apply(view, args);\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tgetColumnIndex: function(name) {\r\n\t\t\tvar res = tryCall.call(this, getGrid, \"getColumnIndex\", [name]);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdateFromPos: function(x) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"dateFromPos\", Array.prototype.slice.call(arguments));\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn this.getState().min_date;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tposFromDate: function(date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"posFromDate\", [date]);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetRowTop: function(index) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getRowTop\", [index],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getRowTop\", [index]);}\r\n\t\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskTop: function(id) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getItemTop\", [id],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getItemTop\", [id]);}\r\n\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tgetTaskPosition: function(task, start_date, end_date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"getItemPosition\", [task, start_date, end_date]);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\tvar top = this.getTaskTop(task.id);\r\n\t\t\t\tvar height = this.getTaskBarHeight(task.id);\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleft: 0,\r\n\t\t\t\t\ttop: top,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\twidth: 0\r\n\t\t\t\t};\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskBarHeight: function(taskId, isMilestoneRender) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getBarHeight\", [taskId, isMilestoneRender],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getItemHeight\", [taskId]);}\r\n\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskHeight: function(taskId) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getItemHeight\", [taskId],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getItemHeight\", [taskId]);}\r\n\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tcolumnIndexByDate: function(date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"columnIndexByDate\", [date]);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\troundTaskDates: function() {\r\n\t\t\ttryCall.call(this, getTimeline, \"roundTaskDates\", []);\r\n\t\t},\r\n\r\n\t\tgetScale: function() {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"getScale\", []);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn null;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskNode: function(id) {\r\n\t\t\tvar timeline = getTimeline(this);\r\n\t\t\tif (!timeline || !timeline.isVisible()) {\r\n\t\t\t\treturn null;\r\n\t\t\t} else {\r\n\t\t\t\tvar node = timeline._taskRenderer.rendered[id];\r\n\t\t\t\tif(!node){\r\n\t\t\t\t\tvar domAttr = timeline.$config.item_attribute;\r\n\t\t\t\t\tnode = timeline.$task_bars.querySelector(\"[\" +domAttr+ \"='\"+id+\"']\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn node || null;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tgetLinkNode: function(id) {\r\n\t\t\tvar timeline = getTimeline(this);\r\n\t\t\tif (!timeline.isVisible()) {\r\n\t\t\t\treturn null;\r\n\t\t\t} else {\r\n\t\t\t\treturn timeline._linkRenderer.rendered[id];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tscrollTo: function(left, top){\r\n\t\t\tvar vertical = getVerticalScrollbar(this);\r\n\t\t\tvar horizontal = getHorizontalScrollbar(this);\r\n\r\n\t\t\tvar oldH = {position: 0},\r\n\t\t\t\toldV = {position: 0};\r\n\r\n\t\t\tif(vertical){\r\n\t\t\t\toldV = vertical.getScrollState();\r\n\t\t\t}\r\n\t\t\tif(horizontal){\r\n\t\t\t\toldH = horizontal.getScrollState();\r\n\t\t\t}\r\n\r\n\t\t\tvar scrollHorizontal = (horizontal && left*1 == left);\r\n\t\t\tvar scrollVertical = (vertical && top*1 == top);\r\n\t\t\tvar scrollBoth = scrollHorizontal && scrollVertical;\r\n\r\n\t\t\tif(scrollBoth){\r\n\t\t\t\t// some views will be scrolled both horizontally and vertically and smart rendering can be called twice\r\n\t\t\t\t// set flag in order not to invoke smart rendering at the horizontal scroll stage\r\n\t\t\t\t// so it will repaint only once when the scroll is completed\r\n\t\t\t\tvar verticalViews = vertical._getLinkedViews();\r\n\t\t\t\tvar horizontalViews = horizontal._getLinkedViews();\r\n\r\n\t\t\t\tvar commonViews = [];\r\n\t\t\t\tfor(var i = 0; i < verticalViews.length; i++){\r\n\t\t\t\t\tfor(var j = 0; j < horizontalViews.length; j++){\r\n\r\n\t\t\t\t\t\tif(verticalViews[i].$config.id && horizontalViews[j].$config.id && verticalViews[i].$config.id === horizontalViews[j].$config.id){\r\n\t\t\t\t\t\t\tcommonViews.push(verticalViews[i].$config.id);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (scrollHorizontal){\r\n\t\t\t\tif(commonViews){\r\n\t\t\t\t\tcommonViews.forEach((function(viewId){\r\n\t\t\t\t\t\tthis.$ui.getView(viewId).$config.$skipSmartRenderOnScroll = true;\r\n\t\t\t\t\t}).bind(this));\r\n\t\t\t\t}\r\n\r\n\t\t\t\thorizontal.scroll(left);\r\n\t\t\t\tif(commonViews){\r\n\t\t\t\t\tcommonViews.forEach((function(viewId){\r\n\t\t\t\t\t\tthis.$ui.getView(viewId).$config.$skipSmartRenderOnScroll = false;\r\n\t\t\t\t\t}).bind(this));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(scrollVertical){\r\n\t\t\t\tvertical.scroll(top);\r\n\t\t\t}\r\n\r\n\t\t\tvar newV = {position: 0},\r\n\t\t\t\tnewH = {position: 0};\r\n\t\t\tif(vertical){\r\n\t\t\t\tnewV = vertical.getScrollState();\r\n\t\t\t}\r\n\t\t\tif(horizontal){\r\n\t\t\t\tnewH = horizontal.getScrollState();\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onGanttScroll\", [oldH.position, oldV.position, newH.position, newV.position]);\r\n\t\t},\r\n\r\n\t\tshowDate: function(date){\r\n\t\t\tvar date_x = this.posFromDate(date);\r\n\t\t\tvar scroll_to = Math.max(date_x - this.config.task_scroll_offset, 0);\r\n\t\t\tthis.scrollTo(scroll_to);\r\n\t\t},\r\n\t\tshowTask: function(id) {\r\n\t\t\tvar pos = this.getTaskPosition(this.getTask(id));\r\n\r\n\t\t\t// GS-1261: we need to show the start_date even in the RTL mode\r\n\t\t\tvar leftPos = pos.left;\r\n\t\t\tif (this.config.rtl) leftPos = pos.left + pos.width;\r\n\r\n\t\t\tvar left = Math.max(leftPos - this.config.task_scroll_offset, 0);\r\n\r\n\t\t\tvar dataHeight = this._scroll_state().y;\r\n\t\t\tvar top;\r\n\t\t\tif(!dataHeight){\r\n\t\t\t\ttop = pos.top;\r\n\t\t\t}else{\r\n\t\t\t\ttop = pos.top - (dataHeight - this.getTaskBarHeight(id))/2;\r\n\t\t\t}\r\n\r\n\t\t\tthis.scrollTo(left, top);\r\n\t\t\t// GS-1150: if the grid and timeline have different scrollbars, we need to scroll thegrid to show the task\r\n\t\t\tvar gridCell = getGrid(this);\r\n\t\t\tvar timelineCell = getTimeline(this);\r\n\t\t\tif (gridCell && timelineCell && gridCell.$config.scrollY != timelineCell.$config.scrollY){\r\n\t\t\t\tvar gridScrollbar = getAttachedScrollbar(this, gridCell, \"scrollY\");\r\n\t\t\t\tgridScrollbar.scrollTo(null, top);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_scroll_state: function(){\r\n\t\t\tvar result = {\r\n\t\t\t\tx: false,\r\n\t\t\t\ty: false,\r\n\t\t\t\tx_pos: 0,\r\n\t\t\t\ty_pos: 0,\r\n\t\t\t\tscroll_size: this.config.scroll_size + 1,//1px for inner content\r\n\t\t\t\tx_inner: 0,\r\n\t\t\t\ty_inner: 0\r\n\t\t\t};\r\n\r\n\t\t\tvar scrollVer = getVerticalScrollbar(this),\r\n\t\t\t\tscrollHor = getHorizontalScrollbar(this);\r\n\t\t\tif(scrollHor){\r\n\t\t\t\tvar horState = scrollHor.getScrollState();\r\n\t\t\t\tif(horState.visible){\r\n\t\t\t\t\tresult.x = horState.size;\r\n\t\t\t\t\tresult.x_inner = horState.scrollSize;\r\n\t\t\t\t}\r\n\t\t\t\tresult.x_pos = horState.position || 0;\r\n\t\t\t}\r\n\r\n\t\t\tif(scrollVer){\r\n\t\t\t\tvar verState = scrollVer.getScrollState();\r\n\t\t\t\tif(verState.visible){\r\n\t\t\t\t\tresult.y = verState.size;\r\n\r\n\t\t\t\t\tresult.y_inner = verState.scrollSize;\r\n\t\t\t\t}\r\n\t\t\t\tresult.y_pos = verState.position || 0;\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tgetScrollState: function(){\r\n\t\t\tvar state = this._scroll_state();\r\n\t\t\treturn { x:state.x_pos, y:state.y_pos, inner_width:state.x, inner_height:state.y, width: state.x_inner, height: state.y_inner };\r\n\t\t},\r\n\r\n\t\tgetLayoutView: function(cellName){\r\n\t\t\treturn this.$ui.getView(cellName);\r\n\t\t},\r\n\r\n\t\tscrollLayoutCell: function(cellName, left, top){\r\n\t\t\tconst cell = this.$ui.getView(cellName);\r\n\t\t\tif (!cell){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (left !== null){\r\n\t\t\t\tconst horizontalScroll = this.$ui.getView(cell.$config.scrollX);\r\n\t\t\t\tif (horizontalScroll){\r\n\t\t\t\t\thorizontalScroll.scrollTo(left, null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (top !== null){\r\n\t\t\t\tconst verticalScroll = this.$ui.getView(cell.$config.scrollY);\r\n\t\t\t\tif (verticalScroll){\r\n\t\t\t\t\tverticalScroll.scrollTo(null, top);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\nexport default createLayoutFacade;","export default function(gantt) {\r\ngantt.skins.skyblue = {\r\n\tconfig:{\r\n\t\tgrid_width:370,\r\n\t\trow_height: 27,\r\n\t\tbar_height_padding:4,\r\n\t\tscale_height: 27,\r\n\t\tlink_line_width:1,\r\n\t\tlink_arrow_size:8,\r\n\t\tlink_radius:2,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","export default function(gantt) {\r\ngantt.skins.dark = {\r\n\tconfig:{\r\n\t\tgrid_width:390,\r\n\t\trow_height: 36,\r\n\t\tscale_height: 36,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:12,\r\n\t\tbar_height_padding:9,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:70\t\t\r\n};\r\n\r\n};","export default function(gantt) {\r\ngantt.skins.meadow = {\r\n\tconfig:{\r\n\t\tgrid_width:380,\r\n\t\trow_height: 27,\r\n\t\tscale_height: 30,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:10,\r\n\t\tbar_height_padding:4,\r\n\t\tlightbox_additional_height:72\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","export default function(gantt) {\r\ngantt.skins.terrace = {\r\n\tconfig:{\r\n\t\tgrid_width:390,\r\n\t\trow_height: 36,\r\n\t\tscale_height: 36,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:12,\r\n\t\tbar_height_padding:9,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:70\t\t\r\n};\r\n\r\n};","export default function(gantt) {\r\n\tgantt.skins.broadway = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 390,\r\n\t\t\trow_height: 35,\r\n\t\t\tscale_height: 35,\r\n\t\t\tlink_line_width: 1,\r\n\t\t\tlink_arrow_size: 9,\r\n\t\t\tbar_height_padding:4,\r\n\t\t\tlightbox_additional_height: 86\r\n\t\t},\r\n\t\t_second_column_width: 100,\r\n\t\t_third_column_width: 80,\r\n\r\n\t\t_lightbox_template: \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span><div class='gantt_cancel_btn'></div></div><div class='gantt_cal_larea'></div>\",\r\n\t\t_config_buttons_left: {},\r\n\t\t_config_buttons_right: {\r\n\t\t\t\"gantt_delete_btn\": \"icon_delete\",\r\n\t\t\t\"gantt_save_btn\": \"icon_save\"\r\n\t\t}\r\n\t};\r\n};","export default function(gantt) {\r\n\tgantt.skins.material = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 411,\r\n\t\t\trow_height: 34,\r\n\t\t\tscale_height: 36,\r\n\t\t\tlink_line_width: 2,\r\n\t\t\tlink_arrow_size: 12,\r\n\t\t\tbar_height_padding:9,\r\n\t\t\tlightbox_additional_height: 80\r\n\t\t},\r\n\t\t_second_column_width: 110,\r\n\t\t_third_column_width: 75,\r\n\t\t_redefine_lightbox_buttons: {\r\n\t\t\t\"buttons_left\": [\"dhx_delete_btn\"],\r\n\t\t\t\"buttons_right\": [\"dhx_cancel_btn\", \"dhx_save_btn\"]\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDrag\", function (id) {\r\n\t\tvar t = gantt.getTaskNode(id);\r\n\t\tif (t) {\r\n\t\t\tt.className += \" gantt_drag_animation\";\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tvar indx = t.className.indexOf(\" gantt_drag_animation\");\r\n\t\t\t\tif (indx > -1) {\r\n\t\t\t\t\tt.className = t.className.slice(0, indx);\r\n\t\t\t\t}\r\n\t\t\t}, 200);\r\n\t\t}\r\n\t});\r\n\r\n};","export default function(gantt) {\r\ngantt.skins[\"contrast_black\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:390,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:12,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","export default function(gantt) {\r\ngantt.skins[\"contrast_white\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:390,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:12,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","import autoscroll from \"./autoscroll\";\r\nimport jquery_hooks from \"./jquery_hooks\";\r\nimport dhtmlx_hooks from \"./dhtmlx_hooks\";\r\nimport TimelineZoom from \"./timeline_zoom\";\r\n\r\n\r\nexport default function(gantt){\r\n\tif(!gantt.ext){\r\n\t\tgantt.ext = {};\r\n\t}\r\n\r\n\tvar modules = [\r\n\t\tautoscroll,\r\n\t\tjquery_hooks,\r\n\t\tdhtmlx_hooks\r\n\t];\r\n\r\n\tfor(var i = 0; i < modules.length; i++){\r\n\t\tif(modules[i])\r\n\t\t\tmodules[i](gantt);\r\n\t}\r\n\r\n\tgantt.ext.zoom = new TimelineZoom(gantt);\r\n};","export default function(gantt) {\r\n\r\n\tgantt._extend_to_optional = function (lightbox_block) {\r\n\r\n\t\tvar duration = lightbox_block;\r\n\t\tvar optional_time = {\r\n\t\t\trender: duration.render,\r\n\t\t\tfocus: duration.focus,\r\n\t\t\tset_value: function (node, value, task, section) {\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(section);\r\n\t\t\t\tif (!task[mapping.start_date] || (mapping.start_date == \"start_date\" && this._isAllowedUnscheduledTask(task))) {\r\n\t\t\t\t\toptional_time.disable(node, section);\r\n\t\t\t\t\tvar val = {};\r\n\r\n\t\t\t\t\tfor (var i in mapping) {\r\n\t\t\t\t\t\t//take default values from the time control from task start/end dates\r\n\t\t\t\t\t\tval[mapping[i]] = task[i];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, val, section);//set default value\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.enable(node, section);\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tget_value: function (node, task, section) {\r\n\t\t\t\tif (section.disabled) {\r\n\t\t\t\t\treturn {start_date: null};\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn duration.get_value.call(gantt, node, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tupdate_block: function (node, section) {\r\n\t\t\t\tgantt.callEvent(\"onSectionToggle\", [gantt._lightbox_id, section]);\r\n\t\t\t\tnode.style.display = section.disabled ? \"none\" : \"\";\r\n\r\n\t\t\t\tif (section.button) {\r\n\t\t\t\t\tvar button = node.previousSibling.querySelector(\".gantt_custom_button_label\"),\r\n\t\t\t\t\t\tlabels = gantt.locale.labels;\r\n\r\n\t\t\t\t\tvar button_text = section.disabled ? labels[section.name + \"_enable_button\"] : labels[section.name + \"_disable_button\"];\r\n\r\n\t\t\t\t\tbutton.innerHTML = button_text;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdisable: function (node, section) {\r\n\t\t\t\tsection.disabled = true;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\r\n\t\t\t},\r\n\t\t\tenable: function (node, section) {\r\n\t\t\t\tsection.disabled = false;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\t\t\t},\r\n\t\t\tbutton_click: function (index, el, section, container) {\r\n\t\t\t\tif (gantt.callEvent(\"onSectionButton\", [gantt._lightbox_id, section]) === false) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar config = gantt._get_typed_lightbox_config()[index];\r\n\t\t\t\tif (config.disabled) {\r\n\t\t\t\t\toptional_time.enable(container, config);\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.disable(container, config);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn optional_time;\r\n\t};\r\n\r\n\tgantt.form_blocks.duration_optional = gantt._extend_to_optional(gantt.form_blocks.duration);\r\n\tgantt.form_blocks.time_optional = gantt._extend_to_optional(gantt.form_blocks.time);\r\n\r\n};","export default function(gantt){\r\n\tvar htmlTags = new RegExp(\"<(?:.|\\n)*?>\", \"gm\");\r\n\tvar extraSpaces = new RegExp(\" +\", \"gm\");\r\n\r\n\tfunction stripHTMLLite(htmlText){\r\n\t\treturn (htmlText + \"\")\r\n\t\t\t.replace(htmlTags, \" \").\r\n\t\t\treplace(extraSpaces, \" \");\r\n\t}\r\n\r\n\tvar singleQuotes = new RegExp(\"'\", \"gm\");\r\n\tfunction escapeQuotes(text){\r\n\t\treturn (text + \"\").replace(singleQuotes, \"&#39;\");\r\n\t}\r\n\r\n\tgantt._waiAria = {\r\n\t\tgetAttributeString: function(attr){\r\n\t\t\tvar attributes = [\" \"];\r\n\t\t\tfor(var i in attr){\r\n\t\t\t\tvar text = escapeQuotes(stripHTMLLite(attr[i]));\r\n\t\t\t\tattributes.push(i + \"='\" + text + \"'\");\r\n\t\t\t}\r\n\t\t\tattributes.push(\" \");\r\n\t\t\treturn attributes.join(\" \");\r\n\r\n\t\t},\r\n\r\n\t\tgetTimelineCellAttr:function(dateString){\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": dateString});\r\n\t\t},\r\n\r\n\t\t_taskCommonAttr: function(task, div){\r\n\r\n\t\t\tif(!(task.start_date && task.end_date))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(gantt.templates.tooltip_text(task.start_date, task.end_date, task)));\r\n\r\n\t\t\tif(task.$dataprocessor_class){\r\n\t\t\t\tdiv.setAttribute(\"aria-busy\", true);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tsetTaskBarAttr: function(task, div){\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\t// task bars are complex elements that should be treated as a single element\r\n\t\t\tdiv.setAttribute(\"role\", \"img\");\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.drag_move){\r\n\t\t\t\tif(task.id != gantt.getState(\"tasksDnd\").drag_id){\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttaskRowAttr: function(task, div){\r\n\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.order_branch){\r\n\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t}\r\n\r\n\t\t\tdiv.setAttribute(\"role\", \"row\");\r\n\t\t\t// selected attribute should be added only to the grid  because\r\n\t\t\t// other parts don't have the keyboard navigation\r\n\t\t\tdiv.setAttribute(\"aria-selected\", gantt.isSelectedTask(task.id) ? \"true\" : \"false\");\r\n\r\n\t\t\t// allowed values start from 1, set 1 for non-tree datastores\r\n\t\t\tdiv.setAttribute(\"aria-level\", task.$level + 1 || 1);\r\n\r\n\t\t\tif(gantt.hasChild(task.id)){\r\n\t\t\t\tdiv.setAttribute(\"aria-expanded\", task.$open ? \"true\" : \"false\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tlinkAttr: function(link, div){\r\n\r\n\t\t\tvar linkTypes = gantt.config.links;\r\n\r\n\t\t\tvar toStart = link.type == linkTypes.finish_to_start || link.type == linkTypes.start_to_start;\r\n\t\t\tvar fromStart = link.type == linkTypes.start_to_start || link.type == linkTypes.start_to_finish;\r\n\r\n\t\t\tvar content = gantt.locale.labels.link + \" \" +  gantt.templates.drag_link(link.source, fromStart, link.target, toStart);\r\n\r\n\t\t\t// links are complex elements that should be treated as a single element\r\n\t\t\tdiv.setAttribute(\"role\", \"img\");\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(content));\r\n\t\t},\r\n\r\n\t\tgridSeparatorAttr: function(div){\r\n\t\t\t// the only valid role for the grid header\r\n\t\t\tdiv.setAttribute(\"role\", \"columnheader\");\r\n\t\t},\r\n\t\trowResizerAttr: function(div){\r\n\t\t\t// the only valid role for the grid header\r\n\t\t\tdiv.setAttribute(\"role\", \"row\");\r\n\t\t},\r\n\r\n\t\tlightboxHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t},\r\n\r\n\t\tlightboxVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\tlightboxAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t\tdiv.firstChild.setAttribute(\"role\", \"heading\");\r\n\t\t\tdiv.firstChild.setAttribute(\"aria-level\", \"1\");\r\n\t\t},\r\n\r\n\t\tlightboxButtonAttrString:function(buttonName){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":gantt.locale.labels[buttonName], \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\tlightboxHeader: function(div, headerText){\r\n\t\t\tdiv.setAttribute(\"aria-label\", headerText);\r\n\t\t},\r\n\r\n\t\tlightboxSelectAttrString: function(time_option){\r\n\t\t\tvar label = \"\";\r\n\r\n\t\t\tswitch (time_option) {\r\n\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.years;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%m\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.months;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%d\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.days;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%H:%i\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.hours + gantt.locale.labels.minutes;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": label});\r\n\t\t},\r\n\r\n\t\tlightboxDurationInputAttrString: function(section){\r\n\t\t\treturn this.getAttributeString({\r\n\t\t\t\t\"aria-label\": gantt.locale.labels.column_duration,\r\n\t\t\t\t\"aria-valuemin\": \"0\",\r\n\t\t\t\t\"role\": \"spinbutton\"\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tinlineEditorAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"row\");\r\n\t\t},\r\n\r\n\t\tgridAttrString: function(){\r\n\t\t\treturn [\" role='treegrid'\", gantt.config.multiselect ? \"aria-multiselectable='true'\" : \"aria-multiselectable='false'\", \" \"].join(\" \");\r\n\t\t},\r\n\r\n\r\n\t\tgridScaleRowAttrString: function(){\r\n\t\t\treturn \"role='row'\";\r\n\t\t},\r\n\r\n\t\tgridScaleCellAttrString: function(column, label){\r\n\t\t\tvar attrs = \"\";\r\n\t\t\tif(column.name == \"add\"){\r\n\t\t\t\t// a more precise role is button, but it is not valid for the grid header\r\n\t\t\t\tattrs = this.getAttributeString({\"role\":\"columnheader\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t\t}else{\r\n\r\n\t\t\t\tvar attributes = {\r\n\t\t\t\t\t\"role\":\"columnheader\",\r\n\t\t\t\t\t\"aria-label\": gantt.config.external_render && gantt.config.external_render.isElement(label) ? \"\" : label\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(gantt._sort && gantt._sort.name == column.name){\r\n\t\t\t\t\tif(gantt._sort.direction == \"asc\"){\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"ascending\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"descending\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tattrs = this.getAttributeString(attributes);\r\n\t\t\t}\r\n\t\t\treturn attrs;\r\n\t\t},\r\n\r\n\t\tgridDataAttrString: function(){\r\n\t\t\treturn \"role='rowgroup'\";\r\n\t\t},\r\n\r\n\t\treorderMarkerAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"grid\");\r\n\t\t\tdiv.firstChild.removeAttribute(\"aria-level\");\r\n\t\t\tdiv.firstChild.setAttribute(\"aria-grabbed\", \"true\");\r\n\t\t},\r\n\r\n\t\tgridCellAttrString: function(column, textValue, task){\r\n\t\t\tvar attributes = {\"role\":\"gridcell\", \"aria-label\": textValue};\r\n\t\t\tif(!column.editor || gantt.isReadonly(task)){\r\n\t\t\t\tattributes[\"aria-readonly\"] = true;\r\n\t\t\t}\r\n\r\n\t\t\treturn this.getAttributeString(attributes);\r\n\t\t},\r\n\r\n\t\tgridAddButtonAttrString: function(column){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t},\r\n\r\n\t\tmessageButtonAttrString: function(buttonLabel){\r\n\t\t\treturn \"tabindex='0' role='button' aria-label='\"+buttonLabel+\"'\";\r\n\t\t},\r\n\r\n\t\tmessageInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"alert\");\r\n\t\t\t//div.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tmessageModalAttr: function(div, uid){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tif(uid){\r\n\t\t\t\tdiv.setAttribute(\"aria-labelledby\", uid);\r\n\t\t\t}\r\n\r\n\t\t//\tdiv.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tquickInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t},\r\n\r\n\t\tquickInfoHeaderAttrString: function(){\r\n\t\t\treturn \" role='heading' aria-level='1' \";\r\n\t\t},\r\n\r\n\t\tquickInfoHeader: function(div, header){\r\n\t\t\tdiv.setAttribute(\"aria-label\", header);\r\n\t\t},\r\n\r\n\t\tquickInfoButtonAttrString: function(label){\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"role\":\"button\", \"aria-label\":label, \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\ttooltipAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"tooltip\");\r\n\t\t},\r\n\r\n\t\ttooltipVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\ttooltipHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t}\r\n\t};\r\n\r\n\tfunction isDisabled(){\r\n\t\treturn !gantt.config.wai_aria_attributes;\r\n\t}\r\n\r\n\tfor(var i in gantt._waiAria){\r\n\t\tgantt._waiAria[i] = (function(payload){\r\n\t\t\treturn function(){\r\n\t\t\t\tif(isDisabled()){\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\t}\r\n\t\t\t\treturn payload.apply(this, arguments);\r\n\t\t\t};\r\n\t\t})(gantt._waiAria[i]);\r\n\t}\r\n\r\n\r\n};","import extensions from \"./ext/extensions_gpl\";\r\nimport base from \"./factory/make_instance_web\";\r\nimport scope from \"./utils/global\";\r\nconst gantt = (scope as any).gantt = base(extensions);\r\n\r\nexport default gantt;\r\nexport { gantt };","import \"../css/dhtmlxgantt.less\";\r\n\r\nimport factory from \"./make_instance_common\";\r\nimport ui from \"../core/ui_core\";\r\nimport ajaxLoading from \"../core/loading/ajax_loading\";\r\nimport dynamicLoading from \"../core/loading/dynamic_loading\";\r\n\r\nexport default function(supportedExtensions) {\r\n\tvar gantt = factory(supportedExtensions);\r\n\r\n\tif(!gantt.env.isNode){\r\n\t\tui(gantt);\r\n\t\tajaxLoading(gantt);\r\n\t\tdynamicLoading(gantt);\r\n\t}\r\n\r\n\treturn gantt;\r\n};","export default function(gantt) {\r\n\tgantt.load = function (url, type, callback) {\r\n\t\tthis._load_url = url;\r\n\t\tthis.assert(arguments.length, \"Invalid load arguments\");\r\n\r\n\t\tvar tp = 'json', cl = null;\r\n\t\tif (arguments.length >= 3) {\r\n\t\t\ttp = type;\r\n\t\t\tcl = callback;\r\n\t\t} else {\r\n\t\t\tif (typeof arguments[1] == \"string\")\r\n\t\t\t\ttp = arguments[1];\r\n\t\t\telse if (typeof arguments[1] == \"function\")\r\n\t\t\t\tcl = arguments[1];\r\n\t\t}\r\n\r\n\t\tthis._load_type = tp;\r\n\r\n\t\tthis.callEvent(\"onLoadStart\", [url, tp]);\r\n\r\n\t\treturn this.ajax.get(url, gantt.bind(function (l) {\r\n\t\t\tthis.on_load(l, tp);\r\n\t\t\tthis.callEvent(\"onLoadEnd\", [url, tp]);\r\n\t\t\tif (typeof cl == \"function\")\r\n\t\t\t\tcl.call(this);\r\n\t\t}, this));\r\n\t};\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}