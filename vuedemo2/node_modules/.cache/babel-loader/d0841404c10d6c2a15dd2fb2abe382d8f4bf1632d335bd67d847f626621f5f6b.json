{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.every.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nexport default {\n  name: \"MyTest\",\n  data() {\n    return {\n      selectedAlgorithm: \"ddpg\",\n      // 默认选择 DDPG 算法\n      inputData: {\n        max_episodes: \"\",\n        // DDPG 算法的输入\n        custom_param: \"\" // 其他算法的输入\n      },\n      // 表格数据\n      tableData: [{\n        task: \"搭架子\"\n      }, {\n        task: \"拆保温\"\n      }, {\n        task: \"打磨\"\n      }, {\n        task: \"宏观检验\"\n      }, {\n        task: \"壁厚测定\"\n      }, {\n        task: \"射线检测\"\n      }, {\n        task: \"表面检测\"\n      }, {\n        task: \"超声检测\"\n      }, {\n        task: \"其他无损检测\"\n      }, {\n        task: \"铁素体检测\"\n      }, {\n        task: \"硬度检测\"\n      }, {\n        task: \"金相检验\"\n      }, {\n        task: \"检验结果评定\"\n      }, {\n        task: \"返修\"\n      }, {\n        task: \"返修结果确认\"\n      }, {\n        task: \"合格报告出具\"\n      }],\n      workers: [\"工人1\", \"工人2\", \"工人3\", \"工人4\", \"工人5\", \"工人6\"],\n      // 工人列表\n\n      result: null,\n      // 算法返回的结果\n      isLoading: false,\n      // 加载状态\n      progressVisible: false,\n      // 是否显示进度条\n      progressPercentage: 0,\n      // 进度条百分比\n      progressStatus: null // 进度条状态（success/exception）\n    };\n  },\n  created() {\n    // 初始化表格数据，为每个工人添加空值\n    this.tableData.forEach(row => {\n      this.workers.forEach(worker => {\n        row[worker] = \"\"; // 初始化每个单元格为空\n      });\n    });\n  },\n  methods: {\n    async runAlgorithm() {\n      if (!this.selectedAlgorithm) {\n        this.$message.error(\"请选择算法\");\n        return;\n      }\n\n      // 检查 max_episodes 是否为空\n      if (this.selectedAlgorithm === 'ddpg' && !this.inputData.max_episodes) {\n        this.$message.error(\"请输入训练的最大迭代次数\");\n        return;\n      }\n\n      // 检查输入是否为空\n      if (this.selectedAlgorithm === 'ddpg' && !this.inputData.max_episodes) {\n        this.$message.error(\"请输入训练的最大迭代次数\");\n        return;\n      }\n      if ((this.selectedAlgorithm === 'ddqn' || this.selectedAlgorithm === 'ga') && !this.isTableDataValid()) {\n        this.$message.error(\"请填写完整的表格数据\");\n        return;\n      }\n      this.isLoading = true; // 开始加载\n      this.progressVisible = true; // 显示进度条\n      this.progressPercentage = 0; // 重置进度条\n      this.progressStatus = null; // 重置状态\n\n      try {\n        // 构造请求数据\n        const requestData = {\n          algorithm_name: this.selectedAlgorithm,\n          max_episodes: parseInt(this.inputData.max_episodes),\n          // 确保输入值不为空\n          table_data: this.tableData // DDQN 和 GA 的表格数据\n        };\n        // 检查 max_episodes 是否为有效整数\n        // if (isNaN(requestData.max_episodes)) {\n        //   this.$message.error(\"请输入有效的整数\");\n        //   return;\n        // }\n\n        // 发送 POST 请求到 Flask 后端\n        const response = await this.$axios.post(\"http://localhost:5000/run_rl\", requestData);\n\n        // 模拟进度更新\n        const maxEpisodes = parseInt(this.inputData.max_episodes) || 10;\n        for (let i = 1; i <= maxEpisodes; i++) {\n          await new Promise(resolve => setTimeout(resolve, 500)); // 模拟每次训练耗时\n          this.progressPercentage = Math.round(i / maxEpisodes * 100); // 更新进度\n        }\n        this.result = response.data;\n        this.progressStatus = \"success\"; // 进度条状态：成功\n      } catch (error) {\n        console.error(\"调用算法失败:\", error);\n        this.$message.error(\"调用算法失败，请检查输入或后端服务\");\n        this.progressStatus = \"exception\"; // 进度条状态：失败\n      } finally {\n        this.isLoading = false; // 结束加载\n      }\n    },\n    // 检查表格数据是否完整\n    isTableDataValid() {\n      return this.tableData.every(row => {\n        return this.workers.every(worker => {\n          return row[worker] !== \"\"; // 确保每个单元格都有值\n        });\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","selectedAlgorithm","inputData","max_episodes","custom_param","tableData","task","workers","result","isLoading","progressVisible","progressPercentage","progressStatus","created","forEach","row","worker","methods","runAlgorithm","$message","error","isTableDataValid","requestData","algorithm_name","parseInt","table_data","response","$axios","post","maxEpisodes","i","Promise","resolve","setTimeout","Math","round","console","every"],"sources":["src/components/user/Test.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <!-- 选择算法 -->\r\n    <el-select v-model=\"selectedAlgorithm\" placeholder=\"请选择算法\" style=\"width: 200px; margin-right: 10px;\">\r\n      <el-option label=\"DDPG\" value=\"ddpg\"></el-option>\r\n      <el-option label=\"DDQN\" value=\"ddqn\"></el-option>\r\n      <el-option label=\"GA\" value=\"ga\"></el-option>\r\n      <el-option label=\"其他算法\" value=\"other_algorithm\"></el-option>\r\n    </el-select>\r\n\r\n    <!-- 动态输入字段 -->\r\n    <div v-if=\"selectedAlgorithm === 'ddpg'\" style=\"margin-top: 10px;\">\r\n      <el-input v-model=\"inputData.max_episodes\" placeholder=\"请输入训练的最大迭代次数\" style=\"width: 300px; margin-right: 10px;\"></el-input>\r\n    </div>\r\n\r\n    <!-- DDQN 和 GA 的表格输入 -->\r\n    <div v-if=\"selectedAlgorithm === 'ddqn' || selectedAlgorithm === 'ga'\" style=\"margin-top: 10px;\">\r\n      <el-table :data=\"tableData\" border style=\"width: 100%;\">\r\n        <!-- 第一列：固定内容 -->\r\n        <el-table-column prop=\"task\" label=\"任务\" width=\"180\" fixed>\r\n          <template #default=\"{ row }\">\r\n            <span>{{ row.task }}</span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <!-- 动态列：工人1到工人6 -->\r\n        <el-table-column\r\n            v-for=\"(worker, index) in workers\"\r\n            :key=\"index\"\r\n            :label=\"worker\"\r\n            :prop=\"worker\"\r\n            width=\"120\"\r\n        >\r\n          <template #default=\"{ row, $index }\">\r\n            <!-- 第一行（工人名称）不可编辑 -->\r\n            <span v-if=\"$index === 0\">{{ worker }}</span>\r\n            <!-- 其他行可编辑 -->\r\n            <el-input\r\n                v-else\r\n                v-model=\"row[worker]\"\r\n                placeholder=\"请输入\"\r\n                size=\"small\"\r\n            ></el-input>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n\r\n    <!-- 其他算法的输入 -->\r\n    <div v-if=\"selectedAlgorithm === 'other_algorithm'\" style=\"margin-top: 10px;\">\r\n      <el-input v-model=\"inputData.custom_param\" placeholder=\"请输入自定义参数\" style=\"width: 300px; margin-right: 10px;\"></el-input>\r\n    </div>\r\n\r\n    <!-- 运行按钮 -->\r\n    <el-button type=\"primary\" @click=\"runAlgorithm\" :loading=\"isLoading\" style=\"margin-top: 10px;\">运行算法</el-button>\r\n\r\n    <!-- 进度条 -->\r\n    <div v-if=\"progressVisible\" style=\"margin-top: 20px;\">\r\n      <el-progress :percentage=\"progressPercentage\" :status=\"progressStatus\"></el-progress>\r\n      <p style=\"margin-top: 10px;\">当前进度：{{ progressPercentage }}%</p>\r\n    </div>\r\n\r\n    <!-- 显示算法结果 -->\r\n    <div v-if=\"result\" style=\"margin-top: 20px;\">\r\n      <h3>算法结果：</h3>\r\n      <pre>{{ result }}</pre>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"MyTest\",\r\n  data() {\r\n    return {\r\n      selectedAlgorithm: \"ddpg\", // 默认选择 DDPG 算法\r\n      inputData: {\r\n        max_episodes: \"\", // DDPG 算法的输入\r\n        custom_param: \"\", // 其他算法的输入\r\n      },\r\n\r\n      // 表格数据\r\n      tableData: [\r\n        { task: \"搭架子\" },\r\n        { task: \"拆保温\" },\r\n        { task: \"打磨\" },\r\n        { task: \"宏观检验\" },\r\n        { task: \"壁厚测定\" },\r\n        { task: \"射线检测\" },\r\n        { task: \"表面检测\" },\r\n        { task: \"超声检测\" },\r\n        { task: \"其他无损检测\" },\r\n        { task: \"铁素体检测\" },\r\n        { task: \"硬度检测\" },\r\n        { task: \"金相检验\" },\r\n        { task: \"检验结果评定\" },\r\n        { task: \"返修\" },\r\n        { task: \"返修结果确认\" },\r\n        { task: \"合格报告出具\" },\r\n      ],\r\n      workers: [\"工人1\", \"工人2\", \"工人3\", \"工人4\", \"工人5\", \"工人6\"], // 工人列表\r\n\r\n      result: null, // 算法返回的结果\r\n      isLoading: false, // 加载状态\r\n      progressVisible: false, // 是否显示进度条\r\n      progressPercentage: 0, // 进度条百分比\r\n      progressStatus: null, // 进度条状态（success/exception）\r\n    };\r\n  },\r\n\r\n  created() {\r\n    // 初始化表格数据，为每个工人添加空值\r\n    this.tableData.forEach((row) => {\r\n      this.workers.forEach((worker) => {\r\n        row[worker] = \"\"; // 初始化每个单元格为空\r\n      });\r\n    });\r\n  },\r\n\r\n  methods: {\r\n    async runAlgorithm() {\r\n      if (!this.selectedAlgorithm) {\r\n        this.$message.error(\"请选择算法\");\r\n        return;\r\n      }\r\n\r\n      // 检查 max_episodes 是否为空\r\n      if (this.selectedAlgorithm === 'ddpg' && !this.inputData.max_episodes) {\r\n        this.$message.error(\"请输入训练的最大迭代次数\");\r\n        return;\r\n      }\r\n\r\n      // 检查输入是否为空\r\n      if (this.selectedAlgorithm === 'ddpg' && !this.inputData.max_episodes) {\r\n        this.$message.error(\"请输入训练的最大迭代次数\");\r\n        return;\r\n      }\r\n      if ((this.selectedAlgorithm === 'ddqn' || this.selectedAlgorithm === 'ga') && !this.isTableDataValid()) {\r\n        this.$message.error(\"请填写完整的表格数据\");\r\n        return;\r\n      }\r\n\r\n\r\n      this.isLoading = true; // 开始加载\r\n      this.progressVisible = true; // 显示进度条\r\n      this.progressPercentage = 0; // 重置进度条\r\n      this.progressStatus = null; // 重置状态\r\n\r\n      try {\r\n        // 构造请求数据\r\n        const requestData = {\r\n          algorithm_name: this.selectedAlgorithm,\r\n          max_episodes: parseInt(this.inputData.max_episodes), // 确保输入值不为空\r\n          table_data: this.tableData, // DDQN 和 GA 的表格数据\r\n        };\r\n        // 检查 max_episodes 是否为有效整数\r\n        // if (isNaN(requestData.max_episodes)) {\r\n        //   this.$message.error(\"请输入有效的整数\");\r\n        //   return;\r\n        // }\r\n\r\n        // 发送 POST 请求到 Flask 后端\r\n        const response = await this.$axios.post(\"http://localhost:5000/run_rl\", requestData);\r\n\r\n        // 模拟进度更新\r\n        const maxEpisodes = parseInt(this.inputData.max_episodes) || 10;\r\n        for (let i = 1; i <= maxEpisodes; i++) {\r\n          await new Promise((resolve) => setTimeout(resolve, 500)); // 模拟每次训练耗时\r\n          this.progressPercentage = Math.round((i / maxEpisodes) * 100); // 更新进度\r\n        }\r\n\r\n        this.result = response.data;\r\n        this.progressStatus = \"success\"; // 进度条状态：成功\r\n      } catch (error) {\r\n        console.error(\"调用算法失败:\", error);\r\n        this.$message.error(\"调用算法失败，请检查输入或后端服务\");\r\n        this.progressStatus = \"exception\"; // 进度条状态：失败\r\n      } finally {\r\n        this.isLoading = false; // 结束加载\r\n      }\r\n    },\r\n\r\n    // 检查表格数据是否完整\r\n    isTableDataValid() {\r\n      return this.tableData.every((row) => {\r\n        return this.workers.every((worker) => {\r\n          return row[worker] !== \"\"; // 确保每个单元格都有值\r\n        });\r\n      });\r\n    },\r\n    \r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\npre {\r\n  background-color: #f5f5f5;\r\n  padding: 10px;\r\n  border-radius: 4px;\r\n  font-family: monospace;\r\n}\r\n</style>"],"mappings":";;;AAuEA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,iBAAA;MAAA;MACAC,SAAA;QACAC,YAAA;QAAA;QACAC,YAAA;MACA;MAEA;MACAC,SAAA,GACA;QAAAC,IAAA;MAAA,GACA;QAAAA,IAAA;MAAA,GACA;QAAAA,IAAA;MAAA,GACA;QAAAA,IAAA;MAAA,GACA;QAAAA,IAAA;MAAA,GACA;QAAAA,IAAA;MAAA,GACA;QAAAA,IAAA;MAAA,GACA;QAAAA,IAAA;MAAA,GACA;QAAAA,IAAA;MAAA,GACA;QAAAA,IAAA;MAAA,GACA;QAAAA,IAAA;MAAA,GACA;QAAAA,IAAA;MAAA,GACA;QAAAA,IAAA;MAAA,GACA;QAAAA,IAAA;MAAA,GACA;QAAAA,IAAA;MAAA,GACA;QAAAA,IAAA;MAAA,EACA;MACAC,OAAA;MAAA;;MAEAC,MAAA;MAAA;MACAC,SAAA;MAAA;MACAC,eAAA;MAAA;MACAC,kBAAA;MAAA;MACAC,cAAA;IACA;EACA;EAEAC,QAAA;IACA;IACA,KAAAR,SAAA,CAAAS,OAAA,CAAAC,GAAA;MACA,KAAAR,OAAA,CAAAO,OAAA,CAAAE,MAAA;QACAD,GAAA,CAAAC,MAAA;MACA;IACA;EACA;EAEAC,OAAA;IACA,MAAAC,aAAA;MACA,UAAAjB,iBAAA;QACA,KAAAkB,QAAA,CAAAC,KAAA;QACA;MACA;;MAEA;MACA,SAAAnB,iBAAA,qBAAAC,SAAA,CAAAC,YAAA;QACA,KAAAgB,QAAA,CAAAC,KAAA;QACA;MACA;;MAEA;MACA,SAAAnB,iBAAA,qBAAAC,SAAA,CAAAC,YAAA;QACA,KAAAgB,QAAA,CAAAC,KAAA;QACA;MACA;MACA,UAAAnB,iBAAA,oBAAAA,iBAAA,oBAAAoB,gBAAA;QACA,KAAAF,QAAA,CAAAC,KAAA;QACA;MACA;MAGA,KAAAX,SAAA;MACA,KAAAC,eAAA;MACA,KAAAC,kBAAA;MACA,KAAAC,cAAA;;MAEA;QACA;QACA,MAAAU,WAAA;UACAC,cAAA,OAAAtB,iBAAA;UACAE,YAAA,EAAAqB,QAAA,MAAAtB,SAAA,CAAAC,YAAA;UAAA;UACAsB,UAAA,OAAApB,SAAA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA,MAAAqB,QAAA,cAAAC,MAAA,CAAAC,IAAA,iCAAAN,WAAA;;QAEA;QACA,MAAAO,WAAA,GAAAL,QAAA,MAAAtB,SAAA,CAAAC,YAAA;QACA,SAAA2B,CAAA,MAAAA,CAAA,IAAAD,WAAA,EAAAC,CAAA;UACA,UAAAC,OAAA,CAAAC,OAAA,IAAAC,UAAA,CAAAD,OAAA;UACA,KAAArB,kBAAA,GAAAuB,IAAA,CAAAC,KAAA,CAAAL,CAAA,GAAAD,WAAA;QACA;QAEA,KAAArB,MAAA,GAAAkB,QAAA,CAAA1B,IAAA;QACA,KAAAY,cAAA;MACA,SAAAQ,KAAA;QACAgB,OAAA,CAAAhB,KAAA,YAAAA,KAAA;QACA,KAAAD,QAAA,CAAAC,KAAA;QACA,KAAAR,cAAA;MACA;QACA,KAAAH,SAAA;MACA;IACA;IAEA;IACAY,iBAAA;MACA,YAAAhB,SAAA,CAAAgC,KAAA,CAAAtB,GAAA;QACA,YAAAR,OAAA,CAAA8B,KAAA,CAAArB,MAAA;UACA,OAAAD,GAAA,CAAAC,MAAA;QACA;MACA;IACA;EAEA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}