{"ast":null,"code":"import\"core-js/modules/es.array.push.js\";import\"core-js/modules/es.iterator.constructor.js\";import\"core-js/modules/es.iterator.filter.js\";import\"core-js/modules/es.iterator.find.js\";import\"core-js/modules/es.iterator.for-each.js\";import\"core-js/modules/es.iterator.map.js\";import\"core-js/modules/es.iterator.reduce.js\";import\"core-js/modules/es.set.difference.v2.js\";import\"core-js/modules/es.set.intersection.v2.js\";import\"core-js/modules/es.set.is-disjoint-from.v2.js\";import\"core-js/modules/es.set.is-subset-of.v2.js\";import\"core-js/modules/es.set.is-superset-of.v2.js\";import\"core-js/modules/es.set.symmetric-difference.v2.js\";import\"core-js/modules/es.set.union.v2.js\";import\"core-js/modules/web.dom-exception.stack.js\";import\"core-js/modules/web.structured-clone.js\";/** @license\n\ndhtmlxGantt v.9.1.0 Standard\n\nThis version of dhtmlxGantt is distributed under GPL 2.0 license and can be legally used in GPL projects.\n\nTo use dhtmlxGantt in non-GPL projects (and get Pro version of the product), please obtain Individual, Commercial, Enterprise or Ultimate license on our site https://dhtmlx.com/docs/products/dhtmlxGantt/#licensing or contact us at info@dhtmlx.com\n\n(c) XB Software\n\n*/function Y(t){var n=0,e=0,i=0,a=0;if(t.getBoundingClientRect){var s=t.getBoundingClientRect(),r=document.body,o=document.documentElement||document.body.parentNode||document.body,l=window.pageYOffset||o.scrollTop||r.scrollTop,d=window.pageXOffset||o.scrollLeft||r.scrollLeft,c=o.clientTop||r.clientTop||0,u=o.clientLeft||r.clientLeft||0;n=s.top+l-c,e=s.left+d-u,i=document.body.offsetWidth-s.right,a=document.body.offsetHeight-s.bottom;}else{for(;t;)n+=parseInt(t.offsetTop,10),e+=parseInt(t.offsetLeft,10),t=t.offsetParent;i=document.body.offsetWidth-t.offsetWidth-e,a=document.body.offsetHeight-t.offsetHeight-n;}return{y:Math.round(n),x:Math.round(e),width:t.offsetWidth,height:t.offsetHeight,right:Math.round(i),bottom:Math.round(a)};}function Nn(t){var n=!1,e=!1;if(window.getComputedStyle){var i=window.getComputedStyle(t,null);n=i.display,e=i.visibility;}else t.currentStyle&&(n=t.currentStyle.display,e=t.currentStyle.visibility);return n!=\"none\"&&e!=\"hidden\";}function Ln(t){return!isNaN(t.getAttribute(\"tabindex\"))&&1*t.getAttribute(\"tabindex\")>=0;}function Rn(t){return!{a:!0,area:!0}[t.nodeName.loLowerCase()]||!!t.getAttribute(\"href\");}function Pn(t){return!{input:!0,select:!0,textarea:!0,button:!0,object:!0}[t.nodeName.toLowerCase()]||!t.hasAttribute(\"disabled\");}function Pt(t){for(var n=t.querySelectorAll([\"a[href]\",\"area[href]\",\"input\",\"select\",\"textarea\",\"button\",\"iframe\",\"object\",\"embed\",\"[tabindex]\",\"[contenteditable]\"].join(\", \")),e=Array.prototype.slice.call(n,0),i=0;i<e.length;i++)e[i].$position=i;for(e.sort(function(s,r){return s.tabIndex===0&&r.tabIndex!==0?1:s.tabIndex!==0&&r.tabIndex===0?-1:s.tabIndex===r.tabIndex?s.$position-r.$position:s.tabIndex<r.tabIndex?-1:1;}),i=0;i<e.length;i++){var a=e[i];(Ln(a)||Pn(a)||Rn(a))&&Nn(a)||(e.splice(i,1),i--);}return e;}function tn(){var t=document.createElement(\"div\");t.style.cssText=\"visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;\",document.body.appendChild(t);var n=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),Math.max(n,15);}function Q(t){if(!t)return\"\";var n=t.className||\"\";return n.baseVal&&(n=n.baseVal),n.indexOf||(n=\"\"),ke(n);}function Ct(t,n){n&&t.className.indexOf(n)===-1&&(t.className+=\" \"+n);}function Jt(t,n){n=n.split(\" \");for(var e=0;e<n.length;e++){var i=new RegExp(\"\\\\s?\\\\b\"+n[e]+\"\\\\b(?![-_.])\",\"\");t.className=t.className.replace(i,\"\");}}function De(t){return typeof t==\"string\"?document.getElementById(t)||document.querySelector(t)||document.body:t||document.body;}var jt;function en(t,n){jt||(jt=document.createElement(\"div\")),jt.innerHTML=n;var e=jt.firstChild;return t.appendChild(e),e;}function nn(t){t&&t.parentNode&&t.parentNode.removeChild(t);}function an(t,n){for(var e=t.childNodes,i=e.length,a=[],s=0;s<i;s++){var r=e[s];r.className&&r.className.indexOf(n)!==-1&&a.push(r);}return a;}function xt(t){var n;return t.tagName?n=t:(n=(t=t||window.event).target||t.srcElement).shadowRoot&&t.composedPath&&(n=t.composedPath()[0]),n;}function it(t,n){if(n){for(var e=xt(t);e;){if(e.getAttribute&&e.getAttribute(n))return e;e=e.parentNode||e.host;}return null;}}function ke(t){return(String.prototype.trim||function(){return this.replace(/^\\s+|\\s+$/g,\"\");}).apply(t);}function vt(t,n,e){var i=xt(t),a=\"\";for(e===void 0&&(e=!0);i;){if(a=Q(i)){var s=a.indexOf(n);if(s>=0){if(!e)return i;var r=s===0||!ke(a.charAt(s-1)),o=s+n.length>=a.length||!ke(a.charAt(s+n.length));if(r&&o)return i;}}i=i.parentNode;}return null;}function rt(t,n){var r;const e=document.documentElement,i=Y(n),{clientX:a,clientY:s}=((r=t.touches)==null?void 0:r[0])??t;return{x:a+e.scrollLeft-e.clientLeft-i.x+n.scrollLeft,y:s+e.scrollTop-e.clientTop-i.y+n.scrollTop};}function sn(t,n){const e=Y(t),i=Y(n);return{x:e.x-i.x,y:e.y-i.y};}function K(t,n){if(!t||!n)return!1;for(;t&&t!=n;)t=t.parentNode;return t===n;}function ht(t,n){if(t.closest)return t.closest(n);if(t.matches||t.msMatchesSelector||t.webkitMatchesSelector){var e=t;if(!document.documentElement.contains(e))return null;do{if((e.matches||e.msMatchesSelector||e.webkitMatchesSelector).call(e,n))return e;e=e.parentElement||e.parentNode;}while(e!==null&&e.nodeType===1);return null;}return console.error(\"Your browser is not supported\"),null;}function rn(t){for(;t;){if(t.offsetWidth>0&&t.offsetHeight>0)return t;t=t.parentElement;}return null;}function on(){return document.head.createShadowRoot||document.head.attachShadow;}function ye(){var t=document.activeElement;return t.shadowRoot&&(t=t.shadowRoot.activeElement),t===document.body&&document.getSelection&&(t=document.getSelection().focusNode||document.body),t;}function yt(t){if(!t||!on())return document.body;for(;t.parentNode&&(t=t.parentNode);)if(t instanceof ShadowRoot)return t.host;return document.body;}const ln=Object.freeze(Object.defineProperty({__proto__:null,addClassName:Ct,closest:ht,getActiveElement:ye,getChildNodes:an,getClassName:Q,getClosestSizedElement:rn,getFocusableNodes:Pt,getNodePosition:Y,getRelativeEventPosition:rt,getRelativeNodePosition:sn,getRootNode:yt,getScrollSize:tn,getTargetNode:xt,hasClass:function(t,n){return\"classList\"in t?t.classList.contains(n):new RegExp(\"\\\\b\"+n+\"\\\\b\").test(t.className);},hasShadowParent:function(t){return!!yt(t);},insertNode:en,isChildOf:K,isShadowDomSupported:on,locateAttribute:it,locateClassName:vt,removeClassName:Jt,removeNode:nn,toNode:De},Symbol.toStringTag,{value:\"Module\"})),tt=typeof window<\"u\"?window:global;let Hn=class{constructor(t){this._mouseDown=!1,this._touchStarts=!1,this._touchActive=!1,this._longTapTimer=!1,this._gantt=t,this._domEvents=t._createDomEventScope();}attach(t,n,e){const i=this._gantt,a=t.getViewPort();this._originPosition=tt.getComputedStyle(a).display,this._restoreOriginPosition=()=>{a.style.position=this._originPosition;},this._originPosition===\"static\"&&(a.style.position=\"relative\");const s=i.$services.getService(\"state\");s.registerProvider(\"clickDrag\",()=>({autoscroll:!1}));let r=null;const o=()=>{r&&(this._mouseDown=!0,t.setStart(i.copy(r)),t.setPosition(i.copy(r)),t.setEnd(i.copy(r)),r=null);};this._domEvents.attach(a,\"mousedown\",f=>{u(f);});const l=yt(i.$root)||document.body;function d(f){return f.changedTouches&&f.changedTouches[0]||f;}this._domEvents.attach(l,\"mouseup\",f=>{h(f);}),this._domEvents.attach(a,\"mousemove\",f=>{_(f);}),this._domEvents.attach(a,\"touchstart\",f=>{this._touchStarts=!0,this._longTapTimer=setTimeout(()=>{this._touchStarts&&(u(d(f)),this._touchStarts=!1,this._touchActive=!0);},this._gantt.config.touch_drag);}),this._domEvents.attach(l,\"touchend\",f=>{this._touchStarts=!1,this._touchActive=!1,clearTimeout(this._longTapTimer),h(d(f));}),this._domEvents.attach(a,\"touchmove\",f=>{if(this._touchActive){let y=c();if(y&&i.utils.dom.closest(f.target,y))return;_(d(f)),f.preventDefault();}else this._touchStarts=!1,clearTimeout(this._longTapTimer);});const c=()=>{let f=\".gantt_task_line, .gantt_task_link\";return e!==void 0&&(f=e instanceof Array?e.join(\", \"):e),f;},u=f=>{r=null;let y=c();y&&i.utils.dom.closest(f.target,y)||(s.registerProvider(\"clickDrag\",()=>({autoscroll:this._mouseDown})),n&&f[n]!==!0||(r=this._getCoordinates(f,t)));},h=f=>{if(r=null,(!n||f[n]===!0)&&this._mouseDown===!0){this._mouseDown=!1;const y=this._getCoordinates(f,t);t.dragEnd(y);}},_=f=>{if(n&&f[n]!==!0)return;const y=this._gantt.ext.clickDrag,v=(this._gantt.config.drag_timeline||{}).useKey;if(y&&v&&!n&&f[v])return;let b=null;if(!this._mouseDown&&r)return b=this._getCoordinates(f,t),void(Math.abs(r.relative.left-b.relative.left)>5&&o());this._mouseDown===!0&&(b=this._getCoordinates(f,t),t.setEnd(b),t.render());};}detach(){const t=this._gantt;this._domEvents.detachAll(),this._restoreOriginPosition&&this._restoreOriginPosition(),t.$services.getService(\"state\").unregisterProvider(\"clickDrag\");}destructor(){this.detach();}_getCoordinates(t,n){const e=n.getViewPort(),i=e.getBoundingClientRect(),{clientX:a,clientY:s}=t;return{absolute:{left:a,top:s},relative:{left:a-i.left+e.scrollLeft,top:s-i.top+e.scrollTop}};}};var dn=function(){this._silent_mode=!1,this.listeners={};};dn.prototype={_silentStart:function(){this._silent_mode=!0;},_silentEnd:function(){this._silent_mode=!1;}};function lt(t){var n=new dn();t.attachEvent=function(e,i,a){e=\"ev_\"+e.toLowerCase(),n.listeners[e]||(n.listeners[e]=function(r){var o={},l=0,d=function(){var c=!0;for(var u in o){var h=o[u].apply(r,arguments);c=c&&h;}return c;};return d.addEvent=function(c,u){if(typeof c==\"function\"){var h;if(u&&u.id?h=u.id:(h=l,l++),u&&u.once){var _=c;c=function(){_(),d.removeEvent(h);};}return o[h]=c,h;}return!1;},d.removeEvent=function(c){delete o[c];},d.clear=function(){o={};},d;}(this)),a&&a.thisObject&&(i=i.bind(a.thisObject));var s=e+\":\"+n.listeners[e].addEvent(i,a);return a&&a.id&&(s=a.id),s;},t.attachAll=function(e){this.attachEvent(\"listen_all\",e);},t.callEvent=function(e,i){if(n._silent_mode)return!0;var a=\"ev_\"+e.toLowerCase(),s=n.listeners;return s.ev_listen_all&&s.ev_listen_all.apply(this,[e].concat(i)),!s[a]||s[a].apply(this,i);},t.checkEvent=function(e){return!!n.listeners[\"ev_\"+e.toLowerCase()];},t.detachEvent=function(e){if(e){var i=n.listeners;for(var a in i)i[a].removeEvent(e);var s=e.split(\":\");if(i=n.listeners,s.length===2){var r=s[0],o=s[1];i[r]&&i[r].removeEvent(o);}}},t.detachAllEvents=function(){for(var e in n.listeners)n.listeners[e].clear();};}var Me={second:1,minute:60,hour:3600,day:86400,week:604800,month:2592e3,quarter:7776e3,year:31536e3};function qt(t){return Me[t]||Me.hour;}function bt(t,n){if(t.forEach)t.forEach(n);else for(var e=t.slice(),i=0;i<e.length;i++)n(e[i],i);}function On(t,n){if(t.find)return t.find(n);for(var e=0;e<t.length;e++)if(n(t[e],e))return t[e];}function Wt(t,n){if(t.includes)return t.includes(n);for(var e=0;e<t.length;e++)if(t[e]===n)return!0;return!1;}function be(t){return Array.isArray?Array.isArray(t):t&&t.length!==void 0&&t.pop&&t.push;}function et(t){return!(!t||typeof t!=\"object\")&&!!(t.getFullYear&&t.getMonth&&t.getDate);}function $t(t){return et(t)&&!isNaN(t.getTime());}function xe(t,n){var e,i=function(){i.$cancelTimeout(),i.$pending=!0;var a=Array.prototype.slice.call(arguments);e=setTimeout(function(){t.apply(this,a),i.$pending=!1;},n);};return i.$pending=!1,i.$cancelTimeout=function(){clearTimeout(e),i.$pending=!1;},i.$execute=function(){var a=Array.prototype.slice.call(arguments);t.apply(this,a),i.$cancelTimeout();},i;}function st(t,n){return Ne(t)&&!Ne(n)&&(t=\"0\"),t;}function Ne(t){return t===0;}function Tt(t,n){for(var e,i,a,s=0,r=t.length-1;s<=r;)if(i=+t[e=Math.floor((s+r)/2)],a=+t[e-1],i<n)s=e+1;else{if(!(i>n)){for(;+t[e]==+t[e+1];)e++;return e;}if(!isNaN(a)&&a<n)return e-1;r=e-1;}return t.length-1;}class Bn{constructor(n,e,i){var a;this._el=document.createElement(\"div\"),this.defaultRender=(s,r)=>{this._el||(this._el=document.createElement(\"div\"));const o=this._el,l=Math.min(s.relative.top,r.relative.top),d=Math.max(s.relative.top,r.relative.top),c=Math.min(s.relative.left,r.relative.left),u=Math.max(s.relative.left,r.relative.left);if(this._singleRow){const h=this._getTaskPositionByTop(this._startPoint.relative.top);o.style.height=h.height+\"px\",o.style.top=h.top+\"px\";}else o.style.height=Math.abs(d-l)+\"px\",o.style.top=l+\"px\";return o.style.width=Math.abs(u-c)+\"px\",o.style.left=c+\"px\",o;},this._gantt=e,this._view=i,this._viewPort=n.viewPort,this._el.classList.add(n.className),typeof n.callback==\"function\"&&(this._callback=n.callback),this.render=()=>{let s;s=n.render?n.render(this._startPoint,this._endPoint):this.defaultRender(this._startPoint,this._endPoint),s!==this._el&&(this._el&&this._el.parentNode&&this._el.parentNode.removeChild(this._el),this._el=s),n.className!==\"\"&&this._el.classList.add(n.className),this.draw();},(a=this._viewPort).attachEvent&&a.detachEvent||lt(this._viewPort),this._singleRow=n.singleRow,this._useRequestAnimationFrame=n.useRequestAnimationFrame;}draw(){if(this._useRequestAnimationFrame)return requestAnimationFrame(()=>{this._viewPort.appendChild(this.getElement());});this._viewPort.appendChild(this.getElement());}clear(){if(this._useRequestAnimationFrame)return requestAnimationFrame(()=>{this._el.parentNode&&this._viewPort.removeChild(this._el);});this._el.parentNode&&this._viewPort.removeChild(this._el);}getElement(){return this._el;}getViewPort(){return this._viewPort;}setStart(n){const e=this._gantt;this._startPoint=n,this._startDate=e.dateFromPos(this._startPoint.relative.left),this._viewPort.callEvent(\"onBeforeDrag\",[this._startPoint]);}setEnd(n){const e=this._gantt;if(this._endPoint=n,this._singleRow){const i=this._getTaskPositionByTop(this._startPoint.relative.top);this._endPoint.relative.top=i.top;}this._endDate=e.dateFromPos(this._endPoint.relative.left),this._startPoint.relative.left>this._endPoint.relative.left&&(this._positionPoint={relative:{left:this._endPoint.relative.left,top:this._positionPoint.relative.top},absolute:{left:this._endPoint.absolute.left,top:this._positionPoint.absolute.top}}),this._startPoint.relative.top>this._endPoint.relative.top&&(this._positionPoint={relative:{left:this._positionPoint.relative.left,top:this._endPoint.relative.top},absolute:{left:this._positionPoint.absolute.left,top:this._endPoint.absolute.top}}),this._viewPort.callEvent(\"onDrag\",[this._startPoint,this._endPoint]);}setPosition(n){this._positionPoint=n;}dragEnd(n){const e=this._gantt;n.relative.left<0&&(n.relative.left=0),this._viewPort.callEvent(\"onBeforeDragEnd\",[this._startPoint,n]),this.setEnd(n),this._endDate=this._endDate||e.getState().max_date,this._startDate.valueOf()>this._endDate.valueOf()&&([this._startDate,this._endDate]=[this._endDate,this._startDate]),this.clear();const i=e.getTaskByTime(this._startDate,this._endDate),a=this._getTasksByTop(this._startPoint.relative.top,this._endPoint.relative.top);this._viewPort.callEvent(\"onDragEnd\",[this._startPoint,this._endPoint]),this._callback&&this._callback(this._startPoint,this._endPoint,this._startDate,this._endDate,i,a);}getInBounds(){return this._singleRow;}_getTasksByTop(n,e){const i=this._gantt;let a=n,s=e;n>e&&(a=e,s=n);const r=this._getTaskPositionByTop(a).index,o=this._getTaskPositionByTop(s).index,l=[];for(let d=r;d<=o;d++)i.getTaskByIndex(d)&&l.push(i.getTaskByIndex(d));return l;}_getTaskPositionByTop(n){const e=this._gantt,i=this._view,a=i.getItemIndexByTopPosition(n),s=e.getTaskByIndex(a);if(s){const r=i.getItemHeight(s.id);return{top:i.getItemTop(s.id)||0,height:r||0,index:a};}{const r=i.getTotalHeight();return{top:n>r?r:0,height:e.config.row_height,index:n>r?e.getTaskCount():0};}}}let se=!1;class Kt{constructor(n){this._mouseDown=!1,this._calculateDirectionVector=()=>{if(this._trace.length>=10){const e=this._trace.slice(this._trace.length-10),i=[];for(let s=1;s<e.length;s++)i.push({x:e[s].x-e[s-1].x,y:e[s].y-e[s-1].y});const a={x:0,y:0};return i.forEach(s=>{a.x+=s.x,a.y+=s.y;}),{magnitude:Math.sqrt(a.x*a.x+a.y*a.y),angleDegrees:180*Math.atan2(Math.abs(a.y),Math.abs(a.x))/Math.PI};}return null;},this._applyDndReadyStyles=()=>{this._timeline.$task.classList.add(\"gantt_timeline_move_available\");},this._clearDndReadyStyles=()=>{this._timeline.$task.classList.remove(\"gantt_timeline_move_available\");},this._getScrollPosition=e=>{const i=this._gantt;return{x:i.$ui.getView(e.$config.scrollX).getScrollState().position,y:i.$ui.getView(e.$config.scrollY).getScrollState().position};},this._countNewScrollPosition=e=>{const i=this._calculateDirectionVector();let a=this._startPoint.x-e.x,s=this._startPoint.y-e.y;return i&&(i.angleDegrees<15?s=0:i.angleDegrees>75&&(a=0)),{x:this._scrollState.x+a,y:this._scrollState.y+s};},this._setScrollPosition=(e,i)=>{const a=this._gantt;requestAnimationFrame(()=>{a.scrollLayoutCell(e.$id,i.x,i.y);});},this._stopDrag=e=>{const i=this._gantt;if(this._trace=[],i.$root.classList.remove(\"gantt_noselect\"),this._originalReadonly!==void 0&&this._mouseDown&&(i.config.readonly=this._originalReadonly,i.config.drag_timeline&&i.config.drag_timeline.render&&i.render()),this._originAutoscroll!==void 0&&(i.config.autoscroll=this._originAutoscroll),i.config.drag_timeline){const{useKey:a}=i.config.drag_timeline;if(a&&e[a]!==!0)return;}this._mouseDown=!1,se=!1;},this._startDrag=e=>{const i=this._gantt;this._originAutoscroll=i.config.autoscroll,i.config.autoscroll=!1,se=!0,i.$root.classList.add(\"gantt_noselect\"),this._originalReadonly=i.config.readonly,i.config.readonly=!0,i.config.drag_timeline&&i.config.drag_timeline.render&&i.render(),this._trace=[],this._mouseDown=!0;const{x:a,y:s}=this._getScrollPosition(this._timeline);this._scrollState={x:a,y:s},this._startPoint={x:e.clientX,y:e.clientY},this._trace.push(this._startPoint);},this._gantt=n,this._domEvents=n._createDomEventScope(),this._trace=[];}static create(n){return new Kt(n);}static _isDragInProgress(){return se;}destructor(){this._domEvents.detachAll();}attach(n){this._timeline=n;const e=this._gantt;this._domEvents.attach(n.$task,\"mousedown\",i=>{if(!e.config.drag_timeline)return;const{useKey:a,ignore:s,enabled:r}=e.config.drag_timeline;if(r===!1)return;let o=\".gantt_task_line, .gantt_task_link\";s!==void 0&&(o=s instanceof Array?s.join(\", \"):s),o&&e.utils.dom.closest(i.target,o)||a&&i[a]!==!0||this._startDrag(i);}),this._domEvents.attach(document,\"keydown\",i=>{if(!e.config.drag_timeline)return;const{useKey:a}=e.config.drag_timeline;a&&i[a]===!0&&this._applyDndReadyStyles();}),this._domEvents.attach(document,\"keyup\",i=>{if(!e.config.drag_timeline)return;const{useKey:a}=e.config.drag_timeline;a&&i[a]===!1&&(this._clearDndReadyStyles(),this._stopDrag(i));}),this._domEvents.attach(document,\"mouseup\",i=>{this._stopDrag(i);}),this._domEvents.attach(e.$root,\"mouseup\",i=>{this._stopDrag(i);}),this._domEvents.attach(document,\"mouseleave\",i=>{this._stopDrag(i);}),this._domEvents.attach(e.$root,\"mouseleave\",i=>{this._stopDrag(i);}),this._domEvents.attach(e.$root,\"mousemove\",i=>{if(!e.config.drag_timeline)return;const{useKey:a}=e.config.drag_timeline;if(a&&i[a]!==!0)return;const s=this._gantt.ext.clickDrag,r=(this._gantt.config.click_drag||{}).useKey;if((!s||!r||a||!i[r])&&this._mouseDown===!0){this._trace.push({x:i.clientX,y:i.clientY});const o=this._countNewScrollPosition({x:i.clientX,y:i.clientY});this._setScrollPosition(n,o),this._scrollState=o,this._startPoint={x:i.clientX,y:i.clientY};}});}}var re,zn={}.constructor.toString();function X(t){var n,e;if(t&&typeof t==\"object\")switch(!0){case et(t):e=new Date(t);break;case be(t):for(e=new Array(t.length),n=0;n<t.length;n++)e[n]=X(t[n]);break;default:if(function(i){return i.constructor.toString()!==zn;}(t))e=Object.create(t);else{if(function(i){return i.$$typeof&&i.$$typeof.toString().includes(\"react.\");}(t))return e=t;e={};}for(n in t)Object.prototype.hasOwnProperty.apply(t,[n])&&(e[n]=X(t[n]));}return e||t;}function R(t,n,e){for(var i in n)(t[i]===void 0||e)&&(t[i]=n[i]);return t;}function q(t){return t!==void 0;}function ot(){return re||(re=(/* @__PURE__ */new Date()).valueOf()),++re;}function B(t,n){return t.bind?t.bind(n):function(){return t.apply(n,arguments);};}function cn(t,n,e,i){t.addEventListener?t.addEventListener(n,e,i!==void 0&&i):t.attachEvent&&t.attachEvent(\"on\"+n,e);}function un(t,n,e,i){t.removeEventListener?t.removeEventListener(n,e,i!==void 0&&i):t.detachEvent&&t.detachEvent(\"on\"+n,e);}const jn=Object.freeze(Object.defineProperty({__proto__:null,bind:B,copy:X,defined:q,event:cn,eventRemove:un,mixin:R,uid:ot},Symbol.toStringTag,{value:\"Module\"}));function Xt(t){var n=t.date;return t.$services,{getSum:function(e,i,a){a===void 0&&(a=e.length-1),i===void 0&&(i=0);for(var s=0,r=i;r<=a;r++)s+=e[r];return s;},setSumWidth:function(e,i,a,s){var r=i.width;s===void 0&&(s=r.length-1),a===void 0&&(a=0);var o=s-a+1;if(!(a>r.length-1||o<=0||s>r.length-1)){var l=e-this.getSum(r,a,s);this.adjustSize(l,r,a,s),this.adjustSize(-l,r,s+1),i.full_width=this.getSum(r);}},splitSize:function(e,i){for(var a=[],s=0;s<i;s++)a[s]=0;return this.adjustSize(e,a),a;},adjustSize:function(e,i,a,s){a||(a=0),s===void 0&&(s=i.length-1);for(var r=s-a+1,o=this.getSum(i,a,s),l=a;l<=s;l++){var d=Math.floor(e*(o?i[l]/o:1/r));o-=i[l],e-=d,r--,i[l]+=d;}i[i.length-1]+=e;},sortScales:function(e){function i(s,r){var o=new Date(1970,0,1);return n.add(o,r,s)-o;}e.sort(function(s,r){return i(s.unit,s.step)<i(r.unit,r.step)?1:i(s.unit,s.step)>i(r.unit,r.step)?-1:0;});for(var a=0;a<e.length;a++)e[a].index=a;},_prepareScaleObject:function(e){var i=e.format;return i||(i=e.template||e.date||\"%d %M\"),typeof i==\"string\"&&(i=t.date.date_to_str(i)),{unit:e.unit||\"day\",step:e.step||1,format:i,css:e.css,projection:e.projection||null,column_width:e.column_width||null};},primaryScale:function(e){const i=(e||t.config).scales[0],a={unit:i.unit,step:i.step,template:i.template,format:i.format,date:i.date,css:i.css||t.templates.scale_cell_class,projection:i.projection||null,column_width:i.column_width||null};return this._prepareScaleObject(a);},getAdditionalScales:function(e){return(e||t.config).scales.slice(1).map(function(i){return this._prepareScaleObject(i);}.bind(this));},prepareConfigs:function(e,i,a,s,r,o,l){for(var d=this.splitSize(s,e.length),c=a,u=[],h=e.length-1;h>=0;h--){var _=h==e.length-1,f=this.initScaleConfig(e[h],r,o);_&&this.processIgnores(f),_&&f.column_width&&(c=f.column_width*(f.display_count||f.count)),this.initColSizes(f,i,c,d[h]),this.limitVisibleRange(f),_&&(c=f.full_width),u.unshift(f);}for(h=0;h<u.length-1;h++)this.alineScaleColumns(u[u.length-1],u[h]);for(h=0;h<u.length;h++)l&&this.reverseScale(u[h]),this.setPosSettings(u[h]);return u;},reverseScale:function(e){e.width=e.width.reverse(),e.trace_x=e.trace_x.reverse();var i=e.trace_indexes;e.trace_indexes={},e.trace_index_transition={},e.rtl=!0;for(var a=0;a<e.trace_x.length;a++)e.trace_indexes[e.trace_x[a].valueOf()]=a,e.trace_index_transition[i[e.trace_x[a].valueOf()]]=a;return e;},setPosSettings:function(e){for(var i=0,a=e.trace_x.length;i<a;i++)e.left.push((e.width[i-1]||0)+(e.left[i-1]||0));},_ignore_time_config:function(e,i){if(t.config.skip_off_time){for(var a=!0,s=e,r=0;r<i.step;r++)r&&(s=n.add(e,r,i.unit)),a=a&&!this.isWorkTime(s,i.unit);return a;}return!1;},processIgnores:function(e){e.ignore_x={},e.display_count=e.count;},initColSizes:function(e,i,a,s){var r=a;e.height=s;var o=e.display_count===void 0?e.count:e.display_count;o||(o=1);const l=!isNaN(1*e.column_width)&&1*e.column_width>0;if(l){const h=1*e.column_width;e.col_width=h,r=h*o;}else e.col_width=Math.floor(r/o),i&&e.col_width<i&&(e.col_width=i,r=e.col_width*o);e.width=[];for(var d=e.ignore_x||{},c=0;c<e.trace_x.length;c++)if(d[e.trace_x[c].valueOf()]||e.display_count==e.count)e.width[c]=l?e.col_width:0;else{var u=1;e.unit==\"month\"&&(u=Math.round((n.add(e.trace_x[c],e.step,e.unit)-e.trace_x[c])/864e5)),e.width[c]=u;}l||this.adjustSize(r-this.getSum(e.width),e.width),e.full_width=this.getSum(e.width);},initScaleConfig:function(e,i,a){var s=R({count:0,col_width:0,full_width:0,height:0,width:[],left:[],trace_x:[],trace_indexes:{},min_date:new Date(i),max_date:new Date(a)},e);return this.eachColumn(e.unit,e.step,i,a,function(r){s.count++,s.trace_x.push(new Date(r)),s.trace_indexes[r.valueOf()]=s.trace_x.length-1;}),s.trace_x_ascending=s.trace_x.slice(),s;},iterateScales:function(e,i,a,s,r){for(var o=i.trace_x,l=e.trace_x,d=a||0,c=s||l.length-1,u=0,h=1;h<o.length;h++){var _=e.trace_indexes[+o[h]];_!==void 0&&_<=c&&(r&&r.apply(this,[u,h,d,_]),d=_,u=h);}},alineScaleColumns:function(e,i,a,s){this.iterateScales(e,i,a,s,function(r,o,l,d){var c=this.getSum(e.width,l,d-1);this.getSum(i.width,r,o-1)!=c&&this.setSumWidth(c,i,r,o-1);});},eachColumn:function(e,i,a,s,r){var o=new Date(a),l=new Date(s);n[e+\"_start\"]&&(o=n[e+\"_start\"](o));var d=new Date(o);for(+d>=+l&&(l=n.add(d,i,e));+d<+l;){r.call(this,new Date(d));var c=d.getTimezoneOffset();d=n.add(d,i,e),d=t._correct_dst_change(d,c,i,e),n[e+\"_start\"]&&(d=n[e+\"_start\"](d));}},limitVisibleRange:function(e){var i=e.trace_x,a=e.width.length-1,s=0;if(+i[0]<+e.min_date&&a!=0){var r=Math.floor(e.width[0]*((i[1]-e.min_date)/(i[1]-i[0])));s+=e.width[0]-r,e.width[0]=r,i[0]=new Date(e.min_date);}var o=i.length-1,l=i[o],d=n.add(l,e.step,e.unit);if(+d>+e.max_date&&o>0&&(r=e.width[o]-Math.floor(e.width[o]*((d-e.max_date)/(d-l))),s+=e.width[o]-r,e.width[o]=r),s){for(var c=this.getSum(e.width),u=0,h=0;h<e.width.length;h++){var _=Math.floor(s*(e.width[h]/c));e.width[h]+=_,u+=_;}this.adjustSize(s-u,e.width);}}};}function Wn(t){(function(){var n=[];function e(){return!!n.length;}function i(d){setTimeout(function(){e()||t.$destroyed||t.focus();},1);}function a(d){t.eventRemove(d,\"keydown\",r),t.event(d,\"keydown\",r),n.push(d);}function s(){var d=n.pop();d&&t.eventRemove(d,\"keydown\",r),i();}function r(d){var c=d.currentTarget;c==n[n.length-1]&&t.$keyboardNavigation.trapFocus(c,d);}function o(){a(t.getLightbox());}t.attachEvent(\"onLightbox\",o),t.attachEvent(\"onAfterLightbox\",s),t.attachEvent(\"onLightboxChange\",function(){s(),o();}),t.attachEvent(\"onAfterQuickInfo\",function(){i();}),t.attachEvent(\"onMessagePopup\",function(d){l=t.utils.dom.getActiveElement(),a(d);}),t.attachEvent(\"onAfterMessagePopup\",function(){s(),setTimeout(function(){l&&l.focus&&(l.focus(),l=null);},1);});var l=null;t.$keyboardNavigation.isModal=e;})();}class Fn{constructor(n){this.show=(e,i)=>{i===void 0?this._showForTask(e):this._showAtCoordinates(e,i);},this.hide=e=>{const i=this._gantt,a=this._quickInfoBox;this._quickInfoBoxId=0;const s=this._quickInfoTask;if(this._quickInfoTask=null,a&&a.parentNode){if(i.config.quick_info_detached)return i.callEvent(\"onAfterQuickInfo\",[s]),a.parentNode.removeChild(a);a.className+=\" gantt_qi_hidden\",a.style.right===\"auto\"?a.style.left=\"-350px\":a.style.right=\"-350px\",e&&(a.style.left=a.style.right=\"\",a.parentNode.removeChild(a)),i.callEvent(\"onAfterQuickInfo\",[s]);}},this.getNode=()=>this._quickInfoBox?this._quickInfoBox:null,this.setContainer=e=>{e&&(this._container=typeof e==\"string\"?document.getElementById(e):e);},this.setContent=e=>{const i=this._gantt,a={taskId:null,header:{title:\"\",date:\"\"},content:\"\",buttons:i.config.quickinfo_buttons};e||(e=a),e.taskId||(e.taskId=a.taskId),e.header||(e.header=a.header),e.header.title||(e.header.title=a.header.title),e.header.date||(e.header.date=a.header.date),e.content||(e.content=a.content),e.buttons||(e.buttons=a.buttons);let s=this.getNode();s||(s=this._createQuickInfoElement()),e.taskId&&(this._quickInfoBoxId=e.taskId);const r=s.querySelector(\".gantt_cal_qi_title\"),o=r.querySelector(\".gantt_cal_qi_tcontent\"),l=r.querySelector(\".gantt_cal_qi_tdate\"),d=s.querySelector(\".gantt_cal_qi_content\"),c=s.querySelector(\".gantt_cal_qi_controls\");i._waiAria.quickInfoHeader(s,[e.header.title,e.header.date].join(\" \")),o.innerHTML=e.header.title,l.innerHTML=e.header.date,e.header.title||e.header.date?r.style.display=\"\":r.style.display=\"none\",d.innerHTML=e.content;const u=e.buttons;u.length?c.style.display=\"\":c.style.display=\"none\";let h=\"\";for(let _=0;_<u.length;_++){const f=i._waiAria.quickInfoButtonAttrString(i.locale.labels[u[_]]);h+=`<div class=\"gantt_qi_big_icon ${u[_]} dhx_gantt_${u[_]}\" title=\"${i.locale.labels[u[_]]}\" ${f}>\n            <div class='dhx_menu_icon dhx_gantt_icon ${u[_]} gantt_menu_icon dhx_gantt_${u[_]}'></div>\n            <div>${i.locale.labels[u[_]]}</div>\n         </div>`;}c.innerHTML=h,i.eventRemove(s,\"click\",this._qiButtonClickHandler),i.eventRemove(s,\"keypress\",this._qiKeyPressHandler),i.event(s,\"click\",this._qiButtonClickHandler),i.event(s,\"keypress\",this._qiKeyPressHandler);},this._qiButtonClickHandler=e=>{this._qi_button_click(e.target);},this._qiKeyPressHandler=e=>{const i=e.which;i!==13&&i!==32||setTimeout(()=>{this._qi_button_click(e.target);},1);},this._gantt=n;}_showAtCoordinates(n,e){this.hide(!0),this._quickInfoBoxId=0,this._quickInfoTask=null,this._quickInfoBox||(this._createQuickInfoElement(),this.setContent()),this._appendAtCoordinates(n,e),this._gantt.callEvent(\"onQuickInfo\",[null]);}_showForTask(n){const e=this._gantt;if(n===this._quickInfoBoxId&&e.utils.dom.isChildOf(this._quickInfoBox,document.body)||!e.config.show_quick_info)return;this.hide(!0);const i=this._getContainer(),a=this._get_event_counter_part(n,6,i.xViewport,i.yViewport);a&&(this._quickInfoBox=this._init_quick_info(n),this._quickInfoTask=n,this._quickInfoBox.className=this._prepare_quick_info_classname(n),this._fill_quick_data(n),this._show_quick_info(a,6),e.callEvent(\"onQuickInfo\",[n]));}_get_event_counter_part(n,e,i,a){const s=this._gantt;let r=s.getTaskNode(n);if(!r&&(r=s.getTaskRowNode(n),!r))return null;let o=0;const l=e+r.offsetTop+r.offsetHeight;let d=r;if(s.utils.dom.isChildOf(d,i))for(;d&&d!==i;)o+=d.offsetLeft,d=d.offsetParent;const c=s.getScrollState();return d?{left:o,top:l,dx:o+r.offsetWidth/2-c.x>i.offsetWidth/2?1:0,dy:l+r.offsetHeight/2-c.y>a.offsetHeight/2?1:0,width:r.offsetWidth,height:r.offsetHeight}:null;}_createQuickInfoElement(){const n=this._gantt,e=document.createElement(\"div\");e.className+=\"gantt_cal_quick_info\",n._waiAria.quickInfoAttr(e);var i=`\n\t\t<div class=\"gantt_cal_qi_tcontrols\">\n\t\t\t<a class=\"gantt_cal_qi_close_btn dhx_gantt_icon dhx_gantt_icon_close\"></a>\n\t\t</div>\n\t\t<div class=\"gantt_cal_qi_title\" ${n._waiAria.quickInfoHeaderAttrString()}>\n\t\t\t\t\n\t\t\t\t<div class=\"gantt_cal_qi_tcontent\"></div>\n\t\t\t\t<div class=\"gantt_cal_qi_tdate\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"gantt_cal_qi_content\"></div>`;if(i+='<div class=\"gantt_cal_qi_controls\">',i+=\"</div>\",e.innerHTML=i,n.config.quick_info_detached){const a=this._getContainer();n.event(a.parent,\"scroll\",()=>{this.hide();});}return this._quickInfoBox=e,e;}_init_quick_info(n){const e=this._gantt,i=e.getTask(n);return typeof this._quickInfoReadonly==\"boolean\"&&e.isReadonly(i)!==this._quickInfoReadonly&&(this.hide(!0),this._quickInfoBox=null),this._quickInfoReadonly=e.isReadonly(i),this._quickInfoBox||(this._quickInfoBox=this._createQuickInfoElement()),this._quickInfoBox;}_prepare_quick_info_classname(n){const e=this._gantt,i=e.getTask(n);let a=`gantt_cal_quick_info gantt_${e.getTaskType(i)}`;const s=e.templates.quick_info_class(i.start_date,i.end_date,i);return s&&(a+=\" \"+s),a;}_fill_quick_data(n){const e=this._gantt,i=e.getTask(n);this._quickInfoBoxId=n;let a=[];if(this._quickInfoReadonly){const s=e.config.quickinfo_buttons,r={icon_delete:!0,icon_edit:!0};for(let o=0;o<s.length;o++)this._quickInfoReadonly&&r[s[o]]||a.push(s[o]);}else a=e.config.quickinfo_buttons;this.setContent({header:{title:e.templates.quick_info_title(i.start_date,i.end_date,i),date:e.templates.quick_info_date(i.start_date,i.end_date,i)},content:e.templates.quick_info_content(i.start_date,i.end_date,i),buttons:a});}_appendAtCoordinates(n,e){const i=this._quickInfoBox,a=this._getContainer();i.parentNode&&i.parentNode.nodeName.toLowerCase()!==\"#document-fragment\"||a.parent.appendChild(i),i.style.left=n+\"px\",i.style.top=e+\"px\";}_show_quick_info(n,e){const i=this._gantt,a=this._quickInfoBox;if(i.config.quick_info_detached){const s=this._getContainer();a.parentNode&&a.parentNode.nodeName.toLowerCase()!==\"#document-fragment\"||s.parent.appendChild(a);const r=a.offsetWidth,o=a.offsetHeight,l=i.getScrollState(),d=s.xViewport,c=s.yViewport,u=d.offsetWidth+l.x-r,h=n.top-l.y+o;let _=n.top;h>c.offsetHeight/2&&(_=n.top-(o+n.height+2*e),_<l.y&&h<=c.offsetHeight&&(_=n.top)),_<l.y&&(_=l.y);const f=Math.min(Math.max(l.x,n.left-n.dx*(r-n.width)),u),y=_;this._appendAtCoordinates(f,y);}else a.style.top=\"20px\",n.dx===1?(a.style.right=\"auto\",a.style.left=\"-300px\",setTimeout(()=>{a.style.left=\"10px\";},1)):(a.style.left=\"auto\",a.style.right=\"-300px\",setTimeout(()=>{a.style.right=\"10px\";},1)),a.className+=\" gantt_qi_\"+(n.dx===1?\"left\":\"right\"),i.$root.appendChild(a);}_qi_button_click(n){const e=this._gantt,i=this._quickInfoBox;if(!n||n===i)return;if(n.closest(\".gantt_cal_qi_close_btn\"))return void this.hide();const a=n.className;if(a.indexOf(\"_icon\")!==-1){const s=this._quickInfoBoxId;e.$click.buttons[a.split(\" \")[1].replace(\"icon_\",\"\")](s);}else this._qi_button_click(n.parentNode);}_getContainer(){const n=this._gantt;let e=this._container?this._container:n.$task_data;return e&&e.offsetHeight&&e.offsetWidth?{parent:e,xViewport:n.$task,yViewport:n.$task_data}:(e=this._container?this._container:n.$grid_data,e&&e.offsetHeight&&e.offsetWidth?{parent:e,xViewport:n.$grid,yViewport:n.$grid_data}:{parent:this._container?this._container:n.$layout,xViewport:n.$layout,yViewport:n.$layout});}}function ae(t,n){t=t||cn,n=n||un;var e=[],i={attach:function(a,s,r,o){e.push({element:a,event:s,callback:r,capture:o}),t(a,s,r,o);},detach:function(a,s,r,o){n(a,s,r,o);for(var l=0;l<e.length;l++){var d=e[l];d.element===a&&d.event===s&&d.callback===r&&d.capture===o&&(e.splice(l,1),l--);}},detachAll:function(){for(var a=e.slice(),s=0;s<a.length;s++){var r=a[s];i.detach(r.element,r.event,r.callback,r.capture),i.detach(r.element,r.event,r.callback,void 0),i.detach(r.element,r.event,r.callback,!1),i.detach(r.element,r.event,r.callback,!0);}e.splice(0,e.length);},extend:function(){return ae(this.event,this.eventRemove);}};return i;}class Vn{constructor(n){this._gantt=n;}getNode(){const n=this._gantt;return this._tooltipNode||(this._tooltipNode=document.createElement(\"div\"),this._tooltipNode.className=\"gantt_tooltip\",n._waiAria.tooltipAttr(this._tooltipNode)),this._tooltipNode;}setViewport(n){return this._root=n,this;}show(n,e){const i=this._gantt,a=document.body,s=this.getNode();if(K(s,a)||(this.hide(),s.style.top=s.style.top||\"0px\",s.style.left=s.style.left||\"0px\",a.appendChild(s)),this._isLikeMouseEvent(n)){const r=this._calculateTooltipPosition(n);e=r.top,n=r.left;}return s.style.top=e+\"px\",s.style.left=n+\"px\",i._waiAria.tooltipVisibleAttr(s),this;}hide(){const n=this._gantt,e=this.getNode();return e&&e.parentNode&&e.parentNode.removeChild(e),n._waiAria.tooltipHiddenAttr(e),this;}setContent(n){return this.getNode().innerHTML=n,this;}_isLikeMouseEvent(n){return!(!n||typeof n!=\"object\")&&\"clientX\"in n&&\"clientY\"in n;}_getViewPort(){return this._root||document.body;}_calculateTooltipPosition(n){const e=this._gantt,i=this._getViewPortSize(),a=this.getNode(),s={top:0,left:0,width:a.offsetWidth,height:a.offsetHeight,bottom:0,right:0},r=e.config.tooltip_offset_x,o=e.config.tooltip_offset_y,l=document.body,d=rt(n,l),c=Y(l);d.y+=c.y,s.top=d.y,s.left=d.x,s.top+=o,s.left+=r,s.bottom=s.top+s.height,s.right=s.left+s.width;const u=window.scrollY+l.scrollTop;return s.top<i.top-u?(s.top=i.top,s.bottom=s.top+s.height):s.bottom>i.bottom&&(s.bottom=i.bottom,s.top=s.bottom-s.height),s.left<i.left?(s.left=i.left,s.right=i.left+s.width):s.right>i.right&&(s.right=i.right,s.left=s.right-s.width),d.x>=s.left&&d.x<=s.right&&(s.left=d.x-s.width-r,s.right=s.left+s.width),d.y>=s.top&&d.y<=s.bottom&&(s.top=d.y-s.height-o,s.bottom=s.top+s.height),s.left<0&&(s.left=0),s.right<0&&(s.right=0),s;}_getViewPortSize(){const n=this._gantt,e=this._getViewPort();let i,a=e,s=window.scrollY+document.body.scrollTop,r=window.scrollX+document.body.scrollLeft;return e===n.$task_data?(a=n.$task,s=0,r=0,i=Y(n.$task)):i=Y(a),{left:i.x+r,top:i.y+s,width:i.width,height:i.height,bottom:i.y+i.height+s,right:i.x+i.width+r};}}class Un{constructor(n){this._listeners={},this.tooltip=new Vn(n),this._gantt=n,this._domEvents=ae(),this._initDelayedFunctions();}destructor(){this.tooltip.hide(),this._domEvents.detachAll();}hideTooltip(){this.delayHide();}attach(n){let e=document.body;const i=this._gantt;n.global||(e=i.$root);let a=null;const s=r=>{const o=xt(r),l=ht(o,n.selector);if(K(o,this.tooltip.getNode()))return;const d=()=>{a=l,n.onmouseenter(r,l);};a?l&&l===a?n.onmousemove(r,l):(n.onmouseleave(r,a),a=null,l&&l!==a&&d()):l&&d();};this.detach(n.selector),this._domEvents.attach(e,\"mousemove\",s),this._listeners[n.selector]={node:e,handler:s};}detach(n){const e=this._listeners[n];e&&this._domEvents.detach(e.node,\"mousemove\",e.handler);}tooltipFor(n){const e=i=>{let a=i;return document.createEventObject&&!document.createEvent&&(a=document.createEventObject(i)),a;};this._initDelayedFunctions(),this.attach({selector:n.selector,global:n.global,onmouseenter:(i,a)=>{const s=n.html(i,a);s&&this.delayShow(e(i),s);},onmousemove:(i,a)=>{const s=n.html(i,a);s?this.delayShow(e(i),s):(this.delayShow.$cancelTimeout(),this.delayHide());},onmouseleave:()=>{this.delayShow.$cancelTimeout(),this.delayHide();}});}_initDelayedFunctions(){const n=this._gantt;this.delayShow&&this.delayShow.$cancelTimeout(),this.delayHide&&this.delayHide.$cancelTimeout(),this.tooltip.hide(),this.delayShow=xe((e,i)=>{n.callEvent(\"onBeforeTooltip\",[e])===!1?this.tooltip.hide():(this.tooltip.setContent(i),this.tooltip.show(e));},n.config.tooltip_timeout||1),this.delayHide=xe(()=>{this.delayShow.$cancelTimeout(),this.tooltip.hide();},n.config.tooltip_hide_timeout||1);}}const Le={onBeforeUndo:\"onAfterUndo\",onBeforeRedo:\"onAfterRedo\"},Re=[\"onTaskDragStart\",\"onAfterTaskUpdate\",\"onAfterParentExpand\",\"onAfterTaskDelete\",\"onBeforeBatchUpdate\"];class qn{constructor(n,e){this._batchAction=null,this._batchMode=!1,this._ignore=!1,this._ignoreMoveEvents=!1,this._initialTasks={},this._initialLinks={},this._nestedTasks={},this._nestedLinks={},this._undo=n,this._gantt=e,this._attachEvents();}store(n,e,i=!1){return e===this._gantt.config.undo_types.task?this._storeTask(n,i):e===this._gantt.config.undo_types.link&&this._storeLink(n,i);}isMoveEventsIgnored(){return this._ignoreMoveEvents;}toggleIgnoreMoveEvents(n){this._ignoreMoveEvents=n||!1;}startIgnore(){this._ignore=!0;}stopIgnore(){this._ignore=!1;}startBatchAction(){this._timeout||(this._timeout=setTimeout(()=>{this.stopBatchAction(),this._timeout=null;},10)),this._ignore||this._batchMode||(this._batchMode=!0,this._batchAction=this._undo.action.create());}stopBatchAction(){if(this._ignore)return;const n=this._undo;this._batchAction&&n.logAction(this._batchAction),this._batchMode=!1,this._batchAction=null;}onTaskAdded(n){this._ignore||this._storeTaskCommand(n,this._undo.command.type.add);}onTaskUpdated(n){this._ignore||this._storeTaskCommand(n,this._undo.command.type.update);}onTaskMoved(n){this._ignore||(n.$local_index=this._gantt.getTaskIndex(n.id),this._storeEntityCommand(n,this.getInitialTask(n.id),this._undo.command.type.move,this._undo.command.entity.task));}onTaskDeleted(n){if(!this._ignore){if(this._storeTaskCommand(n,this._undo.command.type.remove),this._nestedTasks[n.id]){const e=this._nestedTasks[n.id];for(let i=0;i<e.length;i++)this._storeTaskCommand(e[i],this._undo.command.type.remove);}if(this._nestedLinks[n.id]){const e=this._nestedLinks[n.id];for(let i=0;i<e.length;i++)this._storeLinkCommand(e[i],this._undo.command.type.remove);}}}onLinkAdded(n){this._ignore||this._storeLinkCommand(n,this._undo.command.type.add);}onLinkUpdated(n){this._ignore||this._storeLinkCommand(n,this._undo.command.type.update);}onLinkDeleted(n){this._ignore||this._storeLinkCommand(n,this._undo.command.type.remove);}setNestedTasks(n,e){const i=this._gantt;let a=null;const s=[];let r=this._getLinks(i.getTask(n));for(let d=0;d<e.length;d++)a=this.setInitialTask(e[d]),r=r.concat(this._getLinks(a)),s.push(a);const o={};for(let d=0;d<r.length;d++)o[r[d]]=!0;const l=[];for(const d in o)l.push(this.setInitialLink(d));this._nestedTasks[n]=s,this._nestedLinks[n]=l;}setInitialTask(n,e){const i=this._gantt;if(e||!this._initialTasks[n]||!this._batchMode){const a=i.copy(i.getTask(n));a.$index=i.getGlobalTaskIndex(n),a.$local_index=i.getTaskIndex(n),this.setInitialTaskObject(n,a);}return this._initialTasks[n];}getInitialTask(n){return this._initialTasks[n];}clearInitialTasks(){this._initialTasks={};}setInitialTaskObject(n,e){this._initialTasks[n]=e;}setInitialLink(n,e){return this._initialLinks[n]&&this._batchMode||(this._initialLinks[n]=this._gantt.copy(this._gantt.getLink(n))),this._initialLinks[n];}getInitialLink(n){return this._initialLinks[n];}clearInitialLinks(){this._initialLinks={};}_attachEvents(){let n=null;const e=this._gantt,i=()=>{n||(n=setTimeout(()=>{n=null;}),this.clearInitialTasks(),e.eachTask(l=>{this.setInitialTask(l.id);}),this.clearInitialLinks(),e.getLinks().forEach(l=>{this.setInitialLink(l.id);}));},a=l=>e.copy(e.getTask(l));for(const l in Le)e.attachEvent(l,()=>(this.startIgnore(),!0)),e.attachEvent(Le[l],()=>(this.stopIgnore(),!0));for(let l=0;l<Re.length;l++)e.attachEvent(Re[l],()=>(this.startBatchAction(),!0));e.attachEvent(\"onParse\",()=>{this._undo.clearUndoStack(),this._undo.clearRedoStack(),i();}),e.attachEvent(\"onAfterTaskAdd\",(l,d)=>{this.setInitialTask(l,!0),this.onTaskAdded(d);}),e.attachEvent(\"onAfterTaskUpdate\",(l,d)=>{this.onTaskUpdated(d);}),e.attachEvent(\"onAfterParentExpand\",(l,d)=>{this.onTaskUpdated(d);}),e.attachEvent(\"onAfterTaskDelete\",(l,d)=>{this.onTaskDeleted(d);}),e.attachEvent(\"onAfterLinkAdd\",(l,d)=>{this.setInitialLink(l,!0),this.onLinkAdded(d);}),e.attachEvent(\"onAfterLinkUpdate\",(l,d)=>{this.onLinkUpdated(d);}),e.attachEvent(\"onAfterLinkDelete\",(l,d)=>{this.onLinkDeleted(d);}),e.attachEvent(\"onRowDragEnd\",(l,d)=>(this.onTaskMoved(a(l)),this.toggleIgnoreMoveEvents(),!0)),e.attachEvent(\"onBeforeTaskDelete\",l=>{this.store(l,e.config.undo_types.task);const d=[];return i(),e.eachTask(c=>{d.push(c.id);},l),this.setNestedTasks(l,d),!0;});const s=e.getDatastore(\"task\");s.attachEvent(\"onBeforeItemMove\",(l,d,c)=>(this.isMoveEventsIgnored()||i(),!0)),s.attachEvent(\"onAfterItemMove\",(l,d,c)=>(this.isMoveEventsIgnored()||this.onTaskMoved(a(l)),!0)),e.attachEvent(\"onRowDragStart\",(l,d,c)=>(this.toggleIgnoreMoveEvents(!0),i(),!0));let r=null,o=!1;if(e.attachEvent(\"onBeforeTaskDrag\",l=>{if(r=e.getState().drag_id,r===l){const d=e.getTask(l);e.isSummaryTask(d)&&e.config.drag_project&&(o=!0);}if(e.plugins().multiselect){const d=e.getSelectedTasks();d.length>1&&d.forEach(c=>{this.store(c,e.config.undo_types.task,!0);});}return this.store(l,e.config.undo_types.task);}),e.attachEvent(\"onAfterTaskDrag\",l=>{(o||e.plugins().multiselect&&e.getSelectedTasks().length>1)&&r===l&&(o=!1,r=null,this.stopBatchAction()),this.store(l,e.config.undo_types.task,!0);}),e.attachEvent(\"onLightbox\",l=>this.store(l,e.config.undo_types.task)),e.attachEvent(\"onBeforeTaskAutoSchedule\",l=>(this.store(l.id,e.config.undo_types.task,!0),!0)),e.ext.inlineEditors){let l=null,d=null;e.attachEvent(\"onGanttLayoutReady\",()=>{l&&e.ext.inlineEditors.detachEvent(l),d&&e.ext.inlineEditors.detachEvent(d),d=e.ext.inlineEditors.attachEvent(\"onEditStart\",c=>{e.$data.tempAssignmentsStore&&e._lightbox_id||this.store(c.id,e.config.undo_types.task);}),l=e.ext.inlineEditors.attachEvent(\"onBeforeEditStart\",c=>(this.stopBatchAction(),!0));});}}_storeCommand(n){const e=this._undo;if(e.updateConfigs(),e.undoEnabled)if(this._batchMode)this._batchAction.commands.push(n);else{const i=e.action.create([n]);e.logAction(i);}}_storeEntityCommand(n,e,i,a){const s=this._undo.command.create(n,e,i,a);this._storeCommand(s);}_storeTaskCommand(n,e){this._gantt.isTaskExists(n.id)&&(n.$local_index=this._gantt.getTaskIndex(n.id)),this._storeEntityCommand(n,this.getInitialTask(n.id),e,this._undo.command.entity.task);}_storeLinkCommand(n,e){this._storeEntityCommand(n,this.getInitialLink(n.id),e,this._undo.command.entity.link);}_getLinks(n){return n.$source.concat(n.$target);}_storeTask(n,e=!1){const i=this._gantt;return this.setInitialTask(n,e),i.eachTask(a=>{this.setInitialTask(a.id);},n),!0;}_storeLink(n,e=!1){return this.setInitialLink(n,e),!0;}}class Gn{constructor(n){this.maxSteps=100,this.undoEnabled=!0,this.redoEnabled=!0,this.action={create:e=>({commands:e?e.slice():[]}),invert:e=>{const i=this._gantt.copy(e),a=this.command;for(let s=0;s<e.commands.length;s++){const r=i.commands[s]=a.invert(i.commands[s]);r.type!==a.type.update&&r.type!==a.type.move||([r.value,r.oldValue]=[r.oldValue,r.value]);}return i;}},this.command={entity:null,type:null,create:(e,i,a,s)=>{const r=this._gantt;return{entity:s,type:a,value:r.copy(e),oldValue:r.copy(i||e)};},invert:e=>{const i=this._gantt.copy(e);return i.type=this.command.inverseCommands(e.type),i;},inverseCommands:e=>{const i=this._gantt,a=this.command.type;switch(e){case a.update:return a.update;case a.remove:return a.add;case a.add:return a.remove;case a.move:return a.move;default:return i.assert(!1,\"Invalid command \"+e),null;}}},this._undoStack=[],this._redoStack=[],this._gantt=n;}getUndoStack(){return this._undoStack;}setUndoStack(n){this._undoStack=n;}getRedoStack(){return this._redoStack;}setRedoStack(n){this._redoStack=n;}clearUndoStack(){this._undoStack=[];}clearRedoStack(){this._redoStack=[];}updateConfigs(){const n=this._gantt;this.maxSteps=n.config.undo_steps||100,this.command.entity=n.config.undo_types,this.command.type=n.config.undo_actions,this.undoEnabled=!!n.config.undo,this.redoEnabled=!!n.config.redo;}undo(){const n=this._gantt;if(this.updateConfigs(),!this.undoEnabled)return;const e=this._pop(this._undoStack);if(e&&this._reorderCommands(e),n.callEvent(\"onBeforeUndo\",[e])!==!1&&e)return this._applyAction(this.action.invert(e)),this._push(this._redoStack,n.copy(e)),void n.callEvent(\"onAfterUndo\",[e]);n.callEvent(\"onAfterUndo\",[null]);}redo(){const n=this._gantt;if(this.updateConfigs(),!this.redoEnabled)return;const e=this._pop(this._redoStack);if(e&&this._reorderCommands(e),n.callEvent(\"onBeforeRedo\",[e])!==!1&&e)return this._applyAction(e),this._push(this._undoStack,n.copy(e)),void n.callEvent(\"onAfterRedo\",[e]);n.callEvent(\"onAfterRedo\",[null]);}logAction(n){this._push(this._undoStack,n),this._redoStack=[];}_push(n,e){const i=this._gantt;if(!e.commands.length)return;const a=n===this._undoStack?\"onBeforeUndoStack\":\"onBeforeRedoStack\";if(i.callEvent(a,[e])!==!1&&e.commands.length){for(n.push(e);n.length>this.maxSteps;)n.shift();return e;}}_pop(n){return n.pop();}_reorderCommands(n){const e={any:0,link:1,task:2},i={move:1,any:0};n.commands.sort(function(a,s){if(a.entity===\"task\"&&s.entity===\"task\")return a.type!==s.type?(i[s.type]||0)-(i[a.type]||0):a.type===\"move\"&&a.oldValue&&s.oldValue&&s.oldValue.parent===a.oldValue.parent?a.oldValue.$index-s.oldValue.$index:0;{const r=e[a.entity]||e.any;return(e[s.entity]||e.any)-r;}});}_applyAction(n){let e=null;const i=this.command.entity,a=this.command.type,s=this._gantt,r={};r[i.task]={add:\"addTask\",get:\"getTask\",update:\"updateTask\",remove:\"deleteTask\",move:\"moveTask\",isExists:\"isTaskExists\"},r[i.link]={add:\"addLink\",get:\"getLink\",update:\"updateLink\",remove:\"deleteLink\",isExists:\"isLinkExists\"},s.batchUpdate(function(){for(let o=0;o<n.commands.length;o++){e=n.commands[o];const l=r[e.entity][e.type],d=r[e.entity].get,c=r[e.entity].isExists;if(e.type===a.add)s[l](e.oldValue,e.oldValue.parent,e.oldValue.$local_index);else if(e.type===a.remove)s[c](e.value.id)&&s[l](e.value.id);else if(e.type===a.update){const u=s[d](e.value.id);for(const h in e.value){let _=!(h.startsWith(\"$\")||h.startsWith(\"_\"));[\"$open\"].indexOf(h)>-1&&(_=!0),_&&(u[h]=e.value[h]);}s[l](e.value.id);}else e.type===a.move&&(s[l](e.value.id,e.value.$local_index,e.value.parent),s.callEvent(\"onRowDragEnd\",[e.value.id]));}});}}const Yn={click_drag:function(t){t.ext||(t.ext={});const n={className:\"gantt_click_drag_rect\",useRequestAnimationFrame:!0,callback:void 0,singleRow:!1};function e(){const i={viewPort:t.$task_data,...n};t.ext.clickDrag&&t.ext.clickDrag.destructor(),t.ext.clickDrag=new Hn(t);const a=t.config.click_drag;i.render=a.render||n.render,i.className=a.className||n.className,i.callback=a.callback||n.callback,i.viewPort=a.viewPort||t.$task_data,i.useRequestAnimationFrame=a.useRequestAnimationFrame===void 0?n.useRequestAnimationFrame:a.useRequestAnimationFrame,i.singleRow=a.singleRow===void 0?n.singleRow:a.singleRow;const s=t.$ui.getView(\"timeline\"),r=new Bn(i,t,s);t.ext.clickDrag.attach(r,a.useKey,a.ignore);}t.attachEvent(\"onGanttReady\",()=>{t.config.click_drag&&e();}),t.attachEvent(\"onGanttLayoutReady\",function(){t.$container&&t.config.click_drag&&t.attachEvent(\"onGanttRender\",function(){e();},{once:!0});}),t.attachEvent(\"onDestroy\",()=>{t.ext.clickDrag&&t.ext.clickDrag.destructor();});},drag_timeline:function(t){t.ext||(t.ext={}),t.ext.dragTimeline={create:()=>Kt.create(t),_isDragInProgress:()=>Kt._isDragInProgress},t.config.drag_timeline={enabled:!0,render:!1};},fullscreen:function(t){function n(){const c=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;return!(!c||c!==document.body);}function e(){try{return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled;}catch(c){console.error(\"Fullscreen is not available:\",c);}}t.$services.getService(\"state\").registerProvider(\"fullscreen\",()=>e()?{fullscreen:n()}:void 0);let i={overflow:null,padding:null,paddingTop:null,paddingRight:null,paddingBottom:null,paddingLeft:null};const a={width:null,height:null,top:null,left:null,position:null,zIndex:null,modified:!1};let s=null;function r(c,u){u.width=c.width,u.height=c.height,u.top=c.top,u.left=c.left,u.position=c.position,u.zIndex=c.zIndex;}let o=!1;function l(){if(!t.$container)return;let c;n()?o&&(c=\"onExpand\",function(){const u=t.ext.fullscreen.getFullscreenElement(),h=document.body;r(u.style,a),i={overflow:h.style.overflow,padding:h.style.padding?h.style.padding:null,paddingTop:h.style.paddingTop?h.style.paddingTop:null,paddingRight:h.style.paddingRight?h.style.paddingRight:null,paddingBottom:h.style.paddingBottom?h.style.paddingBottom:null,paddingLeft:h.style.paddingLeft?h.style.paddingLeft:null},h.style.padding&&(h.style.padding=\"0\"),h.style.paddingTop&&(h.style.paddingTop=\"0\"),h.style.paddingRight&&(h.style.paddingRight=\"0\"),h.style.paddingBottom&&(h.style.paddingBottom=\"0\"),h.style.paddingLeft&&(h.style.paddingLeft=\"0\"),h.style.overflow=\"hidden\",u.style.width=\"100vw\",u.style.height=\"100vh\",u.style.top=\"0px\",u.style.left=\"0px\",u.style.position=\"absolute\",u.style.zIndex=1,a.modified=!0,s=function(_){let f=_.parentNode;const y=[];for(;f&&f.style;)y.push({element:f,originalPositioning:f.style.position}),f.style.position=\"static\",f=f.parentNode;return y;}(u);}()):o&&(o=!1,c=\"onCollapse\",function(){const u=t.ext.fullscreen.getFullscreenElement(),h=document.body;a.modified&&(i.padding&&(h.style.padding=i.padding),i.paddingTop&&(h.style.paddingTop=i.paddingTop),i.paddingRight&&(h.style.paddingRight=i.paddingRight),i.paddingBottom&&(h.style.paddingBottom=i.paddingBottom),i.paddingLeft&&(h.style.paddingLeft=i.paddingLeft),h.style.overflow=i.overflow,i={overflow:null,padding:null,paddingTop:null,paddingRight:null,paddingBottom:null,paddingLeft:null},r(a,u.style),a.modified=!1),s.forEach(_=>{_.element.style.position=_.originalPositioning;}),s=null;}()),setTimeout(()=>{t.render();}),setTimeout(()=>{t.callEvent(c,[t.ext.fullscreen.getFullscreenElement()]);});}function d(){return!t.$container||!t.ext.fullscreen.getFullscreenElement()?!0:e()?!1:((console.warning||console.log)(\"The `fullscreen` feature not being allowed, or full-screen mode not being supported\"),!0);}t.ext.fullscreen={expand(){if(d()||n()||!t.callEvent(\"onBeforeExpand\",[this.getFullscreenElement()]))return;o=!0;const c=document.body,u=c.webkitRequestFullscreen?[Element.ALLOW_KEYBOARD_INPUT]:[],h=c.msRequestFullscreen||c.mozRequestFullScreen||c.webkitRequestFullscreen||c.requestFullscreen;h&&h.apply(c,u);},collapse(){if(d()||!n()||!t.callEvent(\"onBeforeCollapse\",[this.getFullscreenElement()]))return;const c=document.msExitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.exitFullscreen;c&&c.apply(document);},toggle(){d()||(n()?this.collapse():this.expand());},getFullscreenElement:()=>t.$root},t.expand=function(){t.ext.fullscreen.expand();},t.collapse=function(){t.ext.fullscreen.collapse();},t.attachEvent(\"onGanttReady\",function(){t.event(document,\"webkitfullscreenchange\",l),t.event(document,\"mozfullscreenchange\",l),t.event(document,\"MSFullscreenChange\",l),t.event(document,\"fullscreenChange\",l),t.event(document,\"fullscreenchange\",l);});},keyboard_navigation:function(t){(function(n){n.config.keyboard_navigation=!0,n.config.keyboard_navigation_cells=!1,n.$keyboardNavigation={},n._compose=function(){for(var e=Array.prototype.slice.call(arguments,0),i={},a=0;a<e.length;a++){var s=e[a];for(var r in typeof s==\"function\"&&(s=new s()),s)i[r]=s[r];}return i;},function(e){e.$keyboardNavigation.shortcuts={createCommand:function(){return{modifiers:{shift:!1,alt:!1,ctrl:!1,meta:!1},keyCode:null};},parse:function(i){for(var a=[],s=this.getExpressions(this.trim(i)),r=0;r<s.length;r++){for(var o=this.getWords(s[r]),l=this.createCommand(),d=0;d<o.length;d++)this.commandKeys[o[d]]?l.modifiers[o[d]]=!0:this.specialKeys[o[d]]?l.keyCode=this.specialKeys[o[d]]:l.keyCode=o[d].charCodeAt(0);a.push(l);}return a;},getCommandFromEvent:function(i){var a=this.createCommand();a.modifiers.shift=!!i.shiftKey,a.modifiers.alt=!!i.altKey,a.modifiers.ctrl=!!i.ctrlKey,a.modifiers.meta=!!i.metaKey,a.keyCode=i.which||i.keyCode,a.keyCode>=96&&a.keyCode<=105&&(a.keyCode-=48);var s=String.fromCharCode(a.keyCode);return s&&(a.keyCode=s.toLowerCase().charCodeAt(0)),a;},getHashFromEvent:function(i){return this.getHash(this.getCommandFromEvent(i));},getHash:function(i){var a=[];for(var s in i.modifiers)i.modifiers[s]&&a.push(s);return a.push(i.keyCode),a.join(this.junctionChar);},getExpressions:function(i){return i.split(this.junctionChar);},getWords:function(i){return i.split(this.combinationChar);},trim:function(i){return i.replace(/\\s/g,\"\");},junctionChar:\",\",combinationChar:\"+\",commandKeys:{shift:16,alt:18,ctrl:17,meta:!0},specialKeys:{backspace:8,tab:9,enter:13,esc:27,space:32,up:38,down:40,left:37,right:39,home:36,end:35,pageup:33,pagedown:34,delete:46,insert:45,plus:107,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123}};}(n),function(e){e.$keyboardNavigation.EventHandler={_handlers:null,findHandler:function(i){this._handlers||(this._handlers={});var a=e.$keyboardNavigation.shortcuts.getHash(i);return this._handlers[a];},doAction:function(i,a){var s=this.findHandler(i);if(s){if(e.$keyboardNavigation.facade.callEvent(\"onBeforeAction\",[i,a])===!1)return;s.call(this,a),a.preventDefault?a.preventDefault():a.returnValue=!1;}},bind:function(i,a){this._handlers||(this._handlers={});for(var s=e.$keyboardNavigation.shortcuts,r=s.parse(i),o=0;o<r.length;o++)this._handlers[s.getHash(r[o])]=a;},unbind:function(i){for(var a=e.$keyboardNavigation.shortcuts,s=a.parse(i),r=0;r<s.length;r++)this._handlers[a.getHash(s[r])]&&delete this._handlers[a.getHash(s[r])];},bindAll:function(i){for(var a in i)this.bind(a,i[a]);},initKeys:function(){this._handlers||(this._handlers={}),this.keys&&this.bindAll(this.keys);}};}(n),function(e){e.$keyboardNavigation.getFocusableNodes=Pt,e.$keyboardNavigation.trapFocus=function(i,a){if(a.keyCode!=9)return!1;for(var s=e.$keyboardNavigation.getFocusableNodes(i),r=ye(),o=-1,l=0;l<s.length;l++)if(s[l]==r){o=l;break;}if(a.shiftKey){if(o<=0){var d=s[s.length-1];if(d)return d.focus(),a.preventDefault(),!0;}}else if(o>=s.length-1){var c=s[0];if(c)return c.focus(),a.preventDefault(),!0;}return!1;};}(n),function(e){e.$keyboardNavigation.GanttNode=function(){},e.$keyboardNavigation.GanttNode.prototype=e._compose(e.$keyboardNavigation.EventHandler,{focus:function(){e.focus();},blur:function(){},isEnabled:function(){return e.$container.hasAttribute(\"tabindex\");},scrollHorizontal:function(i){var a=e.dateFromPos(e.getScrollState().x),s=e.getScale(),r=i<0?-s.step:s.step;a=e.date.add(a,r,s.unit),e.scrollTo(e.posFromDate(a));},scrollVertical:function(i){var a=e.getScrollState().y,s=e.config.row_height;e.scrollTo(null,a+(i<0?-1:1)*s);},keys:{\"alt+left\":function(i){this.scrollHorizontal(-1);},\"alt+right\":function(i){this.scrollHorizontal(1);},\"alt+up\":function(i){this.scrollVertical(-1);},\"alt+down\":function(i){this.scrollVertical(1);},\"ctrl+z\":function(){e.undo&&e.undo();},\"ctrl+r\":function(){e.redo&&e.redo();}}}),e.$keyboardNavigation.GanttNode.prototype.bindAll(e.$keyboardNavigation.GanttNode.prototype.keys);}(n),function(e){e.$keyboardNavigation.KeyNavNode=function(){},e.$keyboardNavigation.KeyNavNode.prototype=e._compose(e.$keyboardNavigation.EventHandler,{isValid:function(){return!0;},fallback:function(){return null;},moveTo:function(i){e.$keyboardNavigation.dispatcher.setActiveNode(i);},compareTo:function(i){if(!i)return!1;for(var a in this){if(!!this[a]!=!!i[a])return!1;var s=!(!this[a]||!this[a].toString),r=!(!i[a]||!i[a].toString);if(r!=s)return!1;if(r&&s){if(i[a].toString()!=this[a].toString())return!1;}else if(i[a]!=this[a])return!1;}return!0;},getNode:function(){},focus:function(){var i=this.getNode();if(i){var a=e.$keyboardNavigation.facade;a.callEvent(\"onBeforeFocus\",[i])!==!1&&i&&(i.setAttribute(\"tabindex\",\"-1\"),i.$eventAttached||(i.$eventAttached=!0,e.event(i,\"focus\",function(s){return s.preventDefault(),!1;},!1)),e.utils.dom.isChildOf(document.activeElement,i)&&(i=document.activeElement),i.focus&&i.focus(),a.callEvent(\"onFocus\",[this.getNode()]));}},blur:function(){var i=this.getNode();i&&(e.$keyboardNavigation.facade.callEvent(\"onBlur\",[i]),i.setAttribute(\"tabindex\",\"-1\"));}});}(n),function(e){e.$keyboardNavigation.HeaderCell=function(i){this.index=i||0;},e.$keyboardNavigation.HeaderCell.prototype=e._compose(e.$keyboardNavigation.KeyNavNode,{_handlers:null,isValid:function(){return!(!e.config.show_grid&&e.getVisibleTaskCount()||!e.getGridColumns()[this.index]&&e.getVisibleTaskCount());},fallback:function(){if(!e.config.show_grid)return e.getVisibleTaskCount()?new e.$keyboardNavigation.TaskRow():null;for(var i=e.getGridColumns(),a=this.index;a>=0&&!i[a];)a--;return i[a]?new e.$keyboardNavigation.HeaderCell(a):null;},fromDomElement:function(i){var a=vt(i,\"gantt_grid_head_cell\");if(a){for(var s=0;a&&a.previousSibling;)a=a.previousSibling,s+=1;return new e.$keyboardNavigation.HeaderCell(s);}return null;},getNode:function(){const i=e.$grid_scale;return i?i.childNodes[this.index]:null;},keys:{left:function(){this.index>0&&this.moveTo(new e.$keyboardNavigation.HeaderCell(this.index-1));},right:function(){var i=e.getGridColumns();this.index<i.length-1&&this.moveTo(new e.$keyboardNavigation.HeaderCell(this.index+1));},down:function(){var i,a=e.getChildren(e.config.root_id);e.isTaskExists(a[0])&&(i=a[0]),i&&(e.config.keyboard_navigation_cells?this.moveTo(new e.$keyboardNavigation.TaskCell(i,this.index)):this.moveTo(new e.$keyboardNavigation.TaskRow(i)));},end:function(){var i=e.getGridColumns();this.moveTo(new e.$keyboardNavigation.HeaderCell(i.length-1));},home:function(){this.moveTo(new e.$keyboardNavigation.HeaderCell(0));},\"enter, space\":function(){ye().click();},\"ctrl+enter\":function(){e.isReadonly(this)||e.createTask({},this.taskId);}}}),e.$keyboardNavigation.HeaderCell.prototype.bindAll(e.$keyboardNavigation.HeaderCell.prototype.keys);}(n),function(e){e.$keyboardNavigation.TaskRow=function(i){if(!i){var a=e.getChildren(e.config.root_id);a[0]&&(i=a[0]);}this.taskId=i,e.isTaskExists(this.taskId)&&(this.index=e.getTaskIndex(this.taskId),this.globalIndex=e.getGlobalTaskIndex(this.taskId),this.splitItem=!!e.getTask(this.taskId).$split_subtask,this.parentId=e.getParent(this.taskId));},e.$keyboardNavigation.TaskRow.prototype=e._compose(e.$keyboardNavigation.KeyNavNode,{_handlers:null,isValid:function(){return e.isTaskExists(this.taskId)&&e.getTaskIndex(this.taskId)>-1;},fallback:function(){if(!e.getVisibleTaskCount()){var i=new e.$keyboardNavigation.HeaderCell();return i.isValid()?i:null;}if(this.splitItem)return new e.$keyboardNavigation.TaskRow(this.parentId);var a=-1;if(e.getTaskByIndex(this.globalIndex-1))a=this.globalIndex-1;else if(e.getTaskByIndex(this.globalIndex+1))a=this.globalIndex+1;else for(var s=this.globalIndex;s>=0;){if(e.getTaskByIndex(s)){a=s;break;}s--;}return a>-1?new e.$keyboardNavigation.TaskRow(e.getTaskByIndex(a).id):void 0;},fromDomElement:function(i){if(e.config.keyboard_navigation_cells)return null;var a=e.locate(i);return e.isTaskExists(a)?new e.$keyboardNavigation.TaskRow(a):null;},getNode:function(){if(e.isTaskExists(this.taskId)&&e.isTaskVisible(this.taskId))return e.config.show_grid?e.$grid.querySelector(`.gantt_row[${e.config.task_attribute}=\"${String(this.taskId).replaceAll('\"','\\\\\"')}\"]`):e.getTaskNode(this.taskId);},focus:function(i){if(!i){const a=e.getTaskPosition(e.getTask(this.taskId)),s=e.getTaskHeight(this.taskId),r=e.getScrollState();let o,l;o=e.$task?e.$task.offsetWidth:r.inner_width,l=e.$grid_data||e.$task_data?(e.$grid_data||e.$task_data).offsetHeight:r.inner_height;const d=e.config.show_chart&&e.$ui.getView(\"timeline\");a.top<r.y||a.top+s>r.y+l?e.scrollTo(null,a.top-20):e.config.scroll_on_click&&d&&(a.left>r.x+o?e.scrollTo(a.left-e.config.task_scroll_offset):a.left+a.width<r.x&&e.scrollTo(a.left+a.width-e.config.task_scroll_offset));}e.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this,[i]),function(){var a=e.$ui.getView(\"grid\");if(a&&a.$grid_data){var s=parseInt(a.$grid.scrollLeft),r=parseInt(a.$grid_data.scrollTop),o=a.$config.scrollX;if(o&&a.$config.scrollable){var l=e.$ui.getView(o);l&&l.scrollTo(s,r);}var d=a.$config.scrollY;if(d){var c=e.$ui.getView(d);c&&c.scrollTo(s,r);}}}();},keys:{pagedown:function(){e.getVisibleTaskCount()&&this.moveTo(new e.$keyboardNavigation.TaskRow(e.getTaskByIndex(e.getVisibleTaskCount()-1).id));},pageup:function(){e.getVisibleTaskCount()&&this.moveTo(new e.$keyboardNavigation.TaskRow(e.getTaskByIndex(0).id));},up:function(){var i=null,a=e.getPrev(this.taskId);i=e.isTaskExists(a)?new e.$keyboardNavigation.TaskRow(a):new e.$keyboardNavigation.HeaderCell(),this.moveTo(i);},down:function(){var i=e.getNext(this.taskId);e.isTaskExists(i)&&this.moveTo(new e.$keyboardNavigation.TaskRow(i));},\"shift+down\":function(){e.hasChild(this.taskId)&&!e.getTask(this.taskId).$open&&e.open(this.taskId);},\"shift+up\":function(){e.hasChild(this.taskId)&&e.getTask(this.taskId).$open&&e.close(this.taskId);},\"shift+right\":function(){if(!e.isReadonly(this)){var i=e.getPrevSibling(this.taskId);e.isTaskExists(i)&&!e.isChildOf(this.taskId,i)&&(e.getTask(i).$open=!0,e.moveTask(this.taskId,-1,i)!==!1&&e.updateTask(this.taskId));}},\"shift+left\":function(){if(!e.isReadonly(this)){var i=e.getParent(this.taskId);e.isTaskExists(i)&&e.moveTask(this.taskId,e.getTaskIndex(i)+1,e.getParent(i))!==!1&&e.updateTask(this.taskId);}},space:function(i){e.isSelectedTask(this.taskId)?e.unselectTask(this.taskId):e.selectTask(this.taskId);},\"ctrl+left\":function(i){e.close(this.taskId);},\"ctrl+right\":function(i){e.open(this.taskId);},delete:function(i){e.isReadonly(this)||e.$click.buttons.delete(this.taskId);},enter:function(){e.isReadonly(this)||e.showLightbox(this.taskId);},\"ctrl+enter\":function(){e.isReadonly(this)||e.createTask({},this.taskId);}}}),e.$keyboardNavigation.TaskRow.prototype.bindAll(e.$keyboardNavigation.TaskRow.prototype.keys);}(n),function(e){e.$keyboardNavigation.TaskCell=function(i,a){if(!(i=st(i,e.config.root_id))){var s=e.getChildren(e.config.root_id);s[0]&&(i=s[0]);}this.taskId=i,this.columnIndex=a||0,e.isTaskExists(this.taskId)&&(this.index=e.getTaskIndex(this.taskId),this.globalIndex=e.getGlobalTaskIndex(this.taskId));},e.$keyboardNavigation.TaskCell.prototype=e._compose(e.$keyboardNavigation.TaskRow,{_handlers:null,isValid:function(){return e.$keyboardNavigation.TaskRow.prototype.isValid.call(this)&&!!e.getGridColumns()[this.columnIndex];},fallback:function(){var i=e.$keyboardNavigation.TaskRow.prototype.fallback.call(this),a=i;if(i instanceof e.$keyboardNavigation.TaskRow){for(var s=e.getGridColumns(),r=this.columnIndex;r>=0&&!s[r];)r--;s[r]&&(a=new e.$keyboardNavigation.TaskCell(i.taskId,r));}return a;},fromDomElement:function(i){if(!e.config.keyboard_navigation_cells)return null;var a=e.locate(i);if(e.isTaskExists(a)){var s=0,r=it(i,\"data-column-index\");return r&&(s=1*r.getAttribute(\"data-column-index\")),new e.$keyboardNavigation.TaskCell(a,s);}return null;},getNode:function(){if(e.isTaskExists(this.taskId)&&(e.isTaskVisible(this.taskId)||e.config.show_tasks_outside_timescale)){if(e.config.show_grid&&e.$grid){var i=e.$grid.querySelector(\".gantt_row[\"+e.config.task_attribute+\"='\"+this.taskId+\"']\");return i?i.querySelector(\"[data-column-index='\"+this.columnIndex+\"']\"):null;}return e.getTaskNode(this.taskId);}},keys:{up:function(){var i=null,a=e.getPrev(this.taskId);i=e.isTaskExists(a)?new e.$keyboardNavigation.TaskCell(a,this.columnIndex):new e.$keyboardNavigation.HeaderCell(this.columnIndex),this.moveTo(i);},down:function(){var i=e.getNext(this.taskId);e.isTaskExists(i)&&this.moveTo(new e.$keyboardNavigation.TaskCell(i,this.columnIndex));},left:function(){this.columnIndex>0&&this.moveTo(new e.$keyboardNavigation.TaskCell(this.taskId,this.columnIndex-1));},right:function(){var i=e.getGridColumns();this.columnIndex<i.length-1&&this.moveTo(new e.$keyboardNavigation.TaskCell(this.taskId,this.columnIndex+1));},end:function(){var i=e.getGridColumns();this.moveTo(new e.$keyboardNavigation.TaskCell(this.taskId,i.length-1));},home:function(){this.moveTo(new e.$keyboardNavigation.TaskCell(this.taskId,0));},pagedown:function(){e.getVisibleTaskCount()&&this.moveTo(new e.$keyboardNavigation.TaskCell(e.getTaskByIndex(e.getVisibleTaskCount()-1).id,this.columnIndex));},pageup:function(){e.getVisibleTaskCount()&&this.moveTo(new e.$keyboardNavigation.TaskCell(e.getTaskByIndex(0).id,this.columnIndex));}}}),e.$keyboardNavigation.TaskCell.prototype.bindAll(e.$keyboardNavigation.TaskRow.prototype.keys),e.$keyboardNavigation.TaskCell.prototype.bindAll(e.$keyboardNavigation.TaskCell.prototype.keys);}(n),Wn(n),function(e){e.$keyboardNavigation.dispatcher={isActive:!1,activeNode:null,globalNode:new e.$keyboardNavigation.GanttNode(),enable:function(){this.isActive=!0,this.setActiveNode(this.getActiveNode());},disable:function(){this.isActive=!1;},isEnabled:function(){return!!this.isActive;},getDefaultNode:function(){var i;return(i=e.config.keyboard_navigation_cells?new e.$keyboardNavigation.TaskCell():new e.$keyboardNavigation.TaskRow()).isValid()||(i=i.fallback()),i;},setDefaultNode:function(){this.setActiveNode(this.getDefaultNode());},getActiveNode:function(){var i=this.activeNode;return i&&!i.isValid()&&(i=i.fallback()),i;},fromDomElement:function(i){for(var a=[e.$keyboardNavigation.TaskRow,e.$keyboardNavigation.TaskCell,e.$keyboardNavigation.HeaderCell],s=0;s<a.length;s++)if(a[s].prototype.fromDomElement){var r=a[s].prototype.fromDomElement(i);if(r)return r;}return null;},focusGlobalNode:function(){this.blurNode(this.globalNode),this.focusNode(this.globalNode);},setActiveNode:function(i){var a=!0;this.activeNode&&this.activeNode.compareTo(i)&&(a=!1),this.isEnabled()&&(a&&this.blurNode(this.activeNode),this.activeNode=i,this.focusNode(this.activeNode,!a));},focusNode:function(i,a){i&&i.focus&&i.focus(a);},blurNode:function(i){i&&i.blur&&i.blur();},keyDownHandler:function(i){if(!e.$keyboardNavigation.isModal()&&this.isEnabled()&&!i.defaultPrevented){var a=this.globalNode,s=e.$keyboardNavigation.shortcuts.getCommandFromEvent(i),r=this.getActiveNode();e.$keyboardNavigation.facade.callEvent(\"onKeyDown\",[s,i])!==!1&&(r?r.findHandler(s)?r.doAction(s,i):a.findHandler(s)&&a.doAction(s,i):this.setDefaultNode());}},_timeout:null,awaitsFocus:function(){return this._timeout!==null;},delay:function(i,a){clearTimeout(this._timeout),this._timeout=setTimeout(e.bind(function(){this._timeout=null,i();},this),a||1);},clearDelay:function(){clearTimeout(this._timeout);}};}(n),function(){var e=n.$keyboardNavigation.dispatcher;e.isTaskFocused=function(v){var b=e.activeNode;return(b instanceof n.$keyboardNavigation.TaskRow||b instanceof n.$keyboardNavigation.TaskCell)&&b.taskId==v;};var i=function(v){if(n.config.keyboard_navigation&&(n.config.keyboard_navigation_cells||!r(v))&&!o(v)&&!function(b){return!!ht(b.target,\".gantt_cal_light\");}(v))return e.keyDownHandler(v);},a=function(v){if(e.$preventDefault)return v.preventDefault(),n.$container.blur(),!1;e.awaitsFocus()||e.focusGlobalNode();},s=function(){if(!e.isEnabled())return;const v=!K(document.activeElement,n.$container)&&document.activeElement.localName!=\"body\";var b=e.getActiveNode();if(b&&!v){var m,g,p=b.getNode();p&&p.parentNode&&(m=p.parentNode.scrollTop,g=p.parentNode.scrollLeft),b.focus(!0),p&&p.parentNode&&(p.parentNode.scrollTop=m,p.parentNode.scrollLeft=g);}};function r(v){return!!ht(v.target,\".gantt_grid_editor_placeholder\");}function o(v){return!!ht(v.target,\".no_keyboard_navigation\");}function l(v){if(!n.config.keyboard_navigation||!n.config.keyboard_navigation_cells&&r(v))return!0;if(!o(v)){var b,m=e.fromDomElement(v);if(m&&(e.activeNode instanceof n.$keyboardNavigation.TaskCell&&K(v.target,n.$task)&&(m=new n.$keyboardNavigation.TaskCell(m.taskId,e.activeNode.columnIndex)),b=m,n.config.show_grid&&n.$ui.getView(\"grid\")&&n.config.keyboard_navigation_cells)){const g=v.target.classList.contains(\"gantt_row\"),p=v.target.closest(\".gantt_task_line\"),k=n.utils.dom.getNodePosition(n.$grid).x,x=k+n.$grid.offsetWidth,w=n.utils.dom.getNodePosition(document.activeElement).x;if(g||p&&(w<k||x<w)){let $=n.$grid.scrollLeft;const T=$+n.$grid.offsetWidth;let S=0;g&&($=n.utils.dom.getRelativeEventPosition(v,n.$grid).x);for(let C=0;C<n.config.columns.length;C++){const E=n.config.columns[C];if(!E.hide&&(S+=E.width,$<S)){T<S&&(S-=E.width),b.columnIndex=C;break;}}}}b?e.isEnabled()?e.delay(function(){e.setActiveNode(b);}):e.activeNode=b:(e.$preventDefault=!0,setTimeout(function(){e.$preventDefault=!1;},300));}}n.attachEvent(\"onDataRender\",function(){n.config.keyboard_navigation&&s();}),n.attachEvent(\"onGanttRender\",function(){n.$root&&(n.eventRemove(n.$root,\"keydown\",i),n.eventRemove(n.$container,\"focus\",a),n.eventRemove(n.$container,\"mousedown\",l),n.config.keyboard_navigation?(n.event(n.$root,\"keydown\",i),n.event(n.$container,\"focus\",a),n.event(n.$container,\"mousedown\",l),n.$container.setAttribute(\"tabindex\",\"0\")):n.$container.removeAttribute(\"tabindex\"));});var d=n.attachEvent(\"onGanttReady\",function(){if(n.detachEvent(d),n.$data.tasksStore.attachEvent(\"onStoreUpdated\",function(b){if(n.config.keyboard_navigation&&e.isEnabled()){const m=e.getActiveNode(),g=n.$ui.getView(\"grid\");if(!g||!g.$grid_data)return;const p=g.getItemTop(b),k=g.$grid_data.scrollTop,x=k+g.$grid_data.getBoundingClientRect().height;m&&m.taskId==b&&k<=p&&x>=p&&s();}}),n._smart_render){var v=n._smart_render._redrawTasks;n._smart_render._redrawTasks=function(b,m){if(n.config.keyboard_navigation&&e.isEnabled()){var g=e.getActiveNode();if(g&&g.taskId!==void 0){for(var p=!1,k=0;k<m.length;k++)if(m[k].id==g.taskId&&m[k].start_date){p=!0;break;}p||m.push(n.getTask(g.taskId));}}return v.apply(this,arguments);};}});let c=null,u=!1;n.attachEvent(\"onTaskCreated\",function(v){return c=v.id,!0;}),n.attachEvent(\"onAfterTaskAdd\",function(v,b){if(!n.config.keyboard_navigation)return!0;if(e.isEnabled()){if(v==c&&(u=!0,setTimeout(()=>{u=!1,c=null;})),u&&b.type==n.config.types.placeholder)return;var m=0,g=e.activeNode;g instanceof n.$keyboardNavigation.TaskCell&&(m=g.columnIndex);var p=n.config.keyboard_navigation_cells?n.$keyboardNavigation.TaskCell:n.$keyboardNavigation.TaskRow;b.type==n.config.types.placeholder&&n.config.placeholder_task.focusOnCreate===!1||e.setActiveNode(new p(v,m));}}),n.attachEvent(\"onTaskIdChange\",function(v,b){if(!n.config.keyboard_navigation)return!0;var m=e.activeNode;return e.isTaskFocused(v)&&(m.taskId=b),!0;});var h=setInterval(function(){n.config.keyboard_navigation&&(e.isEnabled()||e.enable());},500);function _(v){var b={gantt:n.$keyboardNavigation.GanttNode,headerCell:n.$keyboardNavigation.HeaderCell,taskRow:n.$keyboardNavigation.TaskRow,taskCell:n.$keyboardNavigation.TaskCell};return b[v]||b.gantt;}function f(v){for(var b=n.getGridColumns(),m=0;m<b.length;m++)if(b[m].name==v)return m;return 0;}n.attachEvent(\"onDestroy\",function(){clearInterval(h);});var y={};lt(y),n.mixin(y,{addShortcut:function(v,b,m){var g=_(m);g&&g.prototype.bind(v,b);},getShortcutHandler:function(v,b){var m=n.$keyboardNavigation.shortcuts.parse(v);if(m.length)return y.getCommandHandler(m[0],b);},getCommandHandler:function(v,b){var m=_(b);if(m&&v)return m.prototype.findHandler(v);},removeShortcut:function(v,b){var m=_(b);m&&m.prototype.unbind(v);},focus:function(v){var b,m=v?v.type:null,g=_(m);switch(m){case\"taskCell\":b=new g(v.id,f(v.column));break;case\"taskRow\":b=new g(v.id);break;case\"headerCell\":b=new g(f(v.column));}e.delay(function(){b?e.setActiveNode(b):(e.enable(),e.getActiveNode()?e.awaitsFocus()||e.enable():e.setDefaultNode());});},getActiveNode:function(){if(e.isEnabled()){var v=e.getActiveNode(),b=(g=v)instanceof n.$keyboardNavigation.GanttNode?\"gantt\":g instanceof n.$keyboardNavigation.HeaderCell?\"headerCell\":g instanceof n.$keyboardNavigation.TaskRow?\"taskRow\":g instanceof n.$keyboardNavigation.TaskCell?\"taskCell\":null,m=n.getGridColumns();switch(b){case\"taskCell\":return{type:\"taskCell\",id:v.taskId,column:m[v.columnIndex].name};case\"taskRow\":return{type:\"taskRow\",id:v.taskId};case\"headerCell\":return{type:\"headerCell\",column:m[v.index].name};}}var g;return null;}}),n.$keyboardNavigation.facade=y,n.ext.keyboardNavigation=y,n.focus=function(){y.focus();},n.addShortcut=y.addShortcut,n.getShortcutHandler=y.getShortcutHandler,n.removeShortcut=y.removeShortcut;}();})(t);},quick_info:function(t){t.ext||(t.ext={}),t.ext.quickInfo=new Fn(t),t.config.quickinfo_buttons=[\"icon_edit\",\"icon_delete\"],t.config.quick_info_detached=!0,t.config.show_quick_info=!0,t.templates.quick_info_title=function(a,s,r){return r.text.substr(0,50);},t.templates.quick_info_content=function(a,s,r){return r.details||r.text;},t.templates.quick_info_date=function(a,s,r){return t.templates.task_time(a,s,r);},t.templates.quick_info_class=function(a,s,r){return\"\";},t.attachEvent(\"onTaskClick\",function(a,s){const r=t.utils.dom.closest(s.target,\".gantt_add\"),o=t.utils.dom.closest(s.target,\".gantt_close\"),l=t.utils.dom.closest(s.target,\".gantt_open\");return!r&&!o&&!l&&setTimeout(function(){t.ext.quickInfo.show(a);},0),!0;});const n=[\"onViewChange\",\"onLightbox\",\"onBeforeTaskDelete\",\"onBeforeDrag\"],e=function(){return t.ext.quickInfo.hide(),!0;};for(let a=0;a<n.length;a++)t.attachEvent(n[a],e);function i(){return t.ext.quickInfo.hide(),t.ext.quickInfo._quickInfoBox=null,!0;}t.attachEvent(\"onEmptyClick\",function(a){let s=!0;const r=document.querySelector(\".gantt_cal_quick_info\");r&&t.utils.dom.isChildOf(a.target,r)&&(s=!1),s&&e();}),t.attachEvent(\"onGanttReady\",i),t.attachEvent(\"onDestroy\",i),t.event(window,\"keydown\",function(a){a.keyCode===27&&t.ext.quickInfo.hide();}),t.showQuickInfo=function(){t.ext.quickInfo.show.apply(t.ext.quickInfo,arguments);},t.hideQuickInfo=function(){t.ext.quickInfo.hide.apply(t.ext.quickInfo,arguments);};},tooltip:function(t){t.config.tooltip_timeout=30,t.config.tooltip_offset_y=20,t.config.tooltip_offset_x=10,t.config.tooltip_hide_timeout=30;const n=new Un(t);t.ext.tooltips=n,t.attachEvent(\"onGanttReady\",function(){t.$root&&n.tooltipFor({selector:\"[\"+t.config.task_attribute+\"]:not(.gantt_task_row)\",html:e=>{if(t.config.touch&&!t.config.touch_tooltip)return;const i=t.locate(e);if(t.isTaskExists(i)){const a=t.getTask(i);return t.templates.tooltip_text(a.start_date,a.end_date,a);}return null;},global:!1});}),t.attachEvent(\"onDestroy\",function(){n.destructor();}),t.attachEvent(\"onLightbox\",function(){n.hideTooltip();}),t.attachEvent(\"onBeforeTooltip\",function(){if(t.getState().link_source_id)return!1;}),t.attachEvent(\"onGanttScroll\",function(){n.hideTooltip();});},undo:function(t){const n=new Gn(t),e=new qn(n,t);function i(c,u){return String(c)===String(u);}function a(c,u,h){c&&(i(c.id,u)&&(c.id=h),i(c.parent,u)&&(c.parent=h));}function s(c,u,h){a(c.value,u,h),a(c.oldValue,u,h);}function r(c,u,h){c&&(i(c.source,u)&&(c.source=h),i(c.target,u)&&(c.target=h));}function o(c,u,h){r(c.value,u,h),r(c.oldValue,u,h);}function l(c,u,h){const _=n;for(let f=0;f<c.length;f++){const y=c[f];for(let v=0;v<y.commands.length;v++)y.commands[v].entity===_.command.entity.task?s(y.commands[v],u,h):y.commands[v].entity===_.command.entity.link&&o(y.commands[v],u,h);}}function d(c,u,h){const _=n;for(let f=0;f<c.length;f++){const y=c[f];for(let v=0;v<y.commands.length;v++){const b=y.commands[v];b.entity===_.command.entity.link&&(b.value&&b.value.id===u&&(b.value.id=h),b.oldValue&&b.oldValue.id===u&&(b.oldValue.id=h));}}}t.config.undo=!0,t.config.redo=!0,t.config.undo_types={link:\"link\",task:\"task\"},t.config.undo_actions={update:\"update\",remove:\"remove\",add:\"add\",move:\"move\"},t.ext||(t.ext={}),t.ext.undo={undo:()=>n.undo(),redo:()=>n.redo(),getUndoStack:()=>n.getUndoStack(),setUndoStack:c=>n.setUndoStack(c),getRedoStack:()=>n.getRedoStack(),setRedoStack:c=>n.setRedoStack(c),clearUndoStack:()=>n.clearUndoStack(),clearRedoStack:()=>n.clearRedoStack(),saveState:(c,u)=>e.store(c,u,!0),getInitialState:(c,u)=>u===t.config.undo_types.link?e.getInitialLink(c):e.getInitialTask(c)},t.undo=t.ext.undo.undo,t.redo=t.ext.undo.redo,t.getUndoStack=t.ext.undo.getUndoStack,t.getRedoStack=t.ext.undo.getRedoStack,t.clearUndoStack=t.ext.undo.clearUndoStack,t.clearRedoStack=t.ext.undo.clearRedoStack,t.attachEvent(\"onTaskIdChange\",(c,u)=>{const h=n;l(h.getUndoStack(),c,u),l(h.getRedoStack(),c,u);}),t.attachEvent(\"onLinkIdChange\",(c,u)=>{const h=n;d(h.getUndoStack(),c,u),d(h.getRedoStack(),c,u);}),t.attachEvent(\"onGanttReady\",()=>{n.updateConfigs();});},marker:function(t){function n(i){if(!t.config.show_markers||!i.start_date)return!1;var a=t.getState();if(+i.start_date>+a.max_date||(!i.end_date||+i.end_date<+a.min_date)&&+i.start_date<+a.min_date)return;var s=document.createElement(\"div\");s.setAttribute(\"data-marker-id\",i.id);var r=\"gantt_marker\";t.templates.marker_class&&(r+=\" \"+t.templates.marker_class(i)),i.css&&(r+=\" \"+i.css),t.templates.marker_class&&(r+=\" \"+t.templates.marker_class(i)),i.title&&(s.title=i.title),s.className=r;var o=t.posFromDate(i.start_date);s.style.left=o+\"px\";let l=Math.max(t.getRowTop(t.getVisibleTaskCount()),0)+\"px\";if(t.config.timeline_placeholder&&t.$task_data&&(l=t.$task_data.scrollHeight+\"px\"),s.style.height=l,i.end_date){var d=t.posFromDate(i.end_date);s.style.width=Math.max(d-o,0)+\"px\";}if(i.text){let c=null;c=typeof i.text==\"function\"?i.text(i):i.text,c&&(t.config.external_render&&t.config.external_render.isElement(c)?(s.innerHTML=\"<div class='gantt_marker_content' ></div>\",t.config.external_render.renderElement(c,s.querySelector(\".gantt_marker_content\"))):s.innerHTML=\"<div class='gantt_marker_content' >\"+i.text+\"</div>\");}return s;}function e(){if(t.$task_data&&t.$root.contains(t.$task_data)){if(!t.$marker_area||!t.$task_data.contains(t.$marker_area)){var i=document.createElement(\"div\");i.className=\"gantt_marker_area\",t.$task_data.appendChild(i),t.$marker_area=i;}}else t.$marker_area=null;}t._markers||(t._markers=t.createDatastore({name:\"marker\",initItem:function(i){return i.id=i.id||t.uid(),i;}})),t.config.show_markers=!0,t.attachEvent(\"onBeforeGanttRender\",function(){t.$marker_area||e();}),t.attachEvent(\"onDataRender\",function(){t.$marker_area||(e(),t.renderMarkers());}),t.attachEvent(\"onGanttLayoutReady\",function(){t.attachEvent(\"onBeforeGanttRender\",function(){t.$marker_area&&(t.$marker_area.innerHTML=\"\"),e(),t.$services.getService(\"layers\").createDataRender({name:\"marker\",defaultContainer:function(){return t.$marker_area;}}).addLayer(n);},{once:!0});}),t.getMarker=function(i){return this._markers?this._markers.getItem(i):null;},t.addMarker=function(i){return this._markers.addItem(i);},t.deleteMarker=function(i){return!!this._markers.exists(i)&&(this._markers.removeItem(i),!0);},t.updateMarker=function(i){this._markers.refresh(i);},t._getMarkers=function(){return this._markers.getItems();},t.renderMarkers=function(){this._markers.refresh();};},multiselect:function(t){t.config.multiselect=!0,t.config.multiselect_one_level=!1,t._multiselect={_selected:{},_one_level:!1,_active:!0,_first_selected_when_shift:null,getDefaultSelected:function(){var n=this.getSelected();return n.length?n[n.length-1]:null;},setFirstSelected:function(n){this._first_selected_when_shift=n;},getFirstSelected:function(){return this._first_selected_when_shift;},isActive:function(){return this.updateState(),this._active;},updateState:function(){this._one_level=t.config.multiselect_one_level;var n=this._active;this._active=t.config.select_task,this._active!=n&&this.reset();},reset:function(){this._selected={};},setLastSelected:function(n){t.$data.tasksStore.silent(function(){var e=t.$data.tasksStore;n?e.select(n+\"\"):e.unselect(null);});},getLastSelected:function(){var n=t.$data.tasksStore.getSelectedId();return n&&t.isTaskExists(n)?n:null;},select:function(n,e){return!!(n&&t.callEvent(\"onBeforeTaskMultiSelect\",[n,!0,e])&&t.callEvent(\"onBeforeTaskSelected\",[n]))&&(this._selected[n]=!0,this.setLastSelected(n),this.afterSelect(n),t.callEvent(\"onTaskMultiSelect\",[n,!0,e]),t.callEvent(\"onTaskSelected\",[n]),!0);},toggle:function(n,e){this._selected[n]?this.unselect(n,e):this.select(n,e);},unselect:function(n,e){n&&t.callEvent(\"onBeforeTaskMultiSelect\",[n,!1,e])&&(this._selected[n]=!1,this.getLastSelected()==n&&this.setLastSelected(this.getDefaultSelected()),this.afterSelect(n),t.callEvent(\"onTaskMultiSelect\",[n,!1,e]),t.callEvent(\"onTaskUnselected\",[n]));},isSelected:function(n){return!(!t.isTaskExists(n)||!this._selected[n]);},getSelected:function(){var n=[];for(var e in this._selected)this._selected[e]&&t.isTaskExists(e)?n.push(e):this._selected[e]=!1;return n.sort(function(i,a){return t.getGlobalTaskIndex(i)>t.getGlobalTaskIndex(a)?1:-1;}),n;},forSelected:function(n){for(var e=this.getSelected(),i=0;i<e.length;i++)n(e[i]);},isSameLevel:function(n){if(!this._one_level)return!0;var e=this.getLastSelected();return!e||!t.isTaskExists(e)||!t.isTaskExists(n)||t.calculateTaskLevel(t.getTask(e))==t.calculateTaskLevel(t.getTask(n));},afterSelect:function(n){t.isTaskExists(n)&&t._quickRefresh(function(){t.refreshTask(n);});},doSelection:function(n){if(!this.isActive()||t._is_icon_open_click(n))return!1;var e=t.locate(n);if(!e||!t.callEvent(\"onBeforeMultiSelect\",[n]))return!1;var i=this.getSelected(),a=this.getFirstSelected(),s=!1,r=this.getLastSelected(),o=t.config.multiselect,l=function(){const c=t.ext.inlineEditors;if(c&&c.getState){const h=c.getState(),_=c.locateCell(n.target);t.config.inline_editors_multiselect_open&&_&&c.getEditorConfig(_.columnName)&&(c.isVisible()&&h.id==_.id&&h.columnName==_.columnName||c.startEdit(_.id,_.columnName));}this.setFirstSelected(e),this.isSelected(e)||this.select(e,n),i=this.getSelected();for(var u=0;u<i.length;u++)i[u]!==e&&this.unselect(i[u],n);}.bind(this),d=function(){if(r){if(e){var c=t.getGlobalTaskIndex(this.getFirstSelected()),u=t.getGlobalTaskIndex(e),h=t.getGlobalTaskIndex(r);c!=-1&&h!=-1||(c=u,this.reset());for(var _=r;t.getGlobalTaskIndex(_)!==c;)this.unselect(_,n),_=c>h?t.getNext(_):t.getPrev(_);for(_=e;t.getGlobalTaskIndex(_)!==c;)this.select(_,n)&&!s&&(s=!0,a=_),_=c>u?t.getNext(_):t.getPrev(_);}}else r=e;}.bind(this);return o&&(n.ctrlKey||n.metaKey)?(this.isSelected(e)||this.setFirstSelected(e),e&&this.toggle(e,n)):o&&n.shiftKey?(t.isTaskExists(this.getFirstSelected())&&this.getFirstSelected()!==null||this.setFirstSelected(e),i.length?d():l()):l(),this.isSelected(e)?this.setLastSelected(e):a?e==r&&this.setLastSelected(n.shiftKey?a:this.getDefaultSelected()):this.setLastSelected(null),this.getSelected().length||this.setLastSelected(null),this.getLastSelected()&&this.isSelected(this.getFirstSelected())||this.setFirstSelected(this.getLastSelected()),!0;}},function(){var n=t.selectTask;t.selectTask=function(i){if(!(i=st(i,this.config.root_id)))return!1;var a=t._multiselect,s=i;return a.isActive()?(a.select(i,null)&&a.setLastSelected(i),a.setFirstSelected(a.getLastSelected())):s=n.call(this,i),s;};var e=t.unselectTask;t.unselectTask=function(i){var a=t._multiselect,s=a.isActive();(i=i||a.getLastSelected())&&s&&(a.unselect(i,null),i==a.getLastSelected()&&a.setLastSelected(null),t.refreshTask(i),a.setFirstSelected(a.getLastSelected()));var r=i;return s||(r=e.call(this,i)),r;},t.toggleTaskSelection=function(i){var a=t._multiselect;i&&a.isActive()&&(a.toggle(i),a.setFirstSelected(a.getLastSelected()));},t.getSelectedTasks=function(){var i=t._multiselect;return i.isActive(),i.getSelected();},t.eachSelectedTask=function(i){return this._multiselect.forSelected(i);},t.isSelectedTask=function(i){return this._multiselect.isSelected(i);},t.getLastSelectedTask=function(){return this._multiselect.getLastSelected();},t.attachEvent(\"onGanttReady\",function(){var i=t.$data.tasksStore.isSelected;t.$data.tasksStore.isSelected=function(a){return t._multiselect.isActive()?t._multiselect.isSelected(a):i.call(this,a);};});}(),t.attachEvent(\"onTaskIdChange\",function(n,e){var i=t._multiselect;if(!i.isActive())return!0;t.isSelectedTask(n)&&(i.unselect(n,null),i.select(e,null));}),t.attachEvent(\"onAfterTaskDelete\",function(n,e){var i=t._multiselect;if(!i.isActive())return!0;i._selected[n]&&(i._selected[n]=!1,i.setLastSelected(i.getDefaultSelected())),i.forSelected(function(a){t.isTaskExists(a)||i.unselect(a,null);});}),t.attachEvent(\"onBeforeTaskMultiSelect\",function(n,e,i){const a=t._multiselect;if(e&&a.isActive()){let s=t.getSelectedId(),r=null;s&&(r=t.getTask(s));let o=t.getTask(n),l=!1;if(r&&r.$level!=o.$level&&(l=!0),t.config.multiselect_one_level&&l&&!i.ctrlKey&&!i.shiftKey)return!0;if(a._one_level)return a.isSameLevel(n);}return!0;}),t.attachEvent(\"onTaskClick\",function(n,e){return t._multiselect.doSelection(e)&&t.callEvent(\"onMultiSelect\",[e]),!0;});},export_api:function(t){return t.ext=t.ext||{},t.ext.export_api=t.ext.export_api||{_apiUrl:\"https://export.dhtmlx.com/gantt\",_preparePDFConfigRaw(n,e){let i=null;n.start&&n.end&&(i={start_date:t.config.start_date,end_date:t.config.end_date},t.config.start_date=t.date.str_to_date(t.config.date_format)(n.start),t.config.end_date=t.date.str_to_date(t.config.date_format)(n.end)),n=t.mixin(n,{name:\"gantt.\"+e,data:t.ext.export_api._serializeHtml()}),i&&(t.config.start_date=i.start_date,t.config.end_date=i.end_date);},_prepareConfigPDF:(n,e)=>(n=t.mixin(n||{},{name:\"gantt.\"+e,data:t.ext.export_api._serializeAll(),config:t.config}),t.ext.export_api._fixColumns(n.config.columns),n),_pdfExportRouter(n,e){n&&n.raw?t.ext.export_api._preparePDFConfigRaw(n,e):n=t.ext.export_api._prepareConfigPDF(n,e),n.version=t.version,t.ext.export_api._sendToExport(n,e);},exportToPDF(n){t.ext.export_api._pdfExportRouter(n,\"pdf\");},exportToPNG(n){t.ext.export_api._pdfExportRouter(n,\"png\");},exportToICal(n){n=t.mixin(n||{},{name:\"gantt.ical\",data:t.ext.export_api._serializePlain().data,version:t.version}),t.ext.export_api._sendToExport(n,\"ical\");},exportToExcel(n){let e;n=n||{};let i,a,s=[];const r=t.config.smart_rendering;if(n.visual===\"base-colors\"&&(t.config.smart_rendering=!1),n.start||n.end){i=t.getState(),s=[t.config.start_date,t.config.end_date],a=t.getScrollState();const o=t.date.str_to_date(t.config.date_format);e=t.eachTask,n.start&&(t.config.start_date=o(n.start)),n.end&&(t.config.end_date=o(n.end)),t.render(),t.config.smart_rendering=r,t.eachTask=t.ext.export_api._eachTaskTimed(t.config.start_date,t.config.end_date);}else n.visual===\"base-colors\"&&(t.render(),t.config.smart_rendering=r);(n=t.mixin(n,{name:\"gantt.xlsx\",title:\"Tasks\",data:t.ext.export_api._serializeTimeline(n),columns:t.ext.export_api._serializeGrid({raw:n.raw,rawDates:!0}),version:t.version})).visual&&(n.scales=t.ext.export_api._serializeScales(n)),t.ext.export_api._sendToExport(n,\"excel\"),(n.start||n.end)&&(t.config.start_date=i.min_date,t.config.end_date=i.max_date,t.eachTask=e,t.render(),t.scrollTo(a.x,a.y),t.config.start_date=s[0],t.config.end_date=s[1]);},exportToJSON(n){n=t.mixin(n||{},{name:\"gantt.json\",data:t.ext.export_api._serializeAll(),config:t.config,columns:t.ext.export_api._serializeGrid(),worktime:t.ext.export_api._getWorktimeSettings(),version:t.version}),t.ext.export_api._sendToExport(n,\"json\");},importFromExcel(n){try{const e=n.data;if(e instanceof File){const i=new FormData();i.append(\"file\",e),n.data=i;}}catch{}t.ext.export_api._sendImportAjaxExcel(n);},importFromMSProject(n){const e=n.data;try{if(e instanceof File){const i=new FormData();i.append(\"file\",e),n.data=i;}}catch{}t.ext.export_api._sendImportAjaxMSP(n);},importFromPrimaveraP6:n=>(n.type=\"primaveraP6-parse\",t.importFromMSProject(n)),exportToMSProject(n){(n=n||{}).skip_circular_links=n.skip_circular_links===void 0||!!n.skip_circular_links;const e=t.templates.xml_format,i=t.templates.format_date,a=t.config.xml_date,s=t.config.date_format,r=\"%d-%m-%Y %H:%i:%s\";t.config.xml_date=r,t.config.date_format=r,t.templates.xml_format=t.date.date_to_str(r),t.templates.format_date=t.date.date_to_str(r);const o=t.ext.export_api._serializeAll();t.ext.export_api._customProjectProperties(o,n),t.ext.export_api._customTaskProperties(o,n),n.skip_circular_links&&t.ext.export_api._clearRecLinks(o),n=t.ext.export_api._exportConfig(o,n),t.ext.export_api._sendToExport(n,n.type||\"msproject\"),t.config.xml_date=a,t.config.date_format=s,t.templates.xml_format=e,t.templates.format_date=i,t.config.$custom_data=null,t.config.custom=null;},exportToPrimaveraP6:n=>((n=n||{}).type=\"primaveraP6\",t.exportToMSProject(n)),_fixColumns(n){for(let e=0;e<n.length;e++)n[e].label=n[e].label||t.locale.labels[\"column_\"+n[e].name],typeof n[e].width==\"string\"&&(n[e].width=1*n[e].width);},_xdr(n,e,i){t.ajax.post(n,e,i);},_markColumns(n){const e=n.config.columns;if(e)for(let i=0;i<e.length;i++)e[i].template&&(e[i].$template=!0);},_sendImportAjaxExcel(n){const e=n.server||t.ext.export_api._apiUrl,i=n.store||0,a=n.data,s=n.callback;a.append(\"type\",\"excel-parse\"),a.append(\"data\",JSON.stringify({sheet:n.sheet||0})),i&&a.append(\"store\",i);const r=new XMLHttpRequest();r.onreadystatechange=function(o){r.readyState===4&&r.status===0&&s&&s(null);},r.onload=function(){let o=null;if(!(r.status>400))try{o=JSON.parse(r.responseText);}catch{}s&&s(o);},r.open(\"POST\",e,!0),r.setRequestHeader(\"X-Requested-With\",\"XMLHttpRequest\"),r.send(a);},_ajaxToExport(n,e,i){delete n.callback;const a=n.server||t.ext.export_api._apiUrl,s=\"type=\"+e+\"&store=1&data=\"+encodeURIComponent(JSON.stringify(n));t.ext.export_api._xdr(a,s,function(r){const o=r.xmlDoc||r;let l=null;if(!(o.status>400))try{l=JSON.parse(o.responseText);}catch{}i(l);});},_serializableGanttConfig(n){const e=t.mixin({},n);return e.columns&&(e.columns=e.columns.map(function(i){const a=t.mixin({},i);return delete a.editor,a;})),delete e.editor_types,e;},_sendToExport(n,e){const i=t.date.date_to_str(t.config.date_format||t.config.xml_date);if(n.skin||(n.skin=t.skin),n.config&&(n.config=t.copy(t.ext.export_api._serializableGanttConfig(n.config)),t.ext.export_api._markColumns(n,e),n.config.start_date&&n.config.end_date&&(n.config.start_date instanceof Date&&(n.config.start_date=i(n.config.start_date)),n.config.end_date instanceof Date&&(n.config.end_date=i(n.config.end_date)))),n.callback)return t.ext.export_api._ajaxToExport(n,e,n.callback);const a=t.ext.export_api._createHiddenForm();a.firstChild.action=n.server||t.ext.export_api._apiUrl,a.firstChild.childNodes[0].value=JSON.stringify(n),a.firstChild.childNodes[1].value=e,a.firstChild.submit();},_createHiddenForm(){if(!t.ext.export_api._hidden_export_form){const n=t.ext.export_api._hidden_export_form=document.createElement(\"div\");n.style.display=\"none\",n.innerHTML=\"<form method='POST' target='_blank'><textarea name='data' style='width:0px; height:0px;' readonly='true'></textarea><input type='hidden' name='type' value=''></form>\",document.body.appendChild(n);}return t.ext.export_api._hidden_export_form;},_copyObjectBase(n){const e={start_date:void 0,end_date:void 0,constraint_date:void 0,deadline:void 0};for(const a in n)a.charAt(0)!==\"$\"&&a!==\"baselines\"&&(e[a]=n[a]);const i=t.templates.xml_format||t.templates.format_date;return e.start_date=i(e.start_date),e.end_date&&(e.end_date=i(e.end_date)),e.constraint_date&&(e.constraint_date=i(e.constraint_date)),e.deadline&&(e.deadline=i(e.deadline)),e;},_color_box:null,_color_hash:{},_getStyles(n){if(t.ext.export_api._color_box||(t.ext.export_api._color_box=document.createElement(\"DIV\"),t.ext.export_api._color_box.style.cssText=\"position:absolute; display:none;\",document.body.appendChild(t.ext.export_api._color_box)),t.ext.export_api._color_hash[n])return t.ext.export_api._color_hash[n];t.ext.export_api._color_box.className=n;const e=t.ext.export_api._getColor(t.ext.export_api._color_box,\"color\"),i=t.ext.export_api._getColor(t.ext.export_api._color_box,\"backgroundColor\");return t.ext.export_api._color_hash[n]=e+\";\"+i;},_getMinutesWorktimeSettings(n){const e=[];return n.forEach(function(i){e.push(i.startMinute),e.push(i.endMinute);}),e;},_getWorktimeSettings(){const n={hours:[0,24],minutes:null,dates:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0}};let e;if(t.config.work_time){const i=t._working_time_helper;if(i&&i.get_calendar)e=i.get_calendar();else if(i)e={hours:i.hours,minutes:null,dates:i.dates};else if(t.config.worktimes&&t.config.worktimes.global){const a=t.config.worktimes.global;if(a.parsed){e={hours:null,minutes:t.ext.export_api._getMinutesWorktimeSettings(a.parsed.hours),dates:{}};for(const s in a.parsed.dates)Array.isArray(a.parsed.dates[s])?e.dates[s]=t.ext.export_api._getMinutesWorktimeSettings(a.parsed.dates[s]):e.dates[s]=a.parsed.dates[s];}else e={hours:a.hours,minutes:null,dates:a.dates};}else e=n;}else e=n;return e;},_eachTaskTimed:(n,e)=>function(i,a,s){a=a||t.config.root_id,s=s||t;const r=t.getChildren(a);if(r)for(let o=0;o<r.length;o++){const l=t._pull[r[o]];(!n||l.end_date>n)&&(!e||l.start_date<e)&&i.call(s,l),t.hasChild(l.id)&&t.eachTask(i,l.id,s);}},_originalCopyObject:t.json._copyObject,_copyObjectPlainICal(n){const e=t.templates.task_text(n.start_date,n.end_date,n),i=t.ext.export_api._copyObjectBase(n);return i.text=e||i.text,i;},_copyObjectPlainExcel(n){const e=t.templates.task_text(n.start_date,n.end_date,n),i=t.json.serializeTask(n);return i.text=e||i.text,i;},_getColor(n,e){let i=n.currentStyle?n.currentStyle[e]:getComputedStyle(n,null)[e];n.closest(\".gantt_task_progress\")&&i===\"rgba(0, 0, 0, 0.15)\"&&(i=(n=n.parentNode.parentNode).currentStyle?n.currentStyle[e]:getComputedStyle(n,null)[e]);const a=i.replace(/\\s/g,\"\").match(/^rgba?\\((\\d+),(\\d+),(\\d+)/i);return(a&&a.length===4?(\"0\"+parseInt(a[1],10).toString(16)).slice(-2)+(\"0\"+parseInt(a[2],10).toString(16)).slice(-2)+(\"0\"+parseInt(a[3],10).toString(16)).slice(-2):i).replace(\"#\",\"\");},_copyObjectTable(n){const e=t.date.date_to_str(\"%Y-%m-%dT%H:%i:%s.000Z\"),i=t.ext.export_api._copyObjectColumns(n,t.ext.export_api._copyObjectPlainExcel(n));return i.start_date&&(typeof i.start_date==\"string\"?i.original_start_date=t.date.str_to_date(t.config.date_format)(i.start_date):(i.original_start_date=i.start_date,i.start_date=e(n.start_date))),i.end_date?typeof i.end_date==\"string\"?i.original_end_date=t.date.str_to_date(t.config.date_format)(i.end_date):(i.original_end_date=i.end_date,i.end_date=e(n.end_date)):i.original_start_date&&(i.original_end_date=t.calculateEndDate({start_date:i.original_start_date,duration:i.duration,task:i}),i.end_date=e(i.original_end_date)),i;},_generatedScales:null,_generateScales(){const n=t.getState(),e=function(s){var r=new Xt(s);return r.processIgnores=function(o){var l=o.count;if(o.ignore_x={},s.ignore_time||s.config.skip_off_time){var d=s.ignore_time||function(){return!1;};l=0;for(var c=0;c<o.trace_x.length;c++)d.call(s,o.trace_x[c])||this._ignore_time_config.call(s,o.trace_x[c],o)?(o.ignore_x[o.trace_x[c].valueOf()]=!0,o.ignored_colls=!0):l++;}o.display_count=l;},r;}(t),i=[e.primaryScale(t.config)].concat(e.getSubScales(t.config)),a=e.prepareConfigs(i,t.config.min_column_width,1e3,t.config.scale_height-1,n.min_date,n.max_date,t.config.rtl);return t.ext.export_api._generatedScales=a,a;},_getDayIndex(n,e){let i=n.trace_indexes;if(i[+e])return i[+e];{i=n.trace_x;const a=t.getState();return+e<=a.min_date?t.config.rtl?i.length:0:+e>=a.max_date?t.config.rtl?0:i.length:Tt(i,+e);}},_copyObjectColors(n,e){const i=t.ext.export_api._copyObjectTable(n);let a,s=i.original_start_date,r=i.original_end_date,o=t.columnIndexByDate;if(t.ext.export_api._generatedScales){const h=t.ext.export_api._generatedScales;a=h[h.length-1],i.$start=t.ext.export_api._getDayIndex(a,s),i.$end=t.ext.export_api._getDayIndex(a,r);}else a=t.getScale(),i.$start=o.call(t,s),i.$end=o.call(t,r);let l=0;const d=a.width;if(d.indexOf(0)>-1){let h=0;for(;h<i.$start;h++)d[h]||l++;for(i.$start-=l;h<i.$end;h++)d[h]||l++;i.$end-=l;}i.$level=n.$level,i.$type=n.$rendered_type;const c=t.templates;i.$text=c.task_text(n.start,n.end_date,n),i.$left=c.leftside_text?c.leftside_text(n.start,n.end_date,n):\"\",i.$right=c.rightside_text?c.rightside_text(n.start,n.end_date,n):\"\";const u=t.getTaskNode&&t.getTaskNode(n.id);if(u&&u.firstChild){let h=u;e.visual!==\"base-colors\"&&(h=u.querySelector(\".gantt_task_progress\"));let _=t.ext.export_api._getColor(h,\"backgroundColor\");_===\"363636\"&&(_=t.ext.export_api._getColor(u,\"backgroundColor\")),i.$color=_;}else if(n.color)i.$color=n.color;else{const h=t.templates.task_class(n.start,n.end,n);if(h){const _=t.ext.export_api._getStyles(h);i.$color=_.split(\";\")[1];}}return i;},_copyObjectColumns(n,e){for(let i=0;i<t.config.columns.length;i++){const a=t.config.columns[i].template;if(a){let s=a(n);s instanceof Date&&(s=t.templates.date_grid(s,n)),e[\"_\"+i]=s;}}return e;},_copyObjectAll(n){const e=t.ext.export_api._copyObjectBase(n),i=[\"leftside_text\",\"rightside_text\",\"task_text\",\"progress_text\",\"task_class\"];for(let a=0;a<i.length;a++){const s=t.templates[i[a]];s&&(e[\"$\"+a]=s(n.start_date,n.end_date,n));}return t.ext.export_api._copyObjectColumns(n,e),e.open=n.$open,e;},_serializeHtml(){const n=t.config.smart_scales,e=t.config.smart_rendering;(n||e)&&(t.config.smart_rendering=!1,t.config.smart_scales=!1,t.render());const i=t.$container.parentNode.innerHTML;return(n||e)&&(t.config.smart_scales=n,t.config.smart_rendering=e,t.render()),i;},_serializeAll(){t.json._copyObject=t.ext.export_api._copyObjectAll;const n=t.ext.export_api._exportSerialize();return t.json._copyObject=t.ext.export_api._originalCopyObject,n;},_serializePlain(){const n=t.templates.xml_format,e=t.templates.format_date;t.templates.xml_format=t.date.date_to_str(\"%Y%m%dT%H%i%s\",!0),t.templates.format_date=t.date.date_to_str(\"%Y%m%dT%H%i%s\",!0),t.json._copyObject=t.ext.export_api._copyObjectPlainICal;const i=t.ext.export_api._exportSerialize();return t.templates.xml_format=n,t.templates.format_date=e,t.json._copyObject=t.ext.export_api._originalCopyObject,delete i.links,i;},_getRaw(){const n=t.$ui.getView(\"timeline\");if(n&&t.config.show_chart){let e=n.$config.width;t.config.autosize!==\"x\"&&t.config.autosize!==\"xy\"||(e=Math.max(t.config.autosize_min_width,0));const i=t.getState(),a=n._getScales(),s=t.config.min_column_width,r=t.config.scale_height-1,o=t.config.rtl;return n.$scaleHelper.prepareConfigs(a,s,e,r,i.min_date,i.max_date,o);}return t.ext.export_api._generateScales();},_serializeTimeline(n){let e;t.ext.export_api._generatedScales=null,n.visual&&(e=t.ext.export_api._getRaw(n.start,n.end)),n.data&&(n.custom_dataset=!0);let i=n.data||t.serialize().data;if(i.forEach(function(a,s){if(n.visual){if(a.render==\"split\"){const r=[];n.custom_dataset?i.forEach(function(l){if(l.parent==a.id){const d=t.ext.export_api._copyObjectColors(l,n);d.$split_subtask=!0,r.push(d);}}):t.eachTask(function(l){const d=t.ext.export_api._copyObjectColors(l,n);r.push(d);},a.id),a.split_bars=[];const o={};for(let l=0;l<r.length;l++){const d=r[l];for(let c=0;c<r.length;c++){const u=r[c];if(d.id==u.id||o[u.id])continue;const h=+d.original_start_date<+u.original_start_date&&+u.original_start_date<=+d.original_end_date,_=+u.original_start_date<=+d.original_start_date&&+d.original_end_date<=+u.original_end_date;if(h&&(d.original_end_date=u.original_start_date,d.end_date=u.start_date,d.$end=u.$start),_){o[d.id]=!0;break;}}o[d.id]||a.split_bars.push(d);}i[s]=a;}else a.$split_subtask||(i[s]=t.ext.export_api._copyObjectColors(a,n));}else i[s]=t.ext.export_api._copyObjectTable(a);}),n.raw&&!n.data){const a=t.getDatastore(\"task\").visibleOrder;if(i.length!==a.length){const s=[];i.forEach(function(r){a.indexOf(r.id)>-1&&s.push(r);}),i=s;}}if(n.cellColors){const a=t.templates.timeline_cell_class||t.templates.task_cell_class;if(a){let s=e[0].trace_x;for(let r=1;r<e.length;r++)e[r].trace_x.length>s.length&&(s=e[r].trace_x);for(let r=0;r<i.length;r++){i[r].styles=[];const o=t.getTask(i[r].id);for(let l=0;l<s.length;l++){const d=a(o,s[l]);d&&i[r].styles.push({index:l,styles:t.ext.export_api._getStyles(d)});}}}}return i;},_serializeScales(n){const e=[],i=t.ext.export_api._getRaw();let a=1/0,s=0;for(let r=0;r<i.length;r++)a=Math.min(a,i[r].col_width);for(let r=0;r<i.length;r++){let o=0,l=0;const d=[];e.push(d);const c=i[r];s=Math.max(s,c.trace_x.length);const u=c.format||c.template||t.date.date_to_str(c.date);for(let h=0;h<c.trace_x.length;h++){const _=c.trace_x[h];l=o+Math.round(c.width[h]/a);const f={text:u(_),start:o,end:l,styles:\"\"};if(n.cellColors){const y=c.css||t.templates.scaleCell_class;if(y){const v=y(_);v&&(f.styles=t.ext.export_api._getStyles(v));}}d.push(f),o=l;}}return{width:s,height:e.length,data:e};},_serializeGrid(n){t.exportMode=!0;const e=[],i=t.config.columns;let a=0;for(let s=0;s<i.length;s++)i[s].name!==\"add\"&&i[s].name!==\"buttons\"&&(n&&n.raw&&i[s].hide||(e[a]={id:i[s].template?\"_\"+s:i[s].name,header:i[s].label||t.locale.labels[\"column_\"+i[s].name],width:i[s].width?Math.floor(i[s].width/4):\"\",tree:i[s].tree||!1},i[s].name===\"duration\"&&(e[a].type=\"number\"),i[s].name!==\"start_date\"&&i[s].name!==\"end_date\"||(e[a].type=\"date\",n&&n.rawDates&&(e[a].id=i[s].name)),a++));return t.exportMode=!1,e;},_exportSerialize(){t.exportMode=!0;const n=t.templates.xml_format,e=t.templates.format_date;t.templates.xml_format=t.templates.format_date=t.date.date_to_str(t.config.date_format||t.config.xml_date);const i=t.serialize();return t.templates.xml_format=n,t.templates.format_date=e,t.exportMode=!1,i;},_setLevel(n){for(let e=0;e<n.length;e++){n[e].parent==0&&(n[e]._lvl=1);for(let i=e+1;i<n.length;i++)n[e].id==n[i].parent&&(n[i]._lvl=n[e]._lvl+1);}},_clearLevel(n){for(let e=0;e<n.length;e++)delete n[e]._lvl;},_clearRecLinks(n){t.ext.export_api._setLevel(n.data);const e={};for(let s=0;s<n.data.length;s++)e[n.data[s].id]=n.data[s];const i={};for(let s=0;s<n.links.length;s++){const r=n.links[s];t.isTaskExists(r.source)&&t.isTaskExists(r.target)&&e[r.source]&&e[r.target]&&(i[r.id]=r);}for(const s in i)t.ext.export_api._makeLinksSameLevel(i[s],e);const a={};for(const s in e)t.ext.export_api._clearCircDependencies(e[s],i,e,{},a,null);Object.keys(i)&&t.ext.export_api._clearLinksSameLevel(i,e);for(let s=0;s<n.links.length;s++)i[n.links[s].id]||(n.links.splice(s,1),s--);t.ext.export_api._clearLevel(n.data);},_clearCircDependencies(n,e,i,a,s,r){const o=n.$_source;if(!o)return;a[n.id]&&t.ext.export_api._onCircDependencyFind(r,e,a,s),a[n.id]=!0;const l={};for(let d=0;d<o.length;d++){if(s[o[d]])continue;const c=e[o[d]],u=i[c._target];l[u.id]&&t.ext.export_api._onCircDependencyFind(c,e,a,s),l[u.id]=!0,t.ext.export_api._clearCircDependencies(u,e,i,a,s,c);}a[n.id]=!1;},_onCircDependencyFind(n,e,i,a){n&&(t.callEvent(\"onExportCircularDependency\",[n.id,n])&&delete e[n.id],delete i[n._source],delete i[n._target],a[n.id]=!0);},_makeLinksSameLevel(n,e){let i,a;const s={target:e[n.target],source:e[n.source]};if(s.target._lvl!=s.source._lvl){s.target._lvl<s.source._lvl?(i=\"source\",a=s.target._lvl):(i=\"target\",a=s.source._lvl);do{const l=e[s[i].parent];if(!l)break;s[i]=l;}while(s[i]._lvl<a);let r=e[s.source.parent],o=e[s.target.parent];for(;r&&o&&r.id!=o.id;)s.source=r,s.target=o,r=e[s.source.parent],o=e[s.target.parent];}n._target=s.target.id,n._source=s.source.id,s.target.$_target||(s.target.$_target=[]),s.target.$_target.push(n.id),s.source.$_source||(s.source.$_source=[]),s.source.$_source.push(n.id);},_clearLinksSameLevel(n,e){for(const i in n)delete n[i]._target,delete n[i]._source;for(const i in e)delete e[i].$_source,delete e[i].$_target;},_customProjectProperties(n,e){if(e&&e.project){for(const i in e.project)t.config.$custom_data||(t.config.$custom_data={}),t.config.$custom_data[i]=typeof e.project[i]==\"function\"?e.project[i](t.config):e.project[i];delete e.project;}},_customTaskProperties(n,e){e&&e.tasks&&(n.data.forEach(function(i){for(const a in e.tasks)i.$custom_data||(i.$custom_data={}),i.$custom_data[a]=typeof e.tasks[a]==\"function\"?e.tasks[a](i,t.config):e.tasks[a];}),delete e.tasks);},_exportConfig(n,e){const i=e.name||\"gantt.xml\";delete e.name,t.config.custom=e;const a=t.ext.export_api._getWorktimeSettings(),s=t.getSubtaskDates();if(s.start_date&&s.end_date){const l=t.templates.format_date||t.templates.xml_format;t.config.start_end={start_date:l(s.start_date),end_date:l(s.end_date)};}const r=!!t._getAutoSchedulingConfig().enabled,o={callback:e.callback||null,config:t.config,data:n,manual:r,name:i,worktime:a};for(const l in e)o[l]=e[l];return o;},_sendImportAjaxMSP(n){const e=n.server||t.ext.export_api._apiUrl,i=n.store||0,a=n.data,s=n.callback,r={durationUnit:n.durationUnit||void 0,projectProperties:n.projectProperties||void 0,taskProperties:n.taskProperties||void 0};a.append(\"type\",n.type||\"msproject-parse\"),a.append(\"data\",JSON.stringify(r)),i&&a.append(\"store\",i);const o=new XMLHttpRequest();o.onreadystatechange=function(l){o.readyState===4&&o.status===0&&s&&s(null);},o.onload=function(){let l=null;if(!(o.status>400))try{l=JSON.parse(o.responseText);}catch{}s&&s(l);},o.open(\"POST\",e,!0),o.setRequestHeader(\"X-Requested-With\",\"XMLHttpRequest\"),o.send(a);}},t.exportToPDF=t.ext.export_api.exportToPDF,t.exportToPNG=t.ext.export_api.exportToPNG,t.exportToICal=t.ext.export_api.exportToICal,t.exportToExcel=t.ext.export_api.exportToExcel,t.exportToJSON=t.ext.export_api.exportToJSON,t.importFromExcel=t.ext.export_api.importFromExcel,t.importFromMSProject=t.ext.export_api.importFromMSProject,t.exportToMSProject=t.ext.export_api.exportToMSProject,t.importFromPrimaveraP6=t.ext.export_api.importFromPrimaveraP6,t.exportToPrimaveraP6=t.ext.export_api.exportToPrimaveraP6,t.ext.export_api;}},Jn={KEY_CODES:{UP:38,DOWN:40,LEFT:37,RIGHT:39,SPACE:32,ENTER:13,DELETE:46,ESC:27,TAB:9}};class Kn{constructor(n){this.addExtension=(e,i)=>{this._extensions[e]=i;},this.getExtension=e=>this._extensions[e],this._extensions={};for(const e in n)this._extensions[e]=n[e];}}var gt=typeof window<\"u\";const dt=typeof navigator<\"u\"?navigator:{userAgent:\"\"},kt={isIE:gt&&(dt.userAgent.indexOf(\"MSIE\")>=0||dt.userAgent.indexOf(\"Trident\")>=0),isOpera:gt&&(dt.userAgent.indexOf(\"Opera\")>=0||dt.userAgent.indexOf(\"OPR\")>=0),isChrome:gt&&dt.userAgent.indexOf(\"Chrome\")>=0,isSafari:gt&&(dt.userAgent.indexOf(\"Safari\")>=0||dt.userAgent.indexOf(\"Konqueror\")>=0),isFF:gt&&dt.userAgent.indexOf(\"Firefox\")>=0,isIPad:gt&&dt.userAgent.search(/iPad/gi)>=0,isEdge:gt&&dt.userAgent.indexOf(\"Edge\")!=-1,isNode:!gt||typeof navigator>\"u\"||!1,isSalesforce:gt&&(!!tt.Sfdc||!!tt.$A||tt.Aura)};function Pe(t){if(typeof t==\"string\"||typeof t==\"number\")return t;let n=\"\";for(const e in t){let i=\"\";t.hasOwnProperty(e)&&(i=typeof t[e]==\"string\"?encodeURIComponent(t[e]):typeof t[e]==\"number\"?String(t[e]):encodeURIComponent(JSON.stringify(t[e])),i=e+\"=\"+i,n.length&&(i=\"&\"+i),n+=i);}return n;}function wt(t,n){var e={method:t};if(n.length===0)throw new Error(\"Arguments list of query is wrong.\");if(n.length===1)return typeof n[0]==\"string\"?(e.url=n[0],e.async=!0):(e.url=n[0].url,e.async=n[0].async||!0,e.callback=n[0].callback,e.headers=n[0].headers),n[0].data?typeof n[0].data!=\"string\"?e.data=Pe(n[0].data):e.data=n[0].data:e.data=\"\",e;switch(e.url=n[0],t){case\"GET\":case\"DELETE\":e.callback=n[1],e.headers=n[2];break;case\"POST\":case\"PUT\":n[1]?typeof n[1]!=\"string\"?e.data=Pe(n[1]):e.data=n[1]:e.data=\"\",e.callback=n[2],e.headers=n[3];}return e;}const He={date_to_str:(t,n,e)=>{t=t.replace(/%[a-zA-Z]/g,a=>{switch(a){case\"%d\":return`\"+to_fixed(date.get${n?\"UTC\":\"\"}Date())+\"`;case\"%m\":return`\"+to_fixed((date.get${n?\"UTC\":\"\"}Month()+1))+\"`;case\"%j\":return`\"+date.get${n?\"UTC\":\"\"}Date()+\"`;case\"%n\":return`\"+(date.get${n?\"UTC\":\"\"}Month()+1)+\"`;case\"%y\":return`\"+to_fixed(date.get${n?\"UTC\":\"\"}FullYear()%100)+\"`;case\"%Y\":return`\"+date.get${n?\"UTC\":\"\"}FullYear()+\"`;case\"%D\":return`\"+locale.date.day_short[date.get${n?\"UTC\":\"\"}Day()]+\"`;case\"%l\":return`\"+locale.date.day_full[date.get${n?\"UTC\":\"\"}Day()]+\"`;case\"%M\":return`\"+locale.date.month_short[date.get${n?\"UTC\":\"\"}Month()]+\"`;case\"%F\":return`\"+locale.date.month_full[date.get${n?\"UTC\":\"\"}Month()]+\"`;case\"%h\":return`\"+to_fixed((date.get${n?\"UTC\":\"\"}Hours()+11)%12+1)+\"`;case\"%g\":return`\"+((date.get${n?\"UTC\":\"\"}Hours()+11)%12+1)+\"`;case\"%G\":return`\"+date.get${n?\"UTC\":\"\"}Hours()+\"`;case\"%H\":return`\"+to_fixed(date.get${n?\"UTC\":\"\"}Hours())+\"`;case\"%i\":return`\"+to_fixed(date.get${n?\"UTC\":\"\"}Minutes())+\"`;case\"%a\":return`\"+(date.get${n?\"UTC\":\"\"}Hours()>11?\"pm\":\"am\")+\"`;case\"%A\":return`\"+(date.get${n?\"UTC\":\"\"}Hours()>11?\"PM\":\"AM\")+\"`;case\"%s\":return`\"+to_fixed(date.get${n?\"UTC\":\"\"}Seconds())+\"`;case\"%W\":return'\"+to_fixed(getISOWeek(date))+\"';case\"%w\":return'\"+to_fixed(getWeek(date))+\"';default:return a;}});const i=new Function(\"date\",\"to_fixed\",\"locale\",\"getISOWeek\",\"getWeek\",`return \"${t}\";`);return a=>i(a,e.date.to_fixed,e.locale,e.date.getISOWeek,e.date.getWeek);},str_to_date:(t,n,e)=>{let i=\"var temp=date.match(/[a-zA-Z]+|[0-9]+/g);\";const a=t.match(/%[a-zA-Z]/g);for(let o=0;o<a.length;o++)switch(a[o]){case\"%j\":case\"%d\":i+=`set[2]=temp[${o}]||1;`;break;case\"%n\":case\"%m\":i+=`set[1]=(temp[${o}]||1)-1;`;break;case\"%y\":i+=`set[0]=temp[${o}]*1+(temp[${o}]>50?1900:2000);`;break;case\"%g\":case\"%G\":case\"%h\":case\"%H\":i+=`set[3]=temp[${o}]||0;`;break;case\"%i\":i+=`set[4]=temp[${o}]||0;`;break;case\"%Y\":i+=`set[0]=temp[${o}]||0;`;break;case\"%a\":case\"%A\":i+=`set[3]=set[3]%12+((temp[${o}]||'').toLowerCase()=='am'?0:12);`;break;case\"%s\":i+=`set[5]=temp[${o}]||0;`;break;case\"%M\":i+=`set[1]=locale.date.month_short_hash[temp[${o}]]||0;`;break;case\"%F\":i+=`set[1]=locale.date.month_full_hash[temp[${o}]]||0;`;}let s=\"set[0],set[1],set[2],set[3],set[4],set[5]\";n&&(s=` Date.UTC(${s})`);const r=new Function(\"date\",\"locale\",`var set=[0,0,1,0,0,0]; ${i} return new Date(${s});`);return o=>r(o,e.locale);}},Oe={date_to_str:(t,n,e)=>i=>t.replace(/%[a-zA-Z]/g,a=>{switch(a){case\"%d\":return n?e.date.to_fixed(i.getUTCDate()):e.date.to_fixed(i.getDate());case\"%m\":return n?e.date.to_fixed(i.getUTCMonth()+1):e.date.to_fixed(i.getMonth()+1);case\"%j\":return n?i.getUTCDate():i.getDate();case\"%n\":return n?i.getUTCMonth()+1:i.getMonth()+1;case\"%y\":return n?e.date.to_fixed(i.getUTCFullYear()%100):e.date.to_fixed(i.getFullYear()%100);case\"%Y\":return n?i.getUTCFullYear():i.getFullYear();case\"%D\":return n?e.locale.date.day_short[i.getUTCDay()]:e.locale.date.day_short[i.getDay()];case\"%l\":return n?e.locale.date.day_full[i.getUTCDay()]:e.locale.date.day_full[i.getDay()];case\"%M\":return n?e.locale.date.month_short[i.getUTCMonth()]:e.locale.date.month_short[i.getMonth()];case\"%F\":return n?e.locale.date.month_full[i.getUTCMonth()]:e.locale.date.month_full[i.getMonth()];case\"%h\":return n?e.date.to_fixed((i.getUTCHours()+11)%12+1):e.date.to_fixed((i.getHours()+11)%12+1);case\"%g\":return n?(i.getUTCHours()+11)%12+1:(i.getHours()+11)%12+1;case\"%G\":return n?i.getUTCHours():i.getHours();case\"%H\":return n?e.date.to_fixed(i.getUTCHours()):e.date.to_fixed(i.getHours());case\"%i\":return n?e.date.to_fixed(i.getUTCMinutes()):e.date.to_fixed(i.getMinutes());case\"%a\":return n?i.getUTCHours()>11?\"pm\":\"am\":i.getHours()>11?\"pm\":\"am\";case\"%A\":return n?i.getUTCHours()>11?\"PM\":\"AM\":i.getHours()>11?\"PM\":\"AM\";case\"%s\":return n?e.date.to_fixed(i.getUTCSeconds()):e.date.to_fixed(i.getSeconds());case\"%W\":return n?e.date.to_fixed(e.date.getUTCISOWeek(i)):e.date.to_fixed(e.date.getISOWeek(i));case\"%w\":return e.date.to_fixed(e.date.getWeek(i));default:return a;}}),str_to_date:(t,n,e)=>i=>{const a=[0,0,1,0,0,0],s=i.match(/[a-zA-Z]+|[0-9]+/g),r=t.match(/%[a-zA-Z]/g);for(let o=0;o<r.length;o++)switch(r[o]){case\"%j\":case\"%d\":a[2]=s[o]||1;break;case\"%n\":case\"%m\":a[1]=(s[o]||1)-1;break;case\"%y\":a[0]=1*s[o]+(s[o]>50?1900:2e3);break;case\"%g\":case\"%G\":case\"%h\":case\"%H\":a[3]=s[o]||0;break;case\"%i\":a[4]=s[o]||0;break;case\"%Y\":a[0]=s[o]||0;break;case\"%a\":case\"%A\":a[3]=a[3]%12+((s[o]||\"\").toLowerCase()===\"am\"?0:12);break;case\"%s\":a[5]=s[o]||0;break;case\"%M\":a[1]=e.locale.date.month_short_hash[s[o]]||0;break;case\"%F\":a[1]=e.locale.date.month_full_hash[s[o]]||0;}return n?new Date(Date.UTC(a[0],a[1],a[2],a[3],a[4],a[5])):new Date(a[0],a[1],a[2],a[3],a[4],a[5]);}};function Xn(t){var n=null;function e(){var a=!1;return t.config.csp===\"auto\"?(n===null&&function(){try{new Function(\"canUseCsp = false;\");}catch{n=!0;}}(),a=n):a=t.config.csp,a;}var i={init:function(){for(var a=t.locale,s=a.date.month_short,r=a.date.month_short_hash={},o=0;o<s.length;o++)r[s[o]]=o;for(s=a.date.month_full,r=a.date.month_full_hash={},o=0;o<s.length;o++)r[s[o]]=o;},date_part:function(a){var s=new Date(a);return a.setHours(0),this.hour_start(a),a.getHours()&&(a.getDate()<s.getDate()||a.getMonth()<s.getMonth()||a.getFullYear()<s.getFullYear())&&a.setTime(a.getTime()+36e5*(24-a.getHours())),a;},time_part:function(a){return(a.valueOf()/1e3-60*a.getTimezoneOffset())%86400;},week_start:function(a){var s=a.getDay();return t.config.start_on_monday&&(s===0?s=6:s--),this.date_part(this.add(a,-1*s,\"day\"));},month_start:function(a){return a.setDate(1),this.date_part(a);},quarter_start:function(a){this.month_start(a);var s,r=a.getMonth();return s=r>=9?9:r>=6?6:r>=3?3:0,a.setMonth(s),a;},year_start:function(a){return a.setMonth(0),this.month_start(a);},day_start:function(a){return this.date_part(a);},hour_start:function(a){return a.getMinutes()&&a.setMinutes(0),this.minute_start(a),a;},minute_start:function(a){return a.getSeconds()&&a.setSeconds(0),a.getMilliseconds()&&a.setMilliseconds(0),a;},_add_days:function(a,s,r){a.setDate(a.getDate()+s);var o=s>=0,l=!r.getHours()&&a.getHours(),d=a.getDate()<=r.getDate()||a.getMonth()<r.getMonth()||a.getFullYear()<r.getFullYear();return o&&l&&d&&a.setTime(a.getTime()+36e5*(24-a.getHours())),s>1&&l&&a.setHours(0),a;},add:function(a,s,r){var o=new Date(a.valueOf());switch(r){case\"day\":o=this._add_days(o,s,a);break;case\"week\":o=this._add_days(o,7*s,a);break;case\"month\":o.setMonth(o.getMonth()+s);break;case\"year\":o.setYear(o.getFullYear()+s);break;case\"hour\":o.setTime(o.getTime()+60*s*60*1e3);break;case\"minute\":o.setTime(o.getTime()+60*s*1e3);break;default:return this[\"add_\"+r](a,s,r);}return o;},add_quarter:function(a,s){return this.add(a,3*s,\"month\");},to_fixed:function(a){return a<10?\"0\"+a:a;},copy:function(a){return new Date(a.valueOf());},date_to_str:function(a,s){var r=He;return e()&&(r=Oe),r.date_to_str(a,s,t);},str_to_date:function(a,s){var r=He;return e()&&(r=Oe),r.str_to_date(a,s,t);},getISOWeek:function(a){return t.date._getWeekNumber(a,!0);},_getWeekNumber:function(a,s){if(!a)return!1;var r=a.getDay();s&&r===0&&(r=7);var o=new Date(a.valueOf());o.setDate(a.getDate()+(4-r));var l=o.getFullYear(),d=Math.round((o.getTime()-new Date(l,0,1).getTime())/864e5);return 1+Math.floor(d/7);},getWeek:function(a){return t.date._getWeekNumber(a,t.config.start_on_monday);},getUTCISOWeek:function(a){return t.date.getISOWeek(a);},convert_to_utc:function(a){return new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds());},parseDate:function(a,s){return a&&!a.getFullYear&&(typeof s!=\"function\"&&(s=typeof s==\"string\"?s===\"parse_date\"||s===\"xml_date\"?t.defined(t.templates.xml_date)?t.templates.xml_date:t.templates.parse_date:t.defined(t.templates[s])?t.templates[s]:t.date.str_to_date(s):t.defined(t.templates.xml_date)?t.templates.xml_date:t.templates.parse_date),a=a?s(a):null),a;}};return i;}class hn{constructor(n){const{url:e,token:i}=n;this._url=e,this._token=i,this._mode=1,this._seed=1,this._queue=[],this.data={},this.api={},this._events={};}headers(){return{Accept:\"application/json\",\"Content-Type\":\"application/json\",\"Remote-Token\":this._token};}fetch(n,e){const i={credentials:\"include\",headers:this.headers()};return e&&(i.method=\"POST\",i.body=e),fetch(n,i).then(a=>a.json());}load(n){return n&&(this._url=n),this.fetch(this._url).then(e=>this.parse(e));}parse(n){const{key:e,websocket:i}=n;e&&(this._token=n.key);for(const a in n.data)this.data[a]=n.data[a];for(const a in n.api){const s=this.api[a]={},r=n.api[a];for(const o in r)s[o]=this._wrapper(a+\".\"+o);}return i&&this.connect(),this;}connect(){const n=this._socket;n&&(this._socket=null,n.onclose=function(){},n.close()),this._mode=2,this._socket=function(e,i,a,s){let r=i;r[0]===\"/\"&&(r=document.location.protocol+\"//\"+document.location.host+i),r=r.replace(/^http(s|):/,\"ws$1:\");const o=r.indexOf(\"?\")!=-1?\"&\":\"?\";r=`${r}${o}token=${a}&ws=1`;const l=new WebSocket(r);return l.onclose=()=>setTimeout(()=>e.connect(),2e3),l.onmessage=d=>{const c=JSON.parse(d.data);switch(c.action){case\"result\":e.result(c.body,[]);break;case\"event\":e.fire(c.body.name,c.body.value);break;case\"start\":s();break;default:e.onError(c.data);}},l;}(this,this._url,this._token,()=>(this._mode=3,this._send(),this._resubscribe(),this));}_wrapper(n){return function(){const e=[].slice.call(arguments);let i=null;const a=new Promise((s,r)=>{i={data:{id:this._uid(),name:n,args:e},status:1,resolve:s,reject:r},this._queue.push(i);});return this.onCall(i,a),this._mode===3?this._send(i):setTimeout(()=>this._send(),1),a;}.bind(this);}_uid(){return(this._seed++).toString();}_send(n){if(this._mode==2)return void setTimeout(()=>this._send(),100);const e=n?[n]:this._queue.filter(a=>a.status===1);if(!e.length)return;const i=e.map(a=>(a.status=2,a.data));this._mode!==3?this.fetch(this._url,JSON.stringify(i)).catch(a=>this.onError(a)).then(a=>this.result(a,i)):this._socket.send(JSON.stringify({action:\"call\",body:i}));}result(n,e){const i={};if(n)for(let a=0;a<n.length;a++)i[n[a].id]=n[a];else for(let a=0;a<e.length;a++)i[e[a].id]={id:e[a].id,error:\"Network Error\",data:null};for(let a=this._queue.length-1;a>=0;a--){const s=this._queue[a],r=i[s.data.id];r&&(this.onResponse(s,r),r.error?s.reject(r.error):s.resolve(r.data),this._queue.splice(a,1));}}on(n,e){const i=this._uid();let a=this._events[n];const s=!!a;return s||(a=this._events[n]=[]),a.push({id:i,handler:e}),s||this._mode!=3||this._socket.send(JSON.stringify({action:\"subscribe\",name:n})),{name:n,id:i};}_resubscribe(){if(this._mode==3)for(const n in this._events)this._socket.send(JSON.stringify({action:\"subscribe\",name:n}));}detach(n){if(!n){if(this._mode==3)for(const s in this._events)this._socket.send(JSON.stringify({action:\"unsubscribe\",key:s}));return void(this._events={});}const{id:e,name:i}=n,a=this._events[i];if(a){const s=a.filter(r=>r.id!=e);s.length?this._events[i]=s:(delete this._events[i],this._mode==3&&this._socket.send(JSON.stringify({action:\"unsubscribe\",name:i})));}}fire(n,e){const i=this._events[n];if(i)for(let a=0;a<i.length;a++)i[a].handler(e);}onError(n){return null;}onCall(n,e){}onResponse(n,e){}}const Zn=function(t,n){const e=new hn({url:t,token:n});e.fetch=function(i,a){const s={headers:this.headers()};return a&&(s.method=\"POST\",s.body=a),fetch(i,s).then(r=>r.json());},this._ready=e.load().then(i=>this._remote=i),this.ready=function(){return this._ready;},this.on=function(i,a){this.ready().then(s=>{if(typeof i==\"string\")s.on(i,a);else for(const r in i)s.on(r,i[r]);});};};function _n(t,n){if(!n)return!0;if(t._on_timeout)return!1;var e=Math.ceil(1e3/n);return e<2||(setTimeout(function(){delete t._on_timeout;},e),t._on_timeout=!0),!0;}var Qn=function(){var t={};return{getState:function(n){if(t[n])return t[n].method();var e={};for(var i in t)t[i].internal||R(e,t[i].method(),!0);return e;},registerProvider:function(n,e,i){t[n]={method:e,internal:i};},unregisterProvider:function(n){delete t[n];}};};const ti=Promise;var nt={$create:function(t){return R(t||[],this);},$removeAt:function(t,n){t>=0&&this.splice(t,n||1);},$remove:function(t){this.$removeAt(this.$find(t));},$insertAt:function(t,n){if(n||n===0){var e=this.splice(n,this.length-n);this[n]=t,this.push.apply(this,e);}else this.push(t);},$find:function(t){for(var n=0;n<this.length;n++)if(t==this[n])return n;return-1;},$each:function(t,n){for(var e=0;e<this.length;e++)t.call(n||this,this[e]);},$map:function(t,n){for(var e=0;e<this.length;e++)this[e]=t.call(n||this,this[e]);return this;},$filter:function(t,n){for(var e=0;e<this.length;e++)t.call(n||this,this[e])||(this.splice(e,1),e--);return this;}};function Ot(t,n,e,i){return(i=n?n.config:i)&&i.placeholder_task&&e.exists(t)?e.getItem(t).type===i.types.placeholder:!1;}var at=function(t){return this.pull={},this.$initItem=t.initItem,this.visibleOrder=nt.$create(),this.fullOrder=nt.$create(),this._skip_refresh=!1,this._filterRule=null,this._searchVisibleOrder={},this._indexRangeCache={},this._getItemsCache=null,this.$config=t,lt(this),this._attachDataChange(function(){return this._indexRangeCache={},this._getItemsCache=null,!0;}),this;};at.prototype={_attachDataChange:function(t){this.attachEvent(\"onClearAll\",t),this.attachEvent(\"onBeforeParse\",t),this.attachEvent(\"onBeforeUpdate\",t),this.attachEvent(\"onBeforeDelete\",t),this.attachEvent(\"onBeforeAdd\",t),this.attachEvent(\"onParse\",t),this.attachEvent(\"onBeforeFilter\",t);},_parseInner:function(t){for(var n=null,e=[],i=0,a=t.length;i<a;i++)n=t[i],this.$initItem&&(this.$config.copyOnParse()&&(n=X(n)),n=this.$initItem(n)),this.callEvent(\"onItemLoading\",[n])&&(this.pull.hasOwnProperty(n.id)||this.fullOrder.push(n.id),e.push(n),this.pull[n.id]=n);return e;},parse:function(t){this.isSilent()||this.callEvent(\"onBeforeParse\",[t]);var n=this._parseInner(t);this.isSilent()||(this.refresh(),this.callEvent(\"onParse\",[n]));},getItem:function(t){return this.pull[t];},_updateOrder:function(t){t.call(this.visibleOrder),t.call(this.fullOrder);},updateItem:function(t,n){if(q(n)||(n=this.getItem(t)),!this.isSilent()&&this.callEvent(\"onBeforeUpdate\",[n.id,n])===!1)return!1;R(this.pull[t],n,!0),this.isSilent()||(this.callEvent(\"onAfterUpdate\",[n.id,n]),this.callEvent(\"onStoreUpdated\",[n.id,n,\"update\"]));},_removeItemInner:function(t){this._updateOrder(function(){this.$remove(t);}),delete this.pull[t];},removeItem:function(t){var n=this.getItem(t);if(!this.isSilent()&&this.callEvent(\"onBeforeDelete\",[n.id,n])===!1)return!1;this.callEvent(\"onAfterDeleteConfirmed\",[n.id,n]),this._removeItemInner(t),this.isSilent()&&this.callEvent(\"onAfterSilentDelete\",[n.id,n]),this.isSilent()||(this.filter(),this.callEvent(\"onAfterDelete\",[n.id,n]),this.callEvent(\"onStoreUpdated\",[n.id,n,\"delete\"]));},_addItemInner:function(t,n){if(this.exists(t.id))this.silent(function(){this.updateItem(t.id,t);});else{var e=this.visibleOrder,i=e.length;(!q(n)||n<0)&&(n=i),n>i&&(n=Math.min(e.length,n));}this.pull[t.id]=t,this._updateOrder(function(){this.$find(t.id)===-1&&this.$insertAt(t.id,n);}),this.filter();},isVisible:function(t){return this.visibleOrder.$find(t)>-1;},getVisibleItems:function(){return this.getIndexRange();},addItem:function(t,n){return q(t.id)||(t.id=ot()),this.$initItem&&(t=this.$initItem(t)),!(!this.isSilent()&&this.callEvent(\"onBeforeAdd\",[t.id,t])===!1)&&(this._addItemInner(t,n),this.isSilent()?this.sync_link&&this.sync_link(t):(this.callEvent(\"onAfterAdd\",[t.id,t]),this.callEvent(\"onStoreUpdated\",[t.id,t,\"add\"])),t.id);},_changeIdInner:function(t,n){this.pull[t]&&(this.pull[n]=this.pull[t]);var e=this._searchVisibleOrder[t];this.pull[n].id=n,this._updateOrder(function(){this[this.$find(t)]=n;}),this._searchVisibleOrder[n]=e,delete this._searchVisibleOrder[t],delete this.pull[t];},changeId:function(t,n){this._changeIdInner(t,n),this.callEvent(\"onIdChange\",[t,n]);},exists:function(t){return!!this.pull[t];},_moveInner:function(t,n){var e=this.getIdByIndex(t);this._updateOrder(function(){this.$removeAt(t),this.$insertAt(e,Math.min(this.length,n));});},move:function(t,n){var e=this.getIdByIndex(t),i=this.getItem(e);this._moveInner(t,n),this.isSilent()||this.callEvent(\"onStoreUpdated\",[i.id,i,\"move\"]);},clearAll:function(){this.$destroyed||(this.silent(function(){this.unselect();}),this.pull={},this.visibleOrder=nt.$create(),this.fullOrder=nt.$create(),this.isSilent()||(this.callEvent(\"onClearAll\",[]),this.refresh()));},silent:function(t,n){var e=!1;this.isSilent()&&(e=!0),this._skip_refresh=!0,t.call(n||this),e||(this._skip_refresh=!1);},isSilent:function(){return!!this._skip_refresh;},arraysEqual:function(t,n){if(t.length!==n.length)return!1;for(var e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0;},refresh:function(t,n){var e,i;if(!this.$destroyed&&!this.isSilent()&&(t&&(e=this.getItem(t)),i=t?[t,e,\"paint\"]:[null,null,null],this.callEvent(\"onBeforeStoreUpdate\",i)!==!1)){var a=this._quick_refresh&&!this._mark_recompute;if(this._mark_recompute=!1,t){if(!n&&!a){var s=this.visibleOrder;this.filter(),this.arraysEqual(s,this.visibleOrder)||(t=void 0);}}else a||this.filter();i=t?[t,e,\"paint\"]:[null,null,null],this.callEvent(\"onStoreUpdated\",i);}},count:function(){return this.fullOrder.length;},countVisible:function(){return this.visibleOrder.length;},sort:function(t){},serialize:function(){},eachItem:function(t){for(var n=0;n<this.fullOrder.length;n++){var e=this.getItem(this.fullOrder[n]);t.call(this,e);}},find:function(t){var n=[];return this.eachItem(function(e){t(e)&&n.push(e);}),n;},filter:function(t){this.isSilent()||this.callEvent(\"onBeforeFilter\",[]),this.callEvent(\"onPreFilter\",[]);var n=nt.$create(),e=[];this.eachItem(function(a){this.callEvent(\"onFilterItem\",[a.id,a])&&(Ot(a.id,null,this,this._ganttConfig)?e.push(a.id):n.push(a.id));});for(var i=0;i<e.length;i++)n.push(e[i]);for(this.visibleOrder=n,this._searchVisibleOrder={},i=0;i<this.visibleOrder.length;i++)this._searchVisibleOrder[this.visibleOrder[i]]=i;this.isSilent()||this.callEvent(\"onFilter\",[]);},getIndexRange:function(t,n){var e=Math.min(n||1/0,this.countVisible()-1),i=t||0,a=i+\"-\"+e;if(this._indexRangeCache[a])return this._indexRangeCache[a].slice();for(var s=[],r=i;r<=e;r++)s.push(this.getItem(this.visibleOrder[r]));return this._indexRangeCache[a]=s.slice(),s;},getItems:function(){if(this._getItemsCache)return this._getItemsCache.slice();var t=[];for(var n in this.pull)t.push(this.pull[n]);return this._getItemsCache=t.slice(),t;},getIdByIndex:function(t){return this.visibleOrder[t];},getIndexById:function(t){var n=this._searchVisibleOrder[t];return n===void 0&&(n=-1),n;},_getNullIfUndefined:function(t){return t===void 0?null:t;},getFirst:function(){return this._getNullIfUndefined(this.visibleOrder[0]);},getLast:function(){return this._getNullIfUndefined(this.visibleOrder[this.visibleOrder.length-1]);},getNext:function(t){return this._getNullIfUndefined(this.visibleOrder[this.getIndexById(t)+1]);},getPrev:function(t){return this._getNullIfUndefined(this.visibleOrder[this.getIndexById(t)-1]);},destructor:function(){this.callEvent(\"onDestroy\",[]),this.detachAllEvents(),this.$destroyed=!0,this.pull=null,this.$initItem=null,this.visibleOrder=null,this.fullOrder=null,this._skip_refresh=null,this._filterRule=null,this._searchVisibleOrder=null,this._indexRangeCache={};}};class ei{constructor(n){this._datastore=null,this.isSplitItem=e=>e.render==\"split\"&&this._datastore.hasChild(e.id),this.isSubrowSplitItem=e=>e.split_placement==\"subrow\",this.isDefaultSplitItem=e=>e.split_placement==\"auto\"||e.split_placement===void 0,this.isInlineSplitItem=e=>e.split_placement==\"inline\",this._datastore=n;}}var gn=function(t){var n;at.apply(this,[t]),this._branches={},this._splitTaskHelper=new ei(this),this.pull={},this.$initItem=function(o){var l=o;t.initItem&&(l=t.initItem(l));var d=this.getItem(o.id);return d&&!ct(d.parent,l.parent)&&this.move(l.id,l.$index||-1,l.parent||this._ganttConfig.root_id),l;},this.$parentProperty=t.parentProperty||\"parent\",typeof t.rootId!=\"function\"?this.$getRootId=(n=t.rootId||0,function(){return n;}):this.$getRootId=t.rootId,this.$openInitially=t.openInitially,this.visibleOrder=nt.$create(),this.fullOrder=nt.$create(),this._searchVisibleOrder={},this._indexRangeCache={},this._eachItemMainRangeCache=null,this._getItemsCache=null,this._skip_refresh=!1,this._ganttConfig=null,t.getConfig&&(this._ganttConfig=t.getConfig());var e={},i={},a={},s={},r=!1;return this._attachDataChange(function(){return this._indexRangeCache={},this._eachItemMainRangeCache=null,this._getItemsCache=null,!0;}),this.attachEvent(\"onPreFilter\",function(){this._indexRangeCache={},this._eachItemMainRangeCache=null,e={},i={},a={},s={},r=!1,this.eachItem(function(o){var l=this.getParent(o.id);o.$open&&a[l]!==!1?a[o.id]=!0:a[o.id]=!1,this._isSplitItem(o)&&(r=!0,e[o.id]=!0,i[o.id]=!0),r&&i[l]&&(this._isDefaultItem(o)||this._isInlineChildItem(o))&&(i[o.id]=!0),a[l]||a[l]===void 0||this._isInlineChildItem(o)?s[o.id]=!0:s[o.id]=!1;});}),this.attachEvent(\"onFilterItem\",function(o,l){var d=!1;this._ganttConfig&&(d=this._ganttConfig.open_split_tasks);var c=s[l.id];return r&&(c&&i[l.id]&&!e[l.id]&&(c=!!d),i[l.id]&&!e[l.id]&&(this._isSplitChildItem(l)||(l.$split_subtask=!0))),l.$expanded_branch=!!s[l.id],this._isInlineChildItem(l)&&(c=!1),!!c;}),this.attachEvent(\"onFilter\",function(){e={},i={},a={},s={};}),this;};function ct(t,n){return String(t)===String(n);}function G(t){return kt.isNode||!t.$root;}gn.prototype=R({_buildTree:function(t){for(var n=null,e=this.$getRootId(),i=0,a=t.length;i<a;i++)n=t[i],this.setParent(n,st(this.getParent(n),e)||e);for(i=0,a=t.length;i<a;i++)n=t[i],this._add_branch(n),n.$level=this.calculateItemLevel(n),n.$local_index=this.getBranchIndex(n.id),q(n.$open)||(n.$open=q(n.open)?n.open:this.$openInitially());this._updateOrder();},_isSplitItem:function(t){return this._splitTaskHelper.isSplitItem(t);},_isSplitChildItem:function(t){return this._splitTaskHelper.isSubrowSplitItem(t);},_isDefaultItem:function(t){return this._splitTaskHelper.isDefaultSplitItem(t);},_isInlineChildItem:function(t){return this._splitTaskHelper.isInlineSplitItem(t);},parse:function(t){this._skip_refresh||this.callEvent(\"onBeforeParse\",[t]);var n=this._parseInner(t);this._buildTree(n),this.filter(),this._skip_refresh||this.callEvent(\"onParse\",[n]);},_addItemInner:function(t,n){var e=this.getParent(t);q(e)||(e=this.$getRootId(),this.setParent(t,e));var i=this.getIndexById(e)+Math.min(Math.max(n,0),this.visibleOrder.length);1*i!==i&&(i=void 0),at.prototype._addItemInner.call(this,t,i),this.setParent(t,e),t.hasOwnProperty(\"$rendered_parent\")&&this._move_branch(t,t.$rendered_parent),this._add_branch(t,n);},_changeIdInner:function(t,n){var e=this.getChildren(t),i=this._searchVisibleOrder[t];at.prototype._changeIdInner.call(this,t,n);var a=this.getParent(n);this._replace_branch_child(a,t,n),this._branches[t]&&(this._branches[n]=this._branches[t]);for(var s=0;s<e.length;s++){var r=this.getItem(e[s]);r[this.$parentProperty]=n,r.$rendered_parent=n;}this._searchVisibleOrder[n]=i,delete this._branches[t];},_traverseBranches:function(t,n){q(n)||(n=this.$getRootId());var e=this._branches[n];if(e)for(var i=0;i<e.length;i++){var a=e[i];t.call(this,a),this._branches[a]&&this._traverseBranches(t,a);}},_updateOrder:function(t){this.fullOrder=nt.$create(),this._traverseBranches(function(n){this.fullOrder.push(n);}),t&&at.prototype._updateOrder.call(this,t);},_removeItemInner:function(t){var n=[];this.eachItem(function(i){n.push(i);},t),n.push(this.getItem(t));for(var e=0;e<n.length;e++)this._move_branch(n[e],this.getParent(n[e]),null),at.prototype._removeItemInner.call(this,n[e].id),this._move_branch(n[e],this.getParent(n[e]),null);},move:function(t,n,e){var i=arguments[3],a=(this._ganttConfig||{}).root_id||0;if(i=st(i,a)){if(i===t)return;e=this.getParent(i),n=this.getBranchIndex(i);}if(!ct(t,e)){q(e)||(e=this.$getRootId());var s=this.getItem(t),r=this.getParent(s.id),o=this.getChildren(e);if(n==-1&&(n=o.length+1),ct(r,e)&&this.getBranchIndex(t)==n)return;if(this.callEvent(\"onBeforeItemMove\",[t,e,n])===!1)return!1;for(var l=[],d=0;d<o.length;d++)Ot(o[d],null,this,this._ganttConfig)&&(l.push(o[d]),o.splice(d,1),d--);this._replace_branch_child(r,t);var c=(o=this.getChildren(e))[n];(c=st(c,a))?o=o.slice(0,n).concat([t]).concat(o.slice(n)):o.push(t),l.length&&(o=o.concat(l)),ct(s.$rendered_parent,r)||ct(r,e)||(s.$rendered_parent=r),this.setParent(s,e),this._branches[e]=o;var u=this.calculateItemLevel(s)-s.$level;s.$level+=u,this.eachItem(function(h){h.$level+=u;},s.id,this),this._moveInner(this.getIndexById(t),this.getIndexById(e)+n),this.callEvent(\"onAfterItemMove\",[t,e,n]),this.refresh();}},getBranchIndex:function(t){var n=this.getChildren(this.getParent(t));let e=n.indexOf(t+\"\");return e==-1&&(e=n.indexOf(+t)),e;},hasChild:function(t){var n=this._branches[t];return n&&n.length;},getChildren:function(t){var n=this._branches[t];return n||nt.$create();},isChildOf:function(t,n){if(!this.exists(t))return!1;if(n===this.$getRootId())return!0;if(!this.hasChild(n))return!1;var e=this.getItem(t),i=this.getParent(t);if(this.getItem(n).$level>=e.$level)return!1;for(;e&&this.exists(i);){if((e=this.getItem(i))&&ct(e.id,n))return!0;i=this.getParent(e);}return!1;},getSiblings:function(t){if(!this.exists(t))return nt.$create();var n=this.getParent(t);return this.getChildren(n);},getNextSibling:function(t){for(var n=this.getSiblings(t),e=0,i=n.length;e<i;e++)if(ct(n[e],t)){var a=n[e+1];return a===0&&e>0&&(a=\"0\"),a||null;}return null;},getPrevSibling:function(t){for(var n=this.getSiblings(t),e=0,i=n.length;e<i;e++)if(ct(n[e],t)){var a=n[e-1];return a===0&&e>0&&(a=\"0\"),a||null;}return null;},getParent:function(t){var n=null;return(n=t.id!==void 0?t:this.getItem(t))?n[this.$parentProperty]:this.$getRootId();},clearAll:function(){this._branches={},at.prototype.clearAll.call(this);},calculateItemLevel:function(t){var n=0;return this.eachParent(function(){n++;},t),n;},_setParentInner:function(t,n,e){e||(t.hasOwnProperty(\"$rendered_parent\")?this._move_branch(t,t.$rendered_parent,n):this._move_branch(t,t[this.$parentProperty],n));},setParent:function(t,n,e){this._setParentInner(t,n,e),t[this.$parentProperty]=n;},_eachItemCached:function(t,n){for(var e=0,i=n.length;e<i;e++)t.call(this,n[e]);},_eachItemIterate:function(t,n,e){var i=this.getChildren(n);for(i.length&&(i=i.slice().reverse());i.length;){var a=i.pop(),s=this.getItem(a);if(t.call(this,s),e&&e.push(s),this.hasChild(s.id))for(var r=this.getChildren(s.id),o=r.length-1;o>=0;o--)i.push(r[o]);}},eachItem:function(t,n){var e=this.$getRootId();q(n)||(n=e);var i=st(n,e)||e,a=!1,s=!1,r=null;i===e&&(this._eachItemMainRangeCache?(a=!0,r=this._eachItemMainRangeCache):(s=!0,r=this._eachItemMainRangeCache=[])),a?this._eachItemCached(t,r):this._eachItemIterate(t,i,s?r:null);},eachParent:function(t,n){for(var e={},i=n,a=this.getParent(i);this.exists(a);){if(e[a])throw new Error(\"Invalid tasks tree. Cyclic reference has been detected on task \"+a);e[a]=!0,i=this.getItem(a),t.call(this,i),a=this.getParent(i);}},_add_branch:function(t,n,e){var i=e===void 0?this.getParent(t):e;this.hasChild(i)||(this._branches[i]=nt.$create());var a=this.getChildren(i);a.indexOf(t.id+\"\")>-1||a.indexOf(+t.id)>-1||(1*n==n?a.splice(n,0,t.id):a.push(t.id),t.$rendered_parent=i);},_move_branch:function(t,n,e){this._eachItemMainRangeCache=null,this._replace_branch_child(n,t.id),this.exists(e)||ct(e,this.$getRootId())?this._add_branch(t,void 0,e):delete this._branches[t.id],t.$level=this.calculateItemLevel(t),this.eachItem(function(i){i.$level=this.calculateItemLevel(i);},t.id);},_replace_branch_child:function(t,n,e){var i=this.getChildren(t);if(i&&t!==void 0){var a=nt.$create();let s=i.indexOf(n+\"\");s!=-1||isNaN(+n)||(s=i.indexOf(+n)),s>-1&&(e?i.splice(s,1,e):i.splice(s,1)),a=i,this._branches[t]=a;}},sort:function(t,n,e){this.exists(e)||(e=this.$getRootId()),t||(t=\"order\");var i=typeof t==\"string\"?function(l,d){return l[t]==d[t]||et(l[t])&&et(d[t])&&l[t].valueOf()==d[t].valueOf()?0:l[t]>d[t]?1:-1;}:t;if(n){var a=i;i=function(l,d){return a(d,l);};}var s=this.getChildren(e);if(s){for(var r=[],o=s.length-1;o>=0;o--)r[o]=this.getItem(s[o]);for(r.sort(i),o=0;o<r.length;o++)s[o]=r[o].id,this.sort(t,n,s[o]);}},filter:function(t){for(let n in this.pull){const e=this.pull[n].$rendered_parent,i=this.getParent(this.pull[n]);ct(e,i)||this._move_branch(this.pull[n],e,i);}return at.prototype.filter.apply(this,arguments);},open:function(t){this.exists(t)&&(this.getItem(t).$open=!0,this._skipTaskRecalculation=!0,this.callEvent(\"onItemOpen\",[t]));},close:function(t){this.exists(t)&&(this.getItem(t).$open=!1,this._skipTaskRecalculation=!0,this.callEvent(\"onItemClose\",[t]));},destructor:function(){at.prototype.destructor.call(this),this._branches=null,this._indexRangeCache={},this._eachItemMainRangeCache=null;}},at.prototype);const ni=function(t,n){const e=n.getDatastore(t),i=function(o,l){const d=l.getLayers(),c=e.getItem(o);if(c&&e.isVisible(o))for(let u=0;u<d.length;u++)d[u].render_item(c);},a=function(o){const l=o.getLayers();for(let _=0;_<l.length;_++)l[_].clear();let d=null;const c={};for(let _=0;_<l.length;_++){const f=l[_];let y;if(f.get_visible_range){var u=f.get_visible_range(e);if(u.start!==void 0&&u.end!==void 0){var h=u.start+\" - \"+u.end;c[h]?y=c[h]:(y=e.getIndexRange(u.start,u.end),c[h]=y);}else{if(u.ids===void 0)throw new Error(\"Invalid range returned from 'getVisibleRange' of the layer\");y=u.ids.map(function(v){return e.getItem(v);});}}else d||(d=e.getVisibleItems()),y=d;f.prepare_data&&f.prepare_data(y),l[_].render_items(y);}},s=function(o){if(o.update_items){let d=[];if(o.get_visible_range){var l=o.get_visible_range(e);if(l.start!==void 0&&l.end!==void 0&&(d=e.getIndexRange(l.start,l.end)),l.ids!==void 0){let c=l.ids.map(function(u){return e.getItem(u);});c.length>0&&(c=c.filter(u=>u!==void 0),d=d.concat(c));}if((l.start==null||l.end==null)&&l.ids==null)throw new Error(\"Invalid range returned from 'getVisibleRange' of the layer\");}else d=e.getVisibleItems();o.prepare_data&&o.prepare_data(d,o),o.update_items(d);}};function r(o){return!!o.$services.getService(\"state\").getState(\"batchUpdate\").batch_update;}e.attachEvent(\"onStoreUpdated\",function(o,l,d){if(G(n))return!0;const c=n.$services.getService(\"layers\").getDataRender(t);c&&(c.onUpdateRequest=function(u){s(u);});}),e.attachEvent(\"onStoreUpdated\",function(o,l,d){r(n)||(o&&d!=\"move\"&&d!=\"delete\"?(e.callEvent(\"onBeforeRefreshItem\",[l.id]),e.callEvent(\"onAfterRefreshItem\",[l.id])):(e.callEvent(\"onBeforeRefreshAll\",[]),e.callEvent(\"onAfterRefreshAll\",[])));}),e.attachEvent(\"onAfterRefreshAll\",function(){if(G(n))return!0;const o=n.$services.getService(\"layers\").getDataRender(t);o&&!r(n)&&a(o);}),e.attachEvent(\"onAfterRefreshItem\",function(o){if(G(n))return!0;const l=n.$services.getService(\"layers\").getDataRender(t);l&&i(o,l);}),e.attachEvent(\"onItemOpen\",function(){if(G(n)||e.isSilent())return!0;n.render();}),e.attachEvent(\"onItemClose\",function(){if(G(n)||e.isSilent())return!0;n.render();}),e.attachEvent(\"onIdChange\",function(o,l){if(G(n))return!0;if(e.callEvent(\"onBeforeIdChange\",[o,l]),!r(n)&&!e.isSilent()){const d=n.$services.getService(\"layers\").getDataRender(t);d?(function(c,u,h){for(let _=0;_<c.length;_++)c[_].change_id(u,h);}(d.getLayers(),o,l,e.getItem(l)),i(l,d)):n.render();}});};function oe(){for(var t=this.$services.getService(\"datastores\"),n=[],e=0;e<t.length;e++){var i=this.getDatastore(t[e]);i.$destroyed||n.push(i);}return n;}const ii={create:function(){var t=R({},{createDatastore:function(n){var e=(n.type||\"\").toLowerCase()==\"treedatastore\"?gn:at;if(n){var i=this;n.openInitially=function(){return i.config.open_tree_initially;},n.copyOnParse=function(){return i.config.deepcopy_on_parse;};}var a=new e(n);if(this.mixin(a,function(o){var l=null,d=o._removeItemInner;function c(u){l=null,this.callEvent(\"onAfterUnselect\",[u]);}return o._removeItemInner=function(u){return l==u&&c.call(this,u),l&&this.eachItem&&this.eachItem(function(h){h.id==l&&c.call(this,h.id);},u),d.apply(this,arguments);},o.attachEvent(\"onIdChange\",function(u,h){o.getSelectedId()==u&&o.silent(function(){o.unselect(u),o.select(h);});}),{select:function(u){if(u){if(l==u)return l;if(!this._skip_refresh&&!this.callEvent(\"onBeforeSelect\",[u]))return!1;this.unselect(),l=u,this._skip_refresh||(this.refresh(u),this.callEvent(\"onAfterSelect\",[u]));}return l;},getSelectedId:function(){return l;},isSelected:function(u){return u==l;},unselect:function(u){(u=u||l)&&(l=null,this._skip_refresh||(this.refresh(u),c.call(this,u)));}};}(a)),n.name){var s=\"datastore:\"+n.name;a.attachEvent(\"onDestroy\",function(){this.$services.dropService(s);for(var o=this.$services.getService(\"datastores\"),l=0;l<o.length;l++)if(o[l]===n.name){o.splice(l,1);break;}}.bind(this)),this.$services.dropService(s),this.$services.setService(s,function(){return a;});var r=this.$services.getService(\"datastores\");r?r.indexOf(n.name)<0&&r.push(n.name):(r=[],this.$services.setService(\"datastores\",function(){return r;}),r.push(n.name)),ni(n.name,this);}return a;},getDatastore:function(n){return this.$services.getService(\"datastore:\"+n);},_getDatastores:oe,refreshData:function(){var n;G(this)||(n=this.getScrollState()),this.callEvent(\"onBeforeDataRender\",[]);for(var e=oe.call(this),i=0;i<e.length;i++)e[i].refresh();this.config.preserve_scroll&&!G(this)&&((n.x||n.y)&&this.scrollTo(n.x,n.y),this.$layout.getScrollbarsInfo().forEach(a=>{const s=this.$ui.getView(a.id);if(!s)return;const r=this.utils.dom.isChildOf(s.$view,this.$container);a.boundViews.forEach(o=>{const l=this.$ui.getView(o);a.y&&l&&!r&&l.scrollTo(void 0,0);});})),this.callEvent(\"onDataRender\",[]);},isChildOf:function(n,e){return this.$data.tasksStore.isChildOf(n,e);},refreshTask:function(n,e){var i=this.getTask(n),a=this;function s(){if(e===void 0||e){for(var o=0;o<i.$source.length;o++)a.refreshLink(i.$source[o]);for(o=0;o<i.$target.length;o++)a.refreshLink(i.$target[o]);}}if(i&&this.isTaskVisible(n))this.$data.tasksStore.refresh(n,!!this.getState(\"tasksDnd\").drag_id||e===!1),s();else if(this.isTaskExists(n)&&this.isTaskExists(this.getParent(n))&&!this._bulk_dnd){this.refreshTask(this.getParent(n));var r=!1;this.eachParent(function(o){(r||this.isSplitTask(o))&&(r=!0);},n),r&&s();}},refreshLink:function(n){this.$data.linksStore.refresh(n,!!this.getState(\"tasksDnd\").drag_id);},silent:function(n){var e=this;e.$data.tasksStore.silent(function(){e.$data.linksStore.silent(function(){n();});});},clearAll:function(){for(var n=oe.call(this),e=0;e<n.length;e++)n[e].silent(function(){n[e].clearAll();});for(e=0;e<n.length;e++)n[e].clearAll();this._update_flags(),this.userdata={},this.callEvent(\"onClear\",[]),this.render();},_clear_data:function(){this.$data.tasksStore.clearAll(),this.$data.linksStore.clearAll(),this._update_flags(),this.userdata={};},selectTask:function(n){var e=this.$data.tasksStore;if(!this.config.select_task)return!1;if(n=st(n,this.config.root_id)){let i=this.getSelectedId();e._skipResourceRepaint=!0,e.select(n),e._skipResourceRepaint=!1,i&&e.pull[i].$split_subtask&&i!=n&&this.refreshTask(i),e.pull[n].$split_subtask&&i!=n&&this.refreshTask(n);}return e.getSelectedId();},unselectTask:function(n){var e=this.$data.tasksStore;e.unselect(n),n&&e.pull[n].$split_subtask&&this.refreshTask(n);},isSelectedTask:function(n){return this.$data.tasksStore.isSelected(n);},getSelectedId:function(){return this.$data.tasksStore.getSelectedId();}});return R(t,{getTask:function(n){n=st(n,this.config.root_id),this.assert(n,\"Invalid argument for gantt.getTask\");var e=this.$data.tasksStore.getItem(n);return this.assert(e,\"Task not found id=\"+n),e;},getTaskByTime:function(n,e){var i=this.$data.tasksStore.getItems(),a=[];if(n||e){n=+n||-1/0,e=+e||1/0;for(var s=0;s<i.length;s++){var r=i[s];+r.start_date<e&&+r.end_date>n&&a.push(r);}}else a=i;return a;},isTaskExists:function(n){return!(!this.$data||!this.$data.tasksStore)&&this.$data.tasksStore.exists(n);},updateTask:function(n,e){q(e)||(e=this.getTask(n)),this.$data.tasksStore.updateItem(n,e),this.isTaskExists(n)&&this.refreshTask(n);},addTask:function(n,e,i){if(q(n.id)||(n.id=ot()),this.isTaskExists(n.id)&&this.getTask(n.id).$index!=n.$index)return n.start_date&&typeof n.start_date==\"string\"&&(n.start_date=this.date.parseDate(n.start_date,\"parse_date\")),n.end_date&&typeof n.end_date==\"string\"&&(n.end_date=this.date.parseDate(n.end_date,\"parse_date\")),this.$data.tasksStore.updateItem(n.id,n);if(q(e)||(e=this.getParent(n)||0),this.isTaskExists(e)||(e=this.config.root_id),this.setParent(n,e),this.getState().lightbox&&this.isTaskExists(e)){var a=this.getTask(e);this.callEvent(\"onAfterParentExpand\",[e,a]);}return this.$data.tasksStore.addItem(n,i,e);},deleteTask:function(n){return n=st(n,this.config.root_id),this.$data.tasksStore.removeItem(n);},getTaskCount:function(){return this.$data.tasksStore.count();},getVisibleTaskCount:function(){return this.$data.tasksStore.countVisible();},getTaskIndex:function(n){return this.$data.tasksStore.getBranchIndex(n);},getGlobalTaskIndex:function(n){return n=st(n,this.config.root_id),this.assert(n,\"Invalid argument\"),this.$data.tasksStore.getIndexById(n);},eachTask:function(n,e,i){return this.$data.tasksStore.eachItem(B(n,i||this),e);},eachParent:function(n,e,i){return this.$data.tasksStore.eachParent(B(n,i||this),e);},changeTaskId:function(n,e){this.$data.tasksStore.changeId(n,e);var i=this.$data.tasksStore.getItem(e),a=[];i.$source&&(a=a.concat(i.$source)),i.$target&&(a=a.concat(i.$target));for(var s=0;s<a.length;s++){var r=this.getLink(a[s]);r.source==n&&(r.source=e),r.target==n&&(r.target=e);}},calculateTaskLevel:function(n){return this.$data.tasksStore.calculateItemLevel(n);},getNext:function(n){return this.$data.tasksStore.getNext(n);},getPrev:function(n){return this.$data.tasksStore.getPrev(n);},getParent:function(n){return this.$data.tasksStore.getParent(n);},setParent:function(n,e,i){return this.$data.tasksStore.setParent(n,e,i);},getSiblings:function(n){return this.$data.tasksStore.getSiblings(n).slice();},getNextSibling:function(n){return this.$data.tasksStore.getNextSibling(n);},getPrevSibling:function(n){return this.$data.tasksStore.getPrevSibling(n);},getTaskByIndex:function(n){var e=this.$data.tasksStore.getIdByIndex(n);return this.isTaskExists(e)?this.getTask(e):null;},getChildren:function(n){return this.hasChild(n)?this.$data.tasksStore.getChildren(n).slice():[];},hasChild:function(n){return this.$data.tasksStore.hasChild(n);},open:function(n){this.$data.tasksStore.open(n);},close:function(n){this.$data.tasksStore.close(n);},moveTask:function(n,e,i){return i=st(i,this.config.root_id),this.$data.tasksStore.move.apply(this.$data.tasksStore,arguments);},sort:function(n,e,i,a){var s=!a;this.$data.tasksStore.sort(n,e,i),this.callEvent(\"onAfterSort\",[n,e,i]),s&&this.render();}}),R(t,{getLinkCount:function(){return this.$data.linksStore.count();},getLink:function(n){return this.$data.linksStore.getItem(n);},getLinks:function(){return this.$data.linksStore.getItems();},isLinkExists:function(n){return this.$data.linksStore.exists(n);},addLink:function(n){return this.$data.linksStore.addItem(n);},updateLink:function(n,e){q(e)||(e=this.getLink(n)),this.$data.linksStore.updateItem(n,e);},deleteLink:function(n){return this.$data.linksStore.removeItem(n);},changeLinkId:function(n,e){return this.$data.linksStore.changeId(n,e);}}),t;}};function ai(t){var n=function(c){const u=new Xt(c).primaryScale();let h=u.unit,_=u.step;if(c.config.scale_offset_minimal){const f=new Xt(c),y=[f.primaryScale()].concat(f.getAdditionalScales());f.sortScales(y),h=y[y.length-1].unit,_=y[y.length-1].step||1;}return{unit:h,step:_};}(t),e=n.unit,i=n.step,a=function(c,u){var h={start_date:null,end_date:null};if(u.config.start_date&&u.config.end_date){h.start_date=u.date[c+\"_start\"](new Date(u.config.start_date));var _=new Date(u.config.end_date),f=u.date[c+\"_start\"](new Date(_));_=+_!=+f?u.date.add(f,1,c):f,h.end_date=_;}return h;}(e,t);if(!a.start_date||!a.end_date){for(var s=!0,r=t.getTaskByTime(),o=0;o<r.length;o++)if(r[o].type!==t.config.types.project){s=!1;break;}if(r.length&&s){var l=r[0].start_date,d=t.date.add(l,1,t.config.duration_unit);a={start_date:new Date(l),end_date:new Date(d)};}else a=t.getSubtaskDates();a.start_date&&a.end_date||(a={start_date:/* @__PURE__ */new Date(),end_date:/* @__PURE__ */new Date()}),t.eachTask(function(c){t.config.deadlines&&c.deadline&&le(a,c.deadline,c.deadline),c.constraint_date&&c.constraint_type&&t._getAutoSchedulingConfig().apply_constraints&&t.config.constraint_types&&c.constraint_type!==t.config.constraint_types.ASAP&&c.constraint_type!==t.config.constraint_types.ALAP&&le(a,c.constraint_date,c.constraint_date),t.config.baselines&&c.baselines&&c.baselines.forEach(function(u){le(a,u.start_date,u.end_date);});}),a.start_date=t.date[e+\"_start\"](a.start_date),a.start_date=t.calculateEndDate({start_date:t.date[e+\"_start\"](a.start_date),duration:-1,unit:e,step:i}),a.end_date=t.date[e+\"_start\"](a.end_date),a.end_date=t.calculateEndDate({start_date:a.end_date,duration:2,unit:e,step:i});}t._min_date=a.start_date,t._max_date=a.end_date;}function le(t,n,e){n<t.start_date&&(t.start_date=new Date(n)),e>t.end_date&&(t.end_date=new Date(e));}function $e(t){ai(t),function(n){if(n.config.fit_tasks){var e=+n._min_date,i=+n._max_date;if(+n._min_date!=e||+n._max_date!=i)return n.render(),n.callEvent(\"onScaleAdjusted\",[]),!0;}}(t);}function Be(t,n,e){for(var i=0;i<n.length;i++)t.isLinkExists(n[i])&&(e[n[i]]=t.getLink(n[i]));}function ze(t,n,e){Be(t,n.$source,e),Be(t,n.$target,e);}const we={getSubtreeLinks:function(t,n){var e={};return t.isTaskExists(n)&&ze(t,t.getTask(n),e),t.eachTask(function(i){ze(t,i,e);},n),e;},getSubtreeTasks:function(t,n){var e={};return t.eachTask(function(i){e[i.id]=i;},n),e;}};class si{constructor(n,e){this.$gantt=n,this.$dp=e,this._dataProcessorHandlers=[];}attach(){const n=this.$dp,e=this.$gantt,i={},a=o=>this.clientSideDelete(o,n,e);this._dataProcessorHandlers.push(e.attachEvent(\"onAfterTaskAdd\",function(o,l){e.isTaskExists(o)&&(n.setGanttMode(\"tasks\"),n.setUpdated(o,!0,\"inserted\"));})),this._dataProcessorHandlers.push(e.attachEvent(\"onAfterTaskUpdate\",function(o,l){e.isTaskExists(o)&&(n.setGanttMode(\"tasks\"),n.setUpdated(o,!0),e._sendTaskOrder&&e._sendTaskOrder(o,l));})),this._dataProcessorHandlers.push(e.attachEvent(\"onBeforeTaskDelete\",function(o,l){return e.config.cascade_delete&&(i[o]={tasks:we.getSubtreeTasks(e,o),links:we.getSubtreeLinks(e,o)}),!n.deleteAfterConfirmation||(n.setGanttMode(\"tasks\"),n.setUpdated(o,!0,\"deleted\"),!1);})),this._dataProcessorHandlers.push(e.attachEvent(\"onAfterTaskDelete\",function(o,l){n.setGanttMode(\"tasks\");const d=!a(o),c=e.config.cascade_delete&&i[o];if(d||c){if(c){const u=n.updateMode;n.setUpdateMode(\"off\");const h=i[o];for(const _ in h.tasks)a(_)||(n.storeItem(h.tasks[_]),n.setUpdated(_,!0,\"deleted\"));n.setGanttMode(\"links\");for(const _ in h.links)a(_)||(n.storeItem(h.links[_]),n.setUpdated(_,!0,\"deleted\"));i[o]=null,u!==\"off\"&&n.sendAllData(),n.setGanttMode(\"tasks\"),n.setUpdateMode(u);}d&&(n.storeItem(l),n.deleteAfterConfirmation||n.setUpdated(o,!0,\"deleted\")),n.updateMode===\"off\"||n._tSend||n.sendAllData();}})),this._dataProcessorHandlers.push(e.attachEvent(\"onAfterLinkUpdate\",function(o,l){e.isLinkExists(o)&&(n.setGanttMode(\"links\"),n.setUpdated(o,!0));})),this._dataProcessorHandlers.push(e.attachEvent(\"onAfterLinkAdd\",function(o,l){e.isLinkExists(o)&&(n.setGanttMode(\"links\"),n.setUpdated(o,!0,\"inserted\"));})),this._dataProcessorHandlers.push(e.attachEvent(\"onAfterLinkDelete\",function(o,l){n.setGanttMode(\"links\"),!a(o)&&(n.storeItem(l),n.setUpdated(o,!0,\"deleted\"));})),this._dataProcessorHandlers.push(e.attachEvent(\"onRowDragEnd\",function(o,l){e._sendTaskOrder(o,e.getTask(o));}));let s=null,r=null;this._dataProcessorHandlers.push(e.attachEvent(\"onTaskIdChange\",function(o,l){if(!n._waitMode)return;const d=e.getChildren(l);if(d.length){s=s||{};for(let u=0;u<d.length;u++){const h=this.getTask(d[u]);s[h.id]=h;}}const c=function(u){let h=[];return u.$source&&(h=h.concat(u.$source)),u.$target&&(h=h.concat(u.$target)),h;}(this.getTask(l));if(c.length){r=r||{};for(let u=0;u<c.length;u++){const h=this.getLink(c[u]);r[h.id]=h;}}})),n.attachEvent(\"onAfterUpdateFinish\",function(){(s||r)&&(e.batchUpdate(function(){for(const o in s)e.updateTask(s[o].id);for(const o in r)e.updateLink(r[o].id);s=null,r=null;}),s?e._dp.setGanttMode(\"tasks\"):e._dp.setGanttMode(\"links\"));}),n.attachEvent(\"onBeforeDataSending\",function(){if(this._tMode===\"CUSTOM\")return!0;let o=this._serverProcessor;if(this._tMode===\"REST-JSON\"||this._tMode===\"REST\"){const l=this._ganttMode;o=o.substring(0,o.indexOf(\"?\")>-1?o.indexOf(\"?\"):o.length),this.serverProcessor=o+(o.slice(-1)===\"/\"?\"\":\"/\")+l;}else{const l=this._ganttMode+\"s\";this.serverProcessor=o+e.ajax.urlSeparator(o)+\"gantt_mode=\"+l;}return!0;}),n.attachEvent(\"insertCallback\",function(o,l,d,c){const u=o.data||e.xml._xmlNodeToJSON(o.firstChild),h={add:e.addTask,isExist:e.isTaskExists};c===\"links\"&&(h.add=e.addLink,h.isExist=e.isLinkExists),h.isExist.call(e,l)||(u.id=l,h.add.call(e,u));}),n.attachEvent(\"updateCallback\",function(o,l){const d=o.data||e.xml._xmlNodeToJSON(o.firstChild);if(!e.isTaskExists(l))return;const c=e.getTask(l);for(const u in d){let h=d[u];switch(u){case\"id\":continue;case\"start_date\":case\"end_date\":h=e.defined(e.templates.xml_date)?e.templates.xml_date(h):e.templates.parse_date(h);break;case\"duration\":c.end_date=e.calculateEndDate({start_date:c.start_date,duration:h,task:c});}c[u]=h;}e.updateTask(l),e.refreshData();}),n.attachEvent(\"deleteCallback\",function(o,l,d,c){const u={delete:e.deleteTask,isExist:e.isTaskExists};c===\"links\"?(u.delete=e.deleteLink,u.isExist=e.isLinkExists):c===\"assignment\"&&(u.delete=function(h){e.$data.assignmentsStore.remove(h);},u.isExist=function(h){return e.$data.assignmentsStore.exists(h);}),u.isExist.call(e,l)&&u.delete.call(e,l);}),this.handleResourceCRUD(n,e),this.handleResourceAssignmentCRUD(n,e),this.handleBaselineCRUD(n,e);}clientSideDelete(n,e,i){const a=e.updatedRows.slice();let s=!1;i.getUserData(n,\"!nativeeditor_status\",e._ganttMode)===\"true_deleted\"&&(s=!0,e.setUpdated(n,!1));for(let r=0;r<a.length&&!e._in_progress[n];r++)a[r]===n&&(i.getUserData(n,\"!nativeeditor_status\",e._ganttMode)===\"inserted\"&&(s=!0),e.setUpdated(n,!1));return s;}handleResourceAssignmentCRUD(n,e){if(!e.config.resources||e.config.resources.dataprocessor_assignments!==!0)return;const i=e.getDatastore(e.config.resource_assignment_store),a={},s={};function r(o){const l=o.id;i.exists(l)&&(n.setGanttMode(\"assignment\"),n.setUpdated(l,!0,\"inserted\")),delete s[l];}e.attachEvent(\"onBeforeTaskAdd\",function(o,l){return a[o]=!0,!0;}),e.attachEvent(\"onTaskIdChange\",function(o,l){delete a[o];}),i.attachEvent(\"onAfterAdd\",(o,l)=>{a[l.task_id]?function(d){s[d.id]=d,a[d.task_id]=!0;}(l):r(l);}),i.attachEvent(\"onAfterUpdate\",(o,l)=>{i.exists(o)&&(s[o]?r(l):(n.setGanttMode(\"assignment\"),n.setUpdated(o,!0)));}),i.attachEvent(\"onAfterDelete\",(o,l)=>{n.setGanttMode(\"assignment\"),!this.clientSideDelete(o,n,e)&&(n.storeItem(l),n.setUpdated(o,!0,\"deleted\"));});}handleResourceCRUD(n,e){if(!e.config.resources||e.config.resources.dataprocessor_resources!==!0)return;const i=e.getDatastore(e.config.resource_store);i.attachEvent(\"onAfterAdd\",(a,s)=>{(function(r){const o=r.id;i.exists(o)&&(n.setGanttMode(\"resource\"),n.setUpdated(o,!0,\"inserted\"));})(s);}),i.attachEvent(\"onAfterUpdate\",(a,s)=>{i.exists(a)&&(n.setGanttMode(\"resource\"),n.setUpdated(a,!0));}),i.attachEvent(\"onAfterDelete\",(a,s)=>{n.setGanttMode(\"resource\"),!this.clientSideDelete(a,n,e)&&(n.storeItem(s),n.setUpdated(a,!0,\"deleted\"));});}handleBaselineCRUD(n,e){if(!e.config.baselines||e.config.baselines.dataprocessor_baselines!==!0)return;const i=e.getDatastore(e.config.baselines.datastore);i.attachEvent(\"onAfterAdd\",(a,s)=>{(function(r){const o=r.id;i.exists(o)&&(n.setGanttMode(\"baseline\"),n.setUpdated(o,!0,\"inserted\"));})(s);}),i.attachEvent(\"onAfterUpdate\",(a,s)=>{i.exists(a)&&(n.setGanttMode(\"baseline\"),n.setUpdated(a,!0));}),i.attachEvent(\"onAfterDelete\",(a,s)=>{n.setGanttMode(\"baseline\"),!this.clientSideDelete(a,n,e)&&(n.storeItem(s),n.setUpdated(a,!0,\"deleted\"));});}detach(){bt(this._dataProcessorHandlers,n=>{this.$gantt.detachEvent(n);}),this._dataProcessorHandlers=[];}}const ee=class ee{constructor(){this.clear=()=>{this._storage={};},this.storeItem=n=>{this._storage[n.id]=X(n);},this.getStoredItem=n=>this._storage[n]||null,this._storage={};}};ee.create=()=>new ee();let Zt=ee,fn=class{constructor(t){this.serverProcessor=t,this.action_param=\"!nativeeditor_status\",this.updatedRows=[],this.autoUpdate=!0,this.updateMode=\"cell\",this._headers=null,this._payload=null,this._postDelim=\"_\",this._routerParametersFormat=\"parameters\",this._waitMode=0,this._in_progress={},this._storage=Zt.create(),this._invalid={},this.messages=[],this.styles={updated:\"font-weight:bold;\",inserted:\"font-weight:bold;\",deleted:\"text-decoration : line-through;\",invalid:\"background-color:FFE0E0;\",invalid_cell:\"border-bottom:2px solid red;\",error:\"color:red;\",clear:\"font-weight:normal;text-decoration:none;\"},this.enableUTFencoding(!0),lt(this);}setTransactionMode(t,n){typeof t==\"object\"?(this._tMode=t.mode||this._tMode,q(t.headers)&&(this._headers=t.headers),q(t.payload)&&(this._payload=t.payload),this._tSend=!!n):(this._tMode=t,this._tSend=n),this._tMode===\"REST\"&&(this._tSend=!1),this._tMode===\"JSON\"||this._tMode===\"REST-JSON\"?(this._tSend=!1,this._serializeAsJson=!0,this._headers=this._headers||{},this._headers[\"Content-Type\"]=\"application/json\"):this._headers&&!this._headers[\"Content-Type\"]&&(this._headers[\"Content-Type\"]=\"application/x-www-form-urlencoded\"),this._tMode===\"CUSTOM\"&&(this._tSend=!1,this._router=t.router);}escape(t){return this._utf?encodeURIComponent(t):escape(t);}enableUTFencoding(t){this._utf=!!t;}getSyncState(){return!this.updatedRows.length;}setUpdateMode(t,n){this.autoUpdate=t===\"cell\",this.updateMode=t,this.dnd=n;}ignore(t,n){this._silent_mode=!0,t.call(n||tt),this._silent_mode=!1;}setUpdated(t,n,e){if(this._silent_mode)return;const i=this.findRow(t);e=e||\"updated\";const a=this.$gantt.getUserData(t,this.action_param,this._ganttMode);a&&e===\"updated\"&&(e=a),n?(this.set_invalid(t,!1),this.updatedRows[i]=t,this.$gantt.setUserData(t,this.action_param,e,this._ganttMode),this._in_progress[t]&&(this._in_progress[t]=\"wait\")):this.is_invalid(t)||(this.updatedRows.splice(i,1),this.$gantt.setUserData(t,this.action_param,\"\",this._ganttMode)),this.markRow(t,n,e),n&&this.autoUpdate&&this.sendData(t);}markRow(t,n,e){let i=\"\";const a=this.is_invalid(t);if(a&&(i=this.styles[a],n=!0),this.callEvent(\"onRowMark\",[t,n,e,a])&&(i=this.styles[n?e:\"clear\"]+\" \"+i,this.$gantt[this._methods[0]](t,i),a&&a.details)){i+=this.styles[a+\"_cell\"];for(let s=0;s<a.details.length;s++)a.details[s]&&this.$gantt[this._methods[1]](t,s,i);}}getActionByState(t){return t===\"inserted\"?\"create\":t===\"updated\"?\"update\":t===\"deleted\"?\"delete\":\"update\";}getState(t){return this.$gantt.getUserData(t,this.action_param,this._ganttMode);}is_invalid(t){return this._invalid[t];}set_invalid(t,n,e){e&&(n={value:n,details:e,toString:function(){return this.value.toString();}}),this._invalid[t]=n;}checkBeforeUpdate(t){return!0;}sendData(t){if(this.$gantt.editStop&&this.$gantt.editStop(),t===void 0||this._tSend){const n=[];if(this.modes&&[\"task\",\"link\",\"assignment\",\"baseline\"].forEach(e=>{this.modes[e]&&this.modes[e].updatedRows.length&&n.push(e);}),n.length){for(let e=0;e<n.length;e++)this.setGanttMode(n[e]),this.sendAllData();return;}return this.sendAllData();}return!this._in_progress[t]&&(this.messages=[],!(!this.checkBeforeUpdate(t)&&this.callEvent(\"onValidationError\",[t,this.messages]))&&void this._beforeSendData(this._getRowData(t),t));}serialize(t,n){if(this._serializeAsJson)return this._serializeAsJSON(t);if(typeof t==\"string\")return t;if(n!==void 0)return this.serialize_one(t,\"\");{const e=[],i=[];for(const a in t)t.hasOwnProperty(a)&&(e.push(this.serialize_one(t[a],a+this._postDelim)),i.push(a));return e.push(\"ids=\"+this.escape(i.join(\",\"))),this.$gantt.security_key&&e.push(\"dhx_security=\"+this.$gantt.security_key),e.join(\"&\");}}serialize_one(t,n){if(typeof t==\"string\")return t;const e=[];let i=\"\";for(const a in t)if(t.hasOwnProperty(a)){if((a===\"id\"||a==this.action_param)&&this._tMode===\"REST\")continue;i=typeof t[a]==\"string\"||typeof t[a]==\"number\"?String(t[a]):JSON.stringify(t[a]),e.push(this.escape((n||\"\")+a)+\"=\"+this.escape(i));}return e.join(\"&\");}sendAllData(){if(!this.updatedRows.length)return;this.messages=[];let t=!0;if(this._forEachUpdatedRow(function(n){t=t&&this.checkBeforeUpdate(n);}),!t&&!this.callEvent(\"onValidationError\",[\"\",this.messages]))return!1;this._tSend?this._sendData(this._getAllData()):this._forEachUpdatedRow(function(n){if(!this._in_progress[n]){if(this.is_invalid(n))return;this._beforeSendData(this._getRowData(n),n);}});}findRow(t){let n=0;for(n=0;n<this.updatedRows.length&&t!=this.updatedRows[n];n++);return n;}defineAction(t,n){this._uActions||(this._uActions={}),this._uActions[t]=n;}afterUpdateCallback(t,n,e,i,a){if(!this.$gantt)return;this.setGanttMode(a);const s=t,r=e!==\"error\"&&e!==\"invalid\";if(r||this.set_invalid(t,e),this._uActions&&this._uActions[e]&&!this._uActions[e](i))return delete this._in_progress[s];this._in_progress[s]!==\"wait\"&&this.setUpdated(t,!1);const o=t;switch(e){case\"inserted\":case\"insert\":n!=t&&(this.setUpdated(t,!1),this.$gantt[this._methods[2]](t,n),t=n);break;case\"delete\":case\"deleted\":if(this.deleteAfterConfirmation&&this._ganttMode===\"task\"){if(this._ganttMode===\"task\"&&this.$gantt.isTaskExists(t)){this.$gantt.setUserData(t,this.action_param,\"true_deleted\",this._ganttMode);const l=this.$gantt.getTask(t);this.$gantt.silent(()=>{this.$gantt.deleteTask(t);}),this.$gantt.callEvent(\"onAfterTaskDelete\",[t,l]),this.$gantt.render(),delete this._in_progress[s];}return this.callEvent(\"onAfterUpdate\",[t,e,n,i]);}return this.$gantt.setUserData(t,this.action_param,\"true_deleted\",this._ganttMode),this.$gantt[this._methods[3]](t),delete this._in_progress[s],this.callEvent(\"onAfterUpdate\",[t,e,n,i]);}this._in_progress[s]!==\"wait\"?(r&&this.$gantt.setUserData(t,this.action_param,\"\",this._ganttMode),delete this._in_progress[s]):(delete this._in_progress[s],this.setUpdated(n,!0,this.$gantt.getUserData(t,this.action_param,this._ganttMode))),this.callEvent(\"onAfterUpdate\",[o,e,n,i]);}afterUpdate(t,n,e){let i;i=arguments.length===3?arguments[1]:arguments[4];let a=this.getGanttMode();const s=i.filePath||i.url;a=this._tMode!==\"REST\"&&this._tMode!==\"REST-JSON\"?s.indexOf(\"gantt_mode=links\")!==-1?\"link\":s.indexOf(\"gantt_mode=assignments\")!==-1?\"assignment\":s.indexOf(\"gantt_mode=baselines\")!==-1?\"baseline\":\"task\":s.indexOf(\"/link\")>=0?\"link\":s.indexOf(\"/assignment\")>=0?\"assignment\":s.indexOf(\"/baseline\")>=0?\"baseline\":\"task\",this.setGanttMode(a);const r=this.$gantt.ajax;let o;try{o=JSON.parse(n.xmlDoc.responseText);}catch{n.xmlDoc.responseText.length||(o={});}const l=u=>{const h=o.action||this.getState(u)||\"updated\",_=o.sid||u[0],f=o.tid||u[0];t.afterUpdateCallback(_,f,h,o,a);};if(o)return Array.isArray(e)&&e.length>1?e.forEach(u=>l(u)):l(e),t.finalizeUpdate(),void this.setGanttMode(a);const d=r.xmltop(\"data\",n.xmlDoc);if(!d)return this.cleanUpdate(e);const c=r.xpath(\"//data/action\",d);if(!c.length)return this.cleanUpdate(e);for(let u=0;u<c.length;u++){const h=c[u],_=h.getAttribute(\"type\"),f=h.getAttribute(\"sid\"),y=h.getAttribute(\"tid\");t.afterUpdateCallback(f,y,_,h,a);}t.finalizeUpdate();}cleanUpdate(t){if(t)for(let n=0;n<t.length;n++)delete this._in_progress[t[n]];}finalizeUpdate(){this._waitMode&&this._waitMode--,this.callEvent(\"onAfterUpdateFinish\",[]),this.updatedRows.length||this.callEvent(\"onFullSync\",[]);}init(t){if(this._initialized)return;this.$gantt=t,this.$gantt._dp_init&&this.$gantt._dp_init(this),this._setDefaultTransactionMode(),this.styles={updated:\"gantt_updated\",order:\"gantt_updated\",inserted:\"gantt_inserted\",deleted:\"gantt_deleted\",delete_confirmation:\"gantt_deleted\",invalid:\"gantt_invalid\",error:\"gantt_error\",clear:\"\"},this._methods=[\"_row_style\",\"setCellTextStyle\",\"_change_id\",\"_delete_task\"],function(e,i){e.getUserData=function(a,s,r){return this.userdata||(this.userdata={}),this.userdata[r]=this.userdata[r]||{},this.userdata[r][a]&&this.userdata[r][a][s]?this.userdata[r][a][s]:\"\";},e.setUserData=function(a,s,r,o){this.userdata||(this.userdata={}),this.userdata[o]=this.userdata[o]||{},this.userdata[o][a]=this.userdata[o][a]||{},this.userdata[o][a][s]=r;},e._change_id=function(a,s){switch(this._dp._ganttMode){case\"task\":this.changeTaskId(a,s);break;case\"link\":this.changeLinkId(a,s);break;case\"assignment\":this.$data.assignmentsStore.changeId(a,s);break;case\"resource\":this.$data.resourcesStore.changeId(a,s);break;case\"baseline\":this.$data.baselineStore.changeId(a,s);break;default:throw new Error(`Invalid mode of the dataProcessor after database id is received: ${this._dp._ganttMode}, new id: ${s}`);}},e._row_style=function(a,s){this._dp._ganttMode===\"task\"&&e.isTaskExists(a)&&(e.getTask(a).$dataprocessor_class=s,e.refreshTask(a));},e._delete_task=function(a,s){},e._sendTaskOrder=function(a,s){s.$drop_target&&(this._dp.setGanttMode(\"task\"),this.getTask(a).target=s.$drop_target,this._dp.setUpdated(a,!0,\"order\"),delete this.getTask(a).$drop_target);},e.setDp=function(){this._dp=i;},e.setDp();}(this.$gantt,this);const n=new si(this.$gantt,this);n.attach(),this.attachEvent(\"onDestroy\",function(){delete this.setGanttMode,delete this._getRowData,delete this.$gantt._dp,delete this.$gantt._change_id,delete this.$gantt._row_style,delete this.$gantt._delete_task,delete this.$gantt._sendTaskOrder,delete this.$gantt,n.detach();}),this.$gantt.callEvent(\"onDataProcessorReady\",[this]),this._initialized=!0;}setOnAfterUpdate(t){this.attachEvent(\"onAfterUpdate\",t);}setOnBeforeUpdateHandler(t){this.attachEvent(\"onBeforeDataSending\",t);}setAutoUpdate(t,n){t=t||2e3,this._user=n||(/* @__PURE__ */new Date()).valueOf(),this._needUpdate=!1,this._updateBusy=!1,this.attachEvent(\"onAfterUpdate\",this.afterAutoUpdate),this.attachEvent(\"onFullSync\",this.fullSync),setInterval(()=>{this.loadUpdate();},t);}afterAutoUpdate(t,n,e,i){return n!==\"collision\"||(this._needUpdate=!0,!1);}fullSync(){return this._needUpdate&&(this._needUpdate=!1,this.loadUpdate()),!0;}getUpdates(t,n){const e=this.$gantt.ajax;if(this._updateBusy)return!1;this._updateBusy=!0,e.get(t,n);}loadUpdate(){const t=this.$gantt.ajax,n=this.$gantt.getUserData(0,\"version\",this._ganttMode);let e=this.serverProcessor+t.urlSeparator(this.serverProcessor)+[\"dhx_user=\"+this._user,\"dhx_version=\"+n].join(\"&\");e=e.replace(\"editing=true&\",\"\"),this.getUpdates(e,i=>{const a=t.xpath(\"//userdata\",i);this.$gantt.setUserData(0,\"version\",this._getXmlNodeValue(a[0]),this._ganttMode);const s=t.xpath(\"//update\",i);if(s.length){this._silent_mode=!0;for(let r=0;r<s.length;r++){const o=s[r].getAttribute(\"status\"),l=s[r].getAttribute(\"id\"),d=s[r].getAttribute(\"parent\");switch(o){case\"inserted\":this.callEvent(\"insertCallback\",[s[r],l,d]);break;case\"updated\":this.callEvent(\"updateCallback\",[s[r],l,d]);break;case\"deleted\":this.callEvent(\"deleteCallback\",[s[r],l,d]);}}this._silent_mode=!1;}this._updateBusy=!1;});}destructor(){this.callEvent(\"onDestroy\",[]),this.detachAllEvents(),this.updatedRows=[],this._in_progress={},this._invalid={},this._storage.clear(),this._storage=null,this._headers=null,this._payload=null,delete this._initialized;}setGanttMode(t){t===\"tasks\"?t=\"task\":t===\"links\"&&(t=\"link\");const n=this.modes||{},e=this.getGanttMode();e&&(n[e]={_in_progress:this._in_progress,_invalid:this._invalid,_storage:this._storage,updatedRows:this.updatedRows});let i=n[t];i||(i=n[t]={_in_progress:{},_invalid:{},_storage:Zt.create(),updatedRows:[]}),this._in_progress=i._in_progress,this._invalid=i._invalid,this._storage=i._storage,this.updatedRows=i.updatedRows,this.modes=n,this._ganttMode=t;}getGanttMode(){return this._ganttMode;}storeItem(t){this._storage.storeItem(t);}url(t){this.serverProcessor=this._serverProcessor=t;}_beforeSendData(t,n){if(!this.callEvent(\"onBeforeUpdate\",[n,this.getState(n),t]))return!1;this._sendData(t,n);}_serializeAsJSON(t){if(typeof t==\"string\")return t;const n=X(t);return this._tMode===\"REST-JSON\"&&(delete n.id,delete n[this.action_param]),JSON.stringify(n);}_applyPayload(t){const n=this.$gantt.ajax;if(this._payload)for(const e in this._payload)t=t+n.urlSeparator(t)+this.escape(e)+\"=\"+this.escape(this._payload[e]);return t;}_cleanupArgumentsBeforeSend(t){let n;if(t[this.action_param]===void 0){n={};for(const e in t)n[e]=this._cleanupArgumentsBeforeSend(t[e]);}else n=this._cleanupItemBeforeSend(t);return n;}_cleanupItemBeforeSend(t){let n=null;return t&&(t[this.action_param]===\"deleted\"?(n={},n.id=t.id,n[this.action_param]=t[this.action_param]):n=t),n;}_sendData(t,n){if(!t)return;if(!this.callEvent(\"onBeforeDataSending\",n?[n,this.getState(n),t]:[null,null,t]))return!1;n&&(this._in_progress[n]=(/* @__PURE__ */new Date()).valueOf());const e=this.$gantt.ajax;if(this._tMode===\"CUSTOM\"){const l=this.getState(n),d=this.getActionByState(l);delete t[this.action_param];const c=this.getGanttMode(),u=_=>{let f=l||\"updated\",y=n,v=n;_&&(f=_.action||l,y=_.sid||y,v=_.id||_.tid||v),this.afterUpdateCallback(y,v,f,_,c);};let h;if(this._router instanceof Function){if(this._routerParametersFormat===\"object\"){const _={entity:c,action:d,data:t,id:n};h=this._router(_);}else h=this._router(c,d,t,n);}else if(this._router[c]instanceof Function)h=this._router[c](d,t,n);else{const _=\"Incorrect configuration of gantt.createDataProcessor\",f=`\nYou need to either add missing properties to the dataProcessor router object or to use a router function.\nSee https://docs.dhtmlx.com/gantt/desktop__server_side.html#customrouting and https://docs.dhtmlx.com/gantt/api__gantt_createdataprocessor.html for details.`;if(!this._router[c])throw new Error(`${_}: router for the **${c}** entity is not defined. ${f}`);switch(l){case\"inserted\":if(!this._router[c].create)throw new Error(`${_}: **create** action for the **${c}** entity is not defined. ${f}`);h=this._router[c].create(t);break;case\"deleted\":if(!this._router[c].delete)throw new Error(`${_}: **delete** action for the **${c}** entity is not defined. ${f}`);h=this._router[c].delete(n);break;default:if(!this._router[c].update)throw new Error(`${_}: **update**\" action for the **${c}** entity is not defined. ${f}`);h=this._router[c].update(t,n);}}if(h){if(!h.then&&h.id===void 0&&h.tid===void 0&&h.action===void 0)throw new Error(\"Incorrect router return value. A Promise or a response object is expected\");h.then?h.then(u).catch(_=>{_&&_.action?u(_):u({action:\"error\",value:_});}):u(h);}else u(null);return;}let i;i={callback:l=>{const d=[];if(n)d.push(n);else if(t)for(const c in t)d.push(c);return this.afterUpdate(this,l,d);},headers:this._headers};const a=\"dhx_version=\"+this.$gantt.getUserData(0,\"version\",this._ganttMode),s=this.serverProcessor+(this._user?e.urlSeparator(this.serverProcessor)+[\"dhx_user=\"+this._user,a].join(\"&\"):\"\");let r,o=this._applyPayload(s);switch(this._tMode){case\"GET\":r=this._cleanupArgumentsBeforeSend(t),i.url=o+e.urlSeparator(o)+this.serialize(r,n),i.method=\"GET\";break;case\"POST\":r=this._cleanupArgumentsBeforeSend(t),i.url=o,i.method=\"POST\",i.data=this.serialize(r,n);break;case\"JSON\":r={};const l=this._cleanupItemBeforeSend(t);for(const d in l)d!==this.action_param&&d!==\"id\"&&d!==\"gr_id\"&&(r[d]=l[d]);i.url=o,i.method=\"POST\",i.data=JSON.stringify({id:n,action:t[this.action_param],data:r});break;case\"REST\":case\"REST-JSON\":switch(o=s.replace(/(&|\\?)editing=true/,\"\"),r=\"\",this.getState(n)){case\"inserted\":i.method=\"POST\",i.data=this.serialize(t,n);break;case\"deleted\":i.method=\"DELETE\",o=o+(o.slice(-1)===\"/\"?\"\":\"/\")+n;break;default:i.method=\"PUT\",i.data=this.serialize(t,n),o=o+(o.slice(-1)===\"/\"?\"\":\"/\")+n;}i.url=this._applyPayload(o);}return this._waitMode++,e.query(i);}_forEachUpdatedRow(t){const n=this.updatedRows.slice();for(let e=0;e<n.length;e++){const i=n[e];this.$gantt.getUserData(i,this.action_param,this._ganttMode)&&t.call(this,i);}}_setDefaultTransactionMode(){this.serverProcessor&&(this.setTransactionMode(\"POST\",!0),this.serverProcessor+=(this.serverProcessor.indexOf(\"?\")!==-1?\"&\":\"?\")+\"editing=true\",this._serverProcessor=this.serverProcessor);}_getXmlNodeValue(t){return t.firstChild?t.firstChild.nodeValue:\"\";}_getAllData(){const t={};let n=!1;return this._forEachUpdatedRow(function(e){if(this._in_progress[e]||this.is_invalid(e))return;const i=this._getRowData(e);this.callEvent(\"onBeforeUpdate\",[e,this.getState(e),i])&&(t[e]=i,n=!0,this._in_progress[e]=(/* @__PURE__ */new Date()).valueOf());}),n?t:null;}_prepareDate(t){return this.$gantt.defined(this.$gantt.templates.xml_format)?this.$gantt.templates.xml_format(t):this.$gantt.templates.format_date(t);}_prepareArray(t,n){return n.push(t),t.map(e=>et(e)?this._prepareDate(e):Array.isArray(e)&&!Wt(n,e)?this._prepareArray(e,n):e&&typeof e==\"object\"&&!Wt(n,e)?this._prepareObject(e,n):e);}_prepareObject(t,n){const e={};n.push(t);for(const i in t){if(i.substr(0,1)===\"$\")continue;const a=t[i];et(a)?e[i]=this._prepareDate(a):a===null?e[i]=\"\":Array.isArray(a)&&!Wt(n,a)?e[i]=this._prepareArray(a,n):a&&typeof a==\"object\"&&!Wt(n,a)?e[i]=this._prepareObject(a,n):e[i]=a;}return e;}_prepareDataItem(t){const n=this._prepareObject(t,[]);return n[this.action_param]=this.$gantt.getUserData(t.id,this.action_param,this._ganttMode),n;}getStoredItem(t){return this._storage.getStoredItem(t);}_getRowData(t){let n;const e=this.$gantt;return this.getGanttMode()===\"task\"?e.isTaskExists(t)&&(n=this.$gantt.getTask(t)):this.getGanttMode()===\"assignment\"?this.$gantt.$data.assignmentsStore.exists(t)&&(n=this.$gantt.$data.assignmentsStore.getItem(t)):this.getGanttMode()===\"baseline\"?this.$gantt.$data.baselineStore.exists(t)&&(n=this.$gantt.$data.baselineStore.getItem(t)):e.isLinkExists(t)&&(n=this.$gantt.getLink(t)),n||(n=this.getStoredItem(t)),n||(n={id:t}),this._prepareDataItem(n);}};const ri=function(t){return new fn(t);},oi=function(t){let n,e,i;t instanceof Function?n=t:t.hasOwnProperty(\"router\")?n=t.router:t.hasOwnProperty(\"assignment\")||t.hasOwnProperty(\"baseline\")||t.hasOwnProperty(\"link\")||t.hasOwnProperty(\"task\")?n=t:t.hasOwnProperty(\"headers\")&&(i=t.headers),e=n?\"CUSTOM\":t.mode||\"REST-JSON\";const a=new fn(t.url);return a.init(this),a.setTransactionMode({mode:e,router:n,headers:i},t.batchUpdate),t.deleteAfterConfirmation&&(a.deleteAfterConfirmation=t.deleteAfterConfirmation),a;};function li(t){var n={},e=!1;function i(l,d){d=typeof d==\"function\"?d:function(){},n[l]||(n[l]=this[l],this[l]=d);}function a(l){n[l]&&(this[l]=n[l],n[l]=null);}function s(l){for(var d in l)i.call(this,d,l[d]);}function r(){for(var l in n)a.call(this,l);}function o(l){try{l();}catch(d){tt.console.error(d);}}return t.$services.getService(\"state\").registerProvider(\"batchUpdate\",function(){return{batch_update:e};},!1),function(l,d){if(e)o(l);else{var c,u=this._dp&&this._dp.updateMode!=\"off\";u&&(c=this._dp.updateMode,this._dp.setUpdateMode(\"off\"));var h={},_={render:!0,refreshData:!0,refreshTask:!0,refreshLink:!0,resetProjectDates:function(y){h[y.id]=y;}};for(var f in s.call(this,_),e=!0,this.callEvent(\"onBeforeBatchUpdate\",[]),o(l),this.callEvent(\"onAfterBatchUpdate\",[]),r.call(this),h)this.resetProjectDates(h[f]);e=!1,d||this.render(),u&&(this._dp.setUpdateMode(c),this._dp.setGanttMode(\"task\"),this._dp.sendData(),this._dp.setGanttMode(\"link\"),this._dp.sendData());}};}function di(t){t.batchUpdate=li(t);}function ci(t){const n=/* @__PURE__ */function(i){return{_needRecalc:!0,reset:function(){this._needRecalc=!0;},_isRecalcNeeded:function(){return!this._isGroupSort()&&this._needRecalc;},_isGroupSort:function(){return!!i.getState().group_mode;},_getWBSCode:function(a){return a?(this._isRecalcNeeded()&&this._calcWBS(),a.$virtual?\"\":this._isGroupSort()?a.$wbs||\"\":(a.$wbs||(this.reset(),this._calcWBS()),a.$wbs)):\"\";},_setWBSCode:function(a,s){a.$wbs=s;},getWBSCode:function(a){return this._getWBSCode(a);},getByWBSCode:function(a){let s=a.split(\".\"),r=i.config.root_id;for(let o=0;o<s.length;o++){const l=i.getChildren(r);let d=1*s[o]-1;if(!i.isTaskExists(l[d]))return null;r=l[d];}return i.isTaskExists(r)?i.getTask(r):null;},_calcWBS:function(){if(!this._isRecalcNeeded())return;let a=!0;i.eachTask(function(s){if(s.type==i.config.types.placeholder)return;if(a)return a=!1,void this._setWBSCode(s,\"1\");const r=this._getPrevNonPlaceholderSibling(s.id);if(r!==null)this._increaseWBS(s,r);else{let o=i.getParent(s.id);this._setWBSCode(s,i.getTask(o).$wbs+\".1\");}},i.config.root_id,this),this._needRecalc=!1;},_increaseWBS:function(a,s){let r=i.getTask(s).$wbs;r&&(r=r.split(\".\"),r[r.length-1]++,this._setWBSCode(a,r.join(\".\")));},_getPrevNonPlaceholderSibling:function(a){let s,r=a;do s=i.getPrevSibling(r),r=s;while(s!==null&&i.getTask(s).type==i.config.types.placeholder);return s;}};}(t);function e(){return n.reset(),!0;}t.getWBSCode=function(i){return n.getWBSCode(i);},t.getTaskByWBSCode=function(i){return n.getByWBSCode(i);},t.attachEvent(\"onAfterTaskMove\",e),t.attachEvent(\"onBeforeParse\",e),t.attachEvent(\"onAfterTaskDelete\",e),t.attachEvent(\"onAfterTaskAdd\",e),t.attachEvent(\"onAfterSort\",e);}function ui(t){var n={},e=!1;t.$data.tasksStore.attachEvent(\"onStoreUpdated\",function(){n={},e=!1;}),t.attachEvent(\"onBeforeGanttRender\",function(){n={};});var i=String(Math.random());function a(l){return l===null?i+String(l):String(l);}function s(l,d,c){return Array.isArray(l)?l.map(function(u){return a(u);}).join(\"_\")+`_${d}_${c}`:a(l)+`_${d}_${c}`;}function r(l,d,c){var u,h=s(d,l,JSON.stringify(c)),_={};return bt(d,function(f){_[a(f)]=!0;}),n[h]?u=n[h]:(u=n[h]=[],t.eachTask(function(f){if(c){if(!c[t.getTaskType(f)])return;}else if(f.type==t.config.types.project)return;l in f&&bt(be(f[l])?f[l]:[f[l]],function(y){var v=y&&y.resource_id?y.resource_id:y;if(_[a(v)])u.push(f);else if(!e){var b=s(y,l);n[b]||(n[b]=[]),n[b].push(f);}});}),e=!0),u;}function o(l,d,c){var u=t.config.resource_property,h=[];if(t.getDatastore(\"task\").exists(d)){var _=t.getTask(d);h=_[u]||[];}Array.isArray(h)||(h=[h]);for(var f=0;f<h.length;f++)h[f].resource_id==l&&c.push({task_id:_.id,resource_id:h[f].resource_id,value:h[f].value});}return{getTaskBy:function(l,d,c){return typeof l==\"function\"?(u=l,h=[],t.eachTask(function(_){u(_)&&h.push(_);}),h):be(d)?r(l,d,c):r(l,[d],c);var u,h;},getResourceAssignments:function(l,d){var c=[],u=t.config.resource_property;return d!==void 0?o(l,d,c):t.getTaskBy(u,l).forEach(function(h){o(l,h.id,c);}),c;}};}function hi(t){const n={renderEditableLabel:function(e,i,a,s,r){const o=t.config.readonly?\"\":\"contenteditable\";if(e<a.end_date&&i>a.start_date){for(let l=0;l<r.length;l++){const d=r[l];return\"<div \"+o+\" data-assignment-cell data-assignment-id='\"+d.id+\"' data-row-id='\"+a.id+\"' data-task='\"+a.$task_id+\"' data-start-date='\"+t.templates.format_date(e)+\"' data-end-date='\"+t.templates.format_date(i)+\"'>\"+d.value+\"</div>\";}return\"<div \"+o+\" data-assignment-cell data-empty  data-row-id='\"+a.id+\"' data-resource-id='\"+a.$resource_id+\"' data-task='\"+a.$task_id+\"' data-start-date='\"+t.templates.format_date(e)+\"''  data-end-date='\"+t.templates.format_date(i)+\"'>-</div>\";}return\"\";},renderSummaryLabel:function(e,i,a,s,r){let o=r.reduce(function(l,d){return l+Number(d.value);},0);return o%1&&(o=Math.round(10*o)/10),o?\"<div>\"+o+\"</div>\":\"\";},editableResourceCellTemplate:function(e,i,a,s,r){return a.$role===\"task\"?n.renderEditableLabel(e,i,a,s,r):n.renderSummaryLabel(e,i,a,s,r);},editableResourceCellClass:function(e,i,a,s,r){const o=[];o.push(\"resource_marker\"),a.$role===\"task\"?o.push(\"task_cell\"):o.push(\"resource_cell\");const l=r.reduce(function(c,u){return c+Number(u.value);},0);let d=Number(a.capacity);return isNaN(d)&&(d=8),l<=d?o.push(\"workday_ok\"):o.push(\"workday_over\"),o.join(\" \");},getSummaryResourceAssignments:function(e){let i;const a=t.getDatastore(t.config.resource_store),s=a.getItem(e);return s.$role===\"task\"?i=t.getResourceAssignments(s.$resource_id,s.$task_id):(i=t.getResourceAssignments(e),a.eachItem&&a.eachItem(function(r){r.$role!==\"task\"&&(i=i.concat(t.getResourceAssignments(r.id)));},e)),i;},initEditableDiagram:function(){t.config.resource_render_empty_cells=!0,function(){let a=null;function s(){return a&&cancelAnimationFrame(a),a=requestAnimationFrame(function(){t.$container&&Array.prototype.slice.call(t.$container.querySelectorAll(\".resourceTimeline_cell [data-assignment-cell]\")).forEach(function(r){r.contentEditable=!0;});}),!0;}t.attachEvent(\"onGanttReady\",function(){t.getDatastore(t.config.resource_assignment_store).attachEvent(\"onStoreUpdated\",s),t.getDatastore(t.config.resource_store).attachEvent(\"onStoreUpdated\",s);},{once:!0}),t.attachEvent(\"onGanttLayoutReady\",function(){t.$layout.getCellsByType(\"viewCell\").forEach(function(r){r.$config&&r.$config.view===\"resourceTimeline\"&&r.$content&&r.$content.attachEvent(\"onScroll\",s);});});}();let e=null;function i(a,s){let r=s||a.target.closest(\".resourceTimeline_cell [data-assignment-cell]\");if(r){let o=(r.innerText||\"\").trim();o==\"-\"&&(o=\"0\");let l=Number(o),d=r.getAttribute(\"data-row-id\"),c=r.getAttribute(\"data-assignment-id\"),u=r.getAttribute(\"data-task\"),h=r.getAttribute(\"data-resource-id\"),_=t.templates.parse_date(r.getAttribute(\"data-start-date\")),f=t.templates.parse_date(r.getAttribute(\"data-end-date\"));const y=t.getDatastore(t.config.resource_assignment_store);if(isNaN(l))t.getDatastore(t.config.resource_store).refresh(d);else{const v=t.getTask(u);if(c){t.plugins().undo&&t.ext.undo.saveState(u,\"task\");const b=y.getItem(c);if(!b||l===b.value)return;if(b.start_date.valueOf()===_.valueOf()&&b.end_date.valueOf()===f.valueOf())b.value=l,l?y.updateItem(b.id):y.removeItem(b.id);else{if(b.end_date.valueOf()>f.valueOf()){const m=t.copy(b);m.id=t.uid(),m.start_date=f,m.duration=t.calculateDuration({start_date:m.start_date,end_date:m.end_date,task:v}),m.delay=t.calculateDuration({start_date:v.start_date,end_date:m.start_date,task:v}),m.mode=b.mode||\"default\",m.duration!==0&&y.addItem(m);}b.start_date.valueOf()<_.valueOf()?(b.end_date=_,b.duration=t.calculateDuration({start_date:b.start_date,end_date:b.end_date,task:v}),b.mode=\"fixedDuration\",b.duration===0?y.removeItem(b.id):y.updateItem(b.id)):y.removeItem(b.id),l&&y.addItem({task_id:b.task_id,resource_id:b.resource_id,value:l,start_date:_,end_date:f,duration:t.calculateDuration({start_date:_,end_date:f,task:v}),delay:t.calculateDuration({start_date:v.start_date,end_date:_,task:v}),mode:\"fixedDuration\"});}t.updateTaskAssignments(v.id),t.updateTask(v.id);}else if(l){let b={task_id:u,resource_id:h,value:l,start_date:_,end_date:f,duration:t.calculateDuration({start_date:_,end_date:f,task:v}),delay:t.calculateDuration({start_date:v.start_date,end_date:_,task:v}),mode:\"fixedDuration\"};y.addItem(b),t.updateTaskAssignments(v.id),t.updateTask(v.id);}}}}t.attachEvent(\"onGanttReady\",function(){let a=null;t.event(t.$container,\"keypress\",function(s){let r=s.target.closest(\".resourceTimeline_cell [data-assignment-cell]\");r&&(s.keyCode!==13&&s.keyCode!==27||(r.blur(),i(s)),a=s.target);}),t.event(t.$container,\"keydown\",function(s){s.key===\"Tab\"&&(e=Pt(t.$container).indexOf(document.activeElement),i(s),setTimeout(function(){var l;const o=Pt(t.$container);e>-1&&((l=o[e+1])==null||l.focus());},300));}),t.event(t.$container,\"click\",function(s){if(a&&(i(s,a),a=null,s.target.hasAttribute(\"data-assignment-id\"))){const r=t.$container.querySelectorAll(\"[contenteditable='true']\"),o=Array.from(r).find(l=>l.getAttribute(\"data-start-date\")==s.target.getAttribute(\"data-start-date\")&&l.getAttribute(\"data-assignment-id\")==s.target.getAttribute(\"data-assignment-id\"));setTimeout(()=>{const l=t.$container.querySelectorAll(\"[contenteditable='true']\"),d=Array.from(l).find(c=>c.getAttribute(\"data-start-date\")==o.getAttribute(\"data-start-date\")&&c.getAttribute(\"data-row-id\")==o.getAttribute(\"data-row-id\"));d&&d.focus();},400);}});},{once:!0});}};return n;}function _i(t){var n=ui(t);t.ext.resources=hi(t),t.config.resources={dataprocessor_assignments:!1,dataprocessor_resources:!1,editable_resource_diagram:!1,resource_store:{type:\"treeDataStore\",fetchTasks:!1,initItem:function(a){return a.parent=a.parent||t.config.root_id,a[t.config.resource_property]=a.parent,a.open=!0,a;}},lightbox_resources:function(a){const s=[],r=t.getDatastore(t.config.resource_store);return a.forEach(function(o){if(!r.hasChild(o.id)){const l=t.copy(o);l.key=o.id,l.label=o.text,s.push(l);}}),s;}},t.attachEvent(\"onBeforeGanttReady\",function(){if(t.getDatastore(t.config.resource_store))return;const a=t.config.resources?t.config.resources.resource_store:void 0;let s=a?a.fetchTasks:void 0;t.config.resources&&t.config.resources.editable_resource_diagram&&(s=!0);let r=function(l){return l.parent=l.parent||t.config.root_id,l[t.config.resource_property]=l.parent,l.open=!0,l;};a&&a.initItem&&(r=a.initItem);const o=a&&a.type?a.type:\"treeDatastore\";t.$resourcesStore=t.createDatastore({name:t.config.resource_store,type:o,fetchTasks:s!==void 0&&s,initItem:r}),t.$data.resourcesStore=t.$resourcesStore,t.$resourcesStore.attachEvent(\"onParse\",function(){let l,d=function(c){const u=[];return c.forEach(function(h){const _=t.copy(h);_.key=h.id,_.label=h.text,u.push(_);}),u;};t.config.resources&&t.config.resources.lightbox_resources&&(d=t.config.resources.lightbox_resources),t.config.resources&&t.config.resources.editable_resource_diagram?l=d(t.$resourcesStore.getItems().filter(c=>{let u=t.getResourceAssignments(c.id);if(!t.$resourcesStore.hasChild(c.id)||u&&u.length)return!c.$resource_id||!c.$task_id;})):l=d(t.$resourcesStore.getItems()),t.updateCollection(\"resourceOptions\",l);});}),t.getTaskBy=n.getTaskBy,t.getResourceAssignments=n.getResourceAssignments,t.config.resource_property=\"owner_id\",t.config.resource_store=\"resource\",t.config.resource_render_empty_cells=!1,t.templates.histogram_cell_class=function(a,s,r,o,l){},t.templates.histogram_cell_label=function(a,s,r,o,l){return o.length+\"/3\";},t.templates.histogram_cell_allocated=function(a,s,r,o,l){return o.length/3;},t.templates.histogram_cell_capacity=function(a,s,r,o,l){return 0;};const e=function(a,s,r,o,l){return o.length<=1?\"gantt_resource_marker_ok\":\"gantt_resource_marker_overtime\";},i=function(a,s,r,o,l){return 8*o.length;};t.templates.resource_cell_value=i,t.templates.resource_cell_class=e,t.attachEvent(\"onBeforeGanttReady\",function(){t.config.resources&&t.config.resources.editable_resource_diagram&&(t.config.resource_render_empty_cells=!0,t.templates.resource_cell_value===i&&(t.templates.resource_cell_value=t.ext.resources.editableResourceCellTemplate),t.templates.resource_cell_class===e&&(t.templates.resource_cell_class=t.ext.resources.editableResourceCellClass),t.ext.resources.initEditableDiagram(t));});}function gi(t){var n=\"$resourceAssignments\";t.config.resource_assignment_store=\"resourceAssignments\",t.config.process_resource_assignments=!0;var e=\"auto\",i=\"singleValue\",a=\"valueArray\",s=\"resourceValueArray\",r=\"assignmentsArray\",o=e,l=\"fixedDates\",d=\"fixedDuration\",c=\"default\";function u(p,k){p.start_date?p.start_date=t.date.parseDate(p.start_date,\"parse_date\"):p.start_date=null,p.end_date?p.end_date=t.date.parseDate(p.end_date,\"parse_date\"):p.end_date=null;var x=Number(p.delay),w=!1;if(isNaN(x)?(p.delay=0,w=!0):p.delay=x,t.defined(p.value)||(p.value=null),!p.task_id||!p.resource_id)return!1;if(p.mode=p.mode||c,p.mode===d&&(isNaN(Number(p.duration))&&(k=k||t.getTask(p.task_id),p.duration=t.calculateDuration({start_date:p.start_date,end_date:p.end_date,id:k})),w&&(k=k||t.getTask(p.task_id),p.delay=t.calculateDuration({start_date:k.start_date,end_date:p.start_date,id:k}))),p.mode!==l&&(k||t.isTaskExists(p.task_id))){var $=_(p,k=k||t.getTask(p.task_id));p.start_date=$.start_date,p.end_date=$.end_date,p.duration=$.duration;}}var h=t.createDatastore({name:t.config.resource_assignment_store,initItem:function(p){return p.id||(p.id=t.uid()),u(p),p;}});function _(p,k){if(p.mode===l)return{start_date:p.start_date,end_date:p.end_date,duration:p.duration};var x,w,$=p.delay?t.calculateEndDate({start_date:k.start_date,duration:p.delay,task:k}):new Date(k.start_date);return p.mode===d?(x=t.calculateEndDate({start_date:$,duration:p.duration,task:k}),w=p.duration):(x=new Date(k.end_date),w=k.duration-p.delay),{start_date:$,end_date:x,duration:w};}function f(p){const k=t.config.resource_property;let x=p[k];const w=[];let $=o===e;if(t.defined(x)&&x){Array.isArray(x)||(x=[x],$&&(o=i,$=!1));const T={};x.forEach(function(S){S.resource_id||(S={resource_id:S},$&&(o=a,$=!1)),$&&(S.id&&S.resource_id?(o=r,$=!1):(o=s,$=!1));let C,E=c;S.mode||(S.start_date&&S.end_date||S.start_date&&S.duration)&&(E=d),C=S.id||!S.$id||T[S.$id]?S.id&&!T[S.id]?S.id:t.uid():S.$id,T[C]=!0;const D={id:C,start_date:S.start_date,duration:S.duration,end_date:S.end_date,delay:S.delay,task_id:p.id,resource_id:S.resource_id,value:S.value,mode:S.mode||E};Object.keys(S).forEach(A=>{A!=\"$id\"&&(D[A]=S[A]);}),D.start_date&&D.start_date.getMonth&&D.end_date&&D.end_date.getMonth&&typeof D.duration==\"number\"||u(D,p),w.push(D);});}return w;}function y(p){if(t.isTaskExists(p)){var k=t.getTask(p);v(k,t.getTaskAssignments(k.id));}}function v(p,k){k.sort(function(x,w){return x.start_date&&w.start_date&&x.start_date.valueOf()!=w.start_date.valueOf()?x.start_date-w.start_date:0;}),o==r?p[t.config.resource_property]=k:o==s&&(p[t.config.resource_property]=k.map(function(x){return{$id:x.id,start_date:x.start_date,duration:x.duration,end_date:x.end_date,delay:x.delay,resource_id:x.resource_id,value:x.value,mode:x.mode};})),p[n]=k;}function b(p){var k=f(p);return k.forEach(function(x){x.id=x.id||t.uid();}),k;}function m(p,k){var x=function(w,$){var T={inBoth:[],inTaskNotInStore:[],inStoreNotInTask:[]};if(o==i){var S=w[0],C=S?S.resource_id:null,E=!1;$.forEach(function(I){I.resource_id!=C?T.inStoreNotInTask.push(I):I.resource_id==C&&(T.inBoth.push({store:I,task:S}),E=!0);}),!E&&S&&T.inTaskNotInStore.push(S);}else if(o==a){var D={},A={},M={};w.forEach(function(I){D[I.resource_id]=I;}),$.forEach(function(I){A[I.resource_id]=I;}),w.concat($).forEach(function(I){if(!M[I.resource_id]){M[I.resource_id]=!0;var N=D[I.resource_id],L=A[I.resource_id];N&&L?T.inBoth.push({store:L,task:N}):N&&!L?T.inTaskNotInStore.push(N):!N&&L&&T.inStoreNotInTask.push(L);}});}else o!=r&&o!=s||(D={},A={},M={},w.forEach(function(I){D[I.id||I.$id]=I;}),$.forEach(function(I){A[I.id]=I;}),w.concat($).forEach(function(I){var N=I.id||I.$id;if(!M[N]){M[N]=!0;var L=D[N],O=A[N];L&&O?T.inBoth.push({store:O,task:L}):L&&!O?T.inTaskNotInStore.push(L):!L&&O&&T.inStoreNotInTask.push(O);}}));return T;}(f(p),k);x.inStoreNotInTask.forEach(function(w){h.removeItem(w.id);}),x.inTaskNotInStore.forEach(function(w){h.addItem(w);}),x.inBoth.forEach(function(w){if(function(T,S){var C={id:!0};for(var E in T)if(!C[E]&&String(T[E])!==String(S[E]))return!0;return!1;}(w.task,w.store))(function(T,S){var C={id:!0};for(var E in T)C[E]||(S[E]=T[E]);})(w.task,w.store),h.updateItem(w.store.id);else if(w.task.start_date&&w.task.end_date&&w.task.mode!==l){var $=_(w.store,p);w.store.start_date.valueOf()==$.start_date.valueOf()&&w.store.end_date.valueOf()==$.end_date.valueOf()||(w.store.start_date=$.start_date,w.store.end_date=$.end_date,w.store.duration=$.duration,h.updateItem(w.store.id));}}),y(p.id);}function g(p){var k=p[n]||h.find(function(x){return x.task_id==p.id;});m(p,k);}t.$data.assignmentsStore=h,t.attachEvent(\"onGanttReady\",function(){if(t.config.process_resource_assignments){t.attachEvent(\"onParse\",function(){t.silent(function(){h.clearAll();var C=[];t.eachTask(function(E){if(E.type!==t.config.types.project){var D=b(E);v(E,D),D.forEach(function(A){C.push(A);});}}),h.parse(C);});});var p=!1,k=!1,x={},w=!1;t.attachEvent(\"onBeforeBatchUpdate\",function(){p=!0;}),t.attachEvent(\"onAfterBatchUpdate\",function(){if(k){var C={};for(var E in x)C[E]=t.getTaskAssignments(x[E].id);for(var E in t.config.process_resource_assignments&&o===\"resourceValueArray\"&&(S=null),x)m(x[E],C[E]);}k=!1,p=!1,x={};}),t.attachEvent(\"onTaskCreated\",function(C){var E=b(C);return h.parse(E),v(C,E),!0;}),t.attachEvent(\"onAfterTaskUpdate\",function(C,E){p?(k=!0,x[C]=E):E.unscheduled||g(E);}),t.attachEvent(\"onAfterTaskAdd\",function(C,E){p?(k=!0,x[C]=E):g(E);}),t.attachEvent(\"onRowDragEnd\",function(C){g(t.getTask(C));}),t.$data.tasksStore.attachEvent(\"onAfterDeleteConfirmed\",function(C,E){var D,A=[C];t.eachTask(function(M){A.push(M.id);},C),D={},A.forEach(function(M){D[M]=!0;}),h.find(function(M){return D[M.task_id];}).forEach(function(M){h.removeItem(M.id);});}),t.$data.tasksStore.attachEvent(\"onClearAll\",function(){return $=null,T=null,S=null,h.clearAll(),!0;}),t.attachEvent(\"onTaskIdChange\",function(C,E){h.find(function(D){return D.task_id==C;}).forEach(function(D){D.task_id=E,h.updateItem(D.id);}),y(E);}),t.attachEvent(\"onBeforeUndo\",function(C){return w=!0,!0;}),t.attachEvent(\"onAfterUndo\",function(C){w=!0;});var $=null,T=null,S=null;h.attachEvent(\"onStoreUpdated\",function(){return p&&!w||($=null,T=null,S=null),!0;}),t.getResourceAssignments=function(C,E){var D=t.defined(E)&&E!==null;return $===null&&($={},T={},h.eachItem(function(A){$[A.resource_id]||($[A.resource_id]=[]),$[A.resource_id].push(A);var M=A.resource_id+\"-\"+A.task_id;T[M]||(T[M]=[]),T[M].push(A);})),D?(T[C+\"-\"+E]||[]).slice():($[C]||[]).slice();},t.getTaskAssignments=function(C){if(S===null){var E=[];S={},h.eachItem(function(D){S[D.task_id]||(S[D.task_id]=[]),S[D.task_id].push(D),D.task_id==C&&E.push(D);});}return(S[C]||[]).slice();},t.getTaskResources=function(C){const E=t.getDatastore(\"resource\"),D=t.getTaskAssignments(C),A={};D.forEach(function(I){A[I.resource_id]||(A[I.resource_id]=I.resource_id);});const M=[];for(const I in A){const N=E.getItem(A[I]);N&&M.push(N);}return M;},t.updateTaskAssignments=y;}},{once:!0});}function fi(t){function n(o){return function(){return!t.config.placeholder_task||o.apply(this,arguments);};}function e(){var o=t.getTaskBy(\"type\",t.config.types.placeholder);if(!o.length||!t.isTaskExists(o[0].id)){var l={unscheduled:!0,type:t.config.types.placeholder,duration:0,text:t.locale.labels.new_task};if(t.callEvent(\"onTaskCreated\",[l])===!1)return;t.addTask(l);}}function i(o){var l=t.getTask(o);l.type==t.config.types.placeholder&&(l.start_date&&l.end_date&&l.unscheduled&&(l.unscheduled=!1),t.batchUpdate(function(){var d=t.copy(l);t.silent(function(){t.deleteTask(l.id);}),delete d[\"!nativeeditor_status\"],d.type=t.config.types.task,d.id=t.uid(),t.addTask(d);}));}t.config.types.placeholder=\"placeholder\",t.attachEvent(\"onDataProcessorReady\",n(function(o){o&&!o._silencedPlaceholder&&(o._silencedPlaceholder=!0,o.attachEvent(\"onBeforeUpdate\",n(function(l,d,c){return c.type!=t.config.types.placeholder||(o.setUpdated(l,!1),!1);})));}));var a=!1;function s(o){return!!(t.config.types.placeholder&&t.isTaskExists(o)&&t.getTask(o).type==t.config.types.placeholder);}function r(o){return!(!s(o.source)&&!s(o.target));}t.attachEvent(\"onGanttReady\",function(){a||(a=!0,t.attachEvent(\"onAfterTaskUpdate\",n(i)),t.attachEvent(\"onAfterTaskAdd\",n(function(o,l){l.type!=t.config.types.placeholder&&(t.getTaskBy(\"type\",t.config.types.placeholder).forEach(function(d){t.silent(function(){t.isTaskExists(d.id)&&t.deleteTask(d.id);});}),e());})),t.attachEvent(\"onParse\",n(e)));}),t.attachEvent(\"onLinkValidation\",function(o){return!r(o);}),t.attachEvent(\"onBeforeLinkAdd\",function(o,l){return!r(l);}),t.attachEvent(\"onBeforeUndoStack\",function(o){for(var l=0;l<o.commands.length;l++){var d=o.commands[l];d.entity===\"task\"&&d.value.type===t.config.types.placeholder&&(o.commands.splice(l,1),l--);}return!0;});}function pi(t){function n(c){return function(){return!t.config.auto_types||t.getTaskType(t.config.types.project)!=t.config.types.project||c.apply(this,arguments);};}function e(c,u){var h=t.getTask(c),_=s(h);_!==!1&&t.getTaskType(h)!==_&&(u.$needsUpdate=!0,u[h.id]={task:h,type:_});}function i(c){if(!t.getState().group_mode){var u=function(h,_){return e(h,_=_||{}),t.eachParent(function(f){e(f.id,_);},h),_;}(c);u.$needsUpdate&&t.batchUpdate(function(){(function(h){for(var _ in h)if(h[_]&&h[_].task){var f=h[_].task;f.type=h[_].type,t.updateTask(f.id);}})(u);});}}var a;function s(c){var u=t.config.types,h=t.hasChild(c.id),_=t.getTaskType(c.type);return h&&_===u.task?u.project:!h&&_===u.project&&u.task;}var r,o,l=!0;function d(c){c!=t.config.root_id&&t.isTaskExists(c)&&i(c);}t.attachEvent(\"onParse\",n(function(){l=!1,t.getState().group_mode||(t.batchUpdate(function(){t.eachTask(function(c){var u=s(c);u!==!1&&function(h,_){t.getState().group_mode||(h.type=_,t.updateTask(h.id));}(c,u);});}),l=!0);})),t.attachEvent(\"onAfterTaskAdd\",n(function(c){l&&i(c);})),t.attachEvent(\"onAfterTaskUpdate\",n(function(c){l&&i(c);})),t.attachEvent(\"onBeforeTaskDelete\",n(function(c,u){return a=t.getParent(c),!0;})),t.attachEvent(\"onAfterTaskDelete\",n(function(c,u){d(a);})),t.attachEvent(\"onRowDragStart\",n(function(c,u,h){return r=t.getParent(c),!0;})),t.attachEvent(\"onRowDragEnd\",n(function(c,u){d(r),i(c);})),t.attachEvent(\"onBeforeTaskMove\",n(function(c,u,h){return o=t.getParent(c),!0;})),t.attachEvent(\"onAfterTaskMove\",n(function(c,u,h){document.querySelector(\".gantt_drag_marker\")||(d(o),i(c));}));}const ne=class ne{constructor(){this.canParse=n=>!isNaN(this.parse(n)),this.format=n=>String(n),this.parse=n=>parseInt(n,10);}};ne.create=(n=null)=>new ne();let Ht=ne;const ie=class ie{constructor(n){this.format=e=>this._getWBSCode(e.source),this.canParse=e=>this._linkReg.test(e),this.parse=e=>{if(!this.canParse(e))return null;const i=this._linkReg.exec(e)[0].trim();return{id:void 0,source:this._findSource(i)||null,target:null,type:this._gantt.config.links.finish_to_start,lag:0};},this._getWBSCode=e=>{const i=this._gantt.getTask(e);return this._gantt.getWBSCode(i);},this._findSource=e=>{const i=new RegExp(\"^[0-9.]+\",\"i\");if(i.exec(e)){const a=i.exec(e)[0],s=this._gantt.getTaskByWBSCode(a);if(s)return s.id;}return null;},this._linkReg=/^[0-9\\.]+/,this._gantt=n;}};ie.create=(n=null,e)=>new ie(e);let Se=ie;function mi(t){t.ext.formatters={durationFormatter:function(n){return n||(n={}),n.store||(n.store=t.config.duration_unit),n.enter||(n.enter=t.config.duration_unit),Ht.create(n,t);},linkFormatter:function(n){return Se.create(n,t);}};}function vi(t){t.ext=t.ext||{},t.config.show_empty_state=!1,t.ext.emptyStateElement=t.ext.emptyStateElement||{isEnabled:()=>t.config.show_empty_state===!0,isGanttEmpty:()=>!t.getTaskByTime().length,renderContent(n){const e=`<div class='gantt_empty_state'><div class='gantt_empty_state_image'></div>${`<div class='gantt_empty_state_text'>\n    <div class='gantt_empty_state_text_link' data-empty-state-create-task>${t.locale.labels.empty_state_text_link}</div>\n    <div class='gantt_empty_state_text_description'>${t.locale.labels.empty_state_text_description}</div>\n    </div>`}</div>`;n.innerHTML=e;},clickEvents:[],attachAddTaskEvent(){const n=t.attachEvent(\"onEmptyClick\",function(e){t.utils.dom.closest(e.target,\"[data-empty-state-create-task]\")&&t.createTask({id:t.uid(),text:\"New Task\"});});this.clickEvents.push(n);},detachAddTaskEvents(){this.clickEvents.forEach(function(n){t.detachEvent(n);}),this.clickEvents=[];},getContainer(){if(t.$container){const n=t.utils.dom;if(t.$container.contains(t.$grid_data))return n.closest(t.$grid_data,\".gantt_layout_content\");if(t.$container.contains(t.$task_data))return n.closest(t.$task_data,\".gantt_layout_content\");}return null;},getNode(){const n=this.getContainer();return n?n.querySelector(\".gantt_empty_state_wrapper\"):null;},show(){const n=this.getContainer();if(!n&&this.isGanttEmpty())return null;const e=document.createElement(\"div\");e.className=\"gantt_empty_state_wrapper\",e.style.marginTop=t.config.scale_height-n.offsetHeight+\"px\";const i=t.$container.querySelectorAll(\".gantt_empty_state_wrapper\");Array.prototype.forEach.call(i,function(a){a.parentNode.removeChild(a);}),this.detachAddTaskEvents(),this.attachAddTaskEvent(),n.appendChild(e),this.renderContent(e);},hide(){const n=this.getNode();if(!n)return!1;n.parentNode.removeChild(n);},init(){}},t.attachEvent(\"onDataRender\",function(){const n=t.ext.emptyStateElement;n.isEnabled()&&n.isGanttEmpty()?n.show():n.hide();});}const pn=function(t,n){const e=n.baselines&&n.baselines.length,i=t.config.baselines.render_mode==\"separateRow\"||t.config.baselines.render_mode==\"individualRow\";if(e&&i)return!0;},St=function(t){return t.render&&t.render==\"split\"&&!t.$open;};function ki(t){t.config.baselines={datastore:\"baselines\",render_mode:!1,dataprocessor_baselines:!1,row_height:16,bar_height:8};const n=t.createDatastore({name:t.config.baselines.datastore,initItem:function(a){return a.id||(a.id=t.uid()),function(s){if(!s.task_id||!s.start_date&&!s.end_date)return!1;s.start_date?s.start_date=t.date.parseDate(s.start_date,\"parse_date\"):s.start_date=null,s.end_date?s.end_date=t.date.parseDate(s.end_date,\"parse_date\"):s.end_date=null,s.duration=s.duration||1,s.start_date&&!s.end_date?s.end_date=t.calculateEndDate(s.start_date,s.duration):s.end_date&&!s.start_date&&(s.start_date=t.calculateEndDate(s.end_date,-s.duration));}(a),a;}});function e(a){let s=0;t.adjustTaskHeightForBaselines(a),t.eachTask(function(r){let o=r.row_height||t.config.row_height;s=s||o,o>s&&(s=o);},a.id),a.row_height<s&&(a.row_height=s);}function i(a){t.eachParent(function(s){if(St(s)){const r=s.row_height||t.getLayoutView(\"timeline\").getBarHeight(s.id);let o=a.row_height;t.getChildren(s.id).forEach(function(l){const d=t.getTask(l);if(d.id==a.id)return;const c=d.row_height||t.getLayoutView(\"timeline\").getBarHeight(d.id);o=o||c,c>o&&(o=c);}),s.row_height=o,s.bar_height=s.bar_height||r;}},a.id);}t.$data.baselineStore=n,t.adjustTaskHeightForBaselines=function(a){let s,r,o=a.baselines&&a.baselines.length||0;const l=t.config.baselines.row_height,d=t.getLayoutView(\"timeline\");if(d&&t.config.show_chart)switch(t.config.baselines.render_mode){case\"taskRow\":default:a.row_height=a.bar_height+8;break;case\"separateRow\":s=d.getBarHeight(a.id),o?(a.bar_height=a.bar_height||s,a.bar_height>s&&(s=a.bar_height),a.row_height=s+l):a.bar_height&&(a.row_height=a.bar_height+4),i(a);break;case\"individualRow\":s=d.getBarHeight(a.id),o?(a.bar_height=a.bar_height||s,a.bar_height>s&&(s=a.bar_height),r=l*o,a.row_height=s+r+2):a.bar_height&&(a.row_height=a.bar_height+4),i(a);}},t.attachEvent(\"onGanttReady\",function(){t.config.baselines&&(t.attachEvent(\"onParse\",function(){n.eachItem(function(a){const s=a.task_id;if(t.isTaskExists(s)){const r=t.getTask(s);r.baselines=r.baselines||[];let o=!0;for(let l=0;l<r.baselines.length;l++){let d=r.baselines[l];if(d.id==a.id){o=!1,t.mixin(d,a,!0);break;}}o&&r.baselines.push(a),G(t)||(St(r)?e(r):t.adjustTaskHeightForBaselines(r));}});}),t.attachEvent(\"onBeforeTaskUpdate\",function(a,s){return function(r){let o=!1;const l={},d=r.baselines||[],c=t.getTaskBaselines(r.id);d.length!=c.length&&(o=!0),d.forEach(function(u){l[u.id]=!0;const h=n.getItem(u.id);if(h){const _=+h.start_date!=+u.start_date,f=+h.end_date!=+u.end_date;(_||f)&&n.updateItem(u.id,u);}else n.addItem(u);}),c.forEach(function(u){l[u.id]||n.removeItem(u.id);}),o&&(St(r)?e(r):t.adjustTaskHeightForBaselines(r),t.render());}(s),!0;}),t.attachEvent(\"onAfterUndo\",function(a){if((t.config.baselines.render_mode==\"separateRow\"||t.config.baselines.render_mode==\"individualRow\")&&a){let s=!1;a.commands.forEach(function(r){if(r.entity==\"task\"){const o=r.value.id;if(t.isTaskExists(o)){const l=t.getTask(o);if(l.parent&&t.isTaskExists(l.parent)){const d=t.getTask(l.parent);St(d)&&(e(d),s=!0);}}}}),s&&t.render();}}),t.attachEvent(\"onAfterTaskDelete\",function(a,s){if(pn&&s.parent&&t.isTaskExists(s.parent)){const r=t.getTask(s.parent);St(r)&&e(r);}n.eachItem(function(r){t.isTaskExists(r.task_id)||n.removeItem(r.id);});}),t.getTaskBaselines=function(a){const s=[];return n.eachItem(function(r){r.task_id==a&&s.push(r);}),s;},t.$data.baselineStore.attachEvent(\"onClearAll\",function(){return t.eachTask(function(a){a.baselines&&delete a.baselines;}),!0;}),t.$data.tasksStore.attachEvent(\"onClearAll\",function(){return n.clearAll(),!0;}),t.attachEvent(\"onTaskIdChange\",function(a,s){n.find(function(r){return r.task_id==a;}).forEach(function(r){r.task_id=s,n.updateItem(r.id);});}));},{once:!0});}class yi{constructor(n,e){const i=new hn({url:n,token:e});i.fetch=function(a,s){const r={headers:this.headers()};return s&&(r.method=\"POST\",r.body=s),fetch(a,r).then(o=>o.json());},this._ready=i.load().then(a=>this._remote=a);}ready(){return this._ready;}on(n,e){this.ready().then(i=>{if(typeof n==\"string\")i.on(n,e);else for(const a in n)i.on(a,n[a]);});}}function bi(t){let n=[],e=null;function i(o){var u,h;if(!o||!o.type||!((u=o.task)!=null&&u.id)&&!((h=o.link)!=null&&h.id))return void console.error(\"Invalid message format:\",o);const{type:l,task:d,link:c}=o;if(!(d&&t._dp._in_progress[d.id]||c&&t._dp._in_progress[c.id])){if(l===\"add-task\"){for(const _ in t._dp._in_progress)if(t._dp.getState(_)===\"inserted\")return void t._dp.attachEvent(\"onFullSync\",function(){t.isTaskExists(d.id)||s(o);},{once:!0});}n.push(o),e&&clearTimeout(e),e=setTimeout(a,50);}}function a(){n.length!==0&&(n.length===1?s(n[0]):t.batchUpdate(function(){n.forEach(o=>{s(o);});}),n=[]);}function s(o){const{type:l,task:d,link:c}=o;switch(l){case\"add-task\":(function(u){if(t.isTaskExists(u.id))return void console.warn(`Task with ID ${u.id} already exists. Skipping add.`);u.start_date=t.templates.parse_date(u.start_date),u.end_date&&(u.end_date=t.templates.parse_date(u.end_date)),r(()=>{t.addTask(u);});})(d);break;case\"update-task\":(function(u){const h=u.id;if(!t.getTask(h))return void console.warn(`Task with ID ${h} does not exist. Skipping update.`);const _=t.getDatastore(\"task\").$initItem.bind(t.getDatastore(\"task\")),f=t.getTask(h);r(()=>{const y=_(u);for(let v in y)f[v]=y[v];y.end_date||(f.end_date=t.calculateEndDate(f)),t.updateTask(h),h!==u.id&&t.changeTaskId(h,u.id);});})(d);break;case\"delete-task\":(function(u){const h=u.id;t.isTaskExists(h)&&r(()=>{t.getTask(h)&&(t.getState().lightbox_id==h&&(u.id=this._lightbox_id,t.getTask(this._lightbox_id)),t.deleteTask(h,!0));});})(d);break;case\"add-link\":(function(u){if(t.isLinkExists(u.id))return void console.warn(`Link with ID ${u.id} already exists. Skipping add.`);r(()=>{t.addLink(u);});})(c);break;case\"update-link\":(function(u){const h=u.id;if(!t.isLinkExists(h))return void console.warn(`Link with ID ${h} does not exist. Skipping update.`);const _=t.getLink(h);r(()=>{Object.assign(_,u),t.updateLink(h),h!==u.id&&t.changeLinkId(h,u.id);});})(c);break;case\"delete-link\":(function(u){const h=u.id;t.getLink(h)&&r(()=>{t.getLink(h)&&(t.getState().lightbox_id==h&&(u.id=this._lightbox_id,t.getLink(this._lightbox_id)),t.deleteLink(h,!0));});})(c);}}function r(o){t._dp?t._dp.ignore(o):o();}return{tasks:i,links:i};}function xi(t){t.ext||(t.ext={}),t.ext.liveUpdates={RemoteEvents:yi,remoteUpdates:bi(t)};}function $i(t){function n(e){throw t.assert(!1,\"Can't parse data: incorrect value of gantt.parse or gantt.load method. Actual argument value: \"+JSON.stringify(e)),new Error(\"Invalid argument for gantt.parse or gantt.load. An object or a JSON string of format https://docs.dhtmlx.com/gantt/desktop__supported_data_formats.html#json is expected. Actual argument value: \"+JSON.stringify(e));}t.load=function(){throw new Error(\"gantt.load() method is not available in the node.js, use gantt.parse() instead\");},t.parse=function(e,i){this.on_load({xmlDoc:{responseText:e}},i);},t.serialize=function(e){return this[e=e||\"json\"].serialize();},t.on_load=function(e,i){if(e.xmlDoc&&e.xmlDoc.status===404)this.assert(!1,\"Failed to load the data from <a href='\"+e.xmlDoc.responseURL+\"' target='_blank'>\"+e.xmlDoc.responseURL+\"</a>, server returns 404\");else if(!t.$destroyed){this.callEvent(\"onBeforeParse\",[]),i||(i=\"json\"),this.assert(this[i],\"Invalid data type:'\"+i+\"'\");var a=e.xmlDoc.responseText,s=this[i].parse(a,e);this._process_loading(s);}},t._process_loading=function(e){e.collections&&this._load_collections(e.collections),e.resources&&this.$data.resourcesStore&&this.$data.resourcesStore.parse(e.resources),t.config.baselines&&e.baselines&&this.$data.baselineStore&&this.$data.baselineStore.parse(e.baselines);const i=e.data||e.tasks;e.assignments&&function(s,r){const o={};r.forEach(l=>{o[l.task_id]||(o[l.task_id]=[]),o[l.task_id].push(l);}),s.forEach(l=>{l[t.config.resource_property]=o[l.id]||[];});}(i,e.assignments),this.$data.tasksStore.parse(i);var a=e.links||(e.collections&&e.collections.links?e.collections.links:[]);this.$data.linksStore.parse(a),this.callEvent(\"onParse\",[]),this.render();},t._load_collections=function(e){var i=!1;for(var a in e)if(e.hasOwnProperty(a)){i=!0;var s=e[a];this.serverList[a]=this.serverList[a]||[];var r=this.serverList[a];if(!r)continue;r.splice(0,r.length);for(var o=0;o<s.length;o++){var l=s[o],d=this.copy(l);for(var c in d.key=d.value,l)if(l.hasOwnProperty(c)){if(c==\"value\"||c==\"label\")continue;d[c]=l[c];}r.push(d);}}i&&this.callEvent(\"onOptionsLoad\",[]);},t.attachEvent(\"onBeforeTaskDisplay\",function(e,i){return!i.$ignore;}),t.json={parse:function(e){if(e||n(e),typeof e==\"string\")if(typeof JSON!=null)try{e=JSON.parse(e);}catch{n(e);}else t.assert(!1,\"JSON is not supported\");return e.data||e.tasks||n(e),e.dhx_security&&(t.security_key=e.dhx_security),e;},serializeTask:function(e){return this._copyObject(e);},serializeLink:function(e){return this._copyLink(e);},_copyLink:function(e){var i={};for(var a in e)i[a]=e[a];return i;},_copyObject:function(e){var i={};for(var a in e)a.charAt(0)!=\"$\"&&(i[a]=e[a],et(i[a])&&(i[a]=t.defined(t.templates.xml_format)?t.templates.xml_format(i[a]):t.templates.format_date(i[a])));return i;},serialize:function(){var e=[],i=[];let a=[];t.eachTask(function(o){t.resetProjectDates(o),e.push(this.serializeTask(o));},t.config.root_id,this);for(var s=t.getLinks(),r=0;r<s.length;r++)i.push(this.serializeLink(s[r]));return t.getDatastore(\"baselines\").eachItem(function(o){const l=t.json.serializeTask(o);a.push(l);}),{data:e,links:i,baselines:a};}},t.xml={_xmlNodeToJSON:function(e,i){for(var a={},s=0;s<e.attributes.length;s++)a[e.attributes[s].name]=e.attributes[s].value;if(!i){for(s=0;s<e.childNodes.length;s++){var r=e.childNodes[s];r.nodeType==1&&(a[r.tagName]=r.firstChild?r.firstChild.nodeValue:\"\");}a.text||(a.text=e.firstChild?e.firstChild.nodeValue:\"\");}return a;},_getCollections:function(e){for(var i={},a=t.ajax.xpath(\"//coll_options\",e),s=0;s<a.length;s++)for(var r=i[a[s].getAttribute(\"for\")]=[],o=t.ajax.xpath(\".//item\",a[s]),l=0;l<o.length;l++){for(var d=o[l].attributes,c={key:o[l].getAttribute(\"value\"),label:o[l].getAttribute(\"label\")},u=0;u<d.length;u++){var h=d[u];h.nodeName!=\"value\"&&h.nodeName!=\"label\"&&(c[h.nodeName]=h.nodeValue);}r.push(c);}return i;},_getXML:function(e,i,a){a=a||\"data\",i.getXMLTopNode||(i=t.ajax.parse(i));var s=t.ajax.xmltop(a,i.xmlDoc);s&&s.tagName==a||function(o){throw t.assert(!1,\"Can't parse data: incorrect value of gantt.parse or gantt.load method. Actual argument value: \"+JSON.stringify(o)),new Error(\"Invalid argument for gantt.parse or gantt.load. An XML of format https://docs.dhtmlx.com/gantt/desktop__supported_data_formats.html#xmldhtmlxgantt20 is expected. Actual argument value: \"+JSON.stringify(o));}(e);var r=s.getAttribute(\"dhx_security\");return r&&(t.security_key=r),s;},parse:function(e,i){i=this._getXML(e,i);for(var a={},s=a.data=[],r=t.ajax.xpath(\"//task\",i),o=0;o<r.length;o++)s[o]=this._xmlNodeToJSON(r[o]);return a.collections=this._getCollections(i),a;},_copyLink:function(e){return\"<item id='\"+e.id+\"' source='\"+e.source+\"' target='\"+e.target+\"' type='\"+e.type+\"' />\";},_copyObject:function(e){return\"<task id='\"+e.id+\"' parent='\"+(e.parent||\"\")+\"' start_date='\"+e.start_date+\"' duration='\"+e.duration+\"' open='\"+!!e.open+\"' progress='\"+e.progress+\"' end_date='\"+e.end_date+\"'><![CDATA[\"+e.text+\"]]></task>\";},serialize:function(){for(var e=[],i=[],a=t.json.serialize(),s=0,r=a.data.length;s<r;s++)e.push(this._copyObject(a.data[s]));for(s=0,r=a.links.length;s<r;s++)i.push(this._copyLink(a.links[s]));return\"<data>\"+e.join(\"\")+\"<coll_options for='links'>\"+i.join(\"\")+\"</coll_options></data>\";}},t.oldxml={parse:function(e,i){i=t.xml._getXML(e,i,\"projects\");for(var a={collections:{links:[]}},s=a.data=[],r=t.ajax.xpath(\"//task\",i),o=0;o<r.length;o++){s[o]=t.xml._xmlNodeToJSON(r[o]);var l=r[o].parentNode;l.tagName==\"project\"?s[o].parent=\"project-\"+l.getAttribute(\"id\"):s[o].parent=l.parentNode.getAttribute(\"id\");}for(r=t.ajax.xpath(\"//project\",i),o=0;o<r.length;o++)(d=t.xml._xmlNodeToJSON(r[o],!0)).id=\"project-\"+d.id,s.push(d);for(o=0;o<s.length;o++){var d;(d=s[o]).start_date=d.startdate||d.est,d.end_date=d.enddate,d.text=d.name,d.duration=d.duration/8,d.open=1,d.duration||d.end_date||(d.duration=1),d.predecessortasks&&a.collections.links.push({target:d.id,source:d.predecessortasks,type:t.config.links.finish_to_start});}return a;},serialize:function(){t.message(\"Serialization to 'old XML' is not implemented\");}},t.serverList=function(e,i){return i?this.serverList[e]=i.slice(0):this.serverList[e]||(this.serverList[e]=[]),this.serverList[e];};}function de(t,n,e,i,a){return this.date=t,this.unit=n,this.task=e,this.id=i,this.calendar=a,this;}function ce(t,n,e,i,a,s){return this.date=t,this.dir=n,this.unit=e,this.task=i,this.id=a,this.calendar=s,this;}function ue(t,n,e,i,a,s,r){return this.start_date=t,this.duration=n,this.unit=e,this.step=i,this.task=a,this.id=s,this.calendar=r,this;}function wi(t,n,e,i){return this.start_date=t,this.end_date=n,this.task=e,this.calendar=i,this.unit=null,this.step=null,this;}var mn=function(t){return{getWorkHoursArguments:function(){var n=arguments[0];if(!$t((n=et(n)?{date:n}:R({},n)).date))throw t.assert(!1,\"Invalid date argument for getWorkHours method\"),new Error(\"Invalid date argument for getWorkHours method\");return n;},setWorkTimeArguments:function(){return arguments[0];},unsetWorkTimeArguments:function(){return arguments[0];},isWorkTimeArguments:function(){var n,e=arguments[0];if(e instanceof de)return e;if((n=e.date?new de(e.date,e.unit,e.task,null,e.calendar):new de(arguments[0],arguments[1],arguments[2],null,arguments[3])).unit=n.unit||t.config.duration_unit,!$t(n.date))throw t.assert(!1,\"Invalid date argument for isWorkTime method\"),new Error(\"Invalid date argument for isWorkTime method\");return n;},getClosestWorkTimeArguments:function(n){var e,i=arguments[0];if(i instanceof ce)return i;if(e=et(i)?new ce(i):new ce(i.date,i.dir,i.unit,i.task,null,i.calendar),i.id&&(e.task=i),e.dir=i.dir||\"any\",e.unit=i.unit||t.config.duration_unit,!$t(e.date))throw t.assert(!1,\"Invalid date argument for getClosestWorkTime method\"),new Error(\"Invalid date argument for getClosestWorkTime method\");return e;},_getStartEndConfig:function(n){var e,i=wi;if(n instanceof i)return n;if(et(n)?e=new i(arguments[0],arguments[1],arguments[2],arguments[3]):(e=new i(n.start_date,n.end_date,n.task),n.id!==null&&n.id!==void 0&&(e.task=n)),e.unit=e.unit||t.config.duration_unit,e.step=e.step||t.config.duration_step,e.start_date=e.start_date||e.start||e.date,!$t(e.start_date))throw t.assert(!1,\"Invalid start_date argument for getDuration method\"),new Error(\"Invalid start_date argument for getDuration method\");if(!$t(e.end_date))throw t.assert(!1,\"Invalid end_date argument for getDuration method\"),new Error(\"Invalid end_date argument for getDuration method\");return e;},getDurationArguments:function(n,e,i,a){return this._getStartEndConfig.apply(this,arguments);},hasDurationArguments:function(n,e,i,a){return this._getStartEndConfig.apply(this,arguments);},calculateEndDateArguments:function(n,e,i,a){var s,r=arguments[0];if(r instanceof ue)return r;if(s=et(r)?new ue(arguments[0],arguments[1],arguments[2],void 0,arguments[3],void 0,arguments[4]):new ue(r.start_date,r.duration,r.unit,r.step,r.task,null,r.calendar),r.id!==null&&r.id!==void 0&&(s.task=r,s.unit=null,s.step=null),s.unit=s.unit||t.config.duration_unit,s.step=s.step||t.config.duration_step,!$t(s.start_date))throw t.assert(!1,\"Invalid start_date argument for calculateEndDate method\"),new Error(\"Invalid start_date argument for calculateEndDate method\");return s;}};};function vn(){}vn.prototype={_getIntervals:function(t){for(var n=[],e=0;e<t.length;e+=2)n.push({start:t[e],end:t[e+1]});return n;},_toHoursArray:function(t){var n=[];function e(a){var s,r=Math.floor(a/3600),o=a-60*r*60,l=Math.floor(o/60);return r+\":\"+((s=String(l)).length<2&&(s=\"0\"+s),s);}for(var i=0;i<t.length;i++)n.push(e(t[i].start)+\"-\"+e(t[i].end));return n;},_intersectHourRanges:function(t,n){var e=[],i=t.length>n.length?t:n,a=t===i?n:t;i=i.slice(),a=a.slice(),e=[];for(var s=0;s<i.length;s++)for(var r=i[s],o=0;o<a.length;o++){var l=a[o];l.start<r.end&&l.end>r.start&&(e.push({start:Math.max(r.start,l.start),end:Math.min(r.end,l.end)}),r.end>l.end&&(a.splice(o,1),o--,s--));}return e;},_mergeAdjacentIntervals:function(t){var n=t.slice();n.sort(function(s,r){return s.start-r.start;});for(var e=n[0],i=1;i<n.length;i++){var a=n[i];a.start<=e.end?(a.end>e.end&&(e.end=a.end),n.splice(i,1),i--):e=a;}return n;},_mergeHoursConfig:function(t,n){return this._mergeAdjacentIntervals(this._intersectHourRanges(t,n));},merge:function(t,n){const e=X(t.getConfig()),i=X(n.getConfig()),a=e.parsed,s=i.parsed;a.customWeeks=e.customWeeks,s.customWeeks=i.customWeeks;var r={hours:this._toHoursArray(this._mergeHoursConfig(a.hours,s.hours)),dates:{},customWeeks:{}};const o=(d,c)=>{for(let u in d.dates){const h=d.dates[u];+u>1e3&&(r.dates[u]=!1);for(const _ in c.dates){const f=c.dates[_];if(_==u&&(r.dates[u]=!(!h||!f)),Array.isArray(h)){const y=Array.isArray(f)?f:c.hours;r.dates[u]=this._toHoursArray(this._mergeHoursConfig(h,y));}}}};if(o(a,s),o(s,a),a.customWeeks)for(var l in a.customWeeks)r.customWeeks[l]=a.customWeeks[l];if(s.customWeeks)for(var l in s.customWeeks)r.customWeeks[l]?r.customWeeks[l+\"_second\"]=s.customWeeks[l]:r.customWeeks[l]=s.customWeeks[l];return r;}};class Si{constructor(){this.clear();}getItem(n,e,i){if(this._cache.has(n)){const a=this._cache.get(n)[i.getFullYear()];if(a&&a.has(e))return a.get(e);}return-1;}setItem(n,e,i,a){if(!n||!e)return;const s=this._cache,r=a.getFullYear();let o;s.has(n)?o=s.get(n):(o=[],s.set(n,o));let l=o[r];l||(l=o[r]=/* @__PURE__ */new Map()),l.set(e,i);}clear(){this._cache=/* @__PURE__ */new Map();}}class Ti{constructor(){this.clear();}getItem(n,e,i){const a=this._cache;if(a&&a[n]){const s=a[n];if(s===void 0)return-1;const r=s[i.getFullYear()];if(r&&r[e]!==void 0)return r[e];}return-1;}setItem(n,e,i,a){if(!n||!e)return;const s=this._cache;if(!s)return;s[n]||(s[n]=[]);const r=s[n],o=a.getFullYear();let l=r[o];l||(l=r[o]={}),l[e]=i;}clear(){this._cache={};}}class Ci{constructor(n){this.getMinutesPerWeek=e=>{const i=e.valueOf();if(this._weekCache.has(i))return this._weekCache.get(i);const a=this._calendar,s=this._calendar.$gantt;let r=0,o=s.date.week_start(new Date(e));for(let l=0;l<7;l++)r+=60*a.getHoursPerDay(o),o=s.date.add(o,1,\"day\");return this._weekCache.set(i,r),r;},this.getMinutesPerMonth=e=>{const i=e.valueOf();if(this._monthCache.has(i))return this._monthCache.get(i);const a=this._calendar,s=this._calendar.$gantt;let r=0,o=s.date.week_start(new Date(e));const l=s.date.add(o,1,\"month\").valueOf();for(;o.valueOf()<l;)r+=60*a.getHoursPerDay(o),o=s.date.add(o,1,\"day\");return this._monthCache.set(i,r),r;},this.clear=()=>{this._weekCache=/* @__PURE__ */new Map(),this._monthCache=/* @__PURE__ */new Map();},this.clear(),this._calendar=n;}}class Ei{constructor(){this.clear();}_getCacheObject(n,e,i){const a=this._cache;a[e]||(a[e]=[]);let s=a[e];s||(s=a[e]={});let r=s[i];r||(r=s[i]={});const o=n.getFullYear();let l=r[o];return l||(l=r[o]={durations:{},endDates:{}}),l;}_endDateCacheKey(n,e){return String(n)+\"-\"+String(e);}_durationCacheKey(n,e){return String(n)+\"-\"+String(e);}getEndDate(n,e,i,a,s){const r=this._getCacheObject(n,i,a),o=n.valueOf(),l=this._endDateCacheKey(o,e);let d;if(r.endDates[l]===void 0){const c=s(),u=c.valueOf();r.endDates[l]=u,r.durations[this._durationCacheKey(o,u)]=e,d=c;}else d=new Date(r.endDates[l]);return d;}getDuration(n,e,i,a,s){const r=this._getCacheObject(n,i,a),o=n.valueOf(),l=e.valueOf(),d=this._durationCacheKey(o,l);let c;if(r.durations[d]===void 0){const u=s();r.durations[d]=u.valueOf(),c=u;}else c=r.durations[d];return c;}clear(){this._cache={};}}function Te(t,n){this.argumentsHelper=n,this.$gantt=t,this._workingUnitsCache=typeof Map<\"u\"?new Si():new Ti(),this._largeUnitsCache=new Ci(this),this._dateDurationCache=new Ei(),this._worktime=null,this._cached_timestamps={},this._cached_timestamps_count=0;}Te.prototype={units:[\"year\",\"month\",\"week\",\"day\",\"hour\",\"minute\"],_clearCaches:function(){this._workingUnitsCache.clear(),this._largeUnitsCache.clear(),this._dateDurationCache.clear();},_getUnitOrder:function(t){for(var n=0,e=this.units.length;n<e;n++)if(this.units[n]==t)return n;},_resetTimestampCache:function(){this._cached_timestamps={},this._cached_timestamps_count=0;},_timestamp:function(t){this._cached_timestamps_count>1e6&&this._resetTimestampCache();var n=null;if(t.day||t.day===0)n=t.day;else if(t.date){var e=String(t.date.valueOf());this._cached_timestamps[e]?n=this._cached_timestamps[e]:(n=Date.UTC(t.date.getFullYear(),t.date.getMonth(),t.date.getDate()),this._cached_timestamps[e]=n,this._cached_timestamps_count++);}return n;},_checkIfWorkingUnit:function(t,n){if(!this[\"_is_work_\"+n]){const e=this.$gantt.date[`${n}_start`](new Date(t)),i=this.$gantt.date.add(e,1,n);return this.hasDuration(e,i);}return this[\"_is_work_\"+n](t);},_is_work_day:function(t){var n=this._getWorkHours(t);return!!Array.isArray(n)&&n.length>0;},_is_work_hour:function(t){for(var n=this._getWorkHours(t),e=t.getHours(),i=0;i<n.length;i++)if(e>=n[i].startHour&&e<n[i].endHour)return!0;return!1;},_getTimeOfDayStamp:function(t,n){var e=t.getHours();return t.getHours()||t.getMinutes()||!n||(e=24),60*e*60+60*t.getMinutes();},_is_work_minute:function(t){for(var n=this._getWorkHours(t),e=this._getTimeOfDayStamp(t),i=0;i<n.length;i++)if(e>=n[i].start&&e<n[i].end)return!0;return!1;},_nextDate:function(t,n,e){return this.$gantt.date.add(t,e,n);},_getWorkUnitsBetweenGeneric:function(t,n,e,i){var a=this.$gantt.date,s=new Date(t),r=new Date(n);i=i||1;var o,l,d=0,c=null,u=!1;(o=a[e+\"_start\"](new Date(s))).valueOf()!=s.valueOf()&&(u=!0);var h=!1;(l=a[e+\"_start\"](new Date(n))).valueOf()!=n.valueOf()&&(h=!0);for(var _=!1;s.valueOf()<r.valueOf();){if(_=(c=this._nextDate(s,e,i)).valueOf()>r.valueOf(),this._isWorkTime(s,e))(u||h&&_)&&(o=a[e+\"_start\"](new Date(s)),l=a.add(o,i,e)),u?(u=!1,c=this._nextDate(o,e,i),d+=(l.valueOf()-s.valueOf())/(l.valueOf()-o.valueOf())):h&&_?(h=!1,d+=(r.valueOf()-s.valueOf())/(l.valueOf()-o.valueOf())):d++;else{var f=this._getUnitOrder(e),y=this.units[f-1];y&&!this._isWorkTime(s,y)&&(c=this._getClosestWorkTimeFuture(s,y));}s=c;}return d;},_getMinutesPerHour:function(t){var n=this._getTimeOfDayStamp(t),e=this._getTimeOfDayStamp(this._nextDate(t,\"hour\",1));e===0&&(e=86400);for(var i=this._getWorkHours(t),a=0;a<i.length;a++){var s=i[a];if(n>=s.start&&e<=s.end)return 60;if(n<s.end&&e>s.start)return(Math.min(e,s.end)-Math.max(n,s.start))/60;}return 0;},_getMinutesPerDay:function(t){var n=this._getWorkHours(t),e=0;return n.forEach(function(i){e+=i.durationMinutes;}),e;},getHoursPerDay:function(t){var n=this._getWorkHours(t),e=0;return n.forEach(function(i){e+=i.durationHours;}),e;},_getWorkUnitsForRange:function(t,n,e,i){var a,s=0,r=new Date(t),o=new Date(n);for(a=B(e==\"minute\"?this._getMinutesPerDay:this.getHoursPerDay,this);r.valueOf()<o.valueOf();)if(o-r>27648e5&&r.getDate()===0){var l=this._largeUnitsCache.getMinutesPerMonth(r);e==\"hour\"&&(l/=60),s+=l,r=this.$gantt.date.add(r,1,\"month\");}else{if(o-r>13824e5){var d=this.$gantt.date.week_start(new Date(r));if(r.valueOf()===d.valueOf()){l=this._largeUnitsCache.getMinutesPerWeek(r),e==\"hour\"&&(l/=60),s+=l,r=this.$gantt.date.add(r,7,\"day\");continue;}}s+=a(r),r=this._nextDate(r,\"day\",1);}return s/i;},_getMinutesBetweenSingleDay:function(t,n){for(var e=this._getIntervalTimestamp(t,n),i=this._getWorkHours(t),a=0,s=0;s<i.length;s++){var r=i[s];if(e.end>=r.start&&e.start<=r.end){var o=Math.max(r.start,e.start),l=Math.min(r.end,e.end);a+=(l-o)/60,e.start=l;}}return Math.floor(a);},_getMinutesBetween:function(t,n,e,i){var a=new Date(t),s=new Date(n);i=i||1;var r=new Date(a),o=this.$gantt.date.add(this.$gantt.date.day_start(new Date(a)),1,\"day\");if(s.valueOf()<=o.valueOf())return this._getMinutesBetweenSingleDay(t,n);var l=this.$gantt.date.day_start(new Date(s)),d=s,c=this._getMinutesBetweenSingleDay(r,o),u=this._getMinutesBetweenSingleDay(l,d);return c+this._getWorkUnitsForRange(o,l,e,i)+u;},_getHoursBetween:function(t,n,e,i){var a=new Date(t),s=new Date(n);i=i||1;var r=new Date(a),o=this.$gantt.date.add(this.$gantt.date.day_start(new Date(a)),1,\"day\");if(s.valueOf()<=o.valueOf())return Math.round(this._getMinutesBetweenSingleDay(t,n)/60);var l=this.$gantt.date.day_start(new Date(s)),d=s,c=this._getMinutesBetweenSingleDay(r,o,e,i)/60,u=this._getMinutesBetweenSingleDay(l,d,e,i)/60,h=c+this._getWorkUnitsForRange(o,l,e,i)+u;return Math.round(h);},getConfig:function(){return this._worktime;},_setConfig:function(t){this._worktime=t,this._parseSettings(),this._clearCaches();},_parseSettings:function(){var t=this.getConfig();for(var n in t.parsed={dates:{},hours:null,haveCustomWeeks:!1,customWeeks:{},customWeeksRangeStart:null,customWeeksRangeEnd:null,customWeeksBoundaries:[]},t.parsed.hours=this._parseHours(t.hours),t.dates)t.parsed.dates[n]=this._parseHours(t.dates[n]);if(t.customWeeks){var e=null,i=null;for(var n in t.customWeeks){var a=t.customWeeks[n];if(a.from&&a.to){var s=a.from,r=a.to;(!e||e>s.valueOf())&&(e=s.valueOf()),(!i||i<r.valueOf())&&(i=r.valueOf()),t.parsed.customWeeksBoundaries.push({from:s.valueOf(),fromReadable:new Date(s),to:r.valueOf(),toReadable:new Date(r),name:n}),t.parsed.haveCustomWeeks=!0;var o=t.parsed.customWeeks[n]={from:a.from,to:a.to,hours:this._parseHours(a.hours),dates:{}};if(a.days&&!a.dates){for(a.dates=a.dates||{},n=0;n<a.days.length;n++)a.dates[n]=a.days[n],a.days[n]instanceof Array||(a.dates[n]=!!a.days[n]);delete a.days;}for(var l in a.dates)o.dates[l]=this._parseHours(a.dates[l]);}}t.parsed.customWeeksRangeStart=e,t.parsed.customWeeksRangeEnd=i;}},_tryChangeCalendarSettings:function(t){var n=JSON.stringify(this.getConfig());return t(),!!this.hasWorkTime()||(this._setConfig(JSON.parse(n)),this._clearCaches(),!1);},_arraysEqual:function(t,n){if(t===n)return!0;if(!t||!n||t.length!=n.length)return!1;for(var e=0;e<t.length;++e)if(t[e]!==n[e])return!1;return!0;},_compareSettings:function(t,n){if(!this._arraysEqual(t.hours,n.hours))return!1;var e=Object.keys(t.dates),i=Object.keys(n.dates);if(e.sort(),i.sort(),!this._arraysEqual(e,i))return!1;for(var a=0;a<e.length;a++){var s=e[a],r=t.dates[s],o=t.dates[s];if(r!==o&&!(Array.isArray(r)&&Array.isArray(o)&&this._arraysEqual(r,o)))return!1;}return!0;},equals:function(t){if(!(t instanceof Te))return!1;var n=this.getConfig(),e=t.getConfig();if(!this._compareSettings(n,e))return!1;if(n.parsed.haveCustomWeeks&&e.parsed.haveCustomWeeks){if(n.parsed.customWeeksBoundaries.length!=e.parsed.customWeeksBoundaries.length)return!1;for(var i in n.parsed.customWeeks){var a=n.parsed.customWeeks[i],s=e.parsed.customWeeks[i];if(!s||!this._compareSettings(a,s))return!1;}}else if(n.parse.haveCustomWeeks!==e.parsed.haveCustomWeeks)return!1;return!0;},getWorkHours:function(){var t=this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper,arguments);return this._getWorkHours(t.date,!1);},_getWorkHours:function(t,n){var e=this.getConfig();if(n!==!1&&(e=e.parsed),!t)return e.hours;const i=new Date(t.getFullYear(),t.getMonth(),t.getDate());var a=this._timestamp({date:i});if(e.haveCustomWeeks&&e.customWeeksRangeStart<=a&&e.customWeeksRangeEnd>a){for(var s=0;s<e.customWeeksBoundaries.length;s++)if(e.customWeeksBoundaries[s].from<=a&&e.customWeeksBoundaries[s].to>a){e=e.customWeeks[e.customWeeksBoundaries[s].name];break;}}var r=!0;return e.dates[a]!==void 0?r=e.dates[a]:e.dates[t.getDay()]!==void 0&&(r=e.dates[t.getDay()]),r===!0?e.hours:r||[];},_getIntervalTimestamp:function(t,n){var e={start:0,end:0};e.start=60*t.getHours()*60+60*t.getMinutes()+t.getSeconds();var i=n.getHours();return!i&&!n.getMinutes()&&!n.getSeconds()&&t.valueOf()<n.valueOf()&&(i=24),e.end=60*i*60+60*n.getMinutes()+n.getSeconds(),e;},_parseHours:function(t){if(Array.isArray(t)){var n=[];t.forEach(function(o){typeof o==\"number\"?n.push(60*o*60):typeof o==\"string\"&&o.split(\"-\").map(function(l){return l.trim();}).forEach(function(l){var d=l.split(\":\").map(function(u){return u.trim();}),c=parseInt(60*d[0]*60);d[1]&&(c+=parseInt(60*d[1])),d[2]&&(c+=parseInt(d[2])),n.push(c);});});for(var e=[],i=0;i<n.length;i+=2){var a=n[i],s=n[i+1],r=s-a;e.push({start:a,end:s,startHour:Math.floor(a/3600),startMinute:Math.floor(a/60),endHour:Math.ceil(s/3600),endMinute:Math.ceil(s/60),durationSeconds:r,durationMinutes:r/60,durationHours:r/3600});}return e;}return t;},setWorkTime:function(t){return this._tryChangeCalendarSettings(B(function(){var n=t.hours===void 0||t.hours,e=this._timestamp(t),i=this.getConfig();if(e!==null?i.dates[e]=n:t.customWeeks||(i.hours=n),t.customWeeks){if(i.customWeeks||(i.customWeeks={}),typeof t.customWeeks==\"string\")e!==null?i.customWeeks[t.customWeeks].dates[e]=n:t.customWeeks||(i.customWeeks[t.customWeeks].hours=n);else if(typeof t.customWeeks==\"object\"&&t.customWeeks.constructor===Object)for(var a in t.customWeeks)i.customWeeks[a]=t.customWeeks[a];}this._parseSettings(),this._clearCaches();},this));},unsetWorkTime:function(t){return this._tryChangeCalendarSettings(B(function(){if(t){var n=this._timestamp(t);n!==null&&delete this.getConfig().dates[n];}else this.reset_calendar();this._parseSettings(),this._clearCaches();},this));},_isWorkTime:function(t,n){var e,i=-1;return e=String(t.valueOf()),(i=this._workingUnitsCache.getItem(n,e,t))==-1&&(i=this._checkIfWorkingUnit(t,n),this._workingUnitsCache.setItem(n,e,i,t)),i;},isWorkTime:function(){var t=this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper,arguments);return this._isWorkTime(t.date,t.unit);},calculateDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments);if(!t.unit)return!1;var n=this;return this._dateDurationCache.getDuration(t.start_date,t.end_date,t.unit,t.step,function(){return n._calculateDuration(t.start_date,t.end_date,t.unit,t.step);});},_calculateDuration:function(t,n,e,i){var a=0,s=1;if(t.valueOf()>n.valueOf()){var r=n;n=t,t=r,s=-1;}return a=e==\"hour\"&&i==1?this._getHoursBetween(t,n,e,i):e==\"minute\"&&i==1?this._getMinutesBetween(t,n,e,i):this._getWorkUnitsBetweenGeneric(t,n,e,i),s*Math.round(a);},hasDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments),n=t.start_date,e=t.end_date,i=t.unit,a=t.step;if(!i)return!1;var s=new Date(n),r=new Date(e);for(a=a||1;s.valueOf()<r.valueOf();){if(this._isWorkTime(s,i))return!0;s=this._nextDate(s,i,a);}return!1;},calculateEndDate:function(){var t=this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper,arguments),n=t.start_date,e=t.duration,i=t.unit,a=t.step;if(!i)return!1;var s=t.duration>=0?1:-1;e=Math.abs(1*e);var r=this;return this._dateDurationCache.getEndDate(n,e,i,a*s,function(){return r._calculateEndDate(n,e,i,a*s);});},_calculateEndDate:function(t,n,e,i){return!!e&&(i==1&&e==\"minute\"?this._calculateMinuteEndDate(t,n,i):i==-1&&e==\"minute\"?this._subtractMinuteDate(t,n,i):i==1&&e==\"hour\"?this._calculateHourEndDate(t,n,i):this._addInterval(t,n,e,i,null).end);},_addInterval:function(t,n,e,i,a){for(var s=0,r=t,o=!1;s<n&&(!a||!a(r));){var l=this._nextDate(r,e,i);e==\"day\"&&(o=o||!r.getHours()&&l.getHours())&&(l.setHours(0),l.getHours()||(o=!1));var d=new Date(l.valueOf()+1);i>0&&(d=new Date(l.valueOf()-1)),this._isWorkTime(d,e)&&!o&&s++,r=l;}return{end:r,start:t,added:s};},_addHoursUntilDayEnd:function(t,n){for(var e=this.$gantt.date.add(this.$gantt.date.day_start(new Date(t)),1,\"day\"),i=0,a=n,s=this._getIntervalTimestamp(t,e),r=this._getWorkHours(t),o=0;o<r.length&&i<n;o++){var l=r[o];if(s.end>=l.start&&s.start<=l.end){var d=Math.max(l.start,s.start),c=Math.min(l.end,s.end),u=(c-d)/3600;u>a&&(u=a,c=d+60*a*60);var h=Math.round((c-d)/3600);i+=h,a-=h,s.start=c;}}var _=e;return i===n&&(_=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,s.start)),{added:i,end:_};},_calculateHourEndDate:function(t,n,e){var i=new Date(t),a=0;e=e||1,n=Math.abs(1*n);var s=this._addHoursUntilDayEnd(i,n);if(a=s.added,i=s.end,d=n-a){for(var r=i;a<n;){var o=this._nextDate(r,\"day\",e);o.setHours(0),o.setMinutes(0),o.setSeconds(0);var l=0;if(a+(l=e>0?this.getHoursPerDay(new Date(o.valueOf()-1)):this.getHoursPerDay(new Date(o.valueOf()+1)))>=n)break;a+=l,r=o;}i=r;}if(a<n){var d=n-a;i=(s=this._addHoursUntilDayEnd(i,d)).end;}return i;},_addMinutesUntilHourEnd:function(t,n){if(t.getMinutes()===0)return{added:0,end:new Date(t)};for(var e=this.$gantt.date.add(this.$gantt.date.hour_start(new Date(t)),1,\"hour\"),i=0,a=n,s=this._getIntervalTimestamp(t,e),r=this._getWorkHours(t),o=0;o<r.length&&i<n;o++){var l=r[o];if(s.end>=l.start&&s.start<=l.end){var d=Math.max(l.start,s.start),c=Math.min(l.end,s.end),u=(c-d)/60;u>a&&(u=a,c=d+60*a);var h=Math.round((c-d)/60);a-=h,i+=h,s.start=c;}}var _=e;return i===n&&(_=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,s.start)),{added:i,end:_};},_subtractMinutesUntilHourStart:function(t,n){for(var e=this.$gantt.date.hour_start(new Date(t)),i=0,a=n,s=60*e.getHours()*60+60*e.getMinutes()+e.getSeconds(),r=60*t.getHours()*60+60*t.getMinutes()+t.getSeconds(),o=this._getWorkHours(t),l=o.length-1;l>=0&&i<n;l--){var d=o[l];if(r>d.start&&s<=d.end){var c=Math.min(r,d.end),u=Math.max(s,d.start),h=(c-u)/60;h>a&&(h=a,u=c-60*a);var _=Math.abs(Math.round((c-u)/60));a-=_,i+=_,r=u;}}var f=e;return i===n&&(f=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,r)),{added:i,end:f};},_subtractMinuteDate:function(t,n,e){var i=this.getClosestWorkTime({date:t,dir:\"past\",unit:\"minute\"}),a=0;e=e||-1,n=Math.abs(1*n),n=Math.round(n);const s=this._isMinutePrecision(i);let r=this._subtractMinutesUntilHourStart(i,n);a+=r.added,i=r.end;for(var o=0,l=[],d=0;a<n;){var c=this.$gantt.date.day_start(new Date(i)),u=!1;i.valueOf()===c.valueOf()&&(c=this.$gantt.date.add(c,-1,\"day\"),u=!0);var h=new Date(c.getFullYear(),c.getMonth(),c.getDate(),23,59,59,999).valueOf();h!==o&&(l=this._getWorkHours(c),d=this._getMinutesPerDay(c),o=h);var _=n-a,f=this._getTimeOfDayStamp(i,u);if(l.length&&d){if(l[l.length-1].end<=f&&_>d)a+=d,i=this.$gantt.date.add(i,-1,\"day\");else{for(var y=!1,v=null,b=null,m=l.length-1;m>=0;m--)if(l[m].start<f-1&&l[m].end>=f-1){y=!0,v=l[m],b=l[m-1];break;}if(y){if(f===v.end&&_>=v.durationMinutes)a+=v.durationMinutes,i=this.$gantt.date.add(i,-v.durationMinutes,\"minute\");else if(!s&&_<=f/60-v.startMinute)a+=_,i=this.$gantt.date.add(i,-_,\"minute\");else if(s)_<=f/60-v.startMinute?(a+=_,i=this.$gantt.date.add(i,-_,\"minute\")):(a+=f/60-v.startMinute,i=b?new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,b.end):this.$gantt.date.day_start(i));else{var g=this._getMinutesPerHour(i);g<=_?(a+=g,i=this._nextDate(i,\"hour\",e)):(r=this._subtractMinutesUntilHourStart(i,_),a+=r.added,i=r.end);}}else if(i.getHours()===0&&i.getMinutes()===0&&i.getSeconds()===0){if((p=this._getClosestWorkTimePast(i,\"hour\")).valueOf()===i.valueOf()){var p=this.$gantt.date.add(i,-1,\"day\"),k=this._getWorkHours(p);if(k.length){var x=k[k.length-1];p.setSeconds(x.durationSeconds);}}i=p;}else i=this._getClosestWorkTimePast(new Date(i-1),\"hour\");}}else i=this.$gantt.date.add(i,-1,\"day\");}if(a<n){var w=n-a;r=this._subtractMinutesUntilHourStart(i,w),a+=r.added,i=r.end;}return i;},_calculateMinuteEndDate:function(t,n,e){var i=new Date(t),a=0;e=e||1,n=Math.abs(1*n),n=Math.round(n);var s=this._addMinutesUntilHourEnd(i,n);a+=s.added,i=s.end;for(var r=0,o=[],l=0,d=this._isMinutePrecision(i);a<n;){var c=this.$gantt.date.day_start(new Date(i)).valueOf();c!==r&&(o=this._getWorkHours(i),l=this._getMinutesPerDay(i),r=c);var u=n-a,h=this._getTimeOfDayStamp(i);if(o.length&&l){if(o[0].start>=h&&u>=l){if(a+=l,u==l){i=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,o[o.length-1].end);break;}i=this.$gantt.date.add(i,1,\"day\"),i=this.$gantt.date.day_start(i);}else{for(var _=!1,f=null,y=0;y<o.length;y++)if(o[y].start<=h&&o[y].end>h){_=!0,f=o[y];break;}if(_){if(h===f.start&&u>=f.durationMinutes)a+=f.durationMinutes,i=this.$gantt.date.add(i,f.durationMinutes,\"minute\");else if(u<=f.endMinute-h/60)a+=u,i=this.$gantt.date.add(i,u,\"minute\");else{var v=this._getMinutesPerHour(i);v<=u?(a+=v,i=d?this.$gantt.date.add(i,v,\"minute\"):this._nextDate(i,\"hour\",e)):(a+=(s=this._addMinutesUntilHourEnd(i,u)).added,i=s.end);}}else i=this._getClosestWorkTimeFuture(i,\"hour\");}}else i=this.$gantt.date.add(this.$gantt.date.day_start(i),1,\"day\");}if(a<n){var b=n-a;a+=(s=this._addMinutesUntilHourEnd(i,b)).added,i=s.end;}return i;},getClosestWorkTime:function(){var t=this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper,arguments);return this._getClosestWorkTime(t.date,t.unit,t.dir);},_getClosestWorkTime:function(t,n,e){var i=new Date(t);if(this._isWorkTime(i,n))return i;if(i=this.$gantt.date[n+\"_start\"](i),e!=\"any\"&&e)i=e==\"past\"?this._getClosestWorkTimePast(i,n):this._getClosestWorkTimeFuture(i,n);else{var a=this._getClosestWorkTimeFuture(i,n),s=this._getClosestWorkTimePast(i,n);i=Math.abs(a-t)<=Math.abs(t-s)?a:s;}return i;},_getClosestWorkTimeFuture:function(t,n){return this._getClosestWorkTimeGeneric(t,n,1);},_getClosestWorkTimePast:function(t,n){var e=this._getClosestWorkTimeGeneric(t,n,-1);return this.$gantt.date.add(e,1,n);},_findClosestTimeInDay:function(t,n,e){var i=new Date(t),a=null,s=!1;this._getWorkHours(i).length||(i=this._getClosestWorkTime(i,\"day\",n<0?\"past\":\"future\"),n<0&&(i=new Date(i.valueOf()-1),s=!0),e=this._getWorkHours(i));var r=this._getTimeOfDayStamp(i);if(s&&(r=this._getTimeOfDayStamp(new Date(i.valueOf()+1),s)),n>0){for(var o=0;o<e.length;o++)if(e[o].start>=r){a=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,e[o].start);break;}}else for(o=e.length-1;o>=0;o--){if(e[o].end<=r){a=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,e[o].end);break;}if(e[o].end>r&&e[o].start<=r){a=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,r);break;}}return a;},_getClosestWorkMinute:function(t,n,e){var i=new Date(t),a=this._getWorkHours(i),s=this._findClosestTimeInDay(i,e,a);return s||(e>0?(i=this.calculateEndDate(i,e,n),i=this.$gantt.date.day_start(i)):(i=this.calculateEndDate(i,e,\"day\"),i=this.$gantt.date.day_start(i),i=this.$gantt.date.add(i,1,\"day\"),i=new Date(i.valueOf()-1)),a=this._getWorkHours(i),s=this._findClosestTimeInDay(i,e,a)),e<0&&(s=this.$gantt.date.add(s,-1,n)),s;},_getClosestWorkTimeGeneric:function(t,n,e){if(n===\"hour\"||n===\"minute\")return this._getClosestWorkMinute(t,n,e);for(var i=this._getUnitOrder(n),a=this.units[i-1],s=t,r=0;!this._isWorkTime(s,n)&&(!a||this._isWorkTime(s,a)||(s=e>0?this._getClosestWorkTimeFuture(s,a):this._getClosestWorkTimePast(s,a),!this._isWorkTime(s,n)));){if(++r>3e3)return this.$gantt.assert(!1,\"Invalid working time check\"),!1;var o=s.getTimezoneOffset();s=this.$gantt.date.add(s,e,n),s=this.$gantt._correct_dst_change(s,o,e,n),this.$gantt.date[n+\"_start\"]&&(s=this.$gantt.date[n+\"_start\"](s));}return s;},hasWorkTime:function(){var t=this.getConfig(),n=t.dates;for(var e in t.dates);var i=this._checkWorkHours(t.hours),a=!1;return[0,1,2,3,4,5,6].forEach(function(s){if(!a){var r=n[s];r===!0?a=i:Array.isArray(r)&&(a=this._checkWorkHours(r));}}.bind(this)),a;},_checkWorkHours:function(t){if(t.length===0)return!1;for(var n=!1,e=0;e<t.length;e+=2)t[e]!==t[e+1]&&(n=!0);return n;},_isMinutePrecision:function(t){let n=!1;return this._getWorkHours(t).forEach(function(e){(e.startMinute%60||e.endMinute%60)&&(n=!0);}),n;}};const Nt={isLegacyResourceCalendarFormat:function(t){if(!t)return!1;for(var n in t)if(t[n]&&typeof t[n]==\"object\")return!0;return!1;},getResourceProperty:function(t){var n=t.resource_calendars,e=t.resource_property;if(this.isLegacyResourceCalendarFormat(n))for(var i in t){e=i;break;}return e;},getCalendarIdFromLegacyConfig:function(t,n){if(n)for(var e in n){var i=n[e];if(t[e]){var a=i[t[e]];if(a)return a;}}return null;}},Di=(Ft={},{getCalendarIdFromMultipleResources:function(t,n){var e=function(a){return a.map(function(s){return s&&s.resource_id?s.resource_id:s;}).sort().join(\"-\");}(t);if(t.length){if(t.length===1)return n.getResourceCalendar(e).id;if(Ft[e])return Ft[e].id;var i=function(a,s){return s.mergeCalendars(a.map(function(r){var o=r&&r.resource_id?r.resource_id:r;return s.getResourceCalendar(o);}));}(t,n);return Ft[e]=i,n.addCalendar(i);}return null;}});var Ft;function kn(t){this.$gantt=t,this._calendars={},this._legacyConfig=void 0,this.$gantt.attachEvent(\"onGanttReady\",function(){this.$gantt.config.resource_calendars&&(this._isLegacyConfig=Nt.isLegacyResourceCalendarFormat(this.$gantt.config.resource_calendars));}.bind(this)),this.$gantt.attachEvent(\"onBeforeGanttReady\",function(){this.createDefaultCalendars();}.bind(this)),this.$gantt.attachEvent(\"onBeforeGanttRender\",function(){this.createDefaultCalendars();}.bind(this));}function Ce(t,n){this.argumentsHelper=n,this.$gantt=t;}function yn(t){this.$gantt=t.$gantt,this.argumentsHelper=mn(this.$gantt),this.calendarManager=t,this.$disabledCalendar=new Ce(this.$gantt,this.argumentsHelper);}kn.prototype={_calendars:{},_convertWorkTimeSettings:function(t){const n=t.days;if(typeof n!=\"object\"||Array.isArray(n)||n===null){if(n&&!t.dates){t.dates=t.dates||{};for(let e=0;e<n.length;e++)t.dates[e]=n[e],n[e]instanceof Array||(t.dates[e]=!!n[e]);}}else{const e={};if(n!=null&&n.weekdays)for(let i=0;i<7;i++)e[i]=n.weekdays[i];n!=null&&n.dates&&Object.entries(n.dates).forEach(([i,a])=>{e[new Date(i).valueOf()]=a;}),Object.entries(e).forEach(([i,a])=>{a instanceof Array||(e[i]=!!a);}),t={...t,dates:e};}return delete t.days,t;},mergeCalendars:function(){var t=[],n=arguments;if(Array.isArray(n[0]))t=n[0].slice();else for(var e=0;e<arguments.length;e++)t.push(arguments[e]);var i,a=new vn();return t.forEach(function(s){i=i?this._createCalendarFromConfig(a.merge(i,s)):s;}.bind(this)),this.createCalendar(i);},_createCalendarFromConfig:function(t){var n=new Te(this.$gantt,mn(this.$gantt));n.id=String(ot());var e=this._convertWorkTimeSettings(t);if(e.customWeeks)for(var i in e.customWeeks)e.customWeeks[i]=this._convertWorkTimeSettings(e.customWeeks[i]);return n._setConfig(e),n;},createCalendar:function(t){var n;return t||(t={}),R(n=t.getConfig?X(t.getConfig()):t.worktime?X(t.worktime):X(t),X(this.defaults.fulltime.worktime)),this._createCalendarFromConfig(n);},getCalendar:function(t){t=t||\"global\";var n=this._calendars[t];return n||(this.createDefaultCalendars(),n=this._calendars[t]),n;},getCalendars:function(){var t=[];for(var n in this._calendars)t.push(this.getCalendar(n));return t;},_getOwnCalendar:function(t){var n=this.$gantt.config;if(t[n.calendar_property])return this.getCalendar(t[n.calendar_property]);if(n.resource_calendars){var e;if(e=this._legacyConfig===!1?n.resource_property:Nt.getResourceProperty(n),Array.isArray(t[e])&&t[e].length)n.dynamic_resource_calendars?i=Di.getCalendarIdFromMultipleResources(t[e],this):a=this.getResourceCalendar(t[e]);else if(this._legacyConfig===void 0&&(this._legacyConfig=Nt.isLegacyResourceCalendarFormat(n.resource_calendars)),this._legacyConfig)var i=Nt.getCalendarIdFromLegacyConfig(t,n.resource_calendars);else if(e&&t[e]&&n.resource_calendars[t[e]])var a=this.getResourceCalendar(t[e]);if(i&&(a=this.getCalendar(i)),a)return a;}return null;},getResourceCalendar:function(t){if(t==null)return this.getCalendar();var n=null;n=typeof t==\"number\"||typeof t==\"string\"?t:t.id||t.key;var e=this.$gantt.config,i=e.resource_calendars,a=null;if(Array.isArray(t)&&t.length===1&&(n=typeof t[0]==\"object\"?t[0].resource_id:t[0]),i){if(this._legacyConfig===void 0&&(this._legacyConfig=Nt.isLegacyResourceCalendarFormat(e.resource_calendars)),this._legacyConfig){for(var s in i)if(i[s][n]){a=i[s][n];break;}}else a=i[n];if(a)return this.getCalendar(a);}return this.getCalendar();},getTaskCalendar:function(t){var n,e=this.$gantt;if(t==null)return this.getCalendar();if(!(n=typeof t!=\"number\"&&typeof t!=\"string\"||!e.isTaskExists(t)?t:e.getTask(t)))return this.getCalendar();var i=this._getOwnCalendar(n),a=!!e.getState().group_mode;if(!i&&e.config.inherit_calendar&&e.isTaskExists(n.parent)){for(var s=n;e.isTaskExists(s.parent)&&(s=e.getTask(s.parent),!e.isSummaryTask(s)||!(i=this._getOwnCalendar(s))););a&&!i&&t.$effective_calendar&&(i=this.getCalendar(t.$effective_calendar));}return i||this.getCalendar();},addCalendar:function(t){if(!this.isCalendar(t)){var n=t.id;(t=this.createCalendar(t)).id=n;}if(t._tryChangeCalendarSettings(function(){})){var e=this.$gantt.config;return t.id=t.id||ot(),this._calendars[t.id]=t,e.worktimes||(e.worktimes={}),e.worktimes[t.id]=t.getConfig(),t.id;}return this.$gantt.callEvent(\"onCalendarError\",[{message:\"Invalid calendar settings, no worktime available\"},t]),null;},deleteCalendar:function(t){var n=this.$gantt.config;return!!t&&!!this._calendars[t]&&(delete this._calendars[t],n.worktimes&&n.worktimes[t]&&delete n.worktimes[t],!0);},restoreConfigCalendars:function(t){for(var n in t)if(!this._calendars[n]){var e=t[n],i=this.createCalendar(e);i.id=n,this.addCalendar(i);}},defaults:{global:{id:\"global\",worktime:{hours:[8,12,13,17],days:[0,1,1,1,1,1,0]}},fulltime:{id:\"fulltime\",worktime:{hours:[0,24],days:[1,1,1,1,1,1,1]}}},createDefaultCalendars:function(){var t=this.$gantt.config;this.restoreConfigCalendars(this.defaults),this.restoreConfigCalendars(t.worktimes);},isCalendar:function(t){return[t.isWorkTime,t.setWorkTime,t.getWorkHours,t.unsetWorkTime,t.getClosestWorkTime,t.calculateDuration,t.hasDuration,t.calculateEndDate].every(function(n){return n instanceof Function;});}},Ce.prototype={getWorkHours:function(){return[0,24];},setWorkTime:function(){return!0;},unsetWorkTime:function(){return!0;},isWorkTime:function(){return!0;},getClosestWorkTime:function(t){return this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper,arguments).date;},calculateDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments),n=t.start_date,e=t.end_date,i=t.unit,a=t.step;return this._calculateDuration(n,e,i,a);},_calculateDuration:function(t,n,e,i){var a=this.$gantt.date,s={week:6048e5,day:864e5,hour:36e5,minute:6e4},r=0;if(s[e])r=Math.round((n-t)/(i*s[e]));else{for(var o=new Date(t),l=new Date(n);o.valueOf()<l.valueOf();)r+=1,o=a.add(o,i,e);o.valueOf()!=n.valueOf()&&(r+=(l-o)/(a.add(o,i,e)-o));}return Math.round(r);},hasDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments),n=t.start_date,e=t.end_date;return!!t.unit&&(n=new Date(n),e=new Date(e),n.valueOf()<e.valueOf());},hasWorkTime:function(){return!0;},equals:function(t){return t instanceof Ce;},calculateEndDate:function(){var t=this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper,arguments),n=t.start_date,e=t.duration,i=t.unit,a=t.step;return this.$gantt.date.add(n,a*e,i);}},yn.prototype={_getCalendar:function(t){var n;if(this.$gantt.config.work_time){var e=this.calendarManager;t.task?n=e.getTaskCalendar(t.task):t.id?n=e.getTaskCalendar(t):t.calendar&&(n=t.calendar),n||(n=e.getTaskCalendar());}else n=this.$disabledCalendar;return n;},getWorkHours:function(t){return t=this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper,arguments),this._getCalendar(t).getWorkHours(t.date);},setWorkTime:function(t,n){return t=this.argumentsHelper.setWorkTimeArguments.apply(this.argumentsHelper,arguments),n||(n=this.calendarManager.getCalendar()),n.setWorkTime(t);},unsetWorkTime:function(t,n){return t=this.argumentsHelper.unsetWorkTimeArguments.apply(this.argumentsHelper,arguments),n||(n=this.calendarManager.getCalendar()),n.unsetWorkTime(t);},isWorkTime:function(t,n,e,i){var a=this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper,arguments);return(i=this._getCalendar(a)).isWorkTime(a);},getClosestWorkTime:function(t){return t=this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper,arguments),this._getCalendar(t).getClosestWorkTime(t);},calculateDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments);return this._getCalendar(t).calculateDuration(t);},hasDuration:function(){var t=this.argumentsHelper.hasDurationArguments.apply(this.argumentsHelper,arguments);return this._getCalendar(t).hasDuration(t);},calculateEndDate:function(t){return t=this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper,arguments),this._getCalendar(t).calculateEndDate(t);}};const Ai=function(t,n){return{getWorkHours:function(e){return n.getWorkHours(e);},setWorkTime:function(e){return n.setWorkTime(e);},unsetWorkTime:function(e){n.unsetWorkTime(e);},isWorkTime:function(e,i,a){return n.isWorkTime(e,i,a);},getClosestWorkTime:function(e){return n.getClosestWorkTime(e);},calculateDuration:function(e,i,a){return n.calculateDuration(e,i,a);},_hasDuration:function(e,i,a){return n.hasDuration(e,i,a);},calculateEndDate:function(e,i,a,s){return n.calculateEndDate(e,i,a,s);},mergeCalendars:B(t.mergeCalendars,t),createCalendar:B(t.createCalendar,t),addCalendar:B(t.addCalendar,t),getCalendar:B(t.getCalendar,t),getCalendars:B(t.getCalendars,t),getResourceCalendar:B(t.getResourceCalendar,t),getTaskCalendar:B(t.getTaskCalendar,t),deleteCalendar:B(t.deleteCalendar,t)};};function Ii(t){t.isUnscheduledTask=function(r){return t.assert(r&&r instanceof Object,\"Invalid argument <b>task</b>=\"+r+\" of gantt.isUnscheduledTask. Task object was expected\"),!!r.unscheduled||!r.start_date;},t._isAllowedUnscheduledTask=function(r){return!(!r.unscheduled||!t.config.show_unscheduled);},t._isTaskInTimelineLimits=function(r){var o=r.start_date?r.start_date.valueOf():null,l=r.end_date?r.end_date.valueOf():null;return!!(o&&l&&o<=this._max_date.valueOf()&&l>=this._min_date.valueOf());},t.isTaskVisible=function(r){if(!this.isTaskExists(r))return!1;var o=this.getTask(r);return!(!this._isAllowedUnscheduledTask(o)&&!this._isTaskInTimelineLimits(o))&&this.getGlobalTaskIndex(r)>=0;},t._getProjectEnd=function(){if(t.config.project_end)return t.config.project_end;var r=t.getTaskByTime();return(r=r.sort(function(o,l){return+o.end_date>+l.end_date?1:-1;})).length?r[r.length-1].end_date:null;},t._getProjectStart=function(){if(t.config.project_start)return t.config.project_start;if(t.config.start_date)return t.config.start_date;if(t.getState().min_date)return t.getState().min_date;var r=t.getTaskByTime();return(r=r.sort(function(o,l){return+o.start_date>+l.start_date?1:-1;})).length?r[0].start_date:null;};var n=function(r,o){var l=!!(o&&o!=t.config.root_id&&t.isTaskExists(o))&&t.getTask(o),d=null;if(l){if(t._getAutoSchedulingConfig().schedule_from_end)d=t.calculateEndDate({start_date:l.end_date,duration:-t.config.duration_step,task:r});else{if(!l.start_date)return n(l,t.getParent(l));d=l.start_date;}}else if(t._getAutoSchedulingConfig().schedule_from_end)d=t.calculateEndDate({start_date:t._getProjectEnd(),duration:-t.config.duration_step,task:r});else{const c=t.getTaskByIndex(0),u=t.config.start_date||t.getState().min_date;d=c?c.start_date?c.start_date:c.end_date?t.calculateEndDate({start_date:c.end_date,duration:-t.config.duration_step,task:r}):u:u;}return t.assert(d,\"Invalid dates\"),new Date(d);};t._set_default_task_timing=function(r){r.start_date=r.start_date||n(r,t.getParent(r)),r.duration=r.duration||t.config.duration_step,r.end_date=r.end_date||t.calculateEndDate(r);},t.createTask=function(r,o,l){if(r=r||{},t.defined(r.id)||(r.id=t.uid()),r.start_date||(r.start_date=n(r,o)),r.text===void 0&&(r.text=t.locale.labels.new_task),r.duration===void 0&&(r.duration=1),this.isTaskExists(o)){this.setParent(r,o,!0);var d=this.getTask(o);d.$open=!0,this.config.details_on_create||this.callEvent(\"onAfterParentExpand\",[o,d]);}return this.callEvent(\"onTaskCreated\",[r])?(this.config.details_on_create?(t.isTaskExists(r.id)?t.getTask(r.id).$index!=r.$index&&(r.start_date&&typeof r.start_date==\"string\"&&(r.start_date=this.date.parseDate(r.start_date,\"parse_date\")),r.end_date&&typeof r.end_date==\"string\"&&(r.end_date=this.date.parseDate(r.end_date,\"parse_date\")),this.$data.tasksStore.updateItem(r.id,r)):(r.$new=!0,this.silent(function(){t.$data.tasksStore.addItem(r,l);})),this.selectTask(r.id),this.refreshData(),this.showLightbox(r.id)):this.addTask(r,o,l)&&(this.showTask(r.id),this.selectTask(r.id)),r.id):null;},t._update_flags=function(r,o){var l=t.$data.tasksStore;r===void 0?(this._lightbox_id=null,l.silent(function(){l.unselect();}),this.getSelectedTasks&&this._multiselect.reset(),this._tasks_dnd&&this._tasks_dnd.drag&&(this._tasks_dnd.drag.id=null)):(this._lightbox_id==r&&(this._lightbox_id=o),l.getSelectedId()==r&&l.silent(function(){l.unselect(r),l.select(o);}),this._tasks_dnd&&this._tasks_dnd.drag&&this._tasks_dnd.drag.id==r&&(this._tasks_dnd.drag.id=o));};var e=function(r,o){var l=t.getTaskType(r.type),d={type:l,$no_start:!1,$no_end:!1,scheduled_summary:!1};return l===t.config.types.project&&r.auto_scheduling===!1&&(d.scheduled_summary=!0),o||l!=r.$rendered_type?(l==t.config.types.project?d.$no_end=d.$no_start=!0:l!=t.config.types.milestone&&(d.$no_end=!(r.end_date||r.duration),d.$no_start=!r.start_date,t._isAllowedUnscheduledTask(r)&&(d.$no_end=d.$no_start=!1)),d):(d.$no_start=r.$no_start,d.$no_end=r.$no_end,d);};function i(r){r.$effective_calendar=t.getTaskCalendar(r).id,r.start_date=t.getClosestWorkTime({dir:\"future\",date:r.start_date,unit:t.config.duration_unit,task:r}),r.end_date=t.calculateEndDate(r);}function a(r,o,l,d){const c={start:\"start_date\",end:\"end_date\"},u={start:\"$auto_start_date\",end:\"$auto_end_date\"};let h;h=r.type===t.config.types.project&&r.auto_scheduling===!1?u:c,o.$no_start&&(r[h.start]=l?new Date(l):n(r,this.getParent(r))),o.$no_end&&(r[h.end]=d?new Date(d):this.calculateEndDate({start_date:r[h.start],duration:this.config.duration_step,task:r})),(o.$no_start||o.$no_end)&&this._init_task_timing(r);}function s(r){let o=null,l=null,d=r!==void 0?r:t.config.root_id;const c=[],u=[];let h=null;return t.isTaskExists(d)&&(h=t.getTask(d)),t.eachTask(function(_){const f=t.getTaskType(_.type)==t.config.types.project&&_.auto_scheduling===!1;t.getTaskType(_.type)==t.config.types.project&&!f||t.isUnscheduledTask(_)||(_.rollup&&c.push(_.id),!_.start_date||_.$no_start&&!f||o&&!(o>_.start_date.valueOf())||(o=_.start_date.valueOf()),!_.end_date||_.$no_end&&!f||l&&!(l<_.end_date.valueOf())||(l=_.end_date.valueOf()),h&&h.render==\"split\"&&(_.split_placement===\"inline\"?u.push(_):_.split_placement===\"subrow\"||h.$open&&t.config.open_split_tasks||u.push(_)));},d),{start_date:o?new Date(o):null,end_date:l?new Date(l):null,rollup:c,splitItems:u};}t._init_task_timing=function(r){var o=e(r,!0),l=r.$rendered_type!=o.type,d=o.type;l&&(r.$no_start=o.$no_start,r.$no_end=o.$no_end,r.$rendered_type=o.type),l&&d!=this.config.types.milestone&&d==this.config.types.project&&(this._set_default_task_timing(r),r.$calculate_duration=!1),d==this.config.types.milestone&&(r.end_date=r.start_date),r.start_date&&r.end_date&&r.$calculate_duration!==!1&&(r.duration=this.calculateDuration(r)),r.$calculate_duration||(r.$calculate_duration=!0),r.end_date||(r.end_date=r.start_date),r.duration=r.duration||0,this.config.min_duration===0&&r.duration===0&&(r.$no_end=!1,r.type===t.config.types.project&&t.hasChild(r.id)&&(r.$no_end=!0));var c=this.getTaskCalendar(r);r.$effective_calendar&&r.$effective_calendar!==c.id&&(i(r),this.config.inherit_calendar&&this.isSummaryTask(r)&&this.eachTask(function(u){i(u);},r.id)),r.$effective_calendar=c.id;},t.isSummaryTask=function(r){t.assert(r&&r instanceof Object,\"Invalid argument <b>task</b>=\"+r+\" of gantt.isSummaryTask. Task object was expected\");var o=e(r);return!(!o.$no_end&&!o.$no_start);},t.resetProjectDates=function(r){var o=e(r);if(o.$no_end||o.$no_start){var l=s(r.id);a.call(this,r,o,l.start_date,l.end_date),r.$rollup=l.rollup,r.$inlineSplit=l.splitItems;}},t.getSubtaskDuration=function(r){var o=0,l=r!==void 0?r:t.config.root_id;return this.eachTask(function(d){this.getTaskType(d.type)==t.config.types.project||this.isUnscheduledTask(d)||(o+=d.duration);},l),o;},t.getSubtaskDates=function(r){var o=s(r);return{start_date:o.start_date,end_date:o.end_date};},t._update_parents=function(r,o,l){if(r){var d=this.getTask(r);d.rollup&&(l=!0);var c=this.getParent(d),u=e(d),h=!0;if(l||d.start_date&&d.end_date&&(u.$no_start||u.$no_end)){const y=d.$auto_start_date?\"$auto_start_date\":\"start_date\",v=d.$auto_end_date?\"$auto_end_date\":\"end_date\";var _=d[y].valueOf(),f=d[v].valueOf();t.resetProjectDates(d),l||_!=d[y].valueOf()||f!=d[v].valueOf()||(h=!1),h&&!o&&this.refreshTask(d.id,!0),u.scheduled_summary&&(h=!0);}h&&c&&this.isTaskExists(c)&&this._update_parents(c,o,l);}},t.roundDate=function(r){var o=t.getScale();et(r)&&(r={date:r,unit:o?o.unit:t.config.duration_unit,step:o?o.step:t.config.duration_step});var l,d,c,u=r.date,h=r.step,_=r.unit;if(!o)return u;if(_==o.unit&&h==o.step&&+u>=+o.min_date&&+u<=+o.max_date)c=Math.floor(t.columnIndexByDate(u)),o.trace_x[c]||(c-=1,o.rtl&&(c=0)),d=new Date(o.trace_x[c]),l=t.date.add(d,h,_);else{for(c=Math.floor(t.columnIndexByDate(u)),l=t.date[_+\"_start\"](new Date(o.min_date)),o.trace_x[c]&&(l=t.date[_+\"_start\"](o.trace_x[c]));+l<+u;){var f=(l=t.date[_+\"_start\"](t.date.add(l,h,_))).getTimezoneOffset();l=t._correct_dst_change(l,f,l,_),t.date[_+\"_start\"]&&(l=t.date[_+\"_start\"](l));}d=t.date.add(l,-1*h,_);}return r.dir&&r.dir==\"future\"?l:r.dir&&r.dir==\"past\"||Math.abs(u-d)<Math.abs(l-u)?d:l;},t.correctTaskWorkTime=function(r){t.config.work_time&&t.config.correct_work_time&&(this.isWorkTime(r.start_date,void 0,r)?this.isWorkTime(new Date(+r.end_date-1),void 0,r)||(r.end_date=this.calculateEndDate(r)):(r.start_date=this.getClosestWorkTime({date:r.start_date,dir:\"future\",task:r}),r.end_date=this.calculateEndDate(r)));},t.attachEvent(\"onBeforeTaskUpdate\",function(r,o){return t._init_task_timing(o),!0;}),t.attachEvent(\"onBeforeTaskAdd\",function(r,o){return t._init_task_timing(o),!0;}),t.attachEvent(\"onAfterTaskMove\",function(r,o,l){return t._init_task_timing(t.getTask(r)),!0;});}function je(t,n){var e,i=t.config.container_resize_timeout||20;let a=We(t);if(t.config.container_resize_method==\"timeout\")l();else try{t.event(n,\"resize\",function(){if(t.$scrollbarRepaint)t.$scrollbarRepaint=null;else{let d=We(t);if(a.x==d.x&&a.y==d.y)return;a=d,s();}});}catch{l();}function s(){clearTimeout(e),e=setTimeout(function(){t.$destroyed||t.render();},i);}var r=t.$root.offsetHeight,o=t.$root.offsetWidth;function l(){t.$root.offsetHeight==r&&t.$root.offsetWidth==o||s(),r=t.$root.offsetHeight,o=t.$root.offsetWidth,setTimeout(l,i);}}function We(t){return{x:t.$root.offsetWidth,y:t.$root.offsetHeight};}function Mi(t){t.assert=/* @__PURE__ */function(s){return function(r,o){r||s.config.show_errors&&s.callEvent(\"onError\",[o])!==!1&&(s.message?s.message({type:\"error\",text:o,expire:-1}):console.log(o));};}(t);var n=\"Invalid value of the first argument of `gantt.init`. Supported values: HTMLElement, String (element id).This error means that either invalid object is passed into `gantt.init` or that the element with the specified ID doesn't exist on the page when `gantt.init` is called.\";function e(s){if(!s||typeof s==\"string\"&&document.getElementById(s)||function(r){try{r.cloneNode(!1);}catch{return!1;}return!0;}(s))return!0;throw t.assert(!1,n),new Error(n);}t.init=function(s,r,o){t.env.isNode?s=null:e(s),r&&o&&(this.config.start_date=this._min_date=new Date(r),this.config.end_date=this._max_date=new Date(o)),this.date.init(),this.init=function(l){t.env.isNode?l=null:e(l),this.$container&&this.$container.parentNode&&(this.$container.parentNode.removeChild(this.$container),this.$container=null),this.$layout&&this.$layout.clear(),this._reinit(l);},this._reinit(s);},t._quickRefresh=function(s){for(var r=this._getDatastores.call(this),o=0;o<r.length;o++)r[o]._quick_refresh=!0;for(s(),o=0;o<r.length;o++)r[o]._quick_refresh=!1;};var i=function(){this._clearTaskLayers&&this._clearTaskLayers(),this._clearLinkLayers&&this._clearLinkLayers(),this.$layout&&(this.$layout.destructor(),this.$layout=null,this.$ui.reset());}.bind(t),a=function(){G(t)||(this.$root.innerHTML=\"\",this.$root.gantt=this,$e(this),this.config.layout.id=\"main\",this.$layout=this.$ui.createView(\"layout\",this.$root,this.config.layout),this.$layout.attachEvent(\"onBeforeResize\",function(){for(var s=t.$services.getService(\"datastores\"),r=0;r<s.length;r++)t.getDatastore(s[r]).filter(),t.$data.tasksStore._skipTaskRecalculation?t.$data.tasksStore._skipTaskRecalculation!=\"lightbox\"&&(t.$data.tasksStore._skipTaskRecalculation=!1):t.getDatastore(s[r]).callEvent(\"onBeforeRefreshAll\",[]);}),this.$layout.attachEvent(\"onResize\",function(){t._quickRefresh(function(){t.refreshData();});}),this.callEvent(\"onGanttLayoutReady\",[]),this.$layout.render(),this.$container=this.$layout.$container.firstChild,function(s){window.getComputedStyle(s.$root).getPropertyValue(\"position\")==\"static\"&&(s.$root.style.position=\"relative\");var r=document.createElement(\"iframe\");r.className=\"gantt_container_resize_watcher\",r.tabIndex=-1,s.config.wai_aria_attributes&&(r.setAttribute(\"role\",\"none\"),r.setAttribute(\"aria-hidden\",!0)),s.env.isSalesforce&&(s.config.container_resize_method=\"timeout\"),s.$root.appendChild(r),r.contentWindow?je(s,r.contentWindow):(s.$root.removeChild(r),je(s,window));}(this));}.bind(t);t.resetLayout=function(){i(),a(),this.render();},t._reinit=function(s){this.callEvent(\"onBeforeGanttReady\",[]),this._update_flags(),this.$services.getService(\"templateLoader\").initTemplates(this),i(),this.$root=null,s&&(this.$root=De(s),a(),this.$mouseEvents.reset(this.$root),function(r){r.$container&&!r.config.autosize&&r.$root.offsetHeight<50&&console.warn(`The Gantt container has a small height, so you cannot see its content. If it is not intended, you need to set the 'height' style rule to the container:\nhttps://docs.dhtmlx.com/gantt/faq.html#theganttchartisntrenderedcorrectly`);}(t)),this.callEvent(\"onTemplatesReady\",[]),this.callEvent(\"onGanttReady\",[]),this.render();},t.$click={buttons:{edit:function(s){t.isReadonly(t.getTask(s))||t.showLightbox(s);},delete:function(s){var r=t.getTask(s);if(!t.isReadonly(r)){var o=t.locale.labels.confirm_deleting,l=t.locale.labels.confirm_deleting_title;t._delete_task_confirm({task:r,message:o,title:l,callback:function(){t.isTaskExists(s)&&(r.$new?(t.$data.tasksStore._skipTaskRecalculation=\"lightbox\",t.silent(function(){t.deleteTask(s,!0);}),t.$data.tasksStore._skipTaskRecalculation=!1,t.refreshData()):(t.$data.tasksStore._skipTaskRecalculation=!0,t.deleteTask(s))),t.hideLightbox();}});}}}},t.render=function(){var s;if(this.callEvent(\"onBeforeGanttRender\",[]),!G(t)){!this.config.sort&&this._sort&&(this._sort=void 0),this.$root&&(this.config.rtl?(this.$root.classList.add(\"gantt_rtl\"),this.$root.firstChild.classList.add(\"gantt_rtl\")):(this.$root.classList.remove(\"gantt_rtl\"),this.$root.firstChild.classList.remove(\"gantt_rtl\")));var r=this.getScrollState(),o=r?r.x:0;this._getHorizontalScrollbar()&&(o=this._getHorizontalScrollbar().$config.codeScrollLeft||o||0),s=null,o&&(s=t.dateFromPos(o+this.config.task_scroll_offset));}if($e(this),G(t))t.refreshData();else{this.$layout.$config.autosize=this.config.autosize;var l=this.config.preserve_scroll;if(this.config.preserve_scroll=!1,this.$layout.resize(),this.config.preserve_scroll=l,this.config.preserve_scroll&&r){const u=t.ext.zoom._initialized;if((o||r.y)&&!u){var d=t.getScrollState();if(+s!=+t.dateFromPos(d.x)||d.y!=r.y){o=null;var c=null;s&&(o=Math.max(t.posFromDate(s)-t.config.task_scroll_offset,0)),r.y&&(c=r.y),t.scrollTo(o,c);}}this.$layout.getScrollbarsInfo().forEach(h=>{const _=t.$ui.getView(h.id),f=t.utils.dom.isChildOf(_.$view,t.$container);h.boundViews.forEach(y=>{const v=t.$ui.getView(y);h.y&&h.y!=r.y&&v&&!f&&v.scrollTo(void 0,0),h.x_pos&&h.x_pos!=r.x&&v&&f&&v.scrollTo(h.x_pos,void 0);});});}}this.callEvent(\"onGanttRender\",[]);},t.setSizes=t.render,t.getTaskRowNode=function(s){for(var r=this.$grid_data.childNodes,o=this.config.task_attribute,l=0;l<r.length;l++)if(r[l].getAttribute&&r[l].getAttribute(o)==s)return r[l];return null;},t.changeLightboxType=function(s){if(this.getLightboxType()==s)return!0;t._silent_redraw_lightbox(s);},t._get_link_type=function(s,r){var o=null;return s&&r?o=t.config.links.start_to_start:!s&&r?o=t.config.links.finish_to_start:s||r?s&&!r&&(o=t.config.links.start_to_finish):o=t.config.links.finish_to_finish,o;},t.isLinkAllowed=function(s,r,o,l){var d=null;if(!(d=typeof s==\"object\"?s:{source:s,target:r,type:this._get_link_type(o,l)})||!(d.source&&d.target&&d.type)||d.source==d.target)return!1;var c=!0;return this.checkEvent(\"onLinkValidation\")&&(c=this.callEvent(\"onLinkValidation\",[d])),c;},t._correct_dst_change=function(s,r,o,l){var d=qt(l)*o;if(d>3600&&d<86400){var c=s.getTimezoneOffset()-r;c&&(s=t.date.add(s,c,\"minute\"));}return s;},t.isSplitTask=function(s){return t.assert(s&&s instanceof Object,\"Invalid argument <b>task</b>=\"+s+\" of gantt.isSplitTask. Task object was expected\"),this.$data.tasksStore._isSplitItem(s);},t._is_icon_open_click=function(s){if(!s)return!1;var r=s.target||s.srcElement;if(!r||!r.className)return!1;var o=Q(r);return o.indexOf(\"gantt_tree_icon\")!==-1&&(o.indexOf(\"gantt_close\")!==-1||o.indexOf(\"gantt_open\")!==-1);};}const Ni={date:{month_full:[\" \",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\" \",\" \",\" \"],month_short:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],day_full:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],day_short:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"]},labels:{new_task:\" \",icon_save:\"\",icon_cancel:\"\",icon_details:\"\",icon_edit:\"\",icon_delete:\"\",confirm_closing:\"  ,   \",confirm_deleting:\"       \",section_description:\"\",section_time:\" \",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Li={date:{month_full:[\"\",\"\",\"\",\"\",\"Ma\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],month_short:[\"\",\"\",\"\",\"\",\"Ma\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],day_full:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],day_short:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"]},labels:{new_task:\" \",icon_save:\"\",icon_cancel:\"\",icon_details:\"\",icon_edit:\"\",icon_delete:\"\",confirm_closing:\"\",confirm_deleting:\"   , ?\",section_description:\"\",section_time:\" \",section_type:\"\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"\",column_text:\"\",column_start_date:\"\",column_duration:\"\",column_add:\"\",link:\"\",confirm_link_deleting:\" \",link_start:\"()\",link_end:\"()\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"ii\",hours:\"i\",days:\"\",weeks:\"\",months:\"\",years:\"\",message_ok:\"OK\",message_cancel:\"\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Ri={date:{month_full:[\"Gener\",\"Febrer\",\"Mar\",\"Abril\",\"Maig\",\"Juny\",\"Juliol\",\"Agost\",\"Setembre\",\"Octubre\",\"Novembre\",\"Desembre\"],month_short:[\"Gen\",\"Feb\",\"Mar\",\"Abr\",\"Mai\",\"Jun\",\"Jul\",\"Ago\",\"Set\",\"Oct\",\"Nov\",\"Des\"],day_full:[\"Diumenge\",\"Dilluns\",\"Dimarts\",\"Dimecres\",\"Dijous\",\"Divendres\",\"Dissabte\"],day_short:[\"Dg\",\"Dl\",\"Dm\",\"Dc\",\"Dj\",\"Dv\",\"Ds\"]},labels:{new_task:\"Nova tasca\",icon_save:\"Guardar\",icon_cancel:\"Cancellar\",icon_details:\"Detalls\",icon_edit:\"Editar\",icon_delete:\"Esborrar\",confirm_closing:\"\",confirm_deleting:\"L'esdeveniment s'esborrar definitivament, continuar ?\",section_description:\"Descripci\",section_time:\"Periode de temps\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Cancellar\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Pi={date:{month_full:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],month_short:[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\"],day_full:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],day_short:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"]},labels:{new_task:\"\",icon_save:\"\",icon_cancel:\"\",icon_details:\"\",icon_edit:\"\",icon_delete:\"\",confirm_closing:\"!\",confirm_deleting:\"?\",section_description:\"\",section_time:\"\",section_type:\"\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"\",column_text:\"\",column_start_date:\"\",column_duration:\"\",column_add:\"\",link:\"\",confirm_link_deleting:\"\",link_start:\" ()\",link_end:\" ()\",type_task:\"\",type_project:\"\",type_milestone:\"\",minutes:\"\",hours:\"\",days:\"\",weeks:\"\",months:\"\",years:\"\",message_ok:\"OK\",message_cancel:\"\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Hi={date:{month_full:[\"Leden\",\"nor\",\"Bezen\",\"Duben\",\"Kvten\",\"erven\",\"ervenec\",\"Srpen\",\"Z\",\"jen\",\"Listopad\",\"Prosinec\"],month_short:[\"Led\",\"n\",\"Be\",\"Dub\",\"Kv\",\"er\",\"ec\",\"Srp\",\"Z\",\"j\",\"List\",\"Pro\"],day_full:[\"Nedle\",\"Pondl\",\"ter\",\"Steda\",\"tvrtek\",\"Ptek\",\"Sobota\"],day_short:[\"Ne\",\"Po\",\"t\",\"St\",\"t\",\"P\",\"So\"]},labels:{new_task:\"Nov prce\",icon_save:\"Uloit\",icon_cancel:\"Zpt\",icon_details:\"Detail\",icon_edit:\"Edituj\",icon_delete:\"Smazat\",confirm_closing:\"\",confirm_deleting:\"Udlost bude trvale smazna, opravdu?\",section_description:\"Poznmky\",section_time:\"Doba platnosti\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Zpt\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Oi={date:{month_full:[\"Januar\",\"Februar\",\"Marts\",\"April\",\"Maj\",\"Juni\",\"Juli\",\"August\",\"September\",\"Oktober\",\"November\",\"December\"],month_short:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"Maj\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Dec\"],day_full:[\"Sndag\",\"Mandag\",\"Tirsdag\",\"Onsdag\",\"Torsdag\",\"Fredag\",\"Lrdag\"],day_short:[\"Sn\",\"Man\",\"Tir\",\"Ons\",\"Tor\",\"Fre\",\"Lr\"]},labels:{new_task:\"Ny opgave\",icon_save:\"Gem\",icon_cancel:\"Fortryd\",icon_details:\"Detaljer\",icon_edit:\"Tilret\",icon_delete:\"Slet\",confirm_closing:\"Dine rettelser vil g tabt.. Er dy sikker?\",confirm_deleting:\"Bigivenheden vil blive slettet permanent. Er du sikker?\",section_description:\"Beskrivelse\",section_time:\"Tidsperiode\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Fortryd\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Bi={date:{month_full:[\" Januar\",\" Februar\",\" Mrz \",\" April\",\" Mai\",\" Juni\",\" Juli\",\" August\",\" September \",\" Oktober\",\" November \",\" Dezember\"],month_short:[\"Jan\",\"Feb\",\"Mr\",\"Apr\",\"Mai\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Dez\"],day_full:[\"Sonntag\",\"Montag\",\"Dienstag\",\" Mittwoch\",\" Donnerstag\",\"Freitag\",\"Samstag\"],day_short:[\"So\",\"Mo\",\"Di\",\"Mi\",\"Do\",\"Fr\",\"Sa\"]},labels:{new_task:\"Neue Aufgabe\",icon_save:\"Speichern\",icon_cancel:\"Abbrechen\",icon_details:\"Details\",icon_edit:\"ndern\",icon_delete:\"Lschen\",confirm_closing:\"\",confirm_deleting:\"Der Eintrag wird gelscht\",section_description:\"Beschreibung\",section_time:\"Zeitspanne\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"PSP\",column_text:\"Task-Namen\",column_start_date:\"Startzeit\",column_duration:\"Dauer\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"werden gelscht\",link_start:\"(starten)\",link_end:\"(ende)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minuten\",hours:\"Stunden\",days:\"Tage\",weeks:\"Wochen\",months:\"Monate\",years:\"Jahre\",message_ok:\"OK\",message_cancel:\"Abbrechen\",section_constraint:\"Regel\",constraint_type:\"Regel\",constraint_date:\"Regel - Datum\",asap:\"So bald wie mglich\",alap:\"So spt wie mglich\",snet:\"Beginn nicht vor\",snlt:\"Beginn nicht spter als\",fnet:\"Fertigstellung nicht vor\",fnlt:\"Fertigstellung nicht spter als\",mso:\"Muss beginnen am\",mfo:\"Muss fertig sein am\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},zi={date:{month_full:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],month_short:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],day_full:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],day_short:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"]},labels:{new_task:\" \",icon_save:\"\",icon_cancel:\"\",icon_details:\"\",icon_edit:\"\",icon_delete:\"\",confirm_closing:\"\",confirm_deleting:\"    .   ;\",section_description:\"\",section_time:\" \",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},ji={date:{month_full:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],month_short:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],day_full:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],day_short:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"]},labels:{new_task:\"New task\",icon_save:\"Save\",icon_cancel:\"Cancel\",icon_details:\"Details\",icon_edit:\"Edit\",icon_delete:\"Delete\",confirm_closing:\"\",confirm_deleting:\"Task will be deleted permanently, are you sure?\",section_description:\"Description\",section_time:\"Time period\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Cancel\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Wi={date:{month_full:[\"Enero\",\"Febrero\",\"Marzo\",\"Abril\",\"Mayo\",\"Junio\",\"Julio\",\"Agosto\",\"Septiembre\",\"Octubre\",\"Noviembre\",\"Diciembre\"],month_short:[\"Ene\",\"Feb\",\"Mar\",\"Abr\",\"May\",\"Jun\",\"Jul\",\"Ago\",\"Sep\",\"Oct\",\"Nov\",\"Dic\"],day_full:[\"Domingo\",\"Lunes\",\"Martes\",\"Mircoles\",\"Jueves\",\"Viernes\",\"Sbado\"],day_short:[\"Dom\",\"Lun\",\"Mar\",\"Mi\",\"Jue\",\"Vie\",\"Sb\"]},labels:{new_task:\"Nueva tarea\",icon_save:\"Guardar\",icon_cancel:\"Cancelar\",icon_details:\"Detalles\",icon_edit:\"Editar\",icon_delete:\"Eliminar\",confirm_closing:\"\",confirm_deleting:\"El evento se borrar definitivamente, continuar?\",section_description:\"Descripcin\",section_time:\"Perodo\",section_type:\"Tipo\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"EDT\",column_text:\"Tarea\",column_start_date:\"Inicio\",column_duration:\"Duracin\",column_add:\"\",link:\"Enlace\",confirm_link_deleting:\"ser borrada\",link_start:\" (inicio)\",link_end:\" (fin)\",type_task:\"Tarea\",type_project:\"Proyecto\",type_milestone:\"Hito\",minutes:\"Minutos\",hours:\"Horas\",days:\"Das\",weeks:\"Semanas\",months:\"Meses\",years:\"Aos\",message_ok:\"OK\",message_cancel:\"Cancelar\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Fi={date:{month_full:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],month_short:[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\"],day_full:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],day_short:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"]},labels:{new_task:\" \",icon_save:\"\",icon_cancel:\"\",icon_details:\"\",icon_edit:\"\",icon_delete:\"\",confirm_closing:\"       \",confirm_deleting:\"         \",section_description:\"\",section_time:\" \",section_type:\"\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"\",column_start_date:\" \",column_duration:\"\",column_add:\"\",link:\"\",confirm_link_deleting:\"  \",link_start:\" ()\",link_end:\" ()\",type_task:\"\",type_project:\"\",type_milestone:\"\",minutes:\"\",hours:\"\",days:\"\",weeks:\"\",months:\"\",years:\"\",message_ok:\"\",message_cancel:\"\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Vi={date:{month_full:[\"Tammikuu\",\"Helmikuu\",\"Maaliskuu\",\"Huhtikuu\",\"Toukokuu\",\"Kes&auml;kuu\",\"Hein&auml;kuu\",\"Elokuu\",\"Syyskuu\",\"Lokakuu\",\"Marraskuu\",\"Joulukuu\"],month_short:[\"Tam\",\"Hel\",\"Maa\",\"Huh\",\"Tou\",\"Kes\",\"Hei\",\"Elo\",\"Syy\",\"Lok\",\"Mar\",\"Jou\"],day_full:[\"Sunnuntai\",\"Maanantai\",\"Tiistai\",\"Keskiviikko\",\"Torstai\",\"Perjantai\",\"Lauantai\"],day_short:[\"Su\",\"Ma\",\"Ti\",\"Ke\",\"To\",\"Pe\",\"La\"]},labels:{new_task:\"Uusi tehtv\",icon_save:\"Tallenna\",icon_cancel:\"Peru\",icon_details:\"Tiedot\",icon_edit:\"Muokkaa\",icon_delete:\"Poista\",confirm_closing:\"\",confirm_deleting:\"Haluatko varmasti poistaa tapahtuman?\",section_description:\"Kuvaus\",section_time:\"Aikajakso\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Peru\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Ui={date:{month_full:[\"Janvier\",\"Fvrier\",\"Mars\",\"Avril\",\"Mai\",\"Juin\",\"Juillet\",\"Aot\",\"Septembre\",\"Octobre\",\"Novembre\",\"Dcembre\"],month_short:[\"Jan\",\"Fv\",\"Mar\",\"Avr\",\"Mai\",\"Juin\",\"Juil\",\"Ao\",\"Sep\",\"Oct\",\"Nov\",\"Dc\"],day_full:[\"Dimanche\",\"Lundi\",\"Mardi\",\"Mercredi\",\"Jeudi\",\"Vendredi\",\"Samedi\"],day_short:[\"Dim\",\"Lun\",\"Mar\",\"Mer\",\"Jeu\",\"Ven\",\"Sam\"]},labels:{new_task:\"Nouvelle tche\",icon_save:\"Enregistrer\",icon_cancel:\"Annuler\",icon_details:\"Dtails\",icon_edit:\"Modifier\",icon_delete:\"Effacer\",confirm_closing:\"\",confirm_deleting:\"L'vnement sera effac sans appel, tes-vous sr ?\",section_description:\"Description\",section_time:\"Priode\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"OTP\",column_text:\"Nom de la tche\",column_start_date:\"Date initiale\",column_duration:\"Dure\",column_add:\"\",link:\"Le lien\",confirm_link_deleting:\"sera supprim\",link_start:\"(dbut)\",link_end:\"(fin)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Heures\",days:\"Jours\",weeks:\"Semaines\",months:\"Mois\",years:\"Annes\",message_ok:\"OK\",message_cancel:\"Annuler\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},qi={date:{month_full:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],month_short:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],day_full:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],day_short:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"]},labels:{new_task:\" \",icon_save:\"\",icon_cancel:\"\",icon_details:\"\",icon_edit:\"\",icon_delete:\"\",confirm_closing:\"\",confirm_deleting:\"  .?\",section_description:\"\",section_time:\"\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Gi={date:{month_full:[\"Sijeanj\",\"Veljaa\",\"Oujak\",\"Travanj\",\"Svibanj\",\"Lipanj\",\"Srpanj\",\"Kolovoz\",\"Rujan\",\"Listopad\",\"Studeni\",\"Prosinac\"],month_short:[\"Sij\",\"Velj\",\"Ou\",\"Tra\",\"Svi\",\"Lip\",\"Srp\",\"Kol\",\"Ruj\",\"Lis\",\"Stu\",\"Pro\"],day_full:[\"Nedjelja\",\"Ponedjeljak\",\"Utorak\",\"Srijeda\",\"etvrtak\",\"Petak\",\"Subota\"],day_short:[\"Ned\",\"Pon\",\"Uto\",\"Sri\",\"et\",\"Pet\",\"Sub\"]},labels:{new_task:\"Novi Zadatak\",icon_save:\"Spremi\",icon_cancel:\"Odustani\",icon_details:\"Detalji\",icon_edit:\"Izmjeni\",icon_delete:\"Obrii\",confirm_closing:\"\",confirm_deleting:\"Zadatak e biti trajno izbrisan, jeste li sigurni?\",section_description:\"Opis\",section_time:\"Vremenski Period\",section_type:\"Tip\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"Naziv Zadatka\",column_start_date:\"Poetno Vrijeme\",column_duration:\"Trajanje\",column_add:\"\",link:\"Poveznica\",confirm_link_deleting:\"e biti izbrisan\",link_start:\" (poetak)\",link_end:\" (kraj)\",type_task:\"Zadatak\",type_project:\"Projekt\",type_milestone:\"Milestone\",minutes:\"Minute\",hours:\"Sati\",days:\"Dani\",weeks:\"Tjedni\",months:\"Mjeseci\",years:\"Godine\",message_ok:\"OK\",message_cancel:\"Odustani\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Yi={date:{month_full:[\"Janur\",\"Februr\",\"Mrcius\",\"prilis\",\"Mjus\",\"Jnius\",\"Jlius\",\"Augusztus\",\"Szeptember\",\"Oktber\",\"November\",\"December\"],month_short:[\"Jan\",\"Feb\",\"Mr\",\"pr\",\"Mj\",\"Jn\",\"Jl\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Dec\"],day_full:[\"Vasrnap\",\"Htf\",\"Kedd\",\"Szerda\",\"Cstrtk\",\"Pntek\",\"szombat\"],day_short:[\"Va\",\"H\",\"Ke\",\"Sze\",\"Cs\",\"P\",\"Szo\"]},labels:{new_task:\"j feladat\",icon_save:\"Ments\",icon_cancel:\"Mgse\",icon_details:\"Rszletek\",icon_edit:\"Szerkeszts\",icon_delete:\"Trls\",confirm_closing:\"\",confirm_deleting:\"Az esemny trlve lesz, biztosan folytatja?\",section_description:\"Lers\",section_time:\"Idszak\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Mgse\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Ji={date:{month_full:[\"Januari\",\"Februari\",\"Maret\",\"April\",\"Mei\",\"Juni\",\"Juli\",\"Agustus\",\"September\",\"Oktober\",\"November\",\"Desember\"],month_short:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"Mei\",\"Jun\",\"Jul\",\"Ags\",\"Sep\",\"Okt\",\"Nov\",\"Des\"],day_full:[\"Minggu\",\"Senin\",\"Selasa\",\"Rabu\",\"Kamis\",\"Jumat\",\"Sabtu\"],day_short:[\"Ming\",\"Sen\",\"Sel\",\"Rab\",\"Kam\",\"Jum\",\"Sab\"]},labels:{new_task:\"Tugas baru\",icon_save:\"Simpan\",icon_cancel:\"Batal\",icon_details:\"Detail\",icon_edit:\"Edit\",icon_delete:\"Hapus\",confirm_closing:\"\",confirm_deleting:\"Acara akan dihapus\",section_description:\"Keterangan\",section_time:\"Periode\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Batal\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Ki={date:{month_full:[\"Gennaio\",\"Febbraio\",\"Marzo\",\"Aprile\",\"Maggio\",\"Giugno\",\"Luglio\",\"Agosto\",\"Settembre\",\"Ottobre\",\"Novembre\",\"Dicembre\"],month_short:[\"Gen\",\"Feb\",\"Mar\",\"Apr\",\"Mag\",\"Giu\",\"Lug\",\"Ago\",\"Set\",\"Ott\",\"Nov\",\"Dic\"],day_full:[\"Domenica\",\"Luned\",\"Marted\",\"Mercoled\",\"Gioved\",\"Venerd\",\"Sabato\"],day_short:[\"Dom\",\"Lun\",\"Mar\",\"Mer\",\"Gio\",\"Ven\",\"Sab\"]},labels:{new_task:\"Nuovo compito\",icon_save:\"Salva\",icon_cancel:\"Chiudi\",icon_details:\"Dettagli\",icon_edit:\"Modifica\",icon_delete:\"Elimina\",confirm_closing:\"\",confirm_deleting:\"Sei sicuro di confermare l'eliminazione?\",section_description:\"Descrizione\",section_time:\"Periodo di tempo\",section_type:\"Tipo\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"Nome Attivit\",column_start_date:\"Inizio\",column_duration:\"Durata\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"sar eliminato\",link_start:\" (inizio)\",link_end:\" (fine)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minuti\",hours:\"Ore\",days:\"Giorni\",weeks:\"Settimane\",months:\"Mesi\",years:\"Anni\",message_ok:\"OK\",message_cancel:\"Chiudi\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Xi={date:{month_full:[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\"],month_short:[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\"],day_full:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],day_short:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"]},labels:{new_task:\"\",icon_save:\"\",icon_cancel:\"\",icon_details:\"\",icon_edit:\"\",icon_delete:\"\",confirm_closing:\"\",confirm_deleting:\"\",section_description:\"\",section_time:\"\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},Zi={date:{month_full:[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\"],month_short:[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\"],day_full:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],day_short:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"]},labels:{new_task:\" \",icon_save:\"\",icon_cancel:\"\",icon_details:\" \",icon_edit:\"\",icon_delete:\"\",confirm_closing:\"\",confirm_deleting:\" ?\",section_description:\"\",section_time:\"\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"\",column_start_date:\"\",column_duration:\"\",column_add:\"\",link:\"\",confirm_link_deleting:\" ?\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"\",type_project:\"\",type_milestone:\"\",minutes:\"\",hours:\"\",days:\"\",weeks:\"\",months:\"\",years:\"\",message_ok:\"OK\",message_cancel:\"\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}};class Qi{constructor(n){this.addLocale=(e,i)=>{this._locales[e]=i;},this.getLocale=e=>this._locales[e],this._locales={};for(const e in n)this._locales[e]=n[e];}}const ta={date:{month_full:[\"Januar\",\"Februar\",\"Mars\",\"April\",\"Mai\",\"Juni\",\"Juli\",\"August\",\"September\",\"Oktober\",\"November\",\"Desember\"],month_short:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"Mai\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Des\"],day_full:[\"Sndag\",\"Mandag\",\"Tirsdag\",\"Onsdag\",\"Torsdag\",\"Fredag\",\"Lrdag\"],day_short:[\"Sn\",\"Mon\",\"Tir\",\"Ons\",\"Tor\",\"Fre\",\"Lr\"]},labels:{new_task:\"Ny oppgave\",icon_save:\"Lagre\",icon_cancel:\"Avbryt\",icon_details:\"Detaljer\",icon_edit:\"Rediger\",icon_delete:\"Slett\",confirm_closing:\"\",confirm_deleting:\"Hendelsen vil bli slettet permanent. Er du sikker?\",section_description:\"Beskrivelse\",section_time:\"Tidsperiode\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Avbryt\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},ea={date:{month_full:[\"Januari\",\"Februari\",\"Maart\",\"April\",\"Mei\",\"Juni\",\"Juli\",\"Augustus\",\"September\",\"Oktober\",\"November\",\"December\"],month_short:[\"Jan\",\"Feb\",\"mrt\",\"Apr\",\"Mei\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Dec\"],day_full:[\"Zondag\",\"Maandag\",\"Dinsdag\",\"Woensdag\",\"Donderdag\",\"Vrijdag\",\"Zaterdag\"],day_short:[\"Zo\",\"Ma\",\"Di\",\"Wo\",\"Do\",\"Vr\",\"Za\"]},labels:{new_task:\"Nieuwe taak\",icon_save:\"Opslaan\",icon_cancel:\"Annuleren\",icon_details:\"Details\",icon_edit:\"Bewerken\",icon_delete:\"Verwijderen\",confirm_closing:\"\",confirm_deleting:\"Item zal permanent worden verwijderd, doorgaan?\",section_description:\"Beschrijving\",section_time:\"Tijd periode\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"Taak omschrijving\",column_start_date:\"Startdatum\",column_duration:\"Duur\",column_add:\"\",link:\"Koppeling\",confirm_link_deleting:\"zal worden verwijderd\",link_start:\" (start)\",link_end:\" (eind)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"minuten\",hours:\"uren\",days:\"dagen\",weeks:\"weken\",months:\"maanden\",years:\"jaren\",message_ok:\"OK\",message_cancel:\"Annuleren\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},na={date:{month_full:[\"Januar\",\"Februar\",\"Mars\",\"April\",\"Mai\",\"Juni\",\"Juli\",\"August\",\"September\",\"Oktober\",\"November\",\"Desember\"],month_short:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"Mai\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Des\"],day_full:[\"Sndag\",\"Mandag\",\"Tirsdag\",\"Onsdag\",\"Torsdag\",\"Fredag\",\"Lrdag\"],day_short:[\"Sn\",\"Man\",\"Tir\",\"Ons\",\"Tor\",\"Fre\",\"Lr\"]},labels:{new_task:\"Ny oppgave\",icon_save:\"Lagre\",icon_cancel:\"Avbryt\",icon_details:\"Detaljer\",icon_edit:\"Endre\",icon_delete:\"Slett\",confirm_closing:\"Endringer blir ikke lagret, er du sikker?\",confirm_deleting:\"Oppfringen vil bli slettet, er du sikker?\",section_description:\"Beskrivelse\",section_time:\"Tidsperiode\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Avbryt\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},ia={date:{month_full:[\"Stycze\",\"Luty\",\"Marzec\",\"Kwiecie\",\"Maj\",\"Czerwiec\",\"Lipiec\",\"Sierpie\",\"Wrzesie\",\"Padziernik\",\"Listopad\",\"Grudzie\"],month_short:[\"Sty\",\"Lut\",\"Mar\",\"Kwi\",\"Maj\",\"Cze\",\"Lip\",\"Sie\",\"Wrz\",\"Pa\",\"Lis\",\"Gru\"],day_full:[\"Niedziela\",\"Poniedziaek\",\"Wtorek\",\"roda\",\"Czwartek\",\"Pitek\",\"Sobota\"],day_short:[\"Nie\",\"Pon\",\"Wto\",\"ro\",\"Czw\",\"Pi\",\"Sob\"]},labels:{new_task:\"Nowe zadanie\",icon_save:\"Zapisz\",icon_cancel:\"Anuluj\",icon_details:\"Szczegy\",icon_edit:\"Edytuj\",icon_delete:\"Usu\",confirm_closing:\"\",confirm_deleting:\"Zdarzenie zostanie usunite na zawsze, kontynuowa?\",section_description:\"Opis\",section_time:\"Okres czasu\",section_type:\"Typ\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"Nazwa zadania\",column_start_date:\"Pocztek\",column_duration:\"Czas trwania\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"zostanie usunity\",link_start:\" (pocztek)\",link_end:\" (koniec)\",type_task:\"Zadanie\",type_project:\"Projekt\",type_milestone:\"Milestone\",minutes:\"Minuty\",hours:\"Godziny\",days:\"Dni\",weeks:\"Tydzie\",months:\"Miesice\",years:\"Lata\",message_ok:\"OK\",message_cancel:\"Anuluj\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},aa={date:{month_full:[\"Janeiro\",\"Fevereiro\",\"Maro\",\"Abril\",\"Maio\",\"Junho\",\"Julho\",\"Agosto\",\"Setembro\",\"Outubro\",\"Novembro\",\"Dezembro\"],month_short:[\"Jan\",\"Fev\",\"Mar\",\"Abr\",\"Mai\",\"Jun\",\"Jul\",\"Ago\",\"Set\",\"Out\",\"Nov\",\"Dez\"],day_full:[\"Domingo\",\"Segunda\",\"Tera\",\"Quarta\",\"Quinta\",\"Sexta\",\"Sbado\"],day_short:[\"Dom\",\"Seg\",\"Ter\",\"Qua\",\"Qui\",\"Sex\",\"Sab\"]},labels:{new_task:\"Nova tarefa\",icon_save:\"Salvar\",icon_cancel:\"Cancelar\",icon_details:\"Detalhes\",icon_edit:\"Editar\",icon_delete:\"Excluir\",confirm_closing:\"\",confirm_deleting:\"As tarefas sero excluidas permanentemente, confirme?\",section_description:\"Descrio\",section_time:\"Perodo\",section_type:\"Tipo\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"EAP\",column_text:\"Nome tarefa\",column_start_date:\"Data incio\",column_duration:\"Durao\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"Ser excludo!\",link_start:\" (incio)\",link_end:\" (fim)\",type_task:\"Task\",type_project:\"Projeto\",type_milestone:\"Marco\",minutes:\"Minutos\",hours:\"Horas\",days:\"Dias\",weeks:\"Semanas\",months:\"Meses\",years:\"Anos\",message_ok:\"OK\",message_cancel:\"Cancelar\",section_constraint:\"Restrio\",constraint_type:\"Tipo Restrio\",constraint_date:\"Data restrio\",asap:\"Mais breve possvel\",alap:\"Mais tarde possvel\",snet:\"No comear antes de\",snlt:\"No comear depois de\",fnet:\"No terminar antes de\",fnlt:\"No terminar depois de\",mso:\"Precisa comear em\",mfo:\"Precisa terminar em\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},sa={date:{month_full:[\"Ianuarie\",\"Februarie\",\"Martie\",\"Aprilie\",\"Mai\",\"Iunie\",\"Iulie\",\"August\",\"Septembrie\",\"Octombrie\",\"November\",\"December\"],month_short:[\"Ian\",\"Feb\",\"Mar\",\"Apr\",\"Mai\",\"Iun\",\"Iul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],day_full:[\"Duminica\",\"Luni\",\"Marti\",\"Miercuri\",\"Joi\",\"Vineri\",\"Sambata\"],day_short:[\"Du\",\"Lu\",\"Ma\",\"Mi\",\"Jo\",\"Vi\",\"Sa\"]},labels:{new_task:\"Sarcina noua\",icon_save:\"Salveaza\",icon_cancel:\"Anuleaza\",icon_details:\"Detalii\",icon_edit:\"Editeaza\",icon_delete:\"Sterge\",confirm_closing:\"Schimbarile nu vor fi salvate, esti sigur?\",confirm_deleting:\"Evenimentul va fi sters permanent, esti sigur?\",section_description:\"Descriere\",section_time:\"Interval\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Anuleaza\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},ra={date:{month_full:[\"\",\"\",\"\",\"\",\"Ma\",\"\",\"\",\"\",\"\",\"O\",\"\",\"\"],month_short:[\"\",\"\",\"Ma\",\"A\",\"Ma\",\"\",\"\",\"A\",\"\",\"\",\"\",\"\"],day_full:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"],day_short:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"]},labels:{new_task:\" \",icon_save:\"\",icon_cancel:\"\",icon_details:\"\",icon_edit:\"\",icon_delete:\"\",confirm_closing:\"\",confirm_deleting:\"   , ?\",section_description:\"\",section_time:\" \",section_type:\"\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"\",column_text:\"\",column_start_date:\"\",column_duration:\"\",column_add:\"\",link:\"\",confirm_link_deleting:\" \",link_start:\" ()\",link_end:\" ()\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"\",hours:\"\",days:\"\",weeks:\"\",months:\"\",years:\"\",message_ok:\"OK\",message_cancel:\"\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},oa={date:{month_full:[\"Januar\",\"Februar\",\"Marec\",\"April\",\"Maj\",\"Junij\",\"Julij\",\"Avgust\",\"September\",\"Oktober\",\"November\",\"December\"],month_short:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"Maj\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Dec\"],day_full:[\"Nedelja\",\"Ponedeljek\",\"Torek\",\"Sreda\",\"etrtek\",\"Petek\",\"Sobota\"],day_short:[\"Ned\",\"Pon\",\"Tor\",\"Sre\",\"et\",\"Pet\",\"Sob\"]},labels:{new_task:\"Nova naloga\",icon_save:\"Shrani\",icon_cancel:\"Preklii\",icon_details:\"Podrobnosti\",icon_edit:\"Uredi\",icon_delete:\"Izbrii\",confirm_closing:\"\",confirm_deleting:\"Dogodek bo izbrisan. elite nadaljevati?\",section_description:\"Opis\",section_time:\"asovni okvir\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Preklii\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},la={date:{month_full:[\"Janur\",\"Februr\",\"Marec\",\"Aprl\",\"Mj\",\"Jn\",\"Jl\",\"August\",\"September\",\"Oktber\",\"November\",\"December\"],month_short:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"Mj\",\"Jn\",\"Jl\",\"Aug\",\"Sept\",\"Okt\",\"Nov\",\"Dec\"],day_full:[\"Nedea\",\"Pondelok\",\"Utorok\",\"Streda\",\"tvrtok\",\"Piatok\",\"Sobota\"],day_short:[\"Ne\",\"Po\",\"Ut\",\"St\",\"t\",\"Pi\",\"So\"]},labels:{new_task:\"Nov loha\",icon_save:\"Uloi\",icon_cancel:\"Sp\",icon_details:\"Detail\",icon_edit:\"Edituj\",icon_delete:\"Zmaza\",confirm_closing:\"Vae zmeny nebud uloen. Skutone?\",confirm_deleting:\"Udalos bude natrvalo vymazan. Skutone?\",section_description:\"Poznmky\",section_time:\"Doba platnosti\",section_type:\"Type\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"Sp\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},da={date:{month_full:[\"Januari\",\"Februari\",\"Mars\",\"April\",\"Maj\",\"Juni\",\"Juli\",\"Augusti\",\"September\",\"Oktober\",\"November\",\"December\"],month_short:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"Maj\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Okt\",\"Nov\",\"Dec\"],day_full:[\"Sndag\",\"Mndag\",\"Tisdag\",\"Onsdag\",\"Torsdag\",\"Fredag\",\"Lrdag\"],day_short:[\"Sn\",\"Mn\",\"Tis\",\"Ons\",\"Tor\",\"Fre\",\"Lr\"]},labels:{new_task:\"Ny uppgift\",icon_save:\"Spara\",icon_cancel:\"Avbryt\",icon_details:\"Detajer\",icon_edit:\"ndra\",icon_delete:\"Ta bort\",confirm_closing:\"\",confirm_deleting:\"r du sker p att du vill ta bort hndelsen permanent?\",section_description:\"Beskrivning\",section_time:\"Tid\",section_type:\"Typ\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"Uppgiftsnamn\",column_start_date:\"Starttid\",column_duration:\"Varaktighet\",column_add:\"\",link:\"Lnk\",confirm_link_deleting:\"kommer tas bort\",link_start:\" (start)\",link_end:\" (slut)\",type_task:\"Uppgift\",type_project:\"Projekt\",type_milestone:\"Milstolpe\",minutes:\"Minuter\",hours:\"Timmar\",days:\"Dagar\",weeks:\"Veckor\",months:\"Mnader\",years:\"r\",message_ok:\"OK\",message_cancel:\"Avbryt\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},ca={date:{month_full:[\"Ocak\",\"ubat\",\"Mart\",\"Nisan\",\"Mays\",\"Haziran\",\"Temmuz\",\"Austos\",\"Eyll\",\"Ekim\",\"Kasm\",\"Aralk\"],month_short:[\"Oca\",\"ub\",\"Mar\",\"Nis\",\"May\",\"Haz\",\"Tem\",\"Au\",\"Eyl\",\"Eki\",\"Kas\",\"Ara\"],day_full:[\"Pazar\",\"Pazartesi\",\"Sal\",\"aramba\",\"Perembe\",\"Cuma\",\"Cumartesi\"],day_short:[\"Paz\",\"Pzt\",\"Sal\",\"ar\",\"Per\",\"Cum\",\"Cmt\"]},labels:{new_task:\"Yeni grev\",icon_save:\"Kaydet\",icon_cancel:\"ptal\",icon_details:\"Detaylar\",icon_edit:\"Dzenle\",icon_delete:\"Sil\",confirm_closing:\"\",confirm_deleting:\"Grev silinecek, emin misiniz?\",section_description:\"Aklama\",section_time:\"Zaman Aral\",section_type:\"Tip\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"Grev Ad\",column_start_date:\"Balang\",column_duration:\"Sre\",column_add:\"\",link:\"Balant\",confirm_link_deleting:\"silinecek\",link_start:\" (balang)\",link_end:\" (biti)\",type_task:\"Grev\",type_project:\"Proje\",type_milestone:\"Kilometreta\",minutes:\"Dakika\",hours:\"Saat\",days:\"Gn\",weeks:\"Hafta\",months:\"Ay\",years:\"Yl\",message_ok:\"OK\",message_cancel:\"ptal\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}},ua={date:{month_full:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],month_short:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],day_full:[\"\",\"\",\"\",\"\",\"\",\"'\",\"\"],day_short:[\"\",\"\",\"\",\"\",\"\",\"\",\"\"]},labels:{new_task:\" \",icon_save:\"\",icon_cancel:\"\",icon_details:\"\",icon_edit:\"\",icon_delete:\"\",confirm_closing:\"\",confirm_deleting:\"  .  ?\",section_description:\"\",section_time:\" \",section_type:\"\",section_deadline:\"Deadline\",section_baselines:\"Baselines\",section_new_resources:\"Resources\",column_wbs:\"WBS\",column_text:\"Task name\",column_start_date:\"Start time\",column_duration:\"Duration\",column_add:\"\",link:\"Link\",confirm_link_deleting:\"will be deleted\",link_start:\" (start)\",link_end:\" (end)\",type_task:\"Task\",type_project:\"Project\",type_milestone:\"Milestone\",minutes:\"Minutes\",hours:\"Hours\",days:\"Days\",weeks:\"Week\",months:\"Months\",years:\"Years\",message_ok:\"OK\",message_cancel:\"\",section_constraint:\"Constraint\",constraint_type:\"Constraint type\",constraint_date:\"Constraint date\",asap:\"As Soon As Possible\",alap:\"As Late As Possible\",snet:\"Start No Earlier Than\",snlt:\"Start No Later Than\",fnet:\"Finish No Earlier Than\",fnlt:\"Finish No Later Than\",mso:\"Must Start On\",mfo:\"Must Finish On\",resources_add_button:\"Add Assignment\",resources_filter_placeholder:\"Search...\",resources_filter_label:\"hide empty\",resources_section_placeholder:\"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",empty_state_text_link:\"Click here\",empty_state_text_description:\"to create your first task\",baselines_section_placeholder:\"Start adding a new baseline\",baselines_add_button:\"Add Baseline\",baselines_remove_button:\"Remove\",baselines_remove_all_button:\"Remove All\",deadline_enable_button:\"Set\",deadline_disable_button:\"Remove\"}};function ha(){this.constants=Jn,this.version=\"9.1.0\",this.license=\"gpl\",this.templates={},this.ext={},this.keys={edit_save:this.constants.KEY_CODES.ENTER,edit_cancel:this.constants.KEY_CODES.ESC};}function _a(t){var n=new ha(),e=new Kn(t),i={};n.plugins=function(l){for(var d in l)if(l[d]&&!i[d]){var c=e.getExtension(d);c&&(c(n),i[d]=!0);}return i;},n.$services=/* @__PURE__ */function(){var l={};return{services:{},setService:function(d,c){l[d]=c;},getService:function(d){return l[d]?l[d]():null;},dropService:function(d){l[d]&&delete l[d];},destructor:function(){for(var d in l)if(l[d]){var c=l[d];c&&c.destructor&&c.destructor();}l=null;}};}(),n.config={layout:{css:\"gantt_container\",rows:[{cols:[{view:\"grid\",scrollX:\"scrollHor\",scrollY:\"scrollVer\"},{resizer:!0,width:1},{view:\"timeline\",scrollX:\"scrollHor\",scrollY:\"scrollVer\"},{view:\"scrollbar\",id:\"scrollVer\"}]},{view:\"scrollbar\",id:\"scrollHor\",height:20}]},links:{finish_to_start:\"0\",start_to_start:\"1\",finish_to_finish:\"2\",start_to_finish:\"3\"},types:{task:\"task\",project:\"project\",milestone:\"milestone\"},auto_types:!1,duration_unit:\"day\",work_time:!1,correct_work_time:!1,skip_off_time:!1,cascade_delete:!0,autosize:!1,autosize_min_width:0,autoscroll:!0,autoscroll_speed:30,deepcopy_on_parse:!1,show_links:!0,show_task_cells:!0,static_background:!1,static_background_cells:!0,branch_loading:!1,branch_loading_property:\"$has_child\",show_loading:!1,show_chart:!0,show_grid:!0,min_duration:36e5,date_format:\"%d-%m-%Y %H:%i\",xml_date:void 0,start_on_monday:!0,server_utc:!1,show_progress:!0,fit_tasks:!1,select_task:!0,scroll_on_click:!0,smart_rendering:!0,preserve_scroll:!0,readonly:!1,container_resize_timeout:20,deadlines:!0,date_grid:\"%Y-%m-%d\",drag_links:!0,drag_progress:!0,drag_resize:!0,drag_project:!1,drag_move:!0,drag_mode:{resize:\"resize\",progress:\"progress\",move:\"move\",ignore:\"ignore\"},round_dnd_dates:!0,link_wrapper_width:20,link_arrow_size:12,root_id:0,autofit:!1,columns:[{name:\"text\",tree:!0,width:\"*\",resize:!0},{name:\"start_date\",align:\"center\",resize:!0},{name:\"duration\",align:\"center\"},{name:\"add\",width:44}],scale_offset_minimal:!0,inherit_scale_class:!1,scales:[{unit:\"day\",step:1,date:\"%d %M\"}],time_step:60,duration_step:1,task_date:\"%d %F %Y\",time_picker:\"%H:%i\",task_attribute:\"data-task-id\",link_attribute:\"data-link-id\",layer_attribute:\"data-layer\",buttons_left:[\"gantt_save_btn\",\"gantt_cancel_btn\"],_migrate_buttons:{dhx_save_btn:\"gantt_save_btn\",dhx_cancel_btn:\"gantt_cancel_btn\",dhx_delete_btn:\"gantt_delete_btn\"},buttons_right:[\"gantt_delete_btn\"],lightbox:{sections:[{name:\"description\",height:70,map_to:\"text\",type:\"textarea\",focus:!0},{name:\"time\",type:\"duration\",map_to:\"auto\"}],project_sections:[{name:\"description\",height:70,map_to:\"text\",type:\"textarea\",focus:!0},{name:\"type\",type:\"typeselect\",map_to:\"type\"},{name:\"time\",type:\"duration\",readonly:!0,map_to:\"auto\"}],milestone_sections:[{name:\"description\",height:70,map_to:\"text\",type:\"textarea\",focus:!0},{name:\"type\",type:\"typeselect\",map_to:\"type\"},{name:\"time\",type:\"duration\",single_date:!0,map_to:\"auto\"}]},drag_lightbox:!0,sort:!1,details_on_create:!0,details_on_dblclick:!0,initial_scroll:!0,task_scroll_offset:100,order_branch:!1,order_branch_free:!1,task_height:void 0,bar_height:\"full\",bar_height_padding:9,min_column_width:70,min_grid_column_width:70,grid_resizer_column_attribute:\"data-column-index\",keep_grid_width:!1,grid_resize:!1,grid_elastic_columns:!1,show_tasks_outside_timescale:!1,show_unscheduled:!0,resize_rows:!1,task_grid_row_resizer_attribute:\"data-row-index\",min_task_grid_row_height:30,row_height:36,readonly_property:\"readonly\",editable_property:\"editable\",calendar_property:\"calendar_id\",resource_calendars:{},dynamic_resource_calendars:!1,inherit_calendar:!1,type_renderers:{},open_tree_initially:!1,optimize_render:!0,prevent_default_scroll:!1,show_errors:!0,wai_aria_attributes:!0,smart_scales:!0,rtl:!1,placeholder_task:!1,horizontal_scroll_key:\"shiftKey\",drag_timeline:{useKey:void 0,ignore:\".gantt_task_line, .gantt_task_link\",render:!1},drag_multiple:!0,csp:\"auto\",auto_scheduling:{}},n.ajax=/* @__PURE__ */function(l){return{cache:!0,method:\"get\",parse:function(d){return typeof d!=\"string\"?d:(d=d.replace(/^[\\s]+/,\"\"),typeof DOMParser>\"u\"||kt.isIE?tt.ActiveXObject!==void 0&&((c=new tt.ActiveXObject(\"Microsoft.XMLDOM\")).async=\"false\",c.loadXML(d)):c=new DOMParser().parseFromString(d,\"text/xml\"),c);var c;},xmltop:function(d,c,u){if(c.status===void 0||c.status<400){var h=c.responseXML?c.responseXML||c:this.parse(c.responseText||c);if(h&&h.documentElement!==null&&!h.getElementsByTagName(\"parsererror\").length)return h.getElementsByTagName(d)[0];}return u!==-1&&l.callEvent(\"onLoadXMLError\",[\"Incorrect XML\",arguments[1],u]),document.createElement(\"DIV\");},xpath:function(d,c){if(c.nodeName||(c=c.responseXML||c),kt.isIE)return c.selectNodes(d)||[];for(var u,h=[],_=(c.ownerDocument||c).evaluate(d,c,null,XPathResult.ANY_TYPE,null);u=_.iterateNext();)h.push(u);return h;},query:function(d){return this._call(d.method||\"GET\",d.url,d.data||\"\",d.async||!0,d.callback,d.headers);},get:function(d,c,u){var h=wt(\"GET\",arguments);return this.query(h);},getSync:function(d,c){var u=wt(\"GET\",arguments);return u.async=!1,this.query(u);},put:function(d,c,u,h){var _=wt(\"PUT\",arguments);return this.query(_);},del:function(d,c,u){var h=wt(\"DELETE\",arguments);return this.query(h);},post:function(d,c,u,h){arguments.length==1?c=\"\":arguments.length==2&&typeof c==\"function\"&&(u=c,c=\"\");var _=wt(\"POST\",arguments);return this.query(_);},postSync:function(d,c,u){c=c===null?\"\":String(c);var h=wt(\"POST\",arguments);return h.async=!1,this.query(h);},_call:function(d,c,u,h,_,f){return new l.Promise(function(y,v){var b=typeof XMLHttpRequest!==void 0?new XMLHttpRequest():new tt.ActiveXObject(\"Microsoft.XMLHTTP\"),m=navigator.userAgent.match(/AppleWebKit/)!==null&&navigator.userAgent.match(/Qt/)!==null&&navigator.userAgent.match(/Safari/)!==null;h&&(b.onreadystatechange=function(){if(b.readyState==4||m&&b.readyState==3){if((b.status<200||b.status>299||b.responseText===\"\")&&!l.callEvent(\"onAjaxError\",[b]))return;setTimeout(function(){typeof _==\"function\"&&_.apply(tt,[{xmlDoc:b,filePath:c}]),y(b),typeof _==\"function\"&&(_=null,b=null);},0);}});var g=!this||!this.cache;if(d==\"GET\"&&g&&(c+=(c.indexOf(\"?\")>=0?\"&\":\"?\")+\"dhxr\"+(/* @__PURE__ */new Date()).getTime()+\"=1\"),b.open(d,c,h),f)for(var p in f)b.setRequestHeader(p,f[p]);else d.toUpperCase()==\"POST\"||d==\"PUT\"||d==\"DELETE\"?b.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded\"):d==\"GET\"&&(u=null);if(b.setRequestHeader(\"X-Requested-With\",\"XMLHttpRequest\"),b.send(u),!h)return{xmlDoc:b,filePath:c};});},urlSeparator:function(d){return d.indexOf(\"?\")!=-1?\"&\":\"?\";}};}(n),n.date=Xn(n),n.RemoteEvents=Zn;var a=function(l){function d(u){return{target:u.target||u.srcElement,pageX:u.pageX,pageY:u.pageY,clientX:u.clientX,clientY:u.clientY,metaKey:u.metaKey,shiftKey:u.shiftKey,ctrlKey:u.ctrlKey,altKey:u.altKey};}function c(u,h){this._obj=u,this._settings=h||{},lt(this);var _=this.getInputMethods();this._drag_start_timer=null,l.attachEvent(\"onGanttScroll\",B(function(v,b){this.clearDragTimer();},this));for(var f={passive:!1},y=0;y<_.length;y++)B(function(v){l.event(u,v.down,B(function(m){v.accessor(m)&&(m.button!==void 0&&m.button!==0||(h.preventDefault&&h.selector&&ht(m.target,h.selector)&&m.preventDefault(),l.config.touch&&m.timeStamp&&m.timeStamp-0<300||(this._settings.original_target=d(m),this._settings.original_element_sizes={...rt(m,rn(u)),width:m.target.offsetWidth,height:m.target.offsetHeight},l.config.touch?(this.clearDragTimer(),this._drag_start_timer=setTimeout(B(function(){l.getState().lightbox||this.dragStart(u,m,v);},this),l.config.touch_drag)):this.dragStart(u,m,v))));},this),f);var b=document.body;l.event(b,v.up,B(function(m){v.accessor(m)&&this.clearDragTimer();},this),f);},this)(_[y]);}return c.prototype={traceDragEvents:function(u,h){var _=B(function(g){return this.dragMove(u,g,h.accessor);},this);B(function(g){return this.dragScroll(u,g);},this);var f=B(function(g){if(!this.config.started||!q(this.config.updates_per_second)||_n(this,this.config.updates_per_second)){var p=_(g);if(p)try{g&&g.preventDefault&&g.cancelable&&g.preventDefault();}catch{}return p;}},this),y=yt(l.$root),v=this.config.mousemoveContainer||yt(l.$root),b={passive:!1},m=B(function(g){return l.eventRemove(v,h.move,f),l.eventRemove(y,h.up,m,b),this.dragEnd(u);},this);l.event(v,h.move,f,b),l.event(y,h.up,m,b);},checkPositionChange:function(u){var h=u.x-this.config.pos.x,_=u.y-this.config.pos.y;return Math.sqrt(Math.pow(Math.abs(h),2)+Math.pow(Math.abs(_),2))>this.config.sensitivity;},initDnDMarker:function(){var u=this.config.marker=document.createElement(\"div\");u.className=\"gantt_drag_marker\",u.innerHTML=\"\",document.body.appendChild(u);},backupEventTarget:function(u,h){if(l.config.touch){var _=h(u),f=_.target||_.srcElement,y=f.cloneNode(!0);this.config.original_target=d(_),this.config.original_target.target=y,this.config.backup_element=f,f.parentNode.appendChild(y),f.style.display=\"none\",(this.config.mousemoveContainer||document.body).appendChild(f);}},getInputMethods:function(){var u=[];return u.push({move:\"mousemove\",down:\"mousedown\",up:\"mouseup\",accessor:function(h){return h;}}),l.config.touch&&(!l.env.isIE||tt.maxTouchPoints?u.push({move:\"touchmove\",down:\"touchstart\",up:\"touchend\",accessor:function(h){return h.touches&&h.touches.length>1?null:h.touches[0]?{target:document.elementFromPoint(h.touches[0].clientX,h.touches[0].clientY),pageX:h.touches[0].pageX,pageY:h.touches[0].pageY,clientX:h.touches[0].clientX,clientY:h.touches[0].clientY}:h;}}):tt.PointerEvent&&u.push({move:\"pointermove\",down:\"pointerdown\",up:\"pointerup\",accessor:function(h){return h.pointerType==\"mouse\"?null:h;}})),u;},clearDragTimer:function(){this._drag_start_timer&&(clearTimeout(this._drag_start_timer),this._drag_start_timer=null);},dragStart:function(u,h,_){this.config&&this.config.started||(this.config={obj:u,marker:null,started:!1,pos:this.getPosition(h),sensitivity:4},this._settings&&R(this.config,this._settings,!0),this.traceDragEvents(u,_),l._prevent_touch_scroll=!0,h.target.closest(\".gantt_row\")&&!l.config.order_branch&&(l._prevent_touch_scroll=!1),document.body.classList.add(\"gantt_noselect\"),l.config.touch&&this.dragMove(u,h,_.accessor));},dragMove:function(u,h,_){var f=_(h);if(!f)return!1;if(!this.config.marker&&!this.config.started){var y=this.getPosition(f);if(l.config.touch||this.checkPositionChange(y)){if(this.config.started=!0,this.config.ignore=!1,l._touch_drag=!0,this.callEvent(\"onBeforeDragStart\",[u,this.config.original_target])===!1)return this.config.ignore=!0,!1;this.backupEventTarget(h,_),this.initDnDMarker(),l._touch_feedback(),this.callEvent(\"onAfterDragStart\",[u,this.config.original_target]);}else this.config.ignore=!0;}return this.config.ignore?!1:h.targetTouches&&!f.target?void 0:(f.pos=this.getPosition(f),this.config.marker.style.left=f.pos.x+\"px\",this.config.marker.style.top=f.pos.y+\"px\",this.callEvent(\"onDragMove\",[u,f]),!0);},dragEnd:function(u){var h=this.config.backup_element;h&&h.parentNode&&h.parentNode.removeChild(h),l._prevent_touch_scroll=!1,this.config.marker&&(this.config.marker.parentNode.removeChild(this.config.marker),this.config.marker=null,this.callEvent(\"onDragEnd\",[])),this.config.started=!1,l._touch_drag=!1,document.body.classList.remove(\"gantt_noselect\");},getPosition:function(u){var h=0,_=0;return u.pageX||u.pageY?(h=u.pageX,_=u.pageY):(u.clientX||u.clientY)&&(h=u.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,_=u.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:h,y:_};}},c;}(n);n.$services.setService(\"dnd\",function(){return a;});var s=/* @__PURE__ */function(l){var d={};function c(u,h,_){_=_||u;var f=l.config,y=l.templates;l.config[u]&&d[_]!=f[u]&&(h&&y[_]||(y[_]=l.date.date_to_str(f[u]),d[_]=f[u]));}return{initTemplates:function(){var u=l.date,h=u.date_to_str,_=l.config,f=h(_.xml_date||_.date_format,_.server_utc),y=u.str_to_date(_.xml_date||_.date_format,_.server_utc);c(\"date_scale\",!0,void 0,l.config,l.templates),c(\"date_grid\",!0,\"grid_date_format\",l.config,l.templates),c(\"task_date\",!0,void 0,l.config,l.templates),l.mixin(l.templates,{xml_format:void 0,format_date:f,xml_date:void 0,parse_date:y,progress_text:function(v,b,m){return\"\";},grid_header_class:function(v,b){return\"\";},task_text:function(v,b,m){return m.text;},task_class:function(v,b,m){return\"\";},task_end_date:function(v){return l.templates.task_date(v);},grid_row_class:function(v,b,m){return\"\";},task_row_class:function(v,b,m){return\"\";},timeline_cell_class:function(v,b){return\"\";},timeline_cell_content:function(v,b){return\"\";},scale_cell_class:function(v){return\"\";},scale_row_class:function(v){return\"\";},grid_indent:function(v){return\"<div class='gantt_tree_indent'></div>\";},grid_folder:function(v){return\"<div class='gantt_tree_icon gantt_folder_\"+(v.$open?\"open\":\"closed\")+\"'></div>\";},grid_file:function(v){return\"<div class='gantt_tree_icon gantt_file'></div>\";},grid_open:function(v){return\"<div class='gantt_tree_icon gantt_\"+(v.$open?\"close\":\"open\")+\"'></div>\";},grid_blank:function(v){return\"<div class='gantt_tree_icon gantt_blank'></div>\";},date_grid:function(v,b,m){return b&&l.isUnscheduledTask(b)&&l.config.show_unscheduled?l.templates.task_unscheduled_time(b):l.templates.grid_date_format(v,m);},task_time:function(v,b,m){return l.isUnscheduledTask(m)&&l.config.show_unscheduled?l.templates.task_unscheduled_time(m):l.templates.task_date(v)+\" - \"+l.templates.task_end_date(b);},task_unscheduled_time:function(v){return\"\";},time_picker:h(_.time_picker),link_class:function(v){return\"\";},link_description:function(v){var b=l.getTask(v.source),m=l.getTask(v.target);return\"<b>\"+b.text+\"</b> &ndash;  <b>\"+m.text+\"</b>\";},drag_link:function(v,b,m,g){v=l.getTask(v);var p=l.locale.labels,k=\"<b>\"+v.text+\"</b> \"+(b?p.link_start:p.link_end)+\"<br/>\";return m&&(k+=\"<b> \"+(m=l.getTask(m)).text+\"</b> \"+(g?p.link_start:p.link_end)+\"<br/>\"),k;},drag_link_class:function(v,b,m,g){var p=\"\";return v&&m&&(p=\" \"+(l.isLinkAllowed(v,m,b,g)?\"gantt_link_allow\":\"gantt_link_deny\")),\"gantt_link_tooltip\"+p;},tooltip_date_format:u.date_to_str(\"%Y-%m-%d\"),tooltip_text:function(v,b,m){return`<div>Task: ${m.text}</div>\n\t\t\t\t<div>Start date: ${l.templates.tooltip_date_format(v)}</div>\n\t\t\t\t<div>End date: ${l.templates.tooltip_date_format(b)}</div>`;},baseline_text:function(v,b,m){return\"\";}});},initTemplate:c};}(n);n.$services.setService(\"templateLoader\",function(){return s;}),lt(n);var r=new Qn();r.registerProvider(\"global\",function(){var l={min_date:n._min_date,max_date:n._max_date,selected_task:null};return n.$data&&n.$data.tasksStore&&(l.selected_task=n.$data.tasksStore.getSelectedId()),l;}),n.getState=r.getState,n.$services.setService(\"state\",function(){return r;}),R(n,jn),n.Promise=ti,n.env=kt,function(l){var d=ii.create();R(l,d);var c,u=l.createDatastore({name:\"task\",type:\"treeDatastore\",rootId:function(){return l.config.root_id;},initItem:B(function(m){this.defined(m.id)||(m.id=this.uid()),m.start_date&&(m.start_date=l.date.parseDate(m.start_date,\"parse_date\")),m.end_date&&(m.end_date=l.date.parseDate(m.end_date,\"parse_date\"));var g=null;(m.duration||m.duration===0)&&(m.duration=g=1*m.duration),g&&(m.start_date&&!m.end_date?m.end_date=this.calculateEndDate(m):!m.start_date&&m.end_date&&(m.start_date=this.calculateEndDate({start_date:m.end_date,duration:-m.duration,task:m}))),l.config.deadlines!==!1&&m.deadline&&(m.deadline=l.date.parseDate(m.deadline,\"parse_date\")),m.progress=Number(m.progress)||0,this._isAllowedUnscheduledTask(m)&&this._set_default_task_timing(m),this._init_task_timing(m),m.start_date&&m.end_date&&this.correctTaskWorkTime(m),m.$source=[],m.$target=[];var p=this.$data.tasksStore.getItem(m.id);return p&&!q(m.open)&&(m.$open=p.$open),m.parent===void 0&&(m.parent=this.config.root_id),m.open&&(m.$open=!0),m;},l),getConfig:function(){return l.config;}}),h=l.createDatastore({name:\"link\",initItem:B(function(m){return this.defined(m.id)||(m.id=this.uid()),m;},l)});function _(m){var g=l.isTaskVisible(m);if(!g&&l.isTaskExists(m)){var p=l.getParent(m);l.isTaskExists(p)&&l.isTaskVisible(p)&&(p=l.getTask(p),l.isSplitTask(p)&&(g=!0));}return g;}function f(m,g){return g.indexOf(String(m))===-1&&g.indexOf(Number(m))===-1;}function y(m){if(l.isTaskExists(m.source)){for(var g=l.getTask(m.source),p=0;p<g.$source.length;p++)if(g.$source[p]==m.id){g.$source.splice(p,1);break;}}if(l.isTaskExists(m.target)){var k=l.getTask(m.target);for(p=0;p<k.$target.length;p++)if(k.$target[p]==m.id){k.$target.splice(p,1);break;}}}function v(){for(var m=null,g=l.$data.tasksStore.getItems(),p=0,k=g.length;p<k;p++)(m=g[p]).$source=[],m.$target=[];var x=l.$data.linksStore.getItems();for(p=0,k=x.length;p<k;p++){var w=x[p];h.sync_link(w);}}function b(m){var g=m.source,p=m.target;for(var k in m.events)(function(x,w){g.attachEvent(x,function(){return p.callEvent(w,Array.prototype.slice.call(arguments));},w);})(k,m.events[k]);}l.attachEvent(\"onDestroy\",function(){u.destructor(),h.destructor();}),l.attachEvent(\"onLinkValidation\",function(m){if(l.isLinkExists(m.id)||m.id===\"predecessor_generated\")return!0;for(var g=l.getTask(m.source).$source,p=0;p<g.length;p++){var k=l.getLink(g[p]),x=m.source==k.source,w=m.target==k.target,$=m.type==k.type;if(x&&w&&$)return!1;}return!0;}),u.attachEvent(\"onBeforeRefreshAll\",function(){if(!u._skipTaskRecalculation)for(var m=u.getVisibleItems(),g=0;g<m.length;g++){var p=m[g];p.$index=g,p.$local_index=l.getTaskIndex(p.id),l.resetProjectDates(p);}}),u.attachEvent(\"onFilterItem\",function(m,g){if(l.config.show_tasks_outside_timescale)return!0;var p=null,k=null;if(l.config.start_date&&l.config.end_date){if(l._isAllowedUnscheduledTask(g))return!0;if(p=l.config.start_date.valueOf(),k=l.config.end_date.valueOf(),+g.start_date>k||+g.end_date<+p)return!1;}return!0;}),u.attachEvent(\"onIdChange\",function(m,g){l._update_flags(m,g);var p=l.getTask(g);u.isSilent()||(p.$split_subtask||p.rollup)&&l.eachParent(function(k){l.refreshTask(k.id);},g);}),u.attachEvent(\"onAfterUpdate\",function(m){if(l._update_parents(m),l.getState(\"batchUpdate\").batch_update)return!0;var g=u.getItem(m);g.$source||(g.$source=[]);for(var p=0;p<g.$source.length;p++)h.refresh(g.$source[p]);for(g.$target||(g.$target=[]),p=0;p<g.$target.length;p++)h.refresh(g.$target[p]);}),u.attachEvent(\"onBeforeItemMove\",function(m,g,p){return!Ot(m,l,u)||(console.log(\"The placeholder task cannot be moved to another position.\"),!1);}),u.attachEvent(\"onAfterItemMove\",function(m,g,p){var k=l.getTask(m);this.getNextSibling(m)!==null?k.$drop_target=this.getNextSibling(m):this.getPrevSibling(m)!==null?k.$drop_target=\"next:\"+this.getPrevSibling(m):k.$drop_target=\"next:null\";}),u.attachEvent(\"onStoreUpdated\",function(m,g,p){if(p==\"delete\"&&l._update_flags(m,null),!l.$services.getService(\"state\").getState(\"batchUpdate\").batch_update){if(l.config.fit_tasks&&p!==\"paint\"){var k=l.getState();$e(l);var x=l.getState();if(+k.min_date!=+x.min_date||+k.max_date!=+x.max_date)return l.render(),l.callEvent(\"onScaleAdjusted\",[]),!0;}p==\"add\"||p==\"move\"||p==\"delete\"?l.$layout&&(this.$config.name!=\"task\"||p!=\"add\"&&p!=\"delete\"||this._skipTaskRecalculation!=\"lightbox\"&&(this._skipTaskRecalculation=!0),l.$layout.resize()):m||h.refresh();}}),h.attachEvent(\"onAfterAdd\",function(m,g){h.sync_link(g);}),h.attachEvent(\"onAfterUpdate\",function(m,g){v();}),h.attachEvent(\"onAfterDelete\",function(m,g){y(g);}),h.attachEvent(\"onAfterSilentDelete\",function(m,g){y(g);}),h.attachEvent(\"onBeforeIdChange\",function(m,g){y(l.mixin({id:m},l.$data.linksStore.getItem(g))),h.sync_link(l.$data.linksStore.getItem(g));}),h.attachEvent(\"onFilterItem\",function(m,g){if(!l.config.show_links)return!1;var p=_(g.source),k=_(g.target);return!(!p||!k||l._isAllowedUnscheduledTask(l.getTask(g.source))||l._isAllowedUnscheduledTask(l.getTask(g.target)))&&l.callEvent(\"onBeforeLinkDisplay\",[m,g]);}),c={},l.attachEvent(\"onBeforeTaskDelete\",function(m,g){return c[m]=we.getSubtreeLinks(l,m),!0;}),l.attachEvent(\"onAfterTaskDelete\",function(m,g){c[m]&&l.$data.linksStore.silent(function(){for(var p in c[m])l.isLinkExists(p)&&l.$data.linksStore.removeItem(p),y(c[m][p]);c[m]=null;});}),l.attachEvent(\"onAfterLinkDelete\",function(m,g){l.isTaskExists(g.source)&&l.refreshTask(g.source),l.isTaskExists(g.target)&&l.refreshTask(g.target);}),l.attachEvent(\"onParse\",v),b({source:h,target:l,events:{onItemLoading:\"onLinkLoading\",onBeforeAdd:\"onBeforeLinkAdd\",onAfterAdd:\"onAfterLinkAdd\",onBeforeUpdate:\"onBeforeLinkUpdate\",onAfterUpdate:\"onAfterLinkUpdate\",onBeforeDelete:\"onBeforeLinkDelete\",onAfterDelete:\"onAfterLinkDelete\",onIdChange:\"onLinkIdChange\"}}),b({source:u,target:l,events:{onItemLoading:\"onTaskLoading\",onBeforeAdd:\"onBeforeTaskAdd\",onAfterAdd:\"onAfterTaskAdd\",onBeforeUpdate:\"onBeforeTaskUpdate\",onAfterUpdate:\"onAfterTaskUpdate\",onBeforeDelete:\"onBeforeTaskDelete\",onAfterDelete:\"onAfterTaskDelete\",onIdChange:\"onTaskIdChange\",onBeforeItemMove:\"onBeforeTaskMove\",onAfterItemMove:\"onAfterTaskMove\",onFilterItem:\"onBeforeTaskDisplay\",onItemOpen:\"onTaskOpened\",onItemClose:\"onTaskClosed\",onBeforeSelect:\"onBeforeTaskSelected\",onAfterSelect:\"onTaskSelected\",onAfterUnselect:\"onTaskUnselected\"}}),l.$data={tasksStore:u,linksStore:h},h.sync_link=function(m){if(l.isTaskExists(m.source)){var g=l.getTask(m.source);g.$source=g.$source||[],f(m.id,g.$source)&&g.$source.push(m.id);}if(l.isTaskExists(m.target)){var p=l.getTask(m.target);p.$target=p.$target||[],f(m.id,p.$target)&&p.$target.push(m.id);}};}(n),n.dataProcessor=ri,n.createDataProcessor=oi,function(l){l.ext||(l.ext={});for(var d=[di,ci,_i,gi,fi,pi,mi,vi,ki,xi],c=0;c<d.length;c++)d[c]&&d[c](l);const{getAutoSchedulingConfig:u}=/* @__PURE__ */function(h){function _(){return{enabled:!1,apply_constraints:!1,gap_behavior:\"preserve\",descendant_links:!1,schedule_on_parse:!0,move_projects:!0,use_progress:!1,schedule_from_end:!1,project_constraint:!1,show_constraints:!1};}return{getDefaultAutoSchedulingConfig:_,getAutoSchedulingConfig:function(){const f=h.config;if(typeof f.auto_scheduling==\"object\"){const y={enabled:!1,apply_constraints:!1,gap_behavior:\"preserve\",descendant_links:!1,schedule_on_parse:!0,move_projects:!0,use_progress:!1,schedule_from_end:!1,project_constraint:!1,show_constraints:!1,...f.auto_scheduling};return y.mode&&(y.apply_constraints=y.mode===\"constraints\",delete y.mode),y.strict!==void 0&&(y.gap_behavior=y.strict?\"compress\":\"preserve\",delete y.strict),y.move_asap_tasks!==void 0&&(y.gap_behavior=y.move_asap_tasks?\"compress\":\"preserve\",delete y.move_asap_tasks),y;}return{enabled:!1,apply_constraints:!1,gap_behavior:\"preserve\",descendant_links:!1,schedule_on_parse:!0,move_projects:!0,use_progress:!1,schedule_from_end:!1,project_constraint:!1,show_constraints:!1,enabled:!!f.auto_scheduling,apply_constraints:f.auto_scheduling_compatibility??!1,gap_behavior:f.auto_scheduling_strict!==!0?\"preserve\":\"compress\",descendant_links:f.auto_scheduling_descendant_links??!1,schedule_on_parse:f.auto_scheduling_initial??!0,move_projects:f.auto_scheduling_move_projects??!0,use_progress:f.auto_scheduling_use_progress??!1,schedule_from_end:f.schedule_from_end??!1,project_constraint:f.auto_scheduling_project_constraint??!1,show_constraints:!1};}};}(l);l._getAutoSchedulingConfig=u;}(n),function(l){l.getGridColumn=function(d){for(var c=l.config.columns,u=0;u<c.length;u++)if(c[u].name==d)return c[u];return null;},l.getGridColumns=function(){return l.config.columns.slice();};}(n),function(l){l.isReadonly=function(d){return typeof d!=\"number\"&&typeof d!=\"string\"||!l.isTaskExists(d)||(d=l.getTask(d)),(!d||!d[this.config.editable_property])&&(d&&d[this.config.readonly_property]||this.config.readonly);};}(n),$i(n),function(l){var d=new kn(l),c=new yn(d);R(l,Ai(d,c));}(n),Ii(n),function(l){l.getTaskType=function(d){return\"task\";};}(n),function(l){function d(){return l._cached_functions.update_if_changed(l),l._cached_functions.active||l._cached_functions.activate(),!0;}l._cached_functions={cache:{},mode:!1,critical_path_mode:!1,wrap_methods:function(u,h){if(h._prefetch_originals)for(var _ in h._prefetch_originals)h[_]=h._prefetch_originals[_];for(h._prefetch_originals={},_=0;_<u.length;_++)this.prefetch(u[_],h);},prefetch:function(u,h){var _=h[u];if(_){var f=this;h._prefetch_originals[u]=_,h[u]=function(){for(var y=new Array(arguments.length),v=0,b=arguments.length;v<b;v++)y[v]=arguments[v];if(f.active){var m=f.get_arguments_hash(Array.prototype.slice.call(y));f.cache[u]||(f.cache[u]={});var g=f.cache[u];if(f.has_cached_value(g,m))return f.get_cached_value(g,m);var p=_.apply(this,y);return f.cache_value(g,m,p),p;}return _.apply(this,y);};}return _;},cache_value:function(u,h,_){this.is_date(_)&&(_=new Date(_)),u[h]=_;},has_cached_value:function(u,h){return u.hasOwnProperty(h);},get_cached_value:function(u,h){var _=u[h];return this.is_date(_)&&(_=new Date(_)),_;},is_date:function(u){return u&&u.getUTCDate;},get_arguments_hash:function(u){for(var h=[],_=0;_<u.length;_++)h.push(this.stringify_argument(u[_]));return\"(\"+h.join(\";\")+\")\";},stringify_argument:function(u){return(u.id?u.id:this.is_date(u)?u.valueOf():u)+\"\";},activate:function(){this.clear(),this.active=!0;},deactivate:function(){this.clear(),this.active=!1;},clear:function(){this.cache={};},setup:function(u){var h=[],_=[\"_isProjectEnd\",\"_getProjectEnd\",\"_getSlack\"];this.mode==\"auto\"?u.config.highlight_critical_path&&(h=_):this.mode===!0&&(h=_),this.wrap_methods(h,u);},update_if_changed:function(u){(this.critical_path_mode!=u.config.highlight_critical_path||this.mode!==u.config.optimize_render)&&(this.critical_path_mode=u.config.highlight_critical_path,this.mode=u.config.optimize_render,this.setup(u));}},l.attachEvent(\"onBeforeGanttRender\",d),l.attachEvent(\"onBeforeDataRender\",d),l.attachEvent(\"onBeforeSmartRender\",function(){d();}),l.attachEvent(\"onBeforeParse\",d),l.attachEvent(\"onDataRender\",function(){l._cached_functions.deactivate();});var c=null;l.attachEvent(\"onSmartRender\",function(){c&&clearTimeout(c),c=setTimeout(function(){l._cached_functions.deactivate();},1e3);}),l.attachEvent(\"onBeforeGanttReady\",function(){return l._cached_functions.update_if_changed(l),!0;});}(n),Mi(n),function(l){l.destructor=function(){for(var d in this.clearAll(),this.callEvent(\"onDestroy\",[]),this._getDatastores().forEach(function(c){c.destructor();}),this.$root&&delete this.$root.gantt,this._eventRemoveAll&&this._eventRemoveAll(),this.$layout&&this.$layout.destructor(),this.resetLightbox&&this.resetLightbox(),this.ext.inlineEditors&&this.ext.inlineEditors.destructor&&this.ext.inlineEditors.destructor(),this._dp&&this._dp.destructor&&this._dp.destructor(),this.$services.destructor(),this.detachAllEvents(),this)d.indexOf(\"$\")===0&&delete this[d];this.$destroyed=!0;};}(n);var o=new Qi({en:ji,ar:Ni,be:Li,ca:Ri,cn:Pi,cs:Hi,da:Oi,de:Bi,el:zi,es:Wi,fa:Fi,fi:Vi,fr:Ui,he:qi,hr:Gi,hu:Yi,id:Ji,it:Ki,jp:Xi,kr:Zi,nb:ta,nl:ea,no:na,pl:ia,pt:aa,ro:sa,ru:ra,si:oa,sk:la,sv:da,tr:ca,ua});return n.i18n={addLocale:o.addLocale,setLocale:function(l){if(typeof l==\"string\"){var d=o.getLocale(l);d||(d=o.getLocale(\"en\")),n.locale=d;}else if(l)if(n.locale)for(var c in l)l[c]&&typeof l[c]==\"object\"?(n.locale[c]||(n.locale[c]={}),n.mixin(n.locale[c],l[c],!0)):n.locale[c]=l[c];else n.locale=l;const u=n.locale.labels;u.gantt_save_btn=u.gantt_save_btn||u.icon_save,u.gantt_cancel_btn=u.gantt_cancel_btn||u.icon_cancel,u.gantt_delete_btn=u.gantt_delete_btn||u.icon_delete;},getLocale:o.getLocale},n.i18n.setLocale(\"en\"),n;}function ga(t){var n=\"data-dhxbox\",e=null;function i(m,g){var p=m.callback;y.hide(m.box),e=m.box=null,p&&p(g);}function a(m){if(e){var g=m.which||m.keyCode,p=!1;if(v.keyboard){if(g==13||g==32){var k=m.target||m.srcElement;Q(k).indexOf(\"gantt_popup_button\")>-1&&k.click?k.click():(i(e,!0),p=!0);}g==27&&(i(e,!1),p=!0);}return p?(m.preventDefault&&m.preventDefault(),!(m.cancelBubble=!0)):void 0;}}var s=yt(t.$root)||document;function r(m){r.cover||(r.cover=document.createElement(\"div\"),r.cover.onkeydown=a,r.cover.className=\"dhx_modal_cover\",document.body.appendChild(r.cover)),r.cover.style.display=m?\"inline-block\":\"none\";}function o(m,g,p){return\"<div \"+t._waiAria.messageButtonAttrString(m)+\" class='gantt_popup_button \"+(\"gantt_\"+g.toLowerCase().replace(/ /g,\"_\")+\"_button\")+\"' data-result='\"+p+\"' result='\"+p+\"' ><div>\"+m+\"</div></div>\";}function l(){for(var m=[].slice.apply(arguments,[0]),g=0;g<m.length;g++)if(m[g])return m[g];}function d(m,g,p){var k=m.tagName?m:function($,T,S){var C=document.createElement(\"div\"),E=ot();t._waiAria.messageModalAttr(C,E),C.className=\" gantt_modal_box gantt-\"+$.type,C.setAttribute(n,1);var D=\"\";if($.width&&(C.style.width=$.width),$.height&&(C.style.height=$.height),$.title&&(D+='<div class=\"gantt_popup_title\">'+$.title+\"</div>\"),D+='<div class=\"gantt_popup_text\" id=\"'+E+'\"><span>'+($.content?\"\":$.text)+'</span></div><div  class=\"gantt_popup_controls\">',T&&(D+=o(l($.ok,t.locale.labels.message_ok,\"OK\"),\"ok\",!0)),S&&(D+=o(l($.cancel,t.locale.labels.message_cancel,\"Cancel\"),\"cancel\",!1)),$.buttons)for(var A=0;A<$.buttons.length;A++){var M=$.buttons[A];D+=typeof M==\"object\"?o(M.label,M.css||\"gantt_\"+M.label.toLowerCase()+\"_button\",M.value||A):o(M,M,A);}if(D+=\"</div>\",C.innerHTML=D,$.content){var I=$.content;typeof I==\"string\"&&(I=document.getElementById(I)),I.style.display==\"none\"&&(I.style.display=\"\"),C.childNodes[$.title?1:0].appendChild(I);}return C.onclick=function(N){var L=N.target||N.srcElement;if(L.className||(L=L.parentNode),ht(L,\".gantt_popup_button\")){var O=L.getAttribute(\"data-result\");i($,O=O==\"true\"||O!=\"false\"&&O);}},$.box=C,(T||S)&&(e=$),C;}(m,g,p);m.hidden||r(!0),document.body.appendChild(k);var x=Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-k.offsetWidth)/2)),w=Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-k.offsetHeight)/2));return m.position==\"top\"?k.style.top=\"-3px\":k.style.top=w+\"px\",k.style.left=x+\"px\",k.onkeydown=a,y.focus(k),m.hidden&&y.hide(k),t.callEvent(\"onMessagePopup\",[k]),k;}function c(m){return d(m,!0,!1);}function u(m){return d(m,!0,!0);}function h(m){return d(m);}function _(m,g,p){return typeof m!=\"object\"&&(typeof g==\"function\"&&(p=g,g=\"\"),m={text:m,type:g,callback:p}),m;}function f(m,g,p,k){return typeof m!=\"object\"&&(m={text:m,type:g,expire:p,id:k}),m.id=m.id||ot(),m.expire=m.expire||v.expire,m;}t.event(s,\"keydown\",a,!0);var y=function(){var m=_.apply(this,arguments);return m.type=m.type||\"alert\",h(m);};y.hide=function(m){for(;m&&m.getAttribute&&!m.getAttribute(n);)m=m.parentNode;m&&(m.parentNode.removeChild(m),r(!1),t.callEvent(\"onAfterMessagePopup\",[m]));},y.focus=function(m){setTimeout(function(){var g=Pt(m);g.length&&g[0].focus&&g[0].focus();},1);};var v=function(m,g,p,k){switch((m=f.apply(this,arguments)).type=m.type||\"info\",m.type.split(\"-\")[0]){case\"alert\":return c(m);case\"confirm\":return u(m);case\"modalbox\":return h(m);default:return function(x){v.area||(v.area=document.createElement(\"div\"),v.area.className=\"gantt_message_area\",v.area.style[v.position]=\"5px\"),K(v.area,document.body)||document.body.appendChild(v.area),v.hide(x.id);var w=document.createElement(\"div\");return w.innerHTML=\"<div>\"+x.text+\"</div>\",w.className=\"gantt-info gantt-\"+x.type,w.onclick=function(){v.hide(x.id),x=null;},t._waiAria.messageInfoAttr(w),v.position==\"bottom\"&&v.area.firstChild?v.area.insertBefore(w,v.area.firstChild):v.area.appendChild(w),x.expire>0&&(v.timers[x.id]=window.setTimeout(function(){v&&v.hide(x.id);},x.expire)),v.pull[x.id]=w,w=null,x.id;}(m);}};v.seed=(/* @__PURE__ */new Date()).valueOf(),v.uid=ot,v.expire=4e3,v.keyboard=!0,v.position=\"top\",v.pull={},v.timers={},v.hideAll=function(){for(var m in v.pull)v.hide(m);},v.hide=function(m){var g=v.pull[m];g&&g.parentNode&&(window.setTimeout(function(){g.parentNode.removeChild(g),g=null;},2e3),g.className+=\" hidden\",v.timers[m]&&window.clearTimeout(v.timers[m]),delete v.pull[m]);};var b=[];return t.attachEvent(\"onMessagePopup\",function(m){b.push(m);}),t.attachEvent(\"onAfterMessagePopup\",function(m){for(var g=0;g<b.length;g++)b[g]===m&&(b.splice(g,1),g--);}),t.attachEvent(\"onDestroy\",function(){r.cover&&r.cover.parentNode&&r.cover.parentNode.removeChild(r.cover);for(var m=0;m<b.length;m++)b[m].parentNode&&b[m].parentNode.removeChild(b[m]);b=null,v.area&&v.area.parentNode&&v.area.parentNode.removeChild(v.area),v=null;}),{alert:function(){var m=_.apply(this,arguments);return m.type=m.type||\"confirm\",c(m);},confirm:function(){var m=_.apply(this,arguments);return m.type=m.type||\"alert\",u(m);},message:v,modalbox:y};}function Fe(t,n){var e=this.$config[t];return e?(e.$extendedConfig||(e.$extendedConfig=!0,Object.setPrototypeOf(e,n)),e):n;}function fa(t,n){var e,i,a;R(t,(e=n,{$getConfig:function(){return i||(i=e?e.$getConfig():this.$gantt.config),this.$config.config?Fe.call(this,\"config\",i):i;},$getTemplates:function(){return a||(a=e?e.$getTemplates():this.$gantt.templates),this.$config.templates?Fe.call(this,\"templates\",a):a;}}));}const pa=function(t){var n={},e={};function i(a,s,r,o){var l=n[a];if(!l||!l.create)return!1;a!=\"resizer\"||r.mode||(o.$config.cols?r.mode=\"x\":r.mode=\"y\"),a!=\"viewcell\"||r.view!=\"scrollbar\"||r.scroll||(o.$config.cols?r.scroll=\"y\":r.scroll=\"x\"),(r=X(r)).id||e[r.view]||(r.id=r.view),r.id&&!r.css&&(r.css=r.id+\"_cell\");var d=new l.create(s,r,this,t);return l.configure&&l.configure(d),fa(d,o),d.$id||(d.$id=r.id||t.uid()),d.$parent||typeof s!=\"object\"||(d.$parent=s),d.$config||(d.$config=r),e[d.$id]&&(d.$id=t.uid()),e[d.$id]=d,d;}return{initUI:function(a,s){var r=\"cell\";return a.view?r=\"viewcell\":a.resizer?r=\"resizer\":a.rows||a.cols?r=\"layout\":a.views&&(r=\"multiview\"),i.call(this,r,null,a,s);},reset:function(){e={};},registerView:function(a,s,r){n[a]={create:s,configure:r};},createView:i,getView:function(a){return e[a];}};};var ma=/* @__PURE__ */function(t){return function(n){var e={click:{},doubleclick:{},contextMenu:{}};function i(h,_,f,y){e[h][_]||(e[h][_]=[]),e[h][_].push({handler:f,root:y});}function a(h){h=h||window.event;var _=n.locate(h),f=r(h,e.click),y=!0;if(_!==null?y=!n.checkEvent(\"onTaskClick\")||n.callEvent(\"onTaskClick\",[_,h]):n.callEvent(\"onEmptyClick\",[h]),y){if(!o(f,h,_))return;switch(h.target.nodeName){case\"SELECT\":case\"INPUT\":return;}_&&n.getTask(_)&&!n._multiselect&&n.config.select_task&&n.selectTask(_);}}function s(h){var _=(h=h||window.event).target||h.srcElement,f=n.locate(_),y=n.locate(_,n.config.link_attribute),v=!n.checkEvent(\"onContextMenu\")||n.callEvent(\"onContextMenu\",[f,y,h]);return v||(h.preventDefault?h.preventDefault():h.returnValue=!1),v;}function r(h,_){for(var f=h.target||h.srcElement,y=[];f;){var v=t.getClassName(f);if(v){v=v.split(\" \");for(var b=0;b<v.length;b++)if(v[b]&&_[v[b]])for(var m=_[v[b]],g=0;g<m.length;g++)m[g].root&&!t.isChildOf(f,m[g].root)||y.push(m[g].handler);}f=f.parentNode;}return y;}function o(h,_,f){for(var y=!0,v=0;v<h.length;v++){var b=h[v].call(n,_,f,_.target||_.srcElement);y=y&&!(b!==void 0&&b!==!0);}return y;}function l(h){h=h||window.event;var _=n.locate(h),f=r(h,e.doubleclick),y=!n.checkEvent(\"onTaskDblClick\")||_===null||n.callEvent(\"onTaskDblClick\",[_,h]);if(y){if(!o(f,h,_))return;_!==null&&n.getTask(_)&&y&&n.config.details_on_dblclick&&!n.isReadonly(_)&&n.showLightbox(_);}}function d(h){if(n.checkEvent(\"onMouseMove\")){var _=n.locate(h);n._last_move_event=h,n.callEvent(\"onMouseMove\",[_,h]);}}var c=n._createDomEventScope();function u(h){c.detachAll(),h&&(c.attach(h,\"click\",a),c.attach(h,\"dblclick\",l),c.attach(h,\"mousemove\",d),c.attach(h,\"contextmenu\",s));}return{reset:u,global:function(h,_,f){i(h,_,f,null);},delegate:i,detach:function(h,_,f,y){if(e[h]&&e[h][_]){for(var v=e[h],b=v[_],m=0;m<b.length;m++)b[m].root==y&&(b.splice(m,1),m--);b.length||delete v[_];}},callHandler:function(h,_,f,y){var v=e[h][_];if(v)for(var b=0;b<v.length;b++)(f||v[b].root)&&v[b].root!==f||v[b].handler.apply(this,y);},onDoubleClick:l,onMouseMove:d,onContextMenu:s,onClick:a,destructor:function(){u(),e=null,c=null;}};};}(ln);const va={init:ma};function Ve(t,n,e){return!!n&&!(n.left>t.x_end||n.left+n.width<t.x)&&!(n.top>t.y_end||n.top+n.height<t.y);}function Rt(t){return t.config.smart_rendering&&t._smart_render;}function Qt(t,n,e){return{top:n.getItemTop(t.id),height:n.getItemHeight(t.id),left:0,right:1/0};}function mt(t,n,e,i,a){var s=n.getItemIndexByTopPosition(a.y)||0,r=n.getItemIndexByTopPosition(a.y_end)||i.count(),o=Math.max(0,s-1),l=Math.min(i.count(),r+1);const d=[];if(t.config.keyboard_navigation&&t.getSelectedId()){let c=t.getTask(t.getSelectedId());c.$expanded_branch&&!c.$split_subtask&&d.push(t.getSelectedId());}if(t.$ui.getView(\"grid\")&&t.ext.inlineEditors&&t.ext.inlineEditors.getState().id){let c=t.ext.inlineEditors.getState().id;i.exists(c)&&d.push(c);}return{start:o,end:l,ids:d};}var ka=function(t){var n=/* @__PURE__ */function(e){var i={},a={};function s(o){var l=null;return typeof o.view==\"string\"?l=e.$ui.getView(o.view):o.view&&(l=o.view),l;}function r(o,l,d){if(a[o])return a[o];l.renderer||e.assert(!1,\"Invalid renderer call\");var c=null,u=null,h=null,_=null,f=null;typeof l.renderer==\"function\"?(c=l.renderer,h=Qt):(c=l.renderer.render,u=l.renderer.update,_=l.renderer.onrender,l.renderer.isInViewPort?f=l.renderer.isInViewPort:h=l.renderer.getRectangle,h||h===null||(h=Qt));var y=l.filter;return d&&d.setAttribute(e.config.layer_attribute,!0),a[o]={render_item:function(v,b,m,g,p){if(b=b||d,!y||y(v)){var k=g||s(l),x=p||(k?k.$getConfig():null),w=m;!w&&x&&x.smart_rendering&&(w=k.getViewPort());var $=null;!Rt(e)&&(h||f)&&w?(f?f(v,w,k,x,e):Ve(w,h(v,k,x,e)))&&($=c.call(e,v,k,x,w)):$=c.call(e,v,k,x,w),this.append(v,$,b);var T=b.nodeType==11;_&&!T&&$&&_.call(e,v,$,k);}else this.remove_item(v.id);},clear:function(v){this.rendered=i[o]={},l.append||this.clear_container(v);},clear_container:function(v){(v=v||d)&&(v.innerHTML=\"\");},get_visible_range:function(v){var b,m,g=s(l),p=g?g.$getConfig():null;return p&&p.smart_rendering&&(b=g.getViewPort()),g&&b&&(typeof l.renderer==\"function\"?m=mt(e,g,0,v,b):l.renderer&&l.renderer.getVisibleRange&&(m=l.renderer.getVisibleRange(e,g,p,v,b))),m||(m={start:0,end:v.count()}),m;},prepare_data:function(v){if(l.renderer&&l.renderer.prepareData)return l.renderer.prepareData(v,e,l);},render_items:function(v,b){b=b||d;var m=document.createDocumentFragment();this.clear(b);var g=null,p=s(l),k=p?p.$getConfig():null;k&&k.smart_rendering&&(g=p.getViewPort());for(var x=0,w=v.length;x<w;x++)this.render_item(v[x],m,g,p,k);b.appendChild(m,b);var $={};v.forEach(function(C){$[C.id]=C;});var T={};if(_){var S={};for(var x in this.rendered)T[x]||(S[x]=this.rendered[x],_.call(e,$[x],this.rendered[x],p));}},update_items:function(v,b){var m=s(l),g=m?m.$getConfig():null;if(m&&m.$getConfig().smart_rendering&&!Rt(e)&&this.rendered&&(h||f)){b=b||d;var p=document.createDocumentFragment(),k=null;m&&(k=m.getViewPort());var x={};v.forEach(function(M){x[M.id]=M;});var w={},$={};for(var T in this.rendered)$[T]=!0,w[T]=!0;for(var S={},C=(T=0,v.length);T<C;T++){var E=v[T],D=this.rendered[E.id];$[E.id]=!1,D&&D.parentNode?(f?f(E,k,m,g,e):Ve(k,h(E,m,g,e)))?(u&&u.call(e,E,D,m,g,k),this.restore(E,p)):$[E.id]=!0:(S[v[T].id]=!0,this.render_item(v[T],p,k,m,g));}for(var T in $)$[T]&&this.hide(T);if(p.childNodes.length&&b.appendChild(p,b),_){var A={};for(var T in this.rendered)w[T]&&!S[T]||(A[T]=this.rendered[T],_.call(e,x[T],this.rendered[T],m));}}},append:function(v,b,m){this.rendered&&(b?(this.rendered[v.id]&&this.rendered[v.id].parentNode?this.replace_item(v.id,b):m.appendChild(b),this.rendered[v.id]=b):this.rendered[v.id]&&this.remove_item(v.id));},replace_item:function(v,b){var m=this.rendered[v];m&&m.parentNode&&m.parentNode.replaceChild(b,m),this.rendered[v]=b;},remove_item:function(v){this.hide(v),delete this.rendered[v];},hide:function(v){var b=this.rendered[v];b&&b.parentNode&&b.parentNode.removeChild(b),delete this.rendered[v];},restore:function(v,b){var m=this.rendered[v.id];m?m.parentNode||this.append(v,m,b||d):this.render_item(v,b||d);},change_id:function(v,b){this.rendered[b]=this.rendered[v],delete this.rendered[v];},rendered:i[o],node:d,destructor:function(){this.clear(),delete a[o],delete i[o];}},a[o];}return{getRenderer:r,clearRenderers:function(){for(var o in a)r(o).destructor();}};}(t);return{createGroup:function(e,i,a,s){var r={tempCollection:[],renderers:{},container:e,filters:[],getLayers:function(){this._add();var o=[];for(var l in this.renderers)o.push(this.renderers[l]);return o;},getLayer:function(o){return this.renderers[o];},_add:function(o){o&&(o.id=o.id||ot(),this.tempCollection.push(o));const l=this.container(),d=this.tempCollection;for(let c=0;c<d.length;c++){if(o=d[c],!(this.container()||o&&o.container&&o.container.isConnected))continue;let u=o.container,h=o.id,_=o.topmost;if(!u.parentNode)if(_)l.appendChild(u);else{let f=i?i():l.firstChild;f&&f.parentNode==l?l.insertBefore(u,f):l.appendChild(u);}this.renderers[h]=n.getRenderer(h,o,u),s&&s(o,t),this.tempCollection.splice(c,1),c--;}},addLayer:function(o){if(o){typeof o==\"function\"&&(o={renderer:o}),o.filter===void 0?o.filter=Ue(a||[]):o.filter instanceof Array&&(o.filter.push(a),o.filter=Ue(o.filter)),o.container||(o.container=document.createElement(\"div\"));var l=this;o.requestUpdate=function(){t.config.smart_rendering&&!Rt(t)&&l.renderers[o.id]&&l.onUpdateRequest(l.renderers[o.id]);};}return this._add(o),o?o.id:void 0;},onUpdateRequest:function(o){},eachLayer:function(o){for(var l in this.renderers)o(this.renderers[l]);},removeLayer:function(o){this.renderers[o]&&(this.renderers[o].destructor(),delete this.renderers[o]);},clear:function(){for(var o in this.renderers)this.renderers[o].destructor();this.renderers={};}};return t.attachEvent(\"onDestroy\",function(){r.clear(),r=null;}),r;}};};function Ue(t){return t instanceof Array||(t=Array.prototype.slice.call(arguments,0)),function(n){for(var e=!0,i=0,a=t.length;i<a;i++){var s=t[i];s&&(e=e&&s(n.id,n)!==!1);}return e;};}function qe(t,n,e){if(!t.start_date||!t.end_date)return null;var i=n.posFromDate(t.start_date,n._getPositioningContext?n._getPositioningContext(t):null),a=n.posFromDate(t.end_date,n._getPositioningContext?n._getPositioningContext(t):null),s=Math.min(i,a)-200,r=Math.max(i,a)+200;return{top:n.getItemTop(t.id),height:n.getItemHeight(t.id),left:s,width:r-s};}function bn(){var t=[],n=!1;function e(){t=[],n=!1;}function i(s,r,o){r.$getConfig(),s.getVisibleItems().forEach(function(l){var d=function(c,u,h,_){if(!_.isTaskExists(c.source)||!_.isTaskExists(c.target))return null;var f=qe(_.getTask(c.source),u),y=qe(_.getTask(c.target),u);if(!f||!y)return null;var v=100,b=Math.min(f.left,y.left)-v,m=Math.max(f.left+f.width,y.left+y.width)+v,g=Math.min(f.top,y.top)-v,p=Math.max(f.top+f.height,y.top+y.height)+v;return{top:g,height:p-g,bottom:p,left:b,width:m-b,right:m};}(l,r,0,o);d&&t.push({id:l.id,rec:d});}),t.sort(function(l,d){return l.rec.right<d.rec.right?-1:1;}),n=!0;}var a=!1;return function(s,r,o,l,d){(function(f){a||(a=!0,f.attachEvent(\"onPreFilter\",e),f.attachEvent(\"onStoreUpdated\",e),f.attachEvent(\"onClearAll\",e),f.attachEvent(\"onBeforeStoreUpdate\",e));})(l),n||i(l,r,s);for(var c=[],u=0;u<t.length;u++){var h=t[u],_=h.rec;_.right<d.x||_.left<d.x_end&&_.right>d.x&&_.top<d.y_end&&_.bottom>d.y&&c.push(h.id);}return{ids:c};};}function xn(t,n,e,i,a){var s=e.$gantt.getTask(t.source),r=e.$gantt.getTask(t.target),o=e.getItemTop(s.id),l=e.getItemHeight(s.id),d=e.getItemTop(r.id),c=e.getItemHeight(r.id);if(n.y>o+l&&n.y>d+c||n.y_end<d&&n.y_end<o)return!1;var u=e.posFromDate(s.start_date,e._getPositioningContext?e._getPositioningContext(t):null),h=e.posFromDate(s.end_date,e._getPositioningContext?e._getPositioningContext(t):null),_=e.posFromDate(r.start_date,e._getPositioningContext?e._getPositioningContext(t):null),f=e.posFromDate(r.end_date,e._getPositioningContext?e._getPositioningContext(t):null);if(u>h){var y=h;h=u,u=y;}return _>f&&(y=f,f=_,_=y),u+=-100,h+=100,_+=-100,f+=100,!(n.x>h&&n.x>f)&&!(n.x_end<u&&n.x_end<_);}function ya(t,n){if(t.view){var e=t.view;typeof e==\"string\"&&(e=n.$ui.getView(e)),e&&e.attachEvent&&e.attachEvent(\"onScroll\",function(){n.$services.getService(\"state\").getState(\"batchUpdate\").batch_update||e.$config.$skipSmartRenderOnScroll||t.requestUpdate&&t.requestUpdate();});}}var Bt=function(){function t(n,e,i,a){n&&(this.$container=De(n),this.$parent=n),this.$config=R(e,{headerHeight:33}),this.$gantt=a,this.$domEvents=a._createDomEventScope(),this.$id=e.id||\"c\"+ot(),this.$name=\"cell\",this.$factory=i,this.$externalComponent=null,lt(this);}return t.prototype.destructor=function(){this.$parent=this.$container=this.$view=null,this.$gantt.$services.getService(\"mouseEvents\").detach(\"click\",\"gantt_header_arrow\",this._headerClickHandler),this.$domEvents.detachAll(),this.callEvent(\"onDestroy\",[]),this.detachAllEvents();},t.prototype.cell=function(n){return null;},t.prototype.scrollTo=function(n,e){var i=this.$view;this.$config.html&&(i=this.$view.firstChild),1*n==n&&(i.scrollLeft=n),1*e==e&&(i.scrollTop=e);},t.prototype.clear=function(){this.getNode().innerHTML=\"\",this.getNode().className=\"gantt_layout_content\",this.getNode().style.padding=\"0\";},t.prototype.resize=function(n){if(this.$parent)return this.$parent.resize(n);n===!1&&(this.$preResize=!0);var e=this.$container,i=e.offsetWidth,a=e.offsetHeight,s=this.getSize();e===document.body&&(i=document.body.offsetWidth,a=document.body.offsetHeight),i<s.minWidth&&(i=s.minWidth),i>s.maxWidth&&(i=s.maxWidth),a<s.minHeight&&(a=s.minHeight),a>s.maxHeight&&(a=s.maxHeight),this.setSize(i,a),this.$preResize,this.$preResize=!1;},t.prototype.hide=function(){this._hide(!0),this.resize();},t.prototype.show=function(n){this._hide(!1),n&&this.$parent&&this.$parent.show(),this.resize();},t.prototype._hide=function(n){if(n===!0&&this.$view.parentNode)this.$view.parentNode.removeChild(this.$view);else if(n===!1&&!this.$view.parentNode){var e=this.$parent.cellIndex(this.$id);this.$parent.moveView(this,e);}this.$config.hidden=n;},t.prototype.$toHTML=function(n,e){n===void 0&&(n=\"\"),e=[e||\"\",this.$config.css||\"\"].join(\" \");var i=this.$config,a=\"\";if(i.raw)n=typeof i.raw==\"string\"?i.raw:\"\";else{if(!n){let s=null;s=typeof i.html==\"function\"?i.html():i.html,this.$gantt.config.external_render&&this.$gantt.config.external_render.isElement(s)&&(this.$externalComponent=s,s=null),n=\"<div class='gantt_layout_content' \"+(e?\" class='\"+e+\"' \":\"\")+\" >\"+(s||\"\")+\"</div>\";}i.header&&(a=\"<div class='gantt_layout_header'>\"+(i.canCollapse?\"<div class='gantt_layout_header_arrow'></div>\":\"\")+\"<div class='gantt_layout_header_content'>\"+i.header+\"</div></div>\");}return\"<div class='gantt_layout_cell \"+e+\"' data-cell-id='\"+this.$id+\"'>\"+a+n+\"</div>\";},t.prototype.$fill=function(n,e){this.$view=n,this.$parent=e,this.init();},t.prototype.getNode=function(){return this.$view.querySelector(\"gantt_layout_cell\")||this.$view;},t.prototype.init=function(){var n=this;this._headerClickHandler=function(e){it(e,\"data-cell-id\")==n.$id&&n.toggle();},this.$gantt.$services.getService(\"mouseEvents\").delegate(\"click\",\"gantt_header_arrow\",this._headerClickHandler),this.callEvent(\"onReady\",[]);},t.prototype.toggle=function(){this.$config.collapsed=!this.$config.collapsed,this.resize();},t.prototype.getSize=function(){var n={height:this.$config.height||0,width:this.$config.width||0,gravity:this.$config.gravity||1,minHeight:this.$config.minHeight||0,minWidth:this.$config.minWidth||0,maxHeight:this.$config.maxHeight||1e11,maxWidth:this.$config.maxWidth||1e11};if(this.$config.collapsed){var e=this.$config.mode===\"x\";n[e?\"width\":\"height\"]=n[e?\"maxWidth\":\"maxHeight\"]=this.$config.headerHeight;}return n;},t.prototype.getContentSize=function(){var n=this.$lastSize.contentX;n!==1*n&&(n=this.$lastSize.width);var e=this.$lastSize.contentY;return e!==1*e&&(e=this.$lastSize.height),{width:n,height:e};},t.prototype._getBorderSizes=function(){var n={top:0,right:0,bottom:0,left:0,horizontal:0,vertical:0};return this._currentBorders&&(this._currentBorders[this._borders.left]&&(n.left=1,n.horizontal++),this._currentBorders[this._borders.right]&&(n.right=1,n.horizontal++),this._currentBorders[this._borders.top]&&(n.top=1,n.vertical++),this._currentBorders[this._borders.bottom]&&(n.bottom=1,n.vertical++)),n;},t.prototype.setSize=function(n,e){this.$view.style.width=n+\"px\",this.$view.style.height=e+\"px\";var i=this._getBorderSizes(),a=e-i.vertical,s=n-i.horizontal;this.$lastSize={x:n,y:e,contentX:s,contentY:a},this.$config.header?this._sizeHeader():this._sizeContent();},t.prototype._borders={left:\"gantt_layout_cell_border_left\",right:\"gantt_layout_cell_border_right\",top:\"gantt_layout_cell_border_top\",bottom:\"gantt_layout_cell_border_bottom\"},t.prototype._setBorders=function(n,e){e||(e=this);var i=e.$view;for(var a in this._borders)Jt(i,this._borders[a]);typeof n==\"string\"&&(n=[n]);var s={};for(a=0;a<n.length;a++)Ct(i,n[a]),s[n[a]]=!0;e._currentBorders=s;},t.prototype._sizeContent=function(){var n=this.$view.childNodes[0];n&&n.className==\"gantt_layout_content\"&&(n.style.height=this.$lastSize.contentY+\"px\");},t.prototype._sizeHeader=function(){var n=this.$lastSize;n.contentY-=this.$config.headerHeight;var e=this.$view.childNodes[0],i=this.$view.childNodes[1],a=this.$config.mode===\"x\";if(this.$config.collapsed){if(i.style.display=\"none\",a){e.className=\"gantt_layout_header collapsed_x\",e.style.width=n.y+\"px\";var s=Math.floor(n.y/2-n.x/2);e.style.transform=\"rotate(90deg) translate(\"+s+\"px, \"+s+\"px)\",i.style.display=\"none\";}else e.className=\"gantt_layout_header collapsed_y\";}else e.className=a?\"gantt_layout_header\":\"gantt_layout_header vertical\",e.style.width=\"auto\",e.style.transform=\"\",i.style.display=\"\",i.style.height=n.contentY+\"px\";e.style.height=this.$config.headerHeight+\"px\";},t;}();function F(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);function i(){this.constructor=t;}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i());}var $n=function(t){function n(e,i,a){var s=t.apply(this,arguments)||this;return e&&(s.$root=!0),s._parseConfig(i),s.$name=\"layout\",s;}return F(n,t),n.prototype.destructor=function(){this.$container&&this.$view&&nn(this.$view);for(var e=0;e<this.$cells.length;e++)this.$cells[e].destructor();this.$cells=[],t.prototype.destructor.call(this);},n.prototype._resizeScrollbars=function(e,i){var a=!1,s=[],r=[];const o=[];function l(f){f.$parent.show(),a=!0,s.push(f);}function d(f){f.$parent.hide(),a=!0,r.push(f);}for(var c,u=0;u<i.length;u++)e[(c=i[u]).$config.scroll]?d(c):c.shouldHide()?o.push(c):c.shouldShow()?l(c):c.isVisible()?s.push(c):r.push(c);var h={};for(u=0;u<s.length;u++)s[u].$config.group&&(h[s[u].$config.group]=!0);for(o.forEach(function(f){f.$config.group&&h[f.$config.group]||d(f);}),u=0;u<r.length;u++)if((c=r[u]).$config.group&&h[c.$config.group]){l(c);for(var _=0;_<s.length;_++)if(s[_]==c){this.$gantt.$scrollbarRepaint=!0;break;}}return a;},n.prototype.getScrollbarsInfo=function(){const e=this.getCellsByType(\"scroller\"),i=[];return e.forEach(a=>{let s={};const{visible:r,direction:o,size:l,scrollSize:d,position:c}=a.getScrollState();let u=a._getLinkedViews().map(h=>h.$config.id);s.id=a.$id,s.visible=r,s.boundViews=u,o===\"x\"?(s.x=l,s.x_inner=d,s.x_pos=c||0):(s.y=l,s.y_inner=d,s.y_pos=c||0),i.push(s);}),i;},n.prototype._syncCellSizes=function(e,i){if(e){var a={};return this._eachChild(function(s){s.$config.group&&s.$name!=\"scrollbar\"&&s.$name!=\"resizer\"&&(a[s.$config.group]||(a[s.$config.group]=[]),a[s.$config.group].push(s));}),a[e]&&this._syncGroupSize(a[e],i),a[e];}},n.prototype._syncGroupSize=function(e,i){if(e.length)for(var a=e[0].$parent._xLayout?\"width\":\"height\",s=e[0].$parent.getNextSibling(e[0].$id)?1:-1,r=i.value,o=i.isGravity,l=0;l<e.length;l++){var d=e[l].getSize(),c=s>0?e[l].$parent.getNextSibling(e[l].$id):e[l].$parent.getPrevSibling(e[l].$id);c.$name==\"resizer\"&&(c=s>0?c.$parent.getNextSibling(c.$id):c.$parent.getPrevSibling(c.$id));var u=c.getSize();if(o)e[l].$config.gravity=r;else if(c[a]){var h=d.gravity+u.gravity,_=d[a]+u[a],f=h/_;e[l].$config.gravity=f*r,c.$config[a]=_-r,c.$config.gravity=h-f*r;}else e[l].$config[a]=r;var y=this.$gantt.$ui.getView(\"grid\");!y||e[l].$content!==y||y.$config.scrollable||o||(this.$gantt.config.grid_width=r);}},n.prototype.resize=function(e){var i=!1;if(this.$root&&!this._resizeInProgress&&(this.callEvent(\"onBeforeResize\",[]),i=!0,this._resizeInProgress=!0),t.prototype.resize.call(this,!0),t.prototype.resize.call(this,!1),i){var a=[];a=(a=(a=a.concat(this.getCellsByType(\"viewCell\"))).concat(this.getCellsByType(\"viewLayout\"))).concat(this.getCellsByType(\"hostCell\"));for(var s=this.getCellsByType(\"scroller\"),r=0;r<a.length;r++)a[r].$config.hidden||a[r].setContentSize();var o=this._getAutosizeMode(this.$config.autosize),l=this._resizeScrollbars(o,s);if(this.$config.autosize&&(this.autosize(this.$config.autosize),a.forEach(function(d){const c=d.$parent,u=c.getContentSize(o);o.x&&(c.$config.$originalWidthStored||(c.$config.$originalWidthStored=!0,c.$config.$originalWidth=c.$config.width),c.$config.width=u.width),o.y&&(c.$config.$originalHeightStored||(c.$config.$originalHeightStored=!0,c.$config.$originalHeight=c.$config.height),c.$config.height=u.height);}),l=!0),l)for(this.resize(),r=0;r<a.length;r++)a[r].$config.hidden||a[r].setContentSize();this.callEvent(\"onResize\",[]);}i&&(this._resizeInProgress=!1);},n.prototype._eachChild=function(e,i){if(e(i=i||this),i.$cells)for(var a=0;a<i.$cells.length;a++)this._eachChild(e,i.$cells[a]);},n.prototype.isChild=function(e){var i=!1;return this._eachChild(function(a){a!==e&&a.$content!==e||(i=!0);}),i;},n.prototype.getCellsByType=function(e){var i=[];if(e===this.$name&&i.push(this),this.$content&&this.$content.$name==e&&i.push(this.$content),this.$cells)for(var a=0;a<this.$cells.length;a++){var s=n.prototype.getCellsByType.call(this.$cells[a],e);s.length&&i.push.apply(i,s);}return i;},n.prototype.getNextSibling=function(e){var i=this.cellIndex(e);return i>=0&&this.$cells[i+1]?this.$cells[i+1]:null;},n.prototype.getPrevSibling=function(e){var i=this.cellIndex(e);return i>=0&&this.$cells[i-1]?this.$cells[i-1]:null;},n.prototype.cell=function(e){for(var i=0;i<this.$cells.length;i++){var a=this.$cells[i];if(a.$id===e)return a;var s=a.cell(e);if(s)return s;}},n.prototype.cellIndex=function(e){for(var i=0;i<this.$cells.length;i++)if(this.$cells[i].$id===e)return i;return-1;},n.prototype.moveView=function(e,i){if(this.$cells[i]!==e)return window.alert(\"Not implemented\");i+=this.$config.header?1:0;var a=this.$view;i>=a.childNodes.length?a.appendChild(e.$view):a.insertBefore(e.$view,a.childNodes[i]);},n.prototype._parseConfig=function(e){this.$cells=[],this._xLayout=!e.rows;for(var i=e.rows||e.cols||e.views,a=0;a<i.length;a++){var s=i[a];s.mode=this._xLayout?\"x\":\"y\";var r=this.$factory.initUI(s,this);r?(r.$parent=this,this.$cells.push(r)):(i.splice(a,1),a--);}},n.prototype.getCells=function(){return this.$cells;},n.prototype.render=function(){var e=en(this.$container,this.$toHTML());this.$fill(e,null);const i=this.$gantt;this._eachChild(a=>{a.$externalComponent&&(i.config.external_render.renderElement(a.$externalComponent,a.$view.querySelector(\".gantt_layout_content\")),a.$externalComponent=null);}),this.callEvent(\"onReady\",[]),this.resize(),this.render=this.resize;},n.prototype.$fill=function(e,i){this.$view=e,this.$parent=i;for(var a=an(e,\"gantt_layout_cell\"),s=a.length-1;s>=0;s--){var r=this.$cells[s];r.$fill(a[s],this),r.$config.hidden&&r.$view.parentNode.removeChild(r.$view);}},n.prototype.$toHTML=function(){for(var e=this._xLayout?\"x\":\"y\",i=[],a=0;a<this.$cells.length;a++)i.push(this.$cells[a].$toHTML());return t.prototype.$toHTML.call(this,i.join(\"\"),(this.$root?\"gantt_layout_root \":\"\")+\"gantt_layout gantt_layout_\"+e);},n.prototype.getContentSize=function(e){for(var i,a,s,r=0,o=0,l=0;l<this.$cells.length;l++)(a=this.$cells[l]).$config.hidden||(i=a.getContentSize(e),a.$config.view===\"scrollbar\"&&e[a.$config.scroll]&&(i.height=0,i.width=0),a.$config.resizer&&(this._xLayout?i.height=0:i.width=0),s=a._getBorderSizes(),this._xLayout?(r+=i.width+s.horizontal,o=Math.max(o,i.height+s.vertical)):(r=Math.max(r,i.width+s.horizontal),o+=i.height+s.vertical));return{width:r+=(s=this._getBorderSizes()).horizontal,height:o+=s.vertical};},n.prototype._cleanElSize=function(e){return 1*(e||\"\").toString().replace(\"px\",\"\")||0;},n.prototype._getBoxStyles=function(e){var i=null,a=[\"width\",\"height\",\"paddingTop\",\"paddingBottom\",\"paddingLeft\",\"paddingRight\",\"borderLeftWidth\",\"borderRightWidth\",\"borderTopWidth\",\"borderBottomWidth\"],s={boxSizing:(i=window.getComputedStyle?window.getComputedStyle(e,null):{width:e.clientWidth,height:e.clientHeight}).boxSizing==\"border-box\"};i.MozBoxSizing&&(s.boxSizing=i.MozBoxSizing==\"border-box\");for(var r=0;r<a.length;r++)s[a[r]]=i[a[r]]?this._cleanElSize(i[a[r]]):0;var o={horPaddings:s.paddingLeft+s.paddingRight+s.borderLeftWidth+s.borderRightWidth,vertPaddings:s.paddingTop+s.paddingBottom+s.borderTopWidth+s.borderBottomWidth,borderBox:s.boxSizing,innerWidth:s.width,innerHeight:s.height,outerWidth:s.width,outerHeight:s.height};return o.borderBox?(o.innerWidth-=o.horPaddings,o.innerHeight-=o.vertPaddings):(o.outerWidth+=o.horPaddings,o.outerHeight+=o.vertPaddings),o;},n.prototype._getAutosizeMode=function(e){var i={x:!1,y:!1};return e===\"xy\"?i.x=i.y=!0:e===\"y\"||e===!0?i.y=!0:e===\"x\"&&(i.x=!0),i;},n.prototype.autosize=function(e){var i=this._getAutosizeMode(e),a=this._getBoxStyles(this.$container),s=this.getContentSize(e),r=this.$container;i.x&&(a.borderBox&&(s.width+=a.horPaddings),r.style.width=s.width+\"px\"),i.y&&(a.borderBox&&(s.height+=a.vertPaddings),r.style.height=s.height+\"px\");},n.prototype.getSize=function(){this._sizes=[];for(var e=0,i=0,a=1e11,s=0,r=1e11,o=0,l=0;l<this.$cells.length;l++){var d=this._sizes[l]=this.$cells[l].getSize();this.$cells[l].$config.hidden||(this._xLayout?(!d.width&&d.minWidth?e+=d.minWidth:e+=d.width,a+=d.maxWidth,i+=d.minWidth,s=Math.max(s,d.height),r=Math.min(r,d.maxHeight),o=Math.max(o,d.minHeight)):(!d.height&&d.minHeight?s+=d.minHeight:s+=d.height,r+=d.maxHeight,o+=d.minHeight,e=Math.max(e,d.width),a=Math.min(a,d.maxWidth),i=Math.max(i,d.minWidth)));}var c=t.prototype.getSize.call(this);return c.maxWidth>=1e5&&(c.maxWidth=a),c.maxHeight>=1e5&&(c.maxHeight=r),c.minWidth=c.minWidth!=c.minWidth?0:c.minWidth,c.minHeight=c.minHeight!=c.minHeight?0:c.minHeight,this._xLayout?(c.minWidth+=this.$config.margin*this.$cells.length||0,c.minWidth+=2*this.$config.padding||0,c.minHeight+=2*this.$config.padding||0):(c.minHeight+=this.$config.margin*this.$cells.length||0,c.minHeight+=2*this.$config.padding||0),c;},n.prototype._calcFreeSpace=function(e,i,a){var s=a?i.minWidth:i.minHeight,r=i.maxWidth,o=e;return o?(o>r&&(o=r),o<s&&(o=s),this._free-=o):((o=Math.floor(this._free/this._gravity*i.gravity))>r&&(o=r,this._free-=o,this._gravity-=i.gravity),o<s&&(o=s,this._free-=o,this._gravity-=i.gravity)),o;},n.prototype._calcSize=function(e,i,a){var s=e,r=a?i.minWidth:i.minHeight,o=a?i.maxWidth:i.maxHeight;return s||(s=Math.floor(this._free/this._gravity*i.gravity)),s>o&&(s=o),s<r&&(s=r),s;},n.prototype._configureBorders=function(){this.$root&&this._setBorders([this._borders.left,this._borders.top,this._borders.right,this._borders.bottom],this);for(var e=this._xLayout?this._borders.right:this._borders.bottom,i=this.$cells,a=i.length-1,s=a;s>=0;s--)if(!i[s].$config.hidden){a=s;break;}for(s=0;s<i.length;s++)if(!i[s].$config.hidden){var r=s>=a,o=\"\";!r&&i[s+1]&&i[s+1].$config.view==\"scrollbar\"&&(this._xLayout?r=!0:o=\"gantt_layout_cell_border_transparent\"),this._setBorders(r?[]:[e,o],i[s]);}},n.prototype._updateCellVisibility=function(){for(var e=this._visibleCells||{},i=!this._visibleCells,a={},s=null,r=[],o=0;o<this._sizes.length;o++)(s=this.$cells[o]).$config.hide_empty&&r.push(s),!i&&s.$config.hidden&&e[s.$id]?s._hide(!0):s.$config.hidden||e[s.$id]||s._hide(!1),s.$config.hidden||(a[s.$id]=!0);for(this._visibleCells=a,o=0;o<r.length;o++){var l=(s=r[o]).$cells,d=!0;l.forEach(function(c){c.$config.hidden||c.$config.resizer||(d=!1);}),s.$config.hidden=d;}},n.prototype.setSize=function(e,i){this._configureBorders(),t.prototype.setSize.call(this,e,i),i=this.$lastSize.contentY,e=this.$lastSize.contentX;var a,s,r=this.$config.padding||0;this.$view.style.padding=r+\"px\",this._gravity=0,this._free=this._xLayout?e:i,this._free-=2*r,this._updateCellVisibility();for(var o=0;o<this._sizes.length;o++)if(!(a=this.$cells[o]).$config.hidden){var l=this.$config.margin||0;a.$name!=\"resizer\"||l||(l=-1);var d=a.$view,c=this._xLayout?\"marginRight\":\"marginBottom\";o!==this.$cells.length-1&&(d.style[c]=l+\"px\",this._free-=l),s=this._sizes[o],this._xLayout?s.width||(this._gravity+=s.gravity):s.height||(this._gravity+=s.gravity);}for(o=0;o<this._sizes.length;o++)if(!(a=this.$cells[o]).$config.hidden){var u=(s=this._sizes[o]).width,h=s.height;this._xLayout?this._calcFreeSpace(u,s,!0):this._calcFreeSpace(h,s,!1);}for(o=0;o<this.$cells.length;o++)if(!(a=this.$cells[o]).$config.hidden){s=this._sizes[o];var _=void 0,f=void 0;this._xLayout?(_=this._calcSize(s.width,s,!0),f=i-2*r):(_=e-2*r,f=this._calcSize(s.height,s,!1)),a.setSize(_,f);}},n;}(Bt),ba=function(t){function n(e,i,a){for(var s=t.apply(this,arguments)||this,r=0;r<s.$cells.length;r++)s.$cells[r].$config.hidden=r!==0;return s.$cell=s.$cells[0],s.$name=\"viewLayout\",s;}return F(n,t),n.prototype.cell=function(e){var i=t.prototype.cell.call(this,e);return i.$view||this.$fill(null,this),i;},n.prototype.moveView=function(e){var i=this.$view;this.$cell&&(this.$cell.$config.hidden=!0,i.removeChild(this.$cell.$view)),this.$cell=e,i.appendChild(e.$view);},n.prototype.setSize=function(e,i){Bt.prototype.setSize.call(this,e,i);},n.prototype.setContentSize=function(){var e=this.$lastSize;this.$cell.setSize(e.contentX,e.contentY);},n.prototype.getSize=function(){var e=t.prototype.getSize.call(this);if(this.$cell){var i=this.$cell.getSize();if(this.$config.byMaxSize)for(var a=0;a<this.$cells.length;a++){var s=this.$cells[a].getSize();for(var r in i)i[r]=Math.max(i[r],s[r]);}for(var o in e)e[o]=e[o]||i[o];e.gravity=Math.max(e.gravity,i.gravity);}return e;},n;}($n),xa=function(t){function n(e,i,a){var s=t.apply(this,arguments)||this;if(i.view){i.id&&(this.$id=ot());var r=X(i);if(delete r.config,delete r.templates,this.$content=this.$factory.createView(i.view,this,r,this),!this.$content)return!1;}return s.$name=\"viewCell\",s;}return F(n,t),n.prototype.destructor=function(){this.clear(),t.prototype.destructor.call(this);},n.prototype.clear=function(){if(this.$initialized=!1,this.$content){var e=this.$content.unload||this.$content.destructor;e&&e.call(this.$content);}t.prototype.clear.call(this);},n.prototype.scrollTo=function(e,i){this.$content&&this.$content.scrollTo?this.$content.scrollTo(e,i):t.prototype.scrollTo.call(this,e,i);},n.prototype._setContentSize=function(e,i){var a=this._getBorderSizes();if(typeof e==\"number\"){var s=e+a.horizontal;this.$config.width=s;}if(typeof i==\"number\"){var r=i+a.vertical;this.$config.height=r;}},n.prototype.setSize=function(e,i){if(t.prototype.setSize.call(this,e,i),!this.$preResize&&this.$content&&!this.$initialized){this.$initialized=!0;var a=this.$view.childNodes[0],s=this.$view.childNodes[1];s||(s=a),this.$content.init(s);}},n.prototype.setContentSize=function(){!this.$preResize&&this.$content&&this.$initialized&&this.$content.setSize(this.$lastSize.contentX,this.$lastSize.contentY);},n.prototype.getContentSize=function(){var e=t.prototype.getContentSize.call(this);if(this.$content&&this.$initialized){var i=this.$content.getSize();e.width=i.contentX===void 0?i.width:i.contentX,e.height=i.contentY===void 0?i.height:i.contentY;}var a=this._getBorderSizes();return e.width+=a.horizontal,e.height+=a.vertical,e;},n;}(Bt),$a=function(t){var n=[\"altKey\",\"shiftKey\",\"metaKey\"];function e(a,s,r,o){var l=t.apply(this,arguments)||this;this.$config=R(s,{scroll:\"x\"}),l._scrollHorizontalHandler=B(l._scrollHorizontalHandler,l),l._scrollVerticalHandler=B(l._scrollVerticalHandler,l),l._outerScrollVerticalHandler=B(l._outerScrollVerticalHandler,l),l._outerScrollHorizontalHandler=B(l._outerScrollHorizontalHandler,l),l._mouseWheelHandler=B(l._mouseWheelHandler,l),this.$config.hidden=!0;var d=o.config.scroll_size;return o.env.isIE&&(d+=1),this._isHorizontal()?(l.$config.height=d,l.$parent.$config.height=d):(l.$config.width=d,l.$parent.$config.width=d),this.$config.scrollPosition=0,l.$name=\"scroller\",l;}function i(a,s){if(s.push(a),a.$cells)for(var r=0;r<a.$cells.length;r++)i(a.$cells[r],s);}return F(e,t),e.prototype.init=function(a){a.innerHTML=this.$toHTML(),this.$view=a.firstChild,this.$view||this.init(),this._isVertical()?this._initVertical():this._initHorizontal(),this._initMouseWheel(),this._initLinkedViews();},e.prototype.$toHTML=function(){return\"<div class='gantt_layout_cell \"+(this._isHorizontal()?\"gantt_hor_scroll\":\"gantt_ver_scroll\")+\"'><div style='\"+(this._isHorizontal()?\"width:2000px\":\"height:2000px\")+\"'></div></div>\";},e.prototype._getRootParent=function(){for(var a=this.$parent;a&&a.$parent;)a=a.$parent;if(a)return a;},e.prototype._eachView=function(){var a=[];return i(this._getRootParent(),a),a;},e.prototype._getLinkedViews=function(){for(var a=this._eachView(),s=[],r=0;r<a.length;r++)a[r].$config&&(this._isVertical()&&a[r].$config.scrollY==this.$id||this._isHorizontal()&&a[r].$config.scrollX==this.$id)&&s.push(a[r]);return s;},e.prototype._initHorizontal=function(){this.$scroll_hor=this.$view,this.$domEvents.attach(this.$view,\"scroll\",this._scrollHorizontalHandler);},e.prototype._initLinkedViews=function(){for(var a=this._getLinkedViews(),s=this._isVertical()?\"gantt_layout_outer_scroll gantt_layout_outer_scroll_vertical\":\"gantt_layout_outer_scroll gantt_layout_outer_scroll_horizontal\",r=0;r<a.length;r++)Ct(a[r].$view||a[r].getNode(),s);},e.prototype._initVertical=function(){this.$scroll_ver=this.$view,this.$domEvents.attach(this.$view,\"scroll\",this._scrollVerticalHandler);},e.prototype._updateLinkedViews=function(){},e.prototype._initMouseWheel=function(){kt.isFF?this.$domEvents.attach(this._getRootParent().$view,\"wheel\",this._mouseWheelHandler,{passive:!1}):this.$domEvents.attach(this._getRootParent().$view,\"mousewheel\",this._mouseWheelHandler,{passive:!1});},e.prototype.scrollHorizontally=function(a){if(!this._scrolling){this._scrolling=!0,this.$scroll_hor.scrollLeft=a,this.$config.codeScrollLeft=a,a=this.$scroll_hor.scrollLeft;for(var s=this._getLinkedViews(),r=0;r<s.length;r++)s[r].scrollTo&&s[r].scrollTo(a,void 0);var o=this.$config.scrollPosition;this.$config.scrollPosition=a,this.callEvent(\"onScroll\",[o,a,this.$config.scroll]),this._scrolling=!1;}},e.prototype.scrollVertically=function(a){if(!this._scrolling){this._scrolling=!0,this.$scroll_ver.scrollTop=a,a=this.$scroll_ver.scrollTop;for(var s=this._getLinkedViews(),r=0;r<s.length;r++)s[r].scrollTo&&s[r].scrollTo(void 0,a);var o=this.$config.scrollPosition;this.$config.scrollPosition=a,this.callEvent(\"onScroll\",[o,a,this.$config.scroll]),this._scrolling=!1;}},e.prototype._isVertical=function(){return this.$config.scroll==\"y\";},e.prototype._isHorizontal=function(){return this.$config.scroll==\"x\";},e.prototype._scrollHorizontalHandler=function(a){if(!this._isVertical()&&!this._scrolling){if(/* @__PURE__ */new Date()-(this._wheel_time||0)<100)return!0;var s=this.$scroll_hor.scrollLeft;this.scrollHorizontally(s),this._oldLeft=this.$scroll_hor.scrollLeft;}},e.prototype._outerScrollHorizontalHandler=function(a){this._isVertical();},e.prototype.show=function(){this.$parent.show();},e.prototype.hide=function(){this.$parent.hide();},e.prototype._getScrollSize=function(){for(var a,s=0,r=0,o=this._isHorizontal(),l=this._getLinkedViews(),d=o?\"scrollWidth\":\"scrollHeight\",c=o?\"contentX\":\"contentY\",u=o?\"x\":\"y\",h=this._getScrollOffset(),_=0;_<l.length;_++)if((a=l[_])&&a.$content&&a.$content.getSize&&!a.$config.hidden){var f,y=a.$content.getSize();if(f=y.hasOwnProperty(d)?y[d]:y[c],h)y[c]>y[u]&&y[c]>s&&f>y[u]-h+2&&(s=f+(o?0:2),r=y[u]);else{var v=Math.max(y[c]-f,0);(f+=v)>Math.max(y[u]-v,0)&&f>s&&(s=f,r=y[u]);}}return{outerScroll:r,innerScroll:s};},e.prototype.scroll=function(a){this._isHorizontal()?this.scrollHorizontally(a):this.scrollVertically(a);},e.prototype.getScrollState=function(){return{visible:this.isVisible(),direction:this.$config.scroll,size:this.$config.outerSize,scrollSize:this.$config.scrollSize||0,position:this.$config.scrollPosition||0};},e.prototype.setSize=function(a,s){t.prototype.setSize.apply(this,arguments);var r=this._getScrollSize(),o=(this._isVertical()?s:a)-this._getScrollOffset()+(this._isHorizontal()?1:0);r.innerScroll&&o>r.outerScroll&&(r.innerScroll+=o-r.outerScroll),this.$config.scrollSize=r.innerScroll,this.$config.width=a,this.$config.height=s,this._setScrollSize(r.innerScroll);},e.prototype.isVisible=function(){return!(!this.$parent||!this.$parent.$view.parentNode);},e.prototype.shouldShow=function(){var a=this._getScrollSize();return!(!a.innerScroll&&this.$parent&&this.$parent.$view.parentNode)&&!(!a.innerScroll||this.$parent&&this.$parent.$view.parentNode);},e.prototype.shouldHide=function(){return!(this._getScrollSize().innerScroll||!this.$parent||!this.$parent.$view.parentNode);},e.prototype.toggleVisibility=function(){this.shouldHide()?this.hide():this.shouldShow()&&this.show();},e.prototype._getScaleOffset=function(a){var s=0;return!a||a.$config.view!=\"timeline\"&&a.$config.view!=\"grid\"||(s=a.$content.$getConfig().scale_height),s;},e.prototype._getScrollOffset=function(){var a=0;if(this._isVertical()){var s=this.$parent.$parent;a=Math.max(this._getScaleOffset(s.getPrevSibling(this.$parent.$id)),this._getScaleOffset(s.getNextSibling(this.$parent.$id)));}else for(var r=this._getLinkedViews(),o=0;o<r.length;o++){var l=r[o].$parent.$cells,d=l[l.length-1];if(d&&d.$config.view==\"scrollbar\"&&d.$config.hidden===!1){a=d.$config.width;break;}}return a||0;},e.prototype._setScrollSize=function(a){var s=this._isHorizontal()?\"width\":\"height\",r=this._isHorizontal()?this.$scroll_hor:this.$scroll_ver,o=this._getScrollOffset(),l=r.firstChild;o?this._isVertical()?(this.$config.outerSize=this.$config.height-o+3,r.style.height=this.$config.outerSize+\"px\",r.style.top=o-1+\"px\",Ct(r,this.$parent._borders.top),Ct(r.parentNode,\"gantt_task_vscroll\")):(this.$config.outerSize=this.$config.width-o+1,r.style.width=this.$config.outerSize+\"px\"):(r.style.top=\"auto\",Jt(r,this.$parent._borders.top),Jt(r.parentNode,\"gantt_task_vscroll\"),this.$config.outerSize=this.$config.height),l.style[s]=a+\"px\";},e.prototype._scrollVerticalHandler=function(a){if(!this._scrollHorizontalHandler()&&!this._scrolling){var s=this.$scroll_ver.scrollTop;s!=this._oldTop&&(this.scrollVertically(s),this._oldTop=this.$scroll_ver.scrollTop);}},e.prototype._outerScrollVerticalHandler=function(a){this._scrollHorizontalHandler();},e.prototype._checkWheelTarget=function(a){for(var s=this._getLinkedViews().concat(this),r=0;r<s.length;r++)if(K(a,s[r].$view))return!0;return!1;},e.prototype._mouseWheelHandler=function(a){var s=a.target||a.srcElement;if(this._checkWheelTarget(s)){this._wheel_time=/* @__PURE__ */new Date();var r={},o={x:1,y:1},l=this.$gantt.config.wheel_scroll_sensitivity;typeof l==\"number\"&&l?o={x:l,y:l}:{}.toString.apply(l)==\"[object Object]\"&&(o={x:l.x,y:l.y});var d=kt.isFF,c=d?a.deltaX:a.wheelDeltaX,u=d?a.deltaY:a.wheelDelta,h=-20;if(d){const k=parseInt(navigator.userAgent.split(\"Firefox/\")[1]);h=k<=87?a.deltaMode!==0?-40:-10:k<=90?-3:k<=96?-1.5:-1;}var _=d?c*h*o.x:2*c*o.x,f=d?u*h*o.y:u*o.y,y=this.$gantt.config.horizontal_scroll_key;if(y!==!1&&n.indexOf(y)>=0&&(!a[y]||a.deltaX||a.wheelDeltaX||(_=2*f,f=0)),_&&Math.abs(_)>Math.abs(f)){if(this._isVertical())return;if(r.x||!this.$scroll_hor||!this.$scroll_hor.offsetWidth)return!0;var v=_/-40,b=this._oldLeft,m=b+30*v;if(this.scrollHorizontally(m),this.$scroll_hor.scrollLeft=m,b==this.$scroll_hor.scrollLeft)return!0;this._oldLeft=this.$scroll_hor.scrollLeft;}else{if(this._isHorizontal())return;if(r.y||!this.$scroll_ver||!this.$scroll_ver.offsetHeight)return!0;v=f/-40,f===void 0&&(v=a.detail);var g=this._oldTop,p=this.$scroll_ver.scrollTop+30*v;if(this.scrollVertically(p),this.$scroll_ver.scrollTop=p,g==this.$scroll_ver.scrollTop)return!0;this._oldTop=this.$scroll_ver.scrollTop;}return a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,!1;}},e;}(Bt);function wn(t){var n={},e={},i=null,a=-1,s=null,r=/* @__PURE__ */function(o){var l=-1,d=-1;return{resetCache:function(){l=-1,d=-1;},_getRowHeight:function(){return l===-1&&(l=o.$getConfig().row_height),l;},_refreshState:function(){this.resetCache(),d=!0;var c=o.$config.rowStore;if(c)for(var u=this._getRowHeight(),h=0;h<c.fullOrder.length;h++){var _=c.getItem(c.fullOrder[h]);if(_&&_.row_height&&_.row_height!==u){d=!1;break;}}},canUseSimpleCalculation:function(){return d===-1&&this._refreshState(),d;},getRowTop:function(c){return o.$config.rowStore?c*this._getRowHeight():0;},getItemHeight:function(c){return this._getRowHeight();},getTotalHeight:function(){return o.$config.rowStore?o.$config.rowStore.countVisible()*this._getRowHeight():0;},getItemIndexByTopPosition:function(c){return o.$config.rowStore?Math.floor(c/this._getRowHeight()):0;}};}(t);return{_resetTopPositionHeight:function(){n={},e={},r.resetCache();},_resetHeight:function(){var o=this.$config.rowStore,l=this.getCacheStateTotalHeight(o);s?this.shouldClearHeightCache(s,l)&&(s=l,i=null):s=l,a=-1,r.resetCache();},getRowTop:function(o){if(r.canUseSimpleCalculation())return r.getRowTop(o);var l=this.$config.rowStore;if(!l)return 0;if(e[o]!==void 0)return e[o];for(var d=l.getIndexRange(),c=0,u=0,h=0;h<d.length;h++)e[h]=c,c+=this.getItemHeight(d[h].id),h<o&&(u=c);return u;},getItemTop:function(o){if(this.$config.rowStore){if(n[o]!==void 0)return n[o];var l=this.$config.rowStore;if(!l)return 0;var d=l.getIndexById(o);if(d===-1&&l.getParent&&l.exists(o)){var c=l.getParent(o);if(l.exists(c)){var u=l.getItem(c);if(this.$gantt.isSplitTask(u))return this.getItemTop(c);}}return n[o]=this.getRowTop(d),n[o];}return 0;},getItemHeight:function(o){if(r.canUseSimpleCalculation())return r.getItemHeight(o);if(!i&&this.$config.rowStore&&this._fillHeightCache(this.$config.rowStore),i[o]!==void 0)return i[o];var l=this.$getConfig().row_height;if(this.$config.rowStore){var d=this.$config.rowStore;if(!d)return l;var c=d.getItem(o);return i[o]=c&&c.row_height||l;}return l;},_fillHeightCache:function(o){if(o){i={};var l=this.$getConfig().row_height;o.eachItem(function(d){return i[d.id]=d&&d.row_height||l;});}},getCacheStateTotalHeight:function(o){var l=this.$getConfig().row_height,d={},c=[],u=0;return o&&o.eachItem(function(h){c.push(h),d[h.id]=h.row_height,u+=h.row_height||l;}),{globalHeight:l,items:c,count:c.length,sumHeight:u};},shouldClearHeightCache:function(o,l){if(o.count!=l.count||o.globalHeight!=l.globalHeight||o.sumHeight!=l.sumHeight)return!0;for(var d in o.items){var c=l.items[d];if(c!==void 0&&c!=o.items[d])return!0;}return!1;},getTotalHeight:function(){if(r.canUseSimpleCalculation())return r.getTotalHeight();if(a!=-1)return a;if(this.$config.rowStore){var o=this.$config.rowStore;this._fillHeightCache(o);var l=this.getItemHeight.bind(this),d=o.getVisibleItems(),c=0;return d.forEach(function(u){c+=l(u.id);}),a=c,c;}return 0;},getItemIndexByTopPosition:function(o){if(this.$config.rowStore){if(r.canUseSimpleCalculation())return r.getItemIndexByTopPosition(o);for(var l=this.$config.rowStore,d=0;d<l.countVisible();d++){var c=this.getRowTop(d),u=this.getRowTop(d+1);if(!u){var h=l.getIdByIndex(d);u=c+this.getItemHeight(h);}if(o>=c&&o<u)return d;}return l.countVisible()+2;}return 0;}};}const wa=function(){return{render:function(){},destroy:function(){}};};var Gt=function(t,n,e,i){this.$config=R({},n||{}),this.$scaleHelper=new Xt(i),this.$gantt=i,this._posFromDateCache={},this._posFromWorkTimeCache={},this._timelineDragScroll=null,R(this,wn(this)),lt(this);};Gt.prototype={init:function(t){t.innerHTML+=\"<div class='gantt_task' style='width:inherit;height:inherit;'></div>\",this.$task=t.childNodes[0],this.$task.innerHTML=\"<div class='gantt_task_scale'></div><div class='gantt_data_area'></div>\",this.$task_scale=this.$task.childNodes[0],this.$task_data=this.$task.childNodes[1],this.$task_data.innerHTML=\"<div class='gantt_task_bg'></div><div class='gantt_task_baselines'></div><div class='gantt_links_area'></div><div class='gantt_bars_area'></div><div class='gantt_task_constraints'></div><div class='gantt_task_deadlines'></div>\",this.$task_bg=this.$task_data.childNodes[0],this.$task_baselines=this.$task_data.childNodes[1],this.$task_links=this.$task_data.childNodes[2],this.$task_bars=this.$task_data.childNodes[3],this.$task_constraints=this.$task_data.childNodes[4],this.$task_deadlines=this.$task_data.childNodes[5],this._tasks={col_width:0,width:[],full_width:0,trace_x:[],rendered:{}};var n=this.$getConfig(),e=n[this.$config.bind+\"_attribute\"],i=n[this.$config.bindLinks+\"_attribute\"];!e&&this.$config.bind&&(e=\"data-\"+this.$config.bind+\"-id\"),!i&&this.$config.bindLinks&&(i=\"data-\"+this.$config.bindLinks+\"-id\"),this.$config.item_attribute=e||null,this.$config.link_attribute=i||null;var a=this._createLayerConfig();this.$config.layers||(this.$config.layers=a.tasks),this.$config.linkLayers||(this.$config.linkLayers=a.links),this._attachLayers(this.$gantt),this.callEvent(\"onReady\",[]),this.$gantt.ext.dragTimeline&&(this._timelineDragScroll=this.$gantt.ext.dragTimeline.create(),this._timelineDragScroll.attach(this));},setSize:function(t,n){var e=this.$getConfig();if(1*t===t&&(this.$config.width=t),1*n===n){this.$config.height=n;var i=Math.max(this.$config.height-e.scale_height);this.$task_data.style.height=i+\"px\";}this.refresh(),this.$task_bg.style.backgroundImage=\"\",e.smart_rendering&&this.$config.rowStore?this.$task_bg.style.height=this.getTotalHeight()+\"px\":this.$task_bg.style.height=\"\";for(var a=this._tasks,s=this.$task_data.childNodes,r=0,o=s.length;r<o;r++){var l=s[r];l.hasAttribute(\"data-layer\")&&l.style&&(l.style.width=a.full_width+\"px\");}},isVisible:function(){return this.$parent&&this.$parent.$config?!this.$parent.$config.hidden:this.$task.offsetWidth;},getSize:function(){var t=this.$getConfig(),n=this.$config.rowStore?this.getTotalHeight():0,e=this.isVisible()?this._tasks.full_width:0;return{x:this.isVisible()?this.$config.width:0,y:this.isVisible()?this.$config.height:0,contentX:this.isVisible()?e:0,contentY:this.isVisible()?t.scale_height+n:0,scrollHeight:this.isVisible()?n:0,scrollWidth:this.isVisible()?e:0};},scrollTo:function(t,n){if(this.isVisible()){var e=!1;this.$config.scrollTop=this.$config.scrollTop||0,this.$config.scrollLeft=this.$config.scrollLeft||0,1*n===n&&(this.$config.scrollTop=n,this.$task_data.scrollTop=this.$config.scrollTop,e=!0),1*t===t&&(this.$task.scrollLeft=t,this.$config.scrollLeft=this.$task.scrollLeft,this._refreshScales(),e=!0),e&&this.callEvent(\"onScroll\",[this.$config.scrollLeft,this.$config.scrollTop]);}},_refreshScales:function(){if(this.isVisible()&&this.$getConfig().smart_scales){var t=this.getViewPort(),n=this._scales;this.$task_scale.innerHTML=this._getScaleChunkHtml(n,t.x,t.x_end);}},getViewPort:function(){var t=this.$config.scrollLeft||0,n=this.$config.scrollTop||0,e=this.$config.height||0,i=this.$config.width||0;return{y:n,y_end:n+e,x:t,x_end:t+i,height:e,width:i};},_createLayerConfig:function(){var t=this,n=function(){return t.isVisible();};this.$gantt;var e=[{expose:!0,renderer:this.$gantt.$ui.layers.taskBar(),container:this.$task_bars,filter:[n,function(i,a){return!a.hide_bar;}]}];return e.push({renderer:this.$gantt.$ui.layers.taskBg(),container:this.$task_bg,filter:[n]}),{tasks:e,links:[{expose:!0,renderer:this.$gantt.$ui.layers.link(),container:this.$task_links,filter:[n]}]};},_attachLayers:function(t){this._taskLayers=[],this._linkLayers=[];var n=this,e=this.$gantt.$services.getService(\"layers\");if(this.$config.bind){this._bindStore();var i=e.getDataRender(this.$config.bind);i||(i=e.createDataRender({name:this.$config.bind,defaultContainer:function(){return n.$task_data;}})),i.container=function(){return n.$task_data;};for(var a=this.$config.layers,s=0;a&&s<a.length;s++){typeof(d=a[s])==\"string\"&&(d=this.$gantt.$ui.layers[d]()),(typeof d==\"function\"||d&&d.render&&d.update)&&(d={renderer:d}),d.view=this;var r=i.addLayer(d);this._taskLayers.push(r),d.expose&&(this._taskRenderer=i.getLayer(r));}this._initStaticBackgroundRender();}if(this.$config.bindLinks){n.$config.linkStore=n.$gantt.getDatastore(n.$config.bindLinks);var o=e.getDataRender(this.$config.bindLinks);o||(o=e.createDataRender({name:this.$config.bindLinks,defaultContainer:function(){return n.$task_data;}}));var l=this.$config.linkLayers;for(s=0;l&&s<l.length;s++){var d;typeof d==\"string\"&&(d=this.$gantt.$ui.layers[d]()),(d=l[s]).view=this;var c=o.addLayer(d);this._taskLayers.push(c),l[s].expose&&(this._linkRenderer=o.getLayer(c));}}},_initStaticBackgroundRender:function(){var t=this,n=wa(),e=t.$config.rowStore;e&&(this._staticBgHandler=e.attachEvent(\"onStoreUpdated\",function(i,a,s){if(i===null&&t.isVisible()){var r=t.$getConfig();if(r.static_background||r.timeline_placeholder){var o=t.$gantt.getDatastore(t.$config.bind),l=t.$task_bg_static;if(l||((l=document.createElement(\"div\")).className=\"gantt_task_bg\",t.$task_bg_static=l,t.$task_bg.nextSibling?t.$task_data.insertBefore(l,t.$task_bg.nextSibling):t.$task_data.appendChild(l)),o){var d=t.getTotalHeight();r.timeline_placeholder&&(d=r.timeline_placeholder.height||t.$task_data.offsetHeight||99999),n.render(l,r,t.getScale(),d,t.getItemHeight(a?a.id:null));}}else r.static_background&&t.$task_bg_static&&t.$task_bg_static.parentNode&&t.$task_bg_static.parentNode.removeChild(t.$task_bg_static);}}),this.attachEvent(\"onDestroy\",function(){}),this._initStaticBackgroundRender=function(){});},_clearLayers:function(t){var n=this.$gantt.$services.getService(\"layers\"),e=n.getDataRender(this.$config.bind),i=n.getDataRender(this.$config.bindLinks);if(this._taskLayers)for(var a=0;a<this._taskLayers.length;a++)e.removeLayer(this._taskLayers[a]);if(this._linkLayers)for(a=0;a<this._linkLayers.length;a++)i.removeLayer(this._linkLayers[a]);this._linkLayers=[],this._taskLayers=[];},_render_tasks_scales:function(){var c;var t=this.$getConfig(),n=\"\",e=0,i=0,a=this.$gantt.getState();if(this.isVisible()){var s=this.$scaleHelper,r=this._getScales();i=t.scale_height;var o=this.$config.width;t.autosize!=\"x\"&&t.autosize!=\"xy\"||(o=Math.max(t.autosize_min_width,0));var l=s.prepareConfigs(r,t.min_column_width,o,i-1,a.min_date,a.max_date,t.rtl),d=this._tasks=l[l.length-1];if(this._scales=l,this._posFromDateCache={},this._posFromWorkTimeCache={},this._tasks.projection&&((c=this._tasks.projection)==null?void 0:c.source)===\"fixedHours\"){const u=\"timescale-projection-calendar\";gantt.getCalendar(u)&&gantt.deleteCalendar(u);let{hours:h}=this._tasks.projection;gantt.addCalendar({id:u,worktime:{hours:h||gantt.getCalendar(\"global\")._worktime.hours.slice(),days:[1,1,1,1,1,1,1]}});}n=this._getScaleChunkHtml(l,0,this.$config.width),e=d.full_width+\"px\",i+=\"px\";}this.$task_scale.style.height=i,this.$task_data.style.width=this.$task_scale.style.width=e,this.$task_scale.innerHTML=n;},_getScaleChunkHtml:function(t,n,e){for(var i=[],a=this.$gantt.templates.scale_row_class,s=0;s<t.length;s++){var r=\"gantt_scale_line\",o=a(t[s]);o&&(r+=\" \"+o),i.push('<div class=\"'+r+'\" style=\"height:'+t[s].height+\"px;position:relative;line-height:\"+t[s].height+'px\">'+this._prepareScaleHtml(t[s],n,e,s)+\"</div>\");}return i.join(\"\");},_prepareScaleHtml:function(t,n,e,i){var a=this.$getConfig(),s=this.$gantt.templates,r=[],o=null,l=null,d=t.format||t.template||t.date;typeof d==\"string\"&&(d=this.$gantt.date.date_to_str(d));var c=0,u=t.count;!a.smart_scales||isNaN(n)||isNaN(e)||(c=Tt(t.left,n),u=Tt(t.left,e)+1),l=t.css||function(){},!t.css&&a.inherit_scale_class&&(l=s.scale_cell_class);for(var h=c;h<u&&t.trace_x[h];h++){o=new Date(t.trace_x[h]);var _=d.call(this,o),f=t.width[h];t.height;var y=t.left[h],v=\"\",b=\"\",m=\"\";if(f){v=\"width:\"+f+\"px;\"+(a.smart_scales?\"position:absolute;left:\"+y+\"px\":\"\");const p=this.getViewPort(),k=(a.scales[i]||{}).sticky;let x=\"\";const w=70;if(k!==!1&&f>w||k===!0){if(y<p.x&&y+f/2-w/2<p.x)x=` style='position:absolute;left: ${p.x-y+10}px;' `;else if(y+f/2+w/2>p.x_end&&f>w){let $=p.x_end-y-10,T=\"-100%\";$<w&&($=w,T=`-${$}px`),x=` style='position:absolute;left: ${$}px;transform: translate(${T},0);' `;}}m=\"gantt_scale_cell\"+(h==t.count-1?\" gantt_last_cell\":\"\"),(b=l.call(this,o))&&(m+=\" \"+b);var g=`<div class='${m}' ${this.$gantt._waiAria.getTimelineCellAttr(_)} style='${v}'><span ${x}>${_}</span></div>`;r.push(g);}}return r.join(\"\");},_getPositioningContext:function(t){if(this._tasks.unit===this.$gantt.config.duration_unit||this._tasks.unit!==\"day\"&&this._tasks.unit!==\"week\"||!this._tasks.projection)return null;const{source:n}=this._tasks.projection||{};return n===\"taskCalendar\"?t?{calendar:gantt.getTaskCalendar(t)}:{calendar:gantt.getCalendar(\"global\")}:n===\"fixedHours\"?{calendar:gantt.getCalendar(\"timescale-projection-calendar\")}:null;},dateFromPos:function(t,n){var e=this._tasks;if(t<0||t>e.full_width||!e.full_width)return null;var i=Tt(this._tasks.left,t),a=this._tasks.left[i],s=e.width[i]||e.col_width,r=0;s&&(r=(t-a)/s,e.rtl&&(r=1-r));const o=(n?n.calendar:null)||null;var l=0;r&&(l=this._getColumnDuration(e,e.trace_x[i]));const d=e.trace_x[i],c=new Date(e.trace_x[i].valueOf()+Math.round(r*l));if(!o)return c;const{start:u,end:h,duration:_,intervals:f}=this._getWorkTrimForCell(d,o);if(_<=0)return c;const y=Math.round(r*_),v=d.valueOf()+1e3*(u+y);return new Date(v);},posFromDate:function(t,n){if(!this.isVisible()||!t)return 0;if(n&&n.calendar)return this.posFromWorkTime(t,n);var e=String(t.valueOf());if(this._posFromDateCache[e]!==void 0)return this._posFromDateCache[e];var i=this.columnIndexByDate(t);this.$gantt.assert(i>=0,\"Invalid day index\");var a=Math.floor(i),s=i%1,r=this._tasks.left[Math.min(a,this._tasks.width.length-1)];a==this._tasks.width.length&&(r+=this._tasks.width[this._tasks.width.length-1]),s&&(a<this._tasks.width.length?r+=this._tasks.width[a]*(s%1):r+=1);var o=Math.round(r);return this._posFromDateCache[e]=o,Math.round(o);},_getWorkTrimForCell:function(t,n){const e=this._getColumnDuration(this._tasks,t),i=new Date(t.valueOf()+e);let a=null,s=null;const r=[];for(let o=new Date(t),l=0;o<i;o=this.$gantt.date.add(o,1,\"day\"),l++){const d=n._getWorkHours(o)||[],c=Math.round((o-t)/1e3);for(let u=0;u<d.length;u++){const h=c+d[u].start,_=c+d[u].end;r.push({start:h,end:_}),(a===null||h<a)&&(a=h),(s===null||_>s)&&(s=_);}}return a===null||s===null||s<=a?{start:0,end:0,duration:0,intervals:[]}:{start:a,end:s,duration:s-a,intervals:r};},posFromWorkTime:function(t,{calendar:n}){if(!this.isVisible()||!t)return 0;if(!n)return this.posFromDate(t);const e=(n?n.id:\"\")+String(t.valueOf());if(this._posFromWorkTimeCache[e]!==void 0)return this._posFromWorkTimeCache[e];const i=this.columnIndexByDate(t);this.$gantt.assert(i>=0,\"Invalid day index\");const a=Math.floor(i),s=a,r=this._tasks.trace_x[a];new Date(r.valueOf()+this._getColumnDuration(this._tasks,r));const{start:o,end:l,duration:d}=this._getWorkTrimForCell(t,n);if(d===0)return this.posFromDate(t);const c=(t-this._tasks.trace_x[a])/1e3;let u=0;u=c<=o?0:c>=l?1:(c-o)/d,this._tasks.rtl&&(u=1-u);const h=this._tasks.left[Math.min(s,this._tasks.width.length-1)],_=s<this._tasks.width.length?this._tasks.width[s]:this._tasks.width[this._tasks.width.length-1];return Math.round(h+_*u);},_getNextVisibleColumn:function(t,n,e){for(var i=+n[t],a=t;e[i];)i=+n[++a];return a;},_getPrevVisibleColumn:function(t,n,e){for(var i=+n[t],a=t;e[i];)i=+n[--a];return a;},_getClosestVisibleColumn:function(t,n,e){var i=this._getNextVisibleColumn(t,n,e);return n[i]||(i=this._getPrevVisibleColumn(t,n,e)),i;},columnIndexByDate:function(t){var n=new Date(t).valueOf(),e=this._tasks.trace_x_ascending,i=this._tasks.ignore_x,a=this.$gantt.getState();if(n<=a.min_date)return this._tasks.rtl?e.length:0;if(n>=a.max_date)return this._tasks.rtl?0:e.length;var s=Tt(e,n),r=this._getClosestVisibleColumn(s,e,i),o=e[r],l=this._tasks.trace_index_transition;if(!o)return l?l[0]:0;var d=(t-e[r])/this._getColumnDuration(this._tasks,e[r]);return l?l[r]+(1-d):r+d;},getItemPosition:function(t,n,e){var i,a,s;let r=n||t.start_date||t.$auto_start_date,o=e||t.end_date||t.$auto_end_date;const l=this._getPositioningContext(t);return l&&l.calendar?this._tasks.rtl?(a=this.posFromWorkTime(r,l),i=this.posFromWorkTime(o,l)):(i=this.posFromWorkTime(r,l),a=this.posFromWorkTime(o,l)):this._tasks.rtl?(a=this.posFromDate(r),i=this.posFromDate(o)):(i=this.posFromDate(r),a=this.posFromDate(o)),s=Math.max(a-i,0),{left:i,top:this.getItemTop(t.id),height:this.getBarHeight(t.id),width:s,rowHeight:this.getItemHeight(t.id)};},getBarHeight:function(t,n){var e=this.$getConfig(),i=this.$config.rowStore.getItem(t),a=i.task_height||i.bar_height||e.bar_height||e.task_height,s=this.getItemHeight(t);return a==\"full\"&&(a=s-(e.bar_height_padding||3)),a=Math.min(a,s),n&&(a=Math.round(a/Math.sqrt(2))),Math.max(a,0);},getScale:function(){return this._tasks;},_getScales:function(){var t=this.$getConfig(),n=this.$scaleHelper,e=[n.primaryScale(t)].concat(n.getAdditionalScales(t));return n.sortScales(e),e;},_getColumnDuration:function(t,n){return this.$gantt.date.add(n,t.step,t.unit)-n;},_bindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);if(this.$config.rowStore=t,t&&!t._timelineCacheAttached){var n=this;t._timelineCacheAttached=t.attachEvent(\"onBeforeFilter\",function(){n._resetTopPositionHeight();});}}},_unbindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);t&&t._timelineCacheAttached&&(t.detachEvent(t._timelineCacheAttached),t._timelineCacheAttached=!1);}},refresh:function(){this._bindStore(),this.$config.bindLinks&&(this.$config.linkStore=this.$gantt.getDatastore(this.$config.bindLinks)),this._resetTopPositionHeight(),this._resetHeight(),this._initStaticBackgroundRender(),this._render_tasks_scales();},destructor:function(){var t=this.$gantt;this._clearLayers(t),this._unbindStore(),this.$task=null,this.$task_scale=null,this.$task_data=null,this.$task_bg=null,this.$task_links=null,this.$task_bars=null,this.$gantt=null,this.$config.rowStore&&(this.$config.rowStore.detachEvent(this._staticBgHandler),this.$config.rowStore=null),this.$config.linkStore&&(this.$config.linkStore=null),this._timelineDragScroll&&(this._timelineDragScroll.destructor(),this._timelineDragScroll=null),this.callEvent(\"onDestroy\",[]),this.detachAllEvents();}};class Sa{constructor(n){this._scrollOrder=0;const{gantt:e,grid:i,dnd:a,getCurrentX:s}=n;this.$gantt=e,this.$grid=i,this._dnd=a,this.getCurrentX=s,this._scrollView=this.$gantt.$ui.getView(this.$grid.$config.scrollX),this.attachEvents();}attachEvents(){this.isScrollable()&&(this._dnd.attachEvent(\"onDragMove\",(n,e)=>{const i=this.$grid.$grid.getBoundingClientRect(),a=i.right,s=i.left,r=this.getCurrentX(e.clientX);return r>=a-20&&(this.autoscrollRight(),this.autoscrollStart()),r<=s+20&&(this.autoscrollLeft(),this.autoscrollStart()),r<a-20&&r>s+20&&this.autoscrollStop(),!0;}),this._dnd.attachEvent(\"onDragEnd\",()=>{this.autoscrollStop();}));}autoscrollStart(){if(this._scrollOrder===0)return;const n=10*this._scrollOrder,e=this._scrollView.getScrollState();this._scrollView.scrollTo(e.position+n),setTimeout(()=>{this.autoscrollStart();},50);}autoscrollRight(){this._scrollOrder=1;}autoscrollLeft(){this._scrollOrder=-1;}autoscrollStop(){this._scrollOrder=0;}getCorrection(){return this.isScrollable()?this._scrollView.getScrollState().position:0;}isScrollable(){return!!this.$grid.$config.scrollable;}}const Ge=\"data-column-id\";class Ta{constructor(n,e){this._targetMarker=null,this.calculateCurrentPosition=i=>{const a=this.$grid.$grid.getBoundingClientRect(),s=a.right,r=a.left;let o=i;return o>s&&(o=s),o<r&&(o=r),o;},this.$gantt=n,this.$grid=e;}init(){const n=this.$gantt.$services.getService(\"dnd\");this._dnd=new n(this.$grid.$grid_scale,{updates_per_second:60}),this._scrollableGrid=new Sa({gantt:this.$gantt,grid:this.$grid,dnd:this._dnd,getCurrentX:this.calculateCurrentPosition}),this.attachEvents();}attachEvents(){this._dnd.attachEvent(\"onBeforeDragStart\",(n,e)=>{if(this._draggedCell=this.$gantt.utils.dom.closest(e.target,\".gantt_grid_head_cell\"),!this._draggedCell)return;const i=this.$grid.$getConfig().columns,a=this._draggedCell.getAttribute(Ge);let s,r;return i.map(function(o,l){o.name===a&&(s=o,r=l);}),this.$grid.callEvent(\"onBeforeColumnDragStart\",[{draggedColumn:s,draggedIndex:r}])!==!1&&!(!this._draggedCell||!s)&&(this._gridConfig=this.$grid.$getConfig(),this._originAutoscroll=this.$gantt.config.autoscroll,this.$gantt.config.autoscroll=!1,!0);}),this._dnd.attachEvent(\"onAfterDragStart\",(n,e)=>{this._draggedCell&&(this._dnd.config.column=this._draggedCell.getAttribute(Ge),this._dnd.config.marker.innerHTML=this._draggedCell.outerHTML,this._dnd.config.marker.classList.add(\"gantt_column_drag_marker\"),this._dnd.config.marker.style.height=this._gridConfig.scale_height+\"px\",this._dnd.config.marker.style.lineHeight=this._gridConfig.scale_height+\"px\",this._draggedCell.classList.add(\"gantt_grid_head_cell_dragged\"));}),this._dnd.attachEvent(\"onDragMove\",(n,e)=>{if(!this._draggedCell)return;this._dragX=e.clientX;const i=this.calculateCurrentPosition(e.clientX),a=this.findColumnsIndexes();return this.setMarkerPosition(i),this.drawTargetMarker(a),!0;}),this._dnd.attachEvent(\"onDragEnd\",()=>{if(!this._draggedCell)return;const n=this.findColumnsIndexes(),e=n.targetIndex,i=n.draggedIndex,a=this.$grid.$getConfig().columns,s=a[i],r=a[e];if(this.$grid.callEvent(\"onColumnDragMove\",[{draggedColumn:s,targetColumn:r,draggedIndex:i,targetIndex:e}])===!1)return this.cleanTargetMarker(),void this.$gantt.render();this.$gantt.config.autoscroll=this._originAutoscroll,this._draggedCell.classList.remove(\"gantt_grid_head_cell_dragged\"),this.cleanTargetMarker(),this.reorderColumns();});}reorderColumns(){const{targetIndex:n,draggedIndex:e}=this.findColumnsIndexes(),i=this.$grid.$getConfig().columns,a=i[e],s=i[n];this.$grid.callEvent(\"onBeforeColumnReorder\",[{draggedColumn:a,targetColumn:s,draggedIndex:e,targetIndex:n}])!==!1&&n!==e&&(i.splice(e,1),i.splice(n,0,a),this.$gantt.render(),this.$grid.callEvent(\"onAfterColumnReorder\",[{draggedColumn:a,targetColumn:s,draggedIndex:e,targetIndex:n}]));}findColumnsIndexes(){const n=this._dnd.config.column,e=this.$grid.$getConfig().columns;let i,a,s,r;const o={startX:0,endX:0};let l,d=0,c=e.length-1,u=(f,y)=>f<=y,h=f=>++f;this.$gantt.config.rtl&&(d=e.length-1,c=0,u=(f,y)=>f>=y,h=f=>--f);const _=this._dragX-this.$grid.$grid.getBoundingClientRect().left+this._scrollableGrid.getCorrection();for(let f=d;u(f,c)&&(i===void 0||a===void 0);f=h(f))e[f].hide||(o.startX=o.endX,o.endX+=e[f].width,_>=o.startX&&(_<=o.endX||!u(h(f),c))&&(i=f,s=o.startX,r=o.endX,l=(_-o.startX)/(o.endX-o.startX)),n===e[f].name&&(a=f));return{targetIndex:i,draggedIndex:a,xBefore:s,xAfter:r,columnRelativePos:l};}setMarkerPosition(n,e=10){const{marker:i}=this._dnd.config,a=this._dnd._obj.getBoundingClientRect();i.style.top=`${a.y+e}px`,i.style.left=`${n}px`;}drawTargetMarker({targetIndex:n,draggedIndex:e,xBefore:i,xAfter:a,columnRelativePos:s}){let r;this._targetMarker||(this._targetMarker=document.createElement(\"div\"),Ct(this._targetMarker,\"gantt_grid_target_marker\"),this._targetMarker.style.display=\"none\",this._targetMarker.style.height=`${this._gridConfig.scale_height}px`),this._targetMarker.parentNode||this.$grid.$grid_scale.appendChild(this._targetMarker),r=n>e?a:n<e?i:s>0.5?a:i,this._targetMarker.style.left=`${r}px`,this._targetMarker.style.display=\"block\";}cleanTargetMarker(){this._targetMarker&&this._targetMarker.parentNode&&this.$grid.$grid_scale.removeChild(this._targetMarker),this._targetMarker=null;}}function Ae(t){var n=[];return{delegate:function(e,i,a,s){n.push([e,i,a,s]),t.$services.getService(\"mouseEvents\").delegate(e,i,a,s);},destructor:function(){for(var e=t.$services.getService(\"mouseEvents\"),i=0;i<n.length;i++){var a=n[i];e.detach(a[0],a[1],a[2],a[3]);}n=[];}};}var te=function(t,n,e,i){this.$config=R({},n||{}),this.$gantt=i,this.$parent=t,lt(this),this.$state={},R(this,wn(this));};function he(t){if(t._delayRender&&t._delayRender.$cancelTimeout(),t.$gantt){var n=t.$gantt.$data.tasksStore,e=t.$config.rowStore,i=\"_attached_\"+e.$config.name;t[i]&&(n.detachEvent(t[i]),t[i]=null),e.$attachedResourceViewHandler&&(e.detachEvent(e.$attachedResourceViewHandler),e.$attachedResourceViewHandler=null,n.detachEvent(e.$attachedTaskStoreHandler),e.$attachedTaskStoreHandler=null);}}te.prototype={init:function(t){var n=this.$gantt,e=n._waiAria.gridAttrString(),i=n._waiAria.gridDataAttrString(),a=this.$getConfig(),s=a.reorder_grid_columns||!1;this.$config.reorder_grid_columns!==void 0&&(s=this.$config.reorder_grid_columns),t.innerHTML=\"<div class='gantt_grid' style='height:inherit;width:inherit;' \"+e+\"></div>\",this.$grid=t.childNodes[0],this.$grid.innerHTML=\"<div class='gantt_grid_scale' \"+n._waiAria.gridScaleRowAttrString()+\"></div><div class='gantt_grid_data' \"+i+\"></div>\",this.$grid_scale=this.$grid.childNodes[0],this.$grid_data=this.$grid.childNodes[1];var r=a[this.$config.bind+\"_attribute\"];if(!r&&this.$config.bind&&(r=\"data-\"+this.$config.bind+\"-id\"),this.$config.item_attribute=r||null,!this.$config.layers){var o=this._createLayerConfig();this.$config.layers=o;}var l={init:function(){},doOnRender:function(){}};this._renderHeaderResizers=l.doOnRender,this._mouseDelegates=Ae(n);var d=function(c,u){var h={row_before_start:c.bind(function(_,f,y){var v=u.$getConfig(),b=u.$config.rowStore;if(!it(y,v.task_grid_row_resizer_attribute))return!1;var m=this.locate(y,v.task_grid_row_resizer_attribute),g=b.getItem(m);return u.callEvent(\"onBeforeRowResize\",[g])!==!1&&void 0;},c),row_after_start:c.bind(function(_,f,y){var v=u.$getConfig(),b=this.locate(y,v.task_grid_row_resizer_attribute);_.config.marker.innerHTML=\"\",_.config.marker.className+=\" gantt_row_grid_resize_area\",_.config.marker.style.width=u.$grid.offsetWidth+\"px\",_.config.drag_id=b;},c),row_drag_move:c.bind(function(_,f,y){var v=u.$config.rowStore,b=u.$getConfig(),m=_.config,g=m.drag_id,p=u.getItemHeight(g),k=u.getItemTop(g)-f.scrollTop,x=Y(u.$grid_data),w=parseInt(m.marker.style.top,10),$=k+x.y,T=0,S=b.min_task_grid_row_height;return(T=w-$)<S&&(T=S),m.marker.style.left=x.x+\"px\",m.marker.style.top=$-1+\"px\",m.marker.style.height=Math.abs(T)+1+\"px\",m.marker_height=T,u.callEvent(\"onRowResize\",[g,v.getItem(g),T+p]),!0;},c),row_drag_end:c.bind(function(_,f,y){var v=u.$config.rowStore,b=_.config,m=b.drag_id,g=v.getItem(m),p=u.getItemHeight(m),k=b.marker_height;u.callEvent(\"onBeforeRowResizeEnd\",[m,g,k])!==!1&&g.row_height!=k&&(g.row_height=k,v.updateItem(m),u.callEvent(\"onAfterRowResize\",[m,g,p,k]),this.render());},c)};return{init:function(){var _=c.$services.getService(\"dnd\"),f=u.$getConfig(),y=new _(u.$grid_data,{updates_per_second:60});c.defined(f.dnd_sensitivity)&&(y.config.sensitivity=f.dnd_sensitivity),y.attachEvent(\"onBeforeDragStart\",function(v,b){return h.row_before_start(y,v,b);}),y.attachEvent(\"onAfterDragStart\",function(v,b){return h.row_after_start(y,v,b);}),y.attachEvent(\"onDragMove\",function(v,b){return h.row_drag_move(y,v,b);}),y.attachEvent(\"onDragEnd\",function(v,b){return h.row_drag_end(y,v,b);});}};}(n,this);d.init(),this._addLayers(this.$gantt),this._initEvents(),s&&(this._columnDND=new Ta(n,this),this._columnDND.init()),this.callEvent(\"onReady\",[]);},_validateColumnWidth:function(t,n){var e=t[n];if(e&&e!=\"*\"){var i=this.$gantt,a=1*e;isNaN(a)?i.assert(!1,\"Wrong \"+n+\" value of column \"+t.name):t[n]=a;}},setSize:function(t,n){this.$config.width=this.$state.width=t,this.$config.height=this.$state.height=n;for(var e,i=this.getGridColumns(),a=0,s=(d=this.$getConfig()).grid_elastic_columns,r=0,o=i.length;r<o;r++)this._validateColumnWidth(i[r],\"min_width\"),this._validateColumnWidth(i[r],\"max_width\"),this._validateColumnWidth(i[r],\"width\"),a+=1*i[r].width;if(!isNaN(a)&&this.$config.scrollable||(a=e=this._setColumnsWidth(t+1)),this.$config.scrollable&&s&&!isNaN(a)){let u=\"width\";s==\"min_width\"&&(u=\"min_width\");let h=0;i.forEach(function(_){h+=_[u]||d.min_grid_column_width;});var l=Math.max(h,t);a=this._setColumnsWidth(l),e=t;}this.$config.scrollable?(this.$grid_scale.style.width=a+\"px\",this.$grid_data.style.width=a+\"px\"):(this.$grid_scale.style.width=\"inherit\",this.$grid_data.style.width=\"inherit\"),this.$config.width-=1;var d=this.$getConfig();e!==t&&(e!==void 0?(d.grid_width=e,this.$config.width=e-1):isNaN(a)||(this._setColumnsWidth(a),d.grid_width=a,this.$config.width=a-1));var c=Math.max(this.$state.height-d.scale_height,0);this.$grid_data.style.height=c+\"px\",this.refresh();},getSize:function(){var t=this.$getConfig(),n=this.$config.rowStore?this.getTotalHeight():0,e=this._getGridWidth();return{x:this.$state.width,y:this.$state.height,contentX:this.isVisible()?e:0,contentY:this.isVisible()?t.scale_height+n:0,scrollHeight:this.isVisible()?n:0,scrollWidth:this.isVisible()?e:0};},_bindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);if(this.$config.rowStore=t,t&&!t._gridCacheAttached){var n=this;t._gridCacheAttached=t.attachEvent(\"onBeforeFilter\",function(){n._resetTopPositionHeight();});}}},_unbindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);t&&t._gridCacheAttached&&(t.detachEvent(t._gridCacheAttached),t._gridCacheAttached=!1);}},refresh:function(){this._bindStore(),this._resetTopPositionHeight(),this._resetHeight(),this._initSmartRenderingPlaceholder(),this._calculateGridWidth(),this._renderGridHeader();},getViewPort:function(){var t=this.$config.scrollLeft||0,n=this.$config.scrollTop||0,e=this.$config.height||0,i=this.$config.width||0;return{y:n,y_end:n+e,x:t,x_end:t+i,height:e,width:i};},scrollTo:function(t,n){if(this.isVisible()){var e=!1;this.$config.scrollTop=this.$config.scrollTop||0,this.$config.scrollLeft=this.$config.scrollLeft||0,1*t==t&&(this.$config.scrollLeft=this.$state.scrollLeft=this.$grid.scrollLeft=t,e=!0),1*n==n&&(this.$config.scrollTop=this.$state.scrollTop=this.$grid_data.scrollTop=n,e=!0),e&&this.callEvent(\"onScroll\",[this.$config.scrollLeft,this.$config.scrollTop]);}},getColumnIndex:function(t,n){for(var e=this.$getConfig().columns,i=0,a=0;a<e.length;a++)if(n&&e[a].hide&&i++,e[a].name==t)return a-i;return null;},getColumn:function(t){var n=this.getColumnIndex(t);return n===null?null:this.$getConfig().columns[n];},getGridColumns:function(){return this.$getConfig().columns.slice();},isVisible:function(){return this.$parent&&this.$parent.$config?!this.$parent.$config.hidden:this.$grid.offsetWidth;},_createLayerConfig:function(){var t=this.$gantt,n=this;return[{renderer:t.$ui.layers.gridLine(),container:this.$grid_data,filter:[function(){return n.isVisible();}]},{renderer:t.$ui.layers.gridTaskRowResizer(),container:this.$grid_data,append:!0,filter:[function(){return t.config.resize_rows;}]}];},_addLayers:function(t){if(this.$config.bind){this._taskLayers=[];var n=this,e=this.$gantt.$services.getService(\"layers\"),i=e.getDataRender(this.$config.bind);i||(i=e.createDataRender({name:this.$config.bind,defaultContainer:function(){return n.$grid_data;}}));for(var a=this.$config.layers,s=0;a&&s<a.length;s++){var r=a[s];r.view=this;var o=i.addLayer(r);this._taskLayers.push(o);}this._bindStore(),this._initSmartRenderingPlaceholder();}},_refreshPlaceholderOnStoreUpdate:function(t){var n=this.$getConfig(),e=this.$config.rowStore;if(e&&t===null&&this.isVisible()&&n.smart_rendering){var i;if(this.$config.scrollY){var a=this.$gantt.$ui.getView(this.$config.scrollY);a&&(i=a.getScrollState().scrollSize);}if(i||(i=e?this.getTotalHeight():0),i){this.$rowsPlaceholder&&this.$rowsPlaceholder.parentNode&&this.$rowsPlaceholder.parentNode.removeChild(this.$rowsPlaceholder);var s=this.$rowsPlaceholder=document.createElement(\"div\");s.style.visibility=\"hidden\",s.style.height=i+\"px\",s.style.width=\"1px\",this.$grid_data.appendChild(s);}}},_initSmartRenderingPlaceholder:function(){var t=this.$config.rowStore;t&&(this._initSmartRenderingPlaceholder=function(){},this._staticBgHandler=t.attachEvent(\"onStoreUpdated\",B(this._refreshPlaceholderOnStoreUpdate,this)));},_initEvents:function(){var t=this.$gantt;this._mouseDelegates.delegate(\"click\",\"gantt_close\",t.bind(function(n,e,i){var a=this.$config.rowStore;if(!a)return!0;var s=it(n,this.$config.item_attribute);return s&&a.close(s.getAttribute(this.$config.item_attribute)),!1;},this),this.$grid),this._mouseDelegates.delegate(\"click\",\"gantt_open\",t.bind(function(n,e,i){var a=this.$config.rowStore;if(!a)return!0;var s=it(n,this.$config.item_attribute);return s&&a.open(s.getAttribute(this.$config.item_attribute)),!1;},this),this.$grid);},_clearLayers:function(t){var n=this.$gantt.$services.getService(\"layers\").getDataRender(this.$config.bind);if(this._taskLayers)for(var e=0;e<this._taskLayers.length;e++)n.removeLayer(this._taskLayers[e]);this._taskLayers=[];},_getColumnWidth:function(t,n,e){var i=t.min_width||n.min_grid_column_width,a=Math.max(e,i||10);return t.max_width&&(a=Math.min(a,t.max_width)),a;},_checkGridColumnMinWidthLimits:function(t,n){for(var e=0,i=t.length;e<i;e++){var a=1*t[e].width;!t[e].min_width&&a<n.min_grid_column_width&&(t[e].min_width=a);}},_getGridWidthLimits:function(){for(var t=this.$getConfig(),n=this.getGridColumns(),e=0,i=0,a=0;a<n.length;a++)e+=n[a].min_width?n[a].min_width:t.min_grid_column_width,i!==void 0&&(i=n[a].max_width?i+n[a].max_width:void 0);return this._checkGridColumnMinWidthLimits(n,t),[e,i];},_setColumnsWidth:function(t,n){var e=this.$getConfig(),i=this.getGridColumns(),a=0,s=t;n=window.isNaN(n)?-1:n;for(var r=0,o=i.length;r<o;r++)a+=1*i[r].width;if(window.isNaN(a))for(this._calculateGridWidth(),a=0,r=0,o=i.length;r<o;r++)a+=1*i[r].width;var l=s-a,d=0;for(r=0;r<n+1;r++)d+=i[r].width;for(a-=d,r=n+1;r<i.length;r++){var c=i[r],u=Math.round(l*(c.width/a));l<0?c.min_width&&c.width+u<c.min_width?u=c.min_width-c.width:!c.min_width&&e.min_grid_column_width&&c.width+u<e.min_grid_column_width&&(u=e.min_grid_column_width-c.width):c.max_width&&c.width+u>c.max_width&&(u=c.max_width-c.width),a-=c.width,c.width+=u,l-=u;}for(var h=l>0?1:-1;l>0&&h===1||l<0&&h===-1;){var _=l;for(r=n+1;r<i.length;r++){var f;if((f=i[r].width+h)==this._getColumnWidth(i[r],e,f)&&(l-=h,i[r].width=f),!l)break;}if(_==l)break;}return l&&n>-1&&(f=i[n].width+l)==this._getColumnWidth(i[n],e,f)&&(i[n].width=f),this._getColsTotalWidth();},_getColsTotalWidth:function(){for(var t=this.getGridColumns(),n=0,e=0;e<t.length;e++){var i=parseFloat(t[e].width);if(window.isNaN(i))return!1;n+=i;}return n;},_calculateGridWidth:function(){for(var t=this.$getConfig(),n=this.getGridColumns(),e=0,i=[],a=[],s=0;s<n.length;s++){var r=parseFloat(n[s].width);window.isNaN(r)&&(r=t.min_grid_column_width||10,i.push(s)),a[s]=r,e+=r;}var o=this._getGridWidth()+1;if(t.autofit||i.length){var l=o-e;if(t.autofit&&!t.grid_elastic_columns)for(s=0;s<a.length;s++){var d=Math.round(l/(a.length-s));a[s]+=d,(c=this._getColumnWidth(n[s],t,a[s]))!=a[s]&&(d=c-a[s],a[s]=c),l-=d;}else if(i.length)for(s=0;s<i.length;s++){d=Math.round(l/(i.length-s));var c,u=i[s];a[u]+=d,(c=this._getColumnWidth(n[u],t,a[u]))!=a[u]&&(d=c-a[u],a[u]=c),l-=d;}for(s=0;s<a.length;s++)n[s].width=a[s];}else{var h=o!=e;this.$config.width=e-1,t.grid_width=e,h&&this.$parent._setContentSize(this.$config.width,null);}},_renderGridHeader:function(){var t=this.$gantt,n=this.$getConfig(),e=this.$gantt.locale,i=this.$gantt.templates,a=this.getGridColumns();n.rtl&&(a=a.reverse());var s=[],r=0,o=e.labels,l=n.scale_height-1;const d={};for(var c=0;c<a.length;c++){var u=c==a.length-1,h=a[c];h.name||(h.name=t.uid()+\"\");var _=1*h.width,f=this._getGridWidth();u&&f>r+_&&(h.width=_=f-r),r+=_;var y=t._sort&&h.name==t._sort.name?`<div data-column-id=\"${h.name}\" class=\"gantt_sort gantt_${t._sort.direction}\"></div>`:\"\",v=[\"gantt_grid_head_cell\",\"gantt_grid_head_\"+h.name,u?\"gantt_last_cell\":\"\",i.grid_header_class(h.name,h)].join(\" \"),b=\"width:\"+(_-(u?1:0))+\"px;\",m=h.label||o[\"column_\"+h.name]||o[h.name];typeof m==\"function\"&&(m=m.call(t,h.name,h)),m=m||\"\";let p=!1;t.config.external_render&&t.config.external_render.isElement(m)&&(p=!0,d[h.name]=m);var g=\"<div class='\"+v+\"' style='\"+b+\"' \"+t._waiAria.gridScaleCellAttrString(h,m)+\" data-column-id='\"+h.name+\"' column_id='\"+h.name+\"' data-column-name='\"+h.name+\"' data-column-index='\"+c+\"'>\"+(p?\"<div data-component-container></div>\":m)+y+\"</div>\";s.push(g);}this.$grid_scale.style.height=n.scale_height+\"px\",this.$grid_scale.style.lineHeight=l+\"px\",this.$grid_scale.innerHTML=s.join(\"\");for(let p in d)t.config.external_render.renderElement(d[p],this.$grid_scale.querySelector(\"[data-column-id='\"+p+\"'] [data-component-container]\"));this._renderHeaderResizers&&this._renderHeaderResizers();},_getGridWidth:function(){return this.$config.width;},destructor:function(){this._clearLayers(this.$gantt),this._mouseDelegates&&(this._mouseDelegates.destructor(),this._mouseDelegates=null),this._unbindStore(),this.$grid=null,this.$grid_scale=null,this.$grid_data=null,this.$gantt=null,this.$config.rowStore&&(this.$config.rowStore.detachEvent(this._staticBgHandler),this.$config.rowStore=null),this.callEvent(\"onDestroy\",[]),this.detachAllEvents();}};const Ca=function(t){function n(e,i,a,s){return t.apply(this,arguments)||this;}return F(n,t),R(n.prototype,{init:function(e){const i=this.$gantt,a=i._waiAria.gridAttrString(),s=i._waiAria.gridDataAttrString(),r=this.$getConfig();r.row_height=this._getResourceConfig().row_height?this._getResourceConfig().row_height:i.resource_table.row_height,r.reorder_grid_columns,this.$config.reorder_grid_columns!==void 0&&this.$config.reorder_grid_columns,this.$config.bind===void 0&&(this.$config.bind=\"temp_resource_assignment_store\",this.$config.name=\"resource_grid_lightbox\",this.$config.$id=\"GridRL\"),e.innerHTML=\"<div class='gantt_grid' style='width:100%;' \"+a+\"></div>\",this.$grid=e.childNodes[0],this.$grid.innerHTML=\"<div class='gantt_grid_scale' \"+i._waiAria.gridScaleRowAttrString()+\"></div><div class='gantt_grid_data' \"+s+\"></div>\",this.$grid_scale=this.$grid.childNodes[0],this.$grid_data=this.$grid.childNodes[1];let o=r[this.$config.bind+\"_attribute\"];if(!o&&this.$config.bind&&(o=\"data-\"+this.$config.bind+\"-id\"),this.$config.item_attribute=o||null,!this.$config.layers){const d=this._createLayerConfig();this.$config.layers=d;}const l=ae();this.event=l.attach,this.eventRemove=l.detach,this._eventRemoveAll=l.detachAll,this._createDomEventScope=l.extend,this._addLayers(this.$gantt),this._initEvents(),this.callEvent(\"onReady\",[]);},getColumn:function(e){const i=this.getColumnIndex(e);return i===null?null:this._getResourceColumns()[i]||null;},getColumnIndex:function(e,i){const a=this._getResourceColumns();let s=0;for(let r=0;r<a.length;r++)if(i&&a[r].hide&&s++,a[r].name==e)return r-s;return null;},getGridColumns:function(){const e=this._getResourceColumns(),i=[];for(let a=0;a<e.length;a++)e[a].hide||i.push(e[a]);return i;},_createLayerConfig:function(){const e=this.$gantt,i=this;return[{renderer:e.$ui.layers.gridLine(),container:this.$grid_data,filter:[function(){return i.isVisible();}]},{renderer:e.$ui.layers.gridTaskRowResizer(),container:this.$grid_data,append:!0,filter:[function(){return e.config.resize_rows;}]}];},_renderGridHeader:function(){const e=this.$gantt,i=this._getResourceConfig(),a=this.$gantt.locale,s=this.$getTemplates();let r=this._getResourceColumns();i.rtl&&(r=r.reverse()),i.scale_height||(i.scale_height=e.resource_table.scale_height);let o=[],l=0,d=a.labels,c=i.scale_height-1;for(let u=0;u<r.length;u++){let h=u==r.length-1,_=r[u];_.name||(_.name=e.uid()+\"\");let f=1*_.width,y=this._getGridWidth();h&&y>l+f&&(_.width=f=y-l),l+=f;let v=e._sort&&_.name==e._sort.name?`<div data-column-id=\"${_.name}\" class=\"gantt_sort gantt_${e._sort.direction}\"></div>`:\"\",b=[\"gantt_grid_head_cell\",\"gantt_grid_head_\"+_.name,h?\"gantt_last_cell\":\"\",s.grid_header_class?s.grid_header_class(_.name,_):\"\"].join(\" \"),m=\"width:\"+(f-(h?1:0))+\"px;\",g=_.label||d[\"column_\"+_.name]||d[_.name];g=g||\"\";const p=\"<div class='\"+b+\"' style='\"+m+\"' \"+e._waiAria.gridScaleCellAttrString(_,g)+\" data-column-id='\"+_.name+\"' column_id='\"+_.name+\"' data-column-name='\"+_.name+\"' data-column-index='\"+u+\"'>\"+g+v+\"</div>\";o.push(p);}this.$grid_scale.style.height=i.scale_height+\"px\",this.$grid_scale.style.lineHeight=c+\"px\",this.$grid_scale.style.width=\"inherit\",this.$grid_scale.innerHTML=o.join(\"\");},isVisible:function(){return this.$parent?!this.$parent.hidden:this.$grid.offsetWidth;},_initEvents:function(){},_getResourceSection:function(){return gantt.getLightboxSection(this.$config.sectionName).section;},$getTemplates:function(){return this._getResourceSection().templates||{};},_getResourceConfig:function(){return this._getResourceSection().config||gantt.resource_table;},_getResourceColumns:function(){var e;return((e=this._getResourceSection().config)==null?void 0:e.columns)||gantt.resource_table.columns;},destructor:function(){this._mouseDelegates&&(this._mouseDelegates.destructor(),this._mouseDelegates=null),this._unbindStore(),this.$grid=null,this.$grid_scale=null,this.$grid_data=null,this._eventRemoveAll(),gantt.ext.inlineEditorsLightbox.destructor(),this.callEvent(\"onDestroy\",[]),this.detachAllEvents();}},!0),R(n.prototype,function(e){var i=e.prototype.init,a=e.prototype.destructor;return{init:function(){i.apply(this,arguments),this._linkToTaskStore();},destructor:function(){he(this),a.apply(this,arguments);},previousDragId:null,relevantResources:null,_linkToTaskStore:function(){if(this.$config.rowStore&&this.$gantt.$data.tasksStore){var s=this.$gantt.$data.tasksStore,r=this.$config.rowStore;he(this);var o=this,l=xe(function(){if(o.$gantt.getState().lightbox)l();else{const c=o.$config.rowStore,u=o._getRelevantResources();if(u&&c.$config.name===o.$gantt.config.resource_store){if(u==\"nothing_to_repaint\")return;c._quick_refresh=!0,o.relevantResources.forEach(function(h){c.refresh(h);}),c._quick_refresh=!1;}else c.refresh();}},300);this._delayRender=l;var d=\"_attached_\"+r.$config.name;o[d]||(o[d]=s.attachEvent(\"onStoreUpdated\",function(){if(!l.$pending&&!this._skipResourceRepaint){const c=o.$gantt.getState();if(c.drag_mode==\"progress\")return!0;c.drag_mode&&c.drag_id&&(o.previousDragId=c.drag_id),l();}return!0;})),this.$gantt.attachEvent(\"onDestroy\",function(){return he(o),!0;}),r.$attachedResourceViewHandler||(r.$attachedResourceViewHandler=r.attachEvent(\"onBeforeFilter\",function(){return!o.$gantt.getState().lightbox&&(l.$pending&&l.$cancelTimeout(),o._updateNestedTasks(),!0);}),r.$attachedTaskStoreHandler=s.attachEvent(\"onAfterDelete\",function(){r._mark_recompute=!0;}));}},_getRelevantResources:function(){if(!this.$gantt.getTaskAssignments)return null;const s=this.$gantt.getState(),r=this.$config.rowStore;let o=[];if(s.drag_mode&&s.drag_id&&r.$config.name===this.$gantt.config.resource_store){if(this.previousDragId==s.drag_id){if(this.relevantResources)return this.relevantResources;o=this._getIdsFromAssignments(this.previousDragId);}else this.previousDragId=s.drag_id,o=this._getIdsFromAssignments(this.previousDragId);}else{if(!this.previousDragId)return null;o=this._getIdsFromAssignments(this.previousDragId),this.previousDragId=null;}return o.length?(o.forEach(function(l){r.eachParent&&r.eachParent(function(d){o.push(d.id);},l);}),this.relevantResources=[...new Set(o)]):this.relevantResources=\"nothing_to_repaint\";},_getIdsFromAssignments:function(s){const r=this.$gantt,o=[],l=r.getTask(s);return r.getTaskAssignments(s).forEach(function(d){o.push(d.resource_id);}),r.isSummaryTask(l)&&r.config.drag_project&&r.eachTask(function(d){r.getTaskAssignments(d.id).forEach(function(c){o.push(c.resource_id);});},s),r.config.drag_multiple&&r.getSelectedTasks&&r.getSelectedTasks().forEach(function(d){r.getTaskAssignments(d).forEach(function(c){o.push(c.resource_id);});}),o;},_updateNestedTasks:function(){var s=this.$gantt,r=s.getDatastore(s.config.resource_store);r.$config.fetchTasks&&r.silent(function(){var o=[],l={},d={};for(var c in r.eachItem(function(u){if(u.$role!=\"task\"){var h=s.getResourceAssignments(u.id),_={};h.sort(function(f,y){const v=r.pull,b=v[`${f.task_id}_${f.resource_id}`],m=v[`${y.task_id}_${y.resource_id}`];return b&&m?b.$local_index-m.$local_index:0;}),h.forEach(function(f){if(!_[f.task_id]&&s.isTaskExists(f.task_id)){_[f.task_id]=!0;var y,v=s.getTask(f.task_id);(y=r.$config.copyOnParse?s.copy(v):Object.create(v)).id=v.id+\"_\"+u.id,y.$task_id=v.id,y.$resource_id=u.id,y[r.$parentProperty]=u.id,y.$role=\"task\",o.push(y),l[y.id]=!0;}});}else d[u.id]=!0;}),d)l[c]||r.removeItem(c);o.length&&r.parse(o);});}};}(n),!0),n;}(te),Ea={init:function(t,n){var e=n.$gantt;e.attachEvent(\"onTaskClick\",function(i,a){if(e._is_icon_open_click(a))return!0;var s=t.getState(),r=t.locateCell(a.target);return!r||!t.getEditorConfig(r.columnName)||(t.isVisible()&&s.id==r.id&&s.columnName==r.columnName||t.startEdit(r.id,r.columnName),!1);}),n.$config.id===\"GridRL\"&&(e.event(e.getLightbox(),\"click\",function(i){const a=e.utils.dom,s=t.getState(),r=t.locateCell(i.target);if(r&&t.getEditorConfig(r.columnName)){if(r.columnName==\"duration\"||r.columnName==\"end\"){const o=e.getDatastore(\"temp_resource_assignment_store\").getItem(r.id);if(o&&!o.start_date)return e.message({type:\"warning\",text:\"Specify assignment start date\"}),t.hide(),!1;}return t.isVisible()&&s.id==r.id&&s.columnName==r.columnName||t.startEdit(r.id,r.columnName),t.isChanged()&&t.save(),!1;}if(!a.closest(i.target,\".gantt_custom_button.gantt_add_resources\")){if(a.closest(i.target,\"[data-assignment-delete]\")){const o=i.target.getAttribute(\"data-assignment-delete\");e.confirm({text:\"Resource assignment will be deleted permanently, are you sure?\",cancel:\"No\",ok:\"Delete\",callback:function(l){if(l){const d=e.getDatastore(\"temp_resource_assignment_store\");if(d.removeItem(o),d.getItems().length==0){const c=e.getLightboxSection(n.$config.sectionName),u=e.form_blocks.resource_selector,h=e._lightbox_root.querySelector(\"#\"+c.section.id).nextSibling;u.set_value.call(e,h,[],{},c.section,!0);}e.refreshData();}}});}t.isVisible()&&t.save(),t.hide();}}),e.lightbox_events.gantt_save_btn=function(){t.save(),e._save_lightbox();}),e.attachEvent(\"onEmptyClick\",function(){return t.isVisible()&&t.isChanged()?t.save():t.hide(),!0;}),e.attachEvent(\"onTaskDblClick\",function(i,a){var s=t.getState(),r=t.locateCell(a.target);return!r||!t.isVisible()||r.columnName!=s.columnName;});},onShow:function(t,n,e){var i=e.$gantt;if(i.ext&&i.ext.keyboardNavigation&&i.ext.keyboardNavigation.attachEvent(\"onKeyDown\",function(a,s){var r=i.constants.KEY_CODES,o=!1;return s.keyCode===r.SPACE&&t.isVisible()&&(o=!0),!o;}),n.onkeydown=function(a){a=a||window.event;var s=i.constants.KEY_CODES;if(!(a.defaultPrevented||a.shiftKey&&a.keyCode!=s.TAB)){var r=!0;switch(a.keyCode){case i.keys.edit_save:t.save();break;case i.keys.edit_cancel:t.hide();break;case s.UP:case s.DOWN:t.isVisible()&&(t.hide(),r=!1);break;case s.TAB:a.shiftKey?t.editPrevCell(!0):t.editNextCell(!0);break;default:r=!1;}r&&a.preventDefault();}},e.$config.id===\"GridRL\"){let a;n.onkeyup=function(s){s=s||window.event;var r=i.constants.KEY_CODES;s.defaultPrevented||s.shiftKey&&s.keyCode!=r.TAB||i._lightbox_id&&t.isChanged()&&t.save();},n.onwheel=function(s){i._lightbox_id&&t.isChanged()&&(clearTimeout(a),a=setTimeout(function(){t.save();},100));};}},onHide:function(){},destroy:function(){}},Da={init:function(t,n){var e=t,i=n.$gantt,a=null,s=i.ext.keyboardNavigation;s.attachEvent(\"onBeforeFocus\",function(r){var o=t.locateCell(r);if(clearTimeout(a),o){var l=o.columnName,d=o.id,c=e.getState();if(e.isVisible()&&c.id==d&&c.columnName===l)return!1;}return!0;}),s.attachEvent(\"onFocus\",function(r){var o=t.locateCell(r),l=t.getState();return clearTimeout(a),!o||o.id==l.id&&o.columnName==l.columnName||e.isVisible()&&e.save(),!0;}),t.attachEvent(\"onHide\",function(){clearTimeout(a);}),s.attachEvent(\"onBlur\",function(){return a=setTimeout(function(){e.save();}),!0;}),i.attachEvent(\"onTaskDblClick\",function(r,o){var l=t.getState(),d=t.locateCell(o.target);return!d||!t.isVisible()||d.columnName!=l.columnName;}),i.attachEvent(\"onTaskClick\",function(r,o){if(i._is_icon_open_click(o))return!0;var l=t.getState(),d=t.locateCell(o.target);return!d||!t.getEditorConfig(d.columnName)||(t.isVisible()&&l.id==d.id&&l.columnName==d.columnName||t.startEdit(d.id,d.columnName),!1);}),i.attachEvent(\"onEmptyClick\",function(){return e.save(),!0;}),s.attachEvent(\"onKeyDown\",function(r,o){var l=t.locateCell(o.target),d=!!l&&t.getEditorConfig(l.columnName),c=t.getState(),u=i.constants.KEY_CODES,h=o.keyCode,_=!1;switch(h){case u.ENTER:t.isVisible()?(t.save(),o.preventDefault(),_=!0):d&&!(o.ctrlKey||o.metaKey||o.shiftKey)&&(e.startEdit(l.id,l.columnName),o.preventDefault(),_=!0);break;case u.ESC:t.isVisible()&&(t.hide(),o.preventDefault(),_=!0);break;case u.UP:case u.DOWN:break;case u.LEFT:case u.RIGHT:(d&&t.isVisible()||c.editorType===\"date\")&&(_=!0);break;case u.SPACE:t.isVisible()&&(_=!0),d&&!t.isVisible()&&(e.startEdit(l.id,l.columnName),o.preventDefault(),_=!0);break;case u.DELETE:d&&!t.isVisible()?(e.startEdit(l.id,l.columnName),_=!0):d&&t.isVisible()&&(_=!0);break;case u.TAB:if(t.isVisible()){o.shiftKey?t.editPrevCell(!0):t.editNextCell(!0);var f=t.getState();f.id&&s.focus({type:\"taskCell\",id:f.id,column:f.columnName}),o.preventDefault(),_=!0;}break;default:if(t.isVisible())_=!0;else if(h>=48&&h<=57||h>95&&h<112||h>=64&&h<=91||h>185&&h<193||h>218&&h<223){var y=r.modifiers,v=y.alt||y.ctrl||y.meta||y.shift;y.alt||v&&s.getCommandHandler(r,\"taskCell\")||d&&!t.isVisible()&&(e.startEdit(l.id,l.columnName),_=!0);}}return!_;});},onShow:function(t,n,e){},onHide:function(t,n,e){const i=e.$gantt;i&&i.focus();},destroy:function(){}};function Et(t){var n=function(){};return n.prototype={show:function(e,i,a,s){},hide:function(){},set_value:function(e,i,a,s){this.get_input(s).value=e;},get_value:function(e,i,a){return this.get_input(a).value||\"\";},is_changed:function(e,i,a,s){var r=this.get_value(i,a,s);return r&&e&&r.valueOf&&e.valueOf?r.valueOf()!=e.valueOf():r!=e;},is_valid:function(e,i,a,s){return!0;},save:function(e,i,a){},get_input:function(e){return e.querySelector(\"input\");},focus:function(e){var i=this.get_input(e);i&&(i.focus&&i.focus(),i.select&&i.select());}},n;}function Aa(t){var n=Et();function e(){return n.apply(this,arguments)||this;}return F(e,n),R(e.prototype,{show:function(i,a,s,r){var o=`<div role='cell'><input type='text' name='${a.name}' title='${a.name}'></div>`;r.innerHTML=o;}},!0),e;}function Ia(t){var n=Et();function e(){return n.apply(this,arguments)||this;}return F(e,n),R(e.prototype,{show:function(i,a,s,r){var o=s.min||0,l=s.max||100,d=`<div role='cell'><input type='number' min='${o}' max='${l}' name='${a.name}' title='${a.name}'></div>`;r.innerHTML=d,r.oninput=function(c){+c.target.value<o&&(c.target.value=o),+c.target.value>l&&(c.target.value=l);};},get_value:function(i,a,s){return this.get_input(s).value||\"\";},is_valid:function(i,a,s,r){return!isNaN(parseInt(i,10));}},!0),e;}function Ma(t){var n=Et();function e(){return n.apply(this,arguments)||this;}return F(e,n),R(e.prototype,{show:function(i,a,s,r){for(var o=`<div role='cell'><select name='${a.name}' title='${a.name}'>`,l=[],d=s.options||[],c=0;c<d.length;c++)l.push(\"<option value='\"+s.options[c].key+\"'>\"+d[c].label+\"</option>\");o+=l.join(\"\")+\"</select></div>\",r.innerHTML=o;},get_input:function(i){return i.querySelector(\"select\");}},!0),e;}function Na(t){var n=Et(),e=\"%Y-%m-%d\",i=null,a=null;function s(){return n.apply(this,arguments)||this;}return F(s,n),R(s.prototype,{show:function(r,o,l,d){i||(i=t.date.date_to_str(e)),a||(a=t.date.str_to_date(e));var c=null,u=null;c=typeof l.min==\"function\"?l.min(r,o):l.min,u=typeof l.max==\"function\"?l.max(r,o):l.max;var h=`<div style='width:140px' role='cell'><input type='date' ${c?\" min='\"+i(c)+\"' \":\"\"} ${u?\" max='\"+i(u)+\"' \":\"\"} name='${o.name}' title='${o.name}'></div>`;d.innerHTML=h,d.oninput=function(_){_.target.value&&(c||u)&&(+t.date.str_to_date(\"%Y-%m-%d\")(_.target.value)<+c&&(_.target.value=t.date.date_to_str(\"%Y-%m-%d\")(c)),+t.date.str_to_date(\"%Y-%m-%d\")(_.target.value)>+u&&(_.target.value=t.date.date_to_str(\"%Y-%m-%d\")(u)));};},set_value:function(r,o,l,d){r&&r.getFullYear?this.get_input(d).value=i(r):this.get_input(d).value=r;},is_valid:function(r,o,l,d){return!(!r||isNaN(r.getTime()));},get_value:function(r,o,l){var d;try{d=a(this.get_input(l).value||\"\");}catch{d=null;}return d;}},!0),s;}function La(t){var n=Et();function e(){return n.apply(this,arguments)||this;}function i(l){return l.formatter||t.ext.formatters.linkFormatter();}function a(l,d){for(var c=(l||\"\").split(d.delimiter||\",\"),u=0;u<c.length;u++){var h=c[u].trim();h?c[u]=h:(c.splice(u,1),u--);}return c.sort(),c;}function s(l,d,c){for(var u=l.$target,h=[],_=0;_<u.length;_++){var f=c.getLink(u[_]);h.push(i(d).format(f));}return h.join((d.delimiter||\",\")+\" \");}function r(l){return l.source+\"_\"+l.target+\"_\"+l.type+\"_\"+(l.lag||0);}function o(l,d,c){var u=function(v,b,m){var g=[];return[...new Set(b)].forEach(function(p){var k=i(m).parse(p);k&&(k.target=v,k.id=\"predecessor_generated\",t.isLinkAllowed(k)&&(k.id=void 0,g.push(k)));}),g;}(l.id,d,c),h={};l.$target.forEach(function(v){var b=t.getLink(v);h[r(b)]=b.id;});var _=[];u.forEach(function(v){var b=r(v);h[b]?delete h[b]:_.push(v);});var f=[];for(var y in h)f.push(h[y]);return{add:_,remove:f};}return F(e,n),R(e.prototype,{show:function(l,d,c,u){var h=`<div role='cell'><input type='text' name='${d.name}' title='${d.name}'></div>`;u.innerHTML=h;},hide:function(){},set_value:function(l,d,c,u){this.get_input(u).value=s(l,c.editor,t);},get_value:function(l,d,c){return a(this.get_input(c).value||\"\",d.editor);},save:function(l,d,c){var u=o(t.getTask(l),this.get_value(l,d,c),d.editor);(u.add.length||u.remove.length)&&t.batchUpdate(function(){u.add.forEach(function(h){t.addLink(h);}),u.remove.forEach(function(h){t.deleteLink(h);}),t.autoSchedule&&t.autoSchedule();});},is_changed:function(l,d,c,u){var h=this.get_value(d,c,u),_=a(s(l,c.editor,t),c.editor);return h.join()!==_.join();}},!0),e;}function Ra(t){var n=Et();function e(){return n.apply(this,arguments)||this;}function i(a){return a.formatter||t.ext.formatters.durationFormatter();}return F(e,n),R(e.prototype,{show:function(a,s,r,o){var l=`<div role='cell'><input type='text' name='${s.name}' title='${s.name}'></div>`;o.innerHTML=l;},set_value:function(a,s,r,o){this.get_input(o).value=i(r.editor).format(a);},get_value:function(a,s,r){return i(s.editor).parse(this.get_input(r).value||\"\");}},!0),e;}function Pa(t){return function(e,i,a){a==\"keepDates\"?function(s,r){r==\"duration\"?s.end_date=t.calculateEndDate(s):r!=\"end_date\"&&r!=\"start_date\"||(s.duration=t.calculateDuration(s));}(e,i):a==\"keepDuration\"?function(s,r){r==\"end_date\"?s.start_date=n(s):r!=\"start_date\"&&r!=\"duration\"||(s.end_date=t.calculateEndDate(s));}(e,i):function(s,r){t._getAutoSchedulingConfig().schedule_from_end?r==\"end_date\"||r==\"duration\"?s.start_date=n(s):r==\"start_date\"&&(s.duration=t.calculateDuration(s)):r==\"start_date\"||r==\"duration\"?s.end_date=t.calculateEndDate(s):r==\"end_date\"&&(s.duration=t.calculateDuration(s));}(e,i);};function n(e){return t.calculateEndDate({start_date:e.end_date,duration:-e.duration,task:e});}}function Ha(t){t.config.editor_types={text:new(Aa())(),number:new(Ia())(),select:new(Ma())(),date:new(Na(t))(),predecessor:new(La(t))(),duration:new(Ra(t))()};}function Oa(t){var n=/* @__PURE__ */function(a){var s=null;return{setMapping:function(r){s=r;},getMapping:function(){return s||(a.config.keyboard_navigation_cells&&a.ext.keyboardNavigation?Da:Ea);}};}(t),e={};lt(e);var i={init:Ha,createEditors:function(a){function s(u,h){var _=a.$getConfig(),f=function(b,m){for(var g=a.$getConfig(),p=a.getItemTop(b),k=a.getItemHeight(b),x=a.getGridColumns(),w=0,$=0,T=0,S=0;S<x.length;S++){if(x[S].name==m){T=x[S].width;break;}g.rtl?$+=x[S].width:w+=x[S].width;}return g.rtl?{top:p,right:$,height:k,width:T}:{top:p,left:w,height:k,width:T};}(u,h),y=document.createElement(\"div\");y.className=\"gantt_grid_editor_placeholder\",y.setAttribute(a.$config.item_attribute,u),y.setAttribute(a.$config.bind+\"_id\",u),y.setAttribute(\"data-column-name\",h);var v=function(b,m){for(var g=b.getGridColumns(),p=0;p<g.length;p++)if(g[p].name==m)return p;return 0;}(a,h);return y.setAttribute(\"data-column-index\",v),t._waiAria.inlineEditorAttr(y),_.rtl?y.style.cssText=[\"top:\"+f.top+\"px\",\"right:\"+f.right+\"px\",\"width:\"+f.width+\"px\",\"height:\"+f.height+\"px\"].join(\";\"):y.style.cssText=[\"top:\"+f.top+\"px\",\"left:\"+f.left+\"px\",\"width:\"+f.width+\"px\",\"height:\"+f.height+\"px\"].join(\";\"),y;}var r=Pa(t),o=[],l=[],d=null,c={_itemId:null,_columnName:null,_editor:null,_editorType:null,_placeholder:null,locateCell:function(u){if(!K(u,a.$grid))return null;var h=it(u,a.$config.item_attribute),_=it(u,\"data-column-name\");if(h&&_){var f=_.getAttribute(\"data-column-name\");return{id:h.getAttribute(a.$config.item_attribute),columnName:f};}return null;},getEditorConfig:function(u){var h=a.getColumn(u);if(h)return h.editor;},init:function(){var u=n.getMapping();u.init&&u.init(this,a),!(d=a.$gantt.getDatastore(a.$config.bind))&&t.$data.tempAssignmentsStore&&(d=t.$data.tempAssignmentsStore);var h=this;o.push(d.attachEvent(\"onIdChange\",function(_,f){h._itemId==_&&(h._itemId=f);})),o.push(d.attachEvent(\"onStoreUpdated\",function(){a.$gantt.getState(\"batchUpdate\").batch_update||h.isVisible()&&!d.isVisible(h._itemId)&&h.hide();})),l.push(t.attachEvent(\"onDataRender\",function(){h._editor&&h._placeholder&&!K(h._placeholder,t.$root)&&a.$grid_data.appendChild(h._placeholder);})),this.init=function(){};},getState:function(){return{editor:this._editor,editorType:this._editorType,placeholder:this._placeholder,id:this._itemId,columnName:this._columnName};},startEdit:function(u,h){if(this.isVisible()&&this.save(),!d.exists(u))return;var _={id:u,columnName:h};if(t.isReadonly(d.getItem(u)))return void this.callEvent(\"onEditPrevent\",[_]);if(this.callEvent(\"onBeforeEditStart\",[_])===!1)return void this.callEvent(\"onEditPrevent\",[_]);const f=this.show(_.id,_.columnName);f&&f.then?f.then(function(){this.setValue(),this.callEvent(\"onEditStart\",[_]);}.bind(this)):(this.setValue(),this.callEvent(\"onEditStart\",[_]));},isVisible:function(){return t._lightbox_id?!(!this._editor||!K(this._placeholder,t._lightbox)):!(!this._editor||!K(this._placeholder,t.$root));},show:function(u,h){this.isVisible()&&this.save();var _={id:u,columnName:h},f=a.getColumn(_.columnName),y=this.getEditorConfig(f.name);if(!y)return;var v=a.$getConfig().editor_types[y.type],b=s(_.id,_.columnName);a.$grid_data.appendChild(b);const m=function(){this._editor=v,this._placeholder=b,this._itemId=_.id,this._columnName=_.columnName,this._editorType=y.type;var p=n.getMapping();p.onShow&&p.onShow(this,b,a),b._onReMount=function(){this.setValue();}.bind(this);}.bind(this),g=v.show(_.id,f,y,b);if(g&&g.then)return g.then(()=>{m();});m();},setValue:function(){var u,h=this.getState(),_=h.id,f=h.columnName,y=a.getColumn(f),v=d.getItem(_),b=this.getEditorConfig(f);if(b){if(t._lightbox_id){let m=d.getItem(this._itemId);b.map_to===\"text\"?u=t.getDatastore(t.config.resource_store).getItem(m.resource_id).text:u=b.map_to===\"start_date\"?v.start_date===\"\"||v.start_date===null?t.getTask(t._lightbox_id).start_date:v.start_date:v[b.map_to];}else u=v[b.map_to];b.map_to===\"auto\"&&(u=d.getItem(_)),this._editor.set_value(u,_,y,this._placeholder),this.focus();}},focus:function(){this._editor.focus(this._placeholder);},getValue:function(){var u=a.getColumn(this._columnName);return this._editor.get_value(this._itemId,u,this._placeholder);},_getItemValue:function(){var u=this.getEditorConfig(this._columnName);if(u){var h;if(t._lightbox_id){let _=d.getItem(this._itemId);u.type===\"select\"&&u.map_to!==\"mode\"?h=t.getDatastore(t.config.resource_store).getItem(_.resource_id).id:h=_[u.map_to];}else h=t.getTask(this._itemId)[u.map_to];return u.map_to==\"auto\"&&(h=d.getItem(this._itemId)),h;}},isChanged:function(){var u=a.getColumn(this._columnName),h=this._getItemValue();return this._editor.is_changed(h,this._itemId,u,this._placeholder);},hide:function(){if(this._itemId){var u=this._itemId,h=this._columnName,_=n.getMapping();_.onHide&&_.onHide(this,this._placeholder,a),this._itemId=null,this._columnName=null,this._editorType=null,this._placeholder&&(this._editor&&this._editor.hide&&this._editor.hide(this._placeholder),this._editor=null,this._placeholder.parentNode&&this._placeholder.parentNode.removeChild(this._placeholder),this._placeholder=null,this.callEvent(\"onEditEnd\",[{id:u,columnName:h}]));}},save:function(){if(this.isVisible()&&d.exists(this._itemId)&&this.isChanged()){var u=this._itemId,h=this._columnName;if(d.exists(u)){var _=d.getItem(u),f=this.getEditorConfig(h),y={id:u,columnName:h,newValue:this.getValue(),oldValue:this._getItemValue()};if(this.callEvent(\"onBeforeSave\",[y])!==!1&&(!this._editor.is_valid||this._editor.is_valid(y.newValue,y.id,a.getColumn(h),this._placeholder))){t._lightbox_id&&y.newValue==\"\"&&(y.newValue=y.oldValue);var v=f.map_to,b=y.newValue;v!=\"auto\"?(_[v]=b,r(_,v,t.config.inline_editors_date_processing),d.updateItem(u)):this._editor.save(u,a.getColumn(h),this._placeholder),this.callEvent(\"onSave\",[y]);}t._lightbox_id||this.hide();}}else this.hide();},_findEditableCell:function(u,h){var _=u,f=a.getGridColumns()[_],y=f?f.name:null;if(y){for(;y&&!this.getEditorConfig(y);)y=this._findEditableCell(u+h,h);return y;}return null;},getNextCell:function(u){return this._findEditableCell(a.getColumnIndex(this._columnName,!0)+u,u);},getFirstCell:function(){return this._findEditableCell(0,1);},getLastCell:function(){return this._findEditableCell(a.getGridColumns().length-1,-1);},editNextCell:function(u){var h=this.getNextCell(1);if(h){var _=this.getNextCell(1);_&&this.getEditorConfig(_)&&this.startEdit(this._itemId,_);}else if(u&&this.moveRow(1)){var f=this.moveRow(1);(h=this.getFirstCell())&&this.getEditorConfig(h)&&this.startEdit(f,h);}},editPrevCell:function(u){var h=this.getNextCell(-1);if(h){var _=this.getNextCell(-1);_&&this.getEditorConfig(_)&&this.startEdit(this._itemId,_);}else if(u&&this.moveRow(-1)){var f=this.moveRow(-1);(h=this.getLastCell())&&this.getEditorConfig(h)&&this.startEdit(f,h);}},moveRow:function(u){for(var h=u>0?t.getNext:t.getPrev,_=(h=t.bind(h,t))(this._itemId);t.isTaskExists(_)&&t.isReadonly(t.getTask(_));)_=h(_);return _;},editNextRow:function(u){var h=this.getState().id;if(t.isTaskExists(h)){var _=null;_=u?this.moveRow(1):t.getNext(h),t.isTaskExists(_)&&this.startEdit(_,this._columnName);}},editPrevRow:function(u){var h=this.getState().id;if(t.isTaskExists(h)){var _=null;_=u?this.moveRow(-1):t.getPrev(h),t.isTaskExists(_)&&this.startEdit(_,this._columnName);}},detachStore:function(){o.forEach(function(u){d.detachEvent(u);}),l.forEach(function(u){t.detachEvent(u);}),o=[],l=[],d=null,this.hide();},destructor:function(){this.detachStore(),this.detachAllEvents();}};return R(c,n),R(c,e),c;}};return R(i,n),R(i,e),i;}function Ee(t,n,e,i,a){if(!t.start_date||!t.end_date)return null;var s=e.getItemTop(t.id),r=e.getItemHeight(t.id);if(s>n.y_end||s+r<n.y)return!1;var o=e.posFromDate(t.start_date,e._getPositioningContext?e._getPositioningContext(t):null),l=e.posFromDate(t.end_date,e._getPositioningContext?e._getPositioningContext(t):null),d=Math.min(o,l)-200,c=Math.max(o,l)+200;return!(d>n.x_end||c<n.x);}function Sn(t){function n(s,r,o){if(t._isAllowedUnscheduledTask(s)||!t._isTaskInTimelineLimits(s))return;var l=r.getItemPosition(s),d=o,c=r.$getTemplates(),u=t.getTaskType(s.type),h=r.getBarHeight(s.id,u==d.types.milestone),_=0;u==d.types.milestone&&(_=(h-l.height)/2);var f=Math.floor((r.getItemHeight(s.id)-h)/2);const y=t.config.baselines&&s.baselines&&s.baselines.length,v=t.config.baselines&&(t.config.baselines.render_mode==\"separateRow\"||t.config.baselines.render_mode==\"individualRow\");if(y&&v&&s.bar_height!==\"full\"&&s.bar_height<s.row_height)if(u===d.types.milestone){let S=r.getBarHeight(s.id,!0),C=Math.sqrt(2*S*S);f=Math.floor((C-h)/2)+2;}else f=2;u==d.types.milestone&&(l.left-=Math.round(h/2),l.width=h);var b=document.createElement(\"div\"),m=Math.round(l.width);r.$config.item_attribute&&(b.setAttribute(r.$config.item_attribute,s.id),b.setAttribute(r.$config.bind+\"_id\",s.id)),d.show_progress&&u!=d.types.milestone&&function(S,C,E,D,A){var M=1*S.progress||0;E=Math.max(E,0);var I=document.createElement(\"div\"),N=Math.round(E*M);N=Math.min(E,N),I.style.width=N+\"px\",I.className=\"gantt_task_progress\",I.innerHTML=A.progress_text(S.start_date,S.end_date,S),D.rtl&&(I.style.position=\"absolute\",I.style.right=\"0px\");var L=document.createElement(\"div\");L.className=\"gantt_task_progress_wrapper\",L.appendChild(I),C.appendChild(L);const O=!t.isReadonly(S),z=t.ext.dragTimeline&&t.ext.dragTimeline._isDragInProgress();if(t.config.drag_progress&&(O||z)){var H=document.createElement(\"div\"),j=N;D.rtl&&(j=E-N),H.style.left=j+\"px\",H.className=\"gantt_task_progress_drag\",H.innerHTML=`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"9\" viewBox=\"0 0 12 9\" fill=\"none\">\n<path d=\"M5.58397 1.52543C5.78189 1.22856 6.21811 1.22856 6.41602 1.52543L10.5475 7.72265C10.769 8.05493 10.5308 8.5 10.1315 8.5L1.86852 8.5C1.46917 8.5 1.23097 8.05493 1.45249 7.72265L5.58397 1.52543Z\" fill=\"var(--dhx-gantt-progress-handle-background)\" stroke=\"var(--dhx-gantt-progress-handle-border)\"/>\n</svg>`,I.appendChild(H),C.appendChild(H);}}(s,b,m,d,c);var g=function(S,C,E){var D=document.createElement(\"div\");return t.getTaskType(S.type)!=t.config.types.milestone?D.innerHTML=E.task_text(S.start_date,S.end_date,S):t.getTaskType(S.type)==t.config.types.milestone&&C&&(D.style.height=D.style.width=C+\"px\"),D.className=\"gantt_task_content\",D;}(s,m,c);b.appendChild(g);var p=function(S,C,E,D){var A=D.$getConfig(),M=[S];C&&M.push(C);var I=t.getState(),N=t.getTask(E);if(t.getTaskType(N.type)==A.types.milestone?M.push(\"gantt_milestone\"):t.getTaskType(N.type)==A.types.project&&M.push(\"gantt_project\"),M.push(\"gantt_bar_\"+t.getTaskType(N.type)),t.isSummaryTask(N)&&M.push(\"gantt_dependent_task\"),t.isSplitTask(N)&&(N.$inlineSplit&&N.$inlineSplit.length||A.open_split_tasks&&!N.$open&&N.$inlineSplit&&N.$inlineSplit.length||!A.open_split_tasks)&&M.push(\"gantt_split_parent\"),A.select_task&&t.isSelectedTask(E)&&M.push(\"gantt_selected\"),E==I.drag_id&&(M.push(\"gantt_drag_\"+I.drag_mode),I.touch_drag&&M.push(\"gantt_touch_\"+I.drag_mode)),I.link_source_id==E&&(M.push(\"gantt_link_source\"),I.link_from_start?M.push(\"gantt_link_from_start\"):M.push(\"gantt_link_from_end\")),I.link_target_id==E&&M.push(\"gantt_link_target\"),A.highlight_critical_path&&t.isCriticalTask&&t.isCriticalTask(N)&&M.push(\"gantt_critical_task\"),I.link_landing_area&&I.link_target_id&&I.link_source_id&&I.link_target_id!=I.link_source_id&&(I.link_target_id==E||I.link_source_id==E)){var L=I.link_source_id,O=I.link_from_start,z=I.link_to_start,H=\"\";H=t.isLinkAllowed(L,E,O,z)?z?\"link_start_allow\":\"link_finish_allow\":z?\"link_start_deny\":\"link_finish_deny\",M.push(H);}return M.join(\" \");}(\"gantt_task_line\",c.task_class(s.start_date,s.end_date,s),s.id,r);(s.color||s.progressColor||s.textColor)&&(p+=\" gantt_task_inline_color\"),l.width<20&&(p+=\" gantt_thin_task\"),b.className=p;var k=[\"left:\"+l.left+\"px\",\"top:\"+(f+l.top)+\"px\",\"height:\"+h+\"px\",\"line-height:\"+Math.max(h<30?h-2:h,0)+\"px\",\"width:\"+m+\"px\"];b.style.cssText=k.join(\";\"),s.color&&b.style.setProperty(\"--dhx-gantt-task-background\",s.color),s.textColor&&b.style.setProperty(\"--dhx-gantt-task-color\",s.textColor),s.progressColor&&b.style.setProperty(\"--dhx-gantt-task-progress-color\",s.progressColor);var x=function(S,C,E,D){var A=\"gantt_left \"+i(!C.rtl,S),M=null;return D&&(M={type:\"marginRight\",value:D}),e(S,E.leftside_text,A,M);}(s,d,c,_);x&&b.appendChild(x),x=function(S,C,E,D){var A=\"gantt_right \"+i(!!C.rtl,S),M=null;return D&&(M={type:\"marginLeft\",value:D}),e(S,E.rightside_text,A,M);}(s,d,c,_),x&&b.appendChild(x),t._waiAria.setTaskBarAttr(s,b);var w=t.getState();const $=!t.isReadonly(s),T=t.ext.dragTimeline&&t.ext.dragTimeline._isDragInProgress();return($||T)&&(d.drag_resize&&!t.isSummaryTask(s)&&u!=d.types.milestone&&a(b,\"gantt_task_drag\",s,function(S){var C=document.createElement(\"div\");return C.className=S,C;},d),d.drag_links&&d.show_links&&a(b,\"gantt_link_control\",s,function(S){var C=document.createElement(\"div\");C.className=S,C.style.cssText=[\"height:\"+h+\"px\",\"line-height:\"+h+\"px\"].join(\";\");var E=document.createElement(\"div\");E.className=\"gantt_link_point\";var D=!1;return w.link_source_id&&d.touch&&(D=!0),E.style.display=D?\"block\":\"\",C.appendChild(E),C;},d,_)),b;}function e(s,r,o,l){if(!r)return null;var d=r(s.start_date,s.end_date,s);if(!d)return null;var c=document.createElement(\"div\");return c.className=\"gantt_side_content \"+o,c.innerHTML=d,l&&(c.style[l.type]=Math.abs(l.value)+\"px\"),c;}function i(s,r){var o=s?{$source:[t.config.links.start_to_start],$target:[t.config.links.start_to_start,t.config.links.finish_to_start]}:{$source:[t.config.links.finish_to_start,t.config.links.finish_to_finish],$target:[t.config.links.finish_to_finish]};for(var l in o)for(var d=r[l],c=0;c<d.length;c++)for(var u=t.getLink(d[c]),h=0;h<o[l].length;h++)if(u.type==o[l][h])return\"gantt_link_crossing\";return\"\";}function a(s,r,o,l,d,c){var u,h=t.getState();+o.start_date>=+h.min_date&&((u=l([r,d.rtl?\"task_right\":\"task_left\",\"task_start_date\"].join(\" \"))).setAttribute(\"data-bind-property\",\"start_date\"),c&&(u.style.marginLeft=c+\"px\"),s.appendChild(u)),+o.end_date<=+h.max_date&&((u=l([r,d.rtl?\"task_left\":\"task_right\",\"task_end_date\"].join(\" \"))).setAttribute(\"data-bind-property\",\"end_date\"),c&&(u.style.marginRight=c+\"px\"),s.appendChild(u));}return function(s,r,o){var l=(o=r.$getConfig()).type_renderers[t.getTaskType(s.type)],d=n;return l?l.call(t,s,function(c){return d.call(t,c,r,o);},r):d.call(t,s,r,o);};}function Ye(t){return{render:Sn(t),update:null,isInViewPort:Ee,getVisibleRange:mt};}function It(){return console.error(\"You are trying to use a Pro feature that is not available in the GPL version.\"),{render:function(){},isInViewPort:function(){},getVisibleRange:function(){}};}function Je(t,n,e){return{top:n.getItemTop(t.id),height:n.getItemHeight(t.id),left:0,right:1/0};}function Vt(t,n){var e=0,i=t.left.length-1;if(n)for(var a=0;a<t.left.length;a++){var s=t.left[a];if(s<n.x&&(e=a),s>n.x_end){i=a;break;}}return{start:e,end:i};}function _e(t,n,e,i){var a=n.width[t];if(a<=0)return!1;if(!i.config.smart_rendering||Rt(i))return!0;var s=n.left[t]-a,r=n.left[t]+a;return s<=e.x_end&&r>=e.x;}function Ba(t,n){var e=n.config.timeline_placeholder;if(t=t||[],e&&t.filter(l=>l.id===\"timeline_placeholder_task\").length===0){var i=n.getState(),a=null,s=i.min_date,r=i.max_date;t.length&&(a=t[t.length-1].id);var o={start_date:s,end_date:r,row_height:e.height||0,id:\"timeline_placeholder_task\",unscheduled:!0,lastTaskId:a,calendar_id:e.calendar||\"global\",$source:[],$target:[]};t.push(o);}}function za(t){var n={current_pos:null,dirs:{left:\"left\",right:\"right\",up:\"up\",down:\"down\"},path:[],clear:function(){this.current_pos=null,this.path=[];},point:function(a){this.current_pos=t.copy(a);},get_lines:function(a){this.clear(),this.point(a[0]);for(var s=1;s<a.length;s++)this.line_to(a[s]);return this.get_path();},line_to:function(a){var s=t.copy(a),r=this.current_pos,o=this._get_line(r,s);this.path.push(o),this.current_pos=s;},get_path:function(){return this.path;},get_wrapper_sizes:function(a,s,r){var o,l=s.$getConfig().link_wrapper_width,d=a.y-l/2;switch(a.direction){case this.dirs.left:o={top:d,height:l,lineHeight:l,left:a.x-a.size-l/2,width:a.size+l};break;case this.dirs.right:o={top:d,lineHeight:l,height:l,left:a.x-l/2,width:a.size+l};break;case this.dirs.up:o={top:d-a.size,lineHeight:a.size+l,height:a.size+l,left:a.x-l/2,width:l};break;case this.dirs.down:o={top:d,lineHeight:a.size+l,height:a.size+l,left:a.x-l/2,width:l};}return o;},get_line_sizes:function(a,s){var r,o=s.$getConfig(),l=o.link_line_width,d=o.link_wrapper_width,c=a.size+l;switch(a.direction){case this.dirs.left:case this.dirs.right:r={height:l,width:c,marginTop:(d-l)/2,marginLeft:(d-l)/2};break;case this.dirs.up:case this.dirs.down:r={height:c,width:l,marginTop:(d-l)/2,marginLeft:(d-l)/2};}return r;},render_line:function(a,s,r,o){var l=this.get_wrapper_sizes(a,r,o),d=document.createElement(\"div\");d.style.cssText=[\"top:\"+l.top+\"px\",\"left:\"+l.left+\"px\",\"height:\"+l.height+\"px\",\"width:\"+l.width+\"px\"].join(\";\"),d.className=\"gantt_line_wrapper\";var c=this.get_line_sizes(a,r),u=document.createElement(\"div\");return u.style.cssText=[\"height:\"+c.height+\"px\",\"width:\"+c.width+\"px\",\"margin-top:\"+c.marginTop+\"px\",\"margin-left:\"+c.marginLeft+\"px\"].join(\";\"),u.className=\"gantt_link_line_\"+a.direction,d.appendChild(u),d;},render_corner:function(a,s){const r=a.radius,o=s.$getConfig(),l=o.link_line_width||2,d=document.createElement(\"div\");let c,u;return d.classList.add(\"gantt_link_corner\"),d.classList.add(`gantt_link_corner_${a.direction.from}_${a.direction.to}`),d.style.width=`${r}px`,d.style.height=`${r}px`,a.direction.from===\"right\"&&a.direction.to===\"down\"?(c=\"Right\",u=\"Top\",d.style.left=a.x-o.link_line_width/2+\"px\",d.style.top=`${a.y}px`):a.direction.from===\"down\"&&a.direction.to===\"right\"?(c=\"Left\",u=\"Bottom\",d.style.left=a.x-o.link_line_width/2+\"px\",d.style.top=`${a.y}px`):a.direction.from===\"right\"&&a.direction.to===\"up\"?(c=\"Right\",u=\"Bottom\",d.style.left=a.x-o.link_line_width/2+\"px\",d.style.top=a.y-r+\"px\"):a.direction.from===\"up\"&&a.direction.to===\"right\"?(c=\"Left\",u=\"Top\",d.style.left=a.x-o.link_line_width/2+\"px\",d.style.top=a.y-r+\"px\"):a.direction.from===\"left\"&&a.direction.to===\"down\"?(c=\"Left\",u=\"Top\",d.style.left=a.x-r-o.link_line_width/2+\"px\",d.style.top=`${a.y}px`):a.direction.from===\"down\"&&a.direction.to===\"left\"?(c=\"Right\",u=\"Bottom\",d.style.left=a.x-r-o.link_line_width/2+\"px\",d.style.top=`${a.y}px`):a.direction.from===\"left\"&&a.direction.to===\"up\"?(c=\"Left\",u=\"Bottom\",d.style.left=a.x-r-o.link_line_width/2+\"px\",d.style.top=a.y-r+\"px\"):a.direction.from===\"up\"&&a.direction.to===\"left\"&&(c=\"Right\",u=\"Top\",d.style.left=a.x-r-o.link_line_width/2+\"px\",d.style.top=a.y-r+\"px\"),d.style[`border${u}Width`]=`${l}px`,d.style[`border${c}Width`]=`${l}px`,d.style[`border${c}Style`]=\"solid\",d.style[`border${u}Style`]=\"solid\",d.style[`border${u}${c}Radius`]=`${r}px`,d;},render_arrow(a,s){var r=document.createElement(\"div\"),o=a.y,l=a.x,d=s.link_arrow_size;r.style.setProperty(\"--dhx-gantt-icon-size\",`${d}px`);var c=\"gantt_link_arrow gantt_link_arrow_\"+a.direction;return r.style.top=o+\"px\",r.style.left=l+\"px\",r.className=c,r;},_get_line:function(a,s){var r=this.get_direction(a,s),o={x:a.x,y:a.y,direction:this.get_direction(a,s)};return r==this.dirs.left||r==this.dirs.right?o.size=Math.abs(a.x-s.x):o.size=Math.abs(a.y-s.y),o;},get_direction:function(a,s){return s.x<a.x?this.dirs.left:s.x>a.x?this.dirs.right:s.y>a.y?this.dirs.down:this.dirs.up;}},e={path:[],clear:function(){this.path=[];},current:function(){return this.path[this.path.length-1];},point:function(a){return a?(this.path.push(t.copy(a)),a):this.current();},point_to:function(a,s,r){r=r?{x:r.x,y:r.y}:t.copy(this.point());var o=n.dirs;switch(a){case o.left:r.x-=s;break;case o.right:r.x+=s;break;case o.up:r.y-=s;break;case o.down:r.y+=s;}return this.point(r);},get_points:function(a,s,r,o){var l=this.get_endpoint(a,s,r,o),d=t.config,c=l.e_y-l.y,u=l.e_x-l.x,h=n.dirs,_=s.getItemHeight(a.source);this.clear(),this.point({x:l.x,y:l.y});var f=2*d.link_arrow_size,y=this.get_line_type(a,s.$getConfig()),v=l.e_x>l.x;if(y.from_start&&y.to_start)this.point_to(h.left,f),v?(this.point_to(h.down,c),this.point_to(h.right,u)):(this.point_to(h.right,u),this.point_to(h.down,c)),this.point_to(h.right,f);else if(!y.from_start&&y.to_start){if(c!==0&&(v=l.e_x>l.x+2*f),this.point_to(h.right,f),v)u-=f,this.point_to(h.down,c),this.point_to(h.right,u);else{u-=2*f;var b=c>0?1:-1;this.point_to(h.down,b*(_/2)),this.point_to(h.right,u),this.point_to(h.down,b*(Math.abs(c)-_/2)),this.point_to(h.right,f);}}else y.from_start||y.to_start?y.from_start&&!y.to_start&&(c!==0&&(v=l.e_x>l.x-2*f),this.point_to(h.left,f),v?(u+=2*f,b=c>0?1:-1,this.point_to(h.down,b*(_/2)),this.point_to(h.right,u),this.point_to(h.down,b*(Math.abs(c)-_/2)),this.point_to(h.left,f)):(u+=f,this.point_to(h.down,c),this.point_to(h.right,u))):(this.point_to(h.right,f),v?(this.point_to(h.right,u),this.point_to(h.down,c)):(this.point_to(h.down,c),this.point_to(h.right,u)),this.point_to(h.left,f));return this.path;},get_line_type:function(a,s){var r=s.links,o=!1,l=!1;return a.type==r.start_to_start?o=l=!0:a.type==r.finish_to_finish?o=l=!1:a.type==r.finish_to_start?(o=!1,l=!0):a.type==r.start_to_finish?(o=!0,l=!1):t.assert(!1,\"Invalid link type\"),s.rtl&&(o=!o,l=!l),{from_start:o,to_start:l};},get_endpoint:function(a,s,r,o){var l=s.$getConfig(),d=this.get_line_type(a,l),c=d.from_start,u=d.to_start,h=i(r,s,l),_=i(o,s,l);return{x:c?h.left:h.left+h.width,e_x:u?_.left:_.left+_.width,y:h.top+h.rowHeight/2-1,e_y:_.top+_.rowHeight/2-1};}};function i(a,s,r){var o=s.getItemPosition(a);let l=function(f,y,v,b){let m=b||y.$task_data.scrollHeight,g=!1,p=!1;return f.eachParent(function(k){if(St(k)){p=!0;const x=y.getItemPosition(k).rowHeight;x<m&&(m=x,g=!0);}},v.id),{maxHeight:m,shrinkHeight:g,splitChild:p};}(t,s,a),d=l.maxHeight,c=l.splitChild;const u=t.config.baselines&&(t.config.baselines.render_mode==\"separateRow\"||t.config.baselines.render_mode==\"individualRow\")&&a.baselines&&a.baselines.length;let h;l.shrinkHeight&&(o.rowHeight=d);let _=t.getTaskType(a.type)==r.types.milestone;if(_){let f=s.getBarHeight(a.id,!0);h=Math.sqrt(2*f*f),l.shrinkHeight&&d<f&&(f=d,h=d),o.left-=h/2,o.width=h;}if(c){if(d>=o.height){const f=function(y,v){let b=!1;return y.eachTask(function(m){b||(b=pn(y,m));},v),b;}(t,a.parent);u||f?_?(o.rowHeight=o.height+4,o.left+=(o.width-o.rowHeight+4)/2,o.width=o.rowHeight-3):o.rowHeight=o.height+6:_&&(o.left+=(h-o.height)/2);}else o.rowHeight=d+2,_&&(o.left+=(o.width-o.rowHeight+4)/2,o.width=o.rowHeight-3);}else u&&(o.rowHeight=o.height+4);return o;}return{render:function(a,s,r){var o=t.getTask(a.source);if(o.hide_bar)return;var l=t.getTask(a.target);if(l.hide_bar)return;var d=e.get_endpoint(a,s,o,l),c=d.e_y-d.y;if(!(d.e_x-d.x)&&!c)return null;var u=e.get_points(a,s,o,l);const h=function(v,b){const m=b.link_radius||4,g=b.link_arrow_size||6,p=[];for(let x=0;x<v.length;x++){const w=v[x],$=v[x+1];if(!$||b.link_radius<=1)p.push({type:\"line\",data:w});else if(w.direction!==$.direction){if(w.size<m||$.size<m){p.push({type:\"line\",data:w});continue;}w.size-=m,p.push({type:\"line\",data:w});let T=w.x,S=w.y-b.link_line_width/2;switch(w.direction){case\"right\":T+=w.size;break;case\"left\":T-=w.size;break;case\"down\":S+=w.size;break;case\"up\":S-=w.size;}const C={x:T,y:S,direction:{from:w.direction,to:$.direction},radius:m};switch(p.push({type:\"corner\",data:C}),$.direction){case\"right\":$.x+=m,$.size-=m;break;case\"left\":$.x-=m,$.size-=m;break;case\"down\":$.y+=m,$.size-=m;break;case\"up\":$.y-=m,$.size-=m;}}else p.push({type:\"line\",data:w});}const k=v[v.length-1];if(k.direction===\"right\"||k.direction===\"left\"){k.size-=3*g/4;let x=k.direction===\"right\"?k.x+k.size:k.x-k.size-g/2,w=k.y-b.link_line_width/2-g/2+1;k.direction===\"left\"?(w-=1,x-=2):x-=1;const $={x,y:w,size:g,direction:k.direction};p.push({type:\"line\",data:k}),p.push({type:\"arrow\",data:$});}else p.push({type:\"line\",data:k});return p;}(n.get_lines(u,s).filter(v=>v.size>0),r),_=function(v,b,m,g){const p=document.createElement(\"div\");return v.forEach(k=>{let x;k.type===\"line\"?x=n.render_line(k.data,null,b,m.source):k.type===\"corner\"?x=n.render_corner(k.data,b):k.type===\"arrow\"&&(x=n.render_arrow(k.data,g)),p.appendChild(x);}),p;}(h,s,a,r);var f=\"gantt_task_link\";a.color&&(f+=\" gantt_link_inline_color\");var y=t.templates.link_class?t.templates.link_class(a):\"\";return y&&(f+=\" \"+y),r.highlight_critical_path&&t.isCriticalLink&&t.isCriticalLink(a)&&(f+=\" gantt_critical_link\"),_.className=f,s.$config.link_attribute&&(_.setAttribute(s.$config.link_attribute,a.id),_.setAttribute(\"link_id\",a.id)),a.color&&_.style.setProperty(\"--dhx-gantt-link-background\",a.color),t._waiAria.linkAttr(a,_),_;},update:null,isInViewPort:xn,getVisibleRange:bn()};}function ja(t,n,e,i,a){if(a.$ui.getView(\"grid\")&&(a.config.keyboard_navigation&&a.getSelectedId()||a.ext.inlineEditors&&a.ext.inlineEditors.getState().id))return!!t.$expanded_branch;var s=e.getItemTop(t.id),r=e.getItemHeight(t.id);return!(s>n.y_end||s+r<n.y);}function Wa(t){let n={};return t.$data.tasksStore.attachEvent(\"onStoreUpdated\",function(){n={};}),function(e,i,a,s){const r=e.id+\"_\"+i+\"_\"+a.unit+\"_\"+a.step;let o;return o=n[r]?n[r]:n[r]=function(l,d,c,u){let h,_=!1,f={};t.config.process_resource_assignments&&d===t.config.resource_property?(h=l.$role==\"task\"?t.getResourceAssignments(l.$resource_id,l.$task_id):t.getResourceAssignments(l.id),_=!0):h=l.$role==\"task\"?[]:t.getTaskBy(d,l.id),f=function($,T,S){const C=T.unit,E=T.step,D={},A={};for(let M=0;M<$.length;M++){const I=$[M];let N=I;if(S&&(N=t.getTask(I.task_id)),N.unscheduled)continue;let L=I.start_date||N.start_date,O=I.end_date||N.end_date;S&&(I.start_date&&(L=new Date(Math.max(I.start_date.valueOf(),N.start_date.valueOf()))),I.end_date&&(O=new Date(Math.min(I.end_date.valueOf(),N.end_date.valueOf()))),I.mode&&I.mode==\"fixedDates\"&&(L=I.start_date,O=I.end_date));let z=Tt(T.trace_x,L.valueOf()),H=new Date(T.trace_x[z]||t.date[C+\"_start\"](new Date(L))),j=new Date(Math.min(L.valueOf(),H.valueOf())),P=t.config.work_time?t.getTaskCalendar(N):t;for(A[P.id]={};j<O;){const V=A[P.id],W=j.valueOf();j=t.date.add(j,E,C),V[W]!==!1&&(D[W]||(D[W]={tasks:[],assignments:[]}),D[W].tasks.push(N),S&&D[W].assignments.push(I));}}return D;}(h,c,_);const y=c.unit,v=c.step,b=[];let m,g,p,k,x;const w=u.$getConfig();for(let $=0;$<c.trace_x.length;$++)m=new Date(c.trace_x[$]),g=t.date.add(m,v,y),x=f[m.valueOf()]||{},p=x.tasks||[],k=x.assignments||[],p.length||w.resource_render_empty_cells?b.push({start_date:m,end_date:g,tasks:p,assignments:k}):b.push(null);return b;}(e,i,a,s),o;};}const Fa={init:function(t,n){var e=t.$services.getService(\"dnd\");if(n.$config.bind&&t.getDatastore(n.$config.bind)){var i=new e(n.$grid_data,{updates_per_second:60});t.defined(n.$getConfig().dnd_sensitivity)&&(i.config.sensitivity=n.$getConfig().dnd_sensitivity),i.attachEvent(\"onBeforeDragStart\",t.bind(function(o,l){var d=a(l);if(!d||(t.hideQuickInfo&&t.hideQuickInfo(),ht(l.target,\".gantt_grid_editor_placeholder\")))return!1;var c=d.getAttribute(n.$config.item_attribute);if(r(c))return!1;var u=s().getItem(c);return!t.isReadonly(u)&&(i.config.initial_open_state=u.$open,!!t.callEvent(\"onRowDragStart\",[c,l.target||l.srcElement,l])&&void 0);},t)),i.attachEvent(\"onAfterDragStart\",t.bind(function(o,l){var d=a(l);i.config.marker.innerHTML=d.outerHTML;var c=i.config.marker.firstChild;c&&(c.style.position=\"static\"),i.config.id=d.getAttribute(n.$config.item_attribute);var u=s(),h=u.getItem(i.config.id);i.config.index=u.getBranchIndex(i.config.id),i.config.parent=h.parent,h.$open=!1,h.$transparent=!0,this.refreshData();},t)),i.lastTaskOfLevel=function(o){for(var l=null,d=s().getItems(),c=0,u=d.length;c<u;c++)d[c].$level==o&&(l=d[c]);return l?l.id:null;},i._getGridPos=t.bind(function(o){var l=Y(n.$grid_data),d=l.x+n.$grid.scrollLeft,c=o.pos.y-10,u=n.getItemHeight(i.config.id);c<l.y&&(c=l.y);var h=n.getTotalHeight();c>l.y+h-u&&(c=l.y+h-u);const _=l.y+l.height;return c>_-u&&(c=_-u),l.x=d,l.y=c,l;},t),i._getTargetY=t.bind(function(o){var l=Y(n.$grid_data),d=n.$state.scrollTop||0,c=t.$grid_data.getBoundingClientRect().height+d,u=o.pageY-l.y+d;return u>c?u=c:u<d&&(u=d),u;},t),i._getTaskByY=t.bind(function(o,l){var d=s();o=o||0;var c=n.getItemIndexByTopPosition(o);return(c=l<c?c-1:c)>d.countVisible()-1?null:d.getIdByIndex(c);},t),i.attachEvent(\"onDragMove\",t.bind(function(o,l){var d=t.$grid_data.getBoundingClientRect(),c=d.height+d.y+(n.$state.scrollTop||0)+window.scrollY,u=i.config,h=i._getGridPos(l);t._waiAria.reorderMarkerAttr(u.marker);var _=n.$getConfig(),f=s();h.y<c?u.marker.style.top=h.y+\"px\":u.marker.style.top=c+\"px\",u.marker.style.left=h.x+10+\"px\";const y=Y(t.$root);h.width>y.width&&(u.marker.style.width=y.width-10-2+\"px\",u.marker.style.overflow=\"hidden\");var v=f.getItem(i.config.id),b=i._getTargetY(l),m=i._getTaskByY(b,f.getIndexById(v.id));function g(D,A){return!f.isChildOf(p.id,A.id)&&(D.$level==A.$level||_.order_branch_free);}if(f.exists(m)||(m=i.lastTaskOfLevel(_.order_branch_free?v.$level:0))==i.config.id&&(m=null),f.exists(m)){var p=f.getItem(m),k=n.getItemTop(p.id),x=n.getItemHeight(p.id);if(k+x/2<b){var w=f.getIndexById(p.id),$=f.getNext(p.id),T=f.getItem($);if(r($)){var S=f.getPrev(T.id);T=f.getItem(S);}if(T){if(T.id==v.id)return _.order_branch_free&&f.isChildOf(v.id,p.id)&&f.getChildren(p.id).length==1?void f.move(v.id,f.getBranchIndex(p.id)+1,f.getParent(p.id)):void 0;p=T;}else if($=f.getIdByIndex(w),T=f.getItem($),r($)&&(S=f.getPrev(T.id),T=f.getItem(S)),g(T,v)&&T.id!=v.id)return void f.move(v.id,-1,f.getParent(T.id));}else if(_.order_branch_free&&p.id!=v.id&&g(p,v)&&!r(p.id)){if(!f.hasChild(p.id))return p.$open=!0,void f.move(v.id,-1,p.id);if(f.getIndexById(p.id)||x/3<b)return;}w=f.getIndexById(p.id),S=f.getIdByIndex(w-1);for(var C=f.getItem(S),E=1;(!C||C.id==p.id)&&w-E>=0;)S=f.getIdByIndex(w-E),C=f.getItem(S),E++;if(v.id==p.id||r(p.id))return;g(p,v)&&v.id!=p.id?f.move(v.id,0,0,p.id):p.$level!=v.$level-1||f.getChildren(p.id).length?C&&g(C,v)&&v.id!=C.id&&f.move(v.id,-1,f.getParent(C.id)):f.move(v.id,0,p.id);}return!0;},t)),i.attachEvent(\"onDragEnd\",t.bind(function(){var o=s(),l=o.getItem(i.config.id);l.$transparent=!1,l.$open=i.config.initial_open_state,this.callEvent(\"onBeforeRowDragEnd\",[i.config.id,i.config.parent,i.config.index])===!1?(o.move(i.config.id,i.config.index,i.config.parent),l.$drop_target=null):this.callEvent(\"onRowDragEnd\",[i.config.id,l.$drop_target]),t.render(),this.refreshData();},t));}function a(o){return it(o,n.$config.item_attribute);}function s(){return t.getDatastore(n.$config.bind);}function r(o){return Ot(o,t,s());}}},Z={createDropTargetObject:function(t){var n={targetParent:null,targetIndex:0,targetId:null,child:!1,nextSibling:!1,prevSibling:!1};return t&&R(n,t,!0),n;},nextSiblingTarget:function(t,n,e){var i=this.createDropTargetObject();return i.targetId=n,i.nextSibling=!0,i.targetParent=e.getParent(i.targetId),i.targetIndex=e.getBranchIndex(i.targetId),(e.getParent(t)!=i.targetParent||i.targetIndex<e.getBranchIndex(t))&&(i.targetIndex+=1),i;},prevSiblingTarget:function(t,n,e){var i=this.createDropTargetObject();return i.targetId=n,i.prevSibling=!0,i.targetParent=e.getParent(i.targetId),i.targetIndex=e.getBranchIndex(i.targetId),e.getParent(t)==i.targetParent&&i.targetIndex>e.getBranchIndex(t)&&(i.targetIndex-=1),i;},firstChildTarget:function(t,n,e){var i=this.createDropTargetObject();return i.targetId=n,i.targetParent=i.targetId,i.targetIndex=0,i.child=!0,i;},lastChildTarget:function(t,n,e){var i=e.getChildren(n),a=this.createDropTargetObject();return a.targetId=i[i.length-1],a.targetParent=n,a.targetIndex=i.length,a.nextSibling=!0,a;}};function Tn(t,n,e,i,a){for(var s=n;i.exists(s);){var r=i.calculateItemLevel(i.getItem(s));if((r===e||r===e-1)&&i.getBranchIndex(s)>-1)break;s=a?i.getPrev(s):i.getNext(s);}return i.exists(s)?i.calculateItemLevel(i.getItem(s))===e?a?Z.nextSiblingTarget(t,s,i):Z.prevSiblingTarget(t,s,i):Z.firstChildTarget(t,s,i):null;}function ge(t,n,e,i){return Tn(t,n,e,i,!0);}function Ke(t,n,e,i){return Tn(t,n,e,i,!1);}function Xe(t,n,e,i,a,s){var r;if(n!==a.$getRootId()){var o=a.getItem(n),l=a.calculateItemLevel(o);if(l===s){var d=a.getPrevSibling(n);e<0.5&&!d?r=Z.prevSiblingTarget(t,n,a):(e<0.5&&(n=d),r=Z.nextSiblingTarget(t,n,a));}else if(l>s)a.eachParent(function(f){a.calculateItemLevel(f)===s&&(n=f.id);},o),r=ge(t,n,s,a);else{var c=ge(t,n,s,a),u=Ke(t,n,s,a);r=e<0.5?c:u;}}else{var h=a.$getRootId(),_=a.getChildren(h);r=Z.createDropTargetObject(),r=_.length&&i>=0?ge(t,function(f){for(var y=f.getNext();f.exists(y);){var v=f.getNext(y);if(!f.exists(v))return y;y=v;}return null;}(a),s,a):Ke(t,h,s,a);}return r;}function Ze(t,n){var e=Y(n.$grid_data);return t.x+=e.x+n.$grid.scrollLeft,t.y+=e.y-n.$grid_data.scrollTop,t;}function fe(t,n,e=0){const i=Y(t.$root);return n>i.width&&(n=i.width-e-2),n;}const Qe={removeLineHighlight:function(t){t.markerLine&&t.markerLine.parentNode&&t.markerLine.parentNode.removeChild(t.markerLine),t.markerLine=null;},highlightPosition:function(t,n,e){var i=function(s,r){var o=Y(r.$grid_data),l=rt(s,r.$grid_data),d=o.x+r.$grid.scrollLeft,c=l.y-10,u=r.getItemHeight(s.targetId);c<o.y&&(c=o.y);var h=r.getTotalHeight();return c>o.y+h-u&&(c=o.y+h-u),o.x=d,o.y=c,o.width=fe(r.$gantt,o.width,9),o;}(t,e);n.marker.style.left=i.x+9+\"px\",n.marker.style.width=i.width+\"px\",n.marker.style.overflow=\"hidden\";var a=n.markerLine;a||((a=document.createElement(\"div\")).className=\"gantt_drag_marker gantt_grid_dnd_marker\",a.innerHTML=\"<div class='gantt_grid_dnd_marker_line'></div>\",a.style.pointerEvents=\"none\"),t.child?function(s,r,o){var l=s.targetParent,d=Ze({x:0,y:o.getItemTop(l)},o),c=o.$grid_data.getBoundingClientRect().bottom+window.scrollY;let u=fe(o.$gantt,o.$grid_data.offsetWidth);r.innerHTML=\"<div class='gantt_grid_dnd_marker_folder'></div>\",r.style.width=u+\"px\",r.style.top=d.y+\"px\",r.style.left=d.x+\"px\",r.style.height=o.getItemHeight(l)+\"px\",d.y>c&&(r.style.top=c+\"px\");}(t,a,e):function(s,r,o){var l=function(u,h){var _=h.$config.rowStore,f={x:0,y:0},y=h.$grid_data.querySelector(\".gantt_tree_indent\"),v=15,b=0;y&&(v=y.offsetWidth);var m=40;if(u.targetId!==_.$getRootId()){var g=h.getItemTop(u.targetId),p=h.getItemHeight(u.targetId);if(b=_.exists(u.targetId)?_.calculateItemLevel(_.getItem(u.targetId)):0,u.prevSibling)f.y=g;else if(u.nextSibling){var k=0;_.eachItem(function(x){_.getIndexById(x.id)!==-1&&k++;},u.targetId),f.y=g+p+k*p;}else f.y=g+p,b+=1;}return f.x=m+b*v,f.width=fe(h.$gantt,Math.max(h.$grid_data.offsetWidth-f.x,0),f.x),Ze(f,h);}(s,o),d=o.$grid_data.getBoundingClientRect().bottom+window.scrollY;r.innerHTML=\"<div class='gantt_grid_dnd_marker_line'></div>\",r.style.left=l.x+\"px\",r.style.height=\"4px\";var c=l.y-2;r.style.top=c+\"px\",r.style.width=l.width+\"px\",c>d&&(r.style.top=d+\"px\");}(t,a,e),n.markerLine||(document.body.appendChild(a),n.markerLine=a);}},Va={init:function(t,n){var e=t.$services.getService(\"dnd\");if(n.$config.bind&&t.getDatastore(n.$config.bind)){var i=new e(n.$grid_data,{updates_per_second:60});t.defined(n.$getConfig().dnd_sensitivity)&&(i.config.sensitivity=n.$getConfig().dnd_sensitivity),i.attachEvent(\"onBeforeDragStart\",t.bind(function(o,l){var d=a(l);if(!d||(t.hideQuickInfo&&t.hideQuickInfo(),ht(l.target,\".gantt_grid_editor_placeholder\")))return!1;var c=d.getAttribute(n.$config.item_attribute),u=n.$config.rowStore.getItem(c);return!t.isReadonly(u)&&!s(c)&&(i.config.initial_open_state=u.$open,!!t.callEvent(\"onRowDragStart\",[c,l.target||l.srcElement,l])&&void 0);},t)),i.attachEvent(\"onAfterDragStart\",t.bind(function(o,l){var d=a(l);i.config.marker.innerHTML=d.outerHTML;var c=i.config.marker.firstChild;c&&(i.config.marker.style.opacity=0.4,c.style.position=\"static\",c.style.pointerEvents=\"none\"),i.config.id=d.getAttribute(n.$config.item_attribute);var u=n.$config.rowStore,h=u.getItem(i.config.id);i.config.level=u.calculateItemLevel(h),i.config.drop_target=Z.createDropTargetObject({targetParent:u.getParent(h.id),targetIndex:u.getBranchIndex(h.id),targetId:h.id,nextSibling:!0}),h.$open=!1,h.$transparent=!0,this.refreshData();},t)),i.attachEvent(\"onDragMove\",t.bind(function(o,l){var d=r(l);return d&&t.callEvent(\"onBeforeRowDragMove\",[i.config.id,d.targetParent,d.targetIndex])!==!1||(d=Z.createDropTargetObject(i.config.drop_target)),Qe.highlightPosition(d,i.config,n),i.config.drop_target=d,t._waiAria.reorderMarkerAttr(i.config.marker),this.callEvent(\"onRowDragMove\",[i.config.id,d.targetParent,d.targetIndex]),!0;},t)),i.attachEvent(\"onDragEnd\",t.bind(function(){var o=n.$config.rowStore,l=o.getItem(i.config.id);Qe.removeLineHighlight(i.config),l.$transparent=!1,l.$open=i.config.initial_open_state;var d=i.config.drop_target;this.callEvent(\"onBeforeRowDragEnd\",[i.config.id,d.targetParent,d.targetIndex])===!1?l.$drop_target=null:(o.move(i.config.id,d.targetIndex,d.targetParent),t.render(),this.callEvent(\"onRowDragEnd\",[i.config.id,d.targetParent,d.targetIndex])),o.refresh(l.id);},t));}function a(o){return it(o,n.$config.item_attribute);}function s(o){return Ot(o,t,t.getDatastore(n.$config.bind));}function r(o){var l,d=function(f){var y=rt(f,n.$grid_data).y,v=n.$config.rowStore;document.doctype||(y+=window.scrollY),y=y||0;var b=n.$state.scrollTop||0,m=t.$grid_data.getBoundingClientRect().height+b+window.scrollY,g=b,p=n.getItemIndexByTopPosition(n.$state.scrollTop);if(v.exists(p)||(p=v.countVisible()-1),p<0)return v.$getRootId();var k=v.getIdByIndex(p),x=n.$state.scrollTop/n.getItemHeight(k),w=x-Math.floor(x);w>0.1&&w<0.9&&(m-=n.getItemHeight(k)*w,g+=n.getItemHeight(k)*(1-w));const $=Y(n.$grid_data),T=$.y+$.height,S=i.config.marker.offsetHeight;y+S+window.scrollY>=m&&(i.config.marker.style.top=T-S+\"px\"),y>=m?y=m:y<=g&&(y=g,i.config.marker.style.top=$.y+\"px\");var C=n.getItemIndexByTopPosition(y);if(C>v.countVisible()-1||C<0)return v.$getRootId();var E=v.getIdByIndex(C);return s(E)?v.getPrevSibling(E):v.getIdByIndex(C);}(o),c=null,u=n.$config.rowStore,h=!n.$getConfig().order_branch_free,_=rt(o,n.$grid_data).y;return document.doctype||(_+=window.scrollY),d!==u.$getRootId()&&(c=(_-n.getItemTop(d))/n.getItemHeight(d)),h?(l=Xe(i.config.id,d,c,_,u,i.config.level))&&l.targetParent&&s(l.targetParent)&&(d=u.getPrevSibling(l.targetParent),l=Xe(i.config.id,d,c,_,u,i.config.level)):l=function(f,y,v,b,m){var g;if(y!==m.$getRootId())g=v<0.25?Z.prevSiblingTarget(f,y,m):!(v>0.6)||m.hasChild(y)&&m.getItem(y).$open?Z.firstChildTarget(f,y,m):Z.nextSiblingTarget(f,y,m);else{var p=m.$getRootId();g=m.hasChild(p)&&b>=0?Z.lastChildTarget(f,p,m):Z.firstChildTarget(f,p,m);}return g;}(i.config.id,d,c,_,u),l;}}};var Ua=function(t){return{onCreated:function(n){n.$config=R(n.$config,{bind:\"task\"}),n.$config.id==\"grid\"&&(this.extendGantt(n),t.ext.inlineEditors=t.ext._inlineEditors.createEditors(n),t.ext.inlineEditors.init()),this._mouseDelegates=Ae(t);},onInitialized:function(n){var e=n.$getConfig();e.order_branch&&(e.order_branch==\"marker\"?Va.init(n.$gantt,n):Fa.init(n.$gantt,n)),this.initEvents(n,t),n.$config.id==\"grid\"&&this.extendDom(n);},onDestroyed:function(n){n.$config.id==\"grid\"&&t.ext.inlineEditors.detachStore(),this.clearEvents(n,t);},initEvents:function(n,e){this._mouseDelegates.delegate(\"click\",\"gantt_row\",e.bind(function(i,a,s){const r=n.$getConfig();if(a!==null){const o=this.getTask(a);if(r.scroll_on_click){const l=!e._is_icon_open_click(i),d=e.$ui.getView(\"timeline\");l&&d&&this.showDate(o.start_date);}e.callEvent(\"onTaskRowClick\",[a,s]);}},e),n.$grid),this._mouseDelegates.delegate(\"click\",\"gantt_grid_head_cell\",e.bind(function(i,a,s){var r=s.getAttribute(\"data-column-id\");if(e.callEvent(\"onGridHeaderClick\",[r,i])){var o=n.$getConfig();if(r!=\"add\"){if(o.sort&&r){for(var l,d=r,c=0;c<o.columns.length;c++)if(o.columns[c].name==r){l=o.columns[c];break;}if(l&&l.sort!==void 0&&l.sort!==!0&&!(d=l.sort))return;var u=this._sort&&this._sort.direction&&this._sort.name==r?this._sort.direction:\"desc\";u=u==\"desc\"?\"asc\":\"desc\",this._sort={name:r,direction:u},this.sort(d,u==\"desc\");}}else e.$services.getService(\"mouseEvents\").callHandler(\"click\",\"gantt_add\",n.$grid,[i,o.root_id]);}},e),n.$grid),this._mouseDelegates.delegate(\"click\",\"gantt_add\",e.bind(function(i,a,s){if(!n.$getConfig().readonly)return this.createTask({},a||e.config.root_id),!1;},e),n.$grid);},clearEvents:function(n,e){this._mouseDelegates.destructor(),this._mouseDelegates=null;},extendDom:function(n){t.$grid=n.$grid,t.$grid_scale=n.$grid_scale,t.$grid_data=n.$grid_data;},extendGantt:function(n){t.getGridColumns=t.bind(n.getGridColumns,n),n.attachEvent(\"onColumnResizeStart\",function(){return t.callEvent(\"onColumnResizeStart\",arguments);}),n.attachEvent(\"onColumnResize\",function(){return t.callEvent(\"onColumnResize\",arguments);}),n.attachEvent(\"onColumnResizeEnd\",function(){return t.callEvent(\"onColumnResizeEnd\",arguments);}),n.attachEvent(\"onColumnResizeComplete\",function(e,i){t.config.grid_width=i;}),n.attachEvent(\"onBeforeRowResize\",function(){return t.callEvent(\"onBeforeRowResize\",arguments);}),n.attachEvent(\"onRowResize\",function(){return t.callEvent(\"onRowResize\",arguments);}),n.attachEvent(\"onBeforeRowResizeEnd\",function(){return t.callEvent(\"onBeforeRowResizeEnd\",arguments);}),n.attachEvent(\"onAfterRowResize\",function(){return t.callEvent(\"onAfterRowResize\",arguments);});}};};const qa={createTaskDND:function(){var t;return{extend:function(n){n.roundTaskDates=function(e){t.round_task_dates(e);};},init:function(n,e){return t=function(i,a){var s=a.$services;return{drag:null,dragMultiple:{},_events:{before_start:{},before_finish:{},after_finish:{}},_handlers:{},init:function(){this._domEvents=a._createDomEventScope(),this.clear_drag_state();var r=a.config.drag_mode;this.set_actions(),s.getService(\"state\").registerProvider(\"tasksDnd\",B(function(){return{drag_id:this.drag?this.drag.id:void 0,drag_mode:this.drag?this.drag.mode:void 0,drag_from_start:this.drag?this.drag.left:void 0};},this));var o={before_start:\"onBeforeTaskDrag\",before_finish:\"onBeforeTaskChanged\",after_finish:\"onAfterTaskDrag\"};for(var l in this._events)for(var d in r)this._events[l][d]=o[l];this._handlers[r.move]=this._move,this._handlers[r.resize]=this._resize,this._handlers[r.progress]=this._resize_progress;},set_actions:function(){var r=i.$task_data;this._domEvents.attach(r,\"mousemove\",a.bind(function(o){this.on_mouse_move(o);},this)),this._domEvents.attach(r,\"mousedown\",a.bind(function(o){this.on_mouse_down(o);},this)),this._domEvents.attach(document.body,\"mouseup\",a.bind(function(o){this.on_mouse_up(o);},this));},_getPositioningContext:function(r){return i._getPositioningContext?i._getPositioningContext(r):null;},clear_drag_state:function(){this.drag={id:null,mode:null,pos:null,start_x:null,start_y:null,obj:null,left:null},this.dragMultiple={};},_resize:function(r,o,l){var d=i.$getConfig(),c=this._drag_task_coords(r,l);l.left?(r.start_date=a.dateFromPos(c.start+o,this._getPositioningContext(r)),r.start_date||(r.start_date=new Date(a.getState().min_date))):(r.end_date=a.dateFromPos(c.end+o,this._getPositioningContext(r)),r.end_date||(r.end_date=new Date(a.getState().max_date)));var u=this._calculateMinDuration(d.min_duration,d.duration_unit);r.end_date-r.start_date<d.min_duration&&(l.left?r.start_date=a.calculateEndDate(r.end_date,-u,d.duration_unit,r):r.end_date=a.calculateEndDate(r.start_date,u,d.duration_unit,r)),a._init_task_timing(r);},_calculateMinDuration:function(r,o){return Math.ceil(r/{minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:31356e6}[o]);},_resize_progress:function(r,o,l){var d=this._drag_task_coords(r,l),c=i.$getConfig().rtl?d.start-l.pos.x:l.pos.x-d.start,u=Math.max(0,c);r.progress=Math.min(1,u/Math.abs(d.end-d.start));},_find_max_shift:function(r,o){var l;for(var d in r){var c=r[d],u=a.getTask(c.id);if(!u.unscheduled){var h=this._drag_task_coords(u,c),_=a.posFromDate(new Date(a.getState().min_date),this._getPositioningContext(u)),f=a.posFromDate(new Date(a.getState().max_date),this._getPositioningContext(u));if(h.end+o>f){var y=f-h.end;(y<l||l===void 0)&&(l=y);}else if(h.start+o<_){var v=_-h.start;(v>l||l===void 0)&&(l=v);}}}return l;},_move:function(r,o,l,d){var c=this._drag_task_coords(r,l),u=null,h=null;d?(u=new Date(+l.obj.start_date+d),h=new Date(+l.obj.end_date+d)):(u=a.dateFromPos(c.start+o,this._getPositioningContext(r)),h=a.dateFromPos(c.end+o,this._getPositioningContext(r))),u?h?(r.start_date=u,r.end_date=h):(r.end_date=new Date(a.getState().max_date),r.start_date=a.dateFromPos(a.posFromDate(r.end_date)-(c.end-c.start),this._getPositioningContext(r))):(r.start_date=new Date(a.getState().min_date),r.end_date=a.dateFromPos(a.posFromDate(r.start_date)+(c.end-c.start),this._getPositioningContext(r)));},_drag_task_coords:function(r,o){return{start:o.obj_s_x=o.obj_s_x||a.posFromDate(r.start_date,this._getPositioningContext(r)),end:o.obj_e_x=o.obj_e_x||a.posFromDate(r.end_date,this._getPositioningContext(r))};},_mouse_position_change:function(r,o){var l=r.x-o.x,d=r.y-o.y;return Math.sqrt(l*l+d*d);},_is_number:function(r){return!isNaN(parseFloat(r))&&isFinite(r);},on_mouse_move:function(r){if(this.drag.start_drag){var o=rt(r,a.$task_data),l=this.drag.start_drag.start_x,d=this.drag.start_drag.start_y;(Date.now()-this.drag.timestamp>50||this._is_number(l)&&this._is_number(d)&&this._mouse_position_change({x:l,y:d},o)>20)&&this._start_dnd(r);}if(this.drag.mode){if(!_n(this,40))return;this._update_on_move(r);}},_update_item_on_move:function(r,o,l,d,c,u){var h=a.getTask(o),_=a.mixin({},h),f=a.mixin({},h);this._handlers[l].apply(this,[f,r,d,u]),a.mixin(h,f,!0),a.callEvent(\"onTaskDrag\",[h.id,l,f,_,c]),a.mixin(h,f,!0),a.refreshTask(o);},_update_on_move:function(r){var o=this.drag,l=i.$getConfig();if(o.mode){var d=rt(r,i.$task_data);if(o.pos&&o.pos.x==d.x)return;o.pos=d;const m=a.getTask(o.id);var c=a.dateFromPos(d.x,this._getPositioningContext(m));if(!c||isNaN(c.getTime()))return;var u=d.x-o.start_x;if(this._handlers[o.mode]){if(o.mode===l.drag_mode.move){var h={};this._isMultiselect()&&a.getSelectedTasks().indexOf(o.id)>=0&&(h=this.dragMultiple);var _=!1;if(a.isSummaryTask(m)&&a.config.drag_project){var f={};f[o.id]=X(o),_=!0,h=R(f,this.dragMultiple);}var y=this._find_max_shift(h,u);let g;if(y!==void 0&&(u=y),this._update_item_on_move(u,o.id,o.mode,o,r),y===void 0){const p=a.posFromDate(o.obj.start_date,this._getPositioningContext(o.obj)),k=a.posFromDate(o.obj.end_date,this._getPositioningContext(o.obj));if(o.handle_offset===void 0){const w=k-p,$=o.start_x-p;o.handle_offset=$/w;}let x=p+Math.abs(k-p)*o.handle_offset;g=c-a.dateFromPos(x,this._getPositioningContext(o.obj));}for(var v in h){var b=h[v];_&&b.id!=o.id&&(a._bulk_dnd=!0),this._update_item_on_move(u,b.id,b.mode,b,r,g);}a._bulk_dnd=!1;}else this._update_item_on_move(u,o.id,o.mode,o,r);a._update_parents(o.id);}}},on_mouse_down:function(r,o){if(r.button!=2||r.button===void 0){var l=i.$getConfig(),d=a.locate(r),c=null;if(a.isTaskExists(d)&&(c=a.getTask(d)),!a.isReadonly(c)&&!this.drag.mode){this.clear_drag_state();var u=Q(o=o||r.target||r.srcElement),h=this._get_drag_mode(u,o);if(!u||!h)return o.parentNode?this.on_mouse_down(r,o.parentNode):void 0;if(h){if(h.mode&&h.mode!=l.drag_mode.ignore&&l[\"drag_\"+h.mode]){if(d=a.locate(o),c=a.copy(a.getTask(d)||{}),a.isReadonly(c))return this.clear_drag_state(),!1;if(a.isSummaryTask(c)&&c.auto_scheduling!==!1&&!l.drag_project&&h.mode!=l.drag_mode.progress)return void this.clear_drag_state();h.id=d;var _=rt(r,a.$task_data);h.start_x=_.x,h.start_y=_.y,h.obj=c,this.drag.start_drag=h,this.drag.timestamp=Date.now();}else this.clear_drag_state();}else if(a.checkEvent(\"onMouseDown\")&&a.callEvent(\"onMouseDown\",[u.split(\" \")[0]])&&o.parentNode)return this.on_mouse_down(r,o.parentNode);}}},_fix_dnd_scale_time:function(r,o){var l=i.$getConfig(),d=a.getScale().unit,c=a.getScale().step;function u(_){if(a.config.correct_work_time){var f=i.$getConfig();a.isWorkTime(_.start_date,void 0,_)||(_.start_date=a.calculateEndDate({start_date:_.start_date,duration:-1,unit:f.duration_unit,task:_}));}}l.round_dnd_dates||(d=\"minute\",c=l.time_step);const h=i._getPositioningContext(r);o.mode==l.drag_mode.resize?o.left?(r.start_date=a.roundDate({date:r.start_date,unit:d,step:c}),h&&h.calendar&&(r.start_date=h.calendar.getClosestWorkTime({date:r.start_date,dir:\"future\"})),u(r)):(r.end_date=a.roundDate({date:r.end_date,unit:d,step:c}),h&&h.calendar&&(r.end_date=h.calendar.getClosestWorkTime({date:r.end_date})),function(_){if(a.config.correct_work_time){var f=i.$getConfig();a.isWorkTime(new Date(_.end_date-1),void 0,_)||(_.end_date=a.calculateEndDate({start_date:_.end_date,duration:1,unit:f.duration_unit,task:_}));}}(r)):o.mode==l.drag_mode.move&&(r.start_date=a.roundDate({date:r.start_date,unit:d,step:c}),h&&h.calendar&&(r.start_date=h.calendar.getClosestWorkTime({date:r.start_date,dir:\"future\"})),u(r),r.end_date=a.calculateEndDate(r));},_fix_working_times:function(r,o){var l=i.$getConfig();(o=o||{mode:l.drag_mode.move}).mode==l.drag_mode.resize?o.left?r.start_date=a.getClosestWorkTime({date:r.start_date,dir:\"future\",task:r}):r.end_date=a.getClosestWorkTime({date:r.end_date,dir:\"past\",task:r}):o.mode==l.drag_mode.move&&a.correctTaskWorkTime(r);},_finalize_mouse_up:function(r,o,l,d){var c=a.getTask(r);if(o.work_time&&o.correct_work_time&&this._fix_working_times(c,l),this._fix_dnd_scale_time(c,l),this._fireEvent(\"before_finish\",l.mode,[r,l.mode,a.copy(l.obj),d])){var u=r;a._init_task_timing(c),this.clear_drag_state(),a.updateTask(c.id),this._fireEvent(\"after_finish\",l.mode,[u,l.mode,d]);}else if(this.clear_drag_state(),r==l.id&&(l.obj._dhx_changed=!1,a.mixin(c,l.obj,!0)),a.refreshTask(c.id),c.$level>100){let h=!1;a.eachParent(function(_){if(!h&&_.type===a.config.types.project){const f={start_date:_.start_date,end_date:_.end_date};a.resetProjectDates(_),+f.start_date==+_.start_date&&+f.end_date==+_.end_date||(h=!0);}},c.id),h&&a.refreshData();}else a.eachParent(function(h){if(h.type===a.config.types.project){const _={start_date:h.start_date,end_date:h.end_date};a.resetProjectDates(h),+_.start_date==+h.start_date&&+_.end_date==+h.end_date||a.refreshTask(h.id);}},c.id);},on_mouse_up:function(r){var o=this.drag;if(o.mode&&o.id){var l=i.$getConfig(),d=a.getTask(o.id),c=this.dragMultiple,u=!1,h=0;o.mode===l.drag_mode.move&&(a.isSummaryTask(d)&&l.drag_project||this._isMultiselect())&&(u=!0,h=Object.keys(c).length);var _=function(){if(u)for(var f in c)c[f].id!=o.id&&this._finalize_mouse_up(c[f].id,l,c[f],r);this._finalize_mouse_up(o.id,l,o,r);};u&&h>10?a.batchUpdate(function(){_.call(this);}.bind(this)):_.call(this);}this.clear_drag_state();},_get_drag_mode:function(r,o){var l=i.$getConfig().drag_mode,d={mode:null,left:null};switch((r||\"\").split(\" \")[0]){case\"gantt_task_line\":case\"gantt_task_content\":d.mode=l.move;break;case\"gantt_task_drag\":d.mode=l.resize;var c=o.getAttribute(\"data-bind-property\");d.left=c==\"start_date\";break;case\"gantt_task_progress_drag\":d.mode=l.progress;break;case\"gantt_link_control\":case\"gantt_link_point\":d.mode=l.ignore;break;default:d=null;}return d;},_start_dnd:function(r){var o=this.drag=this.drag.start_drag;delete o.start_drag;var l=i.$getConfig(),d=o.id;if(l[\"drag_\"+o.mode]&&a.callEvent(\"onBeforeDrag\",[d,o.mode,r])&&this._fireEvent(\"before_start\",o.mode,[d,o.mode,r])){delete o.start_drag;var c=a.getTask(d);if(a.isReadonly(c))return void this.clear_drag_state();if(this._isMultiselect()){var u=a.getSelectedTasks();u.indexOf(o.id)>=0&&bt(u,a.bind(function(h){var _=a.getTask(h);a.isSummaryTask(_)&&a.config.drag_project&&o.mode==l.drag_mode.move&&this._addSubtasksToDragMultiple(_.id),this.dragMultiple[h]=a.mixin({id:_.id,obj:a.copy(_)},this.drag);},this));}a.isSummaryTask(c)&&a.config.drag_project&&o.mode==l.drag_mode.move&&this._addSubtasksToDragMultiple(c.id),a.callEvent(\"onTaskDragStart\",[]);}else this.clear_drag_state();},_fireEvent:function(r,o,l){a.assert(this._events[r],\"Invalid stage:{\"+r+\"}\");var d=this._events[r][o];return a.assert(d,\"Unknown after drop mode:{\"+o+\"}\"),a.assert(l,\"Invalid event arguments\"),!a.checkEvent(d)||a.callEvent(d,l);},round_task_dates:function(r){var o=this.drag,l=i.$getConfig();o||(o={mode:l.drag_mode.move}),this._fix_dnd_scale_time(r,o);},destructor:function(){this._domEvents.detachAll();},_isMultiselect:function(){return a.config.drag_multiple&&!!(a.getSelectedTasks&&a.getSelectedTasks().length>0);},_addSubtasksToDragMultiple:function(r){a.eachTask(function(o){this.dragMultiple[o.id]=a.mixin({id:o.id,obj:a.copy(o)},this.drag);},r,this);}};}(n,e),n._tasks_dnd=t,t.init(e);},destructor:function(){t&&(t.destructor(),t=null);}};}};var Ga=function(t,n){var e,i,a,s,r;function o(){return{link_source_id:s,link_target_id:i,link_from_start:r,link_to_start:a,link_landing_area:e};}var l=n.$services,d=l.getService(\"state\"),c=l.getService(\"dnd\");d.registerProvider(\"linksDnD\",o);var u=\"gantt_link_point\",h=\"gantt_link_control\",_=new c(t.$task_bars,{sensitivity:0,updates_per_second:60,mousemoveContainer:n.$root,selector:\".\"+u,preventDefault:!0});function f(g,p){var k,x=_.getPosition(g),w=function(A){var M=0,I=0;return A&&(M=A.offsetWidth||0,I=A.offsetHeight||0),{width:M,height:I};}(p),$={right:(k=n.$root).offsetWidth,bottom:k.offsetHeight},T=n.config.tooltip_offset_x||10,S=n.config.tooltip_offset_y||10,C=n.config.scroll_size||18,E=n.$container.getBoundingClientRect().y+window.scrollY,D={y:x.y+S,x:x.x+T,bottom:x.y+w.height+S+C,right:x.x+w.width+T+C};return D.bottom>$.bottom+E&&(D.y=$.bottom+E-w.height-S),D.right>$.right&&(D.x=$.right-w.width-T),D;}function y(g){var p=o();p.link_source_id&&p.link_target_id&&n.isLinkAllowed(p.link_source_id,p.link_target_id,p.link_from_start,p.link_to_start);var k=\"<div class='\"+n.templates.drag_link_class(p.link_source_id,p.link_from_start,p.link_target_id,p.link_to_start)+\"'>\"+n.templates.drag_link(p.link_source_id,p.link_from_start,p.link_target_id,p.link_to_start)+\"</div>\";g.innerHTML=k;}function v(){s=r=i=null,a=!0;}function b(g,p,k,x){var w=function(){return _._direction&&_._direction.parentNode||(_._direction=document.createElement(\"div\"),t.$task_links.appendChild(_._direction)),_._direction;}(),$=o(),T=[\"gantt_link_direction\"];n.templates.link_direction_class&&T.push(n.templates.link_direction_class($.link_source_id,$.link_from_start,$.link_target_id,$.link_to_start));var S=Math.sqrt(Math.pow(k-g,2)+Math.pow(x-p,2));if(S=Math.max(0,S-3)){w.className=T.join(\" \");var C=(x-p)/(k-g),E=Math.atan(C);m(g,k,p,x)==2?E+=Math.PI:m(g,k,p,x)==3&&(E-=Math.PI);var D=Math.sin(E),A=Math.cos(E),M=Math.round(p),I=Math.round(g),N=[\"-webkit-transform: rotate(\"+E+\"rad)\",\"-moz-transform: rotate(\"+E+\"rad)\",\"-ms-transform: rotate(\"+E+\"rad)\",\"-o-transform: rotate(\"+E+\"rad)\",\"transform: rotate(\"+E+\"rad)\",\"width:\"+Math.round(S)+\"px\"];if(window.navigator.userAgent.indexOf(\"MSIE 8.0\")!=-1){N.push('-ms-filter: \"'+function(z,H){return\"progid:DXImageTransform.Microsoft.Matrix(M11 = \"+H+\",M12 = -\"+z+\",M21 = \"+z+\",M22 = \"+H+\",SizingMethod = 'auto expand')\";}(D,A)+'\"');var L=Math.abs(Math.round(g-k)),O=Math.abs(Math.round(x-p));switch(m(g,k,p,x)){case 1:M-=O;break;case 2:I-=L,M-=O;break;case 3:I-=L;}}N.push(\"top:\"+M+\"px\"),N.push(\"left:\"+I+\"px\"),w.style.cssText=N.join(\";\");}}function m(g,p,k,x){return p>=g?x<=k?1:4:x<=k?2:3;}_.attachEvent(\"onBeforeDragStart\",n.bind(function(g,p){var k=p.target||p.srcElement;if(v(),n.getState(\"tasksDnd\").drag_id)return!1;if(vt(k,u)){vt(k,\"task_start_date\")&&(r=!0);var x=n.locate(p);s=x;var w=n.getTask(x);return n.isReadonly(w)?(v(),!1):(this._dir_start={x:_.config.original_element_sizes.x+_.config.original_element_sizes.width/2,y:_.config.original_element_sizes.y+_.config.original_element_sizes.height/2},!0);}return!1;},this)),_.attachEvent(\"onAfterDragStart\",n.bind(function(g,p){n.config.touch&&n.refreshData(),y(_.config.marker);},this)),_.attachEvent(\"onDragMove\",n.bind(function(g,p){var k=_.config,x=f(p,k.marker);(function(A,M){A.style.left=M.x+\"px\",A.style.top=M.y+\"px\";})(k.marker,x);var w=!!vt(p,h),$=i,T=e,S=a,C=n.locate(p),E=!0;if(K(xt(p),n.$root)||(w=!1,C=null),w&&(E=!vt(p,\"task_end_date\"),w=!!C),i=C,e=w,a=E,w){const A=vt(p,h).querySelector(`.${u}`);if(A){const M=sn(A,t.$task_bg);this._dir_end={x:M.x+A.offsetWidth/2,y:M.y+A.offsetHeight/2};}}else this._dir_end=rt(p,t.$task_data),n.env.isEdge&&(this._dir_end.y+=window.scrollY);var D=!(T==w&&$==C&&S==E);return D&&($&&n.refreshTask($,!1),C&&n.refreshTask(C,!1)),D&&y(k.marker),b(this._dir_start.x,this._dir_start.y,this._dir_end.x,this._dir_end.y),!0;},this)),_.attachEvent(\"onDragEnd\",n.bind(function(){var g=o();if(g.link_source_id&&g.link_target_id&&g.link_source_id!=g.link_target_id){var p=n._get_link_type(g.link_from_start,g.link_to_start),k={source:g.link_source_id,target:g.link_target_id,type:p};k.type&&n.isLinkAllowed(k)&&n.callEvent(\"onLinkCreated\",[k])&&n.addLink(k);}v(),n.config.touch?n.refreshData():(g.link_source_id&&n.refreshTask(g.link_source_id,!1),g.link_target_id&&n.refreshTask(g.link_target_id,!1)),_._direction&&(_._direction.parentNode&&_._direction.parentNode.removeChild(_._direction),_._direction=null);},this)),n.attachEvent(\"onGanttRender\",n.bind(function(){_._direction&&b(this._dir_start.x,this._dir_start.y,this._dir_end.x,this._dir_end.y);},this));};const Ya=function(){return{init:Ga};};var Ja=function(t){var n=t.$services;return{onCreated:function(e){var i=e.$config;i.bind=q(i.bind)?i.bind:\"task\",i.bindLinks=q(i.bindLinks)?i.bindLinks:\"link\",e._linksDnD=Ya(),e._tasksDnD=qa.createTaskDND(),e._tasksDnD.extend(e),this._mouseDelegates=Ae(t);},onInitialized:function(e){this._attachDomEvents(t),this._attachStateProvider(t,e),e._tasksDnD.init(e,t),e._linksDnD.init(e,t),e.$config.id==\"timeline\"&&this.extendDom(e);},onDestroyed:function(e){this._clearDomEvents(t),this._clearStateProvider(t),e._tasksDnD&&e._tasksDnD.destructor();},extendDom:function(e){t.$task=e.$task,t.$task_scale=e.$task_scale,t.$task_data=e.$task_data,t.$task_bg=e.$task_bg,t.$task_links=e.$task_links,t.$task_bars=e.$task_bars;},_clearDomEvents:function(){this._mouseDelegates.destructor(),this._mouseDelegates=null;},_attachDomEvents:function(e){function i(a,s){if(a&&this.callEvent(\"onLinkDblClick\",[a,s])){var r=this.getLink(a);if(this.isReadonly(r))return;var o=this.locale.labels.link+\" \"+this.templates.link_description(this.getLink(a))+\" \"+this.locale.labels.confirm_link_deleting;window.setTimeout(function(){e._delete_link_confirm({link:r,message:o,title:\"\",callback:function(){e.deleteLink(a);}});},this.config.touch?300:1);}}this._mouseDelegates.delegate(\"click\",\"gantt_task_link\",e.bind(function(a,s){var r=this.locate(a,this.config.link_attribute);r&&this.callEvent(\"onLinkClick\",[r,a]);},e),this.$task),this._mouseDelegates.delegate(\"click\",\"gantt_scale_cell\",e.bind(function(a,s){var r=rt(a,e.$task_data),o=e.dateFromPos(r.x),l=Math.floor(e.columnIndexByDate(o)),d=e.getScale().trace_x[l];e.callEvent(\"onScaleClick\",[a,d]);},e),this.$task),this._mouseDelegates.delegate(\"doubleclick\",\"gantt_task_link\",e.bind(function(a,s,r){s=this.locate(a,e.config.link_attribute),i.call(this,s,a);},e),this.$task),this._mouseDelegates.delegate(\"doubleclick\",\"gantt_link_point\",e.bind(function(a,s,r){s=this.locate(a);var o=this.getTask(s),l=null;return r.parentNode&&Q(r.parentNode)&&(l=Q(r.parentNode).indexOf(\"_left\")>-1?o.$target[0]:o.$source[0]),l&&i.call(this,l,a),!1;},e),this.$task);},_attachStateProvider:function(e,i){var a=i;n.getService(\"state\").registerProvider(\"tasksTimeline\",function(){return{scale_unit:a._tasks?a._tasks.unit:void 0,scale_step:a._tasks?a._tasks.step:void 0};});},_clearStateProvider:function(){n.getService(\"state\").unregisterProvider(\"tasksTimeline\");}};},Ka=function(t){return{getVerticalScrollbar:function(){return t.$ui.getView(\"scrollVer\");},getHorizontalScrollbar:function(){return t.$ui.getView(\"scrollHor\");},_legacyGridResizerClass:function(n){for(var e=n.getCellsByType(\"resizer\"),i=0;i<e.length;i++){var a=e[i],s=!1,r=a.$parent.getPrevSibling(a.$id);if(r&&r.$config&&r.$config.id===\"grid\")s=!0;else{var o=a.$parent.getNextSibling(a.$id);o&&o.$config&&o.$config.id===\"grid\"&&(s=!0);}s&&(a.$config.css=(a.$config.css?a.$config.css+\" \":\"\")+\"gantt_grid_resize_wrap\");}},onCreated:function(n){var e=!0;this._legacyGridResizerClass(n),n.attachEvent(\"onBeforeResize\",function(){var i=t.$ui.getView(\"timeline\");i&&(i.$config.hidden=i.$parent.$config.hidden=!t.config.show_chart);var a=t.$ui.getView(\"grid\");if(a){var s=a._getColsTotalWidth(),r=!t.config.show_grid||!t.config.grid_width||s===0;if(e&&!r&&s!==!1&&(t.config.grid_width=s),a.$config.hidden=a.$parent.$config.hidden=r,!a.$config.hidden){var o=a._getGridWidthLimits();if(o[0]&&t.config.grid_width<o[0]&&(t.config.grid_width=o[0]),o[1]&&t.config.grid_width>o[1]&&(t.config.grid_width=o[1]),i&&t.config.show_chart){if(a.$config.width=t.config.grid_width-1,!a.$config.scrollable&&a.$config.scrollY&&t.$root.offsetWidth){var l=a.$gantt.$layout.$container.offsetWidth,d=t.$ui.getView(a.$config.scrollY).$config.width,c=l-(a.$config.width+d)-4;c<0&&(a.$config.width+=c,t.config.grid_width+=c);}if(e)a.$parent.$config.width=t.config.grid_width,a.$parent.$config.group&&t.$layout._syncCellSizes(a.$parent.$config.group,{value:a.$parent.$config.width,isGravity:!1});else if(i&&!K(i.$task,n.$view)){if(!a.$config.original_grid_width){var u=t.skins[t.skin];u&&u.config&&u.config.grid_width?a.$config.original_grid_width=u.config.grid_width:a.$config.original_grid_width=0;}t.config.grid_width=a.$config.original_grid_width,a.$parent.$config.width=t.config.grid_width;}else a.$parent._setContentSize(a.$config.width,null),t.$layout._syncCellSizes(a.$parent.$config.group,{value:t.config.grid_width,isGravity:!1});}else i&&K(i.$task,n.$view)&&(a.$config.original_grid_width=t.config.grid_width),e||(a.$parent.$config.width=0);}e=!1;}}),this._initScrollStateEvents(n);},_initScrollStateEvents:function(n){t._getVerticalScrollbar=this.getVerticalScrollbar,t._getHorizontalScrollbar=this.getHorizontalScrollbar;var e=this.getVerticalScrollbar(),i=this.getHorizontalScrollbar();e&&e.attachEvent(\"onScroll\",function(a,s,r){var o=t.getScrollState();t.callEvent(\"onGanttScroll\",[o.x,a,o.x,s]);}),i&&i.attachEvent(\"onScroll\",function(a,s,r){var o=t.getScrollState();t.callEvent(\"onGanttScroll\",[a,o.y,s,o.y]);var l=t.$ui.getView(\"grid\");l&&l.$grid_data&&!l.$config.scrollable&&(l.$grid_data.style.left=l.$grid.scrollLeft+\"px\",l.$grid_data.scrollLeft=l.$grid.scrollLeft);}),n.attachEvent(\"onResize\",function(){e&&!t.$scroll_ver&&(t.$scroll_ver=e.$scroll_ver),i&&!t.$scroll_hor&&(t.$scroll_hor=i.$scroll_hor);});},_findGridResizer:function(n,e){for(var i,a=n.getCellsByType(\"resizer\"),s=!0,r=0;r<a.length;r++){var o=a[r];o._getSiblings();var l=o._behind,d=o._front;if(l&&l.$content===e||l.isChild&&l.isChild(e)){i=o,s=!0;break;}if(d&&d.$content===e||d.isChild&&d.isChild(e)){i=o,s=!1;break;}}return{resizer:i,gridFirst:s};},onInitialized:function(n){var e=t.$ui.getView(\"grid\"),i=this._findGridResizer(n,e);if(i.resizer){var a,s=i.gridFirst,r=i.resizer;if(r.$config.mode!==\"x\")return;r.attachEvent(\"onResizeStart\",function(o,l){var d=t.$ui.getView(\"grid\"),c=d?d.$parent:null;if(c){var u=d._getGridWidthLimits();d.$config.scrollable||(c.$config.minWidth=u[0]),c.$config.maxWidth=u[1];}return a=s?o:l,t.callEvent(\"onGridResizeStart\",[a]);}),r.attachEvent(\"onResize\",function(o,l){var d=s?o:l;return t.callEvent(\"onGridResize\",[a,d]);}),r.attachEvent(\"onResizeEnd\",function(o,l,d,c){var u=s?o:l,h=s?d:c,_=t.$ui.getView(\"grid\"),f=_?_.$parent:null;f&&(f.$config.minWidth=void 0);var y=t.callEvent(\"onGridResizeEnd\",[u,h]);return y&&h!==0&&(t.config.grid_width=h),y;});}},onDestroyed:function(n){}};};const Xa={init:function(t){function n(s,r){var o=r(t);o.onCreated&&o.onCreated(s),s.attachEvent(\"onReady\",function(){o.onInitialized&&o.onInitialized(s);}),s.attachEvent(\"onDestroy\",function(){o.onDestroyed&&o.onDestroyed(s);});}var e=pa(t);e.registerView(\"cell\",Bt),e.registerView(\"resizer\",null),e.registerView(\"scrollbar\",$a),e.registerView(\"layout\",$n,function(s){(s.$config?s.$config.id:null)===\"main\"&&n(s,Ka);}),e.registerView(\"viewcell\",xa),e.registerView(\"multiview\",ba),e.registerView(\"timeline\",Gt,function(s){(s.$config?s.$config.id:null)!==\"timeline\"&&s.$config.bind!=\"task\"||n(s,Ja);}),e.registerView(\"grid\",te,function(s){(s.$config?s.$config.id:null)!==\"grid\"&&s.$config.bind!=\"task\"||n(s,Ua);}),e.registerView(\"resourceGrid\",te),e.registerView(\"GridRL\",Ca),e.registerView(\"resourceTimeline\",Gt),e.registerView(\"resourceHistogram\",Gt);var i=function(s){var r=ka(s);return{getDataRender:function(o){return s.$services.getService(\"layer:\"+o)||null;},createDataRender:function(o){var l=o.name,d=o.defaultContainer,c=o.defaultContainerSibling,u=r.createGroup(d,c,function(h,_){if(!u.filters)return!0;for(var f=0;f<u.filters.length;f++)if(u.filters[f](h,_)===!1)return!1;},ya);return s.$services.setService(\"layer:\"+l,function(){return u;}),s.attachEvent(\"onGanttReady\",function(){u.addLayer();}),u;},init:function(){var o=this.createDataRender({name:\"task\",defaultContainer:function(){return s.$task_data?s.$task_data:s.$ui.getView(\"timeline\")?s.$ui.getView(\"timeline\").$task_data:void 0;},defaultContainerSibling:function(){return s.$task_links?s.$task_links:s.$ui.getView(\"timeline\")?s.$ui.getView(\"timeline\").$task_links:void 0;},filter:function(d){}},s),l=this.createDataRender({name:\"link\",defaultContainer:function(){return s.$task_data?s.$task_data:s.$ui.getView(\"timeline\")?s.$ui.getView(\"timeline\").$task_data:void 0;}},s);return{addTaskLayer:function(d){const c=mt;return typeof d==\"function\"?d={renderer:{render:d,getVisibleRange:c}}:d.renderer&&!d.renderer.getVisibleRange&&(d.renderer.getVisibleRange=c),d.view=\"timeline\",o.addLayer(d);},_getTaskLayers:function(){return o.getLayers();},removeTaskLayer:function(d){o.removeLayer(d);},_clearTaskLayers:function(){o.clear();},addLinkLayer:function(d){const c=bn();return typeof d==\"function\"?d={renderer:{render:d,getVisibleRange:c}}:d.renderer&&!d.renderer.getVisibleRange&&(d.renderer.getVisibleRange=c),d.view=\"timeline\",d&&d.renderer&&(d.renderer.getRectangle||d.renderer.isInViewPort||(d.renderer.isInViewPort=xn)),l.addLayer(d);},_getLinkLayers:function(){return l.getLayers();},removeLinkLayer:function(d){l.removeLayer(d);},_clearLinkLayers:function(){l.clear();}};}};}(t),a=Oa(t);return t.ext.inlineEditors=a,t.ext._inlineEditors=a,a.init(t),{factory:e,mouseEvents:va.init(t),layersApi:i.init(),render:{gridLine:function(){return/* @__PURE__ */function(s){return{render:function(r,o,l,d){for(var c=o.getGridColumns(),u=o.$getTemplates(),h=o.$config.rowStore,_=[],f=0;f<c.length;f++){var y,v,b,m=f==c.length-1,g=c[f];g.name==\"add\"?(v=\"<div \"+(T=s._waiAria.gridAddButtonAttrString(g))+\" class='gantt_add'></div>\",b=\"\"):(et(v=g.template?g.template(r):r[g.name])&&(v=u.date_grid(v,r,g.name)),v==null&&(v=\"\"),b=v,v=\"<div class='gantt_tree_content'>\"+v+\"</div>\");var p=\"gantt_cell\"+(m?\" gantt_last_cell\":\"\"),k=[];if(g.tree){p+=\" gantt_cell_tree\";for(var x=0;x<r.$level;x++)k.push(u.grid_indent(r));!h.hasChild(r.id)||s.isSplitTask(r)&&!s.config.open_split_tasks?(k.push(u.grid_blank(r)),k.push(u.grid_file(r))):(k.push(u.grid_open(r)),k.push(u.grid_folder(r)));}var w=\"width:\"+(g.width-(m?1:0))+\"px;\";if(this.defined(g.align)){var $={right:\"flex-end\",left:\"flex-start\",center:\"center\"}[g.align];w+=\"text-align:\"+g.align+\";justify-content:\"+$+\";\";}var T=s._waiAria.gridCellAttrString(g,b,r);k.push(v),y=\"<div class='\"+p+\"' data-column-index='\"+f+\"' data-column-name='\"+g.name+\"' style='\"+w+\"' \"+T+\">\"+k.join(\"\")+\"</div>\",_.push(y);}switch(p=\"\",h.$config.name){case\"task\":p=s.getGlobalTaskIndex(r.id)%2==0?\"\":\" odd\";break;case\"resource\":p=h.visibleOrder.indexOf(r.id)%2==0?\"\":\" odd\";}if(p+=r.$transparent?\" gantt_transparent\":\"\",p+=r.$dataprocessor_class?\" \"+r.$dataprocessor_class:\"\",u.grid_row_class){var S=u.grid_row_class.call(s,r.start_date,r.end_date,r);S&&(p+=\" \"+S);}h.isSelected(r.id)&&(p+=\" gantt_selected\");var C=document.createElement(\"div\");C.className=\"gantt_row\"+p+\" gantt_row_\"+s.getTaskType(r.type);var E=o.getItemHeight(r.id);return C.style.height=E+\"px\",C.style.lineHeight=E+\"px\",l.smart_rendering&&(C.style.position=\"absolute\",C.style.left=\"0px\",C.style.top=o.getItemTop(r.id)+\"px\"),o.$config.item_attribute&&(C.setAttribute(o.$config.item_attribute,r.id),C.setAttribute(o.$config.bind+\"_id\",r.id)),s._waiAria.taskRowAttr(r,C),C.innerHTML=_.join(\"\"),C;},update:null,getRectangle:Qt,isInViewPort:ja,getVisibleRange:mt,onrender:function(r,o,l){for(var d=l.getGridColumns(),c=0;c<d.length;c++){var u=d[c];if(u.onrender){var h=o.querySelector(`[data-column-name=\"${u.name}\"]`);if(h){var _=u.onrender(r,h);if(_&&typeof _==\"string\")h.innerHTML=_;else if(_&&typeof _==\"object\"&&s.config.external_render){var f=s.config.external_render;f.isElement(_)&&f.renderElement(_,h);}}}}}};}(t);},taskBg:function(){return/* @__PURE__ */function(s){var r={},o={};function l(_,f){return!(!r[_.id][f]||!r[_.id][f].parentNode);}function d(_,f){r[_]&&r[_][f]&&r[_][f].parentNode&&r[_][f].parentNode.removeChild(r[_][f]);}function c(_){var f,y=_.$getTemplates();return y.task_cell_class!==void 0?(f=y.task_cell_class,(console.warn||console.log)(\"gantt.templates.task_cell_class template is deprecated and will be removed soon. Please use gantt.templates.timeline_cell_class instead.\")):f=y.timeline_cell_class,f;}function u(_){return _.$getTemplates().timeline_cell_content;}function h(_,f,y,v,b,m,g,p){var k=_.width[f],x=\"\";if(_e(f,_,v,s)){var w=m(y,_.trace_x[f]),$=\"\";if(g&&($=g(y,_.trace_x[f])),p.static_background){var T=!(!w&&!$);if(!p.static_background_cells||!T)return null;}if(r[y.id][f])return o[y.id][f]=f,r[y.id][f];var S=document.createElement(\"div\");return S.style.width=k+\"px\",x=\"gantt_task_cell\"+(f==b-1?\" gantt_last_cell\":\"\"),w&&(x+=\" \"+w),S.className=x,$&&(S.innerHTML=$),S.style.position=\"absolute\",S.style.left=_.left[f]+\"px\",r[y.id][f]=S,o[y.id][f]=f,S;}return null;}return{render:function(_,f,y,v){var b=f.$getTemplates(),m=f.getScale(),g=m.count;if(y.static_background&&!y.static_background_cells)return null;var p,k=document.createElement(\"div\"),x=c(f),w=u(f);if(p=v&&y.smart_rendering&&!Rt(s)?Vt(m,v.x):{start:0,end:g-1},y.show_task_cells){r[_.id]={},o[_.id]={};for(var $=p.start;$<=p.end;$++){var T=h(m,$,_,v,g,x,w,y);T&&k.appendChild(T);}}const S=f.$config.rowStore,C=S.getIndexById(_.id)%2!=0;var E=b.task_row_class(_.start_date,_.end_date,_),D=\"gantt_task_row\"+(C?\" odd\":\"\")+(E?\" \"+E:\"\");if(S.isSelected(_.id)&&(D+=\" gantt_selected\"),k.className=D,y.smart_rendering?(k.style.position=\"absolute\",k.style.top=f.getItemTop(_.id)+\"px\",k.style.width=\"100%\"):k.style.position=\"relative\",k.style.height=f.getItemHeight(_.id)+\"px\",_.id==\"timeline_placeholder_task\"){var A=0;_.lastTaskId&&(A=f.getItemTop(_.lastTaskId)+f.getItemHeight(_.lastTaskId));var M=(_.row_height||f.$task_data.offsetHeight)-A;M<0&&(M=0),y.smart_rendering&&(k.style.top=A+\"px\"),k.style.height=M+\"px\";}return f.$config.item_attribute&&(k.setAttribute(f.$config.item_attribute,_.id),k.setAttribute(f.$config.bind+\"_id\",_.id)),k;},update:function(_,f,y,v,b){var m=y.getScale(),g=m.count,p=c(y),k=u(y);if(v.show_task_cells){r[_.id]||(r[_.id]={}),o[_.id]||(o[_.id]={});var x=Vt(m,b);for(var w in o[_.id]){var $=o[_.id][w];(Number($)<x.start||Number($)>x.end)&&d(_.id,$);}o[_.id]={};for(var T=x.start;T<=x.end;T++){var S=h(m,T,_,b,g,p,k,v);!S&&l(_,T)?d(_.id,T):S&&!S.parentNode&&f.appendChild(S);}}},getRectangle:Je,getVisibleRange:mt,prepareData:Ba};}(t);},taskBar:function(){return Ye(t);},timedProjectBar:function(){return Ye(t);},taskRollupBar:function(){return function(s){const r=Sn(s),o={};function l(u,h,_,f,y){let v=!0;return f.smart_rendering&&(v=Ee(u,h,_)),v;}function d(u,h,_,f){const y=s.copy(s.getTask(h.id));if(y.$rendered_at=u.id,s.callEvent(\"onBeforeRollupTaskDisplay\",[y.id,y,u.id])===!1)return;const v=r(y,_);if(!v)return;const b=_.getBarHeight(u.id,h.type==s.config.types.milestone),m=Math.floor((_.getItemHeight(u.id)-b)/2);return v.style.top=f.top+m+\"px\",v.classList.add(\"gantt_rollup_child\"),v.setAttribute(\"data-rollup-parent-id\",u.id),v;}function c(u,h){return u+\"_\"+h;}return{render:function(u,h,_,f){if(u.rollup!==!1&&u.$rollup&&u.$rollup.length){const y=document.createElement(\"div\"),v=s.getTaskPosition(u);return f&&(f.y=0,f.y_end=s.$task_bg.scrollHeight),u.$rollup.forEach(function(b){if(!s.isTaskExists(b))return;const m=s.getTask(b);if(!l(m,f,h,_))return;const g=d(u,m,h,v);g?(o[c(m.id,u.id)]=g,y.appendChild(g)):o[c(m.id,u.id)]=!1;}),y;}return!1;},update:function(u,h,_,f,y){const v=document.createElement(\"div\"),b=s.getTaskPosition(u);y.y=0,y.y_end=s.$task_bg.scrollHeight,u.$rollup.forEach(function(m){const g=s.getTask(m),p=c(g.id,u.id);let k=l(g,y,_,f);if(k!==!!o[p])if(k){const x=d(u,g,_,b);o[p]=x||!1;}else o[p]=!1;o[p]&&v.appendChild(o[p]),h.innerHTML=\"\",h.appendChild(v);});},isInViewPort:Ee,getVisibleRange:mt};}(t);},taskSplitBar:function(){return It();},taskConstraints:function(){return It();},taskDeadline:function(){return It();},taskBaselines:function(){return It();},link:function(){return za(t);},resourceRow:function(){return function(s){var r=Wa(s),o={};function l(c,u,h,_,f){var y=h.resource_cell_class(u.start_date,u.end_date,c,u.tasks,u.assignments),v=h.resource_cell_value(u.start_date,u.end_date,c,u.tasks,u.assignments),b=f.getItemHeight(c.id)-1;if(y||v){var m=f.getItemPosition(c,u.start_date,u.end_date),g=document.createElement(\"div\");return g.setAttribute(f.$config.item_attribute,c.id),g.className=[\"gantt_resource_marker\",y].join(\" \"),g.style.cssText=[\"left:\"+m.left+\"px\",\"width:\"+m.width+\"px\",\"height:\"+b+\"px\",\"line-height:\"+b+\"px\",\"top:\"+m.top+\"px\"].join(\";\"),v&&(g.innerHTML=v),g;}return null;}function d(c,u){o[c]&&o[c][u]&&o[c][u].parentNode&&o[c][u].parentNode.removeChild(o[c][u]);}return{render:function(c,u,h,_){var f=u.$getTemplates(),y=u.getScale(),v=r(c,h.resource_property,u.getScale(),u),b=!!_,m=[];o[c.id]={};for(var g=Vt(y,_),p=g.start;p<=g.end;p++){var k=v[p];if(k&&(!b||_e(p,y,_,s))){var x=l(c,k,f,0,u);x&&(m.push(x),o[c.id][p]=x);}}var w=null;if(m.length){w=document.createElement(\"div\");for(var $=0;$<m.length;$++)w.appendChild(m[$]);}return w;},update:function(c,u,h,_,f){var y=h.$getTemplates(),v=h.getScale(),b=r(c,_.resource_property,h.getScale(),h),m=Vt(v,f),g={};if(o&&o[c.id])for(var p in o[c.id])g[p]=p;for(var k=m.start;k<=m.end;k++){var x=b[k];if(g[k]=!1,x)if(_e(k,v,f,s)){if(o[c.id]&&o[c.id][k])o[c.id]&&o[c.id][k]&&!o[c.id][k].parentNode&&u.appendChild(o[c.id][k]);else{var w=l(c,x,y,0,h);w&&(u.appendChild(w),o[c.id][k]=w);}}else d(c.id,k);}for(var p in g)g[p]!==!1&&d(c.id,p);},getRectangle:Je,getVisibleRange:mt};}(t);},resourceHistogram:function(){return It();},gridTaskRowResizer:function(){return/* @__PURE__ */function(s){return{render:function(r,o,l){var d=o.$getConfig(),c=document.createElement(\"div\");return c.className=\"gantt_task_grid_row_resize_wrap\",c.style.top=o.getItemTop(r.id)+o.getItemHeight(r.id)+\"px\",c.innerHTML=\"<div class='gantt_task_grid_row_resize' role='cell'></div>\",c.setAttribute(d.task_grid_row_resizer_attribute,r.id),s._waiAria.rowResizerAttr(c),c;},update:null,getRectangle:Qt,getVisibleRange:mt};}(t);}},layersService:{getDataRender:function(s){return i.getDataRender(s,t);},createDataRender:function(s){return i.createDataRender(s,t);}}};}};function pe(t,n){const e=getComputedStyle(n.$root).getPropertyValue(\"--dhx-gantt-theme\");let i,a=!!e;if(a)i=e;else{var s=n.skin;if(i=s,!s||t)for(var r=document.getElementsByTagName(\"link\"),o=0;o<r.length;o++){var l=r[o].href.match(\"dhtmlxgantt_([a-z_]+).css\");if(l&&(n.skins[l[1]]||!s)){i=l[1];break;}}}n._theme_info={theme:i,cssVarTheme:a},n.skin=i||\"terrace\";var d=n.skins[n.skin]||n.skins.terrace;(function(h,_,f){for(var y in _)(h[y]===void 0||f)&&(h[y]=_[y]);})(n.config,d.config,t),a||(n.config.link_radius=1);var c=n.getGridColumns();for(c[1]&&!n.defined(c[1].width)&&(c[1].width=d._second_column_width),c[2]&&!n.defined(c[2].width)&&(c[2].width=d._third_column_width),o=0;o<c.length;o++){var u=c[o];u.name==\"add\"&&(u.width||(u.width=44),n.defined(u.min_width)&&n.defined(u.max_width)||(u.min_width=u.min_width||u.width,u.max_width=u.max_width||u.width),u.min_width&&(u.min_width=+u.min_width),u.max_width&&(u.max_width=+u.max_width),u.width&&(u.width=+u.width,u.width=u.min_width&&u.min_width>u.width?u.min_width:u.width,u.width=u.max_width&&u.max_width<u.width?u.max_width:u.width));}d.config.task_height&&(n.config.task_height=d.config.task_height||\"full\"),d.config.bar_height&&(n.config.bar_height=d.config.bar_height||\"full\"),d._lightbox_template&&(n._lightbox_template=d._lightbox_template),d._redefine_lightbox_buttons&&(n.config.buttons_right=d._redefine_lightbox_buttons.buttons_right,n.config.buttons_left=d._redefine_lightbox_buttons.buttons_left),n.resetLightbox();}function Za(t){var n=null,e=!1,i=null,a={started:!1},s={};function r(_){return _&&K(_,t.$root)&&_.offsetHeight;}function o(){var _=!!document.querySelector(\".gantt_drag_marker\"),f=!!document.querySelector(\".gantt_drag_marker.gantt_grid_resize_area\")||!!document.querySelector(\".gantt_drag_marker.gantt_row_grid_resize_area\"),y=!!document.querySelector(\".gantt_link_direction\"),v=t.getState(),b=v.autoscroll;return e=_&&!f&&!y,!(!v.drag_mode&&!_||f)||b;}function l(_){if(i&&(clearTimeout(i),i=null),_){var f=t.config.autoscroll_speed;f&&f<10&&(f=10),i=setTimeout(function(){n=setInterval(u,f||50);},t.config.autoscroll_delay||10);}}function d(_){_?(l(!0),a.started||(a.x=s.x,a.y=s.y,a.started=!0)):(n&&(clearInterval(n),n=null),l(!1),a.started=!1);}function c(_){var f=o();if(!n&&!i||f||d(!1),!t.config.autoscroll||!f)return!1;s={x:_.clientX,y:_.clientY},_.type==\"touchmove\"&&(s.x=_.targetTouches[0].clientX,s.y=_.targetTouches[0].clientY),!n&&f&&d(!0);}function u(){if(!o())return d(!1),!1;var _=r(t.$task)?t.$task:r(t.$grid)?t.$grid:t.$root;if(_){var f=!1;[\".gantt_drag_marker.gantt_grid_resize_area\",\".gantt_drag_marker .gantt_row.gantt_row_task\",\".gantt_drag_marker.gantt_grid_dnd_marker\"].forEach(function(E){f=f||!!document.querySelector(E);}),f&&(_=t.$grid);var y=Y(_),v=s.x-y.x,b=s.y-y.y+window.scrollY,m=e?0:h(v,y.width,a.x-y.x),g=h(b,y.height,a.y-y.y+window.scrollY),p=t.getScrollState(),k=p.y,x=p.inner_height,w=p.height,$=p.x,T=p.inner_width,S=p.width;(g&&!x||g<0&&!k||g>0&&k+x>=w+2)&&(g=0),(m&&!T||m<0&&!$||m>0&&$+T>=S)&&(m=0);var C=t.config.autoscroll_step;C&&C<2&&(C=2),g*=C||30,((m*=C||30)||g)&&function(E,D){var A=t.getScrollState(),M=null,I=null;E&&(M=A.x+E,M=Math.min(A.width,M),M=Math.max(0,M)),D&&(I=A.y+D,I=Math.min(A.height,I),I=Math.max(0,I)),t.scrollTo(M,I);}(m,g);}}function h(_,f,y){return _-50<0&&_<y?-1:_>f-50&&_>y?1:0;}t.attachEvent(\"onGanttReady\",function(){if(!G(t)){var _=yt(t.$root)||document.body;t.eventRemove(_,\"mousemove\",c),t.event(_,\"mousemove\",c),t.eventRemove(_,\"touchmove\",c),t.event(_,\"touchmove\",c),t.eventRemove(_,\"pointermove\",c),t.event(_,\"pointermove\",c);}}),t.attachEvent(\"onDestroy\",function(){d(!1);});}var me,ve;typeof window<\"u\"&&window.jQuery&&(me=window.jQuery,ve=[],me.fn.dhx_gantt=function(t){if(typeof(t=t||{})!=\"string\"){var n=[];return this.each(function(){if(this&&this.getAttribute)if(this.gantt||window.gantt.$root==this)n.push(typeof this.gantt==\"object\"?this.gantt:window.gantt);else{var e=window.gantt.$container&&window.Gantt?window.Gantt.getGanttInstance():window.gantt;for(var i in t)i!=\"data\"&&(e.config[i]=t[i]);e.init(this),t.data&&e.parse(t.data),n.push(e);}}),n.length===1?n[0]:n;}if(ve[t])return ve[t].apply(this,[]);me.error(\"Method \"+t+\" does not exist on jQuery.dhx_gantt\");});typeof window<\"u\"&&window.dhtmlx&&(window.dhtmlx.attaches||(window.dhtmlx.attaches={}),window.dhtmlx.attaches.attachGantt=function(t,n,e){var i=document.createElement(\"DIV\");e=e||window.gantt,i.id=\"gantt_\"+e.uid(),i.style.width=\"100%\",i.style.height=\"100%\",i.cmp=\"grid\",document.body.appendChild(i),this.attachObject(i.id),this.dataType=\"gantt\",this.dataObj=e;var a=this.vs[this.av];return a.grid=e,e.init(i.id,t,n),i.firstChild.style.border=\"none\",a.gridId=i.id,a.gridObj=i,this.vs[this._viewRestore()].grid;}),typeof window<\"u\"&&window.dhtmlXCellObject!==void 0&&(window.dhtmlXCellObject.prototype.attachGantt=function(t,n,e){e=e||window.gantt;var i=document.createElement(\"DIV\");return i.id=\"gantt_\"+e.uid(),i.style.width=\"100%\",i.style.height=\"100%\",i.cmp=\"grid\",document.body.appendChild(i),this.attachObject(i.id),this.dataType=\"gantt\",this.dataObj=e,e.init(i.id,t,n),i.firstChild.style.border=\"none\",i=null,this.callEvent(\"_onContentAttach\",[]),this.dataObj;});const Qa=[\"ctrlKey\",\"altKey\",\"shiftKey\",\"metaKey\"],ts=[[{unit:\"month\",date:\"%M\",step:1},{unit:\"day\",date:\"%d\",step:1}],[{unit:\"day\",date:\"%d %M\",step:1}],[{unit:\"day\",date:\"%d %M\",step:1},{unit:\"hour\",date:\"%H:00\",step:8}],[{unit:\"day\",date:\"%d %M\",step:1},{unit:\"hour\",date:\"%H:00\",step:1}]];class es{constructor(n){this.zoomIn=()=>{const e=this.getCurrentLevel()-1;e<0||this.setLevel(e);},this.zoomOut=()=>{const e=this.getCurrentLevel()+1;e>this._levels.length-1||this.setLevel(e);},this.getCurrentLevel=()=>this._activeLevelIndex,this.getLevels=()=>this._levels,this.setLevel=e=>{const i=this._getZoomIndexByName(e);i===-1&&this.$gantt.assert(i!==-1,\"Invalid zoom level for gantt.ext.zoom.setLevel. \"+e+\" is not an expected value.\"),this._setLevel(i,0);},this._getZoomIndexByName=e=>{let i=-1;if(typeof e==\"string\"){if(!isNaN(Number(e))&&this._levels[Number(e)])i=Number(e);else for(let a=0;a<this._levels.length;a++)if(this._levels[a].name===e){i=a;break;}}else i=e;return i;},this._getVisibleDate=()=>{if(!this.$gantt.$task)return null;const e=this.$gantt.getScrollState().x,i=this.$gantt.$task.offsetWidth;this._visibleDate=this.$gantt.dateFromPos(e+i/2);},this._setLevel=(e,i)=>{this._activeLevelIndex=e;const a=this.$gantt,s=a.copy(this._levels[this._activeLevelIndex]),r=a.copy(s);if(delete r.name,a.mixin(a.config,r,!0),[\"resourceTimeline\",\"resourceHistogram\"].forEach(function(o){const l=a.$ui.getView(o);if(l){const d=l.$getConfig();d.fixed_scales||a.mixin(d,r,!0);}}),a.$root&&a.$task){if(i){const o=this.$gantt.dateFromPos(i+this.$gantt.getScrollState().x);this.$gantt.render();const l=this.$gantt.posFromDate(o);this.$gantt.scrollTo(l-i);}else{const o=this.$gantt.$task.offsetWidth;this._visibleDate||this._getVisibleDate();const l=this._visibleDate;this.$gantt.render();const d=this.$gantt.posFromDate(l);this.$gantt.scrollTo(d-o/2);}this.callEvent(\"onAfterZoom\",[this._activeLevelIndex,s]);}},this._attachWheelEvent=e=>{const i=kt.isFF?\"wheel\":\"mousewheel\";let a;a=typeof e.element==\"function\"?e.element():e.element,a&&this._domEvents.attach(a,i,this.$gantt.bind(function(s){if(this._useKey&&(Qa.indexOf(this._useKey)<0||!s[this._useKey]))return!1;if(typeof this._handler==\"function\")return this._handler.apply(this,[s]),!0;},this),{passive:!1});},this._defaultHandler=e=>{const i=this.$gantt.$task.getBoundingClientRect().x,a=e.clientX-i;let s=!1;(this.$gantt.env.isFF?-40*e.deltaY:e.wheelDelta)>0&&(s=!0),e.preventDefault(),e.stopPropagation(),this._setScaleSettings(s,a);},this._setScaleDates=()=>{this._initialStartDate&&this._initialEndDate&&(this.$gantt.config.start_date=this._initialStartDate,this.$gantt.config.end_date=this._initialEndDate);},this.$gantt=n,this._domEvents=this.$gantt._createDomEventScope();}init(n){this.$gantt.env.isNode||(this._initialStartDate=n.startDate,this._initialEndDate=n.endDate,this._activeLevelIndex=n.activeLevelIndex?n.activeLevelIndex:0,this._levels=this._mapScales(n.levels||ts),this._handler=n.handler||this._defaultHandler,this._minColumnWidth=n.minColumnWidth||60,this._maxColumnWidth=n.maxColumnWidth||240,this._widthStep=n.widthStep||3/8*n.minColumnWidth,this._useKey=n.useKey,this._initialized||(lt(this),this.$gantt.attachEvent(\"onGanttScroll\",()=>{this._getVisibleDate();})),this._domEvents.detachAll(),n.trigger===\"wheel\"&&(this.$gantt.$root?this._attachWheelEvent(n):this.$gantt.attachEvent(\"onGanttLayoutReady\",()=>{this.$gantt.attachEvent(\"onGanttRender\",()=>{this._attachWheelEvent(n);},{once:!0});})),this._initialized=!0,this.setLevel(this._activeLevelIndex));}_mapScales(n){return n.map(e=>Array.isArray(e)?{scales:e}:e);}_setScaleSettings(n,e){n?this._stepUp(e):this._stepDown(e);}_stepUp(n){if(this._activeLevelIndex>=this._levels.length-1)return;let e=this._activeLevelIndex;if(this._setScaleDates(),this._widthStep){let i=this.$gantt.config.min_column_width+this._widthStep;i>this._maxColumnWidth&&(i=this._minColumnWidth,e++),this.$gantt.config.min_column_width=i;}else e++;this._setLevel(e,n);}_stepDown(n){if(this._activeLevelIndex<1)return;let e=this._activeLevelIndex;if(this._setScaleDates(),this._widthStep){let i=this.$gantt.config.min_column_width-this._widthStep;i<this._minColumnWidth&&(i=this._maxColumnWidth,e--),this.$gantt.config.min_column_width=i;}else e--;this._setLevel(e,n);}}function ns(t){function n(){t.config.touch!=\"force\"&&(t.config.touch=t.config.touch&&(navigator.userAgent.indexOf(\"Mobile\")!=-1||navigator.userAgent.indexOf(\"iPad\")!=-1||navigator.userAgent.indexOf(\"Android\")!=-1||navigator.userAgent.indexOf(\"Touch\")!=-1)||navigator.platform===\"MacIntel\"&&navigator.maxTouchPoints>1),t.config.touch&&(!t.env.isIE||window.navigator.maxTouchPoints?t._touch_events([\"touchmove\",\"touchstart\",\"touchend\"],function(s){return s.touches&&s.touches.length>1?null:s.touches[0]?{target:s.target,pageX:s.touches[0].pageX,pageY:s.touches[0].pageY,clientX:s.touches[0].clientX,clientY:s.touches[0].clientY}:s;},function(s){return s.defaultPrevented;}):window.PointerEvent&&t._touch_events([\"pointermove\",\"pointerdown\",\"pointerup\"],function(s){return s.pointerType==\"mouse\"?null:s;},function(s){return!s||s.pointerType==\"mouse\";}));}function e(s){var r=s.$config.scrollX?t.$ui.getView(s.$config.scrollX):null,o=s.$config.scrollY?t.$ui.getView(s.$config.scrollY):null,l={x:null,y:null};return r&&r.getScrollState().visible&&(l.x=r.$view.scrollLeft),o&&o.getScrollState().visible&&(l.y=o.$view.scrollTop),l;}function i(){var s;return t.$ui.getView(\"timeline\")&&(s=t.$ui.getView(\"timeline\")._tasks_dnd),s;}t.config.touch_drag=75,t.config.touch=!0,t.config.touch_feedback=!0,t.config.touch_feedback_duration=1,t._prevent_touch_scroll=!1,t._touch_feedback=function(){t.config.touch_feedback&&navigator.vibrate&&navigator.vibrate(t.config.touch_feedback_duration);},t.attachEvent(\"onGanttReady\",function(){t.$container&&n();}),t.attachEvent(\"onGanttLayoutReady\",function(){t.$container&&t.attachEvent(\"onGanttRender\",n,{once:!0});});var a=[];t._touch_events=function(s,r,o){var l,d=0,c=!1,u=!1,h=null,_=null,f=null,y=null,v=[],b=null;let m={};for(var g=0;g<a.length;g++)t.eventRemove(a[g][0],a[g][1],a[g][2]);(a=[]).push([t.$container,s[0],function(k){var x=i();if(!o(k)&&c){f&&clearTimeout(f);var w=r(k);if(x&&(x.drag.id||x.drag.start_drag))return x.on_mouse_move(w),k.preventDefault&&k.preventDefault(),k.cancelBubble=!0,!1;if(!t._prevent_touch_scroll){if(w&&h){var $=h.pageX-w.pageX,T=h.pageY-w.pageY;if(!u&&(Math.abs($)>5||Math.abs(T)>5)&&(u=!0,d=0,l=b?e(b):t.getScrollState()),u){var S,C=l.x+$,E=l.y+T;if(b?(function(D,A,M){var I=D.$config.scrollX?t.$ui.getView(D.$config.scrollX):null,N=D.$config.scrollY?t.$ui.getView(D.$config.scrollY):null;I&&I.scrollTo(A,null),N&&N.scrollTo(null,M);}(b,C,E),S=e(b)):(t.scrollTo(C,E),S=t.getScrollState()),l.x!=S.x&&T>2*$||l.y!=S.y&&$>2*T)return p(k);}}return p(k);}return!0;}}]);try{document.addEventListener(\"touchmove\",function(k){t._touch_drag&&p(k);},{passive:!1});}catch{console.warn(\"Cannot prevent touch event for the page drag\");}for(a.push([this.$container,\"contextmenu\",function(k){if(c)return p(k);}]),a.push([this.$container,s[1],function(k){if(m=k.touches.length,document&&document.body&&document.body.classList.add(\"gantt_touch_active\"),!o(k))if(k.touches&&k.touches.length>1)c=!1;else{h=r(k),b=function(w){for(var $=t.$layout.getCellsByType(\"viewCell\"),T=0;T<$.length;T++){var S=$[T].$view.getBoundingClientRect();if(w.clientX>=S.left&&w.clientX<=S.right&&w.clientY<=S.bottom&&w.clientY>=S.top)return $[T];}}(h),t._locate_css(h,\"gantt_hor_scroll\")||t._locate_css(h,\"gantt_ver_scroll\")||(c=!0);var x=i();f=setTimeout(function(){var w=t.locate(h);x&&w&&!t._locate_css(h,\"gantt_link_control\")&&!t._locate_css(h,\"gantt_grid_data\")&&(x.on_mouse_down(h),x.drag&&x.drag.start_drag&&(function($){const T=t._getTaskLayers();let S=t.getTask($);if(S){let C=t.isTaskVisible($);if(C){y=$;for(let E=0;E<T.length;E++)if(S=T[E].rendered[$],S&&S.getAttribute(t.config.task_attribute)&&S.getAttribute(t.config.task_attribute)==$){const D=S.cloneNode(!0);v.push(S),T[E].rendered[$]=D,S.style.display=\"none\",D.className+=\" gantt_drag_move \",S.parentNode.appendChild(D);}}else if(S.$split_subtask){let E=S.$rendered_parent;if(C=t.isTaskVisible(E),!C)return;y=$;for(let D=0;D<T.length;D++){const A=T[D].rendered[E];let M;if(A&&A.childNodes&&(M=A.querySelector(`[${t.config.task_attribute}=\"${S.id}\"]`)),M){const I=M.cloneNode(!0);M.parentNode.appendChild(I),t.$task_bars.appendChild(M),M.style.display=\"none\",v.push(M),M=null;}}}}}(w),x._start_dnd(h),t._touch_drag=!0,t.refreshTask(w),t._touch_feedback())),f=null;},t.config.touch_drag);}}]),a.push([this.$container,s[2],function(k){if(document&&document.body&&document.body.classList.remove(\"gantt_touch_active\"),!o(k)){f&&clearTimeout(f),t._touch_drag=!1,c=!1;var x=r(k),w=i();if(w&&w.on_mouse_up(x),y&&t.isTaskExists(y)&&(t.refreshTask(y),v.length&&(v.forEach(function(T){T.parentNode&&T.parentNode.removeChild(T);}),t._touch_feedback())),c=u=!1,v=[],y=null,h&&d){var $=/* @__PURE__ */new Date();const T=m<=1,S=_&&_.target.innerHTML==h.target.innerHTML;$-d<500&&T&&S?(t.$services.getService(\"mouseEvents\").onDoubleClick(h),p(k)):(d=$,_=h);}else d=/* @__PURE__ */new Date();}}]),g=0;g<a.length;g++)t.event(a[g][0],a[g][1],a[g][2]);function p(k){return k&&k.preventDefault&&k.cancelable&&k.preventDefault(),k.cancelBubble=!0,!1;}};}function Ut(){console.log(\"Method is not implemented.\");}function Lt(){}function ut(t){return Lt;}Lt.prototype.render=Ut,Lt.prototype.set_value=Ut,Lt.prototype.get_value=Ut,Lt.prototype.focus=Ut;var Cn={getHtmlSelect:function(t,n,e){var i=\"\",a=this;return bt(t=t||[],function(s){var r=[{key:\"value\",value:s.key}];e==s.key&&(r[r.length]={key:\"selected\",value:\"selected\"}),s.attributes&&(r=r.concat(s.attributes)),i+=a.getHtmlOption({innerHTML:s.label},r);}),Mt(\"select\",{innerHTML:i},n);},getHtmlOption:function(t,n){return Mt(\"option\",t,n);},getHtmlButton:function(t,n){return Mt(\"button\",t,n);},getHtmlDiv:function(t,n){return Mt(\"div\",t,n);},getHtmlLabel:function(t,n){return Mt(\"label\",t,n);},getHtmlInput:function(t){return\"<input\"+En(t||[])+\">\";}};function Mt(t,n,e){return n=n||[],\"<\"+t+En(e||[])+\">\"+(n.innerHTML||\"\")+\"</\"+t+\">\";}function En(t){var n=\"\";return bt(t,function(e){n+=\" \"+e.key+\"='\"+e.value+\"'\";}),n;}function Yt(t){const n=ut();function e(){return n.apply(this,arguments)||this;}return F(e,n),e.prototype.render=function(i){const a=i.height?`height:${i.height}px;`:\"\";let s=`<div class='gantt_cal_ltext gantt_section_${i.name}' ${a?`style='${a}'`:\"\"}>`;return s+=Cn.getHtmlSelect(i.options,[{key:\"style\",value:\"width:100%;\"},{key:\"title\",value:i.name}]),s+=\"</div>\",s;},e.prototype.set_value=function(i,a,s,r){var o=i.firstChild;!o._dhx_onchange&&r.onchange&&(o.onchange=r.onchange,o._dhx_onchange=!0),a===void 0&&(a=(o.options[0]||{}).value),o.value=a||\"\";},e.prototype.get_value=function(i){return i.firstChild.value;},e.prototype.focus=function(i){var a=i.firstChild;t._focus(a,!0);},e;}function is(t){var n=Yt(t);function e(){return n.apply(this,arguments)||this;}function i(a,s){var r=[],o=[];s&&(r=t.getTaskByTime(),a.allow_root&&r.unshift({id:t.config.root_id,text:a.root_label||\"\"}),r=function(u,h,_){var f=h.filter||function(){return!0;};u=u.slice(0);for(var y=0;y<u.length;y++){var v=u[y];(v.id==_||t.isChildOf(v.id,_)||f(v.id,v)===!1)&&(u.splice(y,1),y--);}return u;}(r,a,s),a.sort&&r.sort(a.sort));for(var l=a.template||t.templates.task_text,d=0;d<r.length;d++){var c=l.apply(t,[r[d].start_date,r[d].end_date,r[d]]);c===void 0&&(c=\"\"),o.push({key:r[d].id,label:c});}return a.options=o,a.map_to=a.map_to||\"parent\",t.form_blocks.select.render.apply(this,arguments);}return F(e,n),e.prototype.render=function(a){return i(a,!1);},e.prototype.set_value=function(a,s,r,o){s===0&&(s=\"0\"),!r.id&&t.getState().lightbox&&(r.id=t.getLightboxValues().id);var l=document.createElement(\"div\");l.innerHTML=i(o,r.id);var d=l.removeChild(l.firstChild);return a.onselect=null,a.parentNode.replaceChild(d,a),t.form_blocks.select.set_value.apply(t,[d,s,r,o]);},e;}function as(t){const n=ut(),e={resourcesValues:{},filter:{},eventsInitialized:{},gridID:null,resource_filter_value:null,initialValues:[],newValues:[]},i={type:\"select\",map_to:\"resource_id\",options:t.serverList(\"resourceOptions\")},a=t.date.date_to_str(\"%d-%m-%Y\");function s(){return n.apply(this,arguments)||this;}function r(o){return e.filter[o.id];}return t.resource_table={scale_height:35,row_height:35,columns:[{name:\"resource\",label:\"Resource\",align:\"center\",width:80,editor:i,template:function(o){const l=t.getDatastore(t.config.resource_store).getItem(o.resource_id);return l?l.text:\"Unassigned\";}},{name:\"hours/Day\",label:\"Hours/Day\",align:\"center\",width:70,editor:{type:\"number\",map_to:\"value\",min:0,max:100},template:function(o){return o.value?+o.value:\"\";}},{name:\"start\",label:\"Start\",align:\"center\",width:100,template:function(o){return o.start_date?a(o.start_date):\"\";}},{name:\"end\",label:\"End\",align:\"center\",width:100,template:function(o){return o.end_date?a(o.end_date):\"\";}},{name:\"duration\",label:\"Duration\",align:\"center\",width:80,template:function(o){return o.duration?`${o.duration} day${o.duration==1?\"\":\"s\"}`:\"\";}},{name:\"delete\",label:\"Delete\",align:\"center\",width:80,template:function(o){return`<div data-assignment-id='${o.id}' data-assignment-delete='${o.id}' class='dhx_gantt_icon dhx_gantt_icon_delete'></div>`;}}],resource_default_assignment:{duration:null,value:8,start_date:null,end_date:null,mode:\"default\"}},t.attachEvent(\"onAfterLightbox\",function(){for(var o in e.filter)e.filter[o].input.value=\"\",e.filter[o].filterApplied=!1;e.resourcesValues={},e.eventsInitialized={},e.resource_filter_value=null,e.gridID=null,e.initialValues=[],e.newValues=[];}),F(s,n),s.prototype.render=function(o){let l;var d;return o.options||(o.options=t.serverList(\"resourceOptions\")),o.map_to&&o.map_to!=\"resource_selector\"&&o.map_to!=\"auto\"||(o.map_to=t.config.resource_property),l=`<div${isNaN(o.height)?\"\":\" style='height:auto;'\"} class='gantt_section_${o.name}' data-section-name='${o.name}'>`,l+=(d=o.index,`<div class='gantt_resource_selector_filter_wrapper gantt_cal_lsection' data-section-name='${o.name}'>\n\t\t\t\t\t\t<div class='gantt_cal_ltext gantt_resources_filter'>\n\t\t\t\t\t\t\t<label class=\"dhx_gantt_icon dhx_gantt_icon_search\">\n\t\t\t\t\t\t\t\t<input type='text' class='gantt_resources_filter_input' placeholder='${t.locale.labels.resources_filter_placeholder||\"Search...\"}' tab-index=\"-1\"> \n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div role='button' aria-label='Add Assignment' class='gantt_custom_button gantt_add_resources' data-index='${d}'><div class='gantt_custom_button_add_resources gantt_add'></div><div class='gantt_custom_button_label'>${t.locale.labels.resources_add_button}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>`),l+=\"</div>\",l+=`<div class=\"resources_section_placeholder\" style='display:none;'>${t.locale.labels.resources_section_placeholder}</div>`,l;},s.prototype.button_click=function(o,l,d,c){const u=d.getAttribute(\"data-section-name\")||c.getAttribute(\"data-section-name\"),h=document.querySelector(\"[data-resource-selector-section]\"),_=document.querySelector(\".resources_section_placeholder\"),f=document.querySelector(`.gantt_section_${u} .gantt_resource_selector_filter_wrapper`),y=document.querySelector(`.gantt_section_${u} .gantt_grid`);if(h.style.display=\"none\",t.callEvent(\"onSectionButton\",[t._lightbox_id,d])!==!1&&l.closest(\".gantt_custom_button.gantt_add_resources\")){_.style.display=\"none\";const v=t.getDatastore(\"temp_resource_assignment_store\");v&&v.getItems().length==0&&(f.style.display=\"flex\",y.style.display=\"block\"),function(b){let m;const g=t.getTask(t._lightbox_id),p=t.getTaskAssignments(g.id);if(p.length)m=p[0].resource_id;else{const w=t.serverList(\"resourceOptions\");if(!w.length)throw new Error(`There is no any resources in resource store, please check your data:\n\t\t\t\t\thttps://docs.dhtmlx.com/gantt/desktop__resource_management.html#assigningresources`);m=w[0].id;}const k=t.getDatastore(\"temp_resource_assignment_store\"),x=(t.getLightboxSection(b).section.config??t.resource_table).resource_default_assignment??t.resource_table.resource_default_assignment;k.addItem({resource_id:m,task_id:g.id,duration:x.duration??t.calculateDuration(g),value:x.value,start_date:x.start_date??g.start_date,end_date:x.end_date??g.end_date,mode:x.mode}),t.refreshData();}(u),function(b){const m=b.querySelectorAll(\".gantt_row.gantt_row_task\");if(m){const g=m[m.length-1].querySelector(\".gantt_cell\");if(g){const{id:p,columnName:k}=t.ext.inlineEditorsLightbox.locateCell(g);p&&k&&t.ext.inlineEditorsLightbox.startEdit(p,k);}}}(c);}},s.prototype.set_value=function(o,l,d,c,u){let h=document.querySelector(\"[data-resource-selector-section]\"),_=document.querySelector(\".resources_section_placeholder\");if(function(y){e.initialValues=[],e.newValues=[];const v=t.$data.assignmentsStore.find(function(b){return b.task_id==y.id;});for(let b=0;b<v.length;b++)e.initialValues[b]={resource_id:v[b].resource_id,value:v[b].value,id:v[b].id};}(d),!u){(function(b,m,g,p){if(t.$ui.getView(\"GridRL\")&&!e.gridID&&t.$ui.getView(\"GridRL\").destructor(),!e.gridID){const k=document.createElement(\"div\");k.classList.add(\"gantt_resource_selector_grid\");const x=t.createDatastore({name:\"temp_resource_assignment_store\",initItem:function(D){return D.id||(D.id=t.uid()),D;}});t.$data.tempAssignmentsStore=x;const w={...t.config.layout,id:\"GridRL\",sectionName:p.name},$=t.$ui.createView(\"GridRL\",t.$root,w);$.init(k);const T=t._lightbox.offsetWidth-(t.config.wide_form?150:0);$.setSize(T,\"auto\"),t.ext.inlineEditorsLightbox=t.ext._inlineEditors.createEditors($),t.ext.inlineEditorsLightbox.init(),e.gridID=$.$id,b.appendChild(k);const S=t.getDatastore(t.config.resource_assignment_store),C=[];S.eachItem(function(D){D.task_id&&D.task_id==g.id&&C.push(D);});const E=structuredClone(C);x.parse(E);}t.$data.tempAssignmentsStore.attachEvent(\"onFilterItem\",function(k,x){return x.task_id==g.id&&(!e.resource_filter_value||t.getDatastore(t.config.resource_store).getItem(x.resource_id).text.toLowerCase().indexOf(e.resource_filter_value)>-1);}),t.refreshData();})(o,0,d,c),function(b,m){if(!e.filter[m.id]){var g=b.querySelector(\".gantt_resources_filter\"),p=g.querySelector(\".gantt_resources_filter_input\");e.filter[m.id]={container:g,input:p,filterApplied:!1};}e.filter[m.id];}(o,c),function(b,m,g,p){if(e.eventsInitialized[g.id])return;var k=function(S){var C,E,D;x(g,b);var A=r(g);D=A.input,E=D.value.trim(),e.resource_filter_value=E.toLowerCase(),A.filterApplied=!!E,t.getState().lightbox&&(m=t.getLightboxValues()),C=function(I,N,L){var O,z=t.copy(I);if(L===\"\"){z.resources=[];let H=e.newValues.map(j=>j.resource_id);if(H&&H.length>0)for(let j=0;j<H.length;j++){let P=t.getDatastore(t.config.resource_store).getItem(H[j]);P&&z.resources.push(P);}return z;}return O=function(H){if(H.text.toLowerCase().indexOf(L.toLowerCase())>=0)return H;},z.resources=function(H){let j=[];const P=t.getDatastore(\"temp_resource_assignment_store\"),V=P.find(function(W){return W.task_id==H.id;});for(let W=0;W<V.length;W++){let U=t.getDatastore(t.config.resource_store).getItem(V[W].resource_id);U&&j.push(U);}return j;}(N,I.options),z.resources=function(H,j){var P=[];if(H.filter)return H.filter(j);for(var V=0;V<H.length;V++)j(H[V],V)&&(P[P.length]=H[V]);return P;}(z.resources,O),z;}(g,m,E);var M=m[g.map_to];p.form_blocks.resource_selector.set_value(b,M,m,C);};function x(S,C){var E=\".gantt_resource_amount_input\",D=C.querySelectorAll(E);e.resourcesValues[S.id]=e.resourcesValues[S.id]||{};for(var A=0;A<D.length;A++){var M=D[A].getAttribute(\"data-item-id\"),I=D[A].getAttribute(\"data-assignment-id\");D[A].disabled?delete e.resourcesValues[S.id][M]:e.resourcesValues[S.id][M]={value:D[A].value,id:I};}}w=k,$=100,T=!1,k=function(){T||(w.apply(null,arguments),T=!0,setTimeout(function(){T=!1;},$));},r(g).container.addEventListener(\"keyup\",k),r(g).container.addEventListener(\"input\",k,!0),r(g).container.addEventListener(\"change\",k,!0),e.eventsInitialized[g.id]=!0;var w,$,T;}(o,l,c,this),h.style.display=\"none\";let y=document.querySelector(`.gantt_section_${c.name} .gantt_grid`),v=document.querySelector(`.gantt_section_${c.name} .gantt_resource_selector_filter_wrapper`);y.style.display=\"none\",v.style.display=\"none\";}const f=t.getDatastore(\"temp_resource_assignment_store\");if(f){let y=document.querySelector(`.gantt_section_${c.name} .gantt_resource_selector_filter_wrapper`),v=document.querySelector(`.gantt_section_${c.name} .gantt_grid`);f.getItems().length==0?(h.style.display==\"none\"&&(h.style.display=\"flex\"),y.style.display=\"none\",v.style.display=\"none\",_.style.display=\"block\"):(y.style.display=\"flex\",v.style.display=\"block\",_.style.display=\"none\");}t._center_lightbox(t.getLightbox());},s.prototype.get_value=function(o,l,d,c){const u=t.getDatastore(\"temp_resource_assignment_store\").find(function(h){return h.task_id==l.id;});for(let h=0;h<u.length;h++)e.newValues[h]={resource_id:u[h].resource_id.toString(),value:u[h].value,id:u[h].id,start_date:u[h].start_date,end_date:u[h].end_date,duration:u[h].duration,mode:u[h].mode,delay:u[h].delay};return c==\"save\"?e.newValues:e.initialValues;},s;}function ss(t){var n=function(){const g=ut();function p(){return g.apply(this,arguments)||this;}return F(p,g),p.prototype.render=function(k){let x=k.height?`${k.height}px`:\"\";return`<div class='gantt_cal_ltext gantt_cal_template gantt_section_${k.name}' ${x?`style='height:${x};'`:\"\"}></div>`;},p.prototype.set_value=function(k,x){k.innerHTML=x||\"\";},p.prototype.get_value=function(k){return k.innerHTML||\"\";},p.prototype.focus=function(){},p;}(),e=function(g){const p=ut();function k(){return p.apply(this,arguments)||this;}return F(k,p),k.prototype.render=function(x){const w=(x.height||\"130\")+\"px\",$=x.placeholder?`placeholder='${x.placeholder}'`:\"\";return`<div class='gantt_cal_ltext gantt_section_${x.name}' style='height:${w};' ${$}><textarea></textarea></div>`;},k.prototype.set_value=function(x,w){g.form_blocks.textarea._get_input(x).value=w||\"\";},k.prototype.get_value=function(x){return g.form_blocks.textarea._get_input(x).value;},k.prototype.focus=function(x){var w=g.form_blocks.textarea._get_input(x);g._focus(w,!0);},k.prototype._get_input=function(x){return x.querySelector(\"textarea\");},k;}(t),i=function(g){const p=ut();function k(){return p.apply(this,arguments)||this;}return F(k,p),k.prototype.render=function(x){var w=g.form_blocks.getTimePicker.call(this,x);let $=\"gantt_section_time\";x.name!==\"time\"&&($+=\" gantt_section_\"+x.name);var T=\"<div style='padding-top:0px;font-size:inherit;text-align:center;' class='\"+$+\"'>\";return T+=w,x.single_date?(w=g.form_blocks.getTimePicker.call(this,x,!0),T+=\"<span></span>\"):T+=\"<span class='gantt_section_time_spacer'> &nbsp;&ndash;&nbsp; </span>\",(T+=w)+\"</div>\";},k.prototype.set_value=function(x,w,$,T){var S=T,C=x.getElementsByTagName(\"select\"),E=T._time_format_order;if(S.auto_end_date)for(var D=function(){I=new Date(C[E[2]].value,C[E[1]].value,C[E[0]].value,0,0),N=g.calculateEndDate({start_date:I,duration:1,task:$}),g.form_blocks._fill_lightbox_select(C,E.size,N,E,S);},A=0;A<4;A++)C[A].onchange=D;var M=g._resolve_default_mapping(T);typeof M==\"string\"&&(M={start_date:M});var I=$[M.start_date]||/* @__PURE__ */new Date(),N=$[M.end_date]||g.calculateEndDate({start_date:I,duration:1,task:$});g.form_blocks._fill_lightbox_select(C,0,I,E,S),g.form_blocks._fill_lightbox_select(C,E.size,N,E,S);},k.prototype.get_value=function(x,w,$){var T,S=x.getElementsByTagName(\"select\"),C=$._time_format_order;return T=g.form_blocks.getTimePickerValue(S,$),typeof g._resolve_default_mapping($)==\"string\"?T:{start_date:T,end_date:function(E,D,A){var M=g.form_blocks.getTimePickerValue(E,$,D.size);return M<=A&&($.autofix_end!==!1||$.single_date)?g.date.add(A,g._get_timepicker_step(),\"minute\"):M;}(S,C,T)};},k.prototype.focus=function(x){g._focus(x.getElementsByTagName(\"select\")[0]);},k;}(t),a=Yt(t),s=function(g){var p=ut();function k(){return p.apply(this,arguments)||this;}return F(k,p),k.prototype.render=function(x){const w=x.height?`height:${x.height}px;`:\"\";let $=`<div class='gantt_cal_ltext gantt_cal_lcheckbox gantt_section_${x.name}' ${w?`style='${w}'`:\"\"}>`;if(x.options&&x.options.length)for(var T=0;T<x.options.length;T++)$+=\"<label><input type='checkbox' value='\"+x.options[T].key+\"' name='\"+x.name+\"'>\"+x.options[T].label+\"</label>\";else x.single_value=!0,$+=\"<label><input type='checkbox' name='\"+x.name+\"'></label>\";return $+=\"</div>\",$;},k.prototype.set_value=function(x,w,$,T){var S=Array.prototype.slice.call(x.querySelectorAll(\"input[type=checkbox]\"));!x._dhx_onchange&&T.onchange&&(x.onchange=T.onchange,x._dhx_onchange=!0),T.single_value?S[0].checked=!!w:bt(S,function(C){C.checked=!!w&&w.indexOf(C.value)>=0;});},k.prototype.get_value=function(x,w,$){return $.single_value?x.querySelector(\"input[type=checkbox]\").checked:function(T,S){if(T.map)return T.map(S);for(var C=T.slice(),E=[],D=0;D<C.length;D++)E.push(S(C[D],D));return E;}(Array.prototype.slice.call(x.querySelectorAll(\"input[type=checkbox]:checked\")),function(T){return T.value;});},k.prototype.focus=function(x){g._focus(x.querySelector(\"input[type=checkbox]\"));},k;}(t),r=function(g){const p=ut();function k(){return p.apply(this,arguments)||this;}return F(k,p),k.prototype.render=function(x){const w=x.height?`${x.height}px`:\"\";let $=`<div class='gantt_cal_ltext gantt_cal_lradio gantt_section_${x.name}' ${w?`style='height:${w};'`:\"\"}>`;if(x.options&&x.options.length)for(var T=0;T<x.options.length;T++)$+=\"<label><input type='radio' value='\"+x.options[T].key+\"' name='\"+x.name+\"'>\"+x.options[T].label+\"</label>\";return $+=\"</div>\",$;},k.prototype.set_value=function(x,w,$,T){var S;T.options&&T.options.length&&(S=x.querySelector(\"input[type=radio][value='\"+w+\"']\")||x.querySelector(\"input[type=radio][value='\"+T.default_value+\"']\"))&&(!x._dhx_onchange&&T.onchange&&(x.onchange=T.onchange,x._dhx_onchange=!0),S.checked=!0);},k.prototype.get_value=function(x,w){var $=x.querySelector(\"input[type=radio]:checked\");return $?$.value:\"\";},k.prototype.focus=function(x){g._focus(x.querySelector(\"input[type=radio]\"));},k;}(t),o=function(g){var p=ut();function k(){return p.apply(this,arguments)||this;}function x(T){return T.formatter||new Ht();}function w(T,S){var C=T.getElementsByTagName(\"select\"),E=S._time_format_order,D=0,A=0;if(g.defined(E[3])){var M=C[E[3]],I=parseInt(M.value,10);isNaN(I)&&M.hasAttribute(\"data-value\")&&(I=parseInt(M.getAttribute(\"data-value\"),10)),D=Math.floor(I/60),A=I%60;}return new Date(C[E[2]].value,C[E[1]].value,C[E[0]].value,D,A);}function $(T,S){var C=T.getElementsByTagName(\"input\")[1];return(C=x(S).parse(C.value))&&!window.isNaN(C)||(C=1),C<0&&(C*=-1),C;}return F(k,p),k.prototype.render=function(T){var S=\"<div class='gantt_time_selects'>\"+g.form_blocks.getTimePicker.call(this,T)+\"</div>\",C=\" \"+g.locale.labels[g.config.duration_unit+\"s\"]+\" \",E=T.single_date?\" style='display:none'\":\"\",D=T.readonly?\" disabled='disabled'\":\"\",A=g._waiAria.lightboxDurationInputAttrString(T),M=\"gantt_duration_value\";T.formatter&&(C=\"\",M+=\" gantt_duration_value_formatted\");var I=\"<div class='gantt_duration' \"+E+\"><div class='gantt_duration_inputs'><input type='button' class='gantt_duration_dec' value=''\"+D+\"><input type='text' value='5days' class='\"+M+\"'\"+D+\" \"+A+\"><input type='button' class='gantt_duration_inc' value='+'\"+D+\"></div><div class='gantt_duration_end_date'>\"+C+\"<span></span></div></div></div>\";let N=\"gantt_section_time gantt_section_duration\";return T.name!==\"time\"&&(N+=\" gantt_section_\"+T.name),\"<div style='padding-top:0px;font-size:inherit;' class='\"+N+\"'>\"+S+\" \"+I+\"</div>\";},k.prototype.set_value=function(T,S,C,E){var D,A,M,I,N=T.getElementsByTagName(\"select\"),L=T.getElementsByTagName(\"input\"),O=L[1],z=[L[0],L[2]],H=T.getElementsByTagName(\"span\")[0],j=E._time_format_order;function P(){var W=w.call(g,T,E),U=$.call(g,T,E),ft=g.calculateEndDate({start_date:W,duration:U,task:C}),Dt=g.templates.task_end_date||g.templates.task_date;H.innerHTML=Dt(ft);}function V(W){var U=O.value;U=x(E).parse(U),window.isNaN(U)&&(U=0),(U+=W)<1&&(U=1),O.value=x(E).format(U),P();}z[0].onclick=g.bind(function(){V(-1*g.config.duration_step);},this),z[1].onclick=g.bind(function(){V(1*g.config.duration_step);},this),N[0].onchange=P,N[1].onchange=P,N[2].onchange=P,N[3]&&(N[3].onchange=P),O.onkeydown=g.bind(function(W){var U;return(U=(W=W||window.event).charCode||W.keyCode||W.which)==g.constants.KEY_CODES.DOWN?(V(-1*g.config.duration_step),!1):U==g.constants.KEY_CODES.UP?(V(1*g.config.duration_step),!1):void window.setTimeout(P,1);},this),O.onchange=g.bind(P,this),typeof(D=g._resolve_default_mapping(E))==\"string\"&&(D={start_date:D}),A=C[D.start_date]||/* @__PURE__ */new Date(),M=C[D.end_date]||g.calculateEndDate({start_date:A,duration:1,task:C}),I=Math.round(C[D.duration])||g.calculateDuration({start_date:A,end_date:M,task:C}),I=x(E).format(I),g.form_blocks._fill_lightbox_select(N,0,A,j,E),O.value=I,P();},k.prototype.get_value=function(T,S,C){var E=w(T,C),D=$(T,C),A=g.calculateEndDate({start_date:E,duration:D,task:S});return typeof g._resolve_default_mapping(C)==\"string\"?E:{start_date:E,end_date:A,duration:D};},k.prototype.focus=function(T){g._focus(T.getElementsByTagName(\"select\")[0]);},k;}(t),l=is(t),d=Yt(t),c=function(g){var p=ut();function k(){return p.apply(this,arguments)||this;}function x($){return!$||$===g.config.constraint_types.ASAP||$===g.config.constraint_types.ALAP;}function w($,T){for(var S=x(T),C=0;C<$.length;C++)$[C].disabled=S;}return F(k,p),k.prototype.render=function($){const T=$.height?`height:${$.height}px;`:\"\";let S=`<div class='gantt_cal_ltext gantt_section_${$.name}' ${T?`style='${T}'`:\"\"}>`;var C=[];for(var E in g.config.constraint_types)C.push({key:g.config.constraint_types[E],label:g.locale.labels[g.config.constraint_types[E]]});return $.options=$.options||C,S+=\"<span data-constraint-type-select>\"+Cn.getHtmlSelect($.options,[{key:\"data-type\",value:\"constraint-type\"}])+\"</span>\",S+=\"<label data-constraint-time-select>\"+(g.locale.labels.constraint_date||\"Constraint date\")+\": \"+g.form_blocks.getTimePicker.call(this,$)+\"</label>\",S+=\"</div>\",S;},k.prototype.set_value=function($,T,S,C){var E=$.querySelector(\"[data-constraint-type-select] select\"),D=$.querySelectorAll(\"[data-constraint-time-select] select\"),A=C._time_format_order,M=g._resolve_default_mapping(C);E._eventsInitialized||(E.addEventListener(\"change\",function(L){w(D,L.target.value);}),E._eventsInitialized=!0);var I=S[M.constraint_date]||/* @__PURE__ */new Date();g.form_blocks._fill_lightbox_select(D,0,I,A,C);var N=S[M.constraint_type]||g.getConstraintType(S);E.value=N,w(D,N);},k.prototype.get_value=function($,T,S){var C=$.querySelector(\"[data-constraint-type-select] select\"),E=$.querySelectorAll(\"[data-constraint-time-select] select\"),D=C.value,A=null;return x(D)||(A=g.form_blocks.getTimePickerValue(E,S)),{constraint_type:D,constraint_date:A};},k.prototype.focus=function($){g._focus($.querySelector(\"select\"));},k;}(t),u=function(g){const p=Yt(g);function k(){return p.apply(this,arguments)||this;}return F(k,p),k.prototype.render=function(x){var w=g.config.types,$=g.locale.labels,T=[],S=x.filter||function(D,A){return!w.placeholder||A!==w.placeholder;};for(var C in w)!S(C,w[C])==0&&T.push({key:w[C],label:$[\"type_\"+C]});x.options=T;var E=x.onchange;return x.onchange=function(){g._lightbox_current_type=this.value,g.changeLightboxType(this.value),typeof E==\"function\"&&E.apply(this,arguments);},p.prototype.render.apply(this,arguments);},k;}(t),h=function(g){var p=ut();function k(){return p.apply(this,arguments)||this;}function x(S){return S.formatter||new Ht();}function w(S,C,E,D){const A=\"<div class='gantt_time_selects'>\"+g.form_blocks.getTimePicker.call(g,D)+\"</div>\";let M=\" \"+g.locale.labels[g.config.duration_unit+\"s\"]+\" \";const I=D.single_date?\" style='display:none'\":\"\",N=D.readonly?\" disabled='disabled'\":\"\",L=g._waiAria.lightboxDurationInputAttrString(D),O=g.locale.labels.baselines_remove_button;let z=\"gantt_duration_value\";D.formatter&&(M=\"\",z+=\" gantt_duration_value_formatted\");const H=\"<div class='gantt_duration' \"+I+\"><div class='gantt_duration_inputs'><input type='button' class='gantt_duration_dec' value='-'\"+N+\"><input type='text' value='5days' class='\"+z+\"'\"+N+\" \"+L+\"><input type='button' class='gantt_duration_inc' value='+'\"+N+\"></div><div class='gantt_duration_end_date'>\"+M+\"<span></span></div></div></div>\",j=`<div><div class='baseline_delete_button gantt_custom_button dhx_gantt_icon dhx_gantt_icon_delete' aria-label='${O}'></div></div>`,P=document.createElement(\"div\");P.className=\"gantt_section_time gantt_section_duration\",P.setAttribute(\"data-baseline-id\",C.id),P.innerHTML=A+H+j+\"<br>\",S.appendChild(P);var V,W,U,ft=P.getElementsByTagName(\"select\"),Dt=P.getElementsByTagName(\"input\"),At=Dt[1],Ie=[Dt[0],Dt[2]],Dn=P.getElementsByTagName(\"span\")[0],An=D._time_format_order;function pt(){var _t=$.call(g,P,D),J=T.call(g,P,D),In=g.calculateEndDate({start_date:_t,duration:J,task:E}),Mn=g.templates.task_end_date||g.templates.task_date;Dn.innerHTML=Mn(In);}function zt(_t){var J=At.value;J=x(D).parse(J),window.isNaN(J)&&(J=0),(J+=_t)<1&&(J=1),At.value=x(D).format(J),pt();}P.querySelector(\".baseline_delete_button\").onclick=function(_t){const J=P.parentNode;P.innerHTML=\"\",P.remove(),J.innerHTML===\"\"&&(J.innerHTML=g.locale.labels.baselines_section_placeholder);},Ie[0].onclick=g.bind(function(){zt(-1*g.config.duration_step);},g),Ie[1].onclick=g.bind(function(){zt(1*g.config.duration_step);},g),ft[0].onchange=pt,ft[1].onchange=pt,ft[2].onchange=pt,ft[3]&&(ft[3].onchange=pt),At.onkeydown=g.bind(function(_t){var J;return(J=(_t=_t||window.event).charCode||_t.keyCode||_t.which)==g.constants.KEY_CODES.DOWN?(zt(-1*g.config.duration_step),!1):J==g.constants.KEY_CODES.UP?(zt(1*g.config.duration_step),!1):void window.setTimeout(pt,1);},g),At.onchange=g.bind(pt,g),g._resolve_default_mapping(D),V=C.start_date||/* @__PURE__ */new Date(),W=C.end_date||g.calculateEndDate({start_date:V,duration:1,task:E}),U=g.calculateDuration({start_date:V,end_date:W,task:E}),U=x(D).format(U),g.form_blocks._fill_lightbox_select(ft,0,V,An,D),At.value=U,pt();}function $(S,C){var E=S.getElementsByTagName(\"select\"),D=C._time_format_order,A=0,M=0;if(g.defined(D[3])){var I=E[D[3]],N=parseInt(I.value,10);isNaN(N)&&I.hasAttribute(\"data-value\")&&(N=parseInt(I.getAttribute(\"data-value\"),10)),A=Math.floor(N/60),M=N%60;}return new Date(E[D[2]].value,E[D[1]].value,E[D[0]].value,A,M);}function T(S,C){var E=S.getElementsByTagName(\"input\")[1];return(E=x(C).parse(E.value))&&!window.isNaN(E)||(E=1),E<0&&(E*=-1),E;}return F(k,p),k.prototype.render=function(S){return`<div style='height: ${S.height||110}px; font-size:inherit;' class='gantt_section_baselines'></div>`;},k.prototype.set_value=function(S,C,E,D){E.baselines?(S.innerHTML=\"\",E.baselines.forEach(A=>{w(S,A,E,D);})):S.innerHTML=g.locale.labels.baselines_section_placeholder;},k.prototype.get_value=function(S,C,E){const D=[];return S.querySelectorAll(\"[data-baseline-id]\").forEach(A=>{const M=A.dataset.baselineId;let I,N=g.getDatastore(\"baselines\").getItem(M);I=N?g.copy(N):{id:g.uid(),task_id:C.id,text:\"Baseline 1\"},I.start_date=$(A,E),I.duration=T(A,E),I.end_date=g.calculateEndDate({start_date:I.start_date,duration:I.duration,task:C}),D.push(I);}),D;},k.prototype.button_click=function(S,C,E,D){if(g.callEvent(\"onSectionButton\",[g._lightbox_id,E])!==!1&&(C.closest(\".gantt_custom_button.gantt_remove_baselines\")&&(D.innerHTML=g.locale.labels.baselines_section_placeholder),C.closest(\".gantt_custom_button.gantt_add_baselines\"))){D.innerHTML==g.locale.labels.baselines_section_placeholder&&(D.innerHTML=\"\");const A=g.getTask(g._lightbox_id);w(D,{id:g.uid(),task_id:A.id,start_date:A.start_date,end_date:A.end_date},A,g._get_typed_lightbox_config()[S]);}},k.prototype.focus=function(S){g._focus(S.getElementsByTagName(\"select\")[0]);},k;}(t),_=as(t);t._lightbox_methods={},t._lightbox_template=\"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span></div><div class='gantt_cal_larea'></div>\",t._lightbox_template=`<div class='gantt_cal_ltitle'><div class=\"dhx_cal_ltitle_descr\"><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='dhx_title'></span>\n</div>\n<div class=\"gantt_cal_ltitle_controls\">\n\t<a class=\"gantt_cal_ltitle_close_btn dhx_gantt_icon dhx_gantt_icon_close\"></a>\n\n</div></div><div class='gantt_cal_larea'></div>`,t._lightbox_root=t.$root,t.$services.getService(\"state\").registerProvider(\"lightbox\",function(){return{lightbox:t._lightbox_id};}),t.showLightbox=function(g){var p=this.getTask(g);if(this.callEvent(\"onBeforeLightbox\",[g])){var k=this.getLightbox(this.getTaskType(p.type));this.showCover(k),this._fill_lightbox(g,k),this._setLbPosition(k),this._waiAria.lightboxVisibleAttr(k),this.callEvent(\"onLightbox\",[g]);}else t.isTaskExists(g)&&t.getTask(g).$new&&this.$data.tasksStore._updateOrder();},t._get_timepicker_step=function(){if(this.config.round_dnd_dates){var g;if(function(k){var x=k.$ui.getView(\"timeline\");return!(!x||!x.isVisible());}(this)){var p=t.getScale();g=qt(p.unit)*p.step/60;}return(!g||g>=1440)&&(g=this.config.time_step),g;}return this.config.time_step;},t.getLabel=function(g,p){for(var k=this._get_typed_lightbox_config(),x=0;x<k.length;x++)if(k[x].map_to==g){for(var w=k[x].options,$=0;$<w.length;$++)if(w[$].key==p)return w[$].label;}return\"\";},t.updateCollection=function(g,p){p=p.slice(0);var k=t.serverList(g);if(!k)return!1;k.splice(0,k.length),k.push.apply(k,p||[]),t.resetLightbox();},t.getLightboxType=function(){return this.getTaskType(this._lightbox_type);},t.getLightbox=function(g){var p,k,x,w,$,T=\"\";if(t.config.csp===!0||t.env.isSalesforce?t._lightbox_root=t.$root:t._lightbox_root=document.body,g===void 0&&(g=this.getLightboxType()),!this._lightbox||this.getLightboxType()!=this.getTaskType(g)){this._lightbox_type=this.getTaskType(g),p=document.createElement(\"div\"),T=\"gantt_cal_light\",k=this._is_lightbox_timepicker(),t.config.wide_form&&(T+=\" gantt_cal_light_wide\"),k&&(T+=\" gantt_cal_light_full\"),p.className=T,p.style.visibility=\"hidden\",x=this._lightbox_template,x+=\"<div class='gantt_cal_lcontrols'>\",x+=v(this.config.buttons_left),x+=\"<div class='gantt_cal_lcontrols_push_right'></div>\",x+=v(this.config.buttons_right),x+=\"</div>\",p.innerHTML=x,t._waiAria.lightboxAttr(p),t.config.drag_lightbox&&(p.firstChild.onmousedown=t._ready_to_dnd,p.firstChild.addEventListener(\"touchstart\",function(C){t._ready_to_dnd(C.touches[0]);}),p.firstChild.onselectstart=function(){return!1;},p.firstChild.style.cursor=\"pointer\",t._init_dnd_events()),this._lightbox&&this.resetLightbox(),f(),this._cover.insertBefore(p,this._cover.firstChild),this._lightbox=p,w=this._get_typed_lightbox_config(g),x=this._render_sections(w);var S=($=p.querySelector(\"div.gantt_cal_larea\")).style.overflow;$.style.overflow=\"hidden\",$.innerHTML=x,function(C){var E,D,A,M,I,N;for(N=0;N<C.length;N++)E=C[N],A=t._lightbox_root.querySelector(\"#\"+E.id),E.id&&A&&(D=A.querySelector(\"label\"),(M=A.nextSibling)&&(I=M.querySelector(\"input, select, textarea\"))&&(I.id=I.id||\"input_\"+t.uid(),E.inputId=I.id,D.setAttribute(\"for\",E.inputId)));}(w),$.style.overflow=S,this._init_lightbox_events(this),p.style.display=\"none\",p.style.visibility=\"visible\";}return this._lightbox;},t._render_sections=function(g){for(var p=\"\",k=0;k<g.length;k++){var x=this.form_blocks[g[k].type];if(x){g[k].id=\"area_\"+this.uid();var w=g[k].hidden?\" style='display:none'\":\"\",$=\"\";g[k].button&&($=\"<div class='gantt_custom_button' data-index='\"+k+\"'><div class='gantt_custom_button_\"+g[k].button+\"'></div><div class='gantt_custom_button_label'>\"+this.locale.labels[\"button_\"+g[k].button]+\"</div></div>\"),g[k].type==\"baselines\"&&($=\"<div class='gantt_custom_button gantt_remove_baselines' data-index='\"+k+\"'><div class='gantt_custom_button_delete_baselines'></div><div class='gantt_custom_button_label'>\"+this.locale.labels.baselines_remove_all_button+\"</div></div><div class='gantt_custom_button gantt_add_baselines' data-index='\"+k+\"'><div class='gantt_custom_button_add_baseline'></div><div class='gantt_custom_button_label'>\"+this.locale.labels.baselines_add_button+\"</div></div>\"),g[k].type==\"resource_selector\"&&(g[k].index=k,$=`<div class='gantt_custom_button gantt_add_resources' data-index='${k}' data-resource-selector-section='${k}' data-section-name='${g.name}'><div class='gantt_custom_button_add_resources gantt_add'></div><div class='gantt_custom_button_label'>${this.locale.labels.resources_add_button}</div></div>`),this.config.wide_form&&(p+=\"<div class='gantt_wrap_section' \"+w+\">\"),p+=\"<div id='\"+g[k].id+\"' class='gantt_cal_lsection'><label>\"+$+(g[k].label||this.locale.labels[\"section_\"+g[k].name]||g[k].name)+\"</label></div>\"+x.render.call(this,g[k]),p+=\"</div>\";}}return p;},t._center_lightbox=function(g){t._setLbPosition(g);},t._setLbPosition=function(g){if(!g)return;const p=t._lightbox_root||t.$root;g.style.top=Math.max(p.offsetHeight/2-g.offsetHeight/2,0)+\"px\",g.style.left=Math.max(p.offsetWidth/2-g.offsetWidth/2,0)+\"px\";},t.showCover=function(g){g&&(g.style.display=\"block\",this._setLbPosition(g)),f(),this._cover.style.display=\"\";};const f=function(){t._cover||(t._cover=document.createElement(\"div\"),t._cover.className=\"gantt_cal_cover\",t._cover.style.display=\"none\",t.event(t._cover,\"mousemove\",t._move_while_dnd),t.event(t._cover,\"mouseup\",t._finish_dnd),(t._lightbox_root||t.$root).appendChild(t._cover));};function y(g){for(var p in this.config.types)if(this.config.types[p]==g)return p;return\"task\";}function v(g,p){var k,x,w=\"\";for(x=0;x<g.length;x++)k=t.config._migrate_buttons[g[x]]?t.config._migrate_buttons[g[x]]:g[x],w+=\"<div \"+t._waiAria.lightboxButtonAttrString(k)+\" class='gantt_btn_set gantt_left_btn_set \"+k+\"_set'><div dhx_button='1' data-dhx-button='1' class='\"+k+\"'></div><div>\"+t.locale.labels[k]+\"</div></div>\";return w;}function b(g){var p,k;return g.time_format?g.time_format:(k=[\"%d\",\"%m\",\"%Y\"],qt((p=t.getScale())?p.unit:t.config.duration_unit)<qt(\"day\")&&k.push(\"%H:%i\"),k);}function m(g,p,k){var x,w,$,T,S,C,E=\"\";switch(k.timeFormat[p]){case\"%Y\":for(g._time_format_order[2]=p,g._time_format_order.size++,g.year_range&&(isNaN(g.year_range)?g.year_range.push&&($=g.year_range[0],T=g.year_range[1]):x=g.year_range),x=x||10,w=w||Math.floor(x/2),$=$||k.date.getFullYear()-w,T=T||t.getState().max_date.getFullYear()+w,S=$;S<=T;S++)E+=\"<option value='\"+S+\"'>\"+S+\"</option>\";break;case\"%m\":for(g._time_format_order[1]=p,g._time_format_order.size++,S=0;S<12;S++)E+=\"<option value='\"+S+\"'>\"+t.locale.date.month_full[S]+\"</option>\";break;case\"%d\":for(g._time_format_order[0]=p,g._time_format_order.size++,S=1;S<32;S++)E+=\"<option value='\"+S+\"'>\"+S+\"</option>\";break;case\"%H:%i\":for(g._time_format_order[3]=p,g._time_format_order.size++,S=k.first,C=k.date.getDate(),g._time_values=[];S<k.last;)E+=\"<option value='\"+S+\"'>\"+t.templates.time_picker(k.date)+\"</option>\",g._time_values.push(S),k.date.setTime(k.date.valueOf()+60*t._get_timepicker_step()*1e3),S=24*(k.date.getDate()!=C?1:0)*60+60*k.date.getHours()+k.date.getMinutes();}return E;}t._init_lightbox_events=function(){t.lightbox_events={},t.lightbox_events.gantt_save_btn=function(){t._save_lightbox();},t.lightbox_events.gantt_delete_btn=function(){t._lightbox_current_type=null,t.callEvent(\"onLightboxDelete\",[t._lightbox_id])&&(t.isTaskExists(t._lightbox_id)?t.$click.buttons.delete(t._lightbox_id):t.hideLightbox());},t.lightbox_events.gantt_cancel_btn=function(){t._cancel_lightbox();},t.lightbox_events.default=function(g,p){if(p.getAttribute(\"data-dhx-button\"))t.callEvent(\"onLightboxButton\",[p.className,p,g]);else{var k,x,w=Q(p);if(w.indexOf(\"gantt_custom_button\")!=-1)if(w.indexOf(\"gantt_custom_button_\")!=-1)for(k=p.parentNode.getAttribute(\"data-index\"),x=p;x&&Q(x).indexOf(\"gantt_cal_lsection\")==-1;)x=x.parentNode;else k=p.getAttribute(\"data-index\"),x=p.closest(\".gantt_cal_lsection\"),p=p.firstChild;var $=t._get_typed_lightbox_config();k&&(k*=1,t.form_blocks[$[1*k].type].button_click(k,p,x,x.nextSibling));}},this.event(t.getLightbox(),\"click\",function(g){g.target.closest(\".gantt_cal_ltitle_close_btn\")&&t._cancel_lightbox();var p=xt(g),k=Q(p);return k||(k=Q(p=p.previousSibling)),p&&k&&k.indexOf(\"gantt_btn_set\")===0&&(k=Q(p=p.firstChild)),!(!p||!k)&&(t.defined(t.lightbox_events[p.className])?t.lightbox_events[p.className]:t.lightbox_events.default)(g,p);}),t.getLightbox().onkeydown=function(g){var p=g||window.event,k=g.target||g.srcElement,x=Q(k).indexOf(\"gantt_btn_set\")>-1;switch((g||p).keyCode){case t.constants.KEY_CODES.SPACE:if((g||p).shiftKey)return;x&&k.click&&k.click();break;case t.keys.edit_save:if((g||p).shiftKey)return;x&&k.click?k.click():t._save_lightbox();break;case t.keys.edit_cancel:t._cancel_lightbox();}};},t._cancel_lightbox=function(){var g=this.getLightboxValues(\"cancel\");t._lightbox_current_type=null,this.callEvent(\"onLightboxCancel\",[this._lightbox_id,g.$new]),t.isTaskExists(g.id)&&g.$new&&(this.silent(function(){t.$data.tasksStore.removeItem(g.id),t._update_flags(g.id,null);}),this.refreshData()),this.hideLightbox();},t._save_lightbox=function(){var g=this.getLightboxValues(\"save\");t._lightbox_current_type=null,this.callEvent(\"onLightboxSave\",[this._lightbox_id,g,!!g.$new])&&(t.$data.tasksStore._skipTaskRecalculation=\"lightbox\",g.$new?(delete g.$new,this.addTask(g,g.parent,this.getTaskIndex(g.id))):this.isTaskExists(g.id)&&(this.mixin(this.getTask(g.id),g,!0),this.refreshTask(g.id),this.updateTask(g.id)),t.$data.tasksStore._skipTaskRecalculation=!1,this.refreshData(),this.hideLightbox());},t._resolve_default_mapping=function(g){var p=g.map_to;return{time:!0,time_optional:!0,duration:!0,duration_optional:!0}[g.type]?g.map_to==\"auto\"?p={start_date:\"start_date\",end_date:\"end_date\",duration:\"duration\"}:typeof g.map_to==\"string\"&&(p={start_date:g.map_to}):g.type===\"constraint\"&&(g.map_to&&typeof g.map_to!=\"string\"||(p={constraint_type:\"constraint_type\",constraint_date:\"constraint_date\"})),p;},t.getLightboxValues=function(g){let p={};t.isTaskExists(this._lightbox_id)&&(p=this.mixin({},this.getTask(this._lightbox_id)));const k=[...this._get_typed_lightbox_config()].sort((x,w)=>x.name===\"time\"?1:w.name===\"time\"?-1:0);for(let x=0;x<k.length;x++){let w=t._lightbox_root.querySelector(\"#\"+k[x].id);w=w&&w.nextSibling;let $=this.form_blocks[k[x].type];if(!$)continue;let T=$.get_value.call(this,w,p,k[x],g),S=t._resolve_default_mapping(k[x]);if(typeof S==\"string\"&&S!=\"auto\")p[S]=T;else if(typeof S==\"object\")for(let C in S)S[C]&&(p[S[C]]=T[C]);}return t._lightbox_current_type&&(p.type=t._lightbox_current_type),p;},t.hideLightbox=function(){var g=this.getLightbox();g&&(g.style.display=\"none\"),this._waiAria.lightboxHiddenAttr(g),this._lightbox_id=null,this.hideCover(g),this.resetLightbox(),this.callEvent(\"onAfterLightbox\",[]);},t.hideCover=function(g){g&&(g.style.display=\"none\"),this._cover&&this._cover.parentNode.removeChild(this._cover),this._cover=null;},t.resetLightbox=function(){t._lightbox&&!t._custom_lightbox&&t._lightbox.remove(),t._lightbox=null;},t._set_lightbox_values=function(g,p){var k=g,x=p.getElementsByTagName(\"span\"),w=[];t.templates.lightbox_header?(w.push(\"\"),w.push(t.templates.lightbox_header(k.start_date,k.end_date,k)),x[1].innerHTML=\"\",x[2].innerHTML=t.templates.lightbox_header(k.start_date,k.end_date,k)):(w.push(this.templates.task_time(k.start_date,k.end_date,k)),w.push(String(this.templates.task_text(k.start_date,k.end_date,k)||\"\").substr(0,70)),x[1].innerHTML=this.templates.task_time(k.start_date,k.end_date,k),x[2].innerHTML=String(this.templates.task_text(k.start_date,k.end_date,k)||\"\").substr(0,70)),x[1].innerHTML=w[0],x[2].innerHTML=w[1],t._waiAria.lightboxHeader(p,w.join(\" \"));for(var $=this._get_typed_lightbox_config(this.getLightboxType()),T=0;T<$.length;T++){var S=$[T];if(this.form_blocks[S.type]){var C=t._lightbox_root.querySelector(\"#\"+S.id).nextSibling,E=this.form_blocks[S.type],D=t._resolve_default_mapping($[T]),A=this.defined(k[D])?k[D]:S.default_value;E.set_value.call(t,C,A,k,S),S.focus&&E.focus.call(t,C);}}t.isTaskExists(g.id)&&(t._lightbox_id=g.id);},t._fill_lightbox=function(g,p){var k=this.getTask(g);this._set_lightbox_values(k,p);},t.getLightboxSection=function(g){for(var p=this._get_typed_lightbox_config(),k=0;k<p.length&&p[k].name!=g;k++);var x=p[k];if(!x)return null;this._lightbox||this.getLightbox();var w=t._lightbox_root.querySelector(\"#\"+x.id),$=w.nextSibling,T={section:x,header:w,node:$,getValue:function(C){return t.form_blocks[x.type].get_value.call(t,$,C||{},x);},setValue:function(C,E){return t.form_blocks[x.type].set_value.call(t,$,C,E||{},x);}},S=this._lightbox_methods[\"get_\"+x.type+\"_control\"];return S?S(T):T;},t._lightbox_methods.get_template_control=function(g){return g.control=g.node,g;},t._lightbox_methods.get_select_control=function(g){return g.control=g.node.getElementsByTagName(\"select\")[0],g;},t._lightbox_methods.get_textarea_control=function(g){return g.control=g.node.getElementsByTagName(\"textarea\")[0],g;},t._lightbox_methods.get_time_control=function(g){return g.control=g.node.getElementsByTagName(\"select\"),g;},t._init_dnd_events=function(){var g=t._lightbox_root;this.event(g,\"mousemove\",t._move_while_dnd),this.event(g,\"mouseup\",t._finish_dnd),this.event(g,\"touchmove\",function(p){t._move_while_dnd(p.touches[0]);}),this.event(g,\"touchend\",function(p){t._finish_dnd(p.touches[0]);});},t._move_while_dnd=function(g){if(t._dnd_start_lb){document.gantt_unselectable||(t._lightbox_root.className+=\" gantt_unselectable\",document.gantt_unselectable=!0);var p=t.getLightbox(),k=[g.pageX,g.pageY];p.style.top=t._lb_start[1]+k[1]-t._dnd_start_lb[1]+\"px\",p.style.left=t._lb_start[0]+k[0]-t._dnd_start_lb[0]+\"px\";}},t._ready_to_dnd=function(g){var p=t.getLightbox();t._lb_start=[p.offsetLeft,p.offsetTop],t._dnd_start_lb=[g.pageX,g.pageY];},t._finish_dnd=function(){t._lb_start&&(t._lb_start=t._dnd_start_lb=!1,t._lightbox_root.className=t._lightbox_root.className.replace(\" gantt_unselectable\",\"\"),document.gantt_unselectable=!1);},t._focus=function(g,p){if(g&&g.focus&&!t.config.touch)try{p&&g.select&&g.select(),g.focus();}catch{}},t.form_blocks={getTimePicker:function(g,p){var k,x,w,$=\"\",T=this.config,S={first:0,last:1440,date:this.date.date_part(new Date(t._min_date.valueOf())),timeFormat:b(g)};for(g._time_format_order={size:0},t.config.limit_time_select&&(S.first=60*T.first_hour,S.last=60*T.last_hour+1,S.date.setHours(T.first_hour)),k=0;k<S.timeFormat.length;k++)k>0&&($+=\" \"),(x=m(g,k,S))&&(w=t._waiAria.lightboxSelectAttrString(S.timeFormat[k]),$+=\"<select \"+(g.readonly?\"disabled='disabled'\":\"\")+(p?\" style='display:none' \":\"\")+w+\">\"+x+\"</select>\");return $;},getTimePickerValue:function(g,p,k){var x,w=p._time_format_order,$=0,T=0,S=k||0;return t.defined(w[3])&&(x=parseInt(g[w[3]+S].value,10),$=Math.floor(x/60),T=x%60),new Date(g[w[2]+S].value,g[w[1]+S].value,g[w[0]+S].value,$,T);},_fill_lightbox_select:function(g,p,k,x){if(g[p+x[0]].value=k.getDate(),g[p+x[1]].value=k.getMonth(),g[p+x[2]].value=k.getFullYear(),t.defined(x[3])){var w=60*k.getHours()+k.getMinutes();w=Math.round(w/t._get_timepicker_step())*t._get_timepicker_step();var $=g[p+x[3]];$.value=w,$.setAttribute(\"data-value\",w);}},template:new n(),textarea:new e(),select:new a(),time:new i(),duration:new o(),parent:new l(),radio:new r(),checkbox:new s(),resources:new d(),constraint:new c(),baselines:new h(),typeselect:new u(),resource_selector:new _()},t._is_lightbox_timepicker=function(){for(var g=this._get_typed_lightbox_config(),p=0;p<g.length;p++)if(g[p].name==\"time\"&&g[p].type==\"time\")return!0;return!1;},t._delete_task_confirm=function({task:g,message:p,title:k,callback:x,ok:w}){t._simple_confirm(p,k,x,w);},t._delete_link_confirm=function({link:g,message:p,title:k,callback:x,ok:w}){t._simple_confirm(p,k,x,w);},t._simple_confirm=function(g,p,k,x){if(!g)return k();var w={text:g};p&&(w.title=p),x&&(w.ok=x),k&&(w.callback=function($){$&&k();}),t.confirm(w);},t._get_typed_lightbox_config=function(g){g===void 0&&(g=this.getLightboxType());var p=y.call(this,g);return t.config.lightbox[p+\"_sections\"]?t.config.lightbox[p+\"_sections\"]:t.config.lightbox.sections;},t._silent_redraw_lightbox=function(g){var p=this.getLightboxType();if(this.getState().lightbox){var k=this.getState().lightbox,x=this.getLightboxValues(),w=this.copy(this.getTask(k));this.resetLightbox();var $=this.mixin(w,x,!0),T=this.getLightbox(g||void 0);this._set_lightbox_values($,T),this.showCover(T);}else this.resetLightbox(),this.getLightbox(g||void 0);this.callEvent(\"onLightboxChange\",[p,this.getLightboxType()]);};}function rs(t){if(!kt.isNode){t.utils={arrayFind:On,dom:ln};var n=ae();t.event=n.attach,t.eventRemove=n.detach,t._eventRemoveAll=n.detachAll,t._createDomEventScope=n.extend,R(t,ga(t));var e=Xa.init(t);t.$ui=e.factory,t.$ui.layers=e.render,t.$mouseEvents=e.mouseEvents,t.$services.setService(\"mouseEvents\",function(){return t.$mouseEvents;}),t.mixin(t,e.layersApi),function(i){delete i.addTaskLayer,delete i.addLinkLayer;}(t),t.$services.setService(\"layers\",function(){return e.layersService;}),t.mixin(t,/* @__PURE__ */function(){function i(u){return u.$ui.getView(\"timeline\");}function a(u){return u.$ui.getView(\"grid\");}function s(u){var h=i(u);if(h&&!h.$config.hidden)return h;var _=a(u);return _&&!_.$config.hidden?_:null;}function r(u){var h=null,_=!1;return[\".gantt_drag_marker.gantt_grid_resize_area\",\".gantt_drag_marker .gantt_row.gantt_row_task\",\".gantt_drag_marker.gantt_grid_dnd_marker\"].forEach(function(f){_=_||!!document.querySelector(f);}),(h=_?a(u):s(u))?l(u,h,\"scrollY\"):null;}function o(u){var h=s(u);return h&&h.id!=\"grid\"?l(u,h,\"scrollX\"):null;}function l(u,h,_){var f=h.$config[_];return u.$ui.getView(f);}var d=\"DEFAULT_VALUE\";function c(u,h,_,f){var y=u(this);return y&&y.isVisible()?y[h].apply(y,_):f?f():d;}return{getColumnIndex:function(u){var h=c.call(this,a,\"getColumnIndex\",[u]);return h===d?0:h;},dateFromPos:function(u){var h=c.call(this,i,\"dateFromPos\",Array.prototype.slice.call(arguments));return h===d?this.getState().min_date:h;},posFromDate:function(u){var h=c.call(this,i,\"posFromDate\",Array.prototype.slice.call(arguments));return h===d?0:h;},getRowTop:function(u){var h=this,_=c.call(h,i,\"getRowTop\",[u],function(){return c.call(h,a,\"getRowTop\",[u]);});return _===d?0:_;},getTaskTop:function(u){var h=this,_=c.call(h,i,\"getItemTop\",[u],function(){return c.call(h,a,\"getItemTop\",[u]);});return _===d?0:_;},getTaskPosition:function(u,h,_){var f=c.call(this,i,\"getItemPosition\",[u,h,_]);return f===d?{left:0,top:this.getTaskTop(u.id),height:this.getTaskBarHeight(u.id),width:0}:f;},getTaskBarHeight:function(u,h){var _=this,f=c.call(_,i,\"getBarHeight\",[u,h],function(){return c.call(_,a,\"getItemHeight\",[u]);});return f===d?0:f;},getTaskHeight:function(u){var h=this,_=c.call(h,i,\"getItemHeight\",[u],function(){return c.call(h,a,\"getItemHeight\",[u]);});return _===d?0:_;},columnIndexByDate:function(u){var h=c.call(this,i,\"columnIndexByDate\",[u]);return h===d?0:h;},roundTaskDates:function(){c.call(this,i,\"roundTaskDates\",[]);},getScale:function(){var u=c.call(this,i,\"getScale\",[]);return u===d?null:u;},getTaskNode:function(u){var h=i(this);if(h&&h.isVisible()){var _=h._taskRenderer.rendered[u];if(!_){var f=h.$config.item_attribute;_=h.$task_bars.querySelector(\"[\"+f+\"='\"+u+\"']\");}return _||null;}return null;},getLinkNode:function(u){var h=i(this);return h.isVisible()?h._linkRenderer.rendered[u]:null;},scrollTo:function(u,h){var _=r(this),f=o(this),y={position:0},v={position:0};_&&(v=_.getScrollState()),f&&(y=f.getScrollState());var b=f&&1*u==u,m=_&&1*h==h;if(b&&m)for(var g=_._getLinkedViews(),p=f._getLinkedViews(),k=[],x=0;x<g.length;x++)for(var w=0;w<p.length;w++)g[x].$config.id&&p[w].$config.id&&g[x].$config.id===p[w].$config.id&&k.push(g[x].$config.id);b&&(k&&k.forEach(function(S){this.$ui.getView(S).$config.$skipSmartRenderOnScroll=!0;}.bind(this)),f.scroll(u),k&&k.forEach(function(S){this.$ui.getView(S).$config.$skipSmartRenderOnScroll=!1;}.bind(this))),m&&_.scroll(h);var $={position:0},T={position:0};_&&($=_.getScrollState()),f&&(T=f.getScrollState()),this.callEvent(\"onGanttScroll\",[y.position,v.position,T.position,$.position]);},showDate:function(u){var h=this.posFromDate(u),_=Math.max(h-this.config.task_scroll_offset,0);this.scrollTo(_);},showTask:function(u){var h=this.getTaskPosition(this.getTask(u)),_=h.left;this.config.rtl&&(_=h.left+h.width);var f,y=Math.max(_-this.config.task_scroll_offset,0),v=this._scroll_state().y;f=v?h.top-(v-this.getTaskBarHeight(u))/2:h.top,this.scrollTo(y,f);var b=a(this),m=i(this);b&&m&&b.$config.scrollY!=m.$config.scrollY&&l(this,b,\"scrollY\").scrollTo(null,f);},_scroll_state:function(){var u={x:!1,y:!1,x_pos:0,y_pos:0,scroll_size:this.config.scroll_size+1,x_inner:0,y_inner:0},h=r(this),_=o(this);if(_){var f=_.getScrollState();f.visible&&(u.x=f.size,u.x_inner=f.scrollSize),u.x_pos=f.position||0;}if(h){var y=h.getScrollState();y.visible&&(u.y=y.size,u.y_inner=y.scrollSize),u.y_pos=y.position||0;}return u;},getScrollState:function(){var u=this._scroll_state();return{x:u.x_pos,y:u.y_pos,inner_width:u.x,inner_height:u.y,width:u.x_inner,height:u.y_inner};},getLayoutView:function(u){return this.$ui.getView(u);},scrollLayoutCell:function(u,h,_){const f=this.$ui.getView(u);if(!f)return!1;if(h!==null){const y=this.$ui.getView(f.$config.scrollX);y&&y.scrollTo(h,null);}if(_!==null){const y=this.$ui.getView(f.$config.scrollY);y&&y.scrollTo(null,_);}}};}()),function(i){i.resetSkin||(i.resetSkin=function(){this.skin=\"\",pe(!0,this);},i.skins={},i.attachEvent(\"onGanttLayoutReady\",function(){pe(!1,this),s();})),i._addThemeClass=function(){document.documentElement.setAttribute(\"data-gantt-theme\",i.skin);},i.setSkin=function(r){const o=this.skin!==r;this.skin=r,i._addThemeClass(),s(),i.$root&&(pe(!o,i),this.render());};let a=null;function s(){const r=i.$root;a&&clearInterval(a),r&&(a=setInterval(()=>{const o=getComputedStyle(r).getPropertyValue(\"--dhx-gantt-theme\");o&&o!==i.skin&&i.setSkin(o);},100));}i.attachEvent(\"onDestroy\",function(){clearInterval(a);});}(t),function(i){i.skins.skyblue={config:{grid_width:370,row_height:27,bar_height_padding:4,scale_height:27,link_line_width:1,link_arrow_size:8,link_radius:2,lightbox_additional_height:75},_second_column_width:95,_third_column_width:80};}(t),function(i){i.skins.dark={config:{grid_width:390,row_height:36,scale_height:36,link_line_width:2,link_arrow_size:12,bar_height_padding:9,lightbox_additional_height:75},_second_column_width:100,_third_column_width:70};}(t),function(i){i.skins.meadow={config:{grid_width:380,row_height:27,scale_height:30,link_line_width:2,link_arrow_size:10,bar_height_padding:4,lightbox_additional_height:72},_second_column_width:95,_third_column_width:80};}(t),function(i){i.skins.terrace={config:{grid_width:390,row_height:36,scale_height:36,link_line_width:2,link_arrow_size:12,bar_height_padding:9,lightbox_additional_height:75},_second_column_width:100,_third_column_width:70};}(t),function(i){i.skins.broadway={config:{grid_width:390,row_height:35,scale_height:35,link_line_width:1,link_arrow_size:9,bar_height_padding:4,lightbox_additional_height:86},_second_column_width:100,_third_column_width:80,_lightbox_template:\"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span><div class='gantt_cancel_btn'></div></div><div class='gantt_cal_larea'></div>\",_config_buttons_left:{},_config_buttons_right:{gantt_delete_btn:\"icon_delete\",gantt_save_btn:\"icon_save\"}};}(t),function(i){i.skins.material={config:{grid_width:411,row_height:34,scale_height:36,link_line_width:2,link_arrow_size:12,bar_height_padding:9,lightbox_additional_height:80},_second_column_width:110,_third_column_width:75,_redefine_lightbox_buttons:{buttons_left:[\"dhx_delete_btn\"],buttons_right:[\"dhx_cancel_btn\",\"dhx_save_btn\"]}},i.attachEvent(\"onAfterTaskDrag\",function(a){var s=i.getTaskNode(a);s&&(s.className+=\" gantt_drag_animation\",setTimeout(function(){var r=s.className.indexOf(\" gantt_drag_animation\");r>-1&&(s.className=s.className.slice(0,r));},200));});}(t),function(i){i.skins.contrast_black={config:{grid_width:390,row_height:35,scale_height:35,link_line_width:2,link_arrow_size:12,lightbox_additional_height:75},_second_column_width:100,_third_column_width:80};}(t),function(i){i.skins.contrast_white={config:{grid_width:390,row_height:35,scale_height:35,link_line_width:2,link_arrow_size:12,lightbox_additional_height:75},_second_column_width:100,_third_column_width:80};}(t),function(i){i.ext||(i.ext={});for(var a=[Za,null,null],s=0;s<a.length;s++)a[s]&&a[s](i);i.ext.zoom=new es(i);}(t),ns(t),ss(t),function(i){i._extend_to_optional=function(a){var s=a,r={render:s.render,focus:s.focus,set_value:function(o,l,d,c){var u=i._resolve_default_mapping(c);if(!d[u.start_date]||u.start_date==\"start_date\"&&this._isAllowedUnscheduledTask(d)){r.disable(o,c);var h={};for(var _ in u)h[u[_]]=d[_];return s.set_value.call(i,o,l,h,c);}return r.enable(o,c),s.set_value.call(i,o,l,d,c);},get_value:function(o,l,d){return d.disabled?{start_date:null}:s.get_value.call(i,o,l,d);},update_block:function(o,l){if(i.callEvent(\"onSectionToggle\",[i._lightbox_id,l]),o.style.display=l.disabled?\"none\":\"\",l.button){var d=o.previousSibling.querySelector(\".gantt_custom_button_label\"),c=i.locale.labels,u=l.disabled?c[l.name+\"_enable_button\"]:c[l.name+\"_disable_button\"];d.innerHTML=u;}},disable:function(o,l){l.disabled=!0,r.update_block(o,l);},enable:function(o,l){l.disabled=!1,r.update_block(o,l);},button_click:function(o,l,d,c){if(i.callEvent(\"onSectionButton\",[i._lightbox_id,d])!==!1){var u=i._get_typed_lightbox_config()[o];u.disabled?r.enable(c,u):r.disable(c,u);}}};return r;},i.form_blocks.duration_optional=i._extend_to_optional(i.form_blocks.duration),i.form_blocks.time_optional=i._extend_to_optional(i.form_blocks.time);}(t),function(i){var a=new RegExp(`<(?:.|\n)*?>`,\"gm\"),s=new RegExp(\" +\",\"gm\");function r(c){return(c+\"\").replace(a,\" \").replace(s,\" \");}var o=new RegExp(\"'\",\"gm\");function l(c){return(c+\"\").replace(o,\"&#39;\");}for(var d in i._waiAria={getAttributeString:function(c){var u=[\" \"];for(var h in c){var _=l(r(c[h]));u.push(h+\"='\"+_+\"'\");}return u.push(\" \"),u.join(\" \");},getTimelineCellAttr:function(c){return i._waiAria.getAttributeString({\"aria-label\":c});},_taskCommonAttr:function(c,u){c.start_date&&c.end_date&&(u.setAttribute(\"aria-label\",r(i.templates.tooltip_text(c.start_date,c.end_date,c))),c.$dataprocessor_class&&u.setAttribute(\"aria-busy\",!0));},setTaskBarAttr:function(c,u){this._taskCommonAttr(c,u),u.setAttribute(\"role\",\"img\"),!i.isReadonly(c)&&i.config.drag_move&&(c.id!=i.getState(\"tasksDnd\").drag_id?u.setAttribute(\"aria-grabbed\",!1):u.setAttribute(\"aria-grabbed\",!0));},taskRowAttr:function(c,u){this._taskCommonAttr(c,u),!i.isReadonly(c)&&i.config.order_branch&&u.setAttribute(\"aria-grabbed\",!1),u.setAttribute(\"role\",\"row\"),u.setAttribute(\"aria-selected\",i.isSelectedTask(c.id)?\"true\":\"false\"),u.setAttribute(\"aria-level\",c.$level+1||1),i.hasChild(c.id)&&u.setAttribute(\"aria-expanded\",c.$open?\"true\":\"false\");},linkAttr:function(c,u){var h=i.config.links,_=c.type==h.finish_to_start||c.type==h.start_to_start,f=c.type==h.start_to_start||c.type==h.start_to_finish,y=i.locale.labels.link+\" \"+i.templates.drag_link(c.source,f,c.target,_);u.setAttribute(\"role\",\"img\"),u.setAttribute(\"aria-label\",r(y));},gridSeparatorAttr:function(c){c.setAttribute(\"role\",\"columnheader\");},rowResizerAttr:function(c){c.setAttribute(\"role\",\"row\");},lightboxHiddenAttr:function(c){c.setAttribute(\"aria-hidden\",\"true\");},lightboxVisibleAttr:function(c){c.setAttribute(\"aria-hidden\",\"false\");},lightboxAttr:function(c){c.setAttribute(\"role\",\"dialog\"),c.setAttribute(\"aria-hidden\",\"true\"),c.firstChild.setAttribute(\"role\",\"heading\"),c.firstChild.setAttribute(\"aria-level\",\"1\");},lightboxButtonAttrString:function(c){return this.getAttributeString({role:\"button\",\"aria-label\":i.locale.labels[c],tabindex:\"0\"});},lightboxHeader:function(c,u){c.setAttribute(\"aria-label\",u);},lightboxSelectAttrString:function(c){var u=\"\";switch(c){case\"%Y\":u=i.locale.labels.years;break;case\"%m\":u=i.locale.labels.months;break;case\"%d\":u=i.locale.labels.days;break;case\"%H:%i\":u=i.locale.labels.hours+i.locale.labels.minutes;}return i._waiAria.getAttributeString({\"aria-label\":u});},lightboxDurationInputAttrString:function(c){return this.getAttributeString({\"aria-label\":i.locale.labels.column_duration,\"aria-valuemin\":\"0\",role:\"spinbutton\"});},inlineEditorAttr:function(c){c.setAttribute(\"role\",\"row\");},gridAttrString:function(){return[\" role='treegrid'\",i.config.multiselect?\"aria-multiselectable='true'\":\"aria-multiselectable='false'\",\" \"].join(\" \");},gridScaleRowAttrString:function(){return\"role='row'\";},gridScaleCellAttrString:function(c,u){var h=\"\";if(c.name==\"add\")h=this.getAttributeString({role:\"columnheader\",\"aria-label\":i.locale.labels.new_task});else{var _={role:\"columnheader\",\"aria-label\":i.config.external_render&&i.config.external_render.isElement(u)?\"\":u};i._sort&&i._sort.name==c.name&&(i._sort.direction==\"asc\"?_[\"aria-sort\"]=\"ascending\":_[\"aria-sort\"]=\"descending\"),h=this.getAttributeString(_);}return h;},gridDataAttrString:function(){return\"role='rowgroup'\";},reorderMarkerAttr:function(c){c.setAttribute(\"role\",\"grid\"),c.firstChild.removeAttribute(\"aria-level\"),c.firstChild.setAttribute(\"aria-grabbed\",\"true\");},gridCellAttrString:function(c,u,h){var _={role:\"gridcell\",\"aria-label\":u};return c.editor&&!i.isReadonly(h)||(_[\"aria-readonly\"]=!0),this.getAttributeString(_);},gridAddButtonAttrString:function(c){return this.getAttributeString({role:\"button\",\"aria-label\":i.locale.labels.new_task});},messageButtonAttrString:function(c){return\"tabindex='0' role='button' aria-label='\"+c+\"'\";},messageInfoAttr:function(c){c.setAttribute(\"role\",\"alert\");},messageModalAttr:function(c,u){c.setAttribute(\"role\",\"dialog\"),u&&c.setAttribute(\"aria-labelledby\",u);},quickInfoAttr:function(c){c.setAttribute(\"role\",\"dialog\");},quickInfoHeaderAttrString:function(){return\" role='heading' aria-level='1' \";},quickInfoHeader:function(c,u){c.setAttribute(\"aria-label\",u);},quickInfoButtonAttrString:function(c){return i._waiAria.getAttributeString({role:\"button\",\"aria-label\":c,tabindex:\"0\"});},tooltipAttr:function(c){c.setAttribute(\"role\",\"tooltip\");},tooltipVisibleAttr:function(c){c.setAttribute(\"aria-hidden\",\"false\");},tooltipHiddenAttr:function(c){c.setAttribute(\"aria-hidden\",\"true\");}},i._waiAria)i._waiAria[d]=/* @__PURE__ */function(c){return function(){return i.config.wai_aria_attributes?c.apply(this,arguments):\"\";};}(i._waiAria[d]);}(t),t.locate=function(i){var a=xt(i);if(ht(a,\".gantt_task_row\"))return null;var s=arguments[1]||this.config.task_attribute,r=it(a,s);return r?r.getAttribute(s):null;},t._locate_css=function(i,a,s){return vt(i,a,s);},t._locateHTML=function(i,a){return it(i,a||this.config.task_attribute);};}t.attachEvent(\"onParse\",function(){G(t)||t.attachEvent(\"onGanttRender\",function(){if(t.config.initial_scroll){var i=t.getTaskByIndex(0),a=i?i.id:t.config.root_id;t.isTaskExists(a)&&t.$task&&t.utils.dom.isChildOf(t.$task,t.$container)&&t.showTask(a);}},{once:!0});}),t.attachEvent(\"onBeforeGanttReady\",function(){this.config.scroll_size||(this.config.scroll_size=tn()||15),G(t)||(this._eventRemoveAll(),this.$mouseEvents.reset(),this.resetLightbox());}),t.attachEvent(\"onGanttReady\",function(){!G(t)&&t.config.rtl&&t.$layout.getCellsByType(\"viewCell\").forEach(function(i){var a=i.$config.scrollX;if(a){var s=t.$ui.getView(a);s&&s.scrollTo(s.$config.scrollSize,0);}});}),t.attachEvent(\"onGanttReady\",function(){if(!G(t)){var i=t.plugins(),a={auto_scheduling:t.autoSchedule,click_drag:t.ext.clickDrag,critical_path:t.isCriticalTask,drag_timeline:t.ext.dragTimeline,export_api:t.exportToPDF,fullscreen:t.ext.fullscreen,grouping:t.groupBy,keyboard_navigation:t.ext.keyboardNavigation,marker:t.addMarker,multiselect:t.eachSelectedTask,overlay:t.ext.overlay,quick_info:t.templates.quick_info_content,tooltip:t.ext.tooltips,undo:t.undo};for(let s in a)a[s]&&!i[s]&&console.warn(`You connected the '${s}' extension via an obsolete file. \nTo fix it, you need to remove the obsolete file and connect the extension via the plugins method: https://docs.dhtmlx.com/gantt/api__gantt_plugins.html`);}});}const os=tt.gantt=function(t){var n=_a(t);return n.env.isNode||(rs(n),function(e){e.load=function(i,a,s){this._load_url=i,this.assert(arguments.length,\"Invalid load arguments\");var r=\"json\",o=null;return arguments.length>=3?(r=a,o=s):typeof arguments[1]==\"string\"?r=arguments[1]:typeof arguments[1]==\"function\"&&(o=arguments[1]),this._load_type=r,this.callEvent(\"onLoadStart\",[i,r]),this.ajax.get(i,e.bind(function(l){this.on_load(l,r),this.callEvent(\"onLoadEnd\",[i,r]),typeof o==\"function\"&&o.call(this);},this));};}(n)),n;}(Yn);export{os as default,os as gantt};","map":{"version":3,"names":["Y","t","n","e","i","a","getBoundingClientRect","s","r","document","body","o","documentElement","parentNode","l","window","pageYOffset","scrollTop","d","pageXOffset","scrollLeft","c","clientTop","u","clientLeft","top","left","offsetWidth","right","offsetHeight","bottom","parseInt","offsetTop","offsetLeft","offsetParent","y","Math","round","x","width","height","Nn","getComputedStyle","display","visibility","currentStyle","Ln","isNaN","getAttribute","Rn","area","nodeName","loLowerCase","Pn","input","select","textarea","button","object","toLowerCase","hasAttribute","Pt","querySelectorAll","join","Array","prototype","slice","call","length","$position","sort","tabIndex","splice","tn","createElement","style","cssText","appendChild","clientWidth","removeChild","max","Q","className","baseVal","indexOf","ke","Ct","Jt","split","RegExp","replace","De","getElementById","querySelector","jt","en","innerHTML","firstChild","nn","an","childNodes","push","xt","tagName","event","target","srcElement","shadowRoot","composedPath","it","host","String","trim","apply","vt","charAt","rt","clientX","clientY","touches","sn","K","ht","closest","matches","msMatchesSelector","webkitMatchesSelector","contains","parentElement","nodeType","console","error","rn","on","head","createShadowRoot","attachShadow","ye","activeElement","getSelection","focusNode","yt","ShadowRoot","hasClass","classList","test","hasShadowParent","insertNode","isChildOf","isShadowDomSupported","locateAttribute","locateClassName","removeClassName","removeNode","toNode","Symbol","toStringTag","value","tt","global","Hn","constructor","_mouseDown","_touchStarts","_touchActive","_longTapTimer","_gantt","_domEvents","_createDomEventScope","attach","getViewPort","_originPosition","_restoreOriginPosition","position","$services","getService","registerProvider","autoscroll","startDragAndDrop","setStart","copy","setPosition","setEnd","f","$root","changedTouches","h","_","setTimeout","config","touch_drag","clearTimeout","utils","dom","preventDefault","getFilterTargets","_getCoordinates","dragEnd","ext","clickDrag","v","drag_timeline","useKey","b","abs","relative","render","detach","detachAll","unregisterProvider","destructor","absolute","dn","EventHost","_silent_mode","listeners","_silentStart","_silentEnd","lt","attachEvent","eventStorage","arguments","addEvent","id","once","handler","removeEvent","clear","thisObject","bind","attachAll","callEvent","ev_listen_all","concat","checkEvent","detachEvent","detachAllEvents","Me","second","minute","hour","day","week","month","quarter","year","qt","bt","forEach","On","find","Wt","includes","be","isArray","pop","et","getFullYear","getMonth","getDate","$t","getTime","xe","result","$cancelTimeout","$pending","$execute","st","Ne","Tt","floor","Bn","_el","defaultRender","min","_singleRow","_getTaskPositionByTop","_startPoint","_view","_viewPort","viewPort","add","callback","_callback","_endPoint","draw","singleRow","_useRequestAnimationFrame","useRequestAnimationFrame","requestAnimationFrame","getElement","_startDate","dateFromPos","_endDate","_positionPoint","getState","max_date","valueOf","getTaskByTime","_getTasksByTop","getInBounds","index","getTaskByIndex","getItemIndexByTopPosition","getItemHeight","getItemTop","getTotalHeight","row_height","getTaskCount","se","Kt","_calculateDirectionVector","_trace","magnitude","sqrt","angleDegrees","atan2","PI","_applyDndReadyStyles","_timeline","$task","_clearDndReadyStyles","remove","_getScrollPosition","$ui","getView","$config","scrollX","getScrollState","scrollY","_countNewScrollPosition","_scrollState","_setScrollPosition","scrollLayoutCell","$id","_stopDrag","_originalReadonly","readonly","_originAutoscroll","_startDrag","create","_isDragInProgress","ignore","enabled","click_drag","re","zn","toString","X","Date","Object","$$typeof","hasOwnProperty","R","q","ot","B","cn","addEventListener","un","removeEventListener","Xt","date","getSum","setSumWidth","adjustSize","full_width","splitSize","sortScales","unit","step","_prepareScaleObject","format","template","date_to_str","css","projection","column_width","primaryScale","scales","templates","scale_cell_class","getAdditionalScales","map","prepareConfigs","initScaleConfig","processIgnores","display_count","count","initColSizes","limitVisibleRange","unshift","alineScaleColumns","reverseScale","setPosSettings","reverse","trace_x","trace_indexes","trace_index_transition","rtl","_ignore_time_config","skip_off_time","isWorkTime","ignore_x","col_width","min_date","eachColumn","trace_x_ascending","iterateScales","getTimezoneOffset","_correct_dst_change","Wn","$destroyed","focus","eventRemove","currentTarget","$keyboardNavigation","trapFocus","getLightbox","getActiveElement","isModal","Fn","show","_showForTask","_showAtCoordinates","hide","_quickInfoBox","_quickInfoBoxId","_quickInfoTask","quick_info_detached","getNode","setContainer","_container","setContent","taskId","header","title","content","buttons","quickinfo_buttons","_createQuickInfoElement","_waiAria","quickInfoHeader","quickInfoButtonAttrString","locale","labels","_qiButtonClickHandler","_qiKeyPressHandler","_qi_button_click","which","_appendAtCoordinates","show_quick_info","_getContainer","_get_event_counter_part","xViewport","yViewport","_init_quick_info","_prepare_quick_info_classname","_fill_quick_data","_show_quick_info","getTaskNode","getTaskRowNode","dx","dy","quickInfoAttr","quickInfoHeaderAttrString","parent","getTask","_quickInfoReadonly","isReadonly","getTaskType","quick_info_class","start_date","end_date","icon_delete","icon_edit","quick_info_title","quick_info_date","quick_info_content","$click","$task_data","$grid_data","$grid","$layout","ae","element","capture","extend","Vn","_tooltipNode","tooltipAttr","setViewport","_root","_isLikeMouseEvent","_calculateTooltipPosition","tooltipVisibleAttr","tooltipHiddenAttr","_getViewPort","_getViewPortSize","tooltip_offset_x","tooltip_offset_y","Un","_listeners","tooltip","_initDelayedFunctions","hideTooltip","delayHide","selector","doOnMouseEnter","onmouseenter","onmousemove","onmouseleave","node","tooltipFor","createEventObject","createEvent","html","delayShow","tooltip_timeout","tooltip_hide_timeout","Le","onBeforeUndo","onBeforeRedo","Re","qn","_batchAction","_batchMode","_ignore","_ignoreMoveEvents","_initialTasks","_initialLinks","_nestedTasks","_nestedLinks","_undo","_attachEvents","store","undo_types","task","_storeTask","link","_storeLink","isMoveEventsIgnored","toggleIgnoreMoveEvents","startIgnore","stopIgnore","startBatchAction","_timeout","stopBatchAction","action","logAction","onTaskAdded","_storeTaskCommand","command","type","onTaskUpdated","update","onTaskMoved","$local_index","getTaskIndex","_storeEntityCommand","getInitialTask","move","entity","onTaskDeleted","_storeLinkCommand","onLinkAdded","onLinkUpdated","onLinkDeleted","setNestedTasks","_getLinks","setInitialTask","setInitialLink","$index","getGlobalTaskIndex","setInitialTaskObject","clearInitialTasks","getLink","getInitialLink","clearInitialLinks","saveInitialAll","eachTask","getLinks","clearUndoStack","clearRedoStack","getDatastore","drag_id","isSummaryTask","drag_project","plugins","multiselect","getSelectedTasks","inlineEditors","$data","tempAssignmentsStore","_lightbox_id","_storeCommand","updateConfigs","undoEnabled","commands","isTaskExists","$source","$target","Gn","maxSteps","redoEnabled","invert","oldValue","inverseCommands","assert","_undoStack","_redoStack","getUndoStack","setUndoStack","getRedoStack","setRedoStack","undo_steps","undo_actions","undo","redo","_pop","_reorderCommands","_applyAction","_push","shift","any","get","isExists","batchUpdate","startsWith","Yn","$container","dragTimeline","fullscreen","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","overflow","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","zIndex","modified","getFullscreenElement","originalPositioning","warning","log","expand","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","msRequestFullscreen","mozRequestFullScreen","requestFullscreen","collapse","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","exitFullscreen","toggle","keyboard_navigation","keyboard_navigation_cells","_compose","shortcuts","createCommand","modifiers","alt","ctrl","meta","keyCode","parse","getExpressions","getWords","commandKeys","specialKeys","charCodeAt","getCommandFromEvent","shiftKey","altKey","ctrlKey","metaKey","fromCharCode","getHashFromEvent","getHash","junctionChar","combinationChar","backspace","tab","enter","esc","space","up","down","home","end","pageup","pagedown","delete","insert","plus","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","EventHandler","_handlers","findHandler","doAction","facade","returnValue","unbind","bindAll","initKeys","keys","getFocusableNodes","GanttNode","blur","isEnabled","scrollHorizontal","getScale","scrollTo","posFromDate","scrollVertical","alt+left","alt+right","alt+up","alt+down","ctrl+z","ctrl+r","KeyNavNode","isValid","fallback","moveTo","dispatcher","setActiveNode","compareTo","setAttribute","$eventAttached","HeaderCell","show_grid","getVisibleTaskCount","getGridColumns","TaskRow","fromDomElement","previousSibling","$grid_scale","getChildren","root_id","TaskCell","enter, space","click","ctrl+enter","createTask","globalIndex","splitItem","$split_subtask","parentId","getParent","locate","isTaskVisible","task_attribute","replaceAll","getTaskPosition","getTaskHeight","inner_width","inner_height","show_chart","scroll_on_click","task_scroll_offset","scrollable","getPrev","getNext","shift+down","hasChild","$open","open","shift+up","close","shift+right","getPrevSibling","moveTask","updateTask","shift+left","isSelectedTask","unselectTask","selectTask","ctrl+left","ctrl+right","showLightbox","columnIndex","show_tasks_outside_timescale","isActive","activeNode","globalNode","enable","getActiveNode","disable","getDefaultNode","setDefaultNode","focusGlobalNode","blurNode","keyDownHandler","defaultPrevented","awaitsFocus","delay","clearDelay","isTaskFocused","focusHandler","$preventDefault","reFocusActiveNode","localName","m","g","p","k","getNodePosition","w","$","T","S","getRelativeEventPosition","C","columns","E","removeAttribute","tasksStore","_smart_render","_redrawTasks","types","placeholder","placeholder_task","focusOnCreate","setInterval","gantt","headerCell","taskRow","taskCell","name","clearInterval","mixin","addShortcut","getShortcutHandler","getCommandHandler","removeShortcut","column","keyboardNavigation","quick_info","quickInfo","text","substr","details","task_time","hidingFunction","showQuickInfo","hideQuickInfo","tooltips","touch","touch_tooltip","tooltip_text","link_source_id","source","saveState","getInitialState","marker","show_markers","marker_class","getRowTop","timeline_placeholder","scrollHeight","external_render","isElement","renderElement","$marker_area","_markers","createDatastore","initItem","uid","renderMarkers","createDataRender","defaultContainer","addLayer","getMarker","getItem","addMarker","addItem","deleteMarker","exists","removeItem","updateMarker","refresh","_getMarkers","getItems","multiselect_one_level","_multiselect","_selected","_one_level","_active","_first_selected_when_shift","getDefaultSelected","getSelected","setFirstSelected","getFirstSelected","updateState","select_task","reset","setLastSelected","silent","unselect","getLastSelected","getSelectedId","afterSelect","isSelected","forSelected","isSameLevel","calculateTaskLevel","_quickRefresh","refreshTask","doSelection","_is_icon_open_click","locateCell","inline_editors_multiselect_open","getEditorConfig","columnName","isVisible","startEdit","toggleTaskSelection","eachSelectedTask","getLastSelectedTask","$level","export_api","_apiUrl","_preparePDFConfigRaw","start","str_to_date","date_format","data","_serializeHtml","_prepareConfigPDF","_serializeAll","_fixColumns","_pdfExportRouter","raw","version","_sendToExport","exportToPDF","exportToPNG","exportToICal","_serializePlain","exportToExcel","smart_rendering","visual","_eachTaskTimed","_serializeTimeline","_serializeGrid","rawDates","_serializeScales","exportToJSON","worktime","_getWorktimeSettings","importFromExcel","File","FormData","append","_sendImportAjaxExcel","importFromMSProject","_sendImportAjaxMSP","importFromPrimaveraP6","exportToMSProject","skip_circular_links","xml_format","format_date","xml_date","_customProjectProperties","_customTaskProperties","_clearRecLinks","_exportConfig","$custom_data","custom","exportToPrimaveraP6","label","_xdr","ajax","post","_markColumns","$template","server","JSON","stringify","sheet","XMLHttpRequest","onreadystatechange","readyState","status","onload","responseText","setRequestHeader","send","_ajaxToExport","encodeURIComponent","xmlDoc","_serializableGanttConfig","editor","editor_types","skin","_createHiddenForm","submit","_hidden_export_form","_copyObjectBase","constraint_date","deadline","_color_box","_color_hash","_getStyles","_getColor","_getMinutesWorktimeSettings","startMinute","endMinute","hours","minutes","dates","work_time","_working_time_helper","get_calendar","worktimes","parsed","_pull","_originalCopyObject","json","_copyObject","_copyObjectPlainICal","task_text","_copyObjectPlainExcel","serializeTask","match","_copyObjectTable","_copyObjectColumns","original_start_date","original_end_date","calculateEndDate","duration","_generatedScales","_generateScales","ignore_time","ignored_colls","getSubScales","min_column_width","scale_height","_getDayIndex","_copyObjectColors","columnIndexByDate","$start","$end","$type","$rendered_type","$text","$left","leftside_text","$right","rightside_text","$color","color","task_class","date_grid","_copyObjectAll","smart_scales","_exportSerialize","links","_getRaw","autosize","autosize_min_width","_getScales","$scaleHelper","custom_dataset","serialize","split_bars","visibleOrder","cellColors","timeline_cell_class","task_cell_class","styles","scaleCell_class","exportMode","tree","_setLevel","_lvl","_clearLevel","_makeLinksSameLevel","_clearCircDependencies","_clearLinksSameLevel","$_source","_onCircDependencyFind","_target","_source","$_target","project","tasks","getSubtaskDates","start_end","_getAutoSchedulingConfig","manual","durationUnit","projectProperties","taskProperties","Jn","KEY_CODES","UP","DOWN","LEFT","RIGHT","SPACE","ENTER","DELETE","ESC","TAB","Kn","addExtension","_extensions","getExtension","gt","dt","navigator","userAgent","kt","isIE","isOpera","isChrome","isSafari","isFF","isIPad","search","isEdge","isNode","isSalesforce","Sfdc","$A","Aura","Pe","wt","method","Error","url","async","headers","He","Function","to_fixed","getISOWeek","getWeek","Oe","getUTCDate","getUTCMonth","getUTCFullYear","day_short","getUTCDay","getDay","day_full","month_short","month_full","getUTCHours","getHours","getUTCMinutes","getMinutes","getUTCSeconds","getSeconds","getUTCISOWeek","month_short_hash","month_full_hash","UTC","Xn","csp","init","date_part","setHours","hour_start","setTime","time_part","week_start","start_on_monday","month_start","setDate","quarter_start","setMonth","year_start","day_start","setMinutes","minute_start","setSeconds","getMilliseconds","setMilliseconds","_add_days","setYear","add_quarter","_getWeekNumber","convert_to_utc","parseDate","defined","parse_date","hn","token","_url","_token","_mode","_seed","_queue","api","_events","Accept","fetch","credentials","then","load","key","websocket","_wrapper","connect","_socket","onclose","location","protocol","WebSocket","onmessage","fire","onError","_send","_resubscribe","Promise","_uid","args","resolve","reject","onCall","filter","catch","onResponse","Zn","remoteEvents","_ready","_remote","ready","_n","_on_timeout","ceil","Qn","internal","ti","nt","$create","$removeAt","$remove","$find","$insertAt","$each","$map","$filter","Ot","at","DataStore","pull","$initItem","fullOrder","_skip_refresh","_filterRule","_searchVisibleOrder","_indexRangeCache","_getItemsCache","_attachDataChange","_parseInner","copyOnParse","isSilent","_updateOrder","updateItem","_removeItemInner","_addItemInner","getVisibleItems","getIndexRange","sync_link","_changeIdInner","changeId","_moveInner","getIdByIndex","clearAll","arraysEqual","_quick_refresh","_mark_recompute","countVisible","eachItem","_ganttConfig","getIndexById","_getNullIfUndefined","getFirst","getLast","ei","_datastore","isSplitItem","isSubrowSplitItem","split_placement","isDefaultSplitItem","isInlineSplitItem","gn","TreeDataStore","_branches","_splitTaskHelper","ct","$parentProperty","parentProperty","rootId","$getRootId","$openInitially","openInitially","_eachItemMainRangeCache","getConfig","_isSplitItem","_isDefaultItem","_isInlineChildItem","open_split_tasks","_isSplitChildItem","$expanded_branch","G","_buildTree","setParent","_add_branch","calculateItemLevel","getBranchIndex","_move_branch","$rendered_parent","_replace_branch_child","_traverseBranches","getSiblings","getNextSibling","eachParent","_setParentInner","_eachItemCached","_eachItemIterate","criteria","_skipTaskRecalculation","ni","datastoreRender","itemRepainter","getLayers","render_item","get_visible_range","ids","prepare_data","render_items","update_items","batch_update","getDataRender","onUpdateRequest","change_id","oe","ii","open_tree_initially","deepcopy_on_parse","dropService","setService","_getDatastores","refreshData","preserve_scroll","getScrollbarsInfo","$view","boundViews","refreshLink","_bulk_dnd","isSplitTask","linksStore","_update_flags","userdata","_clear_data","_skipResourceRepaint","addTask","lightbox","deleteTask","changeTaskId","getLinkCount","isLinkExists","addLink","updateLink","deleteLink","changeLinkId","ai","scale_offset_minimal","duration_unit","deadlines","le","constraint_type","apply_constraints","constraint_types","ASAP","ALAP","baselines","_min_date","_max_date","$e","fit_tasks","Be","ze","we","getSubtreeLinks","getSubtreeTasks","si","$gantt","$dp","_dataProcessorHandlers","clientSideDelete","setGanttMode","setUpdated","_sendTaskOrder","cascade_delete","deleteAfterConfirmation","updateMode","setUpdateMode","storeItem","sendAllData","_tSend","_waitMode","_dp","_tMode","_serverProcessor","_ganttMode","substring","serverProcessor","urlSeparator","xml","_xmlNodeToJSON","isExist","assignmentsStore","handleResourceCRUD","handleResourceAssignmentCRUD","handleBaselineCRUD","updatedRows","getUserData","_in_progress","resources","dataprocessor_assignments","resource_assignment_store","task_id","dataprocessor_resources","resource_store","dataprocessor_baselines","datastore","ee","_storage","getStoredItem","Zt","fn","action_param","autoUpdate","_headers","_payload","_postDelim","_routerParametersFormat","_invalid","messages","updated","inserted","deleted","invalid","invalid_cell","enableUTFencoding","setTransactionMode","mode","payload","_serializeAsJson","_router","router","escape","_utf","getSyncState","dnd","findRow","set_invalid","setUserData","is_invalid","markRow","sendData","_methods","getActionByState","checkBeforeUpdate","editStop","modes","_beforeSendData","_getRowData","_serializeAsJSON","serialize_one","security_key","_forEachUpdatedRow","_sendData","_getAllData","defineAction","_uActions","afterUpdateCallback","afterUpdate","getGanttMode","filePath","sid","tid","finalizeUpdate","xmltop","cleanUpdate","xpath","_initialized","_dp_init","_setDefaultTransactionMode","order","delete_confirmation","_change_id","resourcesStore","baselineStore","_row_style","$dataprocessor_class","_delete_task","$drop_target","setDp","setOnAfterUpdate","setOnBeforeUpdateHandler","setAutoUpdate","_user","_needUpdate","_updateBusy","afterAutoUpdate","fullSync","loadUpdate","getUpdates","_getXmlNodeValue","_applyPayload","_cleanupArgumentsBeforeSend","_cleanupItemBeforeSend","query","nodeValue","_prepareDate","_prepareArray","_prepareObject","_prepareDataItem","ri","DataProcessor","oi","li","resetProjectDates","di","ci","_needRecalc","_isRecalcNeeded","_isGroupSort","group_mode","_getWBSCode","_calcWBS","$virtual","$wbs","_setWBSCode","getWBSCode","getByWBSCode","_getPrevNonPlaceholderSibling","_increaseWBS","getTaskByWBSCode","ui","random","resource_id","resource_property","getTaskBy","getResourceAssignments","hi","renderEditableLabel","$task_id","$resource_id","renderSummaryLabel","reduce","Number","editableResourceCellTemplate","$role","editableResourceCellClass","capacity","getSummaryResourceAssignments","initEditableDiagram","resource_render_empty_cells","cancelAnimationFrame","contentEditable","getCellsByType","view","$content","innerText","calculateDuration","updateTaskAssignments","from","_i","editable_resource_diagram","fetchTasks","lightbox_resources","initItems","$resourcesStore","lightboxOptionsFnc","updateCollection","histogram_cell_class","histogram_cell_label","histogram_cell_allocated","histogram_cell_capacity","defaultResourceCellClass","defaultResourceCellTemplate","resource_cell_value","resource_cell_class","gi","process_resource_assignments","D","A","getTaskAssignments","inBoth","inTaskNotInStore","inStoreNotInTask","I","M","N","L","O","unscheduled","getTaskResources","fi","new_task","_silencedPlaceholder","pi","auto_types","$needsUpdate","ne","canParse","Ht","ie","_linkReg","exec","_findSource","finish_to_start","lag","Se","mi","formatters","durationFormatter","linkFormatter","vi","show_empty_state","emptyStateElement","isGanttEmpty","renderContent","empty_state_text_link","empty_state_text_description","clickEvents","attachAddTaskEvent","detachAddTaskEvents","getContainer","marginTop","pn","hasBaselinesBelow","render_mode","St","isSplitParent","ki","bar_height","adjustTaskHeightForBaselines","getLayoutView","getBarHeight","getTaskBaselines","yi","bi","warn","lightbox_id","assign","xi","liveUpdates","RemoteEvents","remoteUpdates","$i","on_load","responseURL","_process_loading","collections","_load_collections","assignments","serverList","$ignore","dhx_security","serializeLink","_copyLink","attributes","_getCollections","_getXML","getXMLTopNode","progress","oldxml","startdate","est","enddate","predecessortasks","message","de","calendar","ce","dir","ue","wi","mn","calendarArgumentsHelper","getWorkHoursArguments","setWorkTimeArguments","unsetWorkTimeArguments","isWorkTimeArguments","getClosestWorkTimeArguments","_getStartEndConfig","duration_step","getDurationArguments","hasDurationArguments","calculateEndDateArguments","vn","_getIntervals","_toHoursArray","_intersectHourRanges","_mergeAdjacentIntervals","_mergeHoursConfig","merge","customWeeks","processCalendar","Si","_cache","has","setItem","set","Map","Ti","Ci","getMinutesPerWeek","_weekCache","_calendar","getHoursPerDay","getMinutesPerMonth","_monthCache","Ei","_getCacheObject","durations","endDates","_endDateCacheKey","_durationCacheKey","getEndDate","getDuration","Te","argumentsHelper","_workingUnitsCache","_largeUnitsCache","_dateDurationCache","_worktime","_cached_timestamps","_cached_timestamps_count","units","_clearCaches","_getUnitOrder","_resetTimestampCache","_timestamp","_checkIfWorkingUnit","hasDuration","_is_work_day","_getWorkHours","_is_work_hour","startHour","endHour","_getTimeOfDayStamp","_is_work_minute","_nextDate","_getWorkUnitsBetweenGeneric","_isWorkTime","_getClosestWorkTimeFuture","_getMinutesPerHour","_getMinutesPerDay","durationMinutes","durationHours","_getWorkUnitsForRange","_getMinutesBetweenSingleDay","_getIntervalTimestamp","_getMinutesBetween","_getHoursBetween","_setConfig","_parseSettings","haveCustomWeeks","customWeeksRangeStart","customWeeksRangeEnd","customWeeksBoundaries","_parseHours","to","fromReadable","toReadable","days","_tryChangeCalendarSettings","hasWorkTime","_arraysEqual","_compareSettings","equals","getWorkHours","durationSeconds","setWorkTime","unsetWorkTime","reset_calendar","_calculateDuration","_calculateEndDate","_calculateMinuteEndDate","_subtractMinuteDate","_calculateHourEndDate","_addInterval","added","_addHoursUntilDayEnd","_addMinutesUntilHourEnd","_subtractMinutesUntilHourStart","getClosestWorkTime","_isMinutePrecision","_getClosestWorkTimePast","_getClosestWorkTime","_getClosestWorkTimeGeneric","_findClosestTimeInDay","_getClosestWorkMinute","_checkWorkHours","Nt","isLegacyResourceCalendarFormat","getResourceProperty","resource_calendars","getCalendarIdFromLegacyConfig","Di","Ft","getCalendarIdFromMultipleResources","getResourceCalendar","mergeCalendars","addCalendar","kn","_calendars","_legacyConfig","_isLegacyConfig","createDefaultCalendars","Ce","yn","calendarManager","$disabledCalendar","_convertWorkTimeSettings","weekdays","entries","_createCalendarFromConfig","createCalendar","defaults","fulltime","getCalendar","getCalendars","_getOwnCalendar","calendar_property","dynamic_resource_calendars","getTaskCalendar","inherit_calendar","$effective_calendar","isCalendar","deleteCalendar","restoreConfigCalendars","every","_getCalendar","Ai","worktimeFacadeFactory","_hasDuration","Ii","isUnscheduledTask","_isAllowedUnscheduledTask","show_unscheduled","_isTaskInTimelineLimits","_getProjectEnd","project_end","_getProjectStart","project_start","getDefaultTaskDate","schedule_from_end","_set_default_task_timing","details_on_create","$new","showTask","_tasks_dnd","drag","getTaskTimingMode","$no_start","$no_end","scheduled_summary","auto_scheduling","milestone","_init_task_timing","rollup","splitItems","$calculate_duration","min_duration","$rollup","$inlineSplit","getSubtaskDuration","_update_parents","$auto_start_date","$auto_end_date","roundDate","correctTaskWorkTime","correct_work_time","je","container_resize_timeout","We","container_resize_method","$scrollbarRepaint","Mi","show_errors","expire","cloneNode","env","_reinit","_clearTaskLayers","_clearLinkLayers","layout","createView","getPropertyValue","wai_aria_attributes","contentWindow","resetLayout","initTemplates","$mouseEvents","edit","confirm_deleting","confirm_deleting_title","_delete_task_confirm","hideLightbox","_sort","_getHorizontalScrollbar","codeScrollLeft","resize","zoom","x_pos","setSizes","changeLightboxType","getLightboxType","_silent_redraw_lightbox","_get_link_type","start_to_start","start_to_finish","finish_to_finish","isLinkAllowed","Ni","icon_save","icon_cancel","icon_details","confirm_closing","section_description","section_time","section_type","section_deadline","section_baselines","section_new_resources","column_wbs","column_text","column_start_date","column_duration","column_add","confirm_link_deleting","link_start","link_end","type_task","type_project","type_milestone","weeks","months","years","message_ok","message_cancel","section_constraint","asap","alap","snet","snlt","fnet","fnlt","mso","mfo","resources_add_button","resources_filter_placeholder","resources_filter_label","resources_section_placeholder","baselines_section_placeholder","baselines_add_button","baselines_remove_button","baselines_remove_all_button","deadline_enable_button","deadline_disable_button","Li","Ri","Pi","Hi","Oi","Bi","zi","ji","Wi","Fi","Vi","Ui","qi","Gi","Yi","Ji","Ki","Xi","Zi","Qi","addLocale","_locales","getLocale","ta","ea","na","ia","aa","sa","ra","oa","la","da","ca","ua","ha","constants","license","edit_save","edit_cancel","_a","services","rows","cols","resizer","autoscroll_speed","show_links","show_task_cells","static_background","static_background_cells","branch_loading","branch_loading_property","show_loading","server_utc","show_progress","drag_links","drag_progress","drag_resize","drag_move","drag_mode","round_dnd_dates","link_wrapper_width","link_arrow_size","autofit","align","inherit_scale_class","time_step","task_date","time_picker","link_attribute","layer_attribute","buttons_left","_migrate_buttons","dhx_save_btn","dhx_cancel_btn","dhx_delete_btn","buttons_right","sections","map_to","project_sections","milestone_sections","single_date","drag_lightbox","details_on_dblclick","initial_scroll","order_branch","order_branch_free","task_height","bar_height_padding","min_grid_column_width","grid_resizer_column_attribute","keep_grid_width","grid_resize","grid_elastic_columns","resize_rows","task_grid_row_resizer_attribute","min_task_grid_row_height","readonly_property","editable_property","type_renderers","optimize_render","prevent_default_scroll","horizontal_scroll_key","drag_multiple","cache","DOMParser","ActiveXObject","loadXML","parseFromString","responseXML","getElementsByTagName","selectNodes","ownerDocument","evaluate","XPathResult","ANY_TYPE","iterateNext","_call","getSync","put","del","postSync","toUpperCase","pageX","pageY","_obj","_settings","getInputMethods","_drag_start_timer","clearDragTimer","passive","accessor","timeStamp","original_target","original_element_sizes","dragStart","traceDragEvents","dragMove","dragScroll","started","updates_per_second","cancelable","mousemoveContainer","checkPositionChange","pos","pow","sensitivity","initDnDMarker","backupEventTarget","backup_element","maxTouchPoints","elementFromPoint","PointerEvent","pointerType","obj","getPosition","_prevent_touch_scroll","_touch_drag","_touch_feedback","targetTouches","progress_text","grid_header_class","task_end_date","grid_row_class","task_row_class","timeline_cell_content","scale_row_class","grid_indent","grid_folder","grid_file","grid_open","grid_blank","task_unscheduled_time","grid_date_format","link_class","link_description","drag_link","drag_link_class","tooltip_date_format","baseline_text","initTemplate","selected_task","jn","events","onItemLoading","onBeforeAdd","onAfterAdd","onBeforeUpdate","onAfterUpdate","onBeforeDelete","onAfterDelete","onIdChange","onBeforeItemMove","onAfterItemMove","onFilterItem","onItemOpen","onItemClose","onBeforeSelect","onAfterSelect","onAfterUnselect","dataProcessor","createDataProcessor","getAutoSchedulingConfig","gap_behavior","descendant_links","schedule_on_parse","move_projects","use_progress","project_constraint","show_constraints","getDefaultAutoSchedulingConfig","strict","move_asap_tasks","auto_scheduling_compatibility","auto_scheduling_strict","auto_scheduling_descendant_links","auto_scheduling_initial","auto_scheduling_move_projects","auto_scheduling_use_progress","auto_scheduling_project_constraint","getGridColumn","_cached_functions","update_if_changed","active","activate","critical_path_mode","wrap_methods","_prefetch_originals","prefetch","get_arguments_hash","has_cached_value","get_cached_value","cache_value","is_date","stringify_argument","deactivate","setup","highlight_critical_path","_eventRemoveAll","resetLightbox","ar","cs","el","es","fa","fr","he","hr","hu","jp","kr","nb","nl","no","pl","pt","ro","ru","sk","sv","tr","i18n","setLocale","gantt_save_btn","gantt_cancel_btn","gantt_delete_btn","ga","box","keyboard","cancelBubble","cover","onkeydown","messageButtonAttrString","messageModalAttr","ok","cancel","onclick","hidden","innerWidth","innerHeight","modalBox","messageBox","messageInfoAttr","insertBefore","timers","seed","hideAll","alert","confirm","modalbox","Fe","$extendedConfig","setPrototypeOf","$getConfig","$getTemplates","pa","uiFactory$1","scroll","configure","$parent","initUI","views","registerView","ma","doubleclick","contextMenu","root","getClassName","_last_move_event","delegate","callHandler","onDoubleClick","onMouseMove","onContextMenu","onClick","ln","va","Ve","x_end","y_end","Rt","Qt","mt","ka","layerFactory","renderer","onrender","isInViewPort","getRectangle","remove_item","rendered","clear_container","getVisibleRange","prepareData","createDocumentFragment","restore","replace_item","replaceChild","getRenderer","clearRenderers","createGroup","tempCollection","renderers","container","filters","_add","getLayer","isConnected","topmost","Ue","requestUpdate","eachLayer","removeLayer","qe","_getPositioningContext","bn","rec","xn","ya","$skipSmartRenderOnScroll","Bt","headerHeight","$domEvents","$name","$factory","$externalComponent","_headerClickHandler","cell","$preResize","getSize","minWidth","maxWidth","minHeight","maxHeight","setSize","_hide","cellIndex","moveView","$toHTML","canCollapse","$fill","collapsed","gravity","getContentSize","$lastSize","contentX","contentY","_getBorderSizes","horizontal","vertical","_currentBorders","_borders","_sizeHeader","_sizeContent","_setBorders","transform","F","$n","_parseConfig","$cells","_resizeScrollbars","shouldHide","shouldShow","group","visible","direction","size","scrollSize","_getLinkedViews","x_inner","y_inner","y_pos","_syncCellSizes","_eachChild","_syncGroupSize","_xLayout","isGravity","grid_width","_resizeInProgress","setContentSize","_getAutosizeMode","$originalWidthStored","$originalWidth","$originalHeightStored","$originalHeight","isChild","getCells","_cleanElSize","_getBoxStyles","boxSizing","clientHeight","MozBoxSizing","horPaddings","borderLeftWidth","borderRightWidth","vertPaddings","borderTopWidth","borderBottomWidth","borderBox","outerWidth","outerHeight","_sizes","margin","_calcFreeSpace","_free","_gravity","_calcSize","_configureBorders","_updateCellVisibility","_visibleCells","hide_empty","ba","$cell","byMaxSize","xa","$initialized","unload","_setContentSize","$a","_scrollHorizontalHandler","_scrollVerticalHandler","_outerScrollVerticalHandler","_outerScrollHorizontalHandler","_mouseWheelHandler","scroll_size","_isHorizontal","scrollPosition","_isVertical","_initVertical","_initHorizontal","_initMouseWheel","_initLinkedViews","_getRootParent","_eachView","$scroll_hor","$scroll_ver","_updateLinkedViews","scrollHorizontally","_scrolling","scrollVertically","_wheel_time","_oldLeft","_getScrollSize","_getScrollOffset","outerScroll","innerScroll","outerSize","_setScrollSize","toggleVisibility","_getScaleOffset","_oldTop","_checkWheelTarget","wheel_scroll_sensitivity","deltaX","wheelDeltaX","deltaY","wheelDelta","deltaMode","detail","wn","resetCache","_getRowHeight","_refreshState","rowStore","canUseSimpleCalculation","_resetTopPositionHeight","_resetHeight","getCacheStateTotalHeight","shouldClearHeightCache","_fillHeightCache","globalHeight","items","sumHeight","wa","canvasRender","destroy","Gt","Timeline","_posFromDateCache","_posFromWorkTimeCache","_timelineDragScroll","$task_scale","$task_bg","$task_baselines","$task_links","$task_bars","$task_constraints","$task_deadlines","_tasks","bindLinks","item_attribute","_createLayerConfig","layers","linkLayers","_attachLayers","backgroundImage","scrollWidth","_refreshScales","_scales","_getScaleChunkHtml","taskFilter","expose","taskBar","hide_bar","taskBg","_taskLayers","_linkLayers","_bindStore","_taskRenderer","_initStaticBackgroundRender","linkStore","_linkRenderer","_staticBgHandler","$task_bg_static","nextSibling","_clearLayers","_render_tasks_scales","_prepareScaleHtml","sticky","getTimelineCellAttr","_getColumnDuration","intervals","_getWorkTrimForCell","posFromWorkTime","_getNextVisibleColumn","_getPrevVisibleColumn","_getClosestVisibleColumn","getItemPosition","rowHeight","_timelineCacheAttached","_unbindStore","Sa","_scrollOrder","grid","getCurrentX","_dnd","_scrollView","attachEvents","isScrollable","autoscrollRight","autoscrollStart","autoscrollLeft","autoscrollStop","getCorrection","Ge","Ta","_targetMarker","calculateCurrentPosition","_scrollableGrid","_draggedCell","draggedColumn","draggedIndex","_gridConfig","outerHTML","lineHeight","_dragX","findColumnsIndexes","setMarkerPosition","drawTargetMarker","targetIndex","targetColumn","cleanTargetMarker","reorderColumns","startX","endX","compare","xBefore","xAfter","columnRelativePos","Ae","te","Grid","$state","_delayRender","$attachedResourceViewHandler","$attachedTaskStoreHandler","gridAttrString","gridDataAttrString","reorder_grid_columns","gridScaleRowAttrString","doOnRender","_renderHeaderResizers","_mouseDelegates","row_before_start","row_after_start","row_drag_move","marker_height","row_drag_end","dnd_sensitivity","_addLayers","_initEvents","_columnDND","_validateColumnWidth","_setColumnsWidth","_getGridWidth","_gridCacheAttached","_initSmartRenderingPlaceholder","_calculateGridWidth","_renderGridHeader","getColumnIndex","getColumn","gridLine","gridTaskRowResizer","_refreshPlaceholderOnStoreUpdate","$rowsPlaceholder","_getColumnWidth","min_width","max_width","_checkGridColumnMinWidthLimits","_getGridWidthLimits","_getColsTotalWidth","parseFloat","gridScaleCellAttrString","Ca","_getResourceConfig","resource_table","_getResourceColumns","_getResourceSection","getLightboxSection","sectionName","section","inlineEditorsLightbox","_linkToTaskStore","previousDragId","relevantResources","_getRelevantResources","_updateNestedTasks","_getIdsFromAssignments","Set","Ea","isChanged","save","form_blocks","resource_selector","_lightbox_root","set_value","lightbox_events","_save_lightbox","onShow","editPrevCell","editNextCell","onkeyup","onwheel","onHide","Da","editorType","Et","BaseEditor","get_input","get_value","is_changed","is_valid","Aa","Ia","oninput","Ma","options","Na","La","formatter","delimiter","autoSchedule","Ra","Pa","Ha","number","predecessor","Oa","setMapping","getMapping","createEditors","inlineEditorAttr","_itemId","_columnName","_editor","_editorType","_placeholder","setValue","_lightbox","_onReMount","getValue","_getItemValue","newValue","inline_editors_date_processing","_findEditableCell","getNextCell","getFirstCell","getLastCell","moveRow","editNextRow","editPrevRow","detachStore","Ee","Sn","z","H","j","link_from_start","link_target_id","isCriticalTask","link_landing_area","link_to_start","progressColor","textColor","setProperty","setTaskBarAttr","marginLeft","marginRight","Ye","It","Je","Vt","_e","Ba","lastTaskId","calendar_id","za","current_pos","dirs","path","point","get_lines","line_to","get_path","_get_line","get_wrapper_sizes","get_line_sizes","link_line_width","render_line","render_corner","radius","render_arrow","get_direction","current","point_to","get_points","get_endpoint","e_y","e_x","get_line_type","from_start","to_start","shrinkHeight","splitChild","link_radius","isCriticalLink","linkAttr","ja","Wa","P","V","W","Fa","initial_open_state","$transparent","lastTaskOfLevel","_getGridPos","_getTargetY","_getTaskByY","reorderMarkerAttr","Z","createDropTargetObject","targetParent","targetId","child","prevSibling","nextSiblingTarget","prevSiblingTarget","firstChildTarget","lastChildTarget","Tn","ge","Ke","Xe","Ze","fe","Qe","removeLineHighlight","markerLine","highlightPosition","pointerEvents","Va","opacity","level","drop_target","doctype","Ua","initializer","onCreated","extendGantt","_inlineEditors","onInitialized","initEvents","extendDom","onDestroyed","clearEvents","showDate","qa","createTaskDND","roundTaskDates","round_task_dates","dragMultiple","before_start","before_finish","after_finish","clear_drag_state","set_actions","drag_from_start","_move","_resize","_resize_progress","on_mouse_move","on_mouse_down","on_mouse_up","start_x","start_y","_drag_task_coords","_calculateMinDuration","_find_max_shift","obj_s_x","obj_e_x","_mouse_position_change","_is_number","isFinite","start_drag","now","timestamp","_start_dnd","_update_on_move","_update_item_on_move","_isMultiselect","handle_offset","_get_drag_mode","_fix_dnd_scale_time","_fix_working_times","_finalize_mouse_up","_fireEvent","_dhx_changed","doFinalize","_addSubtasksToDragMultiple","Ga","initLinksDND","_direction","link_direction_class","atan","sin","cos","_dir_start","_dir_end","Ya","linkDnD","Ja","_linksDnD","_tasksDnD","_attachDomEvents","_attachStateProvider","_clearDomEvents","_clearStateProvider","_delete_link_confirm","scale_unit","scale_step","Ka","getVerticalScrollbar","getHorizontalScrollbar","_legacyGridResizerClass","original_grid_width","skins","_initScrollStateEvents","_getVerticalScrollbar","_findGridResizer","_getSiblings","_behind","_front","gridFirst","Xa","defaultContainerSibling","addTaskLayer","_getTaskLayers","removeTaskLayer","addLinkLayer","_getLinkLayers","removeLinkLayer","factory","mouseEvents","layersApi","gridAddButtonAttrString","center","gridCellAttrString","taskRowAttr","timedProjectBar","taskRollupBar","$rendered_at","taskSplitBar","taskConstraints","taskDeadline","taskBaselines","resourceRow","resourceHistogram","rowResizerAttr","layersService","pe","href","_theme_info","theme","cssVarTheme","terrace","_second_column_width","_third_column_width","_lightbox_template","_redefine_lightbox_buttons","Za","autoscroll_delay","autoscroll_step","me","ve","jQuery","dhx_gantt","each","Gantt","getGanttInstance","dhtmlx","attaches","attachGantt","cmp","attachObject","dataType","dataObj","vs","av","border","gridId","gridObj","_viewRestore","dhtmlXCellObject","Qa","ts","zoomIn","getCurrentLevel","setLevel","zoomOut","_levels","_activeLevelIndex","getLevels","_getZoomIndexByName","_getVisibleDate","_visibleDate","fixed_scales","_attachWheelEvent","_useKey","_handler","_defaultHandler","stopPropagation","_setScaleSettings","_setScaleDates","_initialStartDate","_initialEndDate","startDate","endDate","activeLevelIndex","_mapScales","levels","_minColumnWidth","minColumnWidth","_maxColumnWidth","maxColumnWidth","_widthStep","widthStep","trigger","_stepUp","_stepDown","ns","platform","_touch_events","touch_feedback","touch_feedback_duration","vibrate","_locate_css","Ut","Lt","ut","Cn","getHtmlSelect","getHtmlOption","Mt","getHtmlButton","getHtmlDiv","getHtmlLabel","getHtmlInput","En","Yt","_dhx_onchange","onchange","_focus","is","allow_root","root_label","getLightboxValues","onselect","as","resourcesValues","eventsInitialized","gridID","resource_filter_value","initialValues","newValues","resource_default_assignment","filterApplied","button_click","wide_form","structuredClone","_applyFilter","comparison","U","disabled","_center_lightbox","ss","_get_input","getTimePicker","_time_format_order","auto_end_date","_update_lightbox_select","_fill_lightbox_select","_resolve_default_mapping","getTimePickerValue","autofix_end","_get_timepicker_step","single_value","checked","default_value","lightboxDurationInputAttrString","ft","Dt","charCode","_eventsInitialized","getConstraintType","_lightbox_current_type","At","Ie","Dn","An","_t","J","In","Mn","zt","dataset","baselineId","_get_typed_lightbox_config","_lightbox_methods","showCover","_fill_lightbox","_setLbPosition","lightboxVisibleAttr","getLabel","_lightbox_type","_is_lightbox_timepicker","lightboxAttr","onmousedown","_ready_to_dnd","onselectstart","cursor","_init_dnd_events","_cover","_render_sections","inputId","_init_lightbox_events","show_cover","_move_while_dnd","_finish_dnd","lightboxButtonAttrString","time_format","timeFormat","year_range","first","_time_values","last","_cancel_lightbox","default","time","time_optional","duration_optional","lightboxHiddenAttr","hideCover","_custom_lightbox","_set_lightbox_values","lightbox_header","lightboxHeader","get_template_control","control","get_select_control","get_textarea_control","get_time_control","_dnd_start_lb","gantt_unselectable","_lb_start","limit_time_select","first_hour","last_hour","lightboxSelectAttrString","radio","checkbox","constraint","typeselect","_simple_confirm","rs","arrayFind","getTaskTop","getTaskBarHeight","getLinkNode","_scroll_state","resetSkin","_addThemeClass","setSkin","skyblue","lightbox_additional_height","dark","meadow","broadway","_config_buttons_left","_config_buttons_right","material","contrast_black","contrast_white","_extend_to_optional","update_block","getAttributeString","_taskCommonAttr","gridSeparatorAttr","role","tabindex","_locateHTML","critical_path","grouping","groupBy","overlay","os","_load_url","_load_type"],"sources":["../sources/core/ui/utils/dom_helpers.js","../sources/utils/global.js","../sources/ext/click_drag/eventsManager.ts","../sources/utils/eventable.js","../sources/utils/helpers.js","../sources/ext/click_drag/selectedRegion.ts","../sources/ext/drag_timeline/eventsManager.ts","../sources/utils/utils.js","../sources/core/ui/timeline/scales.js","../sources/ext/keyboard_navigation/modals.js","../sources/ext/quick_info/quickInfo.ts","../sources/core/ui/utils/dom_event_scope.js","../sources/ext/tooltip/tooltip.ts","../sources/ext/tooltip/tooltipManager.ts","../sources/ext/undo/monitor.ts","../sources/ext/undo/undo.ts","../sources/ext/extensions_gpl.ts","../sources/ext/click_drag/index.ts","../sources/ext/drag_timeline/index.ts","../sources/ext/fullscreen/index.ts","../sources/ext/keyboard_navigation.js","../sources/ext/keyboard_navigation/common/keyboard_shortcuts.js","../sources/ext/keyboard_navigation/common/eventhandler.js","../sources/ext/keyboard_navigation/common/trap_modal_focus.js","../sources/ext/keyboard_navigation/elements/gantt_node.js","../sources/ext/keyboard_navigation/elements/nav_node.js","../sources/ext/keyboard_navigation/elements/header_cell.js","../sources/ext/keyboard_navigation/elements/task_row.js","../sources/ext/keyboard_navigation/elements/task_cell.js","../sources/ext/keyboard_navigation/core.js","../sources/ext/quick_info/index.ts","../sources/ext/tooltip/index.ts","../sources/ext/undo/index.ts","../sources/ext/marker.js","../sources/ext/multiselect.js","../sources/ext/export_api/index.ts","../sources/core/ui/timeline/scales_ignore.js","../sources/constants/index.js","../sources/ext/extension_manager.ts","../sources/utils/env.js","../sources/core/common/serialize.ts","../sources/core/common/ajax.js","../sources/core/common/date_parsers/fast_version.ts","../sources/core/common/date_parsers/csp_compliant_version.ts","../sources/core/common/date.js","../node_modules/remote-client/dist/remote.es6.js","../sources/core/remote/remote_events.js","../sources/utils/timeout.js","../sources/core/common/state.js","../sources/utils/promise.js","../sources/core/facades/datastore_tasks.js","../sources/core/datastore/power_array.js","../sources/utils/placeholder_task.js","../sources/core/datastore/datastore.js","../sources/core/common/split_task_helpers.ts","../sources/core/datastore/treedatastore.js","../sources/utils/is_headless.js","../sources/core/datastore/datastore_render.js","../sources/core/facades/datastore.js","../sources/core/datastore/select.js","../sources/core/facades/datastore_links.js","../sources/core/gantt_data_range.js","../sources/utils/task_tree_helpers.js","../sources/core/dataprocessor/data_processor_events.ts","../sources/core/dataprocessor/simple_storage.ts","../sources/core/dataprocessor/data_processor.ts","../sources/core/dataprocessor/extend_gantt.ts","../sources/core/dataprocessor/index.js","../sources/core/plugins/batch_update.js","../sources/core/plugins/wbs.js","../sources/core/plugins/resources.js","../sources/core/plugins/resource_assignments.js","../sources/core/plugins/new_task_placeholder.js","../sources/core/plugins/auto_task_types.js","../sources/core/common/duration_formatter_numeric.ts","../sources/core/common/link_formatter_simple.ts","../sources/core/plugins/formatters.js","../sources/core/plugins/empty_state_screen.ts","../sources/core/ui/render/baseline_helper.js","../sources/core/plugins/baselines.js","../sources/core/plugins/remote_events/remote_events.ts","../sources/core/plugins/remote_events/handlers.js","../sources/core/plugins/remote_events/index.js","../sources/core/loading/parsing.js","../sources/core/worktime/calendar_arguments_helper.js","../sources/core/worktime/strategy/work_calendar_merger.js","../sources/core/worktime/strategy/work_unit_cache/workunit_map_cache.ts","../sources/core/worktime/strategy/work_unit_cache/workunit_object_cache.ts","../sources/core/worktime/strategy/work_unit_cache/larger_units_helper.ts","../sources/core/worktime/strategy/work_unit_cache/date_duration_cache.ts","../sources/core/worktime/strategy/calendar_strategy.js","../sources/core/worktime/strategy/work_unit_cache/index.ts","../sources/core/worktime/legacy_resource_config.js","../sources/core/worktime/calendar_manager.js","../sources/core/worktime/dynamic_resource_calendars.js","../sources/core/worktime/strategy/no_work_time.js","../sources/core/worktime/time_calculator.js","../sources/core/facades/worktime_calendars.js","../sources/core/data.js","../sources/core/ui/resize_listener.js","../sources/core/gantt_core.js","../sources/core/common/assert.js","../sources/locale/locale_ar.ts","../sources/locale/locale_be.ts","../sources/locale/locale_ca.ts","../sources/locale/locale_cn.ts","../sources/locale/locale_cs.ts","../sources/locale/locale_da.ts","../sources/locale/locale_de.ts","../sources/locale/locale_el.ts","../sources/locale/locale_en.ts","../sources/locale/locale_es.ts","../sources/locale/locale_fa.ts","../sources/locale/locale_fi.ts","../sources/locale/locale_fr.ts","../sources/locale/locale_he.ts","../sources/locale/locale_hr.ts","../sources/locale/locale_hu.ts","../sources/locale/locale_id.ts","../sources/locale/locale_it.ts","../sources/locale/locale_jp.ts","../sources/locale/locale_kr.ts","../sources/locale/locale_manager.ts","../sources/locale/locale_nb.ts","../sources/locale/locale_nl.ts","../sources/locale/locale_no.ts","../sources/locale/locale_pl.ts","../sources/locale/locale_pt.ts","../sources/locale/locale_ro.ts","../sources/locale/locale_ru.ts","../sources/locale/locale_si.ts","../sources/locale/locale_sk.ts","../sources/locale/locale_sv.ts","../sources/locale/locale_tr.ts","../sources/locale/locale_ua.ts","../sources/factory/make_instance_common.js","../sources/core/common/services.js","../sources/core/common/config.ts","../sources/core/common/dnd.js","../sources/core/common/templates.js","../sources/core/datastore/datastore_hooks.js","../sources/core/plugins/index.js","../sources/core/plugins/auto_scheduling_config.js","../sources/core/grid_column_api.gpl.js","../sources/core/tasks.js","../sources/core/worktime/work_time.js","../sources/core/data_task_types.gpl.js","../sources/core/cached_functions.js","../sources/core/destructor.js","../sources/locale/index.ts","../sources/core/ui/message.js","../sources/core/ui/configurable.js","../sources/core/ui/ui_factory.js","../sources/core/ui/mouse.js","../sources/core/ui/render/viewport/is_in_viewport.js","../sources/core/ui/render/is_legacy_smart_render.js","../sources/core/ui/render/viewport/get_grid_row_rectangle.js","../sources/core/ui/render/viewport/get_visible_bars_range.js","../sources/core/ui/render/render_factory.js","../sources/core/ui/render/layer_engine.js","../sources/core/ui/render/viewport/get_bar_rectangle.js","../sources/core/ui/render/viewport/factory/get_visible_link_range.js","../sources/core/ui/render/viewport/get_link_rectangle.js","../sources/core/ui/render/viewport/is_link_in_viewport.js","../sources/core/ui/gantt_layers.js","../sources/core/ui/layout/cell.js","../sources/utils/extends.js","../sources/core/ui/layout/layout.js","../sources/core/ui/layout/view_layout.js","../sources/core/ui/layout/view_cell.js","../sources/core/ui/layout/scrollbar_cell.js","../sources/core/ui/row_position_mixin.js","../sources/core/ui/row_position_fixed_height.js","../sources/core/ui/timeline/tasks_canvas_render.gpl.js","../sources/core/ui/timeline/timeline.js","../sources/core/ui/timeline/timeline_layers_gpl.js","../sources/core/ui/plugins/column_grid_dnd/scrollable_grid.ts","../sources/core/ui/plugins/column_grid_dnd/column_grid_dnd.ts","../sources/core/ui/mouse_event_container.js","../sources/core/ui/grid/grid.js","../sources/core/ui/resource_store_mixin.js","../sources/core/ui/grid/grid_resize.gpl.js","../sources/core/ui/grid/task_grid_row_resize.js","../sources/core/ui/grid/resource_grid_lightbox.js","../sources/core/ui/grid/editors/keyboard_mappings/default.js","../sources/core/ui/grid/editors/keyboard_mappings/keyboard_navigation.js","../sources/core/ui/grid/editors/editors/base.js","../sources/core/ui/grid/editors/editors/text.js","../sources/core/ui/grid/editors/editors/number.js","../sources/core/ui/grid/editors/editors/select.js","../sources/core/ui/grid/editors/editors/date.js","../sources/core/ui/grid/editors/editors/predecessor.js","../sources/core/ui/grid/editors/editors/duration.js","../sources/core/ui/grid/editors/linked_properties.js","../sources/core/ui/grid/editors/controller.js","../sources/core/ui/grid/editors/keyboard_mappings.js","../sources/core/ui/render/viewport/is_bar_in_viewport.js","../sources/core/ui/render/task_bar_render.js","../sources/core/ui/render/task_bar_smart_render.js","../sources/core/ui/render/dummy_layer.js","../sources/core/ui/render/viewport/get_bg_row_rectangle.js","../sources/core/ui/render/viewport/get_visible_cells_range.js","../sources/core/ui/render/viewport/is_column_visible.js","../sources/core/ui/render/prerender/task_bg_placeholder.js","../sources/core/ui/render/link_render.js","../sources/core/ui/render/viewport/is_grid_row_in_viewport.js","../sources/core/resource_timetable_builder.js","../sources/core/ui/grid/tasks_grid_dnd.js","../sources/core/ui/grid/tasks_grid_dnd_marker_helpers/drop_target.js","../sources/core/ui/grid/tasks_grid_dnd_marker_helpers/locked_level.js","../sources/core/ui/grid/tasks_grid_dnd_marker_helpers/highlight.js","../sources/core/ui/grid/tasks_grid_dnd_marker.js","../sources/core/ui/grid/tasks_grid_dnd_marker_helpers/multi_level.js","../sources/core/ui/grid/main_grid_initializer.js","../sources/core/ui/timeline/tasks_dnd.js","../sources/core/ui/timeline/links_dnd.js","../sources/core/ui/timeline/main_timeline_initializer.js","../sources/core/ui/main_layout_initializer.js","../sources/core/ui/index.js","../sources/core/ui/layout/resizer_cell.gpl.js","../sources/core/ui/render/task_grid_line_render.js","../sources/core/ui/render/task_bg_render.js","../sources/core/ui/render/task_rollup_render.js","../sources/core/ui/render/resource_matrix_render.js","../sources/core/ui/render/task_grid_row_resize_render.js","../sources/core/ui/skin.js","../sources/core/ui/plugins/autoscroll.js","../sources/core/ui/plugins/jquery_hooks.js","../sources/core/ui/plugins/dhtmlx_hooks.js","../sources/core/ui/plugins/timeline_zoom.ts","../sources/core/ui/touch.js","../sources/core/ui/lightbox/controls/base_control.js","../sources/core/ui/utils/html_helpers.js","../sources/core/ui/lightbox/controls/select_control.js","../sources/core/ui/lightbox/controls/parent_control.js","../sources/core/ui/lightbox/controls/resource_selector_control.js","../sources/core/ui/lightbox/index.js","../sources/core/ui/lightbox/controls/template_control.js","../sources/core/ui/lightbox/controls/textarea_control.js","../sources/core/ui/lightbox/controls/time_control.js","../sources/core/ui/lightbox/controls/checkbox_control.js","../sources/core/ui/lightbox/controls/radio_control.js","../sources/core/ui/lightbox/controls/duration_control.js","../sources/core/ui/lightbox/controls/constraint_control.js","../sources/core/ui/lightbox/controls/typeselect_control.js","../sources/core/ui/lightbox/controls/baseline_control.js","../sources/core/ui_core.js","../sources/core/data_task_layers.gpl.js","../sources/core/facades/layout.js","../sources/css/skins/skyblue.js","../sources/css/skins/dark.js","../sources/css/skins/meadow.js","../sources/css/skins/terrace.js","../sources/css/skins/broadway.js","../sources/css/skins/material.js","../sources/css/skins/contrast_black.js","../sources/css/skins/contrast_white.js","../sources/core/ui/plugins/index.js","../sources/core/ui/lightbox/lightbox_optional_time.js","../sources/core/ui/wai_aria.js","../sources/dhtmlxgantt.gpl.ts","../sources/factory/make_instance_web.js","../sources/core/loading/ajax_loading.js"],"sourcesContent":["//returns position of html element on the page\r\nfunction getNodePosition(elem) {\r\n\tvar top=0, left=0, right=0, bottom=0;\r\n\tif (elem.getBoundingClientRect) { //HTML5 method\r\n\t\tvar box = elem.getBoundingClientRect();\r\n\t\tvar body = document.body;\r\n\t\tvar docElem = (document.documentElement ||\r\n\t\t\tdocument.body.parentNode ||\r\n\t\t\tdocument.body);\r\n\r\n\t\tvar scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\r\n\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\r\n\t\tvar clientTop = docElem.clientTop || body.clientTop || 0;\r\n\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\r\n\t\ttop  = box.top +  scrollTop - clientTop;\r\n\t\tleft = box.left + scrollLeft - clientLeft;\r\n\r\n\t\tright = document.body.offsetWidth - box.right;\r\n\t\tbottom = document.body.offsetHeight - box.bottom;\r\n\t} else { //fallback to naive approach\r\n\t\twhile(elem) {\r\n\t\t\ttop = top + parseInt(elem.offsetTop,10);\r\n\t\t\tleft = left + parseInt(elem.offsetLeft,10);\r\n\t\t\telem = elem.offsetParent;\r\n\t\t}\r\n\r\n\t\tright = document.body.offsetWidth - elem.offsetWidth - left;\r\n\t\tbottom = document.body.offsetHeight - elem.offsetHeight - top;\r\n\t}\r\n\treturn { y: Math.round(top), x: Math.round(left), width:elem.offsetWidth, height:elem.offsetHeight, right: Math.round(right), bottom: Math.round(bottom) };\r\n}\r\n\r\nfunction isVisible(node){\r\n\tvar display = false,\r\n\t\tvisibility = false;\r\n\tif(window.getComputedStyle){\r\n\t\tvar style = window.getComputedStyle(node, null);\r\n\t\tdisplay = style[\"display\"];\r\n\t\tvisibility = style[\"visibility\"];\r\n\t}else if(node.currentStyle){\r\n\t\tdisplay = node.currentStyle[\"display\"];\r\n\t\tvisibility = node.currentStyle[\"visibility\"];\r\n\t}\r\n\treturn (display != \"none\" && visibility != \"hidden\");\r\n}\r\n\r\nfunction hasNonNegativeTabIndex(node){\r\n\treturn !isNaN(node.getAttribute(\"tabindex\")) && (node.getAttribute(\"tabindex\")*1 >= 0);\r\n}\r\n\r\nfunction hasHref(node){\r\n\tvar canHaveHref = {\"a\": true, \"area\": true};\r\n\tif(canHaveHref[node.nodeName.loLowerCase()]){\r\n\t\treturn !!node.getAttribute(\"href\");\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nfunction isEnabled(node){\r\n\tvar canDisable = {\"input\":true, \"select\":true, \"textarea\":true, \"button\":true, \"object\":true};\r\n\tif(canDisable[node.nodeName.toLowerCase()]){\r\n\t\treturn !node.hasAttribute(\"disabled\");\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n\r\nfunction getFocusableNodes(root){\r\n\tvar nodes = root.querySelectorAll([\r\n\t\t\"a[href]\",\r\n\t\t\"area[href]\",\r\n\t\t\"input\",\r\n\t\t\"select\",\r\n\t\t\"textarea\",\r\n\t\t\"button\",\r\n\t\t\"iframe\",\r\n\t\t\"object\",\r\n\t\t\"embed\",\r\n\t\t\"[tabindex]\",\r\n\t\t\"[contenteditable]\"\r\n\t].join(\", \"));\r\n\r\n\tvar nodesArray = Array.prototype.slice.call(nodes, 0);\r\n\t\r\n\tfor(var i = 0; i < nodesArray.length; i++){\r\n\t\tnodesArray[i].$position = i;\r\n\t\t// we remember original nodes order, \r\n\t\t// so when we sort them by tabindex we ensure order of nodes with same tabindex is preserved, \r\n\t\t// since some browsers do unstable sort\r\n\t}\r\n\t\r\n\t// use tabindex to sort focusable nodes\r\n\tnodesArray.sort(function(a, b) {\r\n\t\tif(a.tabIndex === 0 && b.tabIndex !== 0){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\tif(a.tabIndex !== 0 && b.tabIndex === 0){\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\t\r\n\t\tif (a.tabIndex === b.tabIndex){\r\n\t\t\t// ensure we do stable sort\r\n\t\t\treturn a.$position - b.$position;\r\n\t\t}\r\n\t\tif (a.tabIndex < b.tabIndex) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\treturn 1;\r\n\t});\r\n\t\r\n\tfor(var i = 0; i < nodesArray.length; i++){\r\n\t\tvar node = nodesArray[i];\r\n\t\tvar isValid = (hasNonNegativeTabIndex(node)  || isEnabled(node) || hasHref(node)) && isVisible(node);\r\n\t\tif(!isValid){\r\n\t\t\tnodesArray.splice(i, 1);\r\n\t\t\ti--;\r\n\t\t}\r\n\t}\r\n\treturn nodesArray;\r\n}\r\n\r\nfunction getScrollSize(){\r\n\tvar div = document.createElement(\"div\");\r\n\tdiv.style.cssText=\"visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;\";\r\n\r\n\tdocument.body.appendChild(div);\r\n\tvar width = div.offsetWidth-div.clientWidth;\r\n\tdocument.body.removeChild(div);\r\n\r\n\treturn Math.max(width, 15);\r\n}\r\n\r\nfunction getClassName(node){\r\n\tif(!node) return \"\";\r\n\r\n\tvar className = node.className || \"\";\r\n\tif(className.baseVal)//'className' exist but not a string - IE svg element in DOM\r\n\t\tclassName = className.baseVal;\r\n\r\n\tif(!className.indexOf)\r\n\t\tclassName = \"\";\r\n\r\n\treturn _trimString(className);\r\n}\r\n\r\nfunction addClassName(node, className){\r\n\tif (className && node.className.indexOf(className) === -1) {\r\n\t\tnode.className += \" \" + className;\r\n\t}\r\n}\r\n\r\nfunction removeClassName(node, name) {\r\n\tname = name.split(\" \");\r\n\tfor (var i = 0; i < name.length; i++) {\r\n\t\tvar regEx = new RegExp(\"\\\\s?\\\\b\" + name[i] + \"\\\\b(?![-_.])\", \"\");\r\n\t\tnode.className = node.className.replace(regEx, \"\");\r\n\t}\r\n}\r\n\r\nfunction hasClass(element, className){\r\n\tif ('classList' in element) {\r\n\t\treturn element.classList.contains(className);\r\n\t} else { \r\n\t\treturn new RegExp(\"\\\\b\" + className + \"\\\\b\").test(element.className);\r\n\t}\r\n}\r\n\r\nfunction toNode(node) {\r\n\tif (typeof node === \"string\") {\r\n\t\treturn (document.getElementById(node) || document.querySelector(node) || document.body);\r\n\t}\r\n\treturn node || document.body;\r\n}\r\n\r\nvar _slave;\r\nfunction insertNode(node, newone) {\r\n\tif(!_slave){\r\n\t\t_slave = document.createElement(\"div\");\r\n\t}\r\n\t_slave.innerHTML = newone;\r\n\tvar child = _slave.firstChild;\r\n\tnode.appendChild(child);\r\n\treturn child;\r\n}\r\n\r\nfunction removeNode(node) {\r\n\tif (node && node.parentNode) {\r\n\t\tnode.parentNode.removeChild(node);\r\n\t}\r\n}\r\n\r\nfunction getChildNodes(node, css) {\r\n\tvar ch = node.childNodes;\r\n\tvar len = ch.length;\r\n\tvar out = [];\r\n\tfor (var i = 0; i < len; i++) {\r\n\t\tvar obj = ch[i];\r\n\t\tif (obj.className && obj.className.indexOf(css) !== -1) {\r\n\t\t\tout.push(obj);\r\n\t\t}\r\n\t}\r\n\treturn out;\r\n}\r\n\r\nfunction getTargetNode(e) {\r\n\tvar trg;\r\n\tif (e.tagName)\r\n\t\ttrg = e;\r\n\telse {\r\n\t\te = e || window.event;\r\n\t\ttrg = e.target || e.srcElement;\r\n\t\tif (trg.shadowRoot && e.composedPath) {\r\n\t\t\ttrg = e.composedPath()[0];\r\n\t\t}\r\n\t}\r\n\treturn trg;\r\n}\r\n\r\nfunction locateAttribute(e, attribute) {\r\n\tif(!attribute) return;\r\n\r\n\tvar trg = getTargetNode(e);\r\n\r\n\twhile (trg){\r\n\t\tif (trg.getAttribute){\t//text nodes has not getAttribute\r\n\t\t\tvar test = trg.getAttribute(attribute);\r\n\t\t\tif (test) return trg;\r\n\t\t}\r\n\t\t// GS-2941. With the `host`, Gantt will continue iteration outside the ShadowDOM\r\n\t\ttrg = trg.parentNode || trg.host;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction _trimString(str){\r\n\tvar func = String.prototype.trim || function(){ return this.replace(/^\\s+|\\s+$/g, \"\"); };\r\n\treturn func.apply(str);\r\n}\r\n\r\nfunction locateClassName(e, classname, strict){\r\n\tvar trg = getTargetNode(e);\r\n\tvar css = \"\";\r\n\r\n\tif(strict === undefined)\r\n\t\tstrict = true;\r\n\r\n\twhile (trg){\r\n\t\tcss = getClassName(trg);\r\n\t\tif(css){\r\n\t\t\tvar ind = css.indexOf(classname);\r\n\t\t\tif (ind >= 0){\r\n\t\t\t\tif (!strict)\r\n\t\t\t\t\treturn trg;\r\n\r\n\t\t\t\t//check that we have exact match\r\n\t\t\t\tvar left = (ind === 0) || (!_trimString(css.charAt(ind - 1)));\r\n\t\t\t\tvar right = ((ind + classname.length >= css.length)) || (!_trimString(css.charAt(ind + classname.length)));\r\n\r\n\t\t\t\tif (left && right)\r\n\t\t\t\t\treturn trg;\r\n\t\t\t}\r\n\t\t}\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\n/*\r\nevent position relatively to DOM element\r\n */\r\nfunction getRelativeEventPosition(ev, node){\r\n\tconst d = document.documentElement;\r\n\tconst box = getNodePosition(node);\r\n\t//GS-2809: condition to check event(mouse or touch)\r\n\tconst { clientX, clientY } = ev.touches?.[0] ?? ev;\r\n\treturn {\r\n\t\tx: clientX + d.scrollLeft - d.clientLeft - box.x + node.scrollLeft,\r\n\t\ty: clientY + d.scrollTop - d.clientTop - box.y + node.scrollTop\r\n\t};\r\n}\r\n\r\nfunction getRelativeNodePosition(child, parent){\r\n\tconst childPos = getNodePosition(child);\r\n\tconst parentPos = getNodePosition(parent);\r\n\treturn {\r\n\t\tx: childPos.x - parentPos.x,\r\n\t\ty: childPos.y - parentPos.y\r\n\t};\r\n}\r\n\r\nfunction isChildOf(child, parent){\r\n\tif(!child || !parent){\r\n\t\treturn false;\r\n\t}\r\n\r\n\twhile(child && child != parent) {\r\n\t\tchild = child.parentNode;\r\n\t}\r\n\r\n\treturn child === parent;\r\n}\r\n\r\nfunction closest(element, selector){\r\n\tif(element.closest){\r\n\t\treturn element.closest(selector);\r\n\t}else if(element.matches || element.msMatchesSelector || element.webkitMatchesSelector){\r\n\t\tvar el = element;\r\n\t\tif (!document.documentElement.contains(el)) return null;\r\n\t\tdo {\r\n\t\t\tvar method = el.matches || el.msMatchesSelector || el.webkitMatchesSelector;\r\n\r\n\t\t\tif (method.call(el, selector)) return el;\r\n\t\t\tel = el.parentElement || el.parentNode;\r\n\t\t} while (el !== null && el.nodeType === 1); \r\n\t\treturn null;\r\n\t}else{\r\n\t\t// eslint-disable-next-line no-console\r\n\t\tconsole.error(\"Your browser is not supported\");\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nfunction getClosestSizedElement(element) {\r\n\twhile (element) {\r\n\t\tif (element.offsetWidth > 0 && element.offsetHeight > 0) {\r\n\t\t\treturn element;\r\n\t\t}\r\n\t\telement = element.parentElement;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction isShadowDomSupported() {\r\n\treturn document.head.createShadowRoot || document.head.attachShadow;\r\n}\r\n\r\n/**\r\n * Returns element that has the browser focus, or null if no element has focus.\r\n * Works with shadow DOM, so it's prefereed to use this function instead of document.activeElement directly.\r\n * @returns HTMLElement\r\n */\r\nfunction getActiveElement(){\r\n\tvar activeElement = document.activeElement;\r\n\tif (activeElement.shadowRoot) {\r\n\t\tactiveElement = activeElement.shadowRoot.activeElement;\r\n\t}\r\n\tif (activeElement === document.body && document.getSelection) {\r\n\t\tactiveElement = document.getSelection().focusNode || document.body;\r\n\t}\r\n\r\n\treturn activeElement;\r\n}\r\n\r\n/**\r\n * Returns document.body or the host node of the ShadowRoot, if the element is attached to ShadowDom\r\n * @param {HTMLElement} element \r\n * @returns HTMLElement\r\n */\r\nfunction getRootNode(element) {\r\n\tif (!element) {\r\n\t\treturn document.body;\r\n\t}\r\n\tif (!isShadowDomSupported()) {\r\n\t\treturn document.body;\r\n\t}\r\n\twhile (element.parentNode && (element = element.parentNode)) {\r\n\t\tif (element instanceof ShadowRoot) {\r\n\t\t\treturn element.host;\r\n\t\t}\r\n\t}\r\n\treturn document.body;\r\n}\r\n\r\nfunction hasShadowParent(element) {\r\n\treturn !!getRootNode(element);\r\n}\r\n\r\nexport {\r\n\tgetNodePosition,\r\n\tgetFocusableNodes,\r\n\tgetScrollSize,\r\n\tgetClassName,\r\n\taddClassName,\r\n\tremoveClassName,\r\n\tinsertNode,\r\n\tremoveNode,\r\n\tgetChildNodes,\r\n\ttoNode,\r\n\tlocateClassName,\r\n\tlocateAttribute,\r\n\tgetTargetNode,\r\n\tgetRelativeEventPosition,\r\n\tisChildOf,\r\n\thasClass,\r\n\tclosest,\r\n\tgetRootNode,\r\n\thasShadowParent,\r\n\tisShadowDomSupported,\r\n\tgetActiveElement,\r\n\tgetRelativeNodePosition,\r\n\tgetClosestSizedElement\r\n};","\r\n/* eslint-disable no-restricted-globals */\r\nvar globalScope;\r\nif(typeof window !== \"undefined\"){\r\n\tglobalScope = window;\r\n}else{\r\n\tglobalScope = global;\r\n}\r\n/* eslint-enable no-restricted-globals */\r\n\r\nexport default globalScope;","import * as domHelpers from \"../../core/ui/utils/dom_helpers\";\r\nimport global from \"../../utils/global\";\r\nimport { SelectedRegion } from \"./selectedRegion\";\r\n\r\nexport class EventsManager {\r\n\tprivate _mouseDown: boolean = false;\r\n\tprivate _touchStarts: boolean = false;\r\n\tprivate _touchActive: boolean = false;\r\n\tprivate _longTapTimer: any = false;\r\n\tprivate _domEvents: any;\r\n\tprivate _originPosition: string;\r\n\tprivate _gantt: any;\r\n\tprivate _restoreOriginPosition: () => void;\r\n\tconstructor(gantt: any) {\r\n\t\tthis._gantt = gantt;\r\n\t\tthis._domEvents = gantt._createDomEventScope();\r\n\t}\r\n\r\n\tattach(selectedRegion: SelectedRegion, useKey?: \"shiftKey\" | \"ctrlKey\" | \"altKey\", ignore?: any): void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst _target = selectedRegion.getViewPort();\r\n\t\tthis._originPosition = global.getComputedStyle(_target).display;\r\n\t\tthis._restoreOriginPosition = () => {\r\n\t\t\t_target.style.position = this._originPosition;\r\n\t\t};\r\n\t\tif (this._originPosition === \"static\") {\r\n\t\t\t_target.style.position = \"relative\";\r\n\t\t}\r\n\t\tconst state = gantt.$services.getService(\"state\");\r\n\t\tstate.registerProvider(\"clickDrag\", () => {\r\n\t\t\tconst result = { autoscroll: false };\r\n\t\t\treturn result;\r\n\t\t});\r\n\r\n\r\n\t\tlet scheduledDndCoordinates:any = null;\r\n\t\tconst startDragAndDrop = () => {\r\n\t\t\tif (!scheduledDndCoordinates) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis._mouseDown = true;\r\n\t\t\tselectedRegion.setStart(gantt.copy(scheduledDndCoordinates));\r\n\t\t\tselectedRegion.setPosition(gantt.copy(scheduledDndCoordinates));\r\n\t\t\tselectedRegion.setEnd(gantt.copy(scheduledDndCoordinates));\r\n\t\t\tscheduledDndCoordinates = null;\r\n\t\t};\r\n\r\n\t\t// mouse events\r\n\t\tthis._domEvents.attach(_target, \"mousedown\", (event) => {\r\n\t\t\tstartDrag(event);\r\n\t\t});\r\n\t\tconst eventElement = domHelpers.getRootNode(gantt.$root) || document.body;\r\n\t\tthis._domEvents.attach(eventElement, \"mouseup\", (event) => {\r\n\t\t\tstopDrag(event);\r\n\t\t});\r\n\t\tthis._domEvents.attach(_target, \"mousemove\", (event) => {\r\n\t\t\tdragMove(event);\r\n\t\t});\r\n\r\n\t\t// touch events\r\n\t\tthis._domEvents.attach(_target, \"touchstart\", (event) => {\r\n\t\t\tthis._touchStarts = true;\r\n\t\t\tthis._longTapTimer = setTimeout(()=> {\r\n\t\t\t\tif (this._touchStarts){\r\n\t\t\t\t\tstartDrag(getTouchEvent (event));\r\n\t\t\t\t\tthis._touchStarts = false;\r\n\t\t\t\t\tthis._touchActive = true;\r\n\t\t\t\t}\r\n\t\t\t}, this._gantt.config.touch_drag);\r\n\t\t});\r\n\r\n\t\tthis._domEvents.attach(eventElement, \"touchend\", (event) => {\r\n\t\t\tthis._touchStarts = false;\r\n\t\t\tthis._touchActive = false;\r\n\t\t\tclearTimeout(this._longTapTimer);\r\n\t\t\tstopDrag(getTouchEvent (event));\r\n\t\t});\r\n\t\tthis._domEvents.attach(_target, \"touchmove\", (event) => {\r\n\t\t\tif (this._touchActive){\r\n\t\t\t\tlet filterTargets = getFilterTargets();\r\n\t\t\t\tif (filterTargets && gantt.utils.dom.closest(event.target, filterTargets)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tdragMove(getTouchEvent (event));\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t} else {\r\n\t\t\t\tthis._touchStarts = false;\r\n\t\t\t\tclearTimeout(this._longTapTimer);\t\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tfunction getTouchEvent (event){\r\n\t\t\tconst touchEvent = event.changedTouches && event.changedTouches[0] || event;\r\n\t\t\treturn touchEvent;\r\n\t\t}\r\n\r\n\t\tconst getFilterTargets = () => {\r\n\t\t\tlet filterTargets = \".gantt_task_line, .gantt_task_link\";\r\n\t\t\tif (ignore !== undefined) {\r\n\t\t\t\tif (ignore instanceof Array) {\r\n\t\t\t\t\tfilterTargets = ignore.join(\", \");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilterTargets = ignore;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn filterTargets;\r\n\t\t};\r\n\r\n\t\tconst startDrag: any = (event) => {\r\n\t\t\tscheduledDndCoordinates = null;\r\n\t\t\tlet filterTargets = getFilterTargets();\r\n\t\t\tif (filterTargets) {\r\n\t\t\t\tif (gantt.utils.dom.closest(event.target, filterTargets)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstate.registerProvider(\"clickDrag\", () => {\r\n\t\t\t\tconst result = { autoscroll: this._mouseDown };\r\n\t\t\t\treturn result;\r\n\t\t\t});\r\n\r\n\t\t\tif (useKey && event[useKey] !== true) { return; }\r\n\t\t\tscheduledDndCoordinates = this._getCoordinates(event, selectedRegion);\r\n\t\t};\r\n\r\n\t\tconst stopDrag: any = (event) => {\r\n\t\t\tscheduledDndCoordinates = null;\r\n\t\t\tif (useKey && event[useKey] !== true) { return; }\r\n\t\t\tif (this._mouseDown === true) {\r\n\t\t\t\tthis._mouseDown = false;\r\n\t\t\t\tconst coordinates = this._getCoordinates(event, selectedRegion);\r\n\t\t\t\tselectedRegion.dragEnd(coordinates);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst dragMove: any = (event) => {\r\n\t\t\tif (useKey && event[useKey] !== true) { return; }\r\n\t\t\t// GS-854. If we don't have useKey for the click_drag extension,\r\n\t\t\t// check the drag_timeline to not simultaneously use both extensions\r\n\t\t\tconst dragTimeline = this._gantt.ext.clickDrag;\r\n\t\t\tconst dragTimelineUseKey = (this._gantt.config.drag_timeline || {}).useKey;\r\n\t\t\tif (dragTimeline && dragTimelineUseKey) {\r\n\t\t\t\tif (!useKey && event[dragTimelineUseKey]) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet coordinates:any = null;\r\n\t\t\tif(!this._mouseDown && scheduledDndCoordinates){\r\n\t\t\t\tcoordinates = this._getCoordinates(event, selectedRegion);\r\n\t\t\t\tif(Math.abs(scheduledDndCoordinates.relative.left - coordinates.relative.left) > 5){\r\n\t\t\t\t\t// add small threshold not to start dnd on simple click\r\n\t\t\t\t\tstartDragAndDrop();\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this._mouseDown === true) {\r\n\t\t\t\tcoordinates = this._getCoordinates(event, selectedRegion);\r\n\t\t\t\tselectedRegion.setEnd(coordinates);\r\n\t\t\t\tselectedRegion.render();\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tdetach(): void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._domEvents.detachAll();\r\n\t\tif(this._restoreOriginPosition){\r\n\t\t\tthis._restoreOriginPosition();\r\n\t\t}\r\n\r\n\t\tconst state = gantt.$services.getService(\"state\");\r\n\t\tstate.unregisterProvider(\"clickDrag\");\r\n\t}\r\n\r\n\tdestructor(): void {\r\n\t\tthis.detach();\r\n\t}\r\n\r\n\tprivate _getCoordinates(event: MouseEvent, selectedRegion: SelectedRegion) {\r\n\t\tconst viewPort = selectedRegion.getViewPort();\r\n\t\tconst viewPortBounds = viewPort.getBoundingClientRect();\r\n\t\tconst { clientX, clientY } = event;\r\n\t\tconst result = {\r\n\t\t\tabsolute: {\r\n\t\t\t\tleft: clientX,\r\n\t\t\t\ttop: clientY\r\n\t\t\t},\r\n\t\t\trelative: {\r\n\t\t\t\tleft: clientX - viewPortBounds.left + viewPort.scrollLeft,\r\n\t\t\t\ttop: clientY - viewPortBounds.top + viewPort.scrollTop\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn result;\r\n\t}\r\n}","var EventHost = function(){\r\n\tthis._silent_mode = false;\r\n\tthis.listeners = {};\r\n};\r\n\r\nEventHost.prototype = {\r\n\t_silentStart: function() {\r\n\t\tthis._silent_mode = true;\r\n\t},\r\n\t_silentEnd: function() {\r\n\t\tthis._silent_mode = false;\r\n\t}\r\n};\r\n\r\nvar\tcreateEventStorage = function(obj) {\r\n\tvar handlers = {};\r\n\tvar index = 0;\r\n\tvar eventStorage = function(){\r\n\t\tvar combinedResult = true;\r\n\t\tfor(var i in handlers){\r\n\t\t\tvar handlerResult = handlers[i].apply(obj, arguments);\r\n\t\t\tcombinedResult=combinedResult && handlerResult;\r\n\t\t}\r\n\t\treturn combinedResult;\r\n\t};\r\n\teventStorage.addEvent=function(handler, settings){\r\n\t\tif (typeof (handler) == \"function\"){\r\n\t\t\tvar handlerId;\r\n\t\t\tif(settings && settings.id){\r\n\t\t\t\thandlerId = settings.id;\r\n\t\t\t}else{\r\n\t\t\t\thandlerId = index;\r\n\t\t\t\tindex++;\r\n\t\t\t}\r\n\r\n\t\t\tif(settings && settings.once){\r\n\t\t\t\tvar originalHandler = handler;\r\n\t\t\t\thandler = function(){\r\n\t\t\t\t\toriginalHandler();\r\n\t\t\t\t\teventStorage.removeEvent(handlerId);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\thandlers[handlerId] = handler;\r\n\t\t\treturn handlerId;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\teventStorage.removeEvent=function(id){\r\n\t\tdelete handlers[id];\r\n\t};\r\n\r\n\teventStorage.clear = function(){\r\n\t\thandlers = {};\r\n\t};\r\n\r\n\treturn eventStorage;\r\n};\r\n\r\nfunction makeEventable(obj){\r\n\r\n\tvar eventHost = new EventHost();\r\n\tobj.attachEvent=function(eventName, handler, settings){\r\n\t\teventName = 'ev_'+eventName.toLowerCase();\r\n\t\tif (!eventHost.listeners[eventName]){\r\n\t\t\teventHost.listeners[eventName] = createEventStorage(this);\r\n\t\t}\r\n\r\n\t\tif(settings && settings.thisObject){\r\n\t\t\thandler = handler.bind(settings.thisObject);\r\n\t\t}\r\n\r\n\t\tvar innerId = eventHost.listeners[eventName].addEvent(handler, settings);\r\n\r\n\t\tvar handlerId = (eventName+':'+innerId); //return ID (ev_eventname:1)\r\n\t\tif(settings && settings.id){\r\n\t\t\thandlerId = settings.id;\r\n\t\t}\r\n\t\treturn handlerId;\r\n\t};\r\n\r\n\tobj.attachAll = function(callback){\r\n\t\tthis.attachEvent('listen_all', callback);\r\n\t};\r\n\r\n\tobj.callEvent=function(name, eventArguments){\r\n\t\tif (eventHost._silent_mode) return true;\r\n\r\n\t\tvar handlerName = 'ev_'+name.toLowerCase();\r\n\r\n\t\tvar listeners = eventHost.listeners;\r\n\t\tif (listeners['ev_listen_all']){\r\n\t\t\tlisteners['ev_listen_all'].apply(this, [name].concat(eventArguments));\r\n\t\t}\r\n\r\n\t\tif (listeners[handlerName])\r\n\t\t\treturn listeners[handlerName].apply(this, eventArguments);\r\n\t\treturn true;\r\n\t};\r\n\r\n\tobj.checkEvent=function(name){\r\n\t\tvar listeners = eventHost.listeners;\r\n\t\treturn (!!listeners['ev_'+name.toLowerCase()]);\r\n\t};\r\n\r\n\tobj.detachEvent=function(id){\r\n\t\tif (id){\r\n\t\t\tvar listeners = eventHost.listeners;\r\n\t\t\tfor(var i in listeners){\r\n\t\t\t\tlisteners[i].removeEvent(id); //remove event\r\n\t\t\t}\r\n\r\n\t\t\tvar list = id.split(':');//get EventName and ID\r\n\t\t\tvar listeners = eventHost.listeners;\r\n\t\t\tif(list.length === 2){\r\n\t\t\t\tvar eventName = list[0];\r\n\t\t\t\tvar eventId = list[1];\r\n\t\t\t\tif(listeners[eventName]){\r\n\t\t\t\t\tlisteners[eventName].removeEvent(eventId); //remove event\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tobj.detachAllEvents = function(){\r\n\t\tfor (var name in eventHost.listeners) {\r\n\t\t\teventHost.listeners[name].clear();\r\n\t\t}\r\n\t};\r\n\r\n}\r\n\r\nexport default makeEventable;","var units = {\r\n\t\"second\": 1,\r\n\t\"minute\": 60,\r\n\t\"hour\": 60 * 60,\r\n\t\"day\": 60 * 60 * 24,\r\n\t\"week\": 60 * 60 * 24 * 7,\r\n\t\"month\": 60 * 60 * 24 * 30,\r\n\t\"quarter\": 60 * 60 * 24 * 30 * 3,\r\n\t\"year\": 60 * 60 * 24 * 365\r\n};\r\nfunction getSecondsInUnit(unit){\r\n\treturn units[unit] || units.hour;\r\n}\r\n\r\nfunction forEach(arr, callback) {\r\n\tif (arr.forEach) {\r\n\t\tarr.forEach(callback);\r\n\t} else {\r\n\t\tvar workArray = arr.slice();\r\n\t\tfor (var i = 0; i < workArray.length; i++) {\r\n\t\t\tcallback(workArray[i], i);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction arrayMap(arr, callback) {\r\n\tif (arr.map) {\r\n\t\treturn arr.map(callback);\r\n\t} else {\r\n\t\tvar workArray = arr.slice();\r\n\t\tvar resArray = [];\r\n\r\n\t\tfor (var i = 0; i < workArray.length; i++) {\r\n\t\t\tresArray.push(callback(workArray[i], i));\r\n\t\t}\r\n\t\treturn resArray;\r\n\t}\r\n}\r\n\r\n\r\nfunction arrayFind(arr, callback) {\r\n\tif (arr.find) {\r\n\t\treturn arr.find(callback);\r\n\t} else {\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tif (callback(arr[i], i)) {\r\n\t\t\t\treturn arr[i];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction arrayIncludes(arr, item) {\r\n\tif(arr.includes){\r\n\t\treturn arr.includes(item);\r\n\t}else{\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tif (arr[i] === item) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\n// iframe-safe array type check instead of using instanceof\r\nfunction isArray(obj){\r\n\tif(Array.isArray){\r\n\t\treturn Array.isArray(obj);\r\n\t}else{\r\n\t\t// close enough\r\n\t\treturn (obj && obj.length !== undefined && obj.pop && obj.push);\r\n\t}\r\n}\r\n\r\n// non-primitive string object, e.g. new String(\"abc\")\r\nfunction isStringObject(obj){\r\n\treturn obj && typeof obj === \"object\"\r\n\t\t&& Function.prototype.toString.call(obj.constructor) === \"function String() { [native code] }\";\r\n}\r\n\r\n// non-primitive number object, e.g. new Number(5)\r\nfunction isNumberObject(obj){\r\n\treturn obj && typeof obj === \"object\"\r\n\t\t&& Function.prototype.toString.call(obj.constructor) === \"function Number() { [native code] }\";\r\n}\r\n\r\n// non-primitive number object, e.g. new Boolean(true)\r\nfunction isBooleanObject(obj){\r\n\treturn obj && typeof obj === \"object\"\r\n\t\t&& Function.prototype.toString.call(obj.constructor) === \"function Boolean() { [native code] }\";\r\n}\r\n\r\nfunction isDate(obj) {\r\n\tif (obj && typeof obj === \"object\") {\r\n\t\treturn !!(obj.getFullYear && obj.getMonth && obj.getDate);\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nfunction isValidDate(obj){\r\n\treturn isDate(obj) && !isNaN(obj.getTime());\r\n}\r\n\r\nfunction arrayFilter(arr, callback) {\r\n\tvar result = [];\r\n\r\n\tif (arr.filter) {\r\n\t\treturn arr.filter(callback);\r\n\t} else {\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tif (callback(arr[i], i)) {\r\n\t\t\t\tresult[result.length] = arr[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n}\r\n\r\nfunction hashToArray(hash) {\r\n\tvar result = [];\r\n\r\n\tfor (var key in hash) {\r\n\t\tif (hash.hasOwnProperty(key)) {\r\n\t\t\tresult.push(hash[key]);\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n}\r\n\r\nfunction arraySome(arr, callback) {\r\n\tif (arr.length === 0) return false;\r\n\r\n\tfor (var i = 0; i < arr.length; i++) {\r\n\t\tif (callback(arr[i], i, arr)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction arrayDifference(arr, callback) {\r\n\treturn arrayFilter(arr, function(item, i) {\r\n\t\treturn !callback(item, i);\r\n\t});\r\n}\r\n\r\nfunction throttle (callback, timeout) {\r\n\tvar wait = false;\r\n\r\n\treturn function () {\r\n\t\tif (!wait) {\r\n\t\t\tcallback.apply(null, arguments);\r\n\t\t\twait = true;\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\twait = false;\r\n\t\t\t}, timeout);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction delay (callback, timeout){\r\n\tvar timer;\r\n\r\n\tvar result = function() {\r\n\t\tresult.$cancelTimeout();\r\n\t\tresult.$pending = true;\r\n\t\tvar args = Array.prototype.slice.call(arguments);\r\n\t\ttimer = setTimeout(function(){\r\n\t\t\tcallback.apply(this, args);\r\n\t\t\tresult.$pending = false;\r\n\t\t}, timeout);\r\n\t};\r\n\r\n\tresult.$pending = false;\r\n\tresult.$cancelTimeout = function(){\r\n\t\tclearTimeout(timer);\r\n\t\tresult.$pending = false;\r\n\t};\r\n\tresult.$execute = function(){\r\n\t\tvar args = Array.prototype.slice.call(arguments);\r\n\t\tcallback.apply(this, args);\r\n\t\tresult.$cancelTimeout();\r\n\t};\r\n\r\n\treturn result;\r\n}\r\n\r\nfunction sortArrayOfHash(arr, field, desc) {\r\n\tvar compare = function(a, b) {\r\n\t\treturn a < b;\r\n\t};\r\n\r\n\tarr.sort(function(a, b) {\r\n\t\tif (a[field] === b[field]) return 0;\r\n\r\n\t\treturn desc ? compare(a[field], b[field]) : compare(b[field], a[field]);\r\n\t});\r\n}\r\n\r\nfunction objectKeys(obj) {\r\n\tif (Object.keys) {\r\n\t\treturn Object.keys(obj);\r\n\t}\r\n\tvar result = [];\r\n\tvar key;\r\n\tfor (key in obj) {\r\n\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n\t\t\tresult.push(key);\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction isEventable(obj) {\r\n\treturn obj.attachEvent && obj.detachEvent;\r\n}\r\n\r\n//GS-1090: A task should be able to have the id = 0\r\nfunction replaceValidZeroId(id, rootId) {\r\n\tif (checkZeroId(id) && !checkZeroId(rootId)){\r\n\t\tid = \"0\";\r\n\t}\r\n\treturn id;\r\n}\r\n\r\nfunction checkZeroId(id) {\r\n\tif (id === 0){\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction findBinary(array, target) {\r\n\t// modified binary search, target value not exactly match array elements, looking for closest one\r\n\r\n\tvar low = 0, high = array.length - 1, i, item, prev;\r\n\twhile (low <= high) {\r\n\r\n\t\ti = Math.floor((low + high) / 2);\r\n\t\titem = +array[i];\r\n\t\tprev = +array[i - 1];\r\n\t\tif (item < target) {\r\n\t\t\tlow = i + 1;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tif (item > target) {\r\n\t\t\tif (!(!isNaN(prev) && prev < target)) {\r\n\t\t\t\thigh = i - 1;\r\n\t\t\t\tcontinue;\r\n\t\t\t} else {\r\n\t\t\t\t// if target is between 'i' and 'i-1' return 'i - 1'\r\n\t\t\t\treturn i - 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\twhile (+array[i] == +array[i + 1]) i++;\r\n\r\n\t\treturn i;\r\n\t}\r\n\treturn array.length - 1;\r\n}\r\n\r\nexport {\r\n\tgetSecondsInUnit,\r\n\tforEach,\r\n\tarrayMap,\r\n\tarrayIncludes,\r\n\tarrayFind,\r\n\tarrayFilter,\r\n\tarrayDifference,\r\n\tarraySome,\r\n\thashToArray,\r\n\tsortArrayOfHash,\r\n\tthrottle,\r\n\tisArray,\r\n\tisDate,\r\n\tisValidDate,\r\n\tisStringObject,\r\n\tisNumberObject,\r\n\tisBooleanObject,\r\n\tdelay,\r\n\tobjectKeys,\r\n\tisEventable,\r\n\treplaceValidZeroId,\r\n\tcheckZeroId,\r\n\tfindBinary\r\n};","import eventable from \"../../utils/eventable\";\r\nimport { isEventable } from \"../../utils/helpers\";\r\n\r\nexport interface ISelectedRegionConfig {\r\n\tclassName?: string;\r\n\trender?: (startPoint: IPoint, endPoint: IPoint) => HTMLElement;\r\n\tviewPort?: HTMLElement;\r\n\tuseRequestAnimationFrame: boolean;\r\n\tcallback?: (startPoint: IPoint, endPoint: IPoint, startDate: Date, endDate: Date, tasksByDate: any[], tasksByIndex: any[]) => void;\r\n\tsingleRow: boolean;\r\n}\r\n\r\ninterface ICoordinates {\r\n\tleft: number;\r\n\ttop: number;\r\n}\r\n\r\nexport interface IPoint {\r\n\tabsolute: ICoordinates;\r\n\trelative: ICoordinates;\r\n}\r\n\r\nexport class SelectedRegion {\r\n\trender: () => void;\r\n\tprivate _viewPort: HTMLElement & eventable;\r\n\tprivate _el: HTMLElement = document.createElement(\"div\");\r\n\tprivate _callback: (startPoint: IPoint, endPoint: IPoint, startDate: Date, endDate: Date, tasksByDate: any[], tasksByIndex: any[]) => void;\r\n\tprivate _startPoint: IPoint;\r\n\tprivate _endPoint: IPoint;\r\n\tprivate _positionPoint: IPoint;\r\n\tprivate _useRequestAnimationFrame: boolean;\r\n\tprivate _startDate: Date;\r\n\tprivate _endDate: Date;\r\n\tprivate _singleRow: boolean;\r\n\tprivate _gantt: any;\r\n\tprivate _view: any;\r\n\r\n\tconstructor(config: ISelectedRegionConfig, gantt: any, view: any) {\r\n\t\tthis._gantt = gantt;\r\n\t\tthis._view = view;\r\n\t\tthis._viewPort = config.viewPort;\r\n\t\tthis._el.classList.add(config.className);\r\n\t\tif (typeof config.callback === \"function\") {\r\n\t\t\tthis._callback = config.callback;\r\n\t\t}\r\n\r\n\t\tthis.render = () => {\r\n\t\t\tlet node;\r\n\t\t\tif(config.render){\r\n\t\t\t\tnode = config.render(this._startPoint, this._endPoint);\r\n\t\t\t}else{\r\n\t\t\t\tnode = this.defaultRender(this._startPoint, this._endPoint);\r\n\t\t\t}\r\n\r\n\t\t\tif(node !== this._el){\r\n\t\t\t\tif(this._el && this._el.parentNode){\r\n\t\t\t\t\tthis._el.parentNode.removeChild(this._el);\r\n\t\t\t\t}\r\n\t\t\t\tthis._el = node;\r\n\t\t\t}\r\n\r\n\t\t\tif (config.className !== \"\") {\r\n\t\t\t\tthis._el.classList.add(config.className);\r\n\t\t\t}\r\n\t\t\tthis.draw();\r\n\t\t};\r\n\r\n\t\tif (!isEventable(this._viewPort)) {\r\n\t\t\teventable(this._viewPort);\r\n\t\t}\r\n\t\tthis._singleRow = config.singleRow;\r\n\t\tthis._useRequestAnimationFrame = config.useRequestAnimationFrame;\r\n\t}\r\n\r\n\tdefaultRender = (start: IPoint, end: IPoint) => {\r\n\t\tif(!this._el){\r\n\t\t\tthis._el = document.createElement(\"div\");\r\n\t\t}\r\n\t\tconst node = this._el;\r\n\t\t// const gantt = this._gantt;\r\n\r\n\t\tconst top = Math.min(start.relative.top, end.relative.top);\r\n\t\tconst bottom = Math.max(start.relative.top, end.relative.top);\r\n\t\tconst left = Math.min(start.relative.left, end.relative.left);\r\n\t\tconst right = Math.max(start.relative.left, end.relative.left);\r\n\r\n\t\tif (this._singleRow) {\r\n\t\t\tconst pos = this._getTaskPositionByTop(this._startPoint.relative.top);\r\n\t\t\tnode.style.height = pos.height + \"px\";\r\n\t\t\tnode.style.top = pos.top + \"px\";\r\n\t\t} else {\r\n\t\t\tnode.style.height = Math.abs(bottom - top) + \"px\";\r\n\t\t\tnode.style.top = top + \"px\";\r\n\t\t}\r\n\t\tnode.style.width = Math.abs(right - left) + \"px\";\r\n\t\tnode.style.left = left + \"px\";\r\n\t\treturn node;\r\n\t};\r\n\r\n\tdraw() {\r\n\t\tif (this._useRequestAnimationFrame) {\r\n\t\t\treturn requestAnimationFrame(() => {\r\n\t\t\t\tthis._viewPort.appendChild(this.getElement());\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._viewPort.appendChild(this.getElement());\r\n\t\t}\r\n\t}\r\n\r\n\tclear() {\r\n\t\tif (this._useRequestAnimationFrame) {\r\n\t\t\treturn requestAnimationFrame(() => {\r\n\t\t\t\tif (!this._el.parentNode) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis._viewPort.removeChild(this._el);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tif (!this._el.parentNode) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._viewPort.removeChild(this._el);\r\n\t\t}\r\n\t}\r\n\r\n\tgetElement() {\r\n\t\treturn this._el;\r\n\t}\r\n\r\n\tgetViewPort() {\r\n\t\treturn this._viewPort;\r\n\t}\r\n\r\n\tsetStart(startPoint: IPoint) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._startPoint = startPoint;\r\n\t\tthis._startDate = gantt.dateFromPos(this._startPoint.relative.left);\r\n\t\tthis._viewPort.callEvent(\"onBeforeDrag\", [this._startPoint]);\r\n\t}\r\n\r\n\tsetEnd(endPoint: IPoint) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._endPoint = endPoint;\r\n\t\tif (this._singleRow) {\r\n\t\t\tconst pos = this._getTaskPositionByTop(this._startPoint.relative.top);\r\n\t\t\tthis._endPoint.relative.top = pos.top;\r\n\t\t}\r\n\t\tthis._endDate = gantt.dateFromPos(this._endPoint.relative.left);\r\n\t\tif (this._startPoint.relative.left > this._endPoint.relative.left) {\r\n\t\t\tthis._positionPoint = {\r\n\t\t\t\trelative: { left: this._endPoint.relative.left, top: this._positionPoint.relative.top },\r\n\t\t\t\tabsolute: { left: this._endPoint.absolute.left, top: this._positionPoint.absolute.top }\r\n\t\t\t};\r\n\t\t}\r\n\t\tif (this._startPoint.relative.top > this._endPoint.relative.top) {\r\n\t\t\tthis._positionPoint = {\r\n\t\t\t\trelative: { left: this._positionPoint.relative.left, top: this._endPoint.relative.top },\r\n\t\t\t\tabsolute: { left: this._positionPoint.absolute.left, top: this._endPoint.absolute.top }\r\n\t\t\t};\r\n\t\t}\r\n\r\n\r\n\t\tthis._viewPort.callEvent(\"onDrag\", [this._startPoint, this._endPoint]);\r\n\t}\r\n\r\n\tsetPosition(positionPoint: IPoint) {\r\n\t\tthis._positionPoint = positionPoint;\r\n\t}\r\n\r\n\tdragEnd(endPoint: IPoint) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tif(endPoint.relative.left < 0){\r\n\t\t\tendPoint.relative.left = 0;\r\n\t\t}\r\n\t\tthis._viewPort.callEvent(\"onBeforeDragEnd\", [this._startPoint, endPoint]);\r\n\t\tthis.setEnd(endPoint);\r\n\t\t// GS-1422. The endDate can be null if we drag the mouse outside the Gantt container\r\n\t\tthis._endDate = this._endDate || gantt.getState().max_date;\r\n\r\n\t\tif (this._startDate.valueOf() > this._endDate.valueOf()) {\r\n\t\t\t[ this._startDate, this._endDate ] = [ this._endDate, this._startDate ];\r\n\t\t}\r\n\t\tthis.clear();\r\n\t\tconst tasksByTime = gantt.getTaskByTime(this._startDate, this._endDate);\r\n\t\tconst tasksByIndex = this._getTasksByTop(this._startPoint.relative.top, this._endPoint.relative.top);\r\n\r\n\t\tthis._viewPort.callEvent(\"onDragEnd\", [this._startPoint, this._endPoint]);\r\n\t\tif (this._callback) {\r\n\t\t\tthis._callback(this._startPoint, this._endPoint, this._startDate, this._endDate, tasksByTime, tasksByIndex);\r\n\t\t}\r\n\t}\r\n\r\n\tgetInBounds() {\r\n\t\treturn this._singleRow;\r\n\t}\r\n\r\n\tprivate _getTasksByTop(start: number, end:number) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tlet startValue = start;\r\n\t\tlet endValue = end;\r\n\t\tif (start > end) {\r\n\t\t\tstartValue = end;\r\n\t\t\tendValue = start;\r\n\t\t}\r\n\t\tconst startIndex = this._getTaskPositionByTop(startValue).index;\r\n\t\tconst endIndex = this._getTaskPositionByTop(endValue).index;\r\n\t\tconst result = [];\r\n\t\tfor (let i = startIndex; i <= endIndex; i++) {\r\n\t\t\tconst task = gantt.getTaskByIndex(i);\r\n\t\t\tif (task) {\r\n\t\t\t\tresult.push(gantt.getTaskByIndex(i));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tprivate _getTaskPositionByTop(top: number){\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst view = this._view;\r\n\t\tconst index = view.getItemIndexByTopPosition(top);\r\n\t\tconst task = gantt.getTaskByIndex(index);\r\n\t\tif(task){\r\n\t\t\tconst height = view.getItemHeight(task.id);\r\n\t\t\tconst itemTop = view.getItemTop(task.id);\r\n\t\t\treturn {\r\n\t\t\t\ttop: itemTop || 0,\r\n\t\t\t\theight: height || 0,\r\n\t\t\t\tindex\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tconst dataHeight = view.getTotalHeight();\r\n\t\t\treturn {\r\n\t\t\t\ttop: top > dataHeight ? dataHeight : 0,\r\n\t\t\t\theight: gantt.config.row_height,\r\n\t\t\t\tindex: top > dataHeight ? gantt.getTaskCount() : 0\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n}","interface IPoint {\r\n\tx: number;\r\n\ty: number;\r\n}\r\n\r\nlet _dragInProgress: boolean = false;\r\n\r\nexport class EventsManager {\r\n\tstatic create(gantt: any) {\r\n\t\treturn new EventsManager(gantt);\r\n\t}\r\n\tstatic _isDragInProgress() {\r\n\t\treturn _dragInProgress;\r\n\t}\r\n\tprivate _mouseDown: boolean = false;\r\n\tprivate _startPoint: IPoint;\r\n\tprivate _scrollState: IPoint;\r\n\tprivate _originAutoscroll: boolean;\r\n\tprivate _domEvents: any;\r\n\tprivate _timeline: any;\r\n\tprivate _gantt: any;\r\n\tprivate _trace: IPoint[];\r\n\tprivate _originalReadonly: boolean;\r\n\r\n\tconstructor(gantt: any) {\r\n\t\tthis._gantt = gantt;\r\n\t\tthis._domEvents = gantt._createDomEventScope();\r\n\t\tthis._trace = [];\r\n\t}\r\n\r\n\tdestructor() {\r\n\t\tthis._domEvents.detachAll();\r\n\t}\r\n\r\n\tattach(timeline: any): void {\r\n\t\tthis._timeline = timeline;\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._domEvents.attach(timeline.$task, \"mousedown\", (event) => {\r\n\t\t\tif (!gantt.config.drag_timeline) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst { useKey,ignore, enabled } = gantt.config.drag_timeline;\r\n\t\t\tif(enabled === false) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tlet filterTargets = \".gantt_task_line, .gantt_task_link\";\r\n\t\t\tif(ignore !== undefined) {\r\n\t\t\t\tif(ignore instanceof Array){\r\n\t\t\t\t\tfilterTargets = ignore.join(\", \");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilterTargets = ignore;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (filterTargets) {\r\n\t\t\t\tif (gantt.utils.dom.closest(event.target, filterTargets)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (useKey && event[useKey] !== true) { return; }\r\n\r\n\t\t\tthis._startDrag(event);\r\n\t\t});\r\n\r\n\t\tthis._domEvents.attach(document, \"keydown\", (event) => {\r\n\t\t\tif (!gantt.config.drag_timeline) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst { useKey } = gantt.config.drag_timeline;\r\n\t\t\tif (useKey && event[useKey] === true) {\r\n\t\t\t\tthis._applyDndReadyStyles();\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis._domEvents.attach(document, \"keyup\", (event) => {\r\n\t\t\tif (!gantt.config.drag_timeline) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst { useKey } = gantt.config.drag_timeline;\r\n\t\t\tif (useKey && event[useKey] === false) {\r\n\t\t\t\tthis._clearDndReadyStyles();\r\n\t\t\t\tthis._stopDrag(event);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis._domEvents.attach(document, \"mouseup\", (event) => {\r\n\t\t\tthis._stopDrag(event);\r\n\t\t});\r\n\t\tthis._domEvents.attach(gantt.$root, \"mouseup\", (event) => {\r\n\t\t\tthis._stopDrag(event);\r\n\t\t});\r\n\t\tthis._domEvents.attach(document, \"mouseleave\", (event) => {\r\n\t\t\tthis._stopDrag(event);\r\n\t\t});\r\n\t\tthis._domEvents.attach(gantt.$root, \"mouseleave\", (event) => {\r\n\t\t\tthis._stopDrag(event);\r\n\t\t});\r\n\r\n\t\tthis._domEvents.attach(gantt.$root, \"mousemove\", (event) => {\r\n\t\t\tif (!gantt.config.drag_timeline) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst { useKey } = gantt.config.drag_timeline;\r\n\t\t\tif (useKey && event[useKey] !== true) { return; }\r\n\t\t\t// GS-854. If we don't have useKey for the drag_timeline extension,\r\n\t\t\t// check the click_drag to not simultaneously use both extensions\r\n\t\t\tconst clickDrag = this._gantt.ext.clickDrag;\r\n\t\t\tconst clickDragUseKey = (this._gantt.config.click_drag || {}).useKey;\r\n\t\t\tif (clickDrag && clickDragUseKey) {\r\n\t\t\t\tif (!useKey && event[clickDragUseKey]) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this._mouseDown === true) {\r\n\t\t\t\tthis._trace.push({ x: event.clientX, y: event.clientY });\r\n\t\t\t\tconst scrollPosition: IPoint = this._countNewScrollPosition({ x: event.clientX, y: event.clientY });\r\n\t\t\t\tthis._setScrollPosition(timeline, scrollPosition);\r\n\t\t\t\tthis._scrollState = scrollPosition;\r\n\t\t\t\tthis._startPoint = { x: event.clientX, y: event.clientY };\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _calculateDirectionVector = () => {\r\n\t\tconst traceSteps = 10;\r\n\t\tif(this._trace.length >= traceSteps) {\r\n\t\t\tconst dots = this._trace.slice(this._trace.length - traceSteps);\r\n\r\n\t\t\tconst vectors = [];\r\n\t\t\tfor(let i = 1; i < dots.length; i++) {\r\n\t\t\t\tvectors.push({\r\n\t\t\t\t\tx: dots[i].x - dots[i - 1].x,\r\n\t\t\t\t\ty: dots[i].y - dots[i - 1].y\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tconst resultVector = {x:0, y:0};\r\n\r\n\t\t\tvectors.forEach((vector) => {\r\n\t\t\t\tresultVector.x += vector.x;\r\n\t\t\t\tresultVector.y += vector.y;\r\n\t\t\t});\r\n\r\n\t\t\tconst magnitude = Math.sqrt(resultVector.x*resultVector.x + resultVector.y*resultVector.y);\r\n\t\t\tconst angleDegrees = Math.atan2(Math.abs(resultVector.y), Math.abs(resultVector.x)) * 180 / Math.PI;\r\n\r\n\t\t\treturn {\r\n\t\t\t\tmagnitude,\r\n\t\t\t\tangleDegrees\r\n\t\t\t};\r\n\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\tprivate _applyDndReadyStyles = (): void => {\r\n\t\tthis._timeline.$task.classList.add(\"gantt_timeline_move_available\");\r\n\t};\r\n\r\n\tprivate _clearDndReadyStyles = (): void => {\r\n\t\tthis._timeline.$task.classList.remove(\"gantt_timeline_move_available\");\r\n\t};\r\n\r\n\tprivate _getScrollPosition = (timeline: any): IPoint => {\r\n\t\tconst gantt = this._gantt;\r\n\t\treturn {\r\n\t\t\tx: gantt.$ui.getView(timeline.$config.scrollX).getScrollState().position,\r\n\t\t\ty: gantt.$ui.getView(timeline.$config.scrollY).getScrollState().position\r\n\t\t};\r\n\t};\r\n\tprivate _countNewScrollPosition = (coords: IPoint): IPoint => {\r\n\t\tconst vector = this._calculateDirectionVector();\r\n\t\tlet shiftX = this._startPoint.x - coords.x;\r\n\t\tlet shiftY = this._startPoint.y - coords.y;\r\n\t\tif(vector){\r\n\t\t\tif(vector.angleDegrees < 15){\r\n\t\t\t\tshiftY = 0;\r\n\t\t\t} else if(vector.angleDegrees > 75){\r\n\t\t\t\tshiftX = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst result = {\r\n\t\t\tx: this._scrollState.x + shiftX,\r\n\t\t\ty: this._scrollState.y + shiftY\r\n\t\t};\r\n\t\treturn result;\r\n\t};\r\n\tprivate _setScrollPosition = (timeline: any, coords: IPoint): void => {\r\n\t\tconst gantt = this._gantt;\r\n\t\trequestAnimationFrame(() => {\r\n\t\t\tgantt.scrollLayoutCell(timeline.$id, coords.x, coords.y);\r\n\t\t});\r\n\t};\r\n\tprivate _stopDrag = (event: Event): void => {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._trace = [];\r\n\t\tgantt.$root.classList.remove(\"gantt_noselect\");\r\n\r\n\t\t// We need to set the readonly mode because with the key modifiers, \r\n\t\t// users may expect to start dragging the timeline on the task and link coordinates\r\n\t\tif(this._originalReadonly !== undefined && this._mouseDown){\r\n\t\t\tgantt.config.readonly = this._originalReadonly;\r\n\t\t\tif(gantt.config.drag_timeline && gantt.config.drag_timeline.render){\r\n\t\t\t\tgantt.render();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this._originAutoscroll !== undefined){\r\n\t\t\tgantt.config.autoscroll = this._originAutoscroll;\r\n\t\t}\r\n\r\n\t\tif(gantt.config.drag_timeline){\r\n\t\t\tconst { useKey } = gantt.config.drag_timeline;\r\n\t\t\tif (useKey && event[useKey] !== true) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._mouseDown = false;\r\n\t\t_dragInProgress = false;\r\n\t};\r\n\r\n\tprivate _startDrag = (event: any) : void => {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._originAutoscroll = gantt.config.autoscroll;\r\n\t\tgantt.config.autoscroll = false;\r\n\t\t_dragInProgress = true;\r\n\r\n\t\tgantt.$root.classList.add(\"gantt_noselect\");\r\n\t\tthis._originalReadonly = gantt.config.readonly;\r\n\t\tgantt.config.readonly = true;\r\n\r\n\t\tif(gantt.config.drag_timeline && gantt.config.drag_timeline.render){\r\n\t\t\tgantt.render();\r\n\t\t}\r\n\r\n\t\tthis._trace = [];\r\n\t\tthis._mouseDown = true;\r\n\t\tconst { x, y } = this._getScrollPosition(this._timeline);\r\n\t\tthis._scrollState = { x, y };\r\n\t\tthis._startPoint = { x: event.clientX, y: event.clientY };\r\n\t\tthis._trace.push(this._startPoint);\r\n\t};\r\n}","import * as helpers from \"./helpers\";\r\n\r\nvar plainObjectConstructor = ({}).constructor.toString();\r\nfunction isCustomType(object){\r\n\tvar constructorString = object.constructor.toString();\r\n\r\n\treturn constructorString !== plainObjectConstructor;\r\n}\r\n\r\nfunction isExternalType(object){\r\n\t// react elements are not plain objects, but they are not custom types either\r\n\t// can't deep copy them\r\n\treturn object.$$typeof && object.$$typeof.toString().includes(\"react.\");\r\n}\r\n\r\nfunction copy(object) {\r\n\tvar i, result; // iterator, types array, result\r\n\r\n\tif (object && typeof object == \"object\") {\r\n\r\n\t\tswitch (true){\r\n\t\t\tcase (helpers.isDate(object)):\r\n\t\t\t\tresult = new Date(object);\r\n\t\t\t\tbreak;\r\n\t\t\tcase (helpers.isArray(object)):\r\n\t\t\t\tresult = new Array(object.length);\r\n\t\t\t\tfor(i = 0; i < object.length; i++){\r\n\t\t\t\t\tresult[i] = copy(object[i]);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t/*\t\tcase (helpers.isStringObject(object)):\r\n\t\t\t\tresult = new String(object);\r\n\t\t\t\tbreak;\r\n\t\t\tcase (helpers.isNumberObject(object)):\r\n\t\t\t\tresult = new Number(object);\r\n\t\t\t\tbreak;\r\n\t\t\tcase (helpers.isBooleanObject(object)):\r\n\t\t\t\tresult = new Boolean(object);\r\n\t\t\t\tbreak;*/\r\n\t\t\tdefault:\r\n\t\t\t\tif(isCustomType(object)){\r\n\t\t\t\t\tresult = Object.create(object);\r\n\t\t\t\t}else if (isExternalType(object)){\r\n\t\t\t\t\tresult = object;\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (i in object) {\r\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.apply(object, [i]))\r\n\t\t\t\t\t\tresult[i] = copy(object[i]);\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\treturn result || object;\r\n}\r\n\r\nfunction mixin (target, source, force){\r\n\tfor (var f in source)\r\n\t\tif (((target[f] === undefined) || force)) target[f]=source[f];\r\n\treturn target;\r\n}\r\n\r\nfunction defined(obj) {\r\n\treturn typeof(obj) != \"undefined\";\r\n}\r\n\r\nvar seed;\r\nfunction uid() {\r\n\tif (!seed)\r\n\t\tseed = (new Date()).valueOf();\r\n\r\n\tseed++;\r\n\treturn seed;\r\n}\r\n\r\n//creates function with specified \"this\" pointer\r\nfunction bind(functor, object){\r\n\tif(functor.bind)\r\n\t\treturn functor.bind(object);\r\n\telse\r\n\t\treturn function(){ return functor.apply(object,arguments); };\r\n}\r\n\r\nfunction event(el, event, handler, capture){\r\n\tif (el.addEventListener)\r\n\t\tel.addEventListener(event, handler, capture === undefined ? false : capture);\r\n\r\n\telse if (el.attachEvent)\r\n\t\tel.attachEvent(\"on\"+event, handler);\r\n}\r\n\r\nfunction eventRemove(el, event, handler, capture){\r\n\tif (el.removeEventListener)\r\n\t\tel.removeEventListener(event, handler, capture === undefined ? false : capture);\r\n\r\n\telse if (el.detachEvent)\r\n\t\tel.detachEvent(\"on\"+event, handler);\r\n}\r\n\r\nexport {\r\n\tcopy,\r\n\tdefined,\r\n\tmixin,\r\n\tuid,\r\n\tbind,\r\n\tevent,\r\n\teventRemove\r\n};","import * as utils from \"../../../utils/utils\";\r\n\r\nfunction ScaleHelper(gantt){\r\n\tvar dateHelper = gantt.date;\r\n\tvar services = gantt.$services;\r\n\r\n\treturn {\r\n\t\tgetSum: function (sizes, from, to) {\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = sizes.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\r\n\t\t\tvar summ = 0;\r\n\t\t\tfor (var i = from; i <= to; i++)\r\n\t\t\t\tsumm += sizes[i];\r\n\r\n\t\t\treturn summ;\r\n\t\t},\r\n\t\tsetSumWidth: function (sum_width, scale, from, to) {\r\n\t\t\tvar parts = scale.width;\r\n\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tif (from > parts.length - 1 || length <= 0 || to > parts.length - 1)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar oldWidth = this.getSum(parts, from, to);\r\n\r\n\t\t\tvar diff = sum_width - oldWidth;\r\n\r\n\t\t\tthis.adjustSize(diff, parts, from, to);\r\n\t\t\tthis.adjustSize(-diff, parts, to + 1);\r\n\r\n\t\t\tscale.full_width = this.getSum(parts);\r\n\t\t},\r\n\t\tsplitSize: function (width, count) {\r\n\t\t\tvar arr = [];\r\n\t\t\tfor (var i = 0; i < count; i++) arr[i] = 0;\r\n\r\n\t\t\tthis.adjustSize(width, arr);\r\n\t\t\treturn arr;\r\n\r\n\t\t},\r\n\t\tadjustSize: function (width, parts, from, to) {\r\n\t\t\tif (!from)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tvar full = this.getSum(parts, from, to);\r\n\r\n\t\t\tfor (var i = from; i <= to; i++) {\r\n\t\t\t\tvar share = Math.floor(width * (full ? (parts[i] / full) : (1 / length)));\r\n\r\n\t\t\t\tfull -= parts[i];\r\n\t\t\t\twidth -= share;\r\n\t\t\t\tlength--;\r\n\r\n\t\t\t\tparts[i] += share;\r\n\t\t\t}\r\n\t\t\tparts[parts.length - 1] += width;\r\n\t\t},\r\n\t\tsortScales: function (scales) {\r\n\t\t\tfunction cellSize(unit, step) {\r\n\t\t\t\tvar d = new Date(1970, 0, 1);\r\n\t\t\t\treturn dateHelper.add(d, step, unit) - d;\r\n\t\t\t}\r\n\r\n\t\t\tscales.sort(function (a, b) {\r\n\t\t\t\tif (cellSize(a.unit, a.step) < cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t} else if (cellSize(a.unit, a.step) > cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\t\tscales[i].index = i;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_prepareScaleObject: function(scale){\r\n\t\t\tvar format = scale.format;\r\n\t\t\tif(!format){\r\n\t\t\t\tformat = scale.template || scale.date || \"%d %M\";\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof format === \"string\"){\r\n\t\t\t\tformat = gantt.date.date_to_str(format);\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tunit: scale.unit || \"day\",\r\n\t\t\t\tstep: scale.step || 1,\r\n\t\t\t\tformat: format,\r\n\t\t\t\tcss: scale.css,\r\n\t\t\t\tprojection: scale.projection || null,\r\n\t\t\t\tcolumn_width: scale.column_width || null\r\n\t\t\t};\r\n\t\t},\r\n\t\tprimaryScale: function(config) {\r\n\t\t\tconst scaleConfig = config || gantt.config;\r\n\r\n\t\t\tconst primaryScale = scaleConfig.scales[0];\r\n\t\t\tconst result = {\r\n\t\t\t\tunit: primaryScale.unit,\r\n\t\t\t\tstep: primaryScale.step,\r\n\t\t\t\ttemplate: primaryScale.template,\r\n\t\t\t\tformat: primaryScale.format,\r\n\t\t\t\tdate: primaryScale.date,\r\n\t\t\t\tcss: primaryScale.css || gantt.templates.scale_cell_class,\r\n\t\t\t\tprojection: primaryScale.projection || null,\r\n\t\t\t\tcolumn_width: primaryScale.column_width || null\r\n\t\t\t};\r\n\r\n\t\t\treturn this._prepareScaleObject(result);\r\n\t\t},\r\n\t\tgetAdditionalScales: function(config) {\r\n\t\t\tconst scaleConfig = config || gantt.config;\r\n\t\t\tconst scales = scaleConfig.scales.slice(1);\r\n\r\n\t\t\treturn scales.map(function(scale){\r\n\t\t\t\treturn this._prepareScaleObject(scale);\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\tprepareConfigs: function (scales, min_coll_width, container_width, scale_height, minDate, maxDate, rtl) {\r\n\t\t\tvar heights = this.splitSize(scale_height, scales.length);\r\n\t\t\tvar full_width = container_width;\r\n\r\n\t\t\tvar configs = [];\r\n\t\t\tfor (var i = scales.length - 1; i >= 0; i--) {\r\n\t\t\t\tvar main_scale = (i == scales.length - 1);\r\n\t\t\t\tvar cfg = this.initScaleConfig(scales[i], minDate, maxDate);\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tthis.processIgnores(cfg);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(main_scale && cfg.column_width){\r\n\t\t\t\t\tfull_width = cfg.column_width * (cfg.display_count || cfg.count);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initColSizes(cfg, min_coll_width, full_width, heights[i]);\r\n\t\t\t\tthis.limitVisibleRange(cfg);\r\n\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tfull_width = cfg.full_width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconfigs.unshift(cfg);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (var i = 0; i < configs.length - 1; i++) {\r\n\t\t\t\tthis.alineScaleColumns(configs[configs.length - 1], configs[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < configs.length; i++) {\r\n\r\n\t\t\t\tif(rtl){\r\n\t\t\t\t\tthis.reverseScale(configs[i]);\r\n\t\t\t\t}\r\n\t\t\t\tthis.setPosSettings(configs[i]);\r\n\t\t\t}\r\n\t\t\treturn configs;\r\n\r\n\t\t},\r\n\r\n\t\treverseScale: function(scale){\r\n\t\t\tscale.width = scale.width.reverse();\r\n\t\t\tscale.trace_x = scale.trace_x.reverse();\r\n\r\n\t\t\tvar indexes = scale.trace_indexes;\r\n\t\t\tscale.trace_indexes = {};\r\n\t\t\tscale.trace_index_transition = {};\r\n\t\t\tscale.rtl = true;\r\n\t\t\tfor(var i = 0; i < scale.trace_x.length; i++){\r\n\t\t\t\tscale.trace_indexes[scale.trace_x[i].valueOf()] = i;\r\n\t\t\t\tscale.trace_index_transition[indexes[scale.trace_x[i].valueOf()]] = i;\r\n\t\t\t}\r\n\t\t\treturn scale;\r\n\t\t},\r\n\r\n\t\tsetPosSettings: function (config) {\r\n\t\t\tfor (var i = 0, len = config.trace_x.length; i < len; i++) {\r\n\t\t\t\tconfig.left.push((config.width[i - 1] || 0) + (config.left[i - 1] || 0));\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_ignore_time_config: function (date, scale) {\r\n\r\n\t\t\tif (gantt.config.skip_off_time) {\r\n\t\t\t\tvar skip = true;\r\n\t\t\t\tvar probe = date;\r\n\r\n\t\t\t\t// check dates in case custom scale unit, e.g. {unit: \"month\", step: 3}\r\n\t\t\t\tfor (var i = 0; i < scale.step; i++) {\r\n\t\t\t\t\tif (i) {\r\n\t\t\t\t\t\tprobe = dateHelper.add(date, i, scale.unit);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tskip = skip && !this.isWorkTime(probe, scale.unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn skip;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t//defined in an extension\r\n\t\tprocessIgnores: function (config) {\r\n\t\t\tconfig.ignore_x = {};\r\n\t\t\tconfig.display_count = config.count;\r\n\t\t},\r\n\t\tinitColSizes: function (config, min_col_width, full_width, line_height) {\r\n\t\t\tvar cont_width = full_width;\r\n\r\n\t\t\tconfig.height = line_height;\r\n\r\n\t\t\tvar column_count = config.display_count === undefined ? config.count : config.display_count;\r\n\r\n\t\t\tif (!column_count)\r\n\t\t\t\tcolumn_count = 1;\r\n\r\n\t\t\tconst fixedMode = !isNaN(config.column_width*1) && config.column_width*1 > 0;\r\n\t\t\tif (fixedMode) {\r\n\t\t\t\tconst baseCellWidth = config.column_width*1;\r\n\t\t\t\tconfig.col_width = baseCellWidth;\r\n\t\t\t\tcont_width = baseCellWidth * column_count;\r\n\t\t\t} else {\r\n\t\t\t\tconfig.col_width = Math.floor(cont_width / column_count);\r\n\t\t\t\tif (min_col_width) {\r\n\t\t\t\t\tif (config.col_width < min_col_width) {\r\n\t\t\t\t\t\tconfig.col_width = min_col_width;\r\n\t\t\t\t\t\tcont_width = config.col_width * column_count;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconfig.width = [];\r\n\t\t\tvar ignores = config.ignore_x || {};\r\n\t\t\tfor (var i = 0; i < config.trace_x.length; i++) {\r\n\t\t\t\tif (ignores[config.trace_x[i].valueOf()] || (config.display_count == config.count)) {\r\n\t\t\t\t\tif(fixedMode){\r\n\t\t\t\t\t\tconfig.width[i] = config.col_width;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconfig.width[i] = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// width of month columns should be proportional month duration\r\n\t\t\t\t\tvar width = 1;\r\n\t\t\t\t\tif (config.unit == \"month\") {\r\n\t\t\t\t\t\tvar days = Math.round((dateHelper.add(config.trace_x[i], config.step, config.unit) - config.trace_x[i]) / (1000 * 60 * 60 * 24));\r\n\t\t\t\t\t\twidth = days;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconfig.width[i] = width;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(!fixedMode){\r\n\t\t\t\tthis.adjustSize(cont_width - this.getSum(config.width)/* 1 width per column from the code above */, config.width);\r\n\t\t\t}\r\n\r\n\t\t\tconfig.full_width = this.getSum(config.width);\r\n\t\t},\r\n\t\tinitScaleConfig: function (config, min_date, max_date) {\r\n\t\t\tvar cfg = utils.mixin({\r\n\t\t\t\tcount: 0,\r\n\t\t\t\tcol_width: 0,\r\n\t\t\t\tfull_width: 0,\r\n\t\t\t\theight: 0,\r\n\t\t\t\twidth: [],\r\n\t\t\t\tleft: [],\r\n\t\t\t\ttrace_x: [],\r\n\t\t\t\ttrace_indexes: {},\r\n\t\t\t\tmin_date: new Date(min_date),\r\n\t\t\t\tmax_date: new Date(max_date)\r\n\t\t\t}, config);\r\n\r\n\t\t\tthis.eachColumn(config.unit, config.step, min_date, max_date, function (date) {\r\n\t\t\t\tcfg.count++;\r\n\t\t\t\tcfg.trace_x.push(new Date(date));\r\n\t\t\t\tcfg.trace_indexes[date.valueOf()] = cfg.trace_x.length - 1;\r\n\t\t\t});\r\n\r\n\t\t\tcfg.trace_x_ascending = cfg.trace_x.slice();\r\n\t\t\treturn cfg;\r\n\t\t},\r\n\t\titerateScales: function (lower_scale, upper_scale, from, to, callback) {\r\n\t\t\tvar upper_dates = upper_scale.trace_x;\r\n\t\t\tvar lower_dates = lower_scale.trace_x;\r\n\r\n\t\t\tvar prev = from || 0;\r\n\t\t\tvar end = to || (lower_dates.length - 1);\r\n\t\t\tvar prevUpper = 0;\r\n\r\n\r\n\t\t\tfor (var up = 1; up < upper_dates.length; up++) {\r\n\t\t\t\tvar target_index = (lower_scale.trace_indexes[+upper_dates[up]]);\r\n\t\t\t\tif (target_index !== undefined && target_index <= end) {\r\n\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\tcallback.apply(this, [prevUpper, up, prev, target_index]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprev = target_index;\r\n\t\t\t\t\tprevUpper = up;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\talineScaleColumns: function (lower_scale, upper_scale, from, to) {\r\n\t\t\tthis.iterateScales(lower_scale, upper_scale, from, to, function (upper_start, upper_end, lower_start, lower_end) {\r\n\t\t\t\tvar targetWidth = this.getSum(lower_scale.width, lower_start, lower_end - 1);\r\n\t\t\t\tvar actualWidth = this.getSum(upper_scale.width, upper_start, upper_end - 1);\r\n\t\t\t\tif (actualWidth != targetWidth) {\r\n\t\t\t\t\tthis.setSumWidth(targetWidth, upper_scale, upper_start, upper_end - 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\teachColumn: function (unit, step, min_date, max_date, callback) {\r\n\t\t\tvar start = new Date(min_date),\r\n\t\t\t\tend = new Date(max_date);\r\n\t\t\tif (dateHelper[unit + \"_start\"]) {\r\n\t\t\t\tstart = dateHelper[unit + \"_start\"](start);\r\n\t\t\t}\r\n\r\n\t\t\tvar curr = new Date(start);\r\n\t\t\tif (+curr >= +end) {\r\n\t\t\t\tend = dateHelper.add(curr, step, unit);\r\n\t\t\t}\r\n\t\t\twhile (+curr < +end) {\r\n\t\t\t\tcallback.call(this, new Date(curr));\r\n\t\t\t\tvar tzOffset = curr.getTimezoneOffset();\r\n\t\t\t\tcurr = dateHelper.add(curr, step, unit);\r\n\t\t\t\tcurr = gantt._correct_dst_change(curr, tzOffset, step, unit);\r\n\t\t\t\tif (dateHelper[unit + '_start'])\r\n\t\t\t\t\tcurr = dateHelper[unit + \"_start\"](curr);\r\n\t\t\t}\r\n\t\t},\r\n\t\tlimitVisibleRange: function (cfg) {\r\n\t\t\tvar dates = cfg.trace_x;\r\n\r\n\t\t\tvar left = 0, right = cfg.width.length - 1;\r\n\t\t\tvar diff = 0;\r\n\t\t\tif (+dates[0] < +cfg.min_date && left != right) {\r\n\t\t\t\tvar width = Math.floor(cfg.width[0] * ((dates[1] - cfg.min_date) / (dates[1] - dates[0])));\r\n\t\t\t\tdiff += cfg.width[0] - width;\r\n\t\t\t\tcfg.width[0] = width;\r\n\r\n\t\t\t\tdates[0] = new Date(cfg.min_date);\r\n\t\t\t}\r\n\r\n\t\t\tvar last = dates.length - 1;\r\n\t\t\tvar lastDate = dates[last];\r\n\t\t\tvar outDate = dateHelper.add(lastDate, cfg.step, cfg.unit);\r\n\t\t\tif (+outDate > +cfg.max_date && last > 0) {\r\n\t\t\t\tvar width = cfg.width[last] - Math.floor(cfg.width[last] * ((outDate - cfg.max_date) / (outDate - lastDate)));\r\n\t\t\t\tdiff += cfg.width[last] - width;\r\n\t\t\t\tcfg.width[last] = width;\r\n\t\t\t}\r\n\r\n\t\t\tif (diff) {\r\n\t\t\t\tvar full = this.getSum(cfg.width);\r\n\t\t\t\tvar shared = 0;\r\n\t\t\t\tfor (var i = 0; i < cfg.width.length; i++) {\r\n\t\t\t\t\tvar share = Math.floor(diff * (cfg.width[i] / full));\r\n\t\t\t\t\tcfg.width[i] += share;\r\n\t\t\t\t\tshared += share;\r\n\t\t\t\t}\r\n\t\t\t\tthis.adjustSize(diff - shared, cfg.width);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport default ScaleHelper;\r\n","export default function(gantt) {\r\n\r\n\t(function () {\r\n\t\tvar modalsStack = [];\r\n\r\n\t\tfunction isModal() {\r\n\t\t\treturn !!modalsStack.length;\r\n\t\t}\r\n\r\n\t\tfunction afterPopup(box) {\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tif (!isModal()){\r\n\t\t\t\t\tif(!gantt.$destroyed){\r\n\t\t\t\t\t\tgantt.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, 1);\r\n\t\t}\r\n\r\n\t\tfunction startModal(box) {\r\n\t\t\tgantt.eventRemove(box, \"keydown\", trapFocus);\r\n\t\t\tgantt.event(box, \"keydown\", trapFocus);\r\n\t\t\tmodalsStack.push(box);\r\n\t\t\t//gantt.$keyboardNavigation.dispatcher.disable();\r\n\t\t}\r\n\r\n\t\tfunction endModal() {\r\n\t\t\tvar box = modalsStack.pop();\r\n\t\t\tif (box) {\r\n\t\t\t\tgantt.eventRemove(box, \"keydown\", trapFocus);\r\n\t\t\t}\r\n\t\t\tafterPopup(box);\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfunction isTopModal(box) {\r\n\t\t\treturn box == modalsStack[modalsStack.length - 1];\r\n\t\t}\r\n\r\n\t\tfunction trapFocus(event) {\r\n\t\t\tvar target = event.currentTarget;\r\n\t\t\tif (!isTopModal(target)) return;\r\n\r\n\t\t\tgantt.$keyboardNavigation.trapFocus(target, event);\r\n\t\t}\r\n\r\n\t\tfunction traceLightbox() {\r\n\t\t\tstartModal(gantt.getLightbox());\r\n\t\t}\r\n\r\n\t\tgantt.attachEvent(\"onLightbox\", traceLightbox);\r\n\t\tgantt.attachEvent(\"onAfterLightbox\", endModal);\r\n\t\tgantt.attachEvent(\"onLightboxChange\", function () {\r\n\t\t\tendModal();\r\n\t\t\ttraceLightbox();\r\n\t\t});\r\n\r\n\r\n\t\tgantt.attachEvent(\"onAfterQuickInfo\", function () {\r\n\t\t\tafterPopup();\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onMessagePopup\", function (box) {\r\n\t\t\tsaveFocus();\r\n\t\t\tstartModal(box);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterMessagePopup\", function () {\r\n\t\t\tendModal();\r\n\t\t\trestoreFocus();\r\n\t\t});\r\n\r\n\t\tvar focusElement = null;\r\n\r\n\t\tfunction saveFocus() {\r\n\t\t\tfocusElement = gantt.utils.dom.getActiveElement();\r\n\t\t}\r\n\r\n\t\tfunction restoreFocus() {\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tif (focusElement && focusElement.focus) {\r\n\t\t\t\t\tfocusElement.focus();\r\n\t\t\t\t\tfocusElement = null;\r\n\t\t\t\t}\r\n\t\t\t}, 1);\r\n\t\t}\r\n\r\n\t\tgantt.$keyboardNavigation.isModal = isModal;\r\n\r\n\r\n\t})();\r\n\r\n};","\r\ninterface IQuickInfoContainer{\r\n\tparent: HTMLElement;\r\n\txViewport: HTMLElement;\r\n\tyViewport: HTMLElement;\r\n}\r\n\r\nexport class QuickInfo {\r\n\tprivate _quickInfoTask: TaskID;\r\n\tprivate _quickInfoBoxId: number | string;\r\n\tprivate _quickInfoBox: HTMLElement;\r\n\tprivate _quickInfoReadonly: boolean | null;\r\n\tprivate _container: HTMLElement;\r\n\tprivate _gantt: any;\r\n\r\n\tconstructor(gantt: any) {\r\n\t\tthis._gantt = gantt;\r\n\t}\r\n\r\n\t// show at coordinates:\r\n\t// show(x: number, y: number)\r\n\t// show for a task:\r\n\t// show(id: TaskID)\r\n\tshow : {\r\n\t\t(x: number, y: number) : void;\r\n\t\t(id: TaskID) : void;\r\n\t} = (id: TaskID | number, y? : number) : void => {\r\n\t\tif (y === undefined) {\r\n\t\t\tthis._showForTask(id);\r\n\t\t} else {\r\n\t\t\tthis._showAtCoordinates(id as number, y);\r\n\t\t}\r\n\t};\r\n\r\n\thide = (forced?: boolean) : any => {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst qi = this._quickInfoBox;\r\n\t\tthis._quickInfoBoxId = 0;\r\n\t\tconst taskId = this._quickInfoTask;\r\n\t\tthis._quickInfoTask = null;\r\n\r\n\t\tif (qi && qi.parentNode){\r\n\r\n\t\t\tif (gantt.config.quick_info_detached) {\r\n\t\t\t\tgantt.callEvent(\"onAfterQuickInfo\", [taskId]);\r\n\t\t\t\treturn qi.parentNode.removeChild(qi);\r\n\t\t\t}\r\n\r\n\t\t\tqi.className += \" gantt_qi_hidden\";\r\n\t\t\tif (qi.style.right === \"auto\"){\r\n\t\t\t\tqi.style.left = \"-350px\";\r\n\t\t\t} else {\r\n\t\t\t\tqi.style.right = \"-350px\";\r\n\t\t\t}\r\n\r\n\t\t\tif (forced) {\r\n\t\t\t\tqi.style.left = qi.style.right = \"\";\r\n\t\t\t\tqi.parentNode.removeChild(qi);\r\n\t\t\t}\r\n\t\t\tgantt.callEvent(\"onAfterQuickInfo\", [taskId]);\r\n\t\t}\r\n\t};\r\n\r\n\tgetNode = (): HTMLElement => {\r\n\t\tif(this._quickInfoBox) {\r\n\t\t\treturn this._quickInfoBox;\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\tsetContainer = (container: string|HTMLElement): void => {\r\n\t\tif(container){\r\n\t\t\tthis._container = typeof container === \"string\" ? document.getElementById(container) : container;\r\n\t\t}\r\n\t};\r\n\r\n\tsetContent = (content?: IQuickInfoContent) => {\r\n\t\tconst gantt = this._gantt;\r\n\r\n\t\tconst defaultContent = {\r\n\t\t\ttaskId: null,\r\n\t\t\theader: {\r\n\t\t\t\ttitle: \"\",\r\n\t\t\t\tdate: \"\"\r\n\t\t\t},\r\n\t\t\tcontent: \"\",\r\n\t\t\tbuttons: gantt.config.quickinfo_buttons\r\n\t\t};\r\n\r\n\t\tif(!content){\r\n\t\t\tcontent = defaultContent;\r\n\t\t}\r\n\r\n\t\tif(!content.taskId){\r\n\t\t\tcontent.taskId = defaultContent.taskId;\r\n\t\t}\r\n\r\n\t\tif(!content.header){\r\n\t\t\tcontent.header = defaultContent.header;\r\n\t\t}\r\n\r\n\t\tif(!content.header.title){\r\n\t\t\tcontent.header.title = defaultContent.header.title;\r\n\t\t}\r\n\t\tif(!content.header.date){\r\n\t\t\tcontent.header.date = defaultContent.header.date;\r\n\t\t}\r\n\t\tif(!content.content){\r\n\t\t\tcontent.content = defaultContent.content;\r\n\t\t}\r\n\t\tif(!content.buttons){\r\n\t\t\tcontent.buttons = defaultContent.buttons;\r\n\t\t}\r\n\r\n\r\n\t\tlet qi = this.getNode();\r\n\t\tif(!qi){\r\n\t\t\tqi = this._createQuickInfoElement();\r\n\t\t}\r\n\r\n\t\tif(content.taskId){\r\n\t\t\tthis._quickInfoBoxId = content.taskId;\r\n\t\t}\r\n\r\n\t\tconst titleBox = qi.querySelector(\".gantt_cal_qi_title\") as HTMLElement;\r\n\t\tconst titleContent = titleBox.querySelector(\".gantt_cal_qi_tcontent\");\r\n\t\tconst titleDate = titleBox.querySelector(\".gantt_cal_qi_tdate\");\r\n\t\tconst main = qi.querySelector(\".gantt_cal_qi_content\");\r\n\t\tconst controls = qi.querySelector(\".gantt_cal_qi_controls\") as HTMLElement;\r\n\r\n\t\tgantt._waiAria.quickInfoHeader(qi, [content.header.title, content.header.date].join(\" \"));\r\n\r\n\t\ttitleContent.innerHTML = content.header.title;\r\n\t\ttitleDate.innerHTML = content.header.date;\r\n\r\n\t\tif(!content.header.title && !content.header.date){\r\n\t\t\ttitleBox.style.display = \"none\";\r\n\t\t}else{\r\n\t\t\ttitleBox.style.display = \"\";\r\n\t\t}\r\n\t\tmain.innerHTML = content.content;\r\n\r\n\t\tconst buttons = content.buttons;\r\n\t\tif(!buttons.length){\r\n\t\t\tcontrols.style.display = \"none\";\r\n\t\t}else{\r\n\t\t\tcontrols.style.display = \"\";\r\n\t\t}\r\n\t\tlet html = \"\";\r\n\t\tfor (let i = 0; i < buttons.length; i++){\r\n\r\n\t\t\tconst ariaAttr = gantt._waiAria.quickInfoButtonAttrString(gantt.locale.labels[buttons[i]]);\r\n\r\n\t\t\thtml += `<div class=\"gantt_qi_big_icon ${buttons[i]} dhx_gantt_${buttons[i]}\" title=\"${gantt.locale.labels[buttons[i]]}\" ${ariaAttr}>\r\n            <div class='dhx_menu_icon dhx_gantt_icon ${buttons[i]} gantt_menu_icon dhx_gantt_${buttons[i]}'></div>\r\n            <div>${gantt.locale.labels[buttons[i]]}</div>\r\n         </div>`;\r\n\t\t}\r\n\t\tcontrols.innerHTML = html;\r\n\r\n\t\tgantt.eventRemove(qi, \"click\", this._qiButtonClickHandler);\r\n\t\tgantt.eventRemove(qi, \"keypress\", this._qiKeyPressHandler);\r\n\r\n\t\tgantt.event(qi, \"click\", this._qiButtonClickHandler);\r\n\t\tgantt.event(qi, \"keypress\", this._qiKeyPressHandler);\r\n\t};\r\n\r\n\tprivate _qiButtonClickHandler = (ev) => {\r\n\t\tthis._qi_button_click(ev.target);\r\n\t};\r\n\r\n\tprivate _qiKeyPressHandler = (e) => {\r\n\r\n\t\tconst code = e.which;\r\n\t\tif (code === 13 || code === 32){\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis._qi_button_click(e.target);\r\n\t\t\t},1);\r\n\t\t}\r\n\t};\r\n\r\n\tprivate _showAtCoordinates(x: number, y: number) : void {\r\n\t\tthis.hide(true);\r\n\t\tthis._quickInfoBoxId = 0;\r\n\t\tthis._quickInfoTask = null;\r\n\t\tif(!this._quickInfoBox){\r\n\t\t\tthis._createQuickInfoElement();\r\n\t\t\tthis.setContent();\r\n\t\t}\r\n\r\n\t\tthis._appendAtCoordinates(x, y);\r\n\t\tthis._gantt.callEvent(\"onQuickInfo\", [null]);\r\n\t}\r\n\r\n\tprivate _showForTask(id: TaskID) : void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tif ((\r\n\t\t\tid === this._quickInfoBoxId &&\r\n\t\t\tgantt.utils.dom.isChildOf(this._quickInfoBox, document.body)\r\n\t\t) || !gantt.config.show_quick_info) {\r\n\t\t\t// not show if the quick info is already displayed for this task, or if it shouldn't be displayed\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.hide(true);\r\n\t\tconst offset = 6; // offset TASK <> QI-BOX in 'px'\r\n\t\tconst container = this._getContainer();\r\n\t\tconst pos = this._get_event_counter_part(id, offset, container.xViewport, container.yViewport);\r\n\r\n\t\tif (pos){\r\n\t\t\tthis._quickInfoBox = this._init_quick_info(id);\r\n\t\t\tthis._quickInfoTask = id;\r\n\t\t\tthis._quickInfoBox.className = this._prepare_quick_info_classname(id);\r\n\r\n\t\t\tthis._fill_quick_data(id);\r\n\t\t\tthis._show_quick_info(pos, offset);\r\n\t\t\tgantt.callEvent(\"onQuickInfo\", [id]);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _get_event_counter_part(id: TaskID, offset: number, xViewport: HTMLElement, yViewport: HTMLElement) : any {\r\n\t\tconst gantt = this._gantt;\r\n\t\tlet domEv = gantt.getTaskNode(id);\r\n\t\tif (!domEv) {\r\n\t\t\tdomEv = gantt.getTaskRowNode(id);\r\n\t\t\tif (!domEv) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet left = 0;\r\n\t\tconst top = offset + domEv.offsetTop + domEv.offsetHeight;\r\n\r\n\t\tlet node = domEv;\r\n\r\n\t\tif (gantt.utils.dom.isChildOf(node, xViewport)) {\r\n\t\t\twhile (node && node !== xViewport){\r\n\t\t\t\tleft += node.offsetLeft;\r\n\t\t\t\tnode = node.offsetParent;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst scroll = gantt.getScrollState();\r\n\r\n\t\tif(node){\r\n\t\t\tconst dx = (left + domEv.offsetWidth/2) - scroll.x > (xViewport.offsetWidth/2) ? 1 : 0;\r\n\t\t\tconst dy = (top + domEv.offsetHeight/2) - scroll.y > (yViewport.offsetHeight/2) ? 1 : 0;\r\n\r\n\t\t\treturn { left, top, dx, dy, width:domEv.offsetWidth, height:domEv.offsetHeight };\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tprivate _createQuickInfoElement() : HTMLElement {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst qi = document.createElement(\"div\");\r\n\t\tqi.className += \"gantt_cal_quick_info\";\r\n\t\tgantt._waiAria.quickInfoAttr(qi);\r\n\r\n\t\t// title\r\n\t\tconst ariaAttr = gantt._waiAria.quickInfoHeaderAttrString();\r\n\t\tvar html = `\r\n\t\t<div class=\"gantt_cal_qi_tcontrols\">\r\n\t\t\t<a class=\"gantt_cal_qi_close_btn dhx_gantt_icon dhx_gantt_icon_close\"></a>\r\n\t\t</div>\r\n\t\t<div class=\"gantt_cal_qi_title\" ${ariaAttr}>\r\n\t\t\t\t\r\n\t\t\t\t<div class=\"gantt_cal_qi_tcontent\"></div>\r\n\t\t\t\t<div class=\"gantt_cal_qi_tdate\"></div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"gantt_cal_qi_content\"></div>`;\r\n\r\n\t\t//buttons\r\n\t\thtml += \"<div class=\\\"gantt_cal_qi_controls\\\">\";\r\n\r\n\t\thtml += \"</div>\";\r\n\r\n\t\tqi.innerHTML = html;\r\n\r\n\r\n\t\tif (gantt.config.quick_info_detached) {\r\n\t\t\tconst container = this._getContainer();\r\n\t\t\tgantt.event(container.parent, \"scroll\", () => { this.hide(); });\r\n\t\t}\r\n\r\n\t\tthis._quickInfoBox = qi;\r\n\t\treturn qi;\r\n\t}\r\n\r\n\tprivate _init_quick_info(id: TaskID) : HTMLElement {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst task = gantt.getTask(id);\r\n\t\t\r\n\r\n\t\tif(typeof this._quickInfoReadonly === \"boolean\"){\r\n\t\t\tif(gantt.isReadonly(task) !== this._quickInfoReadonly){\r\n\t\t\t\tthis.hide(true);\r\n\t\t\t\tthis._quickInfoBox = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._quickInfoReadonly = gantt.isReadonly(task);\r\n\r\n\t\tif (!this._quickInfoBox){\r\n\t\t\tthis._quickInfoBox = this._createQuickInfoElement();\r\n\t\t}\r\n\r\n\t\treturn this._quickInfoBox;\r\n\t}\r\n\r\n\tprivate _prepare_quick_info_classname(id: TaskID) : string {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst task = gantt.getTask(id);\r\n\t\tconst taskType = gantt.getTaskType(task);\r\n\r\n\t\tlet css = `gantt_cal_quick_info gantt_${taskType}`;\r\n\t\tconst template = gantt.templates.quick_info_class(task.start_date, task.end_date, task);\r\n\r\n\t\tif(template){\r\n\t\t\tcss += \" \" + template;\r\n\t\t}\r\n\t\treturn css;\r\n\t}\r\n\r\n\tprivate _fill_quick_data(id: TaskID) : void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst ev = gantt.getTask(id);\r\n\r\n\t\tthis._quickInfoBoxId = id;\r\n\r\n\t\tlet allowedButtons = [];\r\n\t\tif (this._quickInfoReadonly){\r\n\t\t\tconst buttons = gantt.config.quickinfo_buttons;\r\n\t\t\tconst isEditor = {icon_delete: true, icon_edit: true};\r\n\t\t\tfor (let i = 0; i < buttons.length; i++){\r\n\t\t\t\tif(this._quickInfoReadonly && isEditor[buttons[i]]){\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tallowedButtons.push(buttons[i]);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tallowedButtons = gantt.config.quickinfo_buttons;\r\n\t\t}\r\n\r\n\t\tthis.setContent({\r\n\t\t\theader: {\r\n\t\t\t\ttitle: gantt.templates.quick_info_title(ev.start_date, ev.end_date, ev),\r\n\t\t\t\tdate: gantt.templates.quick_info_date(ev.start_date, ev.end_date, ev)\r\n\t\t\t},\r\n\t\t\tcontent: gantt.templates.quick_info_content(ev.start_date, ev.end_date, ev),\r\n\t\t\tbuttons: allowedButtons\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _appendAtCoordinates(x: number, y: number): void {\r\n\t\tconst qi = this._quickInfoBox;\r\n\t\tconst container = this._getContainer();\r\n\t\tif (!qi.parentNode ||\r\n\t\t\tqi.parentNode.nodeName.toLowerCase() === \"#document-fragment\"){ // IE8\r\n\t\t\tcontainer.parent.appendChild(qi);\r\n\t\t}\r\n\r\n\t\tqi.style.left = x + \"px\";\r\n\t\tqi.style.top = y + \"px\";\r\n\t}\r\n\r\n\tprivate _show_quick_info(pos: any, offset: number) : void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst qi = this._quickInfoBox;\r\n\t\tif (gantt.config.quick_info_detached) {\r\n\t\t\tconst container = this._getContainer();\r\n\t\t\tif (!qi.parentNode ||\r\n\t\t\t\tqi.parentNode.nodeName.toLowerCase() === \"#document-fragment\"){ // IE8\r\n\t\t\t\tcontainer.parent.appendChild(qi);\r\n\t\t\t}\r\n\t\t\tconst width = qi.offsetWidth;\r\n\t\t\tconst popupHeight = qi.offsetHeight;\r\n\r\n\t\t\tconst scrolls = gantt.getScrollState();\r\n\t\t\tconst xViewport = container.xViewport;\r\n\t\t\tconst yViewport = container.yViewport;\r\n\t\t\tconst screenWidth = xViewport.offsetWidth + scrolls.x - width;\r\n\r\n\t\t\tconst relativePopupTop = pos.top - scrolls.y;\r\n\t\t\tconst relativePopupBottom = relativePopupTop + popupHeight;\r\n\r\n\t\t\tlet top = pos.top;\r\n\t\t\tif(relativePopupBottom > yViewport.offsetHeight / 2){\r\n\t\t\t\ttop = pos.top - (popupHeight + pos.height + 2*offset);\r\n\t\t\t\tif(top < scrolls.y && relativePopupBottom <= yViewport.offsetHeight){\r\n\t\t\t\t\ttop = pos.top;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (top < scrolls.y) {\r\n\t\t\t\ttop = scrolls.y;\r\n\t\t\t}\r\n\r\n\t\t\tconst x = Math.min(Math.max(scrolls.x, pos.left - pos.dx*(width - pos.width)), screenWidth);\r\n\t\t\tconst y = top;\r\n\r\n\t\t\tthis._appendAtCoordinates(x, y);\r\n\t\t} else {\r\n\t\t\tqi.style.top = 20 + \"px\";\r\n\t\t\tif (pos.dx === 1){\r\n\t\t\t\tqi.style.right = \"auto\";\r\n\t\t\t\tqi.style.left = \"-300px\";\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tqi.style.left = \"10px\";\r\n\t\t\t\t},1);\r\n\t\t\t} else {\r\n\t\t\t\tqi.style.left = \"auto\";\r\n\t\t\t\tqi.style.right = \"-300px\";\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tqi.style.right = \"10px\";\r\n\t\t\t\t},1);\r\n\t\t\t}\r\n\t\t\tqi.className += \" gantt_qi_\"+(pos.dx === 1 ? \"left\" : \"right\");\r\n\t\t\tgantt.$root.appendChild(qi);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _qi_button_click(node: any) : void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst box = this._quickInfoBox;\r\n\t\tif (!node || node === box){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(node.closest(\".gantt_cal_qi_close_btn\")){\r\n\t\t\tthis.hide();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst mask = node.className;\r\n\t\tif (mask.indexOf(\"_icon\") !== -1){\r\n\t\t\tconst id = this._quickInfoBoxId;\r\n\t\t\tgantt.$click.buttons[mask.split(\" \")[1].replace(\"icon_\",\"\")](id);\r\n\t\t} else {\r\n\t\t\tthis._qi_button_click(node.parentNode);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _getContainer(): IQuickInfoContainer{\r\n\t\tconst gantt = this._gantt;\r\n\t\tlet container = this._container ? this._container : gantt.$task_data;\r\n\t\tif (container && container.offsetHeight && container.offsetWidth) {\r\n\t\t\treturn {\r\n\t\t\t\tparent: container,\r\n\t\t\t\txViewport: gantt.$task,\r\n\t\t\t\tyViewport: gantt.$task_data\r\n\t\t\t};\r\n\t\t}\r\n\t\tcontainer = this._container ? this._container : gantt.$grid_data;\r\n\t\tif (container && container.offsetHeight && container.offsetWidth) {\r\n\t\t\treturn {\r\n\t\t\t\tparent: container,\r\n\t\t\t\txViewport: gantt.$grid,\r\n\t\t\t\tyViewport: gantt.$grid_data\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tparent: this._container ? this._container : gantt.$layout,\r\n\t\t\txViewport: gantt.$layout,\r\n\t\t\tyViewport: gantt.$layout\r\n\t\t};\r\n\t}\r\n}\r\n","import * as utils from \"../../../utils/utils\";\r\n\r\nfunction createScope(addEvent, removeEvent) {\r\n\taddEvent = addEvent || utils.event;\r\n\tremoveEvent = removeEvent || utils.eventRemove;\r\n\r\n\tvar handlers = [];\r\n\r\n\tvar eventScope = {\r\n\t\tattach: function(el, event, callback, capture){\r\n\t\t\thandlers.push({element: el, event:event, callback: callback, capture: capture});\r\n\t\t\taddEvent(el, event, callback, capture);\r\n\t\t},\r\n\t\tdetach: function(el, event, callback, capture){\r\n\t\t\tremoveEvent(el, event, callback, capture);\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tvar handler = handlers[i];\r\n\t\t\t\tif (handler.element === el && handler.event === event && handler.callback === callback && handler.capture === capture) {\r\n\t\t\t\t\thandlers.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdetachAll: function () {\r\n\t\t\tvar staticArray = handlers.slice();\r\n\t\t\t// original handlers array can be spliced on every iteration\r\n\t\t\tfor (var i = 0; i < staticArray.length; i++){\r\n\t\t\t\tvar handler = staticArray[i];\r\n\t\t\t\teventScope.detach(handler.element, handler.event, handler.callback, handler.capture);\r\n\t\t\t\teventScope.detach(handler.element, handler.event, handler.callback, undefined);\r\n\t\t\t\teventScope.detach(handler.element, handler.event, handler.callback, false);\r\n\t\t\t\teventScope.detach(handler.element, handler.event, handler.callback, true);\r\n\t\t\t}\r\n\t\t\thandlers.splice(0, handlers.length);\r\n\t\t},\r\n\t\textend: function(){\r\n\t\t\treturn createScope(this.event, this.eventRemove);\r\n\t\t}\r\n\t};\r\n\r\n\treturn eventScope;\r\n}\r\n\r\nexport default createScope;","import * as domHelpers from \"../../core/ui/utils/dom_helpers\";\r\n\r\n/* eslint-disable no-restricted-globals */\r\n\r\ninterface IViewPosition{\r\n\ttop: number;\r\n\tleft: number;\r\n}\r\n\r\ninterface IViewBox extends IViewPosition{\r\n\twidth: number;\r\n\theight: number;\r\n\tbottom: number;\r\n\tright: number;\r\n}\r\n\r\nexport class Tooltip {\r\n\tprivate _root: HTMLElement;\r\n\tprivate _tooltipNode: HTMLElement;\r\n\tprivate _gantt: any;\r\n\r\n\tconstructor(gantt: any){\r\n\t\tthis._gantt = gantt;\r\n\t}\r\n\r\n\tgetNode() : HTMLElement {\r\n\t\tconst gantt = this._gantt;\r\n\t\tif (!this._tooltipNode){\r\n\t\t\tthis._tooltipNode = document.createElement(\"div\");\r\n\t\t\tthis._tooltipNode.className = \"gantt_tooltip\";\r\n\t\t\tgantt._waiAria.tooltipAttr(this._tooltipNode);\r\n\t\t}\r\n\t\treturn this._tooltipNode;\r\n\t}\r\n\r\n\tsetViewport(node: HTMLElement):Tooltip{\r\n\t\tthis._root = node;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tshow(left: number, top: number): Tooltip;\r\n\tshow(event: MouseEvent): Tooltip;\r\n\tshow(left: number | MouseEvent, top?: number): Tooltip {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst container = document.body;\r\n\t\tconst node = this.getNode();\r\n\r\n\t\tif(!domHelpers.isChildOf(node, container)){\r\n\t\t\tthis.hide();\r\n\t\t\t// GS-2463. Don't put the node beyond the body coordinates\r\n\t\t\t// as it may trigger the resize event\r\n\t\t\tnode.style.top = node.style.top || \"0px\";\r\n\t\t\tnode.style.left = node.style.left || \"0px\";\r\n\t\t\tcontainer.appendChild(node);\r\n\t\t}\r\n\r\n\t\tif (this._isLikeMouseEvent(left)) {\r\n\t\t\tconst position = this._calculateTooltipPosition(left as MouseEvent);\r\n\t\t\ttop = position.top;\r\n\t\t\tleft = position.left;\r\n\t\t}\r\n\r\n\t\tnode.style.top = top + \"px\";\r\n\t\tnode.style.left = left + \"px\";\r\n\r\n\t\tgantt._waiAria.tooltipVisibleAttr(node);\r\n\t\treturn this;\r\n\t}\r\n\thide() : Tooltip{\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst node = this.getNode();\r\n\t\tif(node && node.parentNode){\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t}\r\n\t\tgantt._waiAria.tooltipHiddenAttr(node);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tsetContent(html: string) : Tooltip{\r\n\t\tconst node = this.getNode();\r\n\t\tnode.innerHTML = html;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t// it is for salesforce, because it proxies event to it own events\r\n\tprivate _isLikeMouseEvent(event: any): boolean {\r\n\t\tif (!event || typeof event !== \"object\") {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn \"clientX\" in event && \"clientY\" in event;\r\n\t}\r\n\r\n\tprivate _getViewPort() : HTMLElement {\r\n\t\treturn this._root || document.body;\r\n\t}\r\n\r\n\r\n\tprivate _calculateTooltipPosition(event: MouseEvent): IViewPosition{\r\n\t\tconst gantt = this._gantt;\r\n\t\t// top/left coordinates inside the viewport by mouse position\r\n\t\tconst viewport =  this._getViewPortSize();\r\n\t\tconst tooltipNode = this.getNode();\r\n\t\tconst tooltip: IViewBox = {\r\n\t\t\ttop:0,\r\n\t\t\tleft: 0,\r\n\t\t\twidth: tooltipNode.offsetWidth,\r\n\t\t\theight: tooltipNode.offsetHeight,\r\n\t\t\tbottom: 0,\r\n\t\t\tright: 0\r\n\t\t};\r\n\r\n\t\tconst offsetX = gantt.config.tooltip_offset_x;\r\n\t\tconst offsetY = gantt.config.tooltip_offset_y;\r\n\r\n\t\tconst container = document.body;\r\n\t\tconst mouse = domHelpers.getRelativeEventPosition(event, container);\r\n\t\tconst containerPos = domHelpers.getNodePosition(container);\r\n\t\tmouse.y += containerPos.y; // to fix margin collapsing\r\n\r\n\t\ttooltip.top = mouse.y;\r\n\t\ttooltip.left = mouse.x;\r\n\t\ttooltip.top += offsetY;\r\n\t\ttooltip.left += offsetX;\r\n\t\ttooltip.bottom = tooltip.top + tooltip.height;\r\n\t\ttooltip.right = tooltip.left + tooltip.width;\r\n\r\n\t\tconst scrollTop = window.scrollY + container.scrollTop; // to fix margin collapsing\r\n\t\t// edge cases when the tooltip element can be partially hidden by edges of the viewport\r\n\t\tif(tooltip.top < viewport.top - scrollTop){\r\n\t\t\ttooltip.top = viewport.top;\r\n\t\t\ttooltip.bottom = tooltip.top + tooltip.height;\r\n\t\t}else if(tooltip.bottom > viewport.bottom){\r\n\t\t\ttooltip.bottom = viewport.bottom;\r\n\t\t\ttooltip.top = tooltip.bottom - tooltip.height;\r\n\t\t}\r\n\r\n\t\tif(tooltip.left < viewport.left){\r\n\t\t\ttooltip.left = viewport.left;\r\n\t\t\ttooltip.right = viewport.left + tooltip.width;\r\n\t\t}else if(tooltip.right > viewport.right){\r\n\t\t\ttooltip.right = viewport.right;\r\n\t\t\ttooltip.left = tooltip.right - tooltip.width;\r\n\t\t}\r\n\r\n\t\tif(mouse.x >= tooltip.left && mouse.x <= tooltip.right) {\r\n\t\t\ttooltip.left = mouse.x - tooltip.width - offsetX;\r\n\t\t\ttooltip.right = tooltip.left + tooltip.width;\r\n\t\t}\r\n\r\n\t\tif(mouse.y >= tooltip.top && mouse.y <= tooltip.bottom) {\r\n\t\t\ttooltip.top = mouse.y - tooltip.height - offsetY;\r\n\t\t\ttooltip.bottom = tooltip.top + tooltip.height;\r\n\t\t}\r\n\r\n\t\t// GS-2827: when tooltip width too long\r\n\t\tif(tooltip.left < 0){\r\n\t\t\ttooltip.left = 0;\r\n\t\t}\r\n\t\tif(tooltip.right < 0){\r\n\t\t\ttooltip.right = 0;\r\n\t\t}\r\n\r\n\t\treturn tooltip;\r\n\t}\r\n\r\n\tprivate _getViewPortSize() : IViewBox {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst container = this._getViewPort();\r\n\t\tlet viewport = container;\r\n\t\tlet scrollTop = window.scrollY + document.body.scrollTop;\r\n\t\tlet scrollLeft = window.scrollX + document.body.scrollLeft;\r\n\t\tlet pos;\r\n\t\t// support for the initial tooltip mode where the tooltip element was attached to the data area of gantt\r\n\t\tif(container === gantt.$task_data){\r\n\t\t\tviewport = gantt.$task;\r\n\t\t\tscrollTop = 0;\r\n\t\t\tscrollLeft = 0;\r\n\t\t\tpos = domHelpers.getNodePosition(gantt.$task);\r\n\t\t}else{\r\n\t\t\tpos = domHelpers.getNodePosition(viewport);\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tleft:pos.x + scrollLeft,\r\n\t\t\ttop: pos.y + scrollTop,\r\n\t\t\twidth: pos.width,\r\n\t\t\theight: pos.height,\r\n\t\t\tbottom: pos.y + pos.height + scrollTop,\r\n\t\t\tright: pos.x + pos.width + scrollLeft\r\n\t\t};\r\n\t}\r\n}\r\n","import domEventsScope from \"../../core/ui/utils/dom_event_scope\";\r\nimport * as domHelpers from \"../../core/ui/utils/dom_helpers\";\r\nimport * as helpers from \"../../utils/helpers\";\r\nimport { Tooltip } from \"./tooltip\";\r\n\r\ninterface ITrackerTarget {\r\n\tselector: string;\r\n\tonmouseenter: (event: MouseEvent, node: HTMLElement) => void;\r\n\tonmousemove: (event: MouseEvent, node: HTMLElement) => void;\r\n\tonmouseleave: (event: MouseEvent, node: HTMLElement) => void;\r\n\tglobal: boolean;\r\n}\r\n\r\ninterface ITooltipConfig {\r\n\tselector: string;\r\n\thtml: (event: MouseEvent, node: HTMLElement) => string;\r\n\tglobal: boolean;\r\n}\r\n\r\nexport class TooltipManager{\r\n\ttooltip: Tooltip;\r\n\tprotected _domEvents: any;\r\n\tprivate _listeners: object = {};\r\n\tprivate _gantt: any;\r\n\tprivate delayShow: any;\r\n\tprivate delayHide: any;\r\n\r\n\tconstructor(gantt: any) {\r\n\t\tthis.tooltip = new Tooltip(gantt);\r\n\t\tthis._gantt = gantt;\r\n\t\tthis._domEvents = domEventsScope();\r\n\t\tthis._initDelayedFunctions();\r\n\t}\r\n\r\n\tdestructor(): void{\r\n\t\tthis.tooltip.hide();\r\n\t\tthis._domEvents.detachAll();\r\n\t}\r\n\thideTooltip(): void{\r\n\t\tthis.delayHide();\r\n\t}\r\n\tattach(config: ITrackerTarget): void {\r\n\t\tlet root = document.body;\r\n\t\tconst gantt = this._gantt;\r\n\t\tif(!config.global){\r\n\t\t\troot = gantt.$root;\r\n\t\t}\r\n\r\n\t\tlet watchableTarget = null;\r\n\t\tconst handler = (event) => {\r\n\t\t\tconst eventTarget = domHelpers.getTargetNode(event);\r\n\t\t\tconst targetNode = domHelpers.closest(eventTarget, config.selector);\r\n\t\t\tif(domHelpers.isChildOf(eventTarget, this.tooltip.getNode())){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst doOnMouseEnter = () => {\r\n\t\t\t\twatchableTarget = targetNode;\r\n\t\t\t\tconfig.onmouseenter(event, targetNode);\r\n\t\t\t};\r\n\r\n\t\t\tif(watchableTarget){\r\n\t\t\t\tif(targetNode && targetNode === watchableTarget){\r\n\t\t\t\t\tconfig.onmousemove(event, targetNode);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconfig.onmouseleave(event, watchableTarget);\r\n\t\t\t\t\twatchableTarget = null;\r\n\r\n\t\t\t\t\tif(targetNode && targetNode !== watchableTarget){\r\n\t\t\t\t\t\tdoOnMouseEnter();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(targetNode){\r\n\t\t\t\t\tdoOnMouseEnter();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.detach(config.selector);\r\n\t\tthis._domEvents.attach(root, \"mousemove\", handler);\r\n\t\tthis._listeners[config.selector] = {\r\n\t\t\tnode: root,\r\n\t\t\thandler\r\n\t\t};\r\n\t}\r\n\r\n\tdetach(selector: string): void {\r\n\t\tconst listener = this._listeners[selector];\r\n\t\tif(listener){\r\n\t\t\tthis._domEvents.detach(listener.node, \"mousemove\", listener.handler);\r\n\t\t}\r\n\t}\r\n\r\n\ttooltipFor(config: ITooltipConfig): void {\r\n\t\tconst cloneDomEvent = (event: MouseEvent) => {\r\n\t\t\tlet clone = event;\r\n\t\t\t// making events survive timeout in ie\r\n\t\t\t// tslint:disable-next-line no-string-literal\r\n\t\t\tif(document[\"createEventObject\"] && !document.createEvent){\r\n\t\t\t\t// tslint:disable-next-line no-string-literal\r\n\t\t\t\tclone = document[\"createEventObject\"](event);\r\n\t\t\t}\r\n\t\t\treturn clone;\r\n\t\t};\r\n\t\tthis._initDelayedFunctions();\r\n\t\tthis.attach({\r\n\t\t\tselector: config.selector,\r\n\t\t\tglobal: config.global,\r\n\t\t\tonmouseenter:(event: MouseEvent, node: HTMLElement) => {\r\n\t\t\t\tconst html = config.html(event, node);\r\n\t\t\t\tif(html){\r\n\t\t\t\t\tthis.delayShow(cloneDomEvent(event), html);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonmousemove:(event: MouseEvent, node: HTMLElement) => {\r\n\t\t\t\tconst html = config.html(event, node);\r\n\t\t\t\tif(html){\r\n\t\t\t\t\tthis.delayShow(cloneDomEvent(event), html);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.delayShow.$cancelTimeout();\r\n\t\t\t\t\tthis.delayHide();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonmouseleave:() => {\r\n\t\t\t\tthis.delayShow.$cancelTimeout();\r\n\t\t\t\tthis.delayHide();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _initDelayedFunctions(){\r\n\t\tconst gantt = this._gantt;\r\n\t\t// reset delayed functions in order to apply current values of tooltip_timeout\r\n\t\tif(this.delayShow){\r\n\t\t\tthis.delayShow.$cancelTimeout();\r\n\t\t}\r\n\t\tif(this.delayHide){\r\n\t\t\tthis.delayHide.$cancelTimeout();\r\n\t\t}\r\n\t\tthis.tooltip.hide();\r\n\r\n\t\tthis.delayShow = helpers.delay((event: MouseEvent, html: string) => {\r\n\t\t\tif(gantt.callEvent(\"onBeforeTooltip\", [event]) === false) {\r\n\t\t\t\tthis.tooltip.hide();\r\n\t\t\t} else {\r\n\t\t\t\tthis.tooltip.setContent(html);\r\n\t\t\t\tthis.tooltip.show(event);\r\n\t\t\t}\r\n\t\t}, gantt.config.tooltip_timeout || 1);\r\n\r\n\t\tthis.delayHide = helpers.delay(() => {\r\n\t\t\tthis.delayShow.$cancelTimeout();\r\n\t\t\tthis.tooltip.hide();\r\n\t\t}, gantt.config.tooltip_hide_timeout || 1);\r\n\t}\r\n\r\n}","import { IInlineEditState, IMonitor, IUndo, IUndoCommand, TActionType, TEntityType, TUndoValue } from \"./types\";\r\n\r\nconst noTrack = {\r\n\tonBeforeUndo: \"onAfterUndo\",\r\n\tonBeforeRedo: \"onAfterRedo\"\r\n};\r\n\r\nconst batchActions = [\r\n\t\"onTaskDragStart\",\r\n\t\"onAfterTaskUpdate\",\r\n\t\"onAfterParentExpand\",\r\n\t\"onAfterTaskDelete\",\r\n\t\"onBeforeBatchUpdate\"\r\n];\r\n\r\nexport class Monitor implements IMonitor {\r\n\tprivate _batchAction = null;\r\n\tprivate _batchMode = false;\r\n\tprivate _ignore = false;\r\n\tprivate _ignoreMoveEvents = false;\r\n\tprivate _initialTasks = {};\r\n\tprivate _initialLinks = {};\r\n\tprivate _nestedTasks =  {};\r\n\tprivate _nestedLinks = {};\r\n\tprivate _timeout;\r\n\tprivate _gantt: any;\r\n\tprivate _undo: IUndo;\r\n\r\n\tconstructor(undo: IUndo, gantt: any) {\r\n\t\tthis._undo = undo;\r\n\t\tthis._gantt = gantt;\r\n\t\tthis._attachEvents();\r\n\t}\r\n\r\n\tstore(id: TaskID | LinkID, type: TEntityType, overwrite: boolean = false) {\r\n\t\tif (type === this._gantt.config.undo_types.task) {\r\n\t\t\treturn this._storeTask(id, overwrite);\r\n\t\t}\r\n\t\tif (type === this._gantt.config.undo_types.link) {\r\n\t\t\treturn this._storeLink(id, overwrite);\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tisMoveEventsIgnored() {\r\n\t\treturn this._ignoreMoveEvents;\r\n\t}\r\n\ttoggleIgnoreMoveEvents(newValue?: boolean) {\r\n\t\tthis._ignoreMoveEvents = newValue || false;\r\n\t}\r\n\tstartIgnore() {\r\n\t\tthis._ignore = true;\r\n\t}\r\n\tstopIgnore() {\r\n\t\tthis._ignore = false;\r\n\t}\r\n\tstartBatchAction() {\r\n\t\t// try catching updates made from event handlers using timeout\r\n\t\tif (!this._timeout){\r\n\t\t\tthis._timeout = setTimeout(() => {\r\n\t\t\t\tthis.stopBatchAction();\r\n\t\t\t\tthis._timeout = null;\r\n\t\t\t}, 10);\r\n\t\t}\r\n\r\n\r\n\t\tif (this._ignore || this._batchMode) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._batchMode = true;\r\n\t\tthis._batchAction = this._undo.action.create();\r\n\t}\r\n\tstopBatchAction() {\r\n\t\tif (this._ignore) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst undo = this._undo;\r\n\t\tif (this._batchAction) {\r\n\t\t\tundo.logAction(this._batchAction);\r\n\t\t}\r\n\t\tthis._batchMode = false;\r\n\t\tthis._batchAction = null;\r\n\t}\r\n\tonTaskAdded(task: ITask) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeTaskCommand(task, this._undo.command.type.add);\r\n\t\t}\r\n\t}\r\n\tonTaskUpdated(task: ITask) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeTaskCommand(task, this._undo.command.type.update);\r\n\t\t}\r\n\t}\r\n\tonTaskMoved(task: ITask) {\r\n\t\tif (!this._ignore) {\r\n\t\t\t(task as any).$local_index = this._gantt.getTaskIndex(task.id);\r\n\t\t\tthis._storeEntityCommand(\r\n\t\t\t\ttask,\r\n\t\t\t\tthis.getInitialTask(task.id),\r\n\t\t\t\tthis._undo.command.type.move,\r\n\t\t\t\tthis._undo.command.entity.task\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\tonTaskDeleted(task: ITask) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeTaskCommand(task, this._undo.command.type.remove);\r\n\t\t\tif (this._nestedTasks[task.id]) {\r\n\t\t\t\tconst children = this._nestedTasks[task.id];\r\n\t\t\t\tfor (let i = 0; i < children.length; i++) {\r\n\t\t\t\t\tthis._storeTaskCommand(children[i], this._undo.command.type.remove);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this._nestedLinks[task.id]) {\r\n\t\t\t\tconst childrenLinks = this._nestedLinks[task.id];\r\n\t\t\t\tfor (let i = 0; i < childrenLinks.length; i++) {\r\n\t\t\t\t\tthis._storeLinkCommand(childrenLinks[i], this._undo.command.type.remove);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tonLinkAdded(link: ILink) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeLinkCommand(link, this._undo.command.type.add);\r\n\t\t}\r\n\t}\r\n\tonLinkUpdated(link: ILink) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeLinkCommand(link, this._undo.command.type.update);\r\n\t\t}\r\n\t}\r\n\tonLinkDeleted(link: ILink) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeLinkCommand(link, this._undo.command.type.remove);\r\n\t\t}\r\n\t}\r\n\tsetNestedTasks(id: TaskID, taskIds: TaskID[]) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tlet task = null;\r\n\t\tconst tasks = [];\r\n\t\tlet\tlinkIds = this._getLinks(gantt.getTask(id));\r\n\r\n\t\tfor (let i = 0; i < taskIds.length; i++) {\r\n\t\t\ttask = this.setInitialTask(taskIds[i]);\r\n\t\t\tlinkIds = linkIds.concat(this._getLinks(task));\r\n\t\t\ttasks.push(task);\r\n\t\t}\r\n\r\n\t\tconst uniqueLinks = {};\r\n\t\tfor (let i = 0; i < linkIds.length; i++) {\r\n\t\t\tuniqueLinks[linkIds[i]] = true;\r\n\t\t}\r\n\t\tconst links = [];\r\n\t\tfor (const i in uniqueLinks) {\r\n\t\t\tlinks.push(this.setInitialLink(i));\r\n\t\t}\r\n\t\tthis._nestedTasks[id] = tasks;\r\n\t\tthis._nestedLinks[id] = links;\r\n\t}\r\n\tsetInitialTask(id: TaskID, overwrite?: boolean) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tif (overwrite || (!this._initialTasks[id] || !this._batchMode)) {\r\n\t\t\tconst task = gantt.copy(gantt.getTask(id));\r\n\t\t\ttask.$index = gantt.getGlobalTaskIndex(id);\r\n\t\t\ttask.$local_index = gantt.getTaskIndex(id);\r\n\t\t\tthis.setInitialTaskObject(id, task);\r\n\t\t}\r\n\t\treturn this._initialTasks[id];\r\n\t}\r\n\tgetInitialTask(id: TaskID) {\r\n\t\treturn this._initialTasks[id];\r\n\t}\r\n\tclearInitialTasks() {\r\n\t\tthis._initialTasks = {};\r\n\t}\r\n\tsetInitialTaskObject(id: TaskID, object: ITask) {\r\n\t\tthis._initialTasks[id] = object;\r\n\t}\r\n\tsetInitialLink(id: LinkID, overwrite?: boolean) {\r\n\t\tif (!this._initialLinks[id] || !this._batchMode) {\r\n\t\t\tthis._initialLinks[id] = this._gantt.copy(this._gantt.getLink(id));\r\n\t\t}\r\n\t\treturn this._initialLinks[id];\r\n\t}\r\n\tgetInitialLink(id: LinkID) {\r\n\t\treturn this._initialLinks[id];\r\n\t}\r\n\tclearInitialLinks() {\r\n\t\tthis._initialLinks = {};\r\n\t}\r\n\tprivate _attachEvents() {\r\n\t\tlet deleteCacheCooldown = null;\r\n\t\tconst gantt = this._gantt;\r\n\r\n\t\tconst saveInitialAll = () => {\r\n\t\t\tif (!deleteCacheCooldown) {\r\n\t\t\t\tdeleteCacheCooldown = setTimeout(() => {\r\n\t\t\t\t\tdeleteCacheCooldown = null;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.clearInitialTasks();\r\n\t\t\t\tgantt.eachTask((task: ITask) => {\r\n\t\t\t\t\tthis.setInitialTask(task.id);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.clearInitialLinks();\r\n\t\t\t\tgantt.getLinks().forEach((link: ILink) => {\r\n\t\t\t\t\tthis.setInitialLink(link.id);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst getMoveObjectByTaskId = (id: TaskID) => {\r\n\t\t\treturn gantt.copy(gantt.getTask(id));\r\n\t\t};\r\n\r\n\t\tfor (const i in noTrack) {\r\n\t\t\tgantt.attachEvent(i, () => {\r\n\t\t\t\tthis.startIgnore();\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t\tgantt.attachEvent(noTrack[i], () => {\r\n\t\t\t\tthis.stopIgnore();\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfor (let i  = 0; i < batchActions.length; i++) {\r\n\t\t\tgantt.attachEvent(batchActions[i], () => {\r\n\t\t\t\tthis.startBatchAction();\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tgantt.attachEvent(\"onParse\", () => {\r\n\t\t\tthis._undo.clearUndoStack();\r\n\t\t\tthis._undo.clearRedoStack();\r\n\t\t\tsaveInitialAll();\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterTaskAdd\", (id: TaskID, task: ITask) => {\r\n\t\t\tthis.setInitialTask(id, true);\r\n\t\t\tthis.onTaskAdded(task);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterTaskUpdate\", (id: TaskID, task: ITask) => {\r\n\t\t\tthis.onTaskUpdated(task);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterParentExpand\", (id: TaskID, task: ITask) => {\r\n\t\t\tthis.onTaskUpdated(task);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterTaskDelete\", (id: TaskID, task: ITask) => {\r\n\t\t\tthis.onTaskDeleted(task);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterLinkAdd\", (id: LinkID, link: ILink) => {\r\n\t\t\tthis.setInitialLink(id, true);\r\n\t\t\tthis.onLinkAdded(link);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterLinkUpdate\", (id: LinkID, link: ILink) => {\r\n\t\t\tthis.onLinkUpdated(link);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterLinkDelete\", (id: LinkID, link: ILink) => {\r\n\t\t\tthis.onLinkDeleted(link);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onRowDragEnd\", (id: TaskID, target: TaskID) => {\r\n\t\t\tthis.onTaskMoved(getMoveObjectByTaskId(id));\r\n\t\t\tthis.toggleIgnoreMoveEvents();\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onBeforeTaskDelete\", (id: TaskID) => {\r\n\t\t\tthis.store(id, gantt.config.undo_types.task);\r\n\t\t\tconst nested = [];\r\n\r\n\t\t\t// remember task indexes in case their being deleted in a loop, so they could be restored in the correct order\r\n\t\t\tsaveInitialAll();\r\n\r\n\t\t\tgantt.eachTask((task: ITask) => {\r\n\t\t\t\tnested.push(task.id);\r\n\t\t\t}, id);\r\n\t\t\tthis.setNestedTasks(id, nested);\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tconst datastore = gantt.getDatastore(\"task\");\r\n\r\n\t\tdatastore.attachEvent(\"onBeforeItemMove\", (id: TaskID, parent: TaskID, tindex: number) => {\r\n\t\t\tif (!this.isMoveEventsIgnored()) {\r\n\t\t\t\tsaveInitialAll();\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tdatastore.attachEvent(\"onAfterItemMove\", (id: TaskID, parent: TaskID, tindex: number) => {\r\n\t\t\tif (!this.isMoveEventsIgnored()) {\r\n\t\t\t\tthis.onTaskMoved(getMoveObjectByTaskId(id));\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onRowDragStart\", (id: TaskID, target: TaskID, e: Event) => {\r\n\t\t\tthis.toggleIgnoreMoveEvents(true);\r\n\t\t\tsaveInitialAll();\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tlet dragId = null;\r\n\t\tlet projectDrag = false;\r\n\t\tgantt.attachEvent(\"onBeforeTaskDrag\", (taskId: TaskID) => {\r\n\t\t\tdragId = gantt.getState().drag_id;\r\n\t\t\tif (dragId === taskId){\r\n\t\t\t\tconst task = gantt.getTask(taskId);\r\n\t\t\t\tif (gantt.isSummaryTask(task) && gantt.config.drag_project){\r\n\t\t\t\t\tprojectDrag = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// GS-99. Store the initial task dates before multiple drag\r\n\t\t\tif (gantt.plugins().multiselect){\r\n\t\t\t\tconst selectedIds = gantt.getSelectedTasks();\r\n\t\t\t\tif (selectedIds.length > 1){\r\n\t\t\t\t\tselectedIds.forEach((id)=>{\r\n\t\t\t\t\t\tthis.store(id, gantt.config.undo_types.task, true);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this.store(taskId, gantt.config.undo_types.task);\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onAfterTaskDrag\", (taskId: TaskID) => {\r\n\t\t\t// if we drag multiple tasks and other tasks move to another date after that,\r\n\t\t\t// auto-scheduling/correct work time should occur in anoher command.\r\n\t\t\t// otherwise, when we undo the changes, the task constraint is not restored correctly\r\n\t\t\tconst multipleDrag = projectDrag || (gantt.plugins().multiselect && gantt.getSelectedTasks().length > 1);\r\n\t\t\tif (multipleDrag && dragId === taskId){\r\n\t\t\t\tprojectDrag = false;\r\n\t\t\t\tdragId = null;\r\n\t\t\t\tthis.stopBatchAction();\r\n\t\t\t}\r\n\t\t\t// GS-99. When dragging multiple tasks, we need to store the initial tasks\r\n\t\t\tthis.store(taskId, gantt.config.undo_types.task, true);\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onLightbox\", (taskId: TaskID) => this.store(taskId, gantt.config.undo_types.task));\r\n\r\n\t\tgantt.attachEvent(\"onBeforeTaskAutoSchedule\", (task: ITask) => {\r\n\t\t\tthis.store(task.id, gantt.config.undo_types.task, true);\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tif (gantt.ext.inlineEditors) {\r\n\t\t\t// remove the onGanttLayoutReady wrapper when GS-1288 is merged\r\n\t\t\tlet onBeforeEditStartId = null;\r\n\t\t\tlet onEditStart = null;\r\n\t\t\tgantt.attachEvent(\"onGanttLayoutReady\", () => {\r\n\t\t\t\tif (onBeforeEditStartId) {\r\n\t\t\t\t\tgantt.ext.inlineEditors.detachEvent(onBeforeEditStartId);\r\n\t\t\t\t}\r\n\t\t\t\tif (onEditStart) {\r\n\t\t\t\t\tgantt.ext.inlineEditors.detachEvent(onEditStart);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tonEditStart = gantt.ext.inlineEditors.attachEvent(\"onEditStart\", (state: IInlineEditState) => {\r\n\t\t\t\t\t// GS-2598: skip saving changes of resource lightbox grid\r\n\t\t\t\t\tif(gantt.$data.tempAssignmentsStore && gantt._lightbox_id){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.store(state.id, gantt.config.undo_types.task);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// GS-99. If another inline editor is opened and we open a new inline editor,\r\n\t\t\t\t// we shouldn't use the batchAction\r\n\t\t\t\tonBeforeEditStartId = gantt.ext.inlineEditors.attachEvent(\"onBeforeEditStart\", (state: IInlineEditState) => {\r\n\t\t\t\t\tthis.stopBatchAction();\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _storeCommand(command: IUndoCommand) {\r\n\t\tconst undo = this._undo;\r\n\t\tundo.updateConfigs();\r\n\r\n\t\tif (!undo.undoEnabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this._batchMode) {\r\n\t\t\tthis._batchAction.commands.push(command);\r\n\t\t} else {\r\n\t\t\tconst action = undo.action.create([command]);\r\n\t\t\tundo.logAction(action);\r\n\t\t}\r\n\t}\r\n\tprivate _storeEntityCommand(obj: TUndoValue, old: TUndoValue, actionType: TActionType, entityType: TEntityType) {\r\n\t\tconst undo = this._undo;\r\n\t\tconst command = undo.command.create(obj, old, actionType, entityType);\r\n\t\tthis._storeCommand(command);\r\n\t}\r\n\tprivate _storeTaskCommand(obj: ITask, type: TActionType) {\r\n\t\tif(this._gantt.isTaskExists(obj.id)){\r\n\t\t\t(obj as any).$local_index = this._gantt.getTaskIndex(obj.id);\r\n\t\t}\r\n\r\n\t\tthis._storeEntityCommand(obj, this.getInitialTask(obj.id), type, this._undo.command.entity.task);\r\n\t}\r\n\tprivate _storeLinkCommand(obj: ILink, type: TActionType) {\r\n\t\tthis._storeEntityCommand(obj, this.getInitialLink(obj.id), type, this._undo.command.entity.link);\r\n\t}\r\n\tprivate _getLinks(task: ITask) {\r\n\t\treturn task.$source.concat(task.$target);\r\n\t}\r\n\tprivate _storeTask(taskId: TaskID, overwrite: boolean = false) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis.setInitialTask(taskId, overwrite);\r\n\t\tgantt.eachTask((child: ITask) => {\r\n\t\t\tthis.setInitialTask(child.id);\r\n\t\t}, taskId);\r\n\t\treturn true;\r\n\t}\r\n\tprivate _storeLink(linkId: LinkID, overwrite: boolean = false) {\r\n\t\tthis.setInitialLink(linkId, overwrite);\r\n\t\treturn true;\r\n\t}\r\n}","import { IUndo, IUndoCommand, IUndoCommands, IUndoPropAction, IUndoPropCommand, TActionType, TEntityType, TUndoStack, TUndoValue } from \"./types\";\r\n\r\nconst MAX_UNDO_STEPS = 100;\r\n\r\nexport class Undo implements IUndo {\r\n\r\n\tmaxSteps = MAX_UNDO_STEPS;\r\n\tundoEnabled = true;\r\n\tredoEnabled = true;\r\n\taction: IUndoPropAction = {\r\n\t\tcreate: (commands?: IUndoCommand[]): IUndoCommands => {\r\n\t\t\treturn { commands: (commands ? commands.slice() : []) };\r\n\t\t},\r\n\t\tinvert: (action: IUndoCommands): IUndoCommands => {\r\n\t\t\tconst gantt = this._gantt;\r\n\t\t\tconst revert = gantt.copy(action);\r\n\t\t\tconst commands = this.command;\r\n\t\t\tfor (let i = 0; i < action.commands.length; i++) {\r\n\t\t\t\tconst command = revert.commands[i] = commands.invert(revert.commands[i]);\r\n\t\t\t\tif (command.type === commands.type.update || command.type === commands.type.move) {\r\n\t\t\t\t\t[command.value, command.oldValue] = [command.oldValue, command.value];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn revert as IUndoCommands;\r\n\t\t}\r\n\t};\r\n\tcommand: IUndoPropCommand = {\r\n\t\t// entities that require different processing for undoing-redoing changes (gantt.config.undo_types)\r\n\t\tentity: null,\r\n\r\n\t\t// types of traced actions (gantt.config.undo_actions)\r\n\t\ttype: null,\r\n\r\n\t\tcreate: (value: TUndoValue, oldValue: TUndoValue, type: TActionType, entity: TEntityType): IUndoCommand => {\r\n\t\t\tconst gantt = this._gantt;\r\n\t\t\treturn {\r\n\t\t\t\tentity,\r\n\t\t\t\ttype,\r\n\t\t\t\tvalue: gantt.copy(value),\r\n\t\t\t\toldValue: gantt.copy(oldValue || value)\r\n\t\t\t};\r\n\t\t},\r\n\t\tinvert: (command: IUndoCommand): IUndoCommand => {\r\n\t\t\tconst gantt = this._gantt;\r\n\t\t\tconst revert = gantt.copy(command);\r\n\t\t\trevert.type = this.command.inverseCommands(command.type);\r\n\t\t\treturn revert;\r\n\t\t},\r\n\t\tinverseCommands: (command: TActionType): TActionType => {\r\n\t\t\tconst gantt = this._gantt;\r\n\t\t\tconst types = this.command.type;\r\n\t\t\tswitch (command) {\r\n\t\t\t\tcase types.update:\r\n\t\t\t\t\treturn types.update;\r\n\t\t\t\tcase types.remove:\r\n\t\t\t\t\treturn types.add;\r\n\t\t\t\tcase types.add:\r\n\t\t\t\t\treturn types.remove;\r\n\t\t\t\tcase types.move:\r\n\t\t\t\t\treturn types.move;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tgantt.assert(false, \"Invalid command \"+ command);\r\n\t\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tprivate _undoStack = [];\r\n\tprivate _redoStack = [];\r\n\tprivate _gantt: any;\r\n\r\n\tconstructor(gantt: any){\r\n\t\tthis._gantt = gantt;\r\n\t}\r\n\tgetUndoStack() {\r\n\t\treturn this._undoStack;\r\n\t}\r\n\tsetUndoStack(stack: []) {\r\n\t\tthis._undoStack = stack;\r\n\t}\r\n\r\n\tgetRedoStack() {\r\n\t\treturn this._redoStack;\r\n\t}\r\n\tsetRedoStack(stack: []) {\r\n\t\tthis._redoStack = stack;\r\n\t}\r\n\r\n\tclearUndoStack() {\r\n\t\tthis._undoStack = [];\r\n\t}\r\n\r\n\tclearRedoStack() {\r\n\t\tthis._redoStack = [];\r\n\t}\r\n\r\n\tupdateConfigs() {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis.maxSteps = gantt.config.undo_steps || MAX_UNDO_STEPS;\r\n\t\tthis.command.entity = gantt.config.undo_types;\r\n\t\tthis.command.type = gantt.config.undo_actions;\r\n\t\tthis.undoEnabled = !!gantt.config.undo;\r\n\t\tthis.redoEnabled = !!gantt.config.redo; // GS-873, Redo should work even when the `gantt.config.undo` is disabled.\r\n\t}\r\n\r\n\tundo() {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis.updateConfigs();\r\n\t\tif (!this.undoEnabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst action = this._pop(this._undoStack);\r\n\t\tif (action) {\r\n\t\t\tthis._reorderCommands(action);\r\n\t\t}\r\n\t\tif (gantt.callEvent(\"onBeforeUndo\", [action]) !== false) {\r\n\t\t\tif (action) {\r\n\t\t\t\tthis._applyAction(this.action.invert(action));\r\n\t\t\t\tthis._push(this._redoStack, gantt.copy(action));\r\n\t\t\t\tgantt.callEvent(\"onAfterUndo\", [action]);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tgantt.callEvent(\"onAfterUndo\", [null]);\r\n\t}\r\n\r\n\tredo() {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis.updateConfigs();\r\n\t\tif (!this.redoEnabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst action = this._pop(this._redoStack);\r\n\t\tif (action) {\r\n\t\t\tthis._reorderCommands(action);\r\n\t\t}\r\n\r\n\t\tif (gantt.callEvent(\"onBeforeRedo\", [action]) !== false) {\r\n\t\t\tif (action) {\r\n\t\t\t\tthis._applyAction(action);\r\n\t\t\t\tthis._push(this._undoStack, gantt.copy(action));\r\n\t\t\t\tgantt.callEvent(\"onAfterRedo\", [action]);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tgantt.callEvent(\"onAfterRedo\", [null]);\r\n\t}\r\n\r\n\t// storeUndo:\r\n\tlogAction(action: IUndoCommands) {\r\n\t\tthis._push(this._undoStack, action);\r\n\t\tthis._redoStack = [];\r\n\t}\r\n\r\n\tprivate _push(stack: TUndoStack, action: IUndoCommands): IUndoCommands {\r\n\t\tconst gantt = this._gantt;\r\n\t\tif (!action.commands.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst event = stack === this._undoStack ? \"onBeforeUndoStack\" : \"onBeforeRedoStack\";\r\n\t\tif (gantt.callEvent(event, [action]) === false){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// commands can be removed from event handler\r\n\t\tif (!action.commands.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tstack.push(action);\r\n\t\twhile (stack.length > this.maxSteps) {\r\n\t\t\tstack.shift();\r\n\t\t}\r\n\t\treturn action;\r\n\t}\r\n\r\n\tprivate _pop(stack: TUndoStack): IUndoCommands {\r\n\t\treturn stack.pop();\r\n\t}\r\n\r\n\tprivate _reorderCommands(action) {\r\n\t\t// firstly process tasks and only then links\r\n\t\t// in order to ensure links are added not earlier than their tasks\r\n\t\t// firstly to 'move' actions and only then updates\r\n\t\tconst weights = { any: 0, link:1, task:2 };\r\n\t\tconst actionWeights = { move: 1, any:0 };\r\n\t\taction.commands.sort(function(a, b) {\r\n\t\t\tif (a.entity === \"task\" && b.entity === \"task\") {\r\n\t\t\t\tif (a.type !== b.type) {\r\n\t\t\t\t\treturn (actionWeights[b.type] || 0) - (actionWeights[a.type] || 0);\r\n\t\t\t\t} else if (a.type === \"move\" && a.oldValue && b.oldValue && b.oldValue.parent === a.oldValue.parent) {\r\n\t\t\t\t\treturn a.oldValue.$index - b.oldValue.$index;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tconst weightA = weights[a.entity] || weights.any;\r\n\t\t\t\tconst weightB = weights[b.entity] || weights.any;\r\n\t\t\t\treturn weightB - weightA;\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _applyAction(action: IUndoCommands) {\r\n\t\tlet command = null;\r\n\t\tconst entities = this.command.entity;\r\n\t\tconst actions = this.command.type;\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst methods = {};\r\n\t\tmethods[entities.task] = {\r\n\t\t\tadd: \"addTask\",\r\n\t\t\tget: \"getTask\",\r\n\t\t\tupdate: \"updateTask\",\r\n\t\t\tremove: \"deleteTask\",\r\n\t\t\tmove: \"moveTask\",\r\n\t\t\tisExists: \"isTaskExists\"\r\n\t\t};\r\n\t\tmethods[entities.link] = {\r\n\t\t\tadd: \"addLink\",\r\n\t\t\tget: \"getLink\",\r\n\t\t\tupdate: \"updateLink\",\r\n\t\t\tremove: \"deleteLink\",\r\n\t\t\tisExists: \"isLinkExists\"\r\n\t\t};\r\n\r\n\t\tgantt.batchUpdate(function() {\r\n\t\t\t// it is logical to undo actions from the last one to the first one\r\n\t\t\t// but we have to do it from the first one because the order\r\n\t\t\t// of tasks ($index and $local_index) depends on the existing tasks\r\n\t\t\tfor (let i = 0; i < action.commands.length; i++) {\r\n\t\t\t\tcommand = action.commands[i];\r\n\t\t\t\tconst method = methods[command.entity][command.type];\r\n\t\t\t\tconst getMethod = methods[command.entity].get;\r\n\t\t\t\tconst check = methods[command.entity].isExists;\r\n\r\n\t\t\t\tif (command.type === actions.add) {\r\n\t\t\t\t\tgantt[method](command.oldValue, command.oldValue.parent, command.oldValue.$local_index);\r\n\t\t\t\t} else if (command.type === actions.remove) {\r\n\t\t\t\t\tif (gantt[check](command.value.id)) {\r\n\t\t\t\t\t\tgantt[method](command.value.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (command.type === actions.update) {\r\n\t\t\t\t\tconst item = gantt[getMethod](command.value.id);\r\n\t\t\t\t\tfor(const prop in command.value){\r\n\t\t\t\t\t\tconst internalProperty = prop.startsWith(\"$\") || prop.startsWith(\"_\");\r\n\t\t\t\t\t\tconst whitelist = [\"$open\"];\r\n\t\t\t\t\t\tlet copyProperty = !internalProperty;\r\n\t\t\t\t\t\tif (whitelist.indexOf(prop) > -1){\r\n\t\t\t\t\t\t\tcopyProperty = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(copyProperty){\r\n\t\t\t\t\t\t\titem[prop] = command.value[prop];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgantt[method](command.value.id);\r\n\t\t\t\t} else if (command.type === actions.move) {\r\n\t\t\t\t\tgantt[method](command.value.id, command.value.$local_index, command.value.parent);\r\n\t\t\t\t\t// GS-680: We should send the changes to the server after we undo vertical reorder\r\n\t\t\t\t\tgantt.callEvent(\"onRowDragEnd\", [command.value.id]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}","\r\nimport click_drag from \"./click_drag\";\r\nimport drag_timeline from \"./drag_timeline\";\r\nimport export_api from \"./export_api\";\r\nimport fullscreen from \"./fullscreen\";\r\nimport keyboard_navigation from \"./keyboard_navigation\";\r\nimport marker from \"./marker\";\r\nimport multiselect from \"./multiselect\";\r\nimport quick_info from \"./quick_info\";\r\nimport tooltip from \"./tooltip\";\r\nimport undo from \"./undo\";\r\n\r\nexport default {\r\n\tclick_drag,\r\n\tdrag_timeline,\r\n\tfullscreen,\r\n\tkeyboard_navigation,\r\n\tquick_info,\r\n\ttooltip,\r\n\tundo,\r\n\tmarker,\r\n\tmultiselect,\r\n\texport_api\r\n};","import { EventsManager } from \"./eventsManager\";\r\nimport { ISelectedRegionConfig, SelectedRegion } from \"./selectedRegion\";\r\n\r\nexport default function(gantt: any){\r\n\tif (!gantt.ext) {\r\n\t\tgantt.ext = {};\r\n\t}\r\n\r\n\tconst defaultConfig: ISelectedRegionConfig = {\r\n\t\tclassName: \"gantt_click_drag_rect\",\r\n\t\tuseRequestAnimationFrame: true,\r\n\t\tcallback: undefined,\r\n\t\tsingleRow: false\r\n\t};\r\n\r\n\tfunction setClickDrag(){\r\n\t\tconst config: ISelectedRegionConfig = { viewPort: gantt.$task_data, ...defaultConfig };\r\n\t\tif (gantt.ext.clickDrag){\r\n\t\t\tgantt.ext.clickDrag.destructor();\r\n\t\t}\r\n\t\tgantt.ext.clickDrag = new EventsManager(gantt);\r\n\t\tconst clickDrag = gantt.config.click_drag;\r\n\t\tconfig.render = clickDrag.render || defaultConfig.render;\r\n\t\tconfig.className = clickDrag.className || defaultConfig.className;\r\n\t\tconfig.callback = clickDrag.callback || defaultConfig.callback;\r\n\t\tconfig.viewPort = clickDrag.viewPort || gantt.$task_data;\r\n\t\tconfig.useRequestAnimationFrame = clickDrag.useRequestAnimationFrame === undefined ?\r\n\t\t\tdefaultConfig.useRequestAnimationFrame : clickDrag.useRequestAnimationFrame;\r\n\r\n\t\tconfig.singleRow = clickDrag.singleRow === undefined ? defaultConfig.singleRow : clickDrag.singleRow;\r\n\t\tconst timeline = gantt.$ui.getView(\"timeline\");\r\n\t\tconst selectedRegion = new SelectedRegion(config, gantt, timeline);\r\n\t\tgantt.ext.clickDrag.attach(selectedRegion, clickDrag.useKey, clickDrag.ignore);\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", () => {\r\n\t\tif (gantt.config.click_drag){\r\n\t\t\tsetClickDrag();\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onGanttLayoutReady\", function(){\r\n\t\tif (gantt.$container && gantt.config.click_drag){\r\n\t\t\tgantt.attachEvent(\"onGanttRender\", function(){\r\n\t\t\t\tsetClickDrag();\r\n\t\t\t}, {once:true});\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onDestroy\", () => {\r\n\t\tif (gantt.ext.clickDrag){\r\n\t\t\tgantt.ext.clickDrag.destructor();\r\n\t\t}\r\n\t});\r\n\r\n}","import { EventsManager } from \"./eventsManager\";\r\nexport default function(gantt: any){\r\n\tif (!gantt.ext){\r\n\t\tgantt.ext = {};\r\n\t}\r\n\r\n\tgantt.ext.dragTimeline = {\r\n\t\tcreate: () => EventsManager.create(gantt),\r\n\t\t_isDragInProgress: () => EventsManager._isDragInProgress\r\n\t};\r\n\r\n\tgantt.config.drag_timeline = {\r\n\t\tenabled: true,\r\n\t\trender: false\r\n\t};\r\n}","export default function(gantt: any){\r\n\r\ninterface IBody extends HTMLElement {\r\n\tmsRequestFullscreen?: () => void;\r\n\tmozRequestFullScreen?: () => void;\r\n\twebkitRequestFullscreen?: (ALLOW_KEYBOARD_INPUT: any) => void;\r\n}\r\n\r\n\r\ninterface IConsole extends Console {\r\n\twarning?: (str: string) => void;\r\n}\r\n\r\ninterface IDocument extends Document {\r\n\tfullscreenElement: Element;\r\n\tmozFullScreenElement?: Element;\r\n\twebkitFullscreenElement?: Element;\r\n\tmsFullscreenElement?: Element;\r\n\twebkitFullscreenEnabled?: boolean;\r\n\tmozFullScreenEnabled?: boolean;\r\n\tmsFullscreenEnabled?: boolean;\r\n\tmsExitFullscreen?: () => void;\r\n\tmozCancelFullScreen?: () => void;\r\n\twebkitExitFullscreen?: () => void;\r\n}\r\n\r\ninterface IElement extends Element {\r\n\tALLOW_KEYBOARD_INPUT?: boolean;\r\n}\r\n\r\ninterface IElementSizes extends ISizes {\r\n\tmodified: boolean;\r\n}\r\n\r\ninterface ISizes {\r\n\twidth: null | string;\r\n\theight: null | string;\r\n\ttop: null | string;\r\n\tleft: null | string;\r\n\tposition: null | string;\r\n\tzIndex: null | number;\r\n}\r\n\r\nfunction isExpanded() {\r\n\tconst element = ((document as IDocument).fullscreenElement ||\r\n\t\t(document as IDocument).mozFullScreenElement ||\r\n\t\t(document as IDocument).webkitFullscreenElement ||\r\n\t\t(document as IDocument).msFullscreenElement);\r\n\treturn !!(element && element === document.body);\r\n}\r\n\r\nfunction isFullscreenAvailable() {\r\n\ttry {\r\n\t\treturn (document as IDocument).fullscreenEnabled ||\r\n\t\t\t(document as IDocument).webkitFullscreenEnabled ||\r\n\t\t\t(document as IDocument).mozFullScreenEnabled ||\r\n\t\t\t(document as IDocument).msFullscreenEnabled;\r\n\t} catch (e) {\r\n\t\t// eslint-disable-next-line no-console\r\n\t\tconsole.error(\"Fullscreen is not available:\", e); \r\n\t}\r\n}\r\n\r\nconst state = gantt.$services.getService(\"state\");\r\nstate.registerProvider(\"fullscreen\", () => {\r\n\tif (isFullscreenAvailable()){\r\n\t\treturn { fullscreen: isExpanded() };\r\n\t} else {\r\n\t\treturn undefined;\r\n\t}\r\n});\r\n\r\nlet backupBodyPadding = {\r\n\toverflow: null,\r\n\tpadding: null,\r\n\tpaddingTop: null,\r\n\tpaddingRight: null,\r\n\tpaddingBottom: null,\r\n\tpaddingLeft: null\r\n};\r\n\r\nconst backupElementSizes: IElementSizes = {\r\n\twidth: null,\r\n\theight: null,\r\n\ttop: null,\r\n\tleft: null,\r\n\tposition: null,\r\n\tzIndex: null,\r\n\tmodified: false\r\n};\r\n\r\nlet backupPositioning = null;\r\nfunction resetParentPositioning(root){\r\n\tlet parent = root.parentNode;\r\n\tconst positions = [];\r\n\twhile(parent && parent.style){\r\n\t\tpositions.push({\r\n\t\t\telement: parent,\r\n\t\t\toriginalPositioning: parent.style.position\r\n\t\t});\r\n\t\tparent.style.position = \"static\";\r\n\t\tparent = parent.parentNode;\r\n\t}\r\n\treturn positions;\r\n}\r\n\r\nfunction restoreParentPositioning(positions: any[]){\r\n\tpositions.forEach(record => {\r\n\t\trecord.element.style.position = record.originalPositioning;\r\n\t});\r\n}\r\n\r\n// expand gantt root element to fullscreen automatically\r\nfunction setFullScreenSizes() {\r\n\tconst root = gantt.ext.fullscreen.getFullscreenElement();\r\n\tconst body = document.body;\r\n\tupdateSizes(root.style, backupElementSizes);\r\n\tbackupBodyPadding = {\r\n\t\toverflow: body.style.overflow,\r\n\t\tpadding: body.style.padding ? body.style.padding : null,\r\n\t\tpaddingTop: body.style.paddingTop ? body.style.paddingTop : null,\r\n\t\tpaddingRight: body.style.paddingRight ? body.style.paddingRight : null,\r\n\t\tpaddingBottom: body.style.paddingBottom ? body.style.paddingBottom : null,\r\n\t\tpaddingLeft: body.style.paddingLeft ? body.style.paddingLeft : null\r\n\t};\r\n\r\n\tif (body.style.padding) {\r\n\t\tbody.style.padding = \"0\";\r\n\t}\r\n\tif (body.style.paddingTop) {\r\n\t\tbody.style.paddingTop = \"0\";\r\n\t}\r\n\tif (body.style.paddingRight) {\r\n\t\tbody.style.paddingRight = \"0\";\r\n\t}\r\n\tif (body.style.paddingBottom) {\r\n\t\tbody.style.paddingBottom = \"0\";\r\n\t}\r\n\tif (body.style.paddingLeft) {\r\n\t\tbody.style.paddingLeft = \"0\";\r\n\t}\r\n\r\n\tbody.style.overflow = \"hidden\";\r\n\r\n\troot.style.width = \"100vw\";\r\n\troot.style.height = \"100vh\";\r\n\troot.style.top = \"0px\";\r\n\troot.style.left = \"0px\";\r\n\troot.style.position = \"absolute\";\r\n\troot.style.zIndex = 1;\r\n\tbackupElementSizes.modified = true;\r\n\tbackupPositioning = resetParentPositioning(root);\r\n}\r\n\r\nfunction restoreSizes() {\r\n\tconst root = gantt.ext.fullscreen.getFullscreenElement();\r\n\tconst body = document.body;\r\n\tif (backupElementSizes.modified) {\r\n\t\tif (backupBodyPadding.padding) {\r\n\t\t\tbody.style.padding = backupBodyPadding.padding;\r\n\t\t}\r\n\t\tif (backupBodyPadding.paddingTop) {\r\n\t\t\tbody.style.paddingTop = backupBodyPadding.paddingTop;\r\n\t\t}\r\n\t\tif (backupBodyPadding.paddingRight) {\r\n\t\t\tbody.style.paddingRight = backupBodyPadding.paddingRight;\r\n\t\t}\r\n\t\tif (backupBodyPadding.paddingBottom) {\r\n\t\t\tbody.style.paddingBottom = backupBodyPadding.paddingBottom;\r\n\t\t}\r\n\t\tif (backupBodyPadding.paddingLeft) {\r\n\t\t\tbody.style.paddingLeft = backupBodyPadding.paddingLeft;\r\n\t\t}\r\n\r\n\t\tbody.style.overflow = backupBodyPadding.overflow;\r\n\t\tbackupBodyPadding = {\r\n\t\t\toverflow: null,\r\n\t\t\tpadding: null,\r\n\t\t\tpaddingTop: null,\r\n\t\t\tpaddingRight: null,\r\n\t\t\tpaddingBottom: null,\r\n\t\t\tpaddingLeft: null\r\n\t\t};\r\n\t\tupdateSizes(backupElementSizes, root.style);\r\n\t\tbackupElementSizes.modified = false;\r\n\t}\r\n\trestoreParentPositioning(backupPositioning);\r\n\tbackupPositioning = null;\r\n}\r\n\r\nfunction updateSizes(source: ISizes, target: ISizes) {\r\n\ttarget.width = source.width;\r\n\ttarget.height = source.height;\r\n\ttarget.top = source.top;\r\n\ttarget.left = source.left;\r\n\ttarget.position = source.position;\r\n\ttarget.zIndex = source.zIndex;\r\n}\r\n\r\nfunction addDOMEvents() {\r\n\tgantt.event(document, \"webkitfullscreenchange\", onFullScreenChange);\r\n\tgantt.event(document, \"mozfullscreenchange\", onFullScreenChange);\r\n\tgantt.event(document, \"MSFullscreenChange\", onFullScreenChange);\r\n\t// For IE on Win 10\r\n\tgantt.event(document, \"fullscreenChange\", onFullScreenChange);\r\n\tgantt.event(document, \"fullscreenchange\", onFullScreenChange);\r\n}\r\n\r\nlet expandGantt = false;\r\nfunction onFullScreenChange() {\r\n\tif (!gantt.$container) {\r\n\t\t// do nothing if gantt is not yet initialized\r\n\t\treturn;\r\n\t}\r\n\tlet event: \"onExpand\" | \"onCollapse\";\r\n\tconst isBodyExpanded = isExpanded();\r\n\r\n\tif (isBodyExpanded) {\r\n\t\tif (expandGantt) {\r\n\t\t\tevent = \"onExpand\";\r\n\t\t\tsetFullScreenSizes();\r\n\t\t}\r\n\t} else if (expandGantt) {\r\n\t\texpandGantt = false;\r\n\t\tevent = \"onCollapse\";\r\n\t\trestoreSizes();\r\n\t}\r\n\tsetTimeout(() => {\r\n\t\tgantt.render();\r\n\t});\r\n\tsetTimeout(() => {\r\n\t\tgantt.callEvent(event, [gantt.ext.fullscreen.getFullscreenElement()]);\r\n\t});\r\n}\r\n\r\nfunction cantFullscreen() {\r\n\tif (!gantt.$container) { // check is gantt initialized or not\r\n\t\treturn true;\r\n\t}\r\n\tif (!gantt.ext.fullscreen.getFullscreenElement()) {\r\n\t\treturn true;\r\n\t}\r\n\tif (!isFullscreenAvailable()) {\r\n\t\t// eslint-disable-next-line no-console\r\n\t\tconst method = (console as IConsole).warning || console.log;\r\n\t\tmethod(\"The `fullscreen` feature not being allowed, or full-screen mode not being supported\");\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\ngantt.ext.fullscreen = {\r\n\texpand(): void {\r\n\t\tif (cantFullscreen()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (isExpanded()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!gantt.callEvent(\"onBeforeExpand\", [this.getFullscreenElement()])) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\texpandGantt = true;\r\n\r\n\t\t// we switch body to fullscreen and then expand fullscreen element to viewport\r\n\t\t// we do it to correct display common elements: lightboxes, tooltip etc.\r\n\t\tconst element = document.body as IBody;\r\n\t\tconst requestArguments = element.webkitRequestFullscreen ?\r\n\t\t\t[(Element as unknown as IElement).ALLOW_KEYBOARD_INPUT] : [];\r\n\r\n\t\tconst requestFullscreen = element.msRequestFullscreen ||\r\n\t\t\telement.mozRequestFullScreen ||\r\n\t\t\telement.webkitRequestFullscreen ||\r\n\t\t\telement.requestFullscreen;\r\n\r\n\t\tif (requestFullscreen) {\r\n\t\t\trequestFullscreen.apply(element, requestArguments);\r\n\t\t}\r\n\t},\r\n\tcollapse(): void {\r\n\t\tif (cantFullscreen()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!isExpanded()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!gantt.callEvent(\"onBeforeCollapse\", [this.getFullscreenElement()])) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst requestExitFullscreen = (document as IDocument).msExitFullscreen ||\r\n\t\t\t(document as IDocument).mozCancelFullScreen ||\r\n\t\t\t(document as IDocument).webkitExitFullscreen ||\r\n\t\t\t(document as IDocument).exitFullscreen;\r\n\r\n\t\tif (requestExitFullscreen) {\r\n\t\t\trequestExitFullscreen.apply(document);\r\n\t\t}\r\n\t},\r\n\ttoggle(): void {\r\n\t\tif (cantFullscreen()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!isExpanded()) {\r\n\t\t\tthis.expand();\r\n\t\t} else {\r\n\t\t\tthis.collapse();\r\n\t\t}\r\n\r\n\t},\r\n\tgetFullscreenElement(): HTMLElement {\r\n\t\treturn gantt.$root;\r\n\t}\r\n};\r\n\r\ngantt.expand = function() {\r\n\tgantt.ext.fullscreen.expand();\r\n};\r\n\r\ngantt.collapse = function(){\r\n\tgantt.ext.fullscreen.collapse();\r\n};\r\n\r\ngantt.attachEvent(\"onGanttReady\", addDOMEvents);\r\n\r\n}","import eventable from \"../utils/eventable\";\r\nimport * as domHelpers from \"../core/ui/utils/dom_helpers\";\r\n\r\nimport keyboard_shortcuts from \"./keyboard_navigation/common/keyboard_shortcuts\";\r\nimport eventhandler from \"./keyboard_navigation/common/eventhandler\";\r\nimport trap_modal_focus from \"./keyboard_navigation/common/trap_modal_focus\";\r\nimport gantt_node from \"./keyboard_navigation/elements/gantt_node\";\r\nimport nav_node from \"./keyboard_navigation/elements/nav_node\";\r\nimport header_cell from \"./keyboard_navigation/elements/header_cell\";\r\nimport task_row from \"./keyboard_navigation/elements/task_row\";\r\nimport task_cell from \"./keyboard_navigation/elements/task_cell\";\r\nimport modals from \"./keyboard_navigation/modals\";\r\nimport core from \"./keyboard_navigation/core\";\r\n\r\n\r\n\r\nexport default function(gantt){\r\n\tfunction setupKeyNav(gantt){\r\n\t\tgantt.config.keyboard_navigation = true;\r\n\t\tgantt.config.keyboard_navigation_cells = false;\r\n\r\n\t\tgantt.$keyboardNavigation = {};\r\n\r\n\t\tgantt._compose = function(){\r\n\t\t\tvar parts = Array.prototype.slice.call(arguments, 0);\r\n\t\t\tvar res = {};\r\n\t\t\tfor(var i = 0; i < parts.length; i++){\r\n\t\t\t\tvar obj = parts[i];\r\n\t\t\t\tif(typeof obj == \"function\"){\r\n\t\t\t\t\tobj = new obj();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor(var p in obj){\r\n\t\t\t\t\tres[p] = obj[p];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t};\r\n\r\n\t\tkeyboard_shortcuts(gantt);\r\n\t\teventhandler(gantt);\r\n\t\ttrap_modal_focus(gantt);\r\n\t\tgantt_node(gantt);\r\n\t\tnav_node(gantt);\r\n\t\theader_cell(gantt);\r\n\t\ttask_row(gantt);\r\n\t\ttask_cell(gantt);\r\n\t\tmodals(gantt);\r\n\t\tcore(gantt);\r\n\r\n\r\n\t\t(function(){\r\n\t\t\tvar dispatcher = gantt.$keyboardNavigation.dispatcher;\r\n\r\n\t\t\tdispatcher.isTaskFocused = function(id){\r\n\t\t\t\tvar node = dispatcher.activeNode;\r\n\t\t\t\tif(node instanceof gantt.$keyboardNavigation.TaskRow || node instanceof gantt.$keyboardNavigation.TaskCell) {\r\n\t\t\t\t\tif (node.taskId == id) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t};\r\n\r\n\t\t\tvar keyDownHandler = function(e){\r\n\t\t\t\tif(!gantt.config.keyboard_navigation) return;\r\n\t\t\t\t// GS-734 & GS-1078: we don't need keyboard navigation inside inline editors\r\n\t\t\t\tif(!gantt.config.keyboard_navigation_cells && isInlineEditorCell(e)) return;\r\n\r\n\t\t\t\tif (isNoKeyboardNavigationElement(e) || isLightboxElement(e)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn dispatcher.keyDownHandler(e);\r\n\t\t\t};\r\n\r\n\t\t\tvar focusHandler = function(e){\r\n\t\t\t\tif(dispatcher.$preventDefault){\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tgantt.$container.blur();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t// do nothing if key-nav focus is already planned\r\n\t\t\t\t} else if (!dispatcher.awaitsFocus()) {\r\n\t\t\t\t\t// otherwise - re-focus key-nav element on gantt focus\r\n\t\t\t\t\tdispatcher.focusGlobalNode();\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t\tvar reFocusActiveNode = function(){\r\n\t\t\t\tif(!dispatcher.isEnabled())\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tconst outsideGantt = !domHelpers.isChildOf(document.activeElement, gantt.$container) && document.activeElement.localName != \"body\";\r\n\t\t\t\tvar activeNode = dispatcher.getActiveNode();\r\n\t\t\t\tif(!activeNode || outsideGantt)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar domElement = activeNode.getNode();\r\n\t\t\t\tvar top, left;\r\n\t\t\t\tif(domElement && domElement.parentNode){\r\n\t\t\t\t\ttop = domElement.parentNode.scrollTop;\r\n\t\t\t\t\tleft = domElement.parentNode.scrollLeft;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tactiveNode.focus(true);\r\n\r\n\t\t\t\tif(domElement && domElement.parentNode){\r\n\t\t\t\t\tdomElement.parentNode.scrollTop = top;\r\n\t\t\t\t\tdomElement.parentNode.scrollLeft = left;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\r\n\t\t\tgantt.attachEvent(\"onDataRender\", function(){\r\n\t\t\t\tif(!gantt.config.keyboard_navigation) return;\r\n\t\t\t\treFocusActiveNode();\r\n\t\t\t});\r\n\r\n\t\t\tgantt.attachEvent(\"onGanttRender\", function(){\r\n\t\t\t\t//GS-2230: in case if `getGanttInstance` created without container\r\n\t\t\t\tif(!gantt.$root) return;\r\n\t\t\t\tgantt.eventRemove(gantt.$root, \"keydown\", keyDownHandler);\r\n\t\t\t\tgantt.eventRemove(gantt.$container, \"focus\", focusHandler);\r\n\t\t\t\tgantt.eventRemove(gantt.$container, \"mousedown\", mousedownHandler);\r\n\r\n\t\t\t\tif(gantt.config.keyboard_navigation){\r\n\r\n\t\t\t\t\tgantt.event(gantt.$root, \"keydown\", keyDownHandler);\r\n\t\t\t\t\tgantt.event(gantt.$container, \"focus\", focusHandler);\r\n\t\t\t\t\tgantt.event(gantt.$container, \"mousedown\", mousedownHandler);\r\n\t\t\t\t\tgantt.$container.setAttribute(\"tabindex\", \"0\");\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t\tgantt.$container.removeAttribute(\"tabindex\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfunction getTaskNodeConstructor(){\r\n\t\t\t\tif (gantt.config.keyboard_navigation_cells) {\r\n\t\t\t\t\treturn gantt.$keyboardNavigation.TaskCell;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.$keyboardNavigation.TaskRow;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction isInlineEditorCell(e){\r\n\t\t\t\treturn !!domHelpers.closest(e.target, \".gantt_grid_editor_placeholder\");\r\n\t\t\t}\r\n\t\t\t// GS-1445. Cancel keyboard navigation within custom elements\r\n\t\t\tfunction isNoKeyboardNavigationElement(e){\r\n\t\t\t\treturn !!domHelpers.closest(e.target, \".no_keyboard_navigation\");\r\n\t\t\t}\r\n\t\t\tfunction isLightboxElement(e){\r\n\t\t\t\treturn !!domHelpers.closest(e.target, \".gantt_cal_light\");\r\n\t\t\t}\r\n\r\n\t\t\tfunction mousedownHandler(e){\r\n\t\t\t\tif(!gantt.config.keyboard_navigation) return true;\r\n\t\t\t\t// GS-734 & GS-1078: we don't need keyboard navigation inside inline editors\r\n\t\t\t\tif(!gantt.config.keyboard_navigation_cells && isInlineEditorCell(e)) return true;\r\n\r\n\t\t\t\tif (isNoKeyboardNavigationElement(e)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar focusNode;\r\n\t\t\t\tvar locateTask = dispatcher.fromDomElement(e);\r\n\t\t\t\tif(locateTask){\r\n\t\t\t\t\t//var node = getTaskNodeConstructor();\r\n\t\t\t\t\tif(dispatcher.activeNode instanceof gantt.$keyboardNavigation.TaskCell && domHelpers.isChildOf(e.target, gantt.$task)){\r\n\t\t\t\t\t\tlocateTask = new gantt.$keyboardNavigation.TaskCell(locateTask.taskId, dispatcher.activeNode.columnIndex);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfocusNode = locateTask;\r\n\t\t\t\t\t// GS-1541 and GS-1542. If you click on the task row element (possible with custom styles)\r\n\t\t\t\t\t// or the task bar element, there is no information about the target grid cell,\r\n\t\t\t\t\t// so we need to set focus on the first visible cell\r\n\t\t\t\t\tconst visibleGrid = gantt.config.show_grid && gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\tif(visibleGrid && gantt.config.keyboard_navigation_cells){\r\n\t\t\t\t\t\tconst taskRow = e.target.classList.contains(\"gantt_row\");\r\n\t\t\t\t\t\tconst taskBar = e.target.closest(\".gantt_task_line\");\r\n\r\n\t\t\t\t\t\tconst gridLeft = gantt.utils.dom.getNodePosition(gantt.$grid).x;\r\n\t\t\t\t\t\tconst gridRight = gridLeft + gantt.$grid.offsetWidth;\r\n\t\t\t\t\t\tconst nodePosition = gantt.utils.dom.getNodePosition(document.activeElement).x;\r\n\t\t\t\t\t\tconst nodeHidden = nodePosition < gridLeft || gridRight < nodePosition;\r\n\r\n\t\t\t\t\t\tif (taskRow || (taskBar && nodeHidden)){\r\n\t\t\t\t\t\t\tlet scrollPosition = gantt.$grid.scrollLeft;\r\n\t\t\t\t\t\t\tconst rightPosition = scrollPosition + gantt.$grid.offsetWidth;\r\n\t\t\t\t\t\t\tlet positionX = 0;\r\n\t\t\t\t\t\t\tif (taskRow){\r\n\t\t\t\t\t\t\t\tscrollPosition = gantt.utils.dom.getRelativeEventPosition(e, gantt.$grid).x;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tfor (let i = 0; i < gantt.config.columns.length; i++) {\r\n\t\t\t\t\t\t\t\tconst column = gantt.config.columns[i];\r\n\t\t\t\t\t\t\t\tif (column.hide){\r\n\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tpositionX += column.width;\r\n\t\t\t\t\t\t\t\tif (scrollPosition < positionX){\r\n\t\t\t\t\t\t\t\t\tif (rightPosition < positionX){\r\n\t\t\t\t\t\t\t\t\t\tpositionX -= column.width;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tfocusNode.columnIndex = i;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (focusNode) {\r\n\t\t\t\t\tif (!dispatcher.isEnabled()) {\r\n\t\t\t\t\t\tdispatcher.activeNode = focusNode;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdispatcher.delay(function () {\r\n\t\t\t\t\t\t\tdispatcher.setActiveNode(focusNode);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// empty click should drop focus from gantt, insert of reselecting default node\r\n\t\t\t\t\tdispatcher.$preventDefault = true;\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tdispatcher.$preventDefault = false;\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar onReady = gantt.attachEvent(\"onGanttReady\", function(){\r\n\t\t\t\t// restore focus on repainted tasks\r\n\t\t\t\tgantt.detachEvent(onReady);\r\n\r\n\t\t\t\tgantt.$data.tasksStore.attachEvent(\"onStoreUpdated\", function(id){\r\n\t\t\t\t\tif (gantt.config.keyboard_navigation && dispatcher.isEnabled()) {\r\n\t\t\t\t\t\tconst currentNode = dispatcher.getActiveNode();\r\n\t\t\t\t\t\tconst grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tif (!grid || !grid.$grid_data){\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst top = grid.getItemTop(id);\r\n\t\t\t\t\t\tconst gridDataTopScroll = grid.$grid_data.scrollTop;\r\n\t\t\t\t\t\tconst gridDataBottomScroll = gridDataTopScroll + grid.$grid_data.getBoundingClientRect().height;\r\n\t\t\t\t\t\tif(currentNode && currentNode.taskId == id){\r\n\t\t\t\t\t\t\t// GS-2539: Don't refocus the node if it is selected and outside the visible range in the grid\r\n\t\t\t\t\t\t\tif(gridDataTopScroll <= top && gridDataBottomScroll >= top){\r\n\t\t\t\t\t\t\t\treFocusActiveNode();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(gantt._smart_render){\r\n\t\t\t\t\tvar updateRender = gantt._smart_render._redrawTasks;\r\n\t\t\t\t\tgantt._smart_render._redrawTasks = function(renderers, items){\r\n\t\t\t\t\t\tif(gantt.config.keyboard_navigation && dispatcher.isEnabled()){\r\n\t\t\t\t\t\t\tvar currentNode = dispatcher.getActiveNode();\r\n\t\t\t\t\t\t\tif(currentNode && currentNode.taskId !== undefined){\r\n\t\t\t\t\t\t\t\tvar focusedItemVisible = false;\r\n\t\t\t\t\t\t\t\tfor(var i = 0; i < items.length; i++){\r\n\t\t\t\t\t\t\t\t\tif(items[i].id == currentNode.taskId && items[i].start_date){\r\n\t\t\t\t\t\t\t\t\t\tfocusedItemVisible = true;\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(!focusedItemVisible){\r\n\t\t\t\t\t\t\t\t\titems.push(gantt.getTask(currentNode.taskId));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar res = updateRender.apply(this, arguments);\r\n\r\n\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\tlet createdTaskId = null;\r\n\t\t\tlet keepFocusOnNewTask = false;\r\n\t\t\tgantt.attachEvent(\"onTaskCreated\", function (task) {\r\n\t\t\t\tcreatedTaskId = task.id;\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\r\n\t\t\tgantt.attachEvent(\"onAfterTaskAdd\", function(id,item){\r\n\t\t\t\tif(!gantt.config.keyboard_navigation) return true;\r\n\t\t\t\tif(dispatcher.isEnabled()){\r\n\r\n\t\t\t\t\t// GS-1394. After adding a new task, the focus shouldn't change to the placeholder task\r\n\t\t\t\t\tif (id == createdTaskId) {\r\n\t\t\t\t\t\tkeepFocusOnNewTask = true;\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tkeepFocusOnNewTask = false;\r\n\t\t\t\t\t\t\tcreatedTaskId = null;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (keepFocusOnNewTask && item.type == gantt.config.types.placeholder) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar columnIndex = 0;\r\n\t\t\t\t\tvar node = dispatcher.activeNode;\r\n\t\t\t\t\tif(node instanceof gantt.$keyboardNavigation.TaskCell){\r\n\t\t\t\t\t\tcolumnIndex = node.columnIndex;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar nodeConstructor = getTaskNodeConstructor();\r\n\r\n\t\t\t\t\tif (item.type == gantt.config.types.placeholder && gantt.config.placeholder_task.focusOnCreate === false) {\r\n\t\t\t\t\t\t// do not focus on the placeholder task\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdispatcher.setActiveNode(new nodeConstructor(id, columnIndex));\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tgantt.attachEvent(\"onTaskIdChange\", function(oldId, newId){\r\n\t\t\t\tif(!gantt.config.keyboard_navigation) return true;\r\n\r\n\t\t\t\tvar node = dispatcher.activeNode;\r\n\t\t\t\tif(dispatcher.isTaskFocused(oldId)){\r\n\t\t\t\t\tnode.taskId = newId;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\r\n\t\t\tvar interval = setInterval(function(){\r\n\t\t\t\tif(!gantt.config.keyboard_navigation) return;\r\n\t\t\t\tif(!dispatcher.isEnabled()){\r\n\t\t\t\t\tdispatcher.enable();\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}, 500);\r\n\r\n\t\t\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\t\t\tclearInterval(interval);\r\n\t\t\t});\r\n\r\n\t\t\tfunction getScopeName(obj){\r\n\t\t\t\tif(obj instanceof gantt.$keyboardNavigation.GanttNode){\r\n\t\t\t\t\treturn \"gantt\";\r\n\t\t\t\t}else if(obj instanceof gantt.$keyboardNavigation.HeaderCell){\r\n\t\t\t\t\treturn \"headerCell\";\r\n\t\t\t\t}else if(obj instanceof gantt.$keyboardNavigation.TaskRow){\r\n\t\t\t\t\treturn \"taskRow\";\r\n\t\t\t\t}else if(obj instanceof gantt.$keyboardNavigation.TaskCell){\r\n\t\t\t\t\treturn \"taskCell\";\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tfunction getScope(mode){\r\n\t\t\t\tvar scopes = {\r\n\t\t\t\t\t\"gantt\":gantt.$keyboardNavigation.GanttNode,\r\n\t\t\t\t\t\"headerCell\": gantt.$keyboardNavigation.HeaderCell,\r\n\t\t\t\t\t\"taskRow\": gantt.$keyboardNavigation.TaskRow,\r\n\t\t\t\t\t\"taskCell\": gantt.$keyboardNavigation.TaskCell\r\n\t\t\t\t};\r\n\r\n\t\t\t\treturn scopes[mode] || scopes.gantt;\r\n\t\t\t}\r\n\r\n\t\t\tfunction findVisibleColumnIndex(columnName) {\r\n\t\t\t\tvar columns = gantt.getGridColumns();\r\n\t\t\t\tfor (var i = 0; i < columns.length; i++){\r\n\t\t\t\t\tif(columns[i].name == columnName){\r\n\t\t\t\t\t\treturn i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t\tvar keyNavFacade = {};\r\n\t\t\teventable(keyNavFacade);\r\n\t\t\tgantt.mixin(keyNavFacade, {\r\n\t\t\t\taddShortcut: function(shortcut, handler, scope){\r\n\t\t\t\t\tvar scopeObject = getScope(scope);\r\n\t\t\t\t\tif(scopeObject){\r\n\t\t\t\t\t\tscopeObject.prototype.bind(shortcut, handler);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tgetShortcutHandler: function(shortcut, scope){\r\n\t\t\t\t\tvar commands = gantt.$keyboardNavigation.shortcuts.parse(shortcut);\r\n\t\t\t\t\tif(commands.length){\r\n\t\t\t\t\t\treturn keyNavFacade.getCommandHandler(commands[0], scope);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tgetCommandHandler: function(command, scope){\r\n\t\t\t\t\tvar scopeObject = getScope(scope);\r\n\t\t\t\t\tif(scopeObject){\r\n\t\t\t\t\t\tif(command){\r\n\t\t\t\t\t\t\treturn scopeObject.prototype.findHandler(command);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tremoveShortcut: function(shortcut, scope){\r\n\t\t\t\t\tvar scopeObject = getScope(scope);\r\n\t\t\t\t\tif(scopeObject){\r\n\t\t\t\t\t\tscopeObject.prototype.unbind(shortcut);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfocus: function(config){\r\n\t\t\t\t\tvar type = config ? config.type : null;\r\n\t\t\t\t\tvar constructor = getScope(type);\r\n\t\t\t\t\tvar node;\r\n\t\t\t\t\tswitch (type){\r\n\t\t\t\t\t\tcase \"taskCell\":\r\n\t\t\t\t\t\t\tnode = new constructor(config.id, findVisibleColumnIndex(config.column));\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"taskRow\":\r\n\t\t\t\t\t\t\tnode = new constructor(config.id);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"headerCell\":\r\n\t\t\t\t\t\t\tnode = new constructor(findVisibleColumnIndex(config.column));\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdispatcher.delay(function(){\r\n\t\t\t\t\t\tif(node){\r\n\t\t\t\t\t\t\tdispatcher.setActiveNode(node);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tdispatcher.enable();\r\n\t\t\t\t\t\t\tif(!dispatcher.getActiveNode()){\r\n\r\n\t\t\t\t\t\t\t\tdispatcher.setDefaultNode();\r\n\t\t\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t\t\t\tif(!dispatcher.awaitsFocus()){\r\n\t\t\t\t\t\t\t\t\tdispatcher.enable();\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\r\n\t\t\t\tgetActiveNode: function(){\r\n\t\t\t\t\tif(dispatcher.isEnabled()){\r\n\t\t\t\t\t\tvar node = dispatcher.getActiveNode();\r\n\t\t\t\t\t\tvar scope = getScopeName(node);\r\n\t\t\t\t\t\tvar columns = gantt.getGridColumns();\r\n\t\t\t\t\t\tswitch (scope){\r\n\t\t\t\t\t\t\tcase \"taskCell\":\r\n\t\t\t\t\t\t\t\treturn {type:\"taskCell\", id:node.taskId, column:columns[node.columnIndex].name};\r\n\t\t\t\t\t\t\tcase \"taskRow\":\r\n\t\t\t\t\t\t\t\treturn {type:\"taskRow\", id:node.taskId};\r\n\t\t\t\t\t\t\tcase \"headerCell\":\r\n\t\t\t\t\t\t\t\treturn {type:\"headerCell\", column:columns[node.index].name};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tgantt.$keyboardNavigation.facade = keyNavFacade;\r\n\r\n\t\t\tgantt.ext.keyboardNavigation = keyNavFacade;\r\n\t\t\tgantt.focus = function(){\r\n\t\t\t\tkeyNavFacade.focus();\r\n\t\t\t};\r\n\t\t\tgantt.addShortcut = keyNavFacade.addShortcut;\r\n\t\t\tgantt.getShortcutHandler = keyNavFacade.getShortcutHandler;\r\n\t\t\tgantt.removeShortcut = keyNavFacade.removeShortcut;\r\n\t\t})();\r\n\r\n\r\n\t}\r\n\r\n\tsetupKeyNav(gantt);\r\n\r\n\r\n\r\n};","export default function(gantt) {\r\n\r\n\tgantt.$keyboardNavigation.shortcuts = {\r\n\t\tcreateCommand: function () {\r\n\t\t\treturn {\r\n\t\t\t\tmodifiers: {\r\n\t\t\t\t\t\"shift\": false,\r\n\t\t\t\t\t\"alt\": false,\r\n\t\t\t\t\t\"ctrl\": false,\r\n\t\t\t\t\t\"meta\": false\r\n\t\t\t\t},\r\n\t\t\t\tkeyCode: null\r\n\t\t\t};\r\n\t\t},\r\n\t\tparse: function (shortcut) {\r\n\t\t\tvar commands = [];\r\n\r\n\t\t\tvar expr = this.getExpressions(this.trim(shortcut));\r\n\t\t\tfor (var i = 0; i < expr.length; i++) {\r\n\t\t\t\tvar words = this.getWords(expr[i]);\r\n\r\n\t\t\t\tvar command = this.createCommand();\r\n\r\n\t\t\t\tfor (var j = 0; j < words.length; j++) {\r\n\t\t\t\t\tif (this.commandKeys[words[j]]) {\r\n\t\t\t\t\t\tcommand.modifiers[words[j]] = true;\r\n\t\t\t\t\t} else if (this.specialKeys[words[j]]) {\r\n\t\t\t\t\t\tcommand.keyCode = this.specialKeys[words[j]];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcommand.keyCode = words[j].charCodeAt(0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcommands.push(command);\r\n\t\t\t}\r\n\t\t\treturn commands;\r\n\t\t},\r\n\r\n\t\tgetCommandFromEvent: function (domEvent) {\r\n\t\t\tvar command = this.createCommand();\r\n\t\t\tcommand.modifiers.shift = !!domEvent.shiftKey;\r\n\t\t\tcommand.modifiers.alt = !!domEvent.altKey;\r\n\t\t\tcommand.modifiers.ctrl = !!domEvent.ctrlKey;\r\n\t\t\tcommand.modifiers.meta = !!domEvent.metaKey;\r\n\t\t\tcommand.keyCode = domEvent.which || domEvent.keyCode;\r\n\r\n\t\t\tif(command.keyCode >= 96 && command.keyCode <= 105){\r\n\t\t\t\t// numpad keys 96-105 -> 48-57\r\n\t\t\t\tcommand.keyCode -= 48;//convert numpad  number code to regular number code\r\n\t\t\t}\r\n\r\n\t\t\tvar printableKey = String.fromCharCode(command.keyCode);\r\n\t\t\tif (printableKey) {\r\n\t\t\t\tcommand.keyCode = printableKey.toLowerCase().charCodeAt(0);\r\n\t\t\t}\r\n\t\t\treturn command;\r\n\t\t},\r\n\r\n\t\tgetHashFromEvent: function (domEvent) {\r\n\t\t\treturn this.getHash(this.getCommandFromEvent(domEvent));\r\n\t\t},\r\n\r\n\t\tgetHash: function (command) {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor (var i in command.modifiers) {\r\n\t\t\t\tif (command.modifiers[i]) {\r\n\t\t\t\t\tparts.push(i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tparts.push(command.keyCode);\r\n\r\n\t\t\treturn parts.join(this.junctionChar);\r\n\t\t},\r\n\r\n\t\tgetExpressions: function (shortcut) {\r\n\t\t\treturn shortcut.split(this.junctionChar);\r\n\t\t},\r\n\t\tgetWords: function (term) {\r\n\t\t\treturn term.split(this.combinationChar);\r\n\t\t},\r\n\t\ttrim: function (shortcut) {\r\n\t\t\treturn shortcut.replace(/\\s/g, \"\");\r\n\t\t},\r\n\t\tjunctionChar: \",\",\r\n\t\tcombinationChar: \"+\",\r\n\t\tcommandKeys: {\r\n\t\t\t\"shift\": 16,\r\n\t\t\t\"alt\": 18,\r\n\t\t\t\"ctrl\": 17,\r\n\t\t\t\"meta\": true\r\n\t\t},\r\n\t\tspecialKeys: {\r\n\t\t\t\"backspace\": 8,\r\n\t\t\t\"tab\": 9,\r\n\t\t\t\"enter\": 13,\r\n\t\t\t\"esc\": 27,\r\n\t\t\t\"space\": 32,\r\n\t\t\t\"up\": 38,\r\n\t\t\t\"down\": 40,\r\n\t\t\t\"left\": 37,\r\n\t\t\t\"right\": 39,\r\n\t\t\t\"home\": 36,\r\n\t\t\t\"end\": 35,\r\n\t\t\t\"pageup\": 33,\r\n\t\t\t\"pagedown\": 34,\r\n\t\t\t\"delete\": 46,\r\n\t\t\t\"insert\": 45,\r\n\t\t\t\"plus\": 107,\r\n\t\t\t\"f1\": 112,\r\n\t\t\t\"f2\": 113,\r\n\t\t\t\"f3\": 114,\r\n\t\t\t\"f4\": 115,\r\n\t\t\t\"f5\": 116,\r\n\t\t\t\"f6\": 117,\r\n\t\t\t\"f7\": 118,\r\n\t\t\t\"f8\": 119,\r\n\t\t\t\"f9\": 120,\r\n\t\t\t\"f10\": 121,\r\n\t\t\t\"f11\": 122,\r\n\t\t\t\"f12\": 123\r\n\t\t}\r\n\t};\r\n};","export default function(gantt) {\r\n\r\n\tgantt.$keyboardNavigation.EventHandler = {\r\n\t\t_handlers: null,\r\n\t\tfindHandler: function (command) {\r\n\t\t\tif (!this._handlers) this._handlers = {};\r\n\t\t\tvar shortcuts = gantt.$keyboardNavigation.shortcuts;\r\n\t\t\tvar hash = shortcuts.getHash(command);\r\n\r\n\t\t\treturn this._handlers[hash];\r\n\t\t},\r\n\r\n\t\tdoAction: function (command, e) {\r\n\t\t\tvar handler = this.findHandler(command);\r\n\t\t\tif (handler) {\r\n\t\t\t\tvar eventFacade = gantt.$keyboardNavigation.facade;\r\n\r\n\t\t\t\tif(eventFacade.callEvent(\"onBeforeAction\", [command, e]) === false){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\thandler.call(this, e);\r\n\r\n\t\t\t\tif (e.preventDefault) e.preventDefault();\r\n\t\t\t\telse e.returnValue = false;\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tbind: function (shortcut, handler) {\r\n\t\t\tif (!this._handlers) this._handlers = {};\r\n\r\n\t\t\tvar shortcuts = gantt.$keyboardNavigation.shortcuts;\r\n\r\n\t\t\tvar commands = shortcuts.parse(shortcut);\r\n\t\t\tfor (var i = 0; i < commands.length; i++) {\r\n\t\t\t\tthis._handlers[shortcuts.getHash(commands[i])] = handler;\r\n\t\t\t}\r\n\t\t},\r\n\t\tunbind: function (shortcut) {\r\n\t\t\tvar shortcuts = gantt.$keyboardNavigation.shortcuts;\r\n\r\n\t\t\tvar commands = shortcuts.parse(shortcut);\r\n\t\t\tfor (var i = 0; i < commands.length; i++) {\r\n\t\t\t\tif (this._handlers[shortcuts.getHash(commands[i])]) {\r\n\t\t\t\t\tdelete this._handlers[shortcuts.getHash(commands[i])];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tbindAll: function (map) {\r\n\t\t\tfor (var i in map) {\r\n\t\t\t\tthis.bind(i, map[i]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tinitKeys: function () {\r\n\t\t\tif (!this._handlers)\r\n\t\t\t\tthis._handlers = {};\r\n\t\t\tif (this.keys) {\r\n\t\t\t\tthis.bindAll(this.keys);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n};","import * as domHelpers from \"../../../core/ui/utils/dom_helpers\";\r\n\r\nexport default function(gantt) {\r\n\r\n\t(function () {\r\n\t\t\r\n\t\tgantt.$keyboardNavigation.getFocusableNodes = domHelpers.getFocusableNodes;\r\n\r\n\t\tgantt.$keyboardNavigation.trapFocus = function trapFocus(root, e) {\r\n\t\t\tif (e.keyCode != 9) return false;\r\n\r\n\t\t\tvar focusable = gantt.$keyboardNavigation.getFocusableNodes(root);\r\n\t\t\tvar currentFocus = domHelpers.getActiveElement();\r\n\t\t\tvar currentIndex = -1;\r\n\t\t\tfor (var i = 0; i < focusable.length; i++) {\r\n\t\t\t\tif (focusable[i] == currentFocus) {\r\n\t\t\t\t\tcurrentIndex = i;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (e.shiftKey) {\r\n\t\t\t\t// back tab\r\n\t\t\t\tif (currentIndex <= 0) {\r\n\t\t\t\t\t// go to the last element if we focused on the first\r\n\t\t\t\t\tvar lastItem = focusable[focusable.length - 1];\r\n\t\t\t\t\tif (lastItem) {\r\n\t\t\t\t\t\tlastItem.focus();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\t// forward tab\r\n\t\t\t\tif (currentIndex >= focusable.length - 1) {\r\n\t\t\t\t\t// forward tab from last element should go back to the first element\r\n\t\t\t\t\tvar firstItem = focusable[0];\r\n\t\t\t\t\tif (firstItem) {\r\n\t\t\t\t\t\tfirstItem.focus();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t};\r\n\t})();\r\n\r\n};","export default function(gantt) {\r\n\r\n\tgantt.$keyboardNavigation.GanttNode = function () {\r\n\t};\r\n\r\n\tgantt.$keyboardNavigation.GanttNode.prototype = gantt._compose(\r\n\t\tgantt.$keyboardNavigation.EventHandler,\r\n\t\t{\r\n\r\n\t\t\tfocus: function () {\r\n\t\t\t\tgantt.focus();\r\n\t\t\t},\r\n\r\n\t\t\tblur: function () {\r\n\r\n\t\t\t},\r\n\r\n\t\t\tisEnabled: function () {\r\n\t\t\t\treturn gantt.$container.hasAttribute(\"tabindex\");\r\n\t\t\t},\r\n\r\n\t\t\tscrollHorizontal: function scrollHorizontal(dir) {\r\n\t\t\t\tvar date = gantt.dateFromPos(gantt.getScrollState().x);\r\n\t\t\t\tvar scale = gantt.getScale();\r\n\t\t\t\tvar step = dir < 0 ? -scale.step : scale.step;\r\n\t\t\t\tdate = gantt.date.add(date, step, scale.unit);\r\n\t\t\t\tgantt.scrollTo(gantt.posFromDate(date));\r\n\t\t\t},\r\n\r\n\t\t\tscrollVertical: function scrollVertical(dir) {\r\n\t\t\t\tvar top = gantt.getScrollState().y;\r\n\t\t\t\tvar step = gantt.config.row_height;\r\n\t\t\t\tgantt.scrollTo(null, top + (dir < 0 ? -1 : 1) * step);\r\n\t\t\t},\r\n\r\n\t\t\tkeys: {\r\n\t\t\t\t\"alt+left\": function (e) {\r\n\t\t\t\t\tthis.scrollHorizontal(-1);\r\n\t\t\t\t},\r\n\t\t\t\t\"alt+right\": function (e) {\r\n\t\t\t\t\tthis.scrollHorizontal(1);\r\n\t\t\t\t},\r\n\t\t\t\t\"alt+up\": function (e) {\r\n\t\t\t\t\tthis.scrollVertical(-1);\r\n\t\t\t\t},\r\n\t\t\t\t\"alt+down\": function (e) {\r\n\t\t\t\t\tthis.scrollVertical(1);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// undo\r\n\t\t\t\t\"ctrl+z\": function () {\r\n\t\t\t\t\tif (gantt.undo) gantt.undo();\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// redo\r\n\t\t\t\t\"ctrl+r\": function () {\r\n\t\t\t\t\tif (gantt.redo) gantt.redo();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\r\n\tgantt.$keyboardNavigation.GanttNode.prototype.bindAll(gantt.$keyboardNavigation.GanttNode.prototype.keys);\r\n\r\n};","export default function(gantt) {\r\n\r\n\tgantt.$keyboardNavigation.KeyNavNode = function () {\r\n\t};\r\n\r\n\tgantt.$keyboardNavigation.KeyNavNode.prototype = gantt._compose(\r\n\t\tgantt.$keyboardNavigation.EventHandler,\r\n\t\t{\r\n\t\t\tisValid: function () {\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\tfallback: function () {\r\n\t\t\t\treturn null;\r\n\t\t\t},\r\n\r\n\t\t\tmoveTo: function (element) {\r\n\t\t\t\tgantt.$keyboardNavigation.dispatcher.setActiveNode(element);\r\n\t\t\t},\r\n\r\n\t\t\tcompareTo: function (b) {\r\n\t\t\t\t// good enough comparison of two random objects\r\n\t\t\t\tif (!b) return false;\r\n\t\t\t\tfor (var i in this) {\r\n\t\t\t\t\tif (!!this[i] != !!b[i]) return false;\r\n\r\n\t\t\t\t\tvar canStringifyThis = !!(this[i] && this[i].toString);\r\n\t\t\t\t\tvar canStringifyThat = !!(b[i] && b[i].toString);\r\n\t\t\t\t\tif (canStringifyThat != canStringifyThis) return false;\r\n\t\t\t\t\tif (!(canStringifyThat && canStringifyThis)) {\r\n\t\t\t\t\t\tif (b[i] != this[i]) return false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (b[i].toString() != this[i].toString())\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\r\n\t\t\tgetNode: function () {\r\n\t\t\t},\r\n\t\t\tfocus: function () {\r\n\t\t\t\tvar node = this.getNode();\r\n\t\t\t\tif(!node)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar eventFacade = gantt.$keyboardNavigation.facade;\r\n\r\n\t\t\t\tif(eventFacade.callEvent(\"onBeforeFocus\", [node]) === false){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (node) {\r\n\t\t\t\t\tnode.setAttribute(\"tabindex\", \"-1\");\r\n\t\t\t\t\tif(!node.$eventAttached){\r\n\t\t\t\t\t\tnode.$eventAttached = true;\r\n\t\t\t\t\t\tgantt.event(node, \"focus\",function(e){\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//node.className += \" gantt_focused\";\r\n\t\t\t\t\tif (gantt.utils.dom.isChildOf(document.activeElement, node)){\r\n\t\t\t\t\t\tnode = document.activeElement;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (node.focus) node.focus();\r\n\r\n\t\t\t\t\teventFacade.callEvent(\"onFocus\", [this.getNode()]);\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tblur: function () {\r\n\t\t\t\tvar node = this.getNode();\r\n\t\t\t\tif (node) {\r\n\t\t\t\t\tvar eventFacade = gantt.$keyboardNavigation.facade;\r\n\t\t\t\t\teventFacade.callEvent(\"onBlur\", [node]);\r\n\t\t\t\t\tnode.setAttribute(\"tabindex\", \"-1\");\r\n\t\t\t\t\t//node.className = (node.className || \"\").replace(/ ?gantt_focused/g, \"\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\r\n};","import * as domHelpers from \"../../../core/ui/utils/dom_helpers\";\r\n\r\nexport default function(gantt) {\r\n\r\n\tgantt.$keyboardNavigation.HeaderCell = function (index) {\r\n\t\tthis.index = index || 0;\r\n\t};\r\n\r\n\tgantt.$keyboardNavigation.HeaderCell.prototype = gantt._compose(\r\n\t\tgantt.$keyboardNavigation.KeyNavNode,\r\n\t\t{\r\n\t\t\t_handlers: null,\r\n\r\n\t\t\tisValid: function () {\r\n\t\t\t\tif (!gantt.config.show_grid) {\r\n\t\t\t\t\tif (gantt.getVisibleTaskCount())\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn !!gantt.getGridColumns()[this.index] || !gantt.getVisibleTaskCount();\r\n\t\t\t},\r\n\t\t\tfallback: function () {\r\n\t\t\t\tif (!gantt.config.show_grid) {\r\n\t\t\t\t\tif (gantt.getVisibleTaskCount()) {\r\n\t\t\t\t\t\treturn new gantt.$keyboardNavigation.TaskRow();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\tvar visibleColumns = gantt.getGridColumns();\r\n\t\t\t\tvar index = this.index;\r\n\t\t\t\twhile (index >= 0) {\r\n\t\t\t\t\tif (visibleColumns[index])\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tindex--;\r\n\t\t\t\t}\r\n\t\t\t\tif (visibleColumns[index]) {\r\n\t\t\t\t\treturn new gantt.$keyboardNavigation.HeaderCell(index);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tfromDomElement: function(el){\r\n\t\t\t\tvar cellElement = domHelpers.locateClassName(el, \"gantt_grid_head_cell\");\r\n\t\t\t\tif(cellElement){\r\n\t\t\t\t\tvar index = 0;\r\n\t\t\t\t\twhile(cellElement && cellElement.previousSibling){\r\n\t\t\t\t\t\tcellElement = cellElement.previousSibling;\r\n\t\t\t\t\t\tindex += 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn new gantt.$keyboardNavigation.HeaderCell(index);\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tgetNode: function () {\r\n\t\t\t\tconst scale = gantt.$grid_scale;\r\n\t\t\t\tif (!scale){\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\tconst cells = scale.childNodes;\r\n\t\t\t\treturn cells[this.index];\r\n\t\t\t},\r\n\r\n\r\n\t\t\tkeys: {\r\n\r\n\t\t\t\t\"left\": function () {\r\n\t\t\t\t\tif (this.index > 0) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.HeaderCell(this.index - 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"right\": function () {\r\n\t\t\t\t\tvar columns = gantt.getGridColumns();\r\n\t\t\t\t\tif (this.index < columns.length - 1) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.HeaderCell(this.index + 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"down\": function () {\r\n\t\t\t\t\tvar taskRow;\r\n\t\t\t\t\tvar rootLevel = gantt.getChildren(gantt.config.root_id);\r\n\t\t\t\t\tif (gantt.isTaskExists(rootLevel[0])) {\r\n\t\t\t\t\t\ttaskRow = rootLevel[0];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (taskRow) {\r\n\t\t\t\t\t\tif (gantt.config.keyboard_navigation_cells) {\r\n\t\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(taskRow, this.index));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskRow(taskRow));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t\"end\": function () {\r\n\t\t\t\t\tvar columns = gantt.getGridColumns();\r\n\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.HeaderCell(columns.length - 1));\r\n\t\t\t\t},\r\n\t\t\t\t\"home\": function () {\r\n\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.HeaderCell(0));\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\t// press header button\r\n\t\t\t\t\"enter, space\": function () {\r\n\t\t\t\t\tvar node = domHelpers.getActiveElement();\r\n\t\t\t\t\tnode.click();\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// add new task\r\n\t\t\t\t\"ctrl+enter\": function () {\r\n\t\t\t\t\tif (gantt.isReadonly(this)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt.createTask({}, this.taskId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\r\n\tgantt.$keyboardNavigation.HeaderCell.prototype.bindAll(gantt.$keyboardNavigation.HeaderCell.prototype.keys);\r\n\r\n};","export default function(gantt) {\r\n\r\n\tgantt.$keyboardNavigation.TaskRow = function (taskId) {\r\n\t\tif (!taskId) {\r\n\t\t\tvar rootLevel = gantt.getChildren(gantt.config.root_id);\r\n\t\t\tif (rootLevel[0]) {\r\n\t\t\t\ttaskId = rootLevel[0];\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.taskId = taskId;\r\n\t\tif (gantt.isTaskExists(this.taskId)) {\r\n\t\t\tthis.index = gantt.getTaskIndex(this.taskId);\r\n\t\t\tthis.globalIndex = gantt.getGlobalTaskIndex(this.taskId);\r\n\t\t\tthis.splitItem = !!gantt.getTask(this.taskId).$split_subtask;\r\n\t\t\tthis.parentId = gantt.getParent(this.taskId);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.$keyboardNavigation.TaskRow.prototype = gantt._compose(\r\n\t\tgantt.$keyboardNavigation.KeyNavNode,\r\n\t\t{\r\n\t\t\t_handlers: null,\r\n\t\t\tisValid: function () {\r\n\t\t\t\treturn gantt.isTaskExists(this.taskId) && (gantt.getTaskIndex(this.taskId) > -1);\r\n\t\t\t},\r\n\t\t\tfallback: function () {\r\n\t\t\t\tif (!gantt.getVisibleTaskCount()) {\r\n\t\t\t\t\tvar header = new gantt.$keyboardNavigation.HeaderCell();\r\n\t\t\t\t\tif (!header.isValid()) return null;\r\n\t\t\t\t\telse return header;\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif(!this.splitItem){\r\n\t\t\t\t\t\tvar nextIndex = -1;\r\n\t\t\t\t\t\t// GS-1393. When Gantt tries to restore the focus, it should rely on the global index\r\n\t\t\t\t\t\tif (gantt.getTaskByIndex(this.globalIndex - 1)) {\r\n\t\t\t\t\t\t\tnextIndex = this.globalIndex - 1;\r\n\t\t\t\t\t\t} else if (gantt.getTaskByIndex(this.globalIndex + 1)) {\r\n\t\t\t\t\t\t\tnextIndex = this.globalIndex + 1;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar globalIndex = this.globalIndex;\r\n\t\t\t\t\t\t\twhile (globalIndex >= 0) {\r\n\t\t\t\t\t\t\t\tif (gantt.getTaskByIndex(globalIndex)) {\r\n\t\t\t\t\t\t\t\t\tnextIndex = globalIndex;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tglobalIndex--;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (nextIndex > -1) {\r\n\t\t\t\t\t\t\treturn new gantt.$keyboardNavigation.TaskRow(gantt.getTaskByIndex(nextIndex).id);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\treturn new gantt.$keyboardNavigation.TaskRow(this.parentId);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tfromDomElement: function(el){\r\n\t\t\t\tif(gantt.config.keyboard_navigation_cells){\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar taskId = gantt.locate(el);\r\n\t\t\t\tif(gantt.isTaskExists(taskId)){\r\n\t\t\t\t\treturn new gantt.$keyboardNavigation.TaskRow(taskId);\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tgetNode: function () {\r\n\t\t\t\tif (gantt.isTaskExists(this.taskId) && gantt.isTaskVisible(this.taskId)) {\r\n\t\t\t\t\tif (gantt.config.show_grid) {\r\n\t\t\t\t\t\treturn gantt.$grid.querySelector(`.gantt_row[${gantt.config.task_attribute}=\"${String(this.taskId).replaceAll('\"', '\\\\\"')}\"]`);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn gantt.getTaskNode(this.taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tfocus: function (keptFocus) {\r\n\t\t\t\tif(!keptFocus) {\r\n\t\t\t\t\tconst pos = gantt.getTaskPosition(gantt.getTask(this.taskId));\r\n\t\t\t\t\tconst height = gantt.getTaskHeight(this.taskId);\r\n\t\t\t\t\tconst scroll = gantt.getScrollState();\r\n\r\n\t\t\t\t\tlet viewWidth;\r\n\t\t\t\t\tif(gantt.$task){\r\n\t\t\t\t\t\tviewWidth = gantt.$task.offsetWidth;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tviewWidth = scroll.inner_width;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet viewHeight;\r\n\t\t\t\t\tif(gantt.$grid_data || gantt.$task_data){\r\n\t\t\t\t\t\tviewHeight = (gantt.$grid_data || gantt.$task_data).offsetHeight;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tviewHeight = scroll.inner_height;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst visibleTimeline = gantt.config.show_chart && gantt.$ui.getView(\"timeline\");\r\n\r\n\t\t\t\t\tif (pos.top < scroll.y || pos.top + height > (scroll.y + viewHeight)) {\r\n\t\t\t\t\t\t// GS-2346: additional scrolling to be sure that the task will be in the required range\r\n\t\t\t\t\t\tgantt.scrollTo(null, pos.top - 20);\r\n\t\t\t\t\t} else if (gantt.config.scroll_on_click && visibleTimeline) {\r\n\t\t\t\t\t\t// horizontal scroll activated\r\n\t\t\t\t\t\tif (pos.left > (scroll.x + viewWidth)) { // scroll forward to the start of the task\r\n\t\t\t\t\t\t\tgantt.scrollTo(pos.left - gantt.config.task_scroll_offset);\r\n\t\t\t\t\t\t} else if (pos.left + pos.width < scroll.x) {  // scroll back to the end of the task\r\n\t\t\t\t\t\t\tgantt.scrollTo(pos.left + pos.width - gantt.config.task_scroll_offset);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgantt.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this, [keptFocus]);\r\n\r\n\t\t\t\t// GS-152 if there are scrollbars with custom names, change their scroll position\r\n\t\t\t\tscrollGrid();\r\n\r\n\t\t\t\tfunction scrollGrid() {\r\n\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\tif (!grid || !grid.$grid_data){\r\n\t\t\t\t\t\t// GS-1805. Don't try to focus the row that doesn't exist\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar scrollPositionX = parseInt(grid.$grid.scrollLeft);\r\n\t\t\t\t\tvar scrollPositionY = parseInt(grid.$grid_data.scrollTop);\r\n\r\n\t\t\t\t\tvar attachedScrollbarHorizontal = grid.$config.scrollX;\r\n\r\n\t\t\t\t\tif (attachedScrollbarHorizontal && grid.$config.scrollable) {\r\n\t\t\t\t\t\tvar scrollbarHorizontal = gantt.$ui.getView(attachedScrollbarHorizontal);\r\n\t\t\t\t\t\tif (scrollbarHorizontal) {\r\n\t\t\t\t\t\t\tscrollbarHorizontal.scrollTo(scrollPositionX, scrollPositionY);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar attachedScrollbarVertical = grid.$config.scrollY;\r\n\r\n\t\t\t\t\tif (attachedScrollbarVertical) {\r\n\t\t\t\t\t\tvar scrollbarVertical = gantt.$ui.getView(attachedScrollbarVertical);\r\n\t\t\t\t\t\tif (scrollbarVertical) {\r\n\t\t\t\t\t\t\tscrollbarVertical.scrollTo(scrollPositionX, scrollPositionY);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tkeys: {\r\n\t\t\t\t\"pagedown\": function () {\r\n\t\t\t\t\tif (gantt.getVisibleTaskCount()) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskRow(gantt.getTaskByIndex(gantt.getVisibleTaskCount() - 1).id));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"pageup\": function () {\r\n\t\t\t\t\tif (gantt.getVisibleTaskCount()) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskRow(gantt.getTaskByIndex(0).id));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"up\": function () {\r\n\t\t\t\t\tvar nextElement = null;\r\n\t\t\t\t\tvar prevTask = gantt.getPrev(this.taskId);\r\n\t\t\t\t\tif (!gantt.isTaskExists(prevTask)) {\r\n\t\t\t\t\t\tnextElement = new gantt.$keyboardNavigation.HeaderCell();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnextElement = new gantt.$keyboardNavigation.TaskRow(prevTask);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.moveTo(nextElement);\r\n\t\t\t\t},\r\n\t\t\t\t\"down\": function () {\r\n\t\t\t\t\tvar nextTask = gantt.getNext(this.taskId);\r\n\t\t\t\t\tif (gantt.isTaskExists(nextTask)) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskRow(nextTask));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t\"shift+down\": function(){\r\n\t\t\t\t\tif(gantt.hasChild(this.taskId) && !gantt.getTask(this.taskId).$open){\r\n\t\t\t\t\t\tgantt.open(this.taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"shift+up\": function(){\r\n\t\t\t\t\tif(gantt.hasChild(this.taskId) && gantt.getTask(this.taskId).$open){\r\n\t\t\t\t\t\tgantt.close(this.taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"shift+right\": function() {\r\n\t\t\t\t\tif (gantt.isReadonly(this)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar prevId = gantt.getPrevSibling(this.taskId);\r\n\t\t\t\t\tif(gantt.isTaskExists(prevId) && !gantt.isChildOf(this.taskId, prevId)){\r\n\t\t\t\t\t\tvar parent = gantt.getTask(prevId);\r\n\t\t\t\t\t\tparent.$open = true;\r\n\t\t\t\t\t\tvar result = gantt.moveTask(this.taskId, -1, prevId);\r\n\t\t\t\t\t\tif(result !== false)\r\n\t\t\t\t\t\t\tgantt.updateTask(this.taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"shift+left\": function() {\r\n\t\t\t\t\tif (gantt.isReadonly(this)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar parent = gantt.getParent(this.taskId);\r\n\t\t\t\t\tif(gantt.isTaskExists(parent)){\r\n\t\t\t\t\t\tvar result =  gantt.moveTask(this.taskId, gantt.getTaskIndex(parent) + 1, gantt.getParent(parent));\r\n\t\t\t\t\t\tif(result !== false)\r\n\t\t\t\t\t\t\tgantt.updateTask(this.taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// select\r\n\t\t\t\t\"space\": function (e) {\r\n\t\t\t\t\tif (!gantt.isSelectedTask(this.taskId)) {\r\n\t\t\t\t\t\tgantt.selectTask(this.taskId);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgantt.unselectTask(this.taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// collapse\r\n\t\t\t\t\"ctrl+left\": function (e) {\r\n\t\t\t\t\tgantt.close(this.taskId);\r\n\t\t\t\t},\r\n\t\t\t\t// expand\r\n\t\t\t\t\"ctrl+right\": function (e) {\r\n\t\t\t\t\tgantt.open(this.taskId);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// delete task\r\n\t\t\t\t\"delete\": function (e) {\r\n\t\t\t\t\tif (gantt.isReadonly(this)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt.$click.buttons[\"delete\"](this.taskId);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// open lightbox\r\n\t\t\t\t\"enter\": function () {\r\n\t\t\t\t\tif (gantt.isReadonly(this)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt.showLightbox(this.taskId);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// add subtask\r\n\t\t\t\t\"ctrl+enter\": function () {\r\n\t\t\t\t\tif (gantt.isReadonly(this)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt.createTask({}, this.taskId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\tgantt.$keyboardNavigation.TaskRow.prototype.bindAll(gantt.$keyboardNavigation.TaskRow.prototype.keys);\r\n\r\n};","import * as domHelpers from \"../../../core/ui/utils/dom_helpers\";\r\nimport {replaceValidZeroId} from \"../../../utils/helpers\";\r\n\r\nexport default function(gantt) {\r\n\r\n\r\n\tgantt.$keyboardNavigation.TaskCell = function (taskId, index) {\r\n\t\ttaskId = replaceValidZeroId(taskId, gantt.config.root_id);\r\n\t\tif (!taskId) {\r\n\t\t\tvar rootLevel = gantt.getChildren(gantt.config.root_id);\r\n\t\t\tif (rootLevel[0]) {\r\n\t\t\t\ttaskId = rootLevel[0];\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.taskId = taskId;\r\n\t\tthis.columnIndex = index || 0;\r\n\t\t// provided task may not exist, in this case node will be detectes as invalid\r\n\t\tif (gantt.isTaskExists(this.taskId)) {\r\n\t\t\tthis.index = gantt.getTaskIndex(this.taskId);\r\n\t\t\tthis.globalIndex = gantt.getGlobalTaskIndex(this.taskId);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.$keyboardNavigation.TaskCell.prototype = gantt._compose(\r\n\t\tgantt.$keyboardNavigation.TaskRow,\r\n\t\t{\r\n\t\t\t_handlers: null,\r\n\t\t\tisValid: function () {\r\n\r\n\t\t\t\treturn gantt.$keyboardNavigation.TaskRow.prototype.isValid.call(this) && !!gantt.getGridColumns()[this.columnIndex];\r\n\t\t\t},\r\n\t\t\tfallback: function () {\r\n\r\n\t\t\t\tvar node = gantt.$keyboardNavigation.TaskRow.prototype.fallback.call(this);\r\n\t\t\t\tvar result = node;\r\n\t\t\t\tif (node instanceof gantt.$keyboardNavigation.TaskRow) {\r\n\t\t\t\t\tvar visibleColumns = gantt.getGridColumns();\r\n\t\t\t\t\tvar index = this.columnIndex;\r\n\t\t\t\t\twhile (index >= 0) {\r\n\t\t\t\t\t\tif (visibleColumns[index])\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tindex--;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (visibleColumns[index]) {\r\n\t\t\t\t\t\tresult = new gantt.$keyboardNavigation.TaskCell(node.taskId, index);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn result;\r\n\t\t\t},\r\n\r\n\t\t\tfromDomElement: function(el){\r\n\t\t\t\tif(!gantt.config.keyboard_navigation_cells){\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar taskId = gantt.locate(el);\r\n\t\t\t\tif(gantt.isTaskExists(taskId)){\r\n\t\t\t\t\tvar index = 0;\r\n\t\t\t\t\tvar cellElement = domHelpers.locateAttribute(el, \"data-column-index\");\r\n\r\n\t\t\t\t\tif(cellElement){\r\n\t\t\t\t\t\tindex = cellElement.getAttribute(\"data-column-index\")*1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn new gantt.$keyboardNavigation.TaskCell(taskId, index);\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tgetNode: function () {\r\n\t\t\t\tif (gantt.isTaskExists(this.taskId) && (gantt.isTaskVisible(this.taskId) || gantt.config.show_tasks_outside_timescale)) {\r\n\t\t\t\t\tif (gantt.config.show_grid && gantt.$grid) {\r\n\t\t\t\t\t\tvar row = gantt.$grid.querySelector(\".gantt_row[\" + gantt.config.task_attribute + \"='\" + this.taskId + \"']\");\r\n\t\t\t\t\t\tif(!row)\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\treturn row.querySelector(\"[data-column-index='\"+this.columnIndex+\"']\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn gantt.getTaskNode(this.taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tkeys: {\r\n\t\t\t\t\"up\": function () {\r\n\r\n\t\t\t\t\tvar nextElement = null;\r\n\t\t\t\t\tvar prevTask = gantt.getPrev(this.taskId);\r\n\t\t\t\t\tif (!gantt.isTaskExists(prevTask)) {\r\n\t\t\t\t\t\tnextElement = new gantt.$keyboardNavigation.HeaderCell(this.columnIndex);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnextElement = new gantt.$keyboardNavigation.TaskCell(prevTask, this.columnIndex);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.moveTo(nextElement);\r\n\t\t\t\t},\r\n\t\t\t\t\"down\": function () {\r\n\t\t\t\t\tvar nextTask = gantt.getNext(this.taskId);\r\n\t\t\t\t\tif (gantt.isTaskExists(nextTask)) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(nextTask, this.columnIndex));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"left\": function () {\r\n\t\t\t\t\tif (this.columnIndex > 0) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(this.taskId, this.columnIndex - 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"right\": function () {\r\n\t\t\t\t\tvar columns = gantt.getGridColumns();\r\n\t\t\t\t\tif (this.columnIndex < columns.length - 1) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(this.taskId, this.columnIndex + 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t\"end\": function () {\r\n\t\t\t\t\tvar columns = gantt.getGridColumns();\r\n\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(this.taskId, columns.length - 1));\r\n\t\t\t\t},\r\n\t\t\t\t\"home\": function () {\r\n\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(this.taskId, 0));\r\n\t\t\t\t},\r\n\t\t\t\t\"pagedown\": function () {\r\n\t\t\t\t\tif (gantt.getVisibleTaskCount()) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(gantt.getTaskByIndex(gantt.getVisibleTaskCount() - 1).id, this.columnIndex));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"pageup\": function () {\r\n\t\t\t\t\tif (gantt.getVisibleTaskCount()) {\r\n\t\t\t\t\t\tthis.moveTo(new gantt.$keyboardNavigation.TaskCell(gantt.getTaskByIndex(0).id, this.columnIndex));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\r\n\r\n\tgantt.$keyboardNavigation.TaskCell.prototype.bindAll(gantt.$keyboardNavigation.TaskRow.prototype.keys);\r\n\tgantt.$keyboardNavigation.TaskCell.prototype.bindAll(gantt.$keyboardNavigation.TaskCell.prototype.keys);\r\n\r\n};","export default function(gantt) {\r\n\r\n\tgantt.$keyboardNavigation.dispatcher = {\r\n\t\tisActive: false,\r\n\t\tactiveNode: null,\r\n\t\tglobalNode: new gantt.$keyboardNavigation.GanttNode(),\r\n\r\n\t\tenable: function () {\r\n\t\t\tthis.isActive = true;\r\n\t\t\tthis.setActiveNode(this.getActiveNode());\r\n\t\t},\r\n\r\n\t\tdisable: function () {\r\n\t\t\tthis.isActive = false;\r\n\t\t},\r\n\r\n\t\tisEnabled: function () {\r\n\t\t\treturn !!this.isActive;\r\n\t\t},\r\n\r\n\t\tgetDefaultNode: function () {\r\n\t\t\tvar node;\r\n\t\t\tif (gantt.config.keyboard_navigation_cells) {\r\n\t\t\t\tnode = new gantt.$keyboardNavigation.TaskCell();\r\n\t\t\t} else {\r\n\t\t\t\tnode = new gantt.$keyboardNavigation.TaskRow();\r\n\t\t\t}\r\n\r\n\t\t\tif (!node.isValid()) {\r\n\t\t\t\tnode = node.fallback();\r\n\t\t\t}\r\n\t\t\treturn node;\r\n\t\t},\r\n\r\n\t\tsetDefaultNode: function () {\r\n\t\t\tthis.setActiveNode(this.getDefaultNode());\r\n\t\t},\r\n\r\n\t\tgetActiveNode: function () {\r\n\t\t\tvar node = this.activeNode;\r\n\t\t\tif (node && !node.isValid()) {\r\n\t\t\t\tnode = node.fallback();\r\n\t\t\t}\r\n\t\t\treturn node;\r\n\t\t},\r\n\r\n\t\tfromDomElement: function(e){\r\n\t\t\tvar inputs = [\r\n\t\t\t\tgantt.$keyboardNavigation.TaskRow,\r\n\t\t\t\tgantt.$keyboardNavigation.TaskCell,\r\n\t\t\t\tgantt.$keyboardNavigation.HeaderCell\r\n\t\t\t];\r\n\t\t\tfor(var i = 0; i < inputs.length; i++){\r\n\t\t\t\tif(inputs[i].prototype.fromDomElement){\r\n\t\t\t\t\tvar node = inputs[i].prototype.fromDomElement(e);\r\n\t\t\t\t\tif(node) return node;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\r\n\t\tfocusGlobalNode: function () {\r\n\t\t\tthis.blurNode(this.globalNode);\r\n\t\t\tthis.focusNode(this.globalNode);\r\n\t\t},\r\n\r\n\t\tsetActiveNode: function (el) {\r\n\t\t\t//console.trace()\r\n\t\t\tvar focusChanged = true;\r\n\t\t\tif (this.activeNode) {\r\n\t\t\t\tif (this.activeNode.compareTo(el)) {\r\n\t\t\t\t\tfocusChanged = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.isEnabled()) {\r\n\t\t\t\tif(focusChanged)\r\n\t\t\t\t\tthis.blurNode(this.activeNode);\r\n\r\n\t\t\t\tthis.activeNode = el;\r\n\t\t\t\tthis.focusNode(this.activeNode, !focusChanged);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfocusNode: function (el, keptFocus) {\r\n\t\t\tif (el && el.focus) {\r\n\t\t\t\tel.focus(keptFocus);\r\n\t\t\t}\r\n\t\t},\r\n\t\tblurNode: function (el) {\r\n\t\t\tif (el && el.blur) {\r\n\t\t\t\tel.blur();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tkeyDownHandler: function (e) {\r\n\r\n\t\t\tif (gantt.$keyboardNavigation.isModal())\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (!this.isEnabled())\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(e.defaultPrevented){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar ganttNode = this.globalNode;\r\n\r\n\t\t\tvar command = gantt.$keyboardNavigation.shortcuts.getCommandFromEvent(e);\r\n\r\n\t\t\tvar activeElement = this.getActiveNode();\r\n\t\t\tvar eventFacade = gantt.$keyboardNavigation.facade;\r\n\t\t\tif(eventFacade.callEvent(\"onKeyDown\", [command, e]) === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!activeElement) {\r\n\t\t\t\tthis.setDefaultNode();\r\n\t\t\t} else if (activeElement.findHandler(command)) {\r\n\t\t\t\tactiveElement.doAction(command, e);\r\n\t\t\t} else if (ganttNode.findHandler(command)) {\r\n\t\t\t\tganttNode.doAction(command, e);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t_timeout: null,\r\n\t\tawaitsFocus: function(){\r\n\t\t\treturn this._timeout !== null;\r\n\t\t},\r\n\t\tdelay: function(callback, delay){\r\n\r\n\t\t\tclearTimeout(this._timeout);\r\n\t\t\tthis._timeout = setTimeout(gantt.bind(function(){\r\n\t\t\t\tthis._timeout = null;\r\n\t\t\t\tcallback();\r\n\t\t\t}, this)  , delay || 1);\r\n\r\n\t\t},\r\n\t\tclearDelay: function(){\r\n\t\t\tclearTimeout(this._timeout);\r\n\t\t}\r\n\t};\r\n\r\n};","import { QuickInfo } from \"./quickInfo\";\r\n\r\nexport default function(gantt: any){\r\n\r\nif (!gantt.ext) {\r\n\tgantt.ext = {};\r\n}\r\ngantt.ext.quickInfo = new QuickInfo(gantt);\r\n\r\ngantt.config.quickinfo_buttons = [\"icon_edit\", \"icon_delete\"];\r\ngantt.config.quick_info_detached = true;\r\ngantt.config.show_quick_info = true;\r\n\r\ngantt.templates.quick_info_title = function(start, end, ev){ return ev.text.substr(0,50); };\r\ngantt.templates.quick_info_content = function(start, end, ev){ return ev.details || ev.text; };\r\ngantt.templates.quick_info_date = function(start, end, ev){\r\n\treturn gantt.templates.task_time(start, end, ev);\r\n};\r\ngantt.templates.quick_info_class = function(start, end, task){ return \"\"; };\r\n\r\ngantt.attachEvent(\"onTaskClick\", function(id,e){\r\n\t// GS-1460 and GS-1787. Don't show Quick Info when clicking on the add, collapse, and expand buttons\r\n\tconst addButton = gantt.utils.dom.closest(e.target, \".gantt_add\");\r\n\tconst collapseButton = gantt.utils.dom.closest(e.target, \".gantt_close\");\r\n\tconst expandButton = gantt.utils.dom.closest(e.target, \".gantt_open\");\r\n\tconst showQuickInfo = !addButton && !collapseButton && !expandButton;\r\n\tif (showQuickInfo){\r\n\t\tsetTimeout(function() {\r\n\t\t\tgantt.ext.quickInfo.show(id);\r\n\t\t}, 0);\r\n\t}\r\n\r\n\treturn true;\r\n});\r\n\r\nconst events = [\"onViewChange\", \"onLightbox\", \"onBeforeTaskDelete\", \"onBeforeDrag\"];\r\nconst hidingFunction = function(){\r\n\tgantt.ext.quickInfo.hide();\r\n\treturn true;\r\n};\r\nfor (let i=0; i<events.length; i++){\r\n\tgantt.attachEvent(events[i], hidingFunction);\r\n}\r\n// GS-957: We don't want to hide QuickInfo when we click on it.\r\ngantt.attachEvent(\"onEmptyClick\", function(e){\r\n\tlet hideQuickInfo = true;\r\n\tconst parent = document.querySelector(\".gantt_cal_quick_info\");\r\n\tif (parent){\r\n\t\tconst quickInfoClick = gantt.utils.dom.isChildOf(e.target, parent);\r\n\t\tif (quickInfoClick){\r\n\t\t\thideQuickInfo = false;\r\n\t\t}\r\n\t}\r\n\tif (hideQuickInfo){\r\n\t\thidingFunction();\r\n\t}\r\n});\r\nfunction clearQuickInfo() {\r\n\tgantt.ext.quickInfo.hide();\r\n\tgantt.ext.quickInfo._quickInfoBox = null;\r\n\treturn true;\r\n}\r\ngantt.attachEvent(\"onGanttReady\", clearQuickInfo);\r\ngantt.attachEvent(\"onDestroy\", clearQuickInfo);\r\n\r\n// eslint-disable-next-line no-restricted-globals\r\ngantt.event(window, \"keydown\", function(e){\r\n\tif (e.keyCode === 27){\r\n\t\tgantt.ext.quickInfo.hide();\r\n\t}\r\n});\r\n\r\ngantt.showQuickInfo = function(){\r\n\tgantt.ext.quickInfo.show.apply(gantt.ext.quickInfo, arguments);\r\n};\r\ngantt.hideQuickInfo = function(){\r\n\tgantt.ext.quickInfo.hide.apply(gantt.ext.quickInfo, arguments);\r\n};\r\n\r\n}","import {TooltipManager} from \"./tooltipManager\";\r\n\r\nexport default function(gantt: any){\r\n\r\ngantt.config.tooltip_timeout = 30;\r\ngantt.config.tooltip_offset_y = 20;\r\ngantt.config.tooltip_offset_x = 10;\r\ngantt.config.tooltip_hide_timeout = 30;\r\n\r\n\r\n\r\nconst tooltipManager = new TooltipManager(gantt);\r\n\r\ngantt.ext.tooltips = tooltipManager;\r\n\r\ngantt.attachEvent(\"onGanttReady\", function(){\r\n\t//GS-2230: in case if `getGanttInstance` created without container\r\n\tif(!gantt.$root) return;\r\n\ttooltipManager.tooltipFor({\r\n\t\tselector: \"[\"+gantt.config.task_attribute+\"]:not(.gantt_task_row)\",\r\n\t\thtml: (event: MouseEvent) => {\r\n\t\t\tif (gantt.config.touch && !gantt.config.touch_tooltip) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst targetTaskId = gantt.locate(event);\r\n\t\t\tif(gantt.isTaskExists(targetTaskId)){\r\n\t\t\t\tconst task = gantt.getTask(targetTaskId);\r\n\t\t\t\treturn gantt.templates.tooltip_text(task.start_date, task.end_date, task);\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tglobal: false\r\n\t});\r\n});\r\n\r\ngantt.attachEvent(\"onDestroy\", function() {\r\n\ttooltipManager.destructor();\r\n});\r\n\r\ngantt.attachEvent(\"onLightbox\", function() {\r\n\ttooltipManager.hideTooltip();\r\n});\r\nconst isLinkCreate = () => {\r\n\tconst state = gantt.getState();\r\n\treturn !!state.link_source_id;\r\n};\r\ngantt.attachEvent(\"onBeforeTooltip\", function() {\r\n\tif (isLinkCreate()){\r\n\t\treturn false;\r\n\t}\r\n});\r\n\r\ngantt.attachEvent(\"onGanttScroll\", function(){\r\n\ttooltipManager.hideTooltip();\r\n});\r\n\r\n}","import { Monitor } from \"./monitor\";\r\nimport { IMonitor, IUndoCommand, TEntityType, TUndoStack } from \"./types\";\r\nimport { Undo } from \"./undo\";\r\n\r\nexport default function(gantt: any){\r\n\r\nconst _undo = new Undo(gantt);\r\nconst monitor: IMonitor = new Monitor(_undo, gantt);\r\n\r\ngantt.config.undo = true;\r\ngantt.config.redo = true;\r\n\r\n/**\r\n * entities that require different processing for undoing-redoing changes\r\n * @type {{link: string, task: string}}\r\n */\r\ngantt.config.undo_types = {\r\n\tlink: \"link\",\r\n\ttask: \"task\"\r\n};\r\n\r\n/**\r\n * types of traced actions\r\n * @type {{update: string, remove: string, add: string}}\r\n */\r\ngantt.config.undo_actions = {\r\n\tupdate: \"update\",\r\n\tremove: \"remove\", // remove item from datastore\r\n\tadd: \"add\",\r\n\tmove: \"move\" // move task in grid\r\n};\r\n\r\nif (!gantt.ext) {\r\n\tgantt.ext = {};\r\n}\r\n\r\ngantt.ext.undo = {\r\n\tundo: () => _undo.undo(),\r\n\tredo: () => _undo.redo(),\r\n\tgetUndoStack: () => _undo.getUndoStack(),\r\n\tsetUndoStack: (stack:[]) => _undo.setUndoStack(stack),\r\n\tgetRedoStack: () => _undo.getRedoStack(),\r\n\tsetRedoStack: (stack:[]) => _undo.setRedoStack(stack),\r\n\tclearUndoStack: () => _undo.clearUndoStack(),\r\n\tclearRedoStack: () => _undo.clearRedoStack(),\r\n\tsaveState: (id: TaskID | LinkID, type: TEntityType) => monitor.store(id, type, true),\r\n\tgetInitialState: (id: TaskID | LinkID, type: TEntityType) => {\r\n\t\tif(type === gantt.config.undo_types.link){\r\n\t\t\treturn monitor.getInitialLink(id);\r\n\t\t}else{\r\n\t\t\treturn monitor.getInitialTask(id);\r\n\t\t}\r\n\t}\r\n};\r\n\r\ngantt.undo = gantt.ext.undo.undo;\r\ngantt.redo = gantt.ext.undo.redo;\r\ngantt.getUndoStack = gantt.ext.undo.getUndoStack;\r\ngantt.getRedoStack = gantt.ext.undo.getRedoStack;\r\ngantt.clearUndoStack = gantt.ext.undo.clearUndoStack;\r\ngantt.clearRedoStack = gantt.ext.undo.clearRedoStack;\r\n\r\nfunction isEqualIds(first: TaskID, second: TaskID){\r\n\treturn String(first) === String(second);\r\n};\r\n\r\nfunction updTask(task: ITask, oldId: TaskID, newId: TaskID) {\r\n\tif (!task) { return; }\r\n\r\n\tif (isEqualIds(task.id, oldId)) {\r\n\t\ttask.id = newId;\r\n\t}\r\n\r\n\tif (isEqualIds(task.parent, oldId)) {\r\n\t\ttask.parent = newId;\r\n\t}\r\n}\r\n\r\nfunction changeTaskCommandId(command: IUndoCommand, oldId: TaskID, newId: TaskID) {\r\n\tupdTask(command.value, oldId, newId);\r\n\tupdTask(command.oldValue, oldId, newId);\r\n}\r\n\r\nfunction updLink(link: ILink, oldTaskId: TaskID, newTaskId: TaskID) {\r\n\tif (!link) { return; }\r\n\tif (isEqualIds(link.source, oldTaskId)) {\r\n\t\tlink.source = newTaskId;\r\n\t}\r\n\tif (isEqualIds(link.target, oldTaskId)) {\r\n\t\tlink.target = newTaskId;\r\n\t}\r\n}\r\n\r\nfunction changeLinkCommandId(command: IUndoCommand, oldId: LinkID, newId: LinkID) {\r\n\tupdLink(command.value, oldId, newId);\r\n\tupdLink(command.oldValue, oldId, newId);\r\n}\r\n\r\nfunction updateTasksIds(log: TUndoStack, oldId: TaskID, newId: TaskID) {\r\n\tconst undo = _undo;\r\n\r\n\tfor (let i = 0; i < log.length; i++) {\r\n\t\tconst entry = log[i];\r\n\t\tfor (let j = 0; j < entry.commands.length; j++) {\r\n\t\t\tif (entry.commands[j].entity === undo.command.entity.task) {\r\n\t\t\t\tchangeTaskCommandId(entry.commands[j], oldId, newId);\r\n\t\t\t} else if (entry.commands[j].entity === undo.command.entity.link) {\r\n\t\t\t\tchangeLinkCommandId(entry.commands[j], oldId, newId);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction updateLinksIds(log: TUndoStack, oldId: LinkID, newId: LinkID) {\r\n\tconst undo = _undo;\r\n\r\n\tfor (let i = 0; i < log.length; i++) {\r\n\t\tconst entry = log[i];\r\n\t\tfor (let j = 0; j < entry.commands.length; j++) {\r\n\t\t\tconst command = entry.commands[j];\r\n\t\t\tif (command.entity === undo.command.entity.link) {\r\n\t\t\t\tif (command.value && command.value.id === oldId) {\r\n\t\t\t\t\tcommand.value.id = newId;\r\n\t\t\t\t}\r\n\t\t\t\tif (command.oldValue && command.oldValue.id === oldId) {\r\n\t\t\t\t\tcommand.oldValue.id = newId;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\ngantt.attachEvent(\"onTaskIdChange\", (oldId: TaskID, newId: TaskID) => {\r\n\tconst undo = _undo;\r\n\tupdateTasksIds(undo.getUndoStack(), oldId, newId);\r\n\tupdateTasksIds(undo.getRedoStack(), oldId, newId);\r\n});\r\n\r\ngantt.attachEvent(\"onLinkIdChange\", (oldId: LinkID, newId: LinkID) => {\r\n\tconst undo = _undo;\r\n\tupdateLinksIds(undo.getUndoStack(), oldId, newId);\r\n\tupdateLinksIds(undo.getRedoStack(), oldId, newId);\r\n});\r\n\r\ngantt.attachEvent(\"onGanttReady\", () => {\r\n\t_undo.updateConfigs();\r\n});\r\n\r\n}","\r\nexport default function(gantt){\r\n\r\nif(!gantt._markers) {\r\n\tgantt._markers = gantt.createDatastore({\r\n\t\tname: \"marker\",\r\n\t\tinitItem: function (marker) {\r\n\t\t\tmarker.id = marker.id || gantt.uid();\r\n\t\t\treturn marker;\r\n\t\t}\r\n\t});\r\n}\r\n\r\ngantt.config.show_markers = true;\r\n\r\nfunction render_marker(marker){\r\n\tif(!gantt.config.show_markers)\r\n\t\treturn false;\r\n\r\n\tif(!marker.start_date)\r\n\t\treturn false;\r\n\r\n\tvar state = gantt.getState();\r\n\tif(+marker.start_date > +state.max_date)\r\n\t\treturn;\r\n\tif((!marker.end_date || +marker.end_date < +state.min_date) && +marker.start_date < +state.min_date)\r\n\t\treturn;\r\n\r\n\tvar div = document.createElement(\"div\");\r\n\r\n\tdiv.setAttribute(\"data-marker-id\", marker.id);\r\n\r\n\tvar css = \"gantt_marker\";\r\n\tif(gantt.templates.marker_class)\r\n\t\tcss += \" \" + gantt.templates.marker_class(marker);\r\n\r\n\tif(marker.css){\r\n\t\tcss += \" \" + marker.css;\r\n\t}\r\n\r\n\tif(gantt.templates.marker_class)\r\n\t\tcss += \" \" + gantt.templates.marker_class(marker);\r\n\r\n\tif(marker.title){\r\n\t\tdiv.title = marker.title;\r\n\t}\r\n\tdiv.className = css;\r\n\r\n\tvar start = gantt.posFromDate(marker.start_date);\r\n\tdiv.style.left = start + \"px\";\r\n\tlet markerHeight = Math.max(gantt.getRowTop(gantt.getVisibleTaskCount()), 0) + \"px\";\r\n\tif (gantt.config.timeline_placeholder && gantt.$task_data){\r\n\t\tmarkerHeight = gantt.$task_data.scrollHeight + \"px\";\r\n\t}\r\n\tdiv.style.height = markerHeight;\r\n\tif(marker.end_date){\r\n\t\tvar end = gantt.posFromDate(marker.end_date);\r\n\t\tdiv.style.width = Math.max((end - start), 0) + \"px\";\r\n\r\n\t}\r\n\r\n\tif(marker.text){\r\n\t\tlet content = null;\r\n\t\tif(typeof marker.text === \"function\"){\r\n\t\t\tcontent = marker.text(marker);\r\n\t\t}else {\r\n\t\t\tcontent = marker.text;\r\n\t\t}\r\n\t\tif(content){\r\n\t\t\tif(gantt.config.external_render && gantt.config.external_render.isElement(content)){\r\n\t\t\t\tdiv.innerHTML = \"<div class='gantt_marker_content' ></div>\";\r\n\t\t\t\tgantt.config.external_render.renderElement(content, div.querySelector(\".gantt_marker_content\"));\r\n\t\t\t}else{\r\n\t\t\t\tdiv.innerHTML = \"<div class='gantt_marker_content' >\" + marker.text + \"</div>\";\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\t\r\n\t}\r\n\r\n\treturn div;\r\n}\r\n\r\nfunction initMarkerArea(){\r\n\t// GS-481. Reset $marker_area if there is no timeline\r\n\tif(!gantt.$task_data || !gantt.$root.contains(gantt.$task_data)){\r\n\t\tgantt.$marker_area = null;\r\n\t\treturn;\r\n\t}\r\n\r\n\t// GS-2084. Don't add $marker_area when it already exists\r\n\tif(gantt.$marker_area && gantt.$task_data.contains(gantt.$marker_area)){\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar markerArea = document.createElement(\"div\");\r\n\tmarkerArea.className = \"gantt_marker_area\";\r\n\tgantt.$task_data.appendChild(markerArea);\r\n\tgantt.$marker_area = markerArea;\r\n}\r\n\r\ngantt.attachEvent(\"onBeforeGanttRender\", function(){\r\n\tif(!gantt.$marker_area)\r\n\t\tinitMarkerArea();\r\n});\r\n\r\ngantt.attachEvent(\"onDataRender\", function(){\r\n\tif(!gantt.$marker_area){\r\n\t\tinitMarkerArea();\r\n\t\tgantt.renderMarkers();\r\n\t}\r\n});\r\n\r\ngantt.attachEvent(\"onGanttLayoutReady\", function(){\r\n\t// GS-1304 - markers should attach when layout is initialized, both on gantt.init and gantt.resetLayout\r\n\t// wait for \"onBeforeGanttRender\", so all layout elements will be in DOM\r\n\tgantt.attachEvent(\"onBeforeGanttRender\", function(){\r\n\t\t// GS-882. If markers are rendered in the onDataRender handler, \r\n\t\t// they are not attached to the layer, so we need to remove the DOM elements\r\n\t\tif (gantt.$marker_area) {\r\n\t\t\tgantt.$marker_area.innerHTML = \"\";\r\n\t\t}\r\n\t\tinitMarkerArea();\r\n\r\n\t\tvar layers = gantt.$services.getService(\"layers\");\r\n\t\tvar markerRenderer = layers.createDataRender({\r\n\t\t\tname: \"marker\",\r\n\t\t\tdefaultContainer: function(){ return gantt.$marker_area;}\r\n\t\t});\r\n\t\tmarkerRenderer.addLayer(render_marker);\r\n\t}, {once: true});\r\n});\r\n\r\ngantt.getMarker = function(id){\r\n\tif(!this._markers) return null;\r\n\r\n\treturn this._markers.getItem(id);\r\n};\r\n\r\ngantt.addMarker = function(marker){\r\n\treturn this._markers.addItem(marker);\r\n};\r\n\r\ngantt.deleteMarker = function(id){\r\n\tif(!this._markers.exists(id))\r\n\t\treturn false;\r\n\r\n\tthis._markers.removeItem(id);\r\n\treturn true;\r\n};\r\ngantt.updateMarker = function(id){\r\n\tthis._markers.refresh(id);\r\n};\r\n\r\ngantt._getMarkers = function(){\r\n\treturn this._markers.getItems();\r\n};\r\n\r\ngantt.renderMarkers = function () {\r\n\tthis._markers.refresh();\r\n};\r\n\r\n};","import {replaceValidZeroId} from \"../utils/helpers\";\r\n\r\nexport default function(gantt){\r\n\r\ngantt.config.multiselect = true;\r\ngantt.config.multiselect_one_level = false;\r\n\r\ngantt._multiselect = {\r\n\t_selected: {},\r\n\t_one_level: false,\r\n\t_active: true,\r\n\t_first_selected_when_shift: null,\r\n\tgetDefaultSelected: function() {\r\n\t\tvar selected = this.getSelected();\r\n\t\treturn selected.length ? selected[selected.length - 1] : null;\r\n\t},\r\n\tsetFirstSelected: function(id) {\r\n\t\tthis._first_selected_when_shift = id;\r\n\t},\r\n\tgetFirstSelected: function() {\r\n\t\treturn this._first_selected_when_shift;\r\n\t},\r\n\tisActive: function() {\r\n\t\tthis.updateState();\r\n\t\treturn this._active;\r\n\t},\r\n\tupdateState: function() {\r\n\t\tthis._one_level = gantt.config.multiselect_one_level;\r\n\t\tvar active = this._active;\r\n\t\tthis._active = gantt.config.select_task;\r\n\t\tif (this._active != active) {\r\n\t\t\tthis.reset();\r\n\t\t}\r\n\t},\r\n\treset: function () {\r\n\t\tthis._selected = {};\r\n\t},\r\n\tsetLastSelected: function (id) {\r\n\t\tgantt.$data.tasksStore.silent(function(){\r\n\t\t\tvar store = gantt.$data.tasksStore;\r\n\t\t\tif (id)\r\n\t\t\t\tstore.select(id+\"\");\r\n\t\t\telse\r\n\t\t\t\tstore.unselect(null);\r\n\t\t});\r\n\t},\r\n\tgetLastSelected: function () {\r\n\t\tvar last = gantt.$data.tasksStore.getSelectedId();\r\n\t\tif (last && gantt.isTaskExists(last))\r\n\t\t\treturn last;\r\n\t\treturn null;\r\n\t},\r\n\tselect: function (id, e) {\r\n\t\tif (id && gantt.callEvent(\"onBeforeTaskMultiSelect\", [id, true, e]) && gantt.callEvent(\"onBeforeTaskSelected\", [id])) {\r\n\t\t\tthis._selected[id] = true;\r\n\t\t\tthis.setLastSelected(id);\r\n\t\t\tthis.afterSelect(id);\r\n\t\t\tgantt.callEvent(\"onTaskMultiSelect\", [id, true, e]);\r\n\t\t\tgantt.callEvent(\"onTaskSelected\", [id]);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\ttoggle: function (id, e) {\r\n\t\tif (this._selected[id]) {\r\n\t\t\tthis.unselect(id, e);\r\n\t\t} else {\r\n\t\t\tthis.select(id, e);\r\n\t\t}\r\n\t},\r\n\tunselect: function (id, e) {\r\n\t\tif (id && gantt.callEvent(\"onBeforeTaskMultiSelect\", [id, false, e])) {\r\n\t\t\tthis._selected[id] = false;\r\n\t\t\tif (this.getLastSelected() == id)\r\n\t\t\t\tthis.setLastSelected(this.getDefaultSelected());\r\n\t\t\tthis.afterSelect(id);\r\n\t\t\tgantt.callEvent(\"onTaskMultiSelect\", [id, false, e]);\r\n\t\t\tgantt.callEvent(\"onTaskUnselected\", [id]);\r\n\t\t}\r\n\t},\r\n\tisSelected: function (id) {\r\n\t\treturn !!(gantt.isTaskExists(id) && this._selected[id]);\r\n\t},\r\n\tgetSelected: function () {\r\n\t\tvar res = [];\r\n\t\tfor (var i in this._selected) {\r\n\t\t\tif (this._selected[i] && gantt.isTaskExists(i)) {\r\n\t\t\t\tres.push(i);\r\n\t\t\t} else {\r\n\t\t\t\tthis._selected[i] = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tres.sort(function(a, b) {\r\n\t\t\treturn gantt.getGlobalTaskIndex(a) > gantt.getGlobalTaskIndex(b) ? 1 : -1;\r\n\t\t});\r\n\t\treturn res;\r\n\t},\r\n\tforSelected: function (callback) {\r\n\t\tvar selected = this.getSelected();\r\n\t\tfor (var i = 0; i < selected.length; i++) {\r\n\t\t\tcallback(selected[i]);\r\n\t\t}\r\n\t},\r\n\tisSameLevel: function(id) {\r\n\t\tif (!this._one_level)\r\n\t\t\treturn true;\r\n\t\tvar last = this.getLastSelected();\r\n\t\tif (!last)\r\n\t\t\treturn true;\r\n\t\tif (!(gantt.isTaskExists(last) && gantt.isTaskExists(id)))\r\n\t\t\treturn true;\r\n\t\treturn !!(gantt.calculateTaskLevel(gantt.getTask(last)) == gantt.calculateTaskLevel(gantt.getTask(id)));\r\n\t},\r\n\tafterSelect: function(id) {\r\n\t\tif (gantt.isTaskExists(id)){\r\n\t\t\t// FIXME: quick workaround to prevent re-filtering inside refresh on multiselect\r\n\t\t\tgantt._quickRefresh(function(){\r\n\t\t\t\tgantt.refreshTask(id);\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tdoSelection: function(e) {\r\n\t\tif (!this.isActive())\r\n\t\t\treturn false;\r\n\r\n\t\t// deny selection when click on 'expand' or 'collapse' icons\r\n\t\tif (gantt._is_icon_open_click(e))\r\n\t\t\treturn false;\r\n\r\n\t\tvar target_ev = gantt.locate(e);\r\n\t\tif (!target_ev)\r\n\t\t\treturn false;\r\n\r\n\t\tif (!gantt.callEvent(\"onBeforeMultiSelect\", [e]))\r\n\t\t\treturn false;\r\n\r\n\t\tvar selected = this.getSelected();\r\n\t\tvar defaultLast = this.getFirstSelected();\r\n\t\tvar isLast = false;\r\n\t\tvar last = this.getLastSelected();\r\n\t\tvar multiSelect = gantt.config.multiselect;\r\n\r\n\r\n\t\tvar singleSelection = (function () {\r\n\t\t\t// GS-719: If the multiselect extension is added we still need a way\r\n\t\t\t// to open the inline editors after clicking on the cells in the grid\r\n\t\t\tconst controller = gantt.ext.inlineEditors;\r\n\t\t\tif(controller && controller.getState){\r\n\t\t\t\tconst state = controller.getState();\r\n\t\t\t\tconst cell = controller.locateCell(e.target);\r\n\r\n\t\t\t\tif (gantt.config.inline_editors_multiselect_open && cell && controller.getEditorConfig(cell.columnName)) {\r\n\t\t\t\t\tif (controller.isVisible() && state.id == cell.id && state.columnName == cell.columnName) {\r\n\t\t\t\t\t\t// do nothing if editor is already active in this cell\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcontroller.startEdit(cell.id, cell.columnName);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.setFirstSelected(target_ev);\r\n\r\n\t\t\tif (!this.isSelected(target_ev)) {\r\n\t\t\t\tthis.select(target_ev, e);\r\n\t\t\t}\r\n\t\t\tselected = this.getSelected();\r\n\t\t\tfor (var i = 0; i < selected.length; i++) {\r\n\t\t\t\tif (selected[i] !== target_ev) {\r\n\t\t\t\t\tthis.unselect(selected[i], e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}).bind(this);\r\n\r\n\t\tvar blockSelection = (function(){\r\n\t\t\tif (!last)\r\n\t\t\t\tlast = target_ev;\r\n\t\t\telse if (target_ev) {\r\n\t\t\t\tvar first_indx = gantt.getGlobalTaskIndex(this.getFirstSelected());\r\n\t\t\t\tvar target_indx = gantt.getGlobalTaskIndex(target_ev);\r\n\t\t\t\tvar last_indx = gantt.getGlobalTaskIndex(last);\r\n\t\t\t\t// GS-1969: if the selected tasks are collapsed, need to remove them\r\n\t\t\t\tif(first_indx == -1 || last_indx == -1){\r\n\t\t\t\t\tfirst_indx = target_indx;\r\n\t\t\t\t\tthis.reset();\r\n\t\t\t\t}\r\n\t\t\t\t// clear prev selection\r\n\t\t\t\tvar tmp = last;\r\n\t\t\t\twhile (gantt.getGlobalTaskIndex(tmp) !== first_indx) {\r\n\t\t\t\t\tthis.unselect(tmp, e);\r\n\t\t\t\t\ttmp = (first_indx > last_indx) ? gantt.getNext(tmp) : gantt.getPrev(tmp);\r\n\t\t\t\t}\r\n\t\t\t\ttmp = target_ev;\r\n\t\t\t\twhile (gantt.getGlobalTaskIndex(tmp) !== first_indx) {\r\n\t\t\t\t\tif (this.select(tmp, e) && !isLast) {\r\n\t\t\t\t\t\tisLast = true;\r\n\t\t\t\t\t\tdefaultLast = tmp;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttmp = (first_indx > target_indx) ? gantt.getNext(tmp) : gantt.getPrev(tmp);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}).bind(this);\r\n\r\n\r\n\t\tif (multiSelect && (e.ctrlKey || e.metaKey)) {\r\n\t\t\tif (!this.isSelected(target_ev))\r\n\t\t\t\tthis.setFirstSelected(target_ev);\r\n\r\n\t\t\tif (target_ev) {\r\n\t\t\t\tthis.toggle(target_ev, e);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telse if (multiSelect && e.shiftKey) {\r\n\t\t\tif (!gantt.isTaskExists(this.getFirstSelected()) || this.getFirstSelected() === null) {\r\n\t\t\t\tthis.setFirstSelected(target_ev);\r\n\t\t\t}\r\n\r\n\t\t\tif (selected.length) { // select a group of tasks\r\n\t\t\t\tblockSelection();\r\n\t\t\t}\r\n\t\t\telse { // select a task when no task is selected and Shift is pressed\r\n\t\t\t\tsingleSelection();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\telse { // no key press or no multiple selection on the mouse click\r\n\t\t\tsingleSelection();\r\n\t\t}\r\n\r\n\r\n\t\tif (this.isSelected(target_ev)) {\r\n\t\t\tthis.setLastSelected(target_ev);\r\n\t\t} else if (defaultLast) {\r\n\t\t\tif (target_ev == last)\r\n\t\t\t\tthis.setLastSelected(e.shiftKey ? defaultLast : this.getDefaultSelected());\r\n\t\t} else {\r\n\t\t\tthis.setLastSelected(null);\r\n\t\t}\r\n\r\n\t\tif (!this.getSelected().length)\r\n\t\t\tthis.setLastSelected(null);\r\n\r\n\t\tif (!this.getLastSelected() || !this.isSelected(this.getFirstSelected()))\r\n\t\t\tthis.setFirstSelected(this.getLastSelected());\r\n\r\n\t\treturn true;\r\n\t}\r\n};\r\n\r\n(function(){\r\n\tvar old_selectTask = gantt.selectTask;\r\n\tgantt.selectTask = function(id) {\r\n\t\tid = replaceValidZeroId(id, this.config.root_id);\r\n\t\tif (!id)\r\n\t\t\treturn false;\r\n\t\tvar multiselect = gantt._multiselect;\r\n\t\tvar res = id;\r\n\t\tif (multiselect.isActive()) {\r\n\t\t\tif (multiselect.select(id, null)) {\r\n\t\t\t\tmultiselect.setLastSelected(id);\r\n\t\t\t}\r\n\t\t\tmultiselect.setFirstSelected(multiselect.getLastSelected());\r\n\t\t} else {\r\n\t\t\tres = old_selectTask.call(this, id);\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tvar old_unselectTask = gantt.unselectTask;\r\n\tgantt.unselectTask = function(id) {\r\n\t\tvar multiselect = gantt._multiselect;\r\n\t\tvar isActive = multiselect.isActive();\r\n\t\tid = id || multiselect.getLastSelected();\r\n\t\tif(id && isActive) {\r\n\t\t\tmultiselect.unselect(id, null);\r\n\t\t\tif (id == multiselect.getLastSelected())\r\n\t\t\t\tmultiselect.setLastSelected(null);\r\n\t\t\tgantt.refreshTask(id);\r\n\t\t\tmultiselect.setFirstSelected(multiselect.getLastSelected());\r\n\t\t}\r\n\t\tvar res = id;\r\n\t\tif (!isActive)\r\n\t\t\tres = old_unselectTask.call(this, id);\r\n\t\treturn res;\r\n\t};\r\n\r\n\tgantt.toggleTaskSelection = function(id) {\r\n\t\tvar multiselect = gantt._multiselect;\r\n\t\tif (id && multiselect.isActive()) {\r\n\t\t\tmultiselect.toggle(id);\r\n\t\t\tmultiselect.setFirstSelected(multiselect.getLastSelected());\r\n\t\t}\r\n\t};\r\n\tgantt.getSelectedTasks = function() {\r\n\t\tvar multiselect = gantt._multiselect;\r\n\t\tmultiselect.isActive();\r\n\t\treturn multiselect.getSelected();\r\n\t};\r\n\tgantt.eachSelectedTask = function(callback){\r\n\t\treturn this._multiselect.forSelected(callback);\r\n\t};\r\n\tgantt.isSelectedTask = function(id){\r\n\t\treturn this._multiselect.isSelected(id);\r\n\t};\r\n\tgantt.getLastSelectedTask = function(){\r\n\t\treturn this._multiselect.getLastSelected();\r\n\t};\r\n\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\t\tvar old_isSelected = gantt.$data.tasksStore.isSelected;\r\n\t\tgantt.$data.tasksStore.isSelected = function(id){\r\n\t\t\tif (gantt._multiselect.isActive()) {\r\n\t\t\t\treturn gantt._multiselect.isSelected(id);\r\n\t\t\t}\r\n\t\t\treturn old_isSelected.call(this, id);\r\n\t\t};\r\n\t});\r\n})();\r\n\r\ngantt.attachEvent(\"onTaskIdChange\", function (id, new_id) {\r\n\tvar multiselect = gantt._multiselect;\r\n\tif (!multiselect.isActive())\r\n\t\treturn true;\r\n\tif (gantt.isSelectedTask(id)) {\r\n\t\tmultiselect.unselect(id, null);\r\n\t\tmultiselect.select(new_id, null);\r\n\t}\r\n});\r\n\r\ngantt.attachEvent(\"onAfterTaskDelete\", function (id, item) {\r\n\tvar multiselect = gantt._multiselect;\r\n\tif (!multiselect.isActive())\r\n\t\treturn true;\r\n\r\n\tif (multiselect._selected[id]) {\r\n\t\t// GS-1057: don't unselect the task here because the task is already unselected \r\n\t\t// it was in the select.js file before it was deleted\r\n\t\t// multiselect.unselect(id, null);\r\n\t\tmultiselect._selected[id] = false;\r\n\t\tmultiselect.setLastSelected(multiselect.getDefaultSelected());\r\n\t}\r\n\r\n\tmultiselect.forSelected(function (task_id) {\r\n\t\tif (!gantt.isTaskExists(task_id))\r\n\t\t\tmultiselect.unselect(task_id, null);\r\n\t});\r\n});\r\n\r\ngantt.attachEvent(\"onBeforeTaskMultiSelect\", function(id, state, e){\r\n\tconst multiselect = gantt._multiselect;\r\n\tif (state && multiselect.isActive()) {\r\n\t\t//GS-1321: prevent unselecting task\r\n\t\tlet oldSelectedId = gantt.getSelectedId();\r\n\t\tlet oldSelectedTask = null;\r\n\t\tif (oldSelectedId) {\r\n\t\t\toldSelectedTask = gantt.getTask(oldSelectedId);\r\n\t\t}\r\n\t\tlet newSelectedTask = gantt.getTask(id);\r\n\t\tlet differentTreeLevel = false;\r\n\t\tif (oldSelectedTask && oldSelectedTask.$level != newSelectedTask.$level){\r\n\t\t\tdifferentTreeLevel = true;\r\n\t\t}\r\n\r\n\t\tif (gantt.config.multiselect_one_level && differentTreeLevel && !e.ctrlKey && !e.shiftKey) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (multiselect._one_level) {\r\n\t\t\treturn multiselect.isSameLevel(id);\r\n\t\t}\r\n\t}\r\n\treturn true;\r\n});\r\n\r\ngantt.attachEvent(\"onTaskClick\", function(id, e) {\r\n\tif (gantt._multiselect.doSelection(e))\r\n\t\tgantt.callEvent(\"onMultiSelect\", [e]);\r\n\treturn true;\r\n});\r\n\r\n};","/* eslint-disable */\r\n\r\nimport ScaleHelper from \"../../core/ui/timeline/scales_ignore\";\r\nimport * as helpers from \"../../utils/helpers\";\r\n\r\nexport default function(gantt: any) {\r\n\r\n\tgantt.ext = gantt.ext || {};\r\n\r\n\tgantt.ext.export_api = gantt.ext.export_api || {\r\n\r\n\t\t_apiUrl: \"https://export.dhtmlx.com/gantt\",\r\n\r\n\t\t_preparePDFConfigRaw(config:any, type:any){\r\n\t\t\tlet previousDateRage:any = null;\r\n\t\t\tif (config.start && config.end){\r\n\t\t\t\tpreviousDateRage = {\r\n\t\t\t\t\tstart_date: gantt.config.start_date,\r\n\t\t\t\t\tend_date: gantt.config.end_date,\r\n\t\t\t\t};\r\n\t\t\t\tgantt.config.start_date = gantt.date.str_to_date(gantt.config.date_format)(config.start);\r\n\t\t\t\tgantt.config.end_date = gantt.date.str_to_date(gantt.config.date_format)(config.end);\r\n\t\t\t}\r\n\r\n\t\t\tconfig = gantt.mixin(config, {\r\n\t\t\t\tname: \"gantt.\" + type, data: gantt.ext.export_api._serializeHtml()\r\n\t\t\t});\r\n\r\n\t\t\tif (previousDateRage){\r\n\t\t\t\tgantt.config.start_date = previousDateRage.start_date;\r\n\t\t\t\tgantt.config.end_date = previousDateRage.end_date;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_prepareConfigPDF(config:any, type:any){\r\n\t\t\tconfig = gantt.mixin((config || {}), {\r\n\t\t\t\tname: \"gantt.\" + type,\r\n\t\t\t\tdata: gantt.ext.export_api._serializeAll(),\r\n\t\t\t\tconfig: gantt.config\r\n\t\t\t});\r\n\t\t\tgantt.ext.export_api._fixColumns(config.config.columns);\r\n\t\t\treturn config;\r\n\t\t},\r\n\r\n\t\t_pdfExportRouter(config:any, type:any){\r\n\t\t\tif (config && config.raw) {\r\n\t\t\t\tgantt.ext.export_api._preparePDFConfigRaw(config, type);\r\n\t\t\t} else {\r\n\t\t\t\tconfig = gantt.ext.export_api._prepareConfigPDF(config, type);\r\n\t\t\t}\r\n\t\t\tconfig.version = gantt.version;\r\n\t\t\tgantt.ext.export_api._sendToExport(config, type);\r\n\t\t},\r\n\r\n\t\texportToPDF(config:any) {\r\n\t\t\tgantt.ext.export_api._pdfExportRouter(config, \"pdf\");\r\n\t\t},\r\n\r\n\t\texportToPNG(config:any) {\r\n\t\t\tgantt.ext.export_api._pdfExportRouter(config, \"png\");\r\n\t\t},\r\n\r\n\r\n\t\texportToICal(config:any) {\r\n\t\t\tconfig = gantt.mixin((config || {}), {\r\n\t\t\t\tname: \"gantt.ical\",\r\n\t\t\t\tdata: gantt.ext.export_api._serializePlain().data,\r\n\t\t\t\tversion: gantt.version\r\n\t\t\t});\r\n\t\t\tgantt.ext.export_api._sendToExport(config, \"ical\");\r\n\t\t},\r\n\r\n\t\texportToExcel(config:any) {\r\n\t\t\tconfig = config || {};\r\n\r\n\t\t\tlet tasks;\r\n\t\t\tlet dates: any = [];\r\n\t\t\tlet state;\r\n\t\t\tlet scroll;\r\n\t\t\t// GS-2124, we need to get all task nodes to correctly obtain the colors\r\n\t\t\tconst smartRendering = gantt.config.smart_rendering;\r\n\t\t\tif (config.visual === \"base-colors\"){\r\n\t\t\t\tgantt.config.smart_rendering = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (config.start || config.end) {\r\n\t\t\t\tstate = gantt.getState();\r\n\t\t\t\tdates = [gantt.config.start_date, gantt.config.end_date];\r\n\t\t\t\tscroll = gantt.getScrollState();\r\n\t\t\t\tconst convert = gantt.date.str_to_date(gantt.config.date_format);\r\n\t\t\t\ttasks = gantt.eachTask;\r\n\r\n\t\t\t\tif (config.start){\r\n\t\t\t\t\tgantt.config.start_date = convert(config.start);\r\n\t\t\t\t}\r\n\t\t\t\tif (config.end){\r\n\t\t\t\t\tgantt.config.end_date = convert(config.end);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgantt.render();\r\n\t\t\t\tgantt.config.smart_rendering = smartRendering;\r\n\r\n\t\t\t\tgantt.eachTask = gantt.ext.export_api._eachTaskTimed(gantt.config.start_date, gantt.config.end_date);\r\n\t\t\t} else if (config.visual === \"base-colors\"){\r\n\t\t\t\tgantt.render();\r\n\t\t\t\tgantt.config.smart_rendering = smartRendering;\r\n\t\t\t}\r\n\r\n\t\t\tconfig = gantt.mixin(config, {\r\n\t\t\t\tname: \"gantt.xlsx\",\r\n\t\t\t\ttitle: \"Tasks\",\r\n\t\t\t\tdata: gantt.ext.export_api._serializeTimeline(config),\r\n\t\t\t\tcolumns: gantt.ext.export_api._serializeGrid({ raw: config.raw, rawDates: true }),\r\n\t\t\t\tversion: gantt.version\r\n\t\t\t});\r\n\r\n\t\t\tif (config.visual){\r\n\t\t\t\tconfig.scales = gantt.ext.export_api._serializeScales(config);\r\n\t\t\t}\r\n\r\n\t\t\tgantt.ext.export_api._sendToExport(config, \"excel\");\r\n\r\n\t\t\tif (config.start || config.end) {\r\n\t\t\t\tgantt.config.start_date = state.min_date;\r\n\t\t\t\tgantt.config.end_date = state.max_date;\r\n\t\t\t\tgantt.eachTask = tasks;\r\n\r\n\t\t\t\tgantt.render();\r\n\t\t\t\tgantt.scrollTo(scroll.x, scroll.y);\r\n\r\n\t\t\t\tgantt.config.start_date = dates[0];\r\n\t\t\t\tgantt.config.end_date = dates[1];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\texportToJSON(config:any) {\r\n\t\t\tconfig = gantt.mixin((config || {}), {\r\n\t\t\t\tname: \"gantt.json\",\r\n\t\t\t\tdata: gantt.ext.export_api._serializeAll(),\r\n\t\t\t\tconfig: gantt.config,\r\n\t\t\t\tcolumns: gantt.ext.export_api._serializeGrid(),\r\n\t\t\t\tworktime: gantt.ext.export_api._getWorktimeSettings(),\r\n\t\t\t\tversion: gantt.version\r\n\t\t\t});\r\n\t\t\tgantt.ext.export_api._sendToExport(config, \"json\");\r\n\t\t},\r\n\r\n\r\n\t\timportFromExcel(config:any) {\r\n\t\t\ttry {\r\n\t\t\t\tconst formData = config.data;\r\n\t\t\t\tif (formData instanceof File) {\r\n\t\t\t\t\tconst data = new FormData();\r\n\t\t\t\t\tdata.append(\"file\", formData);\r\n\t\t\t\t\tconfig.data = data;\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {}\r\n\t\t\tgantt.ext.export_api._sendImportAjaxExcel(config);\r\n\t\t},\r\n\r\n\t\timportFromMSProject(config:any) {\r\n\t\t\tconst formData = config.data;\r\n\t\t\ttry {\r\n\t\t\t\tif (formData  instanceof File) {\r\n\t\t\t\t\tconst data = new FormData();\r\n\t\t\t\t\tdata.append(\"file\", formData);\r\n\t\t\t\t\tconfig.data = data;\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {}\r\n\t\t\tgantt.ext.export_api._sendImportAjaxMSP(config);\r\n\t\t},\r\n\r\n\t\timportFromPrimaveraP6(config:any) {\r\n\t\t\tconfig.type = \"primaveraP6-parse\";\r\n\t\t\treturn gantt.importFromMSProject(config);\r\n\t\t},\r\n\r\n\t\texportToMSProject(config:any) {\r\n\t\t\tconfig = config || {};\r\n\t\t\tconfig.skip_circular_links = config.skip_circular_links === undefined ? true : !!config.skip_circular_links;\r\n\r\n\t\t\tconst oldXmlFormat = gantt.templates.xml_format;\r\n\t\t\tconst oldFormatDate = gantt.templates.format_date;\r\n\t\t\tconst oldXmlDate = gantt.config.xml_date;\r\n\t\t\tconst oldDateFormat = gantt.config.date_format;\r\n\r\n\t\t\tconst exportServiceDateFormat = \"%d-%m-%Y %H:%i:%s\";\r\n\r\n\t\t\tgantt.config.xml_date = exportServiceDateFormat;\r\n\t\t\tgantt.config.date_format = exportServiceDateFormat;\r\n\t\t\tgantt.templates.xml_format = gantt.date.date_to_str(exportServiceDateFormat);\r\n\t\t\tgantt.templates.format_date = gantt.date.date_to_str(exportServiceDateFormat);\r\n\t\t\tconst data = gantt.ext.export_api._serializeAll();\r\n\r\n\t\t\tgantt.ext.export_api._customProjectProperties(data, config);\r\n\r\n\t\t\tgantt.ext.export_api._customTaskProperties(data, config);\r\n\r\n\t\t\tif (config.skip_circular_links) {\r\n\t\t\t\tgantt.ext.export_api._clearRecLinks(data);\r\n\t\t\t}\r\n\r\n\t\t\tconfig = gantt.ext.export_api._exportConfig(data, config);\r\n\r\n\t\t\tgantt.ext.export_api._sendToExport(config, config.type || \"msproject\");\r\n\t\t\tgantt.config.xml_date = oldXmlDate;\r\n\t\t\tgantt.config.date_format = oldDateFormat;\r\n\t\t\tgantt.templates.xml_format = oldXmlFormat;\r\n\t\t\tgantt.templates.format_date = oldFormatDate;\r\n\r\n\t\t\tgantt.config.$custom_data = null;\r\n\t\t\tgantt.config.custom = null;\r\n\t\t},\r\n\r\n\t\texportToPrimaveraP6(config:any) {\r\n\t\t\tconfig = config || {};\r\n\t\t\tconfig.type = \"primaveraP6\";\r\n\t\t\treturn gantt.exportToMSProject(config);\r\n\t\t},\r\n\r\n\t\t_fixColumns(columns:any) {\r\n\t\t\tfor (let i = 0; i < columns.length; i++) {\r\n\t\t\t\tcolumns[i].label = columns[i].label || gantt.locale.labels[\"column_\" + columns[i].name];\r\n\t\t\t\tif (typeof columns[i].width === \"string\") {\r\n\t\t\t\t\tcolumns[i].width = columns[i].width * 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_xdr(url:any, pack:any, cb:any) {\r\n\t\t\tgantt.ajax.post(url, pack, cb);\r\n\t\t},\r\n\r\n\t\t_markColumns(base:any) {\r\n\t\t\tconst columns = base.config.columns;\r\n\t\t\tif (columns){\r\n\t\t\t\tfor (let i = 0; i < columns.length; i++) {\r\n\t\t\t\t\tif (columns[i].template){\r\n\t\t\t\t\t\tcolumns[i].$template = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\t_sendImportAjaxExcel(config:any) {\r\n\t\t\tconst url = config.server || gantt.ext.export_api._apiUrl;\r\n\t\t\tconst store = config.store || 0;\r\n\t\t\tconst formData = config.data;\r\n\t\t\tconst callback = config.callback;\r\n\r\n\t\t\tformData.append(\"type\", \"excel-parse\");\r\n\t\t\tformData.append(\"data\", JSON.stringify({\r\n\t\t\t\tsheet: config.sheet || 0\r\n\t\t\t}));\r\n\r\n\t\t\tif (store){\r\n\t\t\t\tformData.append(\"store\", store);\r\n\t\t\t}\r\n\r\n\t\t\tconst xhr = new XMLHttpRequest();\r\n\t\t\txhr.onreadystatechange = function(e) {\r\n\t\t\t\tif (xhr.readyState === 4 && xhr.status === 0) {// network error\r\n\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\tcallback(null);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\txhr.onload = function() {\r\n\t\t\t\tconst fail = xhr.status > 400;\r\n\t\t\t\tlet info = null;\r\n\r\n\t\t\t\tif (!fail) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tinfo = JSON.parse(xhr.responseText);\r\n\t\t\t\t\t} catch (e) { }\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (callback) {\r\n\t\t\t\t\tcallback(info);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\txhr.open(\"POST\", url, true);\r\n\t\t\txhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n\t\t\txhr.send(formData);\r\n\t\t},\r\n\r\n\r\n\t\t_ajaxToExport(data:any, type:any, callback:any) {\r\n\t\t\tdelete data.callback;\r\n\r\n\t\t\tconst url = data.server || gantt.ext.export_api._apiUrl;\r\n\t\t\tconst pack = \"type=\" + type + \"&store=1&data=\" + encodeURIComponent(JSON.stringify(data));\r\n\r\n\t\t\tconst cb = function(loader:any) {\r\n\t\t\t\tconst xdoc = loader.xmlDoc || loader;\r\n\t\t\t\tconst fail = xdoc.status > 400;\r\n\t\t\t\tlet info = null;\r\n\r\n\t\t\t\tif (!fail) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tinfo = JSON.parse(xdoc.responseText);\r\n\t\t\t\t\t} catch (e) { }\r\n\t\t\t\t}\r\n\t\t\t\tcallback(info);\r\n\t\t\t};\r\n\r\n\t\t\tgantt.ext.export_api._xdr(url, pack, cb);\r\n\t\t},\r\n\t\t_serializableGanttConfig(config:any) {\r\n\t\t\tconst result = gantt.mixin({}, config);\r\n\r\n\t\t\tif (result.columns) {\r\n\t\t\t\tresult.columns = result.columns.map(function(col:any) {\r\n\t\t\t\t\tconst copy = gantt.mixin({}, col);\r\n\t\t\t\t\tdelete copy.editor;\r\n\t\t\t\t\treturn copy;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tdelete result.editor_types;\r\n\t\t\treturn result;\r\n\t\t},\r\n\r\n\t\t_sendToExport(data:any, type:any) {\r\n\t\t\tconst convert = gantt.date.date_to_str(gantt.config.date_format || gantt.config.xml_date);\r\n\t\t\tif(!data.skin){\r\n\t\t\t\tdata.skin = gantt.skin;\r\n\t\t\t}\r\n\t\t\tif (data.config) {\r\n\t\t\t\tdata.config = gantt.copy(gantt.ext.export_api._serializableGanttConfig(data.config));\r\n\t\t\t\tgantt.ext.export_api._markColumns(data, type);\r\n\r\n\t\t\t\tif (data.config.start_date && data.config.end_date) {\r\n\t\t\t\t\tif (data.config.start_date instanceof Date) {\r\n\t\t\t\t\t\tdata.config.start_date = convert(data.config.start_date);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (data.config.end_date instanceof Date) {\r\n\t\t\t\t\t\tdata.config.end_date = convert(data.config.end_date);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (data.callback) {\r\n\t\t\t\treturn gantt.ext.export_api._ajaxToExport(data, type, data.callback);\r\n\t\t\t}\r\n\r\n\t\t\tconst form = gantt.ext.export_api._createHiddenForm();\r\n\t\t\tform.firstChild.action = data.server || gantt.ext.export_api._apiUrl;\r\n\t\t\tform.firstChild.childNodes[0].value = JSON.stringify(data);\r\n\t\t\tform.firstChild.childNodes[1].value = type;\r\n\t\t\tform.firstChild.submit();\r\n\t\t},\r\n\r\n\t\t_createHiddenForm() {\r\n\t\t\tif (!gantt.ext.export_api._hidden_export_form) {\r\n\t\t\t\tconst t = gantt.ext.export_api._hidden_export_form = document.createElement(\"div\");\r\n\t\t\t\tt.style.display = \"none\";\r\n\t\t\t\tt.innerHTML = \"<form method='POST' target='_blank'><textarea name='data' style='width:0px; height:0px;' readonly='true'></textarea><input type='hidden' name='type' value=''></form>\";\r\n\t\t\t\tdocument.body.appendChild(t);\r\n\t\t\t}\r\n\t\t\treturn gantt.ext.export_api._hidden_export_form;\r\n\t\t},\r\n\r\n\r\n\t\t_copyObjectBase(obj: any) {\r\n\t\t\tconst copy: any = {\r\n\t\t\t\tstart_date: undefined,\r\n\t\t\t\tend_date: undefined,\r\n\t\t\t\tconstraint_date: undefined,\r\n\t\t\t\tdeadline: undefined\r\n\t\t\t};\r\n\t\t\tfor (const key in obj) {\r\n\t\t\t\tif (key.charAt(0) === \"$\" || key === \"baselines\"){\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tcopy[key] = obj[key];\r\n\t\t\t}\r\n\t\t\tconst formatDate = gantt.templates.xml_format || gantt.templates.format_date;\r\n\r\n\t\t\tcopy.start_date = formatDate(copy.start_date);\r\n\t\t\tif (copy.end_date){\r\n\t\t\t\tcopy.end_date = formatDate(copy.end_date);\r\n\t\t\t}\r\n\t\t\tif (copy.constraint_date){\r\n\t\t\t\tcopy.constraint_date = formatDate(copy.constraint_date);\r\n\t\t\t}\r\n\t\t\tif (copy.deadline){\r\n\t\t\t\tcopy.deadline = formatDate(copy.deadline);\r\n\t\t\t}\r\n\r\n\t\t\treturn copy;\r\n\t\t},\r\n\r\n\r\n\t\t_color_box: null,\r\n\t\t_color_hash: {},\r\n\r\n\t\t_getStyles(css:any) {\r\n\t\t\tif (!gantt.ext.export_api._color_box) {\r\n\t\t\t\tgantt.ext.export_api._color_box = document.createElement(\"DIV\");\r\n\t\t\t\tgantt.ext.export_api._color_box.style.cssText = \"position:absolute; display:none;\";\r\n\t\t\t\tdocument.body.appendChild(gantt.ext.export_api._color_box);\r\n\t\t\t}\r\n\t\t\tif (gantt.ext.export_api._color_hash[css]){\r\n\t\t\t\treturn gantt.ext.export_api._color_hash[css];\r\n\t\t\t}\r\n\r\n\t\t\tgantt.ext.export_api._color_box.className = css;\r\n\t\t\tconst color = gantt.ext.export_api._getColor(gantt.ext.export_api._color_box, \"color\");\r\n\t\t\tconst backgroundColor = gantt.ext.export_api._getColor(gantt.ext.export_api._color_box, \"backgroundColor\");\r\n\t\t\treturn (gantt.ext.export_api._color_hash[css] = color + \";\" + backgroundColor);\r\n\t\t},\r\n\r\n\r\n\t\t_getMinutesWorktimeSettings(parsedRanges:any) {\r\n\t\t\tconst minutes:any = [];\r\n\t\t\tparsedRanges.forEach(function(range:any) {\r\n\t\t\t\tminutes.push(range.startMinute);\r\n\t\t\t\tminutes.push(range.endMinute);\r\n\t\t\t});\r\n\t\t\treturn minutes;\r\n\t\t},\r\n\r\n\t\t_getWorktimeSettings() {\r\n\r\n\t\t\tconst defaultWorkTimes = {\r\n\t\t\t\thours: [0, 24],\r\n\t\t\t\tminutes: null,\r\n\t\t\t\tdates: { 0: true, 1: true, 2: true, 3: true, 4: true, 5: true, 6: true }\r\n\t\t\t};\r\n\r\n\t\t\tlet time: any;\r\n\t\t\tif (!gantt.config.work_time) {\r\n\t\t\t\ttime = defaultWorkTimes;\r\n\t\t\t} else {\r\n\t\t\t\tconst wTime = gantt._working_time_helper;\r\n\t\t\t\tif (wTime && wTime.get_calendar) {\r\n\t\t\t\t\ttime = wTime.get_calendar();\r\n\t\t\t\t} else if (wTime) {\r\n\t\t\t\t\ttime = {\r\n\t\t\t\t\t\thours: wTime.hours,\r\n\t\t\t\t\t\tminutes: null,\r\n\t\t\t\t\t\tdates: wTime.dates\r\n\t\t\t\t\t};\r\n\t\t\t\t} else if (gantt.config.worktimes && gantt.config.worktimes.global) {\r\n\t\t\t\t\tconst settings = gantt.config.worktimes.global;\r\n\r\n\t\t\t\t\tif (settings.parsed) {\r\n\t\t\t\t\t\tconst minutes = gantt.ext.export_api._getMinutesWorktimeSettings(settings.parsed.hours);\r\n\t\t\t\t\t\ttime = {\r\n\t\t\t\t\t\t\thours: null,\r\n\t\t\t\t\t\t\tminutes,\r\n\t\t\t\t\t\t\tdates: {}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tfor (const i in settings.parsed.dates) {\r\n\t\t\t\t\t\t\tif (Array.isArray(settings.parsed.dates[i])) {\r\n\t\t\t\t\t\t\t\ttime.dates[i] = gantt.ext.export_api._getMinutesWorktimeSettings(settings.parsed.dates[i]);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttime.dates[i] = settings.parsed.dates[i];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttime = {\r\n\t\t\t\t\t\t\thours: settings.hours,\r\n\t\t\t\t\t\t\tminutes: null,\r\n\t\t\t\t\t\t\tdates: settings.dates\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttime = defaultWorkTimes;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn time;\r\n\t\t},\r\n\r\n\r\n\t\t_eachTaskTimed(start:any, end:any) {\r\n\t\t\treturn function(code:any, parent:any, master:any) {\r\n\t\t\t\tparent = parent || gantt.config.root_id;\r\n\t\t\t\tmaster = master || gantt;\r\n\r\n\t\t\t\tconst branch = gantt.getChildren(parent);\r\n\t\t\t\tif (branch){\r\n\t\t\t\t\tfor (let i = 0; i < branch.length; i++) {\r\n\t\t\t\t\t\tconst item = gantt._pull[branch[i]];\r\n\t\t\t\t\t\tif ((!start || item.end_date > start) && (!end || item.start_date < end)){\r\n\t\t\t\t\t\t\tcode.call(master, item);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (gantt.hasChild(item.id)){\r\n\t\t\t\t\t\t\tgantt.eachTask(code, item.id, master);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\r\n\r\n\t\t// patch broken json serialization in gantt 2.1\r\n\t\t_originalCopyObject: gantt.json._copyObject,\r\n\r\n\t\t_copyObjectPlainICal(task: any) {\r\n\t\t\tconst text = gantt.templates.task_text(task.start_date, task.end_date, task);\r\n\r\n\t\t\tconst copy = gantt.ext.export_api._copyObjectBase(task);\r\n\t\t\tcopy.text = text || copy.text;\r\n\r\n\t\t\treturn copy;\r\n\t\t},\r\n\r\n\t\t_copyObjectPlainExcel(task: any) {\r\n\t\t\tconst text = gantt.templates.task_text(task.start_date, task.end_date, task);\r\n\r\n\t\t\tconst copy = gantt.json.serializeTask(task);\r\n\t\t\tcopy.text = text || copy.text;\r\n\r\n\t\t\treturn copy;\r\n\t\t},\r\n\r\n\t\t_getColor(node:any, style:any) {\r\n\t\t\tlet value = node.currentStyle ? node.currentStyle[style] : getComputedStyle(node, null)[style];\r\n\t\t\t// if we get the black background color for the progress bar, \r\n\t\t\t// most likely, it is the transparent color.\r\n\t\t\t// In that case, we need to confirm that and return the color of the task bar\r\n\t\t\tif (node.closest(\".gantt_task_progress\") && value === \"rgba(0, 0, 0, 0.15)\"){\r\n\t\t\t\tnode = node.parentNode.parentNode;\r\n\t\t\t\tvalue = node.currentStyle ? node.currentStyle[style] : getComputedStyle(node, null)[style];\r\n\t\t\t}\r\n\t\t\tconst rgb = value.replace(/\\s/g, \"\").match(/^rgba?\\((\\d+),(\\d+),(\\d+)/i);\r\n\t\t\treturn ((rgb && rgb.length === 4) ?\r\n\t\t\t\t(\"0\" + parseInt(rgb[1], 10).toString(16)).slice(-2) +\r\n\t\t\t\t(\"0\" + parseInt(rgb[2], 10).toString(16)).slice(-2) +\r\n\t\t\t\t(\"0\" + parseInt(rgb[3], 10).toString(16)).slice(-2) : value).replace(\"#\", \"\");\r\n\t\t},\r\n\r\n\r\n\t\t// excel serialization\r\n\t\t_copyObjectTable(obj:any) {\r\n\t\t\t// Excel interprets UTC time as local time in every timezone, send local time instead of actual UTC time.\r\n\t\t\t// https://github.com/SheetJS/js-xlsx/issues/126#issuecomment-60531614\r\n\t\t\tconst toISOstring = gantt.date.date_to_str(\"%Y-%m-%dT%H:%i:%s.000Z\");\r\n\r\n\t\t\tconst copy = gantt.ext.export_api._copyObjectColumns(obj, gantt.ext.export_api._copyObjectPlainExcel(obj));\r\n\t\t\tif (copy.start_date){\r\n\t\t\t\tif (typeof copy.start_date === \"string\"){\r\n\t\t\t\t\tcopy.original_start_date = gantt.date.str_to_date(gantt.config.date_format)(copy.start_date);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcopy.original_start_date = copy.start_date;\r\n\t\t\t\t\tcopy.start_date = toISOstring(obj.start_date);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (copy.end_date){\r\n\t\t\t\tif (typeof copy.end_date === \"string\"){\r\n\t\t\t\t\tcopy.original_end_date = gantt.date.str_to_date(gantt.config.date_format)(copy.end_date);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcopy.original_end_date = copy.end_date;\r\n\t\t\t\t\tcopy.end_date = toISOstring(obj.end_date);\r\n\t\t\t\t}\r\n\t\t\t} else if (copy.original_start_date){\r\n\t\t\t\tcopy.original_end_date = gantt.calculateEndDate({\r\n\t\t\t\t\tstart_date: copy.original_start_date,\r\n\t\t\t\t\tduration: copy.duration,\r\n\t\t\t\t\ttask: copy\r\n\t\t\t\t});\r\n\t\t\t\tcopy.end_date = toISOstring(copy.original_end_date);\r\n\t\t\t}\r\n\r\n\t\t\treturn copy;\r\n\t\t},\r\n\r\n\t\t_generatedScales: null,\r\n\t\t_generateScales(){\r\n\t\t\tconst state = gantt.getState();\r\n\t\t\tconst scaleHelper = ScaleHelper(gantt);\r\n\t\t\tconst scales = [scaleHelper.primaryScale(gantt.config)].concat(scaleHelper.getSubScales(gantt.config));\r\n\r\n\t\t\tconst scalesConfig = scaleHelper.prepareConfigs(scales, gantt.config.min_column_width, 1000, gantt.config.scale_height - 1, state.min_date, state.max_date, gantt.config.rtl);\r\n\t\t\tgantt.ext.export_api._generatedScales = scalesConfig;\r\n\t\t\treturn scalesConfig;\r\n\t\t},\r\n\r\n\t\t_getDayIndex (scales:any, date:any){\r\n\t\t\tlet days = scales.trace_indexes\r\n\t\t\tif (days[+date]) {\r\n\t\t\t\treturn days[+date]\r\n\t\t\t} else {\r\n\t\t\t\tdays = scales.trace_x;\r\n\t\t\t\tconst state = gantt.getState();\r\n\r\n\t\t\t\tif (+date <= state.min_date) {\r\n\t\t\t\t\tif (gantt.config.rtl) {\r\n\t\t\t\t\t\treturn days.length;\r\n\t\t\t\t\t} else{\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (+date >= state.max_date) {\r\n\t\t\t\t\tif (gantt.config.rtl) {\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn days.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconst index = helpers.findBinary(days, +date);\r\n\t\t\t\treturn index;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_copyObjectColors(obj:any, config:any) {\r\n\t\t\tconst copy = gantt.ext.export_api._copyObjectTable(obj);\r\n\r\n\t\t\tlet startDate = copy.original_start_date;\r\n\t\t\tlet endDate = copy.original_end_date;\r\n\r\n\t\t\tlet getDayIndex = gantt.columnIndexByDate;\r\n\r\n\t\t\tlet scales;\r\n\t\t\tif (gantt.ext.export_api._generatedScales){ \r\n\t\t\t\tconst allScales = gantt.ext.export_api._generatedScales;\r\n\t\t\t\tscales = allScales[allScales.length - 1];\r\n\r\n\t\t\t\tcopy.$start = gantt.ext.export_api._getDayIndex(scales, startDate);\r\n\t\t\t\tcopy.$end = gantt.ext.export_api._getDayIndex(scales, endDate);\r\n\t\t\t} else {\r\n\t\t\t\tscales = gantt.getScale();\r\n\t\t\t\tcopy.$start = getDayIndex.call(gantt, startDate);\r\n\t\t\t\tcopy.$end = getDayIndex.call(gantt, endDate);\r\n\t\t\t}\r\n\r\n\t\t\t// GS-2100. Correct bar position considering hidden cells\r\n\t\t\tlet hiddenCells = 0;\r\n\t\t\tconst scaleCellsWidth = scales.width;\r\n\t\t\tif (scaleCellsWidth.indexOf(0) > -1) {\r\n\t\t\t\tlet i = 0;\r\n\t\t\t\tfor (i; i < copy.$start; i++) {\r\n\t\t\t\t\tif (!scaleCellsWidth[i]) {\r\n\t\t\t\t\t\thiddenCells++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcopy.$start -= hiddenCells;\r\n\r\n\t\t\t\tfor (i; i < copy.$end; i++) {\r\n\t\t\t\t\tif (!scaleCellsWidth[i]) {\r\n\t\t\t\t\t\thiddenCells++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcopy.$end -= hiddenCells;\r\n\t\t\t}\r\n\r\n\t\t\tcopy.$level = obj.$level;\r\n\t\t\tcopy.$type = obj.$rendered_type;\r\n\r\n\t\t\tconst tmps = gantt.templates;\r\n\t\t\tcopy.$text = tmps.task_text(obj.start, obj.end_date, obj);\r\n\t\t\tcopy.$left = tmps.leftside_text ? tmps.leftside_text(obj.start, obj.end_date, obj) : \"\";\r\n\t\t\tcopy.$right = tmps.rightside_text ? tmps.rightside_text(obj.start, obj.end_date, obj) : \"\";\r\n\r\n\t\t\tconst node = gantt.getTaskNode && gantt.getTaskNode(obj.id);\r\n\t\t\tif (node && node.firstChild) {\r\n\t\t\t\tlet targetNode = node;\r\n\t\t\t\tif (config.visual !== \"base-colors\"){\r\n\t\t\t\t\ttargetNode = node.querySelector(\".gantt_task_progress\")\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet color = gantt.ext.export_api._getColor(targetNode, \"backgroundColor\");\r\n\t\t\t\tif (color === \"363636\"){\r\n\t\t\t\t\tcolor = gantt.ext.export_api._getColor(node, \"backgroundColor\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcopy.$color = color;\r\n\t\t\t} else if (obj.color){\r\n\t\t\t\tcopy.$color = obj.color;\r\n\t\t\t} else {\r\n\t\t\t\tconst cellCss = gantt.templates.task_class(obj.start, obj.end, obj);\r\n\t\t\t\tif (cellCss){\r\n\t\t\t\t\tconst styles = gantt.ext.export_api._getStyles(cellCss);\r\n\t\t\t\t\tcopy.$color = styles.split(\";\")[1]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn copy;\r\n\t\t},\r\n\r\n\t\t_copyObjectColumns(obj:any, copy:any) {\r\n\t\t\tfor (let i = 0; i < gantt.config.columns.length; i++) {\r\n\t\t\t\tconst ct = gantt.config.columns[i].template;\r\n\t\t\t\tif (ct) {\r\n\t\t\t\t\tlet val = ct(obj);\r\n\t\t\t\t\tif (val instanceof Date){\r\n\t\t\t\t\t\tval = gantt.templates.date_grid(val, obj);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcopy[\"_\" + i] = val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn copy;\r\n\t\t},\r\n\r\n\t\t_copyObjectAll(obj:any) {\r\n\t\t\tconst copy = gantt.ext.export_api._copyObjectBase(obj);\r\n\r\n\t\t\tconst templates = [\r\n\t\t\t\t\"leftside_text\",\r\n\t\t\t\t\"rightside_text\",\r\n\t\t\t\t\"task_text\",\r\n\t\t\t\t\"progress_text\",\r\n\t\t\t\t\"task_class\"\r\n\t\t\t];\r\n\r\n\t\t\t// serialize all text templates\r\n\t\t\tfor (let i = 0; i < templates.length; i++) {\r\n\t\t\t\tconst template = gantt.templates[templates[i]];\r\n\t\t\t\tif (template){\r\n\t\t\t\t\tcopy[\"$\" + i] = template(obj.start_date, obj.end_date, obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgantt.ext.export_api._copyObjectColumns(obj, copy);\r\n\t\t\tcopy.open = obj.$open;\r\n\t\t\treturn copy;\r\n\t\t},\r\n\r\n\r\n\t\t_serializeHtml() {\r\n\t\t\tconst smartScales = gantt.config.smart_scales;\r\n\t\t\tconst smartRendering = gantt.config.smart_rendering;\r\n\t\t\tif (smartScales || smartRendering) {\r\n\t\t\t\tgantt.config.smart_rendering = false;\r\n\t\t\t\tgantt.config.smart_scales = false;\r\n\t\t\t\tgantt.render();\r\n\t\t\t}\r\n\r\n\t\t\tconst html = gantt.$container.parentNode.innerHTML;\r\n\r\n\t\t\tif (smartScales || smartRendering) {\r\n\t\t\t\tgantt.config.smart_scales = smartScales;\r\n\t\t\t\tgantt.config.smart_rendering = smartRendering;\r\n\t\t\t\tgantt.render();\r\n\t\t\t}\r\n\r\n\t\t\treturn html;\r\n\t\t},\r\n\r\n\t\t_serializeAll() {\r\n\t\t\tgantt.json._copyObject = gantt.ext.export_api._copyObjectAll;\r\n\t\t\tconst data = gantt.ext.export_api._exportSerialize();\r\n\t\t\tgantt.json._copyObject = gantt.ext.export_api._originalCopyObject;\r\n\t\t\treturn data;\r\n\t\t},\r\n\r\n\t\t_serializePlain() {\r\n\t\t\tconst oldXmlFormat = gantt.templates.xml_format;\r\n\t\t\tconst oldFormatDate = gantt.templates.format_date;\r\n\t\t\tgantt.templates.xml_format = gantt.date.date_to_str(\"%Y%m%dT%H%i%s\", true);\r\n\t\t\tgantt.templates.format_date = gantt.date.date_to_str(\"%Y%m%dT%H%i%s\", true);\r\n\t\t\tgantt.json._copyObject = gantt.ext.export_api._copyObjectPlainICal;\r\n\r\n\t\t\tconst data = gantt.ext.export_api._exportSerialize();\r\n\r\n\t\t\tgantt.templates.xml_format = oldXmlFormat;\r\n\t\t\tgantt.templates.format_date = oldFormatDate;\r\n\t\t\tgantt.json._copyObject = gantt.ext.export_api._originalCopyObject;\r\n\r\n\t\t\tdelete data.links;\r\n\t\t\treturn data;\r\n\t\t},\r\n\r\n\t\t_getRaw() {\r\n\t\t\tconst timeline = gantt.$ui.getView(\"timeline\");\r\n\t\t\tif (timeline && gantt.config.show_chart) {\r\n\t\t\t\tlet availWidth = timeline.$config.width;\r\n\t\t\t\tif (gantt.config.autosize === \"x\" || gantt.config.autosize === \"xy\") {\r\n\t\t\t\t\tavailWidth = Math.max(gantt.config.autosize_min_width, 0);\r\n\t\t\t\t}\r\n\t\t\t\tconst state = gantt.getState();\r\n\t\t\t\tconst scales = timeline._getScales();\r\n\t\t\t\tconst minWidth = gantt.config.min_column_width;\r\n\t\t\t\tconst height = gantt.config.scale_height - 1;\r\n\t\t\t\tconst rtl = gantt.config.rtl;\r\n\r\n\t\t\t\treturn timeline.$scaleHelper.prepareConfigs(scales, minWidth, availWidth, height, state.min_date, state.max_date, rtl);\r\n\t\t\t} else {\r\n\t\t\t\treturn gantt.ext.export_api._generateScales();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_serializeTimeline(config:any) {\r\n\t\t\tgantt.ext.export_api._generatedScales = null;\r\n\t\t\tlet scales;\r\n\t\t\tif (config.visual){\r\n\t\t\t\tscales = gantt.ext.export_api._getRaw(config.start, config.end);\r\n\t\t\t}\r\n\t\t\tif (config.data){\r\n\t\t\t\tconfig.custom_dataset = true;\r\n\t\t\t}\r\n\r\n\t\t\tlet tasks = config.data || gantt.serialize().data;\r\n\t\t\ttasks.forEach(function(task:any, index:any){\r\n\t\t\t\tif (config.visual){\r\n\t\t\t\t\t// Save split tasks dates inside the parent object\r\n\t\t\t\t\tif (task.render == \"split\"){\r\n\t\t\t\t\t\tconst children:any = [];\r\n\t\t\t\t\t\tif (config.custom_dataset){\r\n\t\t\t\t\t\t\ttasks.forEach(function(child:any){\r\n\t\t\t\t\t\t\t\tif (child.parent == task.id){\r\n\t\t\t\t\t\t\t\t\tconst childBar = gantt.ext.export_api._copyObjectColors(child, config);\r\n\t\t\t\t\t\t\t\t\tchildBar.$split_subtask = true;\r\n\t\t\t\t\t\t\t\t\tchildren.push(childBar);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tgantt.eachTask(function(child:any){\r\n\t\t\t\t\t\t\t\tconst childBar = gantt.ext.export_api._copyObjectColors(child, config);\r\n\t\t\t\t\t\t\t\tchildren.push(childBar);\r\n\t\t\t\t\t\t\t}, task.id);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttask.split_bars = [];\r\n\r\n\t\t\t\t\t\t// Skip overlap children\r\n\t\t\t\t\t\tconst skippedTasks:any = {};\r\n\t\t\t\t\t\tfor (let i = 0; i < children.length; i++) {\r\n\t\t\t\t\t\t\tconst child = children[i];\r\n\t\t\t\t\t\t\tfor (let j = 0; j < children.length; j++) {\r\n\t\t\t\t\t\t\t\tconst sibling = children[j];\r\n\t\t\t\t\t\t\t\tif (child.id == sibling.id || skippedTasks[sibling.id]){\r\n\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tconst overlap = +child.original_start_date < +sibling.original_start_date && +sibling.original_start_date <= +child.original_end_date;\r\n\t\t\t\t\t\t\t\t// const overlap = +child.original_start_date < +sibling.original_end_date && +sibling.original_end_date <= +child.original_end_date;\r\n\t\t\t\t\t\t\t\tconst cover = +sibling.original_start_date <= +child.original_start_date && +child.original_end_date <= +sibling.original_end_date;\r\n\t\t\t\t\t\t\t\tif (overlap){\r\n\t\t\t\t\t\t\t\t\tchild.original_end_date = sibling.original_start_date;\r\n\t\t\t\t\t\t\t\t\tchild.end_date = sibling.start_date;\r\n\t\t\t\t\t\t\t\t\tchild.$end = sibling.$start;\r\n\t\t\t\t\t\t\t\t\t// child.original_start_date = sibling.original_end_date;\r\n\t\t\t\t\t\t\t\t\t// child.start_date = sibling.end_date;\r\n\t\t\t\t\t\t\t\t\t// child.$start = sibling.$end;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (cover){\r\n\t\t\t\t\t\t\t\t\t// skip the task as it won't be visible\r\n\t\t\t\t\t\t\t\t\tskippedTasks[child.id] = true;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!skippedTasks[child.id]){\r\n\t\t\t\t\t\t\t\ttask.split_bars.push(child)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttasks[index] = task;\r\n\t\t\t\t\t} else if (!task.$split_subtask){\r\n\t\t\t\t\t\ttasks[index] = gantt.ext.export_api._copyObjectColors(task, config);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\ttasks[index] = gantt.ext.export_api._copyObjectTable(task);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\t// Filter tasks\r\n\t\t\tif (config.raw && !config.data){\r\n\t\t\t\tconst taskStore = gantt.getDatastore(\"task\");\r\n\t\t\t\tconst filteredIds = taskStore.visibleOrder;\r\n\t\t\t\tif (tasks.length !== filteredIds.length){\r\n\t\t\t\t\tconst filteredDataset:any = [];\r\n\t\t\t\t\ttasks.forEach(function(task:any){\r\n\t\t\t\t\t\tif (filteredIds.indexOf(task.id) > -1){\r\n\t\t\t\t\t\t\tfilteredDataset.push(task);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\ttasks = filteredDataset;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (config.cellColors) {\r\n\t\t\t\tconst css = gantt.templates.timeline_cell_class || gantt.templates.task_cell_class;\r\n\t\t\t\tif (css) {\r\n\t\t\t\t\tlet steps = scales[0].trace_x;\r\n\t\t\t\t\tfor (let i = 1; i < scales.length; i++){\r\n\t\t\t\t\t\tif (scales[i].trace_x.length > steps.length){\r\n\t\t\t\t\t\t\tsteps = scales[i].trace_x;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (let i = 0; i < tasks.length; i++) {\r\n\t\t\t\t\t\ttasks[i].styles = [];\r\n\t\t\t\t\t\tconst task = gantt.getTask(tasks[i].id);\r\n\t\t\t\t\t\tfor (let j = 0; j < steps.length; j++) {\r\n\t\t\t\t\t\t\tconst date = steps[j];\r\n\t\t\t\t\t\t\tconst cellCss = css(task, date);\r\n\t\t\t\t\t\t\tif (cellCss){\r\n\t\t\t\t\t\t\t\ttasks[i].styles.push({ index: j, styles: gantt.ext.export_api._getStyles(cellCss) });\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn tasks;\r\n\t\t},\r\n\r\n\t\t_serializeScales(config:any) {\r\n\t\t\tconst scales:any = [];\r\n\t\t\tconst raw = gantt.ext.export_api._getRaw();\r\n\r\n\t\t\tlet min = Infinity;\r\n\t\t\tlet max = 0;\r\n\t\t\tfor (let i = 0; i < raw.length; i++) {\r\n\t\t\t\tmin = Math.min(min, raw[i].col_width);\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i = 0; i < raw.length; i++) {\r\n\t\t\t\tlet start = 0;\r\n\t\t\t\tlet end = 0;\r\n\t\t\t\tconst row:any = [];\r\n\r\n\t\t\t\tscales.push(row);\r\n\t\t\t\tconst step = raw[i];\r\n\t\t\t\tmax = Math.max(max, step.trace_x.length);\r\n\t\t\t\tconst template = step.format || step.template || gantt.date.date_to_str(step.date);\r\n\r\n\t\t\t\tfor (let j = 0; j < step.trace_x.length; j++) {\r\n\t\t\t\t\tconst date = step.trace_x[j];\r\n\t\t\t\t\tend = start + Math.round(step.width[j] / min);\r\n\r\n\t\t\t\t\tconst scaleCell = { text: template(date), start, end, styles: \"\" };\r\n\r\n\t\t\t\t\tif (config.cellColors) {\r\n\t\t\t\t\t\tconst css = step.css || gantt.templates.scaleCell_class;\r\n\t\t\t\t\t\tif (css) {\r\n\t\t\t\t\t\t\tconst scaleCss = css(date);\r\n\t\t\t\t\t\t\tif (scaleCss){\r\n\t\t\t\t\t\t\t\tscaleCell.styles = gantt.ext.export_api._getStyles(scaleCss);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\trow.push(scaleCell);\r\n\t\t\t\t\tstart = end;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn { width: max, height: scales.length, data: scales };\r\n\t\t},\r\n\r\n\t\t_serializeGrid(config:any) {\r\n\t\t\tgantt.exportMode = true;\r\n\r\n\t\t\tconst columns:any = [];\r\n\t\t\tconst cols = gantt.config.columns;\r\n\r\n\t\t\tlet ccount = 0;\r\n\t\t\tfor (let i = 0; i < cols.length; i++) {\r\n\t\t\t\tif (cols[i].name === \"add\" || cols[i].name === \"buttons\") {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (config && config.raw && cols[i].hide){\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcolumns[ccount] = {\r\n\t\t\t\t\tid: ((cols[i].template) ? (\"_\" + i) : cols[i].name),\r\n\t\t\t\t\theader: cols[i].label || gantt.locale.labels[\"column_\" + cols[i].name],\r\n\t\t\t\t\twidth: (cols[i].width ? Math.floor(cols[i].width / 4) : \"\"),\r\n\t\t\t\t\ttree: cols[i].tree || false\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (cols[i].name === \"duration\"){\r\n\t\t\t\t\tcolumns[ccount].type = \"number\";\r\n\t\t\t\t}\r\n\t\t\t\tif (cols[i].name === \"start_date\" || cols[i].name === \"end_date\") {\r\n\t\t\t\t\tcolumns[ccount].type = \"date\";\r\n\t\t\t\t\tif (config && config.rawDates){\r\n\t\t\t\t\t\tcolumns[ccount].id = cols[i].name;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tccount++;\r\n\t\t\t}\r\n\r\n\t\t\tgantt.exportMode = false;\r\n\t\t\treturn columns;\r\n\t\t},\r\n\r\n\t\t_exportSerialize() {\r\n\t\t\tgantt.exportMode = true;\r\n\r\n\t\t\tconst xmlFormat = gantt.templates.xml_format;\r\n\t\t\tconst formatDate = gantt.templates.format_date;\r\n\r\n\t\t\t// use configuration date format for serialization so date could be parsed on the export\r\n\t\t\t// required when custom format date function is defined\r\n\t\t\tgantt.templates.xml_format =\r\n\t\t\t\tgantt.templates.format_date =\r\n\t\t\t\tgantt.date.date_to_str(gantt.config.date_format || gantt.config.xml_date);\r\n\r\n\t\t\tconst data = gantt.serialize();\r\n\r\n\t\t\tgantt.templates.xml_format = xmlFormat;\r\n\t\t\tgantt.templates.format_date = formatDate;\r\n\t\t\tgantt.exportMode = false;\r\n\t\t\treturn data;\r\n\t\t},\r\n\r\n\r\n\t\t_setLevel(data:any) {\r\n\t\t\tfor (let i = 0; i < data.length; i++) {\r\n\t\t\t\t// tslint:disable-next-line triple-equals\r\n\t\t\t\tif (data[i].parent == 0) {\r\n\t\t\t\t\tdata[i]._lvl = 1;\r\n\t\t\t\t}\r\n\t\t\t\tfor (let j = i + 1; j < data.length; j++) {\r\n\t\t\t\t\t// tslint:disable-next-line triple-equals\r\n\t\t\t\t\tif (data[i].id == data[j].parent) {\r\n\t\t\t\t\t\tdata[j]._lvl = data[i]._lvl + 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_clearLevel(data:any) {\r\n\t\t\tfor (let i = 0; i < data.length; i++) {\r\n\t\t\t\tdelete data[i]._lvl;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_clearRecLinks(data:any) {\r\n\t\t\tgantt.ext.export_api._setLevel(data.data);\r\n\t\t\tconst tasks:any = {};\r\n\t\t\tfor (let i = 0; i < data.data.length; i++) {\r\n\t\t\t\ttasks[data.data[i].id] = data.data[i];\r\n\t\t\t}\r\n\r\n\t\t\tconst links:any = {};\r\n\r\n\t\t\tfor (let i = 0; i < data.links.length; i++) {\r\n\t\t\t\tconst link = data.links[i];\r\n\t\t\t\tif (gantt.isTaskExists(link.source) && gantt.isTaskExists(link.target) &&\r\n\t\t\t\t\ttasks[link.source] && tasks[link.target]) {\r\n\t\t\t\t\tlinks[link.id] = link;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (const j in links) {\r\n\t\t\t\tgantt.ext.export_api._makeLinksSameLevel(links[j], tasks);\r\n\t\t\t}\r\n\r\n\t\t\tconst skippedLinks = {};\r\n\t\t\tfor (const j in tasks) {\r\n\t\t\t\tgantt.ext.export_api._clearCircDependencies(tasks[j], links, tasks, {}, skippedLinks, null);\r\n\t\t\t}\r\n\r\n\t\t\tif (Object.keys(links)) {\r\n\t\t\t\tgantt.ext.export_api._clearLinksSameLevel(links, tasks);\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i = 0; i < data.links.length; i++) {\r\n\t\t\t\tif (!links[data.links[i].id]) {\r\n\t\t\t\t\tdata.links.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgantt.ext.export_api._clearLevel(data.data);\r\n\t\t},\r\n\r\n\t\t_clearCircDependencies(task:any, links:any, tasks:any, usedTasks:any, skippedLinks:any, prevLink:any) {\r\n\t\t\tconst sources = task.$_source;\r\n\t\t\tif (!sources) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (usedTasks[task.id]) {\r\n\t\t\t\tgantt.ext.export_api._onCircDependencyFind(prevLink, links, usedTasks, skippedLinks);\r\n\t\t\t}\r\n\r\n\t\t\tusedTasks[task.id] = true;\r\n\r\n\t\t\tconst targets:any = {};\r\n\r\n\t\t\tfor (let i = 0; i < sources.length; i++) {\r\n\t\t\t\tif (skippedLinks[sources[i]]) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tconst curLink = links[sources[i]];\r\n\t\t\t\tconst targetTask = tasks[curLink._target];\r\n\t\t\t\tif (targets[targetTask.id]) { // two link from one task to another\r\n\t\t\t\t\tgantt.ext.export_api._onCircDependencyFind(curLink, links, usedTasks, skippedLinks);\r\n\t\t\t\t}\r\n\t\t\t\ttargets[targetTask.id] = true;\r\n\t\t\t\tgantt.ext.export_api._clearCircDependencies(targetTask, links, tasks, usedTasks, skippedLinks, curLink);\r\n\t\t\t}\r\n\t\t\tusedTasks[task.id] = false;\r\n\t\t},\r\n\r\n\t\t_onCircDependencyFind(link:any, links:any, usedTasks:any, skippedLinks:any) {\r\n\t\t\tif (link) {\r\n\t\t\t\tif (gantt.callEvent(\"onExportCircularDependency\", [link.id, link])) {\r\n\t\t\t\t\tdelete links[link.id];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdelete usedTasks[link._source];\r\n\t\t\t\tdelete usedTasks[link._target];\r\n\t\t\t\tskippedLinks[link.id] = true;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_makeLinksSameLevel(link:any, tasks:any) {\r\n\t\t\tlet task;\r\n\t\t\tlet targetLvl;\r\n\t\t\tconst linkT:any = {\r\n\t\t\t\ttarget: tasks[link.target],\r\n\t\t\t\tsource: tasks[link.source]\r\n\t\t\t};\r\n\t\t\t// tslint:disable-next-line triple-equals\r\n\t\t\tif (linkT.target._lvl != linkT.source._lvl) {\r\n\t\t\t\tif (linkT.target._lvl < linkT.source._lvl) {\r\n\t\t\t\t\ttask = \"source\";\r\n\t\t\t\t\ttargetLvl = linkT.target._lvl;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask = \"target\";\r\n\t\t\t\t\ttargetLvl = linkT.source._lvl;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdo {\r\n\t\t\t\t\tconst parent = tasks[linkT[task].parent];\r\n\t\t\t\t\tif (!parent) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlinkT[task] = parent;\r\n\t\t\t\t} while (linkT[task]._lvl < targetLvl);\r\n\r\n\t\t\t\tlet sourceParent = tasks[linkT.source.parent];\r\n\t\t\t\tlet\ttargetParent = tasks[linkT.target.parent];\r\n\t\t\t\t// tslint:disable-next-line triple-equals\r\n\t\t\t\twhile (sourceParent && targetParent && sourceParent.id != targetParent.id) {\r\n\t\t\t\t\tlinkT.source = sourceParent;\r\n\t\t\t\t\tlinkT.target = targetParent;\r\n\t\t\t\t\tsourceParent = tasks[linkT.source.parent];\r\n\t\t\t\t\ttargetParent = tasks[linkT.target.parent];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlink._target = linkT.target.id;\r\n\t\t\tlink._source = linkT.source.id;\r\n\r\n\t\t\tif (!linkT.target.$_target){\r\n\t\t\t\tlinkT.target.$_target = [];\r\n\t\t\t}\r\n\t\t\tlinkT.target.$_target.push(link.id);\r\n\r\n\t\t\tif (!linkT.source.$_source){\r\n\t\t\t\tlinkT.source.$_source = [];\r\n\t\t\t}\r\n\t\t\tlinkT.source.$_source.push(link.id);\r\n\t\t},\r\n\r\n\t\t_clearLinksSameLevel(links:any, tasks:any) {\r\n\t\t\tfor (const link in links) {\r\n\t\t\t\tdelete links[link]._target;\r\n\t\t\t\tdelete links[link]._source;\r\n\t\t\t}\r\n\r\n\t\t\tfor (const task in tasks) {\r\n\t\t\t\tdelete tasks[task].$_source;\r\n\t\t\t\tdelete tasks[task].$_target;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\t_customProjectProperties(data:any, config:any) {\r\n\t\t\tif (config && config.project) {\r\n\t\t\t\tfor (const i in config.project) {\r\n\t\t\t\t\tif (!gantt.config.$custom_data){\r\n\t\t\t\t\t\tgantt.config.$custom_data = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt.config.$custom_data[i] = typeof config.project[i] === \"function\" ? config.project[i](gantt.config) : config.project[i];\r\n\t\t\t\t}\r\n\t\t\t\tdelete config.project;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_customTaskProperties(data:any, config:any) {\r\n\t\t\tif (config && config.tasks) {\r\n\t\t\t\tdata.data.forEach(function(el:any) {\r\n\t\t\t\t\tfor (const i in config.tasks) {\r\n\t\t\t\t\t\tif (!el.$custom_data){\r\n\t\t\t\t\t\t\tel.$custom_data = {};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tel.$custom_data[i] = typeof config.tasks[i] === \"function\" ? config.tasks[i](el, gantt.config) : config.tasks[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tdelete config.tasks;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_exportConfig(data:any, config:any) {\r\n\t\t\tconst projectName = config.name || \"gantt.xml\";\r\n\t\t\tdelete config.name;\r\n\r\n\t\t\tgantt.config.custom = config;\r\n\r\n\t\t\tconst time = gantt.ext.export_api._getWorktimeSettings();\r\n\r\n\t\t\tconst projectDates = gantt.getSubtaskDates();\r\n\t\t\tif (projectDates.start_date && projectDates.end_date) {\r\n\t\t\t\tconst formatDate = gantt.templates.format_date || gantt.templates.xml_format;\r\n\t\t\t\tgantt.config.start_end = {\r\n\t\t\t\t\tstart_date: formatDate(projectDates.start_date),\r\n\t\t\t\t\tend_date: formatDate(projectDates.end_date)\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tconst autoSchedulingConfig = gantt._getAutoSchedulingConfig();\r\n\r\n\t\t\tconst manual = !!(autoSchedulingConfig.enabled);\r\n\r\n\t\t\tconst res:any = {\r\n\t\t\t\tcallback: config.callback || null,\r\n\t\t\t\tconfig: gantt.config,\r\n\t\t\t\tdata,\r\n\t\t\t\tmanual,\r\n\t\t\t\tname: projectName,\r\n\t\t\t\tworktime: time\r\n\t\t\t};\r\n\t\t\tfor (const i in config) {\r\n\t\t\t\tres[i] = config[i];\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t},\r\n\r\n\r\n\t\t_sendImportAjaxMSP(config:any) {\r\n\t\t\tconst url = config.server || gantt.ext.export_api._apiUrl;\r\n\t\t\tconst store = config.store || 0;\r\n\t\t\tconst formData = config.data;\r\n\t\t\tconst callback = config.callback;\r\n\r\n\t\t\tconst settings = {\r\n\t\t\t\tdurationUnit: config.durationUnit || undefined,\r\n\t\t\t\tprojectProperties: config.projectProperties || undefined,\r\n\t\t\t\ttaskProperties: config.taskProperties || undefined\r\n\t\t\t};\r\n\r\n\t\t\tformData.append(\"type\", config.type || \"msproject-parse\");\r\n\t\t\tformData.append(\"data\", JSON.stringify(settings));\r\n\r\n\t\t\tif (store){\r\n\t\t\t\tformData.append(\"store\", store);\r\n\t\t\t}\r\n\r\n\t\t\tconst xhr = new XMLHttpRequest();\r\n\t\t\txhr.onreadystatechange = function(e) {\r\n\t\t\t\tif (xhr.readyState === 4 && xhr.status === 0) {// network error\r\n\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\tcallback(null);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\txhr.onload = function(){\r\n\t\t\t\tconst fail = xhr.status > 400;\r\n\t\t\t\tlet info = null;\r\n\r\n\t\t\t\tif (!fail) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tinfo = JSON.parse(xhr.responseText);\r\n\t\t\t\t\t} catch (e) { }\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (callback) {\r\n\t\t\t\t\tcallback(info);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\txhr.open(\"POST\", url, true);\r\n\t\t\txhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n\t\t\txhr.send(formData);\r\n\t\t}\r\n\r\n\t};\r\n\r\n\r\n\tgantt.exportToPDF = gantt.ext.export_api.exportToPDF;\r\n\tgantt.exportToPNG = gantt.ext.export_api.exportToPNG;\r\n\tgantt.exportToICal = gantt.ext.export_api.exportToICal;\r\n\tgantt.exportToExcel = gantt.ext.export_api.exportToExcel;\r\n\tgantt.exportToJSON = gantt.ext.export_api.exportToJSON;\r\n\tgantt.importFromExcel = gantt.ext.export_api.importFromExcel;\r\n\tgantt.importFromMSProject = gantt.ext.export_api.importFromMSProject;\r\n\tgantt.exportToMSProject = gantt.ext.export_api.exportToMSProject;\r\n\tgantt.importFromPrimaveraP6 = gantt.ext.export_api.importFromPrimaveraP6;\r\n\tgantt.exportToPrimaveraP6 = gantt.ext.export_api.exportToPrimaveraP6;\r\n\r\n\r\n\treturn gantt.ext.export_api;\r\n}\r\n","\r\nimport ScaleHelper from \"./scales\";\r\n\r\nfunction ScaleIgnoreHelper(gantt){\r\n\tvar helper = new ScaleHelper(gantt);\r\n\r\n\thelper.processIgnores = function (config) {\r\n\t\tvar display_count = config.count;\r\n\t\tconfig.ignore_x = {};\r\n\t\tif (gantt.ignore_time || gantt.config.skip_off_time) {\r\n\t\t\tvar ignore = gantt.ignore_time || function () {\r\n\t\t\t\treturn false;\r\n\t\t\t};\r\n\t\t\tdisplay_count = 0;\r\n\r\n\t\t\tfor (var i = 0; i < config.trace_x.length; i++) {\r\n\r\n\t\t\t\tif (ignore.call(gantt, config.trace_x[i]) || this._ignore_time_config.call(gantt, config.trace_x[i], config)) {\r\n\t\t\t\t\tconfig.ignore_x[config.trace_x[i].valueOf()] = true;\r\n\t\t\t\t\tconfig.ignored_colls = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdisplay_count++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tconfig.display_count = display_count;\r\n\t};\r\n\r\n\treturn helper;\r\n}\r\n\r\nexport default ScaleIgnoreHelper;","export default {\r\n\tKEY_CODES: {\r\n\t\tUP: 38,\r\n\t\tDOWN: 40,\r\n\t\tLEFT: 37,\r\n\t\tRIGHT: 39,\r\n\t\tSPACE: 32,\r\n\t\tENTER: 13,\r\n\t\tDELETE: 46,\r\n\t\tESC: 27,\r\n\t\tTAB: 9\r\n\t}\r\n};","export default class ExtensionsManager{\r\n\tprivate _extensions:{[key:string]: GanttPlugin };\r\n\r\n\tconstructor(config: {[key:string]: GanttPlugin }){\r\n\t\tthis._extensions = {};\r\n\t\tfor(const i in config){\r\n\t\t\tthis._extensions[i] = config[i];\r\n\t\t}\r\n\t}\r\n\r\n\taddExtension = (name: string, ext: GanttPlugin) => {\r\n\t\tthis._extensions[name] = ext;\r\n\t};\r\n\r\n\tgetExtension = (name: string): GanttPlugin => {\r\n\t\treturn this._extensions[name];\r\n\t};\r\n}","import global from \"./global\";\r\n\r\n/* eslint-disable no-restricted-globals */\r\nvar isWindowAwailable = typeof window !== \"undefined\";\r\n\r\n/* eslint-enable no-restricted-globals */\r\n\r\nconst nav = typeof navigator !== \"undefined\" ? navigator : {userAgent:\"\"};\r\n\r\nexport default {\r\n\tisIE: isWindowAwailable && (nav.userAgent.indexOf(\"MSIE\") >= 0 || nav.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisOpera: isWindowAwailable && (nav.userAgent.indexOf(\"Opera\") >= 0 || nav.userAgent.indexOf(\"OPR\") >= 0),\r\n\tisChrome: isWindowAwailable && (nav.userAgent.indexOf(\"Chrome\") >= 0),\r\n\tisSafari: isWindowAwailable && (nav.userAgent.indexOf(\"Safari\") >= 0 || nav.userAgent.indexOf(\"Konqueror\") >= 0),\r\n\tisFF: isWindowAwailable && (nav.userAgent.indexOf(\"Firefox\") >= 0),\r\n\tisIPad: isWindowAwailable && (nav.userAgent.search(/iPad/gi) >= 0),\r\n\tisEdge: isWindowAwailable && (nav.userAgent.indexOf(\"Edge\")!=-1),\r\n\tisNode: (!isWindowAwailable || typeof navigator == \"undefined\" || (typeof PRODUCTION !== \"undefined\" && PRODUCTION === \"test\")),\r\n\tisSalesforce: isWindowAwailable && (!!global[\"Sfdc\"] || !!global[\"$A\"] || global[\"Aura\"])\r\n};\r\n","export default function serialize(data: object | string) {\r\n\tif (typeof data === \"string\" || typeof data === \"number\") {\r\n\t\treturn data;\r\n\t}\r\n\r\n\tlet result = \"\";\r\n\r\n\tfor (const key in data) {\r\n\t\tlet serialized = \"\";\r\n\t\tif (data.hasOwnProperty(key)) {\r\n\t\t\tif (typeof data[key] === \"string\") {\r\n\t\t\t\tserialized = encodeURIComponent(data[key]);\r\n\t\t\t} else if (typeof data[key] === \"number\") {\r\n\t\t\t\tserialized = String(data[key]);\r\n\t\t\t} else {\r\n\t\t\t\tserialized = encodeURIComponent(JSON.stringify(data[key]));\r\n\t\t\t}\r\n\t\t\tserialized = key + \"=\" + serialized;\r\n\r\n\t\t\tif (result.length) {\r\n\t\t\t\tserialized = \"&\" + serialized;\r\n\t\t\t}\r\n\t\t\tresult += serialized;\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n","import env from \"../../utils/env\";\r\nimport global from \"../../utils/global\";\r\nimport serialize from \"./serialize\";\r\n\r\nfunction createConfig(method, args) {\r\n\tvar result = {\r\n\t\tmethod: method\r\n\t};\r\n\r\n\tif (args.length === 0) {\r\n\t\tthrow new Error(\"Arguments list of query is wrong.\");\r\n\t}\r\n\tif (args.length === 1) {\r\n\t\tif (typeof args[0] === \"string\") {\r\n\t\t\tresult.url = args[0];\r\n\t\t\tresult.async = true;\r\n\t\t} else {\r\n\t\t\tresult.url = args[0].url;\r\n\t\t\tresult.async = (args[0].async || true);\r\n\t\t\tresult.callback = args[0].callback;\r\n\t\t\tresult.headers = args[0].headers;\r\n\t\t}\r\n\t\tif (method === \"POST\" || \"PUT\") {\r\n\t\t\tif (args[0].data) {\r\n\t\t\t\tif (typeof args[0].data !== \"string\") {\r\n\t\t\t\t\tresult.data = serialize(args[0].data);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.data = args[0].data;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tresult.data = \"\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tresult.url = args[0];\r\n\tswitch(method) {\r\n\t\tcase \"GET\":\r\n\t\tcase \"DELETE\":\r\n\t\t\tresult.callback = args[1];\r\n\t\t\tresult.headers = args[2];\r\n\t\tbreak;\r\n\t\tcase \"POST\":\r\n\t\tcase \"PUT\":\r\n\t\t\tif (args[1]) {\r\n\t\t\t\tif (typeof args[1] !== \"string\") {\r\n\t\t\t\t\tresult.data = serialize(args[1]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.data = args[1];\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tresult.data = \"\";\r\n\t\t\t}\r\n\t\t\tresult.callback = args[2];\r\n\t\t\tresult.headers = args[3];\r\n\t\tbreak;\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nexport default function(gantt) {\r\n\treturn {\r\n\r\n\t\t// if false - dhxr param will added to prevent caching on client side (default),\r\n\t\t// if true - do not add extra params\r\n\t\tcache: true,\r\n\r\n\t\t// default method for load/loadStruct, post/get allowed\r\n\t\t// get - since 4.1.1, this should fix 412 error for macos safari\r\n\t\tmethod: \"get\",\r\n\r\n\t\tparse: function(data) {\r\n\t\t\tif (typeof data !== \"string\") return data;\r\n\r\n\t\t\tvar obj;\r\n\t\t\tdata = data.replace(/^[\\s]+/,\"\");\r\n\t\t\tif (typeof DOMParser !== \"undefined\" && !env.isIE) { // ff,ie9\r\n\t\t\t\tobj = (new DOMParser()).parseFromString(data, \"text/xml\");\r\n\t\t\t} else if (typeof global.ActiveXObject !== \"undefined\") {\r\n\t\t\t\tobj = new global.ActiveXObject(\"Microsoft.XMLDOM\");\r\n\t\t\t\tobj.async = \"false\";\r\n\t\t\t\tobj.loadXML(data);\r\n\t\t\t}\r\n\t\t\treturn obj;\r\n\t\t},\r\n\t\txmltop: function(tagname, xhr, obj) {\r\n\t\t\tif (typeof xhr.status == \"undefined\" || xhr.status < 400) {\r\n\t\t\t\tvar xml = (!xhr.responseXML) ? this.parse(xhr.responseText || xhr) : (xhr.responseXML || xhr);\r\n\t\t\t\tif (xml && xml.documentElement !== null && !xml.getElementsByTagName(\"parsererror\").length) {\r\n\t\t\t\t\treturn xml.getElementsByTagName(tagname)[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (obj !== -1) gantt.callEvent(\"onLoadXMLError\",[\"Incorrect XML\", arguments[1], obj]);\r\n\t\t\treturn document.createElement(\"DIV\");\r\n\t\t},\r\n\t\txpath: function(xpathExp, docObj) {\r\n\t\t\tif (!docObj.nodeName) docObj = docObj.responseXML || docObj;\r\n\t\t\tif (env.isIE) {\r\n\t\t\t\treturn docObj.selectNodes(xpathExp)||[];\r\n\t\t\t} else {\r\n\t\t\t\tvar rows = [];\r\n\t\t\t\tvar first;\r\n\t\t\t\tvar col = (docObj.ownerDocument||docObj).evaluate(xpathExp, docObj, null, XPathResult.ANY_TYPE, null);\r\n\r\n\t\t\t\twhile (true){\r\n\t\t\t\t\tfirst = col.iterateNext();\r\n\t\t\t\t\tif(first){\r\n\t\t\t\t\t\trows.push(first);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn rows;\r\n\t\t\t}\r\n\t\t},\r\n\t\tquery: function(config) {\r\n\t\t\treturn this._call(\r\n\t\t\t\t(config.method || \"GET\"),\r\n\t\t\t\tconfig.url,\r\n\t\t\t\tconfig.data || \"\",\r\n\t\t\t\t(config.async || true),\r\n\t\t\t\tconfig.callback,\r\n\t\t\t\tconfig.headers\r\n\t\t\t);\r\n\t\t},\r\n\t\tget: function(url, onLoad, headers) {\r\n\t\t\tvar config = createConfig(\"GET\", arguments);\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\tgetSync: function(url, headers) {\r\n\t\t\tvar config = createConfig(\"GET\", arguments);\r\n\t\t\tconfig.async = false;\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\tput: function(url, postData, onLoad, headers) {\r\n\t\t\tvar config = createConfig(\"PUT\", arguments);\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\tdel: function(url, onLoad, headers) {\r\n\t\t\t/**\r\n\t\t\t * https://tools.ietf.org/html/rfc7231#section-4.3.5\r\n\t\t\t * A payload within a DELETE request message has no defined semantics;\r\n\t\t\t * sending a payload body on a DELETE request might cause some existing\r\n\t\t\t * implementations to reject the request.\r\n\t\t\t */\r\n\t\t\tvar config = createConfig(\"DELETE\", arguments);\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\tpost: function(url, postData, onLoad, headers) {\r\n\t\t\tif (arguments.length == 1) {\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t} else if (arguments.length == 2 && typeof(postData) == \"function\") {\r\n\t\t\t\tonLoad = postData;\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t}\r\n\t\t\tvar config = createConfig(\"POST\", arguments);\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\tpostSync: function(url, postData, headers) {\r\n\t\t\tpostData = (postData === null ? \"\" : String(postData));\r\n\r\n\t\t\tvar config = createConfig(\"POST\", arguments);\r\n\t\t\tconfig.async = false;\r\n\t\t\treturn this.query(config);\r\n\t\t},\r\n\t\t_call: function(method, url, postData, async, onLoad, headers) {\r\n\t\t\treturn new gantt.Promise(function(resolve, reject) {\r\n\t\t\t\tvar t = (typeof XMLHttpRequest !== undefined ? new XMLHttpRequest() : new global.ActiveXObject(\"Microsoft.XMLHTTP\"));\r\n\t\t\t\tvar isQt = (navigator.userAgent.match(/AppleWebKit/) !== null && navigator.userAgent.match(/Qt/) !== null && navigator.userAgent.match(/Safari/) !== null);\r\n\r\n\t\t\t\tif (!!async) {\r\n\t\t\t\t\tt.onreadystatechange = function() {\r\n\t\t\t\t\t\tif ((t.readyState == 4) || (isQt && t.readyState == 3)) { // what for long response and status 404?\r\n\t\t\t\t\t\t\tconst errorStatus = t.status < 200 || t.status > 299;\r\n\t\t\t\t\t\t\tif (errorStatus || t.responseText === \"\")\r\n\t\t\t\t\t\t\t\tif (!gantt.callEvent(\"onAjaxError\", [t])) return;\r\n\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\tif (typeof(onLoad) == \"function\") {\r\n\t\t\t\t\t\t\t\t\tonLoad.apply(global, [{xmlDoc:t, filePath:url}]); // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tresolve(t);\r\n\t\t\t\t\t\t\t\tif (typeof(onLoad) == \"function\") {\r\n\t\t\t\t\t\t\t\t\tonLoad = null;\r\n\t\t\t\t\t\t\t\t\tt = null;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar noCache = !this || !this.cache;\r\n\t\t\t\tif (method == \"GET\" && noCache) {\r\n\t\t\t\t\turl += (url.indexOf(\"?\")>=0?\"&\":\"?\")+\"dhxr\"+new Date().getTime()+\"=1\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tt.open(method, url, async);\r\n\r\n\t\t\t\tif (headers){\r\n\t\t\t\t\tfor (var key in headers)\r\n\t\t\t\t\t\tt.setRequestHeader(key, headers[key]);\r\n\t\t\t\t} else if (method.toUpperCase() == \"POST\" || method == \"PUT\" || method == \"DELETE\") {\r\n\t\t\t\t\tt.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\t\t\t\t} else if (method == \"GET\") {\r\n\t\t\t\t\tpostData = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tt.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n\r\n\t\t\t\tt.send(postData);\r\n\r\n\t\t\t\tif (!async) return {xmlDoc:t, filePath:url}; // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\t\t\t});\r\n\t\t},\r\n\t\turlSeparator: function(str){\r\n\t\t\tif (str.indexOf(\"?\") != -1)\r\n\t\t\t\treturn \"&\";\r\n\t\t\telse\r\n\t\t\t\treturn \"?\";\r\n\t\t}\r\n\t};\r\n};\r\n","const dateToStr = (format: string, utc: boolean, gantt) => {\r\n\tformat = format.replace(/%[a-zA-Z]/g, (a) => {\r\n\t\tswitch (a) {\r\n\t\t\tcase \"%d\":\r\n\t\t\t\treturn `\"+to_fixed(date.get${utc?\"UTC\":\"\"}Date())+\"`;\r\n\t\t\tcase \"%m\":\r\n\t\t\t\treturn `\"+to_fixed((date.get${utc?\"UTC\":\"\"}Month()+1))+\"`;\r\n\t\t\tcase \"%j\":\r\n\t\t\t\treturn `\"+date.get${utc?\"UTC\":\"\"}Date()+\"`;\r\n\t\t\tcase \"%n\":\r\n\t\t\t\treturn `\"+(date.get${utc?\"UTC\":\"\"}Month()+1)+\"`;\r\n\t\t\tcase \"%y\":\r\n\t\t\t\treturn `\"+to_fixed(date.get${utc?\"UTC\":\"\"}FullYear()%100)+\"`;\r\n\t\t\tcase \"%Y\":\r\n\t\t\t\treturn `\"+date.get${utc?\"UTC\":\"\"}FullYear()+\"`;\r\n\t\t\tcase \"%D\":\r\n\t\t\t\treturn `\"+locale.date.day_short[date.get${utc?\"UTC\":\"\"}Day()]+\"`;\r\n\t\t\tcase \"%l\":\r\n\t\t\t\treturn `\"+locale.date.day_full[date.get${utc?\"UTC\":\"\"}Day()]+\"`;\r\n\t\t\tcase \"%M\":\r\n\t\t\t\treturn `\"+locale.date.month_short[date.get${utc?\"UTC\":\"\"}Month()]+\"`;\r\n\t\t\tcase \"%F\":\r\n\t\t\t\treturn `\"+locale.date.month_full[date.get${utc?\"UTC\":\"\"}Month()]+\"`;\r\n\t\t\tcase \"%h\":\r\n\t\t\t\treturn `\"+to_fixed((date.get${utc?\"UTC\":\"\"}Hours()+11)%12+1)+\"`;\r\n\t\t\tcase \"%g\":\r\n\t\t\t\treturn `\"+((date.get${utc?\"UTC\":\"\"}Hours()+11)%12+1)+\"`;\r\n\t\t\tcase \"%G\":\r\n\t\t\t\treturn `\"+date.get${utc?\"UTC\":\"\"}Hours()+\"`;\r\n\t\t\tcase \"%H\":\r\n\t\t\t\treturn `\"+to_fixed(date.get${utc?\"UTC\":\"\"}Hours())+\"`;\r\n\t\t\tcase \"%i\":\r\n\t\t\t\treturn `\"+to_fixed(date.get${utc?\"UTC\":\"\"}Minutes())+\"`;\r\n\t\t\tcase \"%a\":\r\n\t\t\t\treturn `\"+(date.get${utc?\"UTC\":\"\"}Hours()>11?\"pm\":\"am\")+\"`;\r\n\t\t\tcase \"%A\":\r\n\t\t\t\treturn `\"+(date.get${utc?\"UTC\":\"\"}Hours()>11?\"PM\":\"AM\")+\"`;\r\n\t\t\tcase \"%s\":\r\n\t\t\t\treturn `\"+to_fixed(date.get${utc?\"UTC\":\"\"}Seconds())+\"`;\r\n\t\t\tcase \"%W\":\r\n\t\t\t\treturn `\"+to_fixed(getISOWeek(date))+\"`;\r\n\t\t\tcase \"%w\":\r\n\t\t\t\treturn `\"+to_fixed(getWeek(date))+\"`;\r\n\t\t\tdefault:\r\n\t\t\t\treturn a;\r\n\t\t}\r\n\t});\r\n\r\n\t// tslint:disable-next-line: function-constructor\r\n\tconst dateToStrFn = new Function(\"date\", \"to_fixed\", \"locale\", \"getISOWeek\", \"getWeek\", `return \"${format}\";`);\r\n\r\n\treturn (date: Date) => {\r\n\t\treturn dateToStrFn(date, gantt.date.to_fixed, gantt.locale, gantt.date.getISOWeek, gantt.date.getWeek);\r\n\t};\r\n};\r\n\r\n\r\nconst strToDate = (format: string, utc: boolean, gantt:any) => {\r\n\tlet splt = \"var temp=date.match(/[a-zA-Z]+|[0-9]+/g);\";\r\n\tconst mask = format.match(/%[a-zA-Z]/g);\r\n\tfor (let i = 0; i < mask.length; i++) {\r\n\t\tswitch (mask[i]) {\r\n\t\t\tcase \"%j\":\r\n\t\t\tcase \"%d\":\r\n\t\t\t\tsplt += `set[2]=temp[${i}]||1;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%n\":\r\n\t\t\tcase \"%m\":\r\n\t\t\t\tsplt += `set[1]=(temp[${i}]||1)-1;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%y\":\r\n\t\t\t\tsplt += `set[0]=temp[${i}]*1+(temp[${i}]>50?1900:2000);`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%g\":\r\n\t\t\tcase \"%G\":\r\n\t\t\tcase \"%h\":\r\n\t\t\tcase \"%H\":\r\n\t\t\t\tsplt += `set[3]=temp[${i}]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%i\":\r\n\t\t\t\tsplt += `set[4]=temp[${i}]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%Y\":\r\n\t\t\t\tsplt += `set[0]=temp[${i}]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%a\":\r\n\t\t\tcase \"%A\":\r\n\t\t\t\tsplt += `set[3]=set[3]%12+((temp[${i}]||'').toLowerCase()=='am'?0:12);`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%s\":\r\n\t\t\t\tsplt += `set[5]=temp[${i}]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%M\":\r\n\t\t\t\tsplt += `set[1]=locale.date.month_short_hash[temp[${i}]]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%F\":\r\n\t\t\t\tsplt += `set[1]=locale.date.month_full_hash[temp[${i}]]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tlet code = \"set[0],set[1],set[2],set[3],set[4],set[5]\";\r\n\tif (utc) { code = ` Date.UTC(${code})`; }\r\n\t// tslint:disable-next-line: function-constructor\r\n\tconst strToDateFn = new Function(\"date\", \"locale\", `var set=[0,0,1,0,0,0]; ${splt} return new Date(${code});`);\r\n\r\n\treturn (dateString) => {\r\n\t\treturn strToDateFn(dateString, gantt.locale);\r\n\t};\r\n};\r\n\r\nconst fastVersion = {\r\n\tdate_to_str: dateToStr,\r\n\tstr_to_date: strToDate\r\n};\r\n\r\nexport default fastVersion;","const dateToStr = (format: string, utc: boolean, gantt) => {\r\n\treturn (date) => {\r\n\t\treturn format.replace(/%[a-zA-Z]/g, (a) => {\r\n\t\t\tswitch (a) {\r\n\t\t\t\tcase \"%d\": return utc ? gantt.date.to_fixed(date.getUTCDate()) : gantt.date.to_fixed(date.getDate());\r\n\t\t\t\tcase \"%m\": return utc ? gantt.date.to_fixed((date.getUTCMonth() + 1)) : gantt.date.to_fixed((date.getMonth() + 1));\r\n\t\t\t\tcase \"%j\": return utc ? date.getUTCDate() : date.getDate();\r\n\t\t\t\tcase \"%n\": return utc ? (date.getUTCMonth() + 1) : (date.getMonth() + 1);\r\n\t\t\t\tcase \"%y\": return utc ? gantt.date.to_fixed(date.getUTCFullYear() % 100) : gantt.date.to_fixed(date.getFullYear() % 100);\r\n\t\t\t\tcase \"%Y\": return utc ? date.getUTCFullYear() : date.getFullYear();\r\n\t\t\t\tcase \"%D\": return utc ? gantt.locale.date.day_short[date.getUTCDay()] : gantt.locale.date.day_short[date.getDay()];\r\n\t\t\t\tcase \"%l\": return utc ? gantt.locale.date.day_full[date.getUTCDay()] : gantt.locale.date.day_full[date.getDay()];\r\n\t\t\t\tcase \"%M\": return utc ? gantt.locale.date.month_short[date.getUTCMonth()] : gantt.locale.date.month_short[date.getMonth()];\r\n\t\t\t\tcase \"%F\": return utc ? gantt.locale.date.month_full[date.getUTCMonth()] : gantt.locale.date.month_full[date.getMonth()];\r\n\t\t\t\tcase \"%h\": return utc ? gantt.date.to_fixed((date.getUTCHours() + 11) % 12 + 1) : gantt.date.to_fixed((date.getHours() + 11) % 12 + 1);\r\n\t\t\t\tcase \"%g\": return utc ? ((date.getUTCHours() + 11) % 12 + 1) : ((date.getHours() + 11) % 12 + 1);\r\n\t\t\t\tcase \"%G\": return utc ? date.getUTCHours() : date.getHours();\r\n\t\t\t\tcase \"%H\": return utc ? gantt.date.to_fixed(date.getUTCHours()) : gantt.date.to_fixed(date.getHours());\r\n\t\t\t\tcase \"%i\": return utc ? gantt.date.to_fixed(date.getUTCMinutes()) : gantt.date.to_fixed(date.getMinutes());\r\n\t\t\t\tcase \"%a\": return utc ? (date.getUTCHours() > 11 ? \"pm\" : \"am\") : (date.getHours() > 11 ? \"pm\" : \"am\");\r\n\t\t\t\tcase \"%A\": return utc ? (date.getUTCHours() > 11 ? \"PM\" : \"AM\") : (date.getHours() > 11 ? \"PM\" : \"AM\");\r\n\t\t\t\tcase \"%s\": return utc ? gantt.date.to_fixed(date.getUTCSeconds()) : gantt.date.to_fixed(date.getSeconds());\r\n\t\t\t\tcase \"%W\": return utc ? gantt.date.to_fixed(gantt.date.getUTCISOWeek(date)) : gantt.date.to_fixed(gantt.date.getISOWeek(date));\r\n\t\t\t\tcase \"%w\": return gantt.date.to_fixed(gantt.date.getWeek(date));\r\n\t\t\t\tdefault: return a;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n};\r\nconst strToDate = (format: string, utc: boolean, gantt:any) => {\r\n\treturn (date: string) => {\r\n\t\tconst set: Array<string|number> = [0, 0, 1, 0, 0, 0];\r\n\t\tconst temp = date.match(/[a-zA-Z]+|[0-9]+/g);\r\n\t\tconst mask = format.match(/%[a-zA-Z]/g);\r\n\r\n\t\tfor (let i = 0; i < mask.length; i++) {\r\n\t\t\tswitch (mask[i]) {\r\n\t\t\t\tcase \"%j\":\r\n\t\t\t\tcase \"%d\":\r\n\t\t\t\t\tset[2] = temp[i] as unknown as number || 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%n\":\r\n\t\t\t\tcase \"%m\":\r\n\t\t\t\t\tset[1] = (temp[i] as unknown as number || 1) - 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%y\":\r\n\t\t\t\t\tset[0] = temp[i] as unknown as number * 1 + ((temp[i] as unknown as number) > 50 ? 1900 : 2000);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%g\":\r\n\t\t\t\tcase \"%G\":\r\n\t\t\t\tcase \"%h\":\r\n\t\t\t\tcase \"%H\":\r\n\t\t\t\t\tset[3] = temp[i] as unknown as number || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%i\":\r\n\t\t\t\t\tset[4] = temp[i] as unknown as number || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\tset[0] = temp[i] as unknown as number || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%a\":\r\n\t\t\t\tcase \"%A\":\r\n\t\t\t\t\tset[3] = set[3] as number % 12 + ((temp[i] || \"\").toLowerCase() === \"am\" ? 0 : 12);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%s\":\r\n\t\t\t\t\tset[5] = temp[i] || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%M\":\r\n\t\t\t\t\tset[1] = gantt.locale.date.month_short_hash[temp[i]] || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%F\":\r\n\t\t\t\t\tset[1] = gantt.locale.date.month_full_hash[temp[i]] || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (utc) {\r\n\t\t\treturn new Date(Date.UTC(\r\n\t\t\t\tset[0] as number,\r\n\t\t\t\tset[1] as number,\r\n\t\t\t\tset[2] as number,\r\n\t\t\t\tset[3] as number,\r\n\t\t\t\tset[4] as number,\r\n\t\t\t\tset[5] as number\r\n\t\t\t));\r\n\t\t}\r\n\t\treturn new Date(\r\n\t\t\tset[0] as number,\r\n\t\t\tset[1] as number,\r\n\t\t\tset[2] as number,\r\n\t\t\tset[3] as number,\r\n\t\t\tset[4] as number,\r\n\t\t\tset[5] as number\r\n\t\t);\r\n\t};\r\n\r\n};\r\n\r\n\r\nconst cspVersion = {\r\n\tdate_to_str: dateToStr,\r\n\tstr_to_date: strToDate\r\n};\r\n\r\nexport default cspVersion;","/*\r\n %d - the day as a number with a leading zero ( 01 to 31 );\r\n %j - the day as a number without a leading zero ( 1 to 31 );\r\n %D - the day as an abbreviation ( Sun to Sat );\r\n %l - the day as a full name ( Sunday to Saturday );\r\n %W - the ISO-8601 week number of the year. Weeks start on Monday; 1)\r\n %m - the month as a number without a leading zero ( 1 to 12 );\r\n %n - the month as a number with a leading zero ( 01 to 12);\r\n %M - the month as an abbreviation ( Jan to Dec );\r\n %F - the month as a full name ( January to December );\r\n %y - the year as a two-digit number ( 00 to 99 );\r\n %Y - the year as a four-digit number ( 19009999 );\r\n %h - the hour based on the 12-hour clock ( 00 to 11 );\r\n %H - the hour based on the 24-hour clock ( 00 to 23 );\r\n %i - the minute as a number with a leading zero ( 00 to 59 );\r\n %s - the second as a number without a leading zero ( 00 to 59 ); 2)\r\n %a - displays am (for times from midnight until noon) and pm (for times from noon until midnight);\r\n %A - displays AM (for times from midnight until noon) and PM (for times from noon until midnight).\r\n*/\r\n\r\nimport fastVersion from \"./date_parsers/fast_version\";\r\nimport cspCompliantVersion from \"./date_parsers/csp_compliant_version\";\r\n\r\nexport default function(gantt) {\r\n\tvar canUseCsp = null;\r\n\tfunction cspAutoCheck() {\r\n\t\ttry {\r\n\t\t\tnew Function(\"canUseCsp = false;\");\r\n\t\t} catch(e) {\r\n\t\t\tcanUseCsp = true;\r\n\t\t}\r\n\t}\r\n\tfunction useCsp() {\r\n\t\tvar result = false;\r\n\t\tif (gantt.config.csp === \"auto\") {\r\n\t\t\tif(canUseCsp === null) {\r\n\t\t\t\tcspAutoCheck();\r\n\t\t\t}\r\n\t\t\tresult = canUseCsp;\r\n\t\t} else {\r\n\t\t\tresult = gantt.config.csp;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tvar dateHelper = {\r\n\t\tinit: function () {\r\n\t\t\tvar locale = gantt.locale;\r\n\r\n\t\t\tvar s = locale.date.month_short;\r\n\t\t\tvar t = locale.date.month_short_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\r\n\t\t\tvar s = locale.date.month_full;\r\n\t\t\tvar t = locale.date.month_full_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\t\t},\r\n\t\tdate_part: function (date) {\r\n\t\t\tvar old = new Date(date);\r\n\t\t\tdate.setHours(0);\r\n\t\t\tthis.hour_start(date);\r\n\t\t\tif (date.getHours() && //shift to yesterday on dst\r\n\t\t\t\t(date.getDate() < old.getDate() || date.getMonth() < old.getMonth() || date.getFullYear() < old.getFullYear()))\r\n\t\t\t\tdate.setTime(date.getTime() + 60 * 60 * 1000 * (24 - date.getHours()));\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\ttime_part: function (date) {\r\n\t\t\treturn (date.valueOf() / 1000 - date.getTimezoneOffset() * 60) % 86400;\r\n\t\t},\r\n\t\tweek_start: function (date) {\r\n\t\t\tvar shift = date.getDay();\r\n\t\t\tif (gantt.config.start_on_monday) {\r\n\t\t\t\tif (shift === 0) shift = 6;\r\n\t\t\t\telse shift--;\r\n\t\t\t}\r\n\t\t\treturn this.date_part(this.add(date, -1 * shift, \"day\"));\r\n\t\t},\r\n\t\tmonth_start: function (date) {\r\n\t\t\tdate.setDate(1);\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\tquarter_start: function (date) {\r\n\t\t\tthis.month_start(date);\r\n\t\t\tvar m = date.getMonth(),\r\n\t\t\t\tres_month;\r\n\r\n\t\t\tif (m >= 9) {\r\n\t\t\t\tres_month = 9;\r\n\t\t\t} else if (m >= 6) {\r\n\t\t\t\tres_month = 6;\r\n\t\t\t} else if (m >= 3) {\r\n\t\t\t\tres_month = 3;\r\n\t\t\t} else {\r\n\t\t\t\tres_month = 0;\r\n\t\t\t}\r\n\r\n\t\t\tdate.setMonth(res_month);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tyear_start: function (date) {\r\n\t\t\tdate.setMonth(0);\r\n\t\t\treturn this.month_start(date);\r\n\t\t},\r\n\t\tday_start: function (date) {\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\thour_start: function (date) {\r\n\t\t\tif (date.getMinutes())\r\n\t\t\t\tdate.setMinutes(0);\r\n\t\t\tthis.minute_start(date);\r\n\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tminute_start: function (date) {\r\n\t\t\tif (date.getSeconds())\r\n\t\t\t\tdate.setSeconds(0);\r\n\t\t\tif (date.getMilliseconds())\r\n\t\t\t\tdate.setMilliseconds(0);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\t_add_days: function (modifiedDate, inc, originalDate) {\r\n\r\n\t\t\tmodifiedDate.setDate(modifiedDate.getDate() + inc);\r\n\t\t\tvar incCondition = inc >= 0;\r\n\t\t\tvar getHoursCondition = !originalDate.getHours() && modifiedDate.getHours(); //shift to yesterday on dst\r\n\t\t\tvar getDateCondition = (modifiedDate.getDate() <= originalDate.getDate() || modifiedDate.getMonth() < originalDate.getMonth() || modifiedDate.getFullYear() < originalDate.getFullYear());\r\n\t\t\tif (incCondition && getHoursCondition && getDateCondition){\r\n\t\t\t\tmodifiedDate.setTime(modifiedDate.getTime() + 60 * 60 * 1000 * (24 - modifiedDate.getHours()));\r\n\t\t\t}\r\n\t\t\tvar worktimeCalculation = inc > 1;\r\n\t\t\tif (worktimeCalculation && getHoursCondition){\r\n\t\t\t\t// try to shift the modified Date to 00:00\r\n\t\t\t\tmodifiedDate.setHours(0);\r\n\t\t\t}\r\n\t\t\treturn modifiedDate;\r\n\t\t},\r\n\r\n\t\tadd: function (date, inc, mode) {\r\n\t\t\t/*jsl:ignore*/\r\n\t\t\tvar ndate = new Date(date.valueOf());\r\n\t\t\tswitch (mode) {\r\n\t\t\t\tcase \"day\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc, date);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"week\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc * 7, date);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"month\":\r\n\t\t\t\t\tndate.setMonth(ndate.getMonth() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"year\":\r\n\t\t\t\t\tndate.setYear(ndate.getFullYear() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"hour\":\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t\tadding hours/minutes via setHour(getHour() + inc) gives weird result when\r\n\t\t\t\t\t\tadding one hour to the time before switch to a Daylight Saving time\r\n\r\n\t\t\t\t\t\texample: //Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\t\t\t\t\t\tnew Date(2014, 02, 30, 1).setHours(2)\r\n\t\t\t\t\t\t>>Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\r\n\t\t\t\t\t\tsetTime seems working as expected\r\n\t\t\t\t\t */\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 60 * 1000);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"minute\":\r\n\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 1000);\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn this[\"add_\" + mode](date, inc, mode);\r\n\t\t\t}\r\n\t\t\treturn ndate;\r\n\t\t\t/*jsl:end*/\r\n\t\t},\r\n\t\tadd_quarter: function (date, inc) {\r\n\t\t\treturn this.add(date, inc * 3, \"month\");\r\n\t\t},\r\n\r\n\t\tto_fixed: function (num) {\r\n\t\t\tif (num < 10) return \"0\" + num;\r\n\t\t\treturn num;\r\n\t\t},\r\n\t\tcopy: function (date) {\r\n\t\t\treturn new Date(date.valueOf());\r\n\t\t},\r\n\t\tdate_to_str: function (format, utc) {\r\n\t\t\tvar result = fastVersion;\r\n\t\t\tif (useCsp()) {\r\n\t\t\t\tresult = cspCompliantVersion;\r\n\t\t\t}\r\n\t\t\treturn result.date_to_str(format, utc, gantt);\r\n\t\t},\r\n\t\tstr_to_date: function (format, utc) {\r\n\t\t\tvar result = fastVersion;\r\n\t\t\tif (useCsp()) {\r\n\t\t\t\tresult = cspCompliantVersion;\r\n\t\t\t}\r\n\t\t\treturn result.str_to_date(format, utc, gantt);\r\n\t\t},\r\n\t\tgetISOWeek: function (ndate) {\r\n\t\t\treturn gantt.date._getWeekNumber(ndate, true);\r\n\t\t},\r\n\t\t_getWeekNumber: function(ndate, isoWeek){\r\n\t\t\tif (!ndate) return false;\r\n\t\t\tvar nday = ndate.getDay();\r\n\t\t\tif(isoWeek){\r\n\t\t\t\tif (nday === 0) {\r\n\t\t\t\t\tnday = 7;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar first_thursday = new Date(ndate.valueOf());\r\n\t\t\tfirst_thursday.setDate(ndate.getDate() + (4 - nday));\r\n\t\t\tvar year_number = first_thursday.getFullYear(); // year of the first Thursday\r\n\t\t\tvar ordinal_date = Math.round((first_thursday.getTime() - new Date(year_number, 0, 1).getTime()) / 86400000); //ordinal date of the first Thursday - 1 (so not really ordinal date)\r\n\t\t\tvar week_number = 1 + Math.floor(ordinal_date / 7);\r\n\t\t\treturn week_number;\r\n\t\t},\r\n\r\n\t\tgetWeek: function(ndate){\r\n\t\t\treturn gantt.date._getWeekNumber(ndate, gantt.config.start_on_monday);\r\n\t\t},\r\n\t\tgetUTCISOWeek: function (ndate) {\r\n\t\t\treturn gantt.date.getISOWeek(ndate);\r\n\t\t},\r\n\t\tconvert_to_utc: function (date) {\r\n\t\t\treturn new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\r\n\t\t},\r\n\t\tparseDate: function (date, format) {\r\n\t\t\t// raw date may be of type string, number (timestamp) or something else\r\n\t\t\t// do not check for instanceof Date explicitly, since we may swap native date with different date implementation at some point\r\n\t\t\tif (date && !date.getFullYear) {\r\n\t\t\t\tif (typeof(format) !== \"function\") {\r\n\t\t\t\t\tif (typeof(format) === \"string\") {\r\n\t\t\t\t\t\tif (format === \"parse_date\" || format === \"xml_date\") {\r\n\t\t\t\t\t\t\tformat = gantt.defined(gantt.templates.xml_date) ? gantt.templates.xml_date : gantt.templates.parse_date;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tformat = gantt.defined(gantt.templates[format]) ? gantt.templates[format] : gantt.date.str_to_date(format);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tformat = gantt.defined(gantt.templates.xml_date) ? gantt.templates.xml_date : gantt.templates.parse_date;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (date) {\r\n\t\t\t\t\tdate = format(date);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdate = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn date;\r\n\t\t}\r\n\t};\r\n\treturn dateHelper;\r\n};","class t{constructor(t){const{url:e,token:s}=t;this._url=e,this._token=s,this._mode=1,this._seed=1,this._queue=[],this.data={},this.api={},this._events={}}headers(){return{Accept:\"application/json\",\"Content-Type\":\"application/json\",\"Remote-Token\":this._token}}fetch(t,e){const s={credentials:\"include\",headers:this.headers()};return e&&(s.method=\"POST\",s.body=e),fetch(t,s).then(t=>t.json())}load(t){return t&&(this._url=t),this.fetch(this._url).then(t=>this.parse(t))}parse(t){const{key:e,websocket:s}=t;e&&(this._token=t.key);for(const e in t.data)this.data[e]=t.data[e];for(const e in t.api){const s=this.api[e]={},i=t.api[e];for(const t in i)s[t]=this._wrapper(e+\".\"+t)}return s&&this.connect(),this}connect(){const t=this._socket;t&&(this._socket=null,t.onclose=function(){},t.close()),this._mode=2,this._socket=function(t,e,s,i){let n=e;\"/\"===n[0]&&(n=document.location.protocol+\"//\"+document.location.host+e);n=n.replace(/^http(s|):/,\"ws$1:\");const o=-1!=n.indexOf(\"?\")?\"&\":\"?\";n=`${n}${o}token=${s}&ws=1`;const r=new WebSocket(n);return r.onclose=()=>setTimeout(()=>t.connect(),2e3),r.onmessage=e=>{const s=JSON.parse(e.data);switch(s.action){case\"result\":t.result(s.body,[]);break;case\"event\":t.fire(s.body.name,s.body.value);break;case\"start\":i();break;default:t.onError(s.data)}},r}(this,this._url,this._token,()=>(this._mode=3,this._send(),this._resubscribe(),this))}_wrapper(t){return function(){const e=[].slice.call(arguments);let s=null;const i=new Promise((i,n)=>{s={data:{id:this._uid(),name:t,args:e},status:1,resolve:i,reject:n},this._queue.push(s)});return this.onCall(s,i),3===this._mode?this._send(s):setTimeout(()=>this._send(),1),i}.bind(this)}_uid(){return(this._seed++).toString()}_send(t){if(2==this._mode)return void setTimeout(()=>this._send(),100);const e=t?[t]:this._queue.filter(t=>1===t.status);if(!e.length)return;const s=e.map(t=>(t.status=2,t.data));3!==this._mode?this.fetch(this._url,JSON.stringify(s)).catch(t=>this.onError(t)).then(t=>this.result(t,s)):this._socket.send(JSON.stringify({action:\"call\",body:s}))}result(t,e){const s={};if(t)for(let e=0;e<t.length;e++)s[t[e].id]=t[e];else for(let t=0;t<e.length;t++)s[e[t].id]={id:e[t].id,error:\"Network Error\",data:null};for(let t=this._queue.length-1;t>=0;t--){const e=this._queue[t],i=s[e.data.id];i&&(this.onResponse(e,i),i.error?e.reject(i.error):e.resolve(i.data),this._queue.splice(t,1))}}on(t,e){const s=this._uid();let i=this._events[t];const n=!!i;return n||(i=this._events[t]=[]),i.push({id:s,handler:e}),n||3!=this._mode||this._socket.send(JSON.stringify({action:\"subscribe\",name:t})),{name:t,id:s}}_resubscribe(){if(3==this._mode)for(const t in this._events)this._socket.send(JSON.stringify({action:\"subscribe\",name:t}))}detach(t){if(!t){if(3==this._mode)for(const t in this._events)this._socket.send(JSON.stringify({action:\"unsubscribe\",key:t}));return void(this._events={})}const{id:e,name:s}=t,i=this._events[s];if(i){const t=i.filter(t=>t.id!=e);t.length?this._events[s]=t:(delete this._events[s],3==this._mode&&this._socket.send(JSON.stringify({action:\"unsubscribe\",name:s})))}}fire(t,e){const s=this._events[t];if(s)for(let t=0;t<s.length;t++)s[t].handler(e)}onError(t){return null}onCall(t,e){}onResponse(t,e){}}export{t as Client};\n//# sourceMappingURL=remote.es6.js.map\n","import * as remote_client from \"remote-client\";\r\nexport const remoteEvents = function(url, token) {\r\n    const remote = new remote_client.Client({\r\n      url,\r\n      token\r\n    });\r\n\r\n    // temporary patch, as we do not want credentials\r\n    remote.fetch = function (url, body) {\r\n      const req = {\r\n        headers: this.headers()\r\n      };\r\n      if (body) {\r\n        req.method = \"POST\";\r\n        req.body = body;\r\n      }\r\n\r\n      return fetch(url, req).then((res) => res.json());\r\n    };\r\n\r\n    this._ready = remote.load().then((back) => (this._remote = back));\r\n\r\n    function ready() {\r\n      return this._ready;\r\n    }\r\n  \r\n    function on(name, handler) {\r\n      this.ready().then((back) => {\r\n        if (typeof name === \"string\") back.on(name, handler);\r\n        else {\r\n          for (const key in name) {\r\n            back.on(key, name[key]);\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    this.ready = ready;\r\n    this.on = on;\r\n  };\r\n\r\n","function checkTimeout(host, updPerSecond){\r\n\tif (!updPerSecond)\r\n\t\treturn true;\r\n\t\r\n\tif (host._on_timeout)\r\n\t\treturn false;\r\n\t\r\n\tvar timeout = Math.ceil(1000/updPerSecond);\r\n\tif (timeout < 2) return true;\r\n\r\n\tsetTimeout(function(){\r\n\t\tdelete host._on_timeout;\r\n\t}, timeout);\r\n\r\n\thost._on_timeout = true;\r\n\treturn true;\r\n}\r\n\r\nexport default checkTimeout;","import * as utils from \"../../utils/utils\";\r\n\r\nvar StateService = (function(){\r\n\tvar stateProviders = {};\r\n\r\n\tfunction getState(name){\r\n\t\tvar provider = stateProviders[name];\r\n\t\tif(provider){\r\n\t\t\treturn stateProviders[name].method();\r\n\t\t}else{\r\n\t\t\tvar res = {};\r\n\t\t\tfor(var i in stateProviders){\r\n\t\t\t\tif(!stateProviders[i].internal)\r\n\t\t\t\t\tutils.mixin(res, stateProviders[i].method(), true);\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction registerProvider(name, provider, internal){\r\n\t\tstateProviders[name] = { method: provider, internal: internal};\r\n\t}\r\n\r\n\tfunction unregisterProvider(name){\r\n\t\tdelete stateProviders[name];\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetState: getState,\r\n\t\tregisterProvider: registerProvider,\r\n\t\tunregisterProvider: unregisterProvider\r\n\t};\r\n});\r\n\r\nexport default StateService;\r\n\r\n","export default Promise;","import * as utils from \"../../utils/utils\";\r\nimport {replaceValidZeroId} from \"../../utils/helpers\";\r\n\r\nvar createTasksDatastoreFacade = function(){\r\n\treturn {\r\n\tgetTask: function (id) {\r\n\t\tid = replaceValidZeroId(id, this.config.root_id);\r\n\t\tthis.assert(id, \"Invalid argument for gantt.getTask\");\r\n\t\tvar task = this.$data.tasksStore.getItem(id);\r\n\t\tthis.assert(task, \"Task not found id=\" + id);\r\n\t\treturn task;\r\n\t},\r\n\tgetTaskByTime: function (from, to) {\r\n\t\tvar p = this.$data.tasksStore.getItems();\r\n\r\n\t\tvar res = [];\r\n\r\n\t\tif (!(from || to)) {\r\n\t\t\tres = p;\r\n\t\t} else {\r\n\t\t\tfrom = +from || -Infinity;\r\n\t\t\tto = +to || Infinity;\r\n\t\t\tfor (var t = 0; t < p.length; t++){\r\n\t\t\t\tvar task = p[t];\r\n\t\t\t\tif (+task.start_date < to && +task.end_date > from)\r\n\t\t\t\t\tres.push(task);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\tisTaskExists: function (id) {\r\n\t\tif(!this.$data || !this.$data.tasksStore){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn this.$data.tasksStore.exists(id);\r\n\t},\r\n\tupdateTask: function (id, item) {\r\n\t\tif (!utils.defined(item)) item = this.getTask(id);\r\n\t\tthis.$data.tasksStore.updateItem(id, item);\r\n\t\tif(this.isTaskExists(id))\r\n\t\t\tthis.refreshTask(id);\r\n\t},\r\n\taddTask: function (item, parent, index) {\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\t\t//GS-761: assert unique ID\r\n\t\tif (this.isTaskExists(item.id)){\r\n\t\t\tvar task = this.getTask(item.id);\r\n\t\t\tif (task.$index != item.$index) {\r\n\t\t\t\t// Someone may try to mistakenly add a task with the same ID, and most likely\r\n\t\t\t\t// use the string format for the dates. Gantt shouldn't break in this scenario\r\n\t\t\t\tif (item.start_date && typeof item.start_date === \"string\"){\r\n\t\t\t\t\titem.start_date = this.date.parseDate(item.start_date, \"parse_date\");\r\n\t\t\t\t}\r\n\t\t\t\tif (item.end_date && typeof item.end_date === \"string\"){\r\n\t\t\t\t\titem.end_date = this.date.parseDate(item.end_date, \"parse_date\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this.$data.tasksStore.updateItem(item.id, item);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (!utils.defined(parent)) parent = this.getParent(item) || 0;\r\n\t\tif (!this.isTaskExists(parent)) parent = this.config.root_id;\r\n\t\tthis.setParent(item, parent);\r\n\r\n\t\t// GS-1583. Save the $open state to the Undo Stack\r\n\t\tif (this.getState().lightbox && this.isTaskExists(parent)) {\r\n\t\t\tvar parentObj = this.getTask(parent);\r\n\t\t\tthis.callEvent(\"onAfterParentExpand\", [parent, parentObj]);\r\n\t\t}\r\n\t\treturn this.$data.tasksStore.addItem(item, index, parent);\r\n\t},\r\n\tdeleteTask: function (id) {\r\n\t\tid = replaceValidZeroId(id, this.config.root_id);\r\n\t\treturn this.$data.tasksStore.removeItem(id);\r\n\t},\r\n\tgetTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.count();\r\n\t},\r\n\tgetVisibleTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.countVisible();\r\n\t},\r\n\tgetTaskIndex: function (id) {\r\n\t\treturn this.$data.tasksStore.getBranchIndex(id);\r\n\t},\r\n\tgetGlobalTaskIndex: function (id) {\r\n\t\tid = replaceValidZeroId(id, this.config.root_id);\r\n\t\tthis.assert(id, \"Invalid argument\");\r\n\t\treturn this.$data.tasksStore.getIndexById(id);\r\n\t},\r\n\teachTask: function (code, parent, master) {\r\n\t\treturn this.$data.tasksStore.eachItem(utils.bind(code, master||this), parent);\r\n\t},\r\n\teachParent: function (callback, startTask, master) {\r\n\t\treturn this.$data.tasksStore.eachParent(utils.bind(callback, master || this), startTask);\r\n\t},\r\n\tchangeTaskId: function (oldid, newid) {\r\n\t\tthis.$data.tasksStore.changeId(oldid, newid);\r\n\t\tvar task = this.$data.tasksStore.getItem(newid);\r\n\r\n\t\tvar links = [];\r\n\r\n\t\tif (task.$source) {\r\n\t\t\tlinks = links.concat(task.$source);\r\n\t\t}\r\n\t\tif (task.$target) {\r\n\t\t\tlinks = links.concat(task.$target);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar link = this.getLink(links[i]);\r\n\t\t\tif (link.source == oldid) {\r\n\t\t\t\tlink.source = newid;\r\n\t\t\t}\r\n\t\t\tif (link.target == oldid) {\r\n\t\t\t\tlink.target = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcalculateTaskLevel: function (item) {\r\n\t\treturn this.$data.tasksStore.calculateItemLevel(item);\r\n\t},\r\n\tgetNext: function (id) {\r\n\t\treturn this.$data.tasksStore.getNext(id);\r\n\t},\r\n\tgetPrev: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrev(id);\r\n\t},\r\n\tgetParent: function (id) {\r\n\t\treturn this.$data.tasksStore.getParent(id);\r\n\t},\r\n\tsetParent: function (task, new_pid, silent) {\r\n\t\treturn this.$data.tasksStore.setParent(task, new_pid, silent);\r\n\t},\r\n\tgetSiblings: function (id) {\r\n\t\treturn this.$data.tasksStore.getSiblings(id).slice();\r\n\t},\r\n\tgetNextSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getNextSibling(id);\r\n\t},\r\n\tgetPrevSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrevSibling(id);\r\n\t},\r\n\tgetTaskByIndex: function(index){\r\n\t\tvar id = this.$data.tasksStore.getIdByIndex(index);\r\n\t\tif(this.isTaskExists(id)){\r\n\t\t\treturn this.getTask(id);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tgetChildren: function (id) {\r\n\t\tif(!this.hasChild(id)){\r\n\t\t\treturn [];\r\n\t\t}else{\r\n\t\t\treturn this.$data.tasksStore.getChildren(id).slice();\r\n\t\t}\r\n\t},\r\n\thasChild: function (id) {\r\n\t\treturn this.$data.tasksStore.hasChild(id);\r\n\t},\r\n\topen: function (id) {\r\n\t\tthis.$data.tasksStore.open(id);\r\n\t},\r\n\tclose: function (id) {\r\n\t\tthis.$data.tasksStore.close(id);\r\n\t},\r\n\tmoveTask: function (sid, tindex, parent) {\r\n\t\tparent = replaceValidZeroId(parent, this.config.root_id);\r\n\t\treturn this.$data.tasksStore.move.apply(this.$data.tasksStore, arguments);\r\n\t},\r\n\tsort: function(field, desc, parent, silent) {\r\n\t\tvar render = !silent;//4th argument to cancel redraw after sorting\r\n\r\n\t\tthis.$data.tasksStore.sort(field, desc, parent);\r\n\t\tthis.callEvent(\"onAfterSort\", [field, desc, parent]);\r\n\r\n\t\tif (render) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t}\r\n};\r\n};\r\n\r\nexport default createTasksDatastoreFacade;\r\n\r\n\r\n","import * as utils from \"../../utils/utils\";\r\n\r\nvar $powerArray  = {\r\n\t$create: function(array){\r\n\t\treturn utils.mixin(array || [], this);\r\n\t},\r\n\t//remove element at specified position\r\n\t$removeAt:function(pos,len){\r\n\t\tif (pos>=0) this.splice(pos,(len||1));\r\n\t},\r\n\t//find element in collection and remove it\r\n\t$remove:function(value){\r\n\t\tthis.$removeAt(this.$find(value));\r\n\t},\r\n\t//add element to collection at specific position\r\n\t$insertAt:function(data,pos){\r\n\t\tif (!pos && pos!==0) \t//add to the end by default\r\n\t\t\tthis.push(data);\r\n\t\telse {\r\n\t\t\tvar b = this.splice(pos,(this.length-pos));\r\n\t\t\tthis[pos] = data;\r\n\t\t\tthis.push.apply(this,b); //reconstruct array without loosing this pointer\r\n\t\t}\r\n\t},\r\n\t//return index of element, -1 if it doesn't exists\r\n\t$find:function(data){\r\n\t\tfor (var i=0; i<this.length; i++)\r\n\t\t\tif (data==this[i]) return i;\r\n\t\treturn -1;\r\n\t},\r\n\t//execute some method for each element of array\r\n\t$each:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tfunctor.call((master||this),this[i]);\r\n\t},\r\n\t//create new array from source, by using results of functor\r\n\t$map:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tthis[i]=functor.call((master||this),this[i]);\r\n\t\treturn this;\r\n\t},\r\n\t$filter:function(functor, master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tif (!functor.call((master||this),this[i])){\r\n\t\t\t\tthis.splice(i,1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\treturn this;\r\n\t}\r\n};\r\n\r\nexport default $powerArray;","/**\r\n * Check the over task or draggble task is placeholder task\r\n */\r\n\r\nexport default function isPlaceholderTask(id, gantt, store, config) {\r\n\t// return false;\r\n\tvar config = gantt ? gantt.config : config;\r\n\tif (config && config.placeholder_task) {\r\n\t\tif (store.exists(id)){\r\n\t\t\tvar item = store.getItem(id);\r\n\t\t\treturn item.type === config.types.placeholder;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n};","import powerArray from \"./power_array\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport eventable from \"../../utils/eventable\";\r\nimport isPlaceholderTask from \"../../utils/placeholder_task\";\r\n\r\nvar DataStore = function(config){\r\n\tthis.pull = {};\r\n\tthis.$initItem = config.initItem;\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._skip_refresh = false;\r\n\tthis._filterRule = null;\r\n\tthis._searchVisibleOrder = {};\r\n\tthis._indexRangeCache = {};\r\n\tthis._getItemsCache = null;\r\n\tthis.$config = config;\r\n\teventable(this);\r\n\r\n\tthis._attachDataChange(function(){\r\n\t\tthis._indexRangeCache = {};\r\n\t\tthis._getItemsCache = null;\r\n\t\treturn true;\r\n\t});\r\n\treturn this;\r\n};\r\nDataStore.prototype = {\r\n\r\n\t_attachDataChange: function(callback){\r\n\t\tthis.attachEvent(\"onClearAll\", callback);\r\n\t\tthis.attachEvent(\"onBeforeParse\", callback);\r\n\t\tthis.attachEvent(\"onBeforeUpdate\", callback);\r\n\t\tthis.attachEvent(\"onBeforeDelete\", callback);\r\n\t\tthis.attachEvent(\"onBeforeAdd\", callback);\r\n\t\tthis.attachEvent(\"onParse\", callback);\r\n\t\tthis.attachEvent(\"onBeforeFilter\", callback);\r\n\t},\r\n\t_parseInner: function(data){\r\n\t\tvar item = null,\r\n\t\t\tloaded = [];\r\n\t\tfor(var i = 0, len = data.length; i< len; i++){\r\n\t\t\titem = data[i];\r\n\t\t\tif(this.$initItem){\r\n\t\t\t\tif(this.$config.copyOnParse()){\r\n\t\t\t\t\titem = utils.copy(item);\r\n\t\t\t\t}\r\n\t\t\t\titem = this.$initItem(item);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(this.callEvent(\"onItemLoading\", [item])){\r\n\t\t\t\tif (!this.pull.hasOwnProperty(item.id)) {\r\n\t\t\t\t\tthis.fullOrder.push(item.id);\r\n\t\t\t\t}\r\n\t\t\t\tloaded.push(item);\r\n\t\t\t\tthis.pull[item.id] = item;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn loaded;\r\n\t},\r\n\tparse: function(data){\r\n\t\tif (!this.isSilent()) {\r\n\t\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\t}\r\n\t\tvar loaded = this._parseInner(data);\r\n\t\tif (!this.isSilent()) {\r\n\t\t\tthis.refresh();\r\n\t\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t\t}\r\n\t},\r\n\tgetItem: function(id){\r\n\t\treturn this.pull[id];\r\n\t},\r\n\r\n\t_updateOrder: function(code){\r\n\t\tcode.call(this.visibleOrder);\r\n\t\tcode.call(this.fullOrder);\r\n\t},\r\n\tupdateItem: function(id, item){\r\n\t\tif (!utils.defined(item)) item = this.getItem(id);\r\n\r\n\t\tif (!this.isSilent()) {\r\n\t\t\tif (this.callEvent(\"onBeforeUpdate\", [item.id, item]) === false) return false;\r\n\t\t}\r\n\t\t// This is how it worked before updating the properties:\r\n\t\t// this.pull[id]=item;\r\n\t\tutils.mixin(this.pull[id],item, true);\r\n\t\tif (!this.isSilent()) {\r\n\t\t\tthis.callEvent(\"onAfterUpdate\", [item.id, item]);\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [item.id, item, \"update\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_removeItemInner: function(id){\r\n\t\t//clear from collections\r\n\t\t//this.visibleOrder.$remove(id);\r\n\t\tthis._updateOrder(function(){ this.$remove(id);});\r\n\t\tdelete this.pull[id];\r\n\t},\r\n\r\n\tremoveItem: function(id){\r\n\t\t//utils.assert(this.exists(id), \"Not existing ID in remove command\"+id);\r\n\r\n\t\tvar obj = this.getItem(id);\t//save for later event\r\n\t\tif (!this.isSilent()) {\r\n\t\t\tif (this.callEvent(\"onBeforeDelete\", [obj.id, obj]) === false) return false;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterDeleteConfirmed\", [obj.id, obj]);\r\n\t\tthis._removeItemInner(id);\r\n\t\t\r\n\t\tif (this.isSilent()) {\r\n\t\t\tthis.callEvent(\"onAfterSilentDelete\", [obj.id, obj]);\r\n\t\t}\r\n\r\n\t\tif (!this.isSilent()) {\r\n\t\t\tthis.filter();\r\n\t\t\tthis.callEvent(\"onAfterDelete\", [obj.id, obj]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [obj.id, obj, \"delete\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_addItemInner: function(item, index){\r\n\t\t//in case of treetable order is sent as 3rd parameter\r\n\t\t//var order = index;\r\n\r\n\t\tif(this.exists(item.id)){\r\n\t\t\tthis.silent(function(){this.updateItem(item.id, item);});\r\n\t\t}else{\r\n\t\t\tvar order = this.visibleOrder;\r\n\r\n\t\t\t//by default item is added to the end of the list\r\n\t\t\tvar data_size = order.length;\r\n\r\n\t\t\tif (!utils.defined(index) || index < 0)\r\n\t\t\t\tindex = data_size;\r\n\t\t\t//check to prevent too big indexes\r\n\t\t\tif (index > data_size){\r\n\t\t\t\t//dhx.log(\"Warning\",\"DataStore:add\",\"Index of out of bounds\");\r\n\t\t\t\tindex = Math.min(order.length,index);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t//gantt.assert(!this.exists(id), \"Not unique ID\");\r\n\r\n\t\tthis.pull[item.id]=item;\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tif(this.$find(item.id) === -1)\r\n\t\t\t\tthis.$insertAt(item.id,index);\r\n\t\t});\r\n\t\tthis.filter();\r\n\t\t//order.$insertAt(item.id,index);\r\n\t},\r\n\r\n\r\n\tisVisible: function(id){\r\n\t\treturn this.visibleOrder.$find(id) > -1;\r\n\t},\r\n\tgetVisibleItems: function(){\r\n\t\treturn this.getIndexRange();\r\n\t},\r\n\r\n\taddItem: function(item, index){\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\t\tif(this.$initItem){\r\n\t\t\titem = this.$initItem(item);\r\n\t\t}\r\n\r\n\t\tif (!this.isSilent()){\r\n\t\t\tif (this.callEvent(\"onBeforeAdd\", [item.id, item]) === false) return false;\r\n\t\t}\r\n\r\n\r\n\t\tthis._addItemInner(item, index);\r\n\r\n\t\tif (!this.isSilent()){\r\n\t\t\tthis.callEvent(\"onAfterAdd\",[item.id, item]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[item.id,item,\"add\"]);\r\n\t\t} else {\r\n\t\t\tif(this.sync_link){\r\n\t\t\t\tthis.sync_link(item);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn item.id;\r\n\t},\r\n\r\n\t_changeIdInner: function(oldId, newId){\r\n\t\tif(this.pull[oldId])\r\n\t\t\tthis.pull[newId] = this.pull[oldId];\r\n\r\n\t\tvar visibleOrder = this._searchVisibleOrder[oldId];\r\n\t\tthis.pull[newId].id = newId;\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis[this.$find(oldId)] = newId;\r\n\t\t});\r\n\t\tthis._searchVisibleOrder[newId] = visibleOrder;\r\n\t\tdelete this._searchVisibleOrder[oldId];\r\n\r\n\t\t//this.visibleOrder[this.visibleOrder.$find(oldId)]=newId;\r\n\t\tdelete this.pull[oldId];\r\n\t},\r\n\tchangeId: function(oldId, newId){\r\n\t\tthis._changeIdInner(oldId, newId);\r\n\r\n\t\tthis.callEvent(\"onIdChange\", [oldId, newId]);\r\n\r\n\t},\r\n\texists: function(id){\r\n\t\treturn !!(this.pull[id]);\r\n\t},\r\n\r\n\t_moveInner: function(sindex, tindex){\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis.$removeAt(sindex);\r\n\t\t\tthis.$insertAt(id,Math.min(this.length, tindex));\r\n\t\t});\r\n\t\t//this.visibleOrder.$removeAt(sindex);\t//remove at old position\r\n\t\t//if (sindex<tindex) tindex--;\t//correct shift, caused by element removing\r\n\t\t//this.visibleOrder.$insertAt(id,Math.min(this.visibleOrder.length, tindex));\t//insert at new position\r\n\t},\r\n\r\n\tmove: function(sindex, tindex){\r\n\t\t//gantt.assert(sindex>=0 && tindex>=0, \"DataStore::move\",\"Incorrect indexes\");\r\n\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\t\tvar obj = this.getItem(id);\r\n\t\tthis._moveInner(sindex, tindex);\r\n\r\n\t\tif (!this.isSilent()) {\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [obj.id, obj, \"move\"]);\r\n\t\t}\r\n\t},\r\n\tclearAll: function(){\r\n\t\tif(this.$destroyed){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// GS-956 We need to unselect the resource as its ID is cached\r\n\t\tthis.silent(function(){\r\n\t\t\tthis.unselect();\r\n\t\t});\r\n\t\tthis.pull = {};\r\n\t\tthis.visibleOrder = powerArray.$create();\r\n\t\tthis.fullOrder = powerArray.$create();\r\n\t\tif (this.isSilent()) return;\r\n\t\tthis.callEvent(\"onClearAll\",[]);\r\n\t\tthis.refresh();\r\n\t},\r\n\r\n\tsilent:function(code, master){\r\n\t\tvar alreadySilent = false;\r\n\t\tif(this.isSilent()) {\r\n\t\t\talreadySilent = true;\r\n\t\t}\r\n\t\tthis._skip_refresh = true;\r\n\t\tcode.call(master||this);\r\n\t\t\r\n\t\tif (!alreadySilent) {\r\n\t\t\tthis._skip_refresh = false;\r\n\t\t}\r\n\t},\r\n\tisSilent: function(){\r\n\t\treturn !!this._skip_refresh;\r\n\t},\r\n\r\n\tarraysEqual: function (arr1, arr2) {\r\n\t\tif(arr1.length !== arr2.length)\r\n\t\t\treturn false;\r\n\t\tfor(var i = 0; i < arr1.length; i++) {\r\n\t\t\tif(arr1[i] !== arr2[i])\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\trefresh: function(id, quick){\r\n\t\tif(this.$destroyed){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.isSilent()) return;\r\n\r\n\t\tvar item;\r\n\t\tif(id){\r\n\t\t\titem = this.getItem(id);\r\n\t\t}\r\n\r\n\t\tvar args;\r\n\t\tif (id){\r\n\t\t\targs = [id, item, \"paint\"];\r\n\t\t}else{\r\n\t\t\targs = [null,null,null];\r\n\t\t}\r\n\r\n\t\tif(this.callEvent(\"onBeforeStoreUpdate\", args) === false){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar skipFilter = this._quick_refresh && !this._mark_recompute;\r\n\t\tthis._mark_recompute = false;\r\n\t\tif(id){\r\n\t\t\t// if item changes visible order (e.g. expand-collapse branch) - do a complete repaint\r\n\t\t\tif(!quick && !skipFilter){\r\n\t\t\t\tvar oldOrder = this.visibleOrder;\r\n\t\t\t\tthis.filter();\r\n\t\t\t\tif(!this.arraysEqual(oldOrder, this.visibleOrder)){\r\n\t\t\t\t\tid = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}else if(!skipFilter){\r\n\t\t\tthis.filter();\r\n\t\t}\r\n\r\n\t\tif (id){\r\n\t\t\targs = [id, item, \"paint\"];\r\n\t\t}else{\r\n\t\t\targs = [null,null,null];\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onStoreUpdated\",args);\r\n\t},\r\n\r\n\tcount: function(){\r\n\t\treturn this.fullOrder.length;\r\n\t},\r\n\tcountVisible: function(){\r\n\t\treturn this.visibleOrder.length;\r\n\t},\r\n\r\n\tsort: function(sort){},\r\n\r\n\tserialize: function(){},\r\n\r\n\teachItem: function(code){\r\n\t\tfor (var i=0; i<this.fullOrder.length; i++) {\r\n\t\t\tvar item = this.getItem(this.fullOrder[i]);\r\n\t\t\tcode.call(this, item);\r\n\t\t}\r\n\t},\r\n\r\n\tfind: function(filter) {\r\n\t\tvar result = [];\r\n\t\tthis.eachItem(function(item) {\r\n\t\t\tif(filter(item)){\r\n\t\t\t\tresult.push(item);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn result;\r\n\t},\r\n\r\n\tfilter: function(rule){\r\n\t\tif (!this.isSilent()) {\r\n\t\t\tthis.callEvent(\"onBeforeFilter\", []);\r\n\t\t}\r\n\t\tthis.callEvent(\"onPreFilter\", []);\r\n\t\tvar filteredOrder = powerArray.$create();\r\n\t\tvar placeholderIds = [];\r\n\t\tthis.eachItem(function(item){\r\n\t\t\tif(this.callEvent(\"onFilterItem\", [item.id, item])){\r\n\t\t\t\tif(isPlaceholderTask(item.id, null, this, this._ganttConfig)){\r\n\t\t\t\t\tplaceholderIds.push(item.id);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilteredOrder.push(item.id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tfor(var i = 0; i < placeholderIds.length; i++){\r\n\t\t\tfilteredOrder.push(placeholderIds[i]);\r\n\t\t}\r\n\r\n\t\tthis.visibleOrder = filteredOrder;\r\n\t\tthis._searchVisibleOrder = {};\r\n\t\tfor(var i = 0; i < this.visibleOrder.length; i++){\r\n\t\t\tthis._searchVisibleOrder[this.visibleOrder[i]] = i;\r\n\t\t}\r\n\t\tif (!this.isSilent()) {\r\n\t\t\tthis.callEvent(\"onFilter\", []);\r\n\t\t}\r\n\t},\r\n\r\n\tgetIndexRange: function(from, to){\r\n\t\tvar max = Math.min((to||Infinity),this.countVisible()-1);\r\n\t\tvar min = from||0;\r\n\r\n\t\tvar cacheKey = min + '-' + max;\r\n\t\tif(this._indexRangeCache[cacheKey]){\r\n\t\t\treturn this._indexRangeCache[cacheKey].slice();\r\n\t\t}\r\n\r\n\t\tvar ret= [];\r\n\t\tfor (var i=min; i <= max; i++)\r\n\t\t\tret.push(this.getItem(this.visibleOrder[i]));\r\n\r\n\t\tthis._indexRangeCache[cacheKey] = ret.slice();\r\n\t\treturn ret;\r\n\t},\r\n\tgetItems: function(){\r\n\t\tif(this._getItemsCache){\r\n\t\t\treturn this._getItemsCache.slice();\r\n\t\t}\r\n\r\n\t\tvar res = [];\r\n\t\tfor(var i in this.pull){\r\n\t\t\tres.push(this.pull[i]);\r\n\t\t}\r\n\t\tthis._getItemsCache = res.slice();\r\n\r\n\t\treturn res;\r\n\t},\r\n\r\n\tgetIdByIndex: function(index){\r\n\t\treturn this.visibleOrder[index];\r\n\t},\r\n\tgetIndexById: function(id){\r\n\t\tvar res = this._searchVisibleOrder[id];\r\n\t\tif(res === undefined){\r\n\t\t\tres = -1;\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\t_getNullIfUndefined: function(value){\r\n\t\tif(value === undefined){\r\n\t\t\treturn null;\r\n\t\t}else{\r\n\t\t\treturn value;\r\n\t\t}\r\n\t},\r\n\tgetFirst: function(){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[0]);\r\n\t},\r\n\tgetLast: function(){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.visibleOrder.length-1]);\r\n\t},\r\n\tgetNext: function(id){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.getIndexById(id) + 1]);\r\n\t},\r\n\tgetPrev: function(id){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.getIndexById(id) - 1]);\r\n\t},\r\n\tdestructor: function(){\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t\tthis.$destroyed = true;\r\n\t\tthis.pull = null;\r\n\t\tthis.$initItem = null;\r\n\t\tthis.visibleOrder = null;\r\n\t\tthis.fullOrder = null;\r\n\t\tthis._skip_refresh = null;\r\n\t\tthis._filterRule = null;\r\n\t\tthis._searchVisibleOrder = null;\r\n\t\tthis._indexRangeCache = {};\r\n\t}\r\n};\r\n\r\nexport default DataStore;","export default class SplitTasksHelper {\r\n\r\n\t_datastore: any = null;\r\n\r\n\tconstructor (datastore: any) {\r\n\t\tthis._datastore = datastore;\r\n\t}\r\n\tisSplitItem = (item: any) => {\r\n\t\treturn (item.render == \"split\" && this._datastore.hasChild(item.id));\r\n\t};\r\n\tisSubrowSplitItem = (item: any) => {\r\n\t\treturn (item.split_placement == \"subrow\");\r\n\t};\r\n\tisDefaultSplitItem = (item: any) => {\r\n\t\treturn (item.split_placement == \"auto\" || item.split_placement === undefined);\r\n\t};\r\n\tisInlineSplitItem = (item: any) => {\r\n\t\treturn (item.split_placement == \"inline\");\r\n\t};\r\n};","import powerArray from \"./power_array\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport * as helpers from \"../../utils/helpers\";\r\nimport DataStore from \"./datastore\";\r\nimport isPlaceholderTask from \"../../utils/placeholder_task\";\r\nimport {replaceValidZeroId} from \"../../utils/helpers\";\r\nimport SplitTasksHelper from \"../common/split_task_helpers\";\r\n\r\nvar TreeDataStore = function(config){\r\n\tDataStore.apply(this, [config]);\r\n\tthis._branches = {};\r\n\tthis._splitTaskHelper = new SplitTasksHelper(this);\r\n\r\n\tthis.pull = {};\r\n\t//GS-761 Update existing item instead of adding it to the new position\r\n\tthis.$initItem = function (item){\r\n\t\tvar loadedItem = item;\r\n\t\tif(config.initItem){\r\n\t\t\tloadedItem = config.initItem(loadedItem);\r\n\t\t}\r\n\t\tvar existingItem = this.getItem(item.id);\r\n\t\tif(existingItem && !isEqualIds(existingItem.parent,loadedItem.parent)){\r\n\t\t\tthis.move(loadedItem.id, loadedItem.$index || -1, loadedItem.parent || this._ganttConfig.root_id);\r\n\t\t}\r\n\t\treturn loadedItem;\r\n\t};\r\n\tthis.$parentProperty = config.parentProperty || \"parent\";\r\n\r\n\tif(typeof config.rootId !== \"function\"){\r\n\t\tthis.$getRootId = (function(val){\r\n\t\t\treturn function(){return val;};\r\n\t\t})(config.rootId || 0);\r\n\t}else{\r\n\t\tthis.$getRootId = config.rootId;\r\n\t}\r\n\r\n\t// TODO: replace with live reference to gantt config\r\n\tthis.$openInitially = config.openInitially;\r\n\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._searchVisibleOrder = {};\r\n\tthis._indexRangeCache = {};\r\n\tthis._eachItemMainRangeCache = null;\r\n\tthis._getItemsCache = null;\r\n\tthis._skip_refresh = false;\r\n\r\n\tthis._ganttConfig = null;\r\n\tif(config.getConfig){\r\n\t\tthis._ganttConfig = config.getConfig();\r\n\t}\r\n\r\n\tvar splitParents = {};\r\n\tvar splitItems = {};\r\n\r\n\tvar taskOpenState = {};\r\n\tvar taskVisibility = {};\r\n\tvar haveSplitItems = false;\r\n\r\n\tthis._attachDataChange(function(){\r\n\t\tthis._indexRangeCache = {};\r\n\t\tthis._eachItemMainRangeCache = null;\r\n\t\tthis._getItemsCache = null;\r\n\t\treturn true;\r\n\t});\r\n\r\n\tthis.attachEvent(\"onPreFilter\", function(){\r\n\t\tthis._indexRangeCache = {};\r\n\t\tthis._eachItemMainRangeCache = null;\r\n\r\n\t\tsplitParents = {};\r\n\t\tsplitItems = {};\r\n\t\ttaskOpenState = {};\r\n\t\ttaskVisibility = {};\r\n\t\thaveSplitItems = false;\r\n\r\n\t\tthis.eachItem(function(item){\r\n\t\t\tvar parent = this.getParent(item.id);\r\n\t\t\tif(item.$open && taskOpenState[parent] !== false){\r\n\t\t\t\ttaskOpenState[item.id] = true;\r\n\t\t\t}else{\r\n\t\t\t\ttaskOpenState[item.id] = false;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._isSplitItem(item)){\r\n\t\t\t\thaveSplitItems = true;\r\n\t\t\t\tsplitParents[item.id] = true;\r\n\t\t\t\tsplitItems[item.id] = true;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif(haveSplitItems && splitItems[parent]){\r\n\t\t\t\tif(this._isDefaultItem(item) || this._isInlineChildItem(item)) splitItems[item.id] = true;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif(taskOpenState[parent] || taskOpenState[parent] === undefined || this._isInlineChildItem(item)){\r\n\t\t\t\ttaskVisibility[item.id] = true;\r\n\t\t\t}else{\r\n\t\t\t\ttaskVisibility[item.id] = false;\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\tthis.attachEvent(\"onFilterItem\", function(id, item){\r\n\r\n\t\tvar canOpenSplitTasks = false;\r\n\t\tif(this._ganttConfig){\r\n\t\t\tvar canOpenSplitTasks = this._ganttConfig.open_split_tasks;\r\n\t\t}\r\n\r\n\t\tvar open = taskVisibility[item.id];\r\n\r\n\t\tif(haveSplitItems){\r\n\t\t\tif(open && splitItems[item.id] && !splitParents[item.id]){\r\n\t\t\t\topen = !!canOpenSplitTasks;\r\n\t\t\t}\r\n\r\n\t\t\tif(splitItems[item.id] && !splitParents[item.id]){\r\n\t\t\t\tif(!this._isSplitChildItem(item)) item.$split_subtask = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\titem.$expanded_branch = !!taskVisibility[item.id];\r\n\t\tif(this._isInlineChildItem(item)){\r\n\t\t\topen = false;\r\n\t\t}\r\n\t\treturn !!open;\r\n\t});\r\n\r\n\tthis.attachEvent(\"onFilter\", function(){\r\n\t\tsplitParents = {};\r\n\t\tsplitItems = {};\r\n\r\n\t\ttaskOpenState = {};\r\n\t\ttaskVisibility = {};\r\n\t});\r\n\r\n\treturn this;\r\n};\r\n\r\nTreeDataStore.prototype = utils.mixin({\r\n\r\n\t\t_buildTree: function(data){\r\n\t\t\tvar item = null;\r\n\t\t\tvar rootId = this.$getRootId();\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis.setParent(item, replaceValidZeroId(this.getParent(item), rootId) || rootId);\r\n\t\t\t}\r\n\r\n\t\t\t// calculating $level for each item\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis._add_branch(item);\r\n\t\t\t\titem.$level = this.calculateItemLevel(item);\r\n\t\t\t\titem.$local_index = this.getBranchIndex(item.id);\r\n\r\n\t\t\t\tif (!utils.defined(item.$open)) {\r\n\t\t\t\t\titem.$open = utils.defined(item.open) ? item.open : this.$openInitially();\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tthis._updateOrder();\r\n\t\t},\r\n\t\t_isSplitItem: function(item){\r\n\t\t\treturn this._splitTaskHelper.isSplitItem(item);\r\n\t\t},\r\n\t\t_isSplitChildItem: function(item){\r\n\t\t\treturn this._splitTaskHelper.isSubrowSplitItem(item);\r\n\t\t},\r\n\t\t_isDefaultItem: function(item){\r\n\t\t\treturn this._splitTaskHelper.isDefaultSplitItem(item);\r\n\t\t},\r\n\t\t_isInlineChildItem: function(item){\r\n\t\t\treturn this._splitTaskHelper.isInlineSplitItem(item);\r\n\t\t},\r\n\t\tparse: function(data){\r\n\t\t\tif (!this._skip_refresh) {\r\n\t\t\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\t\t}\r\n\t\t\tvar loaded = this._parseInner(data);\r\n\t\t\tthis._buildTree(loaded);\r\n\t\t\tthis.filter();\r\n\t\t\tif (!this._skip_refresh) {\r\n\t\t\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_addItemInner: function(item, index){\r\n\r\n\t\t\tvar parent = this.getParent(item);\r\n\r\n\t\t\tif(!utils.defined(parent)){\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t\tthis.setParent(item, parent);\r\n\t\t\t}\r\n\r\n\t\t\tvar parentIndex = this.getIndexById(parent);\r\n\t\t\tvar targetIndex = parentIndex + Math.min(Math.max(index, 0), this.visibleOrder.length);\r\n\r\n\t\t\tif(targetIndex*1 !== targetIndex){\r\n\t\t\t\ttargetIndex = undefined;\r\n\t\t\t}\r\n\t\t\tDataStore.prototype._addItemInner.call(this, item, targetIndex);\r\n\t\t\tthis.setParent(item, parent);\r\n\r\n\t\t\tif(item.hasOwnProperty(\"$rendered_parent\")){\r\n\t\t\t\tthis._move_branch(item, item.$rendered_parent);\r\n\t\t\t}\r\n\t\t\tthis._add_branch(item, index);\r\n\t\t},\r\n\t\t_changeIdInner: function(oldId, newId){\r\n\t\t\tvar children = this.getChildren(oldId);\r\n\t\t\tvar visibleOrder = this._searchVisibleOrder[oldId];\r\n\r\n\t\t\tDataStore.prototype._changeIdInner.call(this, oldId, newId);\r\n\r\n\t\t\tvar parent = this.getParent(newId);\r\n\r\n\t\t\tthis._replace_branch_child(parent, oldId, newId);\r\n\r\n\t\t\tif(this._branches[oldId]){\r\n\t\t\t\tthis._branches[newId] = this._branches[oldId];\r\n\t\t\t}\r\n\t\t\tfor(var i = 0; i < children.length; i++){\r\n\t\t\t\tvar child = this.getItem(children[i]);\r\n\t\t\t\tchild[this.$parentProperty] = newId;\r\n\t\t\t\tchild.$rendered_parent = newId;\r\n\t\t\t}\r\n\r\n\t\t\tthis._searchVisibleOrder[newId] = visibleOrder;\r\n\t\t\tdelete this._branches[oldId];\r\n\t\t},\r\n\r\n\t\t_traverseBranches: function(code, parent){\r\n\t\t\tif (!utils.defined(parent)) {\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\t\t\tvar branch = this._branches[parent];\r\n\t\t\tif (branch) {\r\n\t\t\t\tfor (var i = 0; i < branch.length; i++) {\r\n\t\t\t\t\tvar itemId = branch[i];\r\n\t\t\t\t\tcode.call(this, itemId);\r\n\t\t\t\t\tif (this._branches[itemId])\r\n\t\t\t\t\t\tthis._traverseBranches(code, itemId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_updateOrder: function(code){\r\n\r\n\t\t\tthis.fullOrder = powerArray.$create();\r\n\t\t\tthis._traverseBranches(function(taskId){\r\n\t\t\t\tthis.fullOrder.push(taskId);\r\n\t\t\t});\r\n\r\n\t\t\tif(code)\r\n\t\t\t\tDataStore.prototype._updateOrder.call(this, code);\r\n\t\t},\r\n\r\n\t\t_removeItemInner: function(id){\r\n\r\n\t\t\tvar items = [];\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\titems.push(child);\r\n\t\t\t}, id);\r\n\r\n\t\t\titems.push(this.getItem(id));\r\n\r\n\t\t\tfor(var i = 0; i < items.length; i++){\r\n\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i]), null);\r\n\t\t\t\tDataStore.prototype._removeItemInner.call(this, items[i].id);\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i]), null);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmove: function(sid, tindex, parent){\r\n\t\t\t//target id as 4th parameter\r\n\t\t\tvar id = arguments[3];\r\n\t\t\tvar config = this._ganttConfig || {};\r\n\t\t\tvar root_id = config.root_id || 0;\r\n\t\t\tid = replaceValidZeroId(id, root_id);\r\n\t\t\tif (id) {\r\n\t\t\t\tif (id === sid) return;\r\n\r\n\t\t\t\tparent = this.getParent(id);\r\n\t\t\t\ttindex = this.getBranchIndex(id);\r\n\t\t\t}\r\n\t\t\tif(isEqualIds(sid, parent)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!utils.defined(parent)) {\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\t\t\tvar source = this.getItem(sid);\r\n\t\t\tvar source_pid = this.getParent(source.id);\r\n\r\n\t\t\tvar tbranch = this.getChildren(parent);\r\n\r\n\t\t\tif (tindex == -1)\r\n\t\t\t\ttindex = tbranch.length + 1;\r\n\t\t\tif (isEqualIds(source_pid, parent)) {\r\n\t\t\t\tvar sindex = this.getBranchIndex(sid);\r\n\t\t\t\tif (sindex == tindex) return;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.callEvent(\"onBeforeItemMove\", [sid, parent, tindex]) === false)\r\n\t\t\t\treturn false;\r\n\r\n\t\t\tvar placeholderIds = [];\r\n\t\t\tfor(var i = 0; i < tbranch.length; i++){\r\n\t\t\t\tif (isPlaceholderTask(tbranch[i], null, this, this._ganttConfig)){\r\n\t\t\t\t\tplaceholderIds.push(tbranch[i]);\r\n\t\t\t\t\ttbranch.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._replace_branch_child(source_pid, sid);\r\n\t\t\ttbranch = this.getChildren(parent);\r\n\r\n\t\t\tvar tid = tbranch[tindex];\r\n\t\t\ttid = replaceValidZeroId(tid, root_id);\r\n\t\t\tif (!tid) //adding as last element\r\n\t\t\t\ttbranch.push(sid);\r\n\t\t\telse\r\n\t\t\t\ttbranch = tbranch.slice(0, tindex).concat([ sid ]).concat(tbranch.slice(tindex));\r\n\r\n\t\t\tif (placeholderIds.length){\r\n\t\t\t\ttbranch = tbranch.concat(placeholderIds);\r\n\t\t\t}\r\n\t\t\t// GS-2423 to return initial parent to the task before it will be moved\r\n\t\t\tif (!isEqualIds(source.$rendered_parent, source_pid) && !isEqualIds(source_pid, parent)){\r\n\t\t\t\tsource.$rendered_parent = source_pid;\r\n\t\t\t}\r\n\t\t\tthis.setParent(source, parent);\r\n\t\t\tthis._branches[parent] = tbranch;\r\n\r\n\t\t\tvar diff = this.calculateItemLevel(source) - source.$level;\r\n\t\t\tsource.$level += diff;\r\n\t\t\tthis.eachItem(function(item){\r\n\t\t\t\titem.$level += diff;\r\n\t\t\t}, source.id, this);\r\n\r\n\r\n\t\t\tthis._moveInner(this.getIndexById(sid), this.getIndexById(parent) + tindex);\r\n\r\n\t\t\tthis.callEvent(\"onAfterItemMove\", [sid, parent, tindex]);\r\n\t\t\tthis.refresh();\r\n\t\t},\r\n\r\n\t\tgetBranchIndex: function(id){\r\n\t\t\tvar branch = this.getChildren(this.getParent(id));\r\n\t\t\tlet index = branch.indexOf(id + \"\");\r\n\t\t\tif (index == -1){\r\n\t\t\t\tindex = branch.indexOf(+id);\r\n\t\t\t}\r\n\t\t\treturn index;\r\n\t\t},\r\n\t\thasChild: function(id){\r\n\t\t\tvar branch = this._branches[id];\r\n\t\t\treturn branch && branch.length;\r\n\t\t},\r\n\t\tgetChildren: function(id){\r\n\t\t\tvar branch = this._branches[id];\r\n\t\t\treturn branch ? branch : powerArray.$create();\r\n\t\t},\r\n\r\n\t\tisChildOf: function(childId, parentId){\r\n\t\t\tif (!this.exists(childId))\r\n\t\t\t\treturn false;\r\n\t\t\tif (parentId === this.$getRootId())\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tif (!this.hasChild(parentId))\r\n\t\t\t\treturn false;\r\n\r\n\t\t\tvar item = this.getItem(childId);\r\n\t\t\tvar pid = this.getParent(childId);\r\n\r\n\t\t\tvar parent = this.getItem(parentId);\r\n\t\t\tif(parent.$level >= item.$level){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\twhile (item && this.exists(pid)) {\r\n\t\t\t\titem = this.getItem(pid);\r\n\r\n\t\t\t\tif (item && isEqualIds(item.id, parentId))\r\n\t\t\t\t\treturn true;\r\n\t\t\t\tpid = this.getParent(item);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tgetSiblings: function(id){\r\n\t\t\tif(!this.exists(id)){\r\n\t\t\t\treturn powerArray.$create();\r\n\t\t\t}\r\n\t\t\tvar parent = this.getParent(id);\r\n\t\t\treturn this.getChildren(parent);\r\n\r\n\t\t},\r\n\t\tgetNextSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(isEqualIds(siblings[i], id)){\r\n\t\t\t\t\tvar nextSibling = siblings[i+1];\r\n\t\t\t\t\tif (nextSibling === 0 && i > 0){\r\n\t\t\t\t\t\tnextSibling = \"0\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn nextSibling || null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetPrevSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(isEqualIds(siblings[i], id)){\r\n\t\t\t\t\tvar previousSibling = siblings[i-1];\r\n\t\t\t\t\tif (previousSibling === 0 && i > 0){\r\n\t\t\t\t\t\tpreviousSibling = \"0\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn previousSibling || null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetParent: function(id){\r\n\t\t\tvar item = null;\r\n\t\t\tif(id.id !== undefined){\r\n\t\t\t\titem = id;\r\n\t\t\t}else{\r\n\t\t\t\titem = this.getItem(id);\r\n\t\t\t}\r\n\r\n\t\t\tvar parent;\r\n\t\t\tif(item){\r\n\t\t\t\tparent = item[this.$parentProperty];\r\n\t\t\t}else{\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\t\t\treturn parent;\r\n\r\n\t\t},\r\n\r\n\t\tclearAll: function(){\r\n\t\t\tthis._branches = {};\r\n\t\t\tDataStore.prototype.clearAll.call(this);\r\n\t\t},\r\n\r\n\t\tcalculateItemLevel: function(item){\r\n\t\t\tvar level = 0;\r\n\t\t\tthis.eachParent(function(){\r\n\t\t\t\tlevel++;\r\n\t\t\t}, item);\r\n\t\t\treturn level;\r\n\t\t},\r\n\r\n\t\t_setParentInner: function(item, new_pid, silent){\r\n\t\t\tif(!silent){\r\n\t\t\t\tif(item.hasOwnProperty(\"$rendered_parent\")){\r\n\t\t\t\t\tthis._move_branch(item, item.$rendered_parent, new_pid);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._move_branch(item, item[this.$parentProperty], new_pid);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetParent: function(item, new_pid, silent){\r\n\t\t\tthis._setParentInner(item, new_pid, silent);\r\n\r\n\t\t\titem[this.$parentProperty] = new_pid;\r\n\t\t},\r\n\r\n\t\t_eachItemCached: function(code, cache){\r\n\t\t\tfor(var i = 0, len = cache.length; i < len; i++){\r\n\t\t\t\tcode.call(this, cache[i]);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_eachItemIterate: function(code, startId, cache){\r\n\t\t\tvar itemsStack = this.getChildren(startId);\r\n\t\t\tif(itemsStack.length){\r\n\t\t\t\titemsStack = itemsStack.slice().reverse();\r\n\t\t\t}\r\n\t\t\twhile(itemsStack.length){\r\n\t\t\t\tvar itemId = itemsStack.pop();\r\n\t\t\t\tvar item = this.getItem(itemId);\r\n\t\t\t\tcode.call(this, item);\r\n\t\t\t\tif(cache){\r\n\t\t\t\t\tcache.push(item);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.hasChild(item.id)){\r\n\t\t\t\t\tvar children = this.getChildren(item.id);\r\n\t\t\t\t\tvar len = children.length;\r\n\t\t\t\t\tfor(var i = len - 1; i >= 0; i--){\r\n\t\t\t\t\t\titemsStack.push(children[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\teachItem: function(code, parent){\r\n\t\t\tvar rootId = this.$getRootId();\r\n\t\t\tif (!utils.defined(parent)) {\r\n\t\t\t\tparent = rootId;\r\n\t\t\t}\r\n\t\t\tvar startId = replaceValidZeroId(parent, rootId) || rootId;\r\n\r\n\t\t\tvar useCache = false;\r\n\t\t\tvar buildCache = false;\r\n\t\t\tvar cache = null;\r\n\t\t\tif(startId === rootId){\r\n\t\t\t\tif(this._eachItemMainRangeCache){\r\n\t\t\t\t\tuseCache = true;\r\n\t\t\t\t\tcache = this._eachItemMainRangeCache;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbuildCache = true;\r\n\t\t\t\t\tcache = this._eachItemMainRangeCache = [];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(useCache){\r\n\t\t\t\tthis._eachItemCached(code, cache);\r\n\t\t\t}else{\r\n\t\t\t\tthis._eachItemIterate(code, startId, buildCache ? cache : null);\r\n\t\t\t}\r\n\t\t},\r\n\t\teachParent: function(code, startItem) {\r\n\t\t\tvar parentsHash = {};\r\n\t\t\tvar item = startItem;\r\n\t\t\tvar parent = this.getParent(item);\r\n\r\n\t\t\twhile (this.exists(parent)) {\r\n\t\t\t\tif (parentsHash[parent]) {\r\n\t\t\t\t\tthrow new Error(\"Invalid tasks tree. Cyclic reference has been detected on task \" + parent);\r\n\t\t\t\t}\r\n\t\t\t\tparentsHash[parent] = true;\r\n\t\t\t\titem = this.getItem(parent);\r\n\t\t\t\tcode.call(this, item);\r\n\t\t\t\tparent = this.getParent(item);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_add_branch: function(item, index, parent){\r\n\t\t\tvar pid = parent === undefined ? this.getParent(item) : parent;\r\n\t\t\tif (!this.hasChild(pid))\r\n\t\t\t\tthis._branches[pid] = powerArray.$create();\r\n\t\t\tvar branch = this.getChildren(pid);\r\n\t\t\tvar added_already = branch.indexOf(item.id + \"\") > -1 || branch.indexOf(+item.id) > -1;\r\n\t\t\tif(!added_already){\r\n\t\t\t\tif(index*1 == index){\r\n\r\n\t\t\t\t\tbranch.splice(index, 0, item.id);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbranch.push(item.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\titem.$rendered_parent = pid;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_move_branch: function(item, old_parent, new_parent){\r\n\t\t\tthis._eachItemMainRangeCache = null;\r\n\t\t\t//this.setParent(item, new_parent);\r\n\t\t\t//this._sync_parent(task);\r\n\t\t\tthis._replace_branch_child(old_parent, item.id);\r\n\t\t\tif(this.exists(new_parent) || isEqualIds(new_parent, this.$getRootId())){\r\n\r\n\t\t\t\tthis._add_branch(item, undefined, new_parent);\r\n\t\t\t}else{\r\n\t\t\t\tdelete this._branches[item.id];\r\n\t\t\t}\r\n\t\t\titem.$level =  this.calculateItemLevel(item);\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\tchild.$level = this.calculateItemLevel(child);\r\n\t\t\t}, item.id);\r\n\t\t},\r\n\r\n\t\t_replace_branch_child: function(node, old_id, new_id){\r\n\t\t\tvar branch = this.getChildren(node);\r\n\t\t\tif (branch && node !== undefined){\r\n\t\t\t\tvar newbranch = powerArray.$create();\r\n\r\n\t\t\t\tlet index = branch.indexOf(old_id + \"\");\r\n\t\t\t\tif (index == -1 && !isNaN(+old_id)){\r\n\t\t\t\t\tindex = branch.indexOf(+old_id);\r\n\t\t\t\t} \r\n\r\n\t\t\t\tif (index > -1){\r\n\t\t\t\t\tif (new_id){\r\n\t\t\t\t\t\tbranch.splice(index, 1, new_id);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbranch.splice(index, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tnewbranch = branch;\r\n\r\n\t\t\t\tthis._branches[node] = newbranch;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tsort: function(field, desc, parent){\r\n\t\t\tif (!this.exists(parent)) {\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\r\n\t\t\tif (!field) field = \"order\";\r\n\t\t\tvar criteria = (typeof(field) == \"string\") ? (function(a, b) {\r\n\t\t\t\tif (a[field] == b[field] ||\r\n\t\t\t\t\t(helpers.isDate(a[field]) && helpers.isDate(b[field]) && a[field].valueOf() == b[field].valueOf()))\r\n\t\t\t\t{\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar result = a[field] > b[field];\r\n\t\t\t\treturn result ? 1 : -1;\r\n\t\t\t}) : field;\r\n\r\n\t\t\tif (desc) {\r\n\t\t\t\tvar original_criteria = criteria;\r\n\t\t\t\tcriteria = function (a, b) {\r\n\t\t\t\t\treturn original_criteria(b, a);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tvar els = this.getChildren(parent);\r\n\r\n\t\t\tif (els){\r\n\t\t\t\tvar temp = [];\r\n\t\t\t\tfor (var i = els.length - 1; i >= 0; i--)\r\n\t\t\t\t\ttemp[i] = this.getItem(els[i]);\r\n\r\n\t\t\t\ttemp.sort(criteria);\r\n\r\n\t\t\t\tfor (var i = 0; i < temp.length; i++) {\r\n\t\t\t\t\tels[i] = temp[i].id;\r\n\t\t\t\t\tthis.sort(field, desc, els[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfilter: function(rule){\r\n\t\t\tfor(let i in this.pull){\r\n\t\t\t\tconst renderedParent = this.pull[i].$rendered_parent;\r\n\t\t\t\tconst actualParent = this.getParent(this.pull[i]);\r\n\t\t\t\t//GS-2339: could be different types of the ids\r\n\t\t\t\tif(!isEqualIds(renderedParent,actualParent)){\r\n\t\t\t\t\tthis._move_branch(this.pull[i], renderedParent, actualParent);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn DataStore.prototype.filter.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\topen: function(id){\r\n\t\t\tif(this.exists(id)){\r\n\t\t\t\tthis.getItem(id).$open = true;\r\n\t\t\t\t// GS-2170. Do not recalculate the indexes and dates as they will be recalculated later\r\n\t\t\t\tthis._skipTaskRecalculation = true;\r\n\t\t\t\tthis.callEvent(\"onItemOpen\", [id]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclose: function(id){\r\n\t\t\tif(this.exists(id)){\r\n\t\t\t\tthis.getItem(id).$open = false;\r\n\t\t\t\t// GS-2170. Do not recalculate the indexes and dates as they will be recalculated later\r\n\t\t\t\tthis._skipTaskRecalculation = true;\r\n\t\t\t\tthis.callEvent(\"onItemClose\", [id]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdestructor: function(){\r\n\t\t\tDataStore.prototype.destructor.call(this);\r\n\t\t\tthis._branches = null;\r\n\t\t\tthis._indexRangeCache = {};\r\n\t\t\tthis._eachItemMainRangeCache = null;\r\n\t\t}\r\n\t},\r\n\tDataStore.prototype\r\n);\r\n\r\nfunction isEqualIds(first, second){\r\n\treturn String(first) === String(second);\r\n};\r\n\r\nexport default TreeDataStore;","import env from \"./env\";\r\n\r\nexport default function(gantt){\r\n\treturn env.isNode || !gantt.$root;\r\n};","import isHeadless from \"../../utils/is_headless\";\r\n\r\nconst storeRenderCreator = function(name, gantt){\r\n\r\n\tconst store = gantt.getDatastore(name);\r\n\r\n\tconst itemRepainter = {\r\n\t\trenderItem: function(id, renderer){\r\n\r\n\t\t\tconst renders = renderer.getLayers();\r\n\r\n\t\t\tconst item = store.getItem(id);\r\n\t\t\tif(item && store.isVisible(id)) {\r\n\t\t\t\tfor (let i = 0; i < renders.length; i++)\r\n\t\t\t\t\trenders[i].render_item(item);\r\n\t\t\t}\r\n\t\t},\r\n\t\trenderItems: function(renderer){\r\n\t\t\tconst renderers = renderer.getLayers();\r\n\t\t\tfor (let i = 0; i < renderers.length; i++) {\r\n\t\t\t\trenderers[i].clear();\r\n\t\t\t}\r\n\r\n\t\t\tlet allData = null;\r\n\r\n\t\t\tconst loadedRanges = {};\r\n\t\t\tfor (let i = 0; i < renderers.length; i++) {\r\n\t\t\t\tconst layer = renderers[i];\r\n\t\t\t\tlet layerData;\r\n\t\t\t\tif(layer.get_visible_range){\r\n\r\n\t\t\t\t\tvar range = layer.get_visible_range(store);\r\n\t\t\t\t\tif(range.start !== undefined && range.end !== undefined){\r\n\t\t\t\t\t\tvar key = range.start + \" - \" + range.end;\r\n\t\t\t\t\t\tif(loadedRanges[key]){\r\n\t\t\t\t\t\t\tlayerData = loadedRanges[key];\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tlayerData = store.getIndexRange(range.start, range.end);\r\n\t\t\t\t\t\t\tloadedRanges[key] = layerData;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else if(range.ids !== undefined){\r\n\t\t\t\t\t\tlayerData = range.ids.map(function(id){\r\n\t\t\t\t\t\t\treturn store.getItem(id);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthrow new Error(\"Invalid range returned from 'getVisibleRange' of the layer\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(!allData){\r\n\t\t\t\t\t\tallData = store.getVisibleItems();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlayerData = allData;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (layer.prepare_data) {\r\n\t\t\t\t\t// GS-1605. Highlight timeline cells below tasks and in an empty chart\r\n\t\t\t\t\tlayer.prepare_data(layerData);\r\n\t\t\t\t}\r\n\r\n\t\t\t\trenderers[i].render_items(layerData);\r\n\t\t\t}\r\n\t\t},\r\n\t\tupdateItems: function(layer) {\r\n\t\t\tif(layer.update_items){\r\n\t\t\t\tlet data = [];\r\n\t\t\t\tif(layer.get_visible_range){\r\n\r\n\t\t\t\t\tvar range = layer.get_visible_range(store);\r\n\t\t\t\t\tif(range.start !== undefined && range.end !== undefined){\r\n\t\t\t\t\t\tdata = store.getIndexRange(range.start, range.end);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(range.ids !== undefined){\r\n\t\t\t\t\t\tlet extraDataArr = range.ids.map(function(id){\r\n\t\t\t\t\t\t\treturn store.getItem(id);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// GS-2502: range.ids might not exist in other datastores\r\n\t\t\t\t\t\tif(extraDataArr.length > 0){\r\n\t\t\t\t\t\t\textraDataArr = extraDataArr.filter(element => element !== undefined);\r\n\t\t\t\t\t\t\tdata = data.concat(extraDataArr);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif((range.start == undefined || range.end == undefined) && range.ids == undefined)  {\r\n\t\t\t\t\t\tthrow new Error(\"Invalid range returned from 'getVisibleRange' of the layer\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdata = store.getVisibleItems();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (layer.prepare_data) {\r\n\t\t\t\t\t// GS-1605. Highlight timeline cells below tasks and in an empty chart\r\n\t\t\t\t\tlayer.prepare_data(data, layer);\r\n\t\t\t\t}\r\n\t\t\t\tlayer.update_items(data);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tstore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(isHeadless(gantt)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tconst renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\t\tif(renderer){\r\n\t\t\trenderer.onUpdateRequest = function(layer){\r\n\t\t\t\titemRepainter.updateItems(layer);\r\n\t\t\t};\r\n\t\t}\r\n\t});\r\n\r\n\tfunction skipRepaint(gantt){\r\n\t\tconst state = gantt.$services.getService(\"state\");\r\n\t\tif(state.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tstore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(skipRepaint(gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(!id || action == \"move\" || action == \"delete\"){\r\n\t\t\tstore.callEvent(\"onBeforeRefreshAll\", []);\r\n\t\t\tstore.callEvent(\"onAfterRefreshAll\", []);\r\n\t\t}else{\r\n\t\t\tstore.callEvent(\"onBeforeRefreshItem\", [item.id]);\r\n\t\t\tstore.callEvent(\"onAfterRefreshItem\", [item.id]);\r\n\t\t}\r\n\t});\r\n\r\n\tstore.attachEvent(\"onAfterRefreshAll\", function(){\r\n\t\tif(isHeadless(gantt)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tconst renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\t\tif(renderer && !skipRepaint(gantt)){\r\n\t\t\titemRepainter.renderItems(renderer);\r\n\t\t}\r\n\t});\r\n\tstore.attachEvent(\"onAfterRefreshItem\", function(id){\r\n\t\tif(isHeadless(gantt)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tconst renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\t\tif(renderer){\r\n\t\t\titemRepainter.renderItem(id, renderer);\r\n\t\t}\r\n\t});\r\n\r\n\t// TODO: probably can be done more in a more efficient way\r\n\tstore.attachEvent(\"onItemOpen\", function(){\r\n\t\tif(isHeadless(gantt) || store.isSilent()){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tgantt.render();\r\n\t});\r\n\r\n\tstore.attachEvent(\"onItemClose\", function(){\r\n\t\tif(isHeadless(gantt) || store.isSilent()){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tgantt.render();\r\n\t});\r\n\r\n\tfunction refreshId(renders, oldId, newId, item) {\r\n\t\tfor (let i = 0; i < renders.length; i++) {\r\n\t\t\trenders[i].change_id(oldId, newId);\r\n\t\t}\r\n\t}\r\n\r\n\tstore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\tif(isHeadless(gantt)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// in case of linked datastores (tasks <-> links), id change should recalculate something in linked datastore before any repaint\r\n\t\t// use onBeforeIdChange for this hook.\r\n\t\t// TODO: use something more reasonable instead\r\n\t\tstore.callEvent(\"onBeforeIdChange\", [oldId, newId]);\r\n\r\n\t\tif(skipRepaint(gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(!store.isSilent()){\r\n\t\t\tconst renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\t\t\tif(renderer){ // missing check for renderer GS-1814\r\n\t\t\t\trefreshId(renderer.getLayers(), oldId, newId, store.getItem(newId));\r\n\t\t\t\titemRepainter.renderItem(newId, renderer);\r\n\t\t\t}else{\r\n\t\t\t\t// GS-1814 repaint ui to apply new id when the datastore don't have own renderer\r\n\t\t\t\tgantt.render();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n};\r\n\r\nexport default {\r\n\tbindDataStore: storeRenderCreator\r\n};","import * as utils from \"../../utils/utils\";\r\nimport createTasksFacade from \"./datastore_tasks\";\r\nimport createLinksFacade from \"./datastore_links\";\r\nimport DataStore from \"../datastore/datastore\";\r\nimport TreeDataStore from \"../datastore/treedatastore\";\r\nimport createDatastoreSelect from \"../datastore/select\";\r\nimport datastoreRender from \"../datastore/datastore_render\";\r\nimport isHeadless from \"../../utils/is_headless\";\r\nimport {replaceValidZeroId} from \"../../utils/helpers\";\r\n\r\nfunction getDatastores(){\r\n\tvar storeNames = this.$services.getService(\"datastores\");\r\n\tvar res = [];\r\n\tfor(var i = 0; i < storeNames.length; i++){\r\n\t\tvar store = this.getDatastore(storeNames[i]);\r\n\t\tif(!store.$destroyed){\r\n\t\t\tres.push(store);\r\n\t\t}\r\n\t}\r\n\treturn res;\r\n}\r\n\r\nvar createDatastoreFacade = function(){\r\n\treturn {\r\n\tcreateDatastore: function(config){\r\n\r\n\t\tvar $StoreType = (config.type || \"\").toLowerCase() == \"treedatastore\" ? TreeDataStore : DataStore;\r\n\r\n\t\tif (config) {\r\n\t\t\tvar self = this;\r\n\t\t\tconfig.openInitially = function(){ return self.config.open_tree_initially; };\r\n\t\t\tconfig.copyOnParse = function(){ return self.config.deepcopy_on_parse; };\r\n\t\t}\r\n\r\n\t\tvar store = new $StoreType(config);\r\n\t\tthis.mixin(store, createDatastoreSelect(store));\r\n\r\n\t\tif (config.name) {\r\n\t\t\tvar servicePrefix = \"datastore:\";\r\n\t\t\tvar storeAccessName = servicePrefix + config.name;\r\n\r\n\t\t\tstore.attachEvent(\"onDestroy\", function(){\r\n\t\t\t\tthis.$services.dropService(storeAccessName);\r\n\t\t\t\tvar storeList = this.$services.getService(\"datastores\");\r\n\t\t\t\tfor(var i = 0; i < storeList.length; i++){\r\n\t\t\t\t\tif(storeList[i] === config.name){\r\n\t\t\t\t\t\tstoreList.splice(i, 1);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}.bind(this));\r\n\r\n\t\t\tthis.$services.dropService(storeAccessName);\r\n\t\t\tthis.$services.setService(storeAccessName, function() { return store; } );\r\n\r\n\t\t\tvar storeList = this.$services.getService(\"datastores\");\r\n\t\t\tif (!storeList) {\r\n\t\t\t\tstoreList = [];\r\n\t\t\t\tthis.$services.setService(\"datastores\", function() { return storeList; });\r\n\t\t\t\tstoreList.push(config.name);\r\n\t\t\t} else if (storeList.indexOf(config.name) < 0) {\r\n\t\t\t\tstoreList.push(config.name);\r\n\t\t\t}\r\n\r\n\t\t\tdatastoreRender.bindDataStore(config.name, this);\r\n\r\n\t\t}\r\n\r\n\t\treturn store;\r\n\t},\r\n\tgetDatastore: function(name){\r\n\t\treturn this.$services.getService(\"datastore:\" + name);\r\n\t},\r\n\t_getDatastores: getDatastores,\r\n\r\n\trefreshData: function () {\r\n\t\tvar scrollState;\r\n\t\tif(!isHeadless(this)){\r\n\t\t\tscrollState = this.getScrollState();\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onBeforeDataRender\", []);\r\n\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].refresh();\r\n\t\t}\r\n\r\n\t\tif(this.config.preserve_scroll && !isHeadless(this)){\r\n\t\t\tif(scrollState.x || scrollState.y){\r\n\t\t\t\tthis.scrollTo(scrollState.x, scrollState.y);\r\n\t\t\t}\r\n\t\t\t// GS-2866: need to restore the scroll position after resizing the resource view\r\n\t\t\t// in case if it was increased\r\n\t\t\tconst scrollbarsInfo = this.$layout.getScrollbarsInfo();\r\n\t\t\tscrollbarsInfo.forEach((scroll_info) => {\r\n\t\t\t\tconst scroll = this.$ui.getView(scroll_info.id);\r\n\t\t\t\tif(!scroll) return;\r\n\t\t\t\tconst scrollbarNodeVisible = this.utils.dom.isChildOf(scroll.$view, this.$container);\r\n\t\t\t\tscroll_info.boundViews.forEach((viewName) => {\r\n\t\t\t\t\tconst view = this.$ui.getView(viewName);\r\n\t\t\t\t\tif(scroll_info.y){\r\n\t\t\t\t\t\tif(view && !scrollbarNodeVisible){\r\n\t\t\t\t\t\t\tview.scrollTo(undefined, 0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.callEvent(\"onDataRender\", []);\r\n\r\n\t},\r\n\r\n\tisChildOf: function(childId, parentId){\r\n\t\treturn this.$data.tasksStore.isChildOf(childId, parentId);\r\n\t},\r\n\r\n\trefreshTask: function (taskId, refresh_links) {\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tvar self = this;\r\n\t\tfunction refreshLinks(){\r\n\t\t\tif (refresh_links !== undefined && !refresh_links)\r\n\t\t\t\treturn;\r\n\t\t\tfor (var i = 0; i < task.$source.length; i++) {\r\n\t\t\t\tself.refreshLink(task.$source[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < task.$target.length; i++) {\r\n\t\t\t\tself.refreshLink(task.$target[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (task && this.isTaskVisible(taskId)) {\r\n\t\t\tthis.$data.tasksStore.refresh(taskId, !!this.getState(\"tasksDnd\").drag_id || refresh_links === false);// do quick refresh during drag and drop\r\n\t\t\trefreshLinks();\r\n\t\t}else if(this.isTaskExists(taskId) && this.isTaskExists(this.getParent(taskId)) && !this._bulk_dnd){\r\n\t\t\tthis.refreshTask(this.getParent(taskId));\r\n\r\n\t\t\tvar hasSplitParent = false;\r\n\t\t\tthis.eachParent(function(parent){\r\n\t\t\t\tif(hasSplitParent || this.isSplitTask(parent)){\r\n\t\t\t\t\thasSplitParent = true;\r\n\t\t\t\t}\r\n\t\t\t}, taskId);\r\n\t\t\tif(hasSplitParent){\r\n\t\t\t\trefreshLinks();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\trefreshLink: function (linkId) {\r\n\t\tthis.$data.linksStore.refresh(linkId, !!this.getState(\"tasksDnd\").drag_id);// do quick refresh during drag and drop\r\n\t},\r\n\r\n\tsilent: function(code){\r\n\t\tvar gantt = this;\r\n\t\tgantt.$data.tasksStore.silent(function(){\r\n\t\t\tgantt.$data.linksStore.silent(function(){\r\n\t\t\t\tcode();\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\r\n\tclearAll: function () {\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\t\r\n\t\t// clear all stores without invoking clearAll event\r\n\t\t// in order to prevent calling handlers when only some stores are cleared\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].silent(function(){\r\n\t\t\t\tstores[i].clearAll();\t\r\n\t\t\t});\r\n\t\t}\r\n\t\t// run clearAll again to invoke events\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].clearAll();\t\r\n\t\t}\r\n\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t\tthis.callEvent(\"onClear\", []);\r\n\t\tthis.render();\r\n\t},\r\n\t_clear_data: function () {\r\n\t\tthis.$data.tasksStore.clearAll();\r\n\t\tthis.$data.linksStore.clearAll();\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t},\r\n\r\n\tselectTask: function(id){\r\n\t\tvar store = this.$data.tasksStore;\r\n\t\tif(!this.config.select_task)\r\n\t\t\treturn false;\r\n\t\tid = replaceValidZeroId(id, this.config.root_id);\r\n\t\tif (id){\r\n\t\t\tlet oldSelectId = this.getSelectedId();\r\n\t\t\t// Don't repaint the resource panel as the data didn't change\r\n\t\t\tstore._skipResourceRepaint = true;\r\n\t\t\tstore.select(id);\r\n\t\t\tstore._skipResourceRepaint = false;\r\n\t\t\t// GS-730. Split task is not included in the tree, \r\n\t\t\t// so the datastore renderer will think that the task is not visible\r\n\t\t\tif (oldSelectId && store.pull[oldSelectId].$split_subtask && oldSelectId != id) {\r\n\t\t\t\tthis.refreshTask(oldSelectId);\r\n\t\t\t}\r\n\t\t\tif (store.pull[id].$split_subtask && oldSelectId != id) {// GS-1850. Do not repaint split task after double click\r\n\t\t\t\tthis.refreshTask(id);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn store.getSelectedId();\r\n\t},\r\n\tunselectTask: function(id){\r\n\t\tvar store = this.$data.tasksStore;\r\n\t\tstore.unselect(id);\r\n\t\t// GS-730. Split task is not included in the tree, \r\n\t\t// so the datastore renderer will think that the task is not visible\r\n\t\tif (id && store.pull[id].$split_subtask) {\r\n\t\t\tthis.refreshTask(id);\r\n\t\t}\r\n\t},\r\n\tisSelectedTask: function(id){\r\n\t\treturn this.$data.tasksStore.isSelected(id);\r\n\t},\r\n\tgetSelectedId: function() {\r\n\t\treturn this.$data.tasksStore.getSelectedId();\r\n\t}\r\n};\r\n};\r\n\r\nfunction createFacade(){\r\n\tvar res = utils.mixin({}, createDatastoreFacade());\r\n\tutils.mixin(res, createTasksFacade());\r\n\tutils.mixin(res, createLinksFacade());\r\n\treturn res;\r\n}\r\n\r\n\r\n\r\n\r\nexport default {create: createFacade};","function createDataStoreSelectMixin(store){\r\n\tvar selectedId = null;\r\n\r\n\tvar deleteItem = store._removeItemInner;\r\n\t\r\n\tfunction unselect(id){\r\n\t\tselectedId = null;\r\n\t\tthis.callEvent(\"onAfterUnselect\", [id]);\r\n\t}\r\n\r\n\tstore._removeItemInner = function(id){\r\n\t\tif(selectedId == id){\r\n\t\t\tunselect.call(this, id);\r\n\t\t}\r\n\r\n\t\tif(selectedId && this.eachItem){\r\n\t\t\tthis.eachItem(function(subItem){\r\n\t\t\t\tif(subItem.id == selectedId){\r\n\t\t\t\t\tunselect.call(this, subItem.id);\r\n\t\t\t\t}\r\n\t\t\t}, id);\r\n\t\t}\r\n\r\n\t\treturn deleteItem.apply(this, arguments);\r\n\t};\r\n\r\n\tstore.attachEvent(\"onIdChange\", function(oldId, newId) {\r\n\t\tif (store.getSelectedId() == oldId) {\r\n\t\t\tstore.silent(function () {\r\n\t\t\t\tstore.unselect(oldId);\r\n\t\t\t\tstore.select(newId);\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\treturn {\r\n\t\tselect: function(id){\r\n\t\t\tif (id){\r\n\r\n\t\t\t\tif(selectedId == id)\r\n\t\t\t\t\treturn selectedId;\r\n\r\n\t\t\t\tif(!this._skip_refresh) {\r\n\t\t\t\t\tif (!this.callEvent(\"onBeforeSelect\", [id])) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.unselect();\r\n\r\n\t\t\t\tselectedId = id;\r\n\r\n\t\t\t\tif(!this._skip_refresh) {\r\n\t\t\t\t\tthis.refresh(id);\r\n\t\t\t\t\tthis.callEvent(\"onAfterSelect\", [id]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn selectedId;\r\n\t\t},\r\n\t\tgetSelectedId: function(){\r\n\t\t\treturn selectedId;\r\n\t\t},\r\n\t\tisSelected: function(id){\r\n\t\t\treturn id == selectedId;\r\n\t\t},\r\n\t\tunselect: function(id){\r\n\t\t\tvar id = id || selectedId;\r\n\t\t\tif(!id)\r\n\t\t\t\treturn;\r\n\t\t\tselectedId = null;\r\n\t\t\tif(!this._skip_refresh){\r\n\t\t\t\tthis.refresh(id);\r\n\t\t\t\tunselect.call(this, id);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport default createDataStoreSelectMixin;","import * as utils from \"../../utils/utils\";\r\n\r\n\r\nvar createLinksStoreFacade = function(){\r\n\treturn {\r\n\tgetLinkCount: function () {\r\n\t\treturn this.$data.linksStore.count();\r\n\t},\r\n\r\n\tgetLink : function (id) {\r\n\t\treturn this.$data.linksStore.getItem(id);\r\n\t},\r\n\r\n\tgetLinks : function () {\r\n\t\treturn this.$data.linksStore.getItems();\r\n\t},\r\n\r\n\tisLinkExists : function (id) {\r\n\t\treturn this.$data.linksStore.exists(id);\r\n\t},\r\n\r\n\taddLink : function (link) {\r\n\t\treturn this.$data.linksStore.addItem(link);\r\n\t},\r\n\r\n\tupdateLink : function (id, data) {\r\n\t\tif (!utils.defined(data))\r\n\t\t\tdata = this.getLink(id);\r\n\t\tthis.$data.linksStore.updateItem(id, data);\r\n\t},\r\n\r\n\tdeleteLink : function (id) {\r\n\t\treturn this.$data.linksStore.removeItem(id);\r\n\t},\r\n\r\n\tchangeLinkId : function (oldid, newid) {\r\n\t\treturn this.$data.linksStore.changeId(oldid, newid);\r\n\t}\r\n};\r\n};\r\n\r\nexport default createLinksStoreFacade;","import ScaleHelper from \"./ui/timeline/scales_ignore\";\r\nimport PrimaryScaleHelper from \"./ui/timeline/scales\";\r\n\r\nfunction resolveConfigRange(unit, gantt){\r\n\tvar range = {\r\n\t\tstart_date:null,\r\n\t\tend_date:null\r\n\t};\r\n\r\n\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](new Date(gantt.config.start_date));\r\n\r\n\t\tvar end = new Date(gantt.config.end_date);\r\n\t\tvar start_interval = gantt.date[unit + \"_start\"](new Date(end));\r\n\t\tif (+end != +start_interval) {\r\n\t\t\tend = gantt.date.add(start_interval, 1, unit);\r\n\t\t} else {\r\n\t\t\tend = start_interval;\r\n\t\t}\r\n\r\n\t\trange.end_date = end;\r\n\t}\r\n\treturn range;\r\n}\r\n\r\nfunction _scale_range_unit(gantt) {\r\n\tconst primaryScale = (new PrimaryScaleHelper(gantt)).primaryScale();\r\n\tlet unit = primaryScale.unit;\r\n\tlet step = primaryScale.step;\r\n\tif (gantt.config.scale_offset_minimal) {\r\n\r\n\t\tconst helper = new ScaleHelper(gantt);\r\n\t\tconst scales = [helper.primaryScale()].concat(helper.getAdditionalScales());\r\n\r\n\t\thelper.sortScales(scales);\r\n\t\tunit = scales[scales.length - 1].unit;\r\n\t\tstep = scales[scales.length - 1].step || 1;\r\n\t}\r\n\treturn { unit:unit, step:step };\r\n}\r\n\r\nfunction _init_tasks_range(gantt) {\r\n\tvar cfg = _scale_range_unit(gantt);\r\n\tvar unit = cfg.unit,\r\n\t\tstep = cfg.step;\r\n\tvar range = resolveConfigRange(unit, gantt);\r\n\r\n\t// GS-1544: Show correct date range if we have tasks or only projects\r\n\tif(!(range.start_date && range.end_date)){\r\n\t\tvar onlyProjectTasks = true;\r\n\t\tvar tasks = gantt.getTaskByTime();\r\n\t\tfor (var i = 0; i < tasks.length; i++) {\r\n\t\t\tvar task = tasks[i];\r\n\t\t\tif (task.type !== gantt.config.types.project){\r\n\t\t\t\tonlyProjectTasks = false;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (tasks.length && onlyProjectTasks){\r\n\t\t\tvar start_date = tasks[0].start_date;\r\n\t\t\tvar end_date = gantt.date.add(start_date, 1, gantt.config.duration_unit);\r\n\t\t\trange = {\r\n\t\t\t\tstart_date: new Date(start_date),\r\n\t\t\t\tend_date: new Date(end_date)\r\n\t\t\t};\r\n\t\t} else{\r\n\t\t\trange = gantt.getSubtaskDates();\r\n\t\t}\r\n\r\n\t\tif(!range.start_date || !range.end_date){\r\n\t\t\trange = {\r\n\t\t\t\tstart_date: new Date(),\r\n\t\t\t\tend_date: new Date()\r\n\t\t\t};\r\n\t\t}\r\n\t\t// extend the displayed date range including the constraints, deadlines and baselines\r\n\t\tgantt.eachTask(function(task){\r\n\t\t\tif (gantt.config.deadlines && task.deadline){\r\n\t\t\t\textendRangeForDates(range, task.deadline, task.deadline);\r\n\t\t\t}\r\n\t\t\tif (task.constraint_date && task.constraint_type){\r\n\t\t\t\tif (gantt._getAutoSchedulingConfig().apply_constraints && gantt.config.constraint_types && task.constraint_type !== gantt.config.constraint_types.ASAP && task.constraint_type !== gantt.config.constraint_types.ALAP){\r\n\t\t\t\t\textendRangeForDates(range, task.constraint_date, task.constraint_date);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (gantt.config.baselines && task.baselines){\r\n\t\t\t\ttask.baselines.forEach(function(baseline){\r\n\t\t\t\t\textendRangeForDates(range, baseline.start_date, baseline.end_date);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](range.start_date);\r\n\t\trange.start_date = gantt.calculateEndDate({\r\n\t\t\tstart_date: gantt.date[unit + \"_start\"](range.start_date),\r\n\t\t\tduration: -1,\r\n\t\t\tunit: unit,\r\n\t\t\tstep:step\r\n\t\t});//one free column before first task\r\n\r\n\t\trange.end_date = gantt.date[unit + \"_start\"](range.end_date);\r\n\t\trange.end_date = gantt.calculateEndDate({start_date: range.end_date, duration: 2, unit: unit, step:step});//one free column after last task\r\n\t}\r\n\r\n\tgantt._min_date = range.start_date;\r\n\tgantt._max_date = range.end_date;\r\n}\r\n\r\nfunction extendRangeForDates(range, start_date, end_date){\r\n\tif (start_date < range.start_date){\r\n\t\trange.start_date = new Date(start_date);\r\n\t}\r\n\tif (end_date > range.end_date){\r\n\t\trange.end_date = new Date(end_date);\r\n\t}\r\n}\r\n\r\nfunction _adjust_scales(gantt) {\r\n\tif (gantt.config.fit_tasks) {\r\n\t\tvar old_min = +gantt._min_date,\r\n\t\t\told_max = +gantt._max_date;\r\n\t\t//this._init_tasks_range();\r\n\t\tif (+gantt._min_date != old_min || +gantt._max_date != old_max) {\r\n\t\t\tgantt.render();\r\n\r\n\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nexport default function updateTasksRange(gantt){\r\n\t_init_tasks_range(gantt);\r\n\t_adjust_scales(gantt);\r\n};\r\n","function copyLinkIdsArray(gantt, linkIds, targetHash){\r\n\tfor(var i = 0; i < linkIds.length; i++) {\r\n\t\tif(gantt.isLinkExists(linkIds[i])){\r\n\t\t\ttargetHash[linkIds[i]] = gantt.getLink(linkIds[i]);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction copyLinkIds(gantt, task, targetHash){\r\n\tcopyLinkIdsArray(gantt, task.$source, targetHash);\r\n\tcopyLinkIdsArray(gantt, task.$target, targetHash);\r\n}\r\n\r\nfunction getSubtreeLinks(gantt, rootId){\r\n\tvar res = {};\r\n\r\n\tif(gantt.isTaskExists(rootId)){\r\n\t\tcopyLinkIds(gantt, gantt.getTask(rootId), res);\r\n\t}\r\n\r\n\tgantt.eachTask(function(child){\r\n\t\tcopyLinkIds(gantt, child, res);\r\n\t}, rootId);\r\n\r\n\treturn res;\r\n}\r\n\r\nfunction getSubtreeTasks(gantt, rootId){\r\n\tvar res = {};\r\n\r\n\tgantt.eachTask(function(child){\r\n\t\tres[child.id] = child;\r\n\t}, rootId);\r\n\r\n\treturn res;\r\n}\r\n\r\nexport default {\r\n\tgetSubtreeLinks: getSubtreeLinks,\r\n\tgetSubtreeTasks: getSubtreeTasks\r\n};","import * as helpers from \"../../utils/helpers\";\r\nimport treeHelper from \"../../utils/task_tree_helpers\";\r\n\r\n\r\nexport default class DataProcessorEvents {\r\n\tprotected _dataProcessorHandlers: any[];\r\n\tprotected $gantt: any;\r\n\tprotected $dp: any;\r\n\r\n\tconstructor(gantt: any, dp: any) {\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis.$dp = dp;\r\n\t\tthis._dataProcessorHandlers = [];\r\n\t}\r\n\r\n\tattach() {\r\n\t\tconst dp = this.$dp;\r\n\t\tconst gantt = this.$gantt;\r\n\t\tconst cascadeDelete = {};\r\n\r\n\t\tconst clientSideDelete = (id) => {\r\n\t\t\treturn this.clientSideDelete(id, dp, gantt);\r\n\t\t};\r\n\r\n\t\tfunction getTaskLinks(task) {\r\n\t\t\tlet _links = [];\r\n\r\n\t\t\tif (task.$source) {\r\n\t\t\t\t_links = _links.concat(task.$source);\r\n\t\t\t}\r\n\t\t\tif (task.$target) {\r\n\t\t\t\t_links = _links.concat(task.$target);\r\n\t\t\t}\r\n\r\n\t\t\treturn _links;\r\n\t\t}\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterTaskAdd\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (gantt.isTaskExists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tdp.setUpdated(id, true, \"inserted\");\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterTaskUpdate\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (gantt.isTaskExists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tdp.setUpdated(id, true);\r\n\r\n\t\t\t\t// gantt can be destroyed/reinitialized after dp.setUpdated\r\n\t\t\t\tif(gantt._sendTaskOrder){\r\n\t\t\t\t\tgantt._sendTaskOrder(id, item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onBeforeTaskDelete\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (gantt.config.cascade_delete) {\r\n\t\t\t\tcascadeDelete[id] = {\r\n\t\t\t\t\ttasks: treeHelper.getSubtreeTasks(gantt, id),\r\n\t\t\t\t\tlinks: treeHelper.getSubtreeLinks(gantt, id)\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t// GS-631. Keep the deleted item in Gantt until we receive the successful response from the server\r\n\t\t\tif (dp.deleteAfterConfirmation) {\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tdp.setUpdated(id, true, \"deleted\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterTaskDelete\", function(id, item) { // tslint:disable-line\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\r\n\t\t\t// not send delete request if item is not inserted into the db - just remove it from the client\r\n\t\t\tconst needDbDelete = !clientSideDelete(id);\r\n\t\t\tconst needCascadeDelete = gantt.config.cascade_delete && cascadeDelete[id];\r\n\t\t\tif (!needDbDelete && !needCascadeDelete) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (needCascadeDelete) {\r\n\t\t\t\tconst dpMode = dp.updateMode;\r\n\t\t\t\tdp.setUpdateMode(\"off\");\r\n\r\n\t\t\t\tconst cascade = cascadeDelete[id];\r\n\t\t\t\tfor (const i in cascade.tasks) {\r\n\t\t\t\t\tif (!clientSideDelete(i)) {\r\n\t\t\t\t\t\tdp.storeItem(cascade.tasks[i]);\r\n\t\t\t\t\t\tdp.setUpdated(i, true, \"deleted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\t\tfor (const i in cascade.links) {\r\n\t\t\t\t\tif (!clientSideDelete(i)) {\r\n\t\t\t\t\t\tdp.storeItem(cascade.links[i]);\r\n\t\t\t\t\t\tdp.setUpdated(i, true, \"deleted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcascadeDelete[id] = null;\r\n\r\n\t\t\t\tif (dpMode !== \"off\") {\r\n\t\t\t\t\tdp.sendAllData();\r\n\t\t\t\t}\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tdp.setUpdateMode(dpMode);\r\n\t\t\t}\r\n\r\n\t\t\tif (needDbDelete){\r\n\t\t\t\tdp.storeItem(item);\r\n\t\t\t\tif (!dp.deleteAfterConfirmation){\r\n\t\t\t\t\tdp.setUpdated(id, true, \"deleted\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (dp.updateMode !== \"off\" && !dp._tSend) {\r\n\t\t\t\tdp.sendAllData();\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterLinkUpdate\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (gantt.isLinkExists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\t\tdp.setUpdated(id, true);\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterLinkAdd\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (gantt.isLinkExists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\t\tdp.setUpdated(id, true,\"inserted\");\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterLinkDelete\", function(id, item) { // tslint:disable-line\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\r\n\t\t\tconst needDbDelete = !clientSideDelete(id);\r\n\t\t\tif (!needDbDelete) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdp.storeItem(item);\r\n\t\t\tdp.setUpdated(id, true,\"deleted\");\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onRowDragEnd\", function(id, target) { // tslint:disable-line\r\n\t\t\tgantt._sendTaskOrder(id, gantt.getTask(id));\r\n\t\t}));\r\n\r\n\t\tlet tasks = null;\r\n\t\tlet links = null;\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onTaskIdChange\", function(oldId, newId) { // tslint:disable-line\r\n\t\t\tif (!dp._waitMode) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst children = gantt.getChildren(newId);\r\n\t\t\tif (children.length) {\r\n\t\t\t\ttasks = tasks || {};\r\n\r\n\t\t\t\tfor (let i = 0; i < children.length; i++) {\r\n\t\t\t\t\tconst ch = this.getTask(children[i]);\r\n\t\t\t\t\ttasks[ch.id] = ch;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst item = this.getTask(newId);\r\n\t\t\tconst itemLinks = getTaskLinks(item);\r\n\r\n\t\t\tif (itemLinks.length) {\r\n\t\t\t\tlinks = links || {};\r\n\r\n\t\t\t\tfor (let i = 0; i < itemLinks.length; i++) {\r\n\t\t\t\t\tconst link = this.getLink(itemLinks[i]);\r\n\t\t\t\t\tlinks[link.id] = link;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tdp.attachEvent(\"onAfterUpdateFinish\", function() {\r\n\t\t\tif (tasks || links) {\r\n\t\t\t\tgantt.batchUpdate(function() {\r\n\t\t\t\t\tfor (const id in tasks) {\r\n\t\t\t\t\t\tgantt.updateTask(tasks[id].id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (const id in links) {\r\n\t\t\t\t\t\tgantt.updateLink(links[id].id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttasks = null;\r\n\t\t\t\t\tlinks = null;\r\n\t\t\t\t});\r\n\t\t\t\tif (tasks) {\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"tasks\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"links\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"onBeforeDataSending\", function() {\r\n\t\t\tif (this._tMode === \"CUSTOM\") {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tlet url = this._serverProcessor;\r\n\t\t\tif (this._tMode === \"REST-JSON\" || this._tMode === \"REST\") {\r\n\t\t\t\tconst mode = this._ganttMode;\r\n\r\n\t\t\t\turl = url.substring(0, url.indexOf(\"?\") > -1 ? url.indexOf(\"?\") : url.length);\r\n\t\t\t\t// editing=true&\r\n\t\t\t\tthis.serverProcessor = url + (url.slice(-1) === \"/\" ? \"\" : \"/\") + mode;\r\n\t\t\t} else {\r\n\t\t\t\tconst pluralizedMode = this._ganttMode + \"s\";\r\n\t\t\t\tthis.serverProcessor = url + gantt.ajax.urlSeparator(url) + \"gantt_mode=\" + pluralizedMode;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"insertCallback\", function insertCallback(upd, id, parent, mode) { // tslint:disable-line\r\n\t\t\tconst data = upd.data || gantt.xml._xmlNodeToJSON(upd.firstChild);\r\n\t\t\tconst methods = {\r\n\t\t\t\tadd: gantt.addTask,\r\n\t\t\t\tisExist: gantt.isTaskExists\r\n\t\t\t};\r\n\t\t\tif (mode === \"links\") {\r\n\t\t\t\tmethods.add = gantt.addLink;\r\n\t\t\t\tmethods.isExist = gantt.isLinkExists;\r\n\t\t\t}\r\n\t\t\tif (methods.isExist.call(gantt, id)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdata.id = id;\r\n\t\t\tmethods.add.call(gantt, data);\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"updateCallback\", function updateCallback(upd, id) {\r\n\t\t\tconst data = upd.data || gantt.xml._xmlNodeToJSON(upd.firstChild);\r\n\t\t\tif (!gantt.isTaskExists(id)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst objData = gantt.getTask(id);\r\n\t\t\tfor (const key in data) {\r\n\t\t\t\tlet property = data[key];\r\n\t\t\t\tswitch (key) {\r\n\t\t\t\t\tcase \"id\":\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\tcase \"start_date\":\r\n\t\t\t\t\tcase \"end_date\":\r\n\t\t\t\t\t\tproperty = gantt.defined(gantt.templates.xml_date) ? gantt.templates.xml_date(property) : gantt.templates.parse_date(property);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"duration\":\r\n\t\t\t\t\t\tobjData.end_date = gantt.calculateEndDate({start_date: objData.start_date, duration: property, task:objData});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tobjData[key] = property;\r\n\t\t\t}\r\n\t\t\tgantt.updateTask(id);\r\n\t\t\tgantt.refreshData();\r\n\t\t});\r\n\t\tdp.attachEvent(\"deleteCallback\", function deleteCallback(upd, id, parent, mode) { // tslint:disable-line\r\n\t\t\tconst methods = {\r\n\t\t\t\tdelete: gantt.deleteTask,\r\n\t\t\t\tisExist: gantt.isTaskExists\r\n\t\t\t};\r\n\t\t\tif (mode === \"links\") {\r\n\t\t\t\tmethods.delete = gantt.deleteLink;\r\n\t\t\t\tmethods.isExist = gantt.isLinkExists;\r\n\t\t\t} else if(mode === \"assignment\") {\r\n\t\t\t\tmethods.delete = function(val) {\r\n\t\t\t\t\tgantt.$data.assignmentsStore.remove(val);\r\n\t\t\t\t};\r\n\t\t\t\tmethods.isExist = function(val){\r\n\t\t\t\t\treturn gantt.$data.assignmentsStore.exists(val);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tif (methods.isExist.call(gantt, id)) {\r\n\t\t\t\tmethods.delete.call(gantt, id);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.handleResourceCRUD(dp, gantt);\r\n\t\tthis.handleResourceAssignmentCRUD(dp, gantt);\r\n\t\tthis.handleBaselineCRUD(dp, gantt);\r\n\t}\r\n\r\n\tclientSideDelete(id, dp, gantt){\r\n\t\tconst updated = dp.updatedRows.slice();\r\n\t\tlet clientOnly = false;\r\n\r\n\t\tif(gantt.getUserData(id, \"!nativeeditor_status\", dp._ganttMode) === \"true_deleted\"){\r\n\t\t\tclientOnly = true;\r\n\t\t\tdp.setUpdated(id,false);\r\n\t\t}\r\n\r\n\t\tfor (let i = 0; i < updated.length && !dp._in_progress[id]; i++) {\r\n\t\t\tif (updated[i] === id) {\r\n\t\t\t\tif (gantt.getUserData(id, \"!nativeeditor_status\", dp._ganttMode) === \"inserted\") {\r\n\t\t\t\t\tclientOnly = true;\r\n\t\t\t\t}\r\n\t\t\t\tdp.setUpdated(id,false);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn clientOnly;\r\n\t}\r\n\r\n\thandleResourceAssignmentCRUD(dp, gantt){\r\n\t\tif(!gantt.config.resources || gantt.config.resources.dataprocessor_assignments !== true){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst assignmentsStore = gantt.getDatastore(gantt.config.resource_assignment_store);\r\n\t\tconst insertedTasks = {};\r\n\t\tconst pendingAssignments = {};\r\n\r\n\t\tgantt.attachEvent(\"onBeforeTaskAdd\", function(id, task){\r\n\t\t\tinsertedTasks[id] = true;\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tfunction putAssignmentToQueue(item){\r\n\t\t\tpendingAssignments[item.id] = item;\r\n\t\t\tinsertedTasks[item.task_id] = true;\r\n\t\t}\r\n\r\n\t\tfunction insertResourceAssignment(assignment){\r\n\t\t\tconst id = assignment.id;\r\n\t\t\tif (assignmentsStore.exists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"assignment\");\r\n\t\t\t\tdp.setUpdated(id, true,\"inserted\");\r\n\t\t\t}\r\n\t\t\tdelete pendingAssignments[id];\r\n\t\t}\r\n\r\n\t\tgantt.attachEvent(\"onTaskIdChange\", function(id, newId){\r\n\t\t\tdelete insertedTasks[id];\r\n\t\t});\r\n\r\n\t\tassignmentsStore.attachEvent(\"onAfterAdd\", (id, item) => {\r\n\t\t\tif(insertedTasks[item.task_id]){\r\n\t\t\t\t// inserting assignment of new task\r\n\t\t\t\t// task is not saved yet, need to wait till it gets permanent id and save assigmnents after that\r\n\t\t\t\tputAssignmentToQueue(item);\r\n\t\t\t}else{\r\n\t\t\t\tinsertResourceAssignment(item);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tassignmentsStore.attachEvent(\"onAfterUpdate\", (id, item) => {\r\n\t\t\tif (assignmentsStore.exists(id)) {\r\n\t\t\t\tif(pendingAssignments[id]){\r\n\t\t\t\t\tinsertResourceAssignment(item);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdp.setGanttMode(\"assignment\");\r\n\t\t\t\t\tdp.setUpdated(id, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tassignmentsStore.attachEvent(\"onAfterDelete\", (id, item) => {\r\n\t\t\tdp.setGanttMode(\"assignment\");\r\n\r\n\t\t\tconst needDbDelete = !this.clientSideDelete(id, dp, gantt);\r\n\t\t\tif (!needDbDelete) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdp.storeItem(item);\r\n\t\t\tdp.setUpdated(id, true,\"deleted\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\thandleResourceCRUD(dp, gantt){\r\n\t\tif(!gantt.config.resources || gantt.config.resources.dataprocessor_resources !== true){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst resourcesStore = gantt.getDatastore(gantt.config.resource_store);\r\n\r\n\t\tfunction insertResource(resource){\r\n\t\t\tconst id = resource.id;\r\n\t\t\tif (resourcesStore.exists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"resource\");\r\n\t\t\t\tdp.setUpdated(id, true,\"inserted\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tresourcesStore.attachEvent(\"onAfterAdd\", (id, item) => {\r\n\t\t\tinsertResource(item);\r\n\t\t});\r\n\r\n\t\tresourcesStore.attachEvent(\"onAfterUpdate\", (id, item) => {\r\n\t\t\tif (resourcesStore.exists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"resource\");\r\n\t\t\t\tdp.setUpdated(id, true);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tresourcesStore.attachEvent(\"onAfterDelete\", (id, item) => {\r\n\t\t\tdp.setGanttMode(\"resource\");\r\n\r\n\t\t\tconst needDbDelete = !this.clientSideDelete(id, dp, gantt);\r\n\t\t\tif (!needDbDelete) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdp.storeItem(item);\r\n\t\t\tdp.setUpdated(id, true,\"deleted\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\thandleBaselineCRUD(dp, gantt){\r\n\t\tif(!gantt.config.baselines || gantt.config.baselines.dataprocessor_baselines !== true){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst baselineStore = gantt.getDatastore(gantt.config.baselines.datastore);\r\n\r\n\t\tfunction insertResource(resource){\r\n\t\t\tconst id = resource.id;\r\n\t\t\tif (baselineStore.exists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"baseline\");\r\n\t\t\t\tdp.setUpdated(id, true,\"inserted\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tbaselineStore.attachEvent(\"onAfterAdd\", (id, item) => {\r\n\t\t\tinsertResource(item);\r\n\t\t});\r\n\r\n\t\tbaselineStore.attachEvent(\"onAfterUpdate\", (id, item) => {\r\n\t\t\tif (baselineStore.exists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"baseline\");\r\n\t\t\t\tdp.setUpdated(id, true);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tbaselineStore.attachEvent(\"onAfterDelete\", (id, item) => {\r\n\t\t\tdp.setGanttMode(\"baseline\");\r\n\r\n\t\t\tconst needDbDelete = !this.clientSideDelete(id, dp, gantt);\r\n\t\t\tif (!needDbDelete) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdp.storeItem(item);\r\n\t\t\tdp.setUpdated(id, true,\"deleted\");\r\n\t\t});\r\n\t}\r\n\r\n\tdetach() {\r\n\t\thelpers.forEach(this._dataProcessorHandlers, (e) => {\r\n\t\t\tthis.$gantt.detachEvent(e);\r\n\t\t});\r\n\t\tthis._dataProcessorHandlers = [];\r\n\t}\r\n}\r\n","import * as utils from \"../../utils/utils\";\r\n\r\nexport default class SimpleStorage {\r\n\tpublic static create = () : SimpleStorage => {\r\n\t\treturn new SimpleStorage();\r\n\t};\r\n\r\n\tprotected _storage: { [id: string]: any; };\r\n\r\n\tprotected constructor() {\r\n\t\tthis._storage = {};\r\n\t}\r\n\r\n\tpublic clear = (): void => {\r\n\t\tthis._storage = {};\r\n\t};\r\n\r\n\tpublic storeItem = (item: any): void => {\r\n\t\tthis._storage[item.id] = utils.copy(item);\r\n\t};\r\n\r\n\tpublic getStoredItem = (id: string): any => {\r\n\t\treturn this._storage[id] || null;\r\n\t};\r\n}","import eventable from \"../../utils/eventable\";\r\nimport * as helpers from \"../../utils/helpers\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport DataProcessorEvents from \"./data_processor_events\";\r\nimport extendGantt from \"./extend_gantt\";\r\nimport SimpleStorage from \"./simple_storage\";\r\nimport global from \"../../utils/global\";\r\n\r\nexport interface DataProcessor { // tslint:disable-line\r\n\t$gantt: any;\r\n\tdetachAllEvents: any;\r\n\tattachEvent: any;\r\n\tcallEvent: any;\r\n\r\n\tserverProcessor: string;\r\n\taction_param: string;\r\n\tupdatedRows: any[];\r\n\tautoUpdate: boolean;\r\n\tupdateMode: string;\r\n\tmessages: any[];\r\n\tstyles: object;\r\n\tdnd: any;\r\n\tdeleteAfterConfirmation?: any;\r\n}\r\n\r\nexport function createDataProcessor(config: any) {\r\n\tlet router;\r\n\tlet tMode;\r\n\tlet headers;\r\n\tif (config instanceof Function) {\r\n\t\trouter = config;\r\n\t} else if (config.hasOwnProperty(\"router\")) {\r\n\t\trouter = config.router;\r\n\t} else if (config.hasOwnProperty(\"assignment\") || config.hasOwnProperty(\"baseline\") || config.hasOwnProperty(\"link\") || config.hasOwnProperty(\"task\")) {\r\n\t\trouter = config;\r\n\t} else if(config.hasOwnProperty(\"headers\")){\r\n\t\t// GS-2312 for custom headers\r\n\t\theaders = config.headers;\r\n\t}\r\n\tif (router) {\r\n\t\ttMode = \"CUSTOM\";\r\n\t} else {\r\n\t\ttMode = config.mode || \"REST-JSON\";\r\n\t}\r\n\tconst gantt = this; // tslint:disable-line\r\n\tconst dp = new DataProcessor(config.url);\r\n\r\n\r\n\tdp.init(gantt);\r\n\tdp.setTransactionMode({\r\n\t\tmode: tMode,\r\n\t\trouter,\r\n\t\theaders\r\n\t}, config.batchUpdate);\r\n\tif(config.deleteAfterConfirmation){\r\n\t\tdp.deleteAfterConfirmation = config.deleteAfterConfirmation;\r\n\t}\r\n\treturn dp;\r\n}\r\n\r\nexport class DataProcessor {\r\n\tpublic modes: object;\r\n\tpublic serverProcessor: string;\r\n\tpublic action_param: string; // tslint:disable-line\r\n\tpublic updatedRows: any[];\r\n\tpublic autoUpdate: boolean;\r\n\tpublic updateMode: string;\r\n\tpublic messages: any[];\r\n\tpublic styles: object;\r\n\tpublic dnd: any;\r\n\r\n\tprotected _tMode: string;\r\n\tprotected _headers: any;\r\n\tprotected _payload: any;\r\n\tprotected _postDelim: string;\r\n\tprotected _waitMode: number;\r\n\tprotected _in_progress: object; // tslint:disable-line\r\n\tprotected _invalid: object;\r\n\tprotected _storage: SimpleStorage;\r\n\tprotected _tSend: boolean;\r\n\tprotected _serializeAsJson: boolean;\r\n\tprotected _router: any;\r\n\tprotected _utf: boolean;\r\n\tprotected _methods: any[];\r\n\tprotected _user: any;\r\n\tprotected _uActions: object;\r\n\tprotected _needUpdate: boolean;\r\n\tprotected _ganttMode: \"task\"|\"link\";\r\n\tprotected _routerParametersFormat: \"parameters\"|\"object\";\r\n\r\n\tprotected _silent_mode: any; // tslint:disable-line\r\n\tprotected _updateBusy: any;\r\n\tprotected _serverProcessor: any;\r\n\tprotected _initialized: boolean;\r\n\r\n\tconstructor(serverProcessorURL?) {\r\n\t\tthis.serverProcessor = serverProcessorURL;\r\n\t\tthis.action_param = \"!nativeeditor_status\";\r\n\r\n\t\tthis.updatedRows = []; // ids of updated rows\r\n\r\n\t\tthis.autoUpdate = true;\r\n\t\tthis.updateMode = \"cell\";\r\n\t\tthis._headers = null;\r\n\t\tthis._payload = null;\r\n\t\tthis._postDelim = \"_\";\r\n\t\tthis._routerParametersFormat = \"parameters\";\r\n\r\n\t\tthis._waitMode = 0;\r\n\t\tthis._in_progress = {}; // ?\r\n\t\tthis._storage = SimpleStorage.create();\r\n\t\tthis._invalid = {};\r\n\t\tthis.messages = [];\r\n\r\n\t\tthis.styles = {\r\n\t\t\tupdated: \"font-weight:bold;\",\r\n\t\t\tinserted: \"font-weight:bold;\",\r\n\t\t\tdeleted: \"text-decoration : line-through;\",\r\n\t\t\tinvalid: \"background-color:FFE0E0;\",\r\n\t\t\tinvalid_cell: \"border-bottom:2px solid red;\",\r\n\t\t\terror: \"color:red;\",\r\n\t\t\tclear: \"font-weight:normal;text-decoration:none;\"\r\n\t\t};\r\n\t\tthis.enableUTFencoding(true);\r\n\t\teventable(this);\r\n\t}\r\n\r\n\tsetTransactionMode(mode:any, total?:any) {\r\n\t\tif (typeof mode === \"object\") {\r\n\t\t\tthis._tMode = mode.mode || this._tMode;\r\n\r\n\t\t\tif (utils.defined(mode.headers)) {\r\n\t\t\t\tthis._headers = mode.headers;\r\n\t\t\t}\r\n\r\n\t\t\tif (utils.defined(mode.payload)) {\r\n\t\t\t\tthis._payload = mode.payload;\r\n\t\t\t}\r\n\t\t\tthis._tSend = !!total;\r\n\t\t} else {\r\n\t\t\tthis._tMode = mode;\r\n\t\t\tthis._tSend = total;\r\n\t\t}\r\n\r\n\t\tif (this._tMode === \"REST\") {\r\n\t\t\tthis._tSend = false;\r\n\t\t}\r\n\r\n\t\tif (this._tMode === \"JSON\" || this._tMode === \"REST-JSON\") {\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._serializeAsJson = true;\r\n\t\t\tthis._headers = this._headers || {};\r\n\t\t\tthis._headers[\"Content-Type\"] = \"application/json\";\r\n\t\t}else{\r\n\t\t\tif(this._headers && !this._headers[\"Content-Type\"]){\r\n\t\t\t\tthis._headers[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this._tMode === \"CUSTOM\") {\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._router = mode.router;\r\n\t\t}\r\n\t}\r\n\r\n\tescape(data:any) {\r\n\t\tif (this._utf) {\r\n\t\t\treturn encodeURIComponent(data);\r\n\t\t} else {\r\n\t\t\treturn escape(data);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: allows to set escaping mode\r\n\t * @param: true - utf based escaping, simple - use current page encoding\r\n\t * @type: public\r\n\t */\r\n\tenableUTFencoding(mode:boolean) {\r\n\t\tthis._utf = !!mode;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: get state of updating\r\n\t * @returns:   true - all in sync with server, false - some items not updated yet.\r\n\t * @type: public\r\n\t */\r\n\tgetSyncState() {\r\n\t\treturn !this.updatedRows.length;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: set if rows should be send to server automatically\r\n\t * @param: mode - \"row\" - based on row selection changed, \"cell\" - based on cell editing finished, \"off\" - manual data sending\r\n\t * @type: public\r\n\t */\r\n\tsetUpdateMode(mode: string, dnd: any) {\r\n\t\tthis.autoUpdate = (mode === \"cell\");\r\n\t\tthis.updateMode = mode;\r\n\t\tthis.dnd = dnd;\r\n\t}\r\n\r\n\tignore(code: any, master: any) {\r\n\t\tthis._silent_mode = true;\r\n\t\tcode.call(master || global);\r\n\t\tthis._silent_mode = false;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: mark row as updated/normal. check mandatory fields, initiate autoupdate (if turned on)\r\n\t * @param: rowId - id of row to set update-status for\r\n\t * @param: state - true for \"updated\", false for \"not updated\"\r\n\t * @param: mode - update mode name\r\n\t * @type: public\r\n\t */\r\n\tsetUpdated(rowId:number|string, state: boolean, mode?: string) {\r\n\t\tif (this._silent_mode) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst ind = this.findRow(rowId);\r\n\r\n\t\tmode = mode || \"updated\";\r\n\t\tconst existing = this.$gantt.getUserData(rowId, this.action_param, this._ganttMode);\r\n\t\tif (existing && mode === \"updated\") {\r\n\t\t\tmode = existing;\r\n\t\t}\r\n\t\tif (state) {\r\n\t\t\tthis.set_invalid(rowId, false); // clear previous error flag\r\n\t\t\tthis.updatedRows[ind] = rowId;\r\n\t\t\tthis.$gantt.setUserData(rowId, this.action_param, mode, this._ganttMode);\r\n\t\t\tif (this._in_progress[rowId]) {\r\n\t\t\t\tthis._in_progress[rowId] = \"wait\";\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (!this.is_invalid(rowId)) {\r\n\t\t\t\tthis.updatedRows.splice(ind, 1);\r\n\t\t\t\tthis.$gantt.setUserData(rowId, this.action_param, \"\", this._ganttMode);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.markRow(rowId, state, mode);\r\n\t\tif (state && this.autoUpdate) {\r\n\t\t\tthis.sendData(rowId);\r\n\t\t}\r\n\t}\r\n\r\n\tmarkRow(id: number | string, state: boolean, mode: string) {\r\n\t\tlet str = \"\";\r\n\t\tconst invalid = this.is_invalid(id);\r\n\t\tif (invalid) {\r\n\t\t\tstr = this.styles[invalid];\r\n\t\t\tstate = true;\r\n\t\t}\r\n\t\tif (this.callEvent(\"onRowMark\", [id, state, mode, invalid])) {\r\n\t\t\t// default logic\r\n\t\t\tstr = this.styles[state ? mode : \"clear\"] + \" \" + str;\r\n\r\n\t\t\tthis.$gantt[this._methods[0]](id, str);\r\n\r\n\t\t\tif (invalid && invalid.details) {\r\n\t\t\t\tstr += this.styles[invalid + \"_cell\"];\r\n\t\t\t\tfor (let i = 0; i < invalid.details.length; i++) {\r\n\t\t\t\t\tif (invalid.details[i]) {\r\n\t\t\t\t\t\tthis.$gantt[this._methods[1]](id, i, str);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetActionByState(state: string):string {\r\n\t\tif (state === \"inserted\") {\r\n\t\t\treturn \"create\";\r\n\t\t}\r\n\r\n\t\tif (state === \"updated\") {\r\n\t\t\treturn \"update\";\r\n\t\t}\r\n\r\n\t\tif (state === \"deleted\") {\r\n\t\t\treturn \"delete\";\r\n\t\t}\r\n\r\n\t\t// reorder\r\n\t\treturn \"update\";\r\n\t}\r\n\r\n\tgetState(id: number | string) {\r\n\t\treturn this.$gantt.getUserData(id, this.action_param, this._ganttMode);\r\n\t}\r\n\r\n\tis_invalid(id: number | string) {\r\n\t\treturn this._invalid[id];\r\n\t}\r\n\r\n\tset_invalid(id: number | string, mode: any, details?) {\r\n\t\tif (details) {\r\n\t\t\tmode = {\r\n\t\t\t\tvalue: mode,\r\n\t\t\t\tdetails,\r\n\t\t\t\ttoString: function() { // tslint:disable-line\r\n\t\t\t\t\treturn this.value.toString();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\tthis._invalid[id] = mode;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: check mandatory fields and verify values of cells, initiate update (if specified). Can be redefined in order to provide custom validation\r\n\t * @param: rowId - id of row to set update-status for\r\n\t * @type: public\r\n\t */\r\n\t// tslint:disable-next-line\r\n\tcheckBeforeUpdate(rowId: number | string) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: send row(s) values to server\r\n\t * @param: rowId - id of row which data to send. If not specified, then all \"updated\" rows will be send\r\n\t * @type: public\r\n\t */\r\n\tsendData(rowId?: any) {\r\n\t\tif (this.$gantt.editStop) {\r\n\t\t\tthis.$gantt.editStop();\r\n\t\t}\r\n\r\n\t\tif (typeof rowId === \"undefined\" || this._tSend) {\r\n\r\n\t\t\tconst pendingUpdateModes = [];\r\n\t\t\tif(this.modes){\r\n\t\t\t\tconst knownModes = [\"task\", \"link\", \"assignment\", \"baseline\"];\r\n\t\t\t\tknownModes.forEach((mode) => {\r\n\t\t\t\t\tif(this.modes[mode] && this.modes[mode].updatedRows.length){\r\n\t\t\t\t\t\tpendingUpdateModes.push(mode);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (pendingUpdateModes.length){\r\n\t\t\t\tfor(let i = 0; i < pendingUpdateModes.length; i++){\r\n\t\t\t\t\tthis.setGanttMode(pendingUpdateModes[i]);\r\n\t\t\t\t\tthis.sendAllData();\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.sendAllData();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._in_progress[rowId]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.messages = [];\r\n\t\tif (!this.checkBeforeUpdate(rowId) && this.callEvent(\"onValidationError\", [rowId, this.messages])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis._beforeSendData(this._getRowData(rowId), rowId);\r\n\t}\r\n\r\n\tserialize(data: any, id: any) {\r\n\t\tif (this._serializeAsJson) {\r\n\t\t\treturn  this._serializeAsJSON(data);\r\n\t\t}\r\n\r\n\t\tif (typeof data === \"string\") {\r\n\t\t\treturn data;\r\n\t\t}\r\n\t\tif (typeof id !== \"undefined\") {\r\n\t\t\treturn this.serialize_one(data, \"\");\r\n\t\t} else {\r\n\t\t\tconst stack = [];\r\n\t\t\tconst keys = [];\r\n\t\t\tfor (const key in data) {\r\n\t\t\t\tif (data.hasOwnProperty(key)) {\r\n\t\t\t\t\tstack.push(this.serialize_one(data[key], key + this._postDelim));\r\n\t\t\t\t\tkeys.push(key);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstack.push(\"ids=\" + this.escape(keys.join(\",\")));\r\n\t\t\tif (this.$gantt.security_key) {\r\n\t\t\t\tstack.push(\"dhx_security=\" + this.$gantt.security_key);\r\n\t\t\t}\r\n\t\t\treturn stack.join(\"&\");\r\n\t\t}\r\n\t}\r\n\r\n\tserialize_one(data: any, pref: string) {\r\n\t\tif (typeof data === \"string\") {\r\n\t\t\treturn data;\r\n\t\t}\r\n\t\tconst stack: string[] = [];\r\n\t\tlet serialized = \"\";\r\n\t\tfor (const key in data)\r\n\t\t\tif (data.hasOwnProperty(key)) {\r\n\t\t\t\tif ((key === \"id\" ||\r\n\t\t\t\t\tkey == this.action_param) && // tslint:disable-line\r\n\t\t\t\t\tthis._tMode === \"REST\") {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof data[key] === \"string\" || typeof data[key] === \"number\") {\r\n\t\t\t\t\tserialized = String(data[key]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tserialized = JSON.stringify(data[key]);\r\n\t\t\t\t}\r\n\t\t\t\tstack.push(this.escape((pref || \"\") + key) + \"=\" + this.escape(serialized));\r\n\t\t\t}\r\n\t\treturn stack.join(\"&\");\r\n\t}\r\n\r\n\tsendAllData() {\r\n\t\tif (!this.updatedRows.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.messages = [];\r\n\t\tlet valid: any = true;\r\n\r\n\t\tthis._forEachUpdatedRow(function(rowId) {\r\n\t\t\tvalid = valid && this.checkBeforeUpdate(rowId);\r\n\t\t});\r\n\r\n\t\tif (!valid && !this.callEvent(\"onValidationError\", [\"\", this.messages])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (this._tSend) {\r\n\t\t\tthis._sendData(this._getAllData());\r\n\t\t} else {\r\n\t\t\t// this.updatedRows can be spliced from onBeforeUpdate via dp.setUpdated false\r\n\t\t\t// use an iterator instead of for(var i = 0; i < this.updatedRows; i++) then\r\n\t\t\tthis._forEachUpdatedRow(function(rowId) {\r\n\t\t\t\tif (!this._in_progress[rowId]) {\r\n\t\t\t\t\tif (this.is_invalid(rowId)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._beforeSendData(this._getRowData(rowId), rowId);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfindRow(pattern: any) {\r\n\t\tlet i = 0;\r\n\t\tfor (i = 0; i < this.updatedRows.length; i++) {\r\n\t\t\tif (pattern == this.updatedRows[i]) { // tslint:disable-line\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn i;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: define custom actions\r\n\t * @param: name - name of action, same as value of action attribute\r\n\t * @param: handler - custom function, which receives a XMl response content for action\r\n\t * @type: private\r\n\t */\r\n\tdefineAction(name: string, handler: any) {\r\n\t\tif (!this._uActions) {\r\n\t\t\tthis._uActions = {};\r\n\t\t}\r\n\t\tthis._uActions[name] = handler;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: used in combination with setOnBeforeUpdateHandler to create custom client-server transport system\r\n\t * @param: sid - id of item before update\r\n\t * @param: tid - id of item after up0ate\r\n\t * @param: action - action name\r\n\t * @type: public\r\n\t * @topic: 0\r\n\t */\r\n\tafterUpdateCallback(sid: number | string, tid: number | string, action: string, btag: any, ganttMode: string) {\r\n\t\tif(!this.$gantt){\r\n\t\t\t// destructor has been called before the callback\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.setGanttMode(ganttMode);\r\n\r\n\t\tconst marker = sid;\r\n\t\tconst correct = (action !== \"error\" && action !== \"invalid\");\r\n\t\tif (!correct) {\r\n\t\t\tthis.set_invalid(sid, action);\r\n\t\t}\r\n\t\tif ((this._uActions) && (this._uActions[action]) && (!this._uActions[action](btag))) {\r\n\t\t\treturn (delete this._in_progress[marker]);\r\n\t\t}\r\n\r\n\t\tif (this._in_progress[marker] !== \"wait\") {\r\n\t\t\tthis.setUpdated(sid, false);\r\n\t\t}\r\n\r\n\t\tconst originalSid = sid;\r\n\r\n\t\tswitch (action) {\r\n\t\t\tcase \"inserted\":\r\n\t\t\tcase \"insert\":\r\n\t\t\t\tif (tid != sid) { // tslint:disable-line\r\n\t\t\t\t\tthis.setUpdated(sid, false);\r\n\t\t\t\t\tthis.$gantt[this._methods[2]](sid, tid);\r\n\t\t\t\t\tsid = tid;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"delete\":\r\n\t\t\tcase \"deleted\":\r\n\t\t\t\tif(!this.deleteAfterConfirmation || this._ganttMode !== \"task\"){\r\n\t\t\t\t\tthis.$gantt.setUserData(sid, this.action_param, \"true_deleted\", this._ganttMode);\r\n\t\t\t\t\tthis.$gantt[this._methods[3]](sid);\r\n\t\t\t\t\tdelete this._in_progress[marker];\r\n\t\t\t\t\treturn this.callEvent(\"onAfterUpdate\", [sid, action, tid, btag]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif (this._ganttMode === \"task\" && this.$gantt.isTaskExists(sid)) {\r\n\t\t\t\t\t\tthis.$gantt.setUserData(sid, this.action_param, \"true_deleted\", this._ganttMode);\r\n\t\t\t\t\t\tconst task = this.$gantt.getTask(sid);\r\n\t\t\t\t\t\tthis.$gantt.silent(() => {\r\n\t\t\t\t\t\t\tthis.$gantt.deleteTask(sid);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.$gantt.callEvent(\"onAfterTaskDelete\", [sid, task]);\r\n\t\t\t\t\t\tthis.$gantt.render();\r\n\t\t\t\t\t\tdelete this._in_progress[marker];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this.callEvent(\"onAfterUpdate\", [sid, action, tid, btag]);\r\n\t\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif (this._in_progress[marker] !== \"wait\") {\r\n\t\t\tif (correct) {\r\n\t\t\t\tthis.$gantt.setUserData(sid, this.action_param, \"\", this._ganttMode);\r\n\t\t\t}\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t} else {\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t\tthis.setUpdated(tid, true, this.$gantt.getUserData(sid, this.action_param, this._ganttMode));\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterUpdate\", [originalSid, action, tid, btag]);\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: response from server\r\n\t * @param: xml - XMLLoader object with response XML\r\n\t * @type: private\r\n\t */\r\n\tafterUpdate(that: any, xml: any, id?:any) {\r\n\t\tlet _xml;\r\n\t\tif (arguments.length === 3) {\r\n\t\t\t_xml = arguments[1];\r\n\t\t} else {\r\n\t\t\t// old dataprocessor\r\n\t\t\t_xml = arguments[4];\r\n\t\t}\r\n\t\tlet mode = this.getGanttMode();\r\n\t\tconst reqUrl = _xml.filePath || _xml.url;\r\n\r\n\t\tif (this._tMode !== \"REST\" && this._tMode !== \"REST-JSON\") {\r\n\t\t\tif (reqUrl.indexOf(\"gantt_mode=links\") !== -1) {\r\n\t\t\t\tmode = \"link\";\r\n\t\t\t} else if (reqUrl.indexOf(\"gantt_mode=assignments\") !== -1) {\r\n\t\t\t\tmode = \"assignment\";\r\n\t\t\t} else if (reqUrl.indexOf(\"gantt_mode=baselines\") !== -1) {\r\n\t\t\t\tmode = \"baseline\";\r\n\t\t\t} else {\r\n\t\t\t\tmode = \"task\";\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (reqUrl.indexOf(\"/link\") >= 0) {\r\n\t\t\t\tmode = \"link\";\r\n\t\t\t} else if(reqUrl.indexOf(\"/assignment\") >= 0){\r\n\t\t\t\tmode = \"assignment\";\r\n\t\t\t} else if(reqUrl.indexOf(\"/baseline\") >= 0){\r\n\t\t\t\tmode = \"baseline\";\r\n\t\t\t} else {\r\n\t\t\t\tmode = \"task\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setGanttMode(mode);\r\n\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\t\t// try to use json first\r\n\t\tlet tag;\r\n\r\n\t\ttry {\r\n\t\t\ttag = JSON.parse(xml.xmlDoc.responseText);\r\n\t\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n\t\t} catch (e) {\r\n\r\n\t\t\t// empty response also can be processed by json handler\r\n\t\t\tif (!xml.xmlDoc.responseText.length) {\r\n\t\t\t\ttag = {};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst processCallback = (itemId: any) => {\r\n\t\t\tconst action = tag.action || this.getState(itemId) || \"updated\";\r\n\t\t\tconst sid = tag.sid || itemId[0];\r\n\t\t\tconst tid = tag.tid || itemId[0];\r\n\t\t\tthat.afterUpdateCallback(sid, tid, action, tag, mode);\r\n\t\t};\r\n\t\tif (tag) {\r\n\t\t\t// GS-753. When multiple tasks are updated, unhighlight all of them\r\n\t\t\tif (Array.isArray(id) && id.length > 1) {\r\n\t\t\t\tid.forEach((taskId) => processCallback(taskId));\r\n\t\t\t} else {\r\n\t\t\t\tprocessCallback(id);\r\n\t\t\t}\r\n\t\t\tthat.finalizeUpdate();\r\n\t\t\tthis.setGanttMode(mode);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// xml response\r\n\t\tconst top = ajax.xmltop(\"data\", xml.xmlDoc); // fix incorrect content type in IE\r\n\t\tif (!top) {\r\n\t\t\treturn this.cleanUpdate(id);\r\n\t\t}\r\n\t\tconst atag = ajax.xpath(\"//data/action\", top);\r\n\t\tif (!atag.length) {\r\n\t\t\treturn this.cleanUpdate(id);\r\n\t\t}\r\n\r\n\t\tfor (let i = 0; i < atag.length; i++) {\r\n\t\t\tconst btag = atag[i];\r\n\t\t\tconst action = btag.getAttribute(\"type\");\r\n\t\t\tconst sid = btag.getAttribute(\"sid\");\r\n\t\t\tconst tid = btag.getAttribute(\"tid\");\r\n\r\n\t\t\tthat.afterUpdateCallback(sid, tid, action, btag, mode);\r\n\t\t}\r\n\t\tthat.finalizeUpdate();\r\n\t}\r\n\r\n\tcleanUpdate(id: any[]) {\r\n\t\tif (id) {\r\n\t\t\tfor (let i = 0; i < id.length; i++) {\r\n\t\t\t\tdelete this._in_progress[id[i]];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfinalizeUpdate() {\r\n\t\tif (this._waitMode) {\r\n\t\t\tthis._waitMode--;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterUpdateFinish\", []);\r\n\t\tif (!this.updatedRows.length) {\r\n\t\t\tthis.callEvent(\"onFullSync\", []);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: initializes data-processor\r\n\t * @param: gantt - dhtmlxGantt object to attach this data-processor to\r\n\t * @type: public\r\n\t */\r\n\tinit(gantt: any) {\r\n\t\tif (this._initialized) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.$gantt = gantt;\r\n\t\tif (this.$gantt._dp_init) {\r\n\t\t\tthis.$gantt._dp_init(this);\r\n\t\t}\r\n\r\n\t\tthis._setDefaultTransactionMode();\r\n\r\n\t\tthis.styles = {\r\n\t\t\tupdated:\"gantt_updated\",\r\n\t\t\torder:\"gantt_updated\",\r\n\t\t\tinserted:\"gantt_inserted\",\r\n\t\t\tdeleted:\"gantt_deleted\",\r\n\t\t\tdelete_confirmation:\"gantt_deleted\",\r\n\t\t\tinvalid:\"gantt_invalid\",\r\n\t\t\terror:\"gantt_error\",\r\n\t\t\tclear:\"\"\r\n\t\t};\r\n\r\n\t\tthis._methods=[\"_row_style\",\"setCellTextStyle\",\"_change_id\",\"_delete_task\"];\r\n\t\textendGantt(this.$gantt, this);\r\n\t\tconst dataProcessorEvents = new DataProcessorEvents(this.$gantt, this);\r\n\t\tdataProcessorEvents.attach();\r\n\t\tthis.attachEvent(\"onDestroy\", function() {\r\n\t\t\tdelete this.setGanttMode;\r\n\t\t\tdelete this._getRowData;\r\n\r\n\t\t\tdelete this.$gantt._dp;\r\n\t\t\tdelete this.$gantt._change_id;\r\n\t\t\tdelete this.$gantt._row_style;\r\n\t\t\tdelete this.$gantt._delete_task;\r\n\t\t\tdelete this.$gantt._sendTaskOrder;\r\n\t\t\tdelete this.$gantt;\r\n\r\n\t\t\tdataProcessorEvents.detach();\r\n\t\t});\r\n\t\tthis.$gantt.callEvent(\"onDataProcessorReady\", [this]);\r\n\t\tthis._initialized = true;\r\n\t}\r\n\r\n\tsetOnAfterUpdate(handler) {\r\n\t\tthis.attachEvent(\"onAfterUpdate\", handler);\r\n\t}\r\n\r\n\tsetOnBeforeUpdateHandler(handler) {\r\n\t\tthis.attachEvent(\"onBeforeDataSending\", handler);\r\n\t}\r\n\r\n\t/* starts autoupdate mode\r\n\t\t@param interval time interval for sending update requests\r\n\t*/\r\n\tsetAutoUpdate(interval, user) {\r\n\t\tinterval = interval || 2000;\r\n\r\n\t\tthis._user = user || (new Date()).valueOf();\r\n\t\tthis._needUpdate = false;\r\n\r\n\t\tthis._updateBusy = false;\r\n\r\n\t\tthis.attachEvent(\"onAfterUpdate\", this.afterAutoUpdate); // arguments sid, action, tid, xml_node;\r\n\r\n\t\tthis.attachEvent(\"onFullSync\", this.fullSync);\r\n\r\n\t\tsetInterval(() => {\r\n\t\t\tthis.loadUpdate();\r\n\t\t}, interval);\r\n\t}\r\n\r\n\t/* process updating request response\r\n\t\tif status == collision version is deprecated\r\n\t\tset flag for autoupdating immediately\r\n\t*/\r\n\tafterAutoUpdate(sid, action, tid, xml_node) { // tslint:disable-line\r\n\t\tif (action === \"collision\") {\r\n\t\t\tthis._needUpdate = true;\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\t/* callback function for onFillSync event\r\n\t\tcall update function if it's need\r\n\t*/\r\n\tfullSync() {\r\n\t\tif (this._needUpdate) {\r\n\t\t\tthis._needUpdate = false;\r\n\t\t\tthis.loadUpdate();\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/* sends query to the server and call callback function\r\n\t*/\r\n\tgetUpdates(url, callback) {\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\t\tif (this._updateBusy) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\tthis._updateBusy = true;\r\n\t\t}\r\n\r\n\t\tajax.get(url, callback);\r\n\r\n\t}\r\n\r\n\t/* loads updates and processes them\r\n\t*/\r\n\tloadUpdate() {\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\t\tconst version = this.$gantt.getUserData(0, \"version\", this._ganttMode);\r\n\t\tlet url = this.serverProcessor + ajax.urlSeparator(this.serverProcessor) + [\"dhx_user=\" + this._user, \"dhx_version=\" + version].join(\"&\");\r\n\t\turl = url.replace(\"editing=true&\", \"\");\r\n\t\tthis.getUpdates(url, (xml) => {\r\n\t\t\tconst vers = ajax.xpath(\"//userdata\", xml);\r\n\t\t\tthis.$gantt.setUserData(0, \"version\", this._getXmlNodeValue(vers[0]), this._ganttMode);\r\n\r\n\t\t\tconst updates = ajax.xpath(\"//update\", xml);\r\n\t\t\tif (updates.length) {\r\n\t\t\t\tthis._silent_mode = true;\r\n\r\n\t\t\t\tfor (let i = 0; i < updates.length; i++) {\r\n\t\t\t\t\tconst status = updates[i].getAttribute(\"status\");\r\n\t\t\t\t\tconst id = updates[i].getAttribute(\"id\");\r\n\t\t\t\t\tconst parent = updates[i].getAttribute(\"parent\");\r\n\t\t\t\t\tswitch (status) {\r\n\t\t\t\t\t\tcase \"inserted\":\r\n\t\t\t\t\t\t\tthis.callEvent(\"insertCallback\", [updates[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"updated\":\r\n\t\t\t\t\t\t\tthis.callEvent(\"updateCallback\", [updates[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"deleted\":\r\n\t\t\t\t\t\t\tthis.callEvent(\"deleteCallback\", [updates[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._silent_mode = false;\r\n\t\t\t}\r\n\r\n\t\t\tthis._updateBusy = false;\r\n\t\t});\r\n\t}\r\n\r\n\tdestructor() {\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\r\n\t\tthis.updatedRows = [];\r\n\t\tthis._in_progress = {}; // ?\r\n\t\tthis._invalid = {};\r\n\t\tthis._storage.clear();\r\n\t\tthis._storage = null;\r\n\t\tthis._headers = null;\r\n\t\tthis._payload = null;\r\n\t\tdelete this._initialized;\r\n\t}\r\n\r\n\tsetGanttMode(mode) {\r\n\t\tif (mode === \"tasks\") {\r\n\t\t\tmode = \"task\";\r\n\t\t} else if (mode === \"links\") {\r\n\t\t\tmode = \"link\";\r\n\t\t}\r\n\r\n\t\tconst modes = this.modes || {};\r\n\t\tconst ganttMode = this.getGanttMode();\r\n\t\tif (ganttMode) {\r\n\t\t\tmodes[ganttMode] = {\r\n\t\t\t\t_in_progress : this._in_progress,\r\n\t\t\t\t_invalid: this._invalid,\r\n\t\t\t\t_storage: this._storage,\r\n\t\t\t\tupdatedRows : this.updatedRows\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tlet newState = modes[mode];\r\n\t\tif (!newState) {\r\n\t\t\tnewState = modes[mode] = {\r\n\t\t\t\t_in_progress : {},\r\n\t\t\t\t_invalid : {},\r\n\t\t\t\t_storage : SimpleStorage.create(),\r\n\t\t\t\tupdatedRows : []\r\n\t\t\t};\r\n\t\t}\r\n\t\tthis._in_progress = newState._in_progress;\r\n\t\tthis._invalid = newState._invalid;\r\n\t\tthis._storage = newState._storage;\r\n\t\tthis.updatedRows = newState.updatedRows;\r\n\t\tthis.modes = modes;\r\n\t\tthis._ganttMode = mode;\r\n\t}\r\n\tgetGanttMode():string {\r\n\t\treturn this._ganttMode;\r\n\t}\r\n\r\n\tstoreItem(item) {\r\n\t\tthis._storage.storeItem(item);\r\n\t}\r\n\r\n\turl(url: string) {\r\n\t\tthis.serverProcessor = this._serverProcessor = url;\r\n\t}\r\n\r\n\tprotected _beforeSendData(data: any, rowId: any) {\r\n\t\tif (!this.callEvent(\"onBeforeUpdate\", [rowId, this.getState(rowId), data])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis._sendData(data, rowId);\r\n\t}\r\n\r\n\tprotected _serializeAsJSON(data: any) {\r\n\t\tif (typeof data === \"string\") {\r\n\t\t\treturn data;\r\n\t\t}\r\n\r\n\t\tconst copy = utils.copy(data);\r\n\t\tif (this._tMode === \"REST-JSON\") {\r\n\t\t\tdelete copy.id;\r\n\t\t\tdelete copy[this.action_param];\r\n\t\t}\r\n\r\n\t\treturn JSON.stringify(copy);\r\n\t}\r\n\r\n\tprotected _applyPayload(url: string) {\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\t\tif (this._payload) {\r\n\t\t\tfor (const key in this._payload) {\r\n\t\t\t\turl = url + ajax.urlSeparator(url) + this.escape(key) + \"=\" + this.escape(this._payload[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn url;\r\n\t}\r\n\r\n\t// GET/POST/JSON modes of the dataProcessor didn't send the whole data items in 'delete' requests\r\n\t// clear extra info from the data in order not to change the request format\r\n\tprotected _cleanupArgumentsBeforeSend(dataToSend: any) {\r\n\t\tlet processedData;\r\n\t\tif(dataToSend[this.action_param] === undefined){// hash of updated items, and not an individual item\r\n\t\t\tprocessedData = {};\r\n\t\t\tfor(const i in dataToSend) {\r\n\t\t\t\tprocessedData[i] = this._cleanupArgumentsBeforeSend(dataToSend[i]);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tprocessedData = this._cleanupItemBeforeSend(dataToSend);\r\n\t\t}\r\n\t\treturn processedData;\r\n\t}\r\n\tprotected _cleanupItemBeforeSend(updatedItem: any) {\r\n\t\tlet output = null;\r\n\t\tif(updatedItem){\r\n\t\t\tif(updatedItem[this.action_param] === \"deleted\"){\r\n\t\t\t\toutput = {};\r\n\t\t\t\toutput.id = updatedItem.id;\r\n\t\t\t\toutput[this.action_param] = updatedItem[this.action_param];\r\n\t\t\t}else{\r\n\t\t\t\toutput = updatedItem;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tprotected _sendData(dataToSend: any, rowId?: any) {\r\n\t\tif (!dataToSend) {\r\n\t\t\treturn; // nothing to send\r\n\t\t}\r\n\t\tif (!this.callEvent(\"onBeforeDataSending\", rowId ? [rowId, this.getState(rowId), dataToSend] : [null, null, dataToSend])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (rowId) {\r\n\t\t\tthis._in_progress[rowId] = (new Date()).valueOf();\r\n\t\t}\r\n\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\r\n\t\tif (this._tMode === \"CUSTOM\") {\r\n\t\t\tconst taskState = this.getState(rowId);\r\n\t\t\tconst taskAction = this.getActionByState(taskState);\r\n\t\t\tdelete dataToSend[this.action_param]; // not send !nativeeditor_status parameter in router mode\r\n\t\t\tconst ganttMode = this.getGanttMode();\r\n\t\t\tconst _onResolvedCreateUpdate = (tag) => {\r\n\t\t\t\tlet action = taskState || \"updated\";\r\n\t\t\t\tlet sid = rowId;\r\n\t\t\t\tlet tid = rowId;\r\n\r\n\t\t\t\tif (tag) {\r\n\t\t\t\t\taction = tag.action || taskState;\r\n\t\t\t\t\tsid = tag.sid || sid;\r\n\t\t\t\t\ttid = tag.id || tag.tid || tid;\r\n\t\t\t\t}\r\n\t\t\t\tthis.afterUpdateCallback(sid, tid, action, tag, ganttMode);\r\n\t\t\t};\r\n\r\n\t\t\tlet actionPromise;\r\n\t\t\tif (this._router instanceof Function) {\r\n\t\t\t\tif(this._routerParametersFormat === \"object\"){\r\n\t\t\t\t\tconst obj = {\r\n\t\t\t\t\t\tentity: ganttMode,\r\n\t\t\t\t\t\taction: taskAction,\r\n\t\t\t\t\t\tdata: dataToSend,\r\n\t\t\t\t\t\tid: rowId\r\n\t\t\t\t\t};\r\n\t\t\t\t\tactionPromise = this._router(obj);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tactionPromise = this._router(ganttMode, taskAction, dataToSend, rowId);\r\n\t\t\t\t}\r\n\t\t\t} else if (this._router[ganttMode] instanceof Function) {\r\n\t\t\t\tactionPromise = this._router[ganttMode](taskAction, dataToSend, rowId);\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconst errorMsgStart = \"Incorrect configuration of gantt.createDataProcessor\";\r\n\t\t\t\tconst errorMsgEnd = `\r\nYou need to either add missing properties to the dataProcessor router object or to use a router function.\r\nSee https://docs.dhtmlx.com/gantt/desktop__server_side.html#customrouting and https://docs.dhtmlx.com/gantt/api__gantt_createdataprocessor.html for details.`;\r\n\r\n\t\t\t\tif(!this._router[ganttMode]){\r\n\t\t\t\t\tthrow new Error(`${errorMsgStart}: router for the **${ganttMode}** entity is not defined. ${errorMsgEnd}`);\r\n\t\t\t\t}\r\n\t\t\t\tswitch (taskState) {\r\n\t\t\t\t\tcase \"inserted\":\r\n\t\t\t\t\t\tif(!this._router[ganttMode].create){\r\n\t\t\t\t\t\t\tthrow new Error(`${errorMsgStart}: **create** action for the **${ganttMode}** entity is not defined. ${errorMsgEnd}`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tactionPromise = this._router[ganttMode].create(dataToSend);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"deleted\":\r\n\t\t\t\t\t\tif(!this._router[ganttMode].delete){\r\n\t\t\t\t\t\t\tthrow new Error(`${errorMsgStart}: **delete** action for the **${ganttMode}** entity is not defined. ${errorMsgEnd}`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tactionPromise = this._router[ganttMode].delete(rowId);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tif(!this._router[ganttMode].update){\r\n\t\t\t\t\t\t\tthrow new Error(`${errorMsgStart}: **update**\" action for the **${ganttMode}** entity is not defined. ${errorMsgEnd}`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tactionPromise = this._router[ganttMode].update(dataToSend, rowId);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(actionPromise){\r\n\t\t\t\t// neither promise nor {tid: newId} response object\r\n\t\t\t\tif(!actionPromise.then &&\r\n\t\t\t\t\t(actionPromise.id === undefined && actionPromise.tid === undefined && actionPromise.action === undefined)){\r\n\t\t\t\t\tthrow new Error(\"Incorrect router return value. A Promise or a response object is expected\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(actionPromise.then){\r\n\t\t\t\t\tactionPromise.then(_onResolvedCreateUpdate).catch((error) => {\r\n\t\t\t\t\t\tif(error && error.action){\r\n\t\t\t\t\t\t\t_onResolvedCreateUpdate(error);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t_onResolvedCreateUpdate({ action: \"error\", value: error});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// custom method may return a response object in case of sync action\r\n\t\t\t\t\t_onResolvedCreateUpdate(actionPromise);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t_onResolvedCreateUpdate(null);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet queryParams: any;\r\n\t\tqueryParams = {\r\n\t\t\tcallback: (xml) => {\r\n\t\t\t\tconst ids = [];\r\n\r\n\t\t\t\tif (rowId) {\r\n\t\t\t\t\tids.push(rowId);\r\n\t\t\t\t} else if (dataToSend) {\r\n\t\t\t\t\tfor (const key in dataToSend) {\r\n\t\t\t\t\t\tids.push(key);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this.afterUpdate(this, xml, ids);\r\n\t\t\t},\r\n\t\t\theaders: this._headers\r\n\t\t};\r\n\r\n\t\tconst dhxVersion = \"dhx_version=\" + this.$gantt.getUserData(0, \"version\", this._ganttMode);\r\n\t\tconst urlParams = this.serverProcessor + (this._user ? (ajax.urlSeparator(this.serverProcessor) + [\"dhx_user=\" + this._user, dhxVersion].join(\"&\")) : \"\");\r\n\t\tlet url: any = this._applyPayload(urlParams);\r\n\t\tlet data;\r\n\r\n\t\tswitch (this._tMode) {\r\n\t\t\tcase \"GET\":\r\n\t\t\t\tdata = this._cleanupArgumentsBeforeSend(dataToSend);\r\n\t\t\t\tqueryParams.url = url + ajax.urlSeparator(url) + this.serialize(data, rowId);\r\n\t\t\t\tqueryParams.method = \"GET\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"POST\":\r\n\t\t\t\tdata = this._cleanupArgumentsBeforeSend(dataToSend);\r\n\t\t\t\tqueryParams.url = url;\r\n\t\t\t\tqueryParams.method = \"POST\";\r\n\t\t\t\tqueryParams.data = this.serialize(data, rowId);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"JSON\":\r\n\t\t\t\tdata = {};\r\n\t\t\t\tconst preprocessedData = this._cleanupItemBeforeSend(dataToSend);\r\n\t\t\t\tfor (const key in preprocessedData) {\r\n\t\t\t\t\tif (key === this.action_param || key === \"id\" || key === \"gr_id\") {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdata[key] = preprocessedData[key];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tqueryParams.url = url;\r\n\t\t\t\tqueryParams.method = \"POST\";\r\n\t\t\t\tqueryParams.data = JSON.stringify({\r\n\t\t\t\t\tid: rowId,\r\n\t\t\t\t\taction: dataToSend[this.action_param],\r\n\t\t\t\t\tdata\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"REST\":\r\n\t\t\tcase \"REST-JSON\":\r\n\t\t\t\turl = urlParams.replace(/(&|\\?)editing=true/, \"\");\r\n\t\t\t\tdata = \"\";\r\n\r\n\t\t\t\tswitch (this.getState(rowId)) {\r\n\t\t\t\t\tcase \"inserted\":\r\n\t\t\t\t\t\tqueryParams.method = \"POST\";\r\n\t\t\t\t\t\tqueryParams.data = this.serialize(dataToSend, rowId);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"deleted\":\r\n\t\t\t\t\t\tqueryParams.method = \"DELETE\";\r\n\t\t\t\t\t\turl = url + (url.slice(-1) === \"/\" ? \"\" : \"/\") + rowId;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tqueryParams.method = \"PUT\";\r\n\t\t\t\t\t\tqueryParams.data = this.serialize(dataToSend, rowId);\r\n\t\t\t\t\t\turl = url + (url.slice(-1) === \"/\" ? \"\" : \"/\") + rowId;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tqueryParams.url = this._applyPayload(url);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis._waitMode++;\r\n\t\treturn ajax.query(queryParams);\r\n\t}\r\n\r\n\tprotected _forEachUpdatedRow(code: any) {\r\n\t\tconst updatedRows = this.updatedRows.slice();\r\n\t\tfor (let i = 0; i < updatedRows.length; i++) {\r\n\t\t\tconst rowId = updatedRows[i];\r\n\t\t\tif (this.$gantt.getUserData(rowId, this.action_param, this._ganttMode)) {\r\n\t\t\t\tcode.call(this, rowId);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprotected _setDefaultTransactionMode() {\r\n\t\tif (this.serverProcessor) {\r\n\t\t\tthis.setTransactionMode(\"POST\", true);\r\n\t\t\tthis.serverProcessor += (this.serverProcessor.indexOf(\"?\") !== -1 ? \"&\" : \"?\") + \"editing=true\";\r\n\t\t\tthis._serverProcessor = this.serverProcessor;\r\n\t\t}\r\n\t}\r\n\r\n\t/* returns xml node value\r\n\t\t@param node\r\n\t\t\txml node\r\n\t*/\r\n\tprotected _getXmlNodeValue(node) {\r\n\t\tif (node.firstChild) {\r\n\t\t\treturn node.firstChild.nodeValue;\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tprotected _getAllData() {\r\n\t\tconst out = {};\r\n\t\tlet hasOne = false;\r\n\r\n\t\tthis._forEachUpdatedRow(function(id) {\r\n\t\t\tif (this._in_progress[id] || this.is_invalid(id)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst row = this._getRowData(id);\r\n\t\t\tif (!this.callEvent(\"onBeforeUpdate\", [id, this.getState(id), row])) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tout[id] = row;\r\n\t\t\thasOne = true;\r\n\t\t\tthis._in_progress[id] = (new Date()).valueOf();\r\n\t\t});\r\n\r\n\t\treturn hasOne ? out : null;\r\n\t}\r\n\r\n\tprotected _prepareDate(value: Date) : string {\r\n\t\treturn this.$gantt.defined(this.$gantt.templates.xml_format) ? this.$gantt.templates.xml_format(value) : this.$gantt.templates.format_date(value);\r\n\t}\r\n\r\n\tprotected _prepareArray(value: any[], traversedObjects: object[]) : any[] {\r\n\t\ttraversedObjects.push(value);\r\n\r\n\t\treturn value.map((item) => {\r\n\t\t\tif(helpers.isDate(item)){\r\n\t\t\t\treturn this._prepareDate(item);\r\n\t\t\t} else if (Array.isArray(item) && !helpers.arrayIncludes(traversedObjects, item)){\r\n\t\t\t\treturn this._prepareArray(item, traversedObjects);\r\n\t\t\t} else if (item && typeof item === \"object\" && !helpers.arrayIncludes(traversedObjects, item)) {\r\n\t\t\t\treturn this._prepareObject(item, traversedObjects);\r\n\t\t\t} else {\r\n\t\t\t\treturn item;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprotected _prepareObject(rawItem: any, traversedObjects: object[]) : any {\r\n\t\tconst processedItem = {};\r\n\t\ttraversedObjects.push(rawItem);\r\n\r\n\t\tfor (const key in rawItem) {\r\n\t\t\tif (key.substr(0, 1) === \"$\") {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tconst value = rawItem[key];\r\n\t\t\tif (helpers.isDate(value)) {\r\n\t\t\t\tprocessedItem[key] = this._prepareDate(value);\r\n\t\t\t} else if(value === null) {\r\n\t\t\t\tprocessedItem[key] = \"\";\r\n\t\t\t} else if (Array.isArray(value) && !helpers.arrayIncludes(traversedObjects, value)){\r\n\t\t\t\tprocessedItem[key] = this._prepareArray(value, traversedObjects);\r\n\t\t\t} else if (value && typeof value === \"object\" && !helpers.arrayIncludes(traversedObjects, value)) {\r\n\t\t\t\tprocessedItem[key] = this._prepareObject(value, traversedObjects);\r\n\t\t\t} else {\r\n\t\t\t\tprocessedItem[key] = value;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn processedItem;\r\n\t}\r\n\r\n\tprotected _prepareDataItem(rawItem: any): any {\r\n\t\tconst processedItem = this._prepareObject(rawItem, []);\r\n\r\n\t\tprocessedItem[this.action_param] = this.$gantt.getUserData(rawItem.id, this.action_param, this._ganttMode);\r\n\t\treturn processedItem;\r\n\t}\r\n\r\n\tprotected getStoredItem(id){\r\n\t\treturn this._storage.getStoredItem(id);\r\n\t}\r\n\r\n\tprotected _getRowData(id) {\r\n\t\tlet dataItem;\r\n\t\tconst gantt = this.$gantt;\r\n\t\tif (this.getGanttMode() === \"task\") {\r\n\t\t\tif(gantt.isTaskExists(id)){\r\n\t\t\t\tdataItem =this.$gantt.getTask(id);\r\n\t\t\t}\r\n\t\t} else if (this.getGanttMode() === \"assignment\") {\r\n\t\t\tif(this.$gantt.$data.assignmentsStore.exists(id)){\r\n\t\t\t\tdataItem =this.$gantt.$data.assignmentsStore.getItem(id);\r\n\t\t\t}\r\n\t\t} else if (this.getGanttMode() === \"baseline\") {\r\n\t\t\tif(this.$gantt.$data.baselineStore.exists(id)){\r\n\t\t\t\tdataItem =this.$gantt.$data.baselineStore.getItem(id);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif(gantt.isLinkExists(id)){\r\n\t\t\t\tdataItem =this.$gantt.getLink(id);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!dataItem) {\r\n\t\t\tdataItem = this.getStoredItem(id);\r\n\t\t}\r\n\r\n\t\tif (!dataItem) {\r\n\t\t\tdataItem = { id };\r\n\t\t}\r\n\r\n\t\treturn this._prepareDataItem(dataItem);\r\n\t}\r\n}","\r\nexport default function extendGantt(gantt: any, dp: any) {\r\n\tgantt.getUserData = function(id, name, store) {\r\n\t\tif (!this.userdata) {\r\n\t\t\tthis.userdata = {};\r\n\t\t}\r\n\t\tthis.userdata[store] = this.userdata[store] || {};\r\n\t\tif (this.userdata[store][id] && this.userdata[store][id][name]) {\r\n\t\t\treturn this.userdata[store][id][name];\r\n\t\t}\r\n\t\treturn \"\";\r\n\t};\r\n\tgantt.setUserData = function(id, name, value, store) {\r\n\t\tif (!this.userdata) {\r\n\t\t\tthis.userdata = {};\r\n\t\t}\r\n\t\tthis.userdata[store] = this.userdata[store] || {};\r\n\t\tthis.userdata[store][id] = this.userdata[store][id] || {};\r\n\t\tthis.userdata[store][id][name] = value;\r\n\t};\r\n\r\n\tgantt._change_id = function(oldId, newId) {\r\n\t\tswitch (this._dp._ganttMode) {\r\n\t\t\tcase \"task\":\r\n\t\t\t\tthis.changeTaskId(oldId, newId);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"link\":\r\n\t\t\t\tthis.changeLinkId(oldId, newId);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"assignment\":\r\n\t\t\t\tthis.$data.assignmentsStore.changeId(oldId, newId);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"resource\":\r\n\t\t\t\tthis.$data.resourcesStore.changeId(oldId, newId);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"baseline\":\r\n\t\t\t\tthis.$data.baselineStore.changeId(oldId, newId);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(`Invalid mode of the dataProcessor after database id is received: ${this._dp._ganttMode}, new id: ${newId}`);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._row_style = function(rowId, classname){\r\n\t\tif (this._dp._ganttMode !== \"task\") {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!gantt.isTaskExists(rowId)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst task = gantt.getTask(rowId);\r\n\t\ttask.$dataprocessor_class = classname;\r\n\t\tgantt.refreshTask(rowId);\r\n\t};\r\n\r\n\t// fake method for dataprocessor\r\n\tgantt._delete_task = function(rowId, node) {}; // tslint:disable-line\r\n\r\n\tgantt._sendTaskOrder = function(id, item){\r\n\t\tif (item.$drop_target) {\r\n\t\t\tthis._dp.setGanttMode(\"task\");\r\n\t\t\tthis.getTask(id).target = item.$drop_target;\r\n\t\t\tthis._dp.setUpdated(id, true,\"order\");\r\n\t\t\tdelete this.getTask(id).$drop_target;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.setDp = function() {\r\n\t\tthis._dp = dp;\r\n\t};\r\n\r\n\tgantt.setDp();\r\n}","import * as DataProcessor from \"./data_processor\";\r\nexport default {\r\n\tDEPRECATED_api: function(server) {\r\n\t\treturn new (DataProcessor.DataProcessor)(server);\r\n\t},\r\n\tcreateDataProcessor: DataProcessor.createDataProcessor\r\n};","import global from \"../../utils/global\";\r\n\r\nfunction createMethod(gantt){\r\n\tvar methods = {};\r\n\tvar isActive = false;\r\n\tfunction disableMethod(methodName, dummyMethod){\r\n\t\tdummyMethod = typeof dummyMethod == \"function\" ? dummyMethod : function(){};\r\n\r\n\t\tif(!methods[methodName]){\r\n\t\t\tmethods[methodName] = this[methodName];\r\n\t\t\tthis[methodName] = dummyMethod;\r\n\t\t}\r\n\t}\r\n\tfunction restoreMethod(methodName){\r\n\t\tif(methods[methodName]){\r\n\t\t\tthis[methodName] = methods[methodName];\r\n\t\t\tmethods[methodName] = null;\r\n\t\t}\r\n\t}\r\n\tfunction disableMethods(methodsHash){\r\n\t\tfor(var i in methodsHash){\r\n\t\t\tdisableMethod.call(this, i, methodsHash[i]);\r\n\t\t}\r\n\t}\r\n\tfunction restoreMethods(){\r\n\t\tfor(var i in methods){\r\n\t\t\trestoreMethod.call(this, i);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction batchUpdatePayload(callback){\r\n\t\ttry{\r\n\t\t\tcallback();\r\n\t\t}catch(e){\r\n\t\t\tglobal.console.error(e);\r\n\t\t}\r\n\t}\r\n\r\n\tvar state = gantt.$services.getService(\"state\");\r\n\tstate.registerProvider(\"batchUpdate\", function(){\r\n\t\treturn {\r\n\t\t\tbatch_update: isActive\r\n\t\t};\r\n\t}, false);\r\n\r\n\treturn function batchUpdate(callback, noRedraw) {\r\n\t\tif(isActive){\r\n\t\t\t// batch mode is already active\r\n\t\t\tbatchUpdatePayload(callback);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar call_dp = (this._dp && this._dp.updateMode != \"off\");\r\n\t\tvar dp_mode;\r\n\t\tif (call_dp){\r\n\t\t\tdp_mode = this._dp.updateMode;\r\n\t\t\tthis._dp.setUpdateMode(\"off\");\r\n\t\t}\r\n\r\n\t\t// temporary disable some methods while updating multiple tasks\r\n\t\tvar resetProjects = {};\r\n\t\tvar methods = {\r\n\t\t\t\"render\":true,\r\n\t\t\t\"refreshData\":true,\r\n\t\t\t\"refreshTask\":true,\r\n\t\t\t\"refreshLink\":true,\r\n\t\t\t\"resetProjectDates\":function(task){\r\n\t\t\t\tresetProjects[task.id] = task;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdisableMethods.call(this, methods);\r\n\r\n\t\tisActive = true;\r\n\t\tthis.callEvent(\"onBeforeBatchUpdate\", []);\r\n\r\n\t\tbatchUpdatePayload(callback);\r\n\r\n\t\tthis.callEvent(\"onAfterBatchUpdate\", []);\r\n\r\n\t\trestoreMethods.call(this);\r\n\r\n\t\t// do required updates after changes applied\r\n\t\tfor(var i in resetProjects){\r\n\t\t\tthis.resetProjectDates(resetProjects[i]);\r\n\t\t}\r\n\r\n\t\tisActive = false;\r\n\r\n\t\tif(!noRedraw){\r\n\t\t\tthis.render();\r\n\t\t}\r\n\r\n\t\tif (call_dp) {\r\n\t\t\tthis._dp.setUpdateMode(dp_mode);\r\n\t\t\tthis._dp.setGanttMode(\"task\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t\tthis._dp.setGanttMode(\"link\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n}\r\n\r\nexport default function(gantt){\r\n\tgantt.batchUpdate = createMethod(gantt);\r\n};","const createWbs = (function(gantt){\r\n\treturn {\r\n\t_needRecalc: true,\r\n\treset: function(){\r\n\t\tthis._needRecalc = true;\r\n\t},\r\n\t_isRecalcNeeded: function(){\r\n\t\treturn (!this._isGroupSort() && this._needRecalc);\r\n\t},\r\n\t_isGroupSort: function() {\r\n\t\treturn !!(gantt.getState().group_mode);\r\n\t},\r\n\t_getWBSCode: function(task) {\r\n\t\tif(!task) return \"\";\r\n\r\n\t\tif(this._isRecalcNeeded()){\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\r\n\t\tif(task.$virtual) return \"\";\r\n\t\tif(this._isGroupSort()) return task.$wbs || \"\";\r\n\r\n\t\tif(!task.$wbs) {\r\n\t\t\tthis.reset();\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\t\treturn task.$wbs;\r\n\t},\r\n\t_setWBSCode: function(task, value) {\r\n\t\ttask.$wbs = value;\r\n\t},\r\n\tgetWBSCode: function(task) {\r\n\t\treturn this._getWBSCode(task);\r\n\t},\r\n\tgetByWBSCode: function(code){\r\n\t\tlet parts = code.split(\".\");\r\n\t\tlet currentNode = gantt.config.root_id;\r\n\t\tfor(let i = 0; i < parts.length; i++){\r\n\t\t\tconst children = gantt.getChildren(currentNode);\r\n\t\t\tlet index = parts[i]*1 - 1;\r\n\t\t\tif(gantt.isTaskExists(children[index])){\r\n\t\t\t\tcurrentNode = children[index];\r\n\t\t\t}else{\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(currentNode)){\r\n\t\t\treturn gantt.getTask(currentNode);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\t_calcWBS: function() {\r\n\t\tif(!this._isRecalcNeeded()) return;\r\n\r\n\t\tlet _isFirst = true;\r\n\t\tgantt.eachTask(function(ch) {\r\n\t\t\tif(ch.type == gantt.config.types.placeholder) return;\r\n\t\t\tif(_isFirst) {\r\n\t\t\t\t_isFirst = false;\r\n\t\t\t\tthis._setWBSCode(ch, \"1\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst _prevSibling = this._getPrevNonPlaceholderSibling(ch.id);\r\n\t\t\tif (_prevSibling !== null) {\r\n\t\t\t\tthis._increaseWBS(ch, _prevSibling);\r\n\t\t\t} else {\r\n\t\t\t\tlet _parent = gantt.getParent(ch.id);\r\n\t\t\t\tthis._setWBSCode(ch, gantt.getTask(_parent).$wbs + \".1\");\r\n\t\t\t}\r\n\t\t}, gantt.config.root_id, this);\r\n\r\n\t\tthis._needRecalc = false;\r\n\t},\r\n\t_increaseWBS: function(task, siblingiId){\r\n\t\tlet _wbs = gantt.getTask(siblingiId).$wbs;\r\n\t\tif(_wbs) {\r\n\t\t\t_wbs = _wbs.split(\".\");\r\n\t\t\t_wbs[_wbs.length-1]++;\r\n\t\t\tthis._setWBSCode(task, _wbs.join(\".\"));\r\n\t\t}\r\n\t},\r\n\t_getPrevNonPlaceholderSibling: function(childId) {\r\n\t\tlet prevSibling;\r\n\t\tlet currentId = childId;\r\n\t\tdo {\r\n\t\t\tprevSibling = gantt.getPrevSibling(currentId);\r\n\t\t\tcurrentId = prevSibling;\r\n\t\t} while (prevSibling !== null && gantt.getTask(prevSibling).type == gantt.config.types.placeholder);\r\n\t\treturn prevSibling;\r\n   }\r\n};\r\n});\r\n\r\nexport default function(gantt){\r\n\tconst wbs = createWbs(gantt);\r\n\tgantt.getWBSCode = function getWBSCode(task) {\r\n\t\treturn wbs.getWBSCode(task);\r\n\t};\r\n\r\n\tgantt.getTaskByWBSCode = function(code) {\r\n\t\treturn wbs.getByWBSCode(code);\r\n\t};\r\n\r\n\tfunction resetCache(){\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onAfterTaskMove\", resetCache);\r\n\tgantt.attachEvent(\"onBeforeParse\", resetCache);\r\n\tgantt.attachEvent(\"onAfterTaskDelete\", resetCache);\r\n\tgantt.attachEvent(\"onAfterTaskAdd\", resetCache);\r\n\tgantt.attachEvent(\"onAfterSort\", resetCache);\r\n\r\n};\r\n","import * as helpers from \"../../utils/helpers\";\r\nimport * as dom_helpers from \"../ui/utils/dom_helpers\";\r\nfunction createResourceMethods(gantt){\r\n\r\n\tvar resourceTaskCache = {};\r\n\tvar singleResourceCacheBuilt = false;\r\n\r\n\tgantt.$data.tasksStore.attachEvent(\"onStoreUpdated\", function(){\r\n\t\tresourceTaskCache = {};\r\n\t\tsingleResourceCacheBuilt = false;\r\n\t});\r\n\tgantt.attachEvent(\"onBeforeGanttRender\", function(){\r\n\t\tresourceTaskCache = {};\r\n\t});\r\n\r\n\tfunction getTaskBy(propertyName, propertyValue, typeFilter) {\r\n\t\tif (typeof propertyName == \"function\") {\r\n\t\t\treturn filterResourceTasks(propertyName);\r\n\t\t} else {\r\n\t\t\tif (helpers.isArray(propertyValue)) {\r\n\t\t\t\treturn getResourceTasks(propertyName, propertyValue, typeFilter);\r\n\t\t\t} else {\r\n\t\t\t\treturn getResourceTasks(propertyName, [propertyValue], typeFilter);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction filterResourceTasks(filter) {\r\n\t\tvar res = [];\r\n\t\tgantt.eachTask(function (task) {\r\n\t\t\tif (filter(task)) {\r\n\t\t\t\tres.push(task);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn res;\r\n\t}\r\n\r\n\tvar falsyValuePrefix = String(Math.random());\r\n\tfunction resourceHashFunction(value){\r\n\t\tif (value === null){\r\n\t\t\treturn falsyValuePrefix + String(value);\r\n\t\t}\r\n\t\treturn String(value);\r\n\t}\r\n\r\n\tfunction getCacheKey(resourceIds, property, typeFilter) {\r\n\t\tif (Array.isArray(resourceIds)) {\r\n\t\t\treturn resourceIds.map(function (value) {\r\n\t\t\t\treturn resourceHashFunction(value);\r\n\t\t\t}).join(\"_\") + `_${property}_${typeFilter}`;\r\n\t\t} else {\r\n\t\t\treturn resourceHashFunction(resourceIds) + `_${property}_${typeFilter}`;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getResourceTasks(property, resourceIds, typeFilter) {\r\n\t\tvar res;\r\n\t\tvar cacheKey = getCacheKey(resourceIds, property, JSON.stringify(typeFilter));\r\n\t\tvar matchingResources = {};\r\n\t\thelpers.forEach(resourceIds, function(resourceId) {\r\n\t\t\tmatchingResources[resourceHashFunction(resourceId)] = true;\r\n\t\t});\r\n\r\n\t\tif (!resourceTaskCache[cacheKey]) {\r\n\t\t\tres = resourceTaskCache[cacheKey] = [];\r\n\t\t\tgantt.eachTask(function (task) {\r\n\t\t\t\tif (typeFilter) {\r\n\t\t\t\t\tif (!typeFilter[gantt.getTaskType(task)]) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (task.type == gantt.config.types.project) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (property in task) {\r\n\t\t\t\t\tvar resourceValue;\r\n\t\t\t\t\tif (!helpers.isArray(task[property])) {\r\n\t\t\t\t\t\tresourceValue = [task[property]];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresourceValue = task[property];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\thelpers.forEach(resourceValue, function(value) {\r\n\t\t\t\t\t\tvar resourceValue = (value && value.resource_id) ? value.resource_id : value;\r\n\r\n\t\t\t\t\t\tif (matchingResources[resourceHashFunction(resourceValue)]) {\r\n\t\t\t\t\t\t\tres.push(task);\r\n\t\t\t\t\t\t}else if(!singleResourceCacheBuilt){\r\n\r\n\t\t\t\t\t\t\tvar key = getCacheKey(value, property);\r\n\t\t\t\t\t\t\tif(!resourceTaskCache[key]){\r\n\t\t\t\t\t\t\t\tresourceTaskCache[key] = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresourceTaskCache[key].push(task);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tsingleResourceCacheBuilt = true;\r\n\t\t} else {\r\n\t\t\tres = resourceTaskCache[cacheKey];\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction selectAssignments(resourceId, taskId, result){\r\n\t\tvar property = gantt.config.resource_property;\r\n\t\tvar owners = [];\r\n\t\tif (gantt.getDatastore(\"task\").exists(taskId)) {\r\n\t\t\tvar task = gantt.getTask(taskId);\r\n\t\t\towners = task[property] || [];\r\n\t\t}\r\n\r\n\t\tif (!Array.isArray(owners)) {\r\n\t\t\towners = [owners];\r\n\t\t}\r\n\t\tfor (var i = 0; i < owners.length; i++) {\r\n\t\t\tif (owners[i].resource_id == resourceId) {\r\n\t\t\t\tresult.push({task_id: task.id, resource_id:owners[i].resource_id, value:owners[i].value});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getResourceAssignments(resourceId, taskId){\r\n\t\t// resource assignment as an independent module:\r\n\t\t// {taskId:, resourceId, value}\r\n\t\t// TODO: probably should add a separate datastore for these\r\n\t\tvar assignments = [];\r\n\t\tvar property = gantt.config.resource_property;\r\n\t\tif(taskId !== undefined){\r\n\t\t\tselectAssignments(resourceId, taskId, assignments);\r\n\t\t}else{\r\n\t\t\tvar tasks = gantt.getTaskBy(property, resourceId);\r\n\t\t\ttasks.forEach(function(task){\r\n\t\t\t\tselectAssignments(resourceId, task.id, assignments);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn assignments;\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetTaskBy: getTaskBy,\r\n\t\tgetResourceAssignments: getResourceAssignments\r\n\t};\r\n}\r\n\r\nfunction createHelper(gantt){\r\n\tconst resourcePlugin = {\r\n\t\trenderEditableLabel: function(start_date, end_date, resource, tasks, assignments){\r\n\t\t\tconst editable = gantt.config.readonly ? \"\" : \"contenteditable\";\r\n\t\t\tif(start_date < resource.end_date && end_date > resource.start_date){\r\n\t\t\t\tfor(let i = 0; i < assignments.length; i++){\r\n\t\t\t\t\tconst a = assignments[i];\r\n\t\t\t\t\t\treturn \"<div \"+editable+\" data-assignment-cell data-assignment-id='\"+a.id+\"'\"+\r\n\t\t\t\t\t\t\" data-row-id='\"+resource.id+\"'\"+\r\n\t\t\t\t\t\t\" data-task='\"+resource.$task_id+\"'\"+\r\n\t\t\t\t\t\t\" data-start-date='\"+gantt.templates.format_date(start_date)+\"'\"+\r\n\t\t\t\t\t\t\" data-end-date='\"+gantt.templates.format_date(end_date)+\"'>\" + a.value + \"</div>\";\r\n\t\t\t\t}\r\n\t\t\t\treturn \"<div \"+editable+\" data-assignment-cell data-empty \"+ \r\n\t\t\t\t\t\t\" data-row-id='\"+resource.id+\"'\"+\r\n\t\t\t\t\t\t\" data-resource-id='\"+resource.$resource_id+\"'\"+\r\n\t\t\t\t\t\t\" data-task='\"+resource.$task_id+\"'\"+\r\n\t\t\t\t\t\t\" data-start-date='\"+gantt.templates.format_date(start_date)+\"'\"+\r\n\t\t\t\t\t\t\"'  data-end-date='\"+gantt.templates.format_date(end_date)+\"'>-</div>\";\r\n\t\t\t}\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\t\trenderSummaryLabel: function(start_date, end_date, resource, tasks, assignments){\r\n\t\t\tlet sum = assignments.reduce(function(total, assignment){ \r\n\t\t\t\treturn total + Number(assignment.value);\r\n\t\t\t}, 0);\r\n\r\n\t\t\tif(sum % 1){\r\n\t\t\t\tsum = Math.round(sum * 10)/10;\r\n\t\t\t}\r\n\r\n\t\t\tif(sum){\r\n\t\t\t\treturn \"<div>\" + sum + \"</div>\";\r\n\t\t\t}\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\t\teditableResourceCellTemplate: function(start_date, end_date, resource, tasks, assignments){\r\n\t\t\tif(resource.$role === \"task\"){\r\n\t\t\t\treturn resourcePlugin.renderEditableLabel(start_date, end_date, resource, tasks, assignments);\r\n\t\t\t}else{\r\n\t\t\t\treturn resourcePlugin.renderSummaryLabel(start_date, end_date, resource, tasks, assignments);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t\r\n\t\teditableResourceCellClass: function(start_date, end_date, resource, tasks, assignments){\r\n\t\t\tconst css = [];\r\n\t\t\tcss.push(\"resource_marker\");\r\n\r\n\t\t\tif(resource.$role === \"task\"){\r\n\t\t\t\tcss.push(\"task_cell\");\r\n\t\t\t}else{\r\n\t\t\t\tcss.push(\"resource_cell\");\r\n\t\t\t}\r\n\r\n\t\t\tconst sum = assignments.reduce(function(total, assignment){ \r\n\t\t\t\treturn total + Number(assignment.value);\r\n\t\t\t}, 0);\r\n\r\n\t\t\tlet capacity = Number(resource.capacity);\r\n\t\t\tif(isNaN(capacity)){\r\n\t\t\t\tcapacity = 8;\r\n\t\t\t}\r\n\t\t\tif (sum <= capacity) {\r\n\t\t\t\tcss.push(\"workday_ok\");\r\n\t\t\t} else {\r\n\t\t\t\tcss.push(\"workday_over\");\r\n\t\t\t}\r\n\t\t\treturn css.join(\" \");\r\n\t\t},\r\n\t\tgetSummaryResourceAssignments: function getResourceAssignments(resourceId) {\r\n\t\t\tlet assignments;\r\n\t\t\tconst store = gantt.getDatastore(gantt.config.resource_store);\r\n\t\t\tconst resource = store.getItem(resourceId);\r\n\r\n\t\t\tif(resource.$role === \"task\"){\r\n\t\t\t\tassignments = gantt.getResourceAssignments(resource.$resource_id, resource.$task_id);\r\n\t\t\t}else{\r\n\t\t\t\tassignments = gantt.getResourceAssignments(resourceId);\r\n\t\t\t\tif(store.eachItem){\r\n\t\t\t\t\tstore.eachItem(function(childResource){\r\n\t\t\t\t\t\tif(childResource.$role !== \"task\"){\r\n\t\t\t\t\t\t\tassignments = assignments.concat(gantt.getResourceAssignments(childResource.id));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, resourceId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn assignments;\r\n\t\t},\r\n\t\t\r\n\t\tinitEditableDiagram: function(){\r\n\t\t\tgantt.config.resource_render_empty_cells = true;\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t(function(){\r\n\t\t\t\t/// salesforce locker workaround\r\n\t\t\t\t// SF removes 'contenteditable' attribute from cells\r\n\t\t\t\t// restore it on render\r\n\t\t\t\tlet timeoutId = null;\r\n\t\t\t\tfunction makeEditable() {\r\n\t\t\t\t\tif (timeoutId) {\r\n\t\t\t\t\t\tcancelAnimationFrame(timeoutId);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttimeoutId = requestAnimationFrame(function () {\r\n\t\t\t\t\t\tif (gantt.$container){\r\n\t\t\t\t\t\t\tvar cells = Array.prototype.slice.call(gantt.$container.querySelectorAll(\".resourceTimeline_cell [data-assignment-cell]\"));\r\n\t\t\t\t\t\t\tcells.forEach(function (cell) {\r\n\t\t\t\t\t\t\t\tcell.contentEditable = true;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\t\t\t\t\tgantt.getDatastore(gantt.config.resource_assignment_store).attachEvent(\"onStoreUpdated\", makeEditable);\r\n\t\t\t\t\tgantt.getDatastore(gantt.config.resource_store).attachEvent(\"onStoreUpdated\", makeEditable);\r\n\t\t\t\t}, {once: true});\r\n\t\t\t\tgantt.attachEvent(\"onGanttLayoutReady\", function(){\r\n\t\t\t\t\tconst ganttViews = gantt.$layout.getCellsByType(\"viewCell\");\r\n\t\t\t\t\tganttViews.forEach(function(view){\r\n\t\t\t\t\t\tif(view.$config && view.$config.view === \"resourceTimeline\" && view.$content){\r\n\t\t\t\t\t\t\tview.$content.attachEvent(\"onScroll\", makeEditable);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t})();\r\n\t\t\t//GS-2766: need to restore focus after updating assignments\r\n\t\t\tlet currentFocusIndex = null;\r\n\t\t\tfunction setNextFocus(){\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tconst focusableElementsAfterRender = dom_helpers.getFocusableNodes(gantt.$container);\r\n\t\t\t\t\tif(currentFocusIndex > -1){\r\n\t\t\t\t\t\tfocusableElementsAfterRender[currentFocusIndex +1]?.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 300);\r\n\t\t\t};\r\n\r\n\t\t\tfunction handleAssignmentEdit(e, elem){\r\n\t\t\t\tlet target = elem || e.target.closest(\".resourceTimeline_cell [data-assignment-cell]\");\r\n\t\t\t\tif(target){\r\n\t\t\t\t\tlet strValue = (target.innerText || \"\").trim();\r\n\t\t\t\t\tif(strValue == \"-\"){\r\n\t\t\t\t\t\tstrValue = \"0\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet value = Number(strValue);\r\n\t\t\t\t\tlet rowId = target.getAttribute(\"data-row-id\");\r\n\t\t\t\t\tlet assignmentId = target.getAttribute(\"data-assignment-id\");\r\n\t\t\t\t\tlet taskId = target.getAttribute(\"data-task\");\r\n\t\t\t\t\tlet resourceId = target.getAttribute(\"data-resource-id\");\r\n\t\t\t\t\tlet startDate = gantt.templates.parse_date(target.getAttribute(\"data-start-date\"));\r\n\t\t\t\t\tlet endDate = gantt.templates.parse_date(target.getAttribute(\"data-end-date\"));\r\n\r\n\t\t\t\t\tconst assignmentStore = gantt.getDatastore(gantt.config.resource_assignment_store);\r\n\t\t\t\t\tif(isNaN(value)){\r\n\t\t\t\t\t\tgantt.getDatastore(gantt.config.resource_store).refresh(rowId);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconst task = gantt.getTask(taskId);\r\n\t\t\t\t\t\tif(assignmentId){\r\n\t\t\t\t\t\t\t// GS-2141. Track the changes by the Undo extension\r\n\t\t\t\t\t\t\tif (gantt.plugins().undo){\r\n\t\t\t\t\t\t\t\tgantt.ext.undo.saveState(taskId, \"task\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconst assignment = assignmentStore.getItem(assignmentId);\r\n\t\t\t\t\t\t\tif(!assignment || value === assignment.value){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(assignment.start_date.valueOf() === startDate.valueOf() && assignment.end_date.valueOf() === endDate.valueOf()){\r\n\t\t\t\t\t\t\t\tassignment.value = value;\r\n\t\t\t\t\t\t\t\tif(!value){\r\n\t\t\t\t\t\t\t\t\tassignmentStore.removeItem(assignment.id);\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tassignmentStore.updateItem(assignment.id);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif(assignment.end_date.valueOf() > endDate.valueOf()){\r\n\t\t\t\t\t\t\t\t\tconst nextChunk = gantt.copy(assignment);\r\n\t\t\t\t\t\t\t\t\tnextChunk.id = gantt.uid();\r\n\t\t\t\t\t\t\t\t\tnextChunk.start_date = endDate;\r\n\t\t\t\t\t\t\t\t\tnextChunk.duration = gantt.calculateDuration({\r\n\t\t\t\t\t\t\t\t\t\tstart_date: nextChunk.start_date,\r\n\t\t\t\t\t\t\t\t\t\tend_date: nextChunk.end_date,\r\n\t\t\t\t\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tnextChunk.delay = gantt.calculateDuration({\r\n\t\t\t\t\t\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\t\t\t\t\t\tend_date: nextChunk.start_date,\r\n\t\t\t\t\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tnextChunk.mode = assignment.mode || \"default\";\r\n\t\t\t\t\t\t\t\t\tif(nextChunk.duration !== 0){\r\n\t\t\t\t\t\t\t\t\t\tassignmentStore.addItem(nextChunk);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif(assignment.start_date.valueOf() < startDate.valueOf()){\r\n\t\t\t\t\t\t\t\t\tassignment.end_date = startDate;\r\n\t\t\t\t\t\t\t\t\tassignment.duration = gantt.calculateDuration({\r\n\t\t\t\t\t\t\t\t\t\tstart_date: assignment.start_date,\r\n\t\t\t\t\t\t\t\t\t\tend_date: assignment.end_date,\r\n\t\t\t\t\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tassignment.mode = \"fixedDuration\";\r\n\r\n\t\t\t\t\t\t\t\t\tif(assignment.duration === 0){\r\n\t\t\t\t\t\t\t\t\t\tassignmentStore.removeItem(assignment.id);\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tassignmentStore.updateItem(assignment.id);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tassignmentStore.removeItem(assignment.id);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif(value){\r\n\t\t\t\t\t\t\t\t\tassignmentStore.addItem({\r\n\t\t\t\t\t\t\t\t\t\ttask_id: assignment.task_id,\r\n\t\t\t\t\t\t\t\t\t\tresource_id: assignment.resource_id,\r\n\t\t\t\t\t\t\t\t\t\tvalue: value,\r\n\t\t\t\t\t\t\t\t\t\tstart_date: startDate,\r\n\t\t\t\t\t\t\t\t\t\tend_date: endDate,\r\n\t\t\t\t\t\t\t\t\t\tduration: gantt.calculateDuration({\r\n\t\t\t\t\t\t\t\t\t\t\tstart_date: startDate,\r\n\t\t\t\t\t\t\t\t\t\t\tend_date: endDate,\r\n\t\t\t\t\t\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t\tdelay: gantt.calculateDuration({\r\n\t\t\t\t\t\t\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\t\t\t\t\t\t\tend_date: startDate,\r\n\t\t\t\t\t\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t\tmode: \"fixedDuration\"\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tgantt.updateTaskAssignments(task.id);\r\n\t\t\t\t\t\t\tgantt.updateTask(task.id);\r\n\r\n\t\t\t\t\t\t}else if(value){\r\n\t\t\t\t\t\t\tlet assignment = {\r\n\t\t\t\t\t\t\t\ttask_id: taskId,\r\n\t\t\t\t\t\t\t\tresource_id: resourceId,\r\n\t\t\t\t\t\t\t\tvalue: value,\r\n\t\t\t\t\t\t\t\tstart_date: startDate,\r\n\t\t\t\t\t\t\t\tend_date: endDate,\r\n\t\t\t\t\t\t\t\tduration: gantt.calculateDuration({\r\n\t\t\t\t\t\t\t\t\tstart_date: startDate,\r\n\t\t\t\t\t\t\t\t\tend_date: endDate,\r\n\t\t\t\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\tdelay: gantt.calculateDuration({\r\n\t\t\t\t\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\t\t\t\t\tend_date: startDate,\r\n\t\t\t\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\tmode: \"fixedDuration\"\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tassignmentStore.addItem(assignment);\r\n\t\t\t\t\t\t\tgantt.updateTaskAssignments(task.id);\r\n\t\t\t\t\t\t\tgantt.updateTask(task.id);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\t\t\t\tlet editedElem = null;\r\n\t\t\t\tgantt.event(gantt.$container, \"keypress\", function(e){\r\n\t\t\t\t\tlet target = e.target.closest(\".resourceTimeline_cell [data-assignment-cell]\");\r\n\t\t\t\t\tif(target){\r\n\t\t\t\t\t\tif (e.keyCode === 13 || e.keyCode === 27) {\r\n\t\t\t\t\t\t\ttarget.blur();\r\n\t\t\t\t\t\t\thandleAssignmentEdit(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\teditedElem = e.target;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgantt.event(gantt.$container, \"keydown\", function(event){\r\n\t\t\t\t\tif (event.key === \"Tab\") {\r\n\t\t\t\t\t\tconst focusableElements = dom_helpers.getFocusableNodes(gantt.$container);\r\n\t\t\t\t\t\tcurrentFocusIndex = focusableElements.indexOf(document.activeElement);\r\n\t\t\t\t\t\thandleAssignmentEdit(event);\r\n\t\t\t\t\t\tsetNextFocus();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgantt.event(gantt.$container, \"click\", function(e) {\r\n\t\t\t\t\tif(editedElem){\r\n\t\t\t\t\t\thandleAssignmentEdit(e, editedElem);\r\n\t\t\t\t\t\teditedElem = null;\r\n\t\t\t\t\t\t//handle click on the editable content\r\n\t\t\t\t\t\tif(e.target.hasAttribute(\"data-assignment-id\")){\r\n\t\t\t\t\t\t\tconst focusableElements = gantt.$container.querySelectorAll(\"[contenteditable='true']\");\r\n\t\t\t\t\t\t\tconst target = Array.from(focusableElements).find(elem =>\r\n\t\t\t\t\t\t\t\telem.getAttribute(\"data-start-date\") == e.target.getAttribute(\"data-start-date\") &&\r\n\t\t\t\t\t\t\t\telem.getAttribute(\"data-assignment-id\") == e.target.getAttribute(\"data-assignment-id\")\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t//set focus after editing assignment\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tconst focusableElementsAfterUpdate = gantt.$container.querySelectorAll(\"[contenteditable='true']\");\r\n\t\t\t\t\t\t\t\tconst targetAfterUpdate = Array.from(focusableElementsAfterUpdate).find(elem =>\r\n\t\t\t\t\t\t\t\t\telem.getAttribute(\"data-start-date\") == target.getAttribute(\"data-start-date\") &&\r\n\t\t\t\t\t\t\t\t\telem.getAttribute(\"data-row-id\") == target.getAttribute(\"data-row-id\")\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\tif (targetAfterUpdate) {\r\n\t\t\t\t\t\t\t\t\ttargetAfterUpdate.focus();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}, 400);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}, {once: true});\r\n\t\t}\r\n\t};\r\n\treturn resourcePlugin;\r\n}\r\n\r\nexport default function(gantt){\r\n\tvar methods = createResourceMethods(gantt);\r\n\t\r\n\tgantt.ext.resources = createHelper(gantt);\r\n\r\n\tgantt.config.resources = {\r\n\t\tdataprocessor_assignments: false,\r\n\t\tdataprocessor_resources: false,\r\n\t\teditable_resource_diagram: false,\r\n\t\tresource_store: {\r\n\t\t\ttype: \"treeDataStore\",\r\n\t\t\tfetchTasks: false,\r\n\t\t\tinitItem: function(item) {\r\n\t\t\t\titem.parent = item.parent || gantt.config.root_id;\r\n\t\t\t\titem[gantt.config.resource_property] = item.parent;\r\n\t\t\t\titem.open = true;\r\n\t\t\t\treturn item;\r\n\t\t\t}\r\n\t\t},\r\n\t\tlightbox_resources: function selectResourceControlOptions(resources){\r\n\t\t\tconst lightboxOptions = [];\r\n\t\t\tconst store = gantt.getDatastore(gantt.config.resource_store);\r\n\t\t\tresources.forEach(function(res) {\r\n\t\t\t\tif (!store.hasChild(res.id)) {\r\n\t\t\t\t\tconst copy = gantt.copy(res);\r\n\t\t\t\t\tcopy.key = res.id;\r\n\t\t\t\t\tcopy.label = res.text;\r\n\t\t\t\t\tlightboxOptions.push(copy);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn lightboxOptions;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeGanttReady\", function(){\r\n\t\tif(gantt.getDatastore(gantt.config.resource_store)){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst resourceStoreConfig = gantt.config.resources ? gantt.config.resources.resource_store : undefined;\r\n\t\tlet fetchTasks = resourceStoreConfig ? resourceStoreConfig.fetchTasks : undefined;\r\n\t\tif(gantt.config.resources && gantt.config.resources.editable_resource_diagram){\r\n\t\t\tfetchTasks = true;\r\n\t\t}\r\n\r\n\t\tlet initItems = function(item) {\r\n\t\t\titem.parent = item.parent || gantt.config.root_id;\r\n\t\t\titem[gantt.config.resource_property] = item.parent;\r\n\t\t\titem.open = true;\r\n\t\t\treturn item;\r\n\t\t};\r\n\r\n\t\tif(resourceStoreConfig && resourceStoreConfig.initItem){\r\n\t\t\tinitItems = resourceStoreConfig.initItem;\r\n\t\t}\r\n\r\n\t\tconst storeType = resourceStoreConfig && resourceStoreConfig.type ? resourceStoreConfig.type : \"treeDatastore\";\r\n\r\n\t\tgantt.$resourcesStore = gantt.createDatastore({\r\n\t\t\tname: gantt.config.resource_store,\r\n\t\t\ttype: storeType,\r\n\t\t\tfetchTasks: fetchTasks !== undefined ? fetchTasks : false,\r\n\t\t\tinitItem: initItems\r\n\t\t});\r\n\r\n\t\tgantt.$data.resourcesStore = gantt.$resourcesStore;\r\n\r\n\t\tgantt.$resourcesStore.attachEvent(\"onParse\", function() {\r\n\t\t\tfunction selectResourceControlOptions(resources){\r\n\t\t\t\tconst lightboxOptions = [];\r\n\t\t\t\tresources.forEach(function(res) {\r\n\t\t\t\t\tconst copy = gantt.copy(res);\r\n\t\t\t\t\tcopy.key = res.id;\r\n\t\t\t\t\tcopy.label = res.text;\r\n\t\t\t\t\tlightboxOptions.push(copy);\r\n\t\t\t\t});\r\n\t\t\t\treturn lightboxOptions;\r\n\t\t\t}\r\n\r\n\t\t\tlet lightboxOptionsFnc = selectResourceControlOptions;\r\n\t\t\tlet options;\r\n\t\t\tif(gantt.config.resources && gantt.config.resources.lightbox_resources){\r\n\t\t\t\tlightboxOptionsFnc = gantt.config.resources.lightbox_resources;\r\n\t\t\t}\r\n\t\t\tif(gantt.config.resources && gantt.config.resources.editable_resource_diagram){\r\n\t\t\t\t// GS-2604: case for the next parsed resources\r\n\t\t\t\t// to filter only resources with assignments\r\n\t\t\t\tconst resources = gantt.$resourcesStore.getItems();\r\n\t\t\t\tconst filteredResources = resources.filter(resource => {\r\n\t\t\t\t\tlet assignments = gantt.getResourceAssignments(resource.id);\r\n\t\t\t\t\tif(!gantt.$resourcesStore.hasChild(resource.id) || (assignments && assignments.length)){\r\n\t\t\t\t\t\tif(resource.$resource_id && resource.$task_id){\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\toptions = lightboxOptionsFnc(filteredResources);\r\n\t\t\t} else {\r\n\t\t\t\toptions = lightboxOptionsFnc(gantt.$resourcesStore.getItems());\r\n\t\t\t}\r\n\t\t\tgantt.updateCollection(\"resourceOptions\", options);\r\n\t\t});\r\n\t});\r\n\r\n\tgantt.getTaskBy = methods.getTaskBy;\r\n\tgantt.getResourceAssignments = methods.getResourceAssignments;\r\n\tgantt.config.resource_property = \"owner_id\";\r\n\tgantt.config.resource_store = \"resource\";\r\n\tgantt.config.resource_render_empty_cells = false;\r\n\r\n\t/**\r\n\t * these are placeholder functions that should be redefined by the user\r\n\t*/\r\n\tgantt.templates.histogram_cell_class = function(start_date, end_date, resource, tasks, assignments) {};\r\n\tgantt.templates.histogram_cell_label = function(start_date, end_date, resource, tasks, assignments) {\r\n\t\treturn tasks.length + \"/3\";\r\n\t};\r\n\tgantt.templates.histogram_cell_allocated = function(start_date, end_date, resource, tasks, assignments) {\r\n\t\treturn tasks.length / 3;\r\n\t};\r\n\tgantt.templates.histogram_cell_capacity = function(start_date, end_date, resource, tasks, assignments) {\r\n\t\treturn 0;\r\n\t};\r\n\r\n\r\n\tconst defaultResourceCellClass = function(start, end, resource, tasks, assignments) {\r\n\t\tvar css = \"\";\r\n\t\tif (tasks.length <= 1) {\r\n\t\t\tcss = \"gantt_resource_marker_ok\";\r\n\t\t} else {\r\n\t\t\tcss = \"gantt_resource_marker_overtime\";\r\n\t\t}\r\n\t\treturn css;\r\n\t};\r\n\r\n\tconst defaultResourceCellTemplate = function(start, end, resource, tasks, assignments) {\r\n\t\treturn tasks.length * 8;\r\n\t};\r\n\r\n\tgantt.templates.resource_cell_value = defaultResourceCellTemplate;\r\n\tgantt.templates.resource_cell_class = defaultResourceCellClass;\r\n\r\n\t//editable_resource_diagram\r\n\tgantt.attachEvent(\"onBeforeGanttReady\", function(){\r\n\t\tif(gantt.config.resources && gantt.config.resources.editable_resource_diagram){\r\n\r\n\t\t\tgantt.config.resource_render_empty_cells = true;\r\n\t\t\tif(gantt.templates.resource_cell_value === defaultResourceCellTemplate){\r\n\t\t\t\tgantt.templates.resource_cell_value = gantt.ext.resources.editableResourceCellTemplate;\r\n\t\t\t}\r\n\t\t\tif(gantt.templates.resource_cell_class === defaultResourceCellClass){\r\n\t\t\t\tgantt.templates.resource_cell_class = gantt.ext.resources.editableResourceCellClass;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tgantt.ext.resources.initEditableDiagram(gantt);\r\n\t\t}\r\n\t});\r\n};\r\n\r\n\r\n","export default function (gantt) {\r\n\tvar resourceAssignmentsProperty = \"$resourceAssignments\";\r\n\tgantt.config.resource_assignment_store = \"resourceAssignments\";\r\n\tgantt.config.process_resource_assignments = true;\r\n\r\n\tvar resourceAssignmentFormats = {\r\n\t\tauto: \"auto\",\r\n\t\tsingleValue: \"singleValue\",\r\n\t\tvalueArray: \"valueArray\",\r\n\t\tresourceValueArray: \"resourceValueArray\",\r\n\t\tassignmentsArray: \"assignmentsArray\"\r\n\t};\r\n\tvar resourceAssignmentFormat = resourceAssignmentFormats.auto;//\"primitiveSingle\";//\"primitive\";//\"object\"|\"assignment\"\r\n\r\n\tvar assignmentModes = {\r\n\t\tfixedDates: \"fixedDates\",\r\n\t\tfixedDuration: \"fixedDuration\",\r\n\t\tdefault: \"default\"\r\n\t};\r\n\r\n\r\n\tfunction initAssignmentFields(item, task){\r\n\t\tif (item.start_date) {\r\n\t\t\titem.start_date = gantt.date.parseDate(item.start_date, \"parse_date\");\r\n\t\t} else {\r\n\t\t\titem.start_date = null;\r\n\t\t}\r\n\r\n\t\tif (item.end_date) {\r\n\t\t\titem.end_date = gantt.date.parseDate(item.end_date, \"parse_date\");\r\n\t\t} else {\r\n\t\t\titem.end_date = null;\r\n\t\t}\r\n\r\n\t\tvar delay = Number(item.delay);\r\n\t\tvar initDelay = false;\r\n\t\tif (!isNaN(delay)) {\r\n\t\t\titem.delay = delay;\r\n\t\t} else {\r\n\t\t\titem.delay = 0;\r\n\t\t\tinitDelay = true;\r\n\t\t}\r\n\r\n\t\tif (!gantt.defined(item.value)) {\r\n\t\t\titem.value = null;\r\n\t\t}\r\n\r\n\t\tif (!item.task_id || !item.resource_id) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\titem.mode = item.mode || assignmentModes.default;\r\n\r\n\t\tif(item.mode === assignmentModes.fixedDuration){\r\n\t\t\tif(isNaN(Number(item.duration))){\r\n\t\t\t\ttask = task || gantt.getTask(item.task_id);\r\n\t\t\t\titem.duration = gantt.calculateDuration({\r\n\t\t\t\t\tstart_date: item.start_date,\r\n\t\t\t\t\tend_date: item.end_date,\r\n\t\t\t\t\tid: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif(initDelay){\r\n\t\t\t\ttask = task || gantt.getTask(item.task_id);\r\n\t\t\t\titem.delay = gantt.calculateDuration({\r\n\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\tend_date: item.start_date,\r\n\t\t\t\t\tid: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (item.mode !== assignmentModes.fixedDates && (task || gantt.isTaskExists(item.task_id))) {\r\n\t\t\ttask = task || gantt.getTask(item.task_id);\r\n\t\t\tvar timing = _assignmentTimeFromTask(item, task);\r\n\t\t\titem.start_date = timing.start_date;\r\n\t\t\titem.end_date = timing.end_date;\r\n\t\t\titem.duration = timing.duration;\r\n\t\t}\r\n\t}\r\n\t// gantt init\r\n\tvar resourceAssignmentsStore = gantt.createDatastore({\r\n\t\tname: gantt.config.resource_assignment_store,\r\n\t\tinitItem: function (item) {\r\n\t\t\tif (!item.id) {\r\n\t\t\t\titem.id = gantt.uid();\r\n\t\t\t}\r\n\r\n\t\t\tinitAssignmentFields(item);\r\n\r\n\t\t\treturn item;\r\n\t\t}\r\n\t});\r\n\t\r\n\tgantt.$data.assignmentsStore = resourceAssignmentsStore;\r\n\r\n\tfunction _assignmentTimeFromTask(assignment, task) {\r\n\r\n\t\tif (assignment.mode === assignmentModes.fixedDates) {\r\n\t\t\treturn {\r\n\t\t\t\tstart_date: assignment.start_date,\r\n\t\t\t\tend_date: assignment.end_date,\r\n\t\t\t\tduration: assignment.duration\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tvar start = assignment.delay ? gantt.calculateEndDate({\r\n\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\tduration: assignment.delay,\r\n\t\t\t\ttask: task\r\n\t\t\t}) : new Date(task.start_date);\r\n\r\n\t\t\tvar end;\r\n\t\t\tvar duration;\r\n\t\t\tif (assignment.mode === assignmentModes.fixedDuration) {\r\n\t\t\t\tend = gantt.calculateEndDate({\r\n\t\t\t\t\tstart_date: start,\r\n\t\t\t\t\tduration: assignment.duration,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t\tduration = assignment.duration;\r\n\t\t\t} else {\r\n\t\t\t\tend = new Date(task.end_date);\r\n\t\t\t\tduration = task.duration - assignment.delay;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: start,\r\n\t\t\tend_date: end,\r\n\t\t\tduration: duration\r\n\t\t};\r\n\t}\r\n\r\n\t// data loading\r\n\r\n\tfunction _makeAssignmentsFromTask(task) {\r\n\t\tconst property = gantt.config.resource_property;\r\n\t\tlet assignments = task[property];\r\n\t\tconst resourceAssignments = [];\r\n\t\tlet detectFormat = resourceAssignmentFormat === resourceAssignmentFormats.auto;\r\n\r\n\t\tif (gantt.defined(assignments) && assignments) {\r\n\t\t\tif (!Array.isArray(assignments)) {\r\n\t\t\t\tassignments = [assignments];\r\n\t\t\t\tif (detectFormat) {\r\n\t\t\t\t\tresourceAssignmentFormat = resourceAssignmentFormats.singleValue;\r\n\t\t\t\t\tdetectFormat = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst usedIds = {};\r\n\t\t\tassignments.forEach(function (res) {\r\n\t\t\t\tif (!res.resource_id) { // when resource is a string/number\r\n\t\t\t\t\tres = { resource_id: res };\r\n\t\t\t\t\tif (detectFormat) {\r\n\t\t\t\t\t\tresourceAssignmentFormat = resourceAssignmentFormats.valueArray;\r\n\t\t\t\t\t\tdetectFormat = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//\tisSimpleArray = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (detectFormat) {\r\n\t\t\t\t\tif (res.id && res.resource_id) {\r\n\t\t\t\t\t\tresourceAssignmentFormat = resourceAssignmentFormats.assignmentsArray;\r\n\t\t\t\t\t\tdetectFormat = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresourceAssignmentFormat = resourceAssignmentFormats.resourceValueArray;\r\n\t\t\t\t\t\tdetectFormat = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet defaultMode = assignmentModes.default;\r\n\t\t\t\tif(!res.mode){\r\n\t\t\t\t\tif((res.start_date && res.end_date) || (res.start_date && res.duration)){\r\n\t\t\t\t\t\tdefaultMode = assignmentModes.fixedDuration;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet id;\r\n\t\t\t\tif(!res.id && res.$id && !usedIds[res.$id]){\r\n\t\t\t\t\tid = res.$id;\r\n\t\t\t\t} else if(res.id && !usedIds[res.id]){\r\n\t\t\t\t\tid = res.id;\r\n\t\t\t\t} else{\r\n\t\t\t\t\tid = gantt.uid();\r\n\t\t\t\t}\r\n\t\t\t\tusedIds[id] = true;\r\n\r\n\t\t\t\tconst assignment = {\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\tstart_date: res.start_date,\r\n\t\t\t\t\tduration: res.duration,\r\n\t\t\t\t\tend_date: res.end_date,\r\n\t\t\t\t\tdelay: res.delay,\r\n\t\t\t\t\ttask_id: task.id,\r\n\t\t\t\t\tresource_id: res.resource_id,\r\n\t\t\t\t\tvalue: res.value,\r\n\t\t\t\t\tmode: res.mode || defaultMode\r\n\t\t\t\t};\r\n\t\t\t\t// GS-2490: to add custom properties to assignment\r\n\t\t\t\t// need to exclude $id which incfluences on render \r\n\t\t\t\tObject.keys(res).forEach(key => {\r\n\t\t\t\t\tif(key != \"$id\") {\r\n\t\t\t\t\t\tassignment[key] = res[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(!(assignment.start_date && assignment.start_date.getMonth \r\n\t\t\t\t\t&& assignment.end_date && assignment.end_date.getMonth && typeof assignment.duration === \"number\")){\r\n\t\t\t\t\tinitAssignmentFields(assignment, task);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresourceAssignments.push(assignment);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn resourceAssignments;\r\n\t}\r\n\r\n\tfunction _updateTaskBack(taskId) {\r\n\t\t// GS-1493. In some cases, the resource assignment store has the tasks that no longer exist\r\n\t\tif (!gantt.isTaskExists(taskId)){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar task = gantt.getTask(taskId);\r\n\t\tvar assignments = gantt.getTaskAssignments(task.id);\r\n\t\t_assignAssignments(task, assignments);\r\n\t}\r\n\r\n\tfunction _assignAssignments(task, assignments){\r\n\t\tassignments.sort(function(a, b){\r\n\t\t\tif(a.start_date && b.start_date && a.start_date.valueOf() != b.start_date.valueOf()){\r\n\t\t\t\treturn a.start_date - b.start_date;\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (resourceAssignmentFormat == resourceAssignmentFormats.assignmentsArray) {\r\n\t\t\ttask[gantt.config.resource_property] = assignments;\r\n\t\t} else if (resourceAssignmentFormat == resourceAssignmentFormats.resourceValueArray) {\r\n\t\t\ttask[gantt.config.resource_property] = assignments.map(function (a) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t$id: a.id,\r\n\t\t\t\t\tstart_date: a.start_date,\r\n\t\t\t\t\tduration: a.duration,\r\n\t\t\t\t\tend_date: a.end_date,\r\n\t\t\t\t\tdelay: a.delay,\r\n\t\t\t\t\tresource_id: a.resource_id,\r\n\t\t\t\t\tvalue: a.value,\r\n\t\t\t\t\tmode: a.mode\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\ttask[resourceAssignmentsProperty] = assignments;\r\n\t}\r\n\r\n\tfunction _loadAssignmentsFromTask(task) {\r\n\t\tvar assignments = _makeAssignmentsFromTask(task);\r\n\t\tvar taskAssignments = [];\r\n\t\tassignments.forEach(function (a) {\r\n\t\t\ta.id = a.id || gantt.uid();\r\n\t\t\t//var newId = resourceAssignmentsStore.addItem(a);\r\n\t\t\ttaskAssignments.push(a);\r\n\t\t});\r\n\r\n\t\treturn assignments;\r\n\t}\r\n\r\n\tfunction diffAssignments(taskValues, assignmentsStoreValues) {\r\n\t\tvar result = {\r\n\t\t\tinBoth: [],\r\n\t\t\tinTaskNotInStore: [],\r\n\t\t\tinStoreNotInTask: []\r\n\t\t};\r\n\r\n\t\tif (resourceAssignmentFormat == resourceAssignmentFormats.singleValue) {\r\n\t\t\tvar taskOwner = taskValues[0];\r\n\t\t\tvar ownerId = taskOwner ? taskOwner.resource_id : null;\r\n\t\t\tvar foundOwnerAssignment = false;\r\n\t\t\tassignmentsStoreValues.forEach(function (a) {\r\n\t\t\t\tif (a.resource_id != ownerId) {\r\n\t\t\t\t\tresult.inStoreNotInTask.push(a);\r\n\t\t\t\t} else if (a.resource_id == ownerId) {\r\n\t\t\t\t\tresult.inBoth.push({ store: a, task: taskOwner });\r\n\t\t\t\t\tfoundOwnerAssignment = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (!foundOwnerAssignment && taskOwner) {\r\n\t\t\t\tresult.inTaskNotInStore.push(taskOwner);\r\n\t\t\t}\r\n\r\n\r\n\t\t} else if (resourceAssignmentFormat == resourceAssignmentFormats.valueArray){\r\n\r\n\t\t\tvar taskSearch = {};\r\n\t\t\tvar storeSearch = {};\r\n\t\t\tvar processedIds = {};\r\n\t\t\ttaskValues.forEach(function (a) {\r\n\t\t\t\ttaskSearch[a.resource_id] = a;\r\n\t\t\t});\r\n\t\t\tassignmentsStoreValues.forEach(function (a) {\r\n\t\t\t\tstoreSearch[a.resource_id] = a;\r\n\t\t\t});\r\n\t\t\ttaskValues.concat(assignmentsStoreValues).forEach(function (a) {\r\n\t\t\t\tif (processedIds[a.resource_id]) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tprocessedIds[a.resource_id] = true;\r\n\t\t\t\tvar inTask = taskSearch[a.resource_id];\r\n\t\t\t\tvar inStore = storeSearch[a.resource_id];\r\n\r\n\t\t\t\tif (inTask && inStore) {\r\n\t\t\t\t\tresult.inBoth.push({ store: inStore, task: inTask });\r\n\t\t\t\t} else if (inTask && !inStore) {\r\n\t\t\t\t\tresult.inTaskNotInStore.push(inTask);\r\n\t\t\t\t} else if (!inTask && inStore) {\r\n\t\t\t\t\tresult.inStoreNotInTask.push(inStore);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else if ((resourceAssignmentFormat == resourceAssignmentFormats.assignmentsArray)\r\n\t\t\t|| (resourceAssignmentFormat == resourceAssignmentFormats.resourceValueArray)) {\r\n\t\t\tvar taskSearch = {};\r\n\t\t\tvar storeSearch = {};\r\n\t\t\tvar processedIds = {};\r\n\t\t\ttaskValues.forEach(function (a) {\r\n\t\t\t\ttaskSearch[a.id || a.$id] = a;\r\n\t\t\t});\r\n\t\t\tassignmentsStoreValues.forEach(function (a) {\r\n\t\t\t\tstoreSearch[a.id] = a;\r\n\t\t\t});\r\n\t\t\ttaskValues.concat(assignmentsStoreValues).forEach(function (a) {\r\n\t\t\t\tvar id = a.id || a.$id;\r\n\t\t\t\tif (processedIds[id]) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tprocessedIds[id] = true;\r\n\t\t\t\tvar inTask = taskSearch[id];\r\n\t\t\t\tvar inStore = storeSearch[id];\r\n\r\n\t\t\t\tif (inTask && inStore) {\r\n\t\t\t\t\tresult.inBoth.push({ store: inStore, task: inTask });\r\n\t\t\t\t} else if (inTask && !inStore) {\r\n\t\t\t\t\tresult.inTaskNotInStore.push(inTask);\r\n\t\t\t\t} else if (!inTask && inStore) {\r\n\t\t\t\t\tresult.inStoreNotInTask.push(inStore);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tfunction assignmentHasChanged(source, target) {\r\n\t\tvar ignoreFields = {\r\n\t\t\tid: true\r\n\t\t};\r\n\r\n\t\tfor (var i in source) {\r\n\t\t\tif (!ignoreFields[i]) {\r\n\t\t\t\tif (String(source[i]) !== String(target[i])) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tfunction updateAssignment(source, target) {\r\n\t\tvar ignoreFields = {\r\n\t\t\tid: true\r\n\t\t};\r\n\r\n\t\tfor (var i in source) {\r\n\t\t\tif (!ignoreFields[i]) {\r\n\t\t\t\ttarget[i] = source[i];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _syncAssignments(task, storeAssignments){\r\n\t\tvar tasksAssignments = _makeAssignmentsFromTask(task);\r\n\r\n\t\tvar diff = diffAssignments(tasksAssignments, storeAssignments);\r\n\t\tdiff.inStoreNotInTask.forEach(function (a) {\r\n\t\t\tresourceAssignmentsStore.removeItem(a.id);\r\n\t\t});\r\n\t\tdiff.inTaskNotInStore.forEach(function (a) {\r\n\t\t\tresourceAssignmentsStore.addItem(a);\r\n\t\t});\r\n\r\n\t\tdiff.inBoth.forEach(function (a) {\r\n\t\t\tif (assignmentHasChanged(a.task, a.store)) {\r\n\t\t\t\tupdateAssignment(a.task, a.store);\r\n\t\t\t\tresourceAssignmentsStore.updateItem(a.store.id);\r\n\t\t\t} else {\r\n\t\t\t\tif (a.task.start_date && a.task.end_date && a.task.mode !== assignmentModes.fixedDates) {\r\n\t\t\t\t\tvar timing = _assignmentTimeFromTask(a.store, task);\r\n\t\t\t\t\tif (a.store.start_date.valueOf() != timing.start_date.valueOf() || a.store.end_date.valueOf() != timing.end_date.valueOf()) {\r\n\t\t\t\t\t\ta.store.start_date = timing.start_date;\r\n\t\t\t\t\t\ta.store.end_date = timing.end_date;\r\n\t\t\t\t\t\ta.store.duration = timing.duration;\r\n\t\t\t\t\t\tresourceAssignmentsStore.updateItem(a.store.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t_updateTaskBack(task.id);\r\n\t}\r\n\r\n\tfunction _syncOnTaskUpdate(task) {\r\n\t\tvar storeAssignments = task[resourceAssignmentsProperty] || resourceAssignmentsStore.find(function (a) {\r\n\t\t\treturn a.task_id == task.id;\r\n\t\t});\r\n\r\n\t\t_syncAssignments(task, storeAssignments);\r\n\t}\r\n\r\n\tfunction _syncOnTaskDelete(ids) {\r\n\t\tvar idsSearch = {};\r\n\t\tids.forEach(function (id) {\r\n\t\t\tidsSearch[id] = true;\r\n\t\t});\r\n\t\tvar taskResources = resourceAssignmentsStore.find(function (a) {\r\n\t\t\treturn idsSearch[a.task_id];\r\n\t\t});\r\n\t\ttaskResources.forEach(function (a) {\r\n\t\t\tresourceAssignmentsStore.removeItem(a.id);\r\n\t\t});\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\r\n\t\tif (gantt.config.process_resource_assignments) {\r\n\t\t\tgantt.attachEvent(\"onParse\", function () {\r\n\t\t\t\tgantt.silent(function () {\r\n\t\t\t\t\tresourceAssignmentsStore.clearAll();\r\n\t\t\t\t\tvar totalAssignments = [];\r\n\t\t\t\t\tgantt.eachTask(function (task) {\r\n\t\t\t\t\t\tif (task.type === gantt.config.types.project) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar assignments = _loadAssignmentsFromTask(task);\r\n\t\t\t\t\t\t_assignAssignments(task, assignments);\r\n\r\n\t\t\t\t\t\tassignments.forEach(function (a) {\r\n\t\t\t\t\t\t\ttotalAssignments.push(a);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tresourceAssignmentsStore.parse(totalAssignments);\r\n\t\t\t\t});\r\n\r\n\t\t\t});\r\n\r\n\t\t\tvar batchUpdate = false;\r\n\t\t\tvar needUpdate = false;\r\n\t\t\tvar needUpdateFor = {};\r\n\t\t\tvar undoBatchCancel = false;\r\n\t\t\tgantt.attachEvent(\"onBeforeBatchUpdate\", function(){\r\n\t\t\t\tbatchUpdate = true;\r\n\t\t\t});\r\n\t\t\tgantt.attachEvent(\"onAfterBatchUpdate\", function(){\r\n\t\t\t\t\r\n\t\t\t\tif(needUpdate){\r\n\t\t\t\t\tvar assignmentsHash = {};\r\n\t\t\t\t\tfor(var i in needUpdateFor){\r\n\t\t\t\t\t\tassignmentsHash[i] = gantt.getTaskAssignments(needUpdateFor[i].id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// GS-2546. If we add a task that has the data in the old format,\r\n\t\t\t\t\t// we need to reset the cache as the assignment will be added\r\n\t\t\t\t\t// to the assignment store, but the cache won't have the changes\r\n\t\t\t\t\tif (gantt.config.process_resource_assignments && resourceAssignmentFormat === \"resourceValueArray\"){\r\n\t\t\t\t\t\ttaskAssignmentsCache = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor(var i in needUpdateFor){\r\n\t\t\t\t\t\t_syncAssignments(needUpdateFor[i], assignmentsHash[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tneedUpdate = false;\r\n\t\t\t\tbatchUpdate = false;\r\n\t\t\t\tneedUpdateFor = {};\r\n\t\t\t});\r\n\r\n\t\t\tgantt.attachEvent(\"onTaskCreated\", function (item) {\r\n\t\t\t\tvar assignments = _loadAssignmentsFromTask(item);\r\n\t\t\t\tresourceAssignmentsStore.parse(assignments);\r\n\t\t\t\t_assignAssignments(item, assignments);\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t\tgantt.attachEvent(\"onAfterTaskUpdate\", function (id, item) {\r\n\t\t\t\tif(batchUpdate){\r\n\t\t\t\t\tneedUpdate = true;\r\n\t\t\t\t\tneedUpdateFor[id] = item;\r\n\t\t\t\t}else if (!item.unscheduled){\r\n\t\t\t\t\t_syncOnTaskUpdate(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tgantt.attachEvent(\"onAfterTaskAdd\", function (id, item) {\r\n\t\t\t\tif(batchUpdate){\r\n\t\t\t\t\tneedUpdate = true;\r\n\t\t\t\t\tneedUpdateFor[id] = item;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t_syncOnTaskUpdate(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t/*\tgantt.attachEvent(\"onRowDragMove\", function (id) {\r\n\t\t\t\t_syncOnTaskUpdate(gantt.getTask(id));\r\n\t\t\t});*/\r\n\t\t\tgantt.attachEvent(\"onRowDragEnd\", function (id) {\r\n\t\t\t\t_syncOnTaskUpdate(gantt.getTask(id));\r\n\t\t\t});\r\n\t\t\tgantt.$data.tasksStore.attachEvent(\"onAfterDeleteConfirmed\", function (id, item) {\r\n\t\t\t\tvar deleteIds = [id];\r\n\t\t\t\tgantt.eachTask(function (task) {\r\n\t\t\t\t\tdeleteIds.push(task.id);\r\n\t\t\t\t}, id);\r\n\t\t\t\t_syncOnTaskDelete(deleteIds);\r\n\t\t\t});\r\n\t\t\tgantt.$data.tasksStore.attachEvent(\"onClearAll\", function () {\r\n\t\t\t\tresourceAssignmentsCache = null;\r\n\t\t\t\tresourceTaskAssignmentsCache = null;\r\n\t\t\t\ttaskAssignmentsCache = null;\r\n\t\t\t\tresourceAssignmentsStore.clearAll();\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t\tgantt.attachEvent(\"onTaskIdChange\", function (id, new_id) {\r\n\t\t\t\tvar taskResources = resourceAssignmentsStore.find(function (a) {\r\n\t\t\t\t\treturn a.task_id == id;\r\n\t\t\t\t});\r\n\t\t\t\ttaskResources.forEach(function (a) {\r\n\t\t\t\t\ta.task_id = new_id;\r\n\t\t\t\t\tresourceAssignmentsStore.updateItem(a.id);\r\n\t\t\t\t});\r\n\t\t\t\t_updateTaskBack(new_id);\r\n\t\t\t\t//any custom logic here\r\n\t\t\t});\r\n\t\t\t// GS-2144. When we Undo something, the cache should be reset\r\n\t\t\t// during the `onStoreUpdated` event to properly update the assignments\r\n\t\t\tgantt.attachEvent(\"onBeforeUndo\", function (action) {\r\n\t\t\t\tundoBatchCancel = true;\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t\tgantt.attachEvent(\"onAfterUndo\", function (action) {\r\n\t\t\t\tundoBatchCancel = true;\r\n\t\t\t});\r\n\r\n\r\n\t\t\tvar resourceAssignmentsCache = null;\r\n\t\t\tvar resourceTaskAssignmentsCache = null;\r\n\t\t\tvar taskAssignmentsCache = null;\r\n\r\n\t\t\tresourceAssignmentsStore.attachEvent(\"onStoreUpdated\", function resetCache(){\r\n\t\t\t\tif(batchUpdate && !undoBatchCancel){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tresourceAssignmentsCache = null;\r\n\t\t\t\tresourceTaskAssignmentsCache = null;\r\n\t\t\t\ttaskAssignmentsCache = null;\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\r\n\t\t\tgantt.getResourceAssignments = function (resourceId, taskId) {\r\n\t\t\t\tvar searchTaskId = gantt.defined(taskId) && taskId !== null;\r\n\r\n\t\t\t\tif(resourceAssignmentsCache === null){\r\n\t\t\t\t\tresourceAssignmentsCache = {};\r\n\t\t\t\t\tresourceTaskAssignmentsCache = {};\r\n\r\n\t\t\t\t\tresourceAssignmentsStore.eachItem(function (a) {\r\n\t\t\t\t\t\tif(!resourceAssignmentsCache[a.resource_id]){\r\n\t\t\t\t\t\t\tresourceAssignmentsCache[a.resource_id] = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresourceAssignmentsCache[a.resource_id].push(a);\r\n\r\n\t\t\t\t\t\tvar resourceTaskCacheKey = a.resource_id + \"-\" + a.task_id;\r\n\t\t\t\t\t\tif(!resourceTaskAssignmentsCache[resourceTaskCacheKey]){\r\n\t\t\t\t\t\t\tresourceTaskAssignmentsCache[resourceTaskCacheKey] = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresourceTaskAssignmentsCache[resourceTaskCacheKey].push(a);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif(searchTaskId){\r\n\t\t\t\t\treturn (resourceTaskAssignmentsCache[resourceId + \"-\" + taskId] || []).slice();\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn (resourceAssignmentsCache[resourceId] || []).slice();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t\r\n\t\t\tgantt.getTaskAssignments = function (taskId) {\r\n\t\t\t\tif(taskAssignmentsCache === null){\r\n\t\t\t\t\tvar result = [];\r\n\t\t\t\t\ttaskAssignmentsCache = {};\r\n\t\t\t\t\tresourceAssignmentsStore.eachItem(function (a) {\r\n\t\t\t\t\t\tif(!taskAssignmentsCache[a.task_id]){\r\n\t\t\t\t\t\t\ttaskAssignmentsCache[a.task_id] = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttaskAssignmentsCache[a.task_id].push(a);\r\n\t\t\t\t\t\tif (a.task_id == taskId) {\r\n\t\t\t\t\t\t\tresult.push(a);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn (taskAssignmentsCache[taskId] || []).slice();\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tgantt.getTaskResources = function (taskId) {\r\n\t\t\t\tconst store = gantt.getDatastore(\"resource\");\r\n\t\t\t\tconst assignments = gantt.getTaskAssignments(taskId);\r\n\t\r\n\t\t\t\tconst uniqueResources = {};\r\n\t\t\t\tassignments.forEach(function(a){\r\n\t\t\t\t\tif(!uniqueResources[a.resource_id]){\r\n\t\t\t\t\t\tuniqueResources[a.resource_id] = a.resource_id;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tconst resources = [];\r\n\t\t\t\tfor(const i in uniqueResources){\r\n\t\t\t\t\tconst res = store.getItem(uniqueResources[i]);\r\n\t\t\t\t\tif(res){\r\n\t\t\t\t\t\tresources.push(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn resources;\r\n\t\t\t};\r\n\r\n\t\t\tgantt.updateTaskAssignments = _updateTaskBack;\r\n\t\t}\r\n\t}, {once: true});\r\n};","export default function addPlaceholder(gantt){\r\n\tfunction isEnabled(){\r\n\t\treturn gantt.config.placeholder_task;\r\n\t}\r\n\r\n\tfunction callIfEnabled(callback){\r\n\t\treturn function(){\r\n\t\t\tif(!isEnabled()){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn callback.apply(this, arguments);\r\n\t\t};\r\n\t}\r\n\r\n\tfunction silenceDataProcessor(dataProcessor){\r\n\t\tif(dataProcessor && !dataProcessor._silencedPlaceholder){\r\n\t\t\tdataProcessor._silencedPlaceholder = true;\r\n\t\t\tdataProcessor.attachEvent(\"onBeforeUpdate\", callIfEnabled(function(id, state, data){\r\n\t\t\t\tif(data.type == gantt.config.types.placeholder){\r\n\t\t\t\t\tdataProcessor.setUpdated(id, false);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\r\n\tfunction insertPlaceholder(){\r\n\t\tvar placeholders = gantt.getTaskBy(\"type\", gantt.config.types.placeholder);\r\n\t\tif(!placeholders.length || !gantt.isTaskExists(placeholders[0].id)){\r\n\t\t\tvar placeholder = {\r\n\t\t\t\tunscheduled: true,\r\n\t\t\t\ttype: gantt.config.types.placeholder,\r\n\t\t\t\tduration:0,\r\n\t\t\t\ttext: gantt.locale.labels.new_task\r\n\t\t\t};\r\n\t\t\tif(gantt.callEvent(\"onTaskCreated\", [placeholder]) === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tgantt.addTask(placeholder);\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tfunction afterEdit(id){\r\n\t\tvar item = gantt.getTask(id);\r\n\t\tif(item.type == gantt.config.types.placeholder) {\r\n\t\t\tif(item.start_date && item.end_date && item.unscheduled){\r\n\t\t\t\titem.unscheduled = false;\r\n\t\t\t}\r\n\r\n\t\t\tgantt.batchUpdate(function(){\r\n\t\t\t\tvar newTask = gantt.copy(item);\r\n\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\tgantt.deleteTask(item.id);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdelete newTask[\"!nativeeditor_status\"];\r\n\t\t\t\tnewTask.type = gantt.config.types.task;\r\n\t\t\t\tnewTask.id = gantt.uid();\r\n\t\t\t\tgantt.addTask(newTask);\r\n\r\n\t\t\t\t//insertPlaceholder();\r\n\t\t\t});\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.config.types.placeholder = \"placeholder\";\r\n\tgantt.attachEvent(\"onDataProcessorReady\", callIfEnabled(silenceDataProcessor));\r\n\r\n\tvar ready = false;\r\n\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\t\tif(ready){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tready = true;\r\n\t\tgantt.attachEvent(\"onAfterTaskUpdate\", callIfEnabled(afterEdit));\r\n\t\tgantt.attachEvent(\"onAfterTaskAdd\", callIfEnabled(function(id, task){\r\n\t\t\tif(task.type != gantt.config.types.placeholder){\r\n\t\t\t\tvar placeholders = gantt.getTaskBy(\"type\", gantt.config.types.placeholder);\r\n\t\t\t\tplaceholders.forEach(function(p){\r\n\t\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\t\tif(gantt.isTaskExists(p.id))\r\n\t\t\t\t\t\t\tgantt.deleteTask(p.id);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tinsertPlaceholder();\r\n\t\t\t}\r\n\t\t}));\r\n\t\tgantt.attachEvent(\"onParse\", callIfEnabled(insertPlaceholder));\r\n\t});\r\n\r\n\tfunction isPlaceholderTask(taskId){\r\n\t\tif(gantt.config.types.placeholder && gantt.isTaskExists(taskId)){\r\n\t\t\tvar task = gantt.getTask(taskId);\r\n\t\t\tif(task.type == gantt.config.types.placeholder){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tfunction isPlaceholderLink(link){\r\n\t\tif(isPlaceholderTask(link.source) || isPlaceholderTask(link.target)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tgantt.attachEvent(\"onLinkValidation\", function(link){\r\n\t\tif(isPlaceholderLink(link)){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\tgantt.attachEvent(\"onBeforeLinkAdd\", function(id,link){\r\n\t\tif(isPlaceholderLink(link)){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onBeforeUndoStack\", function(action){\r\n\t\tfor(var i = 0; i < action.commands.length; i++){\r\n\t\t\tvar command = action.commands[i];\r\n\t\t\tif(command.entity === \"task\" && command.value.type === gantt.config.types.placeholder){\r\n\t\t\t\taction.commands.splice(i,1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n};","export default function(gantt) {\r\n\tfunction isEnabled() {\r\n\t\treturn gantt.config.auto_types && // if enabled\r\n\t\t\t(gantt.getTaskType(gantt.config.types.project) == gantt.config.types.project);// and supported\r\n\t}\r\n\r\n\tfunction callIfEnabled(callback) {\r\n\t\treturn function() {\r\n\t\t\tif (!isEnabled()) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn callback.apply(this, arguments);\r\n\t\t};\r\n\t}\r\n\r\n\tfunction checkTaskType(id, changedTypes) {\r\n\t\tvar task = gantt.getTask(id);\r\n\t\tvar targetType = getTaskTypeToUpdate(task);\r\n\t\tif (targetType !== false && gantt.getTaskType(task) !== targetType) {\r\n\t\t\tchangedTypes.$needsUpdate = true;\r\n\t\t\tchangedTypes[task.id] = {task: task, type: targetType};\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getUpdatedTypes(id, changedTypes) {\r\n\t\tchangedTypes = changedTypes || {};\r\n\t\t\r\n\t\tcheckTaskType(id, changedTypes);\r\n\t\tgantt.eachParent(function(parent) {\r\n\t\t\tcheckTaskType(parent.id, changedTypes);\r\n\t\t}, id);\r\n\r\n\t\treturn changedTypes;\r\n\t}\r\n\r\n\tfunction applyChanges(changedTypes) {\r\n\t\tfor (var i in changedTypes) {\r\n\t\t\tif(changedTypes[i] && changedTypes[i].task){\r\n\t\t\t\tvar task = changedTypes[i].task;\r\n\t\t\t\ttask.type = changedTypes[i].type;\r\n\t\t\t\tgantt.updateTask(task.id);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction updateParentTypes(startId) {\r\n\t\tif (gantt.getState().group_mode) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tvar changedTypes = getUpdatedTypes(startId);\r\n\t\tif (changedTypes.$needsUpdate) {\r\n\t\t\tgantt.batchUpdate(function() {\r\n\t\t\t\tapplyChanges(changedTypes);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tvar delTaskParent;\r\n\r\n\tfunction updateTaskType(task, targetType) {\r\n\t\tif(!gantt.getState().group_mode){\r\n\t\t\ttask.type = targetType;\r\n\t\t\tgantt.updateTask(task.id);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getTaskTypeToUpdate(task) {\r\n\t\tvar allTypes = gantt.config.types;\r\n\t\tvar hasChildren = gantt.hasChild(task.id);\r\n\t\tvar taskType = gantt.getTaskType(task.type);\r\n\r\n\t\tif (hasChildren && taskType === allTypes.task) {\r\n\t\t\treturn allTypes.project;\r\n\t\t}\r\n\r\n\t\tif (!hasChildren && taskType === allTypes.project) {\r\n\t\t\treturn allTypes.task;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tvar isParsingDone = true;\r\n\r\n\tgantt.attachEvent(\"onParse\", callIfEnabled(function() {\r\n\t\tisParsingDone = false;\r\n\t\tif(gantt.getState().group_mode){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tgantt.batchUpdate(function() {\r\n\t\t\tgantt.eachTask(function(task) {\r\n\t\t\t\tvar targetType = getTaskTypeToUpdate(task);\r\n\t\t\t\tif (targetType !== false) {\r\n\t\t\t\t\tupdateTaskType(task, targetType);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tisParsingDone = true;\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onAfterTaskAdd\", callIfEnabled(function(id) {\r\n\t\tif (isParsingDone) {\r\n\t\t\tupdateParentTypes(id);\r\n\t\t}\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onAfterTaskUpdate\", callIfEnabled(function(id) {\r\n\t\tif (isParsingDone) {\r\n\t\t\tupdateParentTypes(id);\r\n\t\t}\r\n\t}));\r\n\r\n\tfunction updateAfterRemoveChild(id){\r\n\t\tif (id != gantt.config.root_id && gantt.isTaskExists(id)) {\r\n\t\t\tupdateParentTypes(id);\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskDelete\", callIfEnabled(function(id, task) {\r\n\t\tdelTaskParent = gantt.getParent(id);\r\n\t\treturn true;\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDelete\", callIfEnabled(function(id, task) {\r\n\t\tupdateAfterRemoveChild(delTaskParent);\r\n\t}));\r\n\r\n\r\n\tvar originalRowDndParent;\r\n\r\n\tgantt.attachEvent(\"onRowDragStart\", callIfEnabled(function(id, target, e) {\r\n\t\toriginalRowDndParent = gantt.getParent(id);\r\n\t\treturn true;\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onRowDragEnd\", callIfEnabled(function(id, target) {\r\n\t\tupdateAfterRemoveChild(originalRowDndParent);\r\n\t\tupdateParentTypes(id);\r\n\t}));\r\n\r\n\tvar originalMoveTaskParent;\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskMove\", callIfEnabled(function(sid, parent, tindex) {\r\n\t\toriginalMoveTaskParent = gantt.getParent(sid);\r\n\t\treturn true;\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onAfterTaskMove\", callIfEnabled(function(id, parent, tindex) {\r\n\t\tif (document.querySelector(\".gantt_drag_marker\")) {\r\n\t\t\t// vertical dnd in progress\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tupdateAfterRemoveChild(originalMoveTaskParent);\r\n\t\tupdateParentTypes(id);\r\n\t}));\r\n};","export default class DurationFormatterNumeric implements IDurationFormatter {\r\n\tstatic create = (settings: IDurationFormatterConfig = null): IDurationFormatter => {\r\n\t\treturn new DurationFormatterNumeric();\r\n\t};\r\n\tcanParse = (value: string) : boolean => {\r\n\t\treturn !isNaN(this.parse(value));\r\n\t};\r\n\tformat = (value: number) : string => {\r\n\t\treturn String(value);\r\n\t};\r\n\tparse = (value: string) : number => {\r\n\t\treturn parseInt(value, 10);\r\n\t};\r\n}","export default class LinkFormatterSimple implements ILinkFormatter {\r\n\tstatic create = (settings: ILinkFormatterConfig = null, gantt: any): LinkFormatterSimple => {\r\n\t\treturn new LinkFormatterSimple(gantt);\r\n\t};\r\n\tprotected _linkReg: RegExp;\r\n\tprotected _gantt: any;\r\n\r\n\tconstructor(gantt: any) {\r\n\t\tthis._linkReg = /^[0-9\\.]+/;\r\n\t\tthis._gantt = gantt;\r\n\t}\r\n\r\n\tformat = (link: ILink) : string => {\r\n\t\tconst wbs = this._getWBSCode(link.source);\r\n\t\treturn wbs;\r\n\t};\r\n\r\n\tcanParse = (value: string) : boolean => {\r\n\t\treturn this._linkReg.test(value);\r\n\t};\r\n\tparse = (value: string) : ILink => {\r\n\t\tif(!this.canParse(value)){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst linkPart = this._linkReg.exec(value)[0].trim();\r\n\r\n\t\tconst source = this._findSource(linkPart) || null;\r\n\r\n\t\treturn {\r\n\t\t\tid: undefined,\r\n\t\t\tsource,\r\n\t\t\ttarget: null,\r\n\t\t\ttype: this._gantt.config.links.finish_to_start,\r\n\t\t\tlag: 0\r\n\t\t};\r\n\t};\r\n\r\n\tprotected _getWBSCode = (source: number | string) => {\r\n\t\tconst pred = this._gantt.getTask(source);\r\n\t\treturn this._gantt.getWBSCode(pred);\r\n\t};\r\n\r\n\tprotected _findSource = (value: string) => {\r\n\t\tconst reqTemplate = new RegExp(\"^[0-9\\.]+\", \"i\");\r\n\t\tif(reqTemplate.exec(value)){\r\n\t\t\tconst wbs = reqTemplate.exec(value)[0];\r\n\t\t\tconst task = this._gantt.getTaskByWBSCode(wbs);\r\n\t\t\tif(task){\r\n\t\t\t\treturn task.id;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n}","\r\nimport DurationFormatter from \"../common/duration_formatter\";\r\nimport LinkFormatter from \"../common/link_formatter\";\r\n\r\nexport default function(gantt){\r\n\tgantt.ext.formatters = {\r\n\t\tdurationFormatter: function(settings){\r\n\t\t\tif(!settings){\r\n\t\t\t\tsettings = {};\r\n\t\t\t}\r\n\t\t\tif(!settings.store){\r\n\t\t\t\tsettings.store = gantt.config.duration_unit;\r\n\t\t\t}\r\n\t\t\tif(!settings.enter){\r\n\t\t\t\tsettings.enter = gantt.config.duration_unit;\r\n\t\t\t}\r\n\t\t\treturn DurationFormatter.create(settings, gantt);\r\n\t\t},\r\n\t\tlinkFormatter: function(settings){\r\n\t\t\treturn LinkFormatter.create(settings, gantt);\r\n\t\t}\r\n\t};\r\n};","export default function(gantt: any){\r\n\r\n\tgantt.ext = gantt.ext || {};\r\n\tgantt.config.show_empty_state = false;\r\n\r\n\tgantt.ext.emptyStateElement = gantt.ext.emptyStateElement || {\r\n\t\tisEnabled() {\r\n\t\t\treturn gantt.config.show_empty_state === true;\r\n\t\t},\r\n\t\tisGanttEmpty(){\r\n\t\t\treturn !gantt.getTaskByTime().length;\r\n\t\t},\r\n\t\trenderContent(container){\r\n\t\t\tconst placeholderTextElement = `<div class='gantt_empty_state_text'>\r\n    <div class='gantt_empty_state_text_link' data-empty-state-create-task>${gantt.locale.labels.empty_state_text_link}</div>\r\n    <div class='gantt_empty_state_text_description'>${gantt.locale.labels.empty_state_text_description}</div>\r\n    </div>`;\r\n\t\t\tconst placeholderImageElement = \"<div class='gantt_empty_state_image'></div>\";\r\n\r\n\t\t\tconst placeholderContainer = `<div class='gantt_empty_state'>${placeholderImageElement}${placeholderTextElement}</div>`;\r\n\t\t\tcontainer.innerHTML = placeholderContainer;\r\n\t\t},\r\n\r\n\t\tclickEvents: [],\r\n\t\tattachAddTaskEvent(){\r\n\t\t\tconst id = gantt.attachEvent(\"onEmptyClick\", function(e){\r\n\t\t\t\tconst domHelpers = gantt.utils.dom;\r\n\t\t\t\tconst gridPlaceholder = domHelpers.closest(e.target, \"[data-empty-state-create-task]\");\r\n\t\t\t\tif (gridPlaceholder){\r\n\t\t\t\t\tgantt.createTask({\r\n\t\t\t\t\t\tid: gantt.uid(),\r\n\t\t\t\t\t\ttext: \"New Task\"\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.clickEvents.push(id);\r\n\t\t},\r\n\t\tdetachAddTaskEvents(){\r\n\t\t\tthis.clickEvents.forEach(function(event){\r\n\t\t\t\tgantt.detachEvent(event);\r\n\t\t\t});\r\n\t\t\tthis.clickEvents = [];\r\n\t\t},\r\n\r\n\t\tgetContainer(){\r\n\t\t\tif (gantt.$container) {\r\n\t\t\t\tconst domHelpers = gantt.utils.dom;\r\n\t\t\t\tif (gantt.$container.contains(gantt.$grid_data)) {\r\n\t\t\t\t\treturn domHelpers.closest(gantt.$grid_data, \".gantt_layout_content\");\r\n\t\t\t\t}\r\n\t\t\t\tif (gantt.$container.contains(gantt.$task_data)){\r\n\t\t\t\t\treturn domHelpers.closest(gantt.$task_data, \".gantt_layout_content\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\t\t},\r\n\r\n\t\tgetNode(){\r\n\t\t\tconst container = this.getContainer();\r\n\t\t\tif (!container){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tconst emptyStateElementNode = container.querySelector(\".gantt_empty_state_wrapper\");\r\n\t\t\treturn emptyStateElementNode;\r\n\t\t},\r\n\r\n\t\tshow(){\r\n\t\t\tconst container = this.getContainer();\r\n\t\t\tif (!container && this.isGanttEmpty()){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tconst wrapper = document.createElement(\"div\");\r\n\t\t\twrapper.className = \"gantt_empty_state_wrapper\";\r\n\t\t\twrapper.style.marginTop = (gantt.config.scale_height - container.offsetHeight) + \"px\";\r\n\t\t\tconst oldNodes = gantt.$container.querySelectorAll(\".gantt_empty_state_wrapper\");\r\n\t\t\t// for IE11\r\n\t\t\tArray.prototype.forEach.call(oldNodes, function(node){\r\n\t\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\t});\r\n\r\n\t\t\tthis.detachAddTaskEvents();\r\n\t\t\tthis.attachAddTaskEvent();\r\n\r\n\t\t\tcontainer.appendChild(wrapper);\r\n\t\t\tthis.renderContent(wrapper);\r\n\t\t},\r\n\t\thide(){\r\n\t\t\tconst emptyStateElementNode = this.getNode();\r\n\t\t\tif (emptyStateElementNode){\r\n\t\t\t\temptyStateElementNode.parentNode.removeChild(emptyStateElementNode);\r\n\t\t\t} else{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tinit(){ }\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onDataRender\", function() {\r\n\t\tconst emptyStateElement = gantt.ext.emptyStateElement;\r\n\t\tif (emptyStateElement.isEnabled() && emptyStateElement.isGanttEmpty()) {\r\n\t\t\temptyStateElement.show();\r\n\t\t} else {\r\n\t\t\temptyStateElement.hide();\r\n\t\t}\r\n\t});\r\n\r\n\r\n\r\n\r\n}\r\n","export const hasBaselinesBelow = function (gantt, task) {\r\n  const baselines = task.baselines && task.baselines.length;\r\n  const baselinesOnDifferentRow = gantt.config.baselines.render_mode == \"separateRow\" || gantt.config.baselines.render_mode == \"individualRow\";\r\n  if (baselines && baselinesOnDifferentRow) {\r\n    return true;\r\n  }\r\n};\r\n\r\nexport const childrenHaveBaselines = function (gantt, taskId) {\r\n  let hasBaselines = false;\r\n  gantt.eachTask(function (child) {\r\n    if (hasBaselines) {\r\n      return;\r\n    }\r\n    hasBaselines = hasBaselinesBelow(gantt, child);\r\n  }, taskId);\r\n  return hasBaselines;\r\n};\r\n\r\nexport const isSplitChild = function (gantt, id) {\r\n  let splitChild = false;\r\n  gantt.eachParent(function (parent) {\r\n    if (isSplitParent(parent)) {\r\n      splitChild = true;\r\n    }\r\n  }, id);\r\n  return splitChild;\r\n};\r\n\r\nexport const isSplitParent = function (task) {\r\n  return task.render && task.render == \"split\" && !task.$open;\r\n};\r\n\r\nexport const getMaxParentHeight = function (gantt, view, task, heightLimit) {\r\n  let maxHeight = heightLimit || view.$task_data.scrollHeight;\r\n  let shrinkHeight = false;\r\n  let splitChild = false;\r\n\r\n  gantt.eachParent(function (parent) {\r\n    if (isSplitParent(parent)) {\r\n      splitChild = true;\r\n      const parentSizes = view.getItemPosition(parent);\r\n      const parentHeight = parentSizes.rowHeight;\r\n      if (parentHeight < maxHeight) {\r\n        maxHeight = parentHeight;\r\n        shrinkHeight = true;\r\n      }\r\n    }\r\n  }, task.id);\r\n\r\n  return { maxHeight, shrinkHeight, splitChild };\r\n};\r\n\r\nexport const getMilestoneHeight = function (height) {\r\n  return Math.sqrt(2 * height * height);\r\n};\r\n\r\nexport const getInvertedMilestoneHeight = function (height) {\r\n  return Math.round(height / Math.sqrt(2));\r\n};\r\n\r\nexport const getAdjustedPosition = function (gantt, timeline, sizes, heightLimit, task, childBaselines) {\r\n  const baselines = hasBaselinesBelow(gantt, task);\r\n\r\n  const splitParams = getMaxParentHeight(gantt, timeline, task);\r\n  let maxHeight = splitParams.maxHeight;\r\n\r\n  let height = sizes.height;\r\n  let largerHeight = height > heightLimit;\r\n  let noNeedToShrink = sizes.rowHeight >= heightLimit && !splitParams.splitChild && !baselines;\r\n  if (largerHeight || noNeedToShrink) {\r\n    height = heightLimit;\r\n  }\r\n\r\n  if (maxHeight < height) {\r\n    height = maxHeight;\r\n  }\r\n\r\n  let marginTop = Math.floor((sizes.rowHeight - height) / 2);\r\n\r\n  if (splitParams.splitChild) {\r\n    marginTop = Math.floor((maxHeight - height) / 2);\r\n  }\r\n  if (childBaselines || baselines) {\r\n    let heightDiff = Math.min(sizes.height, maxHeight) - height;\r\n\r\n    let additionalMargin = 2;\r\n    let exceedBarHeight = baselines && task.bar_height >= task.row_height;\r\n    let exceedParentHeight = splitParams.splitChild && sizes.height >= maxHeight;\r\n    if (exceedBarHeight || exceedParentHeight){\r\n      additionalMargin = 0;\r\n    }\r\n\r\n    marginTop = Math.floor(heightDiff / 2) + additionalMargin;\r\n    const bottom = height + marginTop;\r\n    if (bottom > sizes.rowHeight || bottom > maxHeight) {\r\n      // marginTop = 0;\r\n    }\r\n  }\r\n\r\n  return { height, marginTop };\r\n};\r\n\r\nexport default {\r\n  hasBaselinesBelow,\r\n  childrenHaveBaselines,\r\n  isSplitChild,\r\n  isSplitParent,\r\n  getMaxParentHeight,\r\n  getMilestoneHeight,\r\n  getInvertedMilestoneHeight,\r\n  getAdjustedPosition\r\n};\r\n","import { hasBaselinesBelow, isSplitParent } from \"../ui/render/baseline_helper\";\r\nimport isHeadless from \"../../utils/is_headless\";\r\n\r\nexport default function (gantt) {\r\n  gantt.config.baselines = {\r\n    datastore: \"baselines\",\r\n    render_mode: false,\r\n    dataprocessor_baselines: false,\r\n    row_height: 16,\r\n    bar_height: 8\r\n  };\r\n\r\n  function initBaselineFields(item, task) {\r\n    // don't add baseline if it doesn't belong to any task\r\n    // or if doesn't have the dates\r\n    if (!item.task_id || (!item.start_date && !item.end_date)) {\r\n      return false;\r\n    }\r\n\r\n    if (item.start_date) {\r\n      item.start_date = gantt.date.parseDate(item.start_date, \"parse_date\");\r\n    } else {\r\n      item.start_date = null;\r\n    }\r\n\r\n    if (item.end_date) {\r\n      item.end_date = gantt.date.parseDate(item.end_date, \"parse_date\");\r\n    } else {\r\n      item.end_date = null;\r\n    }\r\n\r\n    // set min baseline duration\r\n    item.duration = item.duration || 1;\r\n\r\n    // GS-2636. Calculate the 3rd date parameter basing on existing date parameters\r\n    if (item.start_date && !item.end_date){\r\n      item.end_date = gantt.calculateEndDate(item.start_date, item.duration);\r\n    } else if (item.end_date && !item.start_date){\r\n      item.start_date = gantt.calculateEndDate(item.end_date, -item.duration);\r\n    } \r\n  }\r\n  // gantt init\r\n  const baselineStore = gantt.createDatastore({\r\n    name: gantt.config.baselines.datastore,\r\n    initItem: function (item) {\r\n      if (!item.id) {\r\n        item.id = gantt.uid();\r\n      }\r\n\r\n      initBaselineFields(item);\r\n\r\n      return item;\r\n    }\r\n  });\r\n\r\n  gantt.$data.baselineStore = baselineStore;\r\n\r\n  function _syncBaselines(task) {\r\n    let shouldRepaint = false;\r\n    const iteratedBaselines = {};\r\n\r\n    const taskBaselines = task.baselines || [];\r\n    const exisingBaselines = gantt.getTaskBaselines(task.id);\r\n\r\n    if (taskBaselines.length != exisingBaselines.length) {\r\n      shouldRepaint = true;\r\n    }\r\n\r\n    taskBaselines.forEach(function (baseline) {\r\n      iteratedBaselines[baseline.id] = true;\r\n      const exisingBaseline = baselineStore.getItem(baseline.id);\r\n      if (exisingBaseline) {\r\n        const start = +exisingBaseline.start_date !== +baseline.start_date;\r\n        const end = +exisingBaseline.end_date !== +baseline.end_date;\r\n        if (start || end) {\r\n          baselineStore.updateItem(baseline.id, baseline);\r\n        }\r\n      } else {\r\n        baselineStore.addItem(baseline);\r\n      }\r\n    });\r\n\r\n    exisingBaselines.forEach(function (baseline) {\r\n      if (!iteratedBaselines[baseline.id]) {\r\n        baselineStore.removeItem(baseline.id);\r\n      }\r\n    });\r\n\r\n    if (shouldRepaint) {\r\n      if (isSplitParent(task)){\r\n        // here we adjust the parent height, then adjust it with the total child height\r\n        _adjustSplitParentHeight (task);\r\n      } else {\r\n        gantt.adjustTaskHeightForBaselines(task);\r\n      }\r\n      gantt.render();\r\n    }\r\n  }\r\n\r\n  function _deleteOrphanBaselines() {\r\n    baselineStore.eachItem(function (baseline) {\r\n      if (!gantt.isTaskExists(baseline.task_id)) {\r\n        baselineStore.removeItem(baseline.id);\r\n      }\r\n    });\r\n  }\r\n\r\n  function _adjustSplitParentHeight (task){\r\n    let maxParentHeight = 0;\r\n\r\n    gantt.adjustTaskHeightForBaselines(task);\r\n\r\n    gantt.eachTask(function(child){\r\n      let childHeight = child.row_height || gantt.config.row_height;\r\n\r\n      maxParentHeight = maxParentHeight || childHeight;\r\n      if (childHeight > maxParentHeight){\r\n        maxParentHeight = childHeight;\r\n      }\r\n    }, task.id);\r\n\r\n    if (task.row_height < maxParentHeight){\r\n      task.row_height = maxParentHeight;\r\n    }\r\n  }\r\n\r\n  gantt.adjustTaskHeightForBaselines = function (task) {\r\n    let height, baselineSize, betweenBaselines;\r\n    let margins = 2;\r\n    let baselineAmount = task.baselines && task.baselines.length || 0;\r\n    const subrowHeight = gantt.config.baselines.row_height;\r\n    //const baselineBarHeight = task?.baselines.bar_height\r\n\r\n    const timelineView = gantt.getLayoutView(\"timeline\");\r\n    if (!timelineView || !gantt.config.show_chart){\r\n      return;\r\n    }\r\n\r\n    switch (gantt.config.baselines.render_mode) {\r\n      case \"taskRow\":\r\n        task.row_height = task.bar_height + 8;\r\n        break;\r\n\r\n      case \"separateRow\":\r\n        height = timelineView.getBarHeight(task.id);\r\n        if (baselineAmount) {\r\n          task.bar_height = task.bar_height || height;\r\n\r\n          if (task.bar_height > height){\r\n            height = task.bar_height;\r\n          }\r\n\r\n          task.row_height = height + subrowHeight;\r\n        } else if (task.bar_height) {\r\n          task.row_height = task.bar_height + 4;\r\n        }\r\n\r\n        _increaseSplitParentHeight(task);\r\n        break;\r\n\r\n      case \"individualRow\":\r\n        height = timelineView.getBarHeight(task.id);\r\n\r\n        if (baselineAmount) {\r\n          task.bar_height = task.bar_height || height;\r\n\r\n          if (task.bar_height > height){\r\n            height = task.bar_height;\r\n          }\r\n\r\n          baselineSize = subrowHeight * baselineAmount;\r\n       //   betweenBaselines = 3 * (baselineAmount + 1);\r\n\r\n          task.row_height = height + baselineSize + margins;\r\n        } else if (task.bar_height){\r\n          task.row_height = task.bar_height + 4;\r\n        }\r\n\r\n        _increaseSplitParentHeight(task);\r\n        break;\r\n      default:\r\n        task.row_height = task.bar_height + 8;\r\n        break;\r\n    }\r\n  };\r\n\r\n  function _increaseSplitParentHeight(task) {\r\n    gantt.eachParent(function (parent) {\r\n      if (isSplitParent(parent)) {\r\n        const parentHeight = parent.row_height || gantt.getLayoutView(\"timeline\").getBarHeight(parent.id);\r\n        let maxHeight = task.row_height;\r\n\r\n        // iterate only direct children\r\n        const subtasks = gantt.getChildren(parent.id);\r\n        subtasks.forEach(function (subtaskId) {\r\n          const subtask = gantt.getTask(subtaskId);\r\n          if (subtask.id == task.id) {\r\n            return;\r\n          }\r\n          const subtaskHeight = subtask.row_height || gantt.getLayoutView(\"timeline\").getBarHeight(subtask.id);\r\n          maxHeight = maxHeight || subtaskHeight;\r\n          if (subtaskHeight > maxHeight) {\r\n            maxHeight = subtaskHeight;\r\n          }\r\n        });\r\n\r\n        parent.row_height = maxHeight;\r\n        parent.bar_height = parent.bar_height || parentHeight;\r\n      }\r\n    }, task.id);\r\n  }\r\n\r\n  gantt.attachEvent(\r\n    \"onGanttReady\",\r\n    function () {\r\n\r\n      if(!gantt.config.baselines){\r\n        return;\r\n      }\r\n\r\n      gantt.attachEvent(\"onParse\", function () {\r\n        baselineStore.eachItem(function (baseline) {\r\n          const taskId = baseline.task_id;\r\n          if (gantt.isTaskExists(taskId)) {\r\n            const task = gantt.getTask(taskId);\r\n\r\n            task.baselines = task.baselines || [];\r\n\r\n            let newBaseline = true;\r\n            for (let i = 0; i < task.baselines.length; i++) {\r\n              let existingBaseline = task.baselines[i];\r\n              if (existingBaseline.id == baseline.id){\r\n                newBaseline = false;\r\n                gantt.mixin(existingBaseline, baseline, true);\r\n                break;\r\n              }\r\n            }\r\n            if (newBaseline){\r\n              task.baselines.push(baseline);\r\n            }\r\n\r\n            if(!isHeadless(gantt)){\r\n              if (isSplitParent(task)){\r\n                _adjustSplitParentHeight (task);\r\n              } else {\r\n                gantt.adjustTaskHeightForBaselines(task);\r\n              }\r\n            }\r\n          }\r\n        });\r\n      });\r\n\r\n      gantt.attachEvent(\"onBeforeTaskUpdate\", function (id, task) {\r\n        _syncBaselines(task);\r\n        return true;\r\n      });\r\n\r\n      gantt.attachEvent(\"onAfterUndo\", function(action){\r\n        const baselinesRenderedBelow = gantt.config.baselines.render_mode == \"separateRow\" || gantt.config.baselines.render_mode == \"individualRow\";\r\n        if (baselinesRenderedBelow && action){\r\n          let repaint = false;\r\n          action.commands.forEach(function(command){\r\n            if (command.entity == \"task\"){\r\n              const taskId = command.value.id;\r\n              if (gantt.isTaskExists(taskId)){\r\n                const task = gantt.getTask(taskId);\r\n                if (task.parent && gantt.isTaskExists(task.parent)){\r\n                  const parent = gantt.getTask(task.parent);\r\n                  if (isSplitParent(parent)){\r\n                    _adjustSplitParentHeight (parent);\r\n                    repaint = true;\r\n                  }\r\n                }\r\n              }    \r\n            }\r\n          });\r\n          if (repaint){\r\n            gantt.render();\r\n          }\r\n        }\r\n      });\r\n\r\n      gantt.attachEvent(\"onAfterTaskDelete\", function (id, task) {\r\n        if (hasBaselinesBelow){\r\n          if (task.parent && gantt.isTaskExists(task.parent)){\r\n            const parent = gantt.getTask(task.parent);\r\n            if (isSplitParent(parent)){\r\n              _adjustSplitParentHeight (parent);\r\n            }\r\n          }\r\n        }\r\n        _deleteOrphanBaselines();\r\n      });\r\n\r\n      gantt.getTaskBaselines = function (taskId) {\r\n        const baselines = [];\r\n        baselineStore.eachItem(function (baseline) {\r\n          if (baseline.task_id == taskId) {\r\n            baselines.push(baseline);\r\n          }\r\n        });\r\n        return baselines;\r\n      };\r\n      gantt.$data.baselineStore.attachEvent(\"onClearAll\", function () {\r\n        gantt.eachTask(function(task){\r\n          if (task.baselines){\r\n            delete task.baselines;\r\n          }\r\n        });\r\n        // The data should not be repainted as otherwise it causes issues when we have resource \r\n        // assignments and group tasks. It should be fixed when we add a repaint stack\r\n        // gantt.refreshData();\r\n        return true;\r\n      });\r\n\r\n      gantt.$data.tasksStore.attachEvent(\"onClearAll\", function () {\r\n        baselineStore.clearAll();\r\n        return true;\r\n      });\r\n      gantt.attachEvent(\"onTaskIdChange\", function (id, new_id) {\r\n        const baselines = baselineStore.find(function (a) {\r\n          return a.task_id == id;\r\n        });\r\n        baselines.forEach(function (a) {\r\n          a.task_id = new_id;\r\n          baselineStore.updateItem(a.id);\r\n        });\r\n      });\r\n    },\r\n    { once: true }\r\n  );\r\n};\r\n","import { Client } from \"remote-client\";\r\n\r\nexport default class RemoteEvents {\r\n\tprotected _remote: any;\r\n\tprotected _ready: Promise<any>;\r\n\r\n\tconstructor(url: string, token: string) {\r\n\t\tconst remote = new Client({\r\n\t\t\turl,\r\n\t\t\ttoken\r\n\t\t});\r\n\r\n\t\t// temporary patch, as we do not want credentials\r\n\t\tremote.fetch = function (url: string, body?: BodyInit) {\r\n\t\t\tconst req: RequestInit = {\r\n\t\t\t\theaders: this.headers()\r\n\t\t\t};\r\n\t\t\tif (body) {\r\n\t\t\t\treq.method = \"POST\";\r\n\t\t\t\treq.body = body;\r\n\t\t\t}\r\n\r\n\t\t\treturn fetch(url, req).then(res => res.json());\r\n\t\t};\r\n\r\n\t\tthis._ready = remote.load().then(back => (this._remote = back));\r\n\t}\r\n\r\n\tprotected ready() {\r\n\t\treturn this._ready;\r\n\t}\r\n\r\n\tprotected on(name: string | any, handler?: any) {\r\n\t\tthis.ready().then(back => {\r\n\t\t\tif (typeof name === \"string\") back.on(name, handler);\r\n\t\t\telse {\r\n\t\t\t\tfor (const key in name) {\r\n\t\t\t\t\tback.on(key, name[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n","function createHandlers(gantt) {\r\n\tlet updateQueue = [];\r\n\tlet updateTimeout = null;\r\n\tconst UPDATE_DELAY = 50;\r\n\r\n\tfunction remoteUpdates(message) {\r\n\t\tif (!message || !message.type || !(message.task?.id || message.link?.id)) {\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tconsole.error(\"Invalid message format:\", message);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst { type, task, link } = message;\r\n\t\tif ((task && gantt._dp._in_progress[task.id]) || (link && gantt._dp._in_progress[link.id])) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (type === \"add-task\") {\r\n\t\t\tfor (const id in gantt._dp._in_progress) {\r\n\t\t\t\tif (gantt._dp.getState(id) === \"inserted\") {\r\n\t\t\t\t\tgantt._dp.attachEvent(\"onFullSync\", function () {\r\n\t\t\t\t\t\tif (!gantt.isTaskExists(task.id)) {\r\n\t\t\t\t\t\t\tprocessUpdate(message);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, { once: true });\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tupdateQueue.push(message);\r\n\t\tif (updateTimeout) clearTimeout(updateTimeout);\r\n\t\tupdateTimeout = setTimeout(processQueue, UPDATE_DELAY);\r\n\t}\r\n\r\n\tfunction processQueue() {\r\n\t\tif (updateQueue.length === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (updateQueue.length === 1) {\r\n\t\t\tprocessUpdate(updateQueue[0]);\r\n\t\t} else {\r\n\t\t\tgantt.batchUpdate(function () {\r\n\t\t\t\t\tupdateQueue.forEach(message => {\r\n\t\t\t\t\t\tprocessUpdate(message);\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tupdateQueue = [];\r\n\t}\r\n\r\n\tfunction processUpdate(message) {\r\n\t\tconst { type, task, link } = message;\r\n\t\tswitch (type) {\r\n\t\t\tcase \"add-task\":\r\n\t\t\t\thandleAddTask(task);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"update-task\":\r\n\t\t\t\thandleUpdateTask(task);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"delete-task\":\r\n\t\t\t\thandleDeleteTask(task);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"add-link\":\r\n\t\t\t\thandleAddLink(link);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"update-link\":\r\n\t\t\t\thandleUpdateLink(link);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"delete-link\":\r\n\t\t\t\thandleDeleteLink(link);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction ignore(code){\r\n\t\tif(gantt._dp){\r\n\t\t\tgantt._dp.ignore(code);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcode();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction handleAddTask(taskData) {\r\n\t\tif (gantt.isTaskExists(taskData.id)) {\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tconsole.warn(`Task with ID ${taskData.id} already exists. Skipping add.`);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttaskData.start_date = gantt.templates.parse_date(taskData.start_date);\r\n\t\tif (taskData.end_date) taskData.end_date = gantt.templates.parse_date(taskData.end_date);\r\n\r\n\t\tignore(() => {\r\n\t\t\tgantt.addTask(taskData);\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tfunction handleUpdateTask(taskData) {\r\n\t\tconst sid = taskData.id;\r\n\r\n\t\tif (!gantt.getTask(sid)) {\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tconsole.warn(`Task with ID ${sid} does not exist. Skipping update.`);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst initTask = gantt.getDatastore(\"task\").$initItem.bind(gantt.getDatastore(\"task\"));\r\n\r\n\t\tconst existingTask = gantt.getTask(sid);\r\n\r\n\t\tignore(() => {\r\n\r\n\t\t\tconst remoteTask = initTask(taskData);\r\n\t\t\t\r\n\t\t\tfor (let key in remoteTask) {\r\n\t\t\t\texistingTask[key] = remoteTask[key];\r\n\t\t\t}\r\n\t\t\t//Object.assign(existingTask, taskData);\r\n\t\t//\texistingTask.start_date = gantt.templates.parse_date(taskData.start_date);\r\n\t\t\t//if (existingTask.end_date && taskData.end_date) { \r\n\t\t\t//\texistingTask.end_date = gantt.templates.parse_date(taskData.end_date);\r\n\t\t\tif (!remoteTask.end_date) {\r\n\t\t\t\texistingTask.end_date = gantt.calculateEndDate(existingTask);\r\n\t\t\t}\r\n\r\n\t\t\tgantt.updateTask(sid);\r\n\r\n\t\t\tif (sid !== taskData.id) {\r\n\t\t\t\tgantt.changeTaskId(sid, taskData.id);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tfunction handleDeleteTask(taskData) {\r\n\t\tconst sid = taskData.id;\r\n\r\n\t\tif (!gantt.isTaskExists(sid)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tignore(() => {\r\n\t\t\tconst task = gantt.getTask(sid);\r\n\r\n\t\t\tif (task) {\r\n\t\t\t\t// handle unsaved edits in the lightbox\r\n\t\t\t\tif (gantt.getState().lightbox_id == sid) {\r\n\t\t\t\t\t//this._new_event = this._lightbox_id;\r\n\t\t\t\t\ttaskData.id = this._lightbox_id;\r\n\t\t\t\t\tlet currentTask = gantt.getTask(this._lightbox_id);\r\n\t\t\t\t\tcurrentTask = taskData;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// delete the task\r\n\t\t\t\tgantt.deleteTask(sid, true);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tfunction handleAddLink(linkData) {\r\n\t\tif (gantt.isLinkExists(linkData.id)) {\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tconsole.warn(`Link with ID ${linkData.id} already exists. Skipping add.`);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tignore(() => {\r\n\t\t\tgantt.addLink(linkData);\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tfunction handleUpdateLink(linkData) {\r\n\t\tconst sid = linkData.id;\r\n\r\n\t\tif (!gantt.isLinkExists(sid)) {\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tconsole.warn(`Link with ID ${sid} does not exist. Skipping update.`);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst existingLink= gantt.getLink(sid);\r\n\r\n\t\tignore(() => {\r\n\t\t\tObject.assign(existingLink, linkData);\r\n\t\t\tgantt.updateLink(sid);\r\n\r\n\t\t\tif (sid !== linkData.id) {\r\n\t\t\t\tgantt.changeLinkId(sid, linkData.id);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tfunction handleDeleteLink(linkData) {\r\n\t\tconst sid = linkData.id;\r\n\r\n\t\tif (!gantt.getLink(sid)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tignore(() => {\r\n\t\t\tconst task = gantt.getLink(sid);\r\n\r\n\t\t\tif (task) {\r\n\t\t\t\t// handle unsaved edits in the lightbox\r\n\t\t\t\tif (gantt.getState().lightbox_id == sid) {\r\n\t\t\t\t\t//this._new_event = this._lightbox_id;\r\n\t\t\t\t\tlinkData.id = this._lightbox_id;\r\n\t\t\t\t\tlet currentTask = gantt.getLink(this._lightbox_id);\r\n\t\t\t\t\tcurrentTask = linkData;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// delete the link\r\n\t\t\t\tgantt.deleteLink(sid, true);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\treturn {\r\n\t\ttasks: remoteUpdates,\r\n\t\tlinks: remoteUpdates\r\n\t};\r\n}\r\n\r\nexport default createHandlers;","import RemoteEvents from \"./remote_events\";\r\nimport createHandlers from \"./handlers\";\r\n\r\nexport default function remoteEvents(gantt) {\r\n\tif (!gantt.ext){\r\n\t\tgantt.ext = {};\r\n\t}\r\n\r\n\tgantt.ext.liveUpdates = {\r\n\t\tRemoteEvents,\r\n\t\tremoteUpdates: createHandlers(gantt)\r\n\t};\r\n}\r\n\r\n","import * as helpers from \"../../utils/helpers\";\r\n\r\nexport default function(gantt) {\r\n\tgantt.load = function(){\r\n\t\tthrow new Error(\"gantt.load() method is not available in the node.js, use gantt.parse() instead\");\r\n\t};\r\n\tgantt.parse = function (data, type) {\r\n\t\tthis.on_load({xmlDoc: {responseText: data}}, type);\r\n\t};\r\n\r\n\tgantt.serialize = function (type) {\r\n\t\ttype = type || \"json\";\r\n\t\treturn this[type].serialize();\r\n\t};\r\n\r\n\t/*\r\n\ttasks and relations\r\n\t{\r\n\tdata:[\r\n\t\t{\r\n\t\t\t\"id\":\"string\",\r\n\t\t\t\"text\":\"...\",\r\n\t\t\t\"start_date\":\"Date or string\",\r\n\t\t\t\"end_date\":\"Date or string\",\r\n\t\t\t\"duration\":\"number\",\r\n\t\t\t\"progress\":\"0..1\",\r\n\t\t\t\"parent_id\":\"string\",\r\n\t\t\t\"order\":\"number\"\r\n\t\t},...],\r\n\tlinks:[\r\n\t\t{\r\n\t\t\tid:\"string\",\r\n\t\t\tsource:\"string\",\r\n\t\t\ttarget:\"string\",\r\n\t\t\ttype:\"string\"\r\n\t\t},...],\r\n\tcollections:{\r\n\t\t\tcollectionName:[\r\n\t\t\t\t{key:, label:, optional:...},...\r\n\t\t\t],...\r\n\t\t}\r\n\t}\r\n\r\n\t* */\r\n\r\n\tgantt.on_load = function (resp, type) {\r\n\t\tif(resp.xmlDoc && resp.xmlDoc.status === 404){ // work if we don't have a file at current url\r\n\t\t\tthis.assert(false, \"Failed to load the data from <a href='\" + resp.xmlDoc.responseURL + \"' target='_blank'>\" \r\n\t\t\t\t+ resp.xmlDoc.responseURL + \"</a>, server returns 404\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(gantt.$destroyed){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.callEvent(\"onBeforeParse\", []);\r\n\t\tif (!type)\r\n\t\t\ttype = \"json\";\r\n\t\tthis.assert(this[type], \"Invalid data type:'\" + type + \"'\");\r\n\r\n\t\tvar raw = resp.xmlDoc.responseText;\r\n\r\n\t\tvar data = this[type].parse(raw, resp);\r\n\t\tthis._process_loading(data);\r\n\t};\r\n\r\n\tfunction attachAssignmentsToTasks(tasks, assignments) {\r\n\t\tconst assignmentsByTasks = {};\r\n\t\tassignments.forEach((a)=>{\r\n\t\t\tif(!assignmentsByTasks[a.task_id]) {\r\n\t\t\t\tassignmentsByTasks[a.task_id] = [];\r\n\t\t\t}\r\n\t\t\tassignmentsByTasks[a.task_id].push(a);\r\n\t\t});\r\n\t\ttasks.forEach((t) => {\r\n\t\t\tt[gantt.config.resource_property] = assignmentsByTasks[t.id] || [];\r\n\t\t});\t\r\n\t}\r\n\t\r\n\tgantt._process_loading = function (data) {\r\n\t\tif(data.collections)\r\n\t\t\tthis._load_collections(data.collections);\r\n\r\n\t\tif(data.resources && this.$data.resourcesStore){\r\n\t\t\tthis.$data.resourcesStore.parse(data.resources);\r\n\t\t}\r\n\t\tif(gantt.config.baselines && data.baselines && this.$data.baselineStore){\r\n\t\t\tthis.$data.baselineStore.parse(data.baselines);\r\n\t\t}\r\n\t\t\r\n\t\tconst tasks = data.data || data.tasks;\r\n\t\tif(data.assignments){\r\n\t\t\tattachAssignmentsToTasks(tasks, data.assignments);\r\n\t\t}\r\n\r\n\t\tthis.$data.tasksStore.parse(tasks);\r\n\t\tvar links = data.links || ((data.collections && data.collections.links) ? data.collections.links : []);\r\n\t\tthis.$data.linksStore.parse(links);\r\n\r\n\t\t//this._sync_links();\r\n\t\tthis.callEvent(\"onParse\", []);\r\n\t\tthis.render();\r\n\t};\r\n\r\n\tgantt._load_collections = function (collections) {\r\n\t\tvar collections_loaded = false;\r\n\t\tfor (var key in collections) {\r\n\t\t\tif (collections.hasOwnProperty(key)) {\r\n\t\t\t\tcollections_loaded = true;\r\n\t\t\t\tvar collection = collections[key];\r\n\t\t\t\t// GS-1728. Create an empty serverList if it doesn't exist\r\n\t\t\t\tthis.serverList[key] = this.serverList[key] || [];\r\n\t\t\t\tvar arr = this.serverList[key];\r\n\t\t\t\tif (!arr) continue;\r\n\t\t\t\tarr.splice(0, arr.length); //clear old options\r\n\t\t\t\tfor (var j = 0; j < collection.length; j++) {\r\n\t\t\t\t\tvar option = collection[j];\r\n\t\t\t\t\tvar obj = this.copy(option);\r\n\t\t\t\t\tobj.key = obj.value;// resulting option object\r\n\r\n\t\t\t\t\tfor (var option_key in option) {\r\n\t\t\t\t\t\tif (option.hasOwnProperty(option_key)) {\r\n\t\t\t\t\t\t\tif (option_key == \"value\" || option_key == \"label\")\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\tobj[option_key] = option[option_key]; // obj['value'] = option['value']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (collections_loaded)\r\n\t\t\tthis.callEvent(\"onOptionsLoad\", []);\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskDisplay\", function (id, task) {\r\n\t\treturn !task.$ignore;\r\n\t});\r\n\r\n\tfunction jsonParseError(data){\r\n\t\tgantt.assert(false, \"Can't parse data: incorrect value of gantt.parse or gantt.load method. \"\r\n\t\t\t+ \"Actual argument value: \" + JSON.stringify(data));\r\n\t\tthrow new Error(\"Invalid argument for gantt.parse or gantt.load. An object or a JSON string of format https://docs.dhtmlx.com/gantt/desktop__supported_data_formats.html#json is expected. Actual argument value: \"\r\n\t\t\t+ JSON.stringify(data));\r\n\t}\r\n\r\n\tgantt.json = {\r\n\t\tparse: function (data) {\r\n\t\t\tif(!data){\r\n\t\t\t\tjsonParseError(data);\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof data == \"string\") {\r\n\t\t\t\tif (typeof JSON != undefined){\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch(e) {\r\n\t\t\t\t\t\tjsonParseError(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgantt.assert(false, \"JSON is not supported\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(!data.data && !data.tasks){\r\n\t\t\t\tjsonParseError(data);\r\n\t\t\t}\r\n\r\n\t\t\tif (data.dhx_security)\r\n\t\t\t\tgantt.security_key = data.dhx_security;\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserializeTask: function (task) {\r\n\t\t\treturn this._copyObject(task);\r\n\t\t},\r\n\t\tserializeLink: function (link) {\r\n\t\t\treturn this._copyLink(link);\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj)\r\n\t\t\t\tcopy[key] = obj[key];\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj) {\r\n\t\t\t\tif (key.charAt(0) == \"$\")\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tcopy[key] = obj[key];\r\n\r\n\t\t\t\tif (helpers.isDate(copy[key])) {\r\n\t\t\t\t\tcopy[key] = gantt.defined(gantt.templates.xml_format) ? gantt.templates.xml_format(copy[key]) : gantt.templates.format_date(copy[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\t\t\tlet baselines = [];\r\n\r\n\t\t\tgantt.eachTask(function (obj) {\r\n\t\t\t\tgantt.resetProjectDates(obj);\r\n\t\t\t\ttasks.push(this.serializeTask(obj));\r\n\t\t\t}, gantt.config.root_id, this);\r\n\r\n\t\t\tvar rawLinks = gantt.getLinks();\r\n\t\t\tfor (var i = 0; i < rawLinks.length; i++) {\r\n\t\t\t\tlinks.push(this.serializeLink(rawLinks[i]));\r\n\t\t\t}\r\n\r\n\t\t\tconst baselineStore = gantt.getDatastore(\"baselines\");\r\n\t\t\tbaselineStore.eachItem(function(baseline){\r\n\t\t\t\tconst baselineCopy = gantt.json.serializeTask(baseline);\r\n\t\t\t\tbaselines.push(baselineCopy);\r\n\t\t\t});\r\n\r\n\t\t\treturn {\r\n\t\t\t\tdata: tasks,\r\n\t\t\t\tlinks,\r\n\t\t\t\tbaselines\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\t<data>\r\n\t\t<task id:\"some\" parent_id=\"0\" progress=\"0.5\">\r\n\t\t\t<text>My task 1</text>\r\n\t\t\t<start_date>16.08.2013</start_date>\r\n\t\t\t<end_date>22.08.2013</end_date>\r\n\t\t</task>\r\n\t\t<coll_options>\r\n\t\t\t<links>\r\n\t\t\t\t<link source='a1' target='b2' type='c3' />\r\n\t\t\t</links>\r\n\t\t</coll_options>\r\n\t</data>\r\n\t*/\r\n\r\n\tfunction xmlParseError(data){\r\n\t\tgantt.assert(false, \"Can't parse data: incorrect value of gantt.parse or gantt.load method. \"\r\n\t\t\t+ \"Actual argument value: \" + JSON.stringify(data));\r\n\t\tthrow new Error(\"Invalid argument for gantt.parse or gantt.load. An XML of format https://docs.dhtmlx.com/gantt/desktop__supported_data_formats.html#xmldhtmlxgantt20 is expected. Actual argument value: \"\r\n\t\t\t+ JSON.stringify(data));\r\n\t}\r\n\r\n\tgantt.xml = {\r\n\t\t_xmlNodeToJSON: function (node, attrs_only) {\r\n\t\t\tvar t = {};\r\n\t\t\tfor (var i = 0; i < node.attributes.length; i++)\r\n\t\t\t\tt[node.attributes[i].name] = node.attributes[i].value;\r\n\r\n\t\t\tif (!attrs_only) {\r\n\t\t\t\tfor (var i = 0; i < node.childNodes.length; i++) {\r\n\t\t\t\t\tvar child = node.childNodes[i];\r\n\t\t\t\t\tif (child.nodeType == 1)\r\n\t\t\t\t\t\tt[child.tagName] = child.firstChild ? child.firstChild.nodeValue : \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!t.text) t.text = node.firstChild ? node.firstChild.nodeValue : \"\";\r\n\t\t\t}\r\n\r\n\t\t\treturn t;\r\n\t\t},\r\n\t\t_getCollections: function (loader) {\r\n\t\t\tvar collection = {};\r\n\t\t\tvar opts = gantt.ajax.xpath(\"//coll_options\", loader);\r\n\t\t\tfor (var i = 0; i < opts.length; i++) {\r\n\t\t\t\tvar bind = opts[i].getAttribute(\"for\");\r\n\t\t\t\tvar arr = collection[bind] = [];\r\n\t\t\t\tvar itms = gantt.ajax.xpath(\".//item\", opts[i]);\r\n\t\t\t\tfor (var j = 0; j < itms.length; j++) {\r\n\t\t\t\t\tvar itm = itms[j];\r\n\t\t\t\t\tvar attrs = itm.attributes;\r\n\t\t\t\t\tvar obj = {key: itms[j].getAttribute(\"value\"), label: itms[j].getAttribute(\"label\")};\r\n\t\t\t\t\tfor (var k = 0; k < attrs.length; k++) {\r\n\t\t\t\t\t\tvar attr = attrs[k];\r\n\t\t\t\t\t\tif (attr.nodeName == \"value\" || attr.nodeName == \"label\")\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\tobj[attr.nodeName] = attr.nodeValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn collection;\r\n\t\t},\r\n\t\t_getXML: function (text, loader, toptag) {\r\n\t\t\ttoptag = toptag || \"data\";\r\n\t\t\tif (!loader.getXMLTopNode) {\r\n\t\t\t\tloader = gantt.ajax.parse(loader);\r\n\t\t\t}\r\n\r\n\t\t\tvar xml = gantt.ajax.xmltop(toptag, loader.xmlDoc);\r\n\t\t\tif (!xml || xml.tagName != toptag) {\r\n\t\t\t\txmlParseError(text);\r\n\t\t\t}\r\n\r\n\t\t\tvar skey = xml.getAttribute(\"dhx_security\");\r\n\t\t\tif (skey)\r\n\t\t\t\tgantt.security_key = skey;\r\n\r\n\t\t\treturn xml;\r\n\t\t},\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = this._getXML(text, loader);\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++)\r\n\t\t\t\tevs[i] = this._xmlNodeToJSON(xml[i]);\r\n\r\n\t\t\tdata.collections = this._getCollections(loader);\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\treturn \"<item id='\" + obj.id + \"' source='\" + obj.source + \"' target='\" + obj.target + \"' type='\" + obj.type + \"' />\";\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\treturn \"<task id='\" + obj.id + \"' parent='\" + (obj.parent || \"\") + \"' start_date='\" + obj.start_date + \"' duration='\" + obj.duration + \"' open='\" + (!!obj.open) + \"' progress='\" + obj.progress + \"' end_date='\" + obj.end_date + \"'><![CDATA[\" + obj.text + \"]]></task>\";\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tvar json = gantt.json.serialize();\r\n\t\t\tfor (var i = 0, len = json.data.length; i < len; i++) {\r\n\t\t\t\ttasks.push(this._copyObject(json.data[i]));\r\n\t\t\t}\r\n\t\t\tfor (var i = 0, len = json.links.length; i < len; i++) {\r\n\t\t\t\tlinks.push(this._copyLink(json.links[i]));\r\n\t\t\t}\r\n\t\t\treturn \"<data>\" + tasks.join(\"\") + \"<coll_options for='links'>\" + links.join(\"\") + \"</coll_options></data>\";\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.oldxml = {\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = gantt.xml._getXML(text, loader, \"projects\");\r\n\t\t\tvar data = {collections: {links: []}};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tevs[i] = gantt.xml._xmlNodeToJSON(xml[i]);\r\n\t\t\t\tvar parent = xml[i].parentNode;\r\n\r\n\t\t\t\tif (parent.tagName == \"project\")\r\n\t\t\t\t\tevs[i].parent = \"project-\" + parent.getAttribute(\"id\");\r\n\t\t\t\telse\r\n\t\t\t\t\tevs[i].parent = parent.parentNode.getAttribute(\"id\");\r\n\t\t\t}\r\n\r\n\t\t\txml = gantt.ajax.xpath(\"//project\", loader);\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tvar ev = gantt.xml._xmlNodeToJSON(xml[i], true);\r\n\t\t\t\tev.id = \"project-\" + ev.id;\r\n\t\t\t\tevs.push(ev);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < evs.length; i++) {\r\n\t\t\t\tvar ev = evs[i];\r\n\t\t\t\tev.start_date = ev.startdate || ev.est;\r\n\t\t\t\tev.end_date = ev.enddate;\r\n\t\t\t\tev.text = ev.name;\r\n\t\t\t\tev.duration = ev.duration / 8;\r\n\t\t\t\tev.open = 1;\r\n\t\t\t\tif (!ev.duration && !ev.end_date) ev.duration = 1;\r\n\t\t\t\tif (ev.predecessortasks)\r\n\t\t\t\t\tdata.collections.links.push({\r\n\t\t\t\t\t\ttarget: ev.id,\r\n\t\t\t\t\t\tsource: ev.predecessortasks,\r\n\t\t\t\t\t\ttype: gantt.config.links.finish_to_start\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tgantt.message(\"Serialization to 'old XML' is not implemented\");\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.serverList = function (name, array) {\r\n\t\tif (array) {\r\n\t\t\tthis.serverList[name] = array.slice(0);\r\n\t\t} else if (!this.serverList[name]) {\r\n\t\t\tthis.serverList[name] = [];\r\n\t\t}\r\n\t\treturn this.serverList[name];\r\n\t};\r\n\r\n};","import * as utils from \"../../utils/utils\";\r\nimport * as helpers from \"../../utils/helpers\";\r\n\r\n\r\nfunction IsWorkTimeArgument(date, unit, task, id, calendar){\r\n\tthis.date = date;\r\n\tthis.unit = unit;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction ClosestWorkTimeArgument(date, dir, unit, task, id, calendar){\r\n\tthis.date = date;\r\n\tthis.dir = dir;\r\n\tthis.unit = unit;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction CalculateEndDateArgument(start_date, duration, unit, step, task, id, calendar){\r\n\tthis.start_date = start_date;\r\n\tthis.duration = duration;\r\n\tthis.unit = unit;\r\n\tthis.step = step;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction GetDurationArgument(start, end, task, calendar) {\r\n\tthis.start_date = start;\r\n\tthis.end_date = end;\r\n\tthis.task = task;\r\n\tthis.calendar = calendar;\r\n\tthis.unit = null;\r\n\tthis.step = null;\r\n\treturn this;\r\n}\r\n\r\nvar calendarArgumentsHelper = function(gantt){\r\n\treturn {\r\n\t\tgetWorkHoursArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (helpers.isDate(config)) {\r\n\t\t\t\tconfig = {\r\n\t\t\t\t\tdate: config\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t}\r\n\r\n\t\t\tif(!helpers.isValidDate(config.date)){\r\n\t\t\t\tgantt.assert(false, \"Invalid date argument for getWorkHours method\");\r\n\t\t\t\tthrow new Error(\"Invalid date argument for getWorkHours method\");\r\n\t\t\t}\r\n\r\n\t\t\treturn config;\r\n\t\t},\r\n\t\tsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tunsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tisWorkTimeArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif(config instanceof IsWorkTimeArgument){\r\n\t\t\t\treturn config;\r\n\t\t\t}\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\tif (!config.date) {\r\n\t\t\t\t//IsWorkTimeArgument(date, unit, task, id, calendar)\r\n\t\t\t\tprocessedConfig = new IsWorkTimeArgument(arguments[0], arguments[1], arguments[2], null, arguments[3]);\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new IsWorkTimeArgument(config.date, config.unit, config.task, null, config.calendar);\r\n\t\t\t}\r\n\r\n\t\t\tprocessedConfig.unit = processedConfig.unit || gantt.config.duration_unit;\r\n\r\n\t\t\tif(!helpers.isValidDate(processedConfig.date)){\r\n\t\t\t\tgantt.assert(false, \"Invalid date argument for isWorkTime method\");\r\n\t\t\t\tthrow new Error(\"Invalid date argument for isWorkTime method\");\r\n\t\t\t}\r\n\r\n\t\t\treturn processedConfig;\r\n\t\t},\r\n\t\tgetClosestWorkTimeArguments: function (arg) {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (config instanceof ClosestWorkTimeArgument)\r\n\t\t\t\treturn config;\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\tif (helpers.isDate(config)) {\r\n\t\t\t\tprocessedConfig = new ClosestWorkTimeArgument(config);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new ClosestWorkTimeArgument(\r\n\t\t\t\t\tconfig.date,\r\n\t\t\t\t\tconfig.dir,\r\n\t\t\t\t\tconfig.unit,\r\n\t\t\t\t\tconfig.task,\r\n\t\t\t\t\tnull,//config.id,\r\n\t\t\t\t\tconfig.calendar\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif(config.id){\r\n\t\t\t\tprocessedConfig.task = config;\r\n\t\t\t}\r\n\t\t\tprocessedConfig.dir = config.dir || 'any';\r\n\t\t\tprocessedConfig.unit = config.unit || gantt.config.duration_unit;\r\n\r\n\t\t\tif(!helpers.isValidDate(processedConfig.date)){\r\n\t\t\t\tgantt.assert(false, \"Invalid date argument for getClosestWorkTime method\");\r\n\t\t\t\tthrow new Error(\"Invalid date argument for getClosestWorkTime method\");\r\n\t\t\t}\r\n\t\t\treturn processedConfig;\r\n\t\t},\r\n\r\n\t\t_getStartEndConfig: function (param) {\r\n\t\t\tvar argumentType = GetDurationArgument;\r\n\t\t\tvar config;\r\n\t\t\tif (param instanceof argumentType)\r\n\t\t\t\treturn param;\r\n\r\n\t\t\tif (helpers.isDate(param)) {\r\n\t\t\t\tconfig = new argumentType(arguments[0], arguments[1], arguments[2], arguments[3]);\r\n\t\t\t} else {\r\n\t\t\t\tconfig = new argumentType(param.start_date, param.end_date, param.task);\r\n\t\t\t\tif (param.id !== null && param.id !== undefined) {\r\n\t\t\t\t\tconfig.task = param;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\t\t\tconfig.step = config.step || gantt.config.duration_step;\r\n\t\t\tconfig.start_date = config.start_date || config.start || config.date;\r\n\r\n\t\t\tif(!helpers.isValidDate(config.start_date)){\r\n\t\t\t\tgantt.assert(false, \"Invalid start_date argument for getDuration method\");\r\n\t\t\t\tthrow new Error(\"Invalid start_date argument for getDuration method\");\r\n\t\t\t}\r\n\r\n\t\t\tif(!helpers.isValidDate(config.end_date)){\r\n\t\t\t\tgantt.assert(false, \"Invalid end_date argument for getDuration method\");\r\n\t\t\t\tthrow new Error(\"Invalid end_date argument for getDuration method\");\r\n\t\t\t}\r\n\r\n\t\t\treturn config;\r\n\t\t},\r\n\r\n\t\tgetDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\thasDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\tcalculateEndDateArguments: function (start, duration, unit, step) {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (config instanceof CalculateEndDateArgument)\r\n\t\t\t\treturn config;\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\t//CalculateEndDateArgument(start_date, duration, unit, step, task, id, calendar)\r\n\t\t\tif (helpers.isDate(config)) {\r\n\t\t\t\tprocessedConfig = new CalculateEndDateArgument(\r\n\t\t\t\t\targuments[0],\r\n\t\t\t\t\targuments[1],\r\n\t\t\t\t\targuments[2],\r\n\t\t\t\t\tundefined,\r\n\t\t\t\t\targuments[3],\r\n\t\t\t\t\tundefined,\r\n\t\t\t\t\targuments[4]\r\n\t\t\t\t);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new CalculateEndDateArgument(\r\n\t\t\t\t\tconfig.start_date,\r\n\t\t\t\t\tconfig.duration,\r\n\t\t\t\t\tconfig.unit,\r\n\t\t\t\t\tconfig.step,\r\n\t\t\t\t\tconfig.task,\r\n\t\t\t\t\tnull,//config.id,\r\n\t\t\t\t\tconfig.calendar\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif(config.id !== null && config.id !== undefined){\r\n\t\t\t\tprocessedConfig.task = config;\r\n\r\n\t\t\t\t// received a task object as an argument\r\n\t\t\t\t// ignore 'unit' and 'step' properties in this case, since it's likely a part of data model of a task\r\n\t\t\t\tprocessedConfig.unit = null;\r\n\t\t\t\tprocessedConfig.step = null;\r\n\t\t\t}\r\n\r\n\t\t\tprocessedConfig.unit = processedConfig.unit || gantt.config.duration_unit;\r\n\t\t\tprocessedConfig.step = processedConfig.step || gantt.config.duration_step;\r\n\r\n\t\t\tif(!helpers.isValidDate(processedConfig.start_date)){\r\n\t\t\t\tgantt.assert(false, \"Invalid start_date argument for calculateEndDate method\");\r\n\t\t\t\tthrow new Error(\"Invalid start_date argument for calculateEndDate method\");\r\n\t\t\t}\r\n\r\n\t\t\treturn processedConfig;\r\n\t\t}\r\n\t};\r\n};\r\n\r\n\r\nexport default calendarArgumentsHelper;","import * as utils from \"../../../utils/utils\";\r\nfunction WorkTimeCalendarMerger(){\r\n}\r\n\r\nWorkTimeCalendarMerger.prototype = {\r\n\r\n\r\n\t/**\r\n\t * convert hours array items into objects, e.g. [8, 12, 17, 18] -> [{start: 8, end: 12}, {start:17, end:18}]\r\n\t * @param {Array} hoursArray\r\n\t */\r\n\t_getIntervals: function(hoursArray){\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < hoursArray.length; i += 2){\r\n\r\n\t\t\tresult.push({\r\n\t\t\t\tstart: hoursArray[i],\r\n\t\t\t\tend: hoursArray[i+1]\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t/**\r\n\t * Convert ranges config into hours array\r\n\t * [{start: 8, end: 12}, {start:17, end:18}] --> [8, 12, 17, 18]\r\n\t * @param {*} intervalsArray\r\n\t */\r\n\t_toHoursArray: function(intervalsArray){\r\n\t\tvar result = [];\r\n\r\n\t\tfunction toFixed(value){\r\n\t\t\tvar str = String(value);\r\n\t\t\tif(str.length < 2){\r\n\t\t\t\tstr = \"0\" + str;\r\n\t\t\t}\r\n\t\t\treturn str;\r\n\t\t}\r\n\t\tfunction formatHHMM(secondsValue){\r\n\t\t\tvar hours = Math.floor(secondsValue / (60*60));\r\n\t\t\tvar minutePart = secondsValue - hours * 60 * 60;\r\n\r\n\t\t\tvar minutes = Math.floor(minutePart / (60));\r\n\t\t\treturn hours + \":\" + toFixed(minutes);\r\n\t\t}\r\n\t\tfor(var i = 0; i < intervalsArray.length; i++){\r\n\t\t\tresult.push(\r\n\t\t\t\tformatHHMM(intervalsArray[i].start) +\r\n\t\t\t\t\"-\" +\r\n\t\t\t\tformatHHMM(intervalsArray[i].end)\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t/**\r\n\t * Build intersection of hour intervals. e.g.\r\n\t * first: [{start: 8, end: 12}, {start:13, end:18}]\r\n\t * second: [{start: 10, end: 15}]\r\n\t * result: [{start: 10, end: 12}, {start: 13, end: 15}]\r\n\t * @param {Array} first\r\n\t * @param {Array} second\r\n\t */\r\n\t_intersectHourRanges: function(first, second){\r\n\t\tvar result = [];\r\n\r\n\t\tvar baseArray = first.length > second.length ? first : second;\r\n\t\tvar overridesArray = first === baseArray ? second: first;\r\n\t\tbaseArray = baseArray.slice();\r\n\t\toverridesArray = overridesArray.slice();\r\n\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < baseArray.length; i++){\r\n\t\t\tvar base = baseArray[i];\r\n\r\n\t\t\tfor(var j = 0; j < overridesArray.length; j++){\r\n\t\t\t\tvar current = overridesArray[j];\r\n\t\t\t\tif(current.start < base.end && current.end > base.start){\r\n\t\t\t\t\tresult.push({\r\n\t\t\t\t\t\tstart: Math.max(base.start, current.start),\r\n\t\t\t\t\t\tend: Math.min(base.end, current.end)\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif(base.end > current.end){\r\n\t\t\t\t\t\toverridesArray.splice(j, 1);\r\n\t\t\t\t\t\tj--;\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t/**\r\n\t * Reduce the number of ranges in config when possible,\r\n\t * joins ranges that can be merged\r\n\t * parts: [{start: 8, end: 12}, {start:12, end:13}, {start: 15, end: 17}]\r\n\t * result: [{start: 8, end: 13}, {start: 15, end: 17}]\r\n\t * @param {Array} parts\r\n\t */\r\n\t_mergeAdjacentIntervals: function(parts){\r\n\t\tvar result = parts.slice();\r\n\t\tresult.sort(function(a, b){\r\n\t\t\treturn a.start - b.start;\r\n\t\t});\r\n\t\tvar base = result[0];\r\n\t\tfor(var i = 1; i < result.length; i++){\r\n\t\t\tvar current = result[i];\r\n\t\t\tif(current.start <= base.end){\r\n\t\t\t\tif(current.end > base.end){\r\n\t\t\t\t\tbase.end = current.end;\r\n\t\t\t\t}\r\n\t\t\t\tresult.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}else{\r\n\t\t\t\tbase = current;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t_mergeHoursConfig: function(firstHours, secondHours){\r\n\t\t//var firstIntervals = this._getIntervals(firstHours);\r\n\t\t//var secondIntervals = this._getIntervals(secondHours);\r\n\r\n\t\treturn this._mergeAdjacentIntervals(\r\n\t\t\tthis._intersectHourRanges(firstHours, secondHours)\r\n\t\t);\r\n\t},\r\n\r\n\tmerge: function(first, second){\r\n\t\tconst firstCalendar = utils.copy(first.getConfig());\r\n\t\tconst secondCalendar = utils.copy(second.getConfig());\r\n\r\n\t\tconst firstConfig = firstCalendar.parsed;\r\n\t\tconst secondConfig = secondCalendar.parsed;\r\n\r\n\t\t// GS-2101. The customWeeks config shouldn't have parsed values as we'll parse them later\r\n\t\tfirstConfig.customWeeks = firstCalendar.customWeeks;\r\n\t\tsecondConfig.customWeeks = secondCalendar.customWeeks;\r\n\r\n\t\tvar mergedSettings = {\r\n\t\t\thours: this._toHoursArray(this._mergeHoursConfig(firstConfig.hours, secondConfig.hours)),\r\n\t\t\tdates: {},\r\n\t\t\tcustomWeeks: {}\r\n\t\t};\r\n\r\n\t\tconst processCalendar = (config1, config2) => {\r\n\t\t\tfor (let i in config1.dates) {\r\n\t\t\t\tconst date1 = config1.dates[i];\r\n\t\r\n\t\t\t\t// dates contain day-of-week rules [0-7] and rules for specific dates (js date timestamps) - set false date rules initially\r\n\t\t\t\tif (+i > 1000) {\r\n\t\t\t\t\tmergedSettings.dates[i] = false;\r\n\t\t\t\t}\r\n\t\t\t\t// Check if the key exists in the fisrt calendar object\r\n\t\t\t\tfor (const key in config2.dates) {\r\n\t\t\t\t\tconst date2 = config2.dates[key];\r\n\t\r\n\t\t\t\t\t// Logical AND for week days\r\n\t\t\t\t\tif (key == i) {\r\n\t\t\t\t\t\tmergedSettings.dates[i] = !!(date1 && date2);\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t// Handle case where dates are arrays\r\n\t\t\t\t\tif (Array.isArray(date1)) {\r\n\t\t\t\t\t\tconst hours2 = Array.isArray(date2) ? date2 : config2.hours;\r\n\t\t\t\t\t\tmergedSettings.dates[i] = this._toHoursArray(this._mergeHoursConfig(date1, hours2));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\r\n\t\t// Check both calendars\r\n\t\tprocessCalendar(firstConfig, secondConfig);\r\n\t\tprocessCalendar(secondConfig, firstConfig);\r\n\r\n\t\t// transfer and overwrite custom week calendars\r\n\t\tif(firstConfig.customWeeks){\r\n\t\t\tfor(var i in firstConfig.customWeeks){\r\n\t\t\t\tmergedSettings.customWeeks[i] = firstConfig.customWeeks[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(secondConfig.customWeeks){\r\n\t\t\tfor(var i in secondConfig.customWeeks){\r\n\t\t\t\t// GS-2101. If both calendars have the same name for a period, we need to rename it\r\n\t\t\t\tif (mergedSettings.customWeeks[i]){\r\n\t\t\t\t\tmergedSettings.customWeeks[i + \"_second\"] = secondConfig.customWeeks[i];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmergedSettings.customWeeks[i] = secondConfig.customWeeks[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn mergedSettings;\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport default WorkTimeCalendarMerger;","\r\n\r\nimport { IWorkUnitCache } from \"./workunit_cache_interface\";\r\n\r\nexport class WorkUnitsMapCache implements IWorkUnitCache {\r\n\tprivate _cache: Map<string, Array<Map<string, boolean>>>;\r\n\tconstructor() {\r\n\t\tthis.clear();\r\n\t}\r\n\r\n\tgetItem(unit: string, timestamp: string, value: Date): number|boolean {\r\n\t\tif (this._cache.has(unit)) {\r\n\t\t\tconst unitCache = this._cache.get(unit);\r\n\r\n\t\t\tconst subCache = unitCache[value.getFullYear()];\r\n\t\t\tif (subCache && subCache.has(timestamp)) {\r\n\t\t\t\treturn subCache.get(timestamp);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\tsetItem(unit: string, timestamp: string, value: boolean, rawValue: Date): void {\r\n\t\tif (!unit || !timestamp) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst cache = this._cache;\r\n\t\tconst year = rawValue.getFullYear();\r\n\r\n\t\tlet unitCache;\r\n\t\tif (!cache.has(unit)) {\r\n\t\t\tunitCache = [];\r\n\t\t\tcache.set(unit, unitCache);\r\n\t\t} else {\r\n\t\t\tunitCache = cache.get(unit);\r\n\t\t}\r\n\r\n\t\tlet yearCache = unitCache[year];\r\n\t\tif(!yearCache){\r\n\t\t\tyearCache = unitCache[year] = new Map<string, boolean>();\r\n\t\t}\r\n\r\n\r\n\t\tyearCache.set(timestamp, value);\r\n\t}\r\n\tclear(): void{\r\n\t\tthis._cache = new Map<string, Array<Map<string, boolean>>>();\r\n\t}\r\n}","import { IWorkUnitCache } from \"./workunit_cache_interface\";\r\n\r\nexport class WorkUnitsObjectCache implements IWorkUnitCache {\r\n\tprivate _cache: any;\r\n\tconstructor() {\r\n\t\tthis.clear();\r\n\t}\r\n\r\n\tgetItem(unit: string, timestamp: string, value: Date): number|boolean {\r\n\t\tconst cache = this._cache;\r\n\t\tif (cache && cache[unit]) {\r\n\t\t\tconst units = cache[unit];\r\n\t\t\tif(units === undefined){\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t\tconst subCache = units[value.getFullYear()];\r\n\t\t\tif (subCache && subCache[timestamp] !== undefined) {\r\n\t\t\t\treturn subCache[timestamp];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\tsetItem(unit: string, timestamp: string, value: boolean, rawValue: Date): void {\r\n\t\tif (!unit || !timestamp) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst cache = this._cache;\r\n\r\n\t\tif (!cache) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!cache[unit]) {\r\n\t\t\tcache[unit] = [];\r\n\t\t}\r\n\t\tconst unitCache = cache[unit];\r\n\r\n\t\tconst year = rawValue.getFullYear();\r\n\t\tlet yearCache = unitCache[year];\r\n\t\tif(!yearCache){\r\n\t\t\tyearCache = unitCache[year] = {};\r\n\t\t}\r\n\t\tyearCache[timestamp] = value;\r\n\t}\r\n\tclear(): void{\r\n\t\tthis._cache = {};\r\n\t}\r\n}","\r\n\r\nexport class LargerUnitsCache {\r\n\tprivate _weekCache: Map<number, number>;\r\n\tprivate _monthCache: Map<number, number>;\r\n\tprivate _calendar: any;\r\n\tconstructor(calendar) {\r\n\t\tthis.clear();\r\n\t\tthis._calendar = calendar;\r\n\t}\r\n\r\n\tgetMinutesPerWeek = (weekStart: Date) => {\r\n\t\tconst key = weekStart.valueOf();\r\n\r\n\t\tif(this._weekCache.has(key)){\r\n\t\t\treturn this._weekCache.get(key);\r\n\t\t}\r\n\r\n\t\tconst calendar = this._calendar;\r\n\t\tconst gantt = this._calendar.$gantt;\r\n\r\n\t\tlet minutesPerWeek = 0;\r\n\t\tlet start = gantt.date.week_start(new Date(weekStart));\r\n\t\tfor(let i = 0; i < 7; i++){\r\n\t\t\tminutesPerWeek += calendar.getHoursPerDay(start) * 60;\r\n\t\t\tstart = gantt.date.add(start, 1, \"day\");\r\n\t\t}\r\n\r\n\t\tthis._weekCache.set(key, minutesPerWeek);\r\n\t\treturn minutesPerWeek;\r\n\t};\r\n\r\n\tgetMinutesPerMonth = (monthStart: Date) => {\r\n\t\tconst key = monthStart.valueOf();\r\n\r\n\t\tif(this._monthCache.has(key)){\r\n\t\t\treturn this._monthCache.get(key);\r\n\t\t}\r\n\r\n\t\tconst calendar = this._calendar;\r\n\t\tconst gantt = this._calendar.$gantt;\r\n\r\n\t\tlet minutesPerMonth = 0;\r\n\t\tlet start = gantt.date.week_start(new Date(monthStart));\r\n\t\tconst nextMonth = gantt.date.add(start, 1, \"month\").valueOf();\r\n\t\twhile(start.valueOf() < nextMonth){\r\n\t\t\tminutesPerMonth += calendar.getHoursPerDay(start) * 60;\r\n\t\t\tstart = gantt.date.add(start, 1, \"day\");\r\n\t\t}\r\n\r\n\t\tthis._monthCache.set(key, minutesPerMonth);\r\n\t\treturn minutesPerMonth;\r\n\t};\r\n\r\n\tclear = (): void => {\r\n\t\tthis._weekCache = new Map<number, number>();\r\n\t\tthis._monthCache = new Map<number, number>();\r\n\t};\r\n}","export class DateDurationCache  {\r\n\tprivate _cache: any;\r\n\tconstructor() {\r\n\t\tthis.clear();\r\n\t}\r\n\r\n\t_getCacheObject(startDate: Date, unit: string, step:number){\r\n\t\tconst cache = this._cache;\r\n\t\tif (!cache[unit]) {\r\n\t\t\tcache[unit] = [];\r\n\t\t}\r\n\t\tlet unitCache = cache[unit];\r\n\t\tif(!unitCache) {\r\n\t\t\tunitCache = cache[unit] = {};\r\n\t\t}\r\n\r\n\t\tlet stepCache = unitCache[step];\r\n\t\tif(!stepCache) {\r\n\t\t\tstepCache = unitCache[step] = {};\r\n\t\t}\r\n\r\n\t\tconst year = startDate.getFullYear();\r\n\t\tlet yearCache = stepCache[year];\r\n\t\tif(!yearCache){\r\n\t\t\tyearCache = stepCache[year] = {durations: {}, endDates: {}};\r\n\t\t}\r\n\r\n\t\treturn yearCache;\r\n\t}\r\n\t_endDateCacheKey(startDate: number, duration: number){\r\n\t\treturn String(startDate) + \"-\" + String(duration);\r\n\t}\r\n\t_durationCacheKey(startDate: number, endDate: number){\r\n\t\treturn String(startDate) + \"-\" + String(endDate);\r\n\t}\r\n\tgetEndDate(startDate: Date, duration: number, unit: string, step: number, compute: () => Date): number|null{\r\n\t\tconst cache = this._getCacheObject(startDate, unit, step);\r\n\r\n\t\tconst startDateTimestamp = startDate.valueOf();\r\n\t\tconst key = this._endDateCacheKey(startDateTimestamp, duration);\r\n\t\tlet endDate;\r\n\t\tif(cache.endDates[key] === undefined){\r\n\t\t\tconst result = compute();\r\n\t\t\tconst resultTimestamp = result.valueOf();\r\n\t\t\tcache.endDates[key] = resultTimestamp;\r\n\t\t\tcache.durations[this._durationCacheKey(startDateTimestamp, resultTimestamp)] = duration;\r\n\t\t\tendDate = result;\r\n\t\t}else{\r\n\t\t\tendDate = new Date(cache.endDates[key]);\r\n\t\t}\r\n\r\n\t\treturn endDate;\r\n\t}\r\n\r\n\tgetDuration(startDate: Date, endDate: Date, unit: string, step: number, compute: () => number): number|null{\r\n\t\tconst cache = this._getCacheObject(startDate, unit, step);\r\n\r\n\t\tconst startDateTimestamp = startDate.valueOf();\r\n\t\tconst endDateTimestamp = endDate.valueOf();\r\n\t\tconst key = this._durationCacheKey(startDateTimestamp, endDateTimestamp);\r\n\t\tlet duration;\r\n\t\tif(cache.durations[key] === undefined){\r\n\t\t\tconst result = compute();\r\n\t\t\tcache.durations[key] = result.valueOf();\r\n\r\n\t\t\t// can't populate end date due to logic of end date calculation, current unit tests capture it\r\n\t\t\t// cache.endDates[this._endDateCacheKey(startDateTimestamp, result)] = endDateTimestamp;\r\n\t\t\tduration = result;\r\n\t\t}else{\r\n\t\t\tduration = cache.durations[key];\r\n\t\t}\r\n\r\n\t\treturn duration;\r\n\t}\r\n\r\n\tclear(): void{\r\n\t\tthis._cache = {};\r\n\t}\r\n}","import {createCacheObject} from \"./work_unit_cache\";\r\nimport {LargerUnitsCache} from \"./work_unit_cache\";\r\nimport * as utils from \"../../../utils/utils\";\r\nimport {DateDurationCache} from \"./work_unit_cache/date_duration_cache\";\r\n\r\nfunction CalendarWorkTimeStrategy(gantt, argumentsHelper) {\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n\tthis._workingUnitsCache = createCacheObject();\r\n\tthis._largeUnitsCache = new LargerUnitsCache(this);\r\n\tthis._dateDurationCache = new DateDurationCache();\r\n\tthis._worktime = null;\r\n\tthis._cached_timestamps = {};\r\n\tthis._cached_timestamps_count = 0;\r\n}\r\n\r\nCalendarWorkTimeStrategy.prototype = {\r\n\tunits: [\r\n\t\t\"year\",\r\n\t\t\"month\",\r\n\t\t\"week\",\r\n\t\t\"day\",\r\n\t\t\"hour\",\r\n\t\t\"minute\"\r\n\t],\r\n\t_clearCaches: function(){\r\n\t\tthis._workingUnitsCache.clear();\r\n\t\tthis._largeUnitsCache.clear();\r\n\t\tthis._dateDurationCache.clear();\r\n\t},\r\n\t// cache previously calculated worktime\r\n\t_getUnitOrder: function (unit) {\r\n\t\tfor (var i = 0, len = this.units.length; i < len; i++) {\r\n\t\t\tif (this.units[i] == unit)\r\n\t\t\t\treturn i;\r\n\t\t}\r\n\t},\r\n\t_resetTimestampCache: function(){\r\n\t\tthis._cached_timestamps = {};\r\n\t\tthis._cached_timestamps_count = 0;\r\n\t},\r\n\t_timestamp: function (settings) {\r\n\t\t// minor optimization, store calculated timestamps to reduce computations\r\n\t\t// reset cache when number of keys exceeds large number where key lookup may became more expensive than the recalculation\r\n\t\tif(this._cached_timestamps_count > 1000000){\r\n\t\t\tthis._resetTimestampCache();\r\n\t\t}\r\n\r\n\t\tvar timestamp = null;\r\n\t\tif ((settings.day || settings.day === 0)) {\r\n\t\t\ttimestamp = settings.day;\r\n\t\t} else if (settings.date) {\r\n\t\t\tvar value = String(settings.date.valueOf());\r\n\t\t\tif(this._cached_timestamps[value]){\r\n\t\t\t\ttimestamp = this._cached_timestamps[value];\r\n\t\t\t}else{\r\n\t\t\t\t// store worktime datestamp in utc so it could be recognized in different timezones (e.g. opened locally and sent to the export service in different timezone)\r\n\t\t\t\ttimestamp = Date.UTC(settings.date.getFullYear(), settings.date.getMonth(), settings.date.getDate());\r\n\t\t\t\tthis._cached_timestamps[value] = timestamp;\r\n\t\t\t\tthis._cached_timestamps_count++;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn timestamp;\r\n\t},\r\n\t_checkIfWorkingUnit: function (date, unit) {\r\n\t\t// GS-596: If unit is larger than day or has a custom logic\r\n\t\tif (!this[\"_is_work_\" + unit]) {\r\n\t\t\tconst from = this.$gantt.date[`${unit}_start`](new Date(date));\r\n\t\t\tconst to = this.$gantt.date.add(from, 1, unit);\r\n\t\t\treturn this.hasDuration(from, to);\r\n\t\t}\r\n\t\treturn this[\"_is_work_\" + unit](date);\r\n\t},\r\n\t//checkings for particular time units\r\n\t//methods for month-year-week can be defined, otherwise always return 'true'\r\n\t_is_work_day: function (date) {\r\n\t\tvar val = this._getWorkHours(date);\r\n\r\n\t\tif (Array.isArray(val)) {\r\n\t\t\treturn val.length > 0;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_is_work_hour: function (date) {\r\n\t\tvar hours = this._getWorkHours(date); // [{start: 8*60*60, end: 12*60*60}, {start: 13*60*60, end: 17*60*60}]\r\n\t\tvar value = date.getHours();\r\n\t\tfor (var i = 0; i < hours.length; i++) {\r\n\t\t\tif(value >= hours[i].startHour && value < hours[i].endHour){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\t_getTimeOfDayStamp: function(date, dayEnd) {\r\n\t\tvar hours = date.getHours();\r\n\t\tif(!date.getHours() && !date.getMinutes() && dayEnd){\r\n\t\t\thours = 24;\r\n\t\t}\r\n\t\treturn hours * 60 * 60 + date.getMinutes() * 60;\r\n\t},\r\n\r\n\t_is_work_minute: function(date){\r\n\t\tvar hours = this._getWorkHours(date); // [{start: 8*60*60, end: 12*60*60}, {start: 13*60*60, end: 17*60*60}]\r\n\t\tvar checkTime = this._getTimeOfDayStamp(date);\r\n\t\tfor (var i = 0; i < hours.length; i++) {\r\n\t\t\tif(checkTime >= hours[i].start && checkTime < hours[i].end){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\t_nextDate: function (start, unit, step) {\r\n\t\treturn this.$gantt.date.add(start, step, unit);\r\n\t},\r\n\t_getWorkUnitsBetweenGeneric: function (from, to, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\t\tvar units = 0;\r\n\r\n\r\n\t\tvar next = null;\r\n\t\tvar stepStart,\r\n\t\t\tstepEnd;\r\n\r\n\t\t// calculating decimal durations, i.e. 2016-09-20 00:05:00 - 2016-09-20 01:00:00 ~ 0.95 instead of 1\r\n\t\t// and also  2016-09-20 00:00:00 - 2016-09-20 00:05:00 ~ 0.05 instead of 1\r\n\t\t// durations must be rounded later\r\n\t\tvar checkFirst = false;\r\n\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\tif (stepStart.valueOf() != start.valueOf()) {\r\n\t\t\tcheckFirst = true;\r\n\t\t}\r\n\t\tvar checkLast = false;\r\n\t\tstepEnd = dateHelper[unit + \"_start\"](new Date(to));\r\n\t\tif (stepEnd.valueOf() != to.valueOf()) {\r\n\t\t\tcheckLast = true;\r\n\t\t}\r\n\r\n\t\tvar isLastStep = false;\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tnext = this._nextDate(start, unit, step);\r\n\t\t\tisLastStep = (next.valueOf() > end.valueOf());\r\n\r\n\t\t\tif (this._isWorkTime(start, unit)) {\r\n\t\t\t\tif (checkFirst || (checkLast && isLastStep)) {\r\n\t\t\t\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\t\t\t\tstepEnd = dateHelper.add(stepStart, step, unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (checkFirst) {\r\n\t\t\t\t\tcheckFirst = false;\r\n\t\t\t\t\tnext = this._nextDate(stepStart, unit, step);\r\n\t\t\t\t\tunits += ((stepEnd.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\t\t\t\t} else if (checkLast && isLastStep) {\r\n\t\t\t\t\tcheckLast = false;\r\n\t\t\t\t\tunits += ((end.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunits++;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar unitOrder = this._getUnitOrder(unit);\r\n\t\t\t\tvar biggerTimeUnit = this.units[unitOrder - 1];\r\n\t\t\t\tif(biggerTimeUnit && !this._isWorkTime(start, biggerTimeUnit)){\r\n\t\t\t\t\tnext = this._getClosestWorkTimeFuture(start, biggerTimeUnit);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstart = next;\r\n\t\t}\r\n\t\treturn units;\r\n\t},\r\n\r\n\t_getMinutesPerHour: function (date) {\r\n\t\tvar hourStart = this._getTimeOfDayStamp(date);\r\n\t\tvar hourEnd = this._getTimeOfDayStamp(this._nextDate(date, \"hour\", 1));\r\n\t\tif (hourEnd === 0){\r\n\t\t\thourEnd = 24 * 60 * 60;\r\n\t\t}\r\n\t\tvar worktimes = this._getWorkHours(date);\r\n\r\n\t\tfor(var i = 0; i < worktimes.length; i++){\r\n\t\t\tvar interval = worktimes[i];\r\n\t\t\tif(hourStart >= interval.start && hourEnd <= interval.end){\r\n\t\t\t\treturn 60;// hour inside a working interval, all hour is a work hour\r\n\t\t\t}else if(hourStart < interval.end && hourEnd > interval.start){\r\n\t\t\t\t// hour is partially work time\r\n\t\t\t\tvar duration = Math.min(hourEnd, interval.end) - Math.max(hourStart, interval.start);\r\n\t\t\t\treturn duration / 60;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\t},\r\n\r\n\t_getMinutesPerDay: function (date) {\r\n\t\tvar hours = this._getWorkHours(date);\r\n\t\tvar res = 0;\r\n\t\thours.forEach(function(interval){\r\n\t\t\tres+= interval.durationMinutes;\r\n\t\t});\r\n\t\treturn res;\r\n\t},\r\n\tgetHoursPerDay: function (date) {\r\n\t\tvar hours = this._getWorkHours(date);\r\n\t\tvar res = 0;\r\n\t\thours.forEach(function(interval){\r\n\t\t\tres+= interval.durationHours;\r\n\t\t});\r\n\t\treturn res;\r\n\t},\r\n\t_getWorkUnitsForRange: function (from, to, unit, step) {\r\n\t\tvar total = 0;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\r\n\t\tvar getUnitsPerDay;\r\n\t\tif (unit == \"minute\") {\r\n\t\t\tgetUnitsPerDay = utils.bind(this._getMinutesPerDay, this);\r\n\t\t} else {\r\n\t\t\tgetUnitsPerDay = utils.bind(this.getHoursPerDay, this);\r\n\t\t}\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif(end - start > 1000*60*60*24*32 && start.getDate() === 0) {\r\n\t\t\t\tvar units = this._largeUnitsCache.getMinutesPerMonth(start);\r\n\t\t\t\tif(unit == \"hour\"){\r\n\t\t\t\t\tunits = units / 60;\r\n\t\t\t\t}\r\n\t\t\t\ttotal += units;\r\n\t\t\t\tstart = this.$gantt.date.add(start, 1, \"month\");\r\n\t\t\t\tcontinue;\r\n\t\t\t}else if(end - start > 1000*60*60*24*16) {\r\n\t\t\t\tvar weekStart = this.$gantt.date.week_start(new Date(start));\r\n\t\t\t\tif(start.valueOf() === weekStart.valueOf()){\r\n\t\t\t\t\tvar units = this._largeUnitsCache.getMinutesPerWeek(start);\r\n\t\t\t\t\tif(unit == \"hour\"){\r\n\t\t\t\t\t\tunits = units / 60;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttotal += units;\r\n\t\t\t\t\tstart = this.$gantt.date.add(start, 7, \"day\");\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t//\tif (this._isWorkTime(start, \"day\")) {\r\n\t\t\ttotal += getUnitsPerDay(start);\r\n\t\t//\t}\r\n\t\t\tstart = this._nextDate(start, \"day\", 1);\r\n\t\t}\r\n\r\n\t\treturn total / step;\r\n\t},\r\n\r\n\r\n\t_getMinutesBetweenSingleDay: function(from, to){\r\n\t\tvar range = this._getIntervalTimestamp(from, to);\r\n\t\tvar worktimes = this._getWorkHours(from);\r\n\t\tvar result = 0;\r\n\r\n\t\tfor(var i = 0; i < worktimes.length; i++){\r\n\t\t\tvar interval = worktimes[i];\r\n\t\t\tif(range.end >= interval.start && range.start <= interval.end){\r\n\t\t\t\tvar minuteFrom = Math.max(interval.start, range.start);\r\n\t\t\t\tvar minuteTo = Math.min(interval.end, range.end);\r\n\r\n\t\t\t\tresult += (minuteTo - minuteFrom) / 60;\r\n\t\t\t\trange.start = minuteTo;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Math.floor(result);\r\n\t},\r\n\r\n\t_getMinutesBetween: function(from, to, unit, step){\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\tvar firstDayStart = new Date(start);\r\n\t\tvar firstDayEnd = this.$gantt.date.add(this.$gantt.date.day_start(new Date(start)), 1, \"day\");\r\n\r\n\t\tif (end.valueOf() <= firstDayEnd.valueOf()) {\r\n\t\t\treturn this._getMinutesBetweenSingleDay(from, to);\r\n\t\t} else {\r\n\r\n\t\t\tvar lastDayStart = this.$gantt.date.day_start(new Date(end));\r\n\t\t\tvar lastDayEnd = end;\r\n\r\n\t\t\tvar startPart = this._getMinutesBetweenSingleDay(firstDayStart, firstDayEnd);\r\n\t\t\tvar endPart = this._getMinutesBetweenSingleDay(lastDayStart, lastDayEnd);\r\n\r\n\t\t\tvar rangePart = this._getWorkUnitsForRange(firstDayEnd, lastDayStart, unit, step);\r\n\t\t\tvar total = startPart + rangePart + endPart;\r\n\r\n\t\t\treturn total;\r\n\t\t}\r\n\t},\r\n\t// optimized method for calculating work units duration of large time spans\r\n\t// implemented for hours and minutes units, bigger time units don't benefit from the optimization so much\r\n\t_getHoursBetween: function (from, to, unit, step) {\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\tvar firstDayStart = new Date(start);\r\n\t\tvar firstDayEnd = this.$gantt.date.add(this.$gantt.date.day_start(new Date(start)), 1, \"day\");\r\n\r\n\t\tif (end.valueOf() <= firstDayEnd.valueOf()) {\r\n\t\t\treturn Math.round(this._getMinutesBetweenSingleDay(from, to) / 60);\r\n\t\t} else {\r\n\r\n\t\t\tvar lastDayStart = this.$gantt.date.day_start(new Date(end));\r\n\t\t\tvar lastDayEnd = end;\r\n\r\n\t\t\tvar startPart = this._getMinutesBetweenSingleDay(firstDayStart, firstDayEnd, unit, step) / 60;\r\n\t\t\tvar endPart = this._getMinutesBetweenSingleDay(lastDayStart, lastDayEnd, unit, step) / 60;\r\n\r\n\t\t\tvar rangePart = this._getWorkUnitsForRange(firstDayEnd, lastDayStart, unit, step);\r\n\t\t\tvar total = startPart + rangePart + endPart;\r\n\r\n\t\t\treturn Math.round(total);\r\n\t\t}\r\n\t},\r\n\r\n\tgetConfig: function () {\r\n\t\treturn this._worktime;\r\n\t},\r\n\t_setConfig: function (settings) {\r\n\t\tthis._worktime = settings;\r\n\t\tthis._parseSettings();\r\n\t\tthis._clearCaches();\r\n\t},\r\n\t_parseSettings: function() {\r\n\t\tvar settings = this.getConfig();\r\n\t\tsettings.parsed = {\r\n\t\t\tdates: {},\r\n\t\t\thours: null,\r\n\t\t\thaveCustomWeeks: false,\r\n\t\t\tcustomWeeks: {},\r\n\t\t\tcustomWeeksRangeStart: null,\r\n\t\t\tcustomWeeksRangeEnd: null,\r\n\t\t\tcustomWeeksBoundaries: []\r\n\t\t};\r\n\r\n\t\tsettings.parsed.hours = this._parseHours(settings.hours);\r\n\t\tfor(var i in settings.dates){\r\n\t\t\tsettings.parsed.dates[i] = this._parseHours(settings.dates[i]);\r\n\t\t}\r\n\r\n\t\tif(settings.customWeeks) {\r\n\t\t\tvar minCustomRangeStart = null;\r\n\t\t\tvar maxCustomRangeEnd = null;\r\n\t\t\tfor(var i in settings.customWeeks){\r\n\t\t\t\tvar customTime = settings.customWeeks[i];\r\n\r\n\t\t\t\tif(customTime.from && customTime.to){\r\n\t\t\t\t\tvar rangeStart = customTime.from;\r\n\t\t\t\t\tvar rangeEnd = customTime.to;\r\n\t\t\t\t\tif(!minCustomRangeStart || minCustomRangeStart > rangeStart.valueOf()){\r\n\t\t\t\t\t\tminCustomRangeStart = rangeStart.valueOf();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!maxCustomRangeEnd || maxCustomRangeEnd < rangeEnd.valueOf()){\r\n\t\t\t\t\t\tmaxCustomRangeEnd = rangeEnd.valueOf();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsettings.parsed.customWeeksBoundaries.push({\r\n\t\t\t\t\t\tfrom: rangeStart.valueOf(),\r\n\t\t\t\t\t\tfromReadable: new Date(rangeStart),\r\n\t\t\t\t\t\tto: rangeEnd.valueOf(),\r\n\t\t\t\t\t\ttoReadable: new Date(rangeEnd),\r\n\t\t\t\t\t\tname: i\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tsettings.parsed.haveCustomWeeks = true;\r\n\t\t\t\t\tvar currentWeek = settings.parsed.customWeeks[i] = {\r\n\t\t\t\t\t\tfrom: customTime.from,\r\n\t\t\t\t\t\tto: customTime.to,\r\n\t\t\t\t\t\thours: this._parseHours(customTime.hours),\r\n\t\t\t\t\t\tdates: {}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// GS-1840. If there are no dates, it should work correctly with the weekdays\r\n\t\t\t\t\tif (customTime.days && !customTime.dates) {\r\n\t\t\t\t\t\tcustomTime.dates = customTime.dates || {};\r\n\t\t\t\t\t\tfor (var i = 0; i < customTime.days.length; i++) {\r\n\t\t\t\t\t\t\tcustomTime.dates[i] = customTime.days[i];\r\n\t\t\t\t\t\t\tif (!(customTime.days[i] instanceof Array)) {\r\n\t\t\t\t\t\t\t\tcustomTime.dates[i] = !!customTime.days[i];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdelete customTime.days;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor(var d in customTime.dates){\r\n\t\t\t\t\t\tcurrentWeek.dates[d] = this._parseHours(customTime.dates[d]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tsettings.parsed.customWeeksRangeStart = minCustomRangeStart;\r\n\t\t\tsettings.parsed.customWeeksRangeEnd = maxCustomRangeEnd;\r\n\r\n\t\t}\r\n\t},\r\n\r\n\t_tryChangeCalendarSettings: function (payload) {\r\n\t\tvar backup = JSON.stringify(this.getConfig());\r\n\t\tpayload();\r\n\t\tif (!this.hasWorkTime()) {\r\n\t\t//\tthis.$gantt.assert(false, \"Invalid calendar settings, no worktime available\");\r\n\t\t\tthis._setConfig(JSON.parse(backup));\r\n\t\t\tthis._clearCaches();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\t_arraysEqual: function(a, b){\r\n\t\tif (a === b) return true;\r\n\t\tif (!a || !b) return false;\r\n\t\tif (a.length != b.length) return false;\r\n\r\n\t\tfor (var i = 0; i < a.length; ++i) {\r\n\t\t\tif (a[i] !== b[i]) return false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\r\n\t_compareSettings: function (mySettings, thatSettings) {\r\n\t\tif (!this._arraysEqual(mySettings.hours, thatSettings.hours)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar myDays = Object.keys(mySettings.dates);\r\n\t\tvar otherDates = Object.keys(thatSettings.dates);\r\n\t\tmyDays.sort();\r\n\t\totherDates.sort();\r\n\r\n\t\tif (!this._arraysEqual(myDays, otherDates)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < myDays.length; i++){\r\n\t\t\tvar timestamp = myDays[i];\r\n\t\t\tvar myHours = mySettings.dates[timestamp];\r\n\t\t\tvar otherHours = mySettings.dates[timestamp];\r\n\r\n\t\t\t// day settings not equal\r\n\t\t\tif(myHours !== otherHours &&\r\n\t\t\t\t// but still can be two arrays with the equivalent hour settings\r\n\t\t\t\t!(Array.isArray(myHours) && Array.isArray(otherHours) && this._arraysEqual(myHours, otherHours))\r\n\t\t\t\t){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\tequals: function (calendar) {\r\n\t\tif(!(calendar instanceof CalendarWorkTimeStrategy)){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar mySettings = this.getConfig();\r\n\t\tvar thatSettings = calendar.getConfig();\r\n\r\n\t\tif(!this._compareSettings(mySettings, thatSettings)){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(mySettings.parsed.haveCustomWeeks && thatSettings.parsed.haveCustomWeeks){\r\n\t\t\tif(mySettings.parsed.customWeeksBoundaries.length != thatSettings.parsed.customWeeksBoundaries.length){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tfor(var i in mySettings.parsed.customWeeks){\r\n\t\t\t\tvar myWeek = mySettings.parsed.customWeeks[i];\r\n\t\t\t\tvar thatWeek = thatSettings.parsed.customWeeks[i];\r\n\t\t\t\tif(!thatWeek){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!this._compareSettings(myWeek, thatWeek)){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else if(mySettings.parse.haveCustomWeeks !== thatSettings.parsed.haveCustomWeeks){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\tgetWorkHours: function () {\r\n\t\tvar config = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn this._getWorkHours(config.date, false);\r\n\t},\r\n\t_getWorkHours: function (date, parsed) {\r\n\t\tvar calendar = this.getConfig();\r\n\t\tif(parsed !== false){\r\n\t\t\tcalendar = calendar.parsed;\r\n\t\t}\r\n\r\n\t\tif(!date){\r\n\t\t\treturn calendar.hours;\r\n\t\t}\r\n\r\n\t\tconst dayStartDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());\r\n\r\n\t\tvar dateValue = this._timestamp({date: dayStartDate});\r\n\r\n\t\tif(calendar.haveCustomWeeks){\r\n\t\t\tif(calendar.customWeeksRangeStart <= dateValue && calendar.customWeeksRangeEnd > dateValue){\r\n\t\t\t\tfor(var i = 0; i < calendar.customWeeksBoundaries.length; i++){\r\n\t\t\t\t\tif(calendar.customWeeksBoundaries[i].from <= dateValue && calendar.customWeeksBoundaries[i].to > dateValue){\r\n\t\t\t\t\t\tcalendar = calendar.customWeeks[calendar.customWeeksBoundaries[i].name];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar hours = true;\r\n\r\n\t\tif (calendar.dates[dateValue] !== undefined) {\r\n\t\t\thours = calendar.dates[dateValue];//custom day\r\n\t\t} else if (calendar.dates[date.getDay()] !== undefined) {\r\n\t\t\thours = calendar.dates[date.getDay()];//week day\r\n\t\t}\r\n\t\tif (hours === true) {\r\n\t\t\treturn calendar.hours;\r\n\t\t} else if (hours) {\r\n\t\t\treturn hours;\r\n\t\t}\r\n\t\treturn [];\r\n\t},\r\n\r\n\t_getIntervalTimestamp: function(from, to){\r\n\t\tvar res = {\r\n\t\t\tstart: 0,\r\n\t\t\tend: 0\r\n\t\t};\r\n\r\n\t\tres.start = from.getHours() * 60 * 60 + from.getMinutes() * 60 + from.getSeconds();\r\n\t\tvar endHours = to.getHours();\r\n\t\tif(!endHours && !to.getMinutes() && !to.getSeconds() && from.valueOf() < to.valueOf()){\r\n\t\t\tendHours = 24;\r\n\t\t}\r\n\t\tres.end = endHours * 60 * 60 + to.getMinutes() * 60 + to.getSeconds();\r\n\t\treturn res;\r\n\t},\r\n\r\n\t_parseHours: function(hours) {\r\n\t\tif(Array.isArray(hours)){\r\n\r\n\t\t\tvar timestampRanges = [];// worktime as seconds range\r\n\t\t\thours.forEach(function(hour){\r\n\t\t\t\tif(typeof hour === \"number\"){\r\n\t\t\t\t\ttimestampRanges.push(hour*60*60);\r\n\t\t\t\t}else if(typeof hour === \"string\") {\r\n\t\t\t\t\t// \"12-13\", or \"12:00-13:00\", or \"12:00:00-13:00:00\"\r\n\t\t\t\t\thour.split(\"-\").map(function(time){\r\n\t\t\t\t\t\treturn time.trim();\r\n\t\t\t\t\t}).forEach(function(part){\r\n\t\t\t\t\t\tvar parsed = part.split(\":\").map(function(time){\r\n\t\t\t\t\t\t\treturn time.trim();\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tvar value = parseInt(parsed[0]*60*60);\r\n\t\t\t\t\t\tif(parsed[1]){\r\n\t\t\t\t\t\t\tvalue += parseInt(parsed[1]*60);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(parsed[2]){\r\n\t\t\t\t\t\t\tvalue += parseInt(parsed[2]);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttimestampRanges.push(value);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tvar timerangeConfig = [];\r\n\t\t\tfor (var i = 0; i < timestampRanges.length; i += 2) {\r\n\t\t\t\tvar start = timestampRanges[i];\r\n\t\t\t\tvar end = timestampRanges[i + 1];\r\n\t\t\t\tvar duration = end - start;\r\n\r\n\t\t\t\ttimerangeConfig.push({\r\n\t\t\t\t\tstart: start,\r\n\t\t\t\t\tend: end,\r\n\t\t\t\t\tstartHour: Math.floor(start / (60*60)),\r\n\t\t\t\t\tstartMinute: Math.floor(start / (60)),\r\n\t\t\t\t\tendHour: Math.ceil(end / (60*60)),\r\n\t\t\t\t\tendMinute: Math.ceil(end / (60)),\r\n\t\t\t\t\tdurationSeconds: duration,\r\n\t\t\t\t\tdurationMinutes: duration/60,\r\n\t\t\t\t\tdurationHours: duration/(60 * 60)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn timerangeConfig;\r\n\t\t} else {\r\n\t\t\treturn hours;\r\n\t\t}\r\n\t},\r\n\r\n\tsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tvar hours = settings.hours !== undefined ? settings.hours : true;\r\n\t\t\tvar timestamp = this._timestamp(settings);\r\n\t\t\tvar calendarConfig = this.getConfig();\r\n\t\t\tif (timestamp !== null) {\r\n\t\t\t\tcalendarConfig.dates[timestamp] = hours;\r\n\t\t\t} else if(!settings.customWeeks) {\r\n\t\t\t\tcalendarConfig.hours = hours;\r\n\t\t\t}\r\n\r\n\t\t\tif(settings.customWeeks){\r\n\t\t\t\tif(!calendarConfig.customWeeks){\r\n\t\t\t\t\tcalendarConfig.customWeeks = {};\r\n\t\t\t\t}\r\n\t\t\t\t// GS-1867. allow setWorkTime to exclude dates in the customWeeks range\r\n\t\t\t\tif (typeof settings.customWeeks == \"string\"){\r\n\t\t\t\t\tif (timestamp !== null) {\r\n\t\t\t\t\t\tcalendarConfig.customWeeks[settings.customWeeks].dates[timestamp] = hours;\r\n\t\t\t\t\t} else if(!settings.customWeeks) {\r\n\t\t\t\t\t\tcalendarConfig.customWeeks[settings.customWeeks].hours = hours;\r\n\t\t\t\t\t}\t\t\r\n\t\t\t\t} else if (typeof settings.customWeeks === \"object\"\r\n\t\t\t\t&& settings.customWeeks.constructor === Object){\r\n\t\t\t\t\tfor(var i in settings.customWeeks){\r\n\t\t\t\t\t\tcalendarConfig.customWeeks[i] = settings.customWeeks[i];\r\n\t\t\t\t\t}\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._parseSettings();\r\n\t\t\tthis._clearCaches();\r\n\t\t}, this));\r\n\t},\r\n\r\n\tunsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tif (!settings) {\r\n\t\t\t\tthis.reset_calendar();\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar timestamp = this._timestamp(settings);\r\n\r\n\t\t\t\tif (timestamp !== null) {\r\n\t\t\t\t\tdelete this.getConfig().dates[timestamp];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Load updated settings and clear work units cache\r\n\t\t\tthis._parseSettings();\r\n\t\t\tthis._clearCaches();\r\n\t\t}, this));\r\n\t},\r\n\r\n\t_isWorkTime: function (date, unit) {\r\n\t\t// Check if this item has in the cache\r\n\r\n\t\tvar useCache = true;//unit === \"day\"; // use cache only for days. In case of hours/minutes cache size grows too large and the overhead exceeds the gains\r\n\t\tvar isWorkUnit = -1;\r\n\t\tvar dateKey = null;\r\n\r\n\t\tif(useCache){\r\n\t\t\t// use string keys\r\n\t\t\tdateKey = String(date.valueOf());\r\n\t\t\tisWorkUnit = this._workingUnitsCache.getItem(unit, dateKey, date);\r\n\t\t}\r\n\r\n\t\tif (isWorkUnit == -1) {\r\n\t\t\t// calculate if not cached\r\n\t\t\tisWorkUnit = this._checkIfWorkingUnit(date, unit);\r\n\t\t\tif(useCache){\r\n\t\t\t\tthis._workingUnitsCache.setItem(unit, dateKey, isWorkUnit, date);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn isWorkUnit;\r\n\t},\r\n\r\n\tisWorkTime: function () {\r\n\t\tvar config =  this.argumentsHelper.isWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._isWorkTime(config.date, config.unit);\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tif (!config.unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t//return this._calculateDuration(config.start_date, config.end_date, config.unit, config.step);\r\n\r\n\t\tvar self = this;\r\n\t\treturn this._dateDurationCache.getDuration(config.start_date, config.end_date, config.unit, config.step, function(){ \r\n\t\t\treturn self._calculateDuration(config.start_date, config.end_date, config.unit, config.step);\r\n\t\t});\r\n\t},\r\n\r\n\t_calculateDuration: function (from, to, unit, step) {\r\n\t\tvar res = 0;\r\n\r\n\t\tvar sign = 1;\r\n\t\tif(from.valueOf() > to.valueOf()){\r\n\t\t\tvar tmp = to;\r\n\t\t\tto = from;\r\n\t\t\tfrom = tmp;\r\n\t\t\tsign = -1;\r\n\t\t}\r\n\r\n\t\tif (unit == \"hour\" && step == 1) {\r\n\t\t\tres = this._getHoursBetween(from, to, unit, step);\r\n\t\t} else if(unit == \"minute\" && step == 1){\r\n\t\t\t// quick calculation for minutes with 1 minute step\r\n\t\t\tres = this._getMinutesBetween(from, to, unit, step);\r\n\t\t} else {\r\n\t\t\tres = this._getWorkUnitsBetweenGeneric(from, to, unit, step);\r\n\t\t}\r\n\r\n\t\t// getWorkUnits.. returns decimal durations\r\n\t\treturn sign * Math.round(res);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif (this._isWorkTime(start, unit))\r\n\t\t\t\treturn true;\r\n\t\t\tstart = this._nextDate(start, unit, step);\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config =  this.argumentsHelper.calculateEndDateArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tif (!unit)\r\n\t\t\treturn false;\r\n\r\n\t\tvar mult = (config.duration >= 0) ? 1 : -1;\r\n\t\tduration = Math.abs(duration * 1);\r\n\t//\tvar endDate = this._calculateEndDate(from, duration, unit, step * mult);\r\n\t//\treturn endDate;\r\n\t\tvar self = this;\r\n\t\treturn this._dateDurationCache.getEndDate(from, duration, unit, step * mult, function(){ \r\n\t\t\treturn self._calculateEndDate(from, duration, unit, step * mult);\r\n\t\t} );\r\n\t},\r\n\r\n\t_calculateEndDate: function (from, duration, unit, step) {\r\n\t\tif (!unit)\r\n\t\t\treturn false;\r\n\r\n\t\tif (step == 1 && unit == \"minute\") {\r\n\t\t\treturn this._calculateMinuteEndDate(from, duration, step);\r\n\t\t} else if(step == -1 && unit == \"minute\") {\r\n\t\t\treturn this._subtractMinuteDate(from, duration, step);\r\n\t\t} else if (step == 1 && unit == \"hour\") {\r\n\t\t\treturn this._calculateHourEndDate(from, duration, step);\r\n\t\t} else {\r\n\t\t\tvar interval = this._addInterval(from, duration, unit, step, null);\r\n\t\t\treturn interval.end;\r\n\t\t}\r\n\t},\r\n\r\n\t_addInterval: function (start, duration, unit, step, stopAction) {\r\n\t\tvar added = 0;\r\n\t\tvar current = start;\r\n\t\tvar dstShift = false;\r\n\r\n\t\twhile (added < duration && !(stopAction && stopAction(current))) {\r\n\t\t\tvar next = this._nextDate(current, unit, step);\r\n\r\n\t\t\t// GS-1501. Correct hours after DST change\r\n\t\t\tif (unit == \"day\"){\r\n\t\t\t\tdstShift = dstShift || !current.getHours() && next.getHours();\r\n\r\n\t\t\t\tif (dstShift){\r\n\t\t\t\t\tnext.setHours(0);\r\n\t\t\t\t\tif (next.getHours()){\r\n\t\t\t\t\t// the day when the timezone is changed, try to correct hours next time\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdstShift = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar dateValue = new Date(next.valueOf() + 1);\r\n\t\t\tif (step > 0) {\r\n\t\t\t\tdateValue = new Date(next.valueOf() - 1);\r\n\t\t\t}\r\n\t\t\tvar workTimeCheck = this._isWorkTime(dateValue, unit);\r\n\r\n\t\t\tif (workTimeCheck && !dstShift) {\r\n\t\t\t\tadded++;\r\n\t\t\t}\r\n\t\t\tcurrent = next;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tend: current,\r\n\t\t\tstart: start,\r\n\t\t\tadded: added\r\n\t\t};\r\n\t},\r\n\r\n\t_addHoursUntilDayEnd: function(from, duration) {\r\n\t\tvar dayEnd = this.$gantt.date.add(this.$gantt.date.day_start(new Date(from)), 1, \"day\");\r\n\t\tvar added = 0;\r\n\t\tvar left = duration;\r\n\r\n\t\tvar range = this._getIntervalTimestamp(from, dayEnd);\r\n\t\tvar worktimes = this._getWorkHours(from);\r\n\t\tfor(var i = 0; i < worktimes.length && added < duration; i++){\r\n\t\t\tvar interval = worktimes[i];\r\n\t\t\tif(range.end >= interval.start && range.start <= interval.end){\r\n\t\t\t\tvar minuteFrom = Math.max(interval.start, range.start);\r\n\t\t\t\tvar minuteTo = Math.min(interval.end, range.end);\r\n\t\t\t\tvar rangeHours = (minuteTo - minuteFrom) / (60 * 60);\r\n\t\t\t\tif(rangeHours > left){\r\n\t\t\t\t\trangeHours = left;\r\n\t\t\t\t\tminuteTo = minuteFrom + (left * 60 * 60);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar addHours = Math.round((minuteTo - minuteFrom) / (60 * 60));\r\n\t\t\t\tadded += addHours;\r\n\t\t\t\tleft -= addHours;\r\n\t\t\t\trange.start = minuteTo;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar intervalEnd = dayEnd;\r\n\t\tif(added === duration){\r\n\t\t\tintervalEnd = new Date(from.getFullYear(), from.getMonth(), from.getDate(), 0, 0, range.start);\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tadded: added,\r\n\t\t\tend: intervalEnd\r\n\t\t};\r\n\t},\r\n\r\n\t_calculateHourEndDate: function (from, duration,  step) {\r\n\t\tvar start = new Date(from),\r\n\t\tadded = 0;\r\n\t\tstep = step || 1;\r\n\t\tduration = Math.abs(duration * 1);\r\n\r\n\t\tvar interval = this._addHoursUntilDayEnd(start, duration);\r\n\t\tadded = interval.added;\r\n\t\tstart = interval.end;\r\n\r\n\t\tvar durationLeft = duration - added;\r\n\r\n\t\tif (durationLeft) {\r\n\t\t\tvar current = start;\r\n\t\t\twhile (added < duration) {\r\n\t\t\t\tvar next = this._nextDate(current, \"day\", step);\r\n\t\t\t\t// reset to day start in case DST switch happens in the process\r\n\t\t\t\tnext.setHours(0);\r\n\t\t\t\tnext.setMinutes(0);\r\n\t\t\t\tnext.setSeconds(0);\r\n\r\n\t\t\t\tvar hoursPerDay = 0;\r\n\t\t\t\tif(step > 0){\r\n\t\t\t\t\thoursPerDay = this.getHoursPerDay(new Date(next.valueOf() - 1));\r\n\t\t\t\t}else{\r\n\t\t\t\t\thoursPerDay = this.getHoursPerDay(new Date(next.valueOf() + 1));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (added + hoursPerDay >= duration) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tadded += hoursPerDay;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcurrent = next;\r\n\t\t\t}\r\n\t\t\tstart = current;\r\n\t\t}\r\n\r\n\t\tif (added < duration) {\r\n\t\t\tvar durationLeft = duration - added;\r\n\t\t\tinterval = this._addHoursUntilDayEnd(start, durationLeft);\r\n\t\t\tstart = interval.end;\r\n\t\t}\r\n\r\n\t\treturn start;\r\n\t},\r\n\r\n\t_addMinutesUntilHourEnd: function(from, duration){\r\n\t\tif(from.getMinutes() === 0) {\r\n\t\t\t// already at hour end\r\n\t\t\treturn {\r\n\t\t\t\tadded: 0,\r\n\t\t\t\tend: new Date(from)\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar hourEnd = this.$gantt.date.add(this.$gantt.date.hour_start(new Date(from)), 1, \"hour\");\r\n\t\tvar added = 0;\r\n\t\tvar left = duration;\r\n\r\n\t\tvar range = this._getIntervalTimestamp(from, hourEnd);\r\n\t\tvar worktimes = this._getWorkHours(from);\r\n\t\tfor(var i = 0; i < worktimes.length && added < duration; i++){\r\n\t\t\tvar interval = worktimes[i];\r\n\t\t\tif(range.end >= interval.start && range.start <= interval.end){\r\n\t\t\t\tvar minuteFrom = Math.max(interval.start, range.start);\r\n\t\t\t\tvar minuteTo = Math.min(interval.end, range.end);\r\n\t\t\t\tvar rangeMinutes = (minuteTo - minuteFrom) / 60;\r\n\t\t\t\tif(rangeMinutes > left){\r\n\t\t\t\t\trangeMinutes = left;\r\n\t\t\t\t\tminuteTo = minuteFrom + (left * 60);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// TODO: verify testcase https://dhtmlxsupport.teamwork.com/desk/tickets/9625700/messages\r\n\t\t\t\t/*if (rangeMinutes === 0) {\r\n\t\t\t\t\trangeMinutes = left;\r\n\t\t\t\t\tminuteTo = minuteFrom + (left * 60);\r\n\t\t\t\t}*/\r\n\r\n\t\t\t\tvar addMinutes = Math.round((minuteTo - minuteFrom) / 60);\r\n\t\t\t\tleft -= addMinutes;\r\n\t\t\t\tadded += addMinutes;\r\n\t\t\t\trange.start = minuteTo;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar intervalEnd = hourEnd;\r\n\t\tif(added === duration){\r\n\t\t\tintervalEnd = new Date(from.getFullYear(), from.getMonth(), from.getDate(), 0, 0, range.start);\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tadded: added,\r\n\t\t\tend: intervalEnd\r\n\t\t};\r\n\t},\r\n\r\n\t_subtractMinutesUntilHourStart: function(from, duration){\r\n\t\tvar hourStart = this.$gantt.date.hour_start(new Date(from));\r\n\t\tvar added = 0;\r\n\t\tvar left = duration;\r\n\r\n\t\tvar hourStartTimestamp = hourStart.getHours() * 60 * 60 + hourStart.getMinutes() * 60 + hourStart.getSeconds();\r\n\t\tvar initialDateTimestamp = from.getHours() * 60 * 60 + from.getMinutes() * 60 + from.getSeconds();\r\n\r\n\t\tvar worktimes = this._getWorkHours(from);\r\n\t\tfor(var i = worktimes.length - 1; i >= 0 && added < duration; i--){\r\n\t\t\tvar interval = worktimes[i];\r\n\t\t\tif(initialDateTimestamp > interval.start && hourStartTimestamp <= interval.end){\r\n\t\t\t\tvar minuteFrom = Math.min(initialDateTimestamp, interval.end);\r\n\t\t\t\tvar minuteTo = Math.max(hourStartTimestamp, interval.start);\r\n\r\n\t\t\t//\tvar minuteFrom = Math.max(interval.start, currentHour.start);\r\n\t\t\t//\tvar minuteTo = Math.min(interval.end, currentHour.end);\r\n\t\t\t\tvar rangeMinutes = (minuteFrom - minuteTo) / 60;\r\n\t\t\t\tif(rangeMinutes > left){\r\n\t\t\t\t\trangeMinutes = left;\r\n\t\t\t\t\tminuteTo = minuteFrom - (left * 60);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// TODO: verify testcase https://dhtmlxsupport.teamwork.com/desk/tickets/9625700/messages\r\n\t\t\t\t/*if (rangeMinutes === 0) {\r\n\t\t\t\t\trangeMinutes = left;\r\n\t\t\t\t\tminuteTo = minuteFrom - (left * 60);\r\n\t\t\t\t}*/\r\n\r\n\t\t\t\tvar addMinutes = Math.abs(Math.round((minuteFrom - minuteTo) / 60));\r\n\t\t\t\tleft -= addMinutes;\r\n\t\t\t\tadded += addMinutes;\r\n\t\t\t\tinitialDateTimestamp = minuteTo;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar intervalEnd = hourStart;\r\n\t\tif(added === duration){\r\n\t\t\tintervalEnd = new Date(from.getFullYear(), from.getMonth(), from.getDate(), 0, 0, initialDateTimestamp);\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tadded: added,\r\n\t\t\tend: intervalEnd\r\n\t\t};\r\n\t},\r\n\r\n\t_subtractMinuteDate: function (from, duration, step) {\r\n\t\t// var start = new Date(from),\r\n\t\t// GS-2683. We should start calculating minutes from the working time\r\n\t\tvar start = this.getClosestWorkTime({ date: from, dir: \"past\", unit: \"minute\" }),\r\n\t\t\tadded = 0;\r\n\t\tstep = step || -1;\r\n\t\tduration = Math.abs(duration * 1);\r\n\t\tduration = Math.round(duration);\r\n\r\n\t\tconst minutePrecision = this._isMinutePrecision(start);\r\n\r\n\t\tlet addedInterval = this._subtractMinutesUntilHourStart(start, duration);\r\n\t\tadded += addedInterval.added;\r\n\r\n\t\tstart = addedInterval.end;\r\n\r\n\t\tvar calculatedDay = 0;\r\n\t\tvar daySchedule = [];\r\n\t\tvar minutesInDay = 0;\r\n\r\n\t\twhile (added < duration) {\r\n\t\t\tvar dayStart = this.$gantt.date.day_start(new Date(start));\r\n\r\n\t\t\tvar iterateFromDayEnd = false;\r\n\t\t\tif(start.valueOf() === dayStart.valueOf()){\r\n\t\t\t\tdayStart = this.$gantt.date.add(dayStart, -1, \"day\");\r\n\t\t\t\titerateFromDayEnd = true;\r\n\t\t\t}\r\n\t\t\t//var dayStartTimestamp = this.$gantt.date.day_start(new Date(start)).valueOf();\r\n\t\t\tvar dayEnd = new Date(dayStart.getFullYear(), dayStart.getMonth(), dayStart.getDate(), 23, 59,59,999).valueOf();\r\n\r\n\t\t\tif(dayEnd !== calculatedDay){\r\n\t\t\t\tdaySchedule = this._getWorkHours(dayStart);\r\n\t\t\t\tminutesInDay = this._getMinutesPerDay(dayStart);\r\n\t\t\t\tcalculatedDay = dayEnd;\r\n\t\t\t}\r\n\r\n\t\t\tvar left = duration - added;\r\n\t\t\tvar timestamp = this._getTimeOfDayStamp(start, iterateFromDayEnd);\r\n\r\n\t\t\tif(!daySchedule.length || !minutesInDay){\r\n\t\t\t\tstart = this.$gantt.date.add(start, -1, \"day\");\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif(daySchedule[daySchedule.length - 1].end <= timestamp){\r\n\t\t\t\tif(left > minutesInDay){\r\n\t\t\t\t\tadded += minutesInDay;\r\n\t\t\t\t\tstart = this.$gantt.date.add(start, -1, \"day\");\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar isWorkHour = false;\r\n\t\t\tvar workInterval = null;\r\n\t\t\tvar prevInterval = null;\r\n\t\t\tfor(var i = daySchedule.length - 1; i >= 0; i--){\r\n\t\t\t\tif(daySchedule[i].start < timestamp - 1 && daySchedule[i].end >= timestamp - 1){\r\n\t\t\t\t\tisWorkHour = true;\r\n\t\t\t\t\tworkInterval = daySchedule[i];\r\n\t\t\t\t\tprevInterval = daySchedule[i-1];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(isWorkHour){\r\n\r\n\t\t\t\t// we're at the end of worktime interval and subtracting more than the duration of the interval\r\n\t\t\t\t// -> subtract the duration of the interval and move to the start of the interval (we're moving from end)\r\n\t\t\t\tif(timestamp === workInterval.end && left >= workInterval.durationMinutes){\r\n\t\t\t\t\tadded += workInterval.durationMinutes;\r\n\t\t\t\t\tstart = this.$gantt.date.add(start, -workInterval.durationMinutes, \"minute\");\r\n\t\t\t\t} // worktime is set in whole hours (no intervals like 9:15-10:00)\r\n\t\t\t\t// the amount we need to subtract lies inside the interval\r\n\t\t\t\telse if(!minutePrecision && left <= (timestamp/60 - workInterval.startMinute)){\r\n\t\t\t\t\tadded += left;\r\n\t\t\t\t\tstart = this.$gantt.date.add(start, -left, \"minute\");\r\n\t\t\t\t}else if (minutePrecision){\r\n\t\t\t\t\t// GS-2129. If the working time is set in minutes, we accumulate the working time in minutes from right to left\r\n\t\t\t\t\t\r\n\t\t\t\t\t// duration we need to subtract lies completely inside the work interval\r\n\t\t\t\t\tif(left <= (timestamp/60 - workInterval.startMinute)){\r\n\t\t\t\t\t\tadded += left;\r\n\t\t\t\t\t\tstart = this.$gantt.date.add(start, -left, \"minute\");\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\t// we need to go trough multiple work intervals to subtract needed time\r\n\t\t\t\t\t\tadded += (timestamp/60 - workInterval.startMinute);\r\n\t\t\t\t\t\tif(prevInterval){\r\n\t\t\t\t\t\t\tstart = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 0, 0, prevInterval.end);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tstart = this.$gantt.date.day_start(start);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar minutesInHour = this._getMinutesPerHour(start);\r\n\t\t\t\t\tif(minutesInHour <= left){\r\n\t\t\t\t\t\tadded += minutesInHour;\r\n\t\t\t\t\t\tstart = this._nextDate(start, \"hour\", step);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\taddedInterval = this._subtractMinutesUntilHourStart(start, left);\r\n\t\t\t\t\t\tadded += addedInterval.added;\r\n\t\t\t\t\t\tstart = addedInterval.end;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(start.getHours() === 0 && start.getMinutes() === 0 && start.getSeconds() === 0){\r\n\t\t\t\t\tvar prev = this._getClosestWorkTimePast(start, \"hour\");\r\n\t\t\t\t\tif(prev.valueOf() === start.valueOf()){\r\n\t\t\t\t\t\tvar prev = this.$gantt.date.add(start, -1, \"day\");\r\n\t\t\t\t\t\tvar times = this._getWorkHours(prev);\r\n\t\t\t\t\t\tif(times.length){\r\n\t\t\t\t\t\t\tvar lastInterval = times[times.length - 1];\r\n\t\t\t\t\t\t\tprev.setSeconds(lastInterval.durationSeconds);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstart = prev;\r\n\r\n\t\t\t\t} else{\r\n\t\t\t\t\tstart = this._getClosestWorkTimePast(new Date(start - 1), \"hour\");\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (added < duration) {\r\n\t\t\tvar durationLeft = duration - added;\r\n\t\t\taddedInterval = this._subtractMinutesUntilHourStart(start, durationLeft);\r\n\t\t\tadded += addedInterval.added;\r\n\t\t\tstart = addedInterval.end;\r\n\t\t}\r\n\r\n\t\treturn start;\r\n\t},\r\n\t_calculateMinuteEndDate: function (from, duration, step) {\r\n\t\tvar start = new Date(from),\r\n\t\t\tadded = 0;\r\n\t\tstep = step || 1;\r\n\t\tduration = Math.abs(duration * 1);\r\n\t\tduration = Math.round(duration);\r\n\r\n\t\tvar addedInterval = this._addMinutesUntilHourEnd(start, duration);\r\n\t\tadded += addedInterval.added;\r\n\r\n\t\tstart = addedInterval.end;\r\n\r\n\t\tvar calculatedDay = 0;\r\n\t\tvar daySchedule = [];\r\n\t\tvar minutesInDay = 0;\r\n\r\n\t\tvar minutePrecision = this._isMinutePrecision(start);\r\n\r\n\t\twhile (added < duration) {\r\n\t\t\tvar dayStart = this.$gantt.date.day_start(new Date(start)).valueOf();\r\n\t\t\tif(dayStart !== calculatedDay){\r\n\t\t\t\tdaySchedule = this._getWorkHours(start);\r\n\t\t\t\tminutesInDay = this._getMinutesPerDay(start);\r\n\t\t\t\tcalculatedDay = dayStart;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar left = duration - added;\r\n\t\t\tvar timestamp = this._getTimeOfDayStamp(start);\r\n\r\n\t\t\tif(!daySchedule.length || !minutesInDay){\r\n\t\t\t\tstart = this.$gantt.date.add(this.$gantt.date.day_start(start), 1, \"day\");\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif(daySchedule[0].start >= timestamp){\r\n\t\t\t\tif(left >= minutesInDay){\r\n\t\t\t\t\tadded += minutesInDay;\r\n\t\t\t\t\tif (left == minutesInDay) {\r\n\t\t\t\t\t\tstart = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 0, 0, daySchedule[daySchedule.length - 1].end);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tstart = this.$gantt.date.add(start, 1, \"day\");\r\n\t\t\t\t\t\tstart = this.$gantt.date.day_start(start);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar isWorkHour = false;\r\n\t\t\tvar workInterval = null;\r\n\t\t\tfor(var i = 0; i < daySchedule.length; i++){\r\n\t\t\t\tif(daySchedule[i].start <= timestamp && daySchedule[i].end > timestamp){\r\n\t\t\t\t\tisWorkHour = true;\r\n\t\t\t\t\tworkInterval = daySchedule[i];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(isWorkHour){\r\n\r\n\t\t\t\tif(timestamp === workInterval.start && left >= workInterval.durationMinutes){\r\n\t\t\t\t\tadded += workInterval.durationMinutes;\r\n\t\t\t\t\tstart = this.$gantt.date.add(start, workInterval.durationMinutes, \"minute\");\r\n\t\t\t\t}else if(left <= (workInterval.endMinute - timestamp/60)){\r\n\t\t\t\t\tadded += left;\r\n\t\t\t\t\tstart = this.$gantt.date.add(start, left, \"minute\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar minutesInHour = this._getMinutesPerHour(start);\r\n\t\t\t\t\tif(minutesInHour <= left){\r\n\t\t\t\t\t\tadded += minutesInHour;\r\n\t\t\t\t\t\t// when the working time settings are set in minutes move to the next minutes\r\n\t\t\t\t\t\tif (minutePrecision) {\r\n\t\t\t\t\t\t\tstart = this.$gantt.date.add(start, minutesInHour, \"minute\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tstart = this._nextDate(start, \"hour\", step);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\taddedInterval = this._addMinutesUntilHourEnd(start, left);\r\n\t\t\t\t\t\tadded += addedInterval.added;\r\n\t\t\t\t\t\tstart = addedInterval.end;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tstart = this._getClosestWorkTimeFuture(start, \"hour\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (added < duration) {\r\n\t\t\tvar durationLeft = duration - added;\r\n\t\t\taddedInterval = this._addMinutesUntilHourEnd(start, durationLeft);\r\n\t\t\tadded += addedInterval.added;\r\n\t\t\tstart = addedInterval.end;\r\n\t\t}\r\n\r\n\t\treturn start;\r\n\t},\r\n\r\n\tgetClosestWorkTime: function () {\r\n\t\tvar settings =  this.argumentsHelper.getClosestWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._getClosestWorkTime(settings.date, settings.unit, settings.dir);\r\n\t},\r\n\r\n\t_getClosestWorkTime: function (inputDate, unit, direction) {\r\n\t\tvar result = new Date(inputDate);\r\n\r\n\t\tif (this._isWorkTime(result, unit)) {\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\tresult = this.$gantt.date[unit + '_start'](result);\r\n\r\n\t\tif (direction == 'any' || !direction) {\r\n\t\t\tvar closestFuture = this._getClosestWorkTimeFuture(result, unit);\r\n\t\t\tvar closestPast = this._getClosestWorkTimePast(result, unit);\r\n\t\t\tif (Math.abs(closestFuture - inputDate) <= Math.abs(inputDate - closestPast)) {\r\n\t\t\t\tresult = closestFuture;\r\n\t\t\t} else {\r\n\t\t\t\tresult = closestPast;\r\n\t\t\t}\r\n\t\t} else if (direction == \"past\") {\r\n\t\t\tresult = this._getClosestWorkTimePast(result, unit);\r\n\t\t} else {\r\n\t\t\tresult = this._getClosestWorkTimeFuture(result, unit);\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t_getClosestWorkTimeFuture: function (date, unit) {\r\n\t\treturn this._getClosestWorkTimeGeneric(date, unit, 1);\r\n\t},\r\n\r\n\t_getClosestWorkTimePast: function (date, unit) {\r\n\t\tvar result = this._getClosestWorkTimeGeneric(date, unit, -1);\r\n\t\t// should return the end of the closest work interval\r\n\t\treturn this.$gantt.date.add(result, 1, unit);\r\n\t},\r\n\r\n\t_findClosestTimeInDay: function(date, direction, worktimes) {\r\n\t\tvar start = new Date(date);\r\n\t\tvar resultDate = null;\r\n\t\tvar fromDayEnd = false;\r\n\t\tif(!this._getWorkHours(start).length){\r\n\t\t\tstart = this._getClosestWorkTime(start, \"day\", direction < 0 ? \"past\" : \"future\");\r\n\t\t\tif(direction < 0){\r\n\t\t\t\tstart = new Date(start.valueOf() - 1);\r\n\t\t\t\tfromDayEnd = true;\r\n\t\t\t}\r\n\t\t\tworktimes = this._getWorkHours(start);\r\n\t\t}\r\n\r\n\t\tvar value = this._getTimeOfDayStamp(start);\r\n\t\tif(fromDayEnd){\r\n\t\t\tvalue = this._getTimeOfDayStamp(new Date(start.valueOf() + 1), fromDayEnd);\r\n\t\t}\r\n\t\tif(direction > 0){\r\n\t\t\tfor(var i = 0; i < worktimes.length; i++){\r\n\t\t\t\tif(worktimes[i].start >= value){\r\n\t\t\t\t\tresultDate = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 0, 0, worktimes[i].start);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tfor(var i = worktimes.length - 1; i >= 0; i--){\r\n\t\t\t\tif(worktimes[i].end <= value){\r\n\t\t\t\t\tresultDate = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 0, 0, worktimes[i].end);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}else if(worktimes[i].end > value && worktimes[i].start <= value) {\r\n\t\t\t\t\tresultDate = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 0, 0, value);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn resultDate;\r\n\t},\r\n\t_getClosestWorkMinute: function(date, unit, direction) {\r\n\t\tvar start = new Date(date);\r\n\t\tvar worktimes = this._getWorkHours(start);\r\n\t\tvar resultDate = this._findClosestTimeInDay(start, direction, worktimes);\r\n\t\tif(!resultDate){\r\n\t\t\tif(direction > 0){\r\n\t\t\t\tstart = this.calculateEndDate(start, direction, unit);\r\n\t\t\t\tstart = this.$gantt.date.day_start(start);\r\n\t\t\t}else{\r\n\t\t\t\tstart = this.calculateEndDate(start, direction, \"day\");\r\n\t\t\t\tstart = this.$gantt.date.day_start(start);\r\n\t\t\t\tstart = this.$gantt.date.add(start, 1, \"day\");\r\n\t\t\t\tstart = new Date(start.valueOf() - 1);\r\n\t\t\t}\r\n\t\t\tworktimes = this._getWorkHours(start);\r\n\t\t\tresultDate = this._findClosestTimeInDay(start, direction, worktimes);\r\n\t\t}\r\n\t\tif(direction < 0){\r\n\t\t\t// getClosestWorkTimePast adds one time unit to the result date after this\r\n\t\t\tresultDate = this.$gantt.date.add(resultDate, -1, unit);\r\n\t\t}\r\n\t\treturn resultDate;\r\n\t},\r\n\r\n\t_getClosestWorkTimeGeneric: function (date, unit, increment) {\r\n\t\tif(unit === \"hour\" || unit === \"minute\"){\r\n\t\t\treturn this._getClosestWorkMinute(date, unit, increment);\r\n\t\t}\r\n\r\n\t\tvar unitOrder = this._getUnitOrder(unit),\r\n\t\t\tbiggerTimeUnit = this.units[unitOrder - 1];\r\n\r\n\t\tvar result = date;\r\n\r\n\t\t// be extra sure we won't fall into infinite loop, 3k seems big enough\r\n\t\tvar maximumLoop = 3000,\r\n\t\t\tcount = 0;\r\n\r\n\t\twhile (!this._isWorkTime(result, unit)) {\r\n\t\t\tif (biggerTimeUnit && !this._isWorkTime(result, biggerTimeUnit)) {\r\n\t\t\t\t// if we look for closest work hour and detect a week-end - first find the closest work day,\r\n\t\t\t\t// and continue iterations after that\r\n\t\t\t\tif (increment > 0) {\r\n\t\t\t\t\tresult = this._getClosestWorkTimeFuture(result, biggerTimeUnit);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = this._getClosestWorkTimePast(result, biggerTimeUnit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this._isWorkTime(result, unit)) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcount++;\r\n\t\t\tif (count > maximumLoop) {\r\n\t\t\t\tthis.$gantt.assert(false, \"Invalid working time check\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar tzOffset = result.getTimezoneOffset();\r\n\t\t\tresult = this.$gantt.date.add(result, increment, unit);\r\n\r\n\t\t\tresult = this.$gantt._correct_dst_change(result, tzOffset, increment, unit);\r\n\t\t\tif (this.$gantt.date[unit + '_start']) {\r\n\t\t\t\tresult = this.$gantt.date[unit + '_start'](result);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t/**\r\n\t * Check whether this calendar has working time. Calendar has working time only if there are regular working days of week\r\n\t *\r\n\t */\r\n\thasWorkTime: function () {\r\n\t\tvar worktime = this.getConfig();\r\n\t\tvar dates = worktime.dates;\r\n\r\n\t\tvar daysOfWeek = [0, 1, 2, 3, 4, 5, 6];\r\n\t\tvar exceptions = [];\r\n\t\tfor(var i in worktime.dates){\r\n\t\t\tif(Number(i) > 6){\r\n\t\t\t\texceptions.push(Number(i));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar hasRegularHours = this._checkWorkHours(worktime.hours);\r\n\r\n\t\tvar result = false;\r\n\t\tdaysOfWeek.forEach((function(day){\r\n\t\t\tif(result){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar dayConfig = dates[day];\r\n\t\t\tif(dayConfig === true){\r\n\t\t\t\t// workday uses global hours\r\n\t\t\t\tresult = hasRegularHours;\r\n\t\t\t}else if(Array.isArray(dayConfig)){\r\n\t\t\t\t// workday uses custom hours\r\n\t\t\t\tresult = this._checkWorkHours(dayConfig);\r\n\t\t\t}\r\n\t\t}).bind(this));\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t_checkWorkHours: function(hoursArray) {\r\n\t\tif (hoursArray.length === 0) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar result = false;\r\n\t\tfor (var i = 0; i < hoursArray.length; i += 2) {\r\n\t\t\tif (hoursArray[i] !== hoursArray[i + 1]) {\r\n\t\t\t\tresult = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t_isMinutePrecision: function (date) {\r\n\t\tlet minutePrecision = false;\r\n\t\tthis._getWorkHours(date).forEach(function(interval){\r\n\t\t\tif (interval.startMinute % 60 || interval.endMinute % 60){\r\n\t\t\t\tminutePrecision = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn minutePrecision;\r\n\t}\r\n};\r\n\r\nexport default CalendarWorkTimeStrategy;","import { IWorkUnitCache } from \"./workunit_cache_interface\";\r\nimport { WorkUnitsMapCache } from \"./workunit_map_cache\";\r\nimport { WorkUnitsObjectCache } from \"./workunit_object_cache\";\r\nexport { LargerUnitsCache } from \"./larger_units_helper\";\r\n\r\nexport function createCacheObject(): IWorkUnitCache {\r\n\r\n\t// worktime hash is on the hot path,\r\n\t// Map seems to work faster than plain array, use it whenever possible\r\n\tif (typeof Map !== \"undefined\") {\r\n\t\treturn new WorkUnitsMapCache();\r\n\t} else {\r\n\t\treturn new WorkUnitsObjectCache();\r\n\t}\r\n}\r\n","export default {\r\n\tisLegacyResourceCalendarFormat: function(resourceCalendarsProperty){\r\n\t\t// modern format:\r\n\t\t//gantt.config.resource_calendars = {\r\n\t\t//\tresourceId: calendarId,\r\n\t\t//\tresourceId: calendarId,\r\n\t\t//\tresourceId: calendarId\r\n\t\t//\t};\r\n\t\t\r\n\t\t// legacy format:\r\n\t\t// gantt.config.resource_calendars = {\r\n\t\t//\t\"resourceProperty\": {\r\n\t\t//\t\tresourceId: calendarId,\r\n\t\t//\t\tresourceId: calendarId,\r\n\t\t//\t\tresourceId: calendarId\r\n\t\t//\t\t}\r\n\t\t//\t};\r\n\r\n\t\tif(!resourceCalendarsProperty){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tfor(var i in resourceCalendarsProperty){\r\n\t\t\tif(resourceCalendarsProperty[i] && typeof resourceCalendarsProperty[i] === \"object\"){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\tgetResourceProperty: function(config){\r\n\t\tvar resourceCalendarsConfig = config.resource_calendars;\r\n\t\tvar propertyName = config.resource_property;\r\n\t\tif(this.isLegacyResourceCalendarFormat(resourceCalendarsConfig)){\r\n\t\t\tfor(var i in config){\r\n\t\t\t\tpropertyName = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn propertyName;\r\n\t},\r\n\tgetCalendarIdFromLegacyConfig: function(task, config){\r\n\t\tif (config) {\r\n\t\t\tfor (var field in config) {\r\n\t\t\t\tvar resource = config[field];\r\n\t\t\t\tif (task[field]) {\r\n\t\t\t\t\tvar calendarId = resource[task[field]];\r\n\t\t\t\t\tif (calendarId) {\r\n\t\t\t\t\t\treturn calendarId;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n};","import * as utils from \"../../utils/utils\";\r\nimport createArgumentsHelper from \"./calendar_arguments_helper\";\r\nimport CalendarMergeHelper from \"./strategy/work_calendar_merger\";\r\nimport CalendarWorkTimeStrategy from \"./strategy/calendar_strategy\";\r\nimport legacyResourceCalendarConfig from \"./legacy_resource_config\";\r\nimport dynamicResourceCalendarsFactory from \"./dynamic_resource_calendars\";\r\n\r\nconst dynamicResourceCalendars = dynamicResourceCalendarsFactory();\r\n\r\nfunction CalendarManager (gantt){\r\n\tthis.$gantt = gantt;\r\n\tthis._calendars = {};\r\n\tthis._legacyConfig = undefined;\r\n\tthis.$gantt.attachEvent(\"onGanttReady\", function(){\r\n\t\tif(this.$gantt.config.resource_calendars){\r\n\t\t\tthis._isLegacyConfig = legacyResourceCalendarConfig.isLegacyResourceCalendarFormat(this.$gantt.config.resource_calendars);\r\n\t\t}\r\n\t}.bind(this));\r\n\r\n\tthis.$gantt.attachEvent(\"onBeforeGanttReady\", function(){\r\n\t\tthis.createDefaultCalendars();\r\n\t}.bind(this));\r\n\tthis.$gantt.attachEvent(\"onBeforeGanttRender\", function(){\r\n\t\tthis.createDefaultCalendars();\r\n\t}.bind(this));\r\n}\r\n\r\nCalendarManager.prototype = {\r\n\t_calendars: {},\r\n\t_convertWorkTimeSettings: function (settings) {\r\n\t\tconst days = settings.days;\r\n\t\t//GS-2864: opportunity to specify specific dates\r\n\t\tif(typeof days === \"object\" && !Array.isArray(days) && days !== null){\r\n\t\t\tconst datesConfig = {};\r\n\t\t\tif(days?.weekdays){\r\n\t\t\t\tfor(let i = 0; i < 7; i++) {\r\n\t\t\t\t\tdatesConfig[i] = days.weekdays[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (days?.dates) {\r\n\t\t\t\tObject.entries(days.dates).forEach(([date, setting]) => {\r\n\t\t\t\t\tdatesConfig[(new Date(date)).valueOf()] = setting;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tObject.entries(datesConfig).forEach(([key, setting]) => {\r\n\t\t\t\tif (!(setting instanceof Array)) {\r\n\t\t\t\t\tdatesConfig[key] = !!setting;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tsettings = {\r\n\t\t\t\t...settings,\r\n\t\t\t\tdates: datesConfig\r\n\t\t\t};\r\n\r\n\t\t} else if (days && !settings.dates) {\r\n\t\t\tsettings.dates = settings.dates || {};\r\n\t\t\tfor (let i = 0; i < days.length; i++) {\r\n\t\t\t\tsettings.dates[i] = days[i];\r\n\t\t\t\tif (!(days[i] instanceof Array)) {\r\n\t\t\t\t\tsettings.dates[i] = !!days[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tdelete settings.days;\r\n\t\treturn settings;\r\n\t},\r\n\tmergeCalendars: function(){\r\n\t\tvar calendars = [];\r\n\t\tvar args = arguments;\r\n\t\tif(Array.isArray(args[0])){\r\n\t\t\tcalendars = args[0].slice();\r\n\t\t}else{\r\n\t\t\tfor(var i = 0; i < arguments.length; i++){\r\n\t\t\t\tcalendars.push(arguments[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar mergeHelper = new CalendarMergeHelper();\r\n\r\n\t\tvar result;\r\n\t\tcalendars.forEach(function(calendar){\r\n\t\t\tif(!result){\r\n\t\t\t\tresult = calendar;\r\n\t\t\t} else{\r\n\t\t\t\tresult = this._createCalendarFromConfig(mergeHelper.merge(result, calendar));\r\n\t\t\t}\r\n\r\n\t\t}.bind(this));\r\n\t\treturn this.createCalendar(result);\r\n\t},\r\n\r\n\t_createCalendarFromConfig: function(config){\r\n\t\tvar apiCore = new CalendarWorkTimeStrategy(this.$gantt, createArgumentsHelper(this.$gantt));\r\n\t\tapiCore.id = String(utils.uid());\r\n\r\n\t\tvar preparedConfig = this._convertWorkTimeSettings(config);\r\n\t\tif(preparedConfig.customWeeks){\r\n\t\t\tfor(var i in preparedConfig.customWeeks){\r\n\t\t\t\tpreparedConfig.customWeeks[i] = this._convertWorkTimeSettings(preparedConfig.customWeeks[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tapiCore._setConfig(preparedConfig);\r\n\r\n\t\treturn apiCore;\r\n\t},\r\n\r\n\tcreateCalendar: function (parentCalendar) {\r\n\t\tvar settings;\r\n\r\n\t\tif (!parentCalendar) {\r\n\t\t\tparentCalendar = {};\r\n\t\t}\r\n\r\n\t\tif (parentCalendar.getConfig){\r\n\t\t\tsettings = utils.copy(parentCalendar.getConfig());\r\n\t\t} else if (parentCalendar.worktime) {\r\n\t\t\tsettings = utils.copy(parentCalendar.worktime);\r\n\t\t} else {\r\n\t\t\tsettings = utils.copy(parentCalendar);\r\n\t\t}\r\n\r\n\t\tvar defaults = utils.copy(this.defaults.fulltime.worktime);\r\n\t\tutils.mixin(settings, defaults);\r\n\r\n\t\treturn this._createCalendarFromConfig(settings);\r\n\t},\r\n\r\n\tgetCalendar: function (id) {\r\n\t\tid = id || \"global\";\r\n\t\tvar calendar = this._calendars[id];\r\n\t\tif(!calendar){\r\n\t\t\tthis.createDefaultCalendars();\r\n\t\t\tcalendar = this._calendars[id];\r\n\t\t}\r\n\r\n\t\treturn calendar;\r\n\t},\r\n\r\n\tgetCalendars: function () {\r\n\t\tvar res = [];\r\n\t\tfor (var i in this._calendars) {\r\n\t\t\tres.push(this.getCalendar(i));\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\t_getOwnCalendar: function(task){\r\n\t\tvar config = this.$gantt.config;\r\n\t\tif (task[config.calendar_property]) {\r\n\t\t\treturn this.getCalendar(task[config.calendar_property]);\r\n\t\t}\r\n\r\n\t\tif (config.resource_calendars) {\r\n\t\t\tvar calendar;\r\n\t\t\tvar calendarId;\r\n\t\t\tvar resourceProperty;\r\n\t\t\tif(this._legacyConfig === false){\r\n\t\t\t\tresourceProperty = config.resource_property;\r\n\t\t\t}else{\r\n\t\t\t\tresourceProperty = legacyResourceCalendarConfig.getResourceProperty(config);\r\n\t\t\t}\r\n\t\t\t// GS-2821. If no resource is assigned to a task,\r\n\t\t\t// there is no need to check the resource calendar\r\n\t\t\tif(Array.isArray(task[resourceProperty]) && task[resourceProperty].length){\r\n\t\t\t\t// if multiple resources are attached to the task - merge their calendars\r\n\t\t\t\tif(config.dynamic_resource_calendars){\r\n\t\t\t\t\tcalendarId = dynamicResourceCalendars.getCalendarIdFromMultipleResources(task[resourceProperty], this);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcalendar = this.getResourceCalendar(task[resourceProperty]);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(this._legacyConfig === undefined){\r\n\t\t\t\t\tthis._legacyConfig = legacyResourceCalendarConfig.isLegacyResourceCalendarFormat(config.resource_calendars);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this._legacyConfig){\r\n\t\t\t\t\tvar calendarId = legacyResourceCalendarConfig.getCalendarIdFromLegacyConfig(task, config.resource_calendars);\r\n\t\t\t\t}else if(resourceProperty && task[resourceProperty] && config.resource_calendars[task[resourceProperty]]){\r\n\t\t\t\t\tvar calendar = this.getResourceCalendar(task[resourceProperty]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(calendarId){\r\n\t\t\t\tcalendar = this.getCalendar(calendarId);\r\n\t\t\t}\r\n\r\n\t\t\tif(calendar){\r\n\t\t\t\treturn calendar;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns calendar assigned to the specified resource.\r\n\t * Returns the global calendar if no custom calendar is associated with the resource.\r\n\t * @param {(string|number|Object)} resource - resource object or resource id\r\n\t * @returns {object} Calendar object\r\n\t */\r\n\tgetResourceCalendar: function(resource) {\r\n\t\tif (resource === null || resource === undefined) {\r\n\t\t\treturn this.getCalendar();\r\n\t\t}\r\n\r\n\t\tvar resourceId = null;\r\n\t\t// if task id is provided\r\n\t\tif((typeof resource === \"number\" || typeof resource === \"string\")){\r\n\t\t\tresourceId = resource;\r\n\t\t}else{\r\n\t\t\tresourceId = resource.id || resource.key;\r\n\t\t}\r\n\r\n\t\tvar config = this.$gantt.config;\r\n\t\tvar calendarsConfig = config.resource_calendars;\r\n\t\tvar calendarId = null;\r\n\r\n\t\t// GS-1714: if resource is specified through array\r\n\t\tif (Array.isArray(resource)){\r\n\t\t\tif (resource.length === 1){\r\n\t\t\t\tif (typeof resource[0] === 'object'){\r\n\t\t\t\t\tresourceId = resource[0].resource_id; // if resource: [\"resource_id: \"6\", value: \"4\", ...\"]\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresourceId = resource[0]; // if resource: [1]\r\n\t\t\t\t}\r\n\t\t\t} \r\n\t\t}\r\n\t\t\r\n\t\tif (calendarsConfig) {\r\n\t\t\tif(this._legacyConfig === undefined){\r\n\t\t\t\tthis._legacyConfig = legacyResourceCalendarConfig.isLegacyResourceCalendarFormat(config.resource_calendars);\r\n\t\t\t}\r\n\r\n\t\t\tif(this._legacyConfig){\r\n\t\t\t\tfor(var field in calendarsConfig){\r\n\t\t\t\t\tif(calendarsConfig[field][resourceId]){\r\n\t\t\t\t\t\tcalendarId = calendarsConfig[field][resourceId];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar calendarId = calendarsConfig[resourceId];\r\n\t\t\t}\r\n\r\n\t\t\tif(calendarId){\r\n\t\t\t\treturn this.getCalendar(calendarId);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn this.getCalendar();\r\n\t},\r\n\r\n\t/**\r\n\t * Returns the calendar assigned to a task.\r\n\t * - Returns a calendar assigned via task[gantt.config.calendar_property] if specified.\r\n\t * - Returns a calendar assigned to the task resource if specified.\r\n\t * - Returns the global calendar otherwise.\r\n\t * @param {(string|number|Object)} task - task object or task id\r\n\t * @returns {object} Calendar object\r\n\t */\r\n\tgetTaskCalendar: function (task) {\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar taskObject;\r\n\t\tif (task === null || task === undefined) {\r\n\t\t\treturn this.getCalendar();\r\n\t\t}\r\n\r\n\t\t// if task id is provided\r\n\t\tif((typeof task === \"number\" || typeof task === \"string\") && gantt.isTaskExists(task)){\r\n\t\t\ttaskObject = gantt.getTask(task);\r\n\t\t}else{\r\n\t\t\ttaskObject = task;\r\n\t\t}\r\n\r\n\t\tif(!taskObject){\r\n\t\t\treturn this.getCalendar();\r\n\t\t}\r\n\r\n\t\tvar calendar = this._getOwnCalendar(taskObject);\r\n\t\tvar groupMode = !!gantt.getState().group_mode;\r\n\r\n\t\tif (!calendar && gantt.config.inherit_calendar && gantt.isTaskExists(taskObject.parent)){\r\n\t\t\t// GS-1579  group mode overrides tree hierarchy, iterate using `.parent` property, instead of using eachParent iterator\r\n\t\t\tvar currentTask = taskObject;\r\n\t\t\twhile(gantt.isTaskExists(currentTask.parent)){\r\n\t\t\t\tcurrentTask = gantt.getTask(currentTask.parent);\r\n\t\t\t\tif(gantt.isSummaryTask(currentTask)){\r\n\t\t\t\t\tcalendar = this._getOwnCalendar(currentTask);\r\n\t\t\t\t\tif(calendar){\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(groupMode && !calendar){\r\n\t\t\t\t// if group mode and inherit_calendars is enabled - preserve previously applied parent calendar\r\n\t\t\t\t// we may need it when groupBy parses grouped data, old parent may be not loaded yet\r\n\t\t\t\tif(task.$effective_calendar){\r\n\t\t\t\t\tcalendar = this.getCalendar(task.$effective_calendar);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn calendar || this.getCalendar();\r\n\t},\r\n\r\n\taddCalendar: function(calendar) { // puts new calendar to Global Storage - gantt.calendarManager._calendars {}\r\n\t\tif (!(this.isCalendar(calendar))) {\r\n\t\t\tvar id = calendar.id;\r\n\t\t\tcalendar = this.createCalendar(calendar);\r\n\t\t\tcalendar.id = id;\r\n\t\t}\r\n\r\n\t\t// validate/check if empty calendar\r\n\t\tif (!calendar._tryChangeCalendarSettings(function () {\r\n\t\t\t})) {\r\n\r\n\t\t\tthis.$gantt.callEvent(\"onCalendarError\", [{message: \"Invalid calendar settings, no worktime available\"}, calendar]);\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\tvar config = this.$gantt.config;\r\n\r\n\t\t\tcalendar.id = calendar.id || utils.uid();\r\n\t\t\tthis._calendars[calendar.id] = calendar;\r\n\t\t\tif (!config.worktimes)\r\n\t\t\t\tconfig.worktimes = {};\r\n\t\t\tconfig.worktimes[calendar.id] = calendar.getConfig();\r\n\t\t\treturn calendar.id;\r\n\t\t}\r\n\t},\r\n\r\n\tdeleteCalendar: function (calendar) {\r\n\t\tvar config = this.$gantt.config;\r\n\t\tif (!calendar) return false;\r\n\t\tif (this._calendars[calendar]) {\r\n\t\t\tdelete this._calendars[calendar];\r\n\t\t\tif (config.worktimes && config.worktimes[calendar])\r\n\t\t\t\tdelete config.worktimes[calendar];\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n\r\n\trestoreConfigCalendars: function (configs) {\r\n\t\tfor (var i in configs) {\r\n\t\t\tif (this._calendars[i])\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar settings = configs[i];\r\n\t\t\tvar calendar = this.createCalendar(settings);\r\n\t\t\tcalendar.id = i;\r\n\t\t\tthis.addCalendar(calendar);\r\n\t\t}\r\n\t},\r\n\r\n\tdefaults: {\r\n\t\tglobal: {\r\n\t\t\tid: \"global\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [8, 12, 13, 17],\r\n\t\t\t\tdays: [0, 1, 1, 1, 1, 1, 0]\r\n\t\t\t}\r\n\t\t},\r\n\t\tfulltime: {\r\n\t\t\tid: \"fulltime\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [0, 24],\r\n\t\t\t\tdays: [1, 1, 1, 1, 1, 1, 1]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tcreateDefaultCalendars: function () {\r\n\t\tvar config = this.$gantt.config;\r\n\t\tthis.restoreConfigCalendars(this.defaults);\r\n\t\tthis.restoreConfigCalendars(config.worktimes);\r\n\t},\r\n\r\n\tisCalendar: function(possibleCalendar) {\r\n\t\t// because we don't have any way to check without dependency to CalendarWorkTimeStrategy\r\n\t\tvar props = [\r\n\t\t\tpossibleCalendar.isWorkTime,\r\n\t\t\tpossibleCalendar.setWorkTime,\r\n\t\t\tpossibleCalendar.getWorkHours,\r\n\t\t\tpossibleCalendar.unsetWorkTime,\r\n\t\t\tpossibleCalendar.getClosestWorkTime,\r\n\t\t\tpossibleCalendar.calculateDuration,\r\n\t\t\tpossibleCalendar.hasDuration,\r\n\t\t\tpossibleCalendar.calculateEndDate\r\n\t\t];\r\n\t\treturn props.every(function(entry) {\r\n\t\t\treturn entry instanceof Function;\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport default CalendarManager;","export default function() {\r\n\tfunction getResourcesCalendarKey(resourceAssignments){\r\n\t\treturn resourceAssignments.map(function(res){\r\n\t\t\tif(res && res.resource_id){\r\n\t\t\t\treturn res.resource_id;\r\n\t\t\t} else {\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t}).sort().join(\"-\");\r\n\t}\r\n\r\n\tvar dynamicCalendars = {};\r\n\r\n\tfunction mergeResourceCalendars(resourceAssignments, manager){\r\n\t\treturn manager.mergeCalendars(resourceAssignments.map(function(assignment){\r\n\t\t\tvar resourceId = (assignment && assignment.resource_id) ? assignment.resource_id : assignment;\r\n\t\t\treturn manager.getResourceCalendar(resourceId);\r\n\t\t}));\r\n\t}\r\n\tfunction getCalendarIdFromMultipleResources(resourceAssignments, manager){\r\n\t\tvar key = getResourcesCalendarKey(resourceAssignments);\r\n\t\tif(!resourceAssignments.length){\r\n\t\t\treturn null;\r\n\t\t}else if(resourceAssignments.length === 1){\r\n\t\t\treturn manager.getResourceCalendar(key).id;\r\n\t\t}else if (dynamicCalendars[key]){\r\n\t\t\treturn dynamicCalendars[key].id;\r\n\t\t} else {\r\n\t\t\tvar tempCalendar = mergeResourceCalendars(resourceAssignments, manager);\r\n\r\n\t\t\tdynamicCalendars[key] = tempCalendar;\r\n\t\t\treturn manager.addCalendar(tempCalendar);\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetCalendarIdFromMultipleResources: getCalendarIdFromMultipleResources\r\n\t};\r\n};","function CalendarDisabledTimeStrategy(gantt, argumentsHelper){\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n}\r\n\r\nCalendarDisabledTimeStrategy.prototype = {\r\n\tgetWorkHours: function () {\r\n\t\treturn [0, 24];\r\n\t},\r\n\tsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tunsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tisWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tvar config = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn config.date;\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this._calculateDuration(from, to, unit, step);\r\n\t},\r\n\t_calculateDuration: function (start, end, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar fixedUnits = {\r\n\t\t\t\"week\": 1000 * 60 * 60 * 24 * 7,\r\n\t\t\t\"day\": 1000 * 60 * 60 * 24,\r\n\t\t\t\"hour\": 1000 * 60 * 60,\r\n\t\t\t\"minute\": 1000 * 60\r\n\t\t};\r\n\r\n\t\tvar res = 0;\r\n\t\tif (fixedUnits[unit]) {\r\n\t\t\tres = Math.round((end - start) / (step * fixedUnits[unit]));\r\n\t\t} else {\r\n\t\t\tvar from = new Date(start),\r\n\t\t\t\tto = new Date(end);\r\n\t\t\twhile (from.valueOf() < to.valueOf()) {\r\n\t\t\t\tres += 1;\r\n\t\t\t\tfrom = dateHelper.add(from, step, unit);\r\n\t\t\t}\r\n\r\n\t\t\tif (from.valueOf() != end.valueOf()) {\r\n\t\t\t\tres += (to - from) / (dateHelper.add(from, step, unit) - from);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Math.round(res);\r\n\t},\r\n\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tfrom = new Date(from);\r\n\t\tto = new Date(to);\r\n\r\n\t\treturn (from.valueOf() < to.valueOf());\r\n\t},\r\n\r\n\thasWorkTime: function() {\r\n\t\treturn true;\r\n\t},\r\n\r\n\tequals: function(calendar) {\r\n\t\tif(!(calendar instanceof CalendarDisabledTimeStrategy)){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar start = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this.$gantt.date.add(start, step * duration, unit);\r\n\t}\r\n};\r\n\r\nexport default CalendarDisabledTimeStrategy;","import createArgumentsHelper from \"./calendar_arguments_helper\";\r\nimport NoWorkTimeCalendar from \"./strategy/no_work_time\";\r\n\r\nfunction TimeCalculator(calendarManager){\r\n\r\n\tthis.$gantt = calendarManager.$gantt;\r\n\tthis.argumentsHelper = createArgumentsHelper(this.$gantt);\r\n\tthis.calendarManager = calendarManager;\r\n\tthis.$disabledCalendar = new NoWorkTimeCalendar(this.$gantt, this.argumentsHelper);\r\n}\r\n\r\nTimeCalculator.prototype = {\r\n\t_getCalendar: function (config) {\r\n\t\tvar calendar;\r\n\t\tif (!this.$gantt.config.work_time) {\r\n\t\t\tcalendar = this.$disabledCalendar;\r\n\t\t} else {\r\n\t\t\tvar manager = this.calendarManager;\r\n\t\t\tif (config.task) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config.task);\r\n\t\t\t} else if (config.id) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config);\r\n\t\t\t} else if (config.calendar) {\r\n\t\t\t\tcalendar = config.calendar;\r\n\t\t\t}\r\n\t\t\tif (!calendar) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn calendar;\r\n\t},\r\n\r\n\tgetWorkHours: function (config) {\r\n\t\tconfig = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getWorkHours(config.date);\r\n\t},\r\n\r\n\tsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.setWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.setWorkTime(config);\r\n\t},\r\n\r\n\tunsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.unsetWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.unsetWorkTime(config);\r\n\t},\r\n\tisWorkTime: function (date, unit, task, calendar) {\r\n\t\tvar config = this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tcalendar = this._getCalendar(config);\r\n\t\treturn calendar.isWorkTime(config);\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tconfig = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getClosestWorkTime(config);\r\n\t},\r\n\r\n\tcalculateDuration: function () { // start_date_date, end_date, task\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateDuration(config);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.hasDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.hasDuration(config);\r\n\t},\r\n\tcalculateEndDate: function (config) { // start_date, duration, unit, task\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateEndDate(config);\r\n\t}\r\n};\r\n\r\nexport default TimeCalculator;\r\n\r\n","// TODO: rework public api for date methods\r\nimport * as utils from \"../../utils/utils\";\r\n\r\nvar createWorkTimeFacade = function(calendarManager, timeCalculator){\r\n\treturn {\r\n\t\tgetWorkHours: function (date) {\r\n\t\t\treturn timeCalculator.getWorkHours(date);\r\n\t\t},\r\n\r\n\t\tsetWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.setWorkTime(config);\r\n\t\t},\r\n\r\n\t\tunsetWorkTime: function (config) {\r\n\t\t\ttimeCalculator.unsetWorkTime(config);\r\n\t\t},\r\n\r\n\t\tisWorkTime: function (date, unit, task) {\r\n\t\t\treturn timeCalculator.isWorkTime(date, unit, task);\r\n\t\t},\r\n\r\n\t\tgetClosestWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.getClosestWorkTime(config);\r\n\t\t},\r\n\r\n\t\tcalculateDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.calculateDuration(start_date, end_date, task);\r\n\t\t},\r\n\t\t_hasDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.hasDuration(start_date, end_date, task);\r\n\t\t},\r\n\r\n\t\tcalculateEndDate: function (start, duration, unit, task) {\r\n\t\t\treturn timeCalculator.calculateEndDate(start, duration, unit, task);\r\n\t\t},\r\n\r\n\t\tmergeCalendars: utils.bind(calendarManager.mergeCalendars, calendarManager),\r\n\t\tcreateCalendar: utils.bind(calendarManager.createCalendar, calendarManager),\r\n\t\taddCalendar: utils.bind(calendarManager.addCalendar, calendarManager),\r\n\t\tgetCalendar: utils.bind(calendarManager.getCalendar, calendarManager),\r\n\t\tgetCalendars: utils.bind(calendarManager.getCalendars, calendarManager),\r\n\t\tgetResourceCalendar: utils.bind(calendarManager.getResourceCalendar, calendarManager),\r\n\t\tgetTaskCalendar: utils.bind(calendarManager.getTaskCalendar, calendarManager),\r\n\t\tdeleteCalendar: utils.bind(calendarManager.deleteCalendar, calendarManager)\r\n\t};\r\n};\r\n\r\n\r\nexport default { create: createWorkTimeFacade };","import * as helpers from \"../utils/helpers\";\r\n\r\nexport default function(gantt) {\r\n\r\n\tgantt.isUnscheduledTask = function (task) {\r\n\t\tgantt.assert(task && task instanceof Object, \"Invalid argument <b>task</b>=\"+task+\" of gantt.isUnscheduledTask. Task object was expected\");\r\n\t\treturn (!!task.unscheduled || !task.start_date);\r\n\t};\r\n\r\n\tgantt._isAllowedUnscheduledTask = function (task) {\r\n\t\treturn !!(task.unscheduled && gantt.config.show_unscheduled);\r\n\t};\r\n\r\n\tgantt._isTaskInTimelineLimits = function(task) {\r\n\t\tvar taskStart = task.start_date ? task.start_date.valueOf() : null;\r\n\t\tvar taskEnd = task.end_date ? task.end_date.valueOf() : null;\r\n\t\treturn !!(taskStart && taskEnd && taskStart <= this._max_date.valueOf() && taskEnd >= this._min_date.valueOf());\r\n\t};\r\n\tgantt.isTaskVisible = function (id) {\r\n\t\tif (!this.isTaskExists(id)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar task = this.getTask(id);\r\n\t\tif (!(this._isAllowedUnscheduledTask(task) || this._isTaskInTimelineLimits(task))) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn !!(this.getGlobalTaskIndex(id) >= 0);\r\n\t};\r\n\r\n\tgantt._getProjectEnd = function() {\r\n\t\tif(gantt.config.project_end){\r\n\t\t\treturn gantt.config.project_end;\r\n\t\t}else{\r\n\t\t\tvar tasks = gantt.getTaskByTime();\r\n\t\t\ttasks = tasks.sort(function (a, b) {\r\n\t\t\t\treturn +a.end_date > +b.end_date ? 1 : -1;\r\n\t\t\t});\r\n\t\t\treturn tasks.length ? tasks[tasks.length - 1].end_date : null;\r\n\t\t}\r\n\t};\r\n\tgantt._getProjectStart = function() {\r\n\t\tif (gantt.config.project_start) {\r\n\t\t\treturn gantt.config.project_start;\r\n\t\t}\r\n\r\n\t\t// use timeline start if project start is not specified\r\n\t\tif (gantt.config.start_date) {\r\n\t\t\treturn gantt.config.start_date;\r\n\t\t}\r\n\t\tif (gantt.getState().min_date) {\r\n\t\t\treturn gantt.getState().min_date;\r\n\t\t}\r\n\r\n\t\t// earliest task start if neither project start nor timeline are specified\r\n\t\tvar tasks = gantt.getTaskByTime();\r\n\t\ttasks = tasks.sort(function (a, b) {\r\n\t\t\treturn +a.start_date > +b.start_date ? 1 : -1;\r\n\t\t});\r\n\t\treturn tasks.length ? tasks[0].start_date : null;\r\n\t};\r\n\r\n\tvar getDefaultTaskDate = function (item, parent_id) {\r\n\t\tvar parentExists = parent_id && parent_id != gantt.config.root_id && gantt.isTaskExists(parent_id);\r\n\t\tvar parent = parentExists ? gantt.getTask(parent_id) : false,\r\n\t\t\tstartDate = null;\r\n\t\tif (parent) {\r\n\t\t\tif(gantt._getAutoSchedulingConfig().schedule_from_end){\r\n\t\t\t\tstartDate = gantt.calculateEndDate({\r\n\t\t\t\t\tstart_date: parent.end_date,\r\n\t\t\t\t\tduration: - gantt.config.duration_step,\r\n\t\t\t\t\ttask:item\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tif(!parent.start_date){\r\n\t\t\t\t\treturn getDefaultTaskDate(parent, gantt.getParent(parent));\r\n\t\t\t\t}\r\n\t\t\t\tstartDate = parent.start_date;\r\n\t\t\t}\r\n\r\n\t\t} else if(gantt._getAutoSchedulingConfig().schedule_from_end) {\r\n\t\t\tstartDate = gantt.calculateEndDate({\r\n\t\t\t\tstart_date: gantt._getProjectEnd(),\r\n\t\t\t\tduration: - gantt.config.duration_step,\r\n\t\t\t\ttask:item\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tconst first = gantt.getTaskByIndex(0);\r\n\t\t\tconst minDate = gantt.config.start_date || gantt.getState().min_date;\r\n\r\n\t\t\tif (first){\r\n\t\t\t\tif (first.start_date){\r\n\t\t\t\t\tstartDate = first.start_date;\r\n\t\t\t\t}\r\n\t\t\t\telse if (first.end_date){\r\n\t\t\t\t\tstartDate = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: first.end_date,\r\n\t\t\t\t\t\tduration: -gantt.config.duration_step,\r\n\t\t\t\t\t\ttask:item\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tstartDate = minDate;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tstartDate = minDate;\r\n\t\t\t}\r\n\t\t}\r\n\t\tgantt.assert(startDate, \"Invalid dates\");\r\n\t\treturn new Date(startDate);\r\n\t};\r\n\r\n\tgantt._set_default_task_timing = function (task) {\r\n\t\ttask.start_date = task.start_date || getDefaultTaskDate(task, gantt.getParent(task));\r\n\t\ttask.duration = task.duration || gantt.config.duration_step;\r\n\t\ttask.end_date = task.end_date || gantt.calculateEndDate(task);\r\n\t};\r\n\r\n\tgantt.createTask = function (item, parent, index) {\r\n\t\titem = item || {};\r\n\r\n\t\tif (!gantt.defined(item.id))\r\n\t\t\titem.id = gantt.uid();\r\n\r\n\t\tif (!item.start_date) {\r\n\t\t\titem.start_date = getDefaultTaskDate(item, parent);\r\n\t\t}\r\n\t\tif (item.text === undefined) {\r\n\t\t\titem.text = gantt.locale.labels.new_task;\r\n\t\t}\r\n\t\tif (item.duration === undefined) {\r\n\t\t\titem.duration = 1;\r\n\t\t}\r\n\r\n\t\tif (this.isTaskExists(parent)) {\r\n\t\t\tthis.setParent(item, parent, true);\r\n\t\t\tvar parentObj = this.getTask(parent);\r\n\t\t\tparentObj.$open = true;\r\n\t\t\t// GS-1583. Save the $open state to the Undo Stack\r\n\t\t\tif (!this.config.details_on_create){\r\n\t\t\t\tthis.callEvent(\"onAfterParentExpand\", [parent, parentObj]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!this.callEvent(\"onTaskCreated\", [item])) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (this.config.details_on_create) {\r\n\t\t\t//GS-761: assert unique ID\r\n\t\t\tif (gantt.isTaskExists(item.id)){\r\n\t\t\t\tvar task = gantt.getTask(item.id);\r\n\t\t\t\tif (task.$index != item.$index) {\r\n\t\t\t\t\t// Someone may try to mistakenly add a task with the same ID, and most likely\r\n\t\t\t\t\t// use the string format for the dates. Gantt shouldn't break in this scenario\r\n\t\t\t\t\tif (item.start_date && typeof item.start_date === \"string\"){\r\n\t\t\t\t\t\titem.start_date = this.date.parseDate(item.start_date, \"parse_date\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (item.end_date && typeof item.end_date === \"string\"){\r\n\t\t\t\t\t\titem.end_date = this.date.parseDate(item.end_date, \"parse_date\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$data.tasksStore.updateItem(item.id, item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\titem.$new = true;\r\n\t\t\t\tthis.silent(function(){\r\n\t\t\t\t\tgantt.$data.tasksStore.addItem(item, index);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.selectTask(item.id);\r\n\t\t\tthis.refreshData();\r\n\t\t\tthis.showLightbox(item.id);\r\n\t\t} else {\r\n\t\t\tif (this.addTask(item, parent, index)) {\r\n\t\t\t\tthis.showTask(item.id);\r\n\t\t\t\tthis.selectTask(item.id);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn item.id;\r\n\t};\r\n\r\n\tgantt._update_flags = function (oldid, newid) {\r\n\t\t//  TODO: need a proper way to update all possible flags\r\n\t\tvar store = gantt.$data.tasksStore;\r\n\t\tif (oldid === undefined) {\r\n\t\t\tthis._lightbox_id = null;\r\n\r\n\t\t\tstore.silent(function(){\r\n\t\t\t\tstore.unselect();\r\n\t\t\t});\r\n\t\t\t// GS-1522. If we have multiselect, unselect all previously selected tasks\r\n\t\t\tif (this.getSelectedTasks) {\r\n\t\t\t\tthis._multiselect.reset();\r\n\t\t\t}\r\n\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = null;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this._lightbox_id == oldid)\r\n\t\t\t\tthis._lightbox_id = newid;\r\n\r\n\t\t\t// TODO: probably can be removed\r\n\t\t\tif (store.getSelectedId() == oldid) {\r\n\t\t\t\tstore.silent(function(){\r\n\t\t\t\t\tstore.unselect(oldid);\r\n\t\t\t\t\tstore.select(newid);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag && this._tasks_dnd.drag.id == oldid) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar getTaskTimingMode = function (task, force) {\r\n\t\tvar task_type = gantt.getTaskType(task.type);\r\n\r\n\t\tvar state = {\r\n\t\t\ttype: task_type,\r\n\t\t\t$no_start: false,\r\n\t\t\t$no_end: false,\r\n\t\t\tscheduled_summary: false\r\n\t\t};\r\n\r\n\t\tif(task_type === gantt.config.types.project && task.auto_scheduling === false){\r\n\t\t\tstate.scheduled_summary = true;\r\n\t\t}\r\n\r\n\t\tif (!force && task_type == task.$rendered_type) {\r\n\t\t\tstate.$no_start = task.$no_start;\r\n\t\t\tstate.$no_end = task.$no_end;\r\n\t\t\treturn state;\r\n\t\t}\r\n\r\n\t\tif (task_type == gantt.config.types.project) {\r\n\t\t\t//project duration is always defined by children duration\r\n\t\t\tstate.$no_end = state.$no_start = true;\r\n\t\t} else if (task_type != gantt.config.types.milestone) {\r\n\t\t\t//tasks can have fixed duration, children duration(as projects), or one date fixed, and other defined by nested items\r\n\t\t\tstate.$no_end = !(task.end_date || task.duration);\r\n\t\t\tstate.$no_start = !task.start_date;\r\n\r\n\t\t\tif (gantt._isAllowedUnscheduledTask(task)) {\r\n\t\t\t\tstate.$no_end = state.$no_start = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn state;\r\n\t};\r\n\r\n\tgantt._init_task_timing = function (task) {\r\n\t\tvar task_mode = getTaskTimingMode(task, true);\r\n\r\n\t\tvar dirty = task.$rendered_type != task_mode.type;\r\n\r\n\t\tvar task_type = task_mode.type;\r\n\r\n\t\tif (dirty) {\r\n\t\t\ttask.$no_start = task_mode.$no_start;\r\n\t\t\ttask.$no_end = task_mode.$no_end;\r\n\t\t\ttask.$rendered_type = task_mode.type;\r\n\t\t}\r\n\r\n\t\tif (dirty && task_type != this.config.types.milestone) {\r\n\t\t\tif (task_type == this.config.types.project) {\r\n\t\t\t\t//project duration is always defined by children duration\r\n\t\t\t\tthis._set_default_task_timing(task);\r\n\t\t\t\ttask.$calculate_duration = false;// do not recalculate duration below\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (task_type == this.config.types.milestone) {\r\n\t\t\ttask.end_date = task.start_date;\r\n\t\t}\r\n\t\tif (task.start_date && task.end_date && task.$calculate_duration !== false) {\r\n\t\t\ttask.duration = this.calculateDuration(task);\r\n\t\t}\r\n\r\n\t\tif(!task.$calculate_duration){\r\n\t\t\ttask.$calculate_duration = true;\r\n\t\t}\r\n\r\n\t\tif (!task.end_date) {\r\n\t\t\ttask.end_date = task.start_date;\r\n\t\t}\r\n\r\n\t\ttask.duration = task.duration || 0;\r\n\t\t// GS-1145. We should let tasks to have 0 duration if user wants it\r\n\t\tif (this.config.min_duration === 0 && task.duration === 0){\r\n\t\t\ttask.$no_end = false;\r\n\t\t\t//GS-2813: special case for project that has 0 duration with milestone child\r\n\t\t\tif(task.type === gantt.config.types.project && gantt.hasChild(task.id)){\r\n\t\t\t\ttask.$no_end = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// work calendar of task has changed\r\n\t\tvar effectiveCalendar = this.getTaskCalendar(task);\r\n\t\tif(task.$effective_calendar && task.$effective_calendar !== effectiveCalendar.id){\r\n\t\t\tupdateTaskTiming(task);\r\n\t\t\tif(this.config.inherit_calendar && this.isSummaryTask(task)){\r\n\t\t\t\tthis.eachTask(function(child){\r\n\t\t\t\t\tupdateTaskTiming(child);\r\n\t\t\t\t}, task.id);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttask.$effective_calendar = effectiveCalendar.id;\r\n\t};\r\n\r\n\tfunction updateTaskTiming(task) {\r\n\t\ttask.$effective_calendar = gantt.getTaskCalendar(task).id;\r\n\t\ttask.start_date = gantt.getClosestWorkTime({\r\n\t\t\tdir: \"future\",\r\n\t\t\tdate: task.start_date,\r\n\t\t\tunit: gantt.config.duration_unit,\r\n\t\t\ttask: task\r\n\t\t});\r\n\t\ttask.end_date = gantt.calculateEndDate(task);\r\n\t}\r\n\r\n\tgantt.isSummaryTask = function (task) {\r\n\t\tgantt.assert(task && task instanceof Object, \"Invalid argument <b>task</b>=\"+task+\" of gantt.isSummaryTask. Task object was expected\");\r\n\r\n\t\tvar mode = getTaskTimingMode(task);\r\n\r\n\t\treturn !!(mode.$no_end || mode.$no_start);\r\n\t};\r\n\r\n// downward calculation of project duration\r\n\tgantt.resetProjectDates = function (task) {\r\n\t\tvar taskMode = getTaskTimingMode(task);\r\n\t\tif (taskMode.$no_end || taskMode.$no_start) {\r\n\t\t\tvar info = getSubtaskInfo(task.id);\r\n\t\t\tassignProjectDates.call(this, task, taskMode, info.start_date, info.end_date);\r\n\t\t\ttask.$rollup = info.rollup;\r\n\t\t\ttask.$inlineSplit = info.splitItems;\r\n\t\t}\r\n\t};\r\n\r\n\tfunction assignProjectDates(task, taskTiming, from, to) {\r\n\r\n\t\tconst summaryDateFields = {\r\n\t\t\tstart: \"start_date\",\r\n\t\t\tend: \"end_date\"\r\n\t\t};\r\n\t\tconst manuallyScheduledSummaryDateFields = {\r\n\t\t\tstart: \"$auto_start_date\",\r\n\t\t\tend: \"$auto_end_date\"\r\n\t\t};\r\n\r\n\t\tlet dateFields;\r\n\t\tif(task.type === gantt.config.types.project && task.auto_scheduling === false){\r\n\t\t\tdateFields = manuallyScheduledSummaryDateFields;\r\n\t\t}else{\r\n\t\t\tdateFields = summaryDateFields;\r\n\t\t}\r\n\r\n\t\tif (taskTiming.$no_start) {\r\n\t\t\tif (from) {\r\n\t\t\t\ttask[dateFields.start] = new Date(from);\r\n\t\t\t} else {\r\n\t\t\t\ttask[dateFields.start] = getDefaultTaskDate(task, this.getParent(task));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (taskTiming.$no_end) {\r\n\t\t\tif (to) {\r\n\t\t\t\ttask[dateFields.end] = new Date(to);\r\n\t\t\t} else {\r\n\t\t\t\ttask[dateFields.end] = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task[dateFields.start],\r\n\t\t\t\t\tduration: this.config.duration_step,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (taskTiming.$no_start || taskTiming.$no_end) {\r\n\t\t\tthis._init_task_timing(task);\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.getSubtaskDuration = function (taskId) {\r\n\t\tvar res = 0,\r\n\t\t\troot = taskId !== undefined ? taskId : gantt.config.root_id;\r\n\r\n\t\tthis.eachTask(function (child) {\r\n\t\t\tif (this.getTaskType(child.type) == gantt.config.types.project || this.isUnscheduledTask(child))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tres += child.duration;\r\n\t\t}, root);\r\n\r\n\t\treturn res;\r\n\t};\r\n\r\n\tfunction getSubtaskInfo (taskId){\r\n\t\tlet min = null;\r\n\t\tlet max = null;\r\n\t\tlet root = taskId !== undefined ? taskId : gantt.config.root_id;\r\n\t\tconst rollup = [];\r\n\t\tconst inlineSplit = [];\r\n\r\n\t\tlet rootTask = null;\r\n\t\tif(gantt.isTaskExists(root)){\r\n\t\t\trootTask = gantt.getTask(root);\r\n\t\t}\r\n\r\n\t\tgantt.eachTask(function (child) {\r\n\t\t\tconst isScheduledSummary = (gantt.getTaskType(child.type) == gantt.config.types.project && (child.auto_scheduling === false));\r\n\t\t\tif ((gantt.getTaskType(child.type) == gantt.config.types.project && !isScheduledSummary) || gantt.isUnscheduledTask(child))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(child.rollup){\r\n\t\t\t\trollup.push(child.id);\r\n\t\t\t}\r\n\r\n\t\t\tif ((child.start_date && (!child.$no_start || isScheduledSummary)) && (!min || min > child.start_date.valueOf()))\r\n\t\t\t\tmin = child.start_date.valueOf();\r\n\t\t\tif ((child.end_date && (!child.$no_end || isScheduledSummary)) && (!max || max < child.end_date.valueOf()))\r\n\t\t\t\tmax = child.end_date.valueOf();\r\n\r\n\r\n\t\t\tif(rootTask && rootTask.render == \"split\"){\r\n\t\t\t\tif(child.split_placement === \"inline\"){\r\n\t\t\t\t\tinlineSplit.push(child);\r\n\t\t\t\t}else if(child.split_placement !== \"subrow\" && (!rootTask.$open || !gantt.config.open_split_tasks)){\r\n\t\t\t\t\tinlineSplit.push(child);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, root);\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: min ? new Date(min) : null,\r\n\t\t\tend_date: max ? new Date(max) : null,\r\n\t\t\trollup: rollup,\r\n\t\t\tsplitItems: inlineSplit\r\n\t\t};\r\n\t}\r\n\r\n\tgantt.getSubtaskDates = function (task_id) {\r\n\t\tvar info = getSubtaskInfo(task_id);\r\n\t\treturn {\r\n\t\t\tstart_date: info.start_date,\r\n\t\t\tend_date: info.end_date\r\n\t\t};\r\n\t};\r\n\r\n\r\n// upward calculation of project duration\r\n\tgantt._update_parents = function (taskId, silent, updateAll) {\r\n\t\tif (!taskId) return;\r\n\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tif(task.rollup){\r\n\t\t\tupdateAll = true;\r\n\t\t}\r\n\t\tvar pid = this.getParent(task);\r\n\r\n\t\tvar taskTiming = getTaskTimingMode(task);\r\n\r\n\t\tvar has_changed = true;\r\n\t\t// GS-761 the dates check is necessary for adding empty tasks: gantt.addTask({id:\"2\"})\r\n\t\tif (updateAll || (task.start_date && task.end_date && (taskTiming.$no_start || taskTiming.$no_end))) {\r\n\r\n\t\t\tconst startDateField = task.$auto_start_date ? \"$auto_start_date\" : \"start_date\";\r\n\t\t\tconst endDateField = task.$auto_end_date ? \"$auto_end_date\" : \"end_date\";\r\n\r\n\t\t\tvar oldStart = task[startDateField].valueOf(),\r\n\t\t\t\toldEnd = task[endDateField].valueOf();\r\n\r\n\t\t\tgantt.resetProjectDates(task);\r\n\r\n\t\t\t// not refresh parent projects if dates hasn't changed\r\n\t\t\tif (!updateAll && oldStart == task[startDateField].valueOf() && oldEnd == task[endDateField].valueOf()) {\r\n\t\t\t\thas_changed = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (has_changed && !silent) {\r\n\t\t\t\tthis.refreshTask(task.id, true);\r\n\t\t\t}\r\n\r\n\t\t\tif(taskTiming.scheduled_summary){\r\n\t\t\t\thas_changed = true;//recalculate upwards from scheduled summaries\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (has_changed && pid && this.isTaskExists(pid)) {\r\n\t\t\tthis._update_parents(pid, silent, updateAll);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.roundDate = function (config) {\r\n\t\tvar scale = gantt.getScale();\r\n\r\n\t\tif (helpers.isDate(config)) {\r\n\t\t\tconfig = {\r\n\t\t\t\tdate: config,\r\n\t\t\t\tunit: scale ? scale.unit : gantt.config.duration_unit,\r\n\t\t\t\tstep: scale ?  scale.step : gantt.config.duration_step\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar date = config.date,\r\n\t\t\tsteps = config.step,\r\n\t\t\tunit = config.unit;\r\n\r\n\t\tif(!scale){\r\n\t\t\treturn date;\r\n\t\t}\r\n\r\n\t\tvar upper, lower, colIndex;\r\n\t\tif (unit == scale.unit && steps == scale.step &&\r\n\t\t\t+date >= +scale.min_date && +date <= +scale.max_date) {\r\n\t\t\t//find date in time scale config\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tif (!scale.trace_x[colIndex]) {\r\n\t\t\t\tcolIndex -= 1;// end of time scale\r\n\t\t\t\tif(scale.rtl){\r\n\t\t\t\t\tcolIndex = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlower = new Date(scale.trace_x[colIndex]);\r\n\t\t\tupper = gantt.date.add(lower, steps, unit);\r\n\t\t} else {\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tupper = gantt.date[unit + \"_start\"](new Date(scale.min_date));\r\n\t\t\tif (scale.trace_x[colIndex]) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](scale.trace_x[colIndex]);// end of time scale\r\n\t\t\t}\r\n\r\n\t\t\twhile (+upper < +date) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](gantt.date.add(upper, steps, unit));\r\n\r\n\t\t\t\tvar tzOffset = upper.getTimezoneOffset();\r\n\r\n\t\t\t\tupper = gantt._correct_dst_change(upper, tzOffset, upper, unit);\r\n\t\t\t\tif (gantt.date[unit + '_start'])\r\n\t\t\t\t\tupper = gantt.date[unit + '_start'](upper);\r\n\t\t\t}\r\n\r\n\t\t\tlower = gantt.date.add(upper, -1 * steps, unit);\r\n\r\n\t\t}\r\n\t\tif (config.dir && config.dir == 'future')\r\n\t\t\treturn upper;\r\n\t\tif (config.dir && config.dir == 'past')\r\n\t\t\treturn lower;\r\n\r\n\t\tif (Math.abs(date - lower) < Math.abs(upper - date)) {\r\n\t\t\treturn lower;\r\n\t\t} else {\r\n\t\t\treturn upper;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tgantt.correctTaskWorkTime = function (task) {\r\n\t\tif (gantt.config.work_time && gantt.config.correct_work_time) {\r\n\t\t\tif (!this.isWorkTime(task.start_date, undefined, task)) {\r\n\t\t\t\ttask.start_date = this.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!this.isWorkTime(new Date(+task.end_date - 1), undefined, task)) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskUpdate\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\tgantt.attachEvent(\"onBeforeTaskAdd\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onAfterTaskMove\", function (id, parent, tindex) {\r\n\t\tgantt._init_task_timing(gantt.getTask(id));\r\n\t\treturn true;\r\n\t});\r\n\r\n};","function addResizeListener(gantt){\r\n\tvar containerStyles = window.getComputedStyle(gantt.$root);\r\n\tif(containerStyles.getPropertyValue(\"position\") == \"static\"){\r\n\t\tgantt.$root.style.position = \"relative\";\r\n\t}\r\n\r\n\tvar resizeWatcher = document.createElement('iframe');\r\n\tresizeWatcher.className = \"gantt_container_resize_watcher\";\r\n\tresizeWatcher.tabIndex = -1;\r\n\tif(gantt.config.wai_aria_attributes){\r\n\t\tresizeWatcher.setAttribute(\"role\", \"none\");\r\n\t\tresizeWatcher.setAttribute(\"aria-hidden\", true);\r\n\t}\r\n\r\n\tif (gantt.env.isSalesforce){\r\n\t\tgantt.config.container_resize_method = \"timeout\";\r\n\t}\r\n\r\n\t// in some environments (namely, in SalesForce) iframe.contentWindow is not available\r\n\tgantt.$root.appendChild(resizeWatcher);\r\n\tif (resizeWatcher.contentWindow) {\r\n\t\tlistenWindowResize(gantt, resizeWatcher.contentWindow);\r\n\t} else {\r\n\t\t// if so - ditch the iframe and fallback to listening the main window resize\r\n\t\tgantt.$root.removeChild(resizeWatcher);\r\n\t\tlistenWindowResize(gantt, window);\r\n\t}\r\n}\r\n\r\nfunction listenWindowResize(gantt, window){\r\n\tvar resizeTimeout = gantt.config.container_resize_timeout || 20;\r\n\tvar resizeDelay;\r\n\tlet previousSize = getContainerSize(gantt);\r\n\r\n\tif (gantt.config.container_resize_method == \"timeout\"){\r\n\t\tlowlevelResizeWatcher();\r\n\t}\r\n\telse {\r\n\t\ttry {\r\n\t\t\tgantt.event(window, \"resize\", function () {\r\n\t\t\t\tif (gantt.$scrollbarRepaint) {\r\n\t\t\t\t\tgantt.$scrollbarRepaint = null;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// GS-2140. Don't repaint Gantt if it has the same sizes\r\n\t\t\t\t\tlet currentSize = getContainerSize(gantt);\r\n\t\t\t\t\tif (previousSize.x == currentSize.x && previousSize.y == currentSize.y){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpreviousSize = currentSize;\r\n\t\t\t\t\trepaintGantt();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tlowlevelResizeWatcher();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction repaintGantt(){\r\n\t\tclearTimeout(resizeDelay);\r\n\t\tresizeDelay = setTimeout(function(){\r\n\t\t\tif(!gantt.$destroyed){\r\n\t\t\t\tgantt.render();\r\n\t\t\t}\r\n\t\t}, resizeTimeout);\r\n\t}\r\n\r\n\tvar previousHeight = gantt.$root.offsetHeight;\r\n\tvar previousWidth = gantt.$root.offsetWidth;\t\r\n\r\n\tfunction lowlevelResizeWatcher(){\r\n\t\tif (gantt.$root.offsetHeight != previousHeight ||\r\n\t\t\t\tgantt.$root.offsetWidth != previousWidth){\r\n\t\t\t\trepaintGantt();\r\n\t\t}\r\n\r\n\t\tpreviousHeight = gantt.$root.offsetHeight;\r\n\t\tpreviousWidth = gantt.$root.offsetWidth;\r\n\r\n\t\tsetTimeout(lowlevelResizeWatcher, resizeTimeout);\r\n\t}\r\n}\r\n\r\nfunction getContainerSize(gantt){\r\n\treturn {\r\n\t\tx: gantt.$root.offsetWidth,\r\n\t\ty: gantt.$root.offsetHeight\r\n\t};\r\n}\r\n\r\nexport default addResizeListener;","import * as domHelpers from \"./ui/utils/dom_helpers\";\r\nimport * as helpers from \"../utils/helpers\";\r\nimport isHeadless from \"../utils/is_headless\";\r\nimport addResizeListener from \"./ui/resize_listener\";\r\nimport calculateScaleRange from \"./gantt_data_range\";\r\nimport assert from \"./common/assert\";\r\n\r\nexport default function(gantt){\r\n\t\r\n\r\n\tgantt.assert = assert(gantt);\r\n\r\n\tfunction isHTMLElement(node){\r\n\t\ttry {\r\n\t\t\tnode.cloneNode(false);\r\n\t\t}\r\n\t\tcatch (e){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\tvar invalidContainerMessage = \"Invalid value of the first argument of `gantt.init`. Supported values: HTMLElement, String (element id).\" +\r\n\t\"This error means that either invalid object is passed into `gantt.init` or that the element with the specified ID doesn't exist on the page when `gantt.init` is called.\";\r\n\r\n\tfunction validateNode(node){\r\n\t\tif (!node || (typeof node == 'string' && document.getElementById(node))) return true;\r\n\t\tif (isHTMLElement(node)) return true;\r\n\r\n\t\tgantt.assert(false, invalidContainerMessage);\r\n\t\tthrow new Error(invalidContainerMessage);\r\n\t}\r\n\r\n//initial initialization\r\n\tgantt.init = function(node, from, to){\r\n\t\tif (gantt.env.isNode) { \r\n\t\t\tnode = null; // for the nodejs version\r\n\t\t} else {\r\n\t\t\tvalidateNode(node); // for the web version\r\n\t\t}\r\n\r\n\t\tif(from && to){\r\n\t\t\tthis.config.start_date = this._min_date = new Date(from);\r\n\t\t\tthis.config.end_date = this._max_date = new Date(to);\r\n\t\t}\r\n\t\tthis.date.init();\r\n\r\n\t\t//can be called only once\r\n\t\tthis.init = function(node){\r\n\t\t\tif (gantt.env.isNode) { \r\n\t\t\t\tnode = null; // for the nodejs version\r\n\t\t\t} else {\r\n\t\t\t\tvalidateNode(node); // for the web version\r\n\t\t\t}\r\n\r\n\t\t\tif (this.$container && this.$container.parentNode){\r\n\t\t\t\tthis.$container.parentNode.removeChild(this.$container);\r\n\t\t\t\tthis.$container = null;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.$layout){\r\n\t\t\t\tthis.$layout.clear();\r\n\t\t\t}\r\n\t\t\tthis._reinit(node);\r\n\t\t};\r\n\t\tthis._reinit(node);\r\n\t};\r\n\r\n\tgantt._quickRefresh = function(code){\r\n\t\tvar stores = this._getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i]._quick_refresh = true;\r\n\t\t}\r\n\r\n\t\tcode();\r\n\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i]._quick_refresh = false;\r\n\t\t}\r\n\t};\r\n\r\n\tvar dropLayout = (function dropLayout(){\r\n\t\tif(this._clearTaskLayers){\r\n\t\t\tthis._clearTaskLayers();\r\n\t\t}\r\n\r\n\t\tif(this._clearLinkLayers){\r\n\t\t\tthis._clearLinkLayers();\r\n\t\t}\r\n\r\n\t\tif(this.$layout){\r\n\t\t\tthis.$layout.destructor();\r\n\t\t\tthis.$layout = null;\r\n\t\t\tthis.$ui.reset();\r\n\t\t}\r\n\t}).bind(gantt);\r\n\r\n\tvar rebuildLayout = (function rebuildLayout(){\r\n\t\tif(isHeadless(gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.$root.innerHTML = \"\";\r\n\r\n\t\tthis.$root.gantt = this;\r\n\t\tcalculateScaleRange(this);\r\n\t\tthis.config.layout.id = \"main\";\r\n\t\tthis.$layout = this.$ui.createView(\"layout\", this.$root, this.config.layout);\r\n\r\n\t\tthis.$layout.attachEvent(\"onBeforeResize\", function(){\r\n\t\t\tvar storeNames = gantt.$services.getService(\"datastores\");\r\n\t\t\tfor(var i = 0; i < storeNames.length; i++){\r\n\t\t\t\tgantt.getDatastore(storeNames[i]).filter();\r\n\t\t\t\tif (gantt.$data.tasksStore._skipTaskRecalculation){\r\n\t\t\t\t\t// do not repaint items, they will be repainted later in the onStoreUpdate event\r\n\t\t\t\t\tif (gantt.$data.tasksStore._skipTaskRecalculation != \"lightbox\"){\r\n\t\t\t\t\t\tgantt.$data.tasksStore._skipTaskRecalculation = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgantt.getDatastore(storeNames[i]).callEvent(\"onBeforeRefreshAll\", []);\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.$layout.attachEvent(\"onResize\", function(){\r\n\t\t\tgantt._quickRefresh(function(){\r\n\t\t\t\tgantt.refreshData();\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tthis.callEvent(\"onGanttLayoutReady\", []);\r\n\t\tthis.$layout.render();\r\n\r\n\t\tthis.$container = this.$layout.$container.firstChild;\r\n\r\n\t\taddResizeListener(this);\r\n\t}).bind(gantt);\r\n\r\n\tgantt.resetLayout = function(){\r\n\t\tdropLayout();\r\n\t\trebuildLayout();\r\n\t\tthis.render();\r\n\t};\r\n\r\n\tgantt._reinit = function(node){\r\n\t\tthis.callEvent(\"onBeforeGanttReady\", []);\r\n\t\tthis._update_flags();\r\n\r\n\t\tvar config = this.$services.getService(\"templateLoader\");\r\n\t\tconfig.initTemplates(this);\r\n\r\n\t\tdropLayout();\r\n\r\n\t\tthis.$root = null;\r\n\t\tif(node){\r\n\t\t\tthis.$root = domHelpers.toNode(node);\r\n\t\t\trebuildLayout();\r\n\t\t\tthis.$mouseEvents.reset(this.$root);\r\n\t\t\taddMinimalSizes(gantt);\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onTemplatesReady\",[]);\r\n\r\n\t\tthis.callEvent(\"onGanttReady\", []);\r\n\r\n\t\tthis.render();\r\n\t};\r\n\r\n\tfunction addMinimalSizes(gantt) {\r\n\t\tif (gantt.$container && !gantt.config.autosize) {\r\n\t\t\tif (gantt.$root.offsetHeight < 50) {\r\n\t\t\t\t// eslint-disable-next-line no-console\r\n\t\t\t\tconsole.warn(`The Gantt container has a small height, so you cannot see its content. If it is not intended, you need to set the 'height' style rule to the container:\r\nhttps://docs.dhtmlx.com/gantt/faq.html#theganttchartisntrenderedcorrectly`);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.$click={\r\n\t\tbuttons:{\r\n\t\t\t\"edit\": function(id) {\r\n\t\t\t\tif (gantt.isReadonly(gantt.getTask(id))) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t},\r\n\t\t\t\"delete\": function(id) {\r\n\t\t\t\tvar task = gantt.getTask(id);\r\n\t\t\t\tif (gantt.isReadonly(task)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar question = gantt.locale.labels.confirm_deleting;\r\n\t\t\t\tvar title = gantt.locale.labels.confirm_deleting_title;\r\n\r\n\t\t\t\tgantt._delete_task_confirm({\r\n\t\t\t\t\ttask: task,\r\n\t\t\t\t\tmessage: question,\r\n\t\t\t\t\ttitle: title,\r\n\t\t\t\t\tcallback: function(){\r\n\t\t\t\t\t\tif(!gantt.isTaskExists(id)){\r\n\t\t\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(task.$new){\r\n\t\t\t\t\t\t\t// GS-2170. Do not recalculate the indexes and dates of other tasks\r\n\t\t\t\t\t\t\t// as they will be recalculated in the `refreshData`\r\n\t\t\t\t\t\t\tgantt.$data.tasksStore._skipTaskRecalculation = \"lightbox\";\r\n\t\t\t\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\t\t\t\tgantt.deleteTask(id, true);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tgantt.$data.tasksStore._skipTaskRecalculation = false;\r\n\t\t\t\t\t\t\tgantt.refreshData();\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tgantt.$data.tasksStore._skipTaskRecalculation = true;\r\n\t\t\t\t\t\t\tgantt.deleteTask(id);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n//renders self\r\n\tgantt.render = function(){\r\n\t\tthis.callEvent(\"onBeforeGanttRender\", []);\r\n\r\n\t\tvar visibleDate;\r\n\t\tif(!isHeadless(gantt)){\r\n\t\t\tif (!this.config.sort && this._sort) {\r\n\t\t\t\tthis._sort = undefined;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.$root){\r\n\t\t\t\tif(this.config.rtl){\r\n\t\t\t\t\tthis.$root.classList.add(\"gantt_rtl\");\r\n\t\t\t\t\tthis.$root.firstChild.classList.add(\"gantt_rtl\"); // GS-1499\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$root.classList.remove(\"gantt_rtl\");\r\n\t\t\t\t\tthis.$root.firstChild.classList.remove(\"gantt_rtl\"); // GS-1499\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar pos = this.getScrollState();\r\n\t\t\tvar posX = pos ? pos.x : 0;\r\n\t\t\tif(this._getHorizontalScrollbar()){\r\n\t\t\t\tvar scrollbar = this._getHorizontalScrollbar();\r\n\t\t\t\tposX = scrollbar.$config.codeScrollLeft || posX || 0;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvisibleDate = null;\r\n\t\t\tif(posX){\r\n\t\t\t\tvisibleDate = gantt.dateFromPos(posX + this.config.task_scroll_offset);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcalculateScaleRange(this);\r\n\r\n\t\tif(!isHeadless(gantt)){\r\n\t\t\tthis.$layout.$config.autosize = this.config.autosize;\r\n\t\t\tvar preserveScroll = this.config.preserve_scroll;\r\n\t\t\tthis.config.preserve_scroll = false; // prevent scrolling from layout resize, scroll will be called here later on\r\n\t\t\tthis.$layout.resize();\r\n\t\t\tthis.config.preserve_scroll = preserveScroll;\r\n\r\n\t\t\tif(this.config.preserve_scroll && pos){\r\n\t\t\t\t// GS-1640: We need pos.y, otherwise part of the timeline won't be rendered if the scrollbar disappeared\r\n\t\t\t\t// GS-2945: don't need to scroll if the zoom ext was initialized cause it will be scrolled in zoom\r\n\t\t\t\tconst zoom = gantt.ext.zoom._initialized;  \r\n\t\t\t\tif ((posX || pos.y) && !zoom) {\r\n\t\t\t\t\tvar new_pos = gantt.getScrollState();\r\n\t\t\t\t\tvar new_date = gantt.dateFromPos(new_pos.x);\r\n\t\t\t\t\tif(!(+visibleDate == +new_date && new_pos.y == pos.y)){\r\n\t\t\t\t\t\tvar posX = null;\r\n\t\t\t\t\t\tvar posY = null;\r\n\t\t\t\t\t\tif(visibleDate){\r\n\t\t\t\t\t\t\tvar posX = Math.max(gantt.posFromDate(visibleDate) - gantt.config.task_scroll_offset, 0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(pos.y){\r\n\t\t\t\t\t\t\tposY = pos.y;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgantt.scrollTo(posX, posY);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// GS-1640: We need to reset the scroll position for the grid if the scrollbar disappeared and\r\n\t\t\t\t// the grid and timeline have different scrollbars\r\n\t\t\t\t// GS-2718: if we have resources and two verticall scrollbars for tasks timeline and resource timeline\r\n\t\t\t\t// we don't get the scroll state of the resource timeline\r\n\t\t\t\tconst scrollbarsInfo = this.$layout.getScrollbarsInfo();\r\n\t\t\t\tscrollbarsInfo.forEach((scroll_info) => {\r\n\t\t\t\t\tconst scroll = gantt.$ui.getView(scroll_info.id);\r\n\t\t\t\t\tconst scrollbarNodeVisible = gantt.utils.dom.isChildOf(scroll.$view, gantt.$container);\r\n\t\t\t\t\tscroll_info.boundViews.forEach((viewName) => {\r\n\t\t\t\t\t\tconst view = gantt.$ui.getView(viewName);\r\n\t\t\t\t\t\tif(scroll_info.y && scroll_info.y != pos.y){\r\n\t\t\t\t\t\t\tif(view && !scrollbarNodeVisible){\r\n\t\t\t\t\t\t\t\tview.scrollTo(undefined, 0);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//GS-2586: take into account the horizontal scroll of the resource timeline\r\n\t\t\t\t\t\tif(scroll_info.x_pos && scroll_info.x_pos != pos.x){\r\n\t\t\t\t\t\t\tif(view && scrollbarNodeVisible){\r\n\t\t\t\t\t\t\t\tview.scrollTo(scroll_info.x_pos, undefined);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\tthis.callEvent(\"onGanttRender\", []);\r\n\t};\r\n\r\n\t//TODO: add layout.resize method that wouldn't trigger data repaint\r\n\tgantt.setSizes = gantt.render;\r\n\r\n\r\n\tgantt.getTaskRowNode = function(id) {\r\n\t\tvar els = this.$grid_data.childNodes;\r\n\t\tvar attribute = this.config.task_attribute;\r\n\t\tfor (var i = 0; i < els.length; i++) {\r\n\t\t\tif (els[i].getAttribute) {\r\n\t\t\t\tvar value = els[i].getAttribute(attribute);\r\n\t\t\t\tif (value == id) return els[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\tgantt.changeLightboxType = function(type){\r\n\t\tif(this.getLightboxType() == type)\r\n\t\t\treturn true;\r\n\t\tgantt._silent_redraw_lightbox(type);\r\n\t};\r\n\r\n\tgantt._get_link_type = function (from_start, to_start) {\r\n\t\tvar type = null;\r\n\t\tif (from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_start;\r\n\t\t} else if (!from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_start;\r\n\t\t} else if (!from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_finish;\r\n\t\t} else if (from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_finish;\r\n\t\t}\r\n\t\treturn type;\r\n\t};\r\n\r\n\tgantt.isLinkAllowed = function (from, to, from_start, to_start) {\r\n\t\tvar link = null;\r\n\t\tif (typeof(from) == \"object\") {\r\n\t\t\tlink = from;\r\n\t\t} else {\r\n\t\t\tlink = {source: from, target: to, type: this._get_link_type(from_start, to_start)};\r\n\t\t}\r\n\r\n\t\tif (!link) return false;\r\n\t\tif (!(link.source && link.target && link.type)) return false;\r\n\t\tif (link.source == link.target) return false;\r\n\r\n\t\tvar res = true;\r\n\t\t//any custom rules\r\n\t\tif (this.checkEvent(\"onLinkValidation\"))\r\n\t\t\tres = this.callEvent(\"onLinkValidation\", [link]);\r\n\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tgantt._correct_dst_change = function(date, prevOffset, step, unit){\r\n\t\tvar time_unit = helpers.getSecondsInUnit(unit) * step;\r\n\t\tif(time_unit > 60*60 && time_unit < 60*60*24){\r\n\t\t\t//correct dst change only if current unit is more than one hour and less than day (days have own checking), e.g. 12h\r\n\t\t\tvar offsetChanged = date.getTimezoneOffset() - prevOffset;\r\n\t\t\tif(offsetChanged){\r\n\t\t\t\tdate = gantt.date.add(date, offsetChanged, \"minute\");\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn date;\r\n\t};\r\n\r\n\tgantt.isSplitTask = function(task){\r\n\t\tgantt.assert(task && task instanceof Object, \"Invalid argument <b>task</b>=\"+task+\" of gantt.isSplitTask. Task object was expected\");\r\n\t\treturn this.$data.tasksStore._isSplitItem(task);\r\n\t};\r\n\r\n\tgantt._is_icon_open_click = function(e) {\r\n\t\tif (!e)\r\n\t\t\treturn false;\r\n\t\tvar target = e.target || e.srcElement;\r\n\t\tif (!(target && target.className))\r\n\t\t\treturn false;\r\n\t\tvar className = domHelpers.getClassName(target);\r\n\t\tif (className.indexOf(\"gantt_tree_icon\") !== -1 && (className.indexOf(\"gantt_close\") !== -1 || className.indexOf(\"gantt_open\") !== -1))\r\n\t\t\treturn true;\r\n\t\treturn false;\r\n\t};\r\n\r\n};","/*\r\n \tasserts will be removed in final code, so you can place them anythere\r\n\twithout caring about performance impacts\r\n*/\r\n\r\nexport default function(gantt){\r\n\treturn function assert(check, message){\r\n\t\tif (!check){\r\n\t\t\tif(gantt.config.show_errors && gantt.callEvent(\"onError\",[message]) !== false) {\r\n\t\t\t\tif (gantt.message) {\r\n\t\t\t\t\tgantt.message({type: \"error\", text: message, expire: -1});\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// eslint-disable-next-line\r\n\t\t\t\t\tconsole.log(message);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// eslint-disable-next-line no-debugger\r\n\t\t\t\tdebugger;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\" \", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \" \", \" \", \" \"],\r\n\t\tmonth_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"  ,   \", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"       \",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \" \",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"Ma\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tmonth_short: [\"\", \"\", \"\", \"\", \"Ma\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"\", //    , ?\r\n\t\tconfirm_deleting: \"   , ?\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \" \",\r\n\t\tsection_type: \"\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"\",\r\n\t\tcolumn_text: \"\",\r\n\t\tcolumn_start_date: \"\",\r\n\t\tcolumn_duration: \"\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"\",\r\n\t\tconfirm_link_deleting: \" \",\r\n\t\tlink_start: \"()\",\r\n\t\tlink_end: \"()\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"ii\",\r\n\t\thours: \"i\",\r\n\t\tdays: \"\",\r\n\t\tweeks: \"\",\r\n\t\tmonths: \"\",\r\n\t\tyears: \"\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n @Traducido por Vicente Adria Bohigues - vicenteadria@hotmail.com\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Gener\", \"Febrer\", \"Mar\", \"Abril\", \"Maig\", \"Juny\", \"Juliol\", \"Agost\", \"Setembre\", \"Octubre\", \"Novembre\", \"Desembre\"],\r\n\t\tmonth_short: [\"Gen\", \"Feb\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Oct\", \"Nov\", \"Des\"],\r\n\t\tday_full: [\"Diumenge\", \"Dilluns\", \"Dimarts\", \"Dimecres\", \"Dijous\", \"Divendres\", \"Dissabte\"],\r\n\t\tday_short: [\"Dg\", \"Dl\", \"Dm\", \"Dc\", \"Dj\", \"Dv\", \"Ds\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nova tasca\",\r\n\t\ticon_save: \"Guardar\",\r\n\t\ticon_cancel: \"Cancellar\",\r\n\t\ticon_details: \"Detalls\",\r\n\t\ticon_edit: \"Editar\",\r\n\t\ticon_delete: \"Esborrar\",\r\n\t\tconfirm_closing: \"\", // \"Els seus canvis es perdrn, continuar ?\"\r\n\t\tconfirm_deleting: \"L'esdeveniment s'esborrar definitivament, continuar ?\",\r\n\t\tsection_description: \"Descripci\",\r\n\t\tsection_time: \"Periode de temps\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Cancellar\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\nTranslation by FreezeSoul\r\n\r\nUpdate 26/10/2015:\r\nTranslation of new labels by zwh8800\r\n https://github.com/DHTMLX/gantt/pull/7\r\n\r\n*/\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tmonth_short: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"\",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"!\", // Your changes will be lost, are your sure?\r\n\t\tconfirm_deleting: \"?\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \"\",\r\n\t\tsection_type: \"\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"\",\r\n\t\tcolumn_text: \"\",\r\n\t\tcolumn_start_date: \"\",\r\n\t\tcolumn_duration: \"\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\r\n\t\tlink: \"\",\r\n\t\tconfirm_link_deleting: \"\",\r\n\t\tlink_start: \" ()\",\r\n\t\tlink_end: \" ()\",\r\n\r\n\t\ttype_task: \"\",\r\n\t\ttype_project: \"\",\r\n\t\ttype_milestone: \"\",\r\n\r\n\t\tminutes: \"\",\r\n\t\thours: \"\",\r\n\t\tdays: \"\",\r\n\t\tweeks: \"\",\r\n\t\tmonths: \"\",\r\n\t\tyears: \"\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Leden\", \"nor\", \"Bezen\", \"Duben\", \"Kvten\", \"erven\", \"ervenec\", \"Srpen\", \"Z\", \"jen\", \"Listopad\", \"Prosinec\"],\r\n\t\tmonth_short: [\"Led\", \"n\", \"Be\", \"Dub\", \"Kv\", \"er\", \"ec\", \"Srp\", \"Z\", \"j\", \"List\", \"Pro\"],\r\n\t\tday_full: [\"Nedle\", \"Pondl\", \"ter\", \"Steda\", \"tvrtek\", \"Ptek\", \"Sobota\"],\r\n\t\tday_short: [\"Ne\", \"Po\", \"t\", \"St\", \"t\", \"P\", \"So\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nov prce\",\r\n\t\ticon_save: \"Uloit\",\r\n\t\ticon_cancel: \"Zpt\",\r\n\t\ticon_details: \"Detail\",\r\n\t\ticon_edit: \"Edituj\",\r\n\t\ticon_delete: \"Smazat\",\r\n\t\tconfirm_closing: \"\", // Vae zmny budou ztraceny, opravdu ?\r\n\t\tconfirm_deleting: \"Udlost bude trvale smazna, opravdu?\",\r\n\t\tsection_description: \"Poznmky\",\r\n\t\tsection_time: \"Doba platnosti\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Zpt\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Marts\", \"April\", \"Maj\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Maj\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Sndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lrdag\"],\r\n\t\tday_short: [\"Sn\", \"Man\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"Lr\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Ny opgave\",\r\n\t\ticon_save: \"Gem\",\r\n\t\ticon_cancel: \"Fortryd\",\r\n\t\ticon_details: \"Detaljer\",\r\n\t\ticon_edit: \"Tilret\",\r\n\t\ticon_delete: \"Slet\",\r\n\t\tconfirm_closing: \"Dine rettelser vil g tabt.. Er dy sikker?\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Bigivenheden vil blive slettet permanent. Er du sikker?\",\r\n\t\tsection_description: \"Beskrivelse\",\r\n\t\tsection_time: \"Tidsperiode\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Fortryd\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\" Januar\", \" Februar\", \" Mrz \", \" April\", \" Mai\", \" Juni\", \" Juli\", \" August\", \" September \", \" Oktober\", \" November \", \" Dezember\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mr\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dez\"],\r\n\t\tday_full: [\"Sonntag\", \"Montag\", \"Dienstag\", \" Mittwoch\", \" Donnerstag\", \"Freitag\", \"Samstag\"],\r\n\t\tday_short: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Neue Aufgabe\",\r\n\t\ticon_save: \"Speichern\",\r\n\t\ticon_cancel: \"Abbrechen\",\r\n\t\ticon_details: \"Details\",\r\n\t\ticon_edit: \"ndern\",\r\n\t\ticon_delete: \"Lschen\",\r\n\t\tconfirm_closing: \"\", // \"Ihre Vernderungen werden verloren sein, wollen Sie ergnzen? \"\r\n\t\tconfirm_deleting: \"Der Eintrag wird gelscht\",\r\n\t\tsection_description: \"Beschreibung\",\r\n\t\tsection_time: \"Zeitspanne\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"PSP\",\r\n\t\tcolumn_text: \"Task-Namen\",\r\n\t\tcolumn_start_date: \"Startzeit\",\r\n\t\tcolumn_duration: \"Dauer\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"werden gelscht\",\r\n\t\tlink_start: \"(starten)\",\r\n\t\tlink_end: \"(ende)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minuten\",\r\n\t\thours: \"Stunden\",\r\n\t\tdays: \"Tage\",\r\n\t\tweeks: \"Wochen\",\r\n\t\tmonths: \"Monate\",\r\n\t\tyears: \"Jahre\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Abbrechen\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Regel\",\r\n\t\tconstraint_type: \"Regel\",\r\n\t\tconstraint_date: \"Regel - Datum\",\r\n\t\tasap: \"So bald wie mglich\",\r\n\t\talap: \"So spt wie mglich\",\r\n\t\tsnet: \"Beginn nicht vor\",\r\n\t\tsnlt: \"Beginn nicht spter als\",\r\n\t\tfnet: \"Fertigstellung nicht vor\",\r\n\t\tfnlt: \"Fertigstellung nicht spter als\",\r\n\t\tmso: \"Muss beginnen am\",\r\n\t\tmfo: \"Muss fertig sein am\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tmonth_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"    .   ;\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \" \",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\r\n\t\tday_short: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"New task\",\r\n\t\ticon_save: \"Save\",\r\n\t\ticon_cancel: \"Cancel\",\r\n\t\ticon_details: \"Details\",\r\n\t\ticon_edit: \"Edit\",\r\n\t\ticon_delete: \"Delete\",\r\n\t\tconfirm_closing: \"\",// Your changes will be lost, are you sure?\r\n\t\tconfirm_deleting: \"Task will be deleted permanently, are you sure?\",\r\n\t\tsection_description: \"Description\",\r\n\t\tsection_time: \"Time period\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\r\n\t\t/* grid columns */\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Cancel\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\t\t\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;","/*\r\n @Autor Manuel Fernandez Panzuela - www.mfernandez.es\r\n\r\n Update 30/10/2015:\r\n Translation of new labels by Jorge Macias\r\n https://disqus.com/by/disqus_bTuZk1voC7/\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"],\r\n\t\tmonth_short: [\"Ene\", \"Feb\", \"Mar\", \"Abr\", \"May\", \"Jun\", \"Jul\", \"Ago\", \"Sep\", \"Oct\", \"Nov\", \"Dic\"],\r\n\t\tday_full: [\"Domingo\", \"Lunes\", \"Martes\", \"Mircoles\", \"Jueves\", \"Viernes\", \"Sbado\"],\r\n\t\tday_short: [\"Dom\", \"Lun\", \"Mar\", \"Mi\", \"Jue\", \"Vie\", \"Sb\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nueva tarea\",\r\n\t\ticon_save: \"Guardar\",\r\n\t\ticon_cancel: \"Cancelar\",\r\n\t\ticon_details: \"Detalles\",\r\n\t\ticon_edit: \"Editar\",\r\n\t\ticon_delete: \"Eliminar\",\r\n\t\tconfirm_closing: \"\", // \"Sus cambios se perdern, continuar ?\"\r\n\t\tconfirm_deleting: \"El evento se borrar definitivamente, continuar?\",\r\n\t\tsection_description: \"Descripcin\",\r\n\t\tsection_time: \"Perodo\",\r\n\t\tsection_type: \"Tipo\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"EDT\",\r\n\t\tcolumn_text: \"Tarea\",\r\n\t\tcolumn_start_date: \"Inicio\",\r\n\t\tcolumn_duration: \"Duracin\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Enlace\",\r\n\t\tconfirm_link_deleting: \"ser borrada\",\r\n\t\tlink_start: \" (inicio)\",\r\n\t\tlink_end: \" (fin)\",\r\n\r\n\t\ttype_task: \"Tarea\",\r\n\t\ttype_project: \"Proyecto\",\r\n\t\ttype_milestone: \"Hito\",\r\n\r\n\r\n\t\tminutes: \"Minutos\",\r\n\t\thours: \"Horas\",\r\n\t\tdays: \"Das\",\r\n\t\tweeks: \"Semanas\",\r\n\t\tmonths: \"Meses\",\r\n\t\tyears: \"Aos\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Cancelar\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n dhtmlxGantt Persian (Farsi, fa_IR) locale by Mohammad Shokri http://slashsbin.com/\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\"\r\n\t\t],\r\n\t\tmonth_short: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n\t\tday_full: [\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\"\r\n\t\t],\r\n\t\tday_short: [\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\"\r\n\t\t]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"       \",\r\n\t\tconfirm_deleting: \"         \",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \" \",\r\n\t\tsection_type: \"\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"\",\r\n\t\tcolumn_start_date: \" \",\r\n\t\tcolumn_duration: \"\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"\",\r\n\t\tconfirm_link_deleting: \"  \",\r\n\t\tlink_start: \" ()\",\r\n\t\tlink_end: \" ()\",\r\n\r\n\t\ttype_task: \"\",\r\n\t\ttype_project: \"\",\r\n\t\ttype_milestone: \"\",\r\n\r\n\t\tminutes: \"\",\r\n\t\thours: \"\",\r\n\t\tdays: \"\",\r\n\t\tweeks: \"\",\r\n\t\tmonths: \"\",\r\n\t\tyears: \"\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Tammikuu\", \"Helmikuu\", \"Maaliskuu\", \"Huhtikuu\", \"Toukokuu\", \"Kes&auml;kuu\", \"Hein&auml;kuu\", \"Elokuu\", \"Syyskuu\", \"Lokakuu\", \"Marraskuu\", \"Joulukuu\"],\r\n\t\tmonth_short: [\"Tam\", \"Hel\", \"Maa\", \"Huh\", \"Tou\", \"Kes\", \"Hei\", \"Elo\", \"Syy\", \"Lok\", \"Mar\", \"Jou\"],\r\n\t\tday_full: [\"Sunnuntai\", \"Maanantai\", \"Tiistai\", \"Keskiviikko\", \"Torstai\", \"Perjantai\", \"Lauantai\"],\r\n\t\tday_short: [\"Su\", \"Ma\", \"Ti\", \"Ke\", \"To\", \"Pe\", \"La\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Uusi tehtv\",\r\n\t\ticon_save: \"Tallenna\",\r\n\t\ticon_cancel: \"Peru\",\r\n\t\ticon_details: \"Tiedot\",\r\n\t\ticon_edit: \"Muokkaa\",\r\n\t\ticon_delete: \"Poista\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Haluatko varmasti poistaa tapahtuman?\",\r\n\t\tsection_description: \"Kuvaus\",\r\n\t\tsection_time: \"Aikajakso\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Peru\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Janvier\", \"Fvrier\", \"Mars\", \"Avril\", \"Mai\", \"Juin\", \"Juillet\", \"Aot\", \"Septembre\", \"Octobre\", \"Novembre\", \"Dcembre\"],\r\n\t\tmonth_short: [\"Jan\", \"Fv\", \"Mar\", \"Avr\", \"Mai\", \"Juin\", \"Juil\", \"Ao\", \"Sep\", \"Oct\", \"Nov\", \"Dc\"],\r\n\t\tday_full: [\"Dimanche\", \"Lundi\", \"Mardi\", \"Mercredi\", \"Jeudi\", \"Vendredi\", \"Samedi\"],\r\n\t\tday_short: [\"Dim\", \"Lun\", \"Mar\", \"Mer\", \"Jeu\", \"Ven\", \"Sam\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nouvelle tche\",\r\n\t\ticon_save: \"Enregistrer\",\r\n\t\ticon_cancel: \"Annuler\",\r\n\t\ticon_details: \"Dtails\",\r\n\t\ticon_edit: \"Modifier\",\r\n\t\ticon_delete: \"Effacer\",\r\n\t\tconfirm_closing: \"\",// Vos modifications seront perdus, tes-vous sr ?\r\n\t\tconfirm_deleting: \"L'vnement sera effac sans appel, tes-vous sr ?\",\r\n\r\n\t\tsection_description: \"Description\",\r\n\t\tsection_time: \"Priode\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"OTP\",\r\n\t\tcolumn_text: \"Nom de la tche\",\r\n\t\tcolumn_start_date: \"Date initiale\",\r\n\t\tcolumn_duration: \"Dure\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Le lien\",\r\n\t\tconfirm_link_deleting: \"sera supprim\",\r\n\t\tlink_start: \"(dbut)\",\r\n\t\tlink_end: \"(fin)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Heures\",\r\n\t\tdays: \"Jours\",\r\n\t\tweeks: \"Semaines\",\r\n\t\tmonths: \"Mois\",\r\n\t\tyears: \"Annes\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Annuler\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tmonth_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"  .?\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \"\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n  Translation by Davor\r\n http://docs.dhtmlx.com/gantt/desktop__localization.html#comment-2569116291\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Sijeanj\", \"Veljaa\", \"Oujak\", \"Travanj\", \"Svibanj\", \"Lipanj\", \"Srpanj\", \"Kolovoz\", \"Rujan\", \"Listopad\", \"Studeni\", \"Prosinac\"],\r\n\t\tmonth_short: [\"Sij\", \"Velj\", \"Ou\", \"Tra\", \"Svi\", \"Lip\", \"Srp\", \"Kol\", \"Ruj\", \"Lis\", \"Stu\", \"Pro\"],\r\n\t\tday_full: [\"Nedjelja\", \"Ponedjeljak\", \"Utorak\", \"Srijeda\", \"etvrtak\", \"Petak\", \"Subota\"],\r\n\t\tday_short: [\"Ned\", \"Pon\", \"Uto\", \"Sri\", \"et\", \"Pet\", \"Sub\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Novi Zadatak\",\r\n\t\ticon_save: \"Spremi\",\r\n\t\ticon_cancel: \"Odustani\",\r\n\t\ticon_details: \"Detalji\",\r\n\t\ticon_edit: \"Izmjeni\",\r\n\t\ticon_delete: \"Obrii\",\r\n\t\tconfirm_closing: \"\",\r\n\t\tconfirm_deleting: \"Zadatak e biti trajno izbrisan, jeste li sigurni?\",\r\n\t\tsection_description: \"Opis\",\r\n\t\tsection_time: \"Vremenski Period\",\r\n\t\tsection_type: \"Tip\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\r\n\t\t/* grid columns */\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Naziv Zadatka\",\r\n\t\tcolumn_start_date: \"Poetno Vrijeme\",\r\n\t\tcolumn_duration: \"Trajanje\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Poveznica\",\r\n\t\tconfirm_link_deleting: \"e biti izbrisan\",\r\n\t\tlink_start: \" (poetak)\",\r\n\t\tlink_end: \" (kraj)\",\r\n\r\n\t\ttype_task: \"Zadatak\",\r\n\t\ttype_project: \"Projekt\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\t\tminutes: \"Minute\",\r\n\t\thours: \"Sati\",\r\n\t\tdays: \"Dani\",\r\n\t\tweeks: \"Tjedni\",\r\n\t\tmonths: \"Mjeseci\",\r\n\t\tyears: \"Godine\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Odustani\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Janur\", \"Februr\", \"Mrcius\", \"prilis\", \"Mjus\", \"Jnius\", \"Jlius\", \"Augusztus\", \"Szeptember\", \"Oktber\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mr\", \"pr\", \"Mj\", \"Jn\", \"Jl\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Vasrnap\", \"Htf\", \"Kedd\", \"Szerda\", \"Cstrtk\", \"Pntek\", \"szombat\"],\r\n\t\tday_short: [\"Va\", \"H\", \"Ke\", \"Sze\", \"Cs\", \"P\", \"Szo\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"j feladat\",\r\n\t\ticon_save: \"Ments\",\r\n\t\ticon_cancel: \"Mgse\",\r\n\t\ticon_details: \"Rszletek\",\r\n\t\ticon_edit: \"Szerkeszts\",\r\n\t\ticon_delete: \"Trls\",\r\n\t\tconfirm_closing: \"\", // A vltozsok elvesznek, biztosan folytatja? \"\r\n\t\tconfirm_deleting: \"Az esemny trlve lesz, biztosan folytatja?\",\r\n\t\tsection_description: \"Lers\",\r\n\t\tsection_time: \"Idszak\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Mgse\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januari\", \"Februari\", \"Maret\", \"April\", \"Mei\", \"Juni\", \"Juli\", \"Agustus\", \"September\", \"Oktober\", \"November\", \"Desember\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mei\", \"Jun\", \"Jul\", \"Ags\", \"Sep\", \"Okt\", \"Nov\", \"Des\"],\r\n\t\tday_full: [\"Minggu\", \"Senin\", \"Selasa\", \"Rabu\", \"Kamis\", \"Jumat\", \"Sabtu\"],\r\n\t\tday_short: [\"Ming\", \"Sen\", \"Sel\", \"Rab\", \"Kam\", \"Jum\", \"Sab\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Tugas baru\",\r\n\t\ticon_save: \"Simpan\",\r\n\t\ticon_cancel: \"Batal\",\r\n\t\ticon_details: \"Detail\",\r\n\t\ticon_edit: \"Edit\",\r\n\t\ticon_delete: \"Hapus\",\r\n\t\tconfirm_closing: \"\", /* Perubahan tidak akan disimpan ? */\r\n\t\tconfirm_deleting: \"Acara akan dihapus\",\r\n\t\tsection_description: \"Keterangan\",\r\n\t\tsection_time: \"Periode\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Batal\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n Update 29/12/2015:\r\n New labels translation by ARCANGELI CLAUDIO\r\n\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Gennaio\", \"Febbraio\", \"Marzo\", \"Aprile\", \"Maggio\", \"Giugno\", \"Luglio\", \"Agosto\", \"Settembre\", \"Ottobre\", \"Novembre\", \"Dicembre\"],\r\n\t\tmonth_short: [\"Gen\", \"Feb\", \"Mar\", \"Apr\", \"Mag\", \"Giu\", \"Lug\", \"Ago\", \"Set\", \"Ott\", \"Nov\", \"Dic\"],\r\n\t\tday_full: [\"Domenica\", \"Luned\", \"Marted\", \"Mercoled\", \"Gioved\", \"Venerd\", \"Sabato\"],\r\n\t\tday_short: [\"Dom\", \"Lun\", \"Mar\", \"Mer\", \"Gio\", \"Ven\", \"Sab\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nuovo compito\",\r\n\t\ticon_save: \"Salva\",\r\n\t\ticon_cancel: \"Chiudi\",\r\n\t\ticon_details: \"Dettagli\",\r\n\t\ticon_edit: \"Modifica\",\r\n\t\ticon_delete: \"Elimina\",\r\n\t\tconfirm_closing: \"\",// \"Sei sicuro di confermare la chiusura?\",\r\n\t\tconfirm_deleting: \"Sei sicuro di confermare l'eliminazione?\",\r\n\t\tsection_description: \"Descrizione\",\r\n\t\tsection_time: \"Periodo di tempo\",\r\n\t\tsection_type: \"Tipo\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Nome Attivit\",\r\n\t\tcolumn_start_date: \"Inizio\",\r\n\t\tcolumn_duration: \"Durata\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"sar eliminato\",\r\n\t\tlink_start: \" (inizio)\",\r\n\t\tlink_end: \" (fine)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minuti\",\r\n\t\thours: \"Ore\",\r\n\t\tdays: \"Giorni\",\r\n\t\tweeks: \"Settimane\",\r\n\t\tmonths: \"Mesi\",\r\n\t\tyears: \"Anni\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Chiudi\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n Translation by Genexus Japan Inc.\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n\t\tmonth_short: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"\",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"\", // \r\n\t\tconfirm_deleting: \"\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \"\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n\tTranslated by cjkim@dbvalley.com\r\n*/\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n\t\tmonth_short: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \" \",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"\",\r\n\t\tconfirm_deleting: \" ?\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \"\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"\",\r\n\t\tcolumn_start_date: \"\",\r\n\t\tcolumn_duration: \"\",\r\n\t\tcolumn_add: \"\",\r\n\t\tlink: \"\",\r\n\t\tconfirm_link_deleting: \" ?\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\t\ttype_task: \"\",\r\n\t\ttype_project: \"\",\r\n\t\ttype_milestone: \"\",\r\n\t\tminutes: \"\",\r\n\t\thours: \"\",\r\n\t\tdays: \"\",\r\n\t\tweeks: \"\",\r\n\t\tmonths: \"\",\r\n\t\tyears: \"\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","export default class LocaleManager{\r\n\tprivate _locales:{[key:string]: IGanttLocale };\r\n\r\n\tconstructor(config: {[key:string]: IGanttLocale }){\r\n\t\tthis._locales = {};\r\n\t\tfor(const i in config){\r\n\t\t\tthis._locales[i] = config[i];\r\n\t\t}\r\n\t}\r\n\r\n\taddLocale = (name: string, locale: IGanttLocale) => {\r\n\t\tthis._locales[name] = locale;\r\n\t};\r\n\r\n\tgetLocale = (name: string): IGanttLocale => {\r\n\t\treturn this._locales[name];\r\n\t};\r\n}","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Mars\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Desember\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Des\"],\r\n\t\tday_full: [\"Sndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lrdag\"],\r\n\t\tday_short: [\"Sn\", \"Mon\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"Lr\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Ny oppgave\",\r\n\t\ticon_save: \"Lagre\",\r\n\t\ticon_cancel: \"Avbryt\",\r\n\t\ticon_details: \"Detaljer\",\r\n\t\ticon_edit: \"Rediger\",\r\n\t\ticon_delete: \"Slett\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Hendelsen vil bli slettet permanent. Er du sikker?\",\r\n\t\tsection_description: \"Beskrivelse\",\r\n\t\tsection_time: \"Tidsperiode\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Avbryt\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januari\", \"Februari\", \"Maart\", \"April\", \"Mei\", \"Juni\", \"Juli\", \"Augustus\", \"September\", \"Oktober\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"mrt\", \"Apr\", \"Mei\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Zondag\", \"Maandag\", \"Dinsdag\", \"Woensdag\", \"Donderdag\", \"Vrijdag\", \"Zaterdag\"],\r\n\t\tday_short: [\"Zo\", \"Ma\", \"Di\", \"Wo\", \"Do\", \"Vr\", \"Za\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nieuwe taak\",\r\n\t\ticon_save: \"Opslaan\",\r\n\t\ticon_cancel: \"Annuleren\",\r\n\t\ticon_details: \"Details\",\r\n\t\ticon_edit: \"Bewerken\",\r\n\t\ticon_delete: \"Verwijderen\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Item zal permanent worden verwijderd, doorgaan?\",\r\n\t\tsection_description: \"Beschrijving\",\r\n\t\tsection_time: \"Tijd periode\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Taak omschrijving\",\r\n\t\tcolumn_start_date: \"Startdatum\",\r\n\t\tcolumn_duration: \"Duur\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Koppeling\",\r\n\t\tconfirm_link_deleting: \"zal worden verwijderd\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (eind)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"minuten\",\r\n\t\thours: \"uren\",\r\n\t\tdays: \"dagen\",\r\n\t\tweeks: \"weken\",\r\n\t\tmonths: \"maanden\",\r\n\t\tyears: \"jaren\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Annuleren\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Mars\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Desember\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Des\"],\r\n\t\tday_full: [\"Sndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lrdag\"],\r\n\t\tday_short: [\"Sn\", \"Man\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"Lr\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Ny oppgave\",\r\n\t\ticon_save: \"Lagre\",\r\n\t\ticon_cancel: \"Avbryt\",\r\n\t\ticon_details: \"Detaljer\",\r\n\t\ticon_edit: \"Endre\",\r\n\t\ticon_delete: \"Slett\",\r\n\t\tconfirm_closing: \"Endringer blir ikke lagret, er du sikker?\", // Endringer blir ikke lagret, er du sikker?\r\n\t\tconfirm_deleting: \"Oppfringen vil bli slettet, er du sikker?\",\r\n\t\tsection_description: \"Beskrivelse\",\r\n\t\tsection_time: \"Tidsperiode\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Avbryt\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Stycze\", \"Luty\", \"Marzec\", \"Kwiecie\", \"Maj\", \"Czerwiec\", \"Lipiec\", \"Sierpie\", \"Wrzesie\", \"Padziernik\", \"Listopad\", \"Grudzie\"],\r\n\t\tmonth_short: [\"Sty\", \"Lut\", \"Mar\", \"Kwi\", \"Maj\", \"Cze\", \"Lip\", \"Sie\", \"Wrz\", \"Pa\", \"Lis\", \"Gru\"],\r\n\t\tday_full: [\"Niedziela\", \"Poniedziaek\", \"Wtorek\", \"roda\", \"Czwartek\", \"Pitek\", \"Sobota\"],\r\n\t\tday_short: [\"Nie\", \"Pon\", \"Wto\", \"ro\", \"Czw\", \"Pi\", \"Sob\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nowe zadanie\",\r\n\t\ticon_save: \"Zapisz\",\r\n\t\ticon_cancel: \"Anuluj\",\r\n\t\ticon_details: \"Szczegy\",\r\n\t\ticon_edit: \"Edytuj\",\r\n\t\ticon_delete: \"Usu\",\r\n\t\tconfirm_closing: \"\", // Zmiany zostan usunite, jeste pewien?\r\n\t\tconfirm_deleting: \"Zdarzenie zostanie usunite na zawsze, kontynuowa?\",\r\n\t\tsection_description: \"Opis\",\r\n\t\tsection_time: \"Okres czasu\",\r\n\t\tsection_type: \"Typ\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Nazwa zadania\",\r\n\t\tcolumn_start_date: \"Pocztek\",\r\n\t\tcolumn_duration: \"Czas trwania\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"zostanie usunity\",\r\n\t\tlink_start: \" (pocztek)\",\r\n\t\tlink_end: \" (koniec)\",\r\n\r\n\t\ttype_task: \"Zadanie\",\r\n\t\ttype_project: \"Projekt\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minuty\",\r\n\t\thours: \"Godziny\",\r\n\t\tdays: \"Dni\",\r\n\t\tweeks: \"Tydzie\",\r\n\t\tmonths: \"Miesice\",\r\n\t\tyears: \"Lata\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Anuluj\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n\r\n TRANSLATION BY MATTHEUS PIROVANI RORIZ GONALVES\r\n\r\n mattheusroriz@hotmail.com / mattheus.pirovani@gmail.com /\r\n\r\n www.atrixian.com.br\r\n\r\n\r\n Updated by Jorge Albernaz Martins\r\n\r\n jorgefox@hotmail.com\r\n\r\n www.redfox.inf.br\r\n\r\n JorgeFox\r\n\r\n*/\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Janeiro\", \"Fevereiro\", \"Maro\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"],\r\n\t\tmonth_short: [\"Jan\", \"Fev\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Out\", \"Nov\", \"Dez\"],\r\n\t\tday_full: [\"Domingo\", \"Segunda\", \"Tera\", \"Quarta\", \"Quinta\", \"Sexta\", \"Sbado\"],\r\n\t\tday_short: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sab\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nova tarefa\",\r\n\t\ticon_save: \"Salvar\",\r\n\t\ticon_cancel: \"Cancelar\",\r\n\t\ticon_details: \"Detalhes\",\r\n\t\ticon_edit: \"Editar\",\r\n\t\ticon_delete: \"Excluir\",\r\n\t\tconfirm_closing: \"\",// Suas alteraes sero perdidas, confirme?\r\n\t\tconfirm_deleting: \"As tarefas sero excluidas permanentemente, confirme?\",\r\n\t\tsection_description: \"Descrio\",\r\n\t\tsection_time: \"Perodo\",\r\n\t\tsection_type: \"Tipo\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"EAP\",\r\n\t\tcolumn_text: \"Nome tarefa\",\r\n\t\tcolumn_start_date: \"Data incio\",\r\n\t\tcolumn_duration: \"Durao\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"Ser excludo!\",\r\n\t\tlink_start: \" (incio)\",\r\n\t\tlink_end: \" (fim)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Projeto\",\r\n\t\ttype_milestone: \"Marco\",\r\n\r\n\r\n\t\tminutes: \"Minutos\",\r\n\t\thours: \"Horas\",\r\n\t\tdays: \"Dias\",\r\n\t\tweeks: \"Semanas\",\r\n\t\tmonths: \"Meses\",\r\n\t\tyears: \"Anos\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Cancelar\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Restrio\",\r\n\t\tconstraint_type: \"Tipo Restrio\",\r\n\t\tconstraint_date: \"Data restrio\",\r\n\t\tasap: \"Mais breve possvel\",\r\n\t\talap: \"Mais tarde possvel\",\r\n\t\tsnet: \"No comear antes de\",\r\n\t\tsnlt: \"No comear depois de\",\r\n\t\tfnet: \"No terminar antes de\",\r\n\t\tfnlt: \"No terminar depois de\",\r\n\t\tmso: \"Precisa comear em\",\r\n\t\tmfo: \"Precisa terminar em\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n\tTraducere de Ovidiu Lixandru: http://www.madball.ro\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Ianuarie\", \"Februarie\", \"Martie\", \"Aprilie\", \"Mai\", \"Iunie\", \"Iulie\", \"August\", \"Septembrie\", \"Octombrie\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Ian\", \"Feb\", \"Mar\", \"Apr\", \"Mai\", \"Iun\", \"Iul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Duminica\", \"Luni\", \"Marti\", \"Miercuri\", \"Joi\", \"Vineri\", \"Sambata\"],\r\n\t\tday_short: [\"Du\", \"Lu\", \"Ma\", \"Mi\", \"Jo\", \"Vi\", \"Sa\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Sarcina noua\",\r\n\t\ticon_save: \"Salveaza\",\r\n\t\ticon_cancel: \"Anuleaza\",\r\n\t\ticon_details: \"Detalii\",\r\n\t\ticon_edit: \"Editeaza\",\r\n\t\ticon_delete: \"Sterge\",\r\n\t\tconfirm_closing: \"Schimbarile nu vor fi salvate, esti sigur?\",// Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Evenimentul va fi sters permanent, esti sigur?\",\r\n\t\tsection_description: \"Descriere\",\r\n\t\tsection_time: \"Interval\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Anuleaza\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"Ma\", \"\", \"\", \"\", \"\", \"O\", \"\", \"\"],\r\n\t\tmonth_short: [\"\", \"\", \"Ma\", \"A\", \"Ma\", \"\", \"\", \"A\", \"\", \"\", \"\", \"\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"\", //    , ?\r\n\t\tconfirm_deleting: \"   , ?\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \" \",\r\n\t\tsection_type: \"\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"\",\r\n\t\tcolumn_text: \"\",\r\n\t\tcolumn_start_date: \"\",\r\n\t\tcolumn_duration: \"\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"\",\r\n\t\tconfirm_link_deleting: \" \",\r\n\t\tlink_start: \" ()\",\r\n\t\tlink_end: \" ()\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"\",\r\n\t\thours: \"\",\r\n\t\tdays: \"\",\r\n\t\tweeks: \"\",\r\n\t\tmonths: \"\",\r\n\t\tyears: \"\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Marec\", \"April\", \"Maj\", \"Junij\", \"Julij\", \"Avgust\", \"September\", \"Oktober\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Maj\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Nedelja\", \"Ponedeljek\", \"Torek\", \"Sreda\", \"etrtek\", \"Petek\", \"Sobota\"],\r\n\t\tday_short: [\"Ned\", \"Pon\", \"Tor\", \"Sre\", \"et\", \"Pet\", \"Sob\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nova naloga\",\r\n\t\ticon_save: \"Shrani\",\r\n\t\ticon_cancel: \"Preklii\",\r\n\t\ticon_details: \"Podrobnosti\",\r\n\t\ticon_edit: \"Uredi\",\r\n\t\ticon_delete: \"Izbrii\",\r\n\t\tconfirm_closing: \"\", // Spremembe ne bodo shranjene. elite nadaljevati ?\r\n\t\tconfirm_deleting: \"Dogodek bo izbrisan. elite nadaljevati?\",\r\n\t\tsection_description: \"Opis\",\r\n\t\tsection_time: \"asovni okvir\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Preklii\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Janur\", \"Februr\", \"Marec\", \"Aprl\", \"Mj\", \"Jn\", \"Jl\", \"August\", \"September\", \"Oktber\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mj\", \"Jn\", \"Jl\", \"Aug\", \"Sept\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Nedea\", \"Pondelok\", \"Utorok\", \"Streda\", \"tvrtok\", \"Piatok\", \"Sobota\"],\r\n\t\tday_short: [\"Ne\", \"Po\", \"Ut\", \"St\", \"t\", \"Pi\", \"So\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nov loha\",\r\n\t\ticon_save: \"Uloi\",\r\n\t\ticon_cancel: \"Sp\",\r\n\t\ticon_details: \"Detail\",\r\n\t\ticon_edit: \"Edituj\",\r\n\t\ticon_delete: \"Zmaza\",\r\n\t\tconfirm_closing: \"Vae zmeny nebud uloen. Skutone?\", // Vae zmny budou ztraceny, opravdu ?\r\n\t\tconfirm_deleting: \"Udalos bude natrvalo vymazan. Skutone?\",\r\n\t\tsection_description: \"Poznmky\",\r\n\t\tsection_time: \"Doba platnosti\",\r\n\t\tsection_type: \"Type\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Sp\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n\tTranslation by Peter Eriksson\r\n */\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januari\", \"Februari\", \"Mars\", \"April\", \"Maj\", \"Juni\", \"Juli\", \"Augusti\", \"September\", \"Oktober\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Maj\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Sndag\", \"Mndag\", \"Tisdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lrdag\"],\r\n\t\tday_short: [\"Sn\", \"Mn\", \"Tis\", \"Ons\", \"Tor\", \"Fre\", \"Lr\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Ny uppgift\",\r\n\t\ticon_save: \"Spara\",\r\n\t\ticon_cancel: \"Avbryt\",\r\n\t\ticon_details: \"Detajer\",\r\n\t\ticon_edit: \"ndra\",\r\n\t\ticon_delete: \"Ta bort\",\r\n\t\tconfirm_closing: \"\",\r\n\t\tconfirm_deleting: \"r du sker p att du vill ta bort hndelsen permanent?\",\r\n\t\tsection_description: \"Beskrivning\",\r\n\t\tsection_time: \"Tid\",\r\n\t\tsection_type: \"Typ\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Uppgiftsnamn\",\r\n\t\tcolumn_start_date: \"Starttid\",\r\n\t\tcolumn_duration: \"Varaktighet\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\r\n\t\tlink: \"Lnk\",\r\n\t\tconfirm_link_deleting: \"kommer tas bort\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (slut)\",\r\n\t\ttype_task: \"Uppgift\",\r\n\t\ttype_project: \"Projekt\",\r\n\t\ttype_milestone: \"Milstolpe\",\r\n\r\n\t\tminutes: \"Minuter\",\r\n\t\thours: \"Timmar\",\r\n\t\tdays: \"Dagar\",\r\n\t\tweeks: \"Veckor\",\r\n\t\tmonths: \"Mnader\",\r\n\t\tyears: \"r\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Avbryt\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n * updated by @levkar at https://github.com/DHTMLX/gantt/pull/10\r\n */\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Ocak\", \"ubat\", \"Mart\", \"Nisan\", \"Mays\", \"Haziran\", \"Temmuz\", \"Austos\", \"Eyll\", \"Ekim\", \"Kasm\", \"Aralk\"],\r\n\t\tmonth_short: [\"Oca\", \"ub\", \"Mar\", \"Nis\", \"May\", \"Haz\", \"Tem\", \"Au\", \"Eyl\", \"Eki\", \"Kas\", \"Ara\"],\r\n\t\tday_full: [\"Pazar\", \"Pazartesi\", \"Sal\", \"aramba\", \"Perembe\", \"Cuma\", \"Cumartesi\"],\r\n\t\tday_short: [\"Paz\", \"Pzt\", \"Sal\", \"ar\", \"Per\", \"Cum\", \"Cmt\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Yeni grev\",\r\n\t\ticon_save: \"Kaydet\",\r\n\t\ticon_cancel: \"ptal\",\r\n\t\ticon_details: \"Detaylar\",\r\n\t\ticon_edit: \"Dzenle\",\r\n\t\ticon_delete: \"Sil\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Grev silinecek, emin misiniz?\",\r\n\t\tsection_description: \"Aklama\",\r\n\t\tsection_time: \"Zaman Aral\",\r\n\t\tsection_type: \"Tip\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Grev Ad\",\r\n\t\tcolumn_start_date: \"Balang\",\r\n\t\tcolumn_duration: \"Sre\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Balant\",\r\n\t\tconfirm_link_deleting: \"silinecek\",\r\n\t\tlink_start: \" (balang)\",\r\n\t\tlink_end: \" (biti)\",\r\n\r\n\t\ttype_task: \"Grev\",\r\n\t\ttype_project: \"Proje\",\r\n\t\ttype_milestone: \"Kilometreta\",\r\n\r\n\r\n\t\tminutes: \"Dakika\",\r\n\t\thours: \"Saat\",\r\n\t\tdays: \"Gn\",\r\n\t\tweeks: \"Hafta\",\r\n\t\tmonths: \"Ay\",\r\n\t\tyears: \"Yl\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"ptal\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tmonth_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"'\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"\", //   .   ?\r\n\t\tconfirm_deleting: \"  .  ?\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \" \",\r\n\t\tsection_type: \"\",\r\n\t\tsection_deadline: \"Deadline\",\r\n\t\tsection_baselines: \"Baselines\",\r\n\t\tsection_new_resources: \"Resources\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_add_button: \"Add Assignment\",\r\n\t\tresources_filter_placeholder: \"Search...\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\t\tresources_section_placeholder: \"Nothing assigned yet. Click 'Add Assignment' to assign resources.\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\",\r\n\r\n\t\t/* baselines control */\r\n\t\tbaselines_section_placeholder: \"Start adding a new baseline\",\r\n\t\tbaselines_add_button: \"Add Baseline\",\r\n\t\tbaselines_remove_button: \"Remove\",\r\n\t\tbaselines_remove_all_button: \"Remove All\",\r\n\r\n\t\t/* deadline control */\r\n\t\tdeadline_enable_button: \"Set\",\r\n\t\tdeadline_disable_button: \"Remove\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","import * as utils from \"../utils/utils\";\r\nimport constants from \"../constants\";\r\nimport ExtensionManager from \"../ext/extension_manager\";\r\n\r\nimport services from \"../core/common/services\";\r\nimport config from \"../core/common/config\";\r\nimport ajax from \"../core/common/ajax\";\r\nimport date from \"../core/common/date\";\r\nimport {remoteEvents} from \"../core/remote/remote_events\";\r\n\r\nimport DnD from \"../core/common/dnd\";\r\nimport templates from \"../core/common/templates\";\r\nimport eventable from \"../utils/eventable\";\r\n\r\nimport StateService from \"../core/common/state\";\r\n\r\nimport Promise from \"../utils/promise\";\r\nimport env from \"../utils/env\";\r\nimport datastoreHooks from \"../core/datastore/datastore_hooks\";\r\nimport DataProcessor from \"../core/dataprocessor\";\r\n\r\nimport plugins from \"../core/plugins\";\r\n\r\nimport grid_column_api from \"../core/grid_column_api\";\r\nimport tasks from \"../core/tasks\";\r\nimport parsing from \"../core/loading/parsing\";\r\nimport work_time from \"../core/worktime/work_time\";\r\nimport data from \"../core/data\";\r\n\r\nimport void_script_second from \"../publish_helpers/void_script_second\";\r\n\r\nimport data_task_types from \"../core/data_task_types\";\r\nimport cached_functions from \"../core/cached_functions\";\r\n\r\nimport gantt_core from \"../core/gantt_core\";\r\nimport destructor from \"../core/destructor\";\r\nimport void_script_third from \"../publish_helpers/void_script_third\";\r\n\r\nimport i18nFactory from \"../locale\";\r\n\r\nfunction DHXGantt(){\r\n\tthis.constants = constants;\r\n\tthis.version = VERSION;\r\n\tthis.license = LICENSE;\r\n\tthis.templates = {};\r\n\tthis.ext = {};\r\n\tthis.keys = {\r\n\t\tedit_save: this.constants.KEY_CODES.ENTER,\r\n\t\tedit_cancel: this.constants.KEY_CODES.ESC\r\n\t};\r\n}\r\n\r\nexport default function(supportedExtensions) {\r\n\t// use a named constructor to make gantt instance discoverable in heap snapshots\r\n\tvar gantt = new DHXGantt();\r\n\r\n\tvar extensionManager = new ExtensionManager(supportedExtensions);\r\n\tvar activePlugins = {};\r\n\tgantt.plugins = function(config){\r\n\t\tfor(var i in config){\r\n\t\t\tif(config[i] && !activePlugins[i]){\r\n\t\t\t\tvar plugin = extensionManager.getExtension(i);\r\n\t\t\t\tif(plugin){\r\n\t\t\t\t\tplugin(gantt);\r\n\t\t\t\t\tactivePlugins[i] = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn activePlugins;\r\n\t};\r\n\r\n\tgantt.$services = services();\r\n\tgantt.config = config();\r\n\tgantt.ajax =  ajax(gantt);\r\n\tgantt.date = date(gantt);\r\n\tgantt.RemoteEvents = remoteEvents;\r\n\r\n\tvar dnd = DnD(gantt);\r\n\tgantt.$services.setService(\"dnd\", function(){return dnd;});\r\n\r\n\tvar templatesLoader = templates(gantt);\r\n\tgantt.$services.setService(\"templateLoader\", function () {\r\n\t\treturn templatesLoader;\r\n\t});\r\n\r\n\teventable(gantt);\r\n\r\n\t\r\n\tvar stateService = new StateService();\r\n\r\n\tstateService.registerProvider(\"global\", function () {\r\n\t\tvar res = {\r\n\t\t\tmin_date: gantt._min_date,\r\n\t\t\tmax_date: gantt._max_date,\r\n\t\t\tselected_task: null\r\n\t\t};\r\n\r\n\t\t// do not throw error if getState called from non-initialized gantt\r\n\t\tif(gantt.$data && gantt.$data.tasksStore){\r\n\t\t\tres.selected_task = gantt.$data.tasksStore.getSelectedId();\r\n\t\t}\r\n\t\treturn res;\r\n\t});\r\n\tgantt.getState = stateService.getState;\r\n\tgantt.$services.setService(\"state\", function () {\r\n\t\treturn stateService;\r\n\t});\r\n\r\n\tutils.mixin(gantt, utils);\r\n\r\n\tgantt.Promise = Promise;\r\n\tgantt.env = env;\r\n\r\n\tdatastoreHooks(gantt);\r\n\r\n\tgantt.dataProcessor = DataProcessor.DEPRECATED_api;\r\n\tgantt.createDataProcessor = DataProcessor.createDataProcessor;\r\n\r\n\tplugins(gantt);\r\n\r\n\tgrid_column_api(gantt);\r\n\ttasks(gantt);\r\n\tparsing(gantt);\r\n\twork_time(gantt);\r\n\tdata(gantt);\r\n\r\n\tvoid_script_second(gantt);\r\n\r\n\tdata_task_types(gantt);\r\n\tcached_functions(gantt);\r\n\r\n\tgantt_core(gantt);\r\n\tdestructor(gantt);\r\n\tvoid_script_third(gantt);\r\n\r\n\tvar i18n = i18nFactory();\r\n\tgantt.i18n = {\r\n\t\taddLocale: i18n.addLocale,\r\n\t\tsetLocale: function(locale){\r\n\t\t\tif(typeof locale === \"string\"){\r\n\t\t\t\tvar localeObject = i18n.getLocale(locale);\r\n\t\t\t\tif(!localeObject){\r\n\t\t\t\t\tlocaleObject = i18n.getLocale(\"en\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgantt.locale = localeObject;\r\n\t\t\t}else if(locale){\r\n\t\t\t\tif(!gantt.locale){\r\n\t\t\t\t\tgantt.locale = locale;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfor(var i in locale){\r\n\t\t\t\t\t\tif(locale[i] && typeof locale[i] === \"object\"){\r\n\t\t\t\t\t\t\tif(!gantt.locale[i]){\r\n\t\t\t\t\t\t\t\tgantt.locale[i] = {};\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tgantt.mixin(gantt.locale[i], locale[i], true);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tgantt.locale[i] = locale[i];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst labels = gantt.locale.labels;\r\n\t\t\tlabels.gantt_save_btn = labels.gantt_save_btn || labels.icon_save;\r\n\t\t\tlabels.gantt_cancel_btn = labels.gantt_cancel_btn || labels.icon_cancel;\r\n\t\t\tlabels.gantt_delete_btn = labels.gantt_delete_btn || labels.icon_delete;\r\n\t\t},\r\n\t\tgetLocale: i18n.getLocale\r\n\t};\r\n\tgantt.i18n.setLocale(\"en\");\r\n\treturn gantt;\r\n};","export default function(){\r\n\tvar services = {};\r\n\tfunction register (name, getter){\r\n\t\tservices[name] = getter;\r\n\t}\r\n\r\n\tfunction getService(name){\r\n\t\tif(!services[name]){\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn services[name]();\r\n\t}\r\n\r\n\tfunction dropService(name) {\r\n\t\tif (services[name]) {\r\n\t\t\tdelete services[name];\r\n\t\t}\r\n\t}\r\n\r\n\tvar servicesEnum = {};\r\n\r\n\treturn {\r\n\t\tservices: servicesEnum,\r\n\t\tsetService: register,\r\n\t\tgetService: getService,\r\n\t\tdropService: dropService,\r\n\t\tdestructor: function(){\r\n\t\t\tfor(var i in services){\r\n\t\t\t\tif(services[i]){\r\n\t\t\t\t\tvar service = services[i];\r\n\t\t\t\t\tif(service && service.destructor){\r\n\t\t\t\t\t\tservice.destructor();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tservices = null;\r\n\t\t}\r\n\t};\r\n};\r\n","type DurationUnits = \"minute\" | \"hour\" | \"day\" | \"week\" | \"month\" | \"year\";\r\ntype Align = \"left\" | \"center\" | \"right\";\r\ntype SectionType = \"textarea\"\r\n\t\t\t\t\t| \"time\"\r\n\t\t\t\t\t| \"duration\"\r\n\t\t\t\t\t| \"select\"\r\n\t\t\t\t\t| \"typeselect\"\r\n\t\t\t\t\t| \"parent\"\r\n\t\t\t\t\t| \"template\"\r\n\t\t\t\t\t| \"checkbox\"\r\n\t\t\t\t\t| \"radio\"\r\n\t\t\t\t\t| \"resources\"\r\n\t\t\t\t\t| \"constraint\";\r\n\r\ntype LightboxSection = Array<ILightboxSection\r\n\t| ILightboxTimeAndDurationSection\r\n\t| ILightboxInputControl\r\n\t| ILightboxSelectControl\r\n\t| ILightboxParentControl\r\n\t| ILightboxTypeselectControl>;\r\n\r\ntype LayoutView = \"grid\"\r\n\t| \"timeline\"\r\n\t| \"resizer\"\r\n\t| \"scrollbar\"\r\n\t| \"resourceGrid\"\r\n\t| \"resourceTimeline\";\r\n\r\ninterface IColumnItem {\r\n\tname: string;\r\n\tlabel?: string;\r\n\ttree?: boolean;\r\n\talign?: Align;\r\n\thide?: boolean;\r\n\tmax_width?: number;\r\n\tmin_width?: number;\r\n\tresize?: boolean;\r\n\ttemplate?: (obj: any) => string;\r\n\twidth?: number | \"*\";\r\n}\r\n\r\nexport type TModifierKeys = \"metaKey\" | \"ctrlKey\" | \"altKey\" | \"shiftKey\" | false | undefined;\r\n\r\nexport interface IScale {\r\n\tcss?: () => string;\r\n\tdate?: string;\r\n\tstep: number;\r\n\ttemplate?: (date: Date) => string;\r\n\tunit: DurationUnits;\r\n}\r\n\r\ninterface ILightboxSection {\r\n\tname: string;\r\n\tmap_to: string;\r\n\ttype: SectionType;\r\n\theight?: number;\r\n\tfocus?: boolean;\r\n}\r\n\r\ninterface ILightboxTimeAndDurationSection extends ILightboxSection {\r\n\treadonly: boolean;\r\n\tyear_range: number[] | number;\r\n\tsingle_date: boolean;\r\n\ttime_format: string;\r\n}\r\n\r\ninterface ILightboxInputControl extends ILightboxSection {\r\n\tdefault_value?: any;\r\n\toptions?: Array<{key: string, label: string}>;\r\n}\r\n\r\ninterface ILightboxSelectControl extends ILightboxInputControl {\r\n\tonchange: () => boolean | undefined;\r\n}\r\n\r\ninterface ILightboxParentControl extends ILightboxSection {\r\n\tallow_root: boolean;\r\n\troot_label: string;\r\n\tsort?: (a: any, b: any) => -1 | 0 | 1;\r\n\tfilter?: (task: string | number | object) => boolean;\r\n\ttemplate?: (start: Date, end: Date, ev: object) => string;\r\n}\r\n\r\ninterface ILightboxTypeselectControl extends ILightboxSection {\r\n\tfilter?: (typeName: string) => boolean;\r\n}\r\n\r\n\r\ninterface ILayoutScrollbar {\r\n\tview: \"scrollbar\";\r\n\tscroll?: \"x\" | \"y\";\r\n\tid: string;\r\n\theight?: number;\r\n\twidth?: number;\r\n}\r\n\r\ninterface ILayoutView {\r\n\tview: LayoutView;\r\n\tid?: string;\r\n\tscrollX?: string;\r\n\tscrollY?: string;\r\n\tconfig?: object;\r\n}\r\n\r\ninterface ILayoutGrid extends ILayoutView {\r\n\tview: \"grid\";\r\n\tbind?: string;\r\n}\r\n\r\ninterface ILayoutTimeline extends ILayoutView {\r\n\tview: \"timeline\";\r\n\tbindLinks?: string;\r\n\tlayers?: any[];\r\n}\r\n\r\ninterface ILayoutResizer {\r\n\tview?: undefined;\r\n\tresizer: boolean;\r\n\twidth: number;\r\n}\r\n\r\ninterface ILayoutResourceGrid extends ILayoutView {\r\n\tview: \"resourceGrid\";\r\n\twidth: number;\r\n\tgroup: \"string\";\r\n}\r\n\r\ninterface ILayoutResourceTimeline extends ILayoutView {\r\n\tview: \"resourceTimeline\";\r\n\twidth: number;\r\n\tgroup: \"string\";\r\n}\r\n\r\ninterface ILayoutHtml {\r\n\thtml: string;\r\n\tcss: string;\r\n\twidth: number;\r\n}\r\n\r\ntype LayoutRow = ILayoutGrid\r\n\t| ILayoutTimeline\r\n\t| ILayoutResizer\r\n\t| ILayoutResourceGrid\r\n\t| ILayoutResourceTimeline\r\n\t| ILayoutHtml\r\n\t| ILayoutScrollbar\r\n\t| { cols: LayoutCol[] };\r\n\r\ntype LayoutCol = ILayoutGrid\r\n\t| ILayoutTimeline\r\n\t| ILayoutResizer\r\n\t| ILayoutResourceGrid\r\n\t| ILayoutResourceTimeline\r\n\t| ILayoutHtml\r\n\t| ILayoutScrollbar\r\n\t| { rows: LayoutRow[] };\r\n\r\ninterface ILayout {\r\n\tcss: string;\r\n\trows?: LayoutRow[];\r\n\tcols?: LayoutCol[];\r\n}\r\n\r\ntype TCsp = boolean | \"auto\";\r\n\r\ninterface IResourceConfig {\r\n\tdataprocessor_assignments?: boolean;\r\n\tdataprocessor_resources?: boolean;\r\n\teditable_resource_diagram?: boolean;\r\n\tresource_store?: {\r\n\t\ttype?: \"treeDataStore\"|\"dataStore\"|string;\r\n\t\tfetchTasks?: boolean;\r\n\t\tinitItem?: (item: any) => any;\r\n\t};\r\n\tlightbox_resources?: (resources: any[]) => any[];\r\n\r\n}\r\n\r\ninterface IGanttConfig {\r\n\tlayout: ILayout;\r\n\tlinks: {\r\n\t\tfinish_to_start: \"0\";\r\n\t\tstart_to_start: \"1\";\r\n\t\tfinish_to_finish: \"2\";\r\n\t\tstart_to_finish: \"3\";\r\n\t};\r\n\ttypes: {\r\n\t\ttask: string;\r\n\t\tproject: string;\r\n\t\tmilestone: string;\r\n\t};\r\n\tauto_types: boolean;\r\n\tduration_unit: DurationUnits;\r\n\twork_time: boolean;\r\n\tcorrect_work_time: boolean;\r\n\tdeadlines: boolean;\r\n\tskip_off_time: boolean;\r\n\tcascade_delete: boolean;\r\n\tautosize: boolean | string;\r\n\tautoscroll: boolean;\r\n\tshow_links: boolean;\r\n\tshow_task_cells: boolean;\r\n\tautosize_min_width: number;\r\n\tautoscroll_speed: number;\r\n\tdeepcopy_on_parse: boolean;\r\n\tstatic_background: boolean;\r\n\tstatic_background_cells: boolean;\r\n\tbranch_loading: boolean;\r\n\tbranch_loading_property: string;\r\n\tshow_loading: boolean;\r\n\tshow_chart: boolean;\r\n\tshow_grid: boolean;\r\n\tmin_duration: number;\r\n\tdate_format: string; // use instead xml_date\r\n\txml_date?: string; // deprecated\r\n\tstart_on_monday: boolean;\r\n\tserver_utc: boolean;\r\n\tshow_progress: boolean;\r\n\tfit_tasks: boolean;\r\n\tselect_task: boolean;\r\n\tscroll_on_click: boolean;\r\n\tsmart_rendering: boolean;\r\n\tpreserve_scroll: boolean;\r\n\treadonly: boolean;\r\n\tcontainer_resize_timeout: number;\r\n\r\n\t/*grid */\r\n\tdate_grid: string;\r\n\r\n\tdrag_links: boolean;\r\n\tdrag_progress: boolean;\r\n\tdrag_resize: boolean;\r\n\tdrag_project: boolean;\r\n\tdrag_move: boolean;\r\n\tdrag_mode: {\r\n\t\tresize: \"resize\",\r\n\t\tprogress: \"progress\",\r\n\t\tmove: \"move\",\r\n\t\tignore: \"ignore\"\r\n\t};\r\n\tround_dnd_dates: boolean;\r\n\tlink_wrapper_width: number;\r\n\troot_id: string | number;\r\n\r\n\tlink_arrow_size:number;\r\n\r\n\tautofit: boolean;\r\n\tcolumns: IColumnItem[];\r\n\r\n\t/* scale*/\r\n\tscales: IScale[];\r\n\r\n\tscale_offset_minimal: boolean;\r\n\r\n\tinherit_scale_class: boolean;\r\n\r\n\r\n\ttime_step: number;\r\n\tduration_step: number;\r\n\r\n\r\n\ttask_date: string;\r\n\ttime_picker: string;\r\n\ttask_attribute: string;\r\n\tlink_attribute: string;\r\n\tlayer_attribute: string;\r\n\tbuttons_left: string[];\r\n\t_migrate_buttons: {\r\n\t\tdhx_save_btn: \"gantt_save_btn\",\r\n\t\tdhx_cancel_btn: \"gantt_cancel_btn\",\r\n\t\tdhx_delete_btn: \"gantt_delete_btn\"\r\n\t};\r\n\r\n\tbuttons_right: string[];\r\n\r\n\r\n\tlightbox: {\r\n\t\tsections?: LightboxSection,\r\n\t\tproject_sections?: LightboxSection,\r\n\t\tmilestone_sections?: LightboxSection\r\n\t};\r\n\tdrag_lightbox: boolean;\r\n\tsort: boolean;\r\n\tdetails_on_create: boolean;\r\n\tdetails_on_dblclick: boolean;\r\n\tinitial_scroll: boolean;\r\n\ttask_scroll_offset: number;\r\n\r\n\torder_branch: boolean;\r\n\torder_branch_free: boolean;\r\n\r\n\t// task_height is deprecated, use 'bar_height` instead\r\n\ttask_height: number | \"full\" | undefined;\r\n\tbar_height: number | \"full\";\r\n\tmin_column_width: number;\r\n\tbar_height_padding: number,\r\n\trow_height: number,\r\n\r\n\t// min width for grid column (when resizing)\r\n\tmin_grid_column_width: number;\r\n\t// name of the attribute with column index for resize element\r\n\tgrid_resizer_column_attribute: string;\r\n\t// name of the attribute with column index for resize element\r\n\t// grid_resizer_attribute: string; // usage of this parameter is not found\r\n\r\n\t// grid width can be increased after the column has been resized\r\n\tkeep_grid_width: boolean;\r\n\r\n\t// grid width can be adjusted\r\n\tgrid_resize: boolean;\r\n\tgrid_elastic_columns: boolean;\r\n\tshow_tasks_outside_timescale: boolean;\r\n\tshow_unscheduled: boolean;\r\n\treadonly_property: string;\r\n\teditable_property: string;\r\n\tcalendar_property: string;\r\n\tresource_calendars: object;\r\n\tdynamic_resource_calendars: boolean;\r\n\tinherit_calendar: boolean;\r\n\ttype_renderers: object;\r\n\r\n\tresize_rows: boolean;\r\n\t// name of the attribute with row index for resize element\r\n\ttask_grid_row_resizer_attribute: string;\r\n\t// min height for row (when resizing)\r\n\tmin_task_grid_row_height: number;\r\n\r\n\topen_tree_initially: boolean;\r\n\toptimize_render: boolean;\r\n\tprevent_default_scroll: boolean;\r\n\tshow_errors: boolean;\r\n\twai_aria_attributes: boolean;\r\n\tsmart_scales: boolean;\r\n\trtl: boolean;\r\n\tplaceholder_task: boolean | object;\r\n\thorizontal_scroll_key: TModifierKeys;\r\n\tdrag_timeline: {\r\n\t\tuseKey: TModifierKeys;\r\n\t\tignore: string;\r\n\t\trender?: boolean;\r\n\t};\r\n\tdrag_multiple: boolean;\r\n\tcsp: TCsp;\r\n\r\n\tresources?: IResourceConfig;\r\n\r\n\tauto_scheduling: object;\r\n}\r\n\r\nexport default () => {\r\n\tconst result: IGanttConfig = {\r\n\t\tlayout: {\r\n\t\t\tcss: \"gantt_container\",\r\n\t\t\trows: [\r\n\t\t\t\t{\r\n\t\t\t\t\tcols: [\r\n\t\t\t\t\t\t{view: \"grid\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{resizer: true, width: 1},\r\n\t\t\t\t\t\t{view: \"timeline\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{view: \"scrollbar\", id: \"scrollVer\"}\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\t{view: \"scrollbar\", id: \"scrollHor\", height: 20}\r\n\t\t\t]\r\n\t\t},\r\n\t\tlinks: {\r\n\t\t\tfinish_to_start: \"0\",\r\n\t\t\tstart_to_start: \"1\",\r\n\t\t\tfinish_to_finish: \"2\",\r\n\t\t\tstart_to_finish: \"3\"\r\n\t\t},\r\n\t\ttypes: {\r\n\t\t\ttask: \"task\",\r\n\t\t\tproject: \"project\",\r\n\t\t\tmilestone: \"milestone\"\r\n\t\t},\r\n\t\tauto_types: false,\r\n\t\tduration_unit: \"day\",\r\n\t\twork_time: false,\r\n\t\tcorrect_work_time: false,\r\n\t\tskip_off_time: false,\r\n\r\n\t\tcascade_delete: true,\r\n\r\n\t\tautosize: false,\r\n\t\tautosize_min_width: 0,\r\n\t\tautoscroll: true,\r\n\t\tautoscroll_speed: 30,\r\n\t\tdeepcopy_on_parse: false,\r\n\t\tshow_links: true,\r\n\t\tshow_task_cells: true,\r\n\t\t// replace backgroung of the task area with a canvas img\r\n\t\tstatic_background: false,\r\n\t\tstatic_background_cells: true,\r\n\t\tbranch_loading: false,\r\n\t\tbranch_loading_property: \"$has_child\",\r\n\t\tshow_loading: false,\r\n\t\tshow_chart: true,\r\n\t\tshow_grid: true,\r\n\t\tmin_duration: 60 * 60 * 1000,\r\n\t\tdate_format: \"%d-%m-%Y %H:%i\", // use instead xml_date\r\n\t\txml_date: undefined, // \"%d-%m-%Y %H:%i\", // deprecated\r\n\t\tstart_on_monday: true,\r\n\t\tserver_utc: false,\r\n\t\tshow_progress: true,\r\n\t\tfit_tasks: false,\r\n\t\tselect_task: true,\r\n\t\tscroll_on_click: true,\r\n\t\tsmart_rendering: true,\r\n\t\tpreserve_scroll: true,\r\n\t\treadonly: false,\r\n\t\tcontainer_resize_timeout: 20,\r\n\t\tdeadlines: true,\r\n\r\n\t\t/*grid */\r\n\t\tdate_grid: \"%Y-%m-%d\",\r\n\r\n\t\tdrag_links: true,\r\n\t\tdrag_progress: true,\r\n\t\tdrag_resize: true,\r\n\t\tdrag_project: false,\r\n\t\tdrag_move: true,\r\n\t\tdrag_mode: {\r\n\t\t\tresize: \"resize\",\r\n\t\t\tprogress: \"progress\",\r\n\t\t\tmove: \"move\",\r\n\t\t\tignore: \"ignore\"\r\n\t\t},\r\n\t\tround_dnd_dates: true,\r\n\t\tlink_wrapper_width: 20,\r\n\t\tlink_arrow_size:12,\r\n\t\troot_id: 0,\r\n\r\n\t\tautofit: false, // grid column automatic fit grid_width config\r\n\t\tcolumns: [\r\n\t\t\t{name: \"text\", tree: true, width: \"*\", resize: true},\r\n\t\t\t{name: \"start_date\", align: \"center\", resize: true},\r\n\t\t\t{name: \"duration\", align: \"center\"},\r\n\t\t\t{name: \"add\", width: 44}\r\n\t\t],\r\n\r\n\t\t/*scale*/\r\n\r\n\t\tscale_offset_minimal: true,\r\n\t\tinherit_scale_class: false,\r\n\r\n\t\tscales: [\r\n\t\t\t{\r\n\t\t\t\tunit: \"day\",\r\n\t\t\t\tstep: 1,\r\n\t\t\t\tdate: \"%d %M\"\r\n\t\t\t}\r\n\t\t],\r\n\r\n\t\ttime_step: 60,\r\n\t\tduration_step: 1,\r\n\t\ttask_date: \"%d %F %Y\",\r\n\t\ttime_picker: \"%H:%i\",\r\n\t\ttask_attribute: \"data-task-id\",\r\n\t\tlink_attribute: \"data-link-id\",\r\n\t\tlayer_attribute: \"data-layer\",\r\n\t\tbuttons_left: [\r\n\t\t\t\"gantt_save_btn\",\r\n\t\t\t\"gantt_cancel_btn\"\r\n\t\t],\r\n\t\t_migrate_buttons: {\r\n\t\t\tdhx_save_btn: \"gantt_save_btn\",\r\n\t\t\tdhx_cancel_btn: \"gantt_cancel_btn\",\r\n\t\t\tdhx_delete_btn: \"gantt_delete_btn\"\r\n\t\t},\r\n\t\tbuttons_right: [\r\n\t\t\t\"gantt_delete_btn\"\r\n\t\t],\r\n\t\tlightbox: {\r\n\t\t\tsections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"time\", type: \"duration\", map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tproject_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", readonly: true, map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tmilestone_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", single_date: true, map_to: \"auto\"}\r\n\t\t\t]\r\n\t\t},\r\n\t\tdrag_lightbox: true,\r\n\t\tsort: false,\r\n\t\tdetails_on_create: true,\r\n\t\tdetails_on_dblclick: true,\r\n\t\tinitial_scroll: true,\r\n\t\ttask_scroll_offset: 100,\r\n\r\n\t\torder_branch: false,\r\n\t\torder_branch_free: false,\r\n\r\n\t\t// task height is deprecated, use 'bar_height' instead\r\n\t\ttask_height: undefined,// number px of 'full' for row height\r\n\t\tbar_height: \"full\",\r\n\t\tbar_height_padding:9,\r\n\t\tmin_column_width: 70,\r\n\r\n\t\t// min width for grid column (when resizing)\r\n\t\tmin_grid_column_width: 70,\r\n\t\t// name of the attribute with column index for resize element\r\n\t\tgrid_resizer_column_attribute: \"data-column-index\",\r\n\t\t// name of the attribute with column index for resize element\r\n\t\t// grid_resizer_attribute: \"grid_resizer\", // - usage of this parameter is not found in code\r\n\r\n\t\t// grid width can be increased after the column has been resized\r\n\t\tkeep_grid_width: false,\r\n\r\n\t\t// grid width can be adjusted\r\n\t\tgrid_resize: false,\r\n\t\tgrid_elastic_columns: false,\r\n\t\tshow_tasks_outside_timescale: false,\r\n\t\tshow_unscheduled: true,\r\n\r\n\t\tresize_rows: false,\r\n\t\t// name of the attribute with row index for resize element\r\n\t\ttask_grid_row_resizer_attribute: \"data-row-index\",\r\n\t\t// min height for row (when resizing)\r\n\t\tmin_task_grid_row_height: 30,\r\n\t\trow_height: 36,\r\n\r\n\t\t//\r\n\t\treadonly_property: \"readonly\",\r\n\t\teditable_property: \"editable\",\r\n\t\tcalendar_property: \"calendar_id\",\r\n\t\tresource_calendars: {},\r\n\t\tdynamic_resource_calendars: false,\r\n\t\tinherit_calendar: false,\r\n\t\ttype_renderers: {},\r\n\r\n\t\topen_tree_initially: false,\r\n\t\toptimize_render: true,\r\n\t\tprevent_default_scroll: false,\r\n\t\tshow_errors: true,\r\n\t\twai_aria_attributes: true,\r\n\t\tsmart_scales: true,\r\n\t\trtl:false,\r\n\t\tplaceholder_task: false,\r\n\t\thorizontal_scroll_key: \"shiftKey\",\r\n\t\tdrag_timeline: {\r\n\t\t\tuseKey: undefined,\r\n\t\t\tignore: \".gantt_task_line, .gantt_task_link\",\r\n\t\t\trender: false\r\n\t\t},\r\n\t\tdrag_multiple: true,\r\n\t\tcsp: \"auto\",\r\n\t\tauto_scheduling: {}\r\n\t};\r\n\treturn result;\r\n};\r\n","import eventable from \"../../utils/eventable\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport timeout from \"../../utils/timeout\";\r\nimport global from \"../../utils/global\";\r\nimport * as domHelpers from \"../ui/utils/dom_helpers\";\r\n\r\nexport default function(gantt){\r\n\r\n\tfunction copyDomEvent(e){\r\n\t\treturn {\r\n\t\t\ttarget: e.target || e.srcElement,\r\n\t\t\tpageX: e.pageX,\r\n\t\t\tpageY: e.pageY,\r\n\t\t\tclientX: e.clientX,\r\n\t\t\tclientY: e.clientY,\r\n\t\t\tmetaKey: e.metaKey,\r\n\t\t\tshiftKey: e.shiftKey,\r\n\t\t\tctrlKey: e.ctrlKey,\r\n\t\t\taltKey: e.altKey\r\n\t\t};\r\n\t}\r\n\r\n\tfunction DnD(obj, config) {\r\n\t\tthis._obj = obj;\r\n\t\tthis._settings = config || {};\r\n\t\teventable(this);\r\n\r\n\t\tvar inputMethods = this.getInputMethods();\r\n\r\n\t\tthis._drag_start_timer = null;\r\n\t\tgantt.attachEvent(\"onGanttScroll\", utils.bind(function (left, top) {\r\n\t\t\tthis.clearDragTimer();\r\n\t\t}, this));\r\n\r\n\t\tvar lastDown = 0;\r\n\t\tvar eventParams = {passive: false};\r\n\t\tfor(var i = 0; i < inputMethods.length; i++){\r\n\t\t\t(utils.bind(function(input){\r\n\r\n\t\t\t\tgantt.event(obj, input.down, utils.bind(function (e) {\r\n\t\t\t\t\tif(!input.accessor(e)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (typeof e.button !== 'undefined' && e.button !== 0) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(config.preventDefault && config.selector && domHelpers.closest(e.target, config.selector)){\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (gantt.config.touch && e.timeStamp && e.timeStamp - lastDown < 300) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._settings.original_target = copyDomEvent(e);\r\n\r\n\t\t\t\t\tthis._settings.original_element_sizes = {\r\n\t\t\t\t\t\t...domHelpers.getRelativeEventPosition(e, domHelpers.getClosestSizedElement(obj)), \r\n\t\t\t\t\t\twidth: e.target.offsetWidth,\r\n\t\t\t\t\t\theight: e.target.offsetHeight\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t\t\tthis.clearDragTimer();\r\n\t\t\t\t\t\tthis._drag_start_timer = setTimeout(utils.bind(function () {\r\n\t\t\t\t\t\t\tif(gantt.getState().lightbox){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t\t}, this), gantt.config.touch_drag);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this), eventParams);\r\n\t\t\t\tvar eventElement = document.body;\r\n\t\t\t\tgantt.event(eventElement, input.up, utils.bind(function (e) {\r\n\t\t\t\t\tif(!input.accessor(e)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.clearDragTimer();\r\n\t\t\t\t}, this), eventParams);\r\n\r\n\t\t\t}, this))(inputMethods[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tDnD.prototype = {\r\n\t\ttraceDragEvents: function (domElement, inputMethod) {\r\n\t\t\tvar mousemove = utils.bind(function (e) {\r\n\t\t\t\treturn this.dragMove(domElement, e, inputMethod.accessor);\r\n\t\t\t}, this);\r\n\t\t\tutils.bind(function (e) {\r\n\t\t\t\treturn this.dragScroll(domElement, e);\r\n\t\t\t}, this);\r\n\r\n\t\t\tvar limited_mousemove = utils.bind(function (e) {\r\n\t\t\t\tif (this.config.started && utils.defined(this.config.updates_per_second)) {\r\n\t\t\t\t\tif (!timeout(this, this.config.updates_per_second))\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar dndActive = mousemove(e);\r\n\r\n\t\t\t\tif (dndActive) {\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tif (e && e.preventDefault && e.cancelable){//e.cancelable condition - because navigator.vibrate is blocked by Chrome\r\n\t\t\t\t\t\t\te.preventDefault();//Cancel default action on DND\r\n\t\t\t\t\t\t} //Cancel default action on DND\r\n\t\t\t\t\t}catch (e){\r\n\t\t\t\t\t\t// just suppress the exception, nothing needed to be done here\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//e.cancelBubble = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn dndActive;\r\n\t\t\t}, this);\r\n\t\t\tvar eventElement = domHelpers.getRootNode(gantt.$root);\r\n\t\t\tvar mousemoveContainer = this.config.mousemoveContainer || domHelpers.getRootNode(gantt.$root);\r\n\r\n\t\t\tvar eventParams = {passive: false};\r\n\t\t\tvar mouseup = utils.bind(function (e) {\r\n\t\t\t\tgantt.eventRemove(mousemoveContainer, inputMethod.move, limited_mousemove);\r\n\t\t\t\tgantt.eventRemove(eventElement, inputMethod.up, mouseup, eventParams);\r\n\t\t\t\treturn this.dragEnd(domElement);\r\n\t\t\t}, this);\r\n\r\n\t\t\tgantt.event(mousemoveContainer, inputMethod.move, limited_mousemove, eventParams);\r\n\t\t\tgantt.event(eventElement, inputMethod.up, mouseup, eventParams);\r\n\t\t},\r\n\t\tcheckPositionChange: function (pos) {\r\n\t\t\tvar diff_x = pos.x - this.config.pos.x;\r\n\t\t\tvar diff_y = pos.y - this.config.pos.y;\r\n\t\t\tvar distance = Math.sqrt(Math.pow(Math.abs(diff_x), 2) + Math.pow(Math.abs(diff_y), 2));\r\n\r\n\t\t\tif (distance > this.config.sensitivity) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tinitDnDMarker: function () {\r\n\t\t\t// create dnd placeholder and put it in dom\r\n\t\t\tvar marker = this.config.marker = document.createElement(\"div\");\r\n\t\t\tmarker.className = \"gantt_drag_marker\";\r\n\t\t\t// GS-1333: don't show any message when we resize grid columns\r\n\t\t\tmarker.innerHTML = \"\";\r\n\t\t\tdocument.body.appendChild(marker);\r\n\t\t},\r\n\t\tbackupEventTarget: function (domEvent, getEvent) {\r\n\t\t\tif (!gantt.config.touch) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// keep original event target in DOM in order to keep dnd on touchmove event\r\n\t\t\tvar e = getEvent(domEvent);\r\n\r\n\t\t\tvar el = e.target || e.srcElement;\r\n\t\t\tvar copy = el.cloneNode(true);\r\n\t\t\t//this.config.target.target = copy;\r\n\t\t\tthis.config.original_target = copyDomEvent(e);\r\n\t\t\tthis.config.original_target.target = copy;\r\n\t\t\tthis.config.backup_element = el;\r\n\t\t\tel.parentNode.appendChild(copy);\r\n\r\n\t\t\tel.style.display = \"none\";\r\n\t\t\tvar mousemoveContainer = this.config.mousemoveContainer || document.body;\r\n\t\t\tmousemoveContainer.appendChild(el);\r\n\t\t},\r\n\t\tgetInputMethods: function () {\r\n\t\t\t// bind actions to browser events\r\n\t\t\tvar inputMethods = [];\r\n\r\n\t\t\tinputMethods.push({\r\n\t\t\t\t\"move\": \"mousemove\",\r\n\t\t\t\t\"down\": \"mousedown\",\r\n\t\t\t\t\"up\": \"mouseup\",\r\n\t\t\t\t\"accessor\": function (e) {\r\n\t\t\t\t\treturn e;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\tconst touchEventsSupported = !gantt.env.isIE || !!global.maxTouchPoints;\r\n\r\n\t\t\t\tif(touchEventsSupported){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"touchmove\",\r\n\t\t\t\t\t\t\"down\": \"touchstart\",\r\n\t\t\t\t\t\t\"up\": \"touchend\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\ttarget: document.elementFromPoint(ev.touches[0].clientX, ev.touches[0].clientY),\r\n\t\t\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else if(global.PointerEvent){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"pointermove\",\r\n\t\t\t\t\t\t\"down\": \"pointerdown\",\r\n\t\t\t\t\t\t\"up\": \"pointerup\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn inputMethods;\r\n\t\t},\r\n\t\tclearDragTimer: function () {\r\n\t\t\tif (this._drag_start_timer) {\r\n\t\t\t\tclearTimeout(this._drag_start_timer);\r\n\t\t\t\tthis._drag_start_timer = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdragStart: function (obj, e, inputMethod) {\r\n\t\t\tif (this.config && this.config.started) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.config = {\r\n\t\t\t\tobj: obj,\r\n\t\t\t\tmarker: null,\r\n\t\t\t\tstarted: false,\r\n\t\t\t\tpos: this.getPosition(e),\r\n\t\t\t\tsensitivity: 4\r\n\t\t\t};\r\n\t\t\tif (this._settings)\r\n\t\t\t\tutils.mixin(this.config, this._settings, true);\r\n\r\n\r\n\t\t\tthis.traceDragEvents(obj, inputMethod);\r\n\r\n\t\t\tgantt._prevent_touch_scroll = true;\r\n\t\t\t// GS-2664. Prevent grid scroll only if we can reorder rows\r\n\t\t\tif (e.target.closest(\".gantt_row\") && !gantt.config.order_branch){\r\n\t\t\t\tgantt._prevent_touch_scroll = false;\r\n\t\t\t}\r\n\t\t\tdocument.body.classList.add(\"gantt_noselect\");\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\tthis.dragMove(obj, e, inputMethod.accessor);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tdragMove: function (obj, e, getEvent) {\r\n\t\t\tvar source = getEvent(e);\r\n\t\t\tif (!source) return false;\r\n\r\n\t\t\tif (!this.config.marker && !this.config.started) {\r\n\t\t\t\tvar pos = this.getPosition(source);\r\n\r\n\t\t\t\tif (gantt.config.touch || this.checkPositionChange(pos)) {\r\n\t\t\t\t\t// real drag starts here,\r\n\t\t\t\t\t// when user moves mouse at first time after onmousedown\r\n\t\t\t\t\tthis.config.started = true;\r\n\t\t\t\t\tthis.config.ignore = false;\r\n\t\t\t\t\tgantt._touch_drag = true;\r\n\t\t\t\t\tif (this.callEvent(\"onBeforeDragStart\", [obj, this.config.original_target]) === false) {\r\n\t\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.backupEventTarget(e, getEvent);\r\n\t\t\t\t\tthis.initDnDMarker();\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\tthis.callEvent(\"onAfterDragStart\", [obj, this.config.original_target]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.config.ignore) {\r\n\t\t\t\t// GS-1279 Gantt crashes on Mobile Firefox after starting to create a link and moving finger outisde the page.\r\n\t\t\t\tif (e.targetTouches && !source.target) return;\r\n\t\t\t\t\r\n\t\t\t\tsource.pos = this.getPosition(source);\r\n\t\t\t\tthis.config.marker.style.left = source.pos.x + \"px\";\r\n\t\t\t\tthis.config.marker.style.top = source.pos.y + \"px\";\r\n\t\t\t\tthis.callEvent(\"onDragMove\", [obj, source]);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tdragEnd: function (obj) {\r\n\t\t\tvar target = this.config.backup_element;\r\n\t\t\tif (target && target.parentNode) {\r\n\t\t\t\ttarget.parentNode.removeChild(target);\r\n\t\t\t}\r\n\t\t\tgantt._prevent_touch_scroll = false;\r\n\t\t\tif (this.config.marker) {\r\n\t\t\t\tthis.config.marker.parentNode.removeChild(this.config.marker);\r\n\t\t\t\tthis.config.marker = null;\r\n\r\n\t\t\t\tthis.callEvent(\"onDragEnd\", []);\r\n\t\t\t}\r\n\t\t\tthis.config.started = false;\r\n\t\t\tgantt._touch_drag = false;\r\n\t\t\tdocument.body.classList.remove(\"gantt_noselect\");\r\n\t\t},\r\n\r\n\t\tgetPosition: function (e) {\r\n\t\t\tvar x = 0, y = 0;\r\n\t\t\tif (e.pageX || e.pageY) {\r\n\t\t\t\tx = e.pageX;\r\n\t\t\t\ty = e.pageY;\r\n\t\t\t} else if (e.clientX || e.clientY) {\r\n\t\t\t\tx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n\t\t\t\ty = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n\t\t\t}\r\n\t\t\treturn {x: x, y: y};\r\n\t\t}\r\n\t};\r\n\r\n\treturn DnD;\r\n};\r\n","export default function(gantt) {\r\n\r\n\tvar regTemplates = {};\r\n\r\n\tfunction initTemplate(name, initial, template_name) {\r\n\t\ttemplate_name = template_name || name;\r\n\t\tvar config = gantt.config,\r\n\t\t\ttemplates = gantt.templates;\r\n\r\n\t\tif (gantt.config[name] && regTemplates[template_name] != config[name]) {\r\n\t\t\tif (!(initial && templates[template_name])) {\r\n\t\t\t\ttemplates[template_name] = gantt.date.date_to_str(config[name]);\r\n\t\t\t\tregTemplates[template_name] = config[name];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction initTemplates() {\r\n\t\tvar date = gantt.date;\r\n\r\n\t\t//build configuration based templates\r\n\t\tvar d = date.date_to_str;\r\n\t\tvar c = gantt.config;\r\n\t\tvar format_date = d(c.xml_date || c.date_format, c.server_utc);\r\n\t\tvar parse_date = date.str_to_date(c.xml_date || c.date_format, c.server_utc);\r\n\r\n\t\tinitTemplate(\"date_scale\", true, undefined, gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"date_grid\", true, \"grid_date_format\", gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"task_date\", true, undefined, gantt.config, gantt.templates);\r\n\r\n\t\tgantt.mixin(gantt.templates, {\r\n\t\t\txml_format: undefined, // deprecated\r\n\t\t\tformat_date: format_date,\r\n\r\n\t\t\txml_date: undefined, // deprecated\r\n\t\t\tparse_date: parse_date,\r\n\r\n\t\t\tprogress_text: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tgrid_header_class: function (column, config) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttask_text: function (start, end, task) {\r\n\t\t\t\treturn task.text;\r\n\t\t\t},\r\n\t\t\ttask_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_end_date: function (date) {\r\n\t\t\t\treturn gantt.templates.task_date(date);\r\n\t\t\t},\r\n\t\t\tgrid_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttimeline_cell_class: function (item, date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttimeline_cell_content: function (item, date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_cell_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_row_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\tgrid_indent: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_indent'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_folder: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_folder_\" + (item.$open ? \"open\" : \"closed\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_file: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_file'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_open: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_\" + (item.$open ? \"close\" : \"open\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_blank: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_blank'></div>\";\r\n\t\t\t},\r\n\t\t\tdate_grid: function (date, item, column) {\r\n\t\t\t\tif (item && gantt.isUnscheduledTask(item) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(item);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.grid_date_format(date, column);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_time: function (start, end, ev) {\r\n\t\t\t\tif (gantt.isUnscheduledTask(ev) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(ev);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.task_date(start) + \" - \" + gantt.templates.task_end_date(end);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_unscheduled_time: function (task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttime_picker: d(c.time_picker),\r\n\t\t\tlink_class: function (link) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tlink_description: function (link) {\r\n\t\t\t\tvar from = gantt.getTask(link.source),\r\n\t\t\t\t\tto = gantt.getTask(link.target);\r\n\r\n\t\t\t\treturn \"<b>\" + from.text + \"</b> &ndash;  <b>\" + to.text + \"</b>\";\r\n\t\t\t},\r\n\r\n\t\t\tdrag_link: function (from, from_start, to, to_start) {\r\n\t\t\t\tfrom = gantt.getTask(from);\r\n\t\t\t\tvar labels = gantt.locale.labels;\r\n\r\n\t\t\t\tvar text = \"<b>\" + from.text + \"</b> \" + (from_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\tif (to) {\r\n\t\t\t\t\tto = gantt.getTask(to);\r\n\t\t\t\t\ttext += \"<b> \" + to.text + \"</b> \" + (to_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\t}\r\n\t\t\t\treturn text;\r\n\t\t\t},\r\n\t\t\tdrag_link_class: function (from, from_start, to, to_start) {\r\n\t\t\t\tvar add = \"\";\r\n\r\n\t\t\t\tif (from && to) {\r\n\t\t\t\t\tvar allowed = gantt.isLinkAllowed(from, to, from_start, to_start);\r\n\t\t\t\t\tadd = \" \" + (allowed ? \"gantt_link_allow\" : \"gantt_link_deny\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn \"gantt_link_tooltip\" + add;\r\n\t\t\t},\r\n\r\n\t\t\t/* used for aria-labels of bar elements and for tooltip.js */\r\n\t\t\ttooltip_date_format: date.date_to_str(\"%Y-%m-%d\"),\r\n\t\t\ttooltip_text: function (start, end, event) {\r\n\t\t\t\treturn `<div>Task: ${event.text}</div>\r\n\t\t\t\t<div>Start date: ${gantt.templates.tooltip_date_format(start)}</div>\r\n\t\t\t\t<div>End date: ${gantt.templates.tooltip_date_format(end)}</div>`;\r\n\t\t\t},\r\n\t\t\tbaseline_text: function (task, baseline, index) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\treturn {\r\n\t\tinitTemplates: initTemplates,\r\n\t\tinitTemplate: initTemplate\r\n\t};\r\n\r\n};","import * as utils from \"../../utils/utils\";\r\nimport facadeFactory from \"./../facades/datastore\";\r\nimport calculateScaleRange from \"../gantt_data_range\";\r\nimport isPlaceholderTask from \"../../utils/placeholder_task\";\r\n\r\nimport treeHelper from \"../../utils/task_tree_helpers\";\r\n\r\nfunction initDataStores(gantt){\r\n\r\n\tvar facade = facadeFactory.create();\r\n\tutils.mixin(gantt, facade);\r\n\tvar tasksStore = gantt.createDatastore({\r\n\t\tname: \"task\",\r\n\t\ttype: \"treeDatastore\",\r\n\t\trootId: function() { return gantt.config.root_id; },\r\n\t\tinitItem: utils.bind(_init_task, gantt),\r\n\t\tgetConfig: function() { return gantt.config; }\r\n\t});\r\n\r\n\tvar linksStore = gantt.createDatastore({\r\n\t\tname: \"link\",\r\n\t\tinitItem: utils.bind(_init_link, gantt)\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\ttasksStore.destructor();\r\n\t\tlinksStore.destructor();\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onLinkValidation\", function(link){\r\n\t\tif(gantt.isLinkExists(link.id) || link.id === \"predecessor_generated\"){\r\n\t\t\t// link was already added into gantt\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvar source = gantt.getTask(link.source);\r\n\t\tvar taskLinks = source.$source;\r\n\t\tfor (var i = 0; i < taskLinks.length; i++) {\r\n\t\t\tvar existingLink = gantt.getLink(taskLinks[i]);\r\n\r\n\t\t\tvar sourceMatch = link.source == existingLink.source;\r\n\t\t\tvar targetMatch = link.target == existingLink.target;\r\n\t\t\tvar typeMatch = link.type == existingLink.type;\r\n\r\n\t\t\t// prevent creating duplicated links from the UI\r\n\t\t\tif (sourceMatch && targetMatch && typeMatch) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onBeforeRefreshAll\", function(){\r\n\r\n\t\t// GS-2170 do not recalculate indexes and dates as the event will be called later in the onStoreUpdate event\r\n\t\tif (tasksStore._skipTaskRecalculation){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar order = tasksStore.getVisibleItems();\r\n\r\n\t\tfor(var i=0; i < order.length; i++){\r\n\t\t\tvar item = order[i];\r\n\t\t\titem.$index = i;\r\n\t\t\titem.$local_index = gantt.getTaskIndex(item.id);\r\n\t\t\tgantt.resetProjectDates(item);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onFilterItem\", function(id, task) {\r\n\t\tif (gantt.config.show_tasks_outside_timescale) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvar min = null, max = null;\r\n\t\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\t\tif (gantt._isAllowedUnscheduledTask(task)) return true;\r\n\t\t\tmin = gantt.config.start_date.valueOf();\r\n\t\t\tmax = gantt.config.end_date.valueOf();\r\n\r\n\t\t\tif (+task.start_date > max || +task.end_date < +min)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\tgantt._update_flags(oldId, newId);\r\n\r\n\t\tvar changedTask = gantt.getTask(newId);\r\n\t\tif(!tasksStore.isSilent()){\r\n\t\t\tif(changedTask.$split_subtask || changedTask.rollup){\r\n\t\t\t\tgantt.eachParent(function(parent){\r\n\t\t\t\t\tgantt.refreshTask(parent.id);\r\n\t\t\t\t}, newId);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterUpdate\", function(id){\r\n\t\tgantt._update_parents(id);\r\n\t\tif(gantt.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tvar task = tasksStore.getItem(id);\r\n\t\tif (!task.$source) task.$source = [];\r\n\t\tfor (var i = 0; i < task.$source.length; i++) {\r\n\t\t\tlinksStore.refresh(task.$source[i]);\r\n\t\t}\r\n\t\tif (!task.$target) task.$target = [];\r\n\t\tfor (var i = 0; i < task.$target.length; i++) {\r\n\t\t\tlinksStore.refresh(task.$target[i]);\r\n\t\t}\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onBeforeItemMove\", function(sid, parent, tindex){\r\n\t\t// GS-125. Don't allow users to move the placeholder task\r\n\t\tif (isPlaceholderTask(sid, gantt, tasksStore)){\r\n\t\t\t//eslint-disable-next-line\r\n\t\t\tconsole.log(\"The placeholder task cannot be moved to another position.\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterItemMove\", function(sid, parent, tindex){\r\n\t\tvar source = gantt.getTask(sid);\r\n\r\n\t\tif(this.getNextSibling(sid) !== null){\r\n\t\t\tsource.$drop_target = this.getNextSibling(sid);\r\n\t\t} else if(this.getPrevSibling(sid) !== null){\r\n\t\t\tsource.$drop_target = \"next:\" + this.getPrevSibling(sid);\r\n\t\t}else{\r\n\t\t\tsource.$drop_target = \"next:null\";\r\n\t\t}\r\n\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(action == \"delete\"){\r\n\t\t\tgantt._update_flags(id, null);\r\n\t\t}\r\n\r\n\t\tvar state = gantt.$services.getService(\"state\");\r\n\t\tif(state.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(gantt.config.fit_tasks && action !== \"paint\"){\r\n\t\t\tvar oldState = gantt.getState();\r\n\t\t\tcalculateScaleRange(gantt);\r\n\t\t\tvar newState = gantt.getState();\r\n\r\n\t\t\t//this._init_tasks_range();\r\n\t\t\tif (+oldState.min_date != +newState.min_date || +oldState.max_date != +newState.max_date) {\r\n\t\t\t\tgantt.render();\r\n\r\n\t\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(action == \"add\" || action == \"move\" || action == \"delete\"){\r\n\t\t\tif(gantt.$layout){\r\n\t\t\t\t// GS-2170. Do not recalculate the indexes and dates of other tasks in the\r\n\t\t\t\t// onBeforeResize layout event, but do it later. If lightbox is opened, it will\r\n\t\t\t\t// trigger the refreshData, so the indexes and dates will be recalculated there\r\n\t\t\t\tif (this.$config.name == \"task\" && (action == \"add\" || action == \"delete\")){\r\n\t\t\t\t\tif (this._skipTaskRecalculation != \"lightbox\"){\r\n\t\t\t\t\t\tthis._skipTaskRecalculation = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tgantt.$layout.resize();\r\n\t\t\t}\r\n\r\n\t\t}else if(!id){\r\n\t\t\tlinksStore.refresh();\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tlinksStore.attachEvent(\"onAfterAdd\", function(id, link){\r\n\t\tlinksStore.sync_link(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterUpdate\", function(id, link){\r\n\t\tsync_links();\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterDelete\", function(id, link){\r\n\t\tsync_link_delete(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterSilentDelete\", function(id, link){\r\n\t\tsync_link_delete(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onBeforeIdChange\", function(oldId, newId){\r\n\t\tsync_link_delete(gantt.mixin({id:oldId}, gantt.$data.linksStore.getItem(newId)));\r\n\t\tlinksStore.sync_link(gantt.$data.linksStore.getItem(newId));\r\n\t});\r\n\r\n\tfunction checkLinkedTaskVisibility(taskId){\r\n\t\tvar isVisible = gantt.isTaskVisible(taskId);\r\n\t\tif(!isVisible && gantt.isTaskExists(taskId)){\r\n\t\t\tvar parent = gantt.getParent(taskId);\r\n\t\t\tif(gantt.isTaskExists(parent) && gantt.isTaskVisible(parent)){\r\n\t\t\t\tparent = gantt.getTask(parent);\r\n\t\t\t\tif(gantt.isSplitTask(parent)){\r\n\t\t\t\t\tisVisible = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn isVisible;\r\n\t}\r\n\r\n\tlinksStore.attachEvent(\"onFilterItem\", function(id, link){\r\n\t\tif (!gantt.config.show_links) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar sourceVisible = checkLinkedTaskVisibility(link.source);\r\n\t\tvar targetVisible = checkLinkedTaskVisibility(link.target);\r\n\r\n\t\tif (!(sourceVisible && targetVisible) ||\r\n\t\t\tgantt._isAllowedUnscheduledTask(gantt.getTask(link.source)) || gantt._isAllowedUnscheduledTask(gantt.getTask(link.target)))\r\n\t\t\treturn false;\r\n\r\n\t\treturn gantt.callEvent(\"onBeforeLinkDisplay\", [id, link]);\r\n\t});\r\n\r\n\r\n\t(function(){\r\n\t\t// delete all connected links after task is deleted\r\n\t\tvar deletedLinks = {};\r\n\r\n\t\tgantt.attachEvent(\"onBeforeTaskDelete\", function(id, item){\r\n\t\t\tdeletedLinks[id] = treeHelper.getSubtreeLinks(gantt, id);\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onAfterTaskDelete\", function(id, item) {\r\n\t\t\tif(deletedLinks[id]){\r\n\t\t\t\tgantt.$data.linksStore.silent(function(){\r\n\t\t\t\t\tfor(var i in deletedLinks[id]){\r\n\t\t\t\t\t\tif (gantt.isLinkExists(i)){\r\n\t\t\t\t\t\t\tgantt.$data.linksStore.removeItem(i);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsync_link_delete(deletedLinks[id][i]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdeletedLinks[id] = null;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t})();\r\n\r\n\tgantt.attachEvent(\"onAfterLinkDelete\", function(id, link) {\r\n\t\t// GS-1786. Repaint tasks only if they are loaded\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tgantt.refreshTask(link.source);\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tgantt.refreshTask(link.target);\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onParse\", sync_links);\r\n\r\n\tmapEvents({\r\n\t\tsource: linksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onLinkLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeLinkAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterLinkAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeLinkUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterLinkUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeLinkDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterLinkDelete\",\r\n\t\t\t\"onIdChange\":\"onLinkIdChange\"\r\n\t\t}\r\n\t});\r\n\r\n\tmapEvents({\r\n\t\tsource: tasksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onTaskLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeTaskAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterTaskAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeTaskUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterTaskUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeTaskDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterTaskDelete\",\r\n\t\t\t\"onIdChange\":\"onTaskIdChange\",\r\n\t\t\t\"onBeforeItemMove\":\"onBeforeTaskMove\",\r\n\t\t\t\"onAfterItemMove\":\"onAfterTaskMove\",\r\n\t\t\t\"onFilterItem\":\"onBeforeTaskDisplay\",\r\n\t\t\t\"onItemOpen\":\"onTaskOpened\",\r\n\t\t\t\"onItemClose\":\"onTaskClosed\",\r\n\t\t\t\"onBeforeSelect\":\"onBeforeTaskSelected\",\r\n\t\t\t\"onAfterSelect\":\"onTaskSelected\",\r\n\t\t\t\"onAfterUnselect\":\"onTaskUnselected\"\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.$data = {\r\n\t\ttasksStore: tasksStore,\r\n\t\tlinksStore: linksStore\r\n\t};\r\n\r\n\tlinksStore.sync_link = function(link) {\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tsourceTask.$source = sourceTask.$source || [];\r\n\t\t\tif (noDuplicateIds(link.id, sourceTask.$source)){\r\n\t\t\t\tsourceTask.$source.push(link.id);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\ttargetTask.$target = targetTask.$target || [];\r\n\t\t\tif (noDuplicateIds(link.id, targetTask.$target)){\r\n\t\t\t\ttargetTask.$target.push(link.id);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t// GS-2085. Don't add duplicate link IDs\r\n\tfunction noDuplicateIds(id, array){\r\n\t\treturn array.indexOf(String(id)) === -1 && array.indexOf(Number(id)) === -1;\r\n\t}\r\n\r\n\tfunction sync_link_delete(link){\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tfor(var i = 0; i < sourceTask.$source.length; i++){\r\n\t\t\t\tif(sourceTask.$source[i] == link.id){\r\n\t\t\t\t\tsourceTask.$source.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\tfor(var i = 0; i < targetTask.$target.length; i++){\r\n\t\t\t\tif(targetTask.$target[i] == link.id){\r\n\t\t\t\t\ttargetTask.$target.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sync_links() {\r\n\t\tvar task = null;\r\n\t\tvar tasks = gantt.$data.tasksStore.getItems();\r\n\r\n\t\tfor(var i = 0, len = tasks.length; i < len; i++){\r\n\t\t\ttask = tasks[i];\r\n\t\t\ttask.$source = [];\r\n\t\t\ttask.$target = [];\r\n\t\t}\r\n\r\n\t\tvar links = gantt.$data.linksStore.getItems();\r\n\t\tfor (var i = 0, len = links.length; i < len; i++) {\r\n\r\n\t\t\tvar link = links[i];\r\n\t\t\tlinksStore.sync_link(link);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapEvents(conf){\r\n\t\tvar mapFrom = conf.source;\r\n\t\tvar mapTo = conf.target;\r\n\t\tfor(var i in conf.events){\r\n\t\t\t(function(sourceEvent, targetEvent){\r\n\t\t\t\tmapFrom.attachEvent(sourceEvent, function(){\r\n\t\t\t\t\treturn mapTo.callEvent(targetEvent, Array.prototype.slice.call(arguments));\r\n\t\t\t\t}, targetEvent);\r\n\t\t\t})(i, conf.events[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _init_task(task) {\r\n\t\tif (!this.defined(task.id))\r\n\t\t\ttask.id = this.uid();\r\n\r\n\t\tif (task.start_date)\r\n\t\t\ttask.start_date = gantt.date.parseDate(task.start_date, \"parse_date\");\r\n\t\tif (task.end_date)\r\n\t\t\ttask.end_date = gantt.date.parseDate(task.end_date, \"parse_date\");\r\n\r\n\r\n\t\tvar duration = null;\r\n\t\tif (task.duration || task.duration === 0) {\r\n\t\t\ttask.duration = duration = task.duration * 1;\r\n\t\t}\r\n\r\n\t\tif (duration) {\r\n\t\t\tif (task.start_date && !task.end_date) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!task.start_date && task.end_date) {\r\n\t\t\t\ttask.start_date = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\tduration: -task.duration,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t//task.$calculate_duration = false;\r\n\t\t}\r\n\r\n\t\tif (gantt.config.deadlines !== false && task.deadline){\r\n\t\t\ttask.deadline = gantt.date.parseDate(task.deadline, \"parse_date\");\r\n\t\t}\r\n\r\n\t\ttask.progress = Number(task.progress) || 0;\r\n\r\n\t\tif (this._isAllowedUnscheduledTask(task)) {\r\n\t\t\tthis._set_default_task_timing(task);\r\n\t\t}\r\n\t\tthis._init_task_timing(task);\r\n\t\tif (task.start_date && task.end_date)\r\n\t\t\tthis.correctTaskWorkTime(task);\r\n\r\n\t\ttask.$source = [];\r\n\t\ttask.$target = [];\r\n\r\n\t\tvar originalTask = this.$data.tasksStore.getItem(task.id);\r\n\t\tif (originalTask && !utils.defined(task.open)) {\r\n\t\t\t// if a task with the same id is already in the gantt and the new object doesn't specify the `open` state -\r\n\t\t\t// restore the `open` state we already have in the chart\r\n\t\t\ttask.$open = originalTask.$open;\r\n\t\t}\r\n\r\n\t\tif (task.parent === undefined) {\r\n\t\t\ttask.parent = this.config.root_id;\r\n\t\t}\r\n\t\tif(task.open){\r\n\t\t\ttask.$open = true;\r\n\t\t}\r\n\t\treturn task;\r\n\t}\r\n\r\n\tfunction _init_link(link) {\r\n\t\tif (!this.defined(link.id))\r\n\t\t\tlink.id = this.uid();\r\n\t\treturn link;\r\n\t}\r\n}\r\n\r\n\r\nexport default initDataStores;\r\n","import batch_update from \"./batch_update\";\r\nimport wbs from \"./wbs\";\r\nimport resources from \"./resources\";\r\nimport resource_assignments from \"./resource_assignments\";\r\nimport new_task_placeholder from \"./new_task_placeholder\";\r\nimport auto_task_types from \"./auto_task_types\";\r\nimport formatters from \"./formatters\";\r\nimport empty_state_screen from \"./empty_state_screen\";\r\nimport baselines from \"./baselines\";\r\nimport remote_events from \"./remote_events/index\";\r\nimport auto_scheduling_config from \"./auto_scheduling_config\";\r\n\r\nexport default function(gantt){\r\n\tif(!gantt.ext){\r\n\t\tgantt.ext = {};\r\n\t}\r\n\r\n\tvar modules = [\r\n\t\tbatch_update,\r\n\t\twbs,\r\n\t\tresources,\r\n\t\tresource_assignments,\r\n\t\tnew_task_placeholder,\r\n\t\tauto_task_types,\r\n\t\tformatters,\r\n\t\tempty_state_screen,\r\n\t\tbaselines,\r\n\t\tremote_events\r\n\t];\r\n\r\n\tfor(var i = 0; i < modules.length; i++){\r\n\t\tif(modules[i])\r\n\t\t\tmodules[i](gantt);\r\n\t}\r\n\r\n\tconst { getAutoSchedulingConfig} = auto_scheduling_config(gantt);\r\n\tgantt._getAutoSchedulingConfig = getAutoSchedulingConfig;\r\n};","export default function(gantt){\r\n\tfunction getDefaultAutoSchedulingConfig(){\r\n\t\treturn {\r\n\t\t\tenabled: false,\r\n\t\t\tapply_constraints: false,\r\n\t\t\tgap_behavior: \"preserve\",\r\n\t\t\tdescendant_links: false,\r\n\t\t\tschedule_on_parse: true,\r\n\t\t\tmove_projects: true,\r\n\t\t\tuse_progress: false,\r\n\r\n\t\t\tschedule_from_end: false,\r\n\t\t\tproject_constraint: false,\r\n\t\t\tshow_constraints: false\r\n\t\t};\r\n\t}\r\n\r\n\tfunction getAutoSchedulingConfig() {\r\n\t\tconst config = gantt.config;\r\n\r\n\t\t// if already using new-style object  return as is\r\n\t\tif (typeof config.auto_scheduling === \"object\") {\r\n\r\n\t\t\tconst schedulingConfig = {...getDefaultAutoSchedulingConfig(), ...config.auto_scheduling};\r\n\r\n\t\t\t// backward compatibility for {mode, strict, move_asap_tasks} properties\r\n\t\t\tif(schedulingConfig.mode){\r\n\t\t\t\tschedulingConfig.apply_constraints = schedulingConfig.mode === \"constraints\";\r\n\t\t\t\tdelete schedulingConfig.mode;\r\n\t\t\t}\r\n\r\n\t\t\tif(schedulingConfig.strict !== undefined){\r\n\t\t\t\tschedulingConfig.gap_behavior = schedulingConfig.strict ? \"compress\" : \"preserve\";\r\n\t\t\t\tdelete schedulingConfig.strict;\r\n\t\t\t}\r\n\r\n\t\t\tif(schedulingConfig.move_asap_tasks !== undefined){\r\n\t\t\t\tschedulingConfig.gap_behavior = schedulingConfig.move_asap_tasks ? \"compress\" : \"preserve\";\r\n\t\t\t\tdelete schedulingConfig.move_asap_tasks;\r\n\t\t\t}\r\n\t\t\treturn schedulingConfig;\r\n\t\t}\r\n\r\n\t\t// backward compatibility: build config from old flags\r\n\t\tconst enabled = !!config.auto_scheduling;\r\n\r\n\t\treturn {\r\n\t\t\t...getDefaultAutoSchedulingConfig(),\r\n\t\t\t...{\r\n\t\t\t\tenabled,\r\n\t\t\t\tapply_constraints: config.auto_scheduling_compatibility ?? false,\r\n\t\t\t\tgap_behavior: config.auto_scheduling_strict !== true ? \"preserve\" : \"compress\",\r\n\t\t\t\tdescendant_links: config.auto_scheduling_descendant_links ?? false,\r\n\t\t\t\tschedule_on_parse: config.auto_scheduling_initial ?? true,\r\n\t\t\t\tmove_projects: config.auto_scheduling_move_projects ?? true,\r\n\t\t\t\tuse_progress: config.auto_scheduling_use_progress ?? false,\r\n\r\n\t\t\t\tschedule_from_end: config.schedule_from_end ?? false,\r\n\t\t\t\tproject_constraint: config.auto_scheduling_project_constraint ?? false,\r\n\t\t\t\tshow_constraints: false\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetDefaultAutoSchedulingConfig,\r\n\t\tgetAutoSchedulingConfig\r\n\t};\r\n};","export default function(gantt) {\r\n\tgantt.getGridColumn = function(name) {\r\n\t\tvar columns = gantt.config.columns;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tif (columns[i].name == name)\r\n\t\t\t\treturn columns[i];\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t};\r\n\r\n\tgantt.getGridColumns = function() {\r\n\t\treturn gantt.config.columns.slice();\r\n\t};\r\n};","export default function(gantt) {\r\n\tgantt.isReadonly = function (item) {\r\n\r\n\t\tif((typeof item == \"number\" || typeof item == \"string\") && gantt.isTaskExists(item)){\r\n\t\t\titem = gantt.getTask(item);\r\n\t\t}\r\n\t\tif (item && item[this.config.editable_property]) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn (item && item[this.config.readonly_property]) || this.config.readonly;\r\n\t\t}\r\n\t};\r\n};","import CalendarManager from \"./calendar_manager\";\r\nimport TimeCalculator from \"./time_calculator\";\r\nimport worktimeFacadeFactory from \"../facades/worktime_calendars\";\r\nimport * as utils from \"../../utils/utils\";\r\n\r\nexport default function (gantt) {\r\n\tvar manager = new CalendarManager(gantt),\r\n\ttimeCalculator = new TimeCalculator(manager);\r\n\tvar facade = worktimeFacadeFactory.create(manager, timeCalculator);\r\n\tutils.mixin(gantt, facade);\r\n};\r\n","export default function(gantt) {\r\n\r\n\tgantt.getTaskType = function (type) {\r\n\t\treturn \"task\";\r\n\t};\r\n};","/*\r\n reuse results of functions that can be recalculated during rendering\r\n greatly increases the rendering speed when critical path enabled\r\n Sample - 94_dev/critical_path.html\r\n\r\n */\r\nexport default function(gantt){\r\n\r\ngantt._cached_functions = {\r\n\tcache: {},\r\n\tmode: false,\r\n\tcritical_path_mode: false,\r\n\twrap_methods : function(methods, object){\r\n\t\tif(object._prefetch_originals){\r\n\t\t\tfor(var i in object._prefetch_originals){\r\n\t\t\t\tobject[i] = object._prefetch_originals[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tobject._prefetch_originals = {};\r\n\t\tfor(var i = 0; i < methods.length; i++)\r\n\t\t\tthis.prefetch(methods[i], object);\r\n\r\n\t},\r\n\tprefetch : function(methodname, host){\r\n\t\tvar original = host[methodname];\r\n\t\tif(original){\r\n\t\t\tvar optimizer = this;\r\n\r\n\t\t\thost._prefetch_originals[methodname] = original;\r\n\t\t\thost[methodname] = function get_prefetched_value(){\r\n\r\n\t\t\t\tvar argumentsArray = new Array(arguments.length);\r\n\t\t\t\tfor (var i = 0, l = arguments.length; i < l; i++) {\r\n\t\t\t\t\targumentsArray[i] = arguments[i];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(optimizer.active){\r\n\t\t\t\t\tvar args = optimizer.get_arguments_hash(Array.prototype.slice.call(argumentsArray));\r\n\t\t\t\t\tif(!optimizer.cache[methodname]){\r\n\t\t\t\t\t\toptimizer.cache[methodname] = {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar cached_values = optimizer.cache[methodname];\r\n\r\n\t\t\t\t\tif(optimizer.has_cached_value(cached_values, args)){\r\n\t\t\t\t\t\treturn optimizer.get_cached_value(cached_values, args);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar value = original.apply(this, argumentsArray);\r\n\t\t\t\t\t\toptimizer.cache_value(cached_values, args, value);\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn original.apply(this, argumentsArray);\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn original;\r\n\t},\r\n\tcache_value: function(cache, arguments_hash, value){\r\n\t\tif(this.is_date(value))\r\n\t\t\tvalue = new Date(value);\r\n\t\tcache[arguments_hash] = value;\r\n\t},\r\n\thas_cached_value: function(cache, arguments_hash){\r\n\t\treturn cache.hasOwnProperty(arguments_hash);\r\n\t},\r\n\tget_cached_value: function(cache, arguments_hash){\r\n\t\tvar data = cache[arguments_hash];\r\n\r\n\t\t//for cached dates - return copy\r\n\t\tif(this.is_date(data)){\r\n\t\t\tdata = new Date(data);\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\tis_date: function(value){\r\n\t\treturn (value && value.getUTCDate);\r\n\t},\r\n\tget_arguments_hash:function(args){\r\n\t\tvar values = [];\r\n\t\tfor(var i = 0; i < args.length; i++){\r\n\t\t\tvalues.push(this.stringify_argument(args[i]));\r\n\t\t}\r\n\t\treturn \"(\" + values.join(\";\") + \")\";\r\n\t},\r\n\tstringify_argument: function(value){\r\n\t\t//expecting task or link, or any other data entries, dates and primitive values\r\n\t\tvar ret = \"\";\r\n\t\tif(value.id){\r\n\t\t\tret = value.id;\r\n\t\t}else if(this.is_date(value)){\r\n\t\t\tret = value.valueOf();\r\n\t\t}else{\r\n\t\t\tret = value;\r\n\t\t}\r\n\t\treturn ret + \"\";\r\n\t},\r\n\tactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = true;\r\n\t},\r\n\tdeactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = false;\r\n\t},\r\n\tclear: function(){\r\n\t\tthis.cache = {};\r\n\t},\r\n\r\n\tsetup: function(gantt){\r\n\t\tvar override_gantt = [];\r\n\r\n\t\tvar gantt_methods  = [\r\n\t\t\t'_isProjectEnd',\r\n\t\t\t'_getProjectEnd',\r\n\t\t\t'_getSlack'\r\n\t\t];\r\n\r\n\r\n\r\n\t\tif(this.mode == 'auto'){\r\n\t\t\tif(gantt.config.highlight_critical_path){\r\n\t\t\t\toverride_gantt = gantt_methods;\r\n\t\t\t}\r\n\t\t}else if(this.mode === true){\r\n\t\t\toverride_gantt = gantt_methods;\r\n\t\t}\r\n\r\n\t\tthis.wrap_methods(override_gantt, gantt);\r\n\r\n\t},\r\n\tupdate_if_changed: function(gantt){\r\n\t\tvar changed = (this.critical_path_mode != gantt.config.highlight_critical_path ||\r\n\t\t\t\t\t\tthis.mode !== gantt.config.optimize_render);\r\n\t\tif(changed){\r\n\t\t\tthis.critical_path_mode = gantt.config.highlight_critical_path;\r\n\t\t\tthis.mode = gantt.config.optimize_render;\r\n\t\t\tthis.setup(gantt);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction activate(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\tif(!gantt._cached_functions.active){\r\n\t\tgantt._cached_functions.activate();\r\n\t}\r\n\treturn true;\r\n}\r\ngantt.attachEvent(\"onBeforeGanttRender\", activate);\r\ngantt.attachEvent(\"onBeforeDataRender\", activate);\r\ngantt.attachEvent(\"onBeforeSmartRender\",  function(){\r\n\tactivate();\r\n});\r\ngantt.attachEvent(\"onBeforeParse\", activate);\r\ngantt.attachEvent(\"onDataRender\", function(){\r\n\tgantt._cached_functions.deactivate();\r\n});\r\nvar deactivTimeout = null;\r\ngantt.attachEvent(\"onSmartRender\", function(){\r\n\tif(deactivTimeout)\r\n\t\tclearTimeout(deactivTimeout);\r\n\tdeactivTimeout = setTimeout(function(){\r\n\t\tgantt._cached_functions.deactivate();\r\n\t}, 1000);\r\n});\r\n\r\ngantt.attachEvent(\"onBeforeGanttReady\", function(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\treturn true;\r\n});\r\n\r\n};","function extend(gantt){\r\n\r\n\tgantt.destructor = function(){\r\n\t\tthis.clearAll();\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\r\n\t\tthis._getDatastores().forEach(function(store){\r\n\t\t\tstore.destructor();\r\n\t\t});\r\n\r\n\t\tif(this.$root){\r\n\t\t\tdelete this.$root.gantt;\r\n\t\t}\r\n\r\n\t\tif(this._eventRemoveAll){\r\n\t\t\tthis._eventRemoveAll();\r\n\t\t}\r\n\r\n\t\tif(this.$layout){\r\n\t\t\tthis.$layout.destructor();\r\n\t\t}\r\n\r\n\t\tif(this.resetLightbox){\r\n\t\t\tthis.resetLightbox();\r\n\t\t}\r\n\r\n\t\t// GS-99. Call this here to detach the events\r\n\t\tif (this.ext.inlineEditors && this.ext.inlineEditors.destructor) {\r\n\t\t\tthis.ext.inlineEditors.destructor();\r\n\t\t}\r\n\r\n\t\tif(this._dp && this._dp.destructor){\r\n\t\t\tthis._dp.destructor();\r\n\t\t}\r\n\t\tthis.$services.destructor();\r\n\r\n\t\t// detachAllEvents should be called last, because in components may be attached events\r\n\t\tthis.detachAllEvents();\r\n\r\n\t\tfor(var i in this){\r\n\t\t\tif(i.indexOf(\"$\") === 0){\r\n\t\t\t\tdelete this[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.$destroyed = true;\r\n\t};\r\n}\r\n\r\nexport default extend;\r\n","import ar from \"./locale_ar\";\r\nimport be from \"./locale_be\";\r\nimport ca from \"./locale_ca\";\r\nimport cn from \"./locale_cn\";\r\nimport cs from \"./locale_cs\";\r\nimport da from \"./locale_da\";\r\nimport de from \"./locale_de\";\r\nimport el from \"./locale_el\";\r\nimport en from \"./locale_en\";\r\nimport es from \"./locale_es\";\r\nimport fa from \"./locale_fa\";\r\nimport fi from \"./locale_fi\";\r\nimport fr from \"./locale_fr\";\r\nimport he from \"./locale_he\";\r\nimport hr from \"./locale_hr\";\r\nimport hu from \"./locale_hu\";\r\nimport id from \"./locale_id\";\r\nimport it from \"./locale_it\";\r\nimport jp from \"./locale_jp\";\r\nimport kr from \"./locale_kr\";\r\n\r\nimport LocaleManager from \"./locale_manager\";\r\n\r\nimport nb from \"./locale_nb\";\r\nimport nl from \"./locale_nl\";\r\nimport no from \"./locale_no\";\r\nimport pl from \"./locale_pl\";\r\nimport pt from \"./locale_pt\";\r\nimport ro from \"./locale_ro\";\r\nimport ru from \"./locale_ru\";\r\nimport si from \"./locale_si\";\r\nimport sk from \"./locale_sk\";\r\nimport sv from \"./locale_sv\";\r\nimport tr from \"./locale_tr\";\r\nimport ua from \"./locale_ua\";\r\n\r\nexport default function(){\r\n\treturn new LocaleManager({\r\n\t\ten,\r\n\t\tar,\r\n\t\tbe,\r\n\t\tca,\r\n\t\tcn,\r\n\t\tcs,\r\n\t\tda,\r\n\t\tde,\r\n\t\tel,\r\n\t\tes,\r\n\t\tfa,\r\n\t\tfi,\r\n\t\tfr,\r\n\t\the,\r\n\t\thr,\r\n\t\thu,\r\n\t\tid,\r\n\t\tit,\r\n\t\tjp,\r\n\t\tkr,\r\n\t\tnb,\r\n\t\tnl,\r\n\t\tno,\r\n\t\tpl,\r\n\t\tpt,\r\n\t\tro,\r\n\t\tru,\r\n\t\tsi,\r\n\t\tsk,\r\n\t\tsv,\r\n\t\ttr,\r\n\t\tua\r\n\t});\r\n}","import * as utils from \"../../utils/utils\";\r\nimport * as domHelpers from \"./utils/dom_helpers\";\r\n\r\nexport default function(gantt) {\r\n\r\n\tvar boxAttribute = \"data-dhxbox\";\r\n\r\n\tvar _dhx_msg_cfg = null;\r\n\r\n\tfunction callback(config, result) {\r\n\t\tvar usercall = config.callback;\r\n\t\tmodalBox.hide(config.box);\r\n\r\n\t\t_dhx_msg_cfg = config.box = null;\r\n\t\tif (usercall)\r\n\t\t\tusercall(result);\r\n\t}\r\n\r\n\tfunction modal_key(event) {\r\n\t\tif (_dhx_msg_cfg) {\r\n\r\n\t\t\tvar code = event.which || event.keyCode;\r\n\t\t\tvar preventDefault = false;\r\n\r\n\t\t\tif (messageBox.keyboard) {\r\n\t\t\t\tif (code == 13 || code == 32) {\r\n\t\t\t\t\t// default behavior is to confirm/submit popup on space/enter\r\n\t\t\t\t\t// if browser focus is set on button element - do button click instead of default behavior\r\n\t\t\t\t\tvar target = event.target || event.srcElement;\r\n\t\t\t\t\tif (domHelpers.getClassName(target).indexOf(\"gantt_popup_button\") > -1 && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcallback(_dhx_msg_cfg, true);\r\n\t\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (code == 27) {\r\n\t\t\t\t\tcallback(_dhx_msg_cfg, false);\r\n\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (preventDefault) {\r\n\t\t\t\tif (event.preventDefault){\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t\treturn !(event.cancelBubble = true);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\tvar eventElement = domHelpers.getRootNode(gantt.$root) || document;\r\n\tgantt.event(eventElement, \"keydown\", modal_key, true);\r\n\r\n\tfunction modality(mode) {\r\n\t\tif (!modality.cover) {\r\n\t\t\tmodality.cover = document.createElement(\"div\");\r\n\t\t\t//necessary for IE only\r\n\t\t\tmodality.cover.onkeydown = modal_key;\r\n\t\t\tmodality.cover.className = \"dhx_modal_cover\";\r\n\t\t\tdocument.body.appendChild(modality.cover);\r\n\t\t}\r\n\r\n\t\tmodality.cover.style.display = mode ? \"inline-block\" : \"none\";\r\n\t}\r\n\r\n\tfunction button(text, className, result) {\r\n\t\tvar buttonAriaAttrs = gantt._waiAria.messageButtonAttrString(text);\r\n\t\tvar name = className.toLowerCase().replace(/ /g, \"_\");\r\n\t\tvar button_css = \"gantt_\" + name + \"_button\";\r\n\t\treturn \"<div \" + buttonAriaAttrs + \" class='gantt_popup_button \" + button_css + \"' data-result='\" + result + \"' result='\" + result + \"' ><div>\" + text + \"</div></div>\";\r\n\t}\r\n\r\n\tfunction info(text) {\r\n\t\tif (!messageBox.area) {\r\n\t\t\tmessageBox.area = document.createElement(\"div\");\r\n\t\t\tmessageBox.area.className = \"gantt_message_area\";\r\n\t\t\tmessageBox.area.style[messageBox.position] = \"5px\";\r\n\t\t}\r\n\t\tif (!domHelpers.isChildOf(messageBox.area, document.body)){\r\n\t\t\tdocument.body.appendChild(messageBox.area);\r\n\t\t}\r\n\r\n\t\tmessageBox.hide(text.id);\r\n\t\tvar message = document.createElement(\"div\");\r\n\t\tmessage.innerHTML = \"<div>\" + text.text + \"</div>\";\r\n\t\tmessage.className = \"gantt-info gantt-\" + text.type;\r\n\t\tmessage.onclick = function () {\r\n\t\t\tmessageBox.hide(text.id);\r\n\t\t\ttext = null;\r\n\t\t};\r\n\r\n\t\tgantt._waiAria.messageInfoAttr(message);\r\n\r\n\t\tif (messageBox.position == \"bottom\" && messageBox.area.firstChild)\r\n\t\t\tmessageBox.area.insertBefore(message, messageBox.area.firstChild);\r\n\t\telse\r\n\t\t\tmessageBox.area.appendChild(message);\r\n\r\n\t\tif (text.expire > 0)\r\n\t\t\tmessageBox.timers[text.id] = window.setTimeout(function () {\r\n\t\t\t\t// GS-1213: We need that when Gantt is destroyed\r\n\t\t\t\tif (messageBox) messageBox.hide(text.id);\r\n\t\t\t}, text.expire);\r\n\r\n\t\tmessageBox.pull[text.id] = message;\r\n\t\tmessage = null;\r\n\r\n\t\treturn text.id;\r\n\t}\r\n\r\n\tfunction getFirstDefined() {\r\n\t\tvar values = [].slice.apply(arguments, [0]);\r\n\r\n\t\tfor (var i = 0; i < values.length; i++) {\r\n\t\t\tif (values[i]) {\r\n\t\t\t\treturn values[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction _boxStructure(config, ok, cancel) {\r\n\t\tvar box = document.createElement(\"div\");\r\n\r\n\t\tvar contentId = utils.uid();\r\n\t\tgantt._waiAria.messageModalAttr(box, contentId);\r\n\r\n\r\n\t\tbox.className = \" gantt_modal_box gantt-\" + config.type;\r\n\t\tbox.setAttribute(boxAttribute, 1);\r\n\r\n\t\tvar inner = '';\r\n\r\n\t\tif (config.width)\r\n\t\t\tbox.style.width = config.width;\r\n\t\tif (config.height)\r\n\t\t\tbox.style.height = config.height;\r\n\t\tif (config.title)\r\n\t\t\tinner += '<div class=\"gantt_popup_title\">' + config.title + '</div>';\r\n\t\tinner += '<div class=\"gantt_popup_text\" id=\"' + contentId + '\"><span>' + (config.content ? '' : config.text) + '</span></div><div  class=\"gantt_popup_controls\">';\r\n\t\tif (ok)\r\n\t\t\tinner += button(getFirstDefined(config.ok, gantt.locale.labels.message_ok, \"OK\"), \"ok\", true);\r\n\t\tif (cancel)\r\n\t\t\tinner += button(getFirstDefined(config.cancel, gantt.locale.labels.message_cancel, \"Cancel\"), \"cancel\", false);\r\n\r\n\t\tif (config.buttons) {\r\n\t\t\tfor (var i = 0; i < config.buttons.length; i++) {\r\n\t\t\t\tvar btn = config.buttons[i];\r\n\t\t\t\tif (typeof btn == \"object\") {\r\n\t\t\t\t\t// Support { label:\"Save\", css:\"main_button\", value:\"save\" }\r\n\t\t\t\t\tvar label = btn.label;\r\n\t\t\t\t\tvar css = btn.css || (\"gantt_\" + btn.label.toLowerCase() + \"_button\");\r\n\t\t\t\t\tvar value = btn.value || i;\r\n\t\t\t\t\tinner += button(label, css, value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tinner += button(btn, btn, i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tinner += '</div>';\r\n\t\tbox.innerHTML = inner;\r\n\r\n\t\tif (config.content) {\r\n\t\t\tvar node = config.content;\r\n\t\t\tif (typeof node == \"string\")\r\n\t\t\t\tnode = document.getElementById(node);\r\n\t\t\tif (node.style.display == 'none')\r\n\t\t\t\tnode.style.display = \"\";\r\n\t\t\tbox.childNodes[config.title ? 1 : 0].appendChild(node);\r\n\t\t}\r\n\r\n\t\tbox.onclick = function (event) {\r\n\t\t\tvar source = event.target || event.srcElement;\r\n\t\t\tif (!source.className) source = source.parentNode;\r\n\t\t\tif (domHelpers.closest(source, \".gantt_popup_button\")) {\r\n\t\t\t\tvar result = source.getAttribute(\"data-result\");\r\n\t\t\t\tresult = (result == \"true\") || (result == \"false\" ? false : result);\r\n\t\t\t\tcallback(config, result);\r\n\t\t\t}\r\n\t\t};\r\n\t\tconfig.box = box;\r\n\t\tif (ok || cancel)\r\n\t\t\t_dhx_msg_cfg = config;\r\n\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction _createBox(config, ok, cancel) {\r\n\t\tvar box = config.tagName ? config : _boxStructure(config, ok, cancel);\r\n\r\n\t\tif (!config.hidden)\r\n\t\t\tmodality(true);\r\n\t\tdocument.body.appendChild(box);\r\n\t\tvar x = Math.abs(Math.floor(((window.innerWidth || document.documentElement.offsetWidth) - box.offsetWidth) / 2));\r\n\t\tvar y = Math.abs(Math.floor(((window.innerHeight || document.documentElement.offsetHeight) - box.offsetHeight) / 2));\r\n\t\tif (config.position == \"top\")\r\n\t\t\tbox.style.top = \"-3px\";\r\n\t\telse\r\n\t\t\tbox.style.top = y + 'px';\r\n\t\tbox.style.left = x + 'px';\r\n\t\t//necessary for IE only\r\n\t\tbox.onkeydown = modal_key;\r\n\r\n\t\tmodalBox.focus(box);\r\n\r\n\t\tif (config.hidden)\r\n\t\t\tmodalBox.hide(box);\r\n\r\n\t\tgantt.callEvent(\"onMessagePopup\", [box]);\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction alertPopup(config) {\r\n\t\treturn _createBox(config, true, false);\r\n\t}\r\n\r\n\tfunction confirmPopup(config) {\r\n\t\treturn _createBox(config, true, true);\r\n\t}\r\n\r\n\tfunction boxPopup(config) {\r\n\t\treturn _createBox(config);\r\n\t}\r\n\r\n\tfunction box_params(text, type, callback) {\r\n\t\tif (typeof text != \"object\") {\r\n\t\t\tif (typeof type == \"function\") {\r\n\t\t\t\tcallback = type;\r\n\t\t\t\ttype = \"\";\r\n\t\t\t}\r\n\t\t\ttext = {text: text, type: type, callback: callback};\r\n\t\t}\r\n\t\treturn text;\r\n\t}\r\n\r\n\tfunction params(text, type, expire, id) {\r\n\t\tif (typeof text != \"object\")\r\n\t\t\ttext = {text: text, type: type, expire: expire, id: id};\r\n\t\ttext.id = text.id || utils.uid();\r\n\t\ttext.expire = text.expire || messageBox.expire;\r\n\t\treturn text;\r\n\t}\r\n\r\n\tvar alertBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"confirm\";\r\n\t\treturn alertPopup(text);\r\n\t};\r\n\tvar confirmBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn confirmPopup(text);\r\n\t};\r\n\tvar modalBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn boxPopup(text);\r\n\t};\r\n\tmodalBox.hide = function (node) {\r\n\t\twhile (node && node.getAttribute && !node.getAttribute(boxAttribute))\r\n\t\t\tnode = node.parentNode;\r\n\t\tif (node) {\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\tmodality(false);\r\n\r\n\t\t\tgantt.callEvent(\"onAfterMessagePopup\", [node]);\r\n\t\t}\r\n\t};\r\n\r\n\tmodalBox.focus = function (node) {\r\n\t\tsetTimeout(function () {\r\n\t\t\tvar focusable = domHelpers.getFocusableNodes(node);\r\n\t\t\tif (focusable.length) {\r\n\t\t\t\tif (focusable[0].focus) focusable[0].focus();\r\n\t\t\t}\r\n\t\t}, 1);\r\n\t};\r\n\r\n\tvar messageBox = function (text, type, expire, id) {\r\n\t\ttext = params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"info\";\r\n\r\n\t\tvar subtype = text.type.split(\"-\")[0];\r\n\t\tswitch (subtype) {\r\n\t\t\tcase \"alert\":\r\n\t\t\t\treturn alertPopup(text);\r\n\t\t\tcase \"confirm\":\r\n\t\t\t\treturn confirmPopup(text);\r\n\t\t\tcase \"modalbox\":\r\n\t\t\t\treturn boxPopup(text);\r\n\t\t\tdefault:\r\n\t\t\t\treturn info(text);\r\n\t\t}\r\n\t};\r\n\r\n\tmessageBox.seed = (new Date()).valueOf();\r\n\tmessageBox.uid = utils.uid;\r\n\tmessageBox.expire = 4000;\r\n\tmessageBox.keyboard = true;\r\n\tmessageBox.position = \"top\";\r\n\tmessageBox.pull = {};\r\n\tmessageBox.timers = {};\r\n\r\n\tmessageBox.hideAll = function () {\r\n\t\tfor (var key in messageBox.pull)\r\n\t\t\tmessageBox.hide(key);\r\n\t};\r\n\tmessageBox.hide = function (id) {\r\n\t\tvar obj = messageBox.pull[id];\r\n\t\tif (obj && obj.parentNode) {\r\n\t\t\twindow.setTimeout(function () {\r\n\t\t\t\tobj.parentNode.removeChild(obj);\r\n\t\t\t\tobj = null;\r\n\t\t\t}, 2000);\r\n\t\t\tobj.className += \" hidden\";\r\n\r\n\t\t\tif (messageBox.timers[id])\r\n\t\t\t\twindow.clearTimeout(messageBox.timers[id]);\r\n\t\t\tdelete messageBox.pull[id];\r\n\t\t}\r\n\t};\r\n\r\n\tvar popups = [];\r\n\tgantt.attachEvent(\"onMessagePopup\", function(box){\r\n\t\tpopups.push(box);\r\n\t});\r\n\tgantt.attachEvent(\"onAfterMessagePopup\", function(box){\r\n\t\tfor(var i = 0; i < popups.length; i++){\r\n\t\t\tif(popups[i] === box){\r\n\t\t\t\tpopups.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\tif(modality.cover && modality.cover.parentNode){\r\n\t\t\tmodality.cover.parentNode.removeChild(modality.cover);\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < popups.length; i++){\r\n\t\t\tif(popups[i].parentNode){\r\n\t\t\t\tpopups[i].parentNode.removeChild(popups[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tpopups = null;\r\n\r\n\t\tif(messageBox.area && messageBox.area.parentNode){\r\n\t\t\tmessageBox.area.parentNode.removeChild(messageBox.area);\r\n\t\t}\r\n\t\tmessageBox = null;\r\n\t});\r\n\r\n\treturn {\r\n\t\talert: alertBox,\r\n\t\tconfirm: confirmBox,\r\n\t\tmessage: messageBox,\r\n\t\tmodalbox: modalBox\r\n\t};\r\n};","import * as utils from \"../../utils/utils\";\r\n\r\nfunction extendSettings (store, parentSettings){\r\n\tvar own = this.$config[store];\r\n\r\n\tif(own){\r\n\t\tif(!own.$extendedConfig){\r\n\t\t\town.$extendedConfig = true;\r\n\t\t\tObject.setPrototypeOf(own, parentSettings);\r\n\t\t}\r\n\t\treturn own;\r\n\t}else{\r\n\t\treturn parentSettings;\r\n\t}\r\n}\r\n\r\nvar configurable = function(parentView){\r\n\tvar parentConfig,\r\n\t\tparentTemplates;\r\n\r\n\treturn {\r\n\t\t$getConfig: function(){\r\n\t\t\tif(!parentConfig){\r\n\t\t\t\tparentConfig = parentView ? parentView.$getConfig() : this.$gantt.config;\r\n\t\t\t}\r\n\t\t\tif(!this.$config.config){\r\n\t\t\t\treturn parentConfig;\r\n\t\t\t}else{\r\n\t\t\t\treturn extendSettings.call(this, \"config\", parentConfig);\r\n\t\t\t}\r\n\t\t},\r\n\t\t$getTemplates: function(){\r\n\t\t\tif(!parentTemplates){\r\n\t\t\t\tparentTemplates = parentView ? parentView.$getTemplates() : this.$gantt.templates;\r\n\t\t\t}\r\n\t\t\tif(!this.$config.templates){\r\n\t\t\t\treturn parentTemplates;\r\n\t\t\t}else{\r\n\t\t\t\treturn extendSettings.call(this, \"templates\", parentTemplates);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport default function(obj, parent){\r\n\tutils.mixin(obj, configurable(parent));\r\n};","import * as utils from \"../../utils/utils\";\r\nimport configurable from \"./configurable\";\r\n\r\nvar uiFactory = function createFactory(gantt){\r\n\tvar views = {};\r\n\r\n\tfunction ui(cell, parentView) {\r\n\t\tvar content;\r\n\t\tvar view = \"cell\";\r\n\t\tif (cell.view){\r\n\t\t\tview = \"viewcell\";\r\n\t\t}else if (cell.resizer) {\r\n\t\t\tview = \"resizer\";\r\n\t\t}\r\n\t\telse if (cell.rows || cell.cols) {\r\n\t\t\tview = \"layout\";\r\n\t\t}\r\n\t\telse if (cell.views) {\r\n\t\t\tview = \"multiview\";\r\n\t\t}\r\n\r\n\t\tcontent = createView.call(this, view, null, cell, parentView);\r\n\t\treturn content;\r\n\t}\r\n\t\r\n\tvar createdViews = {};\r\n\r\n\tfunction createView(name, parent, config, parentView) {\r\n\t\tvar creator = views[name];\r\n\r\n\t\tif(!creator || !creator.create)\r\n\t\t\treturn false;\r\n\r\n\t\tif(name == \"resizer\" && !config.mode){\r\n\t\t\tif(parentView.$config.cols){\r\n\t\t\t\tconfig.mode = \"x\";\r\n\t\t\t}else{\r\n\t\t\t\tconfig.mode = \"y\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(name == \"viewcell\" && config.view == \"scrollbar\" && !config.scroll){\r\n\t\t\tif(parentView.$config.cols){\r\n\t\t\t\tconfig.scroll = \"y\";\r\n\t\t\t}else{\r\n\t\t\t\tconfig.scroll = \"x\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar config = utils.copy(config);\r\n\r\n\t\tif(!config.id && !createdViews[config.view]){\r\n\t\t\tconfig.id = config.view;\r\n\t\t}\r\n\r\n\t\tif(config.id && !config.css){\r\n\t\t\tconfig.css = config.id+\"_cell\";\r\n\t\t}\r\n\r\n\t\tvar view = new creator.create(parent, config, this, gantt);\r\n\r\n\t\tif(creator.configure){\r\n\t\t\tcreator.configure(view);\r\n\t\t}\r\n\r\n\t\tconfigurable(view, parentView);\r\n\t\tif(!view.$id){\r\n\t\t\tview.$id = config.id || gantt.uid();\r\n\t\t}\r\n\r\n\t\tif(!view.$parent && typeof parent == \"object\"){\r\n\t\t\tview.$parent = parent;\r\n\t\t}\r\n\t\tif(!view.$config){\r\n\t\t\tview.$config = config;\r\n\t\t}\r\n\r\n\t\tif(createdViews[view.$id]){\r\n\t\t\tview.$id = gantt.uid();\r\n\t\t}\r\n\r\n\t\tcreatedViews[view.$id] = view;\r\n\r\n\t\treturn view;\r\n\t}\r\n\r\n\tfunction reset(){\r\n\t\tcreatedViews = {};\r\n\t}\r\n\r\n\tfunction register(name, viewConstructor, configure){\r\n\t\tviews[name] = {create: viewConstructor, configure: configure};\r\n\t}\r\n\r\n\tfunction getView(id){\r\n\t\treturn createdViews[id];\r\n\t}\r\n\r\n\tvar factory = {\r\n\t\tinitUI:ui,\r\n\t\treset: reset,\r\n\t\tregisterView: register,\r\n\t\tcreateView: createView,\r\n\t\tgetView: getView\r\n\t};\r\n\r\n\treturn factory;\r\n};\r\n\r\nexport default {\r\n\tcreateFactory: uiFactory\r\n};\r\n\r\n","import * as domHelpers from \"./utils/dom_helpers\";\r\n\r\nvar createMouseHandler = (function(domHelpers) {\r\n\treturn function (gantt) {\r\n\t\tvar eventHandlers = {\r\n\t\t\t\"click\": {},\r\n\t\t\t\"doubleclick\": {},\r\n\t\t\t\"contextMenu\": {}\r\n\t\t};\r\n\r\n\t\tfunction addEventTarget(event, className, handler, root) {\r\n\t\t\tif(!eventHandlers[event][className]){\r\n\t\t\t\teventHandlers[event][className] = [];\r\n\t\t\t}\r\n\r\n\t\t\teventHandlers[event][className].push({\r\n\t\t\t\thandler: handler,\r\n\t\t\t\troot: root\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction callHandler(eventName, className, root, args) {\r\n\t\t\tvar handlers = eventHandlers[eventName][className];\r\n\t\t\tif(handlers){\r\n\t\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\t\tif(!(root || handlers[i].root) || handlers[i].root === root){\r\n\t\t\t\t\t\thandlers[i].handler.apply(this, args);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar id = gantt.locate(e);\r\n\r\n\t\t\tvar handlers = findEventHandlers(e, eventHandlers.click);\r\n\t\t\tvar res = true;\r\n\t\t\tif (id !== null) {\r\n\t\t\t\tres = !gantt.checkEvent(\"onTaskClick\") || gantt.callEvent(\"onTaskClick\", [id, e]);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.callEvent(\"onEmptyClick\", [e]);\r\n\t\t\t}\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = callEventHandlers(handlers, e, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t// GS-1025: if we don't do that, the dropdown or date select will be closed for unselected tasks\r\n\t\t\t\t// GS-1078: or for the built-in select inline editor\r\n\t\t\t\tswitch(e.target.nodeName) {\r\n\t\t\t\t\tcase \"SELECT\":\r\n\t\t\t\t\tcase 'INPUT':\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//allow task selection when the multiselect plugin is not enabled\r\n\t\t\t\tif (id && gantt.getTask(id) && !gantt._multiselect && gantt.config.select_task) {\r\n\t\t\t\t\tgantt.selectTask(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onContextMenu(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar src = e.target || e.srcElement,\r\n\t\t\t\ttaskId = gantt.locate(src),\r\n\t\t\t\tlinkId = gantt.locate(src, gantt.config.link_attribute);\r\n\r\n\t\t\tvar res = !gantt.checkEvent(\"onContextMenu\") || gantt.callEvent(\"onContextMenu\", [taskId, linkId, e]);\r\n\t\t\tif (!res) {\r\n\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\telse\r\n\t\t\t\t\te.returnValue = false;\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\t\tfunction findEventHandlers(e, hash){\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar handlers = [];\r\n\t\t\twhile (trg) {\r\n\t\t\t\tvar css = domHelpers.getClassName(trg);\r\n\t\t\t\tif (css) {\r\n\t\t\t\t\tcss = css.split(\" \");\r\n\t\t\t\t\tfor (var i = 0; i < css.length; i++) {\r\n\t\t\t\t\t\tif (!css[i]) continue;\r\n\t\t\t\t\t\tif (hash[css[i]]) {\r\n\t\t\t\t\t\t\tvar delegateHandlers = hash[css[i]];\r\n\r\n\t\t\t\t\t\t\tfor(var h = 0; h < delegateHandlers.length; h++){\r\n\t\t\t\t\t\t\t\tif(delegateHandlers[h].root){\r\n\t\t\t\t\t\t\t\t\tif(!domHelpers.isChildOf(trg, delegateHandlers[h].root)){\r\n\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\thandlers.push(delegateHandlers[h].handler);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttrg = trg.parentNode;\r\n\t\t\t}\r\n\t\t\treturn handlers;\r\n\t\t}\r\n\r\n\t\tfunction callEventHandlers(handlers, e, id){\r\n\t\t\tvar res = true;\r\n\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tvar handlerResult =  handlers[i].call(gantt, e, id, e.target || e.srcElement);\r\n\t\t\t\tres = res && !(typeof handlerResult != \"undefined\" && handlerResult !== true);\r\n\t\t\t}\r\n\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\r\n\t\tfunction onDoubleClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar id = gantt.locate(e);\r\n\r\n\t\t\tvar handlers = findEventHandlers(e, eventHandlers.doubleclick);\r\n\t\t\t// when doubleclick fired not on task, id === null\r\n\t\t\tvar res = !gantt.checkEvent(\"onTaskDblClick\") || id === null || gantt.callEvent(\"onTaskDblClick\", [id, e]);\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = callEventHandlers(handlers, e, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (id !== null && gantt.getTask(id)) {\r\n\t\t\t\t\tif (res && gantt.config.details_on_dblclick && !gantt.isReadonly(id)) {\r\n\t\t\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onMouseMove(e) {\r\n\t\t\tif (gantt.checkEvent(\"onMouseMove\")) {\r\n\t\t\t\tvar id = gantt.locate(e);\r\n\t\t\t\tgantt._last_move_event = e;\r\n\t\t\t\tgantt.callEvent(\"onMouseMove\", [id, e]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction detach(eventName, className, handler, root) {\r\n\t\t\tif (eventHandlers[eventName] && eventHandlers[eventName][className]) {\r\n\t\t\t\tvar handlers = eventHandlers[eventName];\r\n\t\t\t\tvar elementHandlers = handlers[className];\r\n\t\t\t\tfor(var i = 0; i < elementHandlers.length; i++){\r\n\t\t\t\t\tif(elementHandlers[i].root == root){\r\n\t\t\t\t\t\telementHandlers.splice(i, 1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(!elementHandlers.length){\r\n\t\t\t\t\tdelete handlers[className];\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar domEvents = gantt._createDomEventScope();\r\n\r\n\t\tfunction reset(node){\r\n\r\n\t\t\tdomEvents.detachAll();\r\n\r\n\t\t\tif(node){\r\n\t\t\t\tdomEvents.attach(node, \"click\", onClick);\r\n\t\t\t\tdomEvents.attach(node, \"dblclick\", onDoubleClick);\r\n\t\t\t\tdomEvents.attach(node, \"mousemove\", onMouseMove);\r\n\t\t\t\tdomEvents.attach(node, \"contextmenu\", onContextMenu);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\treturn {\r\n\t\t\treset: reset,\r\n\t\t\tglobal: function(event, classname, handler){\r\n\t\t\t\taddEventTarget(event, classname, handler, null);\r\n\t\t\t},\r\n\t\t\tdelegate: addEventTarget,\r\n\t\t\tdetach: detach,\r\n\t\t\tcallHandler: callHandler,\r\n\t\t\tonDoubleClick: onDoubleClick,\r\n\t\t\tonMouseMove: onMouseMove,\r\n\t\t\tonContextMenu: onContextMenu,\r\n\t\t\tonClick: onClick,\r\n\t\t\tdestructor: function(){\r\n\t\t\t\treset();\r\n\t\t\t\teventHandlers = null;\r\n\t\t\t\tdomEvents = null;\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t};\r\n\r\n})(domHelpers);\r\n\r\n\r\nexport default {\r\n\tinit:createMouseHandler\r\n};","export default function(viewport, box, gantt){\r\n\tif(!box){\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif(box.left > viewport.x_end || box.left + box.width < viewport.x){\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif(box.top > viewport.y_end || box.top + box.height < viewport.y){\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\treturn true;\r\n};","export default function(gantt){\r\n\treturn gantt.config.smart_rendering && gantt._smart_render;\r\n};","export default function(item, view, config){\r\n\treturn {\r\n\t\ttop: view.getItemTop(item.id),\r\n\t\theight: view.getItemHeight(item.id),\r\n\t\tleft: 0,\r\n\t\tright: Infinity\r\n\t};\r\n};","export default function getVisibleTasksRange(gantt, view, config, datastore, viewport){\r\n\tvar buffer = 1;\r\n\tvar start = view.getItemIndexByTopPosition(viewport.y) || 0;\r\n\tvar end = view.getItemIndexByTopPosition(viewport.y_end) || datastore.count();\r\n\tvar indexStart = Math.max(0, start - buffer);\r\n\tvar indexEnd =  Math.min(datastore.count(), end + buffer);\r\n\t// GS-2481 and GS-1715, need to take into account selected task when using keyboard shortcuts and when the inline editor is opened \r\n\tconst extraTasksIds= [];\r\n\tif (gantt.config.keyboard_navigation && gantt.getSelectedId()) {\r\n\t\tlet task = gantt.getTask(gantt.getSelectedId());\r\n\t\t// GS-2661 and GS-2835: The selected task shouldn't be a split child \r\n\t\t// and its parent shouldn't be collapsed\r\n\t\tif(task.$expanded_branch && !task.$split_subtask) {\r\n\t\t\textraTasksIds.push(gantt.getSelectedId());\r\n\t\t}\r\n\t}\r\n\tif (gantt.$ui.getView(\"grid\") && gantt.ext.inlineEditors && gantt.ext.inlineEditors.getState().id) {\r\n\t\tlet inlineEditorId = gantt.ext.inlineEditors.getState().id;\r\n\t\tif (datastore.exists(inlineEditorId)){\r\n\t\t\textraTasksIds.push(inlineEditorId);\r\n\t\t}\r\n\t}\r\n\treturn {\r\n\t\tstart: indexStart,\r\n\t\tend: indexEnd,\r\n\t\tids: extraTasksIds \r\n\t};\r\n};","import genericViewPortChecker from \"./viewport/is_in_viewport\";\r\nimport isLegacyRender from \"./is_legacy_smart_render\";\r\nimport basicGetRectangle from \"./viewport/get_grid_row_rectangle\";\r\nimport basicGetRange from \"./viewport/get_visible_bars_range\";\r\nvar rendererFactory = function(gantt){\r\n\r\n\t//hash of dom elements is needed to redraw single bar/link\r\n\tvar task_area_pulls = {},\r\n\t\ttask_area_renderers = {};\r\n\r\n\tfunction getView(layer){\r\n\t\tvar view = null;\r\n\t\tif (typeof layer.view === \"string\") {\r\n\t\t\tview = gantt.$ui.getView(layer.view);\r\n\t\t} else if (layer.view) {\r\n\t\t\tview = layer.view;\r\n\t\t}\r\n\t\treturn view;\r\n\t}\r\n\r\n\tfunction getRenderer(id, layer, node) {\r\n\t\t\r\n\t\tif (task_area_renderers[id])\r\n\t\t\treturn task_area_renderers[id];\r\n\r\n\t\tif (!layer.renderer)\r\n\t\t\tgantt.assert(false, \"Invalid renderer call\");\r\n\r\n\t\tvar renderMethod = null;\r\n\t\tvar updateMethod = null;\r\n\t\tvar getRectangle = null;\r\n\t\tvar renderCallbackMethod = null;\r\n\t\tvar specializedViewPortChecker = null;\r\n\r\n\t\tif(typeof layer.renderer === \"function\"){\r\n\t\t\trenderMethod = layer.renderer;\r\n\t\t\tgetRectangle = basicGetRectangle;\r\n\t\t}else{\r\n\t\t\trenderMethod = layer.renderer.render;\r\n\t\t\tupdateMethod = layer.renderer.update;\r\n\t\t\trenderCallbackMethod = layer.renderer.onrender;\r\n\t\t\t\r\n\t\t\tif(layer.renderer.isInViewPort){\r\n\t\t\t\tspecializedViewPortChecker = layer.renderer.isInViewPort;\r\n\t\t\t}else{\r\n\t\t\t\tgetRectangle = layer.renderer.getRectangle;\r\n\t\t\t}\r\n\r\n\t\t\tif (!getRectangle && getRectangle !== null) {\r\n\t\t\t\tgetRectangle = basicGetRectangle;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar filter = layer.filter;\r\n\r\n\t\tif (node)\r\n\t\t\tnode.setAttribute(gantt.config.layer_attribute, true);\r\n\r\n\t\ttask_area_renderers[id] = {\r\n\t\t\trender_item: function (item, container, viewPort, layerView, viewConfig) {\r\n\t\t\t\tcontainer = container || node;\r\n\t\t\t\tif (filter) {\r\n\t\t\t\t\tif (!filter(item)) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar view = layerView || getView(layer);\r\n\t\t\t\tvar config = viewConfig || (view ? view.$getConfig() : null);\r\n\t\t\t\tvar rendererViewPort = viewPort;\r\n\t\t\t\tif(!rendererViewPort && config && config.smart_rendering){\r\n\t\t\t\t\trendererViewPort = view.getViewPort();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar dom = null;\r\n\t\t\t\tif(!isLegacyRender(gantt) && (getRectangle || specializedViewPortChecker) && rendererViewPort){\r\n\t\t\t\t\tvar isVisible = false;\r\n\t\t\t\t\tif(specializedViewPortChecker){\r\n\t\t\t\t\t\tisVisible = specializedViewPortChecker(item, rendererViewPort, view, config, gantt);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tisVisible = genericViewPortChecker(rendererViewPort, getRectangle(item, view, config, gantt), gantt);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(isVisible){\r\n\t\t\t\t\t\tdom = renderMethod.call(gantt, item, view, config, rendererViewPort);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdom = renderMethod.call(gantt, item, view, config, rendererViewPort);\r\n\t\t\t\t}\r\n\t\t\t\tthis.append(item, dom, container);\r\n\r\n\t\t\t\tvar useBuffer = container.nodeType == 11;//DocumentFragment\r\n\t\t\t\tif(renderCallbackMethod && !useBuffer && dom) {\r\n\t\t\t\t\trenderCallbackMethod.call(gantt, item, dom, view);\r\n\t\t\t\t} \r\n\t\t\t},\r\n\r\n\t\t\tclear: function (container) {\r\n\r\n\t\t\t\tthis.rendered = task_area_pulls[id] = {};\r\n\t\t\t\tif(!layer.append)\r\n\t\t\t\t\tthis.clear_container(container);\r\n\t\t\t},\r\n\t\t\tclear_container: function (container) {\r\n\t\t\t\tcontainer = container || node;\r\n\t\t\t\tif (container){\r\n\t\t\t\t\tcontainer.innerHTML = \"\";\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tget_visible_range: function(datastore){\r\n\t\t\t\tvar view = getView(layer);\r\n\t\t\t\tvar viewport;\r\n\t\t\t\tvar viewConfig = view ? view.$getConfig() : null;\r\n\t\t\t\tif(viewConfig && viewConfig.smart_rendering){\r\n\t\t\t\t\tviewport = view.getViewPort();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar range;\r\n\t\t\t\tif(view && viewport){\r\n\t\t\t\t\tif(typeof layer.renderer === \"function\"){\r\n\t\t\t\t\t\trange = basicGetRange(gantt, view, viewConfig, datastore, viewport);\r\n\t\t\t\t\t}else if(layer.renderer && layer.renderer.getVisibleRange){\r\n\t\t\t\t\t\trange = layer.renderer.getVisibleRange(gantt, view, viewConfig, datastore, viewport);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(!range){\r\n\t\t\t\t\trange = {\r\n\t\t\t\t\t\tstart: 0,\r\n\t\t\t\t\t\tend: datastore.count()\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn range;\r\n\t\t\t},\r\n\t\t\tprepare_data: function(items){\r\n\t\t\t\tif(layer.renderer && layer.renderer.prepareData){\r\n\t\t\t\t\treturn layer.renderer.prepareData(items, gantt, layer);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trender_items: function (items, container) {\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tvar buffer = document.createDocumentFragment();\r\n\t\t\t\tthis.clear(container);\r\n\r\n\t\t\t\tvar viewPort = null;\r\n\t\t\t\tvar view = getView(layer);\r\n\t\t\t\tvar viewConfig = view ? view.$getConfig() : null;\r\n\t\t\t\tif(viewConfig && viewConfig.smart_rendering){\r\n\t\t\t\t\tviewPort = view.getViewPort();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var i = 0, vis = items.length; i < vis; i++) {\r\n\t\t\t\t\tthis.render_item(items[i], buffer, viewPort, view, viewConfig);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcontainer.appendChild(buffer, container);\r\n\r\n\t\t\t\tvar itemsSearch = {};\r\n\t\t\t\titems.forEach(function(item){\r\n\t\t\t\t\titemsSearch[item.id] = item;\r\n\t\t\t\t});\r\n\t\t\t\tvar renderedItems = {};\r\n\t\t\t\tif (renderCallbackMethod) {\r\n\t\t\t\t\tvar newElements = {};\r\n\t\t\t\t\tfor(var i in this.rendered) {\r\n\t\t\t\t\t\tif(!renderedItems[i]){\r\n\t\t\t\t\t\t\tnewElements[i] = this.rendered[i];\r\n\t\t\t\t\t\t\trenderCallbackMethod.call(gantt, itemsSearch[i], this.rendered[i], view);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tupdate_items: function (items, container) {\r\n\t\t\t\tvar view = getView(layer);\r\n\t\t\t\tvar viewConfig = view ? view.$getConfig() : null;\r\n\t\t\t\tif(!view || !view.$getConfig().smart_rendering || isLegacyRender(gantt)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!this.rendered){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!(getRectangle || specializedViewPortChecker)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tvar buffer = document.createDocumentFragment();\r\n\r\n\t\t\t\tvar viewPort = null;\r\n\t\t\t\tif(view){\r\n\t\t\t\t\tviewPort = view.getViewPort();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar itemsSearch = {};\r\n\t\t\t\titems.forEach(function(item){\r\n\t\t\t\t\titemsSearch[item.id] = item;\r\n\t\t\t\t});\r\n\t\t\t\tvar renderedItems = {};\r\n\r\n\t\t\t\tvar nodesToRemove = {};\r\n\t\t\t\tfor(var i in this.rendered){\r\n\t\t\t\t\tnodesToRemove[i] = true;\r\n\t\t\t\t\trenderedItems[i] = true;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar renderCalledFor = {};\r\n\t\t\t\tfor (var i = 0, vis = items.length; i < vis; i++) {\r\n\t\t\t\t\tvar item = items[i];\r\n\t\t\t\t\tvar itemNode = this.rendered[item.id];\r\n\t\t\t\t\tnodesToRemove[item.id] = false;\r\n\t\t\t\t\tif (itemNode && itemNode.parentNode) {\r\n\t\t\t\t\t\tvar isVisible = false;\r\n\t\t\t\t\t\tif(specializedViewPortChecker){\r\n\t\t\t\t\t\t\tisVisible = specializedViewPortChecker(item, viewPort, view, viewConfig, gantt);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tisVisible = genericViewPortChecker(viewPort, getRectangle(item, view, viewConfig, gantt), gantt);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!isVisible) {\r\n\t\t\t\t\t\t\tnodesToRemove[item.id] = true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif(updateMethod){\r\n\t\t\t\t\t\t\t\tupdateMethod.call(gantt, item, itemNode, view, viewConfig, viewPort);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.restore(item, buffer);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trenderCalledFor[items[i].id] = true;\r\n\t\t\t\t\t\tthis.render_item(items[i], buffer, viewPort, view, viewConfig);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor(var i in nodesToRemove){\r\n\t\t\t\t\tif(nodesToRemove[i]){\r\n\t\t\t\t\t\tthis.hide(i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(buffer.childNodes.length){\r\n\t\t\t\t\tcontainer.appendChild(buffer, container);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (renderCallbackMethod) {\r\n\t\t\t\t\tvar newElements = {};\r\n\t\t\t\t\tfor(var i in this.rendered) {\r\n\t\t\t\t\t\tif(!renderedItems[i] || renderCalledFor[i]){\r\n\t\t\t\t\t\t\tnewElements[i] = this.rendered[i];\r\n\t\t\t\t\t\t\trenderCallbackMethod.call(gantt, itemsSearch[i], this.rendered[i], view);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tappend: function (item, node, container) {\r\n\t\t\t\tif(!this.rendered){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!node) {\r\n\t\t\t\t\tif (this.rendered[item.id]) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.rendered[item.id] && this.rendered[item.id].parentNode) {\r\n\t\t\t\t\tthis.replace_item(item.id, node);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item.id] = node;\r\n\t\t\t},\r\n\t\t\treplace_item: function (item_id, newNode) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.replaceChild(newNode, item);\r\n\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item_id] = newNode;\r\n\t\t\t},\r\n\t\t\tremove_item: function (item_id) {\r\n\t\t\t\tthis.hide(item_id);\r\n\t\t\t\tdelete this.rendered[item_id];\r\n\t\t\t},\r\n\t\t\thide: function (item_id) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.removeChild(item);\r\n\t\t\t\t}\r\n\t\t\t\tdelete this.rendered[item_id];\r\n\t\t\t},\r\n\t\t\trestore: function (item, container) {\r\n\t\t\t\tvar dom = this.rendered[item.id];\r\n\t\t\t\tif (dom) {\r\n\t\t\t\t\tif (!dom.parentNode) {\r\n\t\t\t\t\t\tthis.append(item, dom, container || node);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.render_item(item, container || node);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchange_id: function (oldid, newid) {\r\n\t\t\t\tthis.rendered[newid] = this.rendered[oldid];\r\n\t\t\t\tdelete this.rendered[oldid];\r\n\t\t\t},\r\n\t\t\trendered: task_area_pulls[id],\r\n\t\t\tnode: node,\r\n\t\t\tdestructor: function () {\r\n\t\t\t\tthis.clear();\r\n\t\t\t\tdelete task_area_renderers[id];\r\n\t\t\t\tdelete task_area_pulls[id];\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn task_area_renderers[id];\r\n\t}\r\n\r\n\r\n\tfunction clearRenderers() {\r\n\t\tfor (var i in task_area_renderers) {\r\n\t\t\tgetRenderer(i).destructor();\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetRenderer: getRenderer,\r\n\t\tclearRenderers: clearRenderers\r\n\t};\r\n\r\n};\r\n\r\nexport default rendererFactory;","import renderFactoryProvider from \"./render_factory\";\r\nimport * as utils from \"../../../utils/utils\";\r\nimport * as domHelpers from \"../utils/dom_helpers\";\r\nimport isLegacyRender from \"./is_legacy_smart_render\";\r\n\r\nvar layerFactory = function(gantt){\r\n\r\n\tvar renderFactory = renderFactoryProvider(gantt);\r\n\treturn {\r\n\tcreateGroup: function (getContainer, relativeRoot, defaultFilters, initLayer) {\r\n\r\n\t\tvar renderGroup = {\r\n\t\t\ttempCollection: [],\r\n\t\t\trenderers: {},\r\n\t\t\tcontainer: getContainer,\r\n\t\t\tfilters: [],\r\n\t\t\tgetLayers: function () {\r\n\t\t\t\tthis._add();// add pending layers\r\n\r\n\t\t\t\tvar res = [];\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tres.push(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t\treturn res;\r\n\t\t\t},\r\n\t\t\tgetLayer: function (id) {\r\n\t\t\t\treturn this.renderers[id];\r\n\t\t\t},\r\n\t\t\t_add: function (layer) {\r\n\t\t\t\tif (layer) {\r\n\t\t\t\t\tlayer.id = layer.id || utils.uid();\r\n\t\t\t\t\tthis.tempCollection.push(layer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst container = this.container();\r\n\t\t\t\tconst pending = this.tempCollection;\r\n\t\t\t\tfor (let i = 0; i < pending.length; i++) {\r\n\t\t\t\t\tlayer = pending[i];\r\n\t\t\t\t\t// GS-2803: in case of Salesforce domHelpers.isChildOf check with document.body doesn't work\r\n\t\t\t\t\t// instead we check it with isConnected property\r\n\t\t\t\t\tif (!this.container() && !(layer && layer.container && layer.container.isConnected)) continue;\r\n\r\n\t\t\t\t\tlet node = layer.container,\r\n\t\t\t\t\t\tid = layer.id,\r\n\t\t\t\t\t\ttopmost = layer.topmost;\r\n\t\t\t\t\tif (!node.parentNode) {\r\n\t\t\t\t\t\t//insert on top or below the tasks\r\n\t\t\t\t\t\tif (topmost) {\r\n\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlet rel = relativeRoot ? relativeRoot() : container.firstChild;\r\n\t\t\t\t\t\t\t// GS-1274: if we don't add the second check, Gantt stops working if\r\n\t\t\t\t\t\t\t// we add the task layer without the timeline and switch to a layout with the timeline\r\n\t\t\t\t\t\t\tif (rel && rel.parentNode == container)\r\n\t\t\t\t\t\t\t\tcontainer.insertBefore(node, rel);\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.renderers[id] = renderFactory.getRenderer(\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\tlayer,\r\n\t\t\t\t\t\tnode\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tif (initLayer) {\r\n\t\t\t\t\t\tinitLayer(layer, gantt);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.tempCollection.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddLayer: function (config) {\r\n\t\t\t\tif(config){\r\n\t\t\t\t\tif(typeof config == \"function\"){\r\n\t\t\t\t\t\tconfig = {renderer: config};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(config.filter === undefined){\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(defaultFilters || []);\r\n\t\t\t\t\t}else if(config.filter instanceof Array){\r\n\t\t\t\t\t\tconfig.filter.push(defaultFilters);\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(config.filter);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!config.container){\r\n\t\t\t\t\t\tconfig.container = document.createElement(\"div\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar self = this;\r\n\t\t\t\t\tconfig.requestUpdate = function(){\r\n\t\t\t\t\t\tif(gantt.config.smart_rendering && !isLegacyRender(gantt)){\r\n\t\t\t\t\t\t\tif(self.renderers[config.id]){\r\n\t\t\t\t\t\t\t\tself.onUpdateRequest(self.renderers[config.id]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._add(config);\r\n\t\t\t\treturn (config ? config.id : undefined);\r\n\t\t\t},\r\n\t\t\tonUpdateRequest: function(layer){\r\n\r\n\t\t\t},\r\n\r\n\t\t\teachLayer: function(code){\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tcode(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tremoveLayer: function (id) {\r\n\t\t\t\tif(!this.renderers[id])\r\n\t\t\t\t\treturn;\r\n\t\t\t\tthis.renderers[id].destructor();\r\n\t\t\t\tdelete this.renderers[id];\r\n\t\t\t},\r\n\t\t\tclear: function () {\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tthis.renderers[i].destructor();\r\n\t\t\t\t}\r\n\t\t\t\tthis.renderers = {};\r\n\t\t\t}//,\r\n\t\t\t//prepareConfig: prepareConfig\r\n\t\t};\r\n\r\n\t\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\t\trenderGroup.clear();\r\n\t\t\trenderGroup = null;\r\n\t\t});\r\n\r\n\t\treturn renderGroup;\r\n\t}\r\n};};\r\n\r\n\r\nfunction mergeFilters(filter_methods){\r\n\tif(!(filter_methods instanceof Array)){\r\n\t\tfilter_methods = Array.prototype.slice.call(arguments, 0);\r\n\t}\r\n\r\n\treturn function(obj){\r\n\t\tvar res = true;\r\n\t\tfor(var i = 0, len = filter_methods.length; i < len; i++){\r\n\t\t\tvar filter_method = filter_methods[i];\r\n\t\t\tif(filter_method){\r\n\t\t\t\tres = res && (filter_method(obj.id, obj) !== false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t};\r\n}\r\n\r\n\r\nexport default layerFactory;\r\n","export default function(item, view, config){\r\n\tif(!item.start_date || !item.end_date){\r\n\t\treturn null;\r\n\t}\r\n\tvar padding = 200;\r\n\tvar startCoord = view.posFromDate(item.start_date, view._getPositioningContext ? view._getPositioningContext(item) : null);\r\n\tvar endCoord = view.posFromDate(item.end_date, view._getPositioningContext ? view._getPositioningContext(item) : null);\r\n\tvar left = Math.min(startCoord, endCoord) - padding;\r\n\tvar right = Math.max(startCoord, endCoord) + padding;\r\n\treturn {\r\n\t\ttop: view.getItemTop(item.id),\r\n\t\theight: view.getItemHeight(item.id),\r\n\t\tleft: left,\r\n\t\twidth: right - left\r\n\t};\r\n};","import getLinkRectangle from \"../get_link_rectangle\";\r\n\r\nexport default function(){\r\n\tvar coordinates = [];\r\n\tvar calculated = false;\r\n\r\n\tfunction clearCache(){\r\n\t\tcoordinates = [];\r\n\t\tcalculated = false;\r\n\t}\r\n\r\n\tfunction buildCache(datastore, view, gantt){\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar visibleItems = datastore.getVisibleItems();\r\n\t\t//datastore.eachItem(function(link){\r\n\t\tvisibleItems.forEach(function(link){\r\n\t\t\tvar rec = getLinkRectangle(link, view, config, gantt);\r\n\t\t\tif(!rec){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tcoordinates.push({id: link.id, rec: rec});\r\n\t\t});\r\n\r\n\t\tcoordinates.sort(function(a, b){\r\n\t\t\tif(a.rec.right < b.rec.right){\r\n\t\t\t\treturn -1;\r\n\t\t\t}else {\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tcalculated = true;\r\n\t}\r\n\r\n\tvar initialized = false;\r\n\tfunction init(datastore){\r\n\t\tif(initialized){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tinitialized = true;\r\n\t\tdatastore.attachEvent(\"onPreFilter\", clearCache);\r\n\t\tdatastore.attachEvent(\"onStoreUpdated\", clearCache);\r\n\t\tdatastore.attachEvent(\"onClearAll\", clearCache);\r\n\t\tdatastore.attachEvent(\"onBeforeStoreUpdate\", clearCache);\r\n\t}\r\n\r\n\treturn function getVisibleLinksRange(gantt, view, config, datastore, viewport){\r\n\t\tinit(datastore);\r\n\t\tif(!calculated){\r\n\t\t\tbuildCache(datastore, view, gantt);\r\n\t\t}\r\n\r\n\t\tvar visibleBoxes = [];\r\n\t\tfor(var i = 0; i < coordinates.length; i++){\r\n\t\t\tvar item = coordinates[i];\r\n\t\t\tvar box = item.rec;\r\n\t\t\tif(box.right < viewport.x){\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif(box.left < viewport.x_end && box.right > viewport.x && box.top < viewport.y_end && box.bottom > viewport.y){\r\n\t\t\t\tvisibleBoxes.push(item.id);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn {\r\n\t\t\tids: visibleBoxes\r\n\t\t};\r\n\t};\r\n};","\r\n\r\nimport barRectangle from \"./get_bar_rectangle\";\r\n\r\nexport default function getLinkBox(item, view, config, gantt){\r\n\tif(!gantt.isTaskExists(item.source)){\r\n\t\treturn null;\r\n\t}\r\n\r\n\tif(!gantt.isTaskExists(item.target)){\r\n\t\treturn null;\r\n\t}\r\n\tvar sourceBox = barRectangle(gantt.getTask(item.source), view, gantt);\r\n\tvar targetBox = barRectangle(gantt.getTask(item.target), view, gantt);\r\n\r\n\tif(!sourceBox || !targetBox){\r\n\t\treturn null;\r\n\t}\r\n\r\n\tvar padding = 100;\r\n\tvar left = Math.min(sourceBox.left, targetBox.left) - padding;\r\n\tvar right = Math.max(sourceBox.left + sourceBox.width, targetBox.left + targetBox.width) + padding;\r\n\tvar top = Math.min(sourceBox.top, targetBox.top) - padding;\r\n\tvar bottom = Math.max(sourceBox.top + sourceBox.height, targetBox.top + targetBox.height) + padding;\r\n\r\n\treturn {\r\n\t\ttop: top,\r\n\t\theight: bottom - top,\r\n\t\tbottom,\r\n\t\tleft: left,\r\n\t\twidth: right - left,\r\n\t\tright\r\n\t};\r\n};\r\n","\r\n// optimized checker for links smart rendering\r\n\r\n// first check the vertical position since it's easier to calculate\r\n\r\nexport default function isLinkInViewPort(item, viewport, view, config, gantt){\r\n\tvar source = view.$gantt.getTask(item.source);\r\n\tvar target = view.$gantt.getTask(item.target);\r\n\t// check vertical visibility first since it's a lighter check\r\n\tvar sourceTop = view.getItemTop(source.id);\r\n\tvar sourceHeight = view.getItemHeight(source.id);\r\n\r\n\tvar targetTop = view.getItemTop(target.id);\r\n\tvar targetHeight = view.getItemHeight(target.id);\r\n\r\n\tif(viewport.y > sourceTop + sourceHeight &&\r\n\t\tviewport.y > targetTop + targetHeight){\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif(viewport.y_end < targetTop &&\r\n\t\tviewport.y_end < sourceTop){\r\n\t\treturn false;\r\n\t}\r\n\r\n\tvar padding = 100;\r\n\tvar sourceLeft = view.posFromDate(source.start_date, view._getPositioningContext ? view._getPositioningContext(item) : null);\r\n\tvar sourceRight = view.posFromDate(source.end_date, view._getPositioningContext ? view._getPositioningContext(item) : null);\r\n\tvar targetLeft = view.posFromDate(target.start_date, view._getPositioningContext ? view._getPositioningContext(item) : null);\r\n\tvar targetRight = view.posFromDate(target.end_date, view._getPositioningContext ? view._getPositioningContext(item) : null);\r\n\r\n\tif(sourceLeft > sourceRight){\r\n\t\t// rtl\r\n\t\tvar tmp = sourceRight;\r\n\t\tsourceRight = sourceLeft;\r\n\t\tsourceLeft = tmp;\r\n\t}\r\n\tif(targetLeft > targetRight){\r\n\t\t// rtl\r\n\t\tvar tmp = targetRight;\r\n\t\ttargetRight = targetLeft;\r\n\t\ttargetLeft = tmp;\r\n\t}\r\n\tsourceLeft += -padding; // add buffer for custom elements\r\n\tsourceRight += padding;\r\n\ttargetLeft += -padding; // add buffer for custom elements\r\n\ttargetRight += padding;\r\n\r\n\tif(viewport.x > sourceRight &&\r\n\t\tviewport.x > targetRight){\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif(viewport.x_end < sourceLeft &&\r\n\t\tviewport.x_end < targetLeft){\r\n\t\treturn false;\r\n\t}\r\n\treturn true;\r\n};\r\n","import createLayerFactory from \"./render/layer_engine\";\r\n\r\nimport getVisibleTaskRange from \"./render/viewport/get_visible_bars_range\";\r\nimport getVisibleLinksRangeFactory from \"./render/viewport/factory/get_visible_link_range\";\r\n\r\nimport isLinkInViewport from \"./render/viewport/is_link_in_viewport\";\r\n\r\nfunction initLayer(layer, gantt){\r\n\tif(!layer.view){\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar view = layer.view;\r\n\tif(typeof view === \"string\"){\r\n\t\tview = gantt.$ui.getView(view);\r\n\t}\r\n\r\n\tif(view && view.attachEvent){\r\n\t\tview.attachEvent(\"onScroll\", function(){\r\n\t\t\tvar state = gantt.$services.getService(\"state\");\r\n\t\t\t// don't repaint if we're inside batchUpdate, a complete repaint will be called afterwards\r\n\t\t\tif(!state.getState(\"batchUpdate\").batch_update && !view.$config.$skipSmartRenderOnScroll){\r\n\t\t\t\tif(layer.requestUpdate){\r\n\t\t\t\t\tlayer.requestUpdate();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nvar createLayerEngine = function(gantt){\r\n\tvar factory = createLayerFactory(gantt);\r\n\treturn {\r\n\t\tgetDataRender: function(name){\r\n\t\t\treturn gantt.$services.getService(\"layer:\" + name) || null;\r\n\t\t},\r\n\t\tcreateDataRender: function(config){\r\n\t\t\tvar name = config.name,\r\n\t\t\t\tdefaultContainer = config.defaultContainer,\r\n\t\t\t\tpreviusSiblingContainer = config.defaultContainerSibling;\r\n\r\n\t\t\tvar layers = factory.createGroup(\r\n\t\t\t\tdefaultContainer,\r\n\t\t\t\tpreviusSiblingContainer,\r\n\t\t\t\tfunction(itemId, item){\r\n\t\t\t\t\tif(layers.filters){\r\n\t\t\t\t\t\tfor(var i = 0; i < layers.filters.length; i++){\r\n\t\t\t\t\t\t\tif(layers.filters[i](itemId, item) === false){\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tinitLayer\r\n\t\t\t);\r\n\r\n\t\t\tgantt.$services.setService(\"layer:\" + name, function(){\r\n\t\t\t\treturn layers;\r\n\t\t\t});\r\n\r\n\t\t\tgantt.attachEvent(\"onGanttReady\", function () {\r\n\t\t\t\tlayers.addLayer();// init layers on start\r\n\t\t\t});\r\n\r\n\t\t\treturn layers;\r\n\t\t},\r\n\t\tinit: function(){\r\n\t\t\tvar taskLayers = this.createDataRender({\r\n\t\t\t\tname: \"task\",\r\n\t\t\t\tdefaultContainer: function(){\r\n\t\t\t\t\tif(gantt.$task_data){\r\n\t\t\t\t\t\treturn gantt.$task_data;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_data;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdefaultContainerSibling: function(){\r\n\t\t\t\t\tif(gantt.$task_links){\r\n\t\t\t\t\t\treturn gantt.$task_links;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_links;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfilter: function(item){\r\n\r\n\t\t\t\t}\r\n\t\t\t}, gantt);\r\n\r\n\t\t\tvar linkLayers = this.createDataRender({\r\n\t\t\t\tname: \"link\",\r\n\t\t\t\tdefaultContainer: function(){\r\n\t\t\t\t\tif(gantt.$task_data){\r\n\t\t\t\t\t\treturn gantt.$task_data;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, gantt);\r\n\r\n\t\t\treturn {\r\n\t\t\t\taddTaskLayer: function(config){\r\n\t\t\t\t\tconst rangeFunction = getVisibleTaskRange;\r\n\t\t\t\t\tif(typeof config === \"function\"){\r\n\t\t\t\t\t\tconfig = {\r\n\t\t\t\t\t\t\trenderer: {\r\n\t\t\t\t\t\t\t\trender: config,\r\n\t\t\t\t\t\t\t\tgetVisibleRange: rangeFunction\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(config.renderer && !config.renderer.getVisibleRange){\r\n\t\t\t\t\t\t\tconfig.renderer.getVisibleRange = rangeFunction;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconfig.view = \"timeline\";\r\n\r\n\t\t\t\t\treturn taskLayers.addLayer(config);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t_getTaskLayers: function(){\r\n\t\t\t\t\treturn taskLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveTaskLayer: function(id){\r\n\t\t\t\t\ttaskLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t_clearTaskLayers: function(){\r\n\t\t\t\t\ttaskLayers.clear();\r\n\t\t\t\t},\r\n\t\t\t\taddLinkLayer: function(config){\r\n\t\t\t\t\tconst rangeFunction = getVisibleLinksRangeFactory();\r\n\t\t\t\t\tif(typeof config === \"function\"){\r\n\t\t\t\t\t\tconfig = {\r\n\t\t\t\t\t\t\trenderer: {\r\n\t\t\t\t\t\t\t\trender: config,\r\n\t\t\t\t\t\t\t\tgetVisibleRange: rangeFunction\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(config.renderer && !config.renderer.getVisibleRange){\r\n\t\t\t\t\t\t\tconfig.renderer.getVisibleRange = rangeFunction;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconfig.view = \"timeline\";\r\n\t\t\t\t\tif(config && config.renderer){\r\n\t\t\t\t\t\tif(!config.renderer.getRectangle && !config.renderer.isInViewPort){\r\n\t\t\t\t\t\t\tconfig.renderer.isInViewPort = isLinkInViewport;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn linkLayers.addLayer(config);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t_getLinkLayers: function(){\r\n\t\t\t\t\treturn linkLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveLinkLayer: function(id){\r\n\t\t\t\t\tlinkLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t_clearLinkLayers: function(){\r\n\t\t\t\t\tlinkLayers.clear();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport default createLayerEngine;","import * as utils from \"../../../utils/utils\";\r\nimport eventable from \"../../../utils/eventable\";\r\nimport * as domHelpers from \"../utils/dom_helpers\";\r\n\r\nvar Cell = (function () {\r\n\t\"use strict\";\r\n\r\n\tfunction Cell(parent, config, factory, gantt) {\r\n\t\tif (parent) {\r\n\t\t\tthis.$container = domHelpers.toNode(parent);\r\n\t\t\tthis.$parent = parent;\r\n\t\t}\r\n\t\t// save config\r\n\t\tthis.$config = utils.mixin(config, {\r\n\t\t\theaderHeight: 33\r\n\t\t});\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis.$domEvents = gantt._createDomEventScope();\r\n\t\t// set id\r\n\t\tthis.$id = config.id || \"c\" + utils.uid();\r\n\r\n\t\tthis.$name = \"cell\";\r\n\t\tthis.$factory = factory;\r\n\t\tthis.$externalComponent = null;\r\n\r\n\t\teventable(this);\r\n\r\n\t}\r\n\r\n\tCell.prototype.destructor = function () {\r\n\t\tthis.$parent = this.$container = this.$view = null;\r\n\t\tvar mouse = this.$gantt.$services.getService(\"mouseEvents\");\r\n\t\tmouse.detach(\"click\", \"gantt_header_arrow\", this._headerClickHandler);\r\n\t\tthis.$domEvents.detachAll();\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t};\r\n\tCell.prototype.cell = function (id) {\r\n\t\treturn null;\r\n\t};\r\n\r\n\tCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\t//GS-333 Add a way to scroll the HTML views:\r\n\t\tvar cell = this.$view;\r\n\t\tif (this.$config.html) cell = this.$view.firstChild;\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\tcell.scrollLeft = left;\r\n\t\t}\r\n\t\tif(top*1 == top){\r\n\t\t\tcell.scrollTop = top;\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype.clear = function(){\r\n\t\tthis.getNode().innerHTML = \"\";\r\n\t\tthis.getNode().className = \"gantt_layout_content\";\r\n\t\tthis.getNode().style.padding = \"0\";\r\n\t};\r\n\r\n\tCell.prototype.resize = function (final) {\r\n\t\tif (this.$parent) {\r\n\t\t\treturn this.$parent.resize(final);\r\n\t\t}\r\n\r\n\t\tif(final === false){\r\n\t\t\tthis.$preResize = true;\r\n\t\t}\r\n\r\n\t\tvar topCont = this.$container;\r\n\t\tvar x = topCont.offsetWidth;\r\n\t\tvar y = topCont.offsetHeight;\r\n\t\tvar topSize = this.getSize();\r\n\t\tif (topCont === document.body) {\r\n\t\t\tx = document.body.offsetWidth;\r\n\t\t\ty = document.body.offsetHeight;\r\n\t\t}\r\n\t\tif (x < topSize.minWidth) {\r\n\t\t\tx = topSize.minWidth;\r\n\t\t}\r\n\t\tif (x > topSize.maxWidth) {\r\n\t\t\tx = topSize.maxWidth;\r\n\t\t}\r\n\t\tif (y < topSize.minHeight) {\r\n\t\t\ty = topSize.minHeight;\r\n\t\t}\r\n\t\tif (y > topSize.maxHeight) {\r\n\t\t\ty = topSize.maxHeight;\r\n\t\t}\r\n\t\tthis.setSize(x, y);\r\n\r\n\t\tif(!this.$preResize){\r\n\t\t//\tself.callEvent(\"onResize\", [x, y]);\r\n\t\t}\r\n\t\tthis.$preResize = false;\r\n\t};\r\n\r\n\tCell.prototype.hide = function () {\r\n\t\tthis._hide(true);\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.show = function (force) {\r\n\t\tthis._hide(false);\r\n\t\tif (force && this.$parent) {\r\n\t\t\tthis.$parent.show();\r\n\t\t}\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype._hide = function (mode) {\r\n\t\tif (mode === true && this.$view.parentNode) {\r\n\t\t\tthis.$view.parentNode.removeChild(this.$view);\r\n\t\t}\r\n\t\telse if (mode === false && !this.$view.parentNode) {\r\n\t\t\tvar index = this.$parent.cellIndex(this.$id);\r\n\t\t\tthis.$parent.moveView(this, index);\r\n\t\t}\r\n\t\tthis.$config.hidden = mode;\r\n\t};\r\n\tCell.prototype.$toHTML = function (content, css) {\r\n\t\tif (content === void 0) { content = \"\"; }\r\n\t\tcss = [(css || \"\"), (this.$config.css || \"\")].join(\" \");\r\n\t\tvar obj = this.$config;\r\n\t\tvar header = \"\";\r\n\t\tif (obj.raw) {\r\n\t\t\tcontent = typeof obj.raw === \"string\" ? obj.raw : \"\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!content) {\r\n\t\t\t\tlet renderedElement = null;\r\n\t\t\t\tif(typeof obj.html === \"function\"){\r\n\t\t\t\t\trenderedElement = obj.html();\r\n\t\t\t\t}else{\r\n\t\t\t\t\trenderedElement = obj.html;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.$gantt.config.external_render && this.$gantt.config.external_render.isElement(renderedElement)){\r\n\t\t\t\t\tthis.$externalComponent = renderedElement;\r\n\t\t\t\t\trenderedElement = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcontent = \"<div class='gantt_layout_content' \"+(css ? \" class='\"+css+\"' \" : \"\")+\" >\" + (renderedElement || \"\") + \"</div>\";\r\n\t\t\t}\r\n\t\t\tif (obj.header) {\r\n\t\t\t\tvar collapseIcon = obj.canCollapse ? \"<div class='gantt_layout_header_arrow'></div>\" : \"\";\r\n\t\t\t\theader = \"<div class='gantt_layout_header'>\" + collapseIcon + \"<div class='gantt_layout_header_content'>\" + obj.header + \"</div></div>\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"<div class='gantt_layout_cell \" + css + \"' data-cell-id='\" + this.$id + \"'>\" + header + content + \"</div>\";\r\n\t};\r\n\tCell.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tthis.init();\r\n\t};\r\n\tCell.prototype.getNode = function () {\r\n\t\treturn (this.$view.querySelector(\"gantt_layout_cell\") || this.$view);\r\n\t};\r\n\tCell.prototype.init = function () {\r\n\t\t// [NOT-GOOD] code is executed for each component, while it still has only one handler, it is no good\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tthis._headerClickHandler = function(e){\r\n\t\t\tvar cellId = domHelpers.locateAttribute(e, \"data-cell-id\");\r\n\t\t\tif(cellId == self.$id){\r\n\t\t\t\tself.toggle();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar mouse = this.$gantt.$services.getService(\"mouseEvents\");\r\n\t\tmouse.delegate(\"click\", \"gantt_header_arrow\", this._headerClickHandler);\r\n\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t};\r\n\tCell.prototype.toggle = function () {\r\n\t\tthis.$config.collapsed = !this.$config.collapsed;\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.getSize = function () {\r\n\t\tvar size = {\r\n\t\t\theight: this.$config.height || 0,\r\n\t\t\twidth: this.$config.width || 0,\r\n\t\t\tgravity: this.$config.gravity || 1,\r\n\t\t\tminHeight: this.$config.minHeight || 0,\r\n\t\t\tminWidth: this.$config.minWidth || 0,\r\n\t\t\tmaxHeight: this.$config.maxHeight || 100000000000,\r\n\t\t\tmaxWidth: this.$config.maxWidth || 100000000000\r\n\t\t};\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tvar mode = this.$config.mode === \"x\";\r\n\t\t\tsize[mode ? \"width\" : \"height\"] = size[mode ? \"maxWidth\" : \"maxHeight\"] = this.$config.headerHeight;\r\n\t\t}\r\n\t\treturn size;\r\n\t};\r\n\r\n\tCell.prototype.getContentSize = function(){\r\n\r\n\t\tvar width = this.$lastSize.contentX;\r\n\t\tif(width !== width*1){\r\n\t\t\twidth = this.$lastSize.width;\r\n\t\t}\r\n\r\n\t\tvar height = this.$lastSize.contentY;\r\n\t\tif(height !== height*1){\r\n\t\t\theight = this.$lastSize.height;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\twidth: width,\r\n\t\t\theight: height\r\n\t\t};\r\n\t};\r\n\r\n\tCell.prototype._getBorderSizes = function(){\r\n\t\tvar borders = {\r\n\t\t\ttop: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0,\r\n\t\t\thorizontal: 0,\r\n\t\t\tvertical: 0\r\n\t\t};\r\n\t\tif(this._currentBorders){\r\n\t\t\tif(this._currentBorders[this._borders.left]){\r\n\t\t\t\tborders.left = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.right]){\r\n\t\t\t\tborders.right = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.top]){\r\n\t\t\t\tborders.top = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.bottom]){\r\n\t\t\t\tborders.bottom = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn borders;\r\n\r\n\t};\r\n\r\n\tCell.prototype.setSize = function (x, y) {\r\n\t\tthis.$view.style.width = x + \"px\";\r\n\t\tthis.$view.style.height = y + \"px\";\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tvar contentY = y - borders.vertical;\r\n\t\tvar contentX = x - borders.horizontal;\r\n\r\n\t\tthis.$lastSize = { x: x, y: y, contentX: contentX, contentY: contentY };\r\n\t\tif (this.$config.header) {\r\n\t\t\tthis._sizeHeader();\r\n\t\t}else{\r\n\t\t\tthis._sizeContent();\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._borders = {\r\n\t\t\"left\":\"gantt_layout_cell_border_left\",\r\n\t\t\"right\":\"gantt_layout_cell_border_right\",\r\n\t\t\"top\":\"gantt_layout_cell_border_top\",\r\n\t\t\"bottom\":\"gantt_layout_cell_border_bottom\"\r\n\t};\r\n\r\n\tCell.prototype._setBorders = function(css, view){\r\n\t\tif(!view) {\r\n\t\t\tview = this;\r\n\t\t}\r\n\t\tvar node = view.$view;\r\n\r\n\t\tfor( var i in this._borders){\r\n\t\t\tdomHelpers.removeClassName(node, this._borders[i]);\r\n\t\t}\r\n\r\n\t\tif(typeof css == \"string\"){\r\n\t\t\tcss = [css];\r\n\t\t}\r\n\r\n\t\tvar cssHash = {};\r\n\r\n\t\tfor(var i = 0; i < css.length; i++){\r\n\t\t\tdomHelpers.addClassName(node, css[i]);\r\n\t\t\tcssHash[css[i]] = true;\r\n\t\t}\r\n\r\n\t\tview._currentBorders = cssHash;\r\n\t};\r\n\r\n\r\n\tCell.prototype._sizeContent = function(){\r\n\t\tvar content = this.$view.childNodes[0];\r\n\t\tif(content && content.className == \"gantt_layout_content\"){\r\n\t\t\tcontent.style.height = this.$lastSize.contentY + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._sizeHeader = function () {\r\n\t\tvar size = this.$lastSize;\r\n\t\tsize.contentY -= this.$config.headerHeight;\r\n\t\tvar header = this.$view.childNodes[0];\r\n\t\tvar content = this.$view.childNodes[1];\r\n\t\tvar xLayout = this.$config.mode === \"x\";\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tcontent.style.display = \"none\";\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_x\";\r\n\t\t\t\theader.style.width = size.y + \"px\";\r\n\t\t\t\tvar d = Math.floor(size.y / 2 - size.x / 2);\r\n\t\t\t\theader.style.transform = \"rotate(90deg) translate(\" + d + \"px, \" + d + \"px)\";\r\n\t\t\t\tcontent.style.display = \"none\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_y\";\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header vertical\";\r\n\t\t\t}\r\n\t\t\theader.style.width = 'auto';\r\n\t\t\theader.style.transform = '';\r\n\t\t\tcontent.style.display = \"\";\r\n\t\t\tcontent.style.height = size.contentY + \"px\";\r\n\t\t}\r\n\t\theader.style.height = this.$config.headerHeight + \"px\";\r\n\t};\r\n\treturn Cell;\r\n}());\r\n\r\nexport default Cell;\r\n","export default function (d, b) {\r\n\tfor (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\tfunction __() { this.constructor = d; }\r\n\td.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};","import __extends from \"../../../utils/extends\";\r\nimport * as domHelpers from \"../utils/dom_helpers\";\r\nimport Cell from \"./cell\";\r\n\r\nvar Layout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(Layout, _super);\r\n\tfunction Layout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(parent)\r\n\t\t\t_this.$root = true;\r\n\r\n\t\t_this._parseConfig(config);\r\n\t\t_this.$name = \"layout\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tLayout.prototype.destructor = function () {\r\n\t\tif (this.$container && this.$view) {\r\n\t\t\tdomHelpers.removeNode(this.$view);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tchild.destructor();\r\n\t\t}\r\n\t\tthis.$cells = [];\r\n\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tLayout.prototype._resizeScrollbars = function(autosize, scrollbars){\r\n\t\tvar scrollChanged = false;\r\n\t\tvar visibleScrollbars = [],\r\n\t\t\thiddenScrollbars = [];\r\n\r\n\t\tconst scrollbarsToHide = [];\r\n\r\n\t\tfunction showScrollbar(scrollbar){\r\n\t\t\tscrollbar.$parent.show();\r\n\t\t\tscrollChanged = true;\r\n\t\t\tvisibleScrollbars.push(scrollbar);\r\n\t\t}\r\n\t\tfunction hideScrollbar(scrollbar){\r\n\t\t\tscrollbar.$parent.hide();\r\n\t\t\tscrollChanged = true;\r\n\t\t\thiddenScrollbars.push(scrollbar);\r\n\t\t}\r\n\r\n\t\tvar scrollbar;\r\n\t\tfor(var i = 0; i < scrollbars.length; i++){\r\n\t\t\tscrollbar = scrollbars[i];\r\n\r\n\t\t\tif(autosize[scrollbar.$config.scroll]) {\r\n\t\t\t\thideScrollbar(scrollbar);\r\n\t\t\t}else if(scrollbar.shouldHide()){\r\n\t\t\t\t//hideScrollbar(scrollbar);\r\n\t\t\t\tscrollbarsToHide.push(scrollbar);\r\n\t\t\t}else if(scrollbar.shouldShow()){\r\n\t\t\t\tshowScrollbar(scrollbar);\r\n\t\t\t}else{\r\n\t\t\t\tif(scrollbar.isVisible()){\r\n\t\t\t\t\tvisibleScrollbars.push(scrollbar);\r\n\t\t\t\t}else{\r\n\t\t\t\t\thiddenScrollbars.push(scrollbar);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar visibleGroups = {};\r\n\t\tfor(var i = 0; i < visibleScrollbars.length; i++){\r\n\t\t\tif(visibleScrollbars[i].$config.group){\r\n\t\t\t\tvisibleGroups[visibleScrollbars[i].$config.group] = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// GS-2220\r\n\t\tscrollbarsToHide.forEach(function(scrollbar){\r\n\t\t\tif(!(scrollbar.$config.group && visibleGroups[scrollbar.$config.group])){\r\n\t\t\t\thideScrollbar(scrollbar);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tfor(var i = 0; i < hiddenScrollbars.length; i++){\r\n\t\t\tscrollbar = hiddenScrollbars[i];\r\n\r\n\t\t\tif(scrollbar.$config.group && visibleGroups[scrollbar.$config.group]){\r\n\t\t\t\tshowScrollbar(scrollbar);\r\n\t\t\t\t// GS-707 If the scrollbar was hidden then showed, the container resize shouldn't happen because of that\r\n\t\t\t\tfor(var j = 0; j < visibleScrollbars.length; j++){\r\n\t\t\t\t\tif(visibleScrollbars[j] == scrollbar){\r\n\t\t\t\t\t\tthis.$gantt.$scrollbarRepaint = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn scrollChanged;\r\n\t};\r\n\r\n\tLayout.prototype.getScrollbarsInfo = function(){\r\n\t\tconst scrollbars = this.getCellsByType(\"scroller\");\r\n\t\tconst scrollbarsInfo = [];\r\n\t\tscrollbars.forEach(scrollbar => {\r\n\t\t\tlet obj = {};\r\n\t\t\tconst {visible, direction, size, scrollSize, position} = scrollbar.getScrollState();\r\n\t\t\tlet linkedViews = scrollbar._getLinkedViews();\r\n\t\t\tlet boundViews = linkedViews.map(view => view.$config.id);\r\n\r\n\t\t\tobj.id = scrollbar.$id;\r\n\t\t\tobj.visible = visible;\r\n\t\t\tobj.boundViews = boundViews;\r\n\t\t\tif(direction === \"x\"){\r\n\t\t\t\tobj.x = size;\r\n\t\t\t\tobj.x_inner = scrollSize;\r\n\t\t\t\tobj.x_pos = position || 0;\r\n\t\t\t} else {\r\n\t\t\t\tobj.y = size;\r\n\t\t\t\tobj.y_inner = scrollSize;\r\n\t\t\t\tobj.y_pos = position || 0;\r\n\t\t\t}\r\n\t\t\tscrollbarsInfo.push(obj);\r\n\t\t});\r\n\t\treturn scrollbarsInfo;\r\n\t};\r\n\r\n\tLayout.prototype._syncCellSizes = function(groupName, newSize){\r\n\t\tif(!groupName)\r\n\t\t\treturn;\r\n\r\n\t\tvar groups = {};\r\n\r\n\t\tthis._eachChild(function(cell){\r\n\t\t\tif(cell.$config.group && cell.$name != \"scrollbar\" && cell.$name != \"resizer\"){\r\n\t\t\t\tif(!groups[cell.$config.group]){\r\n\t\t\t\t\tgroups[cell.$config.group] = [];\r\n\t\t\t\t}\r\n\t\t\t\tgroups[cell.$config.group].push(cell);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(groups[groupName]){\r\n\t\t\tthis._syncGroupSize(groups[groupName], newSize);\r\n\t\t}\r\n\t\treturn groups[groupName];\r\n\t};\r\n\r\n\tLayout.prototype._syncGroupSize = function(cells, newSize){\r\n\t\tif(!cells.length) return;\r\n\r\n\t\tvar property = cells[0].$parent._xLayout ? \"width\" : \"height\";\r\n\t\tvar direction = cells[0].$parent.getNextSibling(cells[0].$id) ? 1 : -1;\r\n\r\n\t\tvar newSizeValue = newSize.value;\r\n\t\tvar isGravity = newSize.isGravity;\r\n\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\tvar ownSize = cells[i].getSize();\r\n\r\n\t\t\tvar resizeSibling = direction > 0 ? cells[i].$parent.getNextSibling(cells[i].$id) : cells[i].$parent.getPrevSibling(cells[i].$id);\r\n\t\t\tif(resizeSibling.$name == \"resizer\"){\r\n\t\t\t\tresizeSibling = direction > 0 ? resizeSibling.$parent.getNextSibling(resizeSibling.$id) : resizeSibling.$parent.getPrevSibling(resizeSibling.$id);\r\n\t\t\t}\r\n\t\t\tvar siblingSize = resizeSibling.getSize();\r\n\r\n\t\t\tif(!isGravity) {\r\n\t\t\t\tif(resizeSibling[property]){\r\n\t\t\t\t\tvar totalGravity = ownSize.gravity + siblingSize.gravity;\r\n\t\t\t\t\tvar totalSize = ownSize[property] + siblingSize[property];\r\n\t\t\t\t\tvar k = totalGravity / totalSize;\r\n\t\t\t\t\tcells[i].$config.gravity = k * newSizeValue;\r\n\r\n\t\t\t\t\tresizeSibling.$config[property] = totalSize - newSizeValue;\r\n\t\t\t\t\tresizeSibling.$config.gravity = totalGravity - k * newSizeValue;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcells[i].$config[property] = newSizeValue;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tcells[i].$config.gravity = newSizeValue;\r\n\t\t\t}\r\n\r\n\t\t\tvar mainGrid = this.$gantt.$ui.getView(\"grid\");\r\n\t\t\tif(mainGrid && cells[i].$content === mainGrid && !mainGrid.$config.scrollable && !isGravity){\r\n\t\t\t\tthis.$gantt.config.grid_width = newSizeValue;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.resize = function(startStage){\r\n\t\tvar mainCall = false;\r\n\t\tif(this.$root && !this._resizeInProgress){\r\n\t\t\tthis.callEvent(\"onBeforeResize\", []);\r\n\t\t\tmainCall = true;\r\n\t\t\tthis._resizeInProgress = true;\r\n\t\t}\r\n\r\n\t\t_super.prototype.resize.call(this, true);\r\n\t\t_super.prototype.resize.call(this, false);\r\n\r\n\t\tif(mainCall){\r\n\r\n\t\t\tvar contentViews = [];\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"viewCell\"));\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"viewLayout\"));\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"hostCell\"));\r\n\r\n\t\t\tvar scrollbars = this.getCellsByType(\"scroller\");\r\n\r\n\t\t\tfor(var i = 0; i < contentViews.length; i++){\r\n\t\t\t\tif(!contentViews[i].$config.hidden)\r\n\t\t\t\t\tcontentViews[i].setContentSize();\r\n\t\t\t}\r\n\r\n\t\t\tvar autosize = this._getAutosizeMode(this.$config.autosize);\r\n\r\n\t/* // possible to rollback set content size when autisize is disabled, not sure if need to\r\n\t\t\tcontentViews.forEach(function(view){\r\n\t\t\t\tconst parent = view.$parent;\r\n\t\t\t\tif(!autosize.x){\r\n\t\t\t\t\tif(parent.$config.$originalWidthStored){\r\n\t\t\t\t\t\tparent.$config.$originalWidthStored = false;\r\n\t\t\t\t\t\tparent.$config.width = parent.$config.$originalWidth;\r\n\t\t\t\t\t\tparent.$config.$originalWidth = undefined;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!autosize.y){\r\n\t\t\t\t\tif(parent.$config.$originalHeightStored){\r\n\t\t\t\t\t\tparent.$config.$originalHeightStored = false;\r\n\t\t\t\t\t\tparent.$config.height = parent.$config.$originalHeight;\r\n\t\t\t\t\t\tparent.$config.$originalHeight = undefined;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});*/\r\n\t\t\t\r\n\t\t\tvar scrollChanged = this._resizeScrollbars(autosize, scrollbars);\r\n\r\n\t\t\tif(this.$config.autosize){\r\n\t\t\t\tthis.autosize(this.$config.autosize);\r\n\t\t\t\tcontentViews.forEach(function(view){\r\n\t\t\t\t\tconst parent = view.$parent;\r\n\t\t\t\t\tconst sizes = parent.getContentSize(autosize);\r\n\t\t\t\t\tif(autosize.x){\r\n\t\t\t\t\t\tif(!parent.$config.$originalWidthStored){\r\n\t\t\t\t\t\t\tparent.$config.$originalWidthStored = true;\r\n\t\t\t\t\t\t\tparent.$config.$originalWidth = parent.$config.width;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tparent.$config.width = sizes.width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(autosize.y){\r\n\t\t\t\t\t\tif(!parent.$config.$originalHeightStored){\r\n\t\t\t\t\t\t\tparent.$config.$originalHeightStored = true;\r\n\t\t\t\t\t\t\tparent.$config.$originalHeight = parent.$config.height;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tparent.$config.height = sizes.height;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tscrollChanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif(scrollChanged){\r\n\t\t\t\tthis.resize();\r\n\t\t\t\tfor(var i = 0; i < contentViews.length; i++){\r\n\t\t\t\t\tif(!contentViews[i].$config.hidden)\r\n\t\t\t\t\t\tcontentViews[i].setContentSize();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onResize\", []);\r\n\t\t}\r\n\t\tif(mainCall){\r\n\t\t\tthis._resizeInProgress = false;\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype._eachChild = function(code, cell){\r\n\t\tcell = cell || this;\r\n\t\tcode(cell);\r\n\t\tif(cell.$cells){\r\n\t\t\tfor(var i = 0; i < cell.$cells.length; i++){\r\n\t\t\t\tthis._eachChild(code, cell.$cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.isChild = function(view){\r\n\t\tvar res = false;\r\n\t\tthis._eachChild(function(child){\r\n\t\t\tif(child === view || child.$content === view){\r\n\t\t\t\tres = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.getCellsByType = function(type){\r\n\t\tvar res = [];\r\n\t\tif(type === this.$name){\r\n\t\t\tres.push(this);\r\n\t\t}\r\n\r\n\t\tif(this.$content && this.$content.$name == type){\r\n\t\t\tres.push(this.$content);\r\n\t\t}\r\n\r\n\t\tif(this.$cells){\r\n\t\t\tfor(var i = 0; i < this.$cells.length; i++){\r\n\t\t\t\tvar children = Layout.prototype.getCellsByType.call(this.$cells[i], type);\r\n\t\t\t\tif(children.length){\r\n\t\t\t\t\tres.push.apply(res, children);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.getNextSibling = function(cellId){\r\n\t\tvar index = this.cellIndex(cellId);\r\n\t\tif(index >= 0 && this.$cells[index + 1]){\r\n\t\t\treturn this.$cells[index + 1];\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getPrevSibling = function(cellId){\r\n\t\tvar index = this.cellIndex(cellId);\r\n\t\tif(index >= 0 && this.$cells[index - 1]){\r\n\t\t\treturn this.$cells[index - 1];\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tLayout.prototype.cell = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tif (child.$id === id) {\r\n\t\t\t\treturn child;\r\n\t\t\t}\r\n\t\t\tvar sub = child.cell(id);\r\n\t\t\tif (sub) {\r\n\t\t\t\treturn sub;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.cellIndex = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tif (this.$cells[i].$id === id) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t};\r\n\tLayout.prototype.moveView = function (view, ind) {\r\n\t\tif (this.$cells[ind] !== view) {\r\n\t\t\treturn window.alert(\"Not implemented\");\r\n\t\t}\r\n\t\telse {\r\n\t\t\tind += this.$config.header ? 1 : 0;\r\n\t\t\tvar node = this.$view;\r\n\t\t\tif (ind >= node.childNodes.length) {\r\n\t\t\t\tnode.appendChild(view.$view);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnode.insertBefore(view.$view, node.childNodes[ind]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype._parseConfig = function (config) {\r\n\t\tthis.$cells = [];\r\n\t\tthis._xLayout = !config.rows;\r\n\t\tvar cells = config.rows || config.cols || config.views;\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tvar cell = cells[i];\r\n\t\t\tcell.mode = this._xLayout ? \"x\" : \"y\";\r\n\t\t\tvar $content = this.$factory.initUI(cell, this);\r\n\t\t\tif(!$content){\r\n\t\t\t\tcells.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}else{\r\n\t\t\t\t$content.$parent = this;\r\n\t\t\t\tthis.$cells.push($content);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.getCells = function () {\r\n\t\treturn this.$cells;\r\n\t};\r\n\tLayout.prototype.render = function () {\r\n\t\tvar view = domHelpers.insertNode(this.$container, this.$toHTML());\r\n\r\n\t\tthis.$fill(view, null);\r\n\r\n\t\tconst gantt = this.$gantt;\r\n\t\tthis._eachChild((cell) => {\r\n\t\t\tif(cell.$externalComponent){\r\n\t\t\t\tgantt.config.external_render.renderElement(\r\n\t\t\t\t\tcell.$externalComponent, \r\n\t\t\t\t\tcell.$view.querySelector(\".gantt_layout_content\")\r\n\t\t\t\t);\r\n\t\t\t\tcell.$externalComponent = null;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\tthis.resize();\r\n\r\n\t\t// do simple repaint after the first call\r\n\t\tthis.render = this.resize;\r\n\t};\r\n\tLayout.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tvar cells = domHelpers.getChildNodes(node, \"gantt_layout_cell\");\r\n\t\tfor (var i = cells.length - 1; i >= 0; i--) {\r\n\t\t\tvar sub = this.$cells[i];\r\n\t\t\tsub.$fill(cells[i], this);\r\n\t\t\t// initially hidden cell\r\n\t\t\tif (sub.$config.hidden) {\r\n\t\t\t\tsub.$view.parentNode.removeChild(sub.$view);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.$toHTML = function () {\r\n\t\tvar mode = this._xLayout ? \"x\" : \"y\";\r\n\t\tvar html = [];\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\thtml.push(this.$cells[i].$toHTML());\r\n\t\t}\r\n\t\treturn _super.prototype.$toHTML.call(this, html.join(\"\"), (this.$root ? \"gantt_layout_root \" : \"\") + \"gantt_layout gantt_layout_\" + mode);\r\n\t};\r\n\r\n\tLayout.prototype.getContentSize = function(mode){\r\n\t\tvar contentWidth = 0,\r\n\t\t\tcontentHeight = 0;\r\n\r\n\t\tvar cellSize, cell, borders;\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\t\t\tif(cell.$config.hidden)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tcellSize = cell.getContentSize(mode);\r\n\r\n\t\t\tif(cell.$config.view === \"scrollbar\" && mode[cell.$config.scroll]){\r\n\t\t\t\tcellSize.height = 0;\r\n\t\t\t\tcellSize.width = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif(cell.$config.resizer){\r\n\t\t\t\tif(this._xLayout){\r\n\t\t\t\t\tcellSize.height = 0;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcellSize.width = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tborders = cell._getBorderSizes();\r\n\r\n\t\t\tif(this._xLayout){\r\n\t\t\t\tcontentWidth += (cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight = Math.max(contentHeight, (cellSize.height + borders.vertical));\r\n\t\t\t}else{\r\n\t\t\t\tcontentWidth = Math.max(contentWidth, cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight += cellSize.height + borders.vertical;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tborders = this._getBorderSizes();\r\n\t\tcontentWidth += borders.horizontal;\r\n\t\tcontentHeight += borders.vertical;\r\n\r\n\t\t// GS-149 & GS-150: By default this code only increases the container sizes, because of that, the cell sizes\r\n\t\t// are also increased. Keep this code here in the case if something goes wrong\r\n\t\t/*\r\n\t\tif(this.$root){\r\n\t\t\tcontentWidth += 1;\r\n\t\t\tcontentHeight += 1;\r\n\t\t}\r\n\t\t*/\r\n\t\treturn {\r\n\t\t\twidth: contentWidth,\r\n\t\t\theight: contentHeight\r\n\t\t};\r\n\t};\r\n\r\n\tLayout.prototype._cleanElSize = function(value){\r\n\t\treturn ((value || \"\").toString().replace(\"px\", \"\") * 1 || 0);\r\n\t};\r\n\tLayout.prototype._getBoxStyles = function(div){\r\n\t\tvar computed = null;\r\n\t\tif(window.getComputedStyle){\r\n\t\t\tcomputed = window.getComputedStyle(div, null);\r\n\t\t}else{\r\n\t\t\t//IE with elem.currentStyle does not calculate sizes from %, so will use the default approach\r\n\t\t\tcomputed = {\r\n\t\t\t\t\"width\":div.clientWidth,\r\n\t\t\t\t\"height\":div.clientHeight\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar properties = [\r\n\t\t\t\"width\",\r\n\t\t\t\"height\",\r\n\r\n\t\t\t\"paddingTop\",\r\n\t\t\t\"paddingBottom\",\r\n\t\t\t\"paddingLeft\",\r\n\t\t\t\"paddingRight\",\r\n\r\n\t\t\t\"borderLeftWidth\",\r\n\t\t\t\"borderRightWidth\",\r\n\t\t\t\"borderTopWidth\",\r\n\t\t\t\"borderBottomWidth\"\r\n\t\t];\r\n\t\tvar styles = {\r\n\t\t\tboxSizing:(computed.boxSizing == \"border-box\")\r\n\t\t};\r\n\r\n\t\tif(computed.MozBoxSizing){\r\n\t\t\tstyles.boxSizing = (computed.MozBoxSizing == \"border-box\");\r\n\t\t}\r\n\t\tfor(var i =0; i < properties.length; i++){\r\n\t\t\tstyles[properties[i]] = computed[properties[i]] ? this._cleanElSize(computed[properties[i]]) : 0;\r\n\t\t}\r\n\r\n\r\n\t\tvar box = {\r\n\t\t\thorPaddings : (styles.paddingLeft + styles.paddingRight + styles.borderLeftWidth + styles.borderRightWidth),\r\n\t\t\tvertPaddings : (styles.paddingTop + styles.paddingBottom + styles.borderTopWidth + styles.borderBottomWidth),\r\n\t\t\tborderBox: styles.boxSizing,\r\n\t\t\tinnerWidth : styles.width,\r\n\t\t\tinnerHeight : styles.height,\r\n\t\t\touterWidth : styles.width,\r\n\t\t\touterHeight : styles.height\r\n\t\t};\r\n\r\n\r\n\t\tif(box.borderBox){\r\n\t\t\tbox.innerWidth -= box.horPaddings;\r\n\t\t\tbox.innerHeight -= box.vertPaddings;\r\n\t\t}else{\r\n\t\t\tbox.outerWidth += box.horPaddings;\r\n\t\t\tbox.outerHeight += box.vertPaddings;\r\n\t\t}\r\n\r\n\t\treturn box;\r\n\t};\r\n\r\n\tLayout.prototype._getAutosizeMode = function(config){\r\n\t\tvar res = {x:false, y:false};\r\n\t\tif(config === \"xy\"){\r\n\t\t\tres.x = res.y = true;\r\n\t\t}else if(config === \"y\" || config === true){\r\n\t\t\tres.y = true;\r\n\t\t}else if(config === \"x\"){\r\n\t\t\tres.x = true;\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.autosize = function(mode) {\r\n\t\tvar res = this._getAutosizeMode(mode);\r\n\t\tvar boxSizes = this._getBoxStyles(this.$container);\r\n\t\tvar contentSizes = this.getContentSize(mode);\r\n\r\n\t\tvar node = this.$container;\r\n\t\tif(res.x){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.width += boxSizes.horPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.width = contentSizes.width + \"px\";\r\n\t\t}\r\n\t\tif(res.y){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.height += boxSizes.vertPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.height = contentSizes.height + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getSize = function () {\r\n\t\tthis._sizes = [];\r\n\t\tvar width = 0;\r\n\t\tvar minWidth = 0;\r\n\t\tvar maxWidth = 100000000000;\r\n\t\tvar height = 0;\r\n\t\tvar maxHeight = 100000000000;\r\n\t\tvar minHeight = 0;\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\r\n\t\t\tvar size = this._sizes[i] = this.$cells[i].getSize();\r\n\t\t\tif (this.$cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width && size.minWidth) {\r\n\t\t\t\t\twidth += size.minWidth;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\twidth += size.width;\r\n\t\t\t\t}\r\n\t\t\t\tmaxWidth += size.maxWidth;\r\n\t\t\t\tminWidth += size.minWidth;\r\n\t\t\t\theight = Math.max(height, size.height);\r\n\t\t\t\tmaxHeight = Math.min(maxHeight, size.maxHeight); // min of maxHeight\r\n\t\t\t\tminHeight = Math.max(minHeight, size.minHeight); // max of minHeight\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height && size.minHeight) {\r\n\t\t\t\t\theight += size.minHeight;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\theight += size.height;\r\n\t\t\t\t}\r\n\t\t\t\tmaxHeight += size.maxHeight;\r\n\t\t\t\tminHeight += size.minHeight;\r\n\t\t\t\twidth = Math.max(width, size.width);\r\n\t\t\t\tmaxWidth = Math.min(maxWidth, size.maxWidth); // min of maxWidth\r\n\t\t\t\tminWidth = Math.max(minWidth, size.minWidth); // max of minWidth\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar self = _super.prototype.getSize.call(this);\r\n\t\t// maxWidth\r\n\t\tif (self.maxWidth >= 100000) {\r\n\t\t\tself.maxWidth = maxWidth;\r\n\t\t}\r\n\t\t// maxHeight\r\n\t\tif (self.maxHeight >= 100000) {\r\n\t\t\tself.maxHeight = maxHeight;\r\n\t\t}\r\n\t\t// minWidth\r\n\t\tself.minWidth = self.minWidth !== self.minWidth ? 0 : self.minWidth;// || self.width || Math.max(minWidth, width);\r\n\t\t// minHeight\r\n\t\tself.minHeight = self.minHeight !== self.minHeight ? 0 : self.minHeight;//self.minHeight || self.height || Math.max(minHeight, height);\r\n\t\t// sizes with paddings and margins\r\n\t\tif (this._xLayout) {\r\n\t\t\tself.minWidth += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minWidth += this.$config.padding * 2 || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tself.minHeight += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\t\r\n\t\treturn self;\r\n\t};\r\n\t// calc total gravity and free space\r\n\tLayout.prototype._calcFreeSpace = function (s, cell, xLayout) {\r\n\t\tvar min = xLayout ? cell.minWidth : cell.minHeight;\r\n\t\tvar max = xLayout ? cell.maxWidth : cell.maxWidth;\r\n\t\tvar side = s;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * cell.gravity);\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t}\r\n\t\t\tthis._free -= side;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\tLayout.prototype._calcSize = function (s, size, xLayout) {\r\n\t\tvar side = s;\r\n\t\tvar min = xLayout ? size.minWidth : size.minHeight;\r\n\t\tvar max = xLayout ? size.maxWidth : size.maxHeight;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * size.gravity);\r\n\t\t}\r\n\t\tif (side > max) {\r\n\t\t\tside = max;\r\n\t\t}\r\n\t\tif (side < min) {\r\n\t\t\tside = min;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\r\n\tLayout.prototype._configureBorders = function(){\r\n\t\tif(this.$root){\r\n\t\t\tthis._setBorders([\r\n\t\t\t\tthis._borders.left,\r\n\t\t\t\tthis._borders.top,\r\n\t\t\t\tthis._borders.right,\r\n\t\t\t\tthis._borders.bottom\r\n\t\t\t],\r\n\t\t\tthis);\r\n\t\t}\r\n\r\n\t\tvar borderClass = this._xLayout ? this._borders.right : this._borders.bottom;\r\n\r\n\t\tvar cells = this.$cells;\r\n\r\n\t\tvar lastVisibleIndex = cells.length - 1;\r\n\t\tfor(var i = lastVisibleIndex; i >= 0; i--){\r\n\t\t\tif (!cells[i].$config.hidden) {\r\n\t\t\t\tlastVisibleIndex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tif (cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar lastCell = i >= lastVisibleIndex;\r\n\t\t\tvar borderColorClass = \"\";\r\n\t\t\tif(!lastCell && cells[i + 1]){\r\n\t\t\t\tif(cells[i + 1].$config.view == \"scrollbar\"){\r\n\t\t\t\t\tif(this._xLayout){\r\n\t\t\t\t\t\tlastCell = true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tborderColorClass = \"gantt_layout_cell_border_transparent\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis._setBorders(lastCell ? [] : [borderClass, borderColorClass], cells[i]);\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype._updateCellVisibility = function(){\r\n\t\tvar oldVisibleCells = this._visibleCells || {};\r\n\t\tvar firstCall = !this._visibleCells;\r\n\t\tvar visibleCells = {};\r\n\t\tvar cell = null;\r\n\t\tvar parentVisibility = [];\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\t\t\tif (cell.$config.hide_empty){\r\n\t\t\t\tparentVisibility.push(cell);\r\n\t\t\t}\r\n\r\n\t\t\tif (!firstCall && cell.$config.hidden && oldVisibleCells[cell.$id]) {\r\n\t\t\t\tcell._hide(true);\r\n\t\t\t}else if(!cell.$config.hidden && !oldVisibleCells[cell.$id]){\r\n\t\t\t\tcell._hide(false);\r\n\t\t\t}\r\n\r\n\t\t\tif(!cell.$config.hidden){\r\n\t\t\t\tvisibleCells[cell.$id] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._visibleCells = visibleCells;\r\n\r\n\t\t// GS-27. A way to hide the whole cell if all its children are hidden\r\n\t\tfor (var i = 0; i < parentVisibility.length; i++) {\r\n\t\t\tvar cell = parentVisibility[i];\r\n\t\t\tvar children = cell.$cells;\r\n\t\t\tvar hideCell = true;\r\n\t\t\tchildren.forEach(function(child){\r\n\t\t\t\tif (!child.$config.hidden && !child.$config.resizer){\r\n\t\t\t\t\thideCell = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tcell.$config.hidden = hideCell;\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.setSize = function (x, y) {\r\n\t\tthis._configureBorders();\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\t\ty = this.$lastSize.contentY;\r\n\t\tx = this.$lastSize.contentX;\r\n\r\n\t\tvar padding = (this.$config.padding || 0);\r\n\t\tthis.$view.style.padding = padding + \"px\";\r\n\t\tthis._gravity = 0;\r\n\t\tthis._free = this._xLayout ? x : y;\r\n\t\tthis._free -= padding * 2;\r\n\t\t// calc all gravity\r\n\r\n\t\tvar cell,\r\n\t\t\tsize;\r\n\r\n\t\tthis._updateCellVisibility();\r\n\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tvar margin = (this.$config.margin || 0);\r\n\t\t\tif(cell.$name == \"resizer\" && !margin){\r\n\t\t\t\tmargin = -1;\r\n\t\t\t}\r\n\r\n\t\t\t// set margins to child cell\r\n\t\t\tvar cellView = cell.$view;\r\n\r\n\t\t\tvar marginSide = this._xLayout ? \"marginRight\" : \"marginBottom\";\r\n\t\t\tif (i !== this.$cells.length - 1) {\r\n\t\t\t\tcellView.style[marginSide] = margin + \"px\";\r\n\t\t\t\tthis._free -= margin; // calc free space without margin\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar width = size.width;\r\n\t\t\tvar height = size.height;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tthis._calcFreeSpace(width, size, true);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._calcFreeSpace(height, size, false);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar dx = void 0;\r\n\t\t\tvar dy = void 0;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tdx = this._calcSize(size.width, size, true);\r\n\t\t\t\tdy = y - padding * 2; // layout height without paddings\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdx = x - padding * 2; // layout width without paddings\r\n\t\t\t\tdy = this._calcSize(size.height, size, false);\r\n\t\t\t}\r\n\r\n\t\t\tcell.setSize(dx, dy);\r\n\t\t}\r\n\r\n\t};\r\n\r\n\treturn Layout;\r\n}(Cell));\r\n\r\nexport default Layout;","import __extends from \"../../../utils/extends\";\r\nimport Layout from \"./layout\";\r\nimport Cell from \"./cell\";\r\n\r\nvar ViewLayout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewLayout, _super);\r\n\tfunction ViewLayout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tfor (var i = 0; i < _this.$cells.length; i++) {\r\n\t\t\t_this.$cells[i].$config.hidden = (i !== 0);\r\n\t\t}\r\n\t\t_this.$cell = _this.$cells[0];\r\n\t\t_this.$name = \"viewLayout\";\r\n\r\n\t\treturn _this;\r\n\t}\r\n\tViewLayout.prototype.cell = function (id) {\r\n\t\tvar cell = _super.prototype.cell.call(this, id);\r\n\t\tif (!cell.$view) {\r\n\t\t\tthis.$fill(null, this);\r\n\t\t}\r\n\t\treturn cell;\r\n\t};\r\n\tViewLayout.prototype.moveView = function (view) {\r\n\t\tvar body = this.$view;\r\n\t\tif (this.$cell) {\r\n\t\t\tthis.$cell.$config.hidden = true;\r\n\t\t\tbody.removeChild(this.$cell.$view);\r\n\t\t}\r\n\t\tthis.$cell = view;\r\n\t\tbody.appendChild(view.$view);\r\n\t};\r\n\tViewLayout.prototype.setSize = function (x, y) {\r\n\t\tCell.prototype.setSize.call(this, x, y);\r\n\t};\r\n\r\n\tViewLayout.prototype.setContentSize = function(){\r\n\t\tvar size = this.$lastSize;\r\n\t\tthis.$cell.setSize(size.contentX, size.contentY);\r\n\t};\r\n\r\n\tViewLayout.prototype.getSize = function () {\r\n\t\tvar sizes = _super.prototype.getSize.call(this);\r\n\t\tif (this.$cell) {\r\n\t\t\tvar cellSize = this.$cell.getSize();\r\n\t\t\tif (this.$config.byMaxSize) {\r\n\t\t\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\t\t\tvar otherCell = this.$cells[i].getSize();\r\n\t\t\t\t\tfor (var cell in cellSize) {\r\n\t\t\t\t\t\tcellSize[cell] = Math.max(cellSize[cell], otherCell[cell]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var size in sizes) {\r\n\t\t\t\tsizes[size] = sizes[size] || cellSize[size];\r\n\t\t\t}\r\n\t\t\tsizes.gravity = Math.max(sizes.gravity, cellSize.gravity);\r\n\t\t}\r\n\t\treturn sizes;\r\n\t};\r\n\treturn ViewLayout;\r\n}(Layout));\r\n\r\nexport default ViewLayout;","import __extends from \"../../../utils/extends\";\r\nimport * as utils from \"../../../utils/utils\";\r\nimport Cell from \"./cell\";\r\n\r\nvar ViewCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewCell, _super);\r\n\tfunction ViewCell(parent, config, factory) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(config.view){\r\n\t\t\tif(config.id){\r\n\t\t\t\t// pass id to the nested view\r\n\t\t\t\tthis.$id = utils.uid();\r\n\t\t\t}\r\n\t\t\tvar childConfig = utils.copy(config);\r\n\t\t\tdelete childConfig.config;\r\n\t\t\tdelete childConfig.templates;\r\n\r\n\t\t\tthis.$content = this.$factory.createView(config.view, this, childConfig, this);\r\n\t\t\tif(!this.$content)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t_this.$name = \"viewCell\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tViewCell.prototype.destructor = function(){\r\n\t\tthis.clear();\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tViewCell.prototype.clear = function(){\r\n\r\n\t\tthis.$initialized = false;\r\n\r\n\t\t// call destructor\r\n\t\tif (this.$content){\r\n\t\t\tvar method = this.$content.unload || this.$content.destructor;\r\n\t\t\tif (method){\r\n\t\t\t\tmethod.call(this.$content);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_super.prototype.clear.call(this);\r\n\r\n\t};\r\n\r\n\tViewCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\tif(this.$content && this.$content.scrollTo){\r\n\t\t\tthis.$content.scrollTo(left, top);\r\n\t\t}else{\r\n\t\t\t_super.prototype.scrollTo.call(this, left, top);\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype._setContentSize = function(x, y){\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tif(typeof x === \"number\"){\r\n\t\t\tvar outerX = x + borders.horizontal;\r\n\t\t\tthis.$config.width = outerX;\r\n\t\t}\r\n\t\tif(typeof y === \"number\"){\r\n\t\t\tvar outerY = y + borders.vertical;\r\n\t\t\tthis.$config.height = outerY;\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype.setSize = function(x, y){\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\r\n\t\tif(!this.$preResize && this.$content) {\r\n\t\t\tif (!this.$initialized) {\r\n\t\t\t\tthis.$initialized = true;\r\n\t\t\t\tvar header = this.$view.childNodes[0];\r\n\t\t\t\tvar content = this.$view.childNodes[1];\r\n\t\t\t\tif(!content) content = header;\r\n\r\n\t\t\t\t/*if(this.$content.$config){\r\n\t\t\t\t\tthis.$content.$config.width = this.$lastSize.contentX;\r\n\t\t\t\t\tthis.$content.$config.height = this.$lastSize.contentY;\r\n\t\t\t\t}*/\r\n\t\t\t\tthis.$content.init(content);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype.setContentSize = function(){\r\n\t\tif(!this.$preResize && this.$content) {\r\n\t\t\tif (this.$initialized) {\r\n\t\t\t\tthis.$content.setSize(this.$lastSize.contentX, this.$lastSize.contentY);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tViewCell.prototype.getContentSize = function(){\r\n\t\tvar size = _super.prototype.getContentSize.call(this);\r\n\r\n\t\tif(this.$content && this.$initialized){\r\n\t\t\tvar childSize = this.$content.getSize();\r\n\t\t\tsize.width = childSize.contentX === undefined ? childSize.width : childSize.contentX;\r\n\t\t\tsize.height = childSize.contentY === undefined ? childSize.height : childSize.contentY;\r\n\t\t}\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tsize.width += borders.horizontal;\r\n\t\tsize.height += borders.vertical;\r\n\r\n\t\treturn size;\r\n\t};\r\n\r\n\treturn ViewCell;\r\n}(Cell));\r\n\r\nexport default ViewCell;","import __extends from \"../../../utils/extends\";\r\nimport * as domHelpers from \"../utils/dom_helpers\";\r\nimport * as utils from \"../../../utils/utils\";\r\nimport env from \"../../../utils/env\";\r\nimport Cell from \"./cell\";\r\n\r\nvar ScrollbarCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\tvar SCROLL_MODIFIER_KEYS = [\"altKey\", \"shiftKey\", \"metaKey\"]; // it's no way to disable ctrl+wheel\r\n\t__extends(ScrollbarCell, _super);\r\n\tfunction ScrollbarCell(parent, config, factory, gantt) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tthis.$config = utils.mixin(config, {scroll: \"x\"});\r\n\t\t_this._scrollHorizontalHandler = utils.bind(_this._scrollHorizontalHandler, _this);\r\n\t\t_this._scrollVerticalHandler = utils.bind(_this._scrollVerticalHandler, _this);\r\n\t\t_this._outerScrollVerticalHandler = utils.bind(_this._outerScrollVerticalHandler, _this);\r\n\t\t_this._outerScrollHorizontalHandler = utils.bind(_this._outerScrollHorizontalHandler, _this);\r\n\t\t_this._mouseWheelHandler = utils.bind(_this._mouseWheelHandler, _this);\r\n\r\n\t\tthis.$config.hidden = true;\r\n\t\tvar size = gantt.config.scroll_size;\r\n\r\n\t\tif(gantt.env.isIE){\r\n\t\t\t// full element height/width must be bigger than just a browser scrollbar,\r\n\t\t\t// otherwise the scrollbar element won't be scrolled on click\r\n\t\t\tsize += 1;\r\n\t\t}\r\n\r\n\t\tif(this._isHorizontal()){\r\n\t\t\t_this.$config.height = size;\r\n\t\t\t_this.$parent.$config.height = size;\r\n\t\t}else{\r\n\t\t\t_this.$config.width = size;\r\n\t\t\t_this.$parent.$config.width = size;\r\n\t\t}\r\n\r\n\t\tthis.$config.scrollPosition = 0;\r\n\r\n\t\t_this.$name = \"scroller\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tScrollbarCell.prototype.init = function(container){\r\n\t\tcontainer.innerHTML = this.$toHTML();\r\n\t\tthis.$view = container.firstChild;\r\n\r\n\t\tif(!this.$view){\r\n\t\t\tthis.init();\r\n\t\t}\r\n\t\tif(this._isVertical()){\r\n\t\t\tthis._initVertical();\r\n\t\t}else{\r\n\t\t\tthis._initHorizontal();\r\n\t\t}\r\n\t\tthis._initMouseWheel();\r\n\t\tthis._initLinkedViews();\r\n\t};\r\n\r\n\tScrollbarCell.prototype.$toHTML = function () {\r\n\t\tvar className = this._isHorizontal() ? \"gantt_hor_scroll\" : \"gantt_ver_scroll\";\r\n\t\treturn \"<div class='gantt_layout_cell \"+className+\"'><div style='\"+(this._isHorizontal() ? \"width:2000px\" : \"height:2000px\")+\"'></div></div>\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getRootParent = function(){\r\n\t\tvar parent = this.$parent;\r\n\t\twhile(parent && parent.$parent){\r\n\t\t\tparent = parent.$parent;\r\n\t\t}\r\n\t\tif(parent){\r\n\t\t\treturn parent;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tfunction eachCell(root, res){\r\n\t\tres.push(root);\r\n\t\tif(root.$cells){\r\n\t\t\tfor(var i = 0; i < root.$cells.length; i++){\r\n\t\t\t\teachCell(root.$cells[i], res);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tScrollbarCell.prototype._eachView = function(){\r\n\t\tvar res = [];\r\n\t\teachCell(this._getRootParent(), res);\r\n\t\treturn res;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getLinkedViews = function(){\r\n\t\tvar views = this._eachView();\r\n\t\tvar res = [];\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].$config && ((this._isVertical() && views[i].$config.scrollY == this.$id) || (this._isHorizontal() && views[i].$config.scrollX == this.$id)) ){\r\n\t\t\t\tres.push(views[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tScrollbarCell.prototype._initHorizontal = function(){\r\n\t\tthis.$scroll_hor = this.$view;\r\n\t\tthis.$domEvents.attach(this.$view, \"scroll\", this._scrollHorizontalHandler);\r\n\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initLinkedViews = function(){\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tvar css = this._isVertical() ?\"gantt_layout_outer_scroll gantt_layout_outer_scroll_vertical\" : \"gantt_layout_outer_scroll gantt_layout_outer_scroll_horizontal\";\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\t//views[i].$config.css = [views[i].$config.css || \"\", css].join(\" \");\r\n\t\t\tdomHelpers.addClassName(views[i].$view || views[i].getNode(), css);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initVertical = function(){\r\n\t\tthis.$scroll_ver = this.$view;\r\n\t\tthis.$domEvents.attach(this.$view, \"scroll\", this._scrollVerticalHandler);\r\n\t};\r\n\r\n\tScrollbarCell.prototype._updateLinkedViews = function(){\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initMouseWheel = function(){\r\n\t\tvar ff = env.isFF;\r\n\t\tif (ff)\r\n\t\t\tthis.$domEvents.attach(this._getRootParent().$view, \"wheel\", this._mouseWheelHandler, {passive: false});\r\n\t\telse\r\n\t\t\tthis.$domEvents.attach(this._getRootParent().$view, \"mousewheel\", this._mouseWheelHandler, {passive: false});\r\n\t};\r\n\r\n\r\n\r\n\r\n\tScrollbarCell.prototype.scrollHorizontally = function(left){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\tthis.$config.codeScrollLeft = left;\r\n\t\tleft = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(left, undefined);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = left;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, left, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\tScrollbarCell.prototype.scrollVertically = function(top){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_ver.scrollTop = top;\r\n\t\ttop = this.$scroll_ver.scrollTop;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(undefined, top);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = top;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, top, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._isVertical = function(){\r\n\t\treturn this.$config.scroll == \"y\";\r\n\t};\r\n\tScrollbarCell.prototype._isHorizontal = function(){\r\n\t\treturn this.$config.scroll == \"x\";\r\n\t};\r\n\tScrollbarCell.prototype._scrollHorizontalHandler = function (e) {\r\n\t\tif(this._isVertical() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//in safari we can catch previous onscroll after setting new value from mouse-wheel event\r\n\t\t//set delay to prevent value drifiting\r\n\t\tif ((new Date()) - ( this._wheel_time || 0 ) < 100) return true;\r\n\t\t//if (this.$gantt._touch_scroll_active) return;\r\n\t\tvar left = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tthis.scrollHorizontally(left);\r\n\r\n\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollHorizontalHandler = function(e){\r\n\t\tif(this._isVertical()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.show = function(){\r\n\t\tthis.$parent.show();\r\n\t};\r\n\tScrollbarCell.prototype.hide = function(){\r\n\t\tthis.$parent.hide();\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScrollSize = function(){\r\n\t\tvar scrollSize = 0;\r\n\t\tvar outerSize = 0;\r\n\t\tvar isHorizontal = this._isHorizontal();\r\n\r\n\t\tvar linked = this._getLinkedViews();\r\n\t\tvar view;\r\n\t\tvar scrollProperty = isHorizontal ? \"scrollWidth\" : \"scrollHeight\",\r\n\t\t\tinnerSizeProperty = isHorizontal ? \"contentX\" : \"contentY\";\r\n\t\tvar outerProperty = isHorizontal ? \"x\" : \"y\";\r\n\t\tvar offset = this._getScrollOffset();\r\n\r\n\t\tfor(var i = 0; i < linked.length; i++){\r\n\t\t\tview = linked[i];\r\n\t\t\tif(!(view && view.$content && view.$content.getSize && !view.$config.hidden)) continue;\r\n\r\n\t\t\tvar sizes = view.$content.getSize();\r\n\t\t\tvar cellScrollSize;\r\n\t\t\tif(sizes.hasOwnProperty(scrollProperty)){\r\n\t\t\t\tcellScrollSize = sizes[scrollProperty];\r\n\t\t\t}else{\r\n\t\t\t\tcellScrollSize = sizes[innerSizeProperty];\r\n\t\t\t}\r\n\r\n\t\t\tif(offset){\r\n\t\t\t\t// precalculated vertical/horizontal offsets of scrollbar to emulate 4.x look\r\n\t\t\t\tif(sizes[innerSizeProperty] > sizes[outerProperty] && sizes[innerSizeProperty] > scrollSize && (cellScrollSize > (sizes[outerProperty] - offset + 2))){\r\n\t\t\t\t\tscrollSize = cellScrollSize + (isHorizontal ? 0 : 2);\r\n\t\t\t\t\touterSize = sizes[outerProperty];\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar nonScrollableSize = Math.max(sizes[innerSizeProperty] - cellScrollSize, 0);\r\n\t\t\t\tvar scrollableViewPortSize = Math.max(sizes[outerProperty] - nonScrollableSize, 0);\r\n\t\t\t\tcellScrollSize = cellScrollSize + nonScrollableSize;\r\n\r\n\t\t\t\tif(cellScrollSize > scrollableViewPortSize && (cellScrollSize > scrollSize) ){\r\n\t\t\t\t\t//|| (cellScrollSize === scrollSize && sizes[outerProperty] < outerSize) // same scroll width but smaller scrollable view port\r\n\r\n\t\t\t\t\tscrollSize = cellScrollSize;\r\n\t\t\t\t\touterSize = sizes[outerProperty];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\touterScroll: outerSize,\r\n\t\t\tinnerScroll: scrollSize\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.scroll = function(position){\r\n\t\tif(this._isHorizontal()){\r\n\t\t\tthis.scrollHorizontally(position);\r\n\t\t}else{\r\n\t\t\tthis.scrollVertically(position);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.getScrollState = function(){\r\n\t\treturn {\r\n\t\t\tvisible: this.isVisible(),\r\n\t\t\tdirection: this.$config.scroll,\r\n\t\t\tsize: this.$config.outerSize,\r\n\t\t\tscrollSize: this.$config.scrollSize || 0,\r\n\t\t\tposition: this.$config.scrollPosition || 0\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.setSize = function(width, height){\r\n\t\t_super.prototype.setSize.apply(this, arguments);\r\n\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\r\n\t\tvar ownSize = (this._isVertical() ? height : width) - this._getScrollOffset() + (this._isHorizontal() ? 1 : 0);\r\n\r\n\t\tif(scrollSizes.innerScroll && ownSize > scrollSizes.outerScroll){\r\n\t\t\tscrollSizes.innerScroll += (ownSize - scrollSizes.outerScroll);\r\n\t\t}\r\n\t\tthis.$config.scrollSize = scrollSizes.innerScroll;\r\n\r\n\t\tthis.$config.width = width;\r\n\t\tthis.$config.height = height;\r\n\t\tthis._setScrollSize(scrollSizes.innerScroll);\r\n\t};\r\n\r\n\tScrollbarCell.prototype.isVisible = function(){\r\n\t\treturn !!(this.$parent && this.$parent.$view.parentNode);\r\n\t};\r\n\r\n\tScrollbarCell.prototype.shouldShow = function(){\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(!scrollSizes.innerScroll && (this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn false;\r\n\t\t}else if(scrollSizes.innerScroll && !(this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.shouldHide = function(){\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(!scrollSizes.innerScroll && (this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tScrollbarCell.prototype.toggleVisibility = function(){\r\n\t\tif(this.shouldHide()){\r\n\t\t\tthis.hide();\r\n\t\t}else if(this.shouldShow()){\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScaleOffset = function(view){\r\n\t\tvar offset = 0;\r\n\t\tif(view && (view.$config.view == \"timeline\" || view.$config.view == \"grid\")){\r\n\t\t\toffset = view.$content.$getConfig().scale_height;\r\n\t\t}\r\n\t\treturn offset;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScrollOffset = function(){\r\n\t\tvar offset = 0;\r\n\t\tif(this._isVertical()){\r\n\t\t\tvar parentLayout = this.$parent.$parent;\r\n\t\t\toffset = Math.max(\r\n\t\t\t\tthis._getScaleOffset(parentLayout.getPrevSibling(this.$parent.$id)),\r\n\t\t\t\tthis._getScaleOffset(parentLayout.getNextSibling(this.$parent.$id))\r\n\t\t\t\t);\r\n\t\t}else{\r\n\t\t\tvar linked = this._getLinkedViews();\r\n\r\n\t\t\tfor (var i = 0; i < linked.length; i++) {\r\n\t\t\t\tvar view = linked[i],\r\n\t\t\t\t\tvparent = view.$parent;\r\n\t\t\t\tvar cells = vparent.$cells;\r\n\r\n\t\t\t\tvar last = cells[cells.length - 1];\r\n\r\n\t\t\t\tif (last && last.$config.view == \"scrollbar\" && last.$config.hidden === false) {\r\n\t\t\t\t\toffset = last.$config.width;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn offset || 0;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._setScrollSize = function(size){\r\n\t\tvar property = this._isHorizontal() ? \"width\" : \"height\";\r\n\t\tvar scrollbar = this._isHorizontal() ? this.$scroll_hor : this.$scroll_ver;\r\n\r\n\t\tvar offset = this._getScrollOffset();\r\n\r\n\t\tvar node = scrollbar.firstChild;\r\n\r\n\t\tif(offset){\r\n\t\t\tif(this._isVertical()){\r\n\r\n\t\t\t\tthis.$config.outerSize = (this.$config.height - offset + 3);\r\n\t\t\t\tscrollbar.style.height = this.$config.outerSize + \"px\";\r\n\t\t\t\tscrollbar.style.top = (offset-1) + \"px\";\r\n\t\t\t\tdomHelpers.addClassName(scrollbar, this.$parent._borders.top);\r\n\t\t\t\tdomHelpers.addClassName(scrollbar.parentNode, \"gantt_task_vscroll\");\r\n\t\t\t}else{\r\n\t\t\t\tthis.$config.outerSize = (this.$config.width - offset + 1);\r\n\t\t\t\tscrollbar.style.width = this.$config.outerSize + \"px\";\r\n\t\t\t\t//domHelpers.addClassName(scrollbar, this.$parent._borders.right);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tscrollbar.style.top = \"auto\";\r\n\t\t\tdomHelpers.removeClassName(scrollbar, this.$parent._borders.top);\r\n\t\t\tdomHelpers.removeClassName(scrollbar.parentNode, \"gantt_task_vscroll\");\r\n\t\t\tthis.$config.outerSize = this.$config.height;\r\n\t\t}\r\n\r\n\t\tnode.style[property] = size + \"px\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._scrollVerticalHandler = function (e) {\r\n\t\tif(this._scrollHorizontalHandler() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//if (this.$gantt._touch_scroll_active) return;\r\n\t\tvar top = this.$scroll_ver.scrollTop;\r\n\t\tvar prev = this._oldTop;\r\n\t\tif(top == prev) return;\r\n\r\n\t\tthis.scrollVertically(top);\r\n\r\n\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollVerticalHandler = function(e){\r\n\t\tif(this._scrollHorizontalHandler()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._checkWheelTarget = function(targetNode){\r\n\t\tvar connectedViews = this._getLinkedViews().concat(this);\r\n\r\n\t\tfor(var i = 0; i < connectedViews.length; i++){\r\n\t\t\tvar node = connectedViews[i].$view;\r\n\t\t\tif(domHelpers.isChildOf(targetNode, node)){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._mouseWheelHandler = function(e){\r\n\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\tif(!this._checkWheelTarget(target))\r\n\t\t\treturn;\r\n\r\n\t\tthis._wheel_time = new Date();\r\n\r\n\t\tvar res = {};\r\n\r\n\t\tvar wheelSpeed = {x: 1, y: 1};\r\n\t\tvar wheelSpeedConfig = this.$gantt.config.wheel_scroll_sensitivity;\r\n\r\n\t\tif (typeof wheelSpeedConfig == \"number\" && !!wheelSpeedConfig) {\r\n\t\t\twheelSpeed = {x: wheelSpeedConfig, y: wheelSpeedConfig};\r\n\t\t}\r\n\t\telse if (({}).toString.apply(wheelSpeedConfig) == \"[object Object]\") {\r\n\t\t\twheelSpeed = {x: wheelSpeedConfig.x, y: wheelSpeedConfig.y};\r\n\t\t}\r\n\r\n\t\tvar ff = env.isFF;\r\n\t\tvar deltaX = ff ? (e.deltaX) : e.wheelDeltaX;\r\n\t\tvar deltaY = ff ? (e.deltaY) : e.wheelDelta;\r\n\r\n\t\tvar multiplier = -20;\r\n\t\tif (ff) {\r\n\t\t\t// GS-1500. Firefox had many changes during the versions\r\n\t\t\tconst version = parseInt(navigator.userAgent.split(\"Firefox/\")[1]);\r\n\t\t\tif (version <= 87){\r\n\t\t\t\tif (e.deltaMode !== 0) {\r\n\t\t\t\t\tmultiplier = -40;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmultiplier = -10;\r\n\t\t\t\t}\r\n\t\t\t} else if (version <= 90){\r\n\t\t\t\tmultiplier = -3;\r\n\t\t\t} else if (version <= 96){\r\n\t\t\t\tmultiplier = -1.5;\r\n\t\t\t} else {\r\n\t\t\t\tmultiplier = -1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar wx = ff ? (deltaX * multiplier * wheelSpeed.x) : deltaX * 2 * wheelSpeed.x;\r\n\t\tvar wy = ff ? (deltaY * multiplier * wheelSpeed.y) : deltaY * wheelSpeed.y;\r\n\r\n\t\tvar horizontalScrollModifier = this.$gantt.config.horizontal_scroll_key;\r\n\r\n\t\tif (horizontalScrollModifier !== false) {\r\n\t\t\tif (SCROLL_MODIFIER_KEYS.indexOf(horizontalScrollModifier) >= 0) {\r\n\t\t\t\tif(e[horizontalScrollModifier] && !(e.deltaX || e.wheelDeltaX)){\r\n\t\t\t\t\t// shift+mousewheel for horizontal scroll\r\n\t\t\t\t\twx = wy*2;\r\n\t\t\t\t\twy = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (wx && Math.abs(wx) > Math.abs(wy)){\r\n\t\t\tif(this._isVertical()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.x) return true;//no horisontal scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_hor || !this.$scroll_hor.offsetWidth) return true;\r\n\r\n\t\t\tvar dir  = wx/-40;\r\n\t\t\tvar oldLeft = this._oldLeft;\r\n\t\t\tvar left = oldLeft+dir*30;\r\n\t\t\tthis.scrollHorizontally(left);\r\n\t\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldLeft == this.$scroll_hor.scrollLeft){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t\t} else {\r\n\t\t\tif(this._isHorizontal()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.y) return true;//no vertical scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_ver || !this.$scroll_ver.offsetHeight) return true;\r\n\r\n\t\t\tvar dir  = wy/-40;\r\n\t\t\tif (typeof wy == \"undefined\")\r\n\t\t\t\tdir = e.detail;\r\n\r\n\t\t\tvar oldTop = this._oldTop;\r\n\t\t\tvar top = this.$scroll_ver.scrollTop+dir*30;\r\n\r\n\t\t\t//if(!this.$gantt.config.prevent_default_scroll &&\r\n\t\t\t//\t(this.$gantt._cached_scroll_pos && ((this.$gantt._cached_scroll_pos.y == top) || (this.$gantt._cached_scroll_pos.y <= 0 && top <= 0)))) return true;\r\n\r\n\r\n\t\t\tthis.scrollVertically(top);\r\n\t\t\tthis.$scroll_ver.scrollTop = top;\r\n\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldTop == this.$scroll_ver.scrollTop){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\t\t}\r\n\r\n\t\tif (e.preventDefault)\r\n\t\t\te.preventDefault();\r\n\t\te.cancelBubble=true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\treturn ScrollbarCell;\r\n})(Cell);\r\n\r\nexport default ScrollbarCell;","import quickPositionHelperFactory from \"./row_position_fixed_height\";\r\n\r\nfunction createMixin(view){\r\n\tvar getItemTopCache = {};\r\n\tvar getRowTopCache = {};\r\n\tvar getItemHeightCache = null;\r\n\tvar totalHeightCache = -1;\r\n\tvar getItemHeightCacheState = null;\r\n\r\n\tvar quickPosition = quickPositionHelperFactory(view);\r\n\r\n\treturn {\r\n\t\t_resetTopPositionHeight: function(){\r\n\t\t\tgetItemTopCache = {};\r\n\t\t\tgetRowTopCache = {};\r\n\t\t\tquickPosition.resetCache();\r\n\t\t},\r\n\t\t_resetHeight: function(){\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tvar newState = this.getCacheStateTotalHeight(store);\r\n\t\t\tif(!getItemHeightCacheState){\r\n\t\t\t\tgetItemHeightCacheState = newState;\r\n\t\t\t}else if(this.shouldClearHeightCache(getItemHeightCacheState, newState)){\r\n\t\t\t\tgetItemHeightCacheState = newState;\r\n\t\t\t\tgetItemHeightCache = null;\r\n\t\t\t}\r\n\r\n\t\t\ttotalHeightCache = -1;\r\n\t\t\tquickPosition.resetCache();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get top coordinate by row index (order)\r\n\t\t * @param {number} index\r\n\t\t */\r\n\t\tgetRowTop: function(index){\r\n\t\t\tif(quickPosition.canUseSimpleCalculation()){\r\n\t\t\t\treturn quickPosition.getRowTop(index);\r\n\t\t\t}\r\n\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store){\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\tif(getRowTopCache[index] !== undefined){\r\n\t\t\t\treturn getRowTopCache[index];\r\n\t\t\t}else {\r\n\t\t\t\tvar all = store.getIndexRange();\r\n\t\t\t\tvar top = 0;\r\n\t\t\t\tvar result = 0;\r\n\t\t\t\tfor(var i = 0; i < all.length; i++){\r\n\t\t\t\t\tgetRowTopCache[i] = top;\r\n\t\t\t\t\ttop += this.getItemHeight(all[i].id);\r\n\t\t\t\t\tif(i < index){\r\n\t\t\t\t\t\tresult = top;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get top coordinate by item id\r\n\t\t * @param {*} task_id\r\n\t\t */\r\n\t\tgetItemTop: function (taskId) {\r\n\t\t\tif(this.$config.rowStore){\r\n\t\t\t\tif(getItemTopCache[taskId] !== undefined){\r\n\t\t\t\t\treturn getItemTopCache[taskId];\r\n\t\t\t\t}\r\n\t\t\t\tvar store = this.$config.rowStore;\r\n\t\t\t\tif(!store) return 0;\r\n\r\n\t\t\t\tvar itemIndex = store.getIndexById(taskId);\r\n\r\n\t\t\t\tif (itemIndex === -1 && store.getParent && store.exists(taskId)) {\r\n\t\t\t\t\tvar parentId = store.getParent(taskId);\r\n\t\t\t\t\tif (store.exists(parentId)) {\r\n\t\t\t\t\t\t// if task is not found in list - maybe it's parent is a split task and we should use parents index instead\r\n\t\t\t\t\t\tvar parent = store.getItem(parentId);\r\n\t\t\t\t\t\tif (this.$gantt.isSplitTask(parent)) {\r\n\t\t\t\t\t\t\treturn this.getItemTop(parentId);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tgetItemTopCache[taskId] = this.getRowTop(itemIndex);\r\n\t\t\t\treturn getItemTopCache[taskId];\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get height of the item by item id\r\n\t\t * @param {*} itemId\r\n\t\t */\r\n\t\tgetItemHeight: function (itemId) {\r\n\t\t\tif(quickPosition.canUseSimpleCalculation()){\r\n\t\t\t\treturn quickPosition.getItemHeight(itemId);\r\n\t\t\t}\r\n\r\n\t\t\tif(!getItemHeightCache && this.$config.rowStore){\r\n\t\t\t\tthis._fillHeightCache(this.$config.rowStore);\r\n\t\t\t}\r\n\r\n\t\t\tif(getItemHeightCache[itemId] !== undefined){\r\n\t\t\t\treturn getItemHeightCache[itemId];\r\n\t\t\t}\r\n\r\n\t\t\tvar defaultHeight = this.$getConfig().row_height;\r\n\r\n\t\t\tif(this.$config.rowStore){\r\n\t\t\t\tvar store = this.$config.rowStore;\r\n\t\t\t\tif(!store) return defaultHeight;\r\n\r\n\t\t\t\tvar item = store.getItem(itemId);\r\n\r\n\t\t\t\treturn getItemHeightCache[itemId] = item && item.row_height || defaultHeight;\r\n\t\t\t}else{\r\n\t\t\t\treturn defaultHeight;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_fillHeightCache: function(store){\r\n\t\t\tif(!store){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgetItemHeightCache = {};\r\n\t\t\tvar defaultHeight = this.$getConfig().row_height;\r\n\t\t\tstore.eachItem(function(item){\r\n\t\t\t\treturn getItemHeightCache[item.id] = item && item.row_height || defaultHeight;\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetCacheStateTotalHeight: function(store){\r\n\r\n\t\t\tvar globalHeight = this.$getConfig().row_height;\r\n\t\t\tvar itemHeightCache = {};\r\n\t\t\tvar items = [];\r\n\t\t\tvar sumHeight = 0;\r\n\t\t\tif(store){\r\n\t\t\t\tstore.eachItem(function(item){\r\n\t\t\t\t\titems.push(item);\r\n\t\t\t\t\titemHeightCache[item.id] = item.row_height;\r\n\t\t\t\t\tsumHeight += item.row_height || globalHeight;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\t\t\treturn {\r\n\t\t\t\tglobalHeight: globalHeight,\r\n\t\t\t\titems: items,\r\n\t\t\t\tcount: items.length,\r\n\t\t\t\tsumHeight: sumHeight\r\n\t\t\t};\r\n\t\t},\r\n\t\tshouldClearHeightCache: function(oldState, newState){\r\n\r\n\t\t\tif(oldState.count != newState.count){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif(oldState.globalHeight != newState.globalHeight){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tif(oldState.sumHeight != newState.sumHeight){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tfor(var i in oldState.items){\r\n\t\t\t\tvar newValue = newState.items[i];\r\n\t\t\t\tif(newValue !== undefined && newValue != oldState.items[i]){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t/**\r\n\t\t * Get total height of items\r\n\t\t */\r\n\t\tgetTotalHeight: function () {\r\n\t\t\tif(quickPosition.canUseSimpleCalculation()){\r\n\t\t\t\treturn quickPosition.getTotalHeight();\r\n\t\t\t}\r\n\r\n\t\t\tif(totalHeightCache != -1){\r\n\t\t\t\treturn totalHeightCache;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.$config.rowStore){\r\n\t\t\t\tvar store = this.$config.rowStore;\r\n\t\t\t\tthis._fillHeightCache(store);\r\n\t\t\t\tvar getHeight = this.getItemHeight.bind(this);\r\n\t\t\t\tvar visibleItems = store.getVisibleItems();\r\n\t\t\t\tvar totalHeight = 0;\r\n\r\n\t\t\t\tvisibleItems.forEach(function(item){\r\n\t\t\t\t\ttotalHeight += getHeight(item.id);\r\n\t\t\t\t});\r\n\r\n\t\t\t\ttotalHeightCache = totalHeight;\r\n\t\t\t\treturn totalHeight;\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get item by top position\r\n\t\t * @param {*} top\r\n\t\t */\r\n\t\tgetItemIndexByTopPosition: function (top) {\r\n\t\t\tif(this.$config.rowStore){\r\n\t\t\t\tif(quickPosition.canUseSimpleCalculation()){\r\n\t\t\t\t\treturn quickPosition.getItemIndexByTopPosition(top);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar store = this.$config.rowStore;\r\n\t\t\t\tfor(var i = 0; i < store.countVisible(); i++){\r\n\t\t\t\t\tvar current = this.getRowTop(i);\r\n\t\t\t\t\tvar next = this.getRowTop(i+1);\r\n\t\t\t\t\tif(!next){\r\n\t\t\t\t\t\tvar taskId = store.getIdByIndex(i);\r\n\t\t\t\t\t\tnext = current + this.getItemHeight(taskId);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(top >= current && top < next){\r\n\t\t\t\t\t\treturn i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// GS-1723: If we iterated all tasks and didn't find the position, the target is below all other tasks\r\n\t\t\t\treturn store.countVisible() + 2;\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport default createMixin;","function createHelper(view){\r\n\tvar cachedRowHeight = -1;\r\n\tvar canUseSimpleCalc = -1;\r\n\treturn {\r\n\t\tresetCache: function(){\r\n\t\t\tcachedRowHeight = -1;\r\n\t\t\tcanUseSimpleCalc = -1;\r\n\t\t},\r\n\t\t_getRowHeight: function(){\r\n\t\t\tif(cachedRowHeight === -1){\r\n\t\t\t\tcachedRowHeight = view.$getConfig().row_height;\r\n\t\t\t}\r\n\t\t\treturn cachedRowHeight;\r\n\t\t},\r\n\t\t_refreshState: function(){\r\n\t\t\tthis.resetCache();\r\n\t\t\tcanUseSimpleCalc = true;\r\n\t\t\tvar store = view.$config.rowStore;\r\n\t\t\tif(!store){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar globalRowHeight = this._getRowHeight();\r\n\t\t\tfor (var i=0; i<store.fullOrder.length; i++) {\r\n\t\t\t\tvar item = store.getItem(store.fullOrder[i]);\r\n\t\t\t\t// GS-1491: ignore the task when it is filtered:\r\n\t\t\t\tif (!item) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif(item.row_height && item.row_height !== globalRowHeight){\r\n\t\t\t\t\tcanUseSimpleCalc = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t},\r\n\t\tcanUseSimpleCalculation: function(){\r\n\t\t\tif(canUseSimpleCalc === -1){\r\n\t\t\t\tthis._refreshState();\r\n\t\t\t}\r\n\t\t\treturn canUseSimpleCalc;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get top coordinate by row index (order)\r\n\t\t * @param {number} index\r\n\t\t */\r\n\t\tgetRowTop: function(index){\r\n\t\t\tvar store = view.$config.rowStore;\r\n\t\t\tif(!store){\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\treturn index * this._getRowHeight();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get height of the item by item id\r\n\t\t * @param {*} itemId\r\n\t\t */\r\n\t\tgetItemHeight: function (itemId) {\r\n\t\t\treturn this._getRowHeight();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get total height of items\r\n\t\t */\r\n\t\tgetTotalHeight: function () {\r\n\t\t\tif(view.$config.rowStore){\r\n\t\t\t\tvar store = view.$config.rowStore;\r\n\t\t\t\treturn store.countVisible() * this._getRowHeight();\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Get item by top position\r\n\t\t * @param {*} top\r\n\t\t */\r\n\t\tgetItemIndexByTopPosition: function (top) {\r\n\t\t\tif(view.$config.rowStore){\r\n\t\t\t\treturn Math.floor(top / this._getRowHeight());\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport default createHelper;","var createStaticBgHelper = function(){\r\n\treturn {\r\n\t\trender: function () { },\r\n\t\tdestroy: function () { }\r\n\t};\r\n};\r\n\r\nexport default {\r\n\tcreate: function(){\r\n\t\treturn createStaticBgHelper();\r\n\t}\r\n};\r\n\r\n","import ScaleHelper from \"./scales_ignore\";\r\nimport eventable from \"../../../utils/eventable\";\r\nimport * as utils from \"../../../utils/utils\";\r\nimport * as helpers from \"../../../utils/helpers\";\r\nimport topPositionMixin from \"../row_position_mixin\";\r\nimport canvasRender from \"./tasks_canvas_render\";\r\nimport createLayerConfig from \"./timeline_layers\";\r\n\r\nvar Timeline = function(parent, config, factory, gantt){\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$scaleHelper = new ScaleHelper(gantt);\r\n\tthis.$gantt = gantt;\r\n\tthis._posFromDateCache = {};\r\n\tthis._posFromWorkTimeCache = {};\r\n\tthis._timelineDragScroll = null;\r\n\tutils.mixin(this, topPositionMixin(this));\r\n\teventable(this);\r\n};\r\n\r\nTimeline.prototype = {\r\n\tinit: function(container) {\r\n\t\tcontainer.innerHTML += \"<div class='gantt_task' style='width:inherit;height:inherit;'></div>\";\r\n\t\tthis.$task = container.childNodes[0];\r\n\r\n\t\tthis.$task.innerHTML = \"<div class='gantt_task_scale'></div><div class='gantt_data_area'></div>\";\r\n\t\tthis.$task_scale = this.$task.childNodes[0];\r\n\r\n\t\tthis.$task_data = this.$task.childNodes[1];\r\n\t\tconst taskBg = \"<div class='gantt_task_bg'></div>\";\r\n\t\tconst links = \"<div class='gantt_links_area'></div>\";\r\n\t\tconst taskBars = \"<div class='gantt_bars_area'></div>\";\r\n\r\n\t\tconst taskConstraints = \"<div class='gantt_task_constraints'></div>\";\r\n\t\tconst taskDeadlines = \"<div class='gantt_task_deadlines'></div>\";\r\n\t\tconst taskBaselines = \"<div class='gantt_task_baselines'></div>\";\r\n\r\n\t\tthis.$task_data.innerHTML = taskBg + taskBaselines + links + taskBars + taskConstraints + taskDeadlines;\r\n\r\n\t\tthis.$task_bg = this.$task_data.childNodes[0];\r\n\t\tthis.$task_baselines = this.$task_data.childNodes[1];\r\n\t\tthis.$task_links = this.$task_data.childNodes[2];\r\n\t\tthis.$task_bars = this.$task_data.childNodes[3];\r\n\t\tthis.$task_constraints = this.$task_data.childNodes[4];\r\n\t\tthis.$task_deadlines = this.$task_data.childNodes[5];\r\n\r\n\t\tthis._tasks = {\r\n\t\t\tcol_width: 0,\r\n\t\t\twidth: [], // width of each column\r\n\t\t\tfull_width: 0, // width of all columns\r\n\t\t\ttrace_x: [],\r\n\t\t\trendered: {}\r\n\t\t};\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar attr = config[this.$config.bind + \"_attribute\"];\r\n\t\tvar linksAttr = config[this.$config.bindLinks + \"_attribute\"];\r\n\t\tif(!attr && this.$config.bind){\r\n\t\t\tattr = \"data-\" + this.$config.bind + \"-id\";\r\n\t\t}\r\n\t\tif(!linksAttr && this.$config.bindLinks){\r\n\t\t\tlinksAttr = \"data-\" + this.$config.bindLinks + \"-id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\t\tthis.$config.link_attribute = linksAttr || null;\r\n\r\n\t\tvar layers = this._createLayerConfig();\r\n\t\tif(!this.$config.layers){\r\n\t\t\tthis.$config.layers = layers.tasks;\r\n\t\t}\r\n\t\tif(!this.$config.linkLayers){\r\n\t\t\tthis.$config.linkLayers = layers.links;\r\n\t\t}\r\n\r\n\t\tthis._attachLayers(this.$gantt);\r\n\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t\tif (this.$gantt.ext.dragTimeline) {\r\n\t\t\tthis._timelineDragScroll = this.$gantt.ext.dragTimeline.create();\r\n\t\t\tthis._timelineDragScroll.attach(this);\r\n\t\t}\r\n\t},\r\n\r\n\tsetSize: function(width, height){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tif(width*1 === width){\r\n\t\t\tthis.$config.width = width;\r\n\t\t}\r\n\t\tif(height*1 === height){\r\n\r\n\t\t\tthis.$config.height = height;\r\n\t\t\tvar dataHeight = Math.max(this.$config.height - config.scale_height);\r\n\t\t\tthis.$task_data.style.height = dataHeight + 'px';\r\n\t\t}\r\n\r\n\t\tthis.refresh();\r\n\t\tthis.$task_bg.style.backgroundImage = \"\";\r\n\r\n\t\tif(config.smart_rendering && this.$config.rowStore){\r\n\t\t\tthis.$task_bg.style.height = this.getTotalHeight() +\"px\";\r\n\t\t}else{\r\n\t\t\tthis.$task_bg.style.height = \"\";\r\n\t\t}\r\n\r\n\t\tvar scale = this._tasks;\r\n\t\t//timeline area layers\r\n\t\tvar data_els = this.$task_data.childNodes;\r\n\t\tfor(var i= 0, len = data_els.length; i < len; i++){\r\n\t\t\tvar el = data_els[i];\r\n\t\t\tif(el.hasAttribute(\"data-layer\") && el.style)\r\n\t\t\t\tel.style.width = scale.full_width + \"px\";\r\n\t\t}\r\n\t},\r\n\r\n\tisVisible: function(){\r\n\t\tif(this.$parent && this.$parent.$config){\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t}else{\r\n\t\t\treturn this.$task.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\tgetSize: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar store = this.$config.rowStore;\r\n\r\n\t\tvar contentHeight = store ? this.getTotalHeight() : 0,\r\n\t\t\tcontentWidth = this.isVisible() ? this._tasks.full_width : 0;\r\n\r\n\t\treturn {\r\n\t\t\tx: this.isVisible() ? this.$config.width : 0,\r\n\t\t\ty: this.isVisible() ? this.$config.height : 0,\r\n\t\t\tcontentX: this.isVisible() ? contentWidth : 0,\r\n\t\t\tcontentY: this.isVisible() ? (config.scale_height + contentHeight) : 0,\r\n\t\t\tscrollHeight: this.isVisible() ? contentHeight : 0,\r\n\t\t\tscrollWidth: this.isVisible() ? contentWidth : 0\r\n\t\t};\r\n\t},\r\n\r\n\tscrollTo: function(left, top){\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tvar scrolled = false;\r\n\r\n\t\tthis.$config.scrollTop = this.$config.scrollTop || 0;\r\n\t\tthis.$config.scrollLeft = this.$config.scrollLeft || 0;\r\n\t\tif(top*1 === top){\r\n\t\t\tthis.$config.scrollTop = top;\r\n\t\t\tthis.$task_data.scrollTop = this.$config.scrollTop;\r\n\t\t\tscrolled = true;\r\n\t\t}\r\n\t\tif (left*1 === left){\r\n\t\t\tthis.$task.scrollLeft = left;\r\n\t\t\tthis.$config.scrollLeft = this.$task.scrollLeft;\r\n\t\t\tthis._refreshScales();\r\n\t\t\tscrolled = true;\r\n\t\t}\r\n\r\n\t\tif(scrolled){\r\n\t\t\tthis.callEvent(\"onScroll\", [this.$config.scrollLeft, this.$config.scrollTop]);\r\n\t\t}\r\n\t},\r\n\r\n\t_refreshScales: function _refreshScales() {\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif (!config.smart_scales) return;\r\n\r\n\t\tvar viewPort = this.getViewPort();\r\n\r\n\t\tvar scales = this._scales;\r\n\t\tthis.$task_scale.innerHTML = this._getScaleChunkHtml(scales, viewPort.x, viewPort.x_end);\r\n\t},\r\n\r\n\tgetViewPort: function(){\r\n\t\tvar scrollLeft = this.$config.scrollLeft || 0;\r\n\t\tvar scrollTop = this.$config.scrollTop || 0;\r\n\t\tvar height = this.$config.height || 0;\r\n\t\tvar width = this.$config.width || 0;\r\n\t\treturn {\r\n\t\t\ty: scrollTop,\r\n\t\t\ty_end: scrollTop + height,\r\n\t\t\tx: scrollLeft,\r\n\t\t\tx_end: scrollLeft + width,\r\n\t\t\theight: height,\r\n\t\t\twidth: width\r\n\t\t};\r\n\t},\r\n\r\n\t_createLayerConfig: createLayerConfig,\r\n\r\n\t_attachLayers: function(gantt){\r\n\t\tthis._taskLayers = [];\r\n\t\tthis._linkLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\r\n\t\tif(this.$config.bind){\r\n\r\n\t\t\tthis._bindStore();\r\n\t\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\t\tif(!taskRenderer){\r\n\t\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bind,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\ttaskRenderer.container = function(){ return self.$task_data;};\r\n\r\n\t\t\tvar taskLayers = this.$config.layers;\r\n\t\t\tfor(var i = 0; taskLayers && i < taskLayers.length; i++){\r\n\t\t\t\tvar layer = taskLayers[i];\r\n\r\n\t\t\t\tif(typeof layer == \"string\"){\r\n\t\t\t\t\tlayer = this.$gantt.$ui.layers[layer]();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(typeof layer == \"function\" || (layer && layer.render && layer.update)){\r\n\t\t\t\t\tlayer = {renderer: layer};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayer.view = this;\r\n\r\n\t\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t\t\tif(layer.expose){\r\n\t\t\t\t\tthis._taskRenderer = taskRenderer.getLayer(bar_layer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._initStaticBackgroundRender();\r\n\t\t}\r\n\r\n\t\tif(this.$config.bindLinks){\r\n\t\t\tself.$config.linkStore = self.$gantt.getDatastore(self.$config.bindLinks);\r\n\r\n\t\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\t\tif(!linkRenderer){\r\n\t\t\t\tlinkRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bindLinks,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar linkLayers = this.$config.linkLayers;\r\n\t\t\tfor(var i = 0; linkLayers && i < linkLayers.length; i++){\r\n\r\n\t\t\t\tif(typeof layer == \"string\"){\r\n\t\t\t\t\tlayer = this.$gantt.$ui.layers[layer]();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar layer = linkLayers[i];\r\n\t\t\t\tlayer.view = this;\r\n\t\t\t//\tlayer.getViewPort = getViewPort;\r\n\t\t\t//\tsubscribeSmartRender(layer);\r\n\t\t\t\tvar linkLayer = linkRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(linkLayer);\r\n\t\t\t\tif(linkLayers[i].expose){\r\n\t\t\t\t\tthis._linkRenderer = linkRenderer.getLayer(linkLayer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_initStaticBackgroundRender: function(){\r\n\t\tvar self = this;\r\n\t\tvar staticRender = canvasRender.create();\r\n\t\tvar store = self.$config.rowStore;\r\n\t\tif(!store) return;\r\n\r\n\t\tthis._staticBgHandler = store.attachEvent(\"onStoreUpdated\", function(id, item, mode){\r\n\t\t\tif(id !== null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!self.isVisible())\r\n\t\t\t\treturn;\r\n\t\t\tvar config = self.$getConfig();\r\n\t\t\tif(config.static_background || config.timeline_placeholder) {\r\n\t\t\t\tvar store = self.$gantt.getDatastore(self.$config.bind);\r\n\t\t\t\tvar staticBgContainer = self.$task_bg_static;\r\n\t\t\t\tif(!staticBgContainer){\r\n\t\t\t\t\tstaticBgContainer = document.createElement(\"div\");\r\n\t\t\t\t\tstaticBgContainer.className = \"gantt_task_bg\";\r\n\t\t\t\t\tself.$task_bg_static = staticBgContainer;\r\n\t\t\t\t\tif(self.$task_bg.nextSibling){\r\n\t\t\t\t\t\tself.$task_data.insertBefore(staticBgContainer, self.$task_bg.nextSibling);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tself.$task_data.appendChild(staticBgContainer);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (store) {\r\n\t\t\t\t\tvar staticBackgroundHeight = self.getTotalHeight();\r\n\t\t\t\t\tif (config.timeline_placeholder){\r\n\t\t\t\t\t\tstaticBackgroundHeight = config.timeline_placeholder.height || self.$task_data.offsetHeight || 99999;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstaticRender.render(staticBgContainer, config, self.getScale(), staticBackgroundHeight, self.getItemHeight(item ? item.id : null));\r\n\t\t\t\t}\r\n\t\t\t}else if(config.static_background){\r\n\t\t\t\tif(self.$task_bg_static && self.$task_bg_static.parentNode){\r\n\t\t\t\t\tself.$task_bg_static.parentNode.removeChild(self.$task_bg_static);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.attachEvent(\"onDestroy\", function () {\r\n\t\t\tstaticRender.destroy();\r\n\t\t});\r\n\t\tthis._initStaticBackgroundRender = function(){};//init once\r\n\t},\r\n\r\n\t_clearLayers: function(gantt){\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\tif (this._taskLayers) {\r\n\t\t\tfor(var i = 0; i < this._taskLayers.length; i++){\r\n\t\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._linkLayers) {\r\n\t\t\tfor(var i = 0; i < this._linkLayers.length; i++){\r\n\t\t\t\tlinkRenderer.removeLayer(this._linkLayers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._linkLayers = [];\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_render_tasks_scales: function _render_tasks_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar scales_html = \"\",\r\n\t\t\touter_width = 0,\r\n\t\t\tscale_height = 0;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (this.isVisible()) {\r\n\t\t\tvar helpers = this.$scaleHelper;\r\n\t\t\tvar scales = this._getScales();\r\n\t\t\tscale_height = config.scale_height;\r\n\r\n\t\t\tvar availWidth = this.$config.width;\r\n\t\t\tif(config.autosize == \"x\" || config.autosize == \"xy\"){\r\n\t\t\t\tavailWidth = Math.max(config.autosize_min_width, 0);\r\n\t\t\t}\r\n\r\n\t\t\tvar cfgs = helpers.prepareConfigs(scales, config.min_column_width, availWidth, scale_height - 1, state.min_date, state.max_date, config.rtl);\r\n\t\t\tvar cfg = this._tasks = cfgs[cfgs.length - 1];\r\n\t\t\tthis._scales = cfgs;\r\n\t\t\tthis._posFromDateCache = {};\r\n\t\t\tthis._posFromWorkTimeCache = {};\r\n\r\n\t\t\tif(this._tasks.projection && this._tasks.projection?.source === \"fixedHours\"){\r\n\t\t\t\tconst calendarId = \"timescale-projection-calendar\";\r\n\t\t\t\tif(gantt.getCalendar(calendarId)){\r\n\t\t\t\t\tgantt.deleteCalendar(calendarId);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet {hours} = this._tasks.projection;\r\n\t\t\t\tgantt.addCalendar({\r\n\t\t\t\t\tid:calendarId, \r\n\t\t\t\t\tworktime: {\r\n\t\t\t\t\t\thours: hours || gantt.getCalendar(\"global\")._worktime.hours.slice(),\r\n\t\t\t\t\t\tdays: [ 1, 1, 1, 1, 1, 1 ,1]\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tscales_html = this._getScaleChunkHtml(cfgs, 0, this.$config.width);\r\n\r\n\t\t\touter_width = cfg.full_width + \"px\";//cfg.full_width + (this._scroll_sizes().y ? scrollSizes.scroll_size : 0) + \"px\";\r\n\t\t\tscale_height += \"px\";\r\n\t\t}\r\n\r\n\t\tthis.$task_scale.style.height = scale_height;\r\n\r\n\t\tthis.$task_data.style.width =\r\n\t\t\tthis.$task_scale.style.width = outer_width;\r\n\r\n\t\tthis.$task_scale.innerHTML = scales_html;\r\n\r\n\t},\r\n\r\n\t_getScaleChunkHtml: function _get_scale_chunk_html (scales, fromPos, toPos) {\r\n\t\tvar templates = this.$gantt.templates;\r\n\t\tvar html = [];\r\n\r\n\t\tvar css = templates.scale_row_class;\r\n\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\tvar cssClass = \"gantt_scale_line\";\r\n\t\t\tvar tplClass = css(scales[i]);\r\n\t\t\tif (tplClass) {\r\n\t\t\t\tcssClass += \" \" + tplClass;\r\n\t\t\t}\r\n\r\n\t\t\thtml.push(\"<div class=\\\"\" + cssClass + \"\\\" style=\\\"height:\" + (scales[i].height) +\r\n\t\t\t\t\"px;position:relative;line-height:\" + (scales[i].height) + \"px\\\">\" + this._prepareScaleHtml(scales[i], fromPos, toPos, i) + \"</div>\");\r\n\t\t}\r\n\r\n\t\treturn html.join(\"\");\r\n\t},\r\n\t_prepareScaleHtml: function _prepare_scale_html(config, fromPos, toPos, index) {\r\n\t\tvar globalConfig = this.$getConfig();\r\n\t\tvar globalTemplates = this.$gantt.templates;\r\n\r\n\t\tvar cells = [];\r\n\t\tvar date = null, css = null;\r\n\r\n\t\tvar content = config.format || config.template || config.date;\r\n\r\n\t\tif(typeof content === \"string\"){\r\n\t\t\tcontent = this.$gantt.date.date_to_str(content);\r\n\t\t}\r\n\r\n\t\tvar startIndex = 0,\r\n\t\t\tendIndex = config.count;\r\n\r\n\t\tif (globalConfig.smart_scales && (!isNaN(fromPos) && !isNaN(toPos))) {\r\n\t\t\tstartIndex = helpers.findBinary(config.left, fromPos);\r\n\t\t\tendIndex = helpers.findBinary(config.left, toPos) + 1;\r\n\t\t}\r\n\r\n\t\tcss = config.css || function () {\r\n\t\t\t};\r\n\t\tif (!config.css && globalConfig.inherit_scale_class) {\r\n\t\t\tcss = globalTemplates.scale_cell_class;\r\n\t\t}\r\n\r\n\t\tfor (var i = startIndex; i < endIndex; i++) {\r\n\t\t\tif (!config.trace_x[i]) break;\r\n\r\n\t\t\tdate = new Date(config.trace_x[i]);\r\n\t\t\tvar value = content.call(this, date),\r\n\t\t\t\twidth = config.width[i],\r\n\t\t\t\theight = config.height,\r\n\t\t\t\tleft = config.left[i],\r\n\t\t\t\tstyle = \"\",\r\n\t\t\t\ttemplate = \"\",\r\n\t\t\t\tcssclass = \"\";\r\n\r\n\t\t\tif (width) {\r\n\t\t\t\tvar position = globalConfig.smart_scales ? (\"position:absolute;left:\" + left + \"px\") : \"\";\r\n\r\n\t\t\t\tstyle = \"width:\" + (width) + \"px;\" + position;\r\n\t\t\t\t// GS-1188: Display the scale value in the viewport for long cells\r\n\t\t\t\tconst viewPort = this.getViewPort();\r\n\t\t\t\tconst floatConfig = (globalConfig.scales[index] || {}).sticky; // for old scale settings\r\n\r\n\t\t\t\tlet labelPosition = '';\r\n\t\t\t\tconst approxLabelWidth = 70;\r\n\t\t\t\t// if sticky config is not specified - sticky labels are enabled for long cells only\r\n\t\t\t\tif ((floatConfig !== false && width > approxLabelWidth) || floatConfig === true) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (left < viewPort.x && left + width/2 - approxLabelWidth/2 < viewPort.x){\r\n\t\t\t\t\t\tlabelPosition = ` style='position:absolute;left: ${viewPort.x  - left + 10}px;' `;\r\n\t\t\t\t\t} else if(left + width/2 + approxLabelWidth/2 > viewPort.x_end && width > approxLabelWidth){\r\n\t\t\t\t\t\tlet labelPos = viewPort.x_end - left - 10;\r\n\t\t\t\t\t\tlet translateValue = \"-100%\";\r\n\t\t\t\t\t\tif(labelPos < approxLabelWidth) {\r\n\t\t\t\t\t\t\tlabelPos = approxLabelWidth;\r\n\t\t\t\t\t\t\ttranslateValue = `-${labelPos}px`;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlabelPosition = ` style='position:absolute;left: ${labelPos}px;transform: translate(${translateValue},0);' `;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcssclass = \"gantt_scale_cell\" + (i == config.count - 1 ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\t\ttemplate = css.call(this, date);\r\n\t\t\t\tif (template) cssclass += \" \" + template;\r\n\r\n\t\t\t\tvar ariaAttr = this.$gantt._waiAria.getTimelineCellAttr(value);\r\n\t\t\t\tvar cell = `<div class='${cssclass}' ${ariaAttr} style='${style}'><span ${labelPosition}>${value}</span></div>`;\r\n\t\t\t\tcells.push(cell);\r\n\t\t\t} else {\r\n\t\t\t\t//do not render ignored cells\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn cells.join(\"\");\r\n\t},\r\n\t_getPositioningContext: function(task) {\r\n\t\tif(this._tasks.unit === this.$gantt.config.duration_unit){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tif(this._tasks.unit !== \"day\" && this._tasks.unit !== \"week\"){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tif(!this._tasks.projection){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst {source} = this._tasks.projection || {};\r\n\t\tif(source === \"taskCalendar\"){\r\n\r\n\t\t\tif(!task){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tcalendar: gantt.getCalendar(\"global\")\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tcalendar: gantt.getTaskCalendar(task)\r\n\t\t\t};\r\n\t\t}\r\n\t\tif(source === \"fixedHours\"){\r\n\t\t\treturn {\r\n\t\t\t\tcalendar: gantt.getCalendar(\"timescale-projection-calendar\")\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t},\r\n\r\n\tdateFromPos: function dateFromPos(x, context) {\r\n\t\tvar scale = this._tasks;\r\n\t\tif (x < 0 || x > scale.full_width || !scale.full_width) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar ind = helpers.findBinary(this._tasks.left, x);\r\n\t\tvar summ = this._tasks.left[ind];\r\n\r\n\t\tvar col_width = scale.width[ind] || scale.col_width;\r\n\t\tvar part = 0;\r\n\t\tif (col_width) {\r\n\t\t\tpart = (x - summ) / col_width;\r\n\t\t\tif(scale.rtl){\r\n\t\t\t\tpart = 1 - part;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst calendar = (context ? context.calendar : null) || null;\r\n\r\n\t\tvar unit = 0;\r\n\t\tif (part) {\r\n\t\t\tunit = this._getColumnDuration(scale, scale.trace_x[ind]);\r\n\t\t}\r\n\r\n\t\tconst cellStartDate = scale.trace_x[ind];\r\n\r\n\t\tconst absolutePositionDate = new Date(scale.trace_x[ind].valueOf() + Math.round(part * unit));\r\n\r\n\t\tif(!calendar){\r\n\r\n\t\t\treturn absolutePositionDate;\r\n\t\t}\r\n\r\n\t\tconst {start: trimStartSec, end: cellEnd, duration: cellDuration, intervals} = this._getWorkTrimForCell(cellStartDate, calendar);\r\n\r\n\t\tif(cellDuration <= 0){\r\n\t\t\treturn absolutePositionDate;\r\n\t\t}\r\n\r\n\t\tconst secondsInsideTrim = Math.round(part * cellDuration);\r\n\t\tconst mappedTimestampMs = cellStartDate.valueOf() + (trimStartSec + secondsInsideTrim) * 1000;\r\n\r\n\t\treturn new Date(mappedTimestampMs);\r\n\t},\r\n\r\n\tposFromDate: function posFromDate(date, context) {\r\n\t\tif (!this.isVisible())\r\n\t\t\treturn 0;\r\n\r\n\t\tif(!date){\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tif(context && context.calendar){\r\n\t\t\treturn this.posFromWorkTime(date, context);\r\n\t\t}\r\n\r\n\t\tvar dateValue = String(date.valueOf());\r\n\r\n\t\tif(this._posFromDateCache[dateValue] !== undefined){\r\n\t\t\treturn this._posFromDateCache[dateValue];\r\n\t\t}\r\n\t\tvar ind = this.columnIndexByDate(date);\r\n\t\tthis.$gantt.assert(ind >= 0, \"Invalid day index\");\r\n\r\n\t\tvar wholeCells = Math.floor(ind);\r\n\t\tvar partCell = ind % 1;\r\n\r\n\t\tvar pos = this._tasks.left[Math.min(wholeCells, this._tasks.width.length - 1)];\r\n\t\tif (wholeCells == this._tasks.width.length)\r\n\t\t\tpos += this._tasks.width[this._tasks.width.length - 1];\r\n\t\t//for(var i=1; i <= wholeCells; i++)\r\n\t\t//\tpos += gantt._tasks.width[i-1];\r\n\r\n\t\tif (partCell) {\r\n\t\t\tif (wholeCells < this._tasks.width.length) {\r\n\t\t\t\tpos += this._tasks.width[wholeCells] * (partCell % 1);\r\n\t\t\t} else {\r\n\t\t\t\tpos += 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar roundPos = Math.round(pos);\r\n\t\tthis._posFromDateCache[dateValue] = roundPos;\r\n\t\treturn Math.round(roundPos);\r\n\t},\r\n\r\n\t_getWorkTrimForCell: function (cellStartDate, calendar) {\r\n\t\tconst cellDurationMs = this._getColumnDuration(this._tasks, cellStartDate);\r\n\t\tconst cellEndDate = new Date(cellStartDate.valueOf() + cellDurationMs);\r\n\r\n\t\tlet earliestWorkSecondInCell = null;\r\n\t\tlet latestWorkSecondInCell = null;\r\n\t\tconst intervalsSinceCellStart = [];\r\n\r\n\t\tfor (let dayDate = new Date(cellStartDate), dayIndex = 0;\r\n\t\t\tdayDate < cellEndDate;\r\n\t\t\tdayDate = this.$gantt.date.add(dayDate, 1, \"day\"), dayIndex++) {\r\n\r\n\t\t\tconst dayIntervals = calendar._getWorkHours(dayDate) || [];\r\n\r\n\t\t\tconst dayStartOffsetSeconds = Math.round((dayDate - cellStartDate) / 1000);\r\n\r\n\t\t\tfor (let i = 0; i < dayIntervals.length; i++) {\r\n\t\t\t\tconst absoluteStartSeconds = dayStartOffsetSeconds + dayIntervals[i].start;\r\n\t\t\t\tconst absoluteEndSeconds   = dayStartOffsetSeconds + dayIntervals[i].end;\r\n\r\n\t\t\t\tintervalsSinceCellStart.push({\r\n\t\t\t\t\tstart: absoluteStartSeconds,\r\n\t\t\t\t\tend: absoluteEndSeconds\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (earliestWorkSecondInCell === null || absoluteStartSeconds < earliestWorkSecondInCell) {\r\n\t\t\t\t\tearliestWorkSecondInCell = absoluteStartSeconds;\r\n\t\t\t\t}\r\n\t\t\t\tif (latestWorkSecondInCell === null || absoluteEndSeconds > latestWorkSecondInCell) {\r\n\t\t\t\t\tlatestWorkSecondInCell = absoluteEndSeconds;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\tearliestWorkSecondInCell === null ||\r\n\t\t\tlatestWorkSecondInCell === null ||\r\n\t\t\tlatestWorkSecondInCell <= earliestWorkSecondInCell\r\n\t\t) {\r\n\t\t\treturn { start: 0, end: 0, duration: 0, intervals: [] };\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstart: earliestWorkSecondInCell,\r\n\t\t\tend: latestWorkSecondInCell,\r\n\t\t\tduration: latestWorkSecondInCell - earliestWorkSecondInCell,\r\n\t\t\tintervals: intervalsSinceCellStart\r\n\t\t};\r\n\t},\r\n\r\n\tposFromWorkTime: function (date, {calendar}) {\r\n\t\tif (!this.isVisible())\r\n\t\t\treturn 0;\r\n\t\tif (!date) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tif(!calendar){\r\n\t\t\treturn this.posFromDate(date);\r\n\t\t}\r\n\r\n\t\tconst cacheKey = (calendar ? calendar.id : \"\") + String(date.valueOf());\r\n\t\tif (this._posFromWorkTimeCache[cacheKey] !== undefined) {\r\n\t\t\treturn this._posFromWorkTimeCache[cacheKey];\r\n\t\t}\r\n\r\n\t\tconst index = this.columnIndexByDate(date);\r\n\t\tthis.$gantt.assert(index >= 0, \"Invalid day index\");\r\n\r\n\t\tconst dayIndex = Math.floor(index);\t\r\n\t\tconst wholeCells = dayIndex;\r\n\r\n\t\tconst cellStartDate = this._tasks.trace_x[dayIndex];\r\n\t\tconst cellEndDate = new Date(cellStartDate.valueOf() + this._getColumnDuration(this._tasks, cellStartDate));\r\n\r\n\t\tconst {start: workintervalStart, end: workintervalEnd, duration: cellDuration} = this._getWorkTrimForCell(date, calendar);\r\n\r\n\t\tif(cellDuration === 0){\r\n\t\t\tconst result = this.posFromDate(date);\r\n\t\t//\tthis._posFromWorkTimeCache[cacheKey] = result;\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\tconst cellStart = this._tasks.trace_x[dayIndex];\r\n\t\tconst dateOffset = (date - cellStart) / 1000; // in seconds\r\n\r\n\t\tlet fraction = 0;\r\n\t\tif(dateOffset <= workintervalStart){\r\n\t\t\tfraction = 0;\r\n\t\t} else if(dateOffset >= workintervalEnd){\r\n\t\t\tfraction = 1;\r\n\t\t} else {\r\n\t\t\tfraction = (dateOffset - workintervalStart) / cellDuration;\r\n\t\t}\r\n\r\n\t\tif(this._tasks.rtl){\r\n\t\t\tfraction = 1 - fraction;\r\n\t\t}\r\n\r\n\t\tconst posLeft = this._tasks.left[Math.min(wholeCells, this._tasks.width.length - 1)];\r\n\r\n\t\tconst cellWidth = (wholeCells < this._tasks.width.length)\r\n\t\t\t? this._tasks.width[wholeCells]\r\n\t\t\t: this._tasks.width[this._tasks.width.length - 1];\r\n\t\r\n\t\tconst pos = Math.round(posLeft + cellWidth * fraction);\r\n\t//\tthis._posFromWorkTimeCache[cacheKey] = pos;\r\n\r\n\t\treturn pos;\r\n\t},\r\n\r\n\r\n\t_getNextVisibleColumn: function (startIndex, columns, ignores) {\r\n\t\t// iterate columns to the right\r\n\t\tvar date = +columns[startIndex];\r\n\t\tvar visibleDateIndex = startIndex;\r\n\t\twhile (ignores[date]) {\r\n\t\t\tvisibleDateIndex++;\r\n\t\t\tdate = +columns[visibleDateIndex];\r\n\t\t}\r\n\r\n\t\treturn visibleDateIndex;\r\n\t},\r\n\t_getPrevVisibleColumn: function (startIndex, columns, ignores) {\r\n\t\t// iterate columns to the left\r\n\t\tvar date = +columns[startIndex];\r\n\t\tvar visibleDateIndex = startIndex;\r\n\t\twhile (ignores[date]) {\r\n\t\t\tvisibleDateIndex--;\r\n\t\t\tdate = +columns[visibleDateIndex];\r\n\t\t}\r\n\t\treturn visibleDateIndex;\r\n\t},\r\n\t_getClosestVisibleColumn: function (startIndex, columns, ignores) {\r\n\t\tvar visibleDateIndex = this._getNextVisibleColumn(startIndex, columns, ignores);\r\n\t\tif (!columns[visibleDateIndex]) {\r\n\t\t\tvisibleDateIndex =  this._getPrevVisibleColumn(startIndex, columns, ignores);\r\n\t\t}\r\n\t\treturn visibleDateIndex;\r\n\t},\r\n\tcolumnIndexByDate: function columnIndexByDate(date) {\r\n\t\tvar pos = new Date(date).valueOf();\r\n\t\tvar days = this._tasks.trace_x_ascending,\r\n\t\t\tignores = this._tasks.ignore_x;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (pos <= state.min_date) {\r\n\t\t\tif(this._tasks.rtl){\r\n\t\t\t\treturn days.length;\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif (pos >= state.max_date) {\r\n\t\t\tif(this._tasks.rtl){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn days.length;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar dateIndex = helpers.findBinary(days, pos);\r\n\r\n\t\tvar visibleIndex = this._getClosestVisibleColumn(dateIndex, days, ignores);\r\n\t\tvar visibleDate = days[visibleIndex];\r\n\t\tvar transition = this._tasks.trace_index_transition;\r\n\r\n\t\tif(!visibleDate){\r\n\t\t\tif(transition){\r\n\t\t\t\treturn transition[0];\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar part = ((date - days[visibleIndex]) / this._getColumnDuration(this._tasks, days[visibleIndex]));\r\n\t\tif(transition){\r\n\t\t\treturn transition[visibleIndex] + (1 - part);\r\n\t\t}else{\r\n\t\t\treturn visibleIndex + part;\r\n\t\t}\r\n\t},\r\n\tgetItemPosition:function (task, start_date, end_date) {\r\n\t\tvar xLeft, xRight, width;\r\n\r\n\t\tlet displayStart = start_date || task.start_date || task.$auto_start_date;\r\n\t\tlet displayEnd = end_date || task.end_date || task.$auto_end_date;\r\n\r\n\t\tconst context = this._getPositioningContext(task);\r\n\t\tif(context && context.calendar) {\r\n\r\n\t\t\tif(this._tasks.rtl){\r\n\t\t\t\txRight = this.posFromWorkTime(displayStart, context);\r\n\t\t\t\txLeft = this.posFromWorkTime(displayEnd, context);\r\n\t\t\t}else{\r\n\t\t\t\txLeft = this.posFromWorkTime(displayStart, context);\r\n\t\t\t\txRight = this.posFromWorkTime(displayEnd, context);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(this._tasks.rtl){\r\n\t\t\t\txRight = this.posFromDate(displayStart);\r\n\t\t\t\txLeft = this.posFromDate(displayEnd);\r\n\t\t\t}else{\r\n\t\t\t\txLeft = this.posFromDate(displayStart);\r\n\t\t\t\txRight = this.posFromDate(displayEnd);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\twidth =  Math.max((xRight - xLeft), 0);\r\n\r\n\t\tvar y = this.getItemTop(task.id);\r\n\r\n\t\tvar height = this.getBarHeight(task.id);\r\n\t\tvar rowHeight = this.getItemHeight(task.id);\r\n\t\treturn {\r\n\t\t\tleft: xLeft,\r\n\t\t\ttop: y,\r\n\t\t\theight: height,\r\n\t\t\twidth: width,\r\n\t\t\trowHeight: rowHeight\r\n\t\t};\r\n\t},\r\n\r\n\tgetBarHeight: function(taskId, isMilestoneRender){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar task = this.$config.rowStore.getItem(taskId);\r\n\t\t// height of the bar item\r\n\t\tvar height = task.task_height || task.bar_height || config.bar_height || config.task_height;\r\n\t\tvar rowHeight = this.getItemHeight(taskId);\r\n\r\n\t\tif (height == \"full\") {\r\n\t\t\tvar offset = config.bar_height_padding || 3;\r\n\t\t\theight = rowHeight - offset;\r\n\t\t}\r\n\t\t//item height cannot be bigger than row height\r\n\t\theight = Math.min(height, rowHeight);\r\n\t\tif (isMilestoneRender) { // to get correct height for addapting Milestone to the row\r\n\t\t\theight = Math.round(height / Math.sqrt(2));\r\n\t\t}\r\n\t\treturn Math.max(height, 0);\r\n\t},\r\n\r\n\tgetScale: function(){\r\n\t\treturn this._tasks;\r\n\t},\r\n\r\n\t_getScales: function _get_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar helpers = this.$scaleHelper;\r\n\t\tvar scales = [helpers.primaryScale(config)].concat(helpers.getAdditionalScales(config));\r\n\r\n\t\thelpers.sortScales(scales);\r\n\t\treturn scales;\r\n\t},\r\n\r\n\t_getColumnDuration: function _get_coll_duration(scale, date) {\r\n\t\treturn this.$gantt.date.add(date, scale.step, scale.unit) - date;\r\n\t},\r\n\t_bindStore: function () {\r\n\t\tif (this.$config.bind){\r\n\t\t\tvar rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\t\t\tthis.$config.rowStore = rowStore;\r\n\t\t\tif(rowStore && !rowStore._timelineCacheAttached){\r\n\t\t\t\tvar self = this;\r\n\t\t\t\trowStore._timelineCacheAttached = rowStore.attachEvent(\"onBeforeFilter\", function(){\r\n\t\t\t\t\tself._resetTopPositionHeight();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_unbindStore: function(){\r\n\t\tif (this.$config.bind){\r\n\t\t\tvar rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\t\t\tif(rowStore && rowStore._timelineCacheAttached){\r\n\t\t\t\trowStore.detachEvent(rowStore._timelineCacheAttached);\r\n\t\t\t\trowStore._timelineCacheAttached = false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\trefresh: function(){\r\n\t\tthis._bindStore();\r\n\r\n\t\tif(this.$config.bindLinks) {\r\n\t\t\tthis.$config.linkStore = this.$gantt.getDatastore(this.$config.bindLinks);\r\n\t\t}\r\n\r\n\t\tthis._resetTopPositionHeight();\r\n\t\tthis._resetHeight();\r\n\t\tthis._initStaticBackgroundRender();\r\n\t\tthis._render_tasks_scales();\r\n\t},\r\n\r\n\tdestructor: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tthis._clearLayers(gantt);\r\n\t\tthis._unbindStore();\r\n\t\tthis.$task = null;\r\n\t\tthis.$task_scale = null;\r\n\t\tthis.$task_data = null;\r\n\t\tthis.$task_bg = null;\r\n\t\tthis.$task_links = null;\r\n\t\tthis.$task_bars = null;\r\n\r\n\t\tthis.$gantt = null;\r\n\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tthis.$config.rowStore.detachEvent(this._staticBgHandler);\r\n\t\t\tthis.$config.rowStore = null;\r\n\t\t}\r\n\t\tif(this.$config.linkStore){\r\n\t\t\tthis.$config.linkStore = null;\r\n\t\t}\r\n\r\n\t\tif(this._timelineDragScroll) {\r\n\t\t\tthis._timelineDragScroll.destructor();\r\n\t\t\tthis._timelineDragScroll = null;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\r\n\t}\r\n};\r\n\r\nexport default Timeline;","\r\nexport default function(){\r\n\tvar self = this;\r\n\tvar taskFilter = function(){\r\n\t\treturn self.isVisible();\r\n\t};\r\n\r\n\tvar barVisible = function(id, task){\r\n\t\treturn !task.hide_bar;\r\n\t};\r\n\r\n\tconst gantt = this.$gantt;\r\n\r\n\tvar taskLayers = [\r\n\t\t{\r\n\t\t\texpose: true,\r\n\t\t\trenderer: this.$gantt.$ui.layers.taskBar(),\r\n\t\t\tcontainer: this.$task_bars,\r\n\t\t\tfilter: [taskFilter, barVisible]\r\n\t\t}\r\n\t];\r\n\r\n\ttaskLayers.push({\r\n\t\trenderer: this.$gantt.$ui.layers.taskBg(),\r\n\t\tcontainer: this.$task_bg,\r\n\t\tfilter: [\r\n\t\t\t//function(){\r\n\t\t\t//\treturn !self.$getConfig().static_background;\r\n\t\t\t//},\r\n\t\t\ttaskFilter\r\n\t\t]\r\n\t});\r\n\r\n\tvar linkLayers = [\r\n\t\t{\r\n\t\t\texpose: true,\r\n\t\t\trenderer: this.$gantt.$ui.layers.link(),\r\n\t\t\tcontainer: this.$task_links,\r\n\t\t\tfilter: [taskFilter]\r\n\t\t}\r\n\t];\r\n\r\n\treturn {\r\n\t\ttasks: taskLayers,\r\n\t\tlinks: linkLayers\r\n\t};\r\n\r\n};","const SENSITIVITY = 20;\r\nconst TIMEOUT = 50;\r\nconst SCROLLSTEP = 10;\r\n\r\nexport default class ScrollableGrid {\r\n\tpublic getCurrentX;\r\n\tprivate $gantt;\r\n\tprivate $grid;\r\n\tprivate _dnd;\r\n\tprivate _scrollView;\r\n\tprivate _scrollOrder: 0 | 1 | -1 = 0;\r\n\r\n\tconstructor(params) {\r\n\t\tconst {gantt, grid, dnd, getCurrentX} = params;\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis.$grid = grid;\r\n\t\tthis._dnd = dnd;\r\n\t\tthis.getCurrentX = getCurrentX;\r\n\t\tthis._scrollView = this.$gantt.$ui.getView(this.$grid.$config.scrollX);\r\n\t\tthis.attachEvents();\r\n\t}\r\n\tattachEvents() {\r\n\t\tif (this.isScrollable()) {\r\n\t\t\tthis._dnd.attachEvent(\"onDragMove\", (obj, e) => {\r\n\t\t\t\tconst gridBoundingRect = this.$grid.$grid.getBoundingClientRect();\r\n\t\t\t\tconst maxLeft = gridBoundingRect.right;\r\n\t\t\t\tconst minLeft = gridBoundingRect.left;\r\n\t\t\t\tconst currentX = this.getCurrentX(e.clientX);\r\n\r\n\t\t\t\tif (currentX >= maxLeft - SENSITIVITY) {\r\n\t\t\t\t\tthis.autoscrollRight();\r\n\t\t\t\t\tthis.autoscrollStart();\r\n\t\t\t\t}\r\n\t\t\t\tif (currentX <= minLeft + SENSITIVITY) {\r\n\t\t\t\t\tthis.autoscrollLeft();\r\n\t\t\t\t\tthis.autoscrollStart();\r\n\t\t\t\t}\r\n\t\t\t\tif (currentX < maxLeft - SENSITIVITY && currentX > minLeft + SENSITIVITY) {\r\n\t\t\t\t\tthis.autoscrollStop();\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t\tthis._dnd.attachEvent(\"onDragEnd\", () => {\r\n\t\t\t\tthis.autoscrollStop();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tautoscrollStart() {\r\n\t\tif (this._scrollOrder === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst scrollStep = SCROLLSTEP * this._scrollOrder;\r\n\t\tconst scrollState = this._scrollView.getScrollState();\r\n\t\tthis._scrollView.scrollTo(scrollState.position + scrollStep);\r\n\t\tsetTimeout(() => { this.autoscrollStart(); }, TIMEOUT);\r\n\t}\r\n\tautoscrollRight() {\r\n\t\tthis._scrollOrder = 1;\r\n\t}\r\n\tautoscrollLeft() {\r\n\t\tthis._scrollOrder = -1;\r\n\t}\r\n\tautoscrollStop() {\r\n\t\tthis._scrollOrder = 0;\r\n\t}\r\n\tgetCorrection() {\r\n\t\tif (!this.isScrollable()) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\treturn this._scrollView.getScrollState().position;\r\n\t}\r\n\tisScrollable() {\r\n\t\treturn !!this.$grid.$config.scrollable;\r\n\t}\r\n}","import * as domHelpers from \"../../utils/dom_helpers\";\r\nimport ScrollableGrid from \"./scrollable_grid\";\r\n\r\nconst COLUMN_ID_ATTR_NAME = \"data-column-id\";\r\n\r\nexport class ColumnsGridDnd {\r\n\tprivate $gantt;\r\n\tprivate $grid;\r\n\tprivate _dragX;\r\n\tprivate _dnd;\r\n\tprivate _originAutoscroll;\r\n\tprivate _scrollableGrid: ScrollableGrid;\r\n\tprivate _draggedCell;\r\n\tprivate _targetMarker = null;\r\n\tprivate _gridConfig;\r\n\tconstructor(gantt, grid) {\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis.$grid = grid;\r\n\t}\r\n\tinit() {\r\n\t\tconst DND = this.$gantt.$services.getService(\"dnd\");\r\n\t\tthis._dnd = new DND(this.$grid.$grid_scale, { updates_per_second: 60 });\r\n\t\tthis._scrollableGrid = new ScrollableGrid({\r\n\t\t\tgantt: this.$gantt,\r\n\t\t\tgrid: this.$grid,\r\n\t\t\tdnd: this._dnd,\r\n\t\t\tgetCurrentX: this.calculateCurrentPosition\r\n\t\t});\r\n\t\tthis.attachEvents();\r\n\t}\r\n\tattachEvents() {\r\n\t\tthis._dnd.attachEvent(\"onBeforeDragStart\", (obj, e) => {\r\n\t\t\tthis._draggedCell = this.$gantt.utils.dom.closest(e.target, \".gantt_grid_head_cell\");\r\n\t\t\tif(!this._draggedCell){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst columns = this.$grid.$getConfig().columns;\r\n\t\t\tconst columnName = this._draggedCell.getAttribute(COLUMN_ID_ATTR_NAME);\r\n\t\t\tlet draggedColumn;\r\n\t\t\tlet draggedIndex;\r\n\t\t\tcolumns.map(function(column, index){\r\n\t\t\t\tif(column.name === columnName){\r\n\t\t\t\t\tdraggedColumn = column;\r\n\t\t\t\t\tdraggedIndex = index;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (this.$grid.callEvent(\"onBeforeColumnDragStart\", [{ draggedColumn, draggedIndex}]) === false) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (!this._draggedCell || !draggedColumn) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tthis._gridConfig = this.$grid.$getConfig();\r\n\t\t\tthis._originAutoscroll = this.$gantt.config.autoscroll;\r\n\t\t\tthis.$gantt.config.autoscroll = false;\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tthis._dnd.attachEvent(\"onAfterDragStart\", (obj, e) => {\r\n\t\t\tif (!this._draggedCell) {\r\n\t\t\t\treturn; // GS-1333: don't try to reorder a column when we resize it\r\n\t\t\t}\r\n\t\t\tthis._dnd.config.column = this._draggedCell.getAttribute(COLUMN_ID_ATTR_NAME);\r\n\t\t\tthis._dnd.config.marker.innerHTML = this._draggedCell.outerHTML;\r\n\t\t\tthis._dnd.config.marker.classList.add(\"gantt_column_drag_marker\");\r\n\t\t\tthis._dnd.config.marker.style.height = this._gridConfig.scale_height + \"px\";\r\n\t\t\tthis._dnd.config.marker.style.lineHeight = this._gridConfig.scale_height + \"px\";\r\n\t\t\tthis._draggedCell.classList.add(\"gantt_grid_head_cell_dragged\");\r\n\t\t});\r\n\r\n\t\tthis._dnd.attachEvent(\"onDragMove\", (obj, e) => {\r\n\t\t\tif(!this._draggedCell){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis._dragX = e.clientX;\r\n\t\t\tconst x = this.calculateCurrentPosition(e.clientX);\r\n\t\t\tconst columnIndexes = this.findColumnsIndexes();\r\n\t\t\tthis.setMarkerPosition(x);\r\n\t\t\tthis.drawTargetMarker(columnIndexes);\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tthis._dnd.attachEvent(\"onDragEnd\", () => {\r\n\t\t\tif (!this._draggedCell) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst columnIndexes = this.findColumnsIndexes();\r\n\t\t\tconst targetIndex = columnIndexes.targetIndex;\r\n\t\t\tconst draggedIndex = columnIndexes.draggedIndex;\r\n\t\t\tconst columns = this.$grid.$getConfig().columns;\r\n\r\n\t\t\tconst draggedColumn = columns[draggedIndex];\r\n\t\t\tconst targetColumn = columns[targetIndex];\r\n\t\t\tif (this.$grid.callEvent(\"onColumnDragMove\", [{ draggedColumn, targetColumn, draggedIndex, targetIndex }]) === false) {\r\n\t\t\t\tthis.cleanTargetMarker();\r\n\t\t\t\tthis.$gantt.render();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$gantt.config.autoscroll = this._originAutoscroll;\r\n\t\t\tthis._draggedCell.classList.remove(\"gantt_grid_head_cell_dragged\");\r\n\t\t\tthis.cleanTargetMarker();\r\n\t\t\tthis.reorderColumns();\r\n\t\t});\r\n\r\n\t}\r\n\treorderColumns() {\r\n\t\tconst { targetIndex, draggedIndex } = this.findColumnsIndexes();\r\n\r\n\t\tconst columns = this.$grid.$getConfig().columns;\r\n\t\tconst draggedColumn = columns[draggedIndex];\r\n\t\tconst targetColumn = columns[targetIndex];\r\n\r\n\t\tif (this.$grid.callEvent(\"onBeforeColumnReorder\", [{ draggedColumn, targetColumn, draggedIndex, targetIndex }]) === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (targetIndex === draggedIndex) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tcolumns.splice(draggedIndex, 1);\r\n\t\tcolumns.splice(targetIndex, 0, draggedColumn);\r\n\t\tthis.$gantt.render();\r\n\t\tthis.$grid.callEvent(\"onAfterColumnReorder\", [{ draggedColumn, targetColumn, draggedIndex, targetIndex }]);\r\n\t}\r\n\tfindColumnsIndexes() {\r\n\t\tconst draggedId = this._dnd.config.column;\r\n\t\tconst columns = this.$grid.$getConfig().columns;\r\n\t\tlet targetIndex: number;\r\n\t\tlet draggedIndex: number;\r\n\t\tlet xBefore: number;\r\n\t\tlet xAfter: number;\r\n\t\tconst currentColumn = { startX: 0, endX: 0 };\r\n\r\n\t\tlet start = 0;\r\n\t\tlet end = columns.length - 1;\r\n\t\tlet compare = (a, b) => a <= b;\r\n\t\tlet next = (index) => ++index;\r\n\t\tif (this.$gantt.config.rtl) {\r\n\t\t\tstart = columns.length - 1;\r\n\t\t\tend = 0;\r\n\t\t\tcompare = (a, b) => a >= b;\r\n\t\t\tnext = (index) => --index;\r\n\t\t}\r\n\r\n\t\tlet columnRelativePos: number;\r\n\r\n\t\tconst relativeX = this._dragX - this.$grid.$grid.getBoundingClientRect().left + this._scrollableGrid.getCorrection();\r\n\t\tfor (let i = start; compare(i, end); i = next(i)) {\r\n\t\t\tif (targetIndex !== undefined && draggedIndex !== undefined) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif(!columns[i].hide) {\r\n\t\t\t\tcurrentColumn.startX = currentColumn.endX;\r\n\t\t\t\tcurrentColumn.endX += columns[i].width;\r\n\r\n\t\t\t\t// if drop on a column or drop after the last column\r\n\t\t\t\tif (relativeX >= currentColumn.startX && (relativeX <= currentColumn.endX || !compare(next(i), end))) {\r\n\t\t\t\t\ttargetIndex = i;\r\n\t\t\t\t\txBefore = currentColumn.startX;\r\n\t\t\t\t\txAfter = currentColumn.endX;\r\n\t\t\t\t\tcolumnRelativePos = (relativeX - currentColumn.startX) / (currentColumn.endX - currentColumn.startX);\r\n\t\t\t\t}\r\n\t\t\t\tif (draggedId === columns[i].name) {\r\n\t\t\t\t\tdraggedIndex = i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttargetIndex,\r\n\t\t\tdraggedIndex,\r\n\t\t\txBefore,\r\n\t\t\txAfter,\r\n\t\t\tcolumnRelativePos\r\n\t\t};\r\n\t}\r\n\tsetMarkerPosition(x: number, y: number = 10) {\r\n\t\tconst { marker } = this._dnd.config;\r\n\t\tconst gridOffset = this._dnd._obj.getBoundingClientRect();\r\n\t\tmarker.style.top = `${gridOffset.y + y}px`;\r\n\t\tmarker.style.left = `${x}px`;\r\n\t}\r\n\tcalculateCurrentPosition = (eventX: number) => {\r\n\t\tconst gridBoundingRect = this.$grid.$grid.getBoundingClientRect();\r\n\t\tconst maxLeft = gridBoundingRect.right;\r\n\t\tconst minLeft = gridBoundingRect.left;\r\n\t\tlet x = eventX;\r\n\t\tif (x > maxLeft) {\r\n\t\t\tx = maxLeft;\r\n\t\t}\r\n\t\tif (x < minLeft) {\r\n\t\t\tx = minLeft;\r\n\t\t}\r\n\t\treturn x;\r\n\t};\r\n\tdrawTargetMarker({ targetIndex, draggedIndex, xBefore, xAfter, columnRelativePos }) {\r\n\t\tif (!this._targetMarker) {\r\n\t\t\tthis._targetMarker = document.createElement(\"div\");\r\n\t\t\tdomHelpers.addClassName(this._targetMarker, \"gantt_grid_target_marker\");\r\n\t\t\tthis._targetMarker.style.display = \"none\";\r\n\t\t\tthis._targetMarker.style.height = `${this._gridConfig.scale_height}px`;\r\n\t\t}\r\n\r\n\t\t// marker can be detached after gantt.render\r\n\t\tif(!this._targetMarker.parentNode){\r\n\t\t\tthis.$grid.$grid_scale.appendChild(this._targetMarker);\r\n\t\t}\r\n\r\n\t\tlet nextPosition: number;\r\n\t\tif (targetIndex > draggedIndex) {\r\n\t\t\tnextPosition = xAfter;\r\n\t\t} else if (targetIndex < draggedIndex) {\r\n\t\t\tnextPosition = xBefore;\r\n\t\t} else {\r\n\t\t\tif(columnRelativePos > 0.5){\r\n\t\t\t\tnextPosition = xAfter;\r\n\t\t\t}else{\r\n\t\t\t\tnextPosition = xBefore;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._targetMarker.style.left = `${nextPosition}px`;\r\n\t\tthis._targetMarker.style.display = \"block\";\r\n\t}\r\n\tcleanTargetMarker() {\r\n\t\tif (this._targetMarker && this._targetMarker.parentNode) {\r\n\t\t\tthis.$grid.$grid_scale.removeChild(this._targetMarker);\r\n\t\t}\r\n\t\tthis._targetMarker = null;\r\n\t}\r\n}","function create(gantt){\r\n\tvar events = [];\r\n\r\n\treturn {\r\n\t\tdelegate:function(event, className, handler, root) {\r\n\t\t\tevents.push([event, className, handler, root]);\r\n\r\n\t\t\tvar helper = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\thelper.delegate(event, className, handler, root);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\tfor(var i = 0; i < events.length; i++){\r\n\t\t\t\tvar h = events[i];\r\n\t\t\t\tmouseEvents.detach(h[0], h[1], h[2], h[3]);\r\n\t\t\t}\r\n\t\t\tevents = [];\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport default create;","import * as domHelpers from \"../utils/dom_helpers\";\r\nimport * as utils from \"../../../utils/utils\";\r\nimport eventable from \"../../../utils/eventable\";\r\nimport gridResize from \"./grid_resize\";\r\nimport topPositionMixin from \"../row_position_mixin\";\r\nimport rowResize from \"./task_grid_row_resize\";\r\n\r\nimport ColumnDnd from \"../plugins/column_grid_dnd\";\r\n\r\nimport mouseEventContainer from \"../mouse_event_container\";\r\n\r\nvar Grid = function (parent, config, factory, gantt) {\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$gantt = gantt;\r\n\tthis.$parent = parent;\r\n\teventable(this);\r\n\tthis.$state = {};\r\n\tutils.mixin(this, topPositionMixin(this));\r\n};\r\n\r\n\r\nGrid.prototype = {\r\n\tinit: function(container) {\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar gridAriaAttr = gantt._waiAria.gridAttrString();\r\n\t\tvar gridDataAriaAttr = gantt._waiAria.gridDataAttrString();\r\n\t\tvar _ganttConfig = this.$getConfig();\r\n\t\tvar reorderColumns = _ganttConfig.reorder_grid_columns || false;\r\n\t\tif (this.$config.reorder_grid_columns !== undefined) {\r\n\t\t\treorderColumns = this.$config.reorder_grid_columns;\r\n\t\t}\r\n\r\n\r\n\t\tcontainer.innerHTML = \"<div class='gantt_grid' style='height:inherit;width:inherit;' \" + gridAriaAttr + \"></div>\";\r\n\t\tthis.$grid = container.childNodes[0];\r\n\r\n\t\tthis.$grid.innerHTML = \"<div class='gantt_grid_scale' \" +\r\n\t\t\tgantt._waiAria.gridScaleRowAttrString() + \"></div><div class='gantt_grid_data' \" + gridDataAriaAttr + \"></div>\";\r\n\r\n\t\tthis.$grid_scale = this.$grid.childNodes[0];\r\n\t\tthis.$grid_data = this.$grid.childNodes[1];\r\n\r\n\t\tvar attr = _ganttConfig[this.$config.bind + \"_attribute\"];\r\n\t\tif (!attr && this.$config.bind) {\r\n\t\t\tattr = \"data-\" + this.$config.bind + \"-id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\r\n\t\tif (!this.$config.layers) {\r\n\t\t\tvar layers = this._createLayerConfig();\r\n\t\t\tthis.$config.layers = layers;\r\n\t\t}\r\n\r\n\t\tvar resizer = gridResize(gantt, this);\r\n\t\tresizer.init();\r\n\t\tthis._renderHeaderResizers = resizer.doOnRender;\r\n\t\tthis._mouseDelegates = mouseEventContainer(gantt);\r\n\r\n\t\tvar resizerrow = rowResize(gantt, this);\r\n\t\tresizerrow.init();\r\n\r\n\t\tthis._addLayers(this.$gantt);\r\n\t\tthis._initEvents();\r\n\r\n\t\tif (reorderColumns) {\r\n\t\t\tthis._columnDND = new ColumnDnd(gantt, this);\r\n\t\t\tthis._columnDND.init();\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t},\r\n\r\n\t_validateColumnWidth: function (column, property) {\r\n\t\t// user can set {name:\"text\", width:\"200\",...} for some reason,\r\n\t\t// check and convert it to number when possible\r\n\t\tvar value = column[property];\r\n\t\tif (value && value != \"*\") {\r\n\t\t\tvar gantt = this.$gantt;\r\n\t\t\tvar numericWidth = value * 1;\r\n\t\t\tif (isNaN(numericWidth)) {\r\n\t\t\t\tgantt.assert(false, \"Wrong \" + property + \" value of column \" + column.name);\r\n\t\t\t} else {\r\n\t\t\t\tcolumn[property] = numericWidth;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tsetSize: function (width, height) {\r\n\t\tthis.$config.width = this.$state.width = width;\r\n\t\tthis.$config.height = this.$state.height = height;\r\n\r\n\t\t// TODO: maybe inherit and override in a subclass instead of extending here\r\n\r\n\t\tvar columns = this.getGridColumns(),\r\n\t\t\tinnerWidth = 0;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar elasticColumns = config.grid_elastic_columns;\r\n\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tthis._validateColumnWidth(columns[i], \"min_width\");\r\n\t\t\tthis._validateColumnWidth(columns[i], \"max_width\");\r\n\t\t\tthis._validateColumnWidth(columns[i], \"width\");\r\n\r\n\t\t\tinnerWidth += columns[i].width * 1;\r\n\t\t}\r\n\r\n\t\tvar outerWidth;\r\n\t\tif (isNaN(innerWidth) || !this.$config.scrollable) {\r\n\t\t\touterWidth = this._setColumnsWidth(width + 1);\r\n\t\t\tinnerWidth = outerWidth;\r\n\t\t}\r\n\r\n\t\tif(this.$config.scrollable && elasticColumns && !isNaN(innerWidth)){\r\n\t\t\t// GS-1352: Allow resizing the grid columns, then the grid width is increased\r\n\t\t\t// or keep the grid width, but don't allow column resize to affect the grid width\r\n\t\t\tlet columnProperty = \"width\";\r\n\t\t\tif (elasticColumns == \"min_width\"){\r\n\t\t\t\tcolumnProperty = \"min_width\";\r\n\t\t\t}\r\n\t\t\tlet newColumnWidth = 0;\r\n\t\t\tcolumns.forEach(function(col){\r\n\t\t\t\tnewColumnWidth += col[columnProperty] || config.min_grid_column_width;\r\n\t\t\t});\r\n\t\t\t//newColumnWidth--; // the total column width shouldn't match the outerWidth // GS-2190 reducing width seems to be not needed\r\n\t\t\tvar columnsWidth = Math.max(newColumnWidth, width);\r\n\t\t\tinnerWidth = this._setColumnsWidth(columnsWidth);\r\n\t\t\touterWidth = width;\r\n\t\t}\r\n\r\n\t\tif (this.$config.scrollable) {\r\n\t\t\tthis.$grid_scale.style.width = innerWidth + \"px\";\r\n\t\t\tthis.$grid_data.style.width = innerWidth + \"px\";\r\n\t\t} else {\r\n\t\t\tthis.$grid_scale.style.width = \"inherit\";\r\n\t\t\tthis.$grid_data.style.width = \"inherit\";\r\n\t\t}\r\n\t\tthis.$config.width -= 1;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif (outerWidth !== width) {\r\n\t\t\tif(outerWidth !== undefined){\r\n\t\t\t\tconfig.grid_width = outerWidth;\r\n\t\t\t\tthis.$config.width = outerWidth - 1;\r\n\t\t\t}else{\r\n\t\t\t\tif(!isNaN(innerWidth)){\r\n\t\t\t\t\tthis._setColumnsWidth(innerWidth);\r\n\t\t\t\t\tconfig.grid_width = innerWidth;\r\n\t\t\t\t\tthis.$config.width = innerWidth - 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar dataHeight = Math.max(this.$state.height - config.scale_height, 0);\r\n\t\tthis.$grid_data.style.height = dataHeight + \"px\";\r\n\t\tthis.refresh();\r\n\t},\r\n\tgetSize: function () {\r\n\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar store = this.$config.rowStore;\r\n\r\n\t\tvar contentHeight = store ? this.getTotalHeight() : 0,\r\n\t\t\tcontentWidth = this._getGridWidth();\r\n\r\n\t\tvar size = {\r\n\t\t\tx: this.$state.width,\r\n\t\t\ty: this.$state.height,\r\n\t\t\tcontentX: this.isVisible() ? contentWidth : 0,\r\n\t\t\tcontentY: this.isVisible() ? (config.scale_height + contentHeight) : 0,\r\n\t\t\tscrollHeight: this.isVisible() ? contentHeight : 0,\r\n\t\t\tscrollWidth: this.isVisible() ? contentWidth : 0\r\n\t\t};\r\n\r\n\t\treturn size;\r\n\t},\r\n\r\n\t_bindStore: function () {\r\n\t\tif (this.$config.bind){\r\n\t\t\tvar rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\t\t\tthis.$config.rowStore = rowStore;\r\n\t\t\tif(rowStore && !rowStore._gridCacheAttached){\r\n\t\t\t\tvar self = this;\r\n\t\t\t\trowStore._gridCacheAttached = rowStore.attachEvent(\"onBeforeFilter\", function(){\r\n\t\t\t\t\tself._resetTopPositionHeight();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_unbindStore: function(){\r\n\t\tif (this.$config.bind){\r\n\t\t\tvar rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\t\t\tif(rowStore && rowStore._gridCacheAttached){\r\n\t\t\t\trowStore.detachEvent(rowStore._gridCacheAttached);\r\n\t\t\t\trowStore._gridCacheAttached = false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\trefresh: function () {\r\n\t\tthis._bindStore();\r\n\r\n\t\tthis._resetTopPositionHeight();\r\n\t\tthis._resetHeight();\r\n\t\tthis._initSmartRenderingPlaceholder();\r\n\r\n\t\tthis._calculateGridWidth();\r\n\t\tthis._renderGridHeader();\r\n\t},\r\n\r\n\tgetViewPort: function(){\r\n\t\tvar scrollLeft = this.$config.scrollLeft || 0;\r\n\t\tvar scrollTop = this.$config.scrollTop || 0;\r\n\t\tvar height = this.$config.height || 0;\r\n\t\tvar width = this.$config.width || 0;\r\n\t\treturn {\r\n\t\t\ty: scrollTop,\r\n\t\t\ty_end: scrollTop + height,\r\n\t\t\tx: scrollLeft,\r\n\t\t\tx_end: scrollLeft + width,\r\n\t\t\theight: height,\r\n\t\t\twidth: width\r\n\t\t};\r\n\t},\r\n\r\n\tscrollTo: function (left, top) {\r\n\t\tif (!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tvar scrolled = false;\r\n\r\n\t\tthis.$config.scrollTop = this.$config.scrollTop || 0;\r\n\t\tthis.$config.scrollLeft = this.$config.scrollLeft || 0;\r\n\r\n\t\tif (left * 1 == left) {\r\n\t\t\tthis.$config.scrollLeft = this.$state.scrollLeft = this.$grid.scrollLeft = left;\r\n\t\t\tscrolled = true;\r\n\t\t}\r\n\r\n\t\t// var config = this.$getConfig();\r\n\t\tif (top * 1 == top) {\r\n\t\t\tthis.$config.scrollTop = this.$state.scrollTop = this.$grid_data.scrollTop = top;\r\n\t\t\tscrolled = true;\r\n\t\t}\r\n\r\n\t\tif(scrolled){\r\n\t\t\tthis.callEvent(\"onScroll\", [this.$config.scrollLeft, this.$config.scrollTop]);\r\n\t\t}\r\n\t},\r\n\r\n\tgetColumnIndex: function (name, excludeHidden) {\r\n\t\tvar columns = this.$getConfig().columns;\r\n\t\tvar hiddenIndexShift = 0;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\t// GS-1257. If the cell is hidden, the target column index should be correct\r\n\t\t\tif (excludeHidden && columns[i].hide){\r\n\t\t\t\thiddenIndexShift++;\r\n\t\t\t}\r\n\t\t\tif (columns[i].name == name) {\r\n\t\t\t\treturn i - hiddenIndexShift;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\tgetColumn: function (name) {\r\n\t\tvar index = this.getColumnIndex(name);\r\n\t\tif (index === null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn this.$getConfig().columns[index];\r\n\t},\r\n\r\n\tgetGridColumns: function () {\r\n\t\tvar config = this.$getConfig();\r\n\t\treturn config.columns.slice();\r\n\t},\r\n\tisVisible: function () {\r\n\t\tif (this.$parent && this.$parent.$config) {\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t} else {\r\n\t\t\treturn this.$grid.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\t// getItemHeight: function () {\r\n\t// \tvar config = this.$getConfig();\r\n\t// \treturn config.row_height;\r\n\t// },\r\n\r\n\t_createLayerConfig: function () {\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar self = this;\r\n\t\tvar layers = [\r\n\t\t\t{\r\n\t\t\t\trenderer: gantt.$ui.layers.gridLine(),\r\n\t\t\t\tcontainer: this.$grid_data,\r\n\t\t\t\tfilter: [function () {\r\n\t\t\t\t\treturn self.isVisible();\r\n\t\t\t\t}]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\trenderer: gantt.$ui.layers.gridTaskRowResizer(),\r\n\t\t\t\tcontainer: this.$grid_data,\r\n\t\t\t\tappend: true,\r\n\t\t\t\tfilter: [function () {\r\n\t\t\t\t\treturn gantt.config.resize_rows;\r\n\t\t\t\t}]\r\n\t\t\t}\r\n\t\t];\r\n\t\treturn layers;\r\n\t},\r\n\r\n\t_addLayers: function (gantt) {\r\n\t\tif (!this.$config.bind)\r\n\t\t\treturn;\r\n\r\n\t\tthis._taskLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tif (!taskRenderer) {\r\n\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\tname: this.$config.bind,\r\n\t\t\t\tdefaultContainer: function () { return self.$grid_data; }\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar taskLayers = this.$config.layers;\r\n\t\tfor (var i = 0; taskLayers && i < taskLayers.length; i++) {\r\n\t\t\tvar layer = taskLayers[i];\r\n\t\t\tlayer.view = this;\r\n\r\n\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t}\r\n\r\n\t\tthis._bindStore();\r\n\r\n\t\tthis._initSmartRenderingPlaceholder();\r\n\t},\r\n\r\n\t_refreshPlaceholderOnStoreUpdate: function (id) {\r\n\t\tvar config = this.$getConfig(),\r\n\t\t\tstore = this.$config.rowStore;\r\n\r\n\t\tif (!store || id !== null || !this.isVisible() || !config.smart_rendering) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar contentHeight;\r\n\t\tif (this.$config.scrollY) {\r\n\t\t\tvar scroll = this.$gantt.$ui.getView(this.$config.scrollY);\r\n\t\t\tif (scroll)\r\n\t\t\t\tcontentHeight = scroll.getScrollState().scrollSize;\r\n\t\t}\r\n\r\n\t\tif (!contentHeight) {\r\n\t\t\tcontentHeight = store ? this.getTotalHeight() : 0;\r\n\t\t}\r\n\r\n\t\tif (contentHeight) {\r\n\t\t\tif (this.$rowsPlaceholder && this.$rowsPlaceholder.parentNode) {\r\n\t\t\t\tthis.$rowsPlaceholder.parentNode.removeChild(this.$rowsPlaceholder);\r\n\t\t\t}\r\n\r\n\t\t\tvar placeholder = this.$rowsPlaceholder = document.createElement(\"div\");\r\n\t\t\tplaceholder.style.visibility = \"hidden\";\r\n\t\t\tplaceholder.style.height = contentHeight + \"px\";\r\n\t\t\tplaceholder.style.width = \"1px\";\r\n\t\t\tthis.$grid_data.appendChild(placeholder);\r\n\t\t}\r\n\t},\r\n\r\n\t_initSmartRenderingPlaceholder: function () {\r\n\t\tvar store = this.$config.rowStore;\r\n\t\tif (!store) {\r\n\t\t\treturn;\r\n\t\t} else {\r\n\t\t\tthis._initSmartRenderingPlaceholder = function () { };\r\n\t\t}\r\n\t\tthis._staticBgHandler = store.attachEvent(\"onStoreUpdated\", utils.bind(this._refreshPlaceholderOnStoreUpdate, this));\r\n\t},\r\n\r\n\t_initEvents: function () {\r\n\t\tvar gantt = this.$gantt;\r\n\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_close\", gantt.bind(function (e, id, trg) {\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif (!store) return true;\r\n\r\n\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\tif (target) {\r\n\t\t\t\tstore.close(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}, this), this.$grid);\r\n\r\n\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_open\", gantt.bind(function (e, id, trg) {\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif (!store) return true;\r\n\r\n\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\tif (target) {\r\n\t\t\t\tstore.open(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}, this), this.$grid);\r\n\t},\r\n\r\n\t_clearLayers: function (gantt) {\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tif (this._taskLayers) {\r\n\t\t\tfor (var i = 0; i < this._taskLayers.length; i++) {\r\n\t\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_getColumnWidth: function (column, config, width) {\r\n\t\tvar min_width = column.min_width || config.min_grid_column_width;\r\n\t\tvar new_width = Math.max(width, min_width || 10);\r\n\t\tif (column.max_width)\r\n\t\t\tnew_width = Math.min(new_width, column.max_width);\r\n\t\treturn new_width;\r\n\t},\r\n\t// set min width only if width < than config.min_grid_column_width\r\n\t_checkGridColumnMinWidthLimits: function (columns, config) {\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tvar width = columns[i].width * 1;\r\n\t\t\tif (!columns[i].min_width && width < config.min_grid_column_width){\r\n\t\t\t\tcolumns[i].min_width = width;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t// return min and max possible grid width according to restricts\r\n\t_getGridWidthLimits: function () {\r\n\t\tvar config = this.$getConfig(),\r\n\t\t\tcolumns = this.getGridColumns(),\r\n\t\t\tmin_limit = 0,\r\n\t\t\tmax_limit = 0;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tmin_limit += columns[i].min_width ? columns[i].min_width : config.min_grid_column_width;\r\n\t\t\tif (max_limit !== undefined) {\r\n\t\t\t\tmax_limit = columns[i].max_width ? (max_limit + columns[i].max_width) : undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._checkGridColumnMinWidthLimits(columns, config); // FIX ME: should it be before calculating limits?\r\n\t\treturn [min_limit, max_limit];\r\n\t},\r\n\t// resize columns to get total newWidth, starting from columns[start_index]\r\n\t_setColumnsWidth: function (newWidth, start_index) {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns(),\r\n\t\t\tcolumns_width = 0,\r\n\t\t\tfinal_width = newWidth;\r\n\r\n\t\tstart_index = !window.isNaN(start_index) ? start_index : -1;\r\n\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tcolumns_width += columns[i].width * 1;\r\n\t\t}\r\n\r\n\t\tif (window.isNaN(columns_width)) {\r\n\t\t\tthis._calculateGridWidth();\r\n\t\t\tcolumns_width = 0;\r\n\t\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\t\tcolumns_width += columns[i].width * 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar extra_width = final_width - columns_width;\r\n\r\n\t\tvar start_width = 0;\r\n\t\tfor (var i = 0; i < start_index + 1; i++) {\r\n\t\t\tstart_width += columns[i].width;\r\n\t\t}\r\n\r\n\t\tcolumns_width -= start_width;\r\n\r\n\t\tfor (var i = start_index + 1; i < columns.length; i++) {\r\n\r\n\t\t\tvar col = columns[i];\r\n\t\t\tvar share = Math.round(extra_width * (col.width / columns_width));\r\n\r\n\t\t\t// columns have 2 additional restrict fields - min_width & max_width that are set by user\r\n\t\t\tif (extra_width < 0) {\r\n\t\t\t\tif (col.min_width && col.width + share < col.min_width)\r\n\t\t\t\t\tshare = col.min_width - col.width;\r\n\t\t\t\telse if (!col.min_width && config.min_grid_column_width && col.width + share < config.min_grid_column_width)\r\n\t\t\t\t\tshare = config.min_grid_column_width - col.width;\r\n\t\t\t} else if (col.max_width && col.width + share > col.max_width)\r\n\t\t\t\tshare = col.max_width - col.width;\r\n\r\n\t\t\tcolumns_width -= col.width;\r\n\t\t\tcol.width += share;\r\n\t\t\textra_width -= share;\r\n\r\n\t\t}\r\n\r\n\t\tvar iterator = extra_width > 0 ? 1 : -1;\r\n\t\twhile ((extra_width > 0 && iterator === 1) || (extra_width < 0 && iterator === -1)) {\r\n\t\t\tvar curExtra = extra_width;\r\n\t\t\tfor (i = start_index + 1; i < columns.length; i++) {\r\n\t\t\t\tvar new_width = columns[i].width + iterator;\r\n\r\n\t\t\t\tif (new_width == this._getColumnWidth(columns[i], config, new_width)) {\r\n\t\t\t\t\textra_width -= iterator;\r\n\t\t\t\t\tcolumns[i].width = new_width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!extra_width)\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (curExtra == extra_width)\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// if impossible to resize the right-side columns, resize the start column\r\n\t\tif (extra_width && start_index > -1) {\r\n\t\t\tvar new_width = columns[start_index].width + extra_width;\r\n\t\t\tif (new_width == this._getColumnWidth(columns[start_index], config, new_width))\r\n\t\t\t\tcolumns[start_index].width = new_width;\r\n\t\t}\r\n\r\n\t\t//if (this.callEvent(\"onGridResizeEnd\", [config.grid_width, final_width]) === false)\r\n\t\t//\treturn;\r\n\r\n\t\treturn this._getColsTotalWidth();\r\n\t},\r\n\r\n\t_getColsTotalWidth: function () {\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\t\treturn cols_width;\r\n\t},\r\n\t_calculateGridWidth: function () {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\t\tvar unknown = [];\r\n\t\tvar width = [];\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\tv = config.min_grid_column_width || 10;\r\n\t\t\t\tunknown.push(i);\r\n\t\t\t}\r\n\t\t\twidth[i] = v;\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\t\tvar gridWidth = this._getGridWidth() + 1;\r\n\t\tif (config.autofit || unknown.length) {\r\n\t\t\tvar diff = gridWidth - cols_width;\r\n\t\t\t// TODO: logic may be improved for proportional changing of width\r\n\r\n\t\t\t// autofit adjusts columns widths to the outer grid width\r\n\t\t\t// it doesn't makes sense if grid has inner scroll with elastic columns\r\n\t\t\tif (config.autofit && !config.grid_elastic_columns) {\r\n\t\t\t\t// delta must be added for all columns\r\n\t\t\t\tfor (var i = 0; i < width.length; i++) {\r\n\t\t\t\t\tvar delta = Math.round(diff / (width.length - i));\r\n\t\t\t\t\twidth[i] += delta;\r\n\t\t\t\t\tvar new_width = this._getColumnWidth(columns[i], config, width[i]);\r\n\r\n\t\t\t\t\tif (new_width != width[i]) {\r\n\t\t\t\t\t\tdelta = new_width - width[i];\r\n\t\t\t\t\t\twidth[i] = new_width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdiff -= delta;\r\n\t\t\t\t}\r\n\t\t\t} else if (unknown.length) {\r\n\t\t\t\t// there are several columns with undefined width\r\n\t\t\t\tfor (var i = 0; i < unknown.length; i++) {\r\n\t\t\t\t\tvar delta = Math.round(diff / (unknown.length - i)); // no float values, just integer\r\n\t\t\t\t\tvar index = unknown[i];\r\n\t\t\t\t\twidth[index] += delta;\r\n\t\t\t\t\tvar new_width = this._getColumnWidth(columns[index], config, width[index]);\r\n\t\t\t\t\tif (new_width != width[index]) {\r\n\t\t\t\t\t\tdelta = new_width - width[index];\r\n\t\t\t\t\t\twidth[index] = new_width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdiff -= delta;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < width.length; i++) {\r\n\t\t\t\tcolumns[i].width = width[i];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar changed = (gridWidth != cols_width);\r\n\t\t\tthis.$config.width = cols_width - 1;\r\n\t\t\tconfig.grid_width = cols_width;\r\n\t\t\tif (changed) {\r\n\t\t\t\tthis.$parent._setContentSize(this.$config.width, null);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_renderGridHeader: function () {\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar locale = this.$gantt.locale;\r\n\t\tvar templates = this.$gantt.templates;\r\n\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tif (config.rtl) {\r\n\t\t\tcolumns = columns.reverse();\r\n\t\t}\r\n\t\tvar cells = [];\r\n\t\tvar width = 0,\r\n\t\t\tlabels = locale.labels;\r\n\r\n\t\tvar lineHeigth = config.scale_height - 1;\r\n\r\n\t\tconst renderableComponents = {};\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\r\n\t\t\t// ensure columns have non-empty names\r\n\t\t\tif (!col.name) {\r\n\t\t\t\tcol.name = gantt.uid() + \"\";\r\n\t\t\t}\r\n\r\n\t\t\tvar colWidth = col.width * 1;\r\n\r\n\t\t\tvar gridWidth = this._getGridWidth();\r\n\t\t\tif (last && gridWidth > width + colWidth)\r\n\t\t\t\tcol.width = colWidth = gridWidth - width;\r\n\t\t\twidth += colWidth;\r\n\t\t\tvar sort = (gantt._sort && col.name == gantt._sort.name) ? (`<div data-column-id=\"${col.name}\" class=\"gantt_sort gantt_${gantt._sort.direction}\"></div>`) : \"\";\r\n\t\t\tvar cssClass = [\"gantt_grid_head_cell\",\r\n\t\t\t\t(\"gantt_grid_head_\" + col.name),\r\n\t\t\t\t(last ? \"gantt_last_cell\" : \"\"),\r\n\t\t\t\ttemplates.grid_header_class(col.name, col)].join(\" \");\r\n\r\n\t\t\tvar style = \"width:\" + (colWidth - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tvar label = (col.label || labels[\"column_\" + col.name] || labels[col.name]);\r\n\t\t\tif(typeof label === \"function\"){\r\n\t\t\t\tlabel = label.call(gantt, col.name, col);\r\n\t\t\t}\r\n\t\t\tlabel = label || \"\";\r\n\t\t\tlet componentLabel = false;\r\n\t\t\tif(gantt.config.external_render && gantt.config.external_render.isElement(label)){\r\n\t\t\t\tcomponentLabel = true;\r\n\t\t\t\trenderableComponents[col.name] = label;\r\n\t\t\t}\r\n\r\n\t\t\tvar ariaAttrs = gantt._waiAria.gridScaleCellAttrString(col, label);\r\n\r\n\t\t\tvar cell = \"<div class='\" + cssClass + \"' style='\" + style + \"' \" + ariaAttrs + \r\n\t\t\t\t\" data-column-id='\" + col.name + \"' column_id='\" + col.name + \"'\" +\r\n\t\t\t\t\" data-column-name='\" + col.name + \"' data-column-index='\" + i + \"'\" +\r\n\t\t\t\t\">\" + (!componentLabel ? label : \"<div data-component-container></div>\") + sort + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\tthis.$grid_scale.style.height = (config.scale_height) + \"px\";\r\n\t\tthis.$grid_scale.style.lineHeight = lineHeigth + \"px\";\r\n\t\t//this.$grid_scale.style.width = \"inherit\";\r\n\t\tthis.$grid_scale.innerHTML = cells.join(\"\");\r\n\t\tfor(let i in renderableComponents){\r\n\t\t\tgantt.config.external_render.renderElement(renderableComponents[i], this.$grid_scale.querySelector(\"[data-column-id='\" + i + \"'] [data-component-container]\"));\r\n\t\t}\r\n\r\n\t\tif (this._renderHeaderResizers) {\r\n\t\t\tthis._renderHeaderResizers();\r\n\t\t}\r\n\t},\r\n\r\n\t_getGridWidth: function () {\r\n\t\t// TODO: refactor/remove/comment some of _getGridWidth/this.$config.width/this.$state.width, it's not clear what they do\r\n\t\treturn this.$config.width;\r\n\t},\r\n\r\n\tdestructor: function () {\r\n\t\tthis._clearLayers(this.$gantt);\r\n\t\tif (this._mouseDelegates) {\r\n\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\tthis._mouseDelegates = null;\r\n\t\t}\r\n\t\tthis._unbindStore();\r\n\t\tthis.$grid = null;\r\n\t\tthis.$grid_scale = null;\r\n\t\tthis.$grid_data = null;\r\n\t\tthis.$gantt = null;\r\n\t\tif (this.$config.rowStore) {\r\n\t\t\tthis.$config.rowStore.detachEvent(this._staticBgHandler);\r\n\t\t\tthis.$config.rowStore = null;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t}\r\n};\r\n\r\nexport default Grid;\r\n","import * as helpers from \"../../utils/helpers\";\r\n\r\nfunction clearTaskStoreHandler(self) {\r\n\tif (self._delayRender) {\r\n\t\tself._delayRender.$cancelTimeout();\r\n\t}\r\n\r\n\tif (!self.$gantt) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar tasks = self.$gantt.$data.tasksStore;\r\n\tvar ownStore = self.$config.rowStore;\r\n\r\n\tvar handlerIdProperty = \"_attached_\" + ownStore.$config.name;\r\n\tif (self[handlerIdProperty]) {\r\n\t\ttasks.detachEvent(self[handlerIdProperty]);\r\n\t\tself[handlerIdProperty] = null;\r\n\t}\r\n\r\n\tif (ownStore.$attachedResourceViewHandler) {\r\n\t\townStore.detachEvent(ownStore.$attachedResourceViewHandler);\r\n\t\townStore.$attachedResourceViewHandler = null;\r\n\r\n\t\ttasks.detachEvent(ownStore.$attachedTaskStoreHandler);\r\n\t\townStore.$attachedTaskStoreHandler = null;\r\n\t}\r\n}\r\n\r\nfunction createMixin(_super){\r\n\r\n\tvar initGrid = _super.prototype.init,\r\n\t\tdestroyGrid = _super.prototype.destructor;\r\n\r\n\treturn {\r\n\t\tinit: function() {\r\n\t\t\tinitGrid.apply(this, arguments);\r\n\t\t\tthis._linkToTaskStore();\r\n\t\t},\r\n\r\n\t\tdestructor: function() {\r\n\t\t\tclearTaskStoreHandler(this);\r\n\t\t\tdestroyGrid.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\tpreviousDragId: null,\r\n\t\trelevantResources: null,\r\n\r\n\t\t_linkToTaskStore: function () {\r\n\t\t\tif (this.$config.rowStore && this.$gantt.$data.tasksStore) {\r\n\t\t\t\tvar tasks = this.$gantt.$data.tasksStore;\r\n\t\t\t\tvar ownStore = this.$config.rowStore;\r\n\t\t\t\tclearTaskStoreHandler(this);\r\n\r\n\t\t\t\tvar self = this;\r\n\t\t\t\tvar delayRender = helpers.delay(function() {\r\n\t\t\t\t\tif (self.$gantt.getState().lightbox) {\r\n\t\t\t\t\t\tdelayRender();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst linkedStore = self.$config.rowStore;\r\n\r\n\t\t\t\t\t\t// Repaint only relevant resources for task drag\r\n\t\t\t\t\t\tconst repaintStack = self._getRelevantResources();\r\n\t\t\t\t\t\t// GS-2822: extra check for resource store\r\n\t\t\t\t\t\tif (repaintStack && linkedStore.$config.name === self.$gantt.config.resource_store){\r\n\t\t\t\t\t\t\tif (repaintStack == \"nothing_to_repaint\"){\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlinkedStore._quick_refresh = true;\r\n\t\t\t\t\t\t\tself.relevantResources.forEach(function(id){\r\n\t\t\t\t\t\t\t\tlinkedStore.refresh(id);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tlinkedStore._quick_refresh = false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// because rowstore could be changed during timeout\r\n\t\t\t\t\t\t\tlinkedStore.refresh();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 300);\r\n\t\t\t\tthis._delayRender = delayRender;\r\n\t\t\t\tvar handlerIdProperty = \"_attached_\" + ownStore.$config.name;\r\n\r\n\t\t\t\tif (!self[handlerIdProperty]) {\r\n\t\t\t\t\tself[handlerIdProperty] = tasks.attachEvent(\"onStoreUpdated\", function(){\r\n\t\t\t\t\t\tif(!delayRender.$pending && !this._skipResourceRepaint){\r\n\t\t\t\t\t\t\t// don't repaint if we update progress\r\n\t\t\t\t\t\t\tconst state = self.$gantt.getState();\r\n\t\t\t\t\t\t\tif (state.drag_mode == \"progress\"){\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t} else if (state.drag_mode && state.drag_id){\r\n\t\t\t\t\t\t\t\t// we need it here because if you started dragging a task and quickly stopped the drag_id is removed \r\n\t\t\t\t\t\t\t\t// from the state before we record it, so we cannot repaint only the relevant resources\r\n\t\t\t\t\t\t\t\tself.previousDragId = state.drag_id;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdelayRender();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.$gantt.attachEvent(\"onDestroy\", function() {\r\n\t\t\t\t\t// detach events to don't call delayed tasks\r\n\t\t\t\t\tclearTaskStoreHandler(self);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (!ownStore.$attachedResourceViewHandler) {\r\n\t\t\t\t\townStore.$attachedResourceViewHandler = ownStore.attachEvent(\"onBeforeFilter\", function() {\r\n\t\t\t\t\t\tif (self.$gantt.getState().lightbox) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (delayRender.$pending) {\r\n\t\t\t\t\t\t\tdelayRender.$cancelTimeout();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself._updateNestedTasks();\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\townStore.$attachedTaskStoreHandler = tasks.attachEvent(\"onAfterDelete\", function(){\r\n\t\t\t\t\t\townStore._mark_recompute = true;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_getRelevantResources: function (){\r\n\t\t\t// GS-2199. process_resource_assignments is disabled,\r\n\t\t\t// so we cannot get only the relevant assignment resources\r\n\t\t\tif (!this.$gantt.getTaskAssignments){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tconst state = this.$gantt.getState();\r\n\t\t\tconst linkedStore = this.$config.rowStore;\r\n\r\n\t\t\tlet resourceIds = [];\r\n\t\t\tif (state.drag_mode && state.drag_id && linkedStore.$config.name === this.$gantt.config.resource_store){\r\n\t\t\t\tif (this.previousDragId == state.drag_id){ // we continue dragging the task\r\n\t\t\t\t\tif (this.relevantResources) {\r\n\t\t\t\t\t\treturn this.relevantResources;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresourceIds = this._getIdsFromAssignments(this.previousDragId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse { // we started the task drag\r\n\t\t\t\t\tthis.previousDragId = state.drag_id;\r\n\t\t\t\t\tresourceIds = this._getIdsFromAssignments(this.previousDragId);\r\n\t\t\t\t}\r\n\t\t\t} else if (this.previousDragId){ // finished task drag, but the resources are still the same\r\n\t\t\t\tresourceIds = this._getIdsFromAssignments(this.previousDragId);\r\n\t\t\t\tthis.previousDragId = null;\r\n\t\t\t} else {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tif (!resourceIds.length){\r\n\t\t\t\treturn this.relevantResources = \"nothing_to_repaint\";\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tresourceIds.forEach(function(resourceId){\r\n\t\t\t\t//GS-2598: linkedstore could be a temp assignment store\r\n\t\t\t\tif(linkedStore.eachParent){\r\n\t\t\t\t\tlinkedStore.eachParent(function(parent){\r\n\t\t\t\t\t\tresourceIds.push(parent.id);\r\n\t\t\t\t\t}, resourceId);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treturn this.relevantResources = [...new Set(resourceIds)];\r\n\t\t},\r\n\r\n\t\t_getIdsFromAssignments: function(id){\r\n\t\t\tconst gantt = this.$gantt;\r\n\t\t\tconst resourceIds = [];\r\n\r\n\t\t\tconst task = gantt.getTask(id);\r\n\t\t\tlet assignments = gantt.getTaskAssignments(id);\r\n\t\t\tassignments.forEach(function(assignment){\r\n\t\t\t\tresourceIds.push(assignment.resource_id);\r\n\t\t\t});\r\n\r\n\t\t\t// get child assignments when dragging project task\r\n\t\t\tif (gantt.isSummaryTask(task) && gantt.config.drag_project) {\r\n\t\t\t\tgantt.eachTask(function(child){\r\n\t\t\t\t\tconst childAssignments = gantt.getTaskAssignments(child.id);\r\n\t\t\t\t\tchildAssignments.forEach(function(assignment){\r\n\t\t\t\t\t\tresourceIds.push(assignment.resource_id);\r\n\t\t\t\t\t});\r\n\t\t\t\t}, id);\r\n\t\t\t}\r\n\r\n\t\t\t// get assignments of other selected tasks\r\n\t\t\tif (gantt.config.drag_multiple && gantt.getSelectedTasks){\r\n\t\t\t\tconst selectedIds = gantt.getSelectedTasks();\r\n\t\t\t\tselectedIds.forEach(function(selectedId){\r\n\t\t\t\t\tconst selectedAssignments = gantt.getTaskAssignments(selectedId);\r\n\t\t\t\t\tselectedAssignments.forEach(function(assignment){\r\n\t\t\t\t\t\tresourceIds.push(assignment.resource_id);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn resourceIds;\r\n\t\t},\r\n\r\n\t\t_updateNestedTasks: function(){\r\n\t\t\tvar gantt = this.$gantt;\r\n\t\t\tvar resourceStore = gantt.getDatastore(gantt.config.resource_store);\r\n\t\t\tif (!resourceStore.$config.fetchTasks) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tresourceStore.silent(function(){\r\n\t\t\t\tvar toAddArray = [];\r\n\t\t\t\tvar toAdd = {};\r\n\t\t\t\tvar toDelete = {};\r\n\r\n\t\t\t\tresourceStore.eachItem(function(resource){\r\n\t\t\t\t\tif (resource.$role == \"task\") {\r\n\t\t\t\t\t\ttoDelete[resource.id] = true;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar assignments = gantt.getResourceAssignments(resource.id);\r\n\t\t\t\t\tvar addedTasks = {};\r\n\r\n\t\t\t\t\t// GS-1505. We need to sort assignments before updating tasks. \r\n\t\t\t\t\t// Iterating them without that will affect the order of featched tasks in the resource store\r\n\t\t\t\t\tassignments.sort(function (a, b) {\r\n\t\t\t\t\t\tconst resourceData = resourceStore.pull;\r\n\t\t\t\t\t\tconst resource1 = resourceData[`${a.task_id}_${a.resource_id}`];\r\n\t\t\t\t\t\tconst resource2 = resourceData[`${b.task_id}_${b.resource_id}`];\r\n\t\t\t\t\t\tif (resource1 && resource2) {\r\n\t\t\t\t\t\t\treturn resource1.$local_index - resource2.$local_index;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tassignments.forEach(function(a) {\r\n\t\t\t\t\t\tif(addedTasks[a.task_id] || !gantt.isTaskExists(a.task_id)){\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\taddedTasks[a.task_id] = true;\r\n\r\n\t\t\t\t\t\tvar task = gantt.getTask(a.task_id);\r\n\t\t\t\t\t\tvar copy;\r\n\t\t\t\t\t\t//GS-2711: deep copy from task\r\n\t\t\t\t\t\tif(resourceStore.$config.copyOnParse){\r\n\t\t\t\t\t\t\tcopy = gantt.copy(task);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcopy = Object.create(task);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcopy.id = task.id + '_' + resource.id;\r\n\r\n\t\t\t\t\t\tcopy.$task_id = task.id;\r\n\t\t\t\t\t\tcopy.$resource_id = resource.id;\r\n\t\t\t\t\t\tcopy[resourceStore.$parentProperty] = resource.id;\r\n\t\t\t\t\t\tcopy.$role = \"task\";\r\n\t\t\t\t\t\ttoAddArray.push(copy);\r\n\t\t\t\t\t\ttoAdd[copy.id] = true;\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tfor (var id in toDelete) {\r\n\t\t\t\t\tif (!toAdd[id]) {\r\n\t\t\t\t\t\tresourceStore.removeItem(id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(toAddArray.length){\r\n\t\t\t\t\tresourceStore.parse(toAddArray);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport default createMixin;","function createResizer(gantt, grid){\r\n\treturn {\r\n\t\tinit: function(){},\r\n\t\tdoOnRender: function(){}\r\n\t};\r\n}\r\n\r\nexport default createResizer;","import * as domHelpers from \"../utils/dom_helpers\";\r\n\r\nfunction createRowResizer(gantt, grid){\r\n\r\n\tvar _task_grid_row_resize = {\r\n\t\trow_before_start: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\t\t\tvar store = grid.$config.rowStore;\r\n\r\n\t\t\tvar el = domHelpers.locateAttribute(e, config.task_grid_row_resizer_attribute);\r\n\t\t\tif (!el) return false;\r\n\r\n\t\t\tvar row_id = this.locate(e, config.task_grid_row_resizer_attribute),\r\n\t\t\t\trow = store.getItem(row_id);\r\n\r\n\t\t\tif (grid.callEvent(\"onBeforeRowResize\", [row]) === false)\r\n\t\t\t\treturn false;\r\n\t\t}, gantt),\r\n\r\n\t\trow_after_start: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\tvar row_id = this.locate(e, config.task_grid_row_resizer_attribute);\r\n\t\t\tdnd.config.marker.innerHTML = \"\";\r\n\r\n\t\t\tdnd.config.marker.className += \" gantt_row_grid_resize_area\";\r\n\t\t\tdnd.config.marker.style.width = grid.$grid.offsetWidth + \"px\";\r\n\t\t\tdnd.config.drag_id = row_id;\r\n\r\n\t\t}, gantt),\r\n\r\n\t\trow_drag_move: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar store = grid.$config.rowStore;\r\n\t\t\tvar config = grid.$getConfig();\r\n\t\t\tvar dd = dnd.config;\r\n\t\t\tvar id = dd.drag_id,\r\n\t\t\t\titemHeight = grid.getItemHeight(id),\r\n\t\t\t\titemTop = grid.getItemTop(id) - obj.scrollTop;\r\n\t\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data),\r\n\t\t\t\tpointerPosition = parseInt(dd.marker.style.top, 10),\r\n\t\t\t\tmarkerStartPosition = itemTop + pos.y,\r\n\t\t\t\tmarker_height = 0,\r\n\t\t\t\tminPointerPosition = config.min_task_grid_row_height;\r\n\r\n\t\t\tmarker_height = pointerPosition - markerStartPosition;\r\n\t\t\tif(marker_height < minPointerPosition){\r\n\t\t\t\tmarker_height = minPointerPosition;\r\n\t\t\t}\r\n\r\n\t\t\tdd.marker.style.left = pos.x + \"px\";\r\n\t\t\tdd.marker.style.top = markerStartPosition - 1 + \"px\";\r\n\t\t\tdd.marker.style.height = Math.abs(marker_height) + 1 + \"px\";\r\n\r\n\t\t\tdd.marker_height = marker_height;\r\n\t\t\t\r\n\t\t\tgrid.callEvent(\"onRowResize\", [id, store.getItem(id), marker_height + itemHeight]);\r\n\t\t\treturn true;\r\n\t\t}, gantt),\r\n\r\n\t\trow_drag_end: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar store = grid.$config.rowStore;\r\n\t\t\tvar dd = dnd.config;\r\n\t\t\tvar id = dd.drag_id,\r\n\t\t\t\titem = store.getItem(id),\r\n\t\t\t\toldItemHeight = grid.getItemHeight(id);\r\n\r\n\t\t\tvar finalHeight = dd.marker_height;\r\n\r\n\t\t\tif (grid.callEvent(\"onBeforeRowResizeEnd\", [id, item, finalHeight]) === false)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (item.row_height == finalHeight)\r\n\t\t\t\treturn;\r\n\r\n\t\t\titem.row_height = finalHeight;\r\n\t\t\t// GS-2275: case for resizing resource grid row and others\r\n\t\t\tstore.updateItem(id);\r\n\t\t\tgrid.callEvent(\"onAfterRowResize\", [id, item, oldItemHeight, finalHeight]);\r\n\r\n\t\t\tthis.render();\r\n\t\t}, gantt)\r\n\t};\r\n\r\n\t// calls the initialization of the D'n'D events for resize elements\r\n\tvar _init_resize = function () {\r\n\r\n\t\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\t\tvar config = grid.$getConfig();\r\n\r\n\t\tvar dnd = new DnD(grid.$grid_data, {updates_per_second: 60});\r\n\t\tif (gantt.defined(config.dnd_sensitivity))\r\n\t\t\tdnd.config.sensitivity = config.dnd_sensitivity;\r\n\r\n\t\tdnd.attachEvent(\"onBeforeDragStart\", function (obj, e) {\r\n\t\t\treturn _task_grid_row_resize.row_before_start(dnd, obj, e);\r\n\t\t});\r\n\t\tdnd.attachEvent(\"onAfterDragStart\", function (obj, e) {\r\n\t\t\treturn _task_grid_row_resize.row_after_start(dnd, obj, e);\r\n\t\t});\r\n\t\tdnd.attachEvent(\"onDragMove\", function (obj, e) {\r\n\t\t\treturn _task_grid_row_resize.row_drag_move(dnd, obj, e);\r\n\t\t});\r\n\t\tdnd.attachEvent(\"onDragEnd\", function (obj, e) {\r\n\t\t\treturn _task_grid_row_resize.row_drag_end(dnd, obj, e);\r\n\t\t});\r\n\r\n\t};\r\n\r\n\treturn {\r\n\t\tinit: _init_resize\r\n\t};\r\n}\r\n\r\nexport default createRowResizer;","import domEventScope from \"../../ui/utils/dom_event_scope\";\r\nimport * as utils from \"../../../utils/utils\";\r\nimport resourceStoreMixin from \"../resource_store_mixin\";\r\nimport Grid from \"./grid\";\r\nimport __extends from \"../../../utils/extends\";\r\n\r\nconst GridRL = (function (_super) {\r\n\r\n\tfunction GridRL(parent, config, factory, gantt) {\r\n\t\treturn _super.apply(this, arguments) || this;\r\n\t}\r\n\r\n\t__extends(GridRL, _super);\r\n\r\n\tutils.mixin(GridRL.prototype, {\r\n\t\tinit: function(container) {\r\n\t\t\tconst gantt = this.$gantt;\r\n\t\t\tconst gridAriaAttr = gantt._waiAria.gridAttrString();\r\n\t\t\tconst gridDataAriaAttr = gantt._waiAria.gridDataAttrString();\r\n\t\t\tconst _ganttConfig = this.$getConfig();\r\n\t\t\t_ganttConfig.row_height = this._getResourceConfig().row_height ? this._getResourceConfig().row_height : gantt.resource_table.row_height ;\r\n\t\t\tlet reorderColumns = _ganttConfig.reorder_grid_columns || false;\r\n\t\t\tif (this.$config.reorder_grid_columns !== undefined) {\r\n\t\t\t\treorderColumns = this.$config.reorder_grid_columns;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.$config.bind === undefined){\r\n\t\t\t\tthis.$config.bind = \"temp_resource_assignment_store\";\r\n\t\t\t\tthis.$config.name = \"resource_grid_lightbox\";\r\n\t\t\t\tthis.$config.$id = \"GridRL\";\r\n\t\t\t}\r\n\r\n\t\t\tcontainer.innerHTML = \"<div class='gantt_grid' style='width:100%;' \" + gridAriaAttr + \"></div>\";\r\n\t\t\tthis.$grid = container.childNodes[0];\r\n\r\n\t\t\tthis.$grid.innerHTML = \"<div class='gantt_grid_scale' \" +\r\n\t\t\t\tgantt._waiAria.gridScaleRowAttrString() + \"></div><div class='gantt_grid_data' \" + gridDataAriaAttr + \"></div>\";\r\n\r\n\t\t\tthis.$grid_scale = this.$grid.childNodes[0];\r\n\t\t\tthis.$grid_data = this.$grid.childNodes[1];\r\n\r\n\t\t\tlet attr = _ganttConfig[this.$config.bind + \"_attribute\"];\r\n\t\t\tif (!attr && this.$config.bind) {\r\n\t\t\t\tattr = \"data-\" + this.$config.bind + \"-id\";\r\n\t\t\t}\r\n\t\t\tthis.$config.item_attribute = attr || null;\r\n\r\n\t\t\tif (!this.$config.layers) {\r\n\t\t\t\tconst layers = this._createLayerConfig();\r\n\t\t\t\tthis.$config.layers = layers;\r\n\t\t\t}\r\n\r\n\t\t\tconst domEvents = domEventScope();\r\n\t\t\tthis.event = domEvents.attach;\r\n\t\t\tthis.eventRemove = domEvents.detach;\r\n\t\t\tthis._eventRemoveAll = domEvents.detachAll;\r\n\t\t\tthis._createDomEventScope = domEvents.extend;\r\n\r\n\t\t\tthis._addLayers(this.$gantt);\r\n\r\n\t\t\tthis._initEvents();\r\n\r\n\t\t\tthis.callEvent(\"onReady\", []);\r\n\r\n\t\t},\r\n\t\tgetColumn: function (name) {\r\n\t\t\tconst index = this.getColumnIndex(name);\r\n\t\t\tif (index === null) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tconst columns = this._getResourceColumns();\r\n\t\t\treturn columns[index] || null;\r\n\t\t},\r\n\t\tgetColumnIndex: function (name, excludeHidden) {\r\n\t\t\tconst columns = this._getResourceColumns();\r\n\t\t\tlet hiddenIndexShift = 0;\r\n\r\n\t\t\tfor (let i = 0; i < columns.length; i++) {\r\n\t\t\t\t// GS-1257. If the cell is hidden, the target column index should be correct\r\n\t\t\t\tif (excludeHidden && columns[i].hide){\r\n\t\t\t\t\thiddenIndexShift++;\r\n\t\t\t\t}\r\n\t\t\t\tif (columns[i].name == name) {\r\n\t\t\t\t\treturn i - hiddenIndexShift;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetGridColumns: function(){\r\n\t\t\tconst columns = this._getResourceColumns();\r\n\t\t\tconst visibleColumns = [];\r\n\t\r\n\t\t\tfor (let i = 0; i < columns.length; i++) {\r\n\t\t\t\tif (!columns[i].hide)\r\n\t\t\t\t\tvisibleColumns.push(columns[i]);\r\n\t\t\t}\r\n\t\r\n\t\t\treturn visibleColumns;\r\n\t\t},\r\n\t\t_createLayerConfig: function () {\r\n\t\t\tconst gantt = this.$gantt;\r\n\t\t\tconst self = this;\r\n\t\t\tconst layers = [\r\n\t\t\t\t{\r\n\t\t\t\t\trenderer: gantt.$ui.layers.gridLine(),\r\n\t\t\t\t\tcontainer: this.$grid_data,\r\n\t\t\t\t\tfilter: [function () {\r\n\t\t\t\t\t\treturn self.isVisible();\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trenderer: gantt.$ui.layers.gridTaskRowResizer(),\r\n\t\t\t\t\tcontainer: this.$grid_data,\r\n\t\t\t\t\tappend: true,\r\n\t\t\t\t\tfilter: [function () {\r\n\t\t\t\t\t\treturn gantt.config.resize_rows;\r\n\t\t\t\t\t}]\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t\treturn layers;\r\n\t\t},\r\n\t\t_renderGridHeader: function () {\r\n\t\t\tconst gantt = this.$gantt;\r\n\t\t\tconst config = this._getResourceConfig();\r\n\t\t\tconst locale = this.$gantt.locale;\r\n\t\t\tconst templates = this.$getTemplates();\r\n\t\r\n\t\t\tlet columns = this._getResourceColumns();\r\n\t\t\tif (config.rtl) {\r\n\t\t\t\tcolumns = columns.reverse();\r\n\t\t\t}\r\n\t\t\tif(!config.scale_height){\r\n\t\t\t\tconfig.scale_height = gantt.resource_table.scale_height;\r\n\t\t\t}\r\n\t\t\tlet cells = [];\r\n\t\t\tlet width = 0,\r\n\t\t\t\tlabels = locale.labels;\r\n\t\r\n\t\t\t\tlet lineHeigth = config.scale_height - 1;\r\n\t\r\n\t\t\tfor (let i = 0; i < columns.length; i++) {\r\n\t\t\t\tlet last = i == columns.length - 1;\r\n\t\t\t\tlet col = columns[i];\r\n\t\r\n\t\t\t\t// ensure columns have non-empty names\r\n\t\t\t\tif (!col.name) {\r\n\t\t\t\t\tcol.name = gantt.uid() + \"\";\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tlet colWidth = col.width * 1;\r\n\t\r\n\t\t\t\tlet gridWidth = this._getGridWidth();\r\n\t\t\t\tif (last && gridWidth > width + colWidth)\r\n\t\t\t\t\tcol.width = colWidth = gridWidth - width;\r\n\t\t\t\twidth += colWidth;\r\n\t\t\t\tlet sort = (gantt._sort && col.name == gantt._sort.name) ? (`<div data-column-id=\"${col.name}\" class=\"gantt_sort gantt_${gantt._sort.direction}\"></div>`) : \"\";\r\n\t\t\t\tlet cssClass = [\"gantt_grid_head_cell\",\r\n\t\t\t\t\t(\"gantt_grid_head_\" + col.name),\r\n\t\t\t\t\t(last ? \"gantt_last_cell\" : \"\"),\r\n\t\t\t\t\ttemplates.grid_header_class ? templates.grid_header_class(col.name, col) : \"\"].join(\" \");\r\n\t\r\n\t\t\t\tlet style = \"width:\" + (colWidth - (last ? 1 : 0)) + \"px;\";\r\n\t\t\t\tlet label = (col.label || labels[\"column_\" + col.name] || labels[col.name]);\r\n\t\t\t\tlabel = label || \"\";\r\n\t\r\n\t\t\t\tconst ariaAttrs = gantt._waiAria.gridScaleCellAttrString(col, label);\r\n\t\r\n\t\t\t\tconst cell = \"<div class='\" + cssClass + \"' style='\" + style + \"' \" + ariaAttrs + \r\n\t\t\t\t\t\" data-column-id='\" + col.name + \"' column_id='\" + col.name + \"'\" +\r\n\t\t\t\t\t\" data-column-name='\" + col.name + \"' data-column-index='\" + i + \"'\" +\r\n\t\t\t\t\t\">\" + label + sort + \"</div>\";\r\n\t\t\t\tcells.push(cell);\r\n\t\t\t}\r\n\t\t\tthis.$grid_scale.style.height = (config.scale_height) + \"px\";\r\n\t\t\tthis.$grid_scale.style.lineHeight = lineHeigth + \"px\";\r\n\t\t\tthis.$grid_scale.style.width = \"inherit\";\r\n\t\t\tthis.$grid_scale.innerHTML = cells.join(\"\");\r\n\t\t},\r\n\t\tisVisible: function () {\r\n\t\t\tif (this.$parent) {\r\n\t\t\t\treturn !this.$parent.hidden;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.$grid.offsetWidth;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_initEvents: function(){\r\n\t\t},\r\n\t\t_getResourceSection: function(){\r\n\t\t\treturn gantt.getLightboxSection(this.$config.sectionName).section;\r\n\t\t},\r\n\t\t$getTemplates: function() {\r\n\t\t\treturn this._getResourceSection().templates || {};\r\n\t\t},\r\n\t\t_getResourceConfig: function(){\r\n\t\t\treturn this._getResourceSection().config || gantt.resource_table;\r\n\t\t},\r\n\t\t_getResourceColumns: function() {\r\n\t\t\treturn this._getResourceSection().config?.columns || gantt.resource_table.columns;\r\n\t\t},\r\n\t\tdestructor: function () {\r\n\t\t\tif (this._mouseDelegates) {\r\n\t\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\t\tthis._mouseDelegates = null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._unbindStore();\r\n\t\t\tthis.$grid = null;\r\n\t\t\tthis.$grid_scale = null;\r\n\t\t\tthis.$grid_data = null;\r\n\t\t\tthis._eventRemoveAll();\r\n\t\t\tgantt.ext.inlineEditorsLightbox.destructor();\r\n\t\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\t\tthis.detachAllEvents();\r\n\t\t}\r\n\t\t\r\n\t}, true);\r\n\r\n\tutils.mixin(GridRL.prototype, resourceStoreMixin(GridRL), true);\r\n\r\n\treturn GridRL;\r\n})(Grid);\r\n\r\nexport default GridRL;","export default {\r\n\tinit: function (controller, grid) {\r\n\t\tvar gantt = grid.$gantt;\r\n\r\n\t\tgantt.attachEvent(\"onTaskClick\", function (id, e) {\r\n\t\t\tif (gantt._is_icon_open_click(e))\r\n\t\t\t\treturn true;\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\r\n\t\t\tif (cell && controller.getEditorConfig(cell.columnName)) {\r\n\t\t\t\tif (controller.isVisible() && state.id == cell.id && state.columnName == cell.columnName) {\r\n\t\t\t\t\t// do nothing if editor is already active in this cell\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontroller.startEdit(cell.id, cell.columnName);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\t//GS-2598: new resource control click handler\r\n\t\tif(grid.$config.id === \"GridRL\"){\r\n\t\t\tgantt.event(gantt.getLightbox(), \"click\", function (e) {\r\n\t\t\t\tconst domHelpers = gantt.utils.dom;\r\n\t\t\t\tconst state = controller.getState();\r\n\t\t\t\tconst cell = controller.locateCell(e.target);\r\n\t\t\t\t// click on the resource table\r\n\t\t\t\tif (cell && controller.getEditorConfig(cell.columnName)) {\r\n\t\t\t\t\t// validation for unassigned case\r\n\t\t\t\t\tif(cell.columnName == 'duration' || cell.columnName == 'end'){\r\n\t\t\t\t\t\tconst tempAssignmentStore = gantt.getDatastore(\"temp_resource_assignment_store\");\r\n\t\t\t\t\t\tconst assignment = tempAssignmentStore.getItem(cell.id);\r\n\t\t\t\t\t\tif(assignment){\r\n\t\t\t\t\t\t\tif(!assignment.start_date){\r\n\t\t\t\t\t\t\t\tgantt.message({\r\n\t\t\t\t\t\t\t\t\ttype:\"warning\",\r\n\t\t\t\t\t\t\t\t\ttext:\"Specify assignment start date\"\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tcontroller.hide();\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (controller.isVisible() && state.id == cell.id && state.columnName == cell.columnName) {\r\n\t\t\t\t\t// do nothing if editor is already active in this cell\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcontroller.startEdit(cell.id, cell.columnName);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(controller.isChanged()){\r\n\t\t\t\t\t\tcontroller.save();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\t// do nothing if add resource button clicked\r\n\t\t\t\tif(domHelpers.closest(e.target, `.gantt_custom_button.gantt_add_resources`)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// handle assignment deleting\r\n\t\t\t\tif(domHelpers.closest(e.target, `[data-assignment-delete]`)){\r\n\t\t\t\t\tconst assignmentId = e.target.getAttribute(\"data-assignment-delete\");\r\n\t\t\t\t\tgantt.confirm({\r\n\t\t\t\t\t\ttext: \"Resource assignment will be deleted permanently, are you sure?\",\r\n\t\t\t\t\t\tcancel:\"No\",\r\n\t\t\t\t\t\tok:\"Delete\", \r\n\t\t\t\t\t\tcallback: function(result){\r\n\t\t\t\t\t\t\tif(result){\r\n\t\t\t\t\t\t\t\tconst tempAssignmentStore = gantt.getDatastore(\"temp_resource_assignment_store\");\r\n\t\t\t\t\t\t\t\ttempAssignmentStore.removeItem(assignmentId);\r\n\t\t\t\t\t\t\t\t// handle deleting last grid row, \r\n\t\t\t\t\t\t\t\tif (tempAssignmentStore.getItems().length == 0){\r\n\t\t\t\t\t\t\t\t\tconst resourceSection = gantt.getLightboxSection(grid.$config.sectionName);\r\n\t\t\t\t\t\t\t\t\tconst block = gantt.form_blocks[\"resource_selector\"];\r\n\t\t\t\t\t\t\t\t\tconst node = gantt._lightbox_root.querySelector(\"#\" + resourceSection.section.id).nextSibling;\r\n\t\t\t\t\t\t\t\t\tblock.set_value.call(gantt, node, [], {}, resourceSection.section, true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tgantt.refreshData();\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t//click outside the resource table\r\n\t\t\t\tif(controller.isVisible()) {\r\n\t\t\t\t\tcontroller.save();\r\n\t\t\t\t\tcontroller.hide();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontroller.hide();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// before saving lightbox need to save controller value if its modified\r\n\t\t\t// covering date type inputs\r\n\t\t\tgantt.lightbox_events.gantt_save_btn = function () {\r\n\t\t\t\tcontroller.save();\r\n\t\t\t\tgantt._save_lightbox();\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t\tgantt.attachEvent(\"onEmptyClick\", function () {\r\n\t\t\tif (controller.isVisible() && controller.isChanged()) {\r\n\t\t\t\tcontroller.save();\r\n\t\t\t} else {\r\n\t\t\t\tcontroller.hide();\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onTaskDblClick\", function (id, e) {\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\t\t\tif (cell && controller.isVisible() && cell.columnName == state.columnName) {\r\n\t\t\t\t//GS-933 probably, we don't need to hide the inline editor because the lightbox cannot be opened if you double-click on an inline editor\r\n\t\t\t\t//remove this code later if people don't complain\r\n\t\t\t\t//controller.hide();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t},\r\n\r\n\tonShow: function (controller, placeholder, grid) {\r\n\t\tvar gantt = grid.$gantt;\r\n\t\t\r\n\r\n\t\tif(gantt.ext && gantt.ext.keyboardNavigation){\r\n\t\t\tvar keyNav = gantt.ext.keyboardNavigation;\r\n\t\t\tkeyNav.attachEvent(\"onKeyDown\", function(command, e){\r\n\t\t\t\tvar keyboard = gantt.constants.KEY_CODES;\r\n\t\t\t\tvar keyCode = e.keyCode;\r\n\t\t\t\tvar preventKeyNav = false;\r\n\r\n\t\t\t\tswitch (keyCode){\r\n\t\t\t\t\tcase keyboard.SPACE:\r\n\t\t\t\t\t\tif(controller.isVisible()){\r\n\t\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (preventKeyNav){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else{\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tplaceholder.onkeydown = function (e) {\r\n\t\t\te = e || window.event;\r\n\r\n\t\t\tvar keyboard = gantt.constants.KEY_CODES;\r\n\t\t\tif (e.defaultPrevented || (e.shiftKey && e.keyCode != keyboard.TAB)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar shouldPrevent = true;\r\n\t\t\tswitch (e.keyCode) {\r\n\t\t\t\tcase gantt.keys.edit_save:\r\n\t\t\t\t\tcontroller.save();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase gantt.keys.edit_cancel:\r\n\t\t\t\t\tcontroller.hide();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.UP:\r\n\t\t\t\tcase keyboard.DOWN:\r\n\t\t\t\t\tif (controller.isVisible()) {\r\n\t\t\t\t\t\tcontroller.hide();\r\n\t\t\t\t\t\tshouldPrevent = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.TAB:\r\n\t\t\t\t\tif (e.shiftKey) {\r\n\t\t\t\t\t\tcontroller.editPrevCell(true);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcontroller.editNextCell(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tshouldPrevent = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif (shouldPrevent) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t};\r\n\t\t// GS-2598: update inline editor in the lightbox\r\n\t\tif(grid.$config.id === \"GridRL\"){\r\n\t\t\tplaceholder.onkeyup = function (e) {\r\n\t\t\t\te = e || window.event;\r\n\r\n\t\t\t\tvar keyboard = gantt.constants.KEY_CODES;\r\n\t\t\t\tif (e.defaultPrevented || (e.shiftKey && e.keyCode != keyboard.TAB)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(gantt._lightbox_id && controller.isChanged()){\r\n\t\t\t\t\tcontroller.save();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tlet timeout;\r\n\t\t\tplaceholder.onwheel = function (e) {\r\n\t\t\t\te = e || window.event;\r\n\t\t\t\tif(gantt._lightbox_id && controller.isChanged()){\r\n\t\t\t\t\tclearTimeout(timeout);\r\n\t\t\t\t\ttimeout=setTimeout(function(){\r\n\t\t\t\t\t\tcontroller.save();\r\n\t\t\t\t\t},100);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tonHide: function () {\r\n\r\n\t},\r\n\r\n\tdestroy: function () {\r\n\r\n\t}\r\n};\r\n\r\n","export default {\r\n\tinit: function(controller, grid){\r\n\t\tvar self = controller;\r\n\t\tvar gantt = grid.$gantt;\r\n\r\n\t\tvar onBlurDelay = null;\r\n\t\tvar keyNav = gantt.ext.keyboardNavigation;\r\n\t\tkeyNav.attachEvent(\"onBeforeFocus\", function (node) {\r\n\t\t\tvar activeCell = controller.locateCell(node);\r\n\t\t\tclearTimeout(onBlurDelay);\r\n\t\t\tif (activeCell) {\r\n\t\t\t\tvar columnName = activeCell.columnName;\r\n\t\t\t\tvar id = activeCell.id;\r\n\r\n\t\t\t\tvar editorState = self.getState();\r\n\t\t\t\tif(self.isVisible()){\r\n\t\t\t\t\tif(editorState.id == id && editorState.columnName === columnName) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tkeyNav.attachEvent(\"onFocus\", function (node) {\r\n\t\t\tvar activeCell = controller.locateCell(node);\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tclearTimeout(onBlurDelay);\r\n\t\t\tif (activeCell && !(activeCell.id == state.id && activeCell.columnName == state.columnName)) {\r\n\t\t\t\tif(self.isVisible()){\r\n\t\t\t\t\tself.save();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tcontroller.attachEvent(\"onHide\", function(){\r\n\t\t\tclearTimeout(onBlurDelay);\r\n\t\t});\r\n\r\n\t\tkeyNav.attachEvent(\"onBlur\", function () {\r\n\t\t\tonBlurDelay = setTimeout(function(){\r\n\t\t\t\tself.save();\r\n\t\t\t});\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onTaskDblClick\", function(id,e){\r\n\t\t\t// block lightbox on double click inside editor\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\t\t\tif(cell && controller.isVisible() && cell.columnName == state.columnName){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onTaskClick\", function (id, e) {\r\n\t\t\tif(gantt._is_icon_open_click(e))\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\r\n\t\t\tif (cell && controller.getEditorConfig(cell.columnName)) {\r\n\t\t\t\tif(controller.isVisible() && state.id == cell.id && state.columnName == cell.columnName){\r\n\t\t\t\t\t// do nothing if editor is already active in this cell\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcontroller.startEdit(cell.id, cell.columnName);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onEmptyClick\", function () {\r\n\t\t\tself.save();\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tkeyNav.attachEvent(\"onKeyDown\", function(command, e){\r\n\t\t\tvar activeCell = controller.locateCell(e.target);\r\n\t\t\tvar hasEditor = activeCell ? controller.getEditorConfig(activeCell.columnName) : false;\r\n\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar keyboard = gantt.constants.KEY_CODES;\r\n\t\t\tvar keyCode = e.keyCode;\r\n\t\t\tvar preventKeyNav = false;\r\n\r\n\t\t\tswitch (keyCode){\r\n\t\t\t\tcase keyboard.ENTER:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\t\t\t\t\t\tcontroller.save();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}else if(hasEditor && !(e.ctrlKey || e.metaKey || e.shiftKey)){\r\n\t\t\t\t\t\tself.startEdit(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.ESC:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\t\t\t\t\t\tcontroller.hide();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.UP:\r\n\t\t\t\tcase keyboard.DOWN:\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.LEFT:\r\n\t\t\t\tcase keyboard.RIGHT:\r\n\t\t\t\t\tif((hasEditor && controller.isVisible()) || state.editorType === \"date\"){\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.SPACE:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(hasEditor && !controller.isVisible()){\r\n\t\t\t\t\t\tself.startEdit(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.DELETE:\r\n\t\t\t\t\tif(hasEditor && !controller.isVisible()){\r\n\t\t\t\t\t\tself.startEdit(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t} else if(hasEditor && controller.isVisible()){\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.TAB:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\r\n\t\t\t\t\t\tif(e.shiftKey){\r\n\t\t\t\t\t\t\tcontroller.editPrevCell(true);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tcontroller.editNextCell(true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar newState = controller.getState();\r\n\t\t\t\t\t\tif(newState.id){\r\n\t\t\t\t\t\t\tkeyNav.focus({type:\"taskCell\", id: newState.id, column:newState.columnName});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tif(controller.isVisible())\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\telse{\r\n\r\n\t\t\t\t\t\t// start editing on character key\r\n\t\t\t\t\t\tif((keyCode >= 48 && keyCode <= 57) || // [0-9]\r\n\t\t\t\t\t\t\t(keyCode > 95 && keyCode < 112) || // numpad\r\n\t\t\t\t\t\t\t(keyCode >= 64 && keyCode <= 91) || // [a-z]\r\n\t\t\t\t\t\t\t(keyCode > 185 && keyCode < 193) || //;=-,etc\r\n\t\t\t\t\t\t\t(keyCode > 218  && keyCode < 223)\r\n\t\t\t\t\t\t){\r\n\t\t\t\t\t\t\tvar modifiers = command.modifiers;\r\n\r\n\t\t\t\t\t\t\tvar anyModifier = modifiers.alt || modifiers.ctrl || modifiers.meta || modifiers.shift;\r\n\t\t\t\t\t\t\tif(modifiers.alt){\r\n\t\t\t\t\t\t\t\t// don't start editing on alt+key\r\n\t\t\t\t\t\t\t}else if (anyModifier && keyNav.getCommandHandler(command, \"taskCell\")){\r\n\t\t\t\t\t\t\t\t// don't start editing if command already have a keyboard shortcut\r\n\t\t\t\t\t\t\t}else if(hasEditor && !controller.isVisible()){\r\n\t\t\t\t\t\t\t\tself.startEdit(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif (preventKeyNav){\r\n\t\t\t\treturn false;\r\n\t\t\t} else{\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t},\r\n\tonShow: function(controller, placeholder, grid){},\r\n\tonHide: function(controller, placeholder, grid){\r\n\t\tconst gantt = grid.$gantt;\r\n\t\tif (gantt){\r\n\t\t\tgantt.focus();\r\n\t\t}\r\n\r\n\t},\r\n\tdestroy: function(){}\r\n};\r\n\r\n","export default function (gantt) {\r\n\r\n\tvar BaseEditor = function () {\r\n\t};\r\n\r\n\tBaseEditor.prototype = {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t},\r\n\t\thide: function () {\r\n\t\t},\r\n\t\tset_value: function (value, id, column, node) {\r\n\t\t\tthis.get_input(node).value = value;\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\treturn this.get_input(node).value || \"\";\r\n\t\t},\r\n\t\tis_changed: function (value, id, column, node) {\r\n\t\t\tvar currentValue = this.get_value(id, column, node);\r\n\t\t\tif (currentValue && value && currentValue.valueOf && value.valueOf) {\r\n\t\t\t\treturn currentValue.valueOf() != value.valueOf();\r\n\t\t\t} else {\r\n\t\t\t\treturn currentValue != value;\r\n\t\t\t}\r\n\t\t},\r\n\t\tis_valid: function (value, id, column, node) {\r\n\t\t\treturn true;\r\n\t\t},\r\n\r\n\t\tsave: function (id, column, node) {\r\n\r\n\t\t},\r\n\t\tget_input: function (node) {\r\n\t\t\treturn node.querySelector(\"input\");\r\n\t\t},\r\n\t\tfocus: function (node) {\r\n\t\t\tvar input = this.get_input(node);\r\n\t\t\tif (!input) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (input.focus) {\r\n\t\t\t\tinput.focus();\r\n\t\t\t}\r\n\r\n\t\t\tif (input.select) {\r\n\t\t\t\tinput.select();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn BaseEditor;\r\n};","import BaseFactory from \"./base\";\r\nimport * as utils from \"../../../../../utils/utils\";\r\nimport __extends from \"../../../../../utils/extends\";\r\n\r\n\r\nexport default function(gantt) {\r\n\r\n\tvar BaseEditor = BaseFactory(gantt);\r\n\r\n\tfunction TextEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(TextEditor, BaseEditor);\r\n\r\n\tutils.mixin(TextEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar html = `<div role='cell'><input type='text' name='${column.name}' title='${column.name}'></div>`;\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn TextEditor;\r\n};","import BaseFactory from \"./base\";\r\nimport * as utils from \"../../../../../utils/utils\";\r\nimport __extends from \"../../../../../utils/extends\";\r\n\r\n\r\nexport default function(gantt) {\r\n\r\n\tvar BaseEditor = BaseFactory(gantt);\r\n\r\n\tfunction NumberEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(NumberEditor, BaseEditor);\r\n\r\n\tutils.mixin(NumberEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar min = config.min || 0,\r\n\t\t\t\tmax = config.max || 100;\r\n\r\n\t\t\tvar html = `<div role='cell'><input type='number' min='${min}' max='${max}' name='${column.name}' title='${column.name}'></div>`;\r\n\t\t\tplaceholder.innerHTML = html;\r\n\r\n\t\t\t// GS-1914. Do not allow entering alues beyond min and max via keyboard\r\n\t\t\tplaceholder.oninput = function (e) {\r\n\t\t\t\tif (+e.target.value < min) {\r\n\t\t\t\t\te.target.value = min;\r\n\t\t\t\t}\r\n\t\t\t\tif (+e.target.value > max) {\r\n\t\t\t\t\te.target.value = max;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\treturn this.get_input(node).value || \"\";\r\n\t\t},\r\n\t\tis_valid: function (value, id, column, node) {\r\n\t\t\treturn !isNaN(parseInt(value, 10));\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn NumberEditor;\r\n};","import BaseFactory from \"./base\";\r\nimport * as utils from \"../../../../../utils/utils\";\r\nimport __extends from \"../../../../../utils/extends\";\r\n\r\n\r\nexport default function(gantt) {\r\n\r\n\tvar BaseEditor = BaseFactory(gantt);\r\n\r\n\tfunction SelectEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(SelectEditor, BaseEditor);\r\n\r\n\tutils.mixin(SelectEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar html = `<div role='cell'><select name='${column.name}' title='${column.name}'>`;\r\n\t\t\tvar optionsHtml = [],\r\n\t\t\t\toptions = config.options || [];\r\n\r\n\t\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\t\toptionsHtml.push(\"<option value='\" + config.options[i].key + \"'>\" + options[i].label + \"</option>\");\r\n\t\t\t}\r\n\r\n\t\t\thtml += optionsHtml.join(\"\") + \"</select></div>\";\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t},\r\n\t\tget_input: function (node) {\r\n\t\t\treturn node.querySelector(\"select\");\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn SelectEditor;\r\n};","import * as utils from \"../../../../../utils/utils\";\r\nimport __extends from \"../../../../../utils/extends\";\r\nimport BaseFactory from \"./base\";\r\n\r\nexport default function (gantt) {\r\n\tvar BaseEditor = BaseFactory(gantt);\r\n\t\r\n\t\r\n\r\n\tvar html5DateFormat = \"%Y-%m-%d\";\r\n\r\n\tvar dateToStr = null;\r\n\tvar strToDate = null;\r\n\r\n\tfunction init() {\r\n\t\tif (!dateToStr) {\r\n\t\t\tdateToStr = gantt.date.date_to_str(html5DateFormat);\r\n\t\t}\r\n\t\tif (!strToDate) {\r\n\t\t\tstrToDate = gantt.date.str_to_date(html5DateFormat);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction DateEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(DateEditor, BaseEditor);\r\n\r\n\tutils.mixin(DateEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tinit();\r\n\t\t\tvar minValue = null;\r\n\t\t\tvar maxValue = null;\r\n\r\n\t\t\tif(typeof config.min === \"function\"){\r\n\t\t\t\tminValue = config.min(id, column);\r\n\t\t\t}else{\r\n\t\t\t\tminValue = config.min;\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof config.max === \"function\"){\r\n\t\t\t\tmaxValue = config.max(id, column);\r\n\t\t\t}else{\r\n\t\t\t\tmaxValue = config.max;\r\n\t\t\t}\r\n\r\n\t\t\tvar minAttr = minValue ? \" min='\" + dateToStr(minValue)+\"' \"  : \"\";\r\n\t\t\tvar maxAttr = maxValue ? \" max='\" + dateToStr(maxValue)+\"' \"  : \"\";\r\n\t\t\tvar html = `<div style='width:140px' role='cell'><input type='date' ${minAttr} ${maxAttr} name='${column.name}' title='${column.name}'></div>`;\r\n\t\t\tplaceholder.innerHTML = html;\r\n\r\n\t\t\t// GS-1914. Do not allow entering alues beyond min and max via keyboard\r\n\t\t\tplaceholder.oninput = function (e) {\r\n\t\t\t\tif (e.target.value && (minValue || maxValue)){\r\n\t\t\t\t\tif (+gantt.date.str_to_date(\"%Y-%m-%d\")(e.target.value) < +minValue) {\r\n\t\t\t\t\t\te.target.value = gantt.date.date_to_str(\"%Y-%m-%d\")(minValue);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (+gantt.date.str_to_date(\"%Y-%m-%d\")(e.target.value) > +maxValue) {\r\n\t\t\t\t\t\te.target.value = gantt.date.date_to_str(\"%Y-%m-%d\")(maxValue);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\t\tset_value: function (value, id, column, node) {\r\n\t\t\tif (value && value.getFullYear) {\r\n\t\t\t\tthis.get_input(node).value = dateToStr(value);\r\n\t\t\t} else {\r\n\t\t\t\tthis.get_input(node).value = value;\r\n\t\t\t}\r\n\t\t},\r\n\t\tis_valid: function (value, id, column, node) {\r\n\t\t\tif (!value || isNaN(value.getTime()))\r\n\t\t\t\treturn false;\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\tvar parsed;\r\n\t\t\ttry {\r\n\t\t\t\tparsed = strToDate(this.get_input(node).value || \"\");\r\n\t\t\t} catch (e) {\r\n\t\t\t\tparsed = null;// return null will cancel changes\r\n\t\t\t}\r\n\r\n\t\t\treturn parsed;\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn DateEditor;\r\n};\r\n","import BaseFactory from \"./base\";\r\nimport * as utils from \"../../../../../utils/utils\";\r\nimport __extends from \"../../../../../utils/extends\";\r\n\r\n\r\nexport default function(gantt) {\r\n\r\n\tvar BaseEditor = BaseFactory(gantt);\r\n\r\n\tfunction PredecessorEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(PredecessorEditor, BaseEditor);\r\n\r\n\tfunction getFormatter(config) {\r\n\t\treturn config.formatter || gantt.ext.formatters.linkFormatter();\r\n\t}\r\n\r\n\tfunction parseInputString(value, config) {\r\n\t\tvar predecessors = (value || \"\").split(config.delimiter || \",\");\r\n\t\tfor (var i = 0; i < predecessors.length; i++) {\r\n\t\t\tvar val = predecessors[i].trim();\r\n\t\t\tif (val) {\r\n\t\t\t\tpredecessors[i] = val;\r\n\t\t\t} else {\r\n\t\t\t\tpredecessors.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t\tpredecessors.sort();\r\n\t\treturn predecessors;\r\n\t}\r\n\r\n\tfunction formatPredecessors(task, config, gantt) {\r\n\t\tvar links = task.$target;\r\n\t\tvar labels = [];\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar link = gantt.getLink(links[i]);\r\n\t\t\tlabels.push(getFormatter(config).format(link));\r\n\t\t}\r\n\t\treturn labels.join((config.delimiter || \",\") + \" \");\r\n\t}\r\n\r\n\tfunction getSelectedLinks(taskId, predecessorCodes, config) {\r\n\t\tvar links = [];\r\n\t\t// select only unique codes GS-1439\r\n\t\t[...new Set(predecessorCodes)].forEach(function (code) {\r\n\t\t\tvar link = getFormatter(config).parse(code);\r\n\t\t\tif(link){\r\n\t\t\t\tlink.target = taskId;\r\n\t\t\t\t// GS-1290 A way to preserve the link. Otherwise validation will return false\r\n\t\t\t\t// because the existing link ID is not passed there\r\n\t\t\t\tlink.id = \"predecessor_generated\";\r\n\t\t\t\tif (gantt.isLinkAllowed(link)) {\r\n\t\t\t\t\tlink.id = undefined;\r\n\t\t\t\t\tlinks.push(link);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn links;\r\n\t}\r\n\r\n\tfunction formatLinkKey(link){\r\n\t\treturn link.source + \"_\" + link.target + \"_\" + link.type + \"_\" + (link.lag||0);\r\n\t}\r\n\r\n\tfunction getLinksDiff(task, predecessorCodes, config) {\r\n\t\tvar selectedLinks = getSelectedLinks(task.id, predecessorCodes, config);\r\n\t\tvar existingLinksSearch = {};\r\n\t\ttask.$target.forEach(function (linkId) {\r\n\t\t\tvar link = gantt.getLink(linkId);\r\n\t\t\texistingLinksSearch[formatLinkKey(link)] = link.id;\r\n\t\t});\r\n\r\n\t\tvar linksToAdd = [];\r\n\t\tselectedLinks.forEach(function (link) {\r\n\t\t\tvar linkKey = formatLinkKey(link);\r\n\t\t\tif (!existingLinksSearch[linkKey]) {\r\n\t\t\t\tlinksToAdd.push(link);\r\n\t\t\t} else {\r\n\t\t\t\tdelete existingLinksSearch[linkKey];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tvar linksToDelete = [];\r\n\t\tfor (var i in existingLinksSearch) {\r\n\t\t\tlinksToDelete.push(existingLinksSearch[i]);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tadd: linksToAdd,\r\n\t\t\tremove: linksToDelete\r\n\t\t};\r\n\t}\r\n\r\n\tutils.mixin(PredecessorEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar html = `<div role='cell'><input type='text' name='${column.name}' title='${column.name}'></div>`;\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t},\r\n\t\thide: function () {\r\n\t\t},\r\n\t\tset_value: function (value, id, column, node) {\r\n\t\t\tthis.get_input(node).value = formatPredecessors(value, column.editor, gantt);\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\treturn parseInputString((this.get_input(node).value || \"\"), column.editor);\r\n\t\t},\r\n\t\tsave: function (id, column, node) {\r\n\t\t\tvar task = gantt.getTask(id);\r\n\r\n\t\t\tvar linksDiff = getLinksDiff(task, this.get_value(id, column, node), column.editor);\r\n\r\n\t\t\tif (linksDiff.add.length || linksDiff.remove.length) {\r\n\t\t\t\tgantt.batchUpdate(function () {\r\n\t\t\t\t\tlinksDiff.add.forEach(function (link) {\r\n\t\t\t\t\t\tgantt.addLink(link);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlinksDiff.remove.forEach(function (linkId) {\r\n\t\t\t\t\t\tgantt.deleteLink(linkId);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (gantt.autoSchedule)\r\n\t\t\t\t\t\tgantt.autoSchedule();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tis_changed: function (value, id, column, node) {\r\n\t\t\tvar inputPredecessors = this.get_value(id, column, node);\r\n\t\t\tvar taskPredecessors = parseInputString(formatPredecessors(value, column.editor, gantt), column.editor);\r\n\r\n\t\t\treturn inputPredecessors.join() !== taskPredecessors.join();\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn PredecessorEditor;\r\n};","import BaseFactory from \"./base\";\r\nimport * as utils from \"../../../../../utils/utils\";\r\nimport __extends from \"../../../../../utils/extends\";\r\n\r\n\r\nexport default function(gantt) {\r\n\r\n\tvar BaseEditor = BaseFactory(gantt);\r\n\r\n\tfunction TextEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(TextEditor, BaseEditor);\r\n\r\n\tfunction getFormatter(config) {\r\n\t\treturn config.formatter || gantt.ext.formatters.durationFormatter();\r\n\t}\r\n\tutils.mixin(TextEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar html = `<div role='cell'><input type='text' name='${column.name}' title='${column.name}'></div>`;\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t},\r\n\t\tset_value: function (value, id, column, node) {\r\n\t\t\tthis.get_input(node).value = getFormatter(column.editor).format(value);\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\treturn getFormatter(column.editor).parse(this.get_input(node).value || \"\");\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn TextEditor;\r\n};","export default function (gantt) {\r\n\treturn function processTaskDateProperties(item, mapTo, mode) {\r\n\t\tif (mode == \"keepDates\") {\r\n\t\t\tkeepDatesOnEdit(item, mapTo);\r\n\t\t} else if (mode == \"keepDuration\") {\r\n\t\t\tkeepDurationOnEdit(item, mapTo);\r\n\t\t} else {\r\n\t\t\tdefaultActionOnEdit(item, mapTo);\r\n\t\t}\r\n\t};\r\n\r\n\t// resize task\r\n\t// resize task when start/end/duration changes\r\n\tfunction keepDatesOnEdit(item, mapTo) {\r\n\t\tif (mapTo == \"duration\") {\r\n\t\t\titem.end_date = gantt.calculateEndDate(item);\r\n\t\t} else if (mapTo == \"end_date\" || mapTo == \"start_date\") {\r\n\t\t\titem.duration = gantt.calculateDuration(item);\r\n\t\t}\r\n\t}\r\n\r\n\t// move task(before 6.2)\r\n\t// move task when start/end dates changes\r\n\t// resize task when duration changes\r\n\tfunction keepDurationOnEdit(item, mapTo) {\r\n\t\tif (mapTo == \"end_date\") {\r\n\t\t\titem.start_date = decreaseStartDate(item);\r\n\t\t} else if (mapTo == \"start_date\" || mapTo == \"duration\") {\r\n\t\t\titem.end_date = gantt.calculateEndDate(item);\r\n\t\t}\r\n\t}\r\n\r\n\t// default behavior\r\n\t// move task when start date changes\r\n\t// resize task when end date/duration changes\r\n\tfunction defaultActionOnEdit(item, mapTo) {\r\n\t\tif (gantt._getAutoSchedulingConfig().schedule_from_end){\r\n\t\t\tif (mapTo == \"end_date\" || mapTo == \"duration\") {\r\n\t\t\t\titem.start_date = decreaseStartDate(item);\r\n\t\t\t} else if (mapTo == \"start_date\") {\r\n\t\t\t\titem.duration = gantt.calculateDuration(item);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (mapTo == \"start_date\" || mapTo == \"duration\") {\r\n\t\t\t\titem.end_date = gantt.calculateEndDate(item);\r\n\t\t\t} else if (mapTo == \"end_date\") {\r\n\t\t\t\titem.duration = gantt.calculateDuration(item);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction decreaseStartDate(item){\r\n\t\treturn gantt.calculateEndDate({\r\n\t\t\tstart_date: item.end_date,\r\n\t\t\tduration: -item.duration,\r\n\t\t\ttask: item\r\n\t\t});\r\n\t}\r\n};","import getKeyboardMapping from \"./keyboard_mappings\";\r\nimport textEditorFactory from \"./editors/text\";\r\nimport numberEditorFactory from \"./editors/number\";\r\nimport selectEditorFactory from \"./editors/select\";\r\nimport dateEditorFactory from \"./editors/date\";\r\nimport predecessorEditorFactory from \"./editors/predecessor\";\r\nimport durationEditorFactory from \"./editors/duration\";\r\nimport * as utils from \"../../../../utils/utils\";\r\nimport * as domHelpers from \"../../utils/dom_helpers\";\r\nimport eventable from \"../../../../utils/eventable\";\r\nimport linkedPropertiesProcessor from \"./linked_properties\";\r\n\r\nfunction initConfigs(gantt){\r\n\tgantt.config.editor_types = {\r\n\t\ttext: new (textEditorFactory(gantt))(),\r\n\t\tnumber: new (numberEditorFactory(gantt))(),\r\n\t\tselect: new (selectEditorFactory(gantt))(),\r\n\t\tdate: new (dateEditorFactory(gantt))(),\r\n\t\tpredecessor: new (predecessorEditorFactory(gantt))(),\r\n\t\tduration: new (durationEditorFactory(gantt))()\r\n\t};\r\n}\r\n\r\nfunction create(gantt){\r\n\tvar keyboardMapping = getKeyboardMapping(gantt);\r\n\r\n\tvar eventBus = {};\r\n\teventable(eventBus);\r\n\r\n\tfunction createGridEditors(grid) {\r\n\r\n\t\tfunction _getGridCellFromNode(node){\r\n\t\t\tif(!domHelpers.isChildOf(node, grid.$grid)){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tvar row = domHelpers.locateAttribute(node, grid.$config.item_attribute);\r\n\t\t\tvar cell = domHelpers.locateAttribute(node, \"data-column-name\");\r\n\t\t\tif(row && cell){\r\n\t\t\t\tvar columnName = cell.getAttribute(\"data-column-name\");\r\n\t\t\t\tvar id = row.getAttribute(grid.$config.item_attribute);\r\n\t\t\t\treturn {\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\tcolumnName: columnName\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tfunction _getEditorPosition(itemId, columnName) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\t\t\tvar top = grid.getItemTop(itemId);\r\n\t\t\tvar height = grid.getItemHeight(itemId);\r\n\t\t\tvar cols = grid.getGridColumns();\r\n\t\t\tvar left = 0,\r\n\t\t\t\tright = 0,\r\n\t\t\t\twidth = 0;\r\n\r\n\t\t\tfor (var i = 0; i < cols.length; i++) {\r\n\t\t\t\tif (cols[i].name == columnName) {\r\n\t\t\t\t\twidth = cols[i].width;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (config.rtl) {\r\n\t\t\t\t\tright += cols[i].width;\r\n\t\t\t\t}\telse {\r\n\t\t\t\t\tleft += cols[i].width;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tif (config.rtl) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttop: top,\r\n\t\t\t\t\tright: right,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\twidth: width\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttop: top,\r\n\t\t\t\t\tleft: left,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\twidth: width\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction findVisibleIndex(grid, columnName) {\r\n\t\t\tvar columns = grid.getGridColumns();\r\n\t\t\tfor (var i = 0; i < columns.length; i++){\r\n\t\t\t\tif(columns[i].name == columnName){\r\n\t\t\t\t\treturn i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tfunction _createPlaceholder(itemId, columnName) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\t\t\tvar pos = _getEditorPosition(itemId, columnName);\r\n\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\tel.className = \"gantt_grid_editor_placeholder\";\r\n\t\t\tel.setAttribute(grid.$config.item_attribute, itemId);\r\n\t\t\tel.setAttribute(grid.$config.bind + \"_id\", itemId);// for backward compatibility\r\n\r\n\t\t\tel.setAttribute(\"data-column-name\", columnName);\r\n\r\n\t\t\tvar visibleIndex = findVisibleIndex(grid, columnName);\r\n\t\t\tel.setAttribute(\"data-column-index\", visibleIndex);\r\n\r\n\t\t\tgantt._waiAria.inlineEditorAttr(el);\r\n\r\n\t\t\tif (config.rtl) {\r\n\t\t\t\tel.style.cssText = [\r\n\t\t\t\t\t\"top:\" + pos.top + \"px\",\r\n\t\t\t\t\t\"right:\" + pos.right + \"px\",\r\n\t\t\t\t\t\"width:\" + pos.width + \"px\",\r\n\t\t\t\t\t\"height:\" + pos.height + \"px\"\r\n\t\t\t\t].join(\";\");\r\n\t\t\t} else {\r\n\t\t\t\tel.style.cssText = [\r\n\t\t\t\t\t\"top:\" + pos.top + \"px\",\r\n\t\t\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\t\t\"width:\" + pos.width + \"px\",\r\n\t\t\t\t\t\"height:\" + pos.height + \"px\"\r\n\t\t\t\t].join(\";\");\r\n\t\t\t}\r\n\r\n\t\t\treturn el;\r\n\t\t}\r\n\r\n\t\tvar updateTaskDateProperties = linkedPropertiesProcessor(gantt);\r\n\r\n\t\tvar handlers = [];\r\n\t\tvar ganttHandlers = [];\r\n\t\tvar store = null;\r\n\t\tvar controller = {\r\n\t\t\t_itemId: null,\r\n\t\t\t_columnName: null,\r\n\t\t\t_editor: null,\r\n\t\t\t_editorType: null,\r\n\t\t\t_placeholder: null,\r\n\r\n\t\t\tlocateCell: _getGridCellFromNode,\r\n\t\t\tgetEditorConfig: function (columnName) {\r\n\t\t\t\tvar column = grid.getColumn(columnName);\r\n\t\t\t\tif(column){\r\n\t\t\t\t\treturn column.editor;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tinit: function () {\r\n\t\t\t\tvar mapping = keyboardMapping.getMapping();\r\n\t\t\t\tif(mapping.init){\r\n\t\t\t\t\tmapping.init(this, grid);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstore = grid.$gantt.getDatastore(grid.$config.bind);\r\n\t\t\t\tif (!store && gantt.$data.tempAssignmentsStore){\r\n\t\t\t\t\tstore = gantt.$data.tempAssignmentsStore;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar self = this;\r\n\r\n\t\t\t\thandlers.push(store.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\t\t\t\tif(self._itemId == oldId){\r\n\t\t\t\t\t\tself._itemId = newId;\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\t\t\t\thandlers.push(store.attachEvent(\"onStoreUpdated\", function(){\r\n\t\t\t\t\tif(grid.$gantt.getState(\"batchUpdate\").batch_update){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(self.isVisible() && !store.isVisible(self._itemId)){\r\n\t\t\t\t\t\tself.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\r\n\t\t\t\tganttHandlers.push(gantt.attachEvent(\"onDataRender\", function(){\r\n\t\t\t\t\tif(self._editor && self._placeholder && !domHelpers.isChildOf(self._placeholder, gantt.$root)){\r\n\t\t\t\t\t\tgrid.$grid_data.appendChild(self._placeholder);\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\r\n\t\t\t\tthis.init = function(){};\r\n\t\t\t},\r\n\r\n\t\t\tgetState: function(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\teditor: this._editor,\r\n\t\t\t\t\teditorType: this._editorType,\r\n\t\t\t\t\tplaceholder: this._placeholder,\r\n\t\t\t\t\tid: this._itemId,\r\n\t\t\t\t\tcolumnName: this._columnName\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\t\t\tstartEdit: function(itemId, columnName) {\r\n\t\t\t\tif (this.isVisible()) {\r\n\t\t\t\t\tthis.save();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!store.exists(itemId)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar editorState = {id: itemId, columnName: columnName};\r\n\t\t\t\tif (gantt.isReadonly(store.getItem(itemId))) {\r\n\t\t\t\t\tthis.callEvent(\"onEditPrevent\", [editorState]);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.callEvent(\"onBeforeEditStart\", [editorState]) === false) {\r\n\t\t\t\t\tthis.callEvent(\"onEditPrevent\", [editorState]);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst asyncShow = this.show(editorState.id, editorState.columnName);\r\n\t\t\t\tif(asyncShow && asyncShow.then){\r\n\t\t\t\t\tasyncShow.then(function(){\r\n\t\t\t\t\t\tthis.setValue();\r\n\r\n\t\t\t\t\t\tthis.callEvent(\"onEditStart\", [editorState]);\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.setValue();\r\n\t\t\t\t\tthis.callEvent(\"onEditStart\", [editorState]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tisVisible: function(){\r\n\t\t\t\tif(gantt._lightbox_id){\r\n\t\t\t\t\treturn !!(this._editor && domHelpers.isChildOf(this._placeholder, gantt._lightbox));\r\n\t\t\t\t}\r\n\t\t\t\treturn !!(this._editor && domHelpers.isChildOf(this._placeholder, gantt.$root));\r\n\t\t\t},\r\n\t\t\tshow: function (itemId, columnName) {\r\n\t\t\t\tif (this.isVisible()) {\r\n\t\t\t\t\tthis.save();\r\n\t\t\t\t}\r\n\t\t\t\tvar editorState = {id: itemId, columnName: columnName};\r\n\r\n\t\t\t\tvar column = grid.getColumn(editorState.columnName);\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(column.name);\r\n\t\t\t\tif(!editorConfig)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar editor = grid.$getConfig().editor_types[editorConfig.type];\r\n\r\n\t\t\t\tvar placeholder = _createPlaceholder(editorState.id, editorState.columnName);\r\n\t\t\t\tgrid.$grid_data.appendChild(placeholder);\r\n\r\n\t\t\t\tconst onAfterShow = (function(){\r\n\t\t\t\t\tthis._editor = editor;\r\n\t\t\t\t\tthis._placeholder = placeholder;\r\n\t\t\t\t\tthis._itemId = editorState.id;\r\n\t\t\t\t\tthis._columnName = editorState.columnName;\r\n\t\t\t\t\tthis._editorType = editorConfig.type;\r\n\r\n\t\t\t\t\tvar mapping = keyboardMapping.getMapping();\r\n\t\t\t\t\tif(mapping.onShow){\r\n\t\t\t\t\t\tmapping.onShow(this, placeholder, grid);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplaceholder._onReMount = (function(){\r\n\t\t\t\t\t\tthis.setValue();\r\n\t\t\t\t\t}).bind(this);\r\n\t\t\t\t}).bind(this);\r\n\r\n\t\t\t\tconst editorResult = editor.show(editorState.id, column, editorConfig, placeholder);\r\n\t\t\t\tif(editorResult && editorResult.then){\r\n\t\t\t\t\treturn editorResult.then(() => {\r\n\t\t\t\t\t\tonAfterShow();\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tonAfterShow();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tsetValue: function () {\r\n\t\t\t\tvar state = this.getState();\r\n\t\t\t\tvar itemId = state.id,\r\n\t\t\t\t\tcolumnName = state.columnName;\r\n\r\n\t\t\t\tvar column = grid.getColumn(columnName);\r\n\t\t\t\tvar item = store.getItem(itemId);\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(columnName);\r\n\t\t\t\tvar value;\r\n\t\t\t\tif(!editorConfig)\r\n\t\t\t\t\treturn;\r\n\t\t\t\t// GS-2598: case for the editors in the lightbox\r\n\t\t\t\tif (gantt._lightbox_id) {\r\n\t\t\t\t\tlet assignment = store.getItem(this._itemId);\r\n\r\n\t\t\t\t\tif (editorConfig.map_to === \"text\") {\r\n\t\t\t\t\t\tlet resource = gantt.getDatastore(gantt.config.resource_store).getItem(assignment.resource_id);\r\n\t\t\t\t\t\tvalue = resource.text;\r\n\t\t\t\t\t} else if (editorConfig.map_to === \"start_date\") {\r\n\t\t\t\t\t\tvalue = (item.start_date === \"\" || item.start_date === null)\r\n\t\t\t\t\t\t\t? gantt.getTask(gantt._lightbox_id).start_date\r\n\t\t\t\t\t\t\t: item.start_date;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvalue = item[editorConfig.map_to];\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvalue = item[editorConfig.map_to];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (editorConfig.map_to === \"auto\") {\r\n\t\t\t\t\tvalue = store.getItem(itemId);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._editor.set_value(value, itemId, column, this._placeholder);\r\n\t\t\t\tthis.focus();\r\n\t\t\t},\r\n\r\n\t\t\tfocus: function(){\r\n\t\t\t\tthis._editor.focus(this._placeholder);\r\n\t\t\t},\r\n\r\n\t\t\tgetValue: function () {\r\n\t\t\t\tvar column = grid.getColumn(this._columnName);\r\n\t\t\t\treturn this._editor.get_value(this._itemId, column, this._placeholder);\r\n\t\t\t},\r\n\r\n\t\t\t_getItemValue: function() {\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(this._columnName);\r\n\r\n\t\t\t\tif(!editorConfig)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar value;\r\n\t\t\t\t// GS-2598: case for the editors in the lightbox\r\n\t\t\t\tif(gantt._lightbox_id){\r\n\t\t\t\t\tlet assignment = store.getItem(this._itemId);\r\n\t\t\t\t\tif (editorConfig.type === \"select\" && editorConfig.map_to !== \"mode\") {\r\n\t\t\t\t\t\tlet resource = gantt.getDatastore(gantt.config.resource_store).getItem(assignment.resource_id);\r\n\t\t\t\t\t\tvalue = resource.id;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvalue = assignment[editorConfig.map_to];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar item = gantt.getTask(this._itemId);\r\n\t\t\t\t\tvalue = item[editorConfig.map_to];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(editorConfig.map_to == \"auto\"){\r\n\t\t\t\t\tvalue = store.getItem(this._itemId);\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\t\t\t},\r\n\r\n\t\t\tisChanged: function(){\r\n\r\n\t\t\t\tvar column = grid.getColumn(this._columnName);\r\n\r\n\t\t\t\tvar value = this._getItemValue();\r\n\r\n\t\t\t\treturn this._editor.is_changed(value, this._itemId, column, this._placeholder);\r\n\t\t\t},\r\n\r\n\t\t\thide: function () {\r\n\t\t\t\tif(!this._itemId)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar itemId = this._itemId,\r\n\t\t\t\t\tcolumnName = this._columnName;\r\n\r\n\t\t\t\tvar mapping = keyboardMapping.getMapping();\r\n\t\t\t\tif(mapping.onHide){\r\n\t\t\t\t\tmapping.onHide(this, this._placeholder, grid);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._itemId = null;\r\n\t\t\t\tthis._columnName = null;\r\n\t\t\t\tthis._editorType = null;\r\n\t\t\t\tif (!this._placeholder) return;\r\n\r\n\t\t\t\tif (this._editor && this._editor.hide) {\r\n\t\t\t\t\tthis._editor.hide(this._placeholder);\r\n\t\t\t\t}\r\n\t\t\t\tthis._editor = null;\r\n\t\t\t\tif (this._placeholder.parentNode) {\r\n\t\t\t\t\tthis._placeholder.parentNode.removeChild(this._placeholder);\r\n\t\t\t\t}\r\n\t\t\t\tthis._placeholder = null;\r\n\r\n\t\t\t\tthis.callEvent(\"onEditEnd\", [{id: itemId, columnName: columnName}]);\r\n\t\t\t},\r\n\t\t\tsave: function () {\r\n\t\t\t\tif(!(this.isVisible() && store.exists(this._itemId) && this.isChanged())) {\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar itemId = this._itemId,\r\n\t\t\t\t\tcolumnName = this._columnName;\r\n\r\n\t\t\t\tif(!store.exists(itemId)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar item = store.getItem(itemId);\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(columnName);\r\n\t\t\t\tvar editorState = {\r\n\t\t\t\t\tid: itemId,\r\n\t\t\t\t\tcolumnName: columnName,\r\n\t\t\t\t\tnewValue: this.getValue(),\r\n\t\t\t\t\toldValue: this._getItemValue()\r\n\t\t\t\t};\r\n\t\t\t\tif (this.callEvent(\"onBeforeSave\", [editorState]) !== false) {\r\n\t\t\t\t\tif (!this._editor.is_valid || this._editor.is_valid(editorState.newValue, editorState.id, grid.getColumn(columnName), this._placeholder)) {\r\n\t\t\t\t\t\t// GS-2598: set the initial value to the editor\r\n\t\t\t\t\t\tif(gantt._lightbox_id){\r\n\t\t\t\t\t\t\tif (editorState.newValue == \"\"){\r\n\t\t\t\t\t\t\t\teditorState.newValue = editorState.oldValue;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar mapTo = editorConfig.map_to;\r\n\t\t\t\t\t\tvar value = editorState.newValue;\r\n\t\t\t\t\t\tif (mapTo != \"auto\") {\r\n\t\t\t\t\t\t\titem[mapTo] = value;\r\n\t\t\t\t\t\t\tupdateTaskDateProperties(item, mapTo, gantt.config.inline_editors_date_processing);\r\n\r\n\t\t\t\t\t\t\tstore.updateItem(itemId);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis._editor.save(itemId, grid.getColumn(columnName), this._placeholder);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.callEvent(\"onSave\", [editorState]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// GS-2598: don't close editor when we working in the lightbox\r\n\t\t\t\tif(!gantt._lightbox_id){\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t_findEditableCell: function findEditableCell(start, direction){\r\n\t\t\t\tvar nextIndex = start;\r\n\t\t\t\tvar columns = grid.getGridColumns();\r\n\t\t\t\tvar nextColumn = columns[nextIndex];\r\n\r\n\t\t\t\tvar columnName = nextColumn ? nextColumn.name : null;\r\n\t\t\t\tif(columnName){\r\n\t\t\t\t\twhile(columnName && !this.getEditorConfig(columnName)){\r\n\t\t\t\t\t\tcolumnName = this._findEditableCell(start + direction, direction);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn columnName;\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t},\r\n\r\n\t\t\tgetNextCell: function moveCell(dir){\r\n\t\t\t\t// GS-1257. true means to exclude hidden columns\r\n\t\t\t\treturn this._findEditableCell(grid.getColumnIndex(this._columnName, true) + dir, dir);\r\n\t\t\t},\r\n\r\n\t\t\tgetFirstCell: function getFirstCell(){\r\n\t\t\t\treturn this._findEditableCell(0, 1);\r\n\t\t\t},\r\n\r\n\t\t\tgetLastCell: function getLastCell(){\r\n\t\t\t\treturn this._findEditableCell(grid.getGridColumns().length - 1, -1);\r\n\t\t\t},\r\n\r\n\t\t\teditNextCell: function nextCell(canChangeRow){\r\n\t\t\t\tvar cell = this.getNextCell(1);\r\n\t\t\t\tif(cell){\r\n\t\t\t\t\tvar nextColumn = this.getNextCell(1);\r\n\t\t\t\t\tif(nextColumn && this.getEditorConfig(nextColumn)){\r\n\t\t\t\t\t\tthis.startEdit(this._itemId, nextColumn);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(canChangeRow && this.moveRow(1)){\r\n\t\t\t\t\tvar task = this.moveRow(1);\r\n\t\t\t\t\tcell = this.getFirstCell();\r\n\t\t\t\t\tif(cell && this.getEditorConfig(cell)){\r\n\t\t\t\t\t\tthis.startEdit(task, cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\teditPrevCell: function prevCell(canChangeRow){\r\n\t\t\t\tvar cell = this.getNextCell(-1);\r\n\t\t\t\tif(cell){\r\n\t\t\t\t\tvar nextColumn = this.getNextCell(-1);\r\n\t\t\t\t\tif(nextColumn && this.getEditorConfig(nextColumn)){\r\n\t\t\t\t\t\tthis.startEdit(this._itemId, nextColumn);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(canChangeRow && this.moveRow(-1)){\r\n\t\t\t\t\tvar task = this.moveRow(-1);\r\n\t\t\t\t\tcell = this.getLastCell();\r\n\t\t\t\t\tif(cell && this.getEditorConfig(cell)){\r\n\t\t\t\t\t\tthis.startEdit(task, cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tmoveRow: function moveRow(dir) {\r\n\t\t\t\tvar moveTask = dir > 0 ? gantt.getNext : gantt.getPrev;\r\n\t\t\t\tmoveTask = gantt.bind(moveTask, gantt);\r\n\r\n\t\t\t\tvar nextItem = moveTask(this._itemId);\r\n\t\t\t\t// skip readonly rows\r\n\t\t\t\twhile (gantt.isTaskExists(nextItem) && gantt.isReadonly(gantt.getTask(nextItem))) {\r\n\t\t\t\t\tnextItem = moveTask(nextItem);\r\n\t\t\t\t}\r\n\t\t\t\treturn nextItem;\r\n\t\t\t},\r\n\r\n\t\t\teditNextRow: function nextRow(skipReadonly){\r\n\t\t\t\tvar id = this.getState().id;\r\n\t\t\t\tif (!gantt.isTaskExists(id)) return;\r\n\r\n\t\t\t\tvar next = null;\r\n\t\t\t\tif (skipReadonly){\r\n\t\t\t\t\tnext = this.moveRow(1);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tnext = gantt.getNext(id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (gantt.isTaskExists(next)){\r\n\t\t\t\t\tthis.startEdit(next, this._columnName);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\teditPrevRow: function prevRow(skipReadonly){\r\n\t\t\t\tvar id = this.getState().id;\r\n\t\t\t\tif (!gantt.isTaskExists(id)) return;\r\n\r\n\t\t\t\tvar prev = null;\r\n\t\t\t\tif (skipReadonly){\r\n\t\t\t\t\tprev = this.moveRow(-1);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tprev = gantt.getPrev(id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (gantt.isTaskExists(prev)){\r\n\t\t\t\t\tthis.startEdit(prev, this._columnName);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdetachStore: function(){\r\n\t\t\t\thandlers.forEach(function(handlerId){\r\n\t\t\t\t\tstore.detachEvent(handlerId);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tganttHandlers.forEach(function(handlerId){\r\n\t\t\t\t\tgantt.detachEvent(handlerId);\r\n\t\t\t\t});\r\n\t\t\t\thandlers = [];\r\n\t\t\t\tganttHandlers = [];\r\n\r\n\t\t\t\tstore = null;\r\n\t\t\t\tthis.hide();\r\n\t\t\t},\r\n\t\t\tdestructor: function(){\r\n\t\t\t\tthis.detachStore();\r\n\t\t\t\tthis.detachAllEvents();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tutils.mixin(controller, keyboardMapping);\r\n\t\tutils.mixin(controller, eventBus);\r\n\r\n\t\treturn controller;\r\n\t}\r\n\r\n\r\n\tvar inlineEditController = {\r\n\t\tinit: initConfigs,\r\n\t\tcreateEditors: createGridEditors\r\n\t};\r\n\r\n\tutils.mixin(inlineEditController, keyboardMapping);\r\n\tutils.mixin(inlineEditController, eventBus);\r\n\r\n\treturn inlineEditController;\r\n}\r\n\r\n\r\n\r\n\r\nexport default create;","import defaultMapping from \"./keyboard_mappings/default\";\r\nimport keyNavMappings from \"./keyboard_mappings/keyboard_navigation\";\r\n\r\nexport default function(gantt){\r\n\r\n\tvar mapping = null;\r\n\r\n\treturn {\r\n\t\tsetMapping: function(map){\r\n\t\t\tmapping = map;\r\n\t\t},\r\n\t\tgetMapping: function(){\r\n\r\n\t\t\tif(mapping){\r\n\t\t\t\treturn mapping;\r\n\t\t\t}else if(gantt.config.keyboard_navigation_cells && gantt.ext.keyboardNavigation){\r\n\t\t\t\treturn keyNavMappings;\r\n\t\t\t}else{\r\n\t\t\t\treturn defaultMapping;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};\r\n","// optimized checker for task bars smart rendering\r\n\r\n// first check the vertical position since it's easier to calculate\r\nexport default function isBarInViewport(item, viewport, view, config, gantt){\r\n\tif(!item.start_date || !item.end_date){\r\n\t\treturn null;\r\n\t}\r\n\r\n\tvar top = view.getItemTop(item.id);\r\n\tvar height = view.getItemHeight(item.id);\r\n\r\n\tif(top > viewport.y_end || top + height < viewport.y){\r\n\t\treturn false;\r\n\t}\r\n\r\n\tvar padding = 200;\r\n\tvar startCoord = view.posFromDate(item.start_date, view._getPositioningContext ? view._getPositioningContext(item) : null);\r\n\tvar endCoord = view.posFromDate(item.end_date, view._getPositioningContext ? view._getPositioningContext(item) : null);\r\n\tvar left = Math.min(startCoord, endCoord) - padding;\r\n\tvar right = Math.max(startCoord, endCoord) + padding;\r\n\r\n\tif(left > viewport.x_end || right < viewport.x){\r\n\t\treturn false;\r\n\t}\r\n\r\n\treturn true;\r\n};","function createTaskRenderer(gantt) {\r\n\r\n\tfunction _render_task_element(task, view, config) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar painters = config.type_renderers;\r\n\t\tvar renderer = painters[gantt.getTaskType(task.type)],\r\n\t\t\tdefaultRenderer = _task_default_render;\r\n\r\n\t\tif (!renderer) {\r\n\t\t\treturn defaultRenderer.call(gantt, task, view, config);\r\n\t\t}else{\r\n\t\t\treturn renderer.call(gantt, task, function(task){ return defaultRenderer.call(gantt, task, view, config);}, view);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _task_default_render(task, view, config) {\r\n\t\tif (gantt._isAllowedUnscheduledTask(task))\r\n\t\t\treturn;\r\n\r\n\t\tif (!gantt._isTaskInTimelineLimits(task)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar pos = view.getItemPosition(task);\r\n\r\n\t\tvar cfg = config,\r\n\t\t\ttemplates = view.$getTemplates();\r\n\r\n\t\tvar taskType = gantt.getTaskType(task.type);\r\n\t\tvar height = view.getBarHeight(task.id, taskType == cfg.types.milestone);\r\n\r\n\t\tvar controlsMargin = 0;\r\n\t\tif (taskType == cfg.types.milestone) {\r\n\t\t\tcontrolsMargin = (height - pos.height)/2;\r\n\t\t}\r\n\r\n\t\tvar padd = Math.floor((view.getItemHeight(task.id) - height) / 2);\r\n\t\tconst hasBaselines = gantt.config.baselines && task.baselines && task.baselines.length;\r\n\t\tconst baselinesOnDifferentRow = gantt.config.baselines && (gantt.config.baselines.render_mode == \"separateRow\" || gantt.config.baselines.render_mode == \"individualRow\");\r\n\t\tif (hasBaselines && baselinesOnDifferentRow){\r\n\t\t\tif (task.bar_height !== \"full\" && task.bar_height < task.row_height){\r\n\t\t\t\tif (taskType === cfg.types.milestone){\r\n\t\t\t\t\tlet milestoneHeight = view.getBarHeight(task.id, true);\r\n\t\t\t\t\tlet milestoneWidth = Math.sqrt(2 * milestoneHeight * milestoneHeight);\r\n\t\t\t\t\tpadd = Math.floor((milestoneWidth - height) / 2) + 2;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpadd = 2;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t//\tif(task.type == cfg.types.milestone){\r\n\t//\t\tpadd -= 1;\r\n\t//\t}\r\n\t//\tif (taskType == cfg.types.milestone && cfg.link_line_width > 1) {\r\n\t//\t\t//little adjust milestone position, so horisontal corners would match link arrow when thickness of link line is more than 1px\r\n\t//\t\tpadd += 1;\r\n\t//\t}\r\n\r\n\t\tif (taskType == cfg.types.milestone) {\r\n\t\t\tpos.left -= Math.round(height / 2);\r\n\t\t\tpos.width = height;\r\n\t\t}\r\n\r\n\t\tvar div = document.createElement(\"div\");\r\n\r\n\t\tvar width = Math.round(pos.width);\r\n\r\n\t\tif(view.$config.item_attribute) {\r\n\t\t\tdiv.setAttribute(view.$config.item_attribute, task.id);\r\n\t\t\tdiv.setAttribute(view.$config.bind + \"_id\", task.id); // 'task_id'/'resource_id' for backward compatibility\r\n\t\t}\r\n\r\n\t\tif (cfg.show_progress && taskType != cfg.types.milestone) {\r\n\t\t\t_render_task_progress(task, div, width, cfg, templates);\r\n\t\t}\r\n\r\n\t\t//use separate div to display content above progress bar\r\n\t\tvar content = _render_task_content(task, width, templates);\r\n\r\n\t\tdiv.appendChild(content);\r\n\r\n\t\tvar css = _combine_item_class(\"gantt_task_line\",\r\n\t\t\ttemplates.task_class(task.start_date, task.end_date, task),\r\n\t\t\ttask.id,\r\n\t\t\tview);\r\n\t\tif (task.color || task.progressColor || task.textColor) {\r\n\t\t\tcss += \" gantt_task_inline_color\";\r\n\t\t}\r\n\t\tif (pos.width < 20){\r\n\t\t\tcss += \" gantt_thin_task\";\r\n\t\t}\r\n\t\tdiv.className = css;\r\n\r\n\t\tvar styles = [\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"top:\" + (padd + pos.top) + 'px',\r\n\t\t\t\"height:\" + (height) + 'px',\r\n\t\t\t\"line-height:\" + (Math.max(height < 30 ? height - 2 : height, 0)) + 'px',\r\n\t\t\t\"width:\" + width + 'px'\r\n\t\t];\r\n\r\n\t\tdiv.style.cssText = styles.join(\";\");\r\n\t\tif (task.color) {\r\n\t\t\tdiv.style.setProperty(\"--dhx-gantt-task-background\", task.color);\r\n\t\t}\r\n\t\tif (task.textColor) {\r\n\t\t\tdiv.style.setProperty(\"--dhx-gantt-task-color\", task.textColor);\r\n\t\t}\r\n\r\n\t\tif (task.progressColor) {\r\n\t\t\tdiv.style.setProperty(\"--dhx-gantt-task-progress-color\", task.progressColor);\r\n\t\t}\r\n\r\n\t\t\r\n\t\tvar side = _render_leftside_content(task, cfg, templates, controlsMargin);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tside = _render_rightside_content(task, cfg, templates, controlsMargin);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tgantt._waiAria.setTaskBarAttr(task, div);\r\n\r\n\t\tvar state = gantt.getState();\r\n\t\tconst taskEditable = !gantt.isReadonly(task);\r\n\t\tconst timelineDrag = gantt.ext.dragTimeline && gantt.ext.dragTimeline._isDragInProgress();\r\n\r\n\t\tif (taskEditable || timelineDrag) {\r\n\t\t\tif (cfg.drag_resize && !gantt.isSummaryTask(task) && taskType != cfg.types.milestone) {\r\n\t\t\t\t_render_pair(div, \"gantt_task_drag\", task, function (css) {\r\n\t\t\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\t\t\tel.className = css;\r\n\t\t\t\t\treturn el;\r\n\t\t\t\t}, cfg);\r\n\t\t\t}\r\n\t\t\tif (cfg.drag_links && cfg.show_links) {\r\n\t\t\t\t_render_pair(div, \"gantt_link_control\", task, function (css) {\r\n\t\t\t\t\tvar outer = document.createElement(\"div\");\r\n\t\t\t\t\touter.className = css;\r\n\t\t\t\t\touter.style.cssText = [\r\n\t\t\t\t\t\t\"height:\" + height + 'px',\r\n\t\t\t\t\t\t\"line-height:\" + height + 'px'\r\n\t\t\t\t\t].join(\";\");\r\n\t\t\t\t\tvar inner = document.createElement(\"div\");\r\n\t\t\t\t\tinner.className = \"gantt_link_point\";\r\n\r\n\t\t\t\t\tvar showLinkPoints = false;\r\n\t\t\t\t\tif(state.link_source_id && cfg.touch){\r\n\t\t\t\t\t\tshowLinkPoints = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tinner.style.display = showLinkPoints ? \"block\" : \"\";\r\n\t\t\t\t\touter.appendChild(inner);\r\n\t\t\t\t\treturn outer;\r\n\t\t\t\t}, cfg, controlsMargin);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn div;\r\n\t}\r\n\r\n\tfunction _render_side_content(task, template, cssClass, marginStyle) {\r\n\t\tif (!template) return null;\r\n\r\n\t\tvar text = template(task.start_date, task.end_date, task);\r\n\t\tif (!text) return null;\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tcontent.className = \"gantt_side_content \" + cssClass;\r\n\t\tcontent.innerHTML = text;\r\n\t\tif(marginStyle){\r\n\t\t\tcontent.style[marginStyle.type] = Math.abs(marginStyle.value) + \"px\";\r\n\t\t}\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_leftside_content(task, cfg, templates, margin) {\r\n\t\tvar css = \"gantt_left \" + _get_link_crossing_css(!cfg.rtl ? true : false, task, cfg);\r\n\t\tvar marginStyle = null;\r\n\t\tif(margin){\r\n\t\t\tmarginStyle = { type: \"marginRight\", value: margin };\r\n\t\t}\r\n\t\treturn _render_side_content(task, templates.leftside_text, css, marginStyle);\r\n\t}\r\n\r\n\tfunction _render_rightside_content(task, cfg, templates, margin) {\r\n\t\tvar css = \"gantt_right \" + _get_link_crossing_css(!cfg.rtl ? false : true, task, cfg);\r\n\t\tvar marginStyle = null;\r\n\t\tif(margin){\r\n\t\t\tmarginStyle = { type: \"marginLeft\", value: margin };\r\n\t\t}\r\n\t\treturn _render_side_content(task, templates.rightside_text, css, marginStyle);\r\n\t}\r\n\r\n\tfunction _get_link_crossing_css(left, task) {\r\n\t\tvar cond = _get_conditions(left);\r\n\r\n\t\tfor (var i in cond) {\r\n\t\t\tvar links = task[i];\r\n\t\t\tfor (var ln = 0; ln < links.length; ln++) {\r\n\t\t\t\tvar link = gantt.getLink(links[ln]);\r\n\r\n\t\t\t\tfor (var tp = 0; tp < cond[i].length; tp++) {\r\n\t\t\t\t\tif (link.type == cond[i][tp]) {\r\n\t\t\t\t\t\treturn \"gantt_link_crossing\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\r\n\tfunction _render_task_content(task, width, templates) {\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tif (gantt.getTaskType(task.type) != gantt.config.types.milestone){\r\n\t\t\tcontent.innerHTML = templates.task_text(task.start_date, task.end_date, task);\r\n\t\t} else if(gantt.getTaskType(task.type) == gantt.config.types.milestone && width) {\r\n\t\t\tcontent.style.height = content.style.width = width + \"px\";\r\n\t\t}\r\n\t\tcontent.className = \"gantt_task_content\";\r\n\t\t//content.style.width = width + 'px';\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_task_progress(task, element, maxWidth, cfg, templates) {\r\n\t\tvar done = task.progress * 1 || 0;\r\n\t\t//GS-2776: borders were removed in v9.0\r\n\t\tmaxWidth = Math.max(maxWidth, 0);\r\n\t\tvar pr = document.createElement(\"div\");\r\n\t\tvar width = Math.round(maxWidth * done);\r\n\r\n\t\twidth = Math.min(maxWidth, width);\r\n\r\n\t\tpr.style.width = width + 'px';\r\n\t\tpr.className = \"gantt_task_progress\";\r\n\t\tpr.innerHTML = templates.progress_text(task.start_date, task.end_date, task);\r\n\r\n\t\tif(cfg.rtl){\r\n\t\t\tpr.style.position = \"absolute\";\r\n\t\t\tpr.style.right = \"0px\";\r\n\t\t}\r\n\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.className = \"gantt_task_progress_wrapper\";\r\n\t\twrapper.appendChild(pr);\r\n\t\telement.appendChild(wrapper);\r\n\r\n\t\tconst taskEditable = !gantt.isReadonly(task);\r\n\t\tconst timelineDrag = gantt.ext.dragTimeline && gantt.ext.dragTimeline._isDragInProgress();\r\n\r\n\t\tif (gantt.config.drag_progress && (taskEditable || timelineDrag)) {\r\n\t\t\tvar drag = document.createElement(\"div\");\r\n\r\n\t\t\tvar markerPos = width;\r\n\t\t\tif(cfg.rtl){\r\n\t\t\t\tmarkerPos = maxWidth - width;\r\n\t\t\t}\r\n\r\n\t\t\tdrag.style.left = markerPos + 'px';\r\n\t\t\tdrag.className = \"gantt_task_progress_drag\";\r\n\t\t\tdrag.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"9\" viewBox=\"0 0 12 9\" fill=\"none\">\r\n<path d=\"M5.58397 1.52543C5.78189 1.22856 6.21811 1.22856 6.41602 1.52543L10.5475 7.72265C10.769 8.05493 10.5308 8.5 10.1315 8.5L1.86852 8.5C1.46917 8.5 1.23097 8.05493 1.45249 7.72265L5.58397 1.52543Z\" fill=\"var(--dhx-gantt-progress-handle-background)\" stroke=\"var(--dhx-gantt-progress-handle-border)\"/>\r\n</svg>`;\r\n\t\t\tpr.appendChild(drag);\r\n\t\t\telement.appendChild(drag);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _get_conditions(leftside) {\r\n\t\tif (leftside) {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.start_to_start\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.start_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_start\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.finish_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _combine_item_class(basic, template, itemId, view) {\r\n\t\tvar cfg = view.$getConfig();\r\n\t\tvar css = [basic];\r\n\t\tif (template)\r\n\t\t\tcss.push(template);\r\n\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tvar task = gantt.getTask(itemId);\r\n\r\n\t\tif (gantt.getTaskType(task.type) == cfg.types.milestone) {\r\n\t\t\tcss.push(\"gantt_milestone\");\r\n\t\t}else if (gantt.getTaskType(task.type) == cfg.types.project) {\r\n\t\t\tcss.push(\"gantt_project\");\r\n\t\t}\r\n\r\n\t\tcss.push(\"gantt_bar_\" + gantt.getTaskType(task.type));\r\n\r\n\r\n\t\tif (gantt.isSummaryTask(task))\r\n\t\t\tcss.push(\"gantt_dependent_task\");\r\n\r\n\t\tif (gantt.isSplitTask(task) && ((task.$inlineSplit && task.$inlineSplit.length) || ((cfg.open_split_tasks && !task.$open && (task.$inlineSplit && task.$inlineSplit.length)) || !cfg.open_split_tasks))) {\r\n\t\t\tcss.push(\"gantt_split_parent\");\r\n\t\t}\r\n\r\n\t\tif (cfg.select_task && gantt.isSelectedTask(itemId)) {\r\n\t\t\tcss.push(\"gantt_selected\");\r\n\t\t}\r\n\r\n\t\tif (itemId == state.drag_id) {\r\n\t\t\tcss.push(\"gantt_drag_\" + state.drag_mode);\r\n\t\t\tif (state.touch_drag) {\r\n\t\t\t\tcss.push(\"gantt_touch_\" + state.drag_mode);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (state.link_source_id == itemId){\r\n\t\t\tcss.push(\"gantt_link_source\");\r\n\t\t\tif(state.link_from_start) {\r\n\t\t\t\tcss.push(\"gantt_link_from_start\");\r\n\t\t\t}else{\r\n\t\t\t\tcss.push(\"gantt_link_from_end\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (state.link_target_id == itemId)\r\n\t\t\tcss.push(\"gantt_link_target\");\r\n\r\n\r\n\t\tif (cfg.highlight_critical_path && gantt.isCriticalTask) {\r\n\t\t\tif (gantt.isCriticalTask(task))\r\n\t\t\t\tcss.push(\"gantt_critical_task\");\r\n\t\t}\r\n\r\n\t\tif (state.link_landing_area &&\r\n\t\t\t(state.link_target_id && state.link_source_id) &&\r\n\t\t\t(state.link_target_id != state.link_source_id) &&\r\n\t\t\t(state.link_target_id == itemId || state.link_source_id == itemId)) {\r\n\r\n\t\t\tvar from_id = state.link_source_id;\r\n\t\t\tvar from_start = state.link_from_start;\r\n\t\t\tvar to_start = state.link_to_start;\r\n\r\n\t\t\tvar allowDrag = gantt.isLinkAllowed(from_id, itemId, from_start, to_start);\r\n\r\n\t\t\tvar dragClass = \"\";\r\n\t\t\tif (allowDrag) {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_allow\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_allow\";\r\n\t\t\t} else {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_deny\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_deny\";\r\n\t\t\t}\r\n\t\t\tcss.push(dragClass);\r\n\t\t}\r\n\t\treturn css.join(\" \");\r\n\t}\r\n\r\n\tfunction _render_pair(parent, css, task, content, config, margin) {\r\n\t\tvar state = gantt.getState();\r\n\t\tvar className, element;\r\n\t\tif (+task.start_date >= +state.min_date) {\r\n\t\t\tclassName = [css, config.rtl ? \"task_right\" : \"task_left\", \"task_start_date\"];\r\n\t\t\telement = content(className.join(\" \"));\r\n\t\t\telement.setAttribute(\"data-bind-property\", \"start_date\");\r\n\t\t\tif(margin){\r\n\t\t\t\telement.style.marginLeft = margin + \"px\";\r\n\t\t\t}\r\n\t\t\tparent.appendChild(element);\r\n\t\t}\r\n\r\n\t\tif (+task.end_date <= +state.max_date){\r\n\t\t\tclassName = [css, config.rtl ? \"task_left\" : \"task_right\", \"task_end_date\"];\r\n\t\t\telement = content(className.join(\" \"));\r\n\t\t\telement.setAttribute(\"data-bind-property\", \"end_date\");\r\n\t\t\tif(margin){\r\n\t\t\t\telement.style.marginRight = margin + \"px\";\r\n\t\t\t}\r\n\t\t\tparent.appendChild(element);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn _render_task_element;\r\n}\r\n\r\nexport default createTaskRenderer;","import isInViewPort from \"./viewport/is_bar_in_viewport\";\r\nimport getVisibleRange from \"./viewport/get_visible_bars_range\";\r\nimport createBaseBarRender from \"./task_bar_render\";\r\n\r\nexport default function createTaskRenderer(gantt){\r\n\tvar defaultRender = createBaseBarRender(gantt);\r\n\treturn {\r\n\t\trender: defaultRender,\r\n\t\tupdate: null,\r\n\t\t//getRectangle: getBarRectangle\r\n\t\tisInViewPort: isInViewPort,\r\n\t\tgetVisibleRange: getVisibleRange\r\n\t};\r\n};","export default function () {\r\n  // eslint-disable-next-line no-console\r\n  console.error(\"You are trying to use a Pro feature that is not available in the GPL version.\");\r\n  return {\r\n    render: function (){},\r\n    isInViewPort: function (){},\r\n    getVisibleRange: function (){}\r\n  };\r\n};\r\n","export default function(item, view, config){\r\n\treturn {\r\n\t\ttop: view.getItemTop(item.id),\r\n\t\theight: view.getItemHeight(item.id),\r\n\t\tleft: 0,\r\n\t\tright: Infinity\r\n\t};\r\n};","export default function getVisibleCellsRange(scale, viewport){\r\n\tvar firstCellIndex = 0;\r\n\tvar lastCellIndex = scale.left.length - 1;\r\n\tif(viewport){\r\n\t\tfor(var i = 0; i < scale.left.length; i++){\r\n\t\t\tvar left = scale.left[i];\r\n\t\t\tif(left < viewport.x){\r\n\t\t\t\tfirstCellIndex = i;\r\n\t\t\t}\r\n\t\t\tif(left > viewport.x_end){\r\n\t\t\t\tlastCellIndex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tstart: firstCellIndex,\r\n\t\tend: lastCellIndex\r\n\t};\r\n};","import isLegacyRender from \"../is_legacy_smart_render\";\r\n\r\nexport default function isColumnVisible(columnIndex, scale, viewPort, gantt){\r\n\tvar width = scale.width[columnIndex];\r\n\tif(width <= 0){\r\n\t\treturn false;\r\n\t}\r\n\tif(!gantt.config.smart_rendering || isLegacyRender(gantt)){\r\n\t\treturn true;\r\n\t}\r\n\tvar cellLeftCoord = scale.left[columnIndex] - width;\r\n\tvar cellRightCoord = scale.left[columnIndex] + width;\r\n\treturn (cellLeftCoord <= viewPort.x_end && cellRightCoord >= viewPort.x);//do not render skipped columns\r\n};","export default function (items, gantt){\r\n\tvar placeholderConfig = gantt.config.timeline_placeholder;\r\n\titems = items || [];\r\n\tif (placeholderConfig && items.filter(e => e.id === 'timeline_placeholder_task').length === 0){\r\n\t\tvar state = gantt.getState();\r\n\t\tvar lastTaskId = null;\r\n\t\tvar start_date = state.min_date;\r\n\t\tvar end_date = state.max_date;\r\n\t\tif (items.length){\r\n\t\t\tlastTaskId = items[items.length -1].id;\r\n\t\t}\r\n\t\tvar placeholderTask = {\r\n\t\t\tstart_date: start_date, \r\n\t\t\tend_date: end_date, \r\n\t\t\trow_height: placeholderConfig.height || 0,\r\n\t\t\tid: \"timeline_placeholder_task\", \r\n\t\t\tunscheduled: true,\r\n\t\t\tlastTaskId: lastTaskId, \r\n\t\t\tcalendar_id: placeholderConfig.calendar || \"global\",\r\n\t\t\t$source:[], \r\n\t\t\t$target: []\r\n\t\t};\r\n\t\titems.push(placeholderTask);\r\n\t}\r\n};","import isInViewPort from \"./viewport/is_link_in_viewport\";\r\nimport getVisibleRange from \"./viewport/factory/get_visible_link_range\";\r\nimport { childrenHaveBaselines, getMaxParentHeight } from \"./baseline_helper\";\r\n\r\n\r\nfunction createLinkRender(gantt){\r\n\r\nfunction _render_link_element(link, view, config) {\r\n\tvar source = gantt.getTask(link.source);\r\n\tif(source.hide_bar){\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar target = gantt.getTask(link.target);\r\n\tif(target.hide_bar){\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar pt = path_builder.get_endpoint(link, view, source, target);\r\n\tvar dy = pt.e_y - pt.y;\r\n\tvar dx = pt.e_x - pt.x;\r\n\tif(!dx && !dy){\r\n\t\treturn null;\r\n\t}\r\n\r\n\r\n\tvar dots = path_builder.get_points(link, view, source, target);\r\n\tconst lines = drawer.get_lines(dots, view);\r\n\r\n\tconst shapes = transform_lines_to_shapes(lines.filter(l => l.size > 0), config);\r\n  \r\n\tconst div = render_shapes(shapes, view, link, config);\r\n\r\n\r\n\tvar css = \"gantt_task_link\";\r\n\r\n\tif (link.color) {\r\n\t\tcss += \" gantt_link_inline_color\";\r\n\t}\r\n\tvar cssTemplate = gantt.templates.link_class ? gantt.templates.link_class(link) : \"\";\r\n\tif (cssTemplate) {\r\n\t\tcss += \" \" + cssTemplate;\r\n\t}\r\n\r\n\tif (config.highlight_critical_path && gantt.isCriticalLink) {\r\n\t\tif (gantt.isCriticalLink(link))\r\n\t\t\tcss += \" gantt_critical_link\";\r\n\t}\r\n\r\n\tdiv.className = css;\r\n\r\n\tif(view.$config.link_attribute){\r\n\t\tdiv.setAttribute(view.$config.link_attribute, link.id);\r\n\t\tdiv.setAttribute(\"link_id\", link.id);\r\n\t}\r\n\tif (link.color) {\r\n\t\tdiv.style.setProperty(\"--dhx-gantt-link-background\", link.color);\r\n\t}\r\n\r\n\tgantt._waiAria.linkAttr(link, div);\r\n\r\n\treturn div;\r\n}\r\n\r\n\tfunction render_shapes(shapes, view, link, config) {\r\n\t\tconst container = document.createElement(\"div\");\r\n\r\n\t\tshapes.forEach(shape => {\r\n\t\t\tlet element;\r\n\t\t\tif (shape.type === 'line') {\r\n\t\t\t\telement = drawer.render_line(shape.data, null, view, link.source);\r\n\t\t\t} else if (shape.type === 'corner') {\r\n\t\t\t\telement = drawer.render_corner(shape.data, view);\r\n\t\t\t}else if (shape.type === 'arrow') {\r\n\t\t\t\telement = drawer.render_arrow(shape.data, config);\r\n\t\t\t}\r\n\r\n\t\t\tcontainer.appendChild(element);\r\n\t\t});\r\n\r\n\t\treturn container;\r\n\t}\r\n\r\n\tfunction transform_lines_to_shapes(lines, config) {\r\n\t\tconst radius = config.link_radius || 4;\r\n\t\tconst arrowSize = config.link_arrow_size || 6; // Arrow size from config\r\n\t\tconst shapes = [];\r\n\t\r\n\t\tfor (let i = 0; i < lines.length; i++) {\r\n\t\t\tconst line = lines[i];\r\n\t\t\tconst nextLine = lines[i + 1];\r\n\t\r\n\t\t\tif (!nextLine || config.link_radius <= 1) {\r\n\t\t\t\tshapes.push({ type: 'line', data: line });\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\r\n\t\t\tif (line.direction !== nextLine.direction) {\r\n\t\t\t\tif(line.size < radius || nextLine.size < radius){\r\n\t\t\t\t\tshapes.push({ type: 'line', data: line });\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tline.size -= radius;\r\n\t\t\t\tshapes.push({ type: 'line', data: line });\r\n\t\r\n\t\t\t\tlet cornerX = line.x;\r\n\t\t\t\tlet cornerY = line.y - config.link_line_width / 2;\r\n\t\r\n\t\t\t\tswitch (line.direction) {\r\n\t\t\t\t\tcase 'right':\r\n\t\t\t\t\t\tcornerX += line.size;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'left':\r\n\t\t\t\t\t\tcornerX -= line.size;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'down':\r\n\t\t\t\t\t\tcornerY += line.size;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'up':\r\n\t\t\t\t\t\tcornerY -= line.size;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tconst corner = {\r\n\t\t\t\t\tx: cornerX,\r\n\t\t\t\t\ty: cornerY,\r\n\t\t\t\t\tdirection: { from: line.direction, to: nextLine.direction },\r\n\t\t\t\t\tradius\r\n\t\t\t\t};\r\n\t\t\t\tshapes.push({ type: 'corner', data: corner });\r\n\t\r\n\t\t\t\tswitch (nextLine.direction) {\r\n\t\t\t\t\tcase 'right':\r\n\t\t\t\t\t\tnextLine.x += radius;\r\n\t\t\t\t\t\tnextLine.size -= radius;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'left':\r\n\t\t\t\t\t\tnextLine.x -= radius;\r\n\t\t\t\t\t\tnextLine.size -= radius;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'down':\r\n\t\t\t\t\t\tnextLine.y += radius;\r\n\t\t\t\t\t\tnextLine.size -= radius;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'up':\r\n\t\t\t\t\t\tnextLine.y -= radius;\r\n\t\t\t\t\t\tnextLine.size -= radius;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tshapes.push({ type: 'line', data: line });\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tconst lastLine = lines[lines.length - 1];\r\n\t\r\n\t\tif (lastLine.direction === 'right' || lastLine.direction === 'left') {\r\n\t\t\tlastLine.size -= arrowSize*3/4; \r\n\t\r\n\t\t\tlet arrowX = lastLine.direction === 'right' ? (lastLine.x + lastLine.size) : lastLine.x - lastLine.size - arrowSize/2;\r\n\t\t\tlet arrowY = lastLine.y - (config.link_line_width / 2) - (arrowSize / 2) + 1;\r\n\t\r\n\t\t\tif(lastLine.direction === 'left'){\r\n\t\t\t\tarrowY -= 1;// left pointing arrows for some reason need adjustments\r\n\t\t\t\tarrowX -= 2;\r\n\t\t\t}else{\r\n\t\t\t\tarrowX -= 1;\r\n\t\t\t}\r\n\t\t\tconst arrow = {\r\n\t\t\t\tx: arrowX,\r\n\t\t\t\ty: arrowY,\r\n\t\t\t\tsize: arrowSize,\r\n\t\t\t\tdirection: lastLine.direction\r\n\t\t\t};\r\n\t\r\n\t\t\tshapes.push({ type: 'line', data: lastLine });\r\n\t\t\tshapes.push({ type: 'arrow', data: arrow });\r\n\t\t} else {\r\n\t\t\tshapes.push({ type: 'line', data: lastLine });\r\n\t\t}\r\n\t\r\n\t\treturn shapes;\r\n\t}\r\n\t\r\n\r\n\r\nvar drawer = {\r\n\tcurrent_pos: null,\r\n\tdirs: {\"left\": 'left', \"right\": 'right', \"up\": 'up', \"down\": 'down'},\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.current_pos = null;\r\n\t\tthis.path = [];\r\n\t},\r\n\tpoint: function (pos) {\r\n\t\tthis.current_pos = gantt.copy(pos);\r\n\t},\r\n\tget_lines: function (dots) {\r\n\t\tthis.clear();\r\n\t\tthis.point(dots[0]);\r\n\t\tfor (var i = 1; i < dots.length; i++) {\r\n\t\t\tthis.line_to(dots[i]);\r\n\t\t}\r\n\t\treturn this.get_path();\r\n\t},\r\n\tline_to: function (pos) {\r\n\t\tvar next = gantt.copy(pos);\r\n\t\tvar prev = this.current_pos;\r\n\r\n\t\tvar line = this._get_line(prev, next);\r\n\t\tthis.path.push(line);\r\n\t\tthis.current_pos = next;\r\n\t},\r\n\tget_path: function () {\r\n\t\treturn this.path;\r\n\t},\r\n\tget_wrapper_sizes: function (v, view, itemId) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\ty = v.y - (wrapper_size) / 2;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - v.size - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y - v.size,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y /*- wrapper_size/2*/,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t},\r\n\tget_line_sizes: function (v, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\tline_size = config.link_line_width,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\tsize = v.size + line_size;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: line_size,\r\n\t\t\t\t\twidth: size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: size,\r\n\t\t\t\t\twidth: line_size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\r\n\t\treturn res;\r\n\t},\r\n\trender_line: function (v, end, view, itemId) {\r\n\t\tvar pos = this.get_wrapper_sizes(v, view, itemId);\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.style.cssText = [\r\n\t\t\t\"top:\" + pos.top + \"px\",\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"height:\" + pos.height + \"px\",\r\n\t\t\t\"width:\" + pos.width + \"px\"\r\n\t\t].join(';');\r\n\t\twrapper.className = \"gantt_line_wrapper\";\r\n\r\n\t\tvar innerPos = this.get_line_sizes(v, view);\r\n\t\tvar inner = document.createElement(\"div\");\r\n\t\tinner.style.cssText = [\r\n\t\t\t\"height:\" + innerPos.height + \"px\",\r\n\t\t\t\"width:\" + innerPos.width + \"px\",\r\n\t\t\t\"margin-top:\" + innerPos.marginTop + \"px\",\r\n\t\t\t\"margin-left:\" + innerPos.marginLeft + \"px\"\r\n\t\t].join(\";\");\r\n\r\n\t\tinner.className = \"gantt_link_line_\" + v.direction;\r\n\t\twrapper.appendChild(inner);\r\n\r\n\t\treturn wrapper;\r\n\t},\r\n\r\n\trender_corner: function (corner, view) {\r\n\t\tconst radius = corner.radius;\r\n\t\tconst config = view.$getConfig();\r\n\t\tconst lineWidth = config.link_line_width || 2;\r\n\t\tconst cornerDiv = document.createElement(\"div\");\r\n\t\r\n\t\tcornerDiv.classList.add(\"gantt_link_corner\");\r\n\t\tcornerDiv.classList.add(`gantt_link_corner_${corner.direction.from}_${corner.direction.to}`);\r\n\t\r\n\t\tcornerDiv.style.width = `${radius}px`;\r\n\t\tcornerDiv.style.height = `${radius}px`;\r\n\t\r\n\t\tlet borderVertical;\r\n\t\tlet borderHorizontal;\r\n\r\n\t\tif (corner.direction.from === 'right' && corner.direction.to === 'down') {\r\n\t\t\tborderVertical = \"Right\";\r\n\t\t\tborderHorizontal = \"Top\";\r\n\t\t\tcornerDiv.style.left = `${corner.x - config.link_line_width/2}px`;\r\n\t\t\tcornerDiv.style.top = `${corner.y}px`;\r\n\t\t} else if (corner.direction.from === 'down' && corner.direction.to === 'right') {\r\n\t\t\tborderVertical = \"Left\";\r\n\t\t\tborderHorizontal = \"Bottom\";\r\n\t\t\tcornerDiv.style.left = `${corner.x - config.link_line_width/2}px`;\r\n\t\t\tcornerDiv.style.top = `${corner.y}px`;\r\n\t\t} else if (corner.direction.from === 'right' && corner.direction.to === 'up') {\r\n\t\t\tborderVertical = \"Right\";\r\n\t\t\tborderHorizontal = \"Bottom\";\r\n\t\t\tcornerDiv.style.left = `${corner.x - config.link_line_width/2}px`;\r\n\t\t\tcornerDiv.style.top = `${corner.y - radius}px`;\r\n\t\t} else if (corner.direction.from === 'up' && corner.direction.to === 'right') {\r\n\t\t\tborderVertical = \"Left\";\r\n\t\t\tborderHorizontal = \"Top\";\r\n\t\t\tcornerDiv.style.left = `${corner.x - config.link_line_width/2}px`;\r\n\t\t\tcornerDiv.style.top = `${corner.y - radius}px`;\r\n\t\t} else if (corner.direction.from === 'left' && corner.direction.to === 'down') {\r\n\t\t\tborderVertical = \"Left\";\r\n\t\t\tborderHorizontal = \"Top\";\r\n\t\t\tcornerDiv.style.left = `${corner.x - radius - config.link_line_width/2}px`;\r\n\t\t\tcornerDiv.style.top = `${corner.y}px`;\r\n\t\t} else if (corner.direction.from === 'down' && corner.direction.to === 'left') {\r\n\t\t\tborderVertical = \"Right\";\r\n\t\t\tborderHorizontal = \"Bottom\";\r\n\t\t\tcornerDiv.style.left = `${corner.x - radius - config.link_line_width/2}px`;\r\n\t\t\tcornerDiv.style.top = `${corner.y}px`;\r\n\t\t} else if (corner.direction.from === 'left' && corner.direction.to === 'up') {\r\n\t\t\tborderVertical = \"Left\";\r\n\t\t\tborderHorizontal = \"Bottom\";\r\n\t\t\tcornerDiv.style.left = `${corner.x - radius - config.link_line_width/2}px`;\r\n\t\t\tcornerDiv.style.top = `${corner.y - radius}px`;\r\n\t\t} else if (corner.direction.from === 'up' && corner.direction.to === 'left') {\r\n\t\t\tborderVertical = \"Right\";\r\n\t\t\tborderHorizontal = \"Top\";\r\n\t\t\tcornerDiv.style.left = `${corner.x - radius - config.link_line_width/2}px`;\r\n\t\t\tcornerDiv.style.top = `${corner.y - radius}px`;\r\n\t\t}\r\n\r\n\t\tcornerDiv.style[`border${borderHorizontal}Width`] = `${lineWidth}px`;\r\n\t\tcornerDiv.style[`border${borderVertical}Width`] = `${lineWidth}px`;\r\n\t\tcornerDiv.style[`border${borderVertical}Style`] = `solid`;\r\n\t\tcornerDiv.style[`border${borderHorizontal}Style`] = `solid`;\r\n\t\tcornerDiv.style[`border${borderHorizontal}${borderVertical}Radius`] = `${radius}px`;\r\n\r\n\t\r\n\t\treturn cornerDiv;\r\n\t},\r\n\r\n\trender_arrow(arrow, config) {\r\n\t\tvar div = document.createElement(\"div\");\r\n\t\tvar top = arrow.y;\r\n\t\tvar left = arrow.x;\r\n\t\r\n\t\tvar size = config.link_arrow_size;\r\n\t\tdiv.style.setProperty(\"--dhx-gantt-icon-size\", `${size}px`);\r\n\t\r\n\t\tvar className = \"gantt_link_arrow gantt_link_arrow_\" + arrow.direction;\r\n\r\n\t\tdiv.style.top = top + \"px\";\r\n\t\tdiv.style.left = left + 'px';\r\n\t\tdiv.className = className;\r\n\t\r\n\t\treturn div;\r\n\t},\r\n\t\r\n\t_get_line: function (from, to) {\r\n\t\tvar direction = this.get_direction(from, to);\r\n\t\tvar vect = {\r\n\t\t\tx: from.x,\r\n\t\t\ty: from.y,\r\n\t\t\tdirection: this.get_direction(from, to)\r\n\t\t};\r\n\t\tif (direction == this.dirs.left || direction == this.dirs.right) {\r\n\t\t\tvect.size = Math.abs(from.x - to.x);\r\n\t\t} else {\r\n\t\t\tvect.size = Math.abs(from.y - to.y);\r\n\t\t}\r\n\t\treturn vect;\r\n\t},\r\n\tget_direction: function (from, to) {\r\n\t\tvar direction = 0;\r\n\t\tif (to.x < from.x) {\r\n\t\t\tdirection = this.dirs.left;\r\n\t\t} else if (to.x > from.x) {\r\n\t\t\tdirection = this.dirs.right;\r\n\t\t} else if (to.y > from.y) {\r\n\t\t\tdirection = this.dirs.down;\r\n\t\t} else {\r\n\t\t\tdirection = this.dirs.up;\r\n\t\t}\r\n\t\treturn direction;\r\n\t}\r\n\r\n};\r\n\r\nvar path_builder = {\r\n\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.path = [];\r\n\t},\r\n\tcurrent: function () {\r\n\t\treturn this.path[this.path.length - 1];\r\n\t},\r\n\tpoint: function (next) {\r\n\t\tif (!next)\r\n\t\t\treturn this.current();\r\n\r\n\t\tthis.path.push(gantt.copy(next));\r\n\t\treturn next;\r\n\t},\r\n\tpoint_to: function (direction, diff, point) {\r\n\t\tif (!point)\r\n\t\t\tpoint = gantt.copy(this.point());\r\n\t\telse\r\n\t\t\tpoint = {x: point.x, y: point.y};\r\n\t\tvar dir = drawer.dirs;\r\n\t\tswitch (direction) {\r\n\t\t\tcase (dir.left):\r\n\t\t\t\tpoint.x -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.right):\r\n\t\t\t\tpoint.x += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.up):\r\n\t\t\t\tpoint.y -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.down):\r\n\t\t\t\tpoint.y += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn this.point(point);\r\n\t},\r\n\tget_points: function (link, view, source, target) {\r\n\t\tvar pt = this.get_endpoint(link, view, source, target);\r\n\t\tvar xy = gantt.config;\r\n\r\n\t\tvar dy = pt.e_y - pt.y;\r\n\t\tvar dx = pt.e_x - pt.x;\r\n\r\n\t\tvar dir = drawer.dirs;\r\n\r\n\t\tvar rowHeight = view.getItemHeight(link.source);\r\n\r\n\t\tthis.clear();\r\n\t\tthis.point({x: pt.x, y: pt.y});\r\n\r\n\t\tvar shiftX = 2 * xy.link_arrow_size;//just random size for first line\r\n\t\tvar lineType = this.get_line_type(link, view.$getConfig());\r\n\r\n\t\tvar forward = (pt.e_x > pt.x);\r\n\t\tif (lineType.from_start && lineType.to_start) {\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\r\n\t\t} else if (!lineType.from_start && lineType.to_start) {\r\n\t\t\t// GS-2619. No need to add loops for the split tasks (zero dy means the tasks are on the same line)\r\n\t\t\tif (dy !== 0){\r\n\t\t\t\tforward = (pt.e_x > (pt.x + 2 * shiftX));\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tdx -= shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx -= 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\r\n\t\t\t\tthis.point_to(dir.down, sign * (rowHeight / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (rowHeight / 2)));\r\n\t\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\t}\r\n\r\n\t\t} else if (!lineType.from_start && !lineType.to_start) {\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t} else if (lineType.from_start && !lineType.to_start) {\r\n\t\t\t// GS-2619. No need to add loops for the split tasks (zero dy means the tasks are on the same line)\r\n\t\t\tif (dy !== 0){\r\n\t\t\t\tforward = (pt.e_x > (pt.x - 2 * shiftX));\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\r\n\t\t\tif (!forward) {\r\n\t\t\t\tdx += shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx += 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\t\t\t\tthis.point_to(dir.down, sign * (rowHeight / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (rowHeight / 2)));\r\n\t\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this.path;\r\n\t},\r\n\tget_line_type: function(link, config){\r\n\t\tvar types = config.links;\r\n\t\tvar from_start = false, to_start = false;\r\n\t\tif (link.type == types.start_to_start) {\r\n\t\t\tfrom_start = to_start = true;\r\n\t\t} else if (link.type == types.finish_to_finish) {\r\n\t\t\tfrom_start = to_start = false;\r\n\t\t} else if (link.type == types.finish_to_start) {\r\n\t\t\tfrom_start = false;\r\n\t\t\tto_start = true;\r\n\t\t} else if (link.type == types.start_to_finish) {\r\n\t\t\tfrom_start = true;\r\n\t\t\tto_start = false;\r\n\t\t} else {\r\n\t\t\tgantt.assert(false, \"Invalid link type\");\r\n\t\t}\r\n\r\n\t\tif(config.rtl){\r\n\t\t\tfrom_start = !from_start;\r\n\t\t\tto_start = !to_start;\r\n\t\t}\r\n\r\n\t\treturn {from_start: from_start, to_start: to_start};\r\n\t},\r\n\r\n\tget_endpoint: function (link, view, source, target) {\r\n\t\tvar config = view.$getConfig();\r\n\r\n\t\tvar lineType = this.get_line_type(link, config);\r\n\t\tvar from_start = lineType.from_start,\r\n\t\t\tto_start = lineType.to_start;\r\n\r\n\t\tvar from = getMilestonePosition(source, view, config),\r\n\t\t\tto = getMilestonePosition(target, view, config);\r\n\r\n\t\treturn {\r\n\t\t\tx: from_start ? from.left : (from.left + from.width),\r\n\t\t\te_x: to_start ? to.left : (to.left + to.width),\r\n\t\t\ty: from.top + (from.rowHeight/2) - 1,\r\n\t\t\te_y: to.top + (to.rowHeight/2) - 1\r\n\t\t};\r\n\t}\r\n};\r\n\r\nfunction getMilestonePosition(task, view, config){\r\n\tvar pos = view.getItemPosition(task);\r\n\r\n\t// GS-2270: Link to the split children shouldn't exceed the parent row height\r\n\tlet splitParams = getMaxParentHeight(gantt, view, task);\r\n\tlet maxHeight = splitParams.maxHeight;\r\n\r\n\tlet splitChild = splitParams.splitChild;\r\n\tconst baselinesOnDifferentRow = gantt.config.baselines && (gantt.config.baselines.render_mode == \"separateRow\" || gantt.config.baselines.render_mode == \"individualRow\");\r\n\tconst baselines = baselinesOnDifferentRow && task.baselines && task.baselines.length;\r\n\r\n\tif (splitParams.shrinkHeight){\r\n\t\tpos.rowHeight = maxHeight;\r\n\t}\r\n\r\n\tlet milestoneWidth;\r\n\tlet milestoneTask = gantt.getTaskType(task.type) == config.types.milestone;\r\n\tif(milestoneTask){\r\n\t\tlet milestoneHeight = view.getBarHeight(task.id, true);\r\n\t\tmilestoneWidth = Math.sqrt(2*milestoneHeight*milestoneHeight);\r\n\t\tif (splitParams.shrinkHeight && maxHeight < milestoneHeight){\r\n\t\t\tmilestoneHeight = maxHeight;\r\n\t\t\tmilestoneWidth = maxHeight;\r\n\t\t}\r\n\t\tpos.left -= milestoneWidth / 2;\r\n\t\tpos.width = milestoneWidth;\r\n\t} \r\n\tif (splitChild){\r\n\t\tif (maxHeight >= pos.height) {\r\n\t\t\tconst siblingBaselines = childrenHaveBaselines(gantt, task.parent);\r\n\t\t\tif (baselines || siblingBaselines){\r\n\t\t\t\tif (milestoneTask){\r\n\t\t\t\t\tpos.rowHeight = pos.height + 4;\r\n\t\t\t\t\tpos.left += (pos.width - pos.rowHeight + 4) / 2;\r\n\t\t\t\t\tpos.width = pos.rowHeight - 3;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tpos.rowHeight = pos.height + 6;\r\n\t\t\t\t}\r\n\t\t\t} else if (milestoneTask) {\r\n\t\t\t\tpos.left += (milestoneWidth - pos.height) / 2;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tpos.rowHeight = maxHeight + 2;\r\n\t\t\tif (milestoneTask){\r\n\t\t\t\tpos.left += (pos.width - pos.rowHeight + 4) / 2;\r\n\t\t\t\tpos.width = pos.rowHeight - 3;\r\n\t\t\t}\r\n\t\t}\r\n\t} else if (baselines){\r\n\t\tpos.rowHeight = pos.height + 4;\r\n\t}\r\n\r\n\treturn pos;\r\n}\r\n\r\n\r\nreturn {\r\n\trender: _render_link_element,\r\n\tupdate: null,\r\n\t//getRectangle: getLinkRectangle\r\n\tisInViewPort: isInViewPort,\r\n\tgetVisibleRange: getVisibleRange()\r\n};\r\n}\r\n\r\nexport default createLinkRender;","export default function(item, viewport, view, config, gantt){\r\n    // GS-2481 and GS-1715, don't remove selected task when using keyboard shortcuts and when the inline editor is opened\r\n    if(gantt.$ui.getView(\"grid\") && ((gantt.config.keyboard_navigation && gantt.getSelectedId()) || (gantt.ext.inlineEditors && gantt.ext.inlineEditors.getState().id))) {\r\n\t\t//GS-2661: selected task might be collapsed\r\n\t\tif(!item.$expanded_branch) return false;\r\n\t\treturn true;\r\n\t}\r\n    var top = view.getItemTop(item.id);\r\n\tvar height = view.getItemHeight(item.id);\r\n\r\n\tif(top > viewport.y_end || top + height < viewport.y){\r\n\t\treturn false;\r\n\t}\r\n\r\n\treturn true;\r\n};","import * as helpers from \"../utils/helpers\";\r\n\r\nexport default function createResourceTimelineBuilder(gantt){\r\n\r\n\tlet resourceTaskCache = {};\r\n\r\n\tgantt.$data.tasksStore.attachEvent(\"onStoreUpdated\", function(){\r\n\t\tresourceTaskCache = {};\r\n\t});\r\n\r\n\tfunction getResourceLoad(resource, resourceProperty, scale, timeline){\r\n\t\tconst cacheKey = resource.id + \"_\" + resourceProperty  + \"_\" + scale.unit + \"_\" + scale.step;\r\n\t\tlet res;\r\n\t\tif (!resourceTaskCache[cacheKey]) {\r\n\t\t\tres = resourceTaskCache[cacheKey] = calculateResourceLoad(resource, resourceProperty, scale, timeline);\r\n\r\n\t\t} else {\r\n\t\t\tres = resourceTaskCache[cacheKey];\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction calculateResourceLoadFromAssignments(items, scale, assignmentsPassed){\r\n\t\tconst scaleUnit = scale.unit;\r\n\t\tconst scaleStep = scale.step;\r\n\t\tconst timegrid = {};\r\n\r\n\t\tconst precalculatedTimes = {};\r\n\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\tconst item = items[i];\r\n\t\t\tlet task = item;\r\n\t\t\tif(assignmentsPassed){\r\n\t\t\t\ttask = gantt.getTask(item.task_id);\r\n\t\t\t}\r\n\t\t\tif (task.unscheduled){\r\n\t\t\t\tcontinue; // do not process assignments for unscheduled tasks\r\n\t\t\t}\r\n\t\t\tlet minDate = (item.start_date || task.start_date);\r\n\t\t\tlet maxDate = (item.end_date || task.end_date);\r\n\t\t\tif(assignmentsPassed){\r\n\t\t\t\tif(item.start_date){\r\n\t\t\t\t\tminDate = new Date(Math.max(item.start_date.valueOf(), task.start_date.valueOf()));\r\n\t\t\t\t}\r\n\t\t\t\tif(item.end_date){\r\n\t\t\t\t\tmaxDate = new Date(Math.min(item.end_date.valueOf(), task.end_date.valueOf()));\r\n\t\t\t\t}\r\n\t\t\t\t// GS-2063: handle case with fixedDates mode\r\n\t\t\t\tif(item.mode && item.mode == \"fixedDates\"){\r\n\t\t\t\t\tminDate = item.start_date;\r\n\t\t\t\t\tmaxDate = item.end_date;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet firstColumn = helpers.findBinary(scale.trace_x, minDate.valueOf());\r\n\t\t\tlet minScaleDate = new Date(scale.trace_x[firstColumn] || gantt.date[scaleUnit + \"_start\"](new Date(minDate)));\r\n\t\t\t// GS-2307: need to take into account that task could start before the min scale date\r\n\t\t\t// so the task would be added to timegrid\r\n\t\t\tlet currDate = new Date(Math.min(minDate.valueOf(), minScaleDate.valueOf())); \r\n\r\n\t\t\tlet calendar = gantt.config.work_time ? gantt.getTaskCalendar(task) : gantt;\r\n\t\t\tprecalculatedTimes[calendar.id] = {};\r\n\t\t\twhile (currDate < maxDate) {\r\n\t\t\t\tconst cachedTimes = precalculatedTimes[calendar.id];\r\n\r\n\t\t\t\tlet date = currDate;\r\n\t\t\t\tconst timestamp = date.valueOf();\r\n\r\n\t\t\t\tcurrDate = gantt.date.add(currDate, scaleStep, scaleUnit);\r\n\r\n\t\t\t\tif(cachedTimes[timestamp] === false){\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!timegrid[timestamp]){\r\n\t\t\t\t\ttimegrid[timestamp] = {tasks: [], assignments: []};\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttimegrid[timestamp].tasks.push(task);\r\n\t\t\t\tif(assignmentsPassed){\r\n\t\t\t\t\ttimegrid[timestamp].assignments.push(item);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn timegrid;\r\n\t}\r\n\r\n\tfunction calculateResourceLoad(resource, resourceProperty, scale, timeline) {\r\n\r\n\t\tlet items;\r\n\t\tlet assignmentsPassed = false;\r\n\t\tlet timegrid = {};\r\n\r\n\t\tif(gantt.config.process_resource_assignments && resourceProperty === gantt.config.resource_property){\r\n\t\t\tif(resource.$role == \"task\"){\r\n\t\t\t\titems = gantt.getResourceAssignments(resource.$resource_id, resource.$task_id);\r\n\t\t\t}else{\r\n\t\t\t\titems = gantt.getResourceAssignments(resource.id);\r\n\t\t\t}\r\n\r\n\t\t\tassignmentsPassed = true;\r\n\t\t}else if(resource.$role == \"task\"){\r\n\t\t\titems = [];\r\n\t\t}else{\r\n\t\t\titems = gantt.getTaskBy(resourceProperty, resource.id);\r\n\t\t}\r\n\r\n\t\ttimegrid = calculateResourceLoadFromAssignments(items, scale, assignmentsPassed);\r\n\t\tconst scaleUnit = scale.unit;\r\n\t\tconst scaleStep = scale.step;\r\n\r\n\t\tconst timetable = [];\r\n\t\tlet start, end, tasks, assignments, cell;\r\n\t\tconst config = timeline.$getConfig();\r\n\r\n\t\tfor(let i = 0; i < scale.trace_x.length; i++){\r\n\t\t\tstart = new Date(scale.trace_x[i]);\r\n\t\t\tend = gantt.date.add(start, scaleStep, scaleUnit);\r\n\t\t\tcell = timegrid[start.valueOf()] || {};\r\n\t\t\ttasks = cell.tasks || [];\r\n\t\t\tassignments = cell.assignments || [];\r\n\t\t\tif(tasks.length || config.resource_render_empty_cells){\r\n\t\t\t\ttimetable.push({\r\n\t\t\t\t\tstart_date: start,\r\n\t\t\t\t\tend_date: end,\r\n\t\t\t\t\ttasks: tasks,\r\n\t\t\t\t\tassignments: assignments\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\ttimetable.push(null);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn timetable;\r\n\t}\r\n\r\n\r\n\r\n\treturn getResourceLoad;\r\n};","import * as domHelpers from \"../utils/dom_helpers\";\r\nimport isPlaceholderTask from \"../../../utils/placeholder_task\";\r\n\r\nfunction _init_dnd(gantt, grid) {\r\n\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\tif(!grid.$config.bind || !gantt.getDatastore(grid.$config.bind)){\r\n\t\treturn;\r\n\t}\r\n\r\n\tfunction locate(e){\r\n\t\treturn domHelpers.locateAttribute(e, grid.$config.item_attribute);\r\n\t}\r\n\r\n\tfunction getStore(){\r\n\t\treturn gantt.getDatastore(grid.$config.bind);\r\n\t}\r\n\r\n\tfunction checkPlaceholderTask(id){\r\n\t\treturn isPlaceholderTask(id, gantt, getStore());\r\n\t}\r\n\r\n\tvar dnd = new DnD(grid.$grid_data, {updates_per_second: 60});\r\n\tif (gantt.defined(grid.$getConfig().dnd_sensitivity))\r\n\t\tdnd.config.sensitivity = grid.$getConfig().dnd_sensitivity;\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tif (!el) return false;\r\n\t\tif (gantt.hideQuickInfo) gantt.hideQuickInfo();\r\n\r\n\t\tif (domHelpers.closest(e.target, \".gantt_grid_editor_placeholder\")){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar id = el.getAttribute(grid.$config.item_attribute);\r\n\t\tif (checkPlaceholderTask(id)) return false;\r\n\r\n\t\tvar datastore = getStore();\r\n\r\n\t\tvar task = datastore.getItem(id);\r\n\r\n\t\tif (gantt.isReadonly(task))\r\n\t\t\treturn false;\r\n\r\n\t\tdnd.config.initial_open_state = task.$open;\r\n\t\tif (!gantt.callEvent(\"onRowDragStart\", [id, e.target || e.srcElement, e])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tdnd.config.marker.innerHTML = el.outerHTML;\r\n\t\tvar element = dnd.config.marker.firstChild;\r\n\t\tif(element){\r\n\t\t\telement.style.position = \"static\";\r\n\t\t}\r\n\r\n\t\tdnd.config.id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar store = getStore();\r\n\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\tdnd.config.index = store.getBranchIndex(dnd.config.id);\r\n\t\tdnd.config.parent = task.parent;\r\n\t\ttask.$open = false;\r\n\t\ttask.$transparent = true;\r\n\t\tthis.refreshData();\r\n\t}, gantt));\r\n\r\n\tdnd.lastTaskOfLevel = function (level) {\r\n\t\tvar last_item = null;\r\n\t\tvar store = getStore();\r\n\t\tvar tasks = store.getItems();\r\n\t\tfor (var i = 0, len = tasks.length; i < len; i++) {\r\n\t\t\tif (tasks[i].$level == level) {\r\n\t\t\t\tlast_item = tasks[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn last_item ? last_item.id : null;\r\n\t};\r\n\tdnd._getGridPos = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\t\t// row offset\r\n\t\tvar x = pos.x + grid.$grid.scrollLeft;\r\n\t\tvar y = e.pos.y - 10;\r\n\r\n\t\tvar rowHeight = grid.getItemHeight(dnd.config.id);\r\n\t\t// prevent moving row out of grid_data container\r\n\t\tif (y < pos.y) y = pos.y;\r\n\t\tvar gridHeight = grid.getTotalHeight();\r\n\t\tif (y > pos.y + gridHeight - rowHeight) y = pos.y + gridHeight - rowHeight;\r\n\t\tconst maxBottom = pos.y + pos.height;\r\n\t\tif (y > maxBottom - rowHeight) {\r\n\t\t\ty = maxBottom - rowHeight;\r\n\t\t}\r\n\r\n\t\tpos.x = x;\r\n\t\tpos.y = y;\r\n\t\treturn pos;\r\n\t}, gantt);\r\n\tdnd._getTargetY = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\t\tvar scrollPos = grid.$state.scrollTop || 0;\r\n\t\tvar maxBottom = gantt.$grid_data.getBoundingClientRect().height + scrollPos;\r\n\r\n\t\tvar y = e.pageY - pos.y + scrollPos;\r\n\t\tif (y > maxBottom) {\r\n\t\t\ty = maxBottom;\r\n\t\t} else if (y < scrollPos) {\r\n\t\t\ty = scrollPos;\r\n\t\t}\r\n\t\treturn y;\r\n\t}, gantt);\r\n\tdnd._getTaskByY = gantt.bind(function (y, dropIndex) {\r\n\r\n\t\tvar store = getStore();\r\n\r\n\t\ty = y || 0;\r\n\r\n\t\tvar index = grid.getItemIndexByTopPosition(y);\r\n\t\tindex = dropIndex < index ? index - 1 : index;\r\n\r\n\t\tif (index > store.countVisible() - 1)\r\n\t\t\treturn null;\r\n\r\n\t\treturn store.getIdByIndex(index);\r\n\t}, gantt);\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function (obj, e) {\r\n\t\tvar gridDataSizes = gantt.$grid_data.getBoundingClientRect();\r\n\t\tvar maxBottom = gridDataSizes.height + gridDataSizes.y + (grid.$state.scrollTop || 0) + window.scrollY;\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = dnd._getGridPos(e);\r\n\r\n\t\tgantt._waiAria.reorderMarkerAttr(dd.marker);\r\n\r\n\t\tvar config = grid.$getConfig(),\r\n\t\t\tstore = getStore();\r\n\r\n\t\t// setting position of row\r\n\t\tif (pos.y < maxBottom) {\r\n\t\t\tdd.marker.style.top = pos.y + \"px\";\r\n\t\t} else {\r\n\t\t\tdd.marker.style.top = maxBottom + \"px\";\r\n\t\t}\r\n\t\tdd.marker.style.left = pos.x + 10 + \"px\";\r\n\t\tconst containerSize = domHelpers.getNodePosition(gantt.$root);\r\n\t\tif (pos.width > containerSize.width){\r\n\t\t\tdd.marker.style.width = containerSize.width - 10 - 2 + \"px\";\r\n\t\t\tdd.marker.style.overflow = \"hidden\";\t\r\n\t\t}\r\n\r\n\t\t// highlight row when mouseover\r\n\t\tvar item = store.getItem(dnd.config.id);\r\n\t\tvar targetY = dnd._getTargetY(e);\r\n\t\tvar el = dnd._getTaskByY(targetY, store.getIndexById(item.id));\r\n\r\n\t\tif (!store.exists(el)) {\r\n\t\t\tel = dnd.lastTaskOfLevel(config.order_branch_free ? item.$level : 0);\r\n\t\t\tif (el == dnd.config.id) {\r\n\t\t\t\tel = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction allowedLevel(next, item) {\r\n\t\t\treturn (!(store.isChildOf(over.id, item.id)) && (next.$level == item.$level || config.order_branch_free));\r\n\t\t}\r\n\r\n\t\tif (store.exists(el)) {\r\n\t\t\tvar over = store.getItem(el);\r\n\r\n\t\t\tvar itemTop = grid.getItemTop(over.id);\r\n\t\t\tvar itemHeight = grid.getItemHeight(over.id);\r\n\t\t\tif (itemTop + itemHeight / 2 < targetY) {\r\n\t\t\t\t//hovering over bottom part of item, check can be drop to bottom\r\n\t\t\t\tvar index = store.getIndexById(over.id);\r\n\t\t\t\tvar nextId = store.getNext(over.id);//adds +1 when hovering over placeholder\r\n\t\t\t\tvar next = store.getItem(nextId);\r\n\t\t\t\tif (checkPlaceholderTask(nextId)){\r\n\t\t\t\t\tvar prevId = store.getPrev(next.id);\r\n\t\t\t\t\tnext = store.getItem(prevId);\r\n\t\t\t\t}\r\n\t\t\t\tif (next) {\r\n\t\t\t\t\tif (next.id != item.id) {\r\n\t\t\t\t\t\tover = next; //there is a valid target\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (config.order_branch_free) {\r\n\t\t\t\t\t\t\tif (!(store.isChildOf(item.id, over.id) && store.getChildren(over.id).length == 1))\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tstore.move(item.id, store.getBranchIndex(over.id) + 1, store.getParent(over.id));\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//we at end of the list, check and drop at the end of list\r\n\t\t\t\t\tnextId = store.getIdByIndex(index);\r\n\t\t\t\t\tnext = store.getItem(nextId);\r\n\r\n\t\t\t\t\tif (checkPlaceholderTask(nextId)){\r\n\t\t\t\t\t\tvar prevId = store.getPrev(next.id);\r\n\t\t\t\t\t\tnext = store.getItem(prevId);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (allowedLevel(next, item) && next.id != item.id) {\r\n\t\t\t\t\t\tstore.move(item.id, -1, store.getParent(next.id));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (config.order_branch_free) {\r\n\t\t\t\tif (over.id != item.id && allowedLevel(over, item) && !checkPlaceholderTask(over.id)) {\r\n\t\t\t\t\tif (!store.hasChild(over.id)) {\r\n\t\t\t\t\t\tover.$open = true;\r\n\t\t\t\t\t\tstore.move(item.id, -1, over.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (store.getIndexById(over.id) || itemHeight / 3 < targetY) return;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//if item is on different level, check the one before it\r\n\t\t\tvar index = store.getIndexById(over.id),\r\n\t\t\t\tprevId = store.getIdByIndex(index - 1);\r\n\r\n\t\t\tvar prev = store.getItem(prevId);\r\n\r\n\t\t\tvar shift = 1;\r\n\t\t\twhile ((!prev || prev.id == over.id) && index - shift >= 0) {\r\n\r\n\t\t\t\tprevId = store.getIdByIndex(index - shift);\r\n\t\t\t\tprev = store.getItem(prevId);\r\n\t\t\t\tshift++;\r\n\t\t\t}\r\n\r\n\t\t\tif (item.id == over.id || checkPlaceholderTask(over.id)) return;\r\n\t\t\t//replacing item under cursor\r\n\t\t\tif (allowedLevel(over, item) && item.id != over.id) {\r\n\t\t\t\tstore.move(item.id, 0, 0, over.id);\r\n\r\n\t\t\t} else if (over.$level == item.$level - 1 && !store.getChildren(over.id).length) {\r\n\t\t\t\tstore.move(item.id, 0, over.id);\r\n\r\n\t\t\t} else if (prev && (allowedLevel(prev, item)) && (item.id != prev.id)) {\r\n\t\t\t\tstore.move(item.id, -1, store.getParent(prev.id));\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function () {\r\n\t\tvar store = getStore();\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\ttask.$transparent = false;\r\n\t\ttask.$open = dnd.config.initial_open_state;\r\n\r\n\t\tif (this.callEvent(\"onBeforeRowDragEnd\", [dnd.config.id, dnd.config.parent, dnd.config.index]) === false) {\r\n\t\t\tstore.move(dnd.config.id, dnd.config.index, dnd.config.parent);\r\n\t\t\ttask.$drop_target = null;\r\n\t\t} else {\r\n\t\t\tthis.callEvent(\"onRowDragEnd\", [dnd.config.id, task.$drop_target]);\r\n\t\t}\r\n\t\tgantt.render();\r\n\t\tthis.refreshData();\r\n\t}, gantt));\r\n}\r\n\r\nexport default {\r\n\tinit: _init_dnd\r\n};","/**\r\n * The state object for order branch drag and drop\r\n */\r\n\r\nimport * as utils from \"../../../../utils/utils\";\r\n\r\nexport default {\r\n\tcreateDropTargetObject: function createDropTargetObject(parent) {\r\n\t\tvar res = {\r\n\t\t\ttargetParent: null,\r\n\t\t\ttargetIndex: 0,\r\n\t\t\ttargetId: null,\r\n\t\t\tchild: false,\r\n\t\t\tnextSibling: false,\r\n\t\t\tprevSibling: false\r\n\t\t};\r\n\r\n\t\tif (parent) {\r\n\t\t\tutils.mixin(res, parent, true);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\tnextSiblingTarget: function nextSiblingTarget(dndTaskId, targetTaskId, store) {\r\n\t\tvar result = this.createDropTargetObject();\r\n\t\tresult.targetId = targetTaskId;\r\n\t\tresult.nextSibling = true;\r\n\t\tresult.targetParent = store.getParent(result.targetId);\r\n\t\tresult.targetIndex = store.getBranchIndex(result.targetId);\r\n\t\tif(store.getParent(dndTaskId) != result.targetParent || result.targetIndex < store.getBranchIndex(dndTaskId)){\r\n\t\t\tresult.targetIndex += 1;\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tprevSiblingTarget: function prevSiblingTarget(dndTaskId, targetTaskId, store) {\r\n\t\tvar result = this.createDropTargetObject();\r\n\t\tresult.targetId = targetTaskId;\r\n\t\tresult.prevSibling = true;\r\n\t\tresult.targetParent = store.getParent(result.targetId);\r\n\t\tresult.targetIndex = store.getBranchIndex(result.targetId);\r\n\t\tif(store.getParent(dndTaskId) == result.targetParent && result.targetIndex > store.getBranchIndex(dndTaskId)){\r\n\t\t\tresult.targetIndex -= 1;\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tfirstChildTarget: function firstChildTarget(dndTaskId, targetTaskId, store) {\r\n\t\tvar result = this.createDropTargetObject();\r\n\t\tresult.targetId = targetTaskId;\r\n\t\tresult.targetParent = result.targetId;\r\n\t\tresult.targetIndex = 0;\r\n\t\tresult.child = true;\r\n\t\treturn result;\r\n\t},\r\n\tlastChildTarget: function lastChildTarget(dndTaskId, targetTaskId, store) {\r\n\t\tvar children = store.getChildren(targetTaskId);\r\n\t\tvar result = this.createDropTargetObject();\r\n\t\tresult.targetId = children[children.length - 1];\r\n\t\tresult.targetParent = targetTaskId;\r\n\t\tresult.targetIndex = children.length;\r\n\t\tresult.nextSibling = true;\r\n\t\treturn result;\r\n\t}\r\n};","/**\r\n * resolve dnd position of the task when gantt.config.order_branch_free = false\r\n */\r\n\r\nimport dropTarget from \"./drop_target\";\r\n\r\nfunction getLast(store){\r\n\tvar current = store.getNext();\r\n\twhile(store.exists(current)){\r\n\r\n\t\tvar next = store.getNext(current);\r\n\t\tif(!store.exists(next)){\r\n\t\t\treturn current;\r\n\t\t}else{\r\n\t\t\tcurrent = next;\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction findClosesTarget(dndTaskId, taskId, allowedLevel, store, up){\r\n\tvar prev = taskId;\r\n\twhile(store.exists(prev)){\r\n\t\tvar targetLevel = store.calculateItemLevel(store.getItem(prev));\r\n\t\tif((targetLevel === allowedLevel || targetLevel === (allowedLevel - 1)) && store.getBranchIndex(prev) > -1){\r\n\t\t\tbreak;\r\n\t\t}else {\r\n\t\t\tprev = up ? store.getPrev(prev) : store.getNext(prev);\r\n\t\t}\r\n\t}\r\n\r\n\tif(store.exists(prev)){\r\n\t\tif(store.calculateItemLevel(store.getItem(prev)) === allowedLevel){\r\n\t\t\treturn up ? dropTarget.nextSiblingTarget(dndTaskId, prev, store) : dropTarget.prevSiblingTarget(dndTaskId, prev, store);\r\n\t\t}else{\r\n\t\t\treturn dropTarget.firstChildTarget(dndTaskId, prev, store);\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction findTargetAbove(dndTaskId, taskId, allowedLevel, store){\r\n\treturn findClosesTarget(dndTaskId, taskId, allowedLevel, store, true);\r\n}\r\nfunction findTargetBelow(dndTaskId, taskId, allowedLevel, store){\r\n\treturn findClosesTarget(dndTaskId, taskId, allowedLevel, store, false);\r\n}\r\n\r\nexport default function getSameLevelDropPosition(dndTaskId, targetTaskId, relTargetPos, eventTop, store, level){\r\n\tvar result;\r\n\tif(targetTaskId !== store.$getRootId()){\r\n\t\tvar targetTask = store.getItem(targetTaskId);\r\n\t\tvar targetLevel = store.calculateItemLevel(targetTask);\r\n\t\tif(targetLevel === level){\r\n\t\t\tvar prevSibling = store.getPrevSibling(targetTaskId);\r\n\t\t\tif(relTargetPos < 0.5 && !prevSibling){\r\n\t\t\t\tresult = dropTarget.prevSiblingTarget(dndTaskId, targetTaskId, store);\r\n\t\t\t}else{\r\n\t\t\t\tif(relTargetPos < 0.5){\r\n\t\t\t\t\ttargetTaskId = prevSibling;\r\n\t\t\t\t}\r\n\t\t\t\tresult = dropTarget.nextSiblingTarget(dndTaskId, targetTaskId, store);\r\n\t\t\t}\r\n\t\t}else if(targetLevel > level){\r\n\t\t\tstore.eachParent(function(parent){\r\n\t\t\t\tif(store.calculateItemLevel(parent) === level){\r\n\t\t\t\t\ttargetTaskId = parent.id;\r\n\t\t\t\t}\r\n\t\t\t}, targetTask); \r\n\t\t\tresult = findTargetAbove(dndTaskId, targetTaskId, level, store);\r\n\t\t}else{\r\n\t\t\tvar targetAbove = findTargetAbove(dndTaskId, targetTaskId, level, store);\r\n\t\t\tvar targetBelow = findTargetBelow(dndTaskId, targetTaskId, level, store);\r\n\t\t\tresult = (relTargetPos < 0.5) ? targetAbove : targetBelow;\r\n\t\t}\r\n\t}else{\r\n\t\tvar rootId = store.$getRootId();\r\n\t\tvar rootLevel = store.getChildren(rootId);\r\n\t\tresult = dropTarget.createDropTargetObject();\r\n\t\tif(rootLevel.length && eventTop >= 0){\r\n\t\t\tresult = findTargetAbove(dndTaskId, getLast(store), level, store);\r\n\t\t}else{\r\n\t\t\tresult = findTargetBelow(dndTaskId, rootId, level, store);\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n};\r\n","import * as domHelpers from \"../../utils/dom_helpers\";\r\n\r\n/**\r\n * methods for highlighting current drag and drop position\r\n */\r\n\r\nfunction highlightPosition(target, root, grid){\r\n\tvar markerPos = getTaskMarkerPosition(target, grid);\r\n\t// setting position of row\r\n\troot.marker.style.left = markerPos.x + 9 + \"px\";\r\n\troot.marker.style.width = markerPos.width + \"px\";\r\n\troot.marker.style.overflow = \"hidden\";\r\n\tvar markerLine = root.markerLine;\r\n\tif(!markerLine){\r\n\t\tmarkerLine = document.createElement(\"div\");\r\n\t\tmarkerLine.className = \"gantt_drag_marker gantt_grid_dnd_marker\";\r\n\t\tmarkerLine.innerHTML = \"<div class='gantt_grid_dnd_marker_line'></div>\";\r\n\t\tmarkerLine.style.pointerEvents = \"none\";\r\n\t}\r\n\r\n\tif(target.child){\r\n\t\thighlightFolder(target, markerLine, grid);\r\n\t}else{\r\n\t\thighlightRow(target, markerLine, grid);\r\n\t}\r\n\r\n\tif(!root.markerLine){\r\n\t\tdocument.body.appendChild(markerLine);\r\n\t\troot.markerLine = markerLine;\r\n\t}\r\n}\r\n\r\nfunction removeLineHighlight(root){\r\n\tif(root.markerLine && root.markerLine.parentNode){\r\n\t\troot.markerLine.parentNode.removeChild(root.markerLine);\r\n\t}\r\n\troot.markerLine = null;\r\n}\r\n\r\nfunction highlightRow(target, markerLine, grid){\r\n\tvar linePos = getLineMarkerPosition(target, grid);\r\n\tvar maxBottom = grid.$grid_data.getBoundingClientRect().bottom + window.scrollY;\r\n\r\n\tmarkerLine.innerHTML = \"<div class='gantt_grid_dnd_marker_line'></div>\";\r\n\tmarkerLine.style.left = linePos.x + \"px\";\r\n\tmarkerLine.style.height = \"4px\";\r\n\r\n\tvar markerLineTop = linePos.y - 2;\r\n\tmarkerLine.style.top = markerLineTop + \"px\";\r\n\tmarkerLine.style.width = linePos.width + \"px\";\r\n\r\n\tif (markerLineTop > maxBottom) {\r\n\t\tmarkerLine.style.top = maxBottom + 'px';\r\n\t}\r\n\r\n\treturn markerLine;\r\n}\r\nfunction highlightFolder(target, markerFolder, grid){\r\n\tvar id = target.targetParent;\r\n\tvar pos = gridToPageCoordinates({x: 0, y: grid.getItemTop(id)}, grid);\r\n\tvar maxBottom = grid.$grid_data.getBoundingClientRect().bottom + window.scrollY;\r\n\r\n\tlet folderHighlightWidth = setWidthWithinContainer(grid.$gantt, grid.$grid_data.offsetWidth);\t\r\n\r\n\tmarkerFolder.innerHTML = \"<div class='gantt_grid_dnd_marker_folder'></div>\";\r\n\tmarkerFolder.style.width = folderHighlightWidth + \"px\";\r\n\tmarkerFolder.style.top = pos.y + \"px\";\r\n\tmarkerFolder.style.left = pos.x  + \"px\";\r\n\tmarkerFolder.style.height = grid.getItemHeight(id) + \"px\";\r\n\tif (pos.y > maxBottom) {\r\n\t\tmarkerFolder.style.top = maxBottom + 'px';\r\n\t}\r\n\r\n\treturn markerFolder;\r\n}\r\n\r\nfunction getLineMarkerPosition(target, grid){\r\n\tvar store = grid.$config.rowStore;\r\n\tvar pos = {x:0, y:0};\r\n\tvar indentNode = grid.$grid_data.querySelector(\".gantt_tree_indent\");\r\n\tvar indent = 15;\r\n\tvar level = 0;\r\n\tif(indentNode){\r\n\t\tindent = indentNode.offsetWidth;\r\n\t}\r\n\tvar iconWidth = 40;\r\n\tif(target.targetId !== store.$getRootId()){\r\n\t\tvar itemTop = grid.getItemTop(target.targetId);\r\n\t\tvar itemHeight = grid.getItemHeight(target.targetId);\r\n\t\tlevel = store.exists(target.targetId) ? store.calculateItemLevel(store.getItem(target.targetId)) : 0;\r\n\r\n\t\tif(target.prevSibling){\r\n\t\t\tpos.y = itemTop;\r\n\t\t}else if(target.nextSibling){\r\n\t\t\tvar childCount = 0;\r\n\t\t\tstore.eachItem(function(child){\r\n\t\t\t\tif(store.getIndexById(child.id) !== -1)\r\n\t\t\t\t\tchildCount++;\r\n\t\t\t}, target.targetId);\r\n\r\n\t\t\tpos.y = itemTop + itemHeight + childCount*itemHeight;\r\n\t\t}else {\r\n\t\t\tpos.y = itemTop + itemHeight;\r\n\t\t\tlevel += 1;\r\n\t\t}\r\n\t}\r\n\tpos.x = iconWidth + level * indent;\r\n\tpos.width = setWidthWithinContainer(grid.$gantt, Math.max(grid.$grid_data.offsetWidth - pos.x, 0), pos.x);\r\n\treturn gridToPageCoordinates(pos, grid);\r\n}\r\n\r\nfunction gridToPageCoordinates(pos, grid){\r\n\tvar gridPos = domHelpers.getNodePosition(grid.$grid_data);\r\n\tpos.x += gridPos.x + grid.$grid.scrollLeft;\r\n\tpos.y += gridPos.y - grid.$grid_data.scrollTop;\r\n\treturn pos;\r\n}\r\n\r\nfunction getTaskMarkerPosition(e, grid) {\r\n\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\tvar ePos = domHelpers.getRelativeEventPosition(e, grid.$grid_data);\r\n\t// row offset\r\n\tvar x = pos.x + grid.$grid.scrollLeft;\r\n\tvar y = ePos.y - 10;\r\n\r\n\tvar rowHeight = grid.getItemHeight(e.targetId);\r\n\t// prevent moving row out of grid_data container\r\n\tif (y < pos.y) y = pos.y;\r\n\tvar gridHeight = grid.getTotalHeight();\r\n\tif (y > pos.y + gridHeight - rowHeight) y = pos.y + gridHeight - rowHeight;\r\n\r\n\tpos.x = x;\r\n\tpos.y = y;\r\n\tpos.width = setWidthWithinContainer(grid.$gantt, pos.width, 9);\r\n\treturn pos;\r\n}\r\n\r\nfunction setWidthWithinContainer(gantt, width, offset = 0){\r\n\tconst containerSize = domHelpers.getNodePosition(gantt.$root);\r\n\tif (width > containerSize.width){\r\n\t\twidth = containerSize.width - offset - 2;\r\n\t}\r\n\treturn width;\r\n}\r\n\r\nexport default {\r\n\tremoveLineHighlight: removeLineHighlight,\r\n\thighlightPosition: highlightPosition\r\n};\r\n","import * as domHelpers from \"../utils/dom_helpers\";\r\nimport dropTarget from \"./tasks_grid_dnd_marker_helpers/drop_target\";\r\nimport getLockedLevelTarget from \"./tasks_grid_dnd_marker_helpers/locked_level\";\r\nimport getMultiLevelTarget from \"./tasks_grid_dnd_marker_helpers/multi_level\";\r\nimport higlighter from \"./tasks_grid_dnd_marker_helpers/highlight\";\r\nimport isPlaceholderTask from \"../../../utils/placeholder_task\";\r\n\r\nfunction _init_dnd(gantt, grid) {\r\n\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\tif(!grid.$config.bind || !gantt.getDatastore(grid.$config.bind)){\r\n\t\treturn;\r\n\t}\r\n\r\n\tfunction locate(e){\r\n\t\treturn domHelpers.locateAttribute(e, grid.$config.item_attribute);\r\n\t}\r\n\r\n\tfunction getStore(){\r\n\t\treturn gantt.getDatastore(grid.$config.bind);\r\n\t}\r\n\r\n\tfunction checkPlaceholderTask(id){\r\n\t\treturn isPlaceholderTask(id, gantt, getStore());\r\n\t}\r\n\r\n\tvar dnd = new DnD(grid.$grid_data, {updates_per_second: 60});\r\n\tif (gantt.defined(grid.$getConfig().dnd_sensitivity))\r\n\t\tdnd.config.sensitivity = grid.$getConfig().dnd_sensitivity;\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tif (!el) return false;\r\n\t\tif (gantt.hideQuickInfo) gantt.hideQuickInfo();\r\n\t\tif (domHelpers.closest(e.target, \".gantt_grid_editor_placeholder\")){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar id = el.getAttribute(grid.$config.item_attribute);\r\n\t\tvar datastore = grid.$config.rowStore;\r\n\t\tvar task = datastore.getItem(id);\r\n\r\n\t\tif (gantt.isReadonly(task) || checkPlaceholderTask(id))\r\n\t\t\treturn false;\r\n\r\n\t\tdnd.config.initial_open_state = task.$open;\r\n\t\tif (!gantt.callEvent(\"onRowDragStart\", [id, e.target || e.srcElement, e])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\r\n\t\tdnd.config.marker.innerHTML = el.outerHTML;\r\n\t\tvar element = dnd.config.marker.firstChild;\r\n\t\tif(element){\r\n\t\t\tdnd.config.marker.style.opacity = 0.4;\r\n\t\t\telement.style.position = \"static\";\r\n\t\t\telement.style.pointerEvents = \"none\";\r\n\t\t}\r\n\r\n\t\tdnd.config.id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar store = grid.$config.rowStore;\r\n\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\tdnd.config.level = store.calculateItemLevel(task);\r\n\t\tdnd.config.drop_target = dropTarget.createDropTargetObject({\r\n\t\t\ttargetParent: store.getParent(task.id),\r\n\t\t\ttargetIndex: store.getBranchIndex(task.id),\r\n\t\t\ttargetId: task.id,\r\n\t\t\tnextSibling: true\r\n\t\t});\r\n\r\n\t\ttask.$open = false;\r\n\t\ttask.$transparent = true;\r\n\t\tthis.refreshData();\r\n\t}, gantt));\r\n\r\n\tfunction getTargetTaskId(e){\r\n\t\tvar y = domHelpers.getRelativeEventPosition(e, grid.$grid_data).y;\r\n\t\tvar store = grid.$config.rowStore;\r\n\r\n\t\tif (!document.doctype){\r\n\t\t\ty += window.scrollY;\r\n\t\t}\r\n\t\ty = y || 0;\r\n\r\n\t\t// limits for the marker according to the layout layer\r\n\t\tvar scrollPos = grid.$state.scrollTop || 0;\r\n\t\tvar maxBottom = gantt.$grid_data.getBoundingClientRect().height + scrollPos + window.scrollY;\r\n\t\tvar minTop = scrollPos;\r\n\r\n\t\tvar firstVisibleTaskIndex = grid.getItemIndexByTopPosition(grid.$state.scrollTop);\r\n\t\tif (!store.exists(firstVisibleTaskIndex)){\r\n\t\t\tfirstVisibleTaskIndex = store.countVisible() - 1;\r\n\t\t}\r\n\t\tif (firstVisibleTaskIndex < 0) {\r\n\t\t\treturn store.$getRootId();\r\n\t\t}\r\n\r\n\t\tvar firstVisibleTaskId = store.getIdByIndex(firstVisibleTaskIndex);\r\n\r\n\t\tvar firstVisibleTaskPos = grid.$state.scrollTop / grid.getItemHeight(firstVisibleTaskId);\r\n\t\tvar hiddenTaskPart = firstVisibleTaskPos - Math.floor(firstVisibleTaskPos);\r\n\t\tif (hiddenTaskPart > 0.1 && hiddenTaskPart < 0.9) {\r\n\t\t\tmaxBottom = maxBottom - grid.getItemHeight(firstVisibleTaskId) * hiddenTaskPart;\r\n\t\t\tminTop = minTop + grid.getItemHeight(firstVisibleTaskId) * (1 - hiddenTaskPart);\r\n\t\t}\r\n\r\n\t\t// GS-715. The placeholder task row shouldn't be draggable below the Gantt container\r\n\t\tconst gridPosition = domHelpers.getNodePosition(grid.$grid_data);\r\n\t\tconst gridBottom = gridPosition.y + gridPosition.height;\r\n\t\tconst placeholderRowHeight = dnd.config.marker.offsetHeight;\r\n\t\tif (y + placeholderRowHeight + window.scrollY >= maxBottom){\r\n\t\t\tdnd.config.marker.style.top = gridBottom - placeholderRowHeight\t+ \"px\";\r\n\t\t}\r\n\r\n\t\tif (y >= maxBottom) {\r\n\t\t\ty = maxBottom;\r\n\t\t} else if (y <= minTop) {\r\n\t\t\ty = minTop;\r\n\t\t\tdnd.config.marker.style.top = gridPosition.y + \"px\";\r\n\t\t}\r\n\r\n\t\tvar index = grid.getItemIndexByTopPosition(y);\r\n\r\n\t\tif (index > store.countVisible() - 1 || index < 0) {\r\n\t\t\treturn store.$getRootId();\r\n\t\t}\r\n\r\n\t\tvar targetId = store.getIdByIndex(index);\r\n\t\tif (checkPlaceholderTask(targetId)) {\r\n\t\t\treturn store.getPrevSibling(targetId);\r\n\t\t}\r\n\r\n\t\treturn store.getIdByIndex(index);\r\n\t}\r\n\r\n\tfunction getDropPosition(e){\r\n\t\tvar targetTaskId = getTargetTaskId(e);\r\n\t\tvar relTargetPos = null;\r\n\t\tvar store = grid.$config.rowStore;\r\n\t\tvar config = grid.$getConfig();\r\n\t\tvar lockLevel = !config.order_branch_free;\r\n\r\n\t\tvar eventTop = domHelpers.getRelativeEventPosition(e, grid.$grid_data).y;\r\n\t\tif (!document.doctype){\r\n\t\t\teventTop += window.scrollY;\r\n\t\t}\r\n\r\n\t\tif(targetTaskId !== store.$getRootId()) {\r\n\t\t\tvar rowTop = grid.getItemTop(targetTaskId);\r\n\t\t\tvar rowHeight = grid.getItemHeight(targetTaskId);\r\n\t\t\trelTargetPos = (eventTop - rowTop) / rowHeight;\r\n\t\t}\r\n\r\n\t\tvar result;\r\n\t\tif(!lockLevel){\r\n\t\t\tresult = getMultiLevelTarget(dnd.config.id, targetTaskId, relTargetPos, eventTop, store);\r\n\t\t}else{\r\n\t\t\tresult = getLockedLevelTarget(dnd.config.id, targetTaskId, relTargetPos, eventTop, store, dnd.config.level);\r\n\t\t\tif(result && result.targetParent && checkPlaceholderTask(result.targetParent)){\r\n\t\t\t\ttargetTaskId = store.getPrevSibling(result.targetParent);\r\n\t\t\t\tresult = getLockedLevelTarget(dnd.config.id, targetTaskId, relTargetPos, eventTop, store, dnd.config.level);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function (obj, e) {\r\n\t\tvar target = getDropPosition(e);\r\n\r\n\t\tif(!target ||\r\n\t\t\tgantt.callEvent(\"onBeforeRowDragMove\", [dnd.config.id, target.targetParent, target.targetIndex]) === false){\r\n\t\t\t\ttarget = dropTarget.createDropTargetObject(dnd.config.drop_target);\r\n\t\t\t}\r\n\r\n\t\thiglighter.highlightPosition(target, dnd.config, grid);\r\n\t\tdnd.config.drop_target = target;\r\n\t\tgantt._waiAria.reorderMarkerAttr(dnd.config.marker);\r\n\r\n\t\tthis.callEvent(\"onRowDragMove\", [dnd.config.id, target.targetParent, target.targetIndex]);\r\n\t\treturn true;\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function () {\r\n\t\tvar store = grid.$config.rowStore;\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\r\n\t\thiglighter.removeLineHighlight(dnd.config);\r\n\r\n\t\ttask.$transparent = false;\r\n\t\ttask.$open = dnd.config.initial_open_state;\r\n\t\tvar target = dnd.config.drop_target;\r\n\r\n\t\tif (this.callEvent(\"onBeforeRowDragEnd\", [dnd.config.id, target.targetParent, target.targetIndex]) === false) {\r\n\t\t\ttask.$drop_target = null;\r\n\t\t} else {\r\n\t\t\tstore.move(dnd.config.id, target.targetIndex, target.targetParent);\r\n\t\t\tgantt.render();\r\n\t\t\tthis.callEvent(\"onRowDragEnd\", [dnd.config.id, target.targetParent, target.targetIndex]);\r\n\t\t}\r\n\t\tstore.refresh(task.id);\r\n\t}, gantt));\r\n}\r\n\r\nexport default {\r\n\tinit: _init_dnd\r\n};","/**\r\n * resolve dnd position of the task when gantt.config.order_branch_free = true\r\n */\r\n\r\nimport dropTarget from \"./drop_target\";\r\n\r\nexport default function getMultiLevelDropPosition(dndTaskId, targetTaskId, relTargetPos, eventTop, store){\r\n\tvar result;\r\n\r\n\tif(targetTaskId !== store.$getRootId()){\r\n\t\tif(relTargetPos < 0.25){\r\n\t\t\tresult = dropTarget.prevSiblingTarget(dndTaskId, targetTaskId, store);\r\n\t\t}else if(relTargetPos > 0.60 && !(store.hasChild(targetTaskId) && store.getItem(targetTaskId).$open)){\r\n\t\t\tresult = dropTarget.nextSiblingTarget(dndTaskId, targetTaskId, store);\r\n\t\t}else {\r\n\t\t\tresult = dropTarget.firstChildTarget(dndTaskId, targetTaskId, store);\r\n\t\t}\r\n\t}else{\r\n\t\tvar rootId = store.$getRootId();\r\n\t\tif(store.hasChild(rootId) && eventTop >= 0){\r\n\t\t\tresult = dropTarget.lastChildTarget(dndTaskId, rootId, store);\r\n\t\t}else{\r\n\t\t\tresult = dropTarget.firstChildTarget(dndTaskId, rootId, store);\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n};","import * as utils from \"../../../utils/utils\";\r\nimport rowDnd from \"./tasks_grid_dnd\";\r\nimport rowDndMarker from \"./tasks_grid_dnd_marker\";\r\nimport mouseEventContainer from \"../mouse_event_container\";\r\n\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\treturn {\r\n\t\t\tonCreated: function (grid) {\r\n\t\t\t\tgrid.$config = utils.mixin(grid.$config, {\r\n\t\t\t\t\tbind: \"task\"\r\n\t\t\t\t});\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendGantt(grid);\r\n\t\t\t\t\tgantt.ext.inlineEditors = gantt.ext._inlineEditors.createEditors(grid);\r\n\t\t\t\t\tgantt.ext.inlineEditors.init();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._mouseDelegates = mouseEventContainer(gantt);\r\n\t\t\t},\r\n\t\t\tonInitialized: function (grid) {\r\n\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\tif (config.order_branch) {\r\n\t\t\t\t\tif(config.order_branch == \"marker\"){\r\n\t\t\t\t\t\trowDndMarker.init(grid.$gantt, grid);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\trowDnd.init(grid.$gantt, grid);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initEvents(grid, gantt);\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendDom(grid);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (grid) {\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\t// GS-1288. We need to only detach the store and its events without detaching the\r\n\t\t\t\t\t// inline editor's events. Otherwise, we won't be able to access them\r\n\t\t\t\t\tgantt.ext.inlineEditors.detachStore();\r\n\t\t\t\t}\r\n\t\t\t\tthis.clearEvents(grid, gantt);\r\n\t\t\t},\r\n\r\n\t\t\tinitEvents: function (grid, gantt) {\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_row\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tconst config = grid.$getConfig();\r\n\t\t\t\t\tif (id !== null) {\r\n\t\t\t\t\t\tconst task = this.getTask(id);\r\n\t\t\t\t\t\tif (config.scroll_on_click) {\r\n\t\t\t\t\t\t\tconst notOpenIcon = !gantt._is_icon_open_click(e);\r\n\t\t\t\t\t\t\tconst visibleTimeline = gantt.$ui.getView(\"timeline\");\r\n\t\t\t\t\t\t\t// don't need to scroll to the date when the timeline is not visible\r\n\t\t\t\t\t\t\t// or when we click on the open/close icon\r\n\t\t\t\t\t\t\tif (notOpenIcon && visibleTimeline){\r\n\t\t\t\t\t\t\t\tthis.showDate(task.start_date);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgantt.callEvent(\"onTaskRowClick\", [id, trg]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_grid_head_cell\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar column = trg.getAttribute(\"data-column-id\");\r\n\r\n\t\t\t\t\tif (!gantt.callEvent(\"onGridHeaderClick\", [column, e]))\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\t\t\tif (column == \"add\") {\r\n\t\t\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\t\t\t\tmouseEvents.callHandler(\"click\", \"gantt_add\", grid.$grid, [e, config.root_id]);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (config.sort && column) { // GS-929: if there is no column name, we cannot sort the column\r\n\t\t\t\t\t\tvar sorting_method = column,\r\n\t\t\t\t\t\t\tconf;\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < config.columns.length; i++) {\r\n\t\t\t\t\t\t\tif (config.columns[i].name == column) {\r\n\t\t\t\t\t\t\t\tconf = config.columns[i];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (conf && conf.sort !== undefined && conf.sort !== true) {\r\n\t\t\t\t\t\t\tsorting_method = conf.sort;\r\n\r\n\t\t\t\t\t\t\tif (!sorting_method) { // column sort property 'false', no sorting\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar sort = (this._sort && this._sort.direction && this._sort.name == column) ? this._sort.direction : \"desc\";\r\n\t\t\t\t\t\t// invert sort direction\r\n\t\t\t\t\t\tsort = (sort == \"desc\") ? \"asc\" : \"desc\";\r\n\t\t\t\t\t\tthis._sort = {\r\n\t\t\t\t\t\t\tname: column,\r\n\t\t\t\t\t\t\tdirection: sort\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthis.sort(sorting_method, sort == \"desc\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_add\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\t\tif (config.readonly) return;\r\n\r\n\t\t\t\t\tvar item = {};\r\n\t\t\t\t\tthis.createTask(item, id ? id : gantt.config.root_id);\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tclearEvents: function(grid, gantt){\r\n\t\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\t\tthis._mouseDelegates = null;\r\n\t\t\t},\r\n\r\n\t\t\textendDom: function(grid){\r\n\t\t\t\tgantt.$grid = grid.$grid;\r\n\t\t\t\tgantt.$grid_scale = grid.$grid_scale;\r\n\t\t\t\tgantt.$grid_data = grid.$grid_data;\r\n\t\t\t},\r\n\t\t\textendGantt: function(grid){\r\n\t\t\t\tgantt.getGridColumns = gantt.bind(grid.getGridColumns, grid);\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeStart\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeStart\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResize\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResize\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeEnd\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeEnd\", arguments);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeComplete\", function(columns, totalWidth){\r\n\t\t\t\t\tgantt.config.grid_width = totalWidth;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgrid.attachEvent(\"onBeforeRowResize\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onBeforeRowResize\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onRowResize\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onRowResize\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onBeforeRowResizeEnd\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onBeforeRowResizeEnd\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onAfterRowResize\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onAfterRowResize\", arguments);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n})();\r\n\r\nexport default initializer;","import * as domHelpers from \"../utils/dom_helpers\";\r\nimport * as utils from \"../../../utils/utils\";\r\nimport timeout from \"../../../utils/timeout\";\r\nimport * as helpers from \"../../../utils/helpers\";\r\n\r\nfunction createTaskDND(timeline, gantt) {\r\n\tvar services = gantt.$services;\r\n\treturn {\r\n\t\tdrag: null,\r\n\t\tdragMultiple: {},\r\n\t\t_events: {\r\n\t\t\tbefore_start: {},\r\n\t\t\tbefore_finish: {},\r\n\t\t\tafter_finish: {}\r\n\t\t},\r\n\t\t_handlers: {},\r\n\t\tinit: function() {\r\n\t\t\tthis._domEvents = gantt._createDomEventScope();\r\n\t\t\tthis.clear_drag_state();\r\n\t\t\tvar drag = gantt.config.drag_mode;\r\n\t\t\tthis.set_actions();\r\n\r\n\t\t\tvar stateService = services.getService(\"state\");\r\n\t\t\tstateService.registerProvider(\"tasksDnd\", utils.bind(function() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdrag_id : this.drag ? this.drag.id : undefined,\r\n\t\t\t\t\tdrag_mode : this.drag ? this.drag.mode : undefined,\r\n\t\t\t\t\tdrag_from_start : this.drag ? this.drag.left : undefined\r\n\t\t\t\t};\r\n\t\t\t}, this));\r\n\r\n\t\t\tvar evs = {\r\n\t\t\t\t\"before_start\": \"onBeforeTaskDrag\",\r\n\t\t\t\t\"before_finish\": \"onBeforeTaskChanged\",\r\n\t\t\t\t\"after_finish\": \"onAfterTaskDrag\"\r\n\t\t\t};\r\n\t\t\t//for now, all drag operations will trigger the same events\r\n\t\t\tfor (var stage in this._events) {\r\n\t\t\t\tfor (var mode in drag) {\r\n\t\t\t\t\tthis._events[stage][mode] = evs[stage];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._handlers[drag.move] = this._move;\r\n\t\t\tthis._handlers[drag.resize] = this._resize;\r\n\t\t\tthis._handlers[drag.progress] = this._resize_progress;\r\n\t\t},\r\n\t\tset_actions: function() {\r\n\t\t\tvar data = timeline.$task_data;\r\n\t\t\tthis._domEvents.attach(data, \"mousemove\", gantt.bind(function(e) {\r\n\t\t\t\tthis.on_mouse_move(e);\r\n\t\t\t}, this));\r\n\t\t\tthis._domEvents.attach(data, \"mousedown\", gantt.bind(function(e) {\r\n\t\t\t\tthis.on_mouse_down(e);\r\n\t\t\t}, this));\r\n\t\t\tthis._domEvents.attach(document.body, \"mouseup\", gantt.bind(function(e) {\r\n\t\t\t\tthis.on_mouse_up(e);\r\n\t\t\t}, this));\r\n\t\t},\r\n\r\n\t\t_getPositioningContext: function(task) {\r\n\t\t\tif(timeline._getPositioningContext) {\r\n\t\t\t\treturn timeline._getPositioningContext(task);\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\r\n\t\tclear_drag_state: function() {\r\n\t\t\tthis.drag = {\r\n\t\t\t\tid: null,\r\n\t\t\t\tmode: null,\r\n\t\t\t\tpos: null,\r\n\t\t\t\tstart_x: null,\r\n\t\t\t\tstart_y: null,\r\n\t\t\t\tobj: null,\r\n\t\t\t\tleft: null\r\n\t\t\t};\r\n\t\t\tthis.dragMultiple = {};\r\n\t\t},\r\n\t\t_resize: function(task, shift, drag) {\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar coords_x = this._drag_task_coords(task, drag);\r\n\t\t\tif (drag.left) {\r\n\t\t\t\ttask.start_date = gantt.dateFromPos(coords_x.start + shift, this._getPositioningContext(task));\r\n\t\t\t\tif (!task.start_date) {\r\n\t\t\t\t\ttask.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\ttask.end_date = gantt.dateFromPos(coords_x.end + shift, this._getPositioningContext(task));\r\n\t\t\t\tif (!task.end_date) {\r\n\t\t\t\t\ttask.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar minDurationInUnits = this._calculateMinDuration(cfg.min_duration, cfg.duration_unit);\r\n\t\t\tif (task.end_date - task.start_date < cfg.min_duration) {\r\n\t\t\t\tif (drag.left)\r\n\t\t\t\t\ttask.start_date = gantt.calculateEndDate(task.end_date, -minDurationInUnits, cfg.duration_unit, task);\r\n\t\t\t\telse\r\n\t\t\t\t\ttask.end_date = gantt.calculateEndDate(task.start_date, minDurationInUnits, cfg.duration_unit, task);\r\n\t\t\t}\r\n\t\t\tgantt._init_task_timing(task);\r\n\t\t},\r\n\t\t_calculateMinDuration: function(duration, unit) {\r\n\t\t\tvar inMs = {\r\n\t\t\t\t\"minute\": 60000,\r\n\t\t\t\t\"hour\": 3600000,\r\n\t\t\t\t\"day\": 86400000,\r\n\t\t\t\t\"week\": 604800000,\r\n\t\t\t\t\"month\": 2419200000,\r\n\t\t\t\t\"year\": 31356000000\r\n\t\t\t};\r\n\t\t\treturn Math.ceil(duration / inMs[unit]);\r\n\t\t},\r\n\t\t_resize_progress: function(task, shift, drag) {\r\n\t\t\tvar coords_x = this._drag_task_coords(task, drag);\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar diffValue = !config.rtl ? (drag.pos.x - coords_x.start) : (coords_x.start - drag.pos.x);\r\n\r\n\t\t\tvar diff = Math.max(0, diffValue);\r\n\t\t\ttask.progress = Math.min(1, diff / Math.abs(coords_x.end - coords_x.start));\r\n\t\t},\r\n\t\t_find_max_shift: function(dragItems, shift) {\r\n\t\t\tvar correctShift;\r\n\t\t\tfor (var i in dragItems) {\r\n\t\t\t\tvar drag = dragItems[i];\r\n\t\t\t\tvar task = gantt.getTask(drag.id);\r\n\t\t\t\tif (task.unscheduled){\r\n\t\t\t\t\t// GS-1674. There is no need to check the tasks that are ignored by projects\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar coords_x = this._drag_task_coords(task, drag);\r\n\t\t\t\tvar minX = gantt.posFromDate(new Date(gantt.getState().min_date), this._getPositioningContext(task));\r\n\t\t\t\tvar maxX = gantt.posFromDate(new Date(gantt.getState().max_date), this._getPositioningContext(task));\r\n\r\n\t\t\t\tif (coords_x.end + shift > maxX) {\r\n\t\t\t\t\tvar maxShift = maxX - coords_x.end;\r\n\t\t\t\t\tif (maxShift < correctShift || correctShift === undefined) {\r\n\t\t\t\t\t\tcorrectShift = maxShift;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (coords_x.start + shift < minX) {\r\n\t\t\t\t\tvar minShift = minX - coords_x.start;\r\n\t\t\t\t\tif (minShift > correctShift || correctShift === undefined) {\r\n\t\t\t\t\t\tcorrectShift = minShift;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn correctShift;\r\n\t\t},\r\n\t\t_move: function(task, shift, drag, multipleDragShift) {\r\n\t\t\tvar coords_x = this._drag_task_coords(task, drag);\r\n\t\t\tvar new_start = null,\r\n\t\t\tnew_end = null;\r\n\t\t\t// GS-454: If we drag multiple tasks, rely on the dates instead of timeline coordinates\r\n\t\t\tif (multipleDragShift){\r\n\t\t\t\tnew_start = new Date(+drag.obj.start_date + multipleDragShift),\r\n\t\t\t\tnew_end = new Date(+drag.obj.end_date + multipleDragShift);\r\n\t\t\t} else {\r\n\t\t\t\tnew_start = gantt.dateFromPos(coords_x.start + shift, this._getPositioningContext(task)),\r\n\t\t\t\tnew_end = gantt.dateFromPos(coords_x.end + shift, this._getPositioningContext(task));\r\n\t\t\t}\r\n\t\t\tif (!new_start) {\r\n\t\t\t\ttask.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\ttask.end_date = gantt.dateFromPos(gantt.posFromDate(task.start_date) + (coords_x.end - coords_x.start), this._getPositioningContext(task));\r\n\t\t\t} else if (!new_end) {\r\n\t\t\t\ttask.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\ttask.start_date = gantt.dateFromPos(gantt.posFromDate(task.end_date) - (coords_x.end - coords_x.start), this._getPositioningContext(task));\r\n\t\t\t} else {\r\n\t\t\t\ttask.start_date = new_start;\r\n\t\t\t\ttask.end_date = new_end;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_drag_task_coords: function(t, drag) {\r\n\t\t\tvar start = drag.obj_s_x = drag.obj_s_x || gantt.posFromDate(t.start_date, this._getPositioningContext(t));\r\n\t\t\tvar end = drag.obj_e_x = drag.obj_e_x || gantt.posFromDate(t.end_date, this._getPositioningContext(t));\r\n\t\t\treturn {\r\n\t\t\t\tstart: start,\r\n\t\t\t\tend: end\r\n\t\t\t};\r\n\t\t},\r\n\t\t_mouse_position_change: function(oldPos, newPos) {\r\n\t\t\tvar dx = oldPos.x - newPos.x,\r\n\t\t\t\tdy = oldPos.y - newPos.y;\r\n\t\t\treturn Math.sqrt(dx * dx + dy * dy);\r\n\t\t},\r\n\t\t_is_number: function(n) {\r\n\t\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\r\n\t\t},\r\n\r\n\t\ton_mouse_move: function(e) {\r\n\t\t\tif (this.drag.start_drag) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\tvar sX = this.drag.start_drag.start_x,\r\n\t\t\t\t\tsY = this.drag.start_drag.start_y;\r\n\r\n\t\t\t\tif ((Date.now() - this.drag.timestamp > 50) ||\r\n\t\t\t\t\t(this._is_number(sX) && this._is_number(sY) && this._mouse_position_change({\r\n\t\t\t\t\t\tx: sX,\r\n\t\t\t\t\t\ty: sY\r\n\t\t\t\t\t}, pos) > 20)) {\r\n\t\t\t\t\tthis._start_dnd(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar drag = this.drag;\r\n\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tif (!timeout(this, 40))//limit update frequency\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis._update_on_move(e);\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_update_item_on_move: function(shift, id, mode, drag, e, multipleDragShift) {\r\n\t\t\tvar task = gantt.getTask(id);\r\n\t\t\tvar original = gantt.mixin({}, task);\r\n\t\t\tvar copy = gantt.mixin({}, task);\r\n\t\t\tthis._handlers[mode].apply(this, [copy, shift, drag, multipleDragShift]);\r\n\t\t\tgantt.mixin(task, copy, true);\r\n\t\t\t//gantt._update_parents(drag.id, true);\r\n\t\t\tgantt.callEvent(\"onTaskDrag\", [task.id, mode, copy, original, e]);\r\n\t\t\tgantt.mixin(task, copy, true);\r\n\t\t\tgantt.refreshTask(id);\r\n\t\t},\r\n\r\n\t\t_update_on_move: function(e) {\r\n\t\t\tvar drag = this.drag;\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\r\n\t\t\t\tif (drag.pos && drag.pos.x == pos.x)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tdrag.pos = pos;\r\n\r\n\t\t\t\tconst task = gantt.getTask(drag.id);\r\n\r\n\t\t\t\tvar curr_date = gantt.dateFromPos(pos.x, this._getPositioningContext(task));\r\n\t\t\t\tif (!curr_date || isNaN(curr_date.getTime()))\r\n\t\t\t\t\treturn;\r\n\r\n\r\n\t\t\t\tvar shift = pos.x - drag.start_x;\r\n\t\t\t\t\r\n\t\t\t\tif (this._handlers[drag.mode]) {\r\n\t\t\t\t\tif (drag.mode === config.drag_mode.move) {\r\n\t\t\t\t\t\tvar dragHash = {};\r\n\r\n\t\t\t\t\t\tif (this._isMultiselect()) {\r\n\t\t\t\t\t\t\tvar selectedTasksIds = gantt.getSelectedTasks();\r\n\t\t\t\t\t\t\tif (selectedTasksIds.indexOf(drag.id) >= 0) {\r\n\t\t\t\t\t\t\t\tdragHash = this.dragMultiple;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar dragProject = false;\r\n\t\t\t\t\t\tif (gantt.isSummaryTask(task) && gantt.config.drag_project) {\r\n\t\t\t\t\t\t\tvar initialDrag = {};\r\n\t\t\t\t\t\t\tinitialDrag[drag.id] = utils.copy(drag);\r\n\t\t\t\t\t\t\tdragProject = true;\r\n\t\t\t\t\t\t\tdragHash = utils.mixin(initialDrag, this.dragMultiple);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar maxShift = this._find_max_shift(dragHash, shift);\r\n\t\t\t\t\t\tif (maxShift !== undefined) {\r\n\t\t\t\t\t\t\tshift = maxShift;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis._update_item_on_move(shift, drag.id, drag.mode, drag, e);\r\n\r\n\t\t\t\t\t\tlet multipleDragShift;\r\n\t\t\t\t\t\tif (maxShift === undefined) {\r\n\t\t\t\t\t\t\t// GS-2593. If the timeline is repainted during the drag (infinite scale scenario)\r\n\t\t\t\t\t\t\t// we need to update the initial drag position to correctly update\r\n\t\t\t\t\t\t\t// the position of other dragged tasks\r\n\t\t\t\t\t\t\tconst newStartPos = gantt.posFromDate(drag.obj.start_date, this._getPositioningContext(drag.obj));\r\n\t\t\t\t\t\t\tconst newEndPos = gantt.posFromDate(drag.obj.end_date, this._getPositioningContext(drag.obj));\r\n\t\t\t\t\t\t\t// calculate the offset only when the drag started\r\n\t\t\t\t\t\t\tif (drag.handle_offset === undefined){\r\n\t\t\t\t\t\t\t\tconst width = newEndPos - newStartPos;\r\n\t\t\t\t\t\t\t\tconst dragPos = drag.start_x - newStartPos;\r\n\t\t\t\t\t\t\t\tdrag.handle_offset = dragPos / width;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconst newWidth = Math.abs(newEndPos - newStartPos);\r\n\t\t\t\t\t\t\tlet dragX = newStartPos + newWidth * drag.handle_offset;\r\n\r\n\t\t\t\t\t\t\t// GS-454: Calculate the date shift in milliseconds instead of pixels\r\n\t\t\t\t\t\t\tconst shiftDate = gantt.dateFromPos(dragX, this._getPositioningContext(drag.obj));\r\n\t\t\t\t\t\t\tmultipleDragShift = curr_date - shiftDate;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (var i in dragHash) {\r\n\t\t\t\t\t\t\tvar childDrag = dragHash[i];\r\n\t\t\t\t\t\t\tif(dragProject && childDrag.id != drag.id){\r\n\t\t\t\t\t\t\t\tgantt._bulk_dnd = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis._update_item_on_move(shift, childDrag.id, childDrag.mode, childDrag, e, multipleDragShift);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgantt._bulk_dnd = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// for resize and progress\r\n\t\t\t\t\t\tthis._update_item_on_move(shift, drag.id, drag.mode, drag, e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt._update_parents(drag.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ton_mouse_down: function(e, src) {\r\n\t\t\t// on Mac we do not get onmouseup event when clicking right mouse button leaving us in dnd state\r\n\t\t\t// let's ignore right mouse button then\r\n\t\t\tif (e.button == 2 && e.button !== undefined)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar id = gantt.locate(e);\r\n\t\t\tvar task = null;\r\n\t\t\tif (gantt.isTaskExists(id)) {\r\n\t\t\t\ttask = gantt.getTask(id);\r\n\t\t\t}\r\n\r\n\t\t\tif (gantt.isReadonly(task) || this.drag.mode) return;\r\n\r\n\t\t\tthis.clear_drag_state();\r\n\r\n\t\t\tsrc = src || (e.target || e.srcElement);\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tvar drag = this._get_drag_mode(className, src);\r\n\r\n\t\t\tif (!className || !drag) {\r\n\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\t\t\t\telse\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!drag) {\r\n\t\t\t\tif (gantt.checkEvent(\"onMouseDown\") && gantt.callEvent(\"onMouseDown\", [className.split(\" \")[0]])) {\r\n\t\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (drag.mode && drag.mode != config.drag_mode.ignore && config[\"drag_\" + drag.mode]) {\r\n\t\t\t\t\tid = gantt.locate(src);\r\n\t\t\t\t\ttask = gantt.copy(gantt.getTask(id) || {});\r\n\r\n\t\t\t\t\tif (gantt.isReadonly(task)) {\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ((gantt.isSummaryTask(task) && !(task.auto_scheduling === false) && !config.drag_project) && drag.mode != config.drag_mode.progress) {//only progress drag is allowed for tasks with flexible duration\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdrag.id = id;\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\t\tdrag.start_x = pos.x;\r\n\t\t\t\t\tdrag.start_y = pos.y;\r\n\t\t\t\t\tdrag.obj = task;\r\n\t\t\t\t\tthis.drag.start_drag = drag;\r\n\t\t\t\t\tthis.drag.timestamp = Date.now();\r\n\r\n\t\t\t\t} else\r\n\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_dnd_scale_time: function(task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar unit = gantt.getScale().unit,\r\n\t\t\t\tstep = gantt.getScale().step;\r\n\t\t\tif (!config.round_dnd_dates) {\r\n\t\t\t\tunit = 'minute';\r\n\t\t\t\tstep = config.time_step;\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixStart(task) {\r\n\t\t\t\tif (!gantt.config.correct_work_time)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(task.start_date, undefined, task))\r\n\t\t\t\t\ttask.start_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\t\tduration: -1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixEnd(task) {\r\n\t\t\t\tif (!gantt.config.correct_work_time)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(new Date(task.end_date - 1), undefined, task))\r\n\t\t\t\t\ttask.end_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\t\tduration: 1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconst dndContext = timeline._getPositioningContext(task);\r\n\r\n\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\tif (drag.left) {\r\n\t\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\r\n\t\t\t\t\tif(dndContext && dndContext.calendar){\r\n\t\t\t\t\t\ttask.start_date = dndContext.calendar.getClosestWorkTime({date: task.start_date, dir:\"future\"});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfixStart(task);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask.end_date = gantt.roundDate({date: task.end_date, unit: unit, step: step});\r\n\t\t\t\t\tif(dndContext && dndContext.calendar){\r\n\t\t\t\t\t\ttask.end_date = dndContext.calendar.getClosestWorkTime({date: task.end_date});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfixEnd(task);\r\n\t\t\t\t}\r\n\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\t\t\t\r\n\t\t\t\tif(dndContext && dndContext.calendar){\r\n\t\t\t\t\ttask.start_date = dndContext.calendar.getClosestWorkTime({date: task.start_date, dir:\"future\"});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfixStart(task);\r\n\t\t\t\ttask.end_date = gantt.calculateEndDate(task);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_working_times: function(task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar drag = drag || {mode: config.drag_mode.move};\r\n\r\n\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\tif (drag.left) {\r\n\t\t\t\t\ttask.start_date = gantt.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask.end_date = gantt.getClosestWorkTime({date: task.end_date, dir: 'past', task: task});\r\n\t\t\t\t}\r\n\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\tgantt.correctTaskWorkTime(task);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_finalize_mouse_up: function(taskId, config, drag, e) {\r\n\t\t\tvar task = gantt.getTask(taskId);\r\n\r\n\t\t\tif (config.work_time && config.correct_work_time) {\r\n\t\t\t\tthis._fix_working_times(task, drag);\r\n\t\t\t}\r\n\r\n\t\t\tthis._fix_dnd_scale_time(task, drag);\r\n\r\n\t\t\tif (!this._fireEvent(\"before_finish\", drag.mode, [taskId, drag.mode, gantt.copy(drag.obj), e])) {\r\n\t\t\t\t//drag.obj._dhx_changed = false;\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\tif (taskId == drag.id) {\r\n\t\t\t\t\tdrag.obj._dhx_changed = false;\r\n\t\t\t\t\tgantt.mixin(task, drag.obj, true);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tgantt.refreshTask(task.id);\r\n\t\t\t\t// GS-2013. Repaint parent projects when the drag is cancelled\r\n\t\t\t\tif (task.$level > 100){\r\n\t\t\t\t\t// When there are too many tasks to repaint, it is better to repaint Gantt\r\n\t\t\t\t\tlet shouldRepaint = false;\r\n\t\t\t\t\tgantt.eachParent(function(parent){\r\n\t\t\t\t\t\tif (!shouldRepaint && parent.type === gantt.config.types.project) {\r\n\t\t\t\t\t\t\tconst initialDates = {start_date: parent.start_date, end_date: parent.end_date};\r\n\t\t\t\t\t\t\tgantt.resetProjectDates(parent);\r\n\t\t\t\t\t\t\tif (+initialDates.start_date !== +parent.start_date || +initialDates.end_date !== +parent.end_date){\r\n\t\t\t\t\t\t\t\tshouldRepaint = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},task.id);\r\n\t\t\t\t\tif (shouldRepaint){\r\n\t\t\t\t\t\tgantt.refreshData();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// If there are not so many parents especially if there are split tasks,\r\n\t\t\t\t\t// it is better to repaint individual tasks\r\n\t\t\t\t\tgantt.eachParent(function(parent){\r\n\t\t\t\t\t\tif (parent.type === gantt.config.types.project) {\r\n\t\t\t\t\t\t\tconst initialDates = {start_date: parent.start_date, end_date: parent.end_date};\r\n\t\t\t\t\t\t\tgantt.resetProjectDates(parent);\r\n\t\t\t\t\t\t\tif (+initialDates.start_date !== +parent.start_date || +initialDates.end_date !== +parent.end_date){\r\n\t\t\t\t\t\t\t\tgantt.refreshTask(parent.id);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},task.id);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar drag_id = taskId;\r\n\r\n\t\t\t\tgantt._init_task_timing(task);\r\n\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\tgantt.updateTask(task.id);\r\n\t\t\t\tthis._fireEvent(\"after_finish\", drag.mode, [drag_id, drag.mode, e]);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\ton_mouse_up: function(e) {\r\n\r\n\t\t\tvar drag = this.drag;\r\n\t\t\tif (drag.mode && drag.id) {\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\t//drop\r\n\t\t\t\tvar task = gantt.getTask(drag.id);\r\n\t\t\t\tvar dragMultiple = this.dragMultiple;\r\n\r\n\t\t\t\tvar finalizingBulkMove = false;\r\n\t\t\t\tvar moveCount = 0;\r\n\t\t\t\tif (drag.mode === config.drag_mode.move) {\r\n\t\t\t\t\tif ((gantt.isSummaryTask(task) && config.drag_project) || (this._isMultiselect())) {\r\n\t\t\t\t\t\tfinalizingBulkMove = true;\r\n\t\t\t\t\t\tmoveCount = Object.keys(dragMultiple).length;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar doFinalize = function doFinalize(){\r\n\t\t\t\t\tif(finalizingBulkMove){\r\n\t\t\t\t\t\tfor (var i in dragMultiple) {\r\n\t\t\t\t\t\t\t// GS-1057: Don't call drag events for the dragged task as they will be called later\r\n\t\t\t\t\t\t\tif (dragMultiple[i].id != drag.id){\r\n\t\t\t\t\t\t\t\tthis._finalize_mouse_up(dragMultiple[i].id, config, dragMultiple[i], e);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._finalize_mouse_up(drag.id, config, drag, e);\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(finalizingBulkMove && moveCount > 10){// 10 - arbitrary threshold for bulk dnd at which we start doing complete repaint to refresh\r\n\t\t\t\t\tgantt.batchUpdate(function(){\r\n\t\t\t\t\t\tdoFinalize.call(this);\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdoFinalize.call(this);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tthis.clear_drag_state();\r\n\t\t},\r\n\t\t_get_drag_mode: function(className, el) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar modes = config.drag_mode;\r\n\t\t\tvar classes = (className || \"\").split(\" \");\r\n\t\t\tvar classname = classes[0];\r\n\t\t\tvar drag = {mode: null, left: null};\r\n\t\t\tswitch (classname) {\r\n\t\t\t\tcase \"gantt_task_line\":\r\n\t\t\t\tcase \"gantt_task_content\":\r\n\t\t\t\t\tdrag.mode = modes.move;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_drag\":\r\n\t\t\t\t\tdrag.mode = modes.resize;\r\n\r\n\t\t\t\t\tvar dragProperty = el.getAttribute(\"data-bind-property\");\r\n\r\n\t\t\t\t\tif (dragProperty == \"start_date\") {\r\n\t\t\t\t\t\tdrag.left = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdrag.left = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_progress_drag\":\r\n\t\t\t\t\tdrag.mode = modes.progress;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_link_control\":\r\n\t\t\t\tcase \"gantt_link_point\":\r\n\t\t\t\t\tdrag.mode = modes.ignore;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tdrag = null;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn drag;\r\n\r\n\t\t},\r\n\r\n\t\t_start_dnd: function(e) {\r\n\t\t\tvar drag = this.drag = this.drag.start_drag;\r\n\t\t\tdelete drag.start_drag;\r\n\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar id = drag.id;\r\n\r\n\t\t\tif (!cfg[\"drag_\" + drag.mode] || !gantt.callEvent(\"onBeforeDrag\", [id, drag.mode, e]) || !this._fireEvent(\"before_start\", drag.mode, [id, drag.mode, e])) {\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t} else {\r\n\t\t\t\tdelete drag.start_drag;\r\n\t\t\t\tvar task = gantt.getTask(id);\r\n\t\t\t\tif (gantt.isReadonly(task)){\r\n\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this._isMultiselect()) {\r\n\t\t\t\t\t// for don't move selected tasks when drag unselected task\r\n\t\t\t\t\tvar selectedTasksIds = gantt.getSelectedTasks();\r\n\t\t\t\t\tif (selectedTasksIds.indexOf(drag.id) >= 0) {\r\n\t\t\t\t\t\thelpers.forEach(selectedTasksIds, gantt.bind(function(taskId) {\r\n\t\t\t\t\t\t\tvar selectedTask = gantt.getTask(taskId);\r\n\t\t\t\t\t\t\tif (gantt.isSummaryTask(selectedTask) && gantt.config.drag_project && drag.mode == cfg.drag_mode.move) {\r\n\t\t\t\t\t\t\t\tthis._addSubtasksToDragMultiple(selectedTask.id);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.dragMultiple[taskId] = gantt.mixin({\r\n\t\t\t\t\t\t\t\tid: selectedTask.id,\r\n\t\t\t\t\t\t\t\tobj: gantt.copy(selectedTask)\r\n\t\t\t\t\t\t\t}, this.drag);\r\n\t\t\t\t\t\t}, this));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// for move unselected summary\r\n\t\t\t\tif (gantt.isSummaryTask(task) && gantt.config.drag_project && drag.mode == cfg.drag_mode.move) {\r\n\t\t\t\t\tthis._addSubtasksToDragMultiple(task.id);\r\n\t\t\t\t}\r\n\t\t\t\tgantt.callEvent(\"onTaskDragStart\", []);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t_fireEvent: function(stage, mode, params) {\r\n\t\t\tgantt.assert(this._events[stage], \"Invalid stage:{\" + stage + \"}\");\r\n\r\n\t\t\tvar trigger = this._events[stage][mode];\r\n\r\n\t\t\tgantt.assert(trigger, \"Unknown after drop mode:{\" + mode + \"}\");\r\n\t\t\tgantt.assert(params, \"Invalid event arguments\");\r\n\r\n\r\n\t\t\tif (!gantt.checkEvent(trigger))\r\n\t\t\t\treturn true;\r\n\r\n\t\t\treturn gantt.callEvent(trigger, params);\r\n\t\t},\r\n\r\n\t\tround_task_dates: function(task) {\r\n\t\t\tvar drag_state = this.drag;\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tif (!drag_state) {\r\n\t\t\t\tdrag_state = {mode: config.drag_mode.move};\r\n\t\t\t}\r\n\t\t\tthis._fix_dnd_scale_time(task, drag_state);\r\n\t\t},\r\n\t\tdestructor: function() {\r\n\t\t\tthis._domEvents.detachAll();\r\n\t\t},\r\n\t\t_isMultiselect: function() {\r\n\t\t\treturn gantt.config.drag_multiple && !!(gantt.getSelectedTasks && gantt.getSelectedTasks().length > 0);\r\n\t\t},\r\n\t\t_addSubtasksToDragMultiple: function(summaryId) {\r\n\t\t\tgantt.eachTask(function(child) {\r\n\t\t\t\tthis.dragMultiple[child.id] = gantt.mixin({\r\n\t\t\t\t\tid: child.id,\r\n\t\t\t\t\tobj: gantt.copy(child)\r\n\t\t\t\t}, this.drag);\r\n\t\t\t}, summaryId, this);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction initTaskDND() {\r\n\tvar _tasks_dnd;\r\n\treturn {\r\n\t\textend: function(timeline) {\r\n\t\t\ttimeline.roundTaskDates = function(task) {\r\n\t\t\t\t_tasks_dnd.round_task_dates(task);\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t\tinit: function(timeline, gantt) {\r\n\t\t\t_tasks_dnd = createTaskDND(timeline, gantt);\r\n\t\t\t// TODO: entry point for touch handlers, move touch to timeline\r\n\t\t\ttimeline._tasks_dnd = _tasks_dnd;\r\n\t\t\treturn _tasks_dnd.init(gantt);\r\n\t\t},\r\n\t\tdestructor: function() {\r\n\t\t\tif (_tasks_dnd) {\r\n\t\t\t\t_tasks_dnd.destructor();\r\n\t\t\t\t_tasks_dnd = null;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport default {\r\n\tcreateTaskDND: initTaskDND\r\n};","import * as domHelpers from \"../utils/dom_helpers\";\r\n\r\nvar initLinksDND = function(timeline, gantt) {\r\n\tvar _link_landing,\r\n\t\t_link_target_task,\r\n\t\t_link_target_task_start,\r\n\t\t_link_source_task,\r\n\t\t_link_source_task_start,\r\n\t\tmarkerDefaultOffset = 10,\r\n\t\tscrollDefaultSize = 18;\r\n\r\n\tfunction getDndState(){\r\n\t\treturn {\r\n\t\t\tlink_source_id : _link_source_task,\r\n\t\t\tlink_target_id : _link_target_task,\r\n\t\t\tlink_from_start : _link_source_task_start,\r\n\t\t\tlink_to_start : _link_target_task_start,\r\n\t\t\tlink_landing_area : _link_landing\r\n\t\t};\r\n\t}\r\n\r\n\tvar services = gantt.$services;\r\n\r\n\tvar state = services.getService(\"state\");\r\n\tvar DnD = services.getService(\"dnd\");\r\n\r\n\tstate.registerProvider(\"linksDnD\", getDndState);\r\n\r\n\tvar start_marker = \"task_start_date\",\r\n\t\tend_marker = \"task_end_date\",\r\n\t\tlink_edge_marker = \"gantt_link_point\",\r\n\t\tlink_landing_hover_area = \"gantt_link_control\";\r\n\r\n\tvar dnd = new DnD(timeline.$task_bars, {\r\n\t\tsensitivity : 0,\r\n\t\tupdates_per_second : 60,\r\n\t\tmousemoveContainer: gantt.$root,\r\n\t\tselector: \".\" + link_edge_marker,\r\n\t\tpreventDefault: true\r\n\t});\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function(obj,e) {\r\n\t\tvar target = (e.target||e.srcElement);\r\n\t\tresetDndState();\r\n\t\tif(gantt.getState(\"tasksDnd\").drag_id)\r\n\t\t\treturn false;\r\n\r\n\t\tif(domHelpers.locateClassName(target, link_edge_marker)){\r\n\t\t\tif(domHelpers.locateClassName(target, start_marker))\r\n\t\t\t\t_link_source_task_start = true;\r\n\r\n\t\t\tvar sid = gantt.locate(e);\r\n\t\t\t_link_source_task = sid;\r\n\r\n\t\t\tvar t = gantt.getTask(sid);\r\n\t\t\tif(gantt.isReadonly(t)){\r\n\t\t\t\tresetDndState();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tthis._dir_start = {\r\n\t\t\t\tx: dnd.config.original_element_sizes.x + dnd.config.original_element_sizes.width/2,\r\n\t\t\t\ty: dnd.config.original_element_sizes.y + dnd.config.original_element_sizes.height/2\r\n\t\t\t};\r\n\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, this));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function(obj,e) {\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\tupdateMarkedHtml(dnd.config.marker);\r\n\t}, this));\r\n\r\n\tfunction getVieportSize(){\r\n\t\tvar root = gantt.$root;\r\n\t\treturn { right: root.offsetWidth, bottom: root.offsetHeight };\r\n\t}\r\n\tfunction getMarkerSize (marker){\r\n\t\tvar width = 0, height = 0;\r\n\t\tif(marker){\r\n\t\t\twidth = marker.offsetWidth || 0;\r\n\t\t\theight = marker.offsetHeight || 0;\r\n\t\t}\r\n\t\treturn { width: width, height: height };\r\n\t}\r\n\r\n\tfunction getPosition(e, marker){\r\n\t\tvar oldPos = dnd.getPosition(e);\r\n\r\n\t\tvar markerSize = getMarkerSize(marker);\r\n\t\tvar viewportSize = getVieportSize();\r\n\r\n\t\tvar offsetX = gantt.config.tooltip_offset_x || markerDefaultOffset;\r\n\t\tvar offsetY = gantt.config.tooltip_offset_y || markerDefaultOffset;\r\n\r\n\t\tvar scrollSize = gantt.config.scroll_size || scrollDefaultSize;\r\n\r\n\t\t// GS-1315: Add offset if there are elements above Gantt\r\n\t\tvar ganttOffsetY = gantt.$container.getBoundingClientRect().y + window.scrollY;\r\n\r\n\t\tvar position = {\r\n\t\t\ty: oldPos.y + offsetY,\r\n\t\t\tx: oldPos.x + offsetX,\r\n\t\t\tbottom: oldPos.y + markerSize.height + offsetY + scrollSize,\r\n\t\t\tright: oldPos.x + markerSize.width + offsetX + scrollSize\r\n\t\t};\r\n\r\n\t\tif(position.bottom > viewportSize.bottom + ganttOffsetY){\r\n\t\t\tposition.y = viewportSize.bottom + ganttOffsetY - markerSize.height - offsetY;\r\n\t\t}\r\n\r\n\t\tif(position.right > viewportSize.right){\r\n\t\t\tposition.x = viewportSize.right - markerSize.width - offsetX;\r\n\t\t}\r\n\t\treturn position;\r\n\t}\r\n\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function(obj,e) {\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = getPosition(e, dd.marker);\r\n\t\tadvanceMarker(dd.marker, pos);\r\n\t\tvar landing = !!domHelpers.locateClassName(e, link_landing_hover_area);\r\n\r\n\t\tvar prevTarget = _link_target_task;\r\n\t\tvar prevLanding = _link_landing;\r\n\t\tvar prevToStart = _link_target_task_start;\r\n\r\n\t\tvar targ = gantt.locate(e),\r\n\t\t\tto_start = true;\r\n\r\n\t\t// can drag and drop link to another gantt on the page, such links are not supported\r\n\t\tvar eventTarget = domHelpers.getTargetNode(e);\r\n\r\n\t\tvar sameGantt = domHelpers.isChildOf(eventTarget, gantt.$root);\r\n\t\tif(!sameGantt){\r\n\t\t\tlanding = false;\r\n\t\t\ttarg = null;\r\n\t\t}\r\n\r\n\t\tif(landing){\r\n\t\t\t//refreshTask\r\n\t\t\tto_start = !domHelpers.locateClassName(e, end_marker);\r\n\t\t\tlanding = !!targ;\r\n\t\t}\r\n\r\n\t\t_link_target_task = targ;\r\n\t\t_link_landing = landing;\r\n\t\t_link_target_task_start = to_start;\r\n\r\n\t\tif(landing){\r\n\r\n\t\t\tvar node = domHelpers.locateClassName(e, link_landing_hover_area);\r\n\t\t\r\n\t\t\tconst point = node.querySelector(`.${link_edge_marker}`);\r\n\t\t\tif(point){\r\n\t\t\t\tconst absCoords = domHelpers.getRelativeNodePosition(point, timeline.$task_bg);\r\n\t\t\t\tthis._dir_end = {\r\n\t\t\t\t\tx: absCoords.x + point.offsetWidth/2,\r\n\t\t\t\t\ty: absCoords.y + point.offsetHeight/2\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tthis._dir_end = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\r\n\t\t\tif(gantt.env.isEdge){ // to fix margin collapsing\r\n\t\t\t\tthis._dir_end.y += window.scrollY;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar targetChanged = !(prevLanding == landing && prevTarget == targ && prevToStart == to_start);\r\n\t\tif(targetChanged){\r\n\t\t\tif(prevTarget)\r\n\t\t\t\tgantt.refreshTask(prevTarget, false);\r\n\t\t\tif(targ)\r\n\t\t\t\tgantt.refreshTask(targ, false);\r\n\t\t}\r\n\r\n\t\tif(targetChanged){\r\n\t\t\tupdateMarkedHtml(dd.marker);\r\n\t\t}\r\n\r\n\t\tshowDirectingLine(this._dir_start.x, this._dir_start.y, this._dir_end.x, this._dir_end.y);\r\n\r\n\t\treturn true;\r\n\t}, this));\r\n\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function() {\r\n\t\tvar drag = getDndState();\r\n\r\n\t\tif(drag.link_source_id && drag.link_target_id && drag.link_source_id != drag.link_target_id){\r\n\t\t\tvar type = gantt._get_link_type(drag.link_from_start, drag.link_to_start);\r\n\r\n\t\t\tvar link = {source : drag.link_source_id, target: drag.link_target_id, type:type};\r\n\t\t\tif(link.type && gantt.isLinkAllowed(link)) {\r\n\t\t\t\tif(gantt.callEvent(\"onLinkCreated\", [link])){\r\n\t\t\t\t\tgantt.addLink(link);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tresetDndState();\r\n\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (drag.link_source_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_source_id, false);\r\n\t\t\tif (drag.link_target_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_target_id, false);\r\n\t\t}\r\n\t\tremoveDirectionLine();\r\n\t}, this));\r\n\r\n\tfunction updateMarkedHtml(marker){\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_tooltip\"];\r\n\t\tif(link.link_source_id && link.link_target_id){\r\n\t\t\tif(gantt.isLinkAllowed(link.link_source_id, link.link_target_id, link.link_from_start, link.link_to_start)){\r\n\t\t\t\tcss.push(\"gantt_allowed_link\");\r\n\t\t\t}else{\r\n\t\t\t\tcss.push(\"gantt_invalid_link\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar className = gantt.templates.drag_link_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start);\r\n\t\tif(className)\r\n\t\t\tcss.push(className);\r\n\r\n\t\tvar html = \"<div class='\"+className+ \"'>\" +\r\n\t\t\tgantt.templates.drag_link(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start) +\r\n\t\t\t\"</div>\";\r\n\t\tmarker.innerHTML = html;\r\n\t}\r\n\r\n\tfunction advanceMarker(marker, pos){\r\n\t\tmarker.style.left = pos.x + \"px\";\r\n\t\tmarker.style.top = pos.y + \"px\";\r\n\t}\r\n\r\n\tfunction resetDndState(){\r\n\t\t_link_source_task =\r\n\t\t\t_link_source_task_start =\r\n\t\t\t\t_link_target_task = null;\r\n\t\t_link_target_task_start = true;\r\n\t}\r\n\tfunction showDirectingLine(s_x, s_y, e_x, e_y){\r\n\t\tvar div = getDirectionLine();\r\n\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_direction\"];\r\n\t\tif(gantt.templates.link_direction_class){\r\n\t\t\tcss.push(gantt.templates.link_direction_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start));\r\n\t\t}\r\n\r\n\t\tvar dist =Math.sqrt( (Math.pow(e_x - s_x, 2)) + (Math.pow(e_y - s_y, 2)) );\r\n\t\tdist = Math.max(0, dist - 3);\r\n\t\tif(!dist)\r\n\t\t\treturn;\r\n\r\n\t\tdiv.className = css.join(\" \");\r\n\t\tvar tan = (e_y - s_y)/(e_x - s_x),\r\n\t\t\tangle = Math.atan(tan);\r\n\r\n\t\tif(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 2){\r\n\t\t\tangle += Math.PI;\r\n\t\t}else if(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 3){\r\n\t\t\tangle -= Math.PI;\r\n\t\t}\r\n\r\n\r\n\r\n\t\tvar sin = Math.sin(angle),\r\n\t\t\tcos = Math.cos(angle),\r\n\t\t\ttop = Math.round(s_y),\r\n\t\t\tleft = Math.round(s_x);\r\n\r\n\r\n\t\tvar style = [\r\n\t\t\t\"-webkit-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-moz-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-ms-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-o-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"width:\" + Math.round(dist) + \"px\"\r\n\t\t];\r\n\r\n\t\tif(window.navigator.userAgent.indexOf(\"MSIE 8.0\") != -1){\r\n\t\t\t//ms-filter breaks styles in ie9, so add it only for 8th\r\n\t\t\tstyle.push(\"-ms-filter: \\\"\" + ieTransform(sin, cos) + \"\\\"\");\r\n\r\n\t\t\tvar shiftLeft = Math.abs(Math.round(s_x - e_x)),\r\n\t\t\t\tshiftTop = Math.abs(Math.round(e_y - s_y));\r\n\t\t\t//fix rotation axis\r\n\t\t\tswitch(coordinateCircleQuarter(s_x, e_x, s_y, e_y)){\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstyle.push(\"top:\" +  top + \"px\");\r\n\t\tstyle.push(\"left:\" +  left + \"px\");\r\n\r\n\t\tdiv.style.cssText = style.join(\";\");\r\n\t}\r\n\r\n\tfunction ieTransform(sin, cos){\r\n\t\treturn \"progid:DXImageTransform.Microsoft.Matrix(\"+\r\n\t\t\t\"M11 = \"+cos+\",\"+\r\n\t\t\t\"M12 = -\"+sin+\",\"+\r\n\t\t\t\"M21 = \"+sin+\",\"+\r\n\t\t\t\"M22 = \"+cos+\",\"+\r\n\t\t\t\"SizingMethod = 'auto expand'\"+\r\n\t\t\")\";\r\n\t}\r\n\tfunction coordinateCircleQuarter(sX, eX, sY, eY){\r\n\t\tif(eX >= sX){\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 1;\r\n\t\t\t}else{\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 2;\r\n\t\t\t}else{\r\n\t\t\t\treturn 3;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\tfunction getDirectionLine(){\r\n\t\tif(!dnd._direction || !dnd._direction.parentNode){\r\n\t\t\tdnd._direction = document.createElement(\"div\");\r\n\t\t\ttimeline.$task_links.appendChild(dnd._direction);\r\n\t\t}\r\n\t\treturn dnd._direction;\r\n\t}\r\n\tfunction removeDirectionLine(){\r\n\t\tif(dnd._direction){\r\n\t\t\tif (dnd._direction.parentNode)\t//the event line can be detached because of data refresh\r\n\t\t\t\tdnd._direction.parentNode.removeChild(dnd._direction);\r\n\r\n\t\t\tdnd._direction = null;\r\n\t\t}\r\n\t}\r\n\tgantt.attachEvent(\"onGanttRender\", gantt.bind(function() {\r\n\t\tif(dnd._direction){\r\n\t\t\tshowDirectingLine(this._dir_start.x, this._dir_start.y, this._dir_end.x, this._dir_end.y);\r\n\t\t}\r\n\t}, this));\r\n};\r\n\r\nexport default {\r\n\tcreateLinkDND: function(){\r\n\t\treturn {\r\n\t\t\tinit: initLinksDND\r\n\t\t};\r\n\t}\r\n};","import * as utils from \"../../../utils/utils\";\r\nimport taskDnD from \"./tasks_dnd\";\r\nimport linkDnD from \"./links_dnd\";\r\nimport * as domHelpers from \"../utils/dom_helpers\";\r\nimport MouseDelegates from \"../mouse_event_container\";\r\n\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\tvar services = gantt.$services;\r\n\t\treturn {\r\n\t\t\tonCreated: function (timeline) {\r\n\t\t\t\tvar config = timeline.$config;\r\n\t\t\t\tconfig.bind = utils.defined(config.bind) ? config.bind : \"task\";\r\n\t\t\t\tconfig.bindLinks = utils.defined(config.bindLinks) ? config.bindLinks : \"link\";\r\n\r\n\t\t\t\ttimeline._linksDnD = linkDnD.createLinkDND();\r\n\t\t\t\ttimeline._tasksDnD = taskDnD.createTaskDND();\r\n\t\t\t\ttimeline._tasksDnD.extend(timeline);\r\n\r\n\t\t\t\tthis._mouseDelegates = MouseDelegates(gantt);\r\n\t\t\t},\r\n\t\t\tonInitialized: function (timeline) {\r\n\t\t\t\tthis._attachDomEvents(gantt);\r\n\r\n\t\t\t\tthis._attachStateProvider(gantt, timeline);\r\n\r\n\t\t\t\ttimeline._tasksDnD.init(timeline, gantt);\r\n\t\t\t\ttimeline._linksDnD.init(timeline, gantt);\r\n\r\n\t\t\t\tif(timeline.$config.id == \"timeline\"){\r\n\t\t\t\t\tthis.extendDom(timeline);\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\t\t\t\tthis._clearDomEvents(gantt);\r\n\t\t\t\tthis._clearStateProvider(gantt);\r\n\t\t\t\tif (timeline._tasksDnD) {\r\n\t\t\t\t\ttimeline._tasksDnD.destructor();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\textendDom: function(timeline){\r\n\t\t\t\tgantt.$task = timeline.$task;\r\n\t\t\t\tgantt.$task_scale = timeline.$task_scale;\r\n\t\t\t\tgantt.$task_data = timeline.$task_data;\r\n\t\t\t\tgantt.$task_bg = timeline.$task_bg;\r\n\t\t\t\tgantt.$task_links = timeline.$task_links;\r\n\t\t\t\tgantt.$task_bars = timeline.$task_bars;\r\n\t\t\t},\r\n\r\n\t\t\t_clearDomEvents: function(){\r\n\t\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\t\tthis._mouseDelegates = null;\r\n\t\t\t},\r\n\r\n\t\t\t_attachDomEvents: function(gantt){\r\n\t\t\t\tfunction _delete_link_handler(id, e) {\r\n\t\t\t\t\tif (id && this.callEvent(\"onLinkDblClick\", [id, e])) {\r\n\r\n\t\t\t\t\t\tvar link = this.getLink(id);\r\n\t\t\t\t\t\tif (this.isReadonly(link)) return;\r\n\r\n\t\t\t\t\t\tvar title = \"\";\r\n\t\t\t\t\t\tvar question = this.locale.labels.link + \" \" + this.templates.link_description(this.getLink(id)) + \" \" + this.locale.labels.confirm_link_deleting;\r\n\r\n\t\t\t\t\t\twindow.setTimeout(function () {\r\n\t\t\t\t\t\t\tgantt._delete_link_confirm({\r\n\t\t\t\t\t\t\t\tlink: link,\r\n\t\t\t\t\t\t\t\tmessage: question,\r\n\t\t\t\t\t\t\t\ttitle: title,\r\n\t\t\t\t\t\t\t\tcallback: function () {\r\n\t\t\t\t\t\t\t\t\tgantt.deleteLink(id);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, (this.config.touch ? 300 : 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_task_link\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, this.config.link_attribute);\r\n\t\t\t\t\tif (id) {\r\n\t\t\t\t\t\tthis.callEvent(\"onLinkClick\", [id, e]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_scale_cell\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\t\t\t\t\tvar date = gantt.dateFromPos(pos.x);\r\n\t\t\t\t\tvar coll = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\t\t\tvar coll_date = gantt.getScale().trace_x[coll];\r\n\r\n\t\t\t\t\tgantt.callEvent(\"onScaleClick\", [e, coll_date]);\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"doubleclick\", \"gantt_task_link\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, gantt.config.link_attribute);\r\n\t\t\t\t\t_delete_link_handler.call(this, id, e);\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"doubleclick\", \"gantt_link_point\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e),\r\n\t\t\t\t\t\ttask = this.getTask(id);\r\n\r\n\t\t\t\t\tvar link = null;\r\n\t\t\t\t\tif (trg.parentNode && domHelpers.getClassName(trg.parentNode)) {\r\n\t\t\t\t\t\tif (domHelpers.getClassName(trg.parentNode).indexOf(\"_left\") > -1) {\r\n\t\t\t\t\t\t\tlink = task.$target[0];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlink = task.$source[0];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (link)\r\n\t\t\t\t\t\t_delete_link_handler.call(this, link, e);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt), this.$task);\r\n\t\t\t},\r\n\r\n\t\t\t_attachStateProvider: function(gantt, timeline){\r\n\t\t\t\tvar self = timeline;\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.registerProvider(\"tasksTimeline\", function(){\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tscale_unit: self._tasks ? self._tasks.unit : undefined,\r\n\t\t\t\t\t\tscale_step:  self._tasks ? self._tasks.step  : undefined\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t_clearStateProvider: function(){\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.unregisterProvider(\"tasksTimeline\");\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n})();\r\n\r\nexport default initializer;","import * as domHelpers from \"./utils/dom_helpers\";\r\n\r\nvar initializer = (function() {\r\n\treturn function (gantt) {\r\n\t\treturn {\r\n\r\n\t\t\tgetVerticalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollVer\");\r\n\t\t\t},\r\n\t\t\tgetHorizontalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollHor\");\r\n\t\t\t},\r\n\r\n\t\t\t_legacyGridResizerClass: function(layout){\r\n\t\t\t\tvar resizers = layout.getCellsByType(\"resizer\");\r\n\t\t\t\tfor(var i = 0; i < resizers.length; i++){\r\n\t\t\t\t\tvar r = resizers[i];\r\n\t\t\t\t\tvar gridResizer = false;\r\n\r\n\t\t\t\t\tvar prev = r.$parent.getPrevSibling(r.$id);\r\n\t\t\t\t\tif(prev && prev.$config && prev.$config.id === \"grid\"){\r\n\t\t\t\t\t\tgridResizer= true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar next = r.$parent.getNextSibling(r.$id);\r\n\t\t\t\t\t\tif(next && next.$config && next.$config.id === \"grid\"){\r\n\t\t\t\t\t\t\tgridResizer= true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(gridResizer){\r\n\t\t\t\t\t\tr.$config.css = (r.$config.css ? r.$config.css + \" \" : \"\") + \"gantt_grid_resize_wrap\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tonCreated: function(layout) {\r\n\t\t\t\tvar first = true;\r\n\r\n\t\t\t\tthis._legacyGridResizerClass(layout);\r\n\r\n\t\t\t\tlayout.attachEvent(\"onBeforeResize\", function() {\r\n\t\t\t\t\tvar mainTimeline = gantt.$ui.getView(\"timeline\");\r\n\t\t\t\t\tif (mainTimeline)\r\n\t\t\t\t\t\tmainTimeline.$config.hidden = mainTimeline.$parent.$config.hidden = !gantt.config.show_chart;\r\n\r\n\t\t\t\t\tvar mainGrid = gantt.$ui.getView(\"grid\");\r\n\r\n\t\t\t\t\tif(!mainGrid)\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tvar colsWidth = mainGrid._getColsTotalWidth();\r\n\t\t\t\t\tvar hideGrid = !gantt.config.show_grid || !gantt.config.grid_width || colsWidth === 0;\r\n\t\t\t\t\tif (first && !hideGrid && colsWidth !== false){\r\n\t\t\t\t\t\t\tgantt.config.grid_width = colsWidth;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmainGrid.$config.hidden = mainGrid.$parent.$config.hidden = hideGrid;\r\n\r\n\t\t\t\t\tif (!mainGrid.$config.hidden) {\r\n\t\t\t\t\t\t/* restrict grid width due to min_width, max_width, min_grid_column_width */\r\n\t\t\t\t\t\tvar grid_limits = mainGrid._getGridWidthLimits();\r\n\t\t\t\t\t\tif (grid_limits[0] && gantt.config.grid_width < grid_limits[0])\r\n\t\t\t\t\t\t\tgantt.config.grid_width = grid_limits[0];\r\n\t\t\t\t\t\tif (grid_limits[1] && gantt.config.grid_width > grid_limits[1])\r\n\t\t\t\t\t\t\tgantt.config.grid_width = grid_limits[1];\r\n\t\t\t\t\t\tif (mainTimeline && gantt.config.show_chart){\r\n\r\n\t\t\t\t\t\t\tmainGrid.$config.width = gantt.config.grid_width - 1;\r\n\r\n\t\t\t\t\t\t\t// GS-1314: Don't let the non-scrollable grid to be larger than the container with the correct width\r\n\t\t\t\t\t\t\tif (!mainGrid.$config.scrollable && mainGrid.$config.scrollY && gantt.$root.offsetWidth){\r\n\t\t\t\t\t\t\t\tvar ganttContainerWidth = mainGrid.$gantt.$layout.$container.offsetWidth;\r\n\t\t\t\t\t\t\t\tvar verticalScrollbar = gantt.$ui.getView(mainGrid.$config.scrollY);\r\n\t\t\t\t\t\t\t\tvar verticalScrollbarWidth = verticalScrollbar.$config.width;\r\n\r\n\t\t\t\t\t\t\t\t// GS-2488: to prevent grid from occupying the whole gantt container(timeline will be disabled) \r\n\t\t\t\t\t\t\t\t// need to leave min width for timeline\r\n\t\t\t\t\t\t\t\tvar gridOverflow = ganttContainerWidth - (mainGrid.$config.width + verticalScrollbarWidth) - 4;\r\n\t\t\t\t\t\t\t\tif (gridOverflow < 0){\r\n\t\t\t\t\t\t\t\t\tmainGrid.$config.width += gridOverflow;\r\n\t\t\t\t\t\t\t\t\tgantt.config.grid_width += gridOverflow;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (!first) {\r\n\t\t\t\t\t\t\t\tif (mainTimeline && !domHelpers.isChildOf(mainTimeline.$task, layout.$view)) {\r\n\t\t\t\t\t\t\t\t\t// timeline is being displayed after being not visible, reset grid with from full screen\r\n\t\t\t\t\t\t\t\t\tif (!mainGrid.$config.original_grid_width) {\r\n\t\t\t\t\t\t\t\t\t\tvar skinSettings = gantt.skins[gantt.skin];\r\n\t\t\t\t\t\t\t\t\t\tif(skinSettings && skinSettings.config && skinSettings.config.grid_width){\r\n\t\t\t\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width =  skinSettings.config.grid_width;\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width = 0;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tgantt.config.grid_width = mainGrid.$config.original_grid_width;\r\n\t\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tmainGrid.$parent._setContentSize(mainGrid.$config.width, null);\r\n\t\t\t\t\t\t\t\t\tgantt.$layout._syncCellSizes(mainGrid.$parent.$config.group, {value: gantt.config.grid_width, isGravity: false});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t\tif (mainGrid.$parent.$config.group) {\r\n\t\t\t\t\t\t\t\t\tgantt.$layout._syncCellSizes(mainGrid.$parent.$config.group, {value: mainGrid.$parent.$config.width, isGravity: false});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (mainTimeline && domHelpers.isChildOf(mainTimeline.$task, layout.$view)) {\r\n\t\t\t\t\t\t\t\t// hiding timeline, remember grid with to restore it when timeline is displayed again\r\n\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!first) {\r\n\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfirst = false;\r\n\t\t\t\t});\r\n\t\t\t\tthis._initScrollStateEvents(layout);\r\n\t\t\t},\r\n\r\n\t\t\t_initScrollStateEvents: function(layout) {\r\n\t\t\t\tgantt._getVerticalScrollbar = this.getVerticalScrollbar;\r\n\t\t\t\tgantt._getHorizontalScrollbar = this.getHorizontalScrollbar;\r\n\r\n\t\t\t\tvar vertical = this.getVerticalScrollbar();\r\n\t\t\t\tvar horizontal = this.getHorizontalScrollbar();\r\n\t\t\t\tif (vertical) {\r\n\t\t\t\t\tvertical.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [scrollState.x, oldPos, scrollState.x, newPos]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (horizontal) {\r\n\t\t\t\t\thorizontal.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [oldPos, scrollState.y, newPos, scrollState.y]);\r\n\r\n\t\t\t\t\t\t// if the grid doesn't fit the width, scroll the row container\r\n\t\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tif (grid && grid.$grid_data && !grid.$config.scrollable){\r\n\t\t\t\t\t\t\tgrid.$grid_data.style.left = grid.$grid.scrollLeft + \"px\";\r\n\t\t\t\t\t\t\tgrid.$grid_data.scrollLeft = grid.$grid.scrollLeft;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayout.attachEvent(\"onResize\", function(){\r\n\t\t\t\t\tif (vertical && !gantt.$scroll_ver){\r\n\t\t\t\t\t\tgantt.$scroll_ver = vertical.$scroll_ver;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (horizontal && !gantt.$scroll_hor){\r\n\t\t\t\t\t\tgantt.$scroll_hor = horizontal.$scroll_hor;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t_findGridResizer: function(layout, grid){\r\n\t\t\t\tvar resizers = layout.getCellsByType(\"resizer\");\r\n\r\n\t\t\t\tvar gridFirst = true;\r\n\t\t\t\tvar gridResizer;\r\n\t\t\t\tfor(var i = 0; i < resizers.length; i++){\r\n\t\t\t\t\tvar res = resizers[i];\r\n\t\t\t\t\tres._getSiblings();\r\n\t\t\t\t\tvar prev = res._behind;\r\n\t\t\t\t\tvar next = res._front;\r\n\t\t\t\t\tif(prev && prev.$content === grid || (prev.isChild && prev.isChild(grid))){\r\n\t\t\t\t\t\tgridResizer = res;\r\n\t\t\t\t\t\tgridFirst = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}else if(next && next.$content === grid || (next.isChild && next.isChild(grid))){\r\n\t\t\t\t\t\tgridResizer = res;\r\n\t\t\t\t\t\tgridFirst = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\t\t\t\t\tresizer: gridResizer,\r\n\t\t\t\t\tgridFirst: gridFirst\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\t\t\tonInitialized: function (layout) {\r\n\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\r\n\t\t\t\tvar resizeInfo = this._findGridResizer(layout, grid);\r\n\r\n\t\t\t\t// expose grid resize events\r\n\t\t\t\tif(resizeInfo.resizer){\r\n\t\t\t\t\tvar gridFirst = resizeInfo.gridFirst,\r\n\t\t\t\t\t\tnext = resizeInfo.resizer;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tif(next.$config.mode !== \"x\"){\r\n\t\t\t\t\t\treturn;// track only horizontal resize\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar initialWidth;\r\n\t\t\t\t\tnext.attachEvent(\"onResizeStart\", function(prevCellWidth, nextCellWidth){\r\n\r\n\t\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tvar viewCell = grid ? grid.$parent : null;\r\n\t\t\t\t\t\tif(viewCell){\r\n\t\t\t\t\t\t\tvar limits = grid._getGridWidthLimits();\r\n\r\n\t\t\t\t\t\t\t// min grid width is defined by min widths of its columns, unless grid has horizontal scroll\r\n\t\t\t\t\t\t\tif(!grid.$config.scrollable)\r\n\t\t\t\t\t\t\t\tviewCell.$config.minWidth = limits[0];\r\n\r\n\t\t\t\t\t\t\tviewCell.$config.maxWidth = limits[1];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tinitialWidth = gridFirst ? prevCellWidth : nextCellWidth;\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResizeStart\", [initialWidth]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResize\", function(newBehindSize, newFrontSize){\r\n\t\t\t\t\t\tvar newSize = gridFirst ? newBehindSize : newFrontSize;\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResize\", [initialWidth, newSize]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResizeEnd\", function(oldBackSize, oldFrontSize, newBackSize, newFrontSize){\r\n\r\n\t\t\t\t\t\tvar oldSize = gridFirst ? oldBackSize : oldFrontSize;\r\n\t\t\t\t\t\tvar newSize = gridFirst ? newBackSize : newFrontSize;\r\n\t\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tvar viewCell = grid ? grid.$parent : null;\r\n\t\t\t\t\t\tif(viewCell){\r\n\t\t\t\t\t\t\tviewCell.$config.minWidth = undefined;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar res = gantt.callEvent(\"onGridResizeEnd\", [oldSize, newSize]);\r\n\t\t\t\t\t\tif(res && newSize !== 0){// new size may be numeric zero when cell size is defined by 'gravity', actual size will be calculated by layout later\r\n\t\t\t\t\t\t\tgantt.config.grid_width = newSize;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t};\r\n})();\r\n\r\nexport default initializer;","import uiFactory from \"./ui_factory\";\r\nimport mouseEvents from \"./mouse\";\r\nimport createLayers from \"./gantt_layers\";\r\nimport Cell from \"./layout/cell\";\r\nimport Layout from \"./layout/layout\";\r\nimport ViewLayout from \"./layout/view_layout\";\r\nimport ViewCell from \"./layout/view_cell\";\r\nimport Resizer from \"./layout/resizer_cell\";\r\nimport Scrollbar from \"./layout/scrollbar_cell\";\r\nimport Timeline from \"./timeline/timeline\";\r\nimport Grid from \"./grid/grid\";\r\nimport ResourceGrid from \"./grid/resource_grid\";\r\nimport ResourceGridLightbox from \"./grid/resource_grid_lightbox\";\r\nimport ResourceTimeline from \"./timeline/resource_timeline\";\r\nimport ResourceHistogram from \"./timeline/resource_histogram\";\r\n\r\n\r\nimport gridEditorsFactory from \"./grid/editors/controller\";\r\n\r\nimport renderTaskBar from \"./render/task_bar_smart_render\";\r\nimport renderTimedProjectBar from \"./render/task_project_smart_render\";\r\nimport renderSplitTaskBar from \"./render/task_split_render\";\r\nimport renderRollupTaskBar from \"./render/task_rollup_render\";\r\nimport renderTaskBg from \"./render/task_bg_render\";\r\nimport renderLink from \"./render/link_render\";\r\nimport gridRenderer from \"./render/task_grid_line_render\";\r\nimport resourceMatrixRenderer from \"./render/resource_matrix_render\";\r\nimport resourceHistogramRenderer from \"./render/resource_histogram_render\";\r\nimport gridTaskRowResizerRenderer from \"./render/task_grid_row_resize_render\";\r\nimport renderConstraints from \"./render/task_constraints_render\";\r\nimport renderDeadline from \"./render/task_deadline_render\";\r\nimport renderBaselines from \"./render/task_baselines_render\";\r\nimport mainGridInitializer from \"./grid/main_grid_initializer\";\r\nimport mainTimelineInitializer from \"./timeline/main_timeline_initializer\";\r\nimport mainLayoutInitializer from \"./main_layout_initializer\";\r\n\r\nfunction initUI(gantt){\r\n\tfunction attachInitializer(view, initializer){\r\n\t\tvar ext = initializer(gantt);\r\n\t\tif(ext.onCreated)\r\n\t\t\text.onCreated(view);\r\n\t\tview.attachEvent(\"onReady\", function(){\r\n\t\t\tif(ext.onInitialized)\r\n\t\t\t\text.onInitialized(view);\r\n\t\t});\r\n\t\tview.attachEvent(\"onDestroy\", function(){\r\n\t\t\tif(ext.onDestroyed)\r\n\t\t\t\text.onDestroyed(view);\r\n\t\t});\r\n\t}\r\n\r\n\tvar factory = uiFactory.createFactory(gantt);\r\n\tfactory.registerView(\"cell\", Cell);\r\n\tfactory.registerView(\"resizer\", Resizer);\r\n\tfactory.registerView(\"scrollbar\", Scrollbar);\r\n\tfactory.registerView(\"layout\", Layout, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"main\"){\r\n\t\t\tattachInitializer(view, mainLayoutInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"viewcell\", ViewCell);\r\n\tfactory.registerView(\"multiview\", ViewLayout);\r\n\tfactory.registerView(\"timeline\", Timeline, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"timeline\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainTimelineInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"grid\", Grid, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"grid\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainGridInitializer);\r\n\t\t}\r\n\t});\r\n\r\n\tfactory.registerView(\"resourceGrid\", ResourceGrid);\r\n\tfactory.registerView(\"GridRL\", ResourceGridLightbox);\r\n\tfactory.registerView(\"resourceTimeline\", ResourceTimeline);\r\n\tfactory.registerView(\"resourceHistogram\", ResourceHistogram);\r\n\r\n\tvar layersEngine = createLayers(gantt);\r\n\r\n\tvar inlineEditors = gridEditorsFactory(gantt);\r\n\r\n\tgantt.ext.inlineEditors = inlineEditors;\r\n\tgantt.ext._inlineEditors = inlineEditors;\r\n\tinlineEditors.init(gantt);\r\n\r\n\treturn {\r\n\t\tfactory:factory,\r\n\t\tmouseEvents: mouseEvents.init(gantt),\r\n\t\tlayersApi: layersEngine.init(),\r\n\t\trender:{\r\n\t\t\tgridLine: function(){\r\n\t\t\t\treturn gridRenderer(gantt);\r\n\t\t\t},\r\n\t\t\ttaskBg: function(){\r\n\t\t\t\treturn renderTaskBg(gantt);\r\n\t\t\t},\r\n\t\t\ttaskBar: function(){\r\n\t\t\t\treturn renderTaskBar(gantt);\r\n\t\t\t},\r\n\t\t\ttimedProjectBar: function(){\r\n\t\t\t\treturn renderTimedProjectBar(gantt);\r\n\t\t\t},\r\n\t\t\ttaskRollupBar: function() {\r\n\t\t\t\treturn renderRollupTaskBar(gantt);\r\n\t\t\t},\r\n\t\t\ttaskSplitBar: function(){\r\n\t\t\t\treturn renderSplitTaskBar(gantt);\r\n\t\t\t},\r\n\t\t\ttaskConstraints: function(){\r\n\t\t\t\treturn renderConstraints(gantt);\r\n\t\t\t},\r\n\t\t\ttaskDeadline: function(){\r\n\t\t\t\treturn renderDeadline(gantt);\r\n\t\t\t},\r\n\t\t\ttaskBaselines: function(){\r\n\t\t\t\treturn renderBaselines(gantt);\r\n\t\t\t},\r\n\t\t\tlink: function(){\r\n\t\t\t\treturn renderLink(gantt);\r\n\t\t\t},\r\n\t\t\tresourceRow: function(){\r\n\t\t\t\treturn resourceMatrixRenderer(gantt);\r\n\t\t\t},\r\n\t\t\tresourceHistogram: function(){\r\n\t\t\t\treturn resourceHistogramRenderer(gantt);\r\n\t\t\t},\r\n\t\t\tgridTaskRowResizer: function(){\r\n\t\t\t\treturn gridTaskRowResizerRenderer(gantt);\r\n\t\t\t}\r\n\t\t},\r\n\t\tlayersService: {\r\n\t\t\tgetDataRender: function(name){\r\n\t\t\t\treturn layersEngine.getDataRender(name, gantt);\r\n\t\t\t},\r\n\t\t\tcreateDataRender: function(config){\r\n\t\t\t\treturn layersEngine.createDataRender(config, gantt);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport default {\r\n\tinit: initUI\r\n};","export default null;","import * as helpers from \"../../../utils/helpers\";\r\nimport getRowRectangle from \"./viewport/get_grid_row_rectangle\";\r\nimport getVisibleRange from \"./viewport/get_visible_bars_range\";\r\nimport isInViewPort from \"./viewport/is_grid_row_in_viewport\";\r\n\r\nfunction createGridLineRender(gantt){\r\n\r\n\tfunction _render_grid_item(item, view, config, viewport) {\r\n\t\tvar columns = view.getGridColumns();\r\n\t\tvar templates = view.$getTemplates();\r\n\r\n\t\tvar store = view.$config.rowStore;\r\n\r\n\t\tvar cells = [];\r\n\t\tvar has_child;\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\t\t\tvar cell;\r\n\r\n\t\t\tvar value;\r\n\t\t\tvar textValue;\r\n\t\t\tif (col.name == \"add\") {\r\n\t\t\t\tvar aria = gantt._waiAria.gridAddButtonAttrString(col);\r\n\r\n\t\t\t\tvalue = \"<div \" + aria + \" class='gantt_add'></div>\";\r\n\t\t\t\ttextValue = \"\";\r\n\t\t\t} else {\r\n\t\t\t\tif (col.template)\r\n\t\t\t\t\tvalue = col.template(item);\r\n\t\t\t\telse\r\n\t\t\t\t\tvalue = item[col.name];\r\n\r\n\t\t\t\tif (helpers.isDate(value)){\r\n\t\t\t\t\tvalue = templates.date_grid(value, item, col.name);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (value === null || value === undefined) {\r\n\t\t\t\t\tvalue = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttextValue = value;\r\n\t\t\t\tvalue = \"<div class='gantt_tree_content'>\" + value + \"</div>\";\r\n\t\t\t}\r\n\t\t\tvar css = \"gantt_cell\" + (last ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\tvar tree = [];\r\n\t\t\tif (col.tree) {\r\n\t\t\t\tcss += \" gantt_cell_tree\";\r\n\t\t\t\tfor (var j = 0; j < item.$level; j++)\r\n\t\t\t\t\ttree.push(templates.grid_indent(item));\r\n\r\n\t\t\t\thas_child = store.hasChild(item.id) && !(gantt.isSplitTask(item) && !gantt.config.open_split_tasks);\r\n\t\t\t\tif (has_child) {\r\n\t\t\t\t\ttree.push(templates.grid_open(item));\r\n\t\t\t\t\ttree.push(templates.grid_folder(item));\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttree.push(templates.grid_blank(item));\r\n\t\t\t\t\ttree.push(templates.grid_file(item));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar style = \"width:\" + (col.width - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tif (this.defined(col.align)){\r\n\t\t\t\tvar flexAlign = {\r\n\t\t\t\t\tright: \"flex-end\",\r\n\t\t\t\t\tleft: \"flex-start\",\r\n\t\t\t\t\tcenter: \"center\"\r\n\t\t\t\t};\r\n\t\t\t\tvar justifyContent = flexAlign[col.align];\r\n\r\n\t\t\t\tstyle += \"text-align:\" + col.align + \";justify-content:\"  + justifyContent + \";\";\r\n\t\t\t}\r\n\r\n\t\t\tvar aria = gantt._waiAria.gridCellAttrString(col, textValue, item);\r\n\r\n\t\t\ttree.push(value);\r\n\t\t\tcell = \"<div class='\" + css + \"' data-column-index='\"+i+\"' data-column-name='\"+col.name+\"' style='\" + style + \"' \" + aria + \">\" + tree.join(\"\") + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\t// GS-291. The odd class should be assigned correctly\r\n\t\tcss = \"\";\r\n\t\tconst storeName = store.$config.name;\r\n\t\tswitch (storeName) {\r\n\t\t\tcase \"task\":\r\n\t\t\t\tcss = gantt.getGlobalTaskIndex(item.id) % 2 === 0 ? \"\" : \" odd\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"resource\":\r\n\t\t\t\tcss = store.visibleOrder.indexOf(item.id) % 2 === 0 ? \"\" : \" odd\";\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tcss += (item.$transparent) ? \" gantt_transparent\" : \"\";\r\n\r\n\t\tcss += (item.$dataprocessor_class ? \" \" + item.$dataprocessor_class : \"\");\r\n\r\n\t\tif (templates.grid_row_class) {\r\n\t\t\tvar css_template = templates.grid_row_class.call(gantt, item.start_date, item.end_date, item);\r\n\t\t\tif (css_template)\r\n\t\t\t\tcss += \" \" + css_template;\r\n\t\t}\r\n\r\n\t\tif(store.isSelected(item.id)) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.className = \"gantt_row\" + css + \" gantt_row_\" + gantt.getTaskType(item.type);\r\n\t\tvar height = view.getItemHeight(item.id);\r\n\t\tel.style.height = height + \"px\";\r\n\t\tel.style.lineHeight = height + \"px\";\r\n\r\n\t\tif(config.smart_rendering){\r\n\t\t\tel.style.position = \"absolute\";\r\n\t\t\tel.style.left = \"0px\";\r\n\t\t\tel.style.top = view.getItemTop(item.id) + \"px\";\r\n\t\t}\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\tel.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t\tel.setAttribute(view.$config.bind + \"_id\", item.id); // 'task_id'/'resource_id' for backward compatibility\r\n\t\t}\r\n\r\n\t\tgantt._waiAria.taskRowAttr(item, el);\r\n\r\n\t\tel.innerHTML = cells.join(\"\");\r\n\t\treturn el;\r\n\t}\r\n\r\n\tfunction onrender(item, rowNode, view){\r\n\t\tvar columns = view.getGridColumns();\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar column = columns[i];\r\n\t\t\tif (column.onrender){\r\n\r\n\t\t\t\t// find cell node for current column\r\n\t\t\t\tvar cellNode = rowNode.querySelector(`[data-column-name=\"${column.name}\"]`);\r\n\t\t\t\tif (cellNode) {\r\n\t\t\t\t\tvar content = column.onrender(item, cellNode);\r\n\t\t\t\t\tif (content && typeof content === \"string\") {\r\n\t\t\t\t\t\tcellNode.innerHTML = content;\r\n\t\t\t\t\t} else if (content && typeof content === \"object\") {\r\n\t\t\t\t\t\t// render object to node using additional functionality\r\n\t\t\t\t\t\tif (gantt.config.external_render){\r\n\t\t\t\t\t\t\tvar adapter = gantt.config.external_render;\r\n\t\t\t\t\t\t\tif (adapter.isElement(content)){\r\n\t\t\t\t\t\t\t\tadapter.renderElement(content, cellNode);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\trender: _render_grid_item,\r\n\t\tupdate: null,\r\n\t\tgetRectangle: getRowRectangle,\r\n\t\tisInViewPort: isInViewPort,\r\n\t\tgetVisibleRange: getVisibleRange,\r\n\t\tonrender: onrender\r\n\t};\r\n}\r\n\r\nexport default createGridLineRender;","import getRowRectangle from \"./viewport/get_bg_row_rectangle\";\r\nimport isLegacyRender from \"./is_legacy_smart_render\";\r\nimport getVisibleRange from \"./viewport/get_visible_bars_range\";\r\nimport getVisibleCellsRange from \"./viewport/get_visible_cells_range\";\r\nimport isColumnVisible from \"./viewport/is_column_visible\";\r\nimport bgPlaceholder from \"./prerender/task_bg_placeholder\";\r\n\r\nfunction createTaskBgRender(gantt){\r\n\tvar renderedCells = {};\r\n\tvar visibleCells = {};\r\n\r\n\tfunction isRendered(item, columnIndex){\r\n\t\tif(renderedCells[item.id][columnIndex] && renderedCells[item.id][columnIndex].parentNode){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction detachRenderedCell(itemId, columnIndex){\r\n\t\tif(renderedCells[itemId] && renderedCells[itemId][columnIndex] &&\r\n\t\t\trenderedCells[itemId][columnIndex].parentNode\r\n\t\t\t){\r\n\t\t\t\trenderedCells[itemId][columnIndex].parentNode.removeChild(renderedCells[itemId][columnIndex]);\r\n\t\t\t}\r\n\t}\r\n\r\n\tfunction getCellClassTemplate(view){\r\n\t\tvar templates = view.$getTemplates();\r\n\t\tvar cssTemplate;\r\n\t\tif (typeof templates.task_cell_class !== \"undefined\") {\r\n\t\t\tcssTemplate = templates.task_cell_class;\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tvar log = console.warn || console.log;\r\n\t\t\tlog('gantt.templates.task_cell_class template is deprecated and will be removed soon. Please use gantt.templates.timeline_cell_class instead.');\r\n\t\t} else {\r\n\t\t\tcssTemplate = templates.timeline_cell_class;\r\n\t\t}\r\n\t\treturn cssTemplate;\r\n\t}\r\n\tfunction getCellContentTemplate(view){\r\n\t\tvar templates = view.$getTemplates();\r\n\t\tvar contentTemplate = templates.timeline_cell_content;\r\n\t\treturn contentTemplate;\r\n\t}\r\n\r\n\tfunction renderCells(item, node, view, config, viewPort){\r\n\t\tvar cfg = view.getScale();\r\n\t\tvar count = cfg.count;\r\n\t\tvar cssTemplate = getCellClassTemplate(view);\r\n\t\tvar contentTemplate = getCellContentTemplate(view);\r\n\r\n\t\tif (config.show_task_cells) {\r\n\t\t\tif(!renderedCells[item.id]){\r\n\t\t\t\trenderedCells[item.id] = {};\r\n\t\t\t}\r\n\t\t\tif(!visibleCells[item.id]){\r\n\t\t\t\tvisibleCells[item.id] = {};\r\n\t\t\t}\r\n\r\n\t\t\tvar range = getVisibleCellsRange(cfg, viewPort);\r\n\r\n\t\t\tfor(var i in visibleCells[item.id]){\r\n\t\t\t\tvar index = visibleCells[item.id][i];\r\n\r\n\t\t\t\tif(Number(index) < range.start || Number(index) > range.end){\r\n\t\t\t\t\tdetachRenderedCell(item.id, index);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvisibleCells[item.id] = {};\r\n\t\t\t// TODO: do not iterate all cell, only ones in the viewport and once that are already rendered\r\n\t\t\tfor (var columnIndex = range.start; columnIndex <= range.end; columnIndex++) {\r\n\t\t\t\tvar cell = renderOneCell(cfg, columnIndex, item, viewPort, count, cssTemplate, contentTemplate, config);\r\n\t\t\t\tif(!cell && isRendered(item, columnIndex)){\r\n\t\t\t\t\tdetachRenderedCell(item.id, columnIndex);\r\n\t\t\t\t}else if (cell && !cell.parentNode){\r\n\t\t\t\t\tnode.appendChild(cell);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction renderOneCell(scale, columnIndex, item, viewPort, count, cssTemplate, contentTemplate, config){\r\n\t\tvar width = scale.width[columnIndex],\r\n\t\t\tcssclass = \"\";\r\n\r\n\t\tif (isColumnVisible(columnIndex, scale, viewPort, gantt)) {//do not render skipped columns\r\n\r\n\t\t\tvar cssTemplateContent = cssTemplate(item, scale.trace_x[columnIndex]);\r\n\t\t\tvar htmlTemplateContent = \"\";\r\n\t\t\tif (contentTemplate) {// for backward compatibility, contentTemplate was added in 7.2.0+, will be undefined if someone used copy of old config/template object\r\n\t\t\t\thtmlTemplateContent = contentTemplate(item, scale.trace_x[columnIndex]);\r\n\t\t\t}\r\n\r\n\t\t\tif(config.static_background){\r\n\t\t\t\t// if cell render in static background is not allowed, or if it's a blank cell\r\n\t\t\t\tvar customCell = !!(cssTemplateContent || htmlTemplateContent);\r\n\t\t\t\tif(!(config.static_background_cells && customCell)){\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(renderedCells[item.id][columnIndex]){\r\n\t\t\t\tvisibleCells[item.id][columnIndex] = columnIndex;\r\n\t\t\t\treturn renderedCells[item.id][columnIndex];\r\n\t\t\t}\r\n\t\t\tvar cell = document.createElement(\"div\");\r\n\t\t\tcell.style.width = (width) + \"px\";\r\n\r\n\t\t\tcssclass = \"gantt_task_cell\" + (columnIndex == count - 1 ? \" gantt_last_cell\" : \"\");\r\n\t\t\tif (cssTemplateContent) {\r\n\t\t\t\tcssclass += \" \" + cssTemplateContent;\r\n\t\t\t}\r\n\t\t\tcell.className = cssclass;\r\n\r\n\t\t\tif (htmlTemplateContent) {\r\n\t\t\t\tcell.innerHTML = htmlTemplateContent;\r\n\t\t\t}\r\n\r\n\t\t\tcell.style.position = \"absolute\";\r\n\t\t\tcell.style.left = scale.left[columnIndex] + \"px\";\r\n\t\t\trenderedCells[item.id][columnIndex] = cell;\r\n\t\t\tvisibleCells[item.id][columnIndex] = columnIndex;\r\n\r\n\t\t\treturn cell;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction _render_bg_line(item, view, config, viewPort) {\r\n\t\tvar templates = view.$getTemplates();\r\n\t\tvar cfg = view.getScale();\r\n\t\tvar count = cfg.count;\r\n\r\n\t\tif(config.static_background && !config.static_background_cells){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar row = document.createElement(\"div\");\r\n\r\n\t\tvar cellCssTemplate = getCellClassTemplate(view);\r\n\t\tvar cellHtmlTemplate = getCellContentTemplate(view);\r\n\r\n\t\tvar range;\r\n\r\n\t\tif(!viewPort || !config.smart_rendering || isLegacyRender(gantt)){\r\n\t\t\trange = {\r\n\t\t\t\tstart: 0,\r\n\t\t\t\tend: count - 1\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\trange = getVisibleCellsRange(cfg, viewPort.x);\r\n\t\t}\r\n\t\tif (config.show_task_cells) {\r\n\t\t\trenderedCells[item.id] = {};\r\n\t\t\tvisibleCells[item.id] = {};\r\n\t\t\tfor (var columnIndex = range.start; columnIndex <= range.end; columnIndex++) {\r\n\t\t\t\tvar cell = renderOneCell(cfg, columnIndex, item, viewPort, count, cellCssTemplate, cellHtmlTemplate, config);\r\n\t\t\t\tif(cell){\r\n\t\t\t\t\trow.appendChild(cell);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// GS-291. The odd class should be assigned correctly\r\n\t\tconst store = view.$config.rowStore;\r\n\t\tconst odd = store.getIndexById(item.id) % 2 !== 0;\r\n\r\n\t\tvar cssTemplate = templates.task_row_class(item.start_date, item.end_date, item);\r\n\t\tvar css = \"gantt_task_row\" + (odd ? \" odd\" : \"\") + (cssTemplate ? ' ' + cssTemplate : '');\r\n\r\n\t\tif(store.isSelected(item.id)) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\r\n\t\trow.className = css;\r\n\r\n\t\tif (config.smart_rendering) {\r\n\t\t\trow.style.position = \"absolute\";\r\n\t\t\trow.style.top = view.getItemTop(item.id) + \"px\";\r\n\t\t\trow.style.width = \"100%\";\r\n\t\t}else{\r\n\t\t\trow.style.position = \"relative\";\r\n\t\t}\r\n\t\trow.style.height = (view.getItemHeight(item.id)) + \"px\";\r\n\r\n\t\tif (item.id == \"timeline_placeholder_task\"){\r\n\t\t\tvar placeholderTop = 0;\r\n\t\t\tif (item.lastTaskId){\r\n\t\t\t\tvar lastTaskTop = view.getItemTop(item.lastTaskId);\r\n\t\t\t\tvar lastTaskHeight = view.getItemHeight(item.lastTaskId);\r\n\t\t\t\tplaceholderTop = lastTaskTop + lastTaskHeight;\t\r\n\t\t\t}\r\n\r\n\t\t\tvar maxHeight = item.row_height || view.$task_data.offsetHeight;\r\n\r\n\t\t\tvar placeholderHeight = maxHeight - placeholderTop;\r\n\t\t\t// So that it won't exceed the placeholder timeline height\r\n\t\t\tif (placeholderHeight < 0){\r\n\t\t\t\tplaceholderHeight = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (config.smart_rendering) {\r\n\t\t\t\trow.style.top = placeholderTop + \"px\";\t\r\n\t\t\t}\r\n\t\t\trow.style.height = placeholderHeight + \"px\";\r\n\t\t}\r\n\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\trow.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t\trow.setAttribute(view.$config.bind + \"_id\", item.id); // 'task_id'/'resource_id' for backward compatibility\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\treturn {\r\n\t\trender: _render_bg_line,\r\n\t\tupdate: renderCells,\r\n\t\tgetRectangle: getRowRectangle,\r\n\t\tgetVisibleRange: getVisibleRange,\r\n\t\tprepareData: bgPlaceholder\r\n\t};\r\n}\r\n\r\nexport default createTaskBgRender;\r\n","import createBaseBarRender from \"./task_bar_render\";\r\nimport isInViewPort from \"./viewport/is_bar_in_viewport\";\r\nimport getVisibleRange from \"./viewport/get_visible_bars_range\";\r\n\r\nfunction createTaskRenderer(gantt){\r\n\tconst defaultRender = createBaseBarRender(gantt);\r\n\r\n\tconst renderedNodes = {};\r\n\r\n\tfunction checkVisibility(child, viewPort, timeline, config, gantt){\r\n\t\tlet isVisible = true;\r\n\t\t// GS-2123. Don't render rollup tasks that are outside the viewport\r\n\t\tif (config.smart_rendering){\r\n\t\t\tisVisible = isInViewPort(child, viewPort, timeline, config, gantt);\r\n\t\t}\r\n\t\treturn isVisible;\r\n\t}\r\n\r\n\tfunction generateChildElement(task, child, timeline, sizes){\r\n\t\tconst childCopy = gantt.copy(gantt.getTask(child.id));\r\n\t\tchildCopy.$rendered_at = task.id;\r\n\t\t// a way to filter rollup tasks:\r\n\t\tconst displayRollup = gantt.callEvent(\"onBeforeRollupTaskDisplay\", [childCopy.id, childCopy, task.id]);\r\n\t\tif (displayRollup === false){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst element = defaultRender(childCopy, timeline);\r\n\t\tif(!element){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst height = timeline.getBarHeight(task.id, child.type == gantt.config.types.milestone);\r\n\t\tconst padding = Math.floor((timeline.getItemHeight(task.id) - height) / 2);\r\n\r\n\t\telement.style.top = (sizes.top + padding) + \"px\";\r\n\t\telement.classList.add(\"gantt_rollup_child\");\r\n\t\telement.setAttribute(\"data-rollup-parent-id\", task.id);\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\tfunction getKey(childId, renderParentId){\r\n\t\treturn childId + \"_\" + renderParentId;\r\n\t}\r\n\r\n\r\n\tfunction renderRollupTask(task, timeline, config, viewPort) {\r\n\t\tif (task.rollup !== false && task.$rollup && task.$rollup.length) {\r\n\t\t\tconst el = document.createElement('div'),\r\n\t\t\t\tsizes = gantt.getTaskPosition(task);\r\n\r\n\t\t\t// vertical position is not important for the rollup tasks as long as the parent is rendered\r\n\t\t\tif (viewPort){\r\n\t\t\t\tviewPort.y = 0;\r\n\t\t\t\tviewPort.y_end = gantt.$task_bg.scrollHeight;\r\n\t\t\t}\r\n\r\n\t\t\ttask.$rollup.forEach(function(itemId){\r\n\t\t\t\tif (!gantt.isTaskExists(itemId)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst child = gantt.getTask(itemId);\r\n\t\t\t\tlet isVisible = checkVisibility(child, viewPort, timeline, config, gantt);\r\n\t\t\t\tif (!isVisible){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst element = generateChildElement(task, child, timeline, sizes);\r\n\t\t\t\tif (element) {\r\n\t\t\t\t\trenderedNodes[getKey(child.id, task.id)] = element;\r\n\t\t\t\t\tel.appendChild(element);\r\n\t\t\t\t} else{\r\n\t\t\t\t\trenderedNodes[getKey(child.id, task.id)] = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\treturn el;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfunction repaintRollupTask(task, itemNode, timeline, config, viewPort) {\r\n\t\tconst el = document.createElement(\"div\"),\r\n\t\tsizes = gantt.getTaskPosition(task);\r\n\r\n\t\t// vertical position is not important for the rollup tasks as long as the parent is rendered\r\n\t\tviewPort.y = 0;\r\n\t\tviewPort.y_end = gantt.$task_bg.scrollHeight;\r\n\r\n\t\ttask.$rollup.forEach(function(itemId){\r\n\t\t\tconst child = gantt.getTask(itemId);\r\n\t\t\tconst rollupKey = getKey(child.id, task.id);\r\n\t\t\tlet isVisible = checkVisibility(child, viewPort, timeline, config, gantt);\r\n\t\t\tif (isVisible !== !!renderedNodes[rollupKey]) {\r\n\r\n\t\t\t\tif (isVisible) {\r\n\t\t\t\t\tconst element = generateChildElement(task, child, timeline, sizes);\r\n\t\t\t\t\trenderedNodes[rollupKey] = element || false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\trenderedNodes[rollupKey] = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!!renderedNodes[rollupKey]) {\r\n\t\t\t\tel.appendChild(renderedNodes[rollupKey]);\r\n\t\t\t}\r\n\t\t\titemNode.innerHTML = \"\";\r\n\t\t\titemNode.appendChild(el);\r\n\t\t});\r\n\t}\r\n\r\n\r\n\r\n\treturn {\r\n\t\trender: renderRollupTask,\r\n\t\tupdate: repaintRollupTask,\r\n\t\t//getRectangle: getBarRectangle\r\n\t\tisInViewPort: isInViewPort,\r\n\t\tgetVisibleRange: getVisibleRange\r\n\t};\r\n}\r\n\r\nexport default createTaskRenderer;","import getRectangle from \"./viewport/get_bg_row_rectangle\";\r\nimport getVisibleRange from \"./viewport/get_visible_bars_range\";\r\nimport getVisibleCellsRange from \"./viewport/get_visible_cells_range\";\r\nimport isColumnVisible from \"./viewport/is_column_visible\";\r\nimport resourceTimetable from \"../../resource_timetable_builder\";\r\n\r\nfunction generateRenderResourceLine(gantt){\r\n\tvar getResourceLoad = resourceTimetable(gantt);\r\n\tvar renderedResourceLines = {};\r\n\r\n\tfunction renderResourceLineCell(resource, day, templates, config, timeline){\r\n\t\tvar css = templates.resource_cell_class(day.start_date, day.end_date, resource, day.tasks, day.assignments);\r\n\t\tvar content = templates.resource_cell_value(day.start_date, day.end_date, resource, day.tasks, day.assignments);\r\n\t\tvar height = timeline.getItemHeight(resource.id) - 1;\r\n\r\n\t\tif (css || content){\r\n\t\t\tvar sizes = timeline.getItemPosition(resource, day.start_date, day.end_date);\r\n\t\t\tvar el = document.createElement('div');\r\n\t\t\tel.setAttribute(timeline.$config.item_attribute, resource.id);\r\n\t\t\tel.className = [\"gantt_resource_marker\", css].join(\" \");\r\n\r\n\t\t\tel.style.cssText = [\r\n\t\t\t\t'left:' + sizes.left + 'px',\r\n\t\t\t\t'width:' + sizes.width + 'px',\r\n\t\t\t\t'height:' + (height) + 'px',\r\n\t\t\t\t'line-height:' + (height) + 'px',\r\n\t\t\t\t'top:' + sizes.top + 'px'\r\n\t\t\t].join(\";\");\r\n\r\n\t\t\tif(content)\r\n\t\t\t\tel.innerHTML = content;\r\n\r\n\t\t\treturn el;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction detachRenderedResourceLine(id, index){\r\n\t\tif(renderedResourceLines[id] && renderedResourceLines[id][index] &&\r\n\t\t\trenderedResourceLines[id][index].parentNode\r\n\t\t\t){\r\n\t\t\t\trenderedResourceLines[id][index].parentNode.removeChild(renderedResourceLines[id][index]);\r\n\t\t\t}\r\n\t}\r\n\r\n\tfunction renderResourceLine(resource, timeline, config, viewport) {\r\n\t\tvar templates = timeline.$getTemplates();\r\n\t\tvar scale = timeline.getScale();\r\n\t\tvar timetable = getResourceLoad(resource, config.resource_property, timeline.getScale(), timeline);\r\n\t\tvar smartRendering = !!viewport;//no viewport means smart rendering is disabled\r\n\t\tvar cells = [];\r\n\t\trenderedResourceLines[resource.id] = {};\r\n\r\n\t\tvar range = getVisibleCellsRange(scale, viewport);\r\n\t\tfor (var columnIndex = range.start; columnIndex <= range.end; columnIndex++) {\r\n\r\n\t\t\tvar day = timetable[columnIndex];\r\n\t\t\tif(!day){\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif(smartRendering && !isColumnVisible(columnIndex, scale, viewport, gantt)){\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar cell = renderResourceLineCell(resource, day, templates, config, timeline);\r\n\t\t\tif(cell){\r\n\t\t\t\tcells.push(cell);\r\n\t\t\t\trenderedResourceLines[resource.id][columnIndex] = cell;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar row = null;\r\n\t\tif(cells.length){\r\n\t\t\trow = document.createElement(\"div\");\r\n\t\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\t\trow.appendChild(cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn row;\r\n\t}\r\n\r\n\tfunction updateResourceLine(resource, node, timeline, config, viewport) {\r\n\t\tvar templates = timeline.$getTemplates();\r\n\t\tvar scale = timeline.getScale();\r\n\t\tvar timetable = getResourceLoad(resource, config.resource_property, timeline.getScale(), timeline);\r\n\r\n\t\tvar range = getVisibleCellsRange(scale, viewport);\r\n\r\n\t\tvar checkedColumns = {};\r\n\t\tif(renderedResourceLines && renderedResourceLines[resource.id]){\r\n\t\t\tfor(var i in renderedResourceLines[resource.id]){\r\n\t\t\t\tcheckedColumns[i] = i;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var columnIndex = range.start; columnIndex <= range.end; columnIndex++) {\r\n\t\t\tvar day = timetable[columnIndex];\r\n\t\t\tcheckedColumns[columnIndex] = false;\r\n\t\t\tif(!day){\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif(!isColumnVisible(columnIndex, scale, viewport, gantt)){\r\n\t\t\t\tdetachRenderedResourceLine(resource.id, columnIndex);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif(!renderedResourceLines[resource.id] || !renderedResourceLines[resource.id][columnIndex]){\r\n\t\t\t\tvar cell = renderResourceLineCell(resource, day, templates, config, timeline);\r\n\t\t\t\tif(cell){\r\n\t\t\t\t\tnode.appendChild(cell);\r\n\t\t\t\t\trenderedResourceLines[resource.id][columnIndex] = cell;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if(renderedResourceLines[resource.id] && renderedResourceLines[resource.id][columnIndex] && !renderedResourceLines[resource.id][columnIndex].parentNode){\r\n\t\t\t\tnode.appendChild(renderedResourceLines[resource.id][columnIndex]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(var i in checkedColumns){\r\n\t\t\tif(checkedColumns[i] !== false){\r\n\t\t\t\tdetachRenderedResourceLine(resource.id, i);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\trender: renderResourceLine,\r\n\t\tupdate: updateResourceLine,\r\n\t\tgetRectangle: getRectangle,\r\n\t\tgetVisibleRange: getVisibleRange\r\n\t};\r\n}\r\n\r\nexport default generateRenderResourceLine;","import getRowRectangle from \"./viewport/get_grid_row_rectangle\";\r\nimport getVisibleRange from \"./viewport/get_visible_bars_range\";\r\n\r\nfunction createGridTaskRowResizerRender(gantt){\r\n\r\n\tfunction _render_grid_item(item, view, viewport) {\r\n\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar resize_el = document.createElement(\"div\");\r\n\t\tresize_el.className = \"gantt_task_grid_row_resize_wrap\";\r\n\r\n\t\tresize_el.style.top = (view.getItemTop(item.id) + view.getItemHeight(item.id)) + \"px\";\r\n\r\n\t\tresize_el.innerHTML = \"<div class='gantt_task_grid_row_resize' role='cell'></div>\";\r\n\t\tresize_el.setAttribute(config.task_grid_row_resizer_attribute, item.id);\r\n\r\n\t\tgantt._waiAria.rowResizerAttr(resize_el);\r\n\t\treturn resize_el;\r\n\t}\r\n\r\n\treturn {\r\n\t\trender: _render_grid_item,\r\n\t\tupdate: null,\r\n\t\tgetRectangle: getRowRectangle,\r\n\t\tgetVisibleRange: getVisibleRange\r\n\t};\r\n}\r\n\r\nexport default createGridTaskRowResizerRender;","function _configure(col, data, force) {\r\n\tfor (var key in data)\r\n\t\tif (typeof col[key] == \"undefined\" || force)\r\n\t\t\tcol[key] = data[key];\r\n}\r\n\r\nfunction _get_skin(force, gantt) {\r\n\r\n\tconst styles = getComputedStyle(gantt.$root);\r\n\tconst themeVar = styles.getPropertyValue(\"--dhx-gantt-theme\");\r\n\tlet isCssVarTheme = !!themeVar;\r\n\tlet themeName;\r\n\r\n\t\r\n\tif(isCssVarTheme){\r\n\t\tthemeName = themeVar;\r\n\t}else{\r\n\t\tvar skin = gantt.skin;\r\n\t\tthemeName = skin;\r\n\t\tif (!skin || force) {\r\n\t\t\tvar links = document.getElementsByTagName(\"link\");\r\n\t\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\t\tvar res = links[i].href.match(\"dhtmlxgantt_([a-z_]+).css\");\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tif (gantt.skins[res[1]] || !skin) {\r\n\t\t\t\t\t\tthemeName = res[1];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tgantt._theme_info = {\r\n\t\ttheme: themeName,\r\n\t\tcssVarTheme: isCssVarTheme\r\n\t};\r\n\r\n\r\n\r\n\tgantt.skin = themeName || \"terrace\";\r\n\tvar skinset = gantt.skins[gantt.skin] || gantt.skins[\"terrace\"];\r\n\r\n\t//apply skin related settings\r\n\t_configure(gantt.config, skinset.config, force);\r\n\r\n\tif(!isCssVarTheme){\r\n\t\tgantt.config.link_radius = 1;\r\n\t}\r\n\r\n\tvar config = gantt.getGridColumns();\r\n\tif (config[1] && !gantt.defined(config[1].width))\r\n\t\tconfig[1].width = skinset._second_column_width;\r\n\tif (config[2] && !gantt.defined(config[2].width))\r\n\t\tconfig[2].width = skinset._third_column_width;\r\n\t\r\n\tfor (var i=0; i<config.length; i++) {\r\n\t\tvar column = config[i];\r\n\t\tif (column.name == \"add\") {\r\n\t\t\tif(!column.width){\r\n\t\t\t\tcolumn.width = 44;\r\n\t\t\t}\r\n\t\t\tif (!(gantt.defined(column.min_width) && gantt.defined(column.max_width))) {\r\n\t\t\t\tcolumn.min_width = column.min_width || column.width;\r\n\t\t\t\tcolumn.max_width = column.max_width || column.width;\r\n\t\t\t}\r\n\t\t\tif (column.min_width)\r\n\t\t\t\tcolumn.min_width = +column.min_width;\r\n\t\t\tif (column.max_width)\r\n\t\t\t\tcolumn.max_width = +column.max_width;\r\n\t\t\tif (column.width) {\r\n\t\t\t\tcolumn.width = +column.width;\r\n\t\t\t\tcolumn.width = (column.min_width && column.min_width > column.width) ? column.min_width : column.width;\r\n\t\t\t\tcolumn.width = (column.max_width && column.max_width < column.width) ? column.max_width : column.width;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (skinset.config.task_height){\r\n\t\tgantt.config.task_height = skinset.config.task_height || \"full\";\r\n\t}\r\n\tif (skinset.config.bar_height){\r\n\t\tgantt.config.bar_height = skinset.config.bar_height || \"full\";\r\n\t}\r\n\r\n\tif (skinset._lightbox_template)\r\n\t\tgantt._lightbox_template = skinset._lightbox_template;\r\n\r\n\tif (skinset._redefine_lightbox_buttons) {\r\n\t\tgantt.config.buttons_right = skinset._redefine_lightbox_buttons[\"buttons_right\"];\r\n\t\tgantt.config.buttons_left = skinset._redefine_lightbox_buttons[\"buttons_left\"];\r\n\t}\r\n\r\n\r\n\tgantt.resetLightbox();\r\n}\r\n\r\n\r\n\r\nexport default function(gantt) {\r\n\t\r\n\tif(!gantt.resetSkin){\r\n\t\tgantt.resetSkin = function () {\r\n\t\t\tthis.skin = \"\";\r\n\t\t\t_get_skin(true, this);\r\n\t\t};\r\n\t\tgantt.skins = {};\r\n\r\n\t\tgantt.attachEvent(\"onGanttLayoutReady\", function(){\r\n\t\t\t_get_skin(false, this);\r\n\t\t\tmonitorThemeChange();\r\n\t\t});\r\n\t}\r\n\r\n\tgantt._addThemeClass = function(){\r\n\t\tdocument.documentElement.setAttribute(\"data-gantt-theme\", gantt.skin);\r\n\t};\r\n\r\n\tgantt.setSkin = function(value){\r\n\t\tconst skinChanged = this.skin !== value;\r\n\t\tthis.skin = value;\r\n\t\tgantt._addThemeClass();\r\n\t\tmonitorThemeChange();\r\n\t\tif(gantt.$root){\r\n\t\t\t_get_skin(skinChanged ? false : true, gantt);\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t};\r\n\r\n\r\n\tlet monitorIntervalId = null;\r\n\tfunction monitorThemeChange(){\r\n\t\tconst container = gantt.$root;\r\n\t\t\r\n\t\tif(monitorIntervalId){\r\n\t\t\tclearInterval(monitorIntervalId);\r\n\t\t}\r\n\t\t\r\n\t\tif(container){\r\n\t\t\tmonitorIntervalId = setInterval(() => {\r\n\t\t\t\tconst csstheme = getComputedStyle(container).getPropertyValue('--dhx-gantt-theme');\r\n\t\t\t\tif(csstheme && csstheme !== gantt.skin){\r\n\t\t\t\t\tgantt.setSkin(csstheme);\r\n\t\t\t\t}\r\n\r\n\t\t\t}, 100);\r\n\t\t}\r\n\t}\r\n\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\tclearInterval(monitorIntervalId);\r\n\t});\r\n};","import * as domHelpers from \"../utils/dom_helpers\";\r\nimport isHeadless from \"../../../utils/is_headless\";\r\n\r\nexport default function(gantt){\r\n\r\n\tvar scrollRange = 50,\r\n\t\tscrollStep = 30,\r\n\t\tscrollDelay = 10,\r\n\t\tscrollSpeed = 50;\r\n\r\n\tvar interval = null,\r\n\t\tisMove = false,\r\n\t\tdelayTimeout = null,\r\n\t\tstartPos = {\r\n\t\t\tstarted: false\r\n\t\t},\r\n\t\teventPos = {};\r\n\r\n\r\n\tfunction isDisplayed(element){\r\n\t\treturn element &&\r\n\t\t\tdomHelpers.isChildOf(element, gantt.$root) &&\r\n\t\t\telement.offsetHeight;\r\n\t}\r\n\r\n\tfunction getAutoscrollContainer(){\r\n\t\tvar element;\r\n\t\tif(isDisplayed(gantt.$task)){\r\n\t\t\telement = gantt.$task;\r\n\t\t}else if(isDisplayed(gantt.$grid)){\r\n\t\t\telement = gantt.$grid;\r\n\t\t}else{\r\n\t\t\telement = gantt.$root;\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\tfunction isScrollState() {\r\n\t\tvar dragMarker = !!document.querySelector(\".gantt_drag_marker\");\r\n\t\tvar isResize = !!document.querySelector(\".gantt_drag_marker.gantt_grid_resize_area\")\r\n\t\t\t|| !!document.querySelector(\".gantt_drag_marker.gantt_row_grid_resize_area\") ;\r\n\t\tvar isLink = !!document.querySelector(\".gantt_link_direction\");\r\n\t\tvar state = gantt.getState();\r\n\t\tvar isClickDrag = state.autoscroll;\r\n\t\tisMove = dragMarker && !isResize && !isLink;\r\n\r\n\t\treturn !((!state.drag_mode && !dragMarker) || isResize) || isClickDrag;\r\n\t}\r\n\r\n\tfunction defineDelayTimeout(state) {\r\n\t\tif (delayTimeout) {\r\n\t\t\tclearTimeout(delayTimeout);\r\n\t\t\tdelayTimeout = null;\r\n\t\t}\r\n\t\tif (state) {\r\n\t\t\tvar speed = gantt.config.autoscroll_speed;\r\n\t\t\tif (speed && speed < 10) // limit speed value to 10\r\n\t\t\t\tspeed = 10;\r\n\r\n\t\t\tdelayTimeout = setTimeout(function() {\r\n\t\t\t\tinterval = setInterval(tick, speed || scrollSpeed);\r\n\t\t\t}, gantt.config.autoscroll_delay || scrollDelay);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction defineScrollInterval(state) {\r\n\t\tif (state) {\r\n\t\t\tdefineDelayTimeout(true);\r\n\t\t\tif (!startPos.started) {\r\n\t\t\t\tstartPos.x = eventPos.x;\r\n\t\t\t\tstartPos.y = eventPos.y;\r\n\t\t\t\tstartPos.started = true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (interval) {\r\n\t\t\t\tclearInterval(interval);\r\n\t\t\t\tinterval = null;\r\n\t\t\t}\r\n\t\t\tdefineDelayTimeout(false);\r\n\t\t\tstartPos.started = false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction autoscrollInterval(event) {\r\n\t\tvar isScroll = isScrollState();\r\n\r\n\t\tif ((interval || delayTimeout) && !isScroll) {\r\n\t\t\tdefineScrollInterval(false);\r\n\t\t}\r\n\r\n\t\tif (!gantt.config.autoscroll || !isScroll) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\teventPos = {\r\n\t\t\tx: event.clientX,\r\n\t\t\ty: event.clientY\r\n\t\t};\r\n\r\n\t\t// if it is a mobile device, we need to detect the touch event coords\r\n\t\tif (event.type == \"touchmove\"){\r\n\t\t\teventPos.x = event.targetTouches[0].clientX;\r\n\t\t\teventPos.y = event.targetTouches[0].clientY;\r\n\t\t}\r\n\r\n\t\tif (!interval && isScroll) {\r\n\t\t\tdefineScrollInterval(true);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction tick() {\r\n\r\n\t\tif (!isScrollState()) {\r\n\t\t\tdefineScrollInterval(false);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar container = getAutoscrollContainer();\r\n\t\tif(!container){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// GS-1150: if we reorder or resize something in the grid, we should obtain the grid container\r\n\t\tvar gridDrag = false;\r\n\t\tvar gridMarkers = [\r\n\t\t\t\".gantt_drag_marker.gantt_grid_resize_area\",\r\n\t\t\t\".gantt_drag_marker .gantt_row.gantt_row_task\",\r\n\t\t\t\".gantt_drag_marker.gantt_grid_dnd_marker\"\r\n\t\t];\r\n\t\tgridMarkers.forEach(function (selector) {\r\n\t\t\tgridDrag = gridDrag || !!document.querySelector(selector);\r\n\t\t});\r\n\t\tif (gridDrag){\r\n\t\t\tcontainer = gantt.$grid;\r\n\t\t}\r\n\r\n\t\tvar box = domHelpers.getNodePosition(container);\r\n\r\n\t\tvar posX = eventPos.x - box.x;\r\n\t\tvar posY = eventPos.y - box.y + window.scrollY; // GS-1315: window.scrollY here and below for the elements above Gantt\r\n\r\n\t\tvar scrollLeft = isMove ? 0 : need_scroll(posX, box.width, startPos.x - box.x);\r\n\t\tvar scrollTop = need_scroll(posY, box.height, startPos.y - box.y + window.scrollY);\r\n\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar currentScrollTop = scrollState.y,\r\n\t\t\tscrollOuterHeight = scrollState.inner_height,\r\n\t\t\tscrollInnerHeight = scrollState.height,\r\n\t\t\tcurrentScrollLeft = scrollState.x,\r\n\t\t\tscrollOuterWidth = scrollState.inner_width,\r\n\t\t\tscrollInnerWidth = scrollState.width;\r\n\r\n\t\t// do scrolling only if we have scrollable area to do so\r\n\t\tif (scrollTop && !scrollOuterHeight) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop < 0 && !currentScrollTop) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop > 0 && currentScrollTop + scrollOuterHeight >= scrollInnerHeight + 2) {\r\n\t\t\tscrollTop = 0;\r\n\t\t}\r\n\r\n\t\tif (scrollLeft && !scrollOuterWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft < 0 && !currentScrollLeft) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft > 0 && currentScrollLeft + scrollOuterWidth >= scrollInnerWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t}\r\n\r\n\t\tvar step = gantt.config.autoscroll_step;\r\n\r\n\t\tif (step && step < 2) // limit step value to 2\r\n\t\t\tstep = 2;\r\n\r\n\t\tscrollLeft = scrollLeft * (step || scrollStep);\r\n\t\tscrollTop = scrollTop * (step || scrollStep);\r\n\r\n\t\tif (scrollLeft || scrollTop) {\r\n\t\t\tscroll(scrollLeft, scrollTop);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction need_scroll(pos, boxSize, startCoord) {\r\n\t\tif ((pos - scrollRange < 0) && (pos < startCoord))\r\n\t\t\treturn -1;\r\n\t\telse if ((pos > boxSize - scrollRange) && (pos > startCoord))\r\n\t\t\treturn 1;\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tfunction scroll(left, top) {\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar scrollLeft = null,\r\n\t\t\tscrollTop = null;\r\n\r\n\t\tif (left) {\r\n\t\t\tscrollLeft = scrollState.x + left;\r\n\t\t\tscrollLeft = Math.min(scrollState.width, scrollLeft);\r\n\t\t\tscrollLeft = Math.max(0, scrollLeft);\r\n\t\t}\r\n\r\n\t\tif (top) {\r\n\t\t\tscrollTop = scrollState.y + top;\r\n\t\t\tscrollTop = Math.min(scrollState.height, scrollTop);\r\n\t\t\tscrollTop = Math.max(0, scrollTop);\r\n\t\t}\r\n\r\n\t\tgantt.scrollTo(scrollLeft, scrollTop);\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", function() {\r\n\t\tif(!isHeadless(gantt)){\r\n\t\t\tvar eventElement = domHelpers.getRootNode(gantt.$root) || document.body;\r\n\t\t\tgantt.eventRemove(eventElement, \"mousemove\", autoscrollInterval);\r\n\t\t\tgantt.event(eventElement, \"mousemove\", autoscrollInterval);\r\n\r\n\t\t\tgantt.eventRemove(eventElement, \"touchmove\", autoscrollInterval);\r\n\t\t\tgantt.event(eventElement, \"touchmove\", autoscrollInterval);\r\n\r\n\t\t\tgantt.eventRemove(eventElement, \"pointermove\", autoscrollInterval);\r\n\t\t\tgantt.event(eventElement, \"pointermove\", autoscrollInterval);\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\tdefineScrollInterval(false);\r\n\t});\r\n\r\n};","if (typeof window !== \"undefined\" && window.jQuery){\r\n\r\n\t(function( $ ){\r\n\r\n\t\tvar methods = [];\r\n\t\t$.fn.dhx_gantt = function(config){\r\n\t\t\tconfig = config || {};\r\n\t\t\tif (typeof(config) === 'string') {\r\n\t\t\t\tif (methods[config] ) {\r\n\t\t\t\t\treturn methods[config].apply(this, []);\r\n\t\t\t\t}else {\r\n\t\t\t\t\t$.error('Method ' +  config + ' does not exist on jQuery.dhx_gantt');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar views = [];\r\n\t\t\t\tthis.each(function() {\r\n\t\t\t\t\tif (this && this.getAttribute){\r\n\t\t\t\t\t\tif (!this.gantt && !(window.gantt.$root == this)){\r\n\r\n\t\t\t\t\t\t\tvar newgantt = (window.gantt.$container && window.Gantt) ? window.Gantt.getGanttInstance():window.gantt;\r\n\t\t\t\t\t\t\tfor (var key in config)\r\n\t\t\t\t\t\t\t\tif (key!=\"data\")\r\n\t\t\t\t\t\t\t\t\tnewgantt.config[key] = config[key];\r\n\r\n\t\t\t\t\t\t\tnewgantt.init(this);\r\n\t\t\t\t\t\t\tif (config.data)\r\n\t\t\t\t\t\t\t\tnewgantt.parse(config.data);\r\n\r\n\t\t\t\t\t\t\tviews.push(newgantt);\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\tviews.push(typeof this.gantt == \"object\" ? this.gantt : window.gantt);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\tif (views.length === 1) return views[0];\r\n\t\t\t\treturn views;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t})(window.jQuery);\r\n\r\n}\r\n\r\n\r\nexport default null;","if (typeof window !== \"undefined\" && window.dhtmlx){\r\n\r\n\tif (!window.dhtmlx.attaches)\r\n\twindow.dhtmlx.attaches = {};\r\n\r\n\twindow.dhtmlx.attaches.attachGantt=function(start, end, gantt){\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tobj.id = \"gantt_\"+ gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tvar that = this.vs[this.av];\r\n\t\tthat.grid = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\r\n\t\tthat.gridId = obj.id;\r\n\t\tthat.gridObj = obj;\r\n\r\n\t\tvar method_name=\"_viewRestore\";\r\n\t\treturn this.vs[this[method_name]()].grid;\r\n\t};\r\n\r\n}\r\nif (typeof window !== \"undefined\" && typeof(window.dhtmlXCellObject) != \"undefined\") {\r\n\r\n\twindow.dhtmlXCellObject.prototype.attachGantt=function(start, end, gantt){\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\t\tobj.id = \"gantt_\"+gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\r\n\t\tobj = null;\r\n\t\tthis.callEvent(\"_onContentAttach\",[]);\r\n\r\n\t\treturn this.dataObj;\r\n\t};\r\n}\r\n\r\nexport default null;","import env from \"../../../utils/env\";\r\nimport eventable from \"../../../utils/eventable\";\r\nimport { IScale, TModifierKeys } from \"../../common/config\";\r\n\r\ninterface ITimelineZoomConfig {\r\n\thandler?: (e: Event) => {};\r\n\tstartDate?: Date;\r\n\tendDate?: Date;\r\n\tlevels: IZoomLevel[];\r\n\tactiveLevelIndex?: number;\r\n\twidthStep?: number;\r\n\tminColumnWidth?: number;\r\n\tmaxColumnWidth?: number;\r\n\tuseKey?: \"ctrlKey\" | \"altKey\" | \"shiftKey\";\r\n\ttrigger?: \"wheel\" | null | undefined;\r\n\telement?: Element | (() => Element);\r\n}\r\n\r\nconst USE_KEY = [\"ctrlKey\", \"altKey\", \"shiftKey\", \"metaKey\"];\r\n\r\ninterface IZoomLevel {\r\n\tname?: string;\r\n\tscale_height?: number;\r\n\tmin_column_width: number;\r\n\tscales: IScale[];\r\n}\r\n\r\nconst _defaultScales = [\r\n\t[\r\n\t\t{\r\n\t\t\tunit: \"month\",\r\n\t\t\tdate: \"%M\",\r\n\t\t\tstep: 1\r\n\t\t},\r\n\t\t{\r\n\t\t\tunit: \"day\",\r\n\t\t\tdate: \"%d\",\r\n\t\t\tstep: 1\r\n\t\t}\r\n\t],\r\n\t[\r\n\t\t{\r\n\t\t\tunit: \"day\",\r\n\t\t\tdate: \"%d %M\",\r\n\t\t\tstep: 1\r\n\t\t}\r\n\t],\r\n\t[\r\n\t\t{\r\n\t\t\tunit: \"day\",\r\n\t\t\tdate: \"%d %M\",\r\n\t\t\tstep: 1\r\n\t\t},\r\n\t\t{\r\n\t\t\tunit: \"hour\",\r\n\t\t\tdate: \"%H:00\",\r\n\t\t\tstep: 8\r\n\t\t}\r\n\t],\r\n\t[\r\n\t\t{\r\n\t\t\tunit: \"day\",\r\n\t\t\tdate: \"%d %M\",\r\n\t\t\tstep: 1\r\n\t\t},\r\n\t\t{\r\n\t\t\tunit: \"hour\",\r\n\t\t\tdate: \"%H:00\",\r\n\t\t\tstep: 1\r\n\t\t}\r\n\t]\r\n];\r\n\r\nexport default class TimelineZoom {\r\n\tpublic attachEvent: (eventName: string, handler: () => void) => string;\r\n\tpublic callEvent: (eventName: string, args: any[]) => any;\r\n\tpublic detachEvent: (eventName: string) => any;\r\n\tprotected _initialStartDate: Date;\r\n\tprotected _initialEndDate: Date;\r\n\tprotected _activeLevelIndex: number;\r\n\tprotected _levels: IZoomLevel[];\r\n\tprotected _handler: (e: any) => void;\r\n\tprotected $gantt;\r\n\tprotected _widthStep: number;\r\n\tprotected _minColumnWidth: number;\r\n\tprotected _maxColumnWidth: number;\r\n\tprotected _useKey: TModifierKeys;\r\n\tprotected _visibleDate: Date;\r\n\tprotected _initialized: boolean;\r\n\tprotected _domEvents: any;\r\n\r\n\tconstructor(gantt) {\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis._domEvents = this.$gantt._createDomEventScope();\r\n\t}\r\n\r\n\tpublic init(config: ITimelineZoomConfig) {\r\n\t\t// GS-1354 and GS-1318. If we check the headless mode using the function,\r\n\t\t// it will return false when Gantt is not initialized, but we may want to do it later\r\n\t\tif(this.$gantt.env.isNode){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._initialStartDate = config.startDate;\r\n\t\tthis._initialEndDate = config.endDate;\r\n\t\tthis._activeLevelIndex = config.activeLevelIndex ? config.activeLevelIndex : 0;\r\n\t\tthis._levels = this._mapScales(config.levels || _defaultScales);\r\n\t\tthis._handler = config.handler || this._defaultHandler;\r\n\t\tthis._minColumnWidth = config.minColumnWidth || 60;\r\n\t\tthis._maxColumnWidth = config.maxColumnWidth || 240;\r\n\t\tthis._widthStep = config.widthStep || 3/8 * config.minColumnWidth;\r\n\t\tthis._useKey = config.useKey;\r\n\r\n\t\tif(!this._initialized){\r\n\t\t\teventable(this);\r\n\t\t\tthis.$gantt.attachEvent(\"onGanttScroll\", () => {\r\n\t\t\t\tthis._getVisibleDate();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis._domEvents.detachAll();\r\n\r\n\t\tif(config.trigger === \"wheel\"){\r\n\t\t\tif(this.$gantt.$root){\r\n\t\t\t\tthis._attachWheelEvent(config);\r\n\t\t\t}else{\r\n\t\t\t\t// GS-1322. This way the handler works for the init and resetLayout methods\r\n\t\t\t\tthis.$gantt.attachEvent(\"onGanttLayoutReady\", () => {\r\n\t\t\t\t\tthis.$gantt.attachEvent(\"onGanttRender\", () => {\r\n\t\t\t\t\t\tthis._attachWheelEvent(config);\r\n\t\t\t\t\t}, {once: true});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._initialized = true;\r\n\t\tthis.setLevel(this._activeLevelIndex);\r\n\t}\r\n\r\n\tpublic zoomIn = () => {\r\n\t\tconst index = this.getCurrentLevel() - 1;\r\n\t\tif(index < 0){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.setLevel(index);\r\n\t};\r\n\r\n\tpublic zoomOut = () => {\r\n\t\tconst index = this.getCurrentLevel() + 1;\r\n\t\tif(index > this._levels.length - 1){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.setLevel(index);\r\n\t};\r\n\r\n\tpublic getCurrentLevel = () => {\r\n\t\treturn this._activeLevelIndex;\r\n\t};\r\n\r\n\tpublic getLevels = () => {\r\n\t\treturn this._levels;\r\n\t};\r\n\r\n\tpublic setLevel = (level: number|string) => {\r\n\t\tconst zoomLevel = this._getZoomIndexByName(level);\r\n\r\n\t\tif(zoomLevel === -1){\r\n\t\t\tthis.$gantt.assert(zoomLevel !== -1, \"Invalid zoom level for gantt.ext.zoom.setLevel. \" + level + \" is not an expected value.\");\r\n\t\t}\r\n\t\tthis._setLevel(zoomLevel, 0);\r\n\t};\r\n\r\n\tprotected _getZoomIndexByName = (levelName: number|string) => {\r\n\t\tlet zoomLevel:number = -1;\r\n\t\tif(typeof levelName === \"string\"){\r\n\t\t\tif(!isNaN(Number(levelName)) &&  this._levels[Number(levelName)]){\r\n\t\t\t\tzoomLevel = Number(levelName);\r\n\t\t\t}else{\r\n\t\t\t\tfor(let i = 0; i < this._levels.length; i++){\r\n\t\t\t\t\tif(this._levels[i].name === levelName){\r\n\t\t\t\t\t\tzoomLevel = i;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tzoomLevel = levelName;\r\n\t\t}\r\n\t\treturn zoomLevel;\r\n\t};\r\n\r\n\tprotected _mapScales(levels: IScale[][] | any): IZoomLevel[]{\r\n\t\treturn levels.map((l) => {\r\n\t\t\tif(Array.isArray(l)){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tscales: l\r\n\t\t\t\t};\r\n\t\t\t}else{\r\n\t\t\t\treturn l;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprotected _getVisibleDate = () => {\r\n\t\t// GS-1450. Don't try to get the visible date if there is no timeline\r\n\t\tif (!this.$gantt.$task){\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst scrollPos = this.$gantt.getScrollState().x;\r\n\t\tconst viewPort = this.$gantt.$task.offsetWidth;\r\n\t\tthis._visibleDate = this.$gantt.dateFromPos(scrollPos + viewPort/2);\r\n\t};\r\n\r\n\tprotected _setLevel = (level: number, cursorOffset: number) => {\r\n\t\tthis._activeLevelIndex = level;\r\n\r\n\t\tconst gantt = this.$gantt;\r\n\t\tconst nextConfig = gantt.copy(this._levels[this._activeLevelIndex]);\r\n\t\tconst chartConfig = gantt.copy(nextConfig);\r\n\t\tdelete chartConfig.name;\r\n\r\n\t\tgantt.mixin(gantt.config, chartConfig, true);\r\n\r\n\t\t// GS-1148: Change scales for the resource views\r\n\t\tconst resourceViews = [\r\n\t\t\t\"resourceTimeline\",\r\n\t\t\t\"resourceHistogram\"\r\n\t\t];\r\n\r\n\t\tresourceViews.forEach(function(name){\r\n\t\t\tconst resourceView = gantt.$ui.getView(name);\r\n\t\t\tif (resourceView){\r\n\t\t\t\tconst resourceConfig = resourceView.$getConfig();\r\n\t\t\t\tif (!resourceConfig.fixed_scales){\r\n\t\t\t\t\tgantt.mixin(resourceConfig, chartConfig, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst isRendered = !!gantt.$root && !!gantt.$task;\r\n\r\n\t\tif(isRendered){\r\n\t\t\tif(cursorOffset){\r\n\t\t\t\tconst cursorDate = this.$gantt.dateFromPos(cursorOffset + this.$gantt.getScrollState().x);\r\n\t\t\t\tthis.$gantt.render();\r\n\t\t\t\tconst newPosition = this.$gantt.posFromDate(cursorDate);\r\n\t\t\t\tthis.$gantt.scrollTo(newPosition - cursorOffset);\r\n\t\t\t}else{\r\n\t\t\t\tconst viewPort = this.$gantt.$task.offsetWidth;\r\n\t\t\t\tif(!this._visibleDate){\r\n\t\t\t\t\tthis._getVisibleDate();\r\n\t\t\t\t}\r\n\t\t\t\tconst middleDate = this._visibleDate;\r\n\t\t\t\tthis.$gantt.render();\r\n\t\t\t\tconst newPosition = this.$gantt.posFromDate(middleDate);\r\n\t\t\t\tthis.$gantt.scrollTo(newPosition - viewPort/2);\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onAfterZoom\", [this._activeLevelIndex, nextConfig]);\r\n\t\t}\r\n\t};\r\n\r\n\tprivate _attachWheelEvent = (config) => {\r\n\t\tconst event = env.isFF ? \"wheel\" : \"mousewheel\";\r\n\t\tlet el: Element;\r\n\t\tif(typeof config.element === \"function\"){\r\n\t\t\tel = config.element();\r\n\t\t}else{\r\n\t\t\tel = config.element as Element;\r\n\t\t}\r\n\t\tif (!el){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._domEvents.attach(el, event, this.$gantt.bind(function(e) {\r\n\t\t\tif (this._useKey) {\r\n\t\t\t\tif (USE_KEY.indexOf(this._useKey) < 0) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!e[this._useKey]) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (typeof this._handler === \"function\") {\r\n\t\t\t\tthis._handler.apply(this, [e]);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}, this), {passive: false});\r\n\t};\r\n\r\n\tprivate _defaultHandler = (e: any):void => {\r\n\t\tconst timelineOffset = this.$gantt.$task.getBoundingClientRect().x;\r\n\t\tconst cursorOffset = e.clientX - timelineOffset;\r\n\t\tconst wheelY = this.$gantt.env.isFF ? (e.deltaY*-40) : e.wheelDelta;\r\n\t\tlet wheelUp = false;\r\n\t\tif (wheelY > 0) {\r\n\t\t\twheelUp = true;\r\n\t\t}\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tthis._setScaleSettings(wheelUp, cursorOffset);\r\n\t};\r\n\r\n\tprivate _setScaleSettings(wheelUp: boolean, cursorOffset: number) {\r\n\t\tif (wheelUp) {\r\n\t\t\tthis._stepUp(cursorOffset);\r\n\t\t} else {\r\n\t\t\tthis._stepDown(cursorOffset);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _setScaleDates = () => {\r\n\t\tif(this._initialStartDate && this._initialEndDate){\r\n\t\t\tthis.$gantt.config.start_date = this._initialStartDate;\r\n\t\t\tthis.$gantt.config.end_date = this._initialEndDate;\r\n\t\t}\r\n\t};\r\n\r\n\tprivate _stepUp(cursorOffset) {\r\n\t\tif (this._activeLevelIndex >= this._levels.length - 1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet nextLevel = this._activeLevelIndex;\r\n\t\tthis._setScaleDates();\r\n\r\n\t\tif(this._widthStep){\r\n\t\t\tlet newColumnWidth = this.$gantt.config.min_column_width + this._widthStep;\r\n\t\t\tif (newColumnWidth > this._maxColumnWidth) {\r\n\t\t\t\tnewColumnWidth = this._minColumnWidth;\r\n\t\t\t\tnextLevel++;\r\n\t\t\t}\r\n\r\n\t\t\tthis.$gantt.config.min_column_width = newColumnWidth;\r\n\t\t}else{\r\n\t\t\tnextLevel++;\r\n\t\t}\r\n\t\tthis._setLevel(nextLevel, cursorOffset);\r\n\t}\r\n\tprivate _stepDown(cursorOffset) {\r\n\t\tif (this._activeLevelIndex < 1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet nextLevel = this._activeLevelIndex;\r\n\t\tthis._setScaleDates();\r\n\r\n\t\tif(this._widthStep){\r\n\t\t\tlet newColumnWidth = this.$gantt.config.min_column_width - this._widthStep;\r\n\t\t\tif (newColumnWidth < this._minColumnWidth) {\r\n\t\t\t\tnewColumnWidth = this._maxColumnWidth;\r\n\t\t\t\tnextLevel--;\r\n\t\t\t}\r\n\t\t\tthis.$gantt.config.min_column_width = newColumnWidth;\r\n\t\t}else{\r\n\t\t\tnextLevel--;\r\n\t\t}\r\n\t\tthis._setLevel(nextLevel, cursorOffset);\r\n\t}\r\n}","export default function(gantt) {\r\n\r\n\tgantt.config.touch_drag = 75; //nearly immediate dnd\r\n\tgantt.config.touch = true;\r\n\tgantt.config.touch_feedback = true;\r\n\tgantt.config.touch_feedback_duration = 1;\r\n\tgantt._prevent_touch_scroll = false;\r\n\r\n\r\n\tgantt._touch_feedback = function () {\r\n\t\tif (gantt.config.touch_feedback) {\r\n\t\t\tif (navigator.vibrate)\r\n\t\t\t\tnavigator.vibrate(gantt.config.touch_feedback_duration);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\t\tif (gantt.$container)\t{\r\n\t\t\taddTouchEvents();\r\n\t\t}\r\n\t});\r\n\tgantt.attachEvent(\"onGanttLayoutReady\", function(){\r\n\t\tif (gantt.$container)\t{\r\n\t\t\t\tgantt.attachEvent(\"onGanttRender\", addTouchEvents, {once: true});\r\n\t\t}\r\n\t});\r\n\r\n\tfunction addTouchEvents(){\r\n\t\tif (gantt.config.touch != \"force\")\r\n\t\t\tgantt.config.touch = gantt.config.touch &&\r\n\t\t\t\t((navigator.userAgent.indexOf(\"Mobile\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"iPad\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Android\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Touch\") != -1)) ||\r\n\t\t\t\t\t((navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1));\r\n\r\n\t\tif (gantt.config.touch) {\r\n\t\t\t// IE doesn't support touch events. In other cases, a user may connect\r\n\t\t\t// a touch device at any time, so it should work in the forced touch mode\r\n\t\t\tconst touchEventsSupported = !gantt.env.isIE || !!window.navigator.maxTouchPoints;\r\n\r\n\t\t\tif (touchEventsSupported) {\r\n\t\t\t\tgantt._touch_events([\"touchmove\", \"touchstart\", \"touchend\"], function (ev) {\r\n\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttarget: ev.target,\r\n\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn ev.defaultPrevented;\r\n\t\t\t\t});\r\n\t\t\t} else if (window.PointerEvent) {\r\n\t\t\t\tgantt._touch_events([\"pointermove\", \"pointerdown\", \"pointerup\"], function (ev) {\r\n\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn (!ev || (ev.pointerType == \"mouse\" ));\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction findTargetView(event){\r\n\t\tvar allViews = gantt.$layout.getCellsByType(\"viewCell\");\r\n\r\n\t\tfor(var i = 0; i < allViews.length; i++){\r\n\t\t\tvar box = allViews[i].$view.getBoundingClientRect();\r\n\t\t\tif(event.clientX >= box.left && event.clientX <= box.right &&\r\n\t\t\t\tevent.clientY <= box.bottom && event.clientY >= box.top){\r\n\t\t\t\t\treturn allViews[i];\r\n\t\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getScrollState(view){\r\n\t\tvar scrollX = view.$config.scrollX ? gantt.$ui.getView(view.$config.scrollX) : null;\r\n\t\tvar scrollY = view.$config.scrollY ? gantt.$ui.getView(view.$config.scrollY) : null;\r\n\r\n\t\tvar scrollState = {x: null, y: null};\r\n\t\tif(scrollX){\r\n\t\t\tvar state = scrollX.getScrollState();\r\n\t\t\tif(state.visible){\r\n\t\t\t\tscrollState.x = scrollX.$view.scrollLeft;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(scrollY){\r\n\t\t\tvar state = scrollY.getScrollState();\r\n\t\t\tif(state.visible){\r\n\t\t\t\tscrollState.y = scrollY.$view.scrollTop;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn scrollState;\r\n\t}\r\n\r\n\tfunction scrollView(view, left, top){\r\n\t\tvar scrollX = view.$config.scrollX ? gantt.$ui.getView(view.$config.scrollX) : null;\r\n\t\tvar scrollY = view.$config.scrollY ? gantt.$ui.getView(view.$config.scrollY) : null;\r\n\r\n\t\tif(scrollX){\r\n\t\t\tscrollX.scrollTo(left, null);\r\n\t\t}\r\n\t\tif(scrollY){\r\n\t\t\tscrollY.scrollTo(null, top);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getTaskDND(){\r\n\t\tvar tasksDnD;\r\n\t\tif(gantt.$ui.getView(\"timeline\")){\r\n\t\t\ttasksDnD = gantt.$ui.getView(\"timeline\")._tasks_dnd;\r\n\t\t}\r\n\t\treturn tasksDnD;\r\n\t}\r\n\r\n\tvar touchHandlers = [];\r\n\r\n//we can't use native scrolling, as we need to sync momentum between different parts\r\n//so we will block native scroll and use the custom one\r\n//in future we can add custom momentum\r\n\tgantt._touch_events = function (names, accessor, ignore) {\r\n\t\t//webkit on android need to be handled separately\r\n\t\tvar dblclicktime = 0;\r\n\t\tvar actionMode = false;\r\n\t\tvar scrollMode = false;\r\n\t\tvar actionStart = null;\r\n\t\tvar previousActionStart = null;\r\n\t\tvar scrollState;\r\n\t\tvar longTapTimer = null;\r\n\t\tvar currentDndId = null;\r\n\t\tvar dndNodes = [];\r\n\t\tvar targetView = null;\r\n\t\tlet multiTouchEvents = {};\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.eventRemove(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\t\ttouchHandlers = [];\r\n\r\n\t\t//touch move\r\n\t\ttouchHandlers.push([gantt.$container, names[0], function (e) {\r\n\t\t\tvar tasksDnD = getTaskDND();\r\n\r\n\t\t\t\tif (ignore(e)) return;\r\n\r\n\t\t\t\t//ignore common and scrolling moves\r\n\t\t\t\tif (!actionMode) return;\r\n\r\n\t\t\t\tif (longTapTimer) clearTimeout(longTapTimer);\r\n\r\n\t\t\t\tvar source = accessor(e);\r\n\t\t\t\tif (tasksDnD && (tasksDnD.drag.id || tasksDnD.drag.start_drag)) {\r\n\t\t\t\t\ttasksDnD.on_mouse_move(source);\r\n\t\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.cancelBubble = true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!gantt._prevent_touch_scroll) {\r\n\t\t\t\t\tif (source && actionStart) {\r\n\t\t\t\t\t\tvar dx = actionStart.pageX - source.pageX;\r\n\t\t\t\t\t\tvar dy = actionStart.pageY - source.pageY;\r\n\t\t\t\t\t\tif (!scrollMode && (Math.abs(dx) > 5 || Math.abs(dy) > 5)) {\r\n\t\t\t\t\t\t\tscrollMode = true;\r\n\t\t\t\t\t\t\t//gantt._touch_scroll_active = scroll_mode = true;\r\n\t\t\t\t\t\t\tdblclicktime = 0;\r\n\r\n\t\t\t\t\t\t\tif(targetView){\r\n\t\t\t\t\t\t\t\tscrollState = getScrollState(targetView);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tscrollState = gantt.getScrollState();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (scrollMode) {\r\n\r\n\t\t\t\t\t\t\tvar newScrollState;\r\n\t\t\t\t\t\t\tvar scrollX = scrollState.x + dx;\r\n\t\t\t\t\t\t\tvar scrollY = scrollState.y + dy;\r\n\t\t\t\t\t\t\tif(targetView){\r\n\t\t\t\t\t\t\t\tscrollView(targetView, scrollX, scrollY);\r\n\t\t\t\t\t\t\t\tnewScrollState = getScrollState(targetView);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tgantt.scrollTo(scrollX, scrollY);\r\n\t\t\t\t\t\t\t\tnewScrollState = gantt.getScrollState();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ((scrollState.x != newScrollState.x && dy > 2 * dx) ||\r\n\t\t\t\t\t\t\t\t(scrollState.y != newScrollState.y && dx > 2 * dy )) {\r\n\t\t\t\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}]);\r\n\r\n\t\t// prevent page drag on touch move\r\n\t\ttry{\r\n\t\t\tdocument.addEventListener('touchmove', function(e) {\r\n\t\t\t\tif (gantt._touch_drag) {\r\n\t\t\t\t\tblock_action(e);\r\n\t\t\t\t}\r\n\t\t\t}, { passive: false });\r\n\t\t}\r\n\t\tcatch(e){\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tconsole.warn(\"Cannot prevent touch event for the page drag\");\r\n\t\t}\r\n\r\n\t\t//block touch context menu in IE10\r\n\t\ttouchHandlers.push([this.$container, \"contextmenu\", function (e) {\r\n\t\t\tif (actionMode)\r\n\t\t\t\treturn block_action(e);\r\n\t\t}]);\r\n\r\n\t\t//touch start\r\n\t\ttouchHandlers.push([this.$container, names[1], function (e) {\r\n\t\t\tmultiTouchEvents = e.touches.length;\r\n\t\t\t// block pull-to-refresh\r\n\t\t\tif(document && document.body){\r\n\t\t\t\tdocument.body.classList.add(\"gantt_touch_active\");\r\n\t\t\t}\r\n\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (e.touches && e.touches.length > 1) {\r\n\t\t\t\tactionMode = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tactionStart = accessor(e);\r\n\t\t\ttargetView = findTargetView(actionStart);\r\n\t\t\tif (!gantt._locate_css(actionStart, \"gantt_hor_scroll\") && !gantt._locate_css(actionStart, \"gantt_ver_scroll\")) {\r\n\t\t\t\tactionMode = true;\r\n\t\t\t}\r\n\t\t\tvar tasksDnD = getTaskDND();\r\n\r\n\t\t\t//long tap\r\n\t\t\tlongTapTimer = setTimeout(function () {\r\n\t\t\t\tvar taskId = gantt.locate(actionStart);\r\n\t\t\t\tif (tasksDnD && (taskId && !gantt._locate_css(actionStart, \"gantt_link_control\") && !gantt._locate_css(actionStart, \"gantt_grid_data\"))) {\r\n\t\t\t\t\ttasksDnD.on_mouse_down(actionStart);\r\n\r\n\t\t\t\t\tif (tasksDnD.drag && tasksDnD.drag.start_drag) {\r\n\t\t\t\t\t\t// we need that as touch events break if the target node is removed from the DOM\r\n\t\t\t\t\t\tcloneTaskRendered(taskId);\r\n\t\t\t\t\t\ttasksDnD._start_dnd(actionStart);\r\n\t\t\t\t\t\tgantt._touch_drag = true;\r\n\r\n\t\t\t\t\t\tgantt.refreshTask(taskId);\r\n\r\n\t\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlongTapTimer = null;\r\n\t\t\t}, gantt.config.touch_drag);\r\n\t\t}]);\r\n\r\n\t\t//touch end\r\n\t\ttouchHandlers.push([this.$container, names[2], function (e) {\r\n\t\t\tif(document && document.body){\r\n\t\t\t\tdocument.body.classList.remove(\"gantt_touch_active\");\r\n\t\t\t}\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (longTapTimer) clearTimeout(longTapTimer);\r\n\t\t\tgantt._touch_drag = false;\r\n\t\t\tactionMode = false;\r\n\t\t\tvar source = accessor(e);\r\n\r\n\t\t\tvar tasksDnD = getTaskDND();\r\n\r\n\t\t\tif(tasksDnD)\r\n\t\t\t\ttasksDnD.on_mouse_up(source);\r\n\r\n\t\t\tif (currentDndId && gantt.isTaskExists(currentDndId)) {\r\n\t\t\t\tgantt.refreshTask(currentDndId);\r\n\t\t\t\tif(dndNodes.length){\r\n\t\t\t\t\tdndNodes.forEach(function(node){\r\n\t\t\t\t\t\tif(node.parentNode){\r\n\t\t\t\t\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//gantt._touch_scroll_active = action_mode = scroll_mode = false;\r\n\t\t\tactionMode = scrollMode = false;\r\n\t\t\tdndNodes = [];\r\n\t\t\tcurrentDndId = null;\r\n\r\n\t\t\t//dbl-tap handling\r\n\t\t\tif (actionStart && dblclicktime) {\r\n\t\t\t\tvar now = new Date();\r\n\t\t\t\t// doubletap shouldn't happen with multitouch\r\n\t\t\t\tconst noMultitouch = multiTouchEvents <= 1;\r\n\t\t\t\t// double click events shouldn't fire when we quickly tap on different nodes\r\n\t\t\t\tconst sameTarget = previousActionStart && previousActionStart.target.innerHTML == actionStart.target.innerHTML;\r\n\t\t\t\tif ((now - dblclicktime) < 500 && noMultitouch && sameTarget) {\r\n\r\n\t\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\t\t\tmouseEvents.onDoubleClick(actionStart);\r\n\t\t\t\t\tblock_action(e);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdblclicktime = now;\r\n\t\t\t\t\tpreviousActionStart = actionStart;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tdblclicktime = new Date();\r\n\t\t\t}\r\n\t\t}]);\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.event(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\r\n\t\t//common helper, prevents event\r\n\t\tfunction block_action(e) {\r\n\t\t\tif (e && e.preventDefault && e.cancelable){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\te.cancelBubble = true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction cloneTaskRendered(taskId) {\r\n\t\t\tconst renders = gantt._getTaskLayers();\r\n\t\t\tlet task = gantt.getTask(taskId);\r\n\t\t\tif (task) {\r\n\t\t\t\tlet visible = gantt.isTaskVisible(taskId);\r\n\t\t\t\tif (visible){\r\n\t\t\t\t\tcurrentDndId = taskId;\r\n\t\t\t\t\tfor (let i = 0; i < renders.length; i++) {\r\n\t\t\t\t\t\ttask = renders[i].rendered[taskId];\r\n\t\t\t\t\t\tif (task && task.getAttribute(gantt.config.task_attribute) && task.getAttribute(gantt.config.task_attribute) == taskId) {\r\n\t\t\t\t\t\t\tconst copy = task.cloneNode(true);\r\n\t\t\t\t\t\t\tdndNodes.push(task);\r\n\t\t\t\t\t\t\trenders[i].rendered[taskId] = copy;\r\n\t\t\t\t\t\t\ttask.style.display = \"none\";\r\n\t\t\t\t\t\t\tcopy.className += \" gantt_drag_move \";\r\n\t\t\t\t\t\t\ttask.parentNode.appendChild(copy);\r\n\t\t\t\t\t\t\t//return copy;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (task.$split_subtask){\r\n\t\t\t\t\tlet renderedParent = task.$rendered_parent;\r\n\t\t\t\t\tvisible = gantt.isTaskVisible(renderedParent);\r\n\t\t\t\t\tif (!visible){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcurrentDndId = taskId;\r\n\t\t\t\t\tfor (let i = 0; i < renders.length; i++) {\r\n\t\t\t\t\t\tconst parent = renders[i].rendered[renderedParent];\r\n\t\t\t\t\t\tlet taskNode;\r\n\t\t\t\t\t\tif (parent && parent.childNodes){\r\n\t\t\t\t\t\t\ttaskNode = parent.querySelector(`[${gantt.config.task_attribute}=\"${task.id}\"]`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (taskNode) {\r\n\t\t\t\t\t\t\t// move the child node to a different parent as the task bar will be repainted\r\n\t\t\t\t\t\t\t// and the initial node will be lost\r\n\t\t\t\t\t\t\tconst copy = taskNode.cloneNode(true);\r\n\t\t\t\t\t\t\ttaskNode.parentNode.appendChild(copy);\r\n\r\n\t\t\t\t\t\t\tgantt.$task_bars.appendChild(taskNode);\r\n\t\t\t\t\t\t\ttaskNode.style.display = \"none\";\r\n\r\n\t\t\t\t\t\t\t// don't add the node as rendered otherwise it will be lost:\r\n\t\t\t\t\t\t\t// renders[i].rendered[taskId] = taskNode;\r\n\t\t\t\t\t\t\t// instead, add it to dndNodes as its elements will be removed after drag\r\n\t\t\t\t\t\t\tdndNodes.push(taskNode);\r\n\r\n\t\t\t\t\t\t\ttaskNode = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n};","function dummy() {\r\n\t// eslint-disable-next-line\r\n\tconsole.log(\"Method is not implemented.\"); \r\n}\r\nfunction BaseControl() {\r\n}\r\n\r\n// base methods will be runned in gantt context\r\nBaseControl.prototype.render = dummy; // arguments: sns\r\nBaseControl.prototype.set_value = dummy; // arguments: node, value, ev, sns(config)\r\nBaseControl.prototype.get_value = dummy; // arguments node, ev, sns(config)\r\nBaseControl.prototype.focus = dummy; // arguments: node\r\n\r\nexport default function(gantt) { // we could send current instance of gantt to module\r\n\treturn BaseControl;\r\n};","import * as helpers from \"../../../utils/helpers\";\r\n\r\nvar htmlHelpers = {\r\n\tgetHtmlSelect: function(options, attributes, value) {\r\n\t\tvar innerHTML = \"\";\r\n\t\tvar _this = this;\r\n\r\n\t\toptions = options || [];\r\n\t\t\r\n\t\thelpers.forEach(options, function(entry) {\r\n\t\t\tvar _attributes = [{ key: \"value\", value: entry.key }];\r\n\r\n\t\t\tif (value == entry.key) {\r\n\t\t\t\t_attributes[_attributes.length] = { key: \"selected\", value: \"selected\" };\r\n\t\t\t}\r\n\t\t\tif (entry.attributes) {\r\n\t\t\t\t_attributes = _attributes.concat(entry.attributes);\r\n\t\t\t}\r\n\t\t\tinnerHTML += _this.getHtmlOption({ innerHTML: entry.label }, _attributes);\r\n\t\t});\r\n\r\n\t\treturn _getHtmlContainer(\"select\", { innerHTML: innerHTML }, attributes);\r\n\t},\r\n\tgetHtmlOption: function(options, attributes) { return _getHtmlContainer(\"option\", options, attributes); },\r\n\tgetHtmlButton: function(options, attributes) { return _getHtmlContainer(\"button\", options, attributes); },\r\n\tgetHtmlDiv: function(options, attributes) { return _getHtmlContainer(\"div\", options, attributes); },\r\n\tgetHtmlLabel: function(options, attributes) { return _getHtmlContainer(\"label\", options, attributes); },\r\n\tgetHtmlInput: function(attributes) {\r\n\t\treturn \"<input\" + _getHtmlAttributes(attributes || []) + \">\";\r\n\t}\r\n};\r\n\r\nfunction _getHtmlContainer(tag, options, attributes) {\r\n\tvar html;\r\n\r\n\toptions = options || [];\r\n\t\r\n\thtml = \"<\" + tag + _getHtmlAttributes(attributes || []) + \">\" + (options.innerHTML || \"\") + \"</\" + tag +\">\";\r\n\treturn html;\r\n\r\n}\r\n\r\nfunction _getHtmlAttributes(attributes) {\r\n\tvar html = \"\";\r\n\r\n\thelpers.forEach(attributes, function(entry) {\r\n\t\thtml += \" \" + entry.key + \"='\" + entry.value + \"'\";\r\n\t});\r\n\treturn html;\r\n}\r\n\r\nexport default htmlHelpers;","import __extends from \"../../../../utils/extends\";\r\nimport htmlHelpers from \"../../utils/html_helpers\";\r\n\r\nimport Super from \"./base_control\";\r\n\r\nexport default function(gantt) {\r\n\tconst _super = Super(gantt);\r\n\r\n\tfunction SelectControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\t\r\n\t\treturn self; \r\n\t}\r\n\t\r\n\t__extends(SelectControl, _super);\r\n\t\r\n\tSelectControl.prototype.render = function(sns) {\r\n\t\tconst height = sns.height ? `height:${sns.height}px;` : '';\r\n\t\tlet html = `<div class='gantt_cal_ltext gantt_section_${sns.name}' ${height ? `style='${height}'` : ''}>`;\r\n\r\n\t\thtml += htmlHelpers.getHtmlSelect(sns.options, [{ key: \"style\", value: \"width:100%;\" }, { key: \"title\", value: sns.name }]);\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tSelectControl.prototype.set_value = function(node, value, ev, sns) {\r\n\t\tvar select = node.firstChild;\r\n\t\tif (!select._dhx_onchange && sns.onchange) {\r\n\t\t\tselect.onchange = sns.onchange;\r\n\t\t\tselect._dhx_onchange = true;\r\n\t\t}\r\n\t\tif (typeof value === \"undefined\")\r\n\t\t\tvalue = (select.options[0] || {}).value;\r\n\t\tselect.value = value || \"\";\r\n\t};\r\n\t\r\n\tSelectControl.prototype.get_value = function(node) {\r\n\t\treturn node.firstChild.value;\r\n\t};\r\n\t\r\n\tSelectControl.prototype.focus = function(node) {\r\n\t\tvar a = node.firstChild;\r\n\t\tgantt._focus(a, true);\r\n\t};\r\n\t\r\n\treturn SelectControl;\r\n};","import __extends from \"../../../../utils/extends\";\r\nimport SelectControl from \"./select_control\";\r\nexport default function(gantt) {\r\n\tvar _super = SelectControl(gantt);\r\n\r\n\tfunction ParentControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this; \r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(ParentControl, _super);\r\n\r\n\r\n\tParentControl.prototype.render = function(sns) {\r\n\t\treturn _display(sns, false);\r\n\t};\r\n\r\n\tParentControl.prototype.set_value = function(node, value, ev, config) {\r\n\t\t// GS-1051. If the value is `0`, the set_value function in the select control won't select \r\n\t\t// the first child because (0 || '') = '';\r\n\t\tif (value === 0) value = \"0\";\r\n\r\n\t\t// GS-1374. Usually, the ID is not specified,\r\n\t\t// we need to add it to keep the options and exclude the current task\r\n\t\tif (!ev.id && gantt.getState().lightbox) {\r\n\t\t\tev.id = gantt.getLightboxValues().id;\r\n\t\t}\r\n\r\n\t\tvar tmpDom = document.createElement(\"div\");\r\n\t\ttmpDom.innerHTML = _display(config, ev.id);\r\n\t\tvar newOptions = tmpDom.removeChild(tmpDom.firstChild);\r\n\t\tnode.onselect = null;\r\n\t\tnode.parentNode.replaceChild(newOptions, node);\r\n\r\n\t\treturn gantt.form_blocks.select.set_value.apply(gantt, [newOptions, value, ev, config]);\r\n\t};\r\n\r\n\tfunction _display(config, item_id) {\r\n\t\tvar tasks = [],\r\n\t\t\toptions = [];\r\n\t\tif (item_id) {\r\n\t\t\ttasks = gantt.getTaskByTime();\r\n\t\t\tif (config.allow_root) {\r\n\t\t\t\ttasks.unshift({id: gantt.config.root_id, text: config.root_label || \"\"});\r\n\t\t\t}\r\n\t\t\ttasks = _filter(tasks, config, item_id);\r\n\t\t\tif (config.sort) {\r\n\t\t\t\ttasks.sort(config.sort);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar text = config.template || gantt.templates.task_text;\r\n\t\tfor (var i = 0; i < tasks.length; i++) {\r\n\t\t\tvar label = text.apply(gantt, [tasks[i].start_date, tasks[i].end_date, tasks[i]]);\r\n\t\t\tif (label === undefined) {\r\n\t\t\t\tlabel = \"\";\r\n\t\t\t}\r\n\t\t\toptions.push({\r\n\t\t\t\tkey: tasks[i].id,\r\n\t\t\t\tlabel: label\r\n\t\t\t});\r\n\t\t}\r\n\t\tconfig.options = options;\r\n\t\tconfig.map_to = config.map_to || \"parent\";\r\n\t\treturn gantt.form_blocks.select.render.apply(this, arguments);\r\n\t}\r\n\r\n\tfunction _filter(options, config, item_id) {\r\n\t\tvar filter = config.filter || function() {\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\toptions = options.slice(0);\r\n\r\n\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\tvar task = options[i];\r\n\t\t\tif (task.id == item_id || gantt.isChildOf(task.id, item_id) || filter(task.id, task) === false) {\r\n\t\t\t\toptions.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn options;\r\n\t}\r\n\treturn ParentControl;\r\n};","\r\nimport * as helpers from \"../../../../utils/helpers\";\r\nimport __extends from \"../../../../utils/extends\";\r\nimport Super from \"./base_control\";\r\n\r\nexport default function(gantt) {\r\n\tconst _super = Super(gantt);\r\n\r\n\tconst localCache = {\r\n\t\tresources: {},\r\n\t\tresourcesValues: {},\r\n\t\tfilter: {},\r\n\t\teventsInitialized: {},\r\n\t\tgridID: null,\r\n\t\tresource_filter_value: null,\r\n\t\tinitialValues: [],\r\n\t\tnewValues: []\r\n\t};\r\n\r\n\tconst selectResEditor = { type: \"select\", map_to: \"resource_id\" , options: gantt.serverList(\"resourceOptions\")};\r\n\tconst numberEditor = { type: \"number\", map_to: \"value\", min: 0, max: 100 };\r\n\r\n\tconst dateToStr = gantt.date.date_to_str(\"%d-%m-%Y\");\r\n\r\n\tgantt.resource_table = {\r\n\t\tscale_height: 35,\r\n\t\trow_height: 35,\r\n\t\tcolumns: [\r\n\t\t\t{\r\n\t\t\t\tname: \"resource\", label: \"Resource\", align: \"center\", width: 80, editor: selectResEditor, template: function (assignment) {\r\n\t\t\t\t\tlet defaultValue = \"Unassigned\";\r\n\t\t\t\t\tconst resource = gantt.getDatastore(gantt.config.resource_store).getItem(assignment.resource_id);\r\n\t\t\t\t\treturn resource ? resource.text : defaultValue;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"hours/Day\", label: \"Hours/Day\", align: \"center\", width: 70, editor: numberEditor, template: function (assignment) {\r\n\t\t\t\t\treturn assignment.value ? +assignment.value : ``;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"start\", label: \"Start\", align: \"center\", width: 100, template: function (assignment) {\r\n\t\t\t\t\treturn assignment.start_date ? dateToStr(assignment.start_date) : ``;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"end\", label: \"End\", align: \"center\", width: 100, template: function (assignment) {\r\n\t\t\t\t\treturn assignment.end_date ? dateToStr(assignment.end_date) : ``;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"duration\", label: \"Duration\", align: \"center\", width: 80, template: function (assignment) {\r\n\t\t\t\t\tif (assignment.duration) {\r\n\t\t\t\t\t\treturn `${assignment.duration} day${assignment.duration == 1 ? '' : 's'}`;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn ``;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"delete\", label: \"Delete\", align: \"center\", width: 80, template: function (assignment) {\r\n\t\t\t\t\treturn `<div data-assignment-id='${assignment.id}' data-assignment-delete='${assignment.id}' class='dhx_gantt_icon dhx_gantt_icon_delete'></div>`;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t],\r\n\t\tresource_default_assignment: {\r\n\t\t\tduration: null,\r\n\t\t\tvalue: 8,\r\n\t\t\tstart_date: null,\r\n\t\t\tend_date: null,\r\n\t\t\tmode: \"default\"\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onAfterLightbox\", _clearCached);\r\n\r\n\tfunction newResourcesControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(newResourcesControl, _super);\r\n\r\n\tfunction _generateResourceInputSection(index, name) {\r\n\t\tconst resourceFilterPlaceholder = gantt.locale.labels.resources_filter_placeholder || \"Search...\";\r\n\t\tconst html = `<div class='gantt_resource_selector_filter_wrapper gantt_cal_lsection' data-section-name='${name}'>\r\n\t\t\t\t\t\t<div class='gantt_cal_ltext gantt_resources_filter'>\r\n\t\t\t\t\t\t\t<label class=\"dhx_gantt_icon dhx_gantt_icon_search\">\r\n\t\t\t\t\t\t\t\t<input type='text' class='gantt_resources_filter_input' placeholder='${resourceFilterPlaceholder}' tab-index=\"-1\"> \r\n\t\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div role='button' aria-label='Add Assignment' class='gantt_custom_button gantt_add_resources' data-index='${index}'><div class='gantt_custom_button_add_resources gantt_add'></div><div class='gantt_custom_button_label'>${gantt.locale.labels.resources_add_button}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>`;\r\n\t\treturn html;\r\n\t}\r\n\r\n\r\n\tfunction _generateResourceTable(node, assignments, task, sns) {\r\n\t\t// destroy grid if it exists\r\n\t\tif(gantt.$ui.getView(\"GridRL\") && !localCache.gridID){\r\n\t\t\tgantt.$ui.getView(\"GridRL\").destructor();\r\n\t\t}\r\n\r\n\t\tif (!localCache.gridID) {\r\n\t\t\t// temp store for assignments in the lightbox\r\n\t\t\tconst resourceTable = document.createElement(\"div\");\r\n\t\t\tresourceTable.classList.add(\"gantt_resource_selector_grid\");\r\n\t\t\tconst tempAssignmentStore = gantt.createDatastore({\r\n\t\t\t\tname: \"temp_resource_assignment_store\",\r\n\t\t\t\tinitItem: function (item) {\r\n\t\t\t\t\tif (!item.id) {\r\n\t\t\t\t\t\titem.id = gantt.uid();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tgantt.$data.tempAssignmentsStore = tempAssignmentStore; // link to gantt\r\n\t\t\tconst gridConfig = {...gantt.config.layout, id: \"GridRL\", sectionName: sns.name };\r\n\t\t\tconst grid = gantt.$ui.createView(\"GridRL\", gantt.$root, gridConfig);  // creating grid\r\n\t\t\tgrid.init(resourceTable); // init grid\r\n\t\t\tconst width = gantt._lightbox.offsetWidth - (gantt.config.wide_form ? 150 : 0); \r\n\t\t\tgrid.setSize(width, \"auto\"); // set width and height of the grid\r\n\t\t\tgantt.ext.inlineEditorsLightbox = gantt.ext._inlineEditors.createEditors(grid); //attach inline editors\r\n\t\t\tgantt.ext.inlineEditorsLightbox.init();\r\n\t\t\tlocalCache.gridID = grid.$id;\r\n\t\t\tnode.appendChild(resourceTable);\r\n\t\t\tconst resourceAssignmentsStore = gantt.getDatastore(gantt.config.resource_assignment_store);  // main store\r\n\t\t\tconst searchItems = [];\r\n\t\t\tresourceAssignmentsStore.eachItem(function(item){\r\n\t\t\t\tif(item.task_id && item.task_id == task.id){\r\n\t\t\t\t\tsearchItems.push(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconst clonedAssignments = structuredClone(searchItems); // clone\r\n\t\t\ttempAssignmentStore.parse(clonedAssignments); // add all assignments from main to temp\r\n\t\t}\r\n\r\n\t\tgantt.$data.tempAssignmentsStore.attachEvent(\"onFilterItem\", function(id, assignment) {\r\n\t\t\tif (assignment.task_id == task.id){\r\n\t\t\t\tif (!localCache.resource_filter_value) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet resource = gantt.getDatastore(gantt.config.resource_store).getItem(assignment.resource_id);\r\n\t\t\t\t\tif (resource.text.toLowerCase().indexOf(localCache.resource_filter_value) > -1) return true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\t\tgantt.refreshData();\r\n\t}\r\n\r\n\tfunction _generateAssignmentDefaultRow(sectionName) {\r\n\t\tlet resource_id;\r\n\t\tconst task = gantt.getTask(gantt._lightbox_id);\r\n\t\tconst assignments = gantt.getTaskAssignments(task.id);\r\n\t\tif(assignments.length){\r\n\t\t\tresource_id = assignments[0].resource_id;\r\n\t\t} else {\r\n\t\t\tconst resources = gantt.serverList(\"resourceOptions\");\r\n\t\t\tif(resources.length){\r\n\t\t\t\tresource_id = resources[0].id;\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(`There is no any resources in resource store, please check your data:\r\n\t\t\t\t\thttps://docs.dhtmlx.com/gantt/desktop__resource_management.html#assigningresources`);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst tempAssignmentStore = gantt.getDatastore(\"temp_resource_assignment_store\");\r\n\t\tconst lightboxSection = gantt.getLightboxSection(sectionName).section;\r\n\t\tconst resourceConfig = lightboxSection.config ?? gantt.resource_table;\r\n\t\tconst config = resourceConfig.resource_default_assignment ?? gantt.resource_table.resource_default_assignment;\r\n\r\n\t\ttempAssignmentStore.addItem({\r\n\t\t\tresource_id,\r\n\t\t\ttask_id: task.id,\r\n\t\t\tduration: config.duration ?? gantt.calculateDuration(task),\r\n\t\t\tvalue: config.value,\r\n\t\t\tstart_date: config.start_date ?? task.start_date,\r\n\t\t\tend_date: config.end_date ?? task.end_date,\r\n\t\t\tmode: config.mode\r\n\t\t});\r\n\t\tgantt.refreshData();\r\n\t}\r\n\r\n\tfunction _setFocus(container){\r\n\t\tconst resourceRows = container.querySelectorAll(\".gantt_row.gantt_row_task\");\r\n\t\tif(resourceRows){\r\n\t\t\tconst lastRow = resourceRows[resourceRows.length -1];\r\n\t\t\tconst resourceCell = lastRow.querySelector(\".gantt_cell\");\r\n\t\t\tif(resourceCell){\r\n\t\t\t\tconst {id, columnName} = gantt.ext.inlineEditorsLightbox.locateCell(resourceCell);\r\n\t\t\t\tif(id && columnName){\r\n\t\t\t\t\tgantt.ext.inlineEditorsLightbox.startEdit(id, columnName);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tnewResourcesControl.prototype.render = function(sns) {\r\n\t\tif(!sns.options){\r\n\t\t\tsns.options = gantt.serverList(\"resourceOptions\");\r\n\t\t}\r\n\r\n\t\tif(!sns.map_to || sns.map_to == \"resource_selector\" || sns.map_to == \"auto\"){\r\n\t\t\tsns.map_to = gantt.config.resource_property;\r\n\t\t}\r\n\r\n\t\tlet html;\r\n\t\t// if set fixed height for this element, then resize of lightbox will be calculated improperly\r\n\t\thtml = `<div${!isNaN(sns.height) ? \" style='height:auto;'\" : \"\"} class='gantt_section_${sns.name}' data-section-name='${sns.name}'>`;\r\n\t\thtml += _generateResourceInputSection(sns.index, sns.name);\r\n\t\thtml += `</div>`;\r\n\t\thtml += `<div class=\"resources_section_placeholder\" style='display:none;'>${gantt.locale.labels.resources_section_placeholder}</div>`;\r\n\t\treturn html;\r\n\t};\r\n\r\n\tnewResourcesControl.prototype.button_click = function (index, el, section, container) {\r\n\t\tconst sectionName = section.getAttribute(\"data-section-name\") || container.getAttribute(\"data-section-name\");\r\n\t\tconst firstAddBtn = document.querySelector(\"[data-resource-selector-section]\");\r\n\t\tconst placeholder = document.querySelector(\".resources_section_placeholder\");\r\n\t\tconst resourceSection = document.querySelector(`.gantt_section_${sectionName} .gantt_resource_selector_filter_wrapper`);\r\n\t\tconst resourceGrid = document.querySelector(`.gantt_section_${sectionName} .gantt_grid`);\r\n\t\tfirstAddBtn.style.display = \"none\";\r\n\r\n\t\tif (gantt.callEvent(\"onSectionButton\", [gantt._lightbox_id, section]) === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (el.closest(\".gantt_custom_button.gantt_add_resources\")){\r\n\t\t\tplaceholder.style.display = \"none\";\r\n\t\t\tconst tempAssignmentStore = gantt.getDatastore(\"temp_resource_assignment_store\");\r\n\r\n\t\t\tif(tempAssignmentStore && tempAssignmentStore.getItems().length == 0){\r\n\t\t\t\tresourceSection.style.display = \"flex\";\r\n\t\t\t\tresourceGrid.style.display = \"block\";\r\n\t\t\t}\r\n\r\n\t\t\t_generateAssignmentDefaultRow(sectionName);\r\n\t\t\t_setFocus(container);\r\n\t\t}\r\n\t};\r\n\r\n\tfunction setInitialValues(task){\r\n\t\tlocalCache.initialValues = [];\r\n\t\tlocalCache.newValues = [];\r\n\t\tconst assignmentStore = gantt.$data.assignmentsStore;\r\n\t\tconst storeAssignments = assignmentStore.find(function (a) {\r\n\t\t\treturn a.task_id == task.id;\r\n\t\t});\r\n\t\tfor (let i = 0; i < storeAssignments.length; i++) {\r\n\t\t\tlocalCache.initialValues[i] = { resource_id: storeAssignments[i].resource_id, value: storeAssignments[i].value, id: storeAssignments[i].id };\r\n\t\t}\r\n\t}\r\n\r\n\tnewResourcesControl.prototype.set_value = function(node, assignments, task, sns, initialized) {\r\n\t\tlet firstAddBtn = document.querySelector(\"[data-resource-selector-section]\");\r\n\t\tlet placeholder = document.querySelector(\".resources_section_placeholder\");\r\n\t\tsetInitialValues(task);\r\n\t\tif(!initialized){\r\n\t\t\t\t_generateResourceTable(node, assignments, task, sns);\r\n\t\t\t\t_setFilterCache(node, sns);\r\n\t\t\t\t_initEvents(node, assignments, sns, this);\r\n\t\t\t\tfirstAddBtn.style.display = \"none\";\r\n\t\t\t\tlet resourceGrid = document.querySelector(`.gantt_section_${sns.name} .gantt_grid`);\r\n\t\t\t\tlet resourceSection = document.querySelector(`.gantt_section_${sns.name} .gantt_resource_selector_filter_wrapper`);\r\n\t\t\t\tresourceGrid.style.display = \"none\";\r\n\t\t\t\tresourceSection.style.display = \"none\";\r\n\t\t}\r\n\t\tconst tempAssignmentStore = gantt.getDatastore(\"temp_resource_assignment_store\");\r\n\t\tif(tempAssignmentStore) {\r\n\t\t\tlet resourceSection = document.querySelector(`.gantt_section_${sns.name} .gantt_resource_selector_filter_wrapper`);\r\n\t\t\tlet resourceGrid = document.querySelector(`.gantt_section_${sns.name} .gantt_grid`);\r\n\r\n\t\t\tif(tempAssignmentStore.getItems().length == 0){\r\n\t\t\t\tif(firstAddBtn.style.display == \"none\"){\r\n\t\t\t\t\tfirstAddBtn.style.display = \"flex\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresourceSection.style.display = \"none\";\r\n\t\t\t\tresourceGrid.style.display = \"none\";\r\n\t\t\t\tplaceholder.style.display = \"block\";\r\n\t\t\t} else {\r\n\t\t\t\tresourceSection.style.display = \"flex\";\r\n\t\t\t\tresourceGrid.style.display = \"block\";\r\n\t\t\t\tplaceholder.style.display = \"none\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tgantt._center_lightbox(gantt.getLightbox());\r\n\t};\r\n\r\n\tnewResourcesControl.prototype.get_value = function(node, task, sns, type) {\r\n\t\tconst tempAssignmentStore = gantt.getDatastore(\"temp_resource_assignment_store\");\r\n\t\tconst storeAssignments = tempAssignmentStore.find(function (a) {\r\n\t\t\treturn a.task_id == task.id;\r\n\t\t});\r\n\t\tfor (let i = 0; i < storeAssignments.length; i++) {\r\n\t\t\tlocalCache.newValues[i] = { \r\n\t\t\t\tresource_id: storeAssignments[i].resource_id.toString(), \r\n\t\t\t\tvalue: storeAssignments[i].value, \r\n\t\t\t\tid: storeAssignments[i].id, \r\n\t\t\t\tstart_date: storeAssignments[i].start_date,\r\n\t\t\t\tend_date: storeAssignments[i].end_date,\r\n\t\t\t\tduration: storeAssignments[i].duration,\r\n\t\t\t\tmode: storeAssignments[i].mode,\r\n\t\t\t\tdelay: storeAssignments[i].delay\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif (type == \"save\"){\r\n\t\t\treturn localCache.newValues;\r\n\t\t} else {\r\n\t\t\treturn localCache.initialValues;\r\n\t\t}\r\n\t};\r\n\r\n\tfunction getVisibleResources(task, options){\r\n\t\tlet visibleResources = [];\r\n\t\tconst tempAssignmentStore = gantt.getDatastore(\"temp_resource_assignment_store\");\r\n\t\tconst currentAssignments = tempAssignmentStore.find(function (a) {\r\n\t\t\treturn a.task_id == task.id;\r\n\t\t});\r\n\t\tfor (let i = 0; i < currentAssignments.length; i++) {\r\n\t\t\tlet resource = gantt.getDatastore(gantt.config.resource_store).getItem(currentAssignments[i].resource_id);\r\n\t\t\tif(resource){\r\n\t\t\t\tvisibleResources.push(resource);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn visibleResources;\r\n\t}\r\n\r\n\tfunction _getValue(el) {\r\n\t\treturn el.value.trim();\r\n\t}\r\n\r\n\tfunction _initEvents(node, ev, sns, context) {\r\n\t\tif (localCache.eventsInitialized[sns.id]) return;\r\n\r\n\t\tvar _applyFilter = function(e) {\r\n\t\t\t_saveValues(sns, node);\r\n\t\t\tvar resultSns;\r\n\t\t\tvar query;\r\n\t\t\tvar input;\r\n\t\t\tvar filterCache = _getFilterCache(sns);\r\n\t\t\tinput = filterCache.input;\r\n\r\n\t\t\tquery = _getValue(input);\r\n\t\t\tlocalCache.resource_filter_value = query.toLowerCase();\r\n\t\t\tfilterCache.filterApplied = !!query;\r\n\t\t\tif (gantt.getState().lightbox) {\r\n\t\t\t\tev = gantt.getLightboxValues();\r\n\t\t\t}\r\n\t\t\tresultSns = _getSnsToHideUnsetted(sns, ev, query);\r\n\t\t\tvar value = ev[sns.map_to];\r\n\t\t\tcontext.form_blocks.resource_selector.set_value(node, value, ev, resultSns);\r\n\t\t};\r\n\r\n\t\tfunction _saveValues(sns, domElement) {\r\n\t\t\tvar selector = _getInputElementSelector();\r\n\t\t\tvar inputs = domElement.querySelectorAll(selector);\r\n\r\n\t\t\tlocalCache.resourcesValues[sns.id] = localCache.resourcesValues[sns.id] || {};\r\n\r\n\t\t\tfor (var i = 0; i < inputs.length; i++) {\r\n\t\t\t\tvar key = inputs[i].getAttribute(\"data-item-id\");\r\n\t\t\t\tvar originalAssignmentId = inputs[i].getAttribute(\"data-assignment-id\");\r\n\t\t\t\tif (!inputs[i].disabled) {\r\n\t\t\t\t\tlocalCache.resourcesValues[sns.id][key] = {value: inputs[i].value, id: originalAssignmentId};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdelete localCache.resourcesValues[sns.id][key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_applyFilter = helpers.throttle(_applyFilter, 100);\r\n\r\n\t\t_getFilterCache(sns).container.addEventListener(\"keyup\", _applyFilter);\r\n\t\t_getFilterCache(sns).container.addEventListener(\"input\", _applyFilter, true);\r\n\t\t_getFilterCache(sns).container.addEventListener(\"change\", _applyFilter, true);\r\n\t\tlocalCache.eventsInitialized[sns.id] = true;\r\n\t}\r\n\r\n\tfunction _getSnsToHideUnsetted(controlConfig, task, query, hideUnsetted) {\r\n\t\tvar comparison;\r\n\t\tvar resultConfig = gantt.copy(controlConfig);\r\n\r\n\t\tif (query === \"\") {// show all\r\n\t\t\tresultConfig.resources = [];\r\n\t\t\tlet resourceIds = localCache.newValues.map(obj => {\r\n\t\t\t\treturn obj.resource_id;\r\n\t\t\t});\r\n\t\t\tif(resourceIds && resourceIds.length > 0){\r\n\t\t\t\tfor (let i = 0; i < resourceIds.length; i++) {\r\n\t\t\t\t\tlet resource = gantt.getDatastore(gantt.config.resource_store).getItem(resourceIds[i]);\r\n\t\t\t\t\tif(resource){\r\n\t\t\t\t\t\tresultConfig.resources.push(resource);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn resultConfig;\r\n\t\t}\r\n\r\n\t\tcomparison = function(entry) {// show matching labels only\r\n\t\t\tif (entry.text.toLowerCase().indexOf(query.toLowerCase()) >= 0) {\r\n\t\t\t\treturn entry;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tresultConfig.resources = getVisibleResources(task, controlConfig.options);\r\n\t\tresultConfig.resources = helpers.arrayFilter(resultConfig.resources, comparison);\r\n\t\treturn resultConfig;\r\n\t}\r\n\r\n\tfunction _getInputElementSelector(isChecked) {\r\n\t\tif(isChecked === undefined){\r\n\t\t\treturn \".gantt_resource_amount_input\";\r\n\t\t}else{\r\n\t\t\treturn \"[data-checked='\"+(isChecked ? \"true\" : \"false\") + \"'] .gantt_resource_amount_input\";\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _setFilterCache(node, sns) {\r\n\t\tif (!localCache.filter[sns.id]) {\r\n\t\t\tvar container = node.querySelector(\".gantt_resources_filter\");\r\n\t\t\tvar input = container.querySelector(\".gantt_resources_filter_input\");\r\n\r\n\t\t\tlocalCache.filter[sns.id] = {\r\n\t\t\t\tcontainer: container,\r\n\t\t\t\tinput: input,\r\n\t\t\t\tfilterApplied: false\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn localCache.filter[sns.id];\r\n\t}\r\n\r\n\tfunction _getFilterCache(sns) {\r\n\t\treturn localCache.filter[sns.id];\r\n\t}\r\n\r\n\tfunction _clearCached() {\r\n\t\tfor (var key in localCache.filter) {\r\n\t\t\tlocalCache.filter[key].input.value = \"\";\r\n\t\t\tlocalCache.filter[key].filterApplied = false;\r\n\t\t}\r\n\t\tlocalCache.resourcesValues = {};\r\n\t\tlocalCache.eventsInitialized = {};\r\n\t\tlocalCache.resource_filter_value = null;\r\n\t\tlocalCache.gridID = null;\r\n\t\tlocalCache.initialValues = [];\r\n\t\tlocalCache.newValues = [];\r\n\t}\r\n\r\n\treturn newResourcesControl;\r\n};","import TemplateControlConstructor from \"./controls/template_control\";\r\nimport TextareaControlConstructor from \"./controls/textarea_control\";\r\nimport TimeControlConstructor from \"./controls/time_control\";\r\nimport SelectControlConstructor from \"./controls/select_control\";\r\nimport CheckboxControlConstructor from \"./controls/checkbox_control\";\r\nimport RadioControlConstructor from \"./controls/radio_control\";\r\nimport DurationControlConstructor from \"./controls/duration_control\";\r\nimport ParentControlConstructor from \"./controls/parent_control\";\r\nimport ResourcesControlConstructor from \"./controls/resources_control\";\r\nimport ConstraintControlConstructor from \"./controls/constraint_control\";\r\nimport TypeselectControlConstructor from \"./controls/typeselect_control\";\r\nimport BaselineControlConstructor from \"./controls/baseline_control\";\r\nimport NewResourcesControlConstructor from \"./controls/resource_selector_control\";\r\n\r\nimport * as domHelpers from \"../utils/dom_helpers\";\r\nimport * as helpers from \"../../../utils/helpers\";\r\n\t\r\n\r\nexport default function (gantt) {\r\n\r\n\r\n\tvar TemplateControl = TemplateControlConstructor(gantt);\r\n\tvar TextareaControl = TextareaControlConstructor(gantt);\r\n\tvar TimeControl = TimeControlConstructor(gantt);\r\n\tvar SelectControl = SelectControlConstructor(gantt);\r\n\tvar CheckboxControl = CheckboxControlConstructor(gantt);\r\n\tvar RadioControl = RadioControlConstructor(gantt);\r\n\tvar DurationControl = DurationControlConstructor(gantt);\r\n\tvar ParentControl = ParentControlConstructor(gantt);\r\n\tvar ResourcesControl = ResourcesControlConstructor(gantt);\r\n\tvar ConstraintControl = ConstraintControlConstructor(gantt);\r\n\tvar TypeselectControl = TypeselectControlConstructor(gantt);\r\n\tvar BaselineControl = BaselineControlConstructor(gantt);\r\n\tvar NewResourcesControl = NewResourcesControlConstructor(gantt);\r\n\r\n\tgantt._lightbox_methods = {};\r\n\tgantt._lightbox_template = \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span></div><div class='gantt_cal_larea'></div>\";\r\n\tgantt._lightbox_template = `<div class='gantt_cal_ltitle'><div class=\"dhx_cal_ltitle_descr\"><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='dhx_title'></span>\r\n</div>\r\n<div class=\"gantt_cal_ltitle_controls\">\r\n\t<a class=\"gantt_cal_ltitle_close_btn dhx_gantt_icon dhx_gantt_icon_close\"></a>\r\n\r\n</div></div><div class='gantt_cal_larea'></div>`;\r\n\r\n\t// GS-1952. Attaching the lightbox to the BODY element is not considered secure.\r\n\t// Attach it to Gantt container for Salesforce and other secure environments\r\n\tgantt._lightbox_root = gantt.$root;\r\n\tfunction setParentNode() {\r\n\t\tconst cspEnvironment = gantt.config.csp === true;\r\n\t\tif (cspEnvironment || gantt.env.isSalesforce) {\r\n\t\t\tgantt._lightbox_root = gantt.$root;\r\n\t\t} else {\r\n\t\t\tgantt._lightbox_root = document.body;\r\n\t\t}\r\n\t}\r\n\r\n\t//TODO: gantt._lightbox_id is changed from data.js and accessed from autoscheduling, check if it can be removed from gantt object\r\n\tvar state = gantt.$services.getService(\"state\");\r\n\tstate.registerProvider(\"lightbox\", function () {\r\n\t\treturn {\r\n\t\t\tlightbox: gantt._lightbox_id\r\n\t\t};\r\n\t});\r\n\r\n\tgantt.showLightbox = function (id) {\r\n\t\tvar task = this.getTask(id);\r\n\t\tif (!this.callEvent(\"onBeforeLightbox\", [id])) {\r\n\t\t\tif(gantt.isTaskExists(id) && gantt.getTask(id).$new){\r\n\t\t\t\t//GS-2340 if 'onBeforeLightbox' returns 'false' need update the order in datastore\r\n\t\t\t\tthis.$data.tasksStore._updateOrder();\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar box = this.getLightbox(this.getTaskType(task.type));\r\n\r\n\t\tthis.showCover(box);\r\n\t\tthis._fill_lightbox(id, box);\r\n\t\tthis._setLbPosition(box);\r\n\t\tthis._waiAria.lightboxVisibleAttr(box);\r\n\r\n\t\tthis.callEvent(\"onLightbox\", [id]);\r\n\t};\r\n\r\n\tfunction _is_chart_visible(gantt) {\r\n\t\tvar timeline = gantt.$ui.getView(\"timeline\");\r\n\t\tif (timeline && timeline.isVisible()) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgantt._get_timepicker_step = function () {\r\n\t\tif (this.config.round_dnd_dates) {\r\n\t\t\tvar step;\r\n\t\t\tif (_is_chart_visible(this)) {\r\n\t\t\t\tvar scale = gantt.getScale();\r\n\t\t\t\tstep = (helpers.getSecondsInUnit(scale.unit) * scale.step) / 60;//timepicker step is measured in minutes\r\n\t\t\t}\r\n\r\n\t\t\tif (!step || step >= 60 * 24) {\r\n\t\t\t\tstep = this.config.time_step;\r\n\t\t\t}\r\n\t\t\treturn step;\r\n\t\t}\r\n\t\treturn this.config.time_step;\r\n\t};\r\n\tgantt.getLabel = function (property, key) {\r\n\t\tvar sections = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < sections.length; i++) {\r\n\t\t\tif (sections[i].map_to == property) {\r\n\t\t\t\tvar options = sections[i].options;\r\n\t\t\t\tfor (var j = 0; j < options.length; j++) {\r\n\t\t\t\t\tif (options[j].key == key) {\r\n\t\t\t\t\t\treturn options[j].label;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t};\r\n\r\n\tgantt.updateCollection = function (list_name, collection) {\r\n\t\tcollection = collection.slice(0);\r\n\t\tvar list = gantt.serverList(list_name);\r\n\t\tif (!list) return false;\r\n\t\tlist.splice(0, list.length);\r\n\t\tlist.push.apply(list, collection || []);\r\n\t\tgantt.resetLightbox();\r\n\t};\r\n\tgantt.getLightboxType = function () {\r\n\t\treturn this.getTaskType(this._lightbox_type);\r\n\t};\r\n\tgantt.getLightbox = function (type) {\r\n\t\tvar lightboxDiv;\r\n\t\tvar fullWidth;\r\n\t\tvar html;\r\n\t\tvar sns;\r\n\t\tvar ds;\r\n\t\tvar classNames = \"\";\r\n\t\tsetParentNode();\r\n\r\n\t\tif (type === undefined)\r\n\t\t\ttype = this.getLightboxType();\r\n\r\n\t\tif (!this._lightbox || this.getLightboxType() != this.getTaskType(type)) {\r\n\t\t\tthis._lightbox_type = this.getTaskType(type);\r\n\t\t\tlightboxDiv = document.createElement(\"div\");\r\n\t\t\tclassNames = \"gantt_cal_light\";\r\n\t\t\tfullWidth = this._is_lightbox_timepicker();\r\n\r\n\t\t\tif (gantt.config.wide_form)\r\n\t\t\t\tclassNames += \" gantt_cal_light_wide\";\r\n\r\n\t\t\tif (fullWidth) {\r\n\t\t\t\tclassNames += \" gantt_cal_light_full\";\r\n\t\t\t}\r\n\r\n\t\t\tlightboxDiv.className = classNames;\r\n\r\n\t\t\tlightboxDiv.style.visibility = \"hidden\";\r\n\t\t\thtml = this._lightbox_template;\r\n\t\t\thtml += \"<div class='gantt_cal_lcontrols'>\";\r\n\t\t\thtml += getHtmlButtons(this.config.buttons_left);\r\n\t\t\thtml += \"<div class='gantt_cal_lcontrols_push_right'></div>\";\r\n\t\t\thtml += getHtmlButtons(this.config.buttons_right, true);\r\n\t\t\thtml += \"</div>\";\r\n\r\n\t\t\tlightboxDiv.innerHTML = html;\r\n\r\n\t\t\tgantt._waiAria.lightboxAttr(lightboxDiv);\r\n\r\n\t\t\tif (gantt.config.drag_lightbox) {\r\n\t\t\t\tlightboxDiv.firstChild.onmousedown = gantt._ready_to_dnd;\r\n\t\t\t\tlightboxDiv.firstChild.addEventListener('touchstart', function(e){\r\n\t\t\t\t\tgantt._ready_to_dnd(e.touches[0]);\r\n\t\t\t\t});\r\n\t\t\t\tlightboxDiv.firstChild.onselectstart = function () {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t};\r\n\t\t\t\tlightboxDiv.firstChild.style.cursor = \"pointer\";\r\n\t\t\t\tgantt._init_dnd_events();\r\n\t\t\t}\r\n\r\n\t\t\t// GS-1428: If there is lightbox node, we need to remove it from the DOM\r\n\t\t\tif (this._lightbox){\r\n\t\t\t\tthis.resetLightbox();\r\n\t\t\t}\r\n\t\t\tshow_cover();\r\n\t\t\tthis._cover.insertBefore(lightboxDiv, this._cover.firstChild);\r\n\t\t\tthis._lightbox = lightboxDiv;\r\n\r\n\t\t\tsns = this._get_typed_lightbox_config(type);\r\n\t\t\thtml = this._render_sections(sns);\r\n\r\n\t\t\tds = lightboxDiv.querySelector(\"div.gantt_cal_larea\");\r\n\t\t\t\r\n\t\t\t//GS-1131. If gantt_cal_larea is displayed, Firefox renders buttons incorrectly;\r\n\t\t\tvar backup_overflow = ds.style.overflow;\r\n\t\t\tds.style.overflow = 'hidden';\r\n\r\n\t\t\tds.innerHTML = html;\r\n\r\n\t\t\t\r\n\r\n\t\t\tbindLabelsToInputs(sns);\r\n\r\n\t\t\tds.style.overflow = backup_overflow;\r\n\r\n\t\t\tthis._init_lightbox_events(this);\r\n\t\t\tlightboxDiv.style.display = \"none\";\r\n\t\t\tlightboxDiv.style.visibility = \"visible\";\r\n\t\t}\r\n\t\treturn this._lightbox;\r\n\t};\r\n\r\n\tgantt._render_sections = function (sns) {\r\n\t\tvar html = \"\";\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar block = this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue; //ignore incorrect blocks\r\n\t\t\tsns[i].id = \"area_\" + this.uid();\r\n\r\n\t\t\tvar display = sns[i].hidden ? \" style='display:none'\" : \"\";\r\n\t\t\tvar button = \"\";\r\n\t\t\tif (sns[i].button) {\r\n\t\t\t\tbutton = \"<div class='gantt_custom_button' data-index='\" + i + \"'><div class='gantt_custom_button_\" + sns[i].button + \"'></div><div class='gantt_custom_button_label'>\" + this.locale.labels[\"button_\" + sns[i].button] + \"</div></div>\";\r\n\t\t\t}\r\n\t\t\tif (sns[i].type == \"baselines\") {\r\n\t\t\t\tbutton = \"<div class='gantt_custom_button gantt_remove_baselines' data-index='\" + i + \"'><div class='gantt_custom_button_delete_baselines'></div><div class='gantt_custom_button_label'>\" + this.locale.labels.baselines_remove_all_button + \"</div></div>\" +\r\n\t\t\t\t\"<div class='gantt_custom_button gantt_add_baselines' data-index='\" + i + \"'><div class='gantt_custom_button_add_baseline'></div><div class='gantt_custom_button_label'>\" + this.locale.labels.baselines_add_button + \"</div></div>\";\r\n\t\t\t}\r\n\t\t\tif (sns[i].type == \"resource_selector\") {\r\n\t\t\t\tsns[i].index = i;\r\n\t\t\t\tbutton = `<div class='gantt_custom_button gantt_add_resources' data-index='${i}' data-resource-selector-section='${i}' data-section-name='${sns.name}'><div class='gantt_custom_button_add_resources gantt_add'></div><div class='gantt_custom_button_label'>${this.locale.labels.resources_add_button}</div></div>`;\r\n\t\t\t}\r\n\t\t\tif (this.config.wide_form) {\r\n\t\t\t\thtml += \"<div class='gantt_wrap_section' \" + display + \">\";\r\n\t\t\t}\r\n\t\t\thtml += \"<div id='\" + sns[i].id + \"' class='gantt_cal_lsection'><label>\" + button + (sns[i].label || this.locale.labels[\"section_\" + sns[i].name]||sns[i].name) + \"</label></div>\" + block.render.call(this, sns[i]);\r\n\t\t\thtml += \"</div>\";\r\n\t\t}\r\n\t\treturn html;\r\n\t};\r\n\r\n\tgantt._center_lightbox = function(box){\r\n\t\tgantt._setLbPosition(box);\r\n\t};\r\n\tgantt._setLbPosition = function(box) {\r\n\t\tif(!box){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst rootElement = gantt._lightbox_root || gantt.$root;\r\n\t\tbox.style.top = Math.max(rootElement.offsetHeight / 2 - box.offsetHeight/2, 0) + \"px\";\r\n\t\tbox.style.left = Math.max(rootElement.offsetWidth / 2 - box.offsetWidth/2, 0) + \"px\";\r\n\t};\r\n\r\n\tgantt.showCover = function (box) {\r\n\t\tif (box){\r\n\t\t\tbox.style.display=\"block\";\r\n\t\r\n\t\t\tthis._setLbPosition(box);\r\n\t\t}\r\n\t\tshow_cover();\r\n\t\tthis._cover.style.display = \"\";\r\n\t};\r\n\tconst show_cover=function(){\r\n\t\tif(gantt._cover) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\r\n\t\tgantt._cover=document.createElement(\"div\");\r\n\t\tgantt._cover.className=\"gantt_cal_cover\";\r\n\t\tgantt._cover.style.display = \"none\";\r\n\t\r\n\t\tgantt.event(gantt._cover, \"mousemove\", gantt._move_while_dnd);\r\n\t\tgantt.event(gantt._cover, \"mouseup\", gantt._finish_dnd);\r\n\t\r\n\t\tconst rootElement = gantt._lightbox_root || gantt.$root;\r\n\t\trootElement.appendChild(gantt._cover);\r\n\t};\r\n\r\n\tgantt._init_lightbox_events = function () {\r\n\t\tgantt.lightbox_events = {};\r\n\r\n\r\n\t\tgantt.lightbox_events.gantt_save_btn = function () {\r\n\t\t\tgantt._save_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events.gantt_delete_btn = function () {\r\n\t\t\tgantt._lightbox_current_type = null;\r\n\t\t\tif (!gantt.callEvent(\"onLightboxDelete\", [gantt._lightbox_id]))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (gantt.isTaskExists(gantt._lightbox_id)) {\r\n\t\t\t\tgantt.$click.buttons[\"delete\"](gantt._lightbox_id);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.hideLightbox();\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events.gantt_cancel_btn = function () {\r\n\t\t\tgantt._cancel_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"default\"] = function (e, src) {\r\n\t\t\tif (src.getAttribute(\"data-dhx-button\")) {\r\n\t\t\t\tgantt.callEvent(\"onLightboxButton\", [src.className, src, e]);\r\n\t\t\t} else {\r\n\t\t\t\tvar index, block, sec;\r\n\r\n\t\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\t\tif (className.indexOf(\"gantt_custom_button\") != -1) {\r\n\t\t\t\t\tif (className.indexOf(\"gantt_custom_button_\") != -1) {\r\n\t\t\t\t\t\tindex = src.parentNode.getAttribute(\"data-index\");\r\n\t\t\t\t\t\tsec = src;\r\n\t\t\t\t\t\twhile (sec && domHelpers.getClassName(sec).indexOf(\"gantt_cal_lsection\") == -1) {\r\n\t\t\t\t\t\t\tsec = sec.parentNode;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tindex = src.getAttribute(\"data-index\");\r\n\t\t\t\t\t\tsec = src.closest(\".gantt_cal_lsection\");\r\n\t\t\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar sections = gantt._get_typed_lightbox_config();\r\n\r\n\t\t\t\tif (index) {\r\n\t\t\t\t\tindex = index * 1;\r\n\t\t\t\t\tblock = gantt.form_blocks[sections[index * 1].type];\r\n\t\t\t\t\tblock.button_click(index, src, sec, sec.nextSibling);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.event(gantt.getLightbox(), \"click\", function (e) {\r\n\t\t\tif(e.target.closest(\".gantt_cal_ltitle_close_btn\")){\r\n\t\t\t\tgantt._cancel_lightbox();\r\n\t\t\t}\r\n\t\t\tvar src = domHelpers.getTargetNode(e);\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tif (!className) {\r\n\t\t\t\tsrc = src.previousSibling;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className && className.indexOf(\"gantt_btn_set\") === 0) {\r\n\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className) {\r\n\t\t\t\tvar func = gantt.defined(gantt.lightbox_events[src.className]) ? gantt.lightbox_events[src.className] : gantt.lightbox_events[\"default\"];\r\n\t\t\t\treturn func(e, src);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tgantt.getLightbox().onkeydown = function (e) {\r\n\t\t\tvar event = e || window.event;\r\n\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\tvar buttonTarget = domHelpers.getClassName(target).indexOf(\"gantt_btn_set\") > -1;\r\n\r\n\t\t\tswitch ((e || event).keyCode) {\r\n\t\t\t\tcase gantt.constants.KEY_CODES.SPACE: {\r\n\t\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase gantt.keys.edit_save:\r\n\t\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgantt._save_lightbox();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase gantt.keys.edit_cancel:\r\n\t\t\t\t\tgantt._cancel_lightbox();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\tgantt._cancel_lightbox = function () {\r\n\t\tvar task = this.getLightboxValues(\"cancel\");\r\n\t\tgantt._lightbox_current_type = null;\r\n\t\tthis.callEvent(\"onLightboxCancel\", [this._lightbox_id, task.$new]);\r\n\t\tif (gantt.isTaskExists(task.id) && task.$new) {\r\n\t\t\tthis.silent(function () {\r\n\t\t\t\tgantt.$data.tasksStore.removeItem(task.id);\r\n\t\t\t\tgantt._update_flags(task.id, null);\r\n\t\t\t});\r\n\t\t\tthis.refreshData();\r\n\t\t}\r\n\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._save_lightbox = function () {\r\n\t\tvar task = this.getLightboxValues(\"save\");\r\n\t\tgantt._lightbox_current_type = null;\r\n\t\tif (!this.callEvent(\"onLightboxSave\", [this._lightbox_id, task, !!task.$new]))\r\n\t\t\treturn;\r\n\r\n\t\t// GS-2170. Do not recalculate the indexes and dates of other tasks\r\n\t\t// as they will be recalculated in the `refreshData`\r\n\t\tgantt.$data.tasksStore._skipTaskRecalculation = \"lightbox\";\r\n\t\tif (task.$new) {\r\n\t\t\tdelete task.$new;\r\n\t\t\tthis.addTask(task, task.parent, this.getTaskIndex(task.id));\r\n\t\t} else if (this.isTaskExists(task.id)) {\r\n\t\t\tthis.mixin(this.getTask(task.id), task, true);\r\n\t\t\tthis.refreshTask(task.id);\r\n\t\t\tthis.updateTask(task.id);\r\n\t\t}\r\n\t\tgantt.$data.tasksStore._skipTaskRecalculation = false;\r\n\t\tthis.refreshData();\r\n\r\n\t\t// TODO: do we need any blockable events here to prevent closing lightbox?\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._resolve_default_mapping = function (section) {\r\n\t\tvar mapping = section.map_to;\r\n\t\tvar time_controls = { \"time\": true, \"time_optional\": true, \"duration\": true, \"duration_optional\": true };\r\n\t\tif (time_controls[section.type]) {\r\n\t\t\tif (section.map_to == \"auto\") {\r\n\t\t\t\tmapping = { start_date: \"start_date\", end_date: \"end_date\", duration: \"duration\" };\r\n\t\t\t} else if (typeof (section.map_to) === \"string\") {\r\n\t\t\t\tmapping = { start_date: section.map_to };\r\n\t\t\t}\r\n\t\t} else if (section.type === \"constraint\") {\r\n\t\t\tif (!section.map_to || typeof (section.map_to) === \"string\") {\r\n\t\t\t\tmapping = { constraint_type: \"constraint_type\", constraint_date: \"constraint_date\" };\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn mapping;\r\n\t};\r\n\r\n\tgantt.getLightboxValues = function (type) {\r\n\t\tlet task = {};\r\n\r\n\t\tif (gantt.isTaskExists(this._lightbox_id)) {\r\n\t\t\ttask = this.mixin({}, this.getTask(this._lightbox_id));\r\n\t\t}\r\n\r\n\t\tconst sns = this._get_typed_lightbox_config();\r\n\t\t// GS-2370: if there is a resource with its calendar\r\n\t\t// need to place time section at the end\r\n\t\tconst sortedSns = [...sns].sort((a, b) => {\r\n\t\t\tif (a.name === \"time\") return 1;\r\n\t\t\tif (b.name === \"time\") return -1;\r\n\t\t\treturn 0;\r\n\t\t});\r\n\t\tfor (let i = 0; i < sortedSns.length; i++) {\r\n\t\t\tlet node = gantt._lightbox_root.querySelector(\"#\" + sortedSns[i].id);\r\n\t\t\tnode = (node ? node.nextSibling : node);\r\n\t\t\tlet block = this.form_blocks[sortedSns[i].type];\r\n\t\t\tif (!block) continue;\r\n\t\t\tlet res = block.get_value.call(this, node, task, sortedSns[i], type);\r\n\t\t\tlet map_to = gantt._resolve_default_mapping(sortedSns[i]);\r\n\t\t\tif (typeof map_to == \"string\" && map_to != \"auto\") {\r\n\t\t\t\ttask[map_to] = res;\r\n\t\t\t} else if (typeof map_to == \"object\") {\r\n\t\t\t\tfor (let property in map_to) {\r\n\t\t\t\t\tif (map_to[property])\r\n\t\t\t\t\t\ttask[map_to[property]] = res[property];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// GS-1282 We need to preserve the task type even if the lightbox doesn't have the typeselect section\r\n\t\t// GS-2460 set the current type from selector\r\n\t\tif (gantt._lightbox_current_type) {\r\n\t\t\ttask.type = gantt._lightbox_current_type;\r\n\t\t}\r\n\r\n\t\treturn task;\r\n\t};\r\n\r\n\r\n\tgantt.hideLightbox = function () {\r\n\t\tvar box = this.getLightbox();\r\n\t\tif (box) box.style.display = \"none\";\r\n\r\n\t\tthis._waiAria.lightboxHiddenAttr(box);\r\n\t\tthis._lightbox_id = null;\r\n\r\n\t\tthis.hideCover(box);\r\n\t\tthis.resetLightbox();\r\n\t\tthis.callEvent(\"onAfterLightbox\", []);\r\n\t};\r\n\tgantt.hideCover = function (box) {\r\n\t\tif(box){\r\n\t\t\tbox.style.display = \"none\";\r\n\t\t}\r\n\t\tif (this._cover)\r\n\t\t\tthis._cover.parentNode.removeChild(this._cover);\r\n\t\tthis._cover = null;\r\n\t};\r\n\r\n\tgantt.resetLightbox = function () {\r\n\t\tif (gantt._lightbox && !gantt._custom_lightbox)\r\n\t\t\tgantt._lightbox.remove();\r\n\t\tgantt._lightbox = null;\r\n\t};\r\n\tgantt._set_lightbox_values = function (data, box) {\r\n\t\tvar task = data;\r\n\t\tvar s = box.getElementsByTagName(\"span\");\r\n\t\tvar lightboxHeader = [];\r\n\t\tif (gantt.templates.lightbox_header) {\r\n\t\t\tlightboxHeader.push(\"\");\r\n\t\t\tlightboxHeader.push(gantt.templates.lightbox_header(task.start_date, task.end_date, task));\r\n\t\t\ts[1].innerHTML = \"\";\r\n\t\t\ts[2].innerHTML = gantt.templates.lightbox_header(task.start_date, task.end_date, task);\r\n\t\t} else {\r\n\t\t\tlightboxHeader.push(this.templates.task_time(task.start_date, task.end_date, task));\r\n\t\t\tlightboxHeader.push(String(this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70)); //IE6 fix\r\n\t\t\ts[1].innerHTML = this.templates.task_time(task.start_date, task.end_date, task);\r\n\t\t\ts[2].innerHTML = String(this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70); //IE6 fix\r\n\t\t}\r\n\t\ts[1].innerHTML = lightboxHeader[0];\r\n\t\ts[2].innerHTML = lightboxHeader[1];\r\n\r\n\t\tgantt._waiAria.lightboxHeader(box, lightboxHeader.join(\" \"));\r\n\r\n\t\tvar sns = this._get_typed_lightbox_config(this.getLightboxType());\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar section = sns[i];\r\n\r\n\t\t\tif (!this.form_blocks[section.type]) {\r\n\t\t\t\tcontinue;//skip incorrect sections, same check is done during rendering\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar node = gantt._lightbox_root.querySelector(\"#\" + section.id).nextSibling;\r\n\t\t\tvar block = this.form_blocks[section.type];\r\n\t\t\tvar map_to = gantt._resolve_default_mapping(sns[i]);\r\n\t\t\tvar value = this.defined(task[map_to]) ? task[map_to] : section.default_value;\r\n\t\t\tblock.set_value.call(gantt, node, value, task, section);\r\n\r\n\t\t\tif (section.focus)\r\n\t\t\t\tblock.focus.call(gantt, node);\r\n\t\t}\r\n\t\tif (gantt.isTaskExists(data.id)){\r\n\t\t\tgantt._lightbox_id = data.id;\r\n\t\t}\r\n\t};\r\n\tgantt._fill_lightbox = function (id, box) {\r\n\t\tvar task = this.getTask(id);\r\n\t\tthis._set_lightbox_values(task, box);\r\n\t};\r\n\r\n\r\n\tgantt.getLightboxSection = function (name) {\r\n\t\tvar config = this._get_typed_lightbox_config();\r\n\t\tvar i = 0;\r\n\t\tfor (i; i < config.length; i++)\r\n\t\t\tif (config[i].name == name)\r\n\t\t\t\tbreak;\r\n\t\tvar section = config[i];\r\n\t\tif (!section)\r\n\t\t\treturn null;\r\n\r\n\t\tif (!this._lightbox)\r\n\t\t\tthis.getLightbox();\r\n\t\tvar header = gantt._lightbox_root.querySelector(\"#\" + section.id);\r\n\t\tvar node = header.nextSibling;\r\n\r\n\t\tvar result = {\r\n\t\t\tsection: section,\r\n\t\t\theader: header,\r\n\t\t\tnode: node,\r\n\t\t\tgetValue: function (ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].get_value.call(gantt, node, (ev || {}), section);\r\n\t\t\t},\r\n\t\t\tsetValue: function (value, ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].set_value.call(gantt, node, value, (ev || {}), section);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar handler = this._lightbox_methods[\"get_\" + section.type + \"_control\"];\r\n\t\treturn handler ? handler(result) : result;\r\n\t};\r\n\r\n\tgantt._lightbox_methods.get_template_control = function (result) {\r\n\t\tresult.control = result.node;\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_select_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName(\"select\")[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_textarea_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName(\"textarea\")[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_time_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName(\"select\"); // array\r\n\t\treturn result;\r\n\t};\r\n\r\n\r\n\tgantt._init_dnd_events = function () {\r\n\t\tvar eventElement = gantt._lightbox_root;\r\n\t\tthis.event(eventElement, \"mousemove\", gantt._move_while_dnd);\r\n\t\tthis.event(eventElement, \"mouseup\", gantt._finish_dnd);\r\n\t\tthis.event(eventElement, \"touchmove\", function (e){\r\n\t\t\tgantt._move_while_dnd(e.touches[0]);\r\n\t\t});\r\n\t\tthis.event(eventElement, \"touchend\", function (e){\r\n\t\t\tgantt._finish_dnd(e.touches[0]);\r\n\t\t});\r\n\t\t// GS-1952: In Salesforce environment, the lightbox is attached to the Gantt container. \r\n\t\t// So when Gantt is reinitialized, the events are no longer attached to the Gantt container.\r\n\t\t// gantt._init_dnd_events = function () {\r\n\t\t// };\r\n\t};\r\n\tgantt._move_while_dnd = function (event) {\r\n\t\tif (gantt._dnd_start_lb) {\r\n\t\t\tif (!document.gantt_unselectable) {\r\n\t\t\t\tgantt._lightbox_root.className += \" gantt_unselectable\";\r\n\t\t\t\tdocument.gantt_unselectable = true;\r\n\t\t\t}\r\n\t\t\tvar lb = gantt.getLightbox();\r\n\t\t\tvar now = [event.pageX, event.pageY];\r\n\t\t\tlb.style.top = gantt._lb_start[1] + now[1] - gantt._dnd_start_lb[1] + \"px\";\r\n\t\t\tlb.style.left = gantt._lb_start[0] + now[0] - gantt._dnd_start_lb[0] + \"px\";\r\n\t\t}\r\n\t};\r\n\tgantt._ready_to_dnd = function (event) {\r\n\t\tvar lb = gantt.getLightbox();\r\n\t\tgantt._lb_start = [lb.offsetLeft, lb.offsetTop];\r\n\t\tgantt._dnd_start_lb = [event.pageX, event.pageY];\r\n\t};\r\n\tgantt._finish_dnd = function () {\r\n\t\tif (gantt._lb_start) {\r\n\t\t\tgantt._lb_start = gantt._dnd_start_lb = false;\r\n\t\t\tgantt._lightbox_root.className = gantt._lightbox_root.className.replace(\" gantt_unselectable\", \"\");\r\n\t\t\tdocument.gantt_unselectable = false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt._focus = function (node, select) {\r\n\t\tif (node && node.focus) {\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t//do not focus editor, to prevent auto-zoom\r\n\t\t\t} else {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (select && node.select) node.select();\r\n\t\t\t\t\tnode.focus();\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t// silent errors\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.form_blocks = {\r\n\t\tgetTimePicker: function (sns, hidden) {\r\n\t\t\tvar html = \"\";\r\n\t\t\tvar cfg = this.config;\r\n\t\t\tvar i;\r\n\t\t\tvar options;\r\n\t\t\tvar ariaAttrs;\r\n\t\t\tvar readonly;\r\n\t\t\tvar display;\r\n\t\t\tvar settings = {\r\n\t\t\t\tfirst: 0,\r\n\t\t\t\tlast: 24 * 60,\r\n\t\t\t\tdate: this.date.date_part(new Date(gantt._min_date.valueOf())),\r\n\t\t\t\ttimeFormat: getTimeFormat(sns)\r\n\t\t\t};\r\n\r\n\t\t\t// map: default order => real one\r\n\t\t\tsns._time_format_order = { size: 0 };\r\n\r\n\t\t\tif (gantt.config.limit_time_select) {\r\n\t\t\t\tsettings.first = 60 * cfg.first_hour;\r\n\t\t\t\tsettings.last = 60 * cfg.last_hour + 1;\r\n\t\t\t\tsettings.date.setHours(cfg.first_hour);\r\n\t\t\t}\r\n\r\n\t\t\tfor (i = 0; i < settings.timeFormat.length; i++) {\r\n\t\t\t\t// adding spaces between selects\r\n\t\t\t\tif (i > 0) {\r\n\t\t\t\t\thtml += \" \";\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions = getHtmlTimePickerOptions(sns, i, settings);\r\n\r\n\t\t\t\tif (options) {\r\n\t\t\t\t\tariaAttrs = gantt._waiAria.lightboxSelectAttrString(settings.timeFormat[i]);\r\n\t\t\t\t\treadonly = sns.readonly ? \"disabled='disabled'\" : \"\";\r\n\t\t\t\t\tdisplay = hidden ? \" style='display:none' \" : \"\";\r\n\t\t\t\t\thtml += \"<select \" + readonly + display + ariaAttrs + \">\" + options + \"</select>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn html;\r\n\t\t},\r\n\t\tgetTimePickerValue: function (selects, config, offset) {\r\n\t\t\tvar map = config._time_format_order;\r\n\t\t\tvar needSetTime = gantt.defined(map[3]);\r\n\r\n\t\t\tvar time;\r\n\t\t\tvar hours = 0;\r\n\t\t\tvar minutes = 0;\r\n\r\n\t\t\tvar mapOffset = offset || 0;\r\n\r\n\t\t\tif (needSetTime) {\r\n\t\t\t\ttime = parseInt(selects[map[3] + mapOffset].value, 10);\r\n\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\tminutes = time % 60;\r\n\t\t\t}\r\n\t\t\treturn new Date(selects[map[2] + mapOffset].value, selects[map[1] + mapOffset].value, selects[map[0] + mapOffset].value, hours, minutes);\r\n\t\t},\r\n\r\n\t\t_fill_lightbox_select: function (s, i, d, map) {\r\n\t\t\ts[i + map[0]].value = d.getDate();\r\n\t\t\ts[i + map[1]].value = d.getMonth();\r\n\t\t\ts[i + map[2]].value = d.getFullYear();\r\n\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\tvar v = d.getHours() * 60 + d.getMinutes();\r\n\t\t\t\tv = Math.round(v / gantt._get_timepicker_step()) * gantt._get_timepicker_step();\r\n\t\t\t\tvar input = s[i + map[3]];\r\n\t\t\t\tinput.value = v;\r\n\t\t\t\t//in case option not shown\r\n\t\t\t\tinput.setAttribute(\"data-value\", v);\r\n\t\t\t}\r\n\t\t},\r\n\t\ttemplate: new TemplateControl(),\r\n\t\ttextarea: new TextareaControl(),\r\n\t\tselect: new SelectControl(),\r\n\t\ttime: new TimeControl(),\r\n\t\tduration: new DurationControl(),\r\n\t\tparent: new ParentControl(),\r\n\t\tradio: new RadioControl(),\r\n\t\tcheckbox: new CheckboxControl(),\r\n\t\tresources: new ResourcesControl(),\r\n\t\tconstraint: new ConstraintControl(),\r\n\t\tbaselines: new BaselineControl(),\r\n\t\ttypeselect: new TypeselectControl(),\r\n\t\tresource_selector: new NewResourcesControl()\r\n\t};\r\n\r\n\tgantt._is_lightbox_timepicker = function () {\r\n\t\tvar s = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\tif (s[i].name == \"time\" && s[i].type == \"time\")\r\n\t\t\t\treturn true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\tgantt._delete_task_confirm = function ({task, message, title, callback, ok}){\r\n\t\tgantt._simple_confirm(message, title, callback, ok);\r\n\t};\r\n\tgantt._delete_link_confirm = function({link, message, title, callback, ok}){\r\n\t\tgantt._simple_confirm(message, title, callback, ok);\r\n\t};\r\n\r\n\tgantt._simple_confirm = function (message, title, callback, ok) {\r\n\t\tif (!message)\r\n\t\t\treturn callback();\r\n\t\tvar opts = { text: message };\r\n\t\tif (title)\r\n\t\t\topts.title = title;\r\n\t\tif (ok) {\r\n\t\t\topts.ok = ok;\r\n\t\t}\r\n\t\tif (callback) {\r\n\t\t\topts.callback = function (result) {\r\n\t\t\t\tif (result)\r\n\t\t\t\t\tcallback();\r\n\t\t\t};\r\n\t\t}\r\n\t\tgantt.confirm(opts);\r\n\t};\r\n\r\n\tfunction _get_type_name(type_value) {\r\n\t\tfor (var i in this.config.types) {\r\n\t\t\tif (this.config.types[i] == type_value) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"task\";\r\n\t}\r\n\r\n\tgantt._get_typed_lightbox_config = function (type) {\r\n\t\tif (type === undefined) {\r\n\t\t\ttype = this.getLightboxType();\r\n\t\t}\r\n\r\n\t\tvar field = _get_type_name.call(this, type);\r\n\r\n\t\tif (gantt.config.lightbox[field + \"_sections\"]) {\r\n\t\t\treturn gantt.config.lightbox[field + \"_sections\"];\r\n\t\t} else {\r\n\t\t\treturn gantt.config.lightbox.sections;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._silent_redraw_lightbox = function (type) {\r\n\t\tvar oldType = this.getLightboxType();\r\n\r\n\t\tif (this.getState().lightbox) {\r\n\t\t\tvar taskId = this.getState().lightbox;\r\n\t\t\tvar formData = this.getLightboxValues(),\r\n\t\t\t\ttask = this.copy(this.getTask(taskId));\r\n\r\n\t\t\tthis.resetLightbox();\r\n\r\n\t\t\tvar updTask = this.mixin(task, formData, true);\r\n\t\t\tvar box = this.getLightbox(type ? type : undefined);\r\n\t\t\tthis._set_lightbox_values(updTask, box);\r\n\t\t\tthis.showCover(box);\r\n\t\t} else {\r\n\t\t\tthis.resetLightbox();\r\n\t\t\tthis.getLightbox(type ? type : undefined);\r\n\t\t}\r\n\t\tthis.callEvent(\"onLightboxChange\", [oldType, this.getLightboxType()]);\r\n\t};\r\n\r\n\tfunction bindLabelsToInputs(sns) {\r\n\t\tvar section;\r\n\t\tvar label;\r\n\t\tvar labelBlock;\r\n\t\tvar inputBlock;\r\n\t\tvar input;\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 0; i < sns.length; i++) {\r\n\t\t\tsection = sns[i];\r\n\t\t\tlabelBlock = gantt._lightbox_root.querySelector(\"#\" + section.id);\r\n\r\n\t\t\tif (!section.id || !labelBlock) continue;\r\n\r\n\t\t\tlabel = labelBlock.querySelector(\"label\");\r\n\t\t\tinputBlock = labelBlock.nextSibling;\r\n\r\n\t\t\tif (!inputBlock) continue;\r\n\r\n\t\t\tinput = inputBlock.querySelector(\"input, select, textarea\");\r\n\t\t\tif (input) {\r\n\t\t\t\tinput.id = input.id || \"input_\" + gantt.uid();\r\n\t\t\t\tsection.inputId = input.id;\r\n\t\t\t\tlabel.setAttribute(\"for\", section.inputId);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getHtmlButtons(buttons, floatRight) {\r\n\t\tvar button;\r\n\t\tvar ariaAttr;\r\n\t\tvar html = \"\";\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 0; i < buttons.length; i++) {\r\n\t\t\t// needed to migrate from 'dhx_something' to 'gantt_something' naming in a lightbox\r\n\t\t\tbutton = gantt.config._migrate_buttons[buttons[i]] ? gantt.config._migrate_buttons[buttons[i]] : buttons[i];\r\n\r\n\t\t\tariaAttr = gantt._waiAria.lightboxButtonAttrString(button);\r\n\t\t\thtml += \"<div \" + ariaAttr + \" class='gantt_btn_set gantt_left_btn_set \" + button + \"_set'\" + \"><div dhx_button='1' data-dhx-button='1' class='\" + button + \"'></div><div>\" + gantt.locale.labels[button] + \"</div></div>\";\r\n\t\t}\r\n\t\treturn html;\r\n\t}\r\n\r\n\tfunction getTimeFormat(sns) {\r\n\t\tvar scale;\r\n\t\tvar unit;\r\n\t\tvar result;\r\n\r\n\t\tif (sns.time_format) return sns.time_format;\r\n\r\n\t\t// default order\r\n\t\tresult = [\"%d\", \"%m\", \"%Y\"];\r\n\t\tscale = gantt.getScale();\r\n\t\tunit = scale ? scale.unit : gantt.config.duration_unit;\r\n\t\tif (helpers.getSecondsInUnit(unit) < helpers.getSecondsInUnit(\"day\")) {\r\n\t\t\tresult.push(\"%H:%i\");\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tfunction getHtmlTimePickerOptions(sns, index, settings) {\r\n\t\tvar range;\r\n\t\tvar offset;\r\n\t\tvar start_year;\r\n\t\tvar end_year;\r\n\t\tvar i;\r\n\t\tvar time;\r\n\t\tvar diff;\r\n\t\tvar tdate;\r\n\t\tvar html = \"\";\r\n\r\n\t\tswitch (settings.timeFormat[index]) {\r\n\t\t\tcase \"%Y\":\r\n\t\t\t\tsns._time_format_order[2] = index;\r\n\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t//year\r\n\r\n\t\t\t\tif (sns.year_range) {\r\n\t\t\t\t\tif (!isNaN(sns.year_range)) {\r\n\t\t\t\t\t\trange = sns.year_range;\r\n\t\t\t\t\t} else if (sns.year_range.push) {\r\n\t\t\t\t\t\t// if\r\n\t\t\t\t\t\tstart_year = sns.year_range[0];\r\n\t\t\t\t\t\tend_year = sns.year_range[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\trange = range || 10;\r\n\t\t\t\toffset = offset || Math.floor(range / 2);\r\n\t\t\t\tstart_year = start_year || settings.date.getFullYear() - offset;\r\n\t\t\t\tend_year = end_year || gantt.getState().max_date.getFullYear() + offset;\r\n\r\n\t\t\t\tfor (i = start_year; i <= end_year; i++)\r\n\t\t\t\t\thtml += \"<option value='\" + (i) + \"'>\" + (i) + \"</option>\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%m\":\r\n\t\t\t\tsns._time_format_order[1] = index;\r\n\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t//month\r\n\t\t\t\tfor (i = 0; i < 12; i++)\r\n\t\t\t\t\thtml += \"<option value='\" + i + \"'>\" + gantt.locale.date.month_full[i] + \"</option>\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%d\":\r\n\t\t\t\tsns._time_format_order[0] = index;\r\n\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t//days\r\n\t\t\t\tfor (i = 1; i < 32; i++)\r\n\t\t\t\t\thtml += \"<option value='\" + i + \"'>\" + i + \"</option>\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%H:%i\":\r\n\t\t\t\t//  var last = 24*60, first = 0;\r\n\t\t\t\tsns._time_format_order[3] = index;\r\n\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t//hours\r\n\t\t\t\ti = settings.first;\r\n\t\t\t\ttdate = settings.date.getDate();\r\n\t\t\t\tsns._time_values = [];\r\n\r\n\t\t\t\twhile (i < settings.last) {\r\n\t\t\t\t\ttime = gantt.templates.time_picker(settings.date);\r\n\t\t\t\t\thtml += \"<option value='\" + i + \"'>\" + time + \"</option>\";\r\n\t\t\t\t\tsns._time_values.push(i);\r\n\t\t\t\t\tsettings.date.setTime(settings.date.valueOf() + gantt._get_timepicker_step() * 60 * 1000);\r\n\t\t\t\t\tdiff = (settings.date.getDate() != tdate) ? 1 : 0; // moved or not to the next day\r\n\t\t\t\t\ti = diff * 24 * 60 + settings.date.getHours() * 60 + settings.date.getMinutes();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn html;\r\n\t}\r\n};","import __extends from \"../../../../utils/extends\";\r\n\r\nimport Super from \"./base_control\";\r\n\r\nexport default function(gantt) {\r\n\tconst _super = Super(gantt);\r\n\r\n\tfunction TemplateControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this; \r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(TemplateControl, _super);\r\n\r\n\r\n\tTemplateControl.prototype.render = function(sns) {\r\n\t\tlet height = sns.height ? `${sns.height}px` : '';\r\n\t\treturn `<div class='gantt_cal_ltext gantt_cal_template gantt_section_${sns.name}' ${height ? `style='height:${height};'` : ''}></div>`;\r\n\t};\r\n\r\n\tTemplateControl.prototype.set_value = function(node, value) {\r\n\t\tnode.innerHTML = value || \"\";\r\n\t};\r\n\r\n\tTemplateControl.prototype.get_value = function(node) {\r\n\t\treturn node.innerHTML || \"\";\r\n\t};\r\n\r\n\tTemplateControl.prototype.focus = function() {};\r\n\r\n\treturn TemplateControl;\r\n};","import __extends from \"../../../../utils/extends\";\r\n\r\nimport Super from \"./base_control\";\r\n\r\nexport default function(gantt) {\r\n\tconst _super = Super(gantt);\r\n\r\n\tfunction TextareaControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(TextareaControl, _super);\r\n\r\n\tTextareaControl.prototype.render = function(sns) {\r\n\t\tconst height = (sns.height || \"130\") + \"px\";\r\n\t\tconst placeholder = sns.placeholder ? `placeholder='${sns.placeholder}'` : \"\";\r\n\t\treturn `<div class='gantt_cal_ltext gantt_section_${sns.name}' style='height:${height};' ${placeholder}><textarea></textarea></div>`;\r\n\t};\r\n\r\n\tTextareaControl.prototype.set_value = function(node, value) {\r\n\t\tgantt.form_blocks.textarea._get_input(node).value = value || \"\";\r\n\t};\r\n\r\n\tTextareaControl.prototype.get_value = function(node) {\r\n\t\treturn gantt.form_blocks.textarea._get_input(node).value;\r\n\t};\r\n\r\n\tTextareaControl.prototype.focus = function(node) {\r\n\t\tvar a = gantt.form_blocks.textarea._get_input(node);\r\n\t\tgantt._focus(a, true);\r\n\t};\r\n\r\n\tTextareaControl.prototype._get_input = function(node) {\r\n\t\treturn node.querySelector(\"textarea\");\r\n\t};\r\n\r\n\treturn TextareaControl;\r\n};","import __extends from \"../../../../utils/extends\";\r\n\r\nimport Super from \"./base_control\";\r\n\r\nexport default function(gantt) {\r\n\tconst _super = Super(gantt);\r\n\r\n\tfunction TimeControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(TimeControl, _super);\r\n\r\n\tTimeControl.prototype.render = function (sns) {\r\n\t\tvar time = gantt.form_blocks.getTimePicker.call(this, sns);\r\n\t\tlet sectionClassName = \"gantt_section_time\";\r\n\t\tif (sns.name !== \"time\"){\r\n\t\t\tsectionClassName += \" gantt_section_\" + sns.name;\r\n\t\t}\r\n\t\tvar html = \"<div style='padding-top:0px;font-size:inherit;text-align:center;' class='\" + sectionClassName + \"'>\";\r\n\t\thtml += time;\r\n\r\n\t\tif (sns.single_date) {\r\n\t\t\ttime = gantt.form_blocks.getTimePicker.call(this, sns, true);\r\n\t\t\thtml += \"<span></span>\";\r\n\t\t} else {\r\n\t\t\thtml += \"<span class='gantt_section_time_spacer'> &nbsp;&ndash;&nbsp; </span>\";\r\n\t\t}\r\n\r\n\t\thtml += time;\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tTimeControl.prototype.set_value = function (node, value, ev, config) {\r\n\t\tvar cfg = config;\r\n\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\tvar map = config._time_format_order;\r\n\r\n\t\tif (cfg.auto_end_date) {\r\n\t\t\tvar _update_lightbox_select = function () {\r\n\t\t\t\tstart_date = new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, 0, 0);\r\n\t\t\t\tend_date = gantt.calculateEndDate({ start_date: start_date, duration: 1, task: ev });\r\n\t\t\t\tgantt.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t\t\t};\r\n\t\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\t\ts[i].onchange = _update_lightbox_select;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar mapping = gantt._resolve_default_mapping(config);\r\n\r\n\t\tif (typeof (mapping) === \"string\") mapping = { start_date: mapping };\r\n\r\n\t\tvar start_date = ev[mapping.start_date] || new Date();\r\n\t\tvar end_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\tstart_date: start_date,\r\n\t\t\tduration: 1,\r\n\t\t\ttask: ev\r\n\t\t});\r\n\r\n\t\tgantt.form_blocks._fill_lightbox_select(s, 0, start_date, map, cfg);\r\n\t\tgantt.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t};\r\n\r\n\tTimeControl.prototype.get_value = function (node, ev, config) {\r\n\t\tvar selects = node.getElementsByTagName(\"select\");\r\n\t\tvar startDate;\r\n\t\tvar map = config._time_format_order;\r\n\t\tfunction _getEndDate(selects, map, startDate) {\r\n\t\t\tvar endDate = gantt.form_blocks.getTimePickerValue(selects, config, map.size);\r\n\t\t\t// GS-1010: We need to add a way to obtain exact end_date for validation\r\n\t\t\tif (endDate <= startDate) {  // when end date seems wrong\r\n\t\t\t\tif (config.autofix_end !== false || config.single_date) { // auto correct it in two cases - when the auto correction is not disabled, or when we have 'single date' control and the user don't have the UI to specify the end date\r\n\t\t\t\t\treturn gantt.date.add(startDate, gantt._get_timepicker_step(), \"minute\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn endDate;\r\n\t\t}\r\n\r\n\t\tstartDate = gantt.form_blocks.getTimePickerValue(selects, config);\r\n\r\n\t\tif (typeof gantt._resolve_default_mapping(config) === \"string\") {\r\n\t\t\treturn startDate;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: startDate,\r\n\t\t\tend_date: _getEndDate(selects, map, startDate)\r\n\t\t};\r\n\t};\r\n\r\n\tTimeControl.prototype.focus = function (node) {\r\n\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t};\r\n\r\n\treturn TimeControl;\r\n};","import * as helpers from \"../../../../utils/helpers\";\r\nimport __extends from \"../../../../utils/extends\";\r\nimport BaseConstrutor from \"./base_control\";\r\n\r\nexport default function(gantt) {\r\n\tvar _super = BaseConstrutor(gantt);\r\n\r\n\tfunction CheckboxControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(CheckboxControl, _super);\r\n\r\n\tCheckboxControl.prototype.render = function(sns) {\r\n\t\tconst height = sns.height ? `height:${sns.height}px;` : '';\r\n\t\tlet html = `<div class='gantt_cal_ltext gantt_cal_lcheckbox gantt_section_${sns.name}' ${height ? `style='${height}'` : ''}>`;\r\n\r\n\t\tif (sns.options && sns.options.length) {\r\n\t\t\tfor (var i = 0; i < sns.options.length; i++) {\r\n\t\t\t\thtml += \"<label><input type='checkbox' value='\" + sns.options[i].key + \"' name='\" + sns.name + \"'>\" + sns.options[i].label + \"</label>\";\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tsns.single_value = true;\r\n\t\t\thtml += \"<label><input type='checkbox' name='\" + sns.name + \"'></label>\";\r\n\t\t}\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tCheckboxControl.prototype.set_value = function(node, value, ev, sns) {\r\n\t\tvar checkboxes = Array.prototype.slice.call(node.querySelectorAll(\"input[type=checkbox]\"));\r\n\r\n\t\tif (!node._dhx_onchange && sns.onchange) {\r\n\t\t\tnode.onchange = sns.onchange;\r\n\t\t\tnode._dhx_onchange = true;\r\n\t\t}\r\n\r\n\t\tif(sns.single_value){\r\n\t\t\tvar box = checkboxes[0];\r\n\t\t\tbox.checked = !!value;\r\n\t\t}else{\r\n\t\t\thelpers.forEach(checkboxes, function(entry) {\r\n\t\t\t\tentry.checked = value ? value.indexOf(entry.value) >= 0 : false;\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tCheckboxControl.prototype.get_value = function(node, task, sns) {\r\n\t\tif(sns.single_value){\r\n\t\t\tvar box = node.querySelector(\"input[type=checkbox]\");\r\n\t\t\treturn box.checked;\r\n\t\t}else{\r\n\t\t\treturn helpers.arrayMap(Array.prototype.slice.call(node.querySelectorAll(\"input[type=checkbox]:checked\")), function(entry) {\r\n\t\t\t\treturn entry.value;\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tCheckboxControl.prototype.focus = function(node) {\r\n\t\tgantt._focus(node.querySelector(\"input[type=checkbox]\"));\r\n\t};\r\n\r\n\treturn CheckboxControl;\r\n};","import __extends from \"../../../../utils/extends\";\r\nimport Super from \"./base_control\";\r\n\r\nexport default function(gantt) {\r\n\tconst _super = Super(gantt);\r\n\r\n\tfunction RadioControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(RadioControl, _super);\r\n\r\n\tRadioControl.prototype.render = function(sns) {\r\n\t\tconst height = sns.height ? `${sns.height}px` : '';\r\n\t\tlet html = `<div class='gantt_cal_ltext gantt_cal_lradio gantt_section_${sns.name}' ${height ? `style='height:${height};'` : ''}>`;\r\n\r\n\t\tif (sns.options && sns.options.length) {\r\n\t\t\tfor (var i = 0; i < sns.options.length; i++) {\r\n\t\t\t\thtml += \"<label><input type='radio' value='\" + sns.options[i].key + \"' name='\" + sns.name + \"'>\" + sns.options[i].label + \"</label>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tRadioControl.prototype.set_value = function(node, value, ev, sns) {\r\n\t\tvar radio;\r\n\r\n\t\tif (!sns.options || !sns.options.length) return;\r\n\r\n\t\tradio = node.querySelector(\"input[type=radio][value='\" + value + \"']\") ||\r\n\t\t\t\tnode.querySelector(\"input[type=radio][value='\" + sns.default_value + \"']\");\r\n\r\n\t\tif (!radio) return;\r\n\r\n\t\tif (!node._dhx_onchange && sns.onchange) {\r\n\t\t\tnode.onchange = sns.onchange;\r\n\t\t\tnode._dhx_onchange = true;\r\n\t\t}\r\n\r\n\t\tradio.checked = true;\r\n\t};\r\n\r\n\tRadioControl.prototype.get_value = function(node, ev) {\r\n\t\tvar result = node.querySelector(\"input[type=radio]:checked\");\r\n\r\n\t\treturn result ? result.value : \"\";\r\n\t};\r\n\r\n\tRadioControl.prototype.focus = function(node) {\r\n\t\tgantt._focus(node.querySelector(\"input[type=radio]\"));\r\n\t};\r\n\r\n\treturn RadioControl;\r\n};","import __extends from \"../../../../utils/extends\";\r\n\r\nimport DurationFormatterNumeric from  \"../../../common/duration_formatter_numeric\";\r\nimport BaseConstrutor from \"./base_control\";\r\n\r\nexport default function(gantt) {\r\n\tvar _super = BaseConstrutor(gantt);\r\n\r\n\tfunction DurationControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this; \r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\tfunction getFormatter(config) {\r\n\t\treturn config.formatter || new DurationFormatterNumeric();\r\n\t}\r\n\r\n\t__extends(DurationControl, _super);\r\n\r\n\tDurationControl.prototype.render = function(sns) {\r\n\t\tvar time = \"<div class='gantt_time_selects'>\" + gantt.form_blocks.getTimePicker.call(this, sns) + \"</div>\";\r\n\t\tvar label = \" \"+ gantt.locale.labels[gantt.config.duration_unit + \"s\"] +\" \";\r\n\t\tvar singleDate = sns.single_date ? \" style='display:none'\" : \"\";\r\n\t\tvar readonly = sns.readonly ? \" disabled='disabled'\" : \"\";\r\n\t\tvar ariaAttr = gantt._waiAria.lightboxDurationInputAttrString(sns);\r\n\r\n\t\tvar durationInputClass = \"gantt_duration_value\";\r\n\t\tif(sns.formatter) {\r\n\t\t\tlabel = \"\";\r\n\t\t\tdurationInputClass += \" gantt_duration_value_formatted\" ;\r\n\t\t}\r\n\r\n\t\tvar duration = \"<div class='gantt_duration' \" + singleDate + \">\" +\r\n\t\t\"<div class='gantt_duration_inputs'>\" +\r\n\t\t\t\"<input type='button' class='gantt_duration_dec' value=''\" + readonly + \">\" +\r\n\t\t\t\"<input type='text' value='5days' class='\"+durationInputClass+\"'\" + readonly + \" \" + ariaAttr + \">\" +\r\n\t\t\t\"<input type='button' class='gantt_duration_inc' value='+'\" + readonly + \">\"+\r\n\t\t\t\"</div>\" +\r\n\t\t\t\"<div class='gantt_duration_end_date'>\"+label+\"<span></span></div>\" +\r\n\t\t\t\"</div>\" +\r\n\t\t\t\"</div>\";\r\n\t\tlet sectionClassName = \"gantt_section_time gantt_section_duration\";\r\n\t\tif (sns.name !== \"time\"){\r\n\t\t\tsectionClassName += \" gantt_section_\" + sns.name;\r\n\t\t}\t\r\n\t\tvar html = \"<div style='padding-top:0px;font-size:inherit;' class='\" + sectionClassName + \"'>\" + time + \" \" + duration + \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tDurationControl.prototype.set_value = function(node, value, ev, config) {\r\n\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\tvar inps = node.getElementsByTagName(\"input\");\r\n\t\tvar duration = inps[1];\r\n\t\tvar btns = [inps[0], inps[2]];\r\n\t\tvar endspan = node.getElementsByTagName(\"span\")[0];\r\n\t\tvar map = config._time_format_order;\r\n\t\tvar mapping;\r\n\t\tvar start_date;\r\n\t\tvar end_date;\r\n\t\tvar duration_val;\r\n\r\n\t\tfunction _calc_date() {\r\n\t\t\tvar start_date = _getStartDate.call(gantt, node, config);\r\n\t\t\tvar duration = _getDuration.call(gantt, node, config);\r\n\t\t\tvar end_date = gantt.calculateEndDate({start_date: start_date, duration: duration, task: ev});\r\n\r\n\t\t\tvar template = gantt.templates.task_end_date || gantt.templates.task_date;\r\n\t\t\tendspan.innerHTML = template(end_date);\r\n\t\t}\r\n\r\n\t\tfunction _change_duration(step) {\r\n\t\t\tvar value = duration.value;\r\n\r\n\t\t\tvalue = getFormatter(config).parse(value);\r\n\t\t\tif (window.isNaN(value))\r\n\t\t\t\tvalue = 0;\r\n\t\t\tvalue += step;\r\n\t\t\tif (value < 1) value = 1;\r\n\t\t\tduration.value = getFormatter(config).format(value);\r\n\t\t\t_calc_date();\r\n\t\t}\r\n\r\n\t\tbtns[0].onclick = gantt.bind(function() {\r\n\t\t\t_change_duration(-1 * gantt.config.duration_step);\r\n\t\t}, this);\r\n\t\tbtns[1].onclick = gantt.bind(function() {\r\n\t\t\t_change_duration(1 * gantt.config.duration_step);\r\n\t\t}, this);\r\n\t\ts[0].onchange = _calc_date;\r\n\t\ts[1].onchange = _calc_date;\r\n\t\ts[2].onchange = _calc_date;\r\n\t\tif (s[3]) s[3].onchange = _calc_date;\r\n\r\n\t\tduration.onkeydown = gantt.bind(function(e) {\r\n\t\t\tvar code; \r\n\r\n\t\t\te = e || window.event;\r\n\t\t\tcode = (e.charCode || e.keyCode || e.which);\r\n\t\t\t\r\n\t\t\tif (code == gantt.constants.KEY_CODES.DOWN) {\r\n\t\t\t\t_change_duration(-1 * gantt.config.duration_step);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (code == gantt.constants.KEY_CODES.UP) {\r\n\t\t\t\t_change_duration(1 * gantt.config.duration_step);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\twindow.setTimeout(_calc_date, 1);\r\n\t\t}, this);\r\n\r\n\t\tduration.onchange = gantt.bind(_calc_date, this);\r\n\r\n\t\tmapping = gantt._resolve_default_mapping(config);\r\n\t\tif (typeof(mapping) === \"string\") mapping = {start_date: mapping};\r\n\r\n\t\tstart_date = ev[mapping.start_date] || new Date();\r\n\t\tend_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\tstart_date: start_date,\r\n\t\t\tduration: 1,\r\n\t\t\ttask: ev\r\n\t\t});\r\n\t\tduration_val = Math.round(ev[mapping.duration]) || gantt.calculateDuration({\r\n\t\t\tstart_date: start_date,\r\n\t\t\tend_date: end_date,\r\n\t\t\ttask: ev\r\n\t\t});\r\n\t\tduration_val = getFormatter(config).format(duration_val);\r\n\r\n\t\tgantt.form_blocks._fill_lightbox_select(s, 0, start_date, map, config);\r\n\t\tduration.value = duration_val;\r\n\t\t_calc_date();\r\n\t};\r\n\r\n\tDurationControl.prototype.get_value = function(node, ev, config) {\r\n\t\tvar startDate = _getStartDate(node, config);\r\n\t\tvar duration = _getDuration(node, config);\r\n\t\tvar endDate = gantt.calculateEndDate({start_date: startDate, duration: duration, task: ev});\r\n\r\n\t\tif (typeof gantt._resolve_default_mapping(config) == \"string\") {\r\n\t\t\treturn startDate;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: startDate,\r\n\t\t\tend_date: endDate,\r\n\t\t\tduration: duration\r\n\t\t};\r\n\t};\r\n\r\n\tDurationControl.prototype.focus = function(node) {\r\n\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t};\r\n\r\n\r\n\tfunction _getStartDate(node, config) {\r\n\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\tvar map = config._time_format_order;\r\n\t\tvar hours = 0;\r\n\t\tvar minutes = 0;\r\n\r\n\t\tif (gantt.defined(map[3])) {\r\n\t\t\tvar input = s[map[3]];\r\n\t\t\tvar time = parseInt(input.value, 10);\r\n\t\t\tif (isNaN(time) && input.hasAttribute(\"data-value\")) {\r\n\t\t\t\ttime = parseInt(input.getAttribute(\"data-value\"), 10);\r\n\t\t\t}\r\n\r\n\t\t\thours = Math.floor(time / 60);\r\n\t\t\tminutes = time % 60;\r\n\t\t}\r\n\t\treturn new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, hours, minutes);\r\n\t}\r\n\r\n\tfunction _getDuration(node, config) {\r\n\t\tvar duration = node.getElementsByTagName(\"input\")[1];\r\n\r\n\t\tduration = getFormatter(config).parse(duration.value);\r\n\t\tif (!duration || window.isNaN(duration)) duration = 1;\r\n\t\tif (duration < 0) duration *= -1;\r\n\t\treturn duration;\r\n\t}\r\n\r\n\treturn DurationControl; \r\n};","import __extends from \"../../../../utils/extends\";\r\nimport htmlHelpers from \"../../utils/html_helpers\";\r\nimport BaseConstrutor from \"./base_control\";\r\n\r\nexport default function(gantt) {\r\n\tvar _super = BaseConstrutor(gantt);\r\n\r\n\tfunction ConstraintControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(ConstraintControl, _super);\r\n\r\n\tfunction isNonTimedConstraint(value) {\r\n\t\tif (!value || value === gantt.config.constraint_types.ASAP || value === gantt.config.constraint_types.ALAP) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction toggleTimeSelect(timeSelects, typeValue) {\r\n\t\tvar isNonTimed = isNonTimedConstraint(typeValue);\r\n\t\tfor (var i = 0; i < timeSelects.length; i++) {\r\n\t\t\ttimeSelects[i].disabled = isNonTimed;\r\n\t\t}\r\n\t}\r\n\r\n\tConstraintControl.prototype.render = function (sns) {\r\n\t\tconst height = sns.height ? `height:${sns.height}px;` : '';\r\n\t\tlet html = `<div class='gantt_cal_ltext gantt_section_${sns.name}' ${height ? `style='${height}'` : ''}>`;\r\n\r\n\t\tvar options = [];\r\n\t\tfor (var i in gantt.config.constraint_types) {\r\n\t\t\toptions.push({ key: gantt.config.constraint_types[i], label: gantt.locale.labels[gantt.config.constraint_types[i]] });\r\n\t\t}\r\n\r\n\t\tsns.options = sns.options || options;\r\n\r\n\t\thtml += \"<span data-constraint-type-select>\" + htmlHelpers.getHtmlSelect(sns.options, [{ key: \"data-type\", value: \"constraint-type\" }]) + \"</span>\";\r\n\r\n\t\tvar timeLabel = gantt.locale.labels[\"constraint_date\"] || \"Constraint date\";\r\n\t\thtml += \"<label data-constraint-time-select>\" + timeLabel + \": \" + gantt.form_blocks.getTimePicker.call(this, sns) + \"</label>\";\r\n\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tConstraintControl.prototype.set_value = function (node, value, task, config) {\r\n\t\tvar typeSelect = node.querySelector(\"[data-constraint-type-select] select\");\r\n\t\tvar timeSelects = node.querySelectorAll(\"[data-constraint-time-select] select\");\r\n\t\tvar map = config._time_format_order;\r\n\r\n\t\tvar mapping = gantt._resolve_default_mapping(config);\r\n\r\n\t\tif (!typeSelect._eventsInitialized) {\r\n\t\t\ttypeSelect.addEventListener(\"change\", function (e) {\r\n\t\t\t\ttoggleTimeSelect(timeSelects, e.target.value);\r\n\t\t\t});\r\n\t\t\ttypeSelect._eventsInitialized = true;\r\n\t\t}\r\n\r\n\t\tvar constraintDate = task[mapping.constraint_date] || new Date();\r\n\t\tgantt.form_blocks._fill_lightbox_select(timeSelects, 0, constraintDate, map, config);\r\n\r\n\t\tvar constraintType = task[mapping.constraint_type] || gantt.getConstraintType(task);\r\n\t\ttypeSelect.value = constraintType;\r\n\t\ttoggleTimeSelect(timeSelects, constraintType);\r\n\t};\r\n\r\n\tConstraintControl.prototype.get_value = function (node, task, config) {\r\n\t\tvar typeSelect = node.querySelector(\"[data-constraint-type-select] select\");\r\n\t\tvar timeSelects = node.querySelectorAll(\"[data-constraint-time-select] select\");\r\n\r\n\t\tvar constraintType = typeSelect.value;\r\n\t\tvar constraintDate = null;\r\n\t\tif (!isNonTimedConstraint(constraintType)) {\r\n\t\t\tconstraintDate = gantt.form_blocks.getTimePickerValue(timeSelects, config);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tconstraint_type: constraintType,\r\n\t\t\tconstraint_date: constraintDate\r\n\t\t};\r\n\t};\r\n\r\n\tConstraintControl.prototype.focus = function (node) {\r\n\t\tgantt._focus(node.querySelector(\"select\"));\r\n\t};\r\n\r\n\treturn ConstraintControl;\r\n};","import __extends from \"../../../../utils/extends\";\r\n\r\nimport Super from \"./select_control\";\r\n\r\nexport default function(gantt) {\r\n\tconst _super = Super(gantt);\r\n\r\n\tfunction TypeselectControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(TypeselectControl, _super);\r\n\r\n\tTypeselectControl.prototype.render = function(sns) {\r\n\t\tvar types = gantt.config.types,\r\n\t\t\tlocale = gantt.locale.labels,\r\n\t\t\toptions = [];\r\n\r\n\t\tvar filter = sns.filter || function (typeKey, typeValue) {\r\n\t\t\tif (!types.placeholder || typeValue !== types.placeholder) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t};\r\n\t\tfor (var i in types) {\r\n\t\t\tif (!filter(i, types[i]) === false) {\r\n\t\t\t\toptions.push({ key: types[i], label: locale[\"type_\" + i] });\r\n\t\t\t}\r\n\t\t}\r\n\t\tsns.options = options;\r\n\r\n\t\tvar oldOnChange = sns.onchange;\r\n\t\tsns.onchange = function () {\r\n\t\t\tgantt._lightbox_current_type = this.value;\r\n\t\t\tgantt.changeLightboxType(this.value);\r\n\t\t\tif (typeof oldOnChange == 'function') {\r\n\t\t\t\toldOnChange.apply(this, arguments);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn _super.prototype.render.apply(this, arguments);\r\n\t};\r\n\r\n\treturn TypeselectControl;\r\n};\r\n","\r\nimport __extends from \"../../../../utils/extends\";\r\nimport DurationFormatterNumeric from \"../../../common/duration_formatter_numeric\";\r\nimport BaseConstrutor from \"./base_control\";\r\n\r\nexport default function(gantt) {\r\n\tvar _super = BaseConstrutor(gantt);\r\n\r\n\tfunction DurationControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this; \r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\tfunction getFormatter(config) {\r\n\t\treturn config.formatter || new DurationFormatterNumeric();\r\n\t}\r\n\r\n\tfunction _generateBaselineRow (node, baseline, task, config){\r\n\t\tconst time = \"<div class='gantt_time_selects'>\" + gantt.form_blocks.getTimePicker.call(gantt, config) + \"</div>\";\r\n\t\tlet durationLabel = \" \"+ gantt.locale.labels[gantt.config.duration_unit + \"s\"] +\" \";\r\n\t\tconst singleDate = config.single_date ? \" style='display:none'\" : \"\";\r\n\t\tconst readonly = config.readonly ? \" disabled='disabled'\" : \"\";\r\n\t\tconst ariaAttr = gantt._waiAria.lightboxDurationInputAttrString(config);\r\n\t\tconst deleteLabel = gantt.locale.labels.baselines_remove_button;\r\n\r\n\t\tlet durationInputClass = \"gantt_duration_value\";\r\n\t\tif(config.formatter) {\r\n\t\t\tdurationLabel = \"\";\r\n\t\t\tdurationInputClass += \" gantt_duration_value_formatted\";\r\n\t\t}\r\n\r\n\t\tconst durationEl = \"<div class='gantt_duration' \" + singleDate + \">\" +\r\n\t\t\"<div class='gantt_duration_inputs'>\" +\r\n\t\t\t\"<input type='button' class='gantt_duration_dec' value='-'\" + readonly + \">\" +\r\n\t\t\t\"<input type='text' value='5days' class='\"+durationInputClass+\"'\" + readonly + \" \" + ariaAttr + \">\" +\r\n\t\t\t\"<input type='button' class='gantt_duration_inc' value='+'\" + readonly + \">\"+\r\n\t\t\t\"</div>\" +\r\n\t\t\t\"<div class='gantt_duration_end_date'>\"+durationLabel+\"<span></span></div>\" +\r\n\t\t\t\"</div>\" +\r\n\t\t\t\"</div>\";\r\n\r\n\t\tconst deleteButton = `<div><div class='baseline_delete_button gantt_custom_button dhx_gantt_icon dhx_gantt_icon_delete' aria-label='${deleteLabel}'></div></div>`;\r\n\r\n\t\tconst baselineRow = document.createElement(\"div\");\r\n\t\tbaselineRow.className = \"gantt_section_time gantt_section_duration\";\r\n\t\tbaselineRow.setAttribute(\"data-baseline-id\", baseline.id);\r\n\t\tbaselineRow.innerHTML = time + durationEl + deleteButton + \"<br>\";\r\n\t\tnode.appendChild(baselineRow);\r\n\r\n\t\tvar s = baselineRow.getElementsByTagName(\"select\");\r\n\t\tvar inps = baselineRow.getElementsByTagName(\"input\");\r\n\t\tvar duration = inps[1];\r\n\t\tvar btns = [inps[0], inps[2]];\r\n\t\tvar endspan = baselineRow.getElementsByTagName(\"span\")[0];\r\n\t\tvar map = config._time_format_order;\r\n\t\tvar mapping;\r\n\t\tvar start_date;\r\n\t\tvar end_date;\r\n\t\tvar duration_val;\r\n\r\n\t\tconst deleteEl = baselineRow.querySelector(\".baseline_delete_button\");\r\n\t\tdeleteEl.onclick = function(e){\r\n\t\t\tconst section = baselineRow.parentNode;\r\n\t\t\tbaselineRow.innerHTML = \"\";\r\n\t\t\tbaselineRow.remove();\r\n\t\t\tif (section.innerHTML === \"\"){\r\n\t\t\t\tsection.innerHTML = gantt.locale.labels.baselines_section_placeholder;\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\r\n\t\tfunction _calc_date() {\r\n\t\t\tvar start_date = _getStartDate.call(gantt, baselineRow, config);\r\n\t\t\tvar duration = _getDuration.call(gantt, baselineRow, config);\r\n\t\t\tvar end_date = gantt.calculateEndDate({start_date: start_date, duration: duration, task: task});\r\n\r\n\t\t\tvar template = gantt.templates.task_end_date || gantt.templates.task_date;\r\n\t\t\tendspan.innerHTML = template(end_date);\r\n\t\t}\r\n\r\n\t\tfunction _change_duration(step) {\r\n\t\t\tvar value = duration.value;\r\n\r\n\t\t\tvalue = getFormatter(config).parse(value);\r\n\t\t\tif (window.isNaN(value))\r\n\t\t\t\tvalue = 0;\r\n\t\t\tvalue += step;\r\n\t\t\tif (value < 1) value = 1;\r\n\t\t\tduration.value = getFormatter(config).format(value);\r\n\t\t\t_calc_date();\r\n\t\t}\r\n\r\n\t\tbtns[0].onclick = gantt.bind(function() {\r\n\t\t\t_change_duration(-1 * gantt.config.duration_step);\r\n\t\t}, gantt);\r\n\t\tbtns[1].onclick = gantt.bind(function() {\r\n\t\t\t_change_duration(1 * gantt.config.duration_step);\r\n\t\t}, gantt);\r\n\t\ts[0].onchange = _calc_date;\r\n\t\ts[1].onchange = _calc_date;\r\n\t\ts[2].onchange = _calc_date;\r\n\t\tif (s[3]) s[3].onchange = _calc_date;\r\n\r\n\t\tduration.onkeydown = gantt.bind(function(e) {\r\n\t\t\tvar code; \r\n\r\n\t\t\te = e || window.event;\r\n\t\t\tcode = (e.charCode || e.keyCode || e.which);\r\n\t\t\t\r\n\t\t\tif (code == gantt.constants.KEY_CODES.DOWN) {\r\n\t\t\t\t_change_duration(-1 * gantt.config.duration_step);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (code == gantt.constants.KEY_CODES.UP) {\r\n\t\t\t\t_change_duration(1 * gantt.config.duration_step);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\twindow.setTimeout(_calc_date, 1);\r\n\t\t}, gantt);\r\n\r\n\t\tduration.onchange = gantt.bind(_calc_date, gantt);\r\n\r\n\t\tmapping = gantt._resolve_default_mapping(config);\r\n\t\tif (typeof(mapping) === \"string\") mapping = {start_date: mapping};\r\n\r\n\t\tstart_date = baseline.start_date || new Date();\r\n\t\tend_date = baseline.end_date || gantt.calculateEndDate({\r\n\t\t\tstart_date: start_date,\r\n\t\t\tduration: 1,\r\n\t\t\ttask\r\n\t\t});\r\n\t\tduration_val = gantt.calculateDuration({\r\n\t\t\tstart_date: start_date,\r\n\t\t\tend_date: end_date,\r\n\t\t\ttask\r\n\t\t});\r\n\t\tduration_val = getFormatter(config).format(duration_val);\r\n\r\n\t\tgantt.form_blocks._fill_lightbox_select(s, 0, start_date, map, config);\r\n\t\tduration.value = duration_val;\r\n\t\t_calc_date();\r\n\t}\r\n\r\n\t__extends(DurationControl, _super);\r\n\r\n\tDurationControl.prototype.render = function(sns) {\r\n\t\tconst baselineSection = `<div style='height: ${sns.height || 110}px; font-size:inherit;' class='gantt_section_baselines'></div>`;\r\n\t\treturn baselineSection;\r\n\t};\r\n\r\n\tDurationControl.prototype.set_value = function(node, value, task, config) {\r\n\t\tif (task.baselines){\r\n\t\t\tnode.innerHTML = \"\";\r\n\r\n\t\t\ttask.baselines.forEach((baseline)=>{\r\n\t\t\t\t_generateBaselineRow(node, baseline, task, config);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tnode.innerHTML = gantt.locale.labels.baselines_section_placeholder;\r\n\t\t}\t\t\r\n\r\n\t};\r\n\r\n\tDurationControl.prototype.get_value = function(node, task, config) {\r\n\t\tconst baselines = [];\r\n\t\tconst baselineRows = node.querySelectorAll(`[data-baseline-id]`);\r\n\t\tbaselineRows.forEach((baselineNode)=>{\r\n\t\t\tconst baselineId = baselineNode.dataset.baselineId;\r\n\t\t\tconst baselineStore = gantt.getDatastore(\"baselines\");\r\n\t\t\tlet baseline = baselineStore.getItem(baselineId);\r\n\t\t\tlet updatedBaseline;\r\n\t\t\tif (baseline){\r\n\t\t\t\tupdatedBaseline = gantt.copy(baseline);\r\n\t\t\t} else {\r\n\t\t\t\tupdatedBaseline = {\r\n\t\t\t\t\tid: gantt.uid(),\r\n\t\t\t\t\ttask_id: task.id,\r\n\t\t\t\t\ttext: \"Baseline 1\"\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tupdatedBaseline.start_date = _getStartDate(baselineNode, config);\r\n\t\t\tupdatedBaseline.duration = _getDuration(baselineNode, config);\r\n\t\t\tupdatedBaseline.end_date = gantt.calculateEndDate({start_date: updatedBaseline.start_date, duration: updatedBaseline.duration, task});\r\n\r\n\t\t\tbaselines.push(updatedBaseline);\r\n\t\t});\r\n\r\n\t\treturn baselines;\r\n\t};\r\n\r\n\tDurationControl.prototype.button_click = function (index, el, section, container) {\r\n\t\tif (gantt.callEvent(\"onSectionButton\", [gantt._lightbox_id, section]) === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (el.closest(\".gantt_custom_button.gantt_remove_baselines\")){\r\n\t\t\tcontainer.innerHTML = gantt.locale.labels.baselines_section_placeholder;\r\n\t\t}\r\n\t\tif (el.closest(\".gantt_custom_button.gantt_add_baselines\")){\r\n\t\t\tif (container.innerHTML == gantt.locale.labels.baselines_section_placeholder){\r\n\t\t\t\tcontainer.innerHTML = \"\";\r\n\t\t\t}\r\n\t\t\tconst task = gantt.getTask(gantt._lightbox_id);\r\n\t\t\tconst baseline = {\r\n\t\t\t\tid: gantt.uid(),\r\n\t\t\t\ttask_id: task.id,\r\n\t\t\t\ttext: \"Baseline 1\",\r\n\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\tend_date: task.end_date\r\n\t\t\t};\r\n\t\t\tconst config = gantt._get_typed_lightbox_config()[index];\r\n\t\t\t_generateBaselineRow(container, baseline, task, config);\r\n\t\t}\r\n\t};\r\n\r\n\tDurationControl.prototype.focus = function(node) {\r\n\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t};\r\n\r\n\r\n\tfunction _getStartDate(node, config) {\r\n\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\tvar map = config._time_format_order;\r\n\t\tvar hours = 0;\r\n\t\tvar minutes = 0;\r\n\r\n\t\tif (gantt.defined(map[3])) {\r\n\t\t\tvar input = s[map[3]];\r\n\t\t\tvar time = parseInt(input.value, 10);\r\n\t\t\tif (isNaN(time) && input.hasAttribute(\"data-value\")) {\r\n\t\t\t\ttime = parseInt(input.getAttribute(\"data-value\"), 10);\r\n\t\t\t}\r\n\r\n\t\t\thours = Math.floor(time / 60);\r\n\t\t\tminutes = time % 60;\r\n\t\t}\r\n\t\treturn new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, hours, minutes);\r\n\t}\r\n\r\n\tfunction _getDuration(node, config) {\r\n\t\tvar duration = node.getElementsByTagName(\"input\")[1];\r\n\r\n\t\tduration = getFormatter(config).parse(duration.value);\r\n\t\tif (!duration || window.isNaN(duration)) duration = 1;\r\n\t\tif (duration < 0) duration *= -1;\r\n\t\treturn duration;\r\n\t}\r\n\r\n\treturn DurationControl; \r\n};","import * as utils from \"../utils/utils\";\r\nimport env from \"../utils/env\";\r\nimport isHeadless from \"../utils/is_headless\";\r\nimport * as domHelpers from \"./ui/utils/dom_helpers\";\r\nimport * as codeHelpers from \"../utils/helpers\";\r\nimport domEventScope from \"./ui/utils/dom_event_scope\";\r\nimport messages from \"./ui/message\";\r\nimport ui from \"./ui/index\";\r\nimport createLayoutFacade from \"./facades/layout\";\r\nimport taskLayers from \"./data_task_layers\";\r\n\r\nimport skin from \"./ui/skin\";\r\nimport skyblue from \"../css/skins/skyblue\";\r\nimport meadow from \"../css/skins/meadow\";\r\nimport terrace from \"../css/skins/terrace\";\r\nimport broadway from \"../css/skins/broadway\";\r\nimport material from \"../css/skins/material\";\r\nimport dark from \"../css/skins/dark\";\r\nimport contrast_black from \"../css/skins/contrast_black\";\r\nimport contrast_white from \"../css/skins/contrast_white\";\r\nimport plugins from \"./ui/plugins\";\r\nimport touch from \"./ui/touch\";\r\nimport lightbox from \"./ui/lightbox\";\r\nimport lightbox_optional_time from \"./ui/lightbox/lightbox_optional_time\";\r\nimport wai_aria from \"./ui/wai_aria\";\r\n\r\n\r\nexport default function(gantt) {\r\n\r\n\tif(!env.isNode){\r\n\r\n\t\tgantt.utils = {\r\n\t\t\tarrayFind: codeHelpers.arrayFind,\r\n\t\t\tdom: domHelpers\r\n\t\t};\r\n\r\n\t\tvar domEvents = domEventScope();\r\n\t\tgantt.event = domEvents.attach;\r\n\t\tgantt.eventRemove = domEvents.detach;\r\n\t\tgantt._eventRemoveAll = domEvents.detachAll;\r\n\t\tgantt._createDomEventScope = domEvents.extend;\r\n\r\n\t\tutils.mixin(gantt, messages(gantt));\r\n\t\tvar uiApi = ui.init(gantt);\r\n\t\tgantt.$ui = uiApi.factory;\r\n\t\tgantt.$ui.layers = uiApi.render;\r\n\t\tgantt.$mouseEvents = uiApi.mouseEvents;\r\n\t\tgantt.$services.setService(\"mouseEvents\", function () {\r\n\t\t\treturn gantt.$mouseEvents;\r\n\t\t});\r\n\t\tgantt.mixin(gantt, uiApi.layersApi);\r\n\r\n\t\ttaskLayers(gantt);\r\n\r\n\t\tgantt.$services.setService(\"layers\", function () {\r\n\t\t\treturn uiApi.layersService;\r\n\t\t});\r\n\r\n\t\tgantt.mixin(gantt, createLayoutFacade());\r\n\t\tskin(gantt);\r\n\t\tskyblue(gantt);\r\n\t\tdark(gantt);\r\n\t\tmeadow(gantt);\r\n\t\tterrace(gantt);\r\n\t\tbroadway(gantt);\r\n\t\tmaterial(gantt);\r\n\t\tcontrast_black(gantt);\r\n\t\tcontrast_white(gantt);\r\n\t\tplugins(gantt);\r\n\t\ttouch(gantt);\r\n\t\tlightbox(gantt);\r\n\t\tlightbox_optional_time(gantt);\r\n\t\twai_aria(gantt);\r\n\r\n\t\tgantt.locate = function(e) {\r\n\t\t\tvar trg = domHelpers.getTargetNode(e);\r\n\r\n\t\t\t// ignore empty rows/cells of the timeline\r\n\t\t\tif(domHelpers.closest(trg, \".gantt_task_row\")){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tvar targetAttribute = arguments[1] || this.config.task_attribute;\r\n\r\n\t\t\tvar node = domHelpers.locateAttribute(trg, targetAttribute);\r\n\t\t\tif(node){\r\n\t\t\t\treturn node.getAttribute(targetAttribute);\r\n\t\t\t}else{\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tgantt._locate_css = function(e, classname, strict){\r\n\t\t\treturn domHelpers.locateClassName(e, classname, strict);\r\n\t\t};\r\n\r\n\t\tgantt._locateHTML = function(e, attribute) {\r\n\t\t\treturn domHelpers.locateAttribute(e, attribute || this.config.task_attribute);\r\n\t\t};\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onParse\", function(){\r\n\t\tif(!isHeadless(gantt)){\r\n\t\t\tgantt.attachEvent(\"onGanttRender\", function(){\r\n\t\t\t\tif(gantt.config.initial_scroll){\r\n\t\t\t\t\tvar firstTask = gantt.getTaskByIndex(0);\r\n\t\t\t\t\tvar id = firstTask ? firstTask.id : gantt.config.root_id;\r\n\t\t\t\t\t// GS-1450. Don't scroll to the task if there is no timeline\r\n\t\t\t\t\tif(gantt.isTaskExists(id) && gantt.$task && gantt.utils.dom.isChildOf(gantt.$task, gantt.$container)){\r\n\t\t\t\t\t\tgantt.showTask(id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, {once: true});\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onBeforeGanttReady\", function(){\r\n\t\tif (!this.config.scroll_size)\r\n\t\t\tthis.config.scroll_size = domHelpers.getScrollSize() || 15;\r\n\r\n\t\tif(!isHeadless(gantt)){\r\n\t\t\t// detach listeners before clearing old DOM, possible IE errors when accessing detached nodes\r\n\t\t\tthis._eventRemoveAll();\r\n\t\t\tthis.$mouseEvents.reset();\r\n\r\n\t\t\tthis.resetLightbox();\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t// GS-1261: scroll the views to the right side when RTL is enabled\r\n\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\t\tif(!isHeadless(gantt) && gantt.config.rtl){\r\n\t\t\tgantt.$layout.getCellsByType(\"viewCell\").forEach(function(cell){ \r\n\t\t\t\tvar attachedScrollbar = cell.$config.scrollX;\r\n\t\t\t\tif (!attachedScrollbar) return;\r\n\r\n\t\t\t\tvar scrollbar = gantt.$ui.getView(attachedScrollbar);\r\n\t\t\t\tif (scrollbar) scrollbar.scrollTo(scrollbar.$config.scrollSize,0);\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\t// GS-1649: check if extensions are connected via files\r\n\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\t\tif(!isHeadless(gantt)){\r\n\r\n\t\t\tvar activePlugins = gantt.plugins();\r\n\r\n\t\t\tvar availablePlugins = {\r\n\t\t\t\tauto_scheduling: gantt.autoSchedule,\r\n\t\t\t\tclick_drag: gantt.ext.clickDrag,\r\n\t\t\t\tcritical_path: gantt.isCriticalTask,\r\n\t\t\t\tdrag_timeline: gantt.ext.dragTimeline,\r\n\t\t\t\texport_api: gantt.exportToPDF,\r\n\t\t\t\tfullscreen: gantt.ext.fullscreen,\r\n\t\t\t\tgrouping: gantt.groupBy,\r\n\t\t\t\tkeyboard_navigation: gantt.ext.keyboardNavigation,\r\n\t\t\t\tmarker: gantt.addMarker,\r\n\t\t\t\tmultiselect: gantt.eachSelectedTask,\r\n\t\t\t\toverlay: gantt.ext.overlay,\r\n\t\t\t\tquick_info: gantt.templates.quick_info_content,\r\n\t\t\t\ttooltip: gantt.ext.tooltips,\r\n\t\t\t\tundo: gantt.undo\r\n\t\t\t};\r\n\r\n\t\t\tfor (let plugin in availablePlugins){\r\n\t\t\t\tif (availablePlugins[plugin] && !activePlugins[plugin]){\r\n\t\t\t\t\t// eslint-disable-next-line no-console\r\n\t\t\t\t\tconsole.warn(`You connected the '${plugin}' extension via an obsolete file. \r\nTo fix it, you need to remove the obsolete file and connect the extension via the plugins method: https://docs.dhtmlx.com/gantt/api__gantt_plugins.html`);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};","export default function(gantt) {\r\n\tdelete gantt.addTaskLayer;\r\n\tdelete gantt.addLinkLayer;\r\n};","function createLayoutFacade(){\r\n\r\n\tfunction getTimeline(gantt){\r\n\t\treturn gantt.$ui.getView(\"timeline\");\r\n\t}\r\n\r\n\tfunction getGrid(gantt){\r\n\t\treturn gantt.$ui.getView(\"grid\");\r\n\t}\r\n\r\n\tfunction getBaseCell(gantt){\r\n\t\tvar timeline = getTimeline(gantt);\r\n\t\tif (timeline && !timeline.$config.hidden){\r\n\t\t\treturn timeline;\r\n\t\t} else{\r\n\t\t\tvar grid = getGrid(gantt);\r\n\t\t\tif (grid && !grid.$config.hidden){\r\n\t\t\t\treturn grid;\r\n\t\t\t} else {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getVerticalScrollbar(gantt){\r\n\t\tvar baseCell = null;\r\n\t\t// GS-1150: if we reorder or resize something in the grid, we should obtain the grid container\r\n\t\tvar gridDrag = false;\r\n\t\tvar gridMarkers = [\r\n\t\t\t\".gantt_drag_marker.gantt_grid_resize_area\",\r\n\t\t\t\".gantt_drag_marker .gantt_row.gantt_row_task\",\r\n\t\t\t\".gantt_drag_marker.gantt_grid_dnd_marker\"\r\n\t\t];\r\n\t\tgridMarkers.forEach(function (selector) {\r\n\t\t\tgridDrag = gridDrag || !!document.querySelector(selector);\r\n\t\t});\r\n\t\tif (gridDrag){\r\n\t\t\tbaseCell = getGrid(gantt);\r\n\t\t} else{\r\n\t\t\tbaseCell = getBaseCell(gantt);\r\n\t\t}\r\n\r\n\t\t// GS-1827. If there is no grid and timeline, there is no scrollbar for them\r\n\t\tif (!baseCell){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar verticalScrollbar = getAttachedScrollbar(gantt, baseCell, \"scrollY\");\r\n\t\treturn verticalScrollbar;\r\n\t}\r\n\r\n\tfunction getHorizontalScrollbar(gantt){\r\n\t\tvar baseCell = getBaseCell(gantt);\r\n\t\tif (!baseCell || baseCell.id == \"grid\"){\r\n\t\t\treturn null; // if the timeline is not displayed, do not return the scrollbar\r\n\t\t}\r\n\t\tvar horizontalScrollbar = getAttachedScrollbar(gantt, baseCell, \"scrollX\");\r\n\t\treturn horizontalScrollbar;\r\n\t}\r\n\r\n\tfunction getAttachedScrollbar(gantt, cell, type){\r\n\t\tvar attachedScrollbar = cell.$config[type];\r\n\t\tvar scrollbarView = gantt.$ui.getView(attachedScrollbar);\r\n\t\treturn scrollbarView;\r\n\t}\r\n\r\n\tvar DEFAULT_VALUE = \"DEFAULT_VALUE\";\r\n\r\n\tfunction tryCall(getView, method, args, fallback){\r\n\t\tvar view = getView(this);\r\n\t\tif (!(view && view.isVisible())) {\r\n\t\t\tif(fallback){\r\n\t\t\t\treturn fallback();\r\n\t\t\t}else{\r\n\t\t\t\treturn DEFAULT_VALUE;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn view[method].apply(view, args);\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tgetColumnIndex: function(name) {\r\n\t\t\tvar res = tryCall.call(this, getGrid, \"getColumnIndex\", [name]);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdateFromPos: function(x) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"dateFromPos\", Array.prototype.slice.call(arguments));\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn this.getState().min_date;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tposFromDate: function(date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"posFromDate\", Array.prototype.slice.call(arguments));\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetRowTop: function(index) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getRowTop\", [index],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getRowTop\", [index]);}\r\n\t\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskTop: function(id) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getItemTop\", [id],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getItemTop\", [id]);}\r\n\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tgetTaskPosition: function(task, start_date, end_date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"getItemPosition\", [task, start_date, end_date]);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\tvar top = this.getTaskTop(task.id);\r\n\t\t\t\tvar height = this.getTaskBarHeight(task.id);\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleft: 0,\r\n\t\t\t\t\ttop: top,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\twidth: 0\r\n\t\t\t\t};\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskBarHeight: function(taskId, isMilestoneRender) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getBarHeight\", [taskId, isMilestoneRender],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getItemHeight\", [taskId]);}\r\n\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskHeight: function(taskId) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getItemHeight\", [taskId],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getItemHeight\", [taskId]);}\r\n\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tcolumnIndexByDate: function(date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"columnIndexByDate\", [date]);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\troundTaskDates: function() {\r\n\t\t\ttryCall.call(this, getTimeline, \"roundTaskDates\", []);\r\n\t\t},\r\n\r\n\t\tgetScale: function() {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"getScale\", []);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn null;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskNode: function(id) {\r\n\t\t\tvar timeline = getTimeline(this);\r\n\t\t\tif (!timeline || !timeline.isVisible()) {\r\n\t\t\t\treturn null;\r\n\t\t\t} else {\r\n\t\t\t\tvar node = timeline._taskRenderer.rendered[id];\r\n\t\t\t\tif(!node){\r\n\t\t\t\t\tvar domAttr = timeline.$config.item_attribute;\r\n\t\t\t\t\tnode = timeline.$task_bars.querySelector(\"[\" +domAttr+ \"='\"+id+\"']\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn node || null;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tgetLinkNode: function(id) {\r\n\t\t\tvar timeline = getTimeline(this);\r\n\t\t\tif (!timeline.isVisible()) {\r\n\t\t\t\treturn null;\r\n\t\t\t} else {\r\n\t\t\t\treturn timeline._linkRenderer.rendered[id];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tscrollTo: function(left, top){\r\n\t\t\tvar vertical = getVerticalScrollbar(this);\r\n\t\t\tvar horizontal = getHorizontalScrollbar(this);\r\n\r\n\t\t\tvar oldH = {position: 0},\r\n\t\t\t\toldV = {position: 0};\r\n\r\n\t\t\tif(vertical){\r\n\t\t\t\toldV = vertical.getScrollState();\r\n\t\t\t}\r\n\t\t\tif(horizontal){\r\n\t\t\t\toldH = horizontal.getScrollState();\r\n\t\t\t}\r\n\r\n\t\t\tvar scrollHorizontal = (horizontal && left*1 == left);\r\n\t\t\tvar scrollVertical = (vertical && top*1 == top);\r\n\t\t\tvar scrollBoth = scrollHorizontal && scrollVertical;\r\n\r\n\t\t\tif(scrollBoth){\r\n\t\t\t\t// some views will be scrolled both horizontally and vertically and smart rendering can be called twice\r\n\t\t\t\t// set flag in order not to invoke smart rendering at the horizontal scroll stage\r\n\t\t\t\t// so it will repaint only once when the scroll is completed\r\n\t\t\t\tvar verticalViews = vertical._getLinkedViews();\r\n\t\t\t\tvar horizontalViews = horizontal._getLinkedViews();\r\n\r\n\t\t\t\tvar commonViews = [];\r\n\t\t\t\tfor(var i = 0; i < verticalViews.length; i++){\r\n\t\t\t\t\tfor(var j = 0; j < horizontalViews.length; j++){\r\n\r\n\t\t\t\t\t\tif(verticalViews[i].$config.id && horizontalViews[j].$config.id && verticalViews[i].$config.id === horizontalViews[j].$config.id){\r\n\t\t\t\t\t\t\tcommonViews.push(verticalViews[i].$config.id);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (scrollHorizontal){\r\n\t\t\t\tif(commonViews){\r\n\t\t\t\t\tcommonViews.forEach((function(viewId){\r\n\t\t\t\t\t\tthis.$ui.getView(viewId).$config.$skipSmartRenderOnScroll = true;\r\n\t\t\t\t\t}).bind(this));\r\n\t\t\t\t}\r\n\r\n\t\t\t\thorizontal.scroll(left);\r\n\t\t\t\tif(commonViews){\r\n\t\t\t\t\tcommonViews.forEach((function(viewId){\r\n\t\t\t\t\t\tthis.$ui.getView(viewId).$config.$skipSmartRenderOnScroll = false;\r\n\t\t\t\t\t}).bind(this));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(scrollVertical){\r\n\t\t\t\tvertical.scroll(top);\r\n\t\t\t}\r\n\r\n\t\t\tvar newV = {position: 0},\r\n\t\t\t\tnewH = {position: 0};\r\n\t\t\tif(vertical){\r\n\t\t\t\tnewV = vertical.getScrollState();\r\n\t\t\t}\r\n\t\t\tif(horizontal){\r\n\t\t\t\tnewH = horizontal.getScrollState();\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onGanttScroll\", [oldH.position, oldV.position, newH.position, newV.position]);\r\n\t\t},\r\n\r\n\t\tshowDate: function(date){\r\n\t\t\tvar date_x = this.posFromDate(date);\r\n\t\t\tvar scroll_to = Math.max(date_x - this.config.task_scroll_offset, 0);\r\n\t\t\tthis.scrollTo(scroll_to);\r\n\t\t},\r\n\t\tshowTask: function(id) {\r\n\t\t\tvar pos = this.getTaskPosition(this.getTask(id));\r\n\r\n\t\t\t// GS-1261: we need to show the start_date even in the RTL mode\r\n\t\t\tvar leftPos = pos.left;\r\n\t\t\tif (this.config.rtl) leftPos = pos.left + pos.width;\r\n\r\n\t\t\tvar left = Math.max(leftPos - this.config.task_scroll_offset, 0);\r\n\r\n\t\t\tvar dataHeight = this._scroll_state().y;\r\n\t\t\tvar top;\r\n\t\t\tif(!dataHeight){\r\n\t\t\t\ttop = pos.top;\r\n\t\t\t}else{\r\n\t\t\t\ttop = pos.top - (dataHeight - this.getTaskBarHeight(id))/2;\r\n\t\t\t}\r\n\r\n\t\t\tthis.scrollTo(left, top);\r\n\t\t\t// GS-1150: if the grid and timeline have different scrollbars, we need to scroll thegrid to show the task\r\n\t\t\tvar gridCell = getGrid(this);\r\n\t\t\tvar timelineCell = getTimeline(this);\r\n\t\t\tif (gridCell && timelineCell && gridCell.$config.scrollY != timelineCell.$config.scrollY){\r\n\t\t\t\tvar gridScrollbar = getAttachedScrollbar(this, gridCell, \"scrollY\");\r\n\t\t\t\tgridScrollbar.scrollTo(null, top);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_scroll_state: function(){\r\n\t\t\tvar result = {\r\n\t\t\t\tx: false,\r\n\t\t\t\ty: false,\r\n\t\t\t\tx_pos: 0,\r\n\t\t\t\ty_pos: 0,\r\n\t\t\t\tscroll_size: this.config.scroll_size + 1,//1px for inner content\r\n\t\t\t\tx_inner: 0,\r\n\t\t\t\ty_inner: 0\r\n\t\t\t};\r\n\r\n\t\t\tvar scrollVer = getVerticalScrollbar(this),\r\n\t\t\t\tscrollHor = getHorizontalScrollbar(this);\r\n\t\t\tif(scrollHor){\r\n\t\t\t\tvar horState = scrollHor.getScrollState();\r\n\t\t\t\tif(horState.visible){\r\n\t\t\t\t\tresult.x = horState.size;\r\n\t\t\t\t\tresult.x_inner = horState.scrollSize;\r\n\t\t\t\t}\r\n\t\t\t\tresult.x_pos = horState.position || 0;\r\n\t\t\t}\r\n\r\n\t\t\tif(scrollVer){\r\n\t\t\t\tvar verState = scrollVer.getScrollState();\r\n\t\t\t\tif(verState.visible){\r\n\t\t\t\t\tresult.y = verState.size;\r\n\r\n\t\t\t\t\tresult.y_inner = verState.scrollSize;\r\n\t\t\t\t}\r\n\t\t\t\tresult.y_pos = verState.position || 0;\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tgetScrollState: function(){\r\n\t\t\tvar state = this._scroll_state();\r\n\t\t\treturn { x:state.x_pos, y:state.y_pos, inner_width:state.x, inner_height:state.y, width: state.x_inner, height: state.y_inner };\r\n\t\t},\r\n\r\n\t\tgetLayoutView: function(cellName){\r\n\t\t\treturn this.$ui.getView(cellName);\r\n\t\t},\r\n\r\n\t\tscrollLayoutCell: function(cellName, left, top){\r\n\t\t\tconst cell = this.$ui.getView(cellName);\r\n\t\t\tif (!cell){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (left !== null){\r\n\t\t\t\tconst horizontalScroll = this.$ui.getView(cell.$config.scrollX);\r\n\t\t\t\tif (horizontalScroll){\r\n\t\t\t\t\thorizontalScroll.scrollTo(left, null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (top !== null){\r\n\t\t\t\tconst verticalScroll = this.$ui.getView(cell.$config.scrollY);\r\n\t\t\t\tif (verticalScroll){\r\n\t\t\t\t\tverticalScroll.scrollTo(null, top);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\nexport default createLayoutFacade;","export default function(gantt) {\r\ngantt.skins.skyblue = {\r\n\tconfig:{\r\n\t\tgrid_width:370,\r\n\t\trow_height: 27,\r\n\t\tbar_height_padding:4,\r\n\t\tscale_height: 27,\r\n\t\tlink_line_width:1,\r\n\t\tlink_arrow_size:8,\r\n\t\tlink_radius:2,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","export default function(gantt) {\r\ngantt.skins.dark = {\r\n\tconfig:{\r\n\t\tgrid_width:390,\r\n\t\trow_height: 36,\r\n\t\tscale_height: 36,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:12,\r\n\t\tbar_height_padding:9,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:70\t\t\r\n};\r\n\r\n};","export default function(gantt) {\r\ngantt.skins.meadow = {\r\n\tconfig:{\r\n\t\tgrid_width:380,\r\n\t\trow_height: 27,\r\n\t\tscale_height: 30,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:10,\r\n\t\tbar_height_padding:4,\r\n\t\tlightbox_additional_height:72\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","export default function(gantt) {\r\ngantt.skins.terrace = {\r\n\tconfig:{\r\n\t\tgrid_width:390,\r\n\t\trow_height: 36,\r\n\t\tscale_height: 36,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:12,\r\n\t\tbar_height_padding:9,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:70\t\t\r\n};\r\n\r\n};","export default function(gantt) {\r\n\tgantt.skins.broadway = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 390,\r\n\t\t\trow_height: 35,\r\n\t\t\tscale_height: 35,\r\n\t\t\tlink_line_width: 1,\r\n\t\t\tlink_arrow_size: 9,\r\n\t\t\tbar_height_padding:4,\r\n\t\t\tlightbox_additional_height: 86\r\n\t\t},\r\n\t\t_second_column_width: 100,\r\n\t\t_third_column_width: 80,\r\n\r\n\t\t_lightbox_template: \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span><div class='gantt_cancel_btn'></div></div><div class='gantt_cal_larea'></div>\",\r\n\t\t_config_buttons_left: {},\r\n\t\t_config_buttons_right: {\r\n\t\t\t\"gantt_delete_btn\": \"icon_delete\",\r\n\t\t\t\"gantt_save_btn\": \"icon_save\"\r\n\t\t}\r\n\t};\r\n};","export default function(gantt) {\r\n\tgantt.skins.material = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 411,\r\n\t\t\trow_height: 34,\r\n\t\t\tscale_height: 36,\r\n\t\t\tlink_line_width: 2,\r\n\t\t\tlink_arrow_size: 12,\r\n\t\t\tbar_height_padding:9,\r\n\t\t\tlightbox_additional_height: 80\r\n\t\t},\r\n\t\t_second_column_width: 110,\r\n\t\t_third_column_width: 75,\r\n\t\t_redefine_lightbox_buttons: {\r\n\t\t\t\"buttons_left\": [\"dhx_delete_btn\"],\r\n\t\t\t\"buttons_right\": [\"dhx_cancel_btn\", \"dhx_save_btn\"]\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDrag\", function (id) {\r\n\t\tvar t = gantt.getTaskNode(id);\r\n\t\tif (t) {\r\n\t\t\tt.className += \" gantt_drag_animation\";\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tvar indx = t.className.indexOf(\" gantt_drag_animation\");\r\n\t\t\t\tif (indx > -1) {\r\n\t\t\t\t\tt.className = t.className.slice(0, indx);\r\n\t\t\t\t}\r\n\t\t\t}, 200);\r\n\t\t}\r\n\t});\r\n\r\n};","export default function(gantt) {\r\ngantt.skins[\"contrast_black\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:390,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:12,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","export default function(gantt) {\r\ngantt.skins[\"contrast_white\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:390,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:12,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","import autoscroll from \"./autoscroll\";\r\nimport jquery_hooks from \"./jquery_hooks\";\r\nimport dhtmlx_hooks from \"./dhtmlx_hooks\";\r\nimport TimelineZoom from \"./timeline_zoom\";\r\n\r\n\r\nexport default function(gantt){\r\n\tif(!gantt.ext){\r\n\t\tgantt.ext = {};\r\n\t}\r\n\r\n\tvar modules = [\r\n\t\tautoscroll,\r\n\t\tjquery_hooks,\r\n\t\tdhtmlx_hooks\r\n\t];\r\n\r\n\tfor(var i = 0; i < modules.length; i++){\r\n\t\tif(modules[i])\r\n\t\t\tmodules[i](gantt);\r\n\t}\r\n\r\n\tgantt.ext.zoom = new TimelineZoom(gantt);\r\n};","export default function(gantt) {\r\n\r\n\tgantt._extend_to_optional = function (lightbox_block) {\r\n\r\n\t\tvar duration = lightbox_block;\r\n\t\tvar optional_time = {\r\n\t\t\trender: duration.render,\r\n\t\t\tfocus: duration.focus,\r\n\t\t\tset_value: function (node, value, task, section) {\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(section);\r\n\t\t\t\tif (!task[mapping.start_date] || (mapping.start_date == \"start_date\" && this._isAllowedUnscheduledTask(task))) {\r\n\t\t\t\t\toptional_time.disable(node, section);\r\n\t\t\t\t\tvar val = {};\r\n\r\n\t\t\t\t\tfor (var i in mapping) {\r\n\t\t\t\t\t\t//take default values from the time control from task start/end dates\r\n\t\t\t\t\t\tval[mapping[i]] = task[i];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, val, section);//set default value\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.enable(node, section);\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tget_value: function (node, task, section) {\r\n\t\t\t\tif (section.disabled) {\r\n\t\t\t\t\treturn {start_date: null};\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn duration.get_value.call(gantt, node, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tupdate_block: function (node, section) {\r\n\t\t\t\tgantt.callEvent(\"onSectionToggle\", [gantt._lightbox_id, section]);\r\n\t\t\t\tnode.style.display = section.disabled ? \"none\" : \"\";\r\n\r\n\t\t\t\tif (section.button) {\r\n\t\t\t\t\tvar button = node.previousSibling.querySelector(\".gantt_custom_button_label\"),\r\n\t\t\t\t\t\tlabels = gantt.locale.labels;\r\n\r\n\t\t\t\t\tvar button_text = section.disabled ? labels[section.name + \"_enable_button\"] : labels[section.name + \"_disable_button\"];\r\n\r\n\t\t\t\t\tbutton.innerHTML = button_text;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdisable: function (node, section) {\r\n\t\t\t\tsection.disabled = true;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\r\n\t\t\t},\r\n\t\t\tenable: function (node, section) {\r\n\t\t\t\tsection.disabled = false;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\t\t\t},\r\n\t\t\tbutton_click: function (index, el, section, container) {\r\n\t\t\t\tif (gantt.callEvent(\"onSectionButton\", [gantt._lightbox_id, section]) === false) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar config = gantt._get_typed_lightbox_config()[index];\r\n\t\t\t\tif (config.disabled) {\r\n\t\t\t\t\toptional_time.enable(container, config);\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.disable(container, config);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn optional_time;\r\n\t};\r\n\r\n\tgantt.form_blocks.duration_optional = gantt._extend_to_optional(gantt.form_blocks.duration);\r\n\tgantt.form_blocks.time_optional = gantt._extend_to_optional(gantt.form_blocks.time);\r\n\r\n};","export default function(gantt){\r\n\tvar htmlTags = new RegExp(\"<(?:.|\\n)*?>\", \"gm\");\r\n\tvar extraSpaces = new RegExp(\" +\", \"gm\");\r\n\r\n\tfunction stripHTMLLite(htmlText){\r\n\t\treturn (htmlText + \"\")\r\n\t\t\t.replace(htmlTags, \" \").\r\n\t\t\treplace(extraSpaces, \" \");\r\n\t}\r\n\r\n\tvar singleQuotes = new RegExp(\"'\", \"gm\");\r\n\tfunction escapeQuotes(text){\r\n\t\treturn (text + \"\").replace(singleQuotes, \"&#39;\");\r\n\t}\r\n\r\n\tgantt._waiAria = {\r\n\t\tgetAttributeString: function(attr){\r\n\t\t\tvar attributes = [\" \"];\r\n\t\t\tfor(var i in attr){\r\n\t\t\t\tvar text = escapeQuotes(stripHTMLLite(attr[i]));\r\n\t\t\t\tattributes.push(i + \"='\" + text + \"'\");\r\n\t\t\t}\r\n\t\t\tattributes.push(\" \");\r\n\t\t\treturn attributes.join(\" \");\r\n\r\n\t\t},\r\n\r\n\t\tgetTimelineCellAttr:function(dateString){\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": dateString});\r\n\t\t},\r\n\r\n\t\t_taskCommonAttr: function(task, div){\r\n\r\n\t\t\tif(!(task.start_date && task.end_date))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(gantt.templates.tooltip_text(task.start_date, task.end_date, task)));\r\n\r\n\t\t\tif(task.$dataprocessor_class){\r\n\t\t\t\tdiv.setAttribute(\"aria-busy\", true);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tsetTaskBarAttr: function(task, div){\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\t// task bars are complex elements that should be treated as a single element\r\n\t\t\tdiv.setAttribute(\"role\", \"img\");\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.drag_move){\r\n\t\t\t\tif(task.id != gantt.getState(\"tasksDnd\").drag_id){\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttaskRowAttr: function(task, div){\r\n\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.order_branch){\r\n\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t}\r\n\r\n\t\t\tdiv.setAttribute(\"role\", \"row\");\r\n\t\t\t// selected attribute should be added only to the grid  because\r\n\t\t\t// other parts don't have the keyboard navigation\r\n\t\t\tdiv.setAttribute(\"aria-selected\", gantt.isSelectedTask(task.id) ? \"true\" : \"false\");\r\n\r\n\t\t\t// allowed values start from 1, set 1 for non-tree datastores\r\n\t\t\tdiv.setAttribute(\"aria-level\", task.$level + 1 || 1);\r\n\r\n\t\t\tif(gantt.hasChild(task.id)){\r\n\t\t\t\tdiv.setAttribute(\"aria-expanded\", task.$open ? \"true\" : \"false\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tlinkAttr: function(link, div){\r\n\r\n\t\t\tvar linkTypes = gantt.config.links;\r\n\r\n\t\t\tvar toStart = link.type == linkTypes.finish_to_start || link.type == linkTypes.start_to_start;\r\n\t\t\tvar fromStart = link.type == linkTypes.start_to_start || link.type == linkTypes.start_to_finish;\r\n\r\n\t\t\tvar content = gantt.locale.labels.link + \" \" +  gantt.templates.drag_link(link.source, fromStart, link.target, toStart);\r\n\r\n\t\t\t// links are complex elements that should be treated as a single element\r\n\t\t\tdiv.setAttribute(\"role\", \"img\");\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(content));\r\n\t\t},\r\n\r\n\t\tgridSeparatorAttr: function(div){\r\n\t\t\t// the only valid role for the grid header\r\n\t\t\tdiv.setAttribute(\"role\", \"columnheader\");\r\n\t\t},\r\n\t\trowResizerAttr: function(div){\r\n\t\t\t// the only valid role for the grid header\r\n\t\t\tdiv.setAttribute(\"role\", \"row\");\r\n\t\t},\r\n\r\n\t\tlightboxHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t},\r\n\r\n\t\tlightboxVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\tlightboxAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t\tdiv.firstChild.setAttribute(\"role\", \"heading\");\r\n\t\t\tdiv.firstChild.setAttribute(\"aria-level\", \"1\");\r\n\t\t},\r\n\r\n\t\tlightboxButtonAttrString:function(buttonName){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":gantt.locale.labels[buttonName], \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\tlightboxHeader: function(div, headerText){\r\n\t\t\tdiv.setAttribute(\"aria-label\", headerText);\r\n\t\t},\r\n\r\n\t\tlightboxSelectAttrString: function(time_option){\r\n\t\t\tvar label = \"\";\r\n\r\n\t\t\tswitch (time_option) {\r\n\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.years;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%m\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.months;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%d\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.days;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%H:%i\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.hours + gantt.locale.labels.minutes;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": label});\r\n\t\t},\r\n\r\n\t\tlightboxDurationInputAttrString: function(section){\r\n\t\t\treturn this.getAttributeString({\r\n\t\t\t\t\"aria-label\": gantt.locale.labels.column_duration,\r\n\t\t\t\t\"aria-valuemin\": \"0\",\r\n\t\t\t\t\"role\": \"spinbutton\"\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tinlineEditorAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"row\");\r\n\t\t},\r\n\r\n\t\tgridAttrString: function(){\r\n\t\t\treturn [\" role='treegrid'\", gantt.config.multiselect ? \"aria-multiselectable='true'\" : \"aria-multiselectable='false'\", \" \"].join(\" \");\r\n\t\t},\r\n\r\n\r\n\t\tgridScaleRowAttrString: function(){\r\n\t\t\treturn \"role='row'\";\r\n\t\t},\r\n\r\n\t\tgridScaleCellAttrString: function(column, label){\r\n\t\t\tvar attrs = \"\";\r\n\t\t\tif(column.name == \"add\"){\r\n\t\t\t\t// a more precise role is button, but it is not valid for the grid header\r\n\t\t\t\tattrs = this.getAttributeString({\"role\":\"columnheader\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t\t}else{\r\n\r\n\t\t\t\tvar attributes = {\r\n\t\t\t\t\t\"role\":\"columnheader\",\r\n\t\t\t\t\t\"aria-label\": gantt.config.external_render && gantt.config.external_render.isElement(label) ? \"\" : label\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(gantt._sort && gantt._sort.name == column.name){\r\n\t\t\t\t\tif(gantt._sort.direction == \"asc\"){\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"ascending\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"descending\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tattrs = this.getAttributeString(attributes);\r\n\t\t\t}\r\n\t\t\treturn attrs;\r\n\t\t},\r\n\r\n\t\tgridDataAttrString: function(){\r\n\t\t\treturn \"role='rowgroup'\";\r\n\t\t},\r\n\r\n\t\treorderMarkerAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"grid\");\r\n\t\t\tdiv.firstChild.removeAttribute(\"aria-level\");\r\n\t\t\tdiv.firstChild.setAttribute(\"aria-grabbed\", \"true\");\r\n\t\t},\r\n\r\n\t\tgridCellAttrString: function(column, textValue, task){\r\n\t\t\tvar attributes = {\"role\":\"gridcell\", \"aria-label\": textValue};\r\n\t\t\tif(!column.editor || gantt.isReadonly(task)){\r\n\t\t\t\tattributes[\"aria-readonly\"] = true;\r\n\t\t\t}\r\n\r\n\t\t\treturn this.getAttributeString(attributes);\r\n\t\t},\r\n\r\n\t\tgridAddButtonAttrString: function(column){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t},\r\n\r\n\t\tmessageButtonAttrString: function(buttonLabel){\r\n\t\t\treturn \"tabindex='0' role='button' aria-label='\"+buttonLabel+\"'\";\r\n\t\t},\r\n\r\n\t\tmessageInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"alert\");\r\n\t\t\t//div.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tmessageModalAttr: function(div, uid){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tif(uid){\r\n\t\t\t\tdiv.setAttribute(\"aria-labelledby\", uid);\r\n\t\t\t}\r\n\r\n\t\t//\tdiv.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tquickInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t},\r\n\r\n\t\tquickInfoHeaderAttrString: function(){\r\n\t\t\treturn \" role='heading' aria-level='1' \";\r\n\t\t},\r\n\r\n\t\tquickInfoHeader: function(div, header){\r\n\t\t\tdiv.setAttribute(\"aria-label\", header);\r\n\t\t},\r\n\r\n\t\tquickInfoButtonAttrString: function(label){\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"role\":\"button\", \"aria-label\":label, \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\ttooltipAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"tooltip\");\r\n\t\t},\r\n\r\n\t\ttooltipVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\ttooltipHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t}\r\n\t};\r\n\r\n\tfunction isDisabled(){\r\n\t\treturn !gantt.config.wai_aria_attributes;\r\n\t}\r\n\r\n\tfor(var i in gantt._waiAria){\r\n\t\tgantt._waiAria[i] = (function(payload){\r\n\t\t\treturn function(){\r\n\t\t\t\tif(isDisabled()){\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\t}\r\n\t\t\t\treturn payload.apply(this, arguments);\r\n\t\t\t};\r\n\t\t})(gantt._waiAria[i]);\r\n\t}\r\n\r\n\r\n};","import extensions from \"./ext/extensions_gpl\";\r\nimport base from \"./factory/make_instance_web\";\r\nimport scope from \"./utils/global\";\r\nconst gantt = (scope as any).gantt = base(extensions);\r\n\r\nexport default gantt;\r\nexport { gantt };","import \"../css/dhtmlxgantt.less\";\r\n\r\nimport factory from \"./make_instance_common\";\r\nimport ui from \"../core/ui_core\";\r\nimport ajaxLoading from \"../core/loading/ajax_loading\";\r\nimport dynamicLoading from \"../core/loading/dynamic_loading\";\r\n\r\nexport default function(supportedExtensions) {\r\n\tvar gantt = factory(supportedExtensions);\r\n\r\n\tif(!gantt.env.isNode){\r\n\t\tui(gantt);\r\n\t\tajaxLoading(gantt);\r\n\t\tdynamicLoading(gantt);\r\n\t}\r\n\r\n\treturn gantt;\r\n};","export default function(gantt) {\r\n\tgantt.load = function (url, type, callback) {\r\n\t\tthis._load_url = url;\r\n\t\tthis.assert(arguments.length, \"Invalid load arguments\");\r\n\r\n\t\tvar tp = 'json', cl = null;\r\n\t\tif (arguments.length >= 3) {\r\n\t\t\ttp = type;\r\n\t\t\tcl = callback;\r\n\t\t} else {\r\n\t\t\tif (typeof arguments[1] == \"string\")\r\n\t\t\t\ttp = arguments[1];\r\n\t\t\telse if (typeof arguments[1] == \"function\")\r\n\t\t\t\tcl = arguments[1];\r\n\t\t}\r\n\r\n\t\tthis._load_type = tp;\r\n\r\n\t\tthis.callEvent(\"onLoadStart\", [url, tp]);\r\n\r\n\t\treturn this.ajax.get(url, gantt.bind(function (l) {\r\n\t\t\tthis.on_load(l, tp);\r\n\t\t\tthis.callEvent(\"onLoadEnd\", [url, tp]);\r\n\t\t\tif (typeof cl == \"function\")\r\n\t\t\t\tcl.call(this);\r\n\t\t}, this));\r\n\t};\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}