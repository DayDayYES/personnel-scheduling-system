{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport gantt from 'dhtmlx-gantt';\nimport 'dhtmlx-gantt/codebase/dhtmlxgantt.css';\nexport default {\n  name: 'GanttTest',\n  data() {\n    return {\n      viewMode: 'workpoint',\n      // workpoint | team | process\n      makespan: 0,\n      taskCount: 0,\n      // æ–°å¢ï¼šå†å²ç»“æœåˆ—è¡¨\n      scheduleResultList: [],\n      // æ–°å¢ï¼šå½“å‰é€‰ä¸­çš„è¡¨å\n      selectedTableName: '',\n      // æ–°å¢ï¼šåŠ è½½çŠ¶æ€\n      loading: false,\n      // ä¿®æ”¹ï¼štestScheduleData åˆå§‹ä¸ºç©ºï¼Œä»æ•°æ®åº“åŠ è½½\n      testScheduleData: [],\n      // å›¢é˜Ÿé¢œè‰²æ˜ å°„\n      teamColors: {\n        'team1': '#FF6B35',\n        // é²œæ©™è‰²\n        'team2': '#EF3950',\n        // é²œçº¢è‰²\n        'team3': '#507EF7',\n        // é²œè“è‰²\n        'team4': '#9B59B6',\n        // ç´«ç½—å…°è‰²\n        'team5': '#00B774',\n        // é²œç»¿è‰²\n        'team6': '#F39C12' // é‡‘æ©™è‰²\n      },\n      // å›¢é˜Ÿåç§°\n      teamNames: {\n        'team1': 'å›¢é˜Ÿ1',\n        'team2': 'å›¢é˜Ÿ2',\n        'team3': 'å›¢é˜Ÿ3',\n        'team4': 'å›¢é˜Ÿ4',\n        'team5': 'å›¢é˜Ÿ5',\n        'team6': 'å›¢é˜Ÿ6'\n      }\n    };\n  },\n  mounted() {\n    this.initGantt();\n    // ä¿®æ”¹ï¼šä»æ•°æ®åº“åŠ è½½å†å²ç»“æœ\n    this.loadScheduleResultList();\n  },\n  beforeDestroy() {\n    if (gantt.$initialized) {\n      gantt.clearAll();\n    }\n  },\n  methods: {\n    /**\r\n     * åŠ è½½è°ƒåº¦ç»“æœåˆ—è¡¨\r\n     */\n    async loadScheduleResultList() {\n      this.loading = true;\n      try {\n        console.log('ğŸ“‹ å¼€å§‹åŠ è½½è°ƒåº¦ç»“æœåˆ—è¡¨...');\n        const response = await this.$axios.get(this.$httpUrl + '/schedule_results/list?limit=50');\n\n        // æ£€æŸ¥å“åº”æ•°æ®æ˜¯å¦å­˜åœ¨\n        if (!response || !response.data) {\n          this.$message.error('æœåŠ¡å™¨å“åº”å¼‚å¸¸');\n          return;\n        }\n        if (response.data.code === 200) {\n          this.scheduleResultList = response.data.data || [];\n          console.log(`âœ… åŠ è½½æˆåŠŸï¼Œå…± ${this.scheduleResultList.length} ä¸ªè°ƒåº¦ç»“æœ`);\n\n          // é»˜è®¤é€‰æ‹©æœ€æ–°çš„\n          if (this.scheduleResultList.length > 0) {\n            this.selectedTableName = this.scheduleResultList[0].tableName;\n            await this.loadScheduleData(this.selectedTableName);\n          } else {\n            this.$message.warning('æš‚æ— è°ƒåº¦ç»“æœï¼Œè¯·å…ˆè¿è¡Œç®—æ³•');\n          }\n        } else {\n          const errorMsg = response.data.msg || 'æœªçŸ¥é”™è¯¯';\n          this.$message.error('åŠ è½½è°ƒåº¦ç»“æœåˆ—è¡¨å¤±è´¥: ' + errorMsg);\n        }\n      } catch (error) {\n        // è¯¦ç»†çš„é”™è¯¯æ—¥å¿—\n        if (error.response) {\n          // æœåŠ¡å™¨è¿”å›äº†é”™è¯¯çŠ¶æ€ç \n          console.error('æœåŠ¡å™¨é”™è¯¯:', error.response.status, error.response.data);\n          this.$message.error(`æœåŠ¡å™¨é”™è¯¯: ${error.response.status}`);\n        } else if (error.request) {\n          // è¯·æ±‚å·²å‘é€ä½†æ²¡æœ‰æ”¶åˆ°å“åº”\n          console.error('ç½‘ç»œé”™è¯¯:', error.request);\n          this.$message.error('ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨');\n        } else {\n          // å…¶ä»–é”™è¯¯\n          console.error('æœªçŸ¥é”™è¯¯:', error.message);\n          this.$message.error('åŠ è½½å¤±è´¥: ' + error.message);\n        }\n      } finally {\n        this.loading = false;\n      }\n    },\n    /**\r\n     * åŠ è½½æŒ‡å®šè¡¨çš„è°ƒåº¦æ•°æ®\r\n     */\n    async loadScheduleData(tableName) {\n      if (!tableName) {\n        console.warn('âš ï¸  è¡¨åä¸ºç©ºï¼Œæ— æ³•åŠ è½½æ•°æ®');\n        return;\n      }\n      this.loading = true;\n      try {\n        console.log(`ğŸ“– åŠ è½½è°ƒåº¦æ•°æ®: ${tableName}`);\n        const response = await this.$axios.get(`${this.$httpUrl}/schedule_results/${tableName}`);\n\n        // æ£€æŸ¥å“åº”æ•°æ®æ˜¯å¦å­˜åœ¨\n        if (!response || !response.data) {\n          this.$message.error('æœåŠ¡å™¨å“åº”å¼‚å¸¸');\n          return;\n        }\n        if (response.data.code === 200) {\n          this.testScheduleData = response.data.data || [];\n          this.taskCount = this.testScheduleData.length;\n\n          // è®¡ç®—å®Œå·¥æ—¶é—´\n          if (this.testScheduleData.length > 0) {\n            this.makespan = Math.max(...this.testScheduleData.map(t => t.end));\n          } else {\n            this.makespan = 0;\n          }\n          console.log(`âœ… åŠ è½½æˆåŠŸ: ${this.taskCount} ä¸ªä»»åŠ¡, å®Œå·¥æ—¶é—´: ${this.makespan.toFixed(2)}h`);\n\n          // é‡æ–°åŠ è½½ç”˜ç‰¹å›¾\n          this.loadData();\n          this.$message.success(`è°ƒåº¦æ•°æ®åŠ è½½æˆåŠŸ (${this.taskCount}ä¸ªä»»åŠ¡)`);\n        } else {\n          const errorMsg = response.data.msg || 'æœªçŸ¥é”™è¯¯';\n          this.$message.error('åŠ è½½è°ƒåº¦æ•°æ®å¤±è´¥: ' + errorMsg);\n        }\n      } catch (error) {\n        // è¯¦ç»†çš„é”™è¯¯æ—¥å¿—\n        if (error.response) {\n          console.error('æœåŠ¡å™¨é”™è¯¯:', error.response.status, error.response.data);\n          this.$message.error(`æœåŠ¡å™¨é”™è¯¯: ${error.response.status}`);\n        } else if (error.request) {\n          console.error('ç½‘ç»œé”™è¯¯:', error.request);\n          this.$message.error('ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨');\n        } else {\n          console.error('æœªçŸ¥é”™è¯¯:', error.message);\n          this.$message.error('åŠ è½½å¤±è´¥: ' + error.message);\n        }\n      } finally {\n        this.loading = false;\n      }\n    },\n    /**\r\n     * å¤„ç†ä¸‹æ‹‰æ¡†é€‰æ‹©å˜åŒ–\r\n     */\n    handleTableChange(tableName) {\n      console.log(`ğŸ”„ åˆ‡æ¢è°ƒåº¦ç»“æœ: ${tableName}`);\n      this.loadScheduleData(tableName);\n    },\n    /**\r\n     * åˆ·æ–°è°ƒåº¦ç»“æœåˆ—è¡¨\r\n     */\n    refreshScheduleList() {\n      console.log('ğŸ”„ åˆ·æ–°è°ƒåº¦ç»“æœåˆ—è¡¨');\n      this.loadScheduleResultList();\n    },\n    /**\r\n     * åˆå§‹åŒ–DHTMLX Gantt\r\n     */\n    initGantt() {\n      // ä¸­æ–‡æœ¬åœ°åŒ–é…ç½®\n      gantt.i18n.setLocale({\n        date: {\n          month_full: [\"ä¸€æœˆ\", \"äºŒæœˆ\", \"ä¸‰æœˆ\", \"å››æœˆ\", \"äº”æœˆ\", \"å…­æœˆ\", \"ä¸ƒæœˆ\", \"å…«æœˆ\", \"ä¹æœˆ\", \"åæœˆ\", \"åä¸€æœˆ\", \"åäºŒæœˆ\"],\n          month_short: [\"1æœˆ\", \"2æœˆ\", \"3æœˆ\", \"4æœˆ\", \"5æœˆ\", \"6æœˆ\", \"7æœˆ\", \"8æœˆ\", \"9æœˆ\", \"10æœˆ\", \"11æœˆ\", \"12æœˆ\"],\n          day_full: [\"æ˜ŸæœŸæ—¥\", \"æ˜ŸæœŸä¸€\", \"æ˜ŸæœŸäºŒ\", \"æ˜ŸæœŸä¸‰\", \"æ˜ŸæœŸå››\", \"æ˜ŸæœŸäº”\", \"æ˜ŸæœŸå…­\"],\n          day_short: [\"æ—¥\", \"ä¸€\", \"äºŒ\", \"ä¸‰\", \"å››\", \"äº”\", \"å…­\"]\n        },\n        labels: {\n          new_task: \"æ–°ä»»åŠ¡\",\n          icon_save: \"ä¿å­˜\",\n          icon_cancel: \"å–æ¶ˆ\",\n          icon_details: \"è¯¦æƒ…\",\n          icon_edit: \"ç¼–è¾‘\",\n          icon_delete: \"åˆ é™¤\",\n          confirm_closing: \"\",\n          confirm_deleting: \"ç¡®å®šåˆ é™¤ä»»åŠ¡å—ï¼Ÿ\",\n          section_description: \"æè¿°\",\n          section_time: \"æ—¶é—´\",\n          section_type: \"ç±»å‹\",\n          // å¼¹çª—æŒ‰é’®\n          button_save: \"ä¿å­˜\",\n          button_cancel: \"å–æ¶ˆ\",\n          button_delete: \"åˆ é™¤\"\n        }\n      });\n\n      // åŸºç¡€é…ç½®\n      gantt.config.date_format = '%Y-%m-%d %H:%i';\n      gantt.config.xml_date = '%Y-%m-%d %H:%i';\n      gantt.config.scale_unit = 'day';\n      gantt.config.date_scale = '%Y-%m-%d';\n      gantt.config.subscales = [{\n        unit: 'hour',\n        step: 12,\n        date: '%H:%i'\n      }];\n\n      // è‡ªåŠ¨é«˜åº¦é…ç½®\n      gantt.config.autosize = 'y'; // å‚ç›´æ–¹å‘è‡ªåŠ¨è°ƒæ•´å¤§å°\n      gantt.config.autosize_min_height = 400; // æœ€å°é«˜åº¦400px\n\n      // åˆ—é…ç½®\n      gantt.config.columns = [{\n        name: 'text',\n        label: 'ä»»åŠ¡åç§°',\n        width: 160,\n        tree: true\n      }, {\n        name: 'start_date',\n        label: 'å¼€å§‹æ—¶é—´',\n        width: 100,\n        align: 'center'\n      }, {\n        name: 'duration',\n        label: 'æŒç»­æ—¶é—´',\n        width: 70,\n        align: 'center'\n      }, {\n        name: 'teamName',\n        label: 'æ‰€å±å›¢é˜Ÿ',\n        width: 70,\n        align: 'center',\n        template: function (task) {\n          return task.teamName || '-';\n        }\n      }, {\n        name: 'workers',\n        label: 'åˆ†é…äººæ•°',\n        width: 70,\n        align: 'center',\n        template: function (task) {\n          return task.workers ? task.workers + 'äºº' : '-';\n        }\n      }];\n\n      // å·¥å…·æç¤ºé…ç½®\n      gantt.config.tooltip_hide_timeout = 1000;\n      gantt.templates.tooltip_text = (start, end, task) => {\n        if (task.type === 'project') return '';\n        const duration = ((task.end_date - task.start_date) / (1000 * 60 * 60)).toFixed(1);\n        return `\n          <div style=\"padding: 10px; min-width: 200px;\">\n            <strong style=\"font-size: 14px;\">${task.text}</strong><br/>\n            <hr style=\"margin: 5px 0; border: none; border-top: 1px solid #ddd;\"/>\n            <div style=\"margin: 5px 0;\">\n              <span style=\"color: #666;\">å¼€å§‹æ—¶é—´ï¼š</span>\n              <strong>${this.formatDate(task.start_date)}</strong>\n            </div>\n            <div style=\"margin: 5px 0;\">\n              <span style=\"color: #666;\">ç»“æŸæ—¶é—´ï¼š</span>\n              <strong>${this.formatDate(task.end_date)}</strong>\n            </div>\n            <div style=\"margin: 5px 0;\">\n              <span style=\"color: #666;\">æŒç»­æ—¶é—´ï¼š</span>\n              <strong>${duration}å°æ—¶</strong>\n            </div>\n            <div style=\"margin: 5px 0;\">\n              <span style=\"color: #666;\">å›¢é˜Ÿï¼š</span>\n              <strong>${task.teamName || ''}</strong>\n            </div>\n            <div style=\"margin: 5px 0;\">\n              <span style=\"color: #666;\">å·¥äººæ•°ï¼š</span>\n              <strong>${task.workers || 0}äºº</strong>\n            </div>\n          </div>\n        `;\n      };\n\n      // ä»»åŠ¡é¢œè‰²é…ç½®\n      gantt.templates.task_class = (start, end, task) => {\n        if (task.type === 'project') return 'gantt_project';\n        return `gantt_task_${task.team}`;\n      };\n\n      // åˆå§‹åŒ–\n      gantt.init(this.$refs.ganttContainer);\n      console.log('âœ… DHTMLX Gantt åˆå§‹åŒ–å®Œæˆ');\n    },\n    /**\r\n     * åŠ è½½æ•°æ®\r\n     */\n    loadData() {\n      let ganttData;\n      switch (this.viewMode) {\n        case 'workpoint':\n          ganttData = this.prepareWorkpointView();\n          break;\n        case 'team':\n          ganttData = this.prepareTeamView();\n          break;\n        case 'process':\n          ganttData = this.prepareProcessView();\n          break;\n        default:\n          ganttData = this.prepareWorkpointView();\n      }\n      gantt.clearAll();\n      gantt.parse(ganttData);\n      console.log(`âœ… åŠ è½½${this.viewMode}è§†è§’æ•°æ®ï¼Œå…±${ganttData.data.length}æ¡`);\n    },\n    /**\r\n     * æ—¶é—´å•ä½è½¬æ—¥æœŸ\r\n     */\n    timeUnitToDate(timeUnit) {\n      const baseDate = new Date('2024-01-01T00:00:00');\n      const hours = timeUnit;\n      baseDate.setHours(baseDate.getHours() + hours);\n      return baseDate;\n    },\n    /**\r\n     * æ ¼å¼åŒ–æ—¥æœŸ\r\n     */\n    formatDate(date) {\n      if (typeof date === 'string') {\n        date = new Date(date);\n      }\n      return date.toLocaleString('zh-CN', {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    },\n    /**\r\n     * æ£€æµ‹å¹¶è¡Œä»»åŠ¡ï¼ˆå¤ç”¨ä¹‹å‰çš„é€»è¾‘ï¼‰\r\n     */\n    detectParallelTasks(tasks) {\n      if (!tasks || tasks.length === 0) return [];\n      const sorted = [...tasks].sort((a, b) => a.start - b.start);\n      const layers = [];\n      const result = [];\n      sorted.forEach(task => {\n        let layerIndex = layers.findIndex(endTime => task.start >= endTime);\n        if (layerIndex === -1) {\n          layerIndex = layers.length;\n          layers.push(task.end);\n        } else {\n          layers[layerIndex] = task.end;\n        }\n        result.push({\n          ...task,\n          layer: layerIndex,\n          totalLayers: 0\n        });\n      });\n      const maxLayer = Math.max(...result.map(t => t.layer));\n      result.forEach(t => t.totalLayers = maxLayer + 1);\n      return result;\n    },\n    /**\r\n     * å‡†å¤‡è®¾å¤‡è§†è§’æ•°æ®\r\n     */\n    prepareWorkpointView() {\n      const data = [];\n      const links = [];\n\n      // æŒ‰è®¾å¤‡åˆ†ç»„\n      const grouped = {};\n      this.testScheduleData.forEach(task => {\n        const wpId = task.workpoint_id;\n        if (!grouped[wpId]) {\n          grouped[wpId] = [];\n        }\n        grouped[wpId].push(task);\n      });\n\n      // ç”ŸæˆDHTMLXæ•°æ®\n      Object.keys(grouped).sort().forEach(wpId => {\n        const wpTasks = grouped[wpId];\n        const wpName = wpTasks[0].workpoint_name;\n\n        // è½¬æ¢æ˜¾ç¤ºåç§°ï¼šå·¥ä½œç‚¹X -> è®¾å¤‡X\n        const displayName = wpName.replace('å·¥ä½œç‚¹', 'è®¾å¤‡');\n\n        // æ·»åŠ çˆ¶èŠ‚ç‚¹ï¼ˆè®¾å¤‡ï¼‰\n        data.push({\n          id: wpId,\n          text: displayName,\n          type: 'project',\n          open: true\n        });\n\n        // æ£€æµ‹å¹¶è¡Œä»»åŠ¡\n        const layered = this.detectParallelTasks(wpTasks);\n\n        // æ·»åŠ ä»»åŠ¡\n        layered.forEach(task => {\n          data.push({\n            id: `task_${task.id}`,\n            text: task.name,\n            start_date: this.formatGanttDate(this.timeUnitToDate(task.start)),\n            end_date: this.formatGanttDate(this.timeUnitToDate(task.end)),\n            duration: ((task.end - task.start) / 24).toFixed(1),\n            // è½¬æ¢ä¸ºå¤©\n            parent: wpId,\n            team: task.team,\n            teamName: this.teamNames[task.team],\n            workers: task.workers,\n            layer: task.layer,\n            type: 'task'\n          });\n        });\n      });\n      return {\n        data,\n        links\n      };\n    },\n    /**\r\n     * å‡†å¤‡å›¢é˜Ÿè§†è§’æ•°æ®\r\n     */\n    prepareTeamView() {\n      const data = [];\n      const links = [];\n\n      // æŒ‰å›¢é˜Ÿåˆ†ç»„\n      const grouped = {};\n      this.testScheduleData.forEach(task => {\n        const team = task.team;\n        if (!grouped[team]) {\n          grouped[team] = [];\n        }\n        grouped[team].push(task);\n      });\n\n      // ç”ŸæˆDHTMLXæ•°æ®\n      Object.keys(grouped).sort().forEach(team => {\n        const teamTasks = grouped[team];\n        const teamName = this.teamNames[team];\n\n        // æ·»åŠ çˆ¶èŠ‚ç‚¹ï¼ˆå›¢é˜Ÿï¼‰\n        data.push({\n          id: team,\n          text: teamName,\n          type: 'project',\n          open: true\n        });\n\n        // æ£€æµ‹å¹¶è¡Œä»»åŠ¡\n        const layered = this.detectParallelTasks(teamTasks);\n\n        // æ·»åŠ ä»»åŠ¡\n        layered.forEach(task => {\n          data.push({\n            id: `task_${task.id}`,\n            text: task.name,\n            start_date: this.formatGanttDate(this.timeUnitToDate(task.start)),\n            end_date: this.formatGanttDate(this.timeUnitToDate(task.end)),\n            duration: ((task.end - task.start) / 24).toFixed(1),\n            parent: team,\n            team: task.team,\n            teamName: this.teamNames[task.team],\n            workers: task.workers,\n            layer: task.layer,\n            type: 'task'\n          });\n        });\n      });\n      return {\n        data,\n        links\n      };\n    },\n    /**\r\n     * å‡†å¤‡å·¥åºè§†è§’æ•°æ®\r\n     */\n    prepareProcessView() {\n      const data = [];\n      const links = [];\n\n      // æŒ‰å¼€å§‹æ—¶é—´æ’åº\n      const sorted = [...this.testScheduleData].sort((a, b) => a.start - b.start);\n      sorted.forEach(task => {\n        data.push({\n          id: `task_${task.id}`,\n          text: task.name,\n          start_date: this.formatGanttDate(this.timeUnitToDate(task.start)),\n          end_date: this.formatGanttDate(this.timeUnitToDate(task.end)),\n          duration: ((task.end - task.start) / 24).toFixed(1),\n          team: task.team,\n          teamName: this.teamNames[task.team],\n          workers: task.workers,\n          type: 'task'\n        });\n      });\n      return {\n        data,\n        links\n      };\n    },\n    /**\r\n     * æ ¼å¼åŒ–DHTMLXæ—¥æœŸ\r\n     */\n    formatGanttDate(date) {\n      const year = date.getFullYear();\n      const month = String(date.getMonth() + 1).padStart(2, '0');\n      const day = String(date.getDate()).padStart(2, '0');\n      const hour = String(date.getHours()).padStart(2, '0');\n      const minute = String(date.getMinutes()).padStart(2, '0');\n      return `${year}-${month}-${day} ${hour}:${minute}`;\n    },\n    /**\r\n     * åˆ‡æ¢è§†è§’\r\n     */\n    switchView() {\n      this.loadData();\n      this.$message.success(`å·²åˆ‡æ¢åˆ°${this.getViewName()}è§†è§’`);\n    },\n    /**\r\n     * è·å–è§†è§’åç§°\r\n     */\n    getViewName() {\n      const names = {\n        'workpoint': 'è®¾å¤‡',\n        'team': 'å›¢é˜Ÿ',\n        'process': 'å·¥åº'\n      };\n      return names[this.viewMode] || 'æœªçŸ¥';\n    },\n    /**\r\n     * æ”¹å˜ç¼©æ”¾çº§åˆ«\r\n     */\n    changeZoom(scale) {\n      switch (scale) {\n        case 'day':\n          gantt.config.scale_unit = 'day';\n          gantt.config.date_scale = '%Y-%m-%d';\n          gantt.config.subscales = [{\n            unit: 'hour',\n            step: 6,\n            date: '%H:%i'\n          }];\n          break;\n        case 'week':\n          gantt.config.scale_unit = 'week';\n          gantt.config.date_scale = 'ç¬¬%Wå‘¨';\n          gantt.config.subscales = [{\n            unit: 'day',\n            step: 1,\n            date: '%dæ—¥'\n          }];\n          break;\n        case 'month':\n          gantt.config.scale_unit = 'month';\n          gantt.config.date_scale = '%Yå¹´%mæœˆ';\n          gantt.config.subscales = [{\n            unit: 'week',\n            step: 1,\n            date: 'ç¬¬%Wå‘¨'\n          }];\n          break;\n      }\n      gantt.render();\n      this.$message.success(`å·²åˆ‡æ¢åˆ°${scale}è§†å›¾`);\n    }\n  }\n};","map":{"version":3,"names":["gantt","name","data","viewMode","makespan","taskCount","scheduleResultList","selectedTableName","loading","testScheduleData","teamColors","teamNames","mounted","initGantt","loadScheduleResultList","beforeDestroy","$initialized","clearAll","methods","console","log","response","$axios","get","$httpUrl","$message","error","code","length","tableName","loadScheduleData","warning","errorMsg","msg","status","request","message","warn","Math","max","map","t","end","toFixed","loadData","success","handleTableChange","refreshScheduleList","i18n","setLocale","date","month_full","month_short","day_full","day_short","labels","new_task","icon_save","icon_cancel","icon_details","icon_edit","icon_delete","confirm_closing","confirm_deleting","section_description","section_time","section_type","button_save","button_cancel","button_delete","config","date_format","xml_date","scale_unit","date_scale","subscales","unit","step","autosize","autosize_min_height","columns","label","width","tree","align","template","task","teamName","workers","tooltip_hide_timeout","templates","tooltip_text","start","type","duration","end_date","start_date","text","formatDate","task_class","team","init","$refs","ganttContainer","ganttData","prepareWorkpointView","prepareTeamView","prepareProcessView","parse","timeUnitToDate","timeUnit","baseDate","Date","hours","setHours","getHours","toLocaleString","year","month","day","hour","minute","detectParallelTasks","tasks","sorted","sort","a","b","layers","result","forEach","layerIndex","findIndex","endTime","push","layer","totalLayers","maxLayer","links","grouped","wpId","workpoint_id","Object","keys","wpTasks","wpName","workpoint_name","displayName","replace","id","open","layered","formatGanttDate","parent","teamTasks","getFullYear","String","getMonth","padStart","getDate","getMinutes","switchView","getViewName","names","changeZoom","scale","render"],"sources":["src/components/user/ScheduleGantt.vue"],"sourcesContent":["<template>\r\n  <div class=\"gantt-container\">\r\n    <!-- é¡µé¢å¤´éƒ¨ -->\r\n    <div class=\"page-header\">\r\n      <div class=\"header-content\">\r\n        <h2 class=\"page-title\">\r\n          <i class=\"el-icon-date\"></i>\r\n          è°ƒåº¦ç»“æœå¯è§†åŒ–\r\n        </h2>\r\n        <p class=\"page-subtitle\">åŸºäºDHTMLXçš„äº¤äº’å¼ç”˜ç‰¹å›¾åˆ†æå¹³å°</p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- å·¥å…·æ  -->\r\n    <div class=\"toolbar-section\">\r\n      <el-card shadow=\"never\">\r\n        <div class=\"toolbar-content\">\r\n          <!-- æ–°å¢ï¼šå†å²ç»“æœé€‰æ‹© -->\r\n          <div class=\"result-selector\">\r\n            <label>é€‰æ‹©è°ƒåº¦ç»“æœï¼š</label>\r\n            <el-select \r\n              v-model=\"selectedTableName\" \r\n              @change=\"handleTableChange\"\r\n              placeholder=\"è¯·é€‰æ‹©è°ƒåº¦ç»“æœ\"\r\n              style=\"width: 400px;\"\r\n              :loading=\"loading\"\r\n              size=\"small\">\r\n              <el-option\r\n                v-for=\"item in scheduleResultList\"\r\n                :key=\"item.tableName\"\r\n                :label=\"`${item.createdTime} | å®Œå·¥æ—¶é—´: ${item.makespan}h | ${item.taskCount}ä¸ªä»»åŠ¡`\"\r\n                :value=\"item.tableName\">\r\n              </el-option>\r\n            </el-select>\r\n            <el-button \r\n              size=\"small\" \r\n              icon=\"el-icon-refresh\" \r\n              @click=\"refreshScheduleList\"\r\n              :loading=\"loading\"\r\n              style=\"margin-left: 10px;\">\r\n              åˆ·æ–°\r\n            </el-button>\r\n          </div>\r\n          \r\n          <div class=\"view-switch\">\r\n            <label>è§†è§’åˆ‡æ¢ï¼š</label>\r\n            <el-radio-group v-model=\"viewMode\" @change=\"switchView\" size=\"small\">\r\n              <el-radio-button label=\"workpoint\">è®¾å¤‡è§†è§’</el-radio-button>\r\n              <el-radio-button label=\"team\">å›¢é˜Ÿè§†è§’</el-radio-button>\r\n              <el-radio-button label=\"process\">å·¥åºè§†è§’</el-radio-button>\r\n            </el-radio-group>\r\n          </div>\r\n          \r\n          <div class=\"zoom-controls\">\r\n            <label>ç¼©æ”¾çº§åˆ«ï¼š</label>\r\n            <el-button-group>\r\n              <el-button size=\"small\" @click=\"changeZoom('day')\">å¤©</el-button>\r\n              <el-button size=\"small\" @click=\"changeZoom('week')\">å‘¨</el-button>\r\n              <el-button size=\"small\" @click=\"changeZoom('month')\">æœˆ</el-button>\r\n            </el-button-group>\r\n          </div>\r\n\r\n          <div class=\"info-display\">\r\n            <el-tag type=\"success\">å®Œå·¥æ—¶é—´: {{ makespan.toFixed(2) }}å°æ—¶</el-tag>\r\n            <el-tag type=\"info\">ä»»åŠ¡æ•°: {{ taskCount }}</el-tag>\r\n          </div>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n\r\n    <!-- Ganttå›¾è¡¨å®¹å™¨ -->\r\n    <div class=\"gantt-section\">\r\n      <el-card shadow=\"never\" class=\"gantt-card\">\r\n        <div ref=\"ganttContainer\" class=\"dhtmlx-gantt-container\"></div>\r\n      </el-card>\r\n    </div>\r\n\r\n    <!-- è¯´æ˜æ–‡æ¡£ -->\r\n    <div class=\"info-section\">\r\n      <el-card shadow=\"never\">\r\n        <div slot=\"header\">\r\n          <span><i class=\"el-icon-info\"></i> è°ƒåº¦æ•°æ®ç»Ÿè®¡</span>\r\n        </div>\r\n        <el-descriptions :column=\"2\" border>\r\n          <el-descriptions-item label=\"è®¾å¤‡æ•°é‡\">3ä¸ªï¼ˆè®¾å¤‡1ã€è®¾å¤‡2ã€è®¾å¤‡3ï¼‰</el-descriptions-item>\r\n          <el-descriptions-item label=\"ä»»åŠ¡æ€»æ•°\">{{ taskCount }}ä¸ª</el-descriptions-item>\r\n          <el-descriptions-item label=\"å›¢é˜Ÿæ•°é‡\">6ä¸ªï¼ˆæ¶å­ç­ç»„ã€ä¿æ¸©ç­ç»„ç­‰ï¼‰</el-descriptions-item>\r\n          <el-descriptions-item label=\"å®Œå·¥æ—¶é—´\">{{ makespan }}å°æ—¶</el-descriptions-item>\r\n          <el-descriptions-item label=\"å¹¶è¡Œä»»åŠ¡\">âœ… å·²åŒ…å«åŒæ—¶è¿›è¡Œçš„ä»»åŠ¡</el-descriptions-item>\r\n          <el-descriptions-item label=\"æ—¶é—´èŒƒå›´\">2024-01-01 è‡³ 2024-01-03</el-descriptions-item>\r\n        </el-descriptions>\r\n        \r\n        <div class=\"test-notes\">\r\n          <h4>ğŸ’¡ åŠŸèƒ½è¯´æ˜ï¼š</h4>\r\n          <ul>\r\n            <li>âœ… æŸ¥çœ‹å¹¶è¡Œä»»åŠ¡æ˜¯å¦é‡å ï¼ˆè®¾å¤‡1æœ‰å¤šä¸ªåŒæ—¶è¿›è¡Œçš„ä»»åŠ¡ï¼‰</li>\r\n            <li>âœ… ä¸‰ç§è§†è§’åˆ‡æ¢æ•ˆæœ</li>\r\n            <li>âœ… é¼ æ ‡åŒå‡»æ˜¾ç¤ºè¯¦æƒ…</li>\r\n            <li>âœ… æ—¶é—´è½´ç¼©æ”¾åŠŸèƒ½</li>\r\n            <li>âœ… æŸ¥çœ‹ä¸åŒå›¢é˜Ÿçš„é¢œè‰²åŒºåˆ†</li>\r\n          </ul>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport gantt from 'dhtmlx-gantt';\r\nimport 'dhtmlx-gantt/codebase/dhtmlxgantt.css';\r\n\r\nexport default {\r\n  name: 'GanttTest',\r\n  data() {\r\n    return {\r\n      viewMode: 'workpoint', // workpoint | team | process\r\n      makespan: 0,\r\n      taskCount: 0,\r\n      \r\n      // æ–°å¢ï¼šå†å²ç»“æœåˆ—è¡¨\r\n      scheduleResultList: [],\r\n      \r\n      // æ–°å¢ï¼šå½“å‰é€‰ä¸­çš„è¡¨å\r\n      selectedTableName: '',\r\n      \r\n      // æ–°å¢ï¼šåŠ è½½çŠ¶æ€\r\n      loading: false,\r\n      \r\n      // ä¿®æ”¹ï¼štestScheduleData åˆå§‹ä¸ºç©ºï¼Œä»æ•°æ®åº“åŠ è½½\r\n      testScheduleData: [],\r\n      \r\n      // å›¢é˜Ÿé¢œè‰²æ˜ å°„\r\n      teamColors: {\r\n        'team1': '#FF6B35',  // é²œæ©™è‰²\r\n        'team2': '#EF3950',  // é²œçº¢è‰²\r\n        'team3': '#507EF7',  // é²œè“è‰²\r\n        'team4': '#9B59B6',  // ç´«ç½—å…°è‰²\r\n        'team5': '#00B774',  // é²œç»¿è‰²\r\n        'team6': '#F39C12'   // é‡‘æ©™è‰²\r\n      },\r\n      \r\n      // å›¢é˜Ÿåç§°\r\n      teamNames: {\r\n        'team1': 'å›¢é˜Ÿ1',\r\n        'team2': 'å›¢é˜Ÿ2',\r\n        'team3': 'å›¢é˜Ÿ3',\r\n        'team4': 'å›¢é˜Ÿ4',\r\n        'team5': 'å›¢é˜Ÿ5',\r\n        'team6': 'å›¢é˜Ÿ6'\r\n      }\r\n    };\r\n  },\r\n  mounted() {\r\n    this.initGantt();\r\n    // ä¿®æ”¹ï¼šä»æ•°æ®åº“åŠ è½½å†å²ç»“æœ\r\n    this.loadScheduleResultList();\r\n  },\r\n  beforeDestroy() {\r\n    if (gantt.$initialized) {\r\n      gantt.clearAll();\r\n    }\r\n  },\r\n  methods: {\r\n    /**\r\n     * åŠ è½½è°ƒåº¦ç»“æœåˆ—è¡¨\r\n     */\r\n    async loadScheduleResultList() {\r\n      this.loading = true;\r\n      try {\r\n        console.log('ğŸ“‹ å¼€å§‹åŠ è½½è°ƒåº¦ç»“æœåˆ—è¡¨...');\r\n        const response = await this.$axios.get(this.$httpUrl + '/schedule_results/list?limit=50');\r\n        \r\n        // æ£€æŸ¥å“åº”æ•°æ®æ˜¯å¦å­˜åœ¨\r\n        if (!response || !response.data) {\r\n          this.$message.error('æœåŠ¡å™¨å“åº”å¼‚å¸¸');\r\n          return;\r\n        }\r\n        \r\n        if (response.data.code === 200) {\r\n          this.scheduleResultList = response.data.data || [];\r\n          console.log(`âœ… åŠ è½½æˆåŠŸï¼Œå…± ${this.scheduleResultList.length} ä¸ªè°ƒåº¦ç»“æœ`);\r\n          \r\n          // é»˜è®¤é€‰æ‹©æœ€æ–°çš„\r\n          if (this.scheduleResultList.length > 0) {\r\n            this.selectedTableName = this.scheduleResultList[0].tableName;\r\n            await this.loadScheduleData(this.selectedTableName);\r\n          } else {\r\n            this.$message.warning('æš‚æ— è°ƒåº¦ç»“æœï¼Œè¯·å…ˆè¿è¡Œç®—æ³•');\r\n          }\r\n        } else {\r\n          const errorMsg = response.data.msg || 'æœªçŸ¥é”™è¯¯';\r\n          this.$message.error('åŠ è½½è°ƒåº¦ç»“æœåˆ—è¡¨å¤±è´¥: ' + errorMsg);\r\n        }\r\n      } catch (error) {\r\n        // è¯¦ç»†çš„é”™è¯¯æ—¥å¿—\r\n        if (error.response) {\r\n          // æœåŠ¡å™¨è¿”å›äº†é”™è¯¯çŠ¶æ€ç \r\n          console.error('æœåŠ¡å™¨é”™è¯¯:', error.response.status, error.response.data);\r\n          this.$message.error(`æœåŠ¡å™¨é”™è¯¯: ${error.response.status}`);\r\n        } else if (error.request) {\r\n          // è¯·æ±‚å·²å‘é€ä½†æ²¡æœ‰æ”¶åˆ°å“åº”\r\n          console.error('ç½‘ç»œé”™è¯¯:', error.request);\r\n          this.$message.error('ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨');\r\n        } else {\r\n          // å…¶ä»–é”™è¯¯\r\n          console.error('æœªçŸ¥é”™è¯¯:', error.message);\r\n          this.$message.error('åŠ è½½å¤±è´¥: ' + error.message);\r\n        }\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    \r\n    /**\r\n     * åŠ è½½æŒ‡å®šè¡¨çš„è°ƒåº¦æ•°æ®\r\n     */\r\n    async loadScheduleData(tableName) {\r\n      if (!tableName) {\r\n        console.warn('âš ï¸  è¡¨åä¸ºç©ºï¼Œæ— æ³•åŠ è½½æ•°æ®');\r\n        return;\r\n      }\r\n      \r\n      this.loading = true;\r\n      try {\r\n        console.log(`ğŸ“– åŠ è½½è°ƒåº¦æ•°æ®: ${tableName}`);\r\n        const response = await this.$axios.get(`${this.$httpUrl}/schedule_results/${tableName}`);\r\n        \r\n        // æ£€æŸ¥å“åº”æ•°æ®æ˜¯å¦å­˜åœ¨\r\n        if (!response || !response.data) {\r\n          this.$message.error('æœåŠ¡å™¨å“åº”å¼‚å¸¸');\r\n          return;\r\n        }\r\n        \r\n        if (response.data.code === 200) {\r\n          this.testScheduleData = response.data.data || [];\r\n          this.taskCount = this.testScheduleData.length;\r\n          \r\n          // è®¡ç®—å®Œå·¥æ—¶é—´\r\n          if (this.testScheduleData.length > 0) {\r\n            this.makespan = Math.max(...this.testScheduleData.map(t => t.end));\r\n          } else {\r\n            this.makespan = 0;\r\n          }\r\n          \r\n          console.log(`âœ… åŠ è½½æˆåŠŸ: ${this.taskCount} ä¸ªä»»åŠ¡, å®Œå·¥æ—¶é—´: ${this.makespan.toFixed(2)}h`);\r\n          \r\n          // é‡æ–°åŠ è½½ç”˜ç‰¹å›¾\r\n          this.loadData();\r\n          \r\n          this.$message.success(`è°ƒåº¦æ•°æ®åŠ è½½æˆåŠŸ (${this.taskCount}ä¸ªä»»åŠ¡)`);\r\n        } else {\r\n          const errorMsg = response.data.msg || 'æœªçŸ¥é”™è¯¯';\r\n          this.$message.error('åŠ è½½è°ƒåº¦æ•°æ®å¤±è´¥: ' + errorMsg);\r\n        }\r\n      } catch (error) {\r\n        // è¯¦ç»†çš„é”™è¯¯æ—¥å¿—\r\n        if (error.response) {\r\n          console.error('æœåŠ¡å™¨é”™è¯¯:', error.response.status, error.response.data);\r\n          this.$message.error(`æœåŠ¡å™¨é”™è¯¯: ${error.response.status}`);\r\n        } else if (error.request) {\r\n          console.error('ç½‘ç»œé”™è¯¯:', error.request);\r\n          this.$message.error('ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨');\r\n        } else {\r\n          console.error('æœªçŸ¥é”™è¯¯:', error.message);\r\n          this.$message.error('åŠ è½½å¤±è´¥: ' + error.message);\r\n        }\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    \r\n    /**\r\n     * å¤„ç†ä¸‹æ‹‰æ¡†é€‰æ‹©å˜åŒ–\r\n     */\r\n    handleTableChange(tableName) {\r\n      console.log(`ğŸ”„ åˆ‡æ¢è°ƒåº¦ç»“æœ: ${tableName}`);\r\n      this.loadScheduleData(tableName);\r\n    },\r\n    \r\n    /**\r\n     * åˆ·æ–°è°ƒåº¦ç»“æœåˆ—è¡¨\r\n     */\r\n    refreshScheduleList() {\r\n      console.log('ğŸ”„ åˆ·æ–°è°ƒåº¦ç»“æœåˆ—è¡¨');\r\n      this.loadScheduleResultList();\r\n    },\r\n    \r\n    /**\r\n     * åˆå§‹åŒ–DHTMLX Gantt\r\n     */\r\n    initGantt() {\r\n      // ä¸­æ–‡æœ¬åœ°åŒ–é…ç½®\r\n      gantt.i18n.setLocale({\r\n        date: {\r\n          month_full: [\"ä¸€æœˆ\", \"äºŒæœˆ\", \"ä¸‰æœˆ\", \"å››æœˆ\", \"äº”æœˆ\", \"å…­æœˆ\", \"ä¸ƒæœˆ\", \"å…«æœˆ\", \"ä¹æœˆ\", \"åæœˆ\", \"åä¸€æœˆ\", \"åäºŒæœˆ\"],\r\n          month_short: [\"1æœˆ\", \"2æœˆ\", \"3æœˆ\", \"4æœˆ\", \"5æœˆ\", \"6æœˆ\", \"7æœˆ\", \"8æœˆ\", \"9æœˆ\", \"10æœˆ\", \"11æœˆ\", \"12æœˆ\"],\r\n          day_full: [\"æ˜ŸæœŸæ—¥\", \"æ˜ŸæœŸä¸€\", \"æ˜ŸæœŸäºŒ\", \"æ˜ŸæœŸä¸‰\", \"æ˜ŸæœŸå››\", \"æ˜ŸæœŸäº”\", \"æ˜ŸæœŸå…­\"],\r\n          day_short: [\"æ—¥\", \"ä¸€\", \"äºŒ\", \"ä¸‰\", \"å››\", \"äº”\", \"å…­\"]\r\n        },\r\n        labels: {\r\n          new_task: \"æ–°ä»»åŠ¡\",\r\n          icon_save: \"ä¿å­˜\",\r\n          icon_cancel: \"å–æ¶ˆ\",\r\n          icon_details: \"è¯¦æƒ…\",\r\n          icon_edit: \"ç¼–è¾‘\",\r\n          icon_delete: \"åˆ é™¤\",\r\n          confirm_closing: \"\",\r\n          confirm_deleting: \"ç¡®å®šåˆ é™¤ä»»åŠ¡å—ï¼Ÿ\",\r\n          section_description: \"æè¿°\",\r\n          section_time: \"æ—¶é—´\",\r\n          section_type: \"ç±»å‹\",\r\n          \r\n          // å¼¹çª—æŒ‰é’®\r\n          button_save: \"ä¿å­˜\",\r\n          button_cancel: \"å–æ¶ˆ\",\r\n          button_delete: \"åˆ é™¤\"\r\n        }\r\n      });\r\n      \r\n      // åŸºç¡€é…ç½®\r\n      gantt.config.date_format = '%Y-%m-%d %H:%i';\r\n      gantt.config.xml_date = '%Y-%m-%d %H:%i';\r\n      gantt.config.scale_unit = 'day';\r\n      gantt.config.date_scale = '%Y-%m-%d';\r\n      gantt.config.subscales = [\r\n        { unit: 'hour', step: 12, date: '%H:%i' }\r\n      ];\r\n      \r\n      // è‡ªåŠ¨é«˜åº¦é…ç½®\r\n      gantt.config.autosize = 'y';  // å‚ç›´æ–¹å‘è‡ªåŠ¨è°ƒæ•´å¤§å°\r\n      gantt.config.autosize_min_height = 400;  // æœ€å°é«˜åº¦400px\r\n      \r\n      // åˆ—é…ç½®\r\n      gantt.config.columns = [\r\n        { name: 'text', label: 'ä»»åŠ¡åç§°', width: 160, tree: true },\r\n        { name: 'start_date', label: 'å¼€å§‹æ—¶é—´', width: 100, align: 'center' },\r\n        { name: 'duration', label: 'æŒç»­æ—¶é—´', width: 70, align: 'center' },\r\n        { \r\n          name: 'teamName', \r\n          label: 'æ‰€å±å›¢é˜Ÿ', \r\n          width: 70, \r\n          align: 'center',\r\n          template: function(task) {\r\n            return task.teamName || '-';\r\n          }\r\n        },\r\n        { \r\n          name: 'workers', \r\n          label: 'åˆ†é…äººæ•°', \r\n          width: 70, \r\n          align: 'center',\r\n          template: function(task) {\r\n            return task.workers ? task.workers + 'äºº' : '-';\r\n          }\r\n        }\r\n      ];\r\n      \r\n      // å·¥å…·æç¤ºé…ç½®\r\n      gantt.config.tooltip_hide_timeout = 1000;\r\n      gantt.templates.tooltip_text = (start, end, task) => {\r\n        if (task.type === 'project') return '';\r\n        \r\n        const duration = ((task.end_date - task.start_date) / (1000 * 60 * 60)).toFixed(1);\r\n        return `\r\n          <div style=\"padding: 10px; min-width: 200px;\">\r\n            <strong style=\"font-size: 14px;\">${task.text}</strong><br/>\r\n            <hr style=\"margin: 5px 0; border: none; border-top: 1px solid #ddd;\"/>\r\n            <div style=\"margin: 5px 0;\">\r\n              <span style=\"color: #666;\">å¼€å§‹æ—¶é—´ï¼š</span>\r\n              <strong>${this.formatDate(task.start_date)}</strong>\r\n            </div>\r\n            <div style=\"margin: 5px 0;\">\r\n              <span style=\"color: #666;\">ç»“æŸæ—¶é—´ï¼š</span>\r\n              <strong>${this.formatDate(task.end_date)}</strong>\r\n            </div>\r\n            <div style=\"margin: 5px 0;\">\r\n              <span style=\"color: #666;\">æŒç»­æ—¶é—´ï¼š</span>\r\n              <strong>${duration}å°æ—¶</strong>\r\n            </div>\r\n            <div style=\"margin: 5px 0;\">\r\n              <span style=\"color: #666;\">å›¢é˜Ÿï¼š</span>\r\n              <strong>${task.teamName || ''}</strong>\r\n            </div>\r\n            <div style=\"margin: 5px 0;\">\r\n              <span style=\"color: #666;\">å·¥äººæ•°ï¼š</span>\r\n              <strong>${task.workers || 0}äºº</strong>\r\n            </div>\r\n          </div>\r\n        `;\r\n      };\r\n      \r\n      // ä»»åŠ¡é¢œè‰²é…ç½®\r\n      gantt.templates.task_class = (start, end, task) => {\r\n        if (task.type === 'project') return 'gantt_project';\r\n        return `gantt_task_${task.team}`;\r\n      };\r\n      \r\n      // åˆå§‹åŒ–\r\n      gantt.init(this.$refs.ganttContainer);\r\n      \r\n      console.log('âœ… DHTMLX Gantt åˆå§‹åŒ–å®Œæˆ');\r\n    },\r\n    \r\n    /**\r\n     * åŠ è½½æ•°æ®\r\n     */\r\n    loadData() {\r\n      let ganttData;\r\n      \r\n      switch (this.viewMode) {\r\n        case 'workpoint':\r\n          ganttData = this.prepareWorkpointView();\r\n          break;\r\n        case 'team':\r\n          ganttData = this.prepareTeamView();\r\n          break;\r\n        case 'process':\r\n          ganttData = this.prepareProcessView();\r\n          break;\r\n        default:\r\n          ganttData = this.prepareWorkpointView();\r\n      }\r\n      \r\n      gantt.clearAll();\r\n      gantt.parse(ganttData);\r\n      \r\n      console.log(`âœ… åŠ è½½${this.viewMode}è§†è§’æ•°æ®ï¼Œå…±${ganttData.data.length}æ¡`);\r\n    },\r\n    \r\n    /**\r\n     * æ—¶é—´å•ä½è½¬æ—¥æœŸ\r\n     */\r\n    timeUnitToDate(timeUnit) {\r\n      const baseDate = new Date('2024-01-01T00:00:00');\r\n      const hours = timeUnit;\r\n      baseDate.setHours(baseDate.getHours() + hours);\r\n      return baseDate;\r\n    },\r\n    \r\n    /**\r\n     * æ ¼å¼åŒ–æ—¥æœŸ\r\n     */\r\n    formatDate(date) {\r\n      if (typeof date === 'string') {\r\n        date = new Date(date);\r\n      }\r\n      return date.toLocaleString('zh-CN', {\r\n        year: 'numeric',\r\n        month: '2-digit',\r\n        day: '2-digit',\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n      });\r\n    },\r\n    \r\n    /**\r\n     * æ£€æµ‹å¹¶è¡Œä»»åŠ¡ï¼ˆå¤ç”¨ä¹‹å‰çš„é€»è¾‘ï¼‰\r\n     */\r\n    detectParallelTasks(tasks) {\r\n      if (!tasks || tasks.length === 0) return [];\r\n      \r\n      const sorted = [...tasks].sort((a, b) => a.start - b.start);\r\n      const layers = [];\r\n      const result = [];\r\n      \r\n      sorted.forEach(task => {\r\n        let layerIndex = layers.findIndex(endTime => task.start >= endTime);\r\n        \r\n        if (layerIndex === -1) {\r\n          layerIndex = layers.length;\r\n          layers.push(task.end);\r\n        } else {\r\n          layers[layerIndex] = task.end;\r\n        }\r\n        \r\n        result.push({\r\n          ...task,\r\n          layer: layerIndex,\r\n          totalLayers: 0\r\n        });\r\n      });\r\n      \r\n      const maxLayer = Math.max(...result.map(t => t.layer));\r\n      result.forEach(t => t.totalLayers = maxLayer + 1);\r\n      \r\n      return result;\r\n    },\r\n    \r\n    /**\r\n     * å‡†å¤‡è®¾å¤‡è§†è§’æ•°æ®\r\n     */\r\n    prepareWorkpointView() {\r\n      const data = [];\r\n      const links = [];\r\n      \r\n      // æŒ‰è®¾å¤‡åˆ†ç»„\r\n      const grouped = {};\r\n      this.testScheduleData.forEach(task => {\r\n        const wpId = task.workpoint_id;\r\n        if (!grouped[wpId]) {\r\n          grouped[wpId] = [];\r\n        }\r\n        grouped[wpId].push(task);\r\n      });\r\n      \r\n      // ç”ŸæˆDHTMLXæ•°æ®\r\n      Object.keys(grouped).sort().forEach(wpId => {\r\n        const wpTasks = grouped[wpId];\r\n        const wpName = wpTasks[0].workpoint_name;\r\n        \r\n        // è½¬æ¢æ˜¾ç¤ºåç§°ï¼šå·¥ä½œç‚¹X -> è®¾å¤‡X\r\n        const displayName = wpName.replace('å·¥ä½œç‚¹', 'è®¾å¤‡');\r\n        \r\n        // æ·»åŠ çˆ¶èŠ‚ç‚¹ï¼ˆè®¾å¤‡ï¼‰\r\n        data.push({\r\n          id: wpId,\r\n          text: displayName,\r\n          type: 'project',\r\n          open: true\r\n        });\r\n        \r\n        // æ£€æµ‹å¹¶è¡Œä»»åŠ¡\r\n        const layered = this.detectParallelTasks(wpTasks);\r\n        \r\n        // æ·»åŠ ä»»åŠ¡\r\n        layered.forEach(task => {\r\n          data.push({\r\n            id: `task_${task.id}`,\r\n            text: task.name,\r\n            start_date: this.formatGanttDate(this.timeUnitToDate(task.start)),\r\n            end_date: this.formatGanttDate(this.timeUnitToDate(task.end)),\r\n            duration: ((task.end - task.start) / 24).toFixed(1), // è½¬æ¢ä¸ºå¤©\r\n            parent: wpId,\r\n            team: task.team,\r\n            teamName: this.teamNames[task.team],\r\n            workers: task.workers,\r\n            layer: task.layer,\r\n            type: 'task'\r\n          });\r\n        });\r\n      });\r\n      \r\n      return { data, links };\r\n    },\r\n    \r\n    /**\r\n     * å‡†å¤‡å›¢é˜Ÿè§†è§’æ•°æ®\r\n     */\r\n    prepareTeamView() {\r\n      const data = [];\r\n      const links = [];\r\n      \r\n      // æŒ‰å›¢é˜Ÿåˆ†ç»„\r\n      const grouped = {};\r\n      this.testScheduleData.forEach(task => {\r\n        const team = task.team;\r\n        if (!grouped[team]) {\r\n          grouped[team] = [];\r\n        }\r\n        grouped[team].push(task);\r\n      });\r\n      \r\n      // ç”ŸæˆDHTMLXæ•°æ®\r\n      Object.keys(grouped).sort().forEach(team => {\r\n        const teamTasks = grouped[team];\r\n        const teamName = this.teamNames[team];\r\n        \r\n        // æ·»åŠ çˆ¶èŠ‚ç‚¹ï¼ˆå›¢é˜Ÿï¼‰\r\n        data.push({\r\n          id: team,\r\n          text: teamName,\r\n          type: 'project',\r\n          open: true\r\n        });\r\n        \r\n        // æ£€æµ‹å¹¶è¡Œä»»åŠ¡\r\n        const layered = this.detectParallelTasks(teamTasks);\r\n        \r\n        // æ·»åŠ ä»»åŠ¡\r\n        layered.forEach(task => {\r\n          data.push({\r\n            id: `task_${task.id}`,\r\n            text: task.name,\r\n            start_date: this.formatGanttDate(this.timeUnitToDate(task.start)),\r\n            end_date: this.formatGanttDate(this.timeUnitToDate(task.end)),\r\n            duration: ((task.end - task.start) / 24).toFixed(1),\r\n            parent: team,\r\n            team: task.team,\r\n            teamName: this.teamNames[task.team],\r\n            workers: task.workers,\r\n            layer: task.layer,\r\n            type: 'task'\r\n          });\r\n        });\r\n      });\r\n      \r\n      return { data, links };\r\n    },\r\n    \r\n    /**\r\n     * å‡†å¤‡å·¥åºè§†è§’æ•°æ®\r\n     */\r\n    prepareProcessView() {\r\n      const data = [];\r\n      const links = [];\r\n      \r\n      // æŒ‰å¼€å§‹æ—¶é—´æ’åº\r\n      const sorted = [...this.testScheduleData].sort((a, b) => a.start - b.start);\r\n      \r\n      sorted.forEach(task => {\r\n        data.push({\r\n          id: `task_${task.id}`,\r\n          text: task.name,\r\n          start_date: this.formatGanttDate(this.timeUnitToDate(task.start)),\r\n          end_date: this.formatGanttDate(this.timeUnitToDate(task.end)),\r\n          duration: ((task.end - task.start) / 24).toFixed(1),\r\n          team: task.team,\r\n          teamName: this.teamNames[task.team],\r\n          workers: task.workers,\r\n          type: 'task'\r\n        });\r\n      });\r\n      \r\n      return { data, links };\r\n    },\r\n    \r\n    /**\r\n     * æ ¼å¼åŒ–DHTMLXæ—¥æœŸ\r\n     */\r\n    formatGanttDate(date) {\r\n      const year = date.getFullYear();\r\n      const month = String(date.getMonth() + 1).padStart(2, '0');\r\n      const day = String(date.getDate()).padStart(2, '0');\r\n      const hour = String(date.getHours()).padStart(2, '0');\r\n      const minute = String(date.getMinutes()).padStart(2, '0');\r\n      return `${year}-${month}-${day} ${hour}:${minute}`;\r\n    },\r\n    \r\n    /**\r\n     * åˆ‡æ¢è§†è§’\r\n     */\r\n    switchView() {\r\n      this.loadData();\r\n      this.$message.success(`å·²åˆ‡æ¢åˆ°${this.getViewName()}è§†è§’`);\r\n    },\r\n    \r\n    /**\r\n     * è·å–è§†è§’åç§°\r\n     */\r\n    getViewName() {\r\n      const names = {\r\n        'workpoint': 'è®¾å¤‡',\r\n        'team': 'å›¢é˜Ÿ',\r\n        'process': 'å·¥åº'\r\n      };\r\n      return names[this.viewMode] || 'æœªçŸ¥';\r\n    },\r\n    \r\n    /**\r\n     * æ”¹å˜ç¼©æ”¾çº§åˆ«\r\n     */\r\n    changeZoom(scale) {\r\n      switch (scale) {\r\n        case 'day':\r\n          gantt.config.scale_unit = 'day';\r\n          gantt.config.date_scale = '%Y-%m-%d';\r\n          gantt.config.subscales = [\r\n            { unit: 'hour', step: 6, date: '%H:%i' }\r\n          ];\r\n          break;\r\n        case 'week':\r\n          gantt.config.scale_unit = 'week';\r\n          gantt.config.date_scale = 'ç¬¬%Wå‘¨';\r\n          gantt.config.subscales = [\r\n            { unit: 'day', step: 1, date: '%dæ—¥' }\r\n          ];\r\n          break;\r\n        case 'month':\r\n          gantt.config.scale_unit = 'month';\r\n          gantt.config.date_scale = '%Yå¹´%mæœˆ';\r\n          gantt.config.subscales = [\r\n            { unit: 'week', step: 1, date: 'ç¬¬%Wå‘¨' }\r\n          ];\r\n          break;\r\n      }\r\n      gantt.render();\r\n      this.$message.success(`å·²åˆ‡æ¢åˆ°${scale}è§†å›¾`);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.gantt-container {\r\n  padding: 0;\r\n  background: transparent;\r\n}\r\n\r\n/* é¡µé¢å¤´éƒ¨ */\r\n.page-header {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.header-content {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  border-radius: 12px;\r\n  padding: 24px;\r\n  color: white;\r\n}\r\n\r\n.page-title {\r\n  margin: 0 0 8px 0;\r\n  font-size: 28px;\r\n  font-weight: 600;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.page-subtitle {\r\n  margin: 0;\r\n  opacity: 0.9;\r\n  font-size: 14px;\r\n}\r\n\r\n/* å·¥å…·æ  */\r\n.toolbar-section {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.toolbar-content {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 30px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.result-selector,\r\n.view-switch,\r\n.zoom-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.result-selector label,\r\n.view-switch label,\r\n.zoom-controls label {\r\n  font-weight: 600;\r\n  color: #606266;\r\n  white-space: nowrap;\r\n}\r\n\r\n.info-display {\r\n  margin-left: auto;\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n/* Ganttå®¹å™¨ */\r\n.gantt-section {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.gantt-card {\r\n  border-radius: 12px;\r\n}\r\n\r\n.dhtmlx-gantt-container {\r\n  width: 100%;\r\n  min-height: 400px;\r\n  height: auto;\r\n  position: relative;\r\n}\r\n\r\n/* ä¿¡æ¯åŒºåŸŸ */\r\n.info-section {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.test-notes {\r\n  margin-top: 20px;\r\n  padding: 15px;\r\n  background: #f0f9ff;\r\n  border-left: 4px solid #667eea;\r\n  border-radius: 4px;\r\n}\r\n\r\n.test-notes h4 {\r\n  margin: 0 0 10px 0;\r\n  color: #667eea;\r\n}\r\n\r\n.test-notes ul {\r\n  margin: 0;\r\n  padding-left: 20px;\r\n}\r\n\r\n.test-notes li {\r\n  margin: 5px 0;\r\n  color: #606266;\r\n}\r\n\r\n/* DHTMLX Ganttæ ·å¼å®šåˆ¶ */\r\n.dhtmlx-gantt-container ::v-deep .gantt_task_line {\r\n  border-radius: 4px;\r\n}\r\n\r\n.dhtmlx-gantt-container ::v-deep .gantt_project {\r\n  background-color: #818cf8 !important;\r\n  border-color: #4f46e5 !important;\r\n}\r\n\r\n/* å›¢é˜Ÿé¢œè‰² */\r\n.dhtmlx-gantt-container ::v-deep .gantt_task_team1 { background-color: #FF6B35 !important; border-color: #CC5529 !important; }\r\n.dhtmlx-gantt-container ::v-deep .gantt_task_team2 { background-color: #EF3950 !important; border-color: #BE2E42 !important; }\r\n.dhtmlx-gantt-container ::v-deep .gantt_task_team3 { background-color: #507EF7 !important; border-color: #3F64C8 !important; }\r\n.dhtmlx-gantt-container ::v-deep .gantt_task_team4 { background-color: #9B59B6 !important; border-color: #7C4792 !important; }\r\n.dhtmlx-gantt-container ::v-deep .gantt_task_team5 { background-color: #00B774 !important; border-color: #009B62 !important; }\r\n.dhtmlx-gantt-container ::v-deep .gantt_task_team6 { background-color: #F39C12 !important; border-color: #C27D0E !important; }\r\n\r\n.dhtmlx-gantt-container ::v-deep .gantt_grid_scale {\r\n  background-color: #667eea;\r\n  color: white;\r\n  font-weight: 600;\r\n}\r\n\r\n.dhtmlx-gantt-container ::v-deep .gantt_task_scale {\r\n  background-color: #667eea;\r\n  color: white;\r\n  font-weight: 600;\r\n}\r\n\r\n.dhtmlx-gantt-container ::v-deep .gantt_grid_head_cell {\r\n  color: white;\r\n}\r\n</style>\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}